function ene(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const l=Object.getOwnPropertyDescriptor(n,i);l&&Object.defineProperty(e,i,l.get?l:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();var _1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var V9={exports:{}},oI={},N9={exports:{}},Kn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ob=Symbol.for("react.element"),tne=Symbol.for("react.portal"),rne=Symbol.for("react.fragment"),nne=Symbol.for("react.strict_mode"),ine=Symbol.for("react.profiler"),one=Symbol.for("react.provider"),sne=Symbol.for("react.context"),ane=Symbol.for("react.forward_ref"),lne=Symbol.for("react.suspense"),cne=Symbol.for("react.memo"),une=Symbol.for("react.lazy"),pV=Symbol.iterator;function hne(e){return e===null||typeof e!="object"?null:(e=pV&&e[pV]||e["@@iterator"],typeof e=="function"?e:null)}var Q9={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H9=Object.assign,j9={};function Zy(e,t,r){this.props=e,this.context=t,this.refs=j9,this.updater=r||Q9}Zy.prototype.isReactComponent={};Zy.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zy.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function G9(){}G9.prototype=Zy.prototype;function F2(e,t,r){this.props=e,this.context=t,this.refs=j9,this.updater=r||Q9}var P2=F2.prototype=new G9;P2.constructor=F2;H9(P2,Zy.prototype);P2.isPureReactComponent=!0;var mV=Array.isArray,K9=Object.prototype.hasOwnProperty,M2={current:null},W9={key:!0,ref:!0,__self:!0,__source:!0};function q9(e,t,r){var n,i={},l=null,h=null;if(t!=null)for(n in t.ref!==void 0&&(h=t.ref),t.key!==void 0&&(l=""+t.key),t)K9.call(t,n)&&!W9.hasOwnProperty(n)&&(i[n]=t[n]);var p=arguments.length-2;if(p===1)i.children=r;else if(1<p){for(var o=Array(p),_=0;_<p;_++)o[_]=arguments[_+2];i.children=o}if(e&&e.defaultProps)for(n in p=e.defaultProps,p)i[n]===void 0&&(i[n]=p[n]);return{$$typeof:Ob,type:e,key:l,ref:h,props:i,_owner:M2.current}}function Ane(e,t){return{$$typeof:Ob,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function R2(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ob}function dne(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var gV=/\/+/g;function IM(e,t){return typeof e=="object"&&e!==null&&e.key!=null?dne(""+e.key):t.toString(36)}function TS(e,t,r,n,i){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var h=!1;if(e===null)h=!0;else switch(l){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case Ob:case tne:h=!0}}if(h)return h=e,i=i(h),e=n===""?"."+IM(h,0):n,mV(i)?(r="",e!=null&&(r=e.replace(gV,"$&/")+"/"),TS(i,t,r,"",function(_){return _})):i!=null&&(R2(i)&&(i=Ane(i,r+(!i.key||h&&h.key===i.key?"":(""+i.key).replace(gV,"$&/")+"/")+e)),t.push(i)),1;if(h=0,n=n===""?".":n+":",mV(e))for(var p=0;p<e.length;p++){l=e[p];var o=n+IM(l,p);h+=TS(l,t,r,o,i)}else if(o=hne(e),typeof o=="function")for(e=o.call(e),p=0;!(l=e.next()).done;)l=l.value,o=n+IM(l,p++),h+=TS(l,t,r,o,i);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return h}function tC(e,t,r){if(e==null)return e;var n=[],i=0;return TS(e,n,"","",function(l){return t.call(r,l,i++)}),n}function fne(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var yl={current:null},IS={transition:null},pne={ReactCurrentDispatcher:yl,ReactCurrentBatchConfig:IS,ReactCurrentOwner:M2};function X9(){throw Error("act(...) is not supported in production builds of React.")}Kn.Children={map:tC,forEach:function(e,t,r){tC(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return tC(e,function(){t++}),t},toArray:function(e){return tC(e,function(t){return t})||[]},only:function(e){if(!R2(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Kn.Component=Zy;Kn.Fragment=rne;Kn.Profiler=ine;Kn.PureComponent=F2;Kn.StrictMode=nne;Kn.Suspense=lne;Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pne;Kn.act=X9;Kn.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=H9({},e.props),i=e.key,l=e.ref,h=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,h=M2.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var p=e.type.defaultProps;for(o in t)K9.call(t,o)&&!W9.hasOwnProperty(o)&&(n[o]=t[o]===void 0&&p!==void 0?p[o]:t[o])}var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){p=Array(o);for(var _=0;_<o;_++)p[_]=arguments[_+2];n.children=p}return{$$typeof:Ob,type:e.type,key:i,ref:l,props:n,_owner:h}};Kn.createContext=function(e){return e={$$typeof:sne,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:one,_context:e},e.Consumer=e};Kn.createElement=q9;Kn.createFactory=function(e){var t=q9.bind(null,e);return t.type=e,t};Kn.createRef=function(){return{current:null}};Kn.forwardRef=function(e){return{$$typeof:ane,render:e}};Kn.isValidElement=R2;Kn.lazy=function(e){return{$$typeof:une,_payload:{_status:-1,_result:e},_init:fne}};Kn.memo=function(e,t){return{$$typeof:cne,type:e,compare:t===void 0?null:t}};Kn.startTransition=function(e){var t=IS.transition;IS.transition={};try{e()}finally{IS.transition=t}};Kn.unstable_act=X9;Kn.useCallback=function(e,t){return yl.current.useCallback(e,t)};Kn.useContext=function(e){return yl.current.useContext(e)};Kn.useDebugValue=function(){};Kn.useDeferredValue=function(e){return yl.current.useDeferredValue(e)};Kn.useEffect=function(e,t){return yl.current.useEffect(e,t)};Kn.useId=function(){return yl.current.useId()};Kn.useImperativeHandle=function(e,t,r){return yl.current.useImperativeHandle(e,t,r)};Kn.useInsertionEffect=function(e,t){return yl.current.useInsertionEffect(e,t)};Kn.useLayoutEffect=function(e,t){return yl.current.useLayoutEffect(e,t)};Kn.useMemo=function(e,t){return yl.current.useMemo(e,t)};Kn.useReducer=function(e,t,r){return yl.current.useReducer(e,t,r)};Kn.useRef=function(e){return yl.current.useRef(e)};Kn.useState=function(e){return yl.current.useState(e)};Kn.useSyncExternalStore=function(e,t,r){return yl.current.useSyncExternalStore(e,t,r)};Kn.useTransition=function(){return yl.current.useTransition()};Kn.version="18.3.1";N9.exports=Kn;var Re=N9.exports;const Yh=Lb(Re),yV=ene({__proto__:null,default:Yh},[Re]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mne=Re,gne=Symbol.for("react.element"),yne=Symbol.for("react.fragment"),vne=Object.prototype.hasOwnProperty,_ne=mne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xne={key:!0,ref:!0,__self:!0,__source:!0};function Z9(e,t,r){var n,i={},l=null,h=null;r!==void 0&&(l=""+r),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(h=t.ref);for(n in t)vne.call(t,n)&&!xne.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:gne,type:e,key:l,ref:h,props:i,_owner:_ne.current}}oI.Fragment=yne;oI.jsx=Z9;oI.jsxs=Z9;V9.exports=oI;var $e=V9.exports,Y9={exports:{}},vc={},J9={exports:{}},$9={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Mt,Yt){var ht=Mt.length;Mt.push(Yt);e:for(;0<ht;){var lr=ht-1>>>1,ir=Mt[lr];if(0<i(ir,Yt))Mt[lr]=Yt,Mt[ht]=ir,ht=lr;else break e}}function r(Mt){return Mt.length===0?null:Mt[0]}function n(Mt){if(Mt.length===0)return null;var Yt=Mt[0],ht=Mt.pop();if(ht!==Yt){Mt[0]=ht;e:for(var lr=0,ir=Mt.length,$t=ir>>>1;lr<$t;){var Vt=2*(lr+1)-1,Dr=Mt[Vt],kr=Vt+1,Zr=Mt[kr];if(0>i(Dr,ht))kr<ir&&0>i(Zr,Dr)?(Mt[lr]=Zr,Mt[kr]=ht,lr=kr):(Mt[lr]=Dr,Mt[Vt]=ht,lr=Vt);else if(kr<ir&&0>i(Zr,ht))Mt[lr]=Zr,Mt[kr]=ht,lr=kr;else break e}}return Yt}function i(Mt,Yt){var ht=Mt.sortIndex-Yt.sortIndex;return ht!==0?ht:Mt.id-Yt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var h=Date,p=h.now();e.unstable_now=function(){return h.now()-p}}var o=[],_=[],C=1,M=null,L=3,z=!1,j=!1,K=!1,$=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ie(Mt){for(var Yt=r(_);Yt!==null;){if(Yt.callback===null)n(_);else if(Yt.startTime<=Mt)n(_),Yt.sortIndex=Yt.expirationTime,t(o,Yt);else break;Yt=r(_)}}function fe(Mt){if(K=!1,ie(Mt),!j)if(r(o)!==null)j=!0,gt(me);else{var Yt=r(_);Yt!==null&&jt(fe,Yt.startTime-Mt)}}function me(Mt,Yt){j=!1,K&&(K=!1,q(re),re=-1),z=!0;var ht=L;try{for(ie(Yt),M=r(o);M!==null&&(!(M.expirationTime>Yt)||Mt&&!ve());){var lr=M.callback;if(typeof lr=="function"){M.callback=null,L=M.priorityLevel;var ir=lr(M.expirationTime<=Yt);Yt=e.unstable_now(),typeof ir=="function"?M.callback=ir:M===r(o)&&n(o),ie(Yt)}else n(o);M=r(o)}if(M!==null)var $t=!0;else{var Vt=r(_);Vt!==null&&jt(fe,Vt.startTime-Yt),$t=!1}return $t}finally{M=null,L=ht,z=!1}}var ye=!1,se=null,re=-1,de=5,_e=-1;function ve(){return!(e.unstable_now()-_e<de)}function Pe(){if(se!==null){var Mt=e.unstable_now();_e=Mt;var Yt=!0;try{Yt=se(!0,Mt)}finally{Yt?Ee():(ye=!1,se=null)}}else ye=!1}var Ee;if(typeof ee=="function")Ee=function(){ee(Pe)};else if(typeof MessageChannel<"u"){var Ht=new MessageChannel,Xt=Ht.port2;Ht.port1.onmessage=Pe,Ee=function(){Xt.postMessage(null)}}else Ee=function(){$(Pe,0)};function gt(Mt){se=Mt,ye||(ye=!0,Ee())}function jt(Mt,Yt){re=$(function(){Mt(e.unstable_now())},Yt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Mt){Mt.callback=null},e.unstable_continueExecution=function(){j||z||(j=!0,gt(me))},e.unstable_forceFrameRate=function(Mt){0>Mt||125<Mt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):de=0<Mt?Math.floor(1e3/Mt):5},e.unstable_getCurrentPriorityLevel=function(){return L},e.unstable_getFirstCallbackNode=function(){return r(o)},e.unstable_next=function(Mt){switch(L){case 1:case 2:case 3:var Yt=3;break;default:Yt=L}var ht=L;L=Yt;try{return Mt()}finally{L=ht}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Mt,Yt){switch(Mt){case 1:case 2:case 3:case 4:case 5:break;default:Mt=3}var ht=L;L=Mt;try{return Yt()}finally{L=ht}},e.unstable_scheduleCallback=function(Mt,Yt,ht){var lr=e.unstable_now();switch(typeof ht=="object"&&ht!==null?(ht=ht.delay,ht=typeof ht=="number"&&0<ht?lr+ht:lr):ht=lr,Mt){case 1:var ir=-1;break;case 2:ir=250;break;case 5:ir=1073741823;break;case 4:ir=1e4;break;default:ir=5e3}return ir=ht+ir,Mt={id:C++,callback:Yt,priorityLevel:Mt,startTime:ht,expirationTime:ir,sortIndex:-1},ht>lr?(Mt.sortIndex=ht,t(_,Mt),r(o)===null&&Mt===r(_)&&(K?(q(re),re=-1):K=!0,jt(fe,ht-lr))):(Mt.sortIndex=ir,t(o,Mt),j||z||(j=!0,gt(me))),Mt},e.unstable_shouldYield=ve,e.unstable_wrapCallback=function(Mt){var Yt=L;return function(){var ht=L;L=Yt;try{return Mt.apply(this,arguments)}finally{L=ht}}}})($9);J9.exports=$9;var bne=J9.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wne=Re,pc=bne;function ar(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eG=new Set,Dx={};function Xm(e,t){Cy(e,t),Cy(e+"Capture",t)}function Cy(e,t){for(Dx[e]=t,e=0;e<t.length;e++)eG.add(t[e])}var id=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ok=Object.prototype.hasOwnProperty,Bne=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vV={},_V={};function Cne(e){return Ok.call(_V,e)?!0:Ok.call(vV,e)?!1:Bne.test(e)?_V[e]=!0:(vV[e]=!0,!1)}function Sne(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ene(e,t,r,n){if(t===null||typeof t>"u"||Sne(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function vl(e,t,r,n,i,l,h){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=h}var Ma={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ma[e]=new vl(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ma[t]=new vl(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ma[e]=new vl(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ma[e]=new vl(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ma[e]=new vl(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ma[e]=new vl(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ma[e]=new vl(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ma[e]=new vl(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ma[e]=new vl(e,5,!1,e.toLowerCase(),null,!1,!1)});var k2=/[\-:]([a-z])/g;function D2(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(k2,D2);Ma[t]=new vl(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(k2,D2);Ma[t]=new vl(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(k2,D2);Ma[t]=new vl(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ma[e]=new vl(e,1,!1,e.toLowerCase(),null,!1,!1)});Ma.xlinkHref=new vl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ma[e]=new vl(e,1,!1,e.toLowerCase(),null,!0,!0)});function L2(e,t,r,n){var i=Ma.hasOwnProperty(t)?Ma[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ene(t,r,i,n)&&(r=null),n||i===null?Cne(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var dd=wne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rC=Symbol.for("react.element"),M0=Symbol.for("react.portal"),R0=Symbol.for("react.fragment"),O2=Symbol.for("react.strict_mode"),Uk=Symbol.for("react.profiler"),tG=Symbol.for("react.provider"),rG=Symbol.for("react.context"),U2=Symbol.for("react.forward_ref"),zk=Symbol.for("react.suspense"),Vk=Symbol.for("react.suspense_list"),z2=Symbol.for("react.memo"),hf=Symbol.for("react.lazy"),nG=Symbol.for("react.offscreen"),xV=Symbol.iterator;function H_(e){return e===null||typeof e!="object"?null:(e=xV&&e[xV]||e["@@iterator"],typeof e=="function"?e:null)}var jo=Object.assign,FM;function x1(e){if(FM===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);FM=t&&t[1]||""}return`
`+FM+e}var PM=!1;function MM(e,t){if(!e||PM)return"";PM=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(_){var n=_}Reflect.construct(e,[],t)}else{try{t.call()}catch(_){n=_}e.call(t.prototype)}else{try{throw Error()}catch(_){n=_}e()}}catch(_){if(_&&n&&typeof _.stack=="string"){for(var i=_.stack.split(`
`),l=n.stack.split(`
`),h=i.length-1,p=l.length-1;1<=h&&0<=p&&i[h]!==l[p];)p--;for(;1<=h&&0<=p;h--,p--)if(i[h]!==l[p]){if(h!==1||p!==1)do if(h--,p--,0>p||i[h]!==l[p]){var o=`
`+i[h].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}while(1<=h&&0<=p);break}}}finally{PM=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?x1(e):""}function Tne(e){switch(e.tag){case 5:return x1(e.type);case 16:return x1("Lazy");case 13:return x1("Suspense");case 19:return x1("SuspenseList");case 0:case 2:case 15:return e=MM(e.type,!1),e;case 11:return e=MM(e.type.render,!1),e;case 1:return e=MM(e.type,!0),e;default:return""}}function Nk(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case R0:return"Fragment";case M0:return"Portal";case Uk:return"Profiler";case O2:return"StrictMode";case zk:return"Suspense";case Vk:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rG:return(e.displayName||"Context")+".Consumer";case tG:return(e._context.displayName||"Context")+".Provider";case U2:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case z2:return t=e.displayName||null,t!==null?t:Nk(e.type)||"Memo";case hf:t=e._payload,e=e._init;try{return Nk(e(t))}catch{}}return null}function Ine(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nk(t);case 8:return t===O2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Kf(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function iG(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Fne(e){var t=iG(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,l=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(h){n=""+h,l.call(this,h)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(h){n=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function nC(e){e._valueTracker||(e._valueTracker=Fne(e))}function oG(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=iG(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function BE(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Qk(e,t){var r=t.checked;return jo({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function bV(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Kf(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function sG(e,t){t=t.checked,t!=null&&L2(e,"checked",t,!1)}function Hk(e,t){sG(e,t);var r=Kf(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?jk(e,t.type,r):t.hasOwnProperty("defaultValue")&&jk(e,t.type,Kf(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function wV(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function jk(e,t,r){(t!=="number"||BE(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var b1=Array.isArray;function sy(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Kf(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Gk(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ar(91));return jo({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function BV(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ar(92));if(b1(r)){if(1<r.length)throw Error(ar(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Kf(r)}}function aG(e,t){var r=Kf(t.value),n=Kf(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function CV(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function lG(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kk(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?lG(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var iC,cG=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(iC=iC||document.createElement("div"),iC.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=iC.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Lx(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var X1={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pne=["Webkit","ms","Moz","O"];Object.keys(X1).forEach(function(e){Pne.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),X1[t]=X1[e]})});function uG(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||X1.hasOwnProperty(e)&&X1[e]?(""+t).trim():t+"px"}function hG(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=uG(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var Mne=jo({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wk(e,t){if(t){if(Mne[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ar(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ar(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ar(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ar(62))}}function qk(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xk=null;function V2(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Zk=null,ay=null,ly=null;function SV(e){if(e=Vb(e)){if(typeof Zk!="function")throw Error(ar(280));var t=e.stateNode;t&&(t=uI(t),Zk(e.stateNode,e.type,t))}}function AG(e){ay?ly?ly.push(e):ly=[e]:ay=e}function dG(){if(ay){var e=ay,t=ly;if(ly=ay=null,SV(e),t)for(e=0;e<t.length;e++)SV(t[e])}}function fG(e,t){return e(t)}function pG(){}var RM=!1;function mG(e,t,r){if(RM)return e(t,r);RM=!0;try{return fG(e,t,r)}finally{RM=!1,(ay!==null||ly!==null)&&(pG(),dG())}}function Ox(e,t){var r=e.stateNode;if(r===null)return null;var n=uI(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ar(231,t,typeof r));return r}var Yk=!1;if(id)try{var j_={};Object.defineProperty(j_,"passive",{get:function(){Yk=!0}}),window.addEventListener("test",j_,j_),window.removeEventListener("test",j_,j_)}catch{Yk=!1}function Rne(e,t,r,n,i,l,h,p,o){var _=Array.prototype.slice.call(arguments,3);try{t.apply(r,_)}catch(C){this.onError(C)}}var Z1=!1,CE=null,SE=!1,Jk=null,kne={onError:function(e){Z1=!0,CE=e}};function Dne(e,t,r,n,i,l,h,p,o){Z1=!1,CE=null,Rne.apply(kne,arguments)}function Lne(e,t,r,n,i,l,h,p,o){if(Dne.apply(this,arguments),Z1){if(Z1){var _=CE;Z1=!1,CE=null}else throw Error(ar(198));SE||(SE=!0,Jk=_)}}function Zm(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function gG(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function EV(e){if(Zm(e)!==e)throw Error(ar(188))}function One(e){var t=e.alternate;if(!t){if(t=Zm(e),t===null)throw Error(ar(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var l=i.alternate;if(l===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===l.child){for(l=i.child;l;){if(l===r)return EV(i),e;if(l===n)return EV(i),t;l=l.sibling}throw Error(ar(188))}if(r.return!==n.return)r=i,n=l;else{for(var h=!1,p=i.child;p;){if(p===r){h=!0,r=i,n=l;break}if(p===n){h=!0,n=i,r=l;break}p=p.sibling}if(!h){for(p=l.child;p;){if(p===r){h=!0,r=l,n=i;break}if(p===n){h=!0,n=l,r=i;break}p=p.sibling}if(!h)throw Error(ar(189))}}if(r.alternate!==n)throw Error(ar(190))}if(r.tag!==3)throw Error(ar(188));return r.stateNode.current===r?e:t}function yG(e){return e=One(e),e!==null?vG(e):null}function vG(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=vG(e);if(t!==null)return t;e=e.sibling}return null}var _G=pc.unstable_scheduleCallback,TV=pc.unstable_cancelCallback,Une=pc.unstable_shouldYield,zne=pc.unstable_requestPaint,ds=pc.unstable_now,Vne=pc.unstable_getCurrentPriorityLevel,N2=pc.unstable_ImmediatePriority,xG=pc.unstable_UserBlockingPriority,EE=pc.unstable_NormalPriority,Nne=pc.unstable_LowPriority,bG=pc.unstable_IdlePriority,sI=null,Jh=null;function Qne(e){if(Jh&&typeof Jh.onCommitFiberRoot=="function")try{Jh.onCommitFiberRoot(sI,e,void 0,(e.current.flags&128)===128)}catch{}}var ih=Math.clz32?Math.clz32:Gne,Hne=Math.log,jne=Math.LN2;function Gne(e){return e>>>=0,e===0?32:31-(Hne(e)/jne|0)|0}var oC=64,sC=4194304;function w1(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function TE(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,l=e.pingedLanes,h=r&268435455;if(h!==0){var p=h&~i;p!==0?n=w1(p):(l&=h,l!==0&&(n=w1(l)))}else h=r&~i,h!==0?n=w1(h):l!==0&&(n=w1(l));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,l=t&-t,i>=l||i===16&&(l&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ih(t),i=1<<r,n|=e[r],t&=~i;return n}function Kne(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wne(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,l=e.pendingLanes;0<l;){var h=31-ih(l),p=1<<h,o=i[h];o===-1?(!(p&r)||p&n)&&(i[h]=Kne(p,t)):o<=t&&(e.expiredLanes|=p),l&=~p}}function $k(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function wG(){var e=oC;return oC<<=1,!(oC&4194240)&&(oC=64),e}function kM(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ub(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ih(t),e[t]=r}function qne(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-ih(r),l=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~l}}function Q2(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ih(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var Qi=0;function BG(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var CG,H2,SG,EG,TG,e4=!1,aC=[],If=null,Ff=null,Pf=null,Ux=new Map,zx=new Map,mf=[],Xne="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function IV(e,t){switch(e){case"focusin":case"focusout":If=null;break;case"dragenter":case"dragleave":Ff=null;break;case"mouseover":case"mouseout":Pf=null;break;case"pointerover":case"pointerout":Ux.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zx.delete(t.pointerId)}}function G_(e,t,r,n,i,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[i]},t!==null&&(t=Vb(t),t!==null&&H2(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Zne(e,t,r,n,i){switch(t){case"focusin":return If=G_(If,e,t,r,n,i),!0;case"dragenter":return Ff=G_(Ff,e,t,r,n,i),!0;case"mouseover":return Pf=G_(Pf,e,t,r,n,i),!0;case"pointerover":var l=i.pointerId;return Ux.set(l,G_(Ux.get(l)||null,e,t,r,n,i)),!0;case"gotpointercapture":return l=i.pointerId,zx.set(l,G_(zx.get(l)||null,e,t,r,n,i)),!0}return!1}function IG(e){var t=hm(e.target);if(t!==null){var r=Zm(t);if(r!==null){if(t=r.tag,t===13){if(t=gG(r),t!==null){e.blockedOn=t,TG(e.priority,function(){SG(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function FS(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=t4(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Xk=n,r.target.dispatchEvent(n),Xk=null}else return t=Vb(r),t!==null&&H2(t),e.blockedOn=r,!1;t.shift()}return!0}function FV(e,t,r){FS(e)&&r.delete(t)}function Yne(){e4=!1,If!==null&&FS(If)&&(If=null),Ff!==null&&FS(Ff)&&(Ff=null),Pf!==null&&FS(Pf)&&(Pf=null),Ux.forEach(FV),zx.forEach(FV)}function K_(e,t){e.blockedOn===t&&(e.blockedOn=null,e4||(e4=!0,pc.unstable_scheduleCallback(pc.unstable_NormalPriority,Yne)))}function Vx(e){function t(i){return K_(i,e)}if(0<aC.length){K_(aC[0],e);for(var r=1;r<aC.length;r++){var n=aC[r];n.blockedOn===e&&(n.blockedOn=null)}}for(If!==null&&K_(If,e),Ff!==null&&K_(Ff,e),Pf!==null&&K_(Pf,e),Ux.forEach(t),zx.forEach(t),r=0;r<mf.length;r++)n=mf[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<mf.length&&(r=mf[0],r.blockedOn===null);)IG(r),r.blockedOn===null&&mf.shift()}var cy=dd.ReactCurrentBatchConfig,IE=!0;function Jne(e,t,r,n){var i=Qi,l=cy.transition;cy.transition=null;try{Qi=1,j2(e,t,r,n)}finally{Qi=i,cy.transition=l}}function $ne(e,t,r,n){var i=Qi,l=cy.transition;cy.transition=null;try{Qi=4,j2(e,t,r,n)}finally{Qi=i,cy.transition=l}}function j2(e,t,r,n){if(IE){var i=t4(e,t,r,n);if(i===null)jM(e,t,n,FE,r),IV(e,n);else if(Zne(i,e,t,r,n))n.stopPropagation();else if(IV(e,n),t&4&&-1<Xne.indexOf(e)){for(;i!==null;){var l=Vb(i);if(l!==null&&CG(l),l=t4(e,t,r,n),l===null&&jM(e,t,n,FE,r),l===i)break;i=l}i!==null&&n.stopPropagation()}else jM(e,t,n,null,r)}}var FE=null;function t4(e,t,r,n){if(FE=null,e=V2(n),e=hm(e),e!==null)if(t=Zm(e),t===null)e=null;else if(r=t.tag,r===13){if(e=gG(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return FE=e,null}function FG(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vne()){case N2:return 1;case xG:return 4;case EE:case Nne:return 16;case bG:return 536870912;default:return 16}default:return 16}}var _f=null,G2=null,PS=null;function PG(){if(PS)return PS;var e,t=G2,r=t.length,n,i="value"in _f?_f.value:_f.textContent,l=i.length;for(e=0;e<r&&t[e]===i[e];e++);var h=r-e;for(n=1;n<=h&&t[r-n]===i[l-n];n++);return PS=i.slice(e,1<n?1-n:void 0)}function MS(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function lC(){return!0}function PV(){return!1}function _c(e){function t(r,n,i,l,h){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=l,this.target=h,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(r=e[p],this[p]=r?r(l):l[p]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?lC:PV,this.isPropagationStopped=PV,this}return jo(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=lC)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=lC)},persist:function(){},isPersistent:lC}),t}var Yy={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},K2=_c(Yy),zb=jo({},Yy,{view:0,detail:0}),eie=_c(zb),DM,LM,W_,aI=jo({},zb,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:W2,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==W_&&(W_&&e.type==="mousemove"?(DM=e.screenX-W_.screenX,LM=e.screenY-W_.screenY):LM=DM=0,W_=e),DM)},movementY:function(e){return"movementY"in e?e.movementY:LM}}),MV=_c(aI),tie=jo({},aI,{dataTransfer:0}),rie=_c(tie),nie=jo({},zb,{relatedTarget:0}),OM=_c(nie),iie=jo({},Yy,{animationName:0,elapsedTime:0,pseudoElement:0}),oie=_c(iie),sie=jo({},Yy,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),aie=_c(sie),lie=jo({},Yy,{data:0}),RV=_c(lie),cie={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uie={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hie={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Aie(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=hie[e])?!!t[e]:!1}function W2(){return Aie}var die=jo({},zb,{key:function(e){if(e.key){var t=cie[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=MS(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?uie[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:W2,charCode:function(e){return e.type==="keypress"?MS(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?MS(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fie=_c(die),pie=jo({},aI,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kV=_c(pie),mie=jo({},zb,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:W2}),gie=_c(mie),yie=jo({},Yy,{propertyName:0,elapsedTime:0,pseudoElement:0}),vie=_c(yie),_ie=jo({},aI,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xie=_c(_ie),bie=[9,13,27,32],q2=id&&"CompositionEvent"in window,Y1=null;id&&"documentMode"in document&&(Y1=document.documentMode);var wie=id&&"TextEvent"in window&&!Y1,MG=id&&(!q2||Y1&&8<Y1&&11>=Y1),DV=" ",LV=!1;function RG(e,t){switch(e){case"keyup":return bie.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kG(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var k0=!1;function Bie(e,t){switch(e){case"compositionend":return kG(t);case"keypress":return t.which!==32?null:(LV=!0,DV);case"textInput":return e=t.data,e===DV&&LV?null:e;default:return null}}function Cie(e,t){if(k0)return e==="compositionend"||!q2&&RG(e,t)?(e=PG(),PS=G2=_f=null,k0=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return MG&&t.locale!=="ko"?null:t.data;default:return null}}var Sie={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function OV(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Sie[e.type]:t==="textarea"}function DG(e,t,r,n){AG(n),t=PE(t,"onChange"),0<t.length&&(r=new K2("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var J1=null,Nx=null;function Eie(e){KG(e,0)}function lI(e){var t=O0(e);if(oG(t))return e}function Tie(e,t){if(e==="change")return t}var LG=!1;if(id){var UM;if(id){var zM="oninput"in document;if(!zM){var UV=document.createElement("div");UV.setAttribute("oninput","return;"),zM=typeof UV.oninput=="function"}UM=zM}else UM=!1;LG=UM&&(!document.documentMode||9<document.documentMode)}function zV(){J1&&(J1.detachEvent("onpropertychange",OG),Nx=J1=null)}function OG(e){if(e.propertyName==="value"&&lI(Nx)){var t=[];DG(t,Nx,e,V2(e)),mG(Eie,t)}}function Iie(e,t,r){e==="focusin"?(zV(),J1=t,Nx=r,J1.attachEvent("onpropertychange",OG)):e==="focusout"&&zV()}function Fie(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return lI(Nx)}function Pie(e,t){if(e==="click")return lI(t)}function Mie(e,t){if(e==="input"||e==="change")return lI(t)}function Rie(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ah=typeof Object.is=="function"?Object.is:Rie;function Qx(e,t){if(ah(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Ok.call(t,i)||!ah(e[i],t[i]))return!1}return!0}function VV(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function NV(e,t){var r=VV(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=VV(r)}}function UG(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?UG(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function zG(){for(var e=window,t=BE();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=BE(e.document)}return t}function X2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function kie(e){var t=zG(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&UG(r.ownerDocument.documentElement,r)){if(n!==null&&X2(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,l=Math.min(n.start,i);n=n.end===void 0?l:Math.min(n.end,i),!e.extend&&l>n&&(i=n,n=l,l=i),i=NV(r,l);var h=NV(r,n);i&&h&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==h.node||e.focusOffset!==h.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),l>n?(e.addRange(t),e.extend(h.node,h.offset)):(t.setEnd(h.node,h.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Die=id&&"documentMode"in document&&11>=document.documentMode,D0=null,r4=null,$1=null,n4=!1;function QV(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;n4||D0==null||D0!==BE(n)||(n=D0,"selectionStart"in n&&X2(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),$1&&Qx($1,n)||($1=n,n=PE(r4,"onSelect"),0<n.length&&(t=new K2("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=D0)))}function cC(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var L0={animationend:cC("Animation","AnimationEnd"),animationiteration:cC("Animation","AnimationIteration"),animationstart:cC("Animation","AnimationStart"),transitionend:cC("Transition","TransitionEnd")},VM={},VG={};id&&(VG=document.createElement("div").style,"AnimationEvent"in window||(delete L0.animationend.animation,delete L0.animationiteration.animation,delete L0.animationstart.animation),"TransitionEvent"in window||delete L0.transitionend.transition);function cI(e){if(VM[e])return VM[e];if(!L0[e])return e;var t=L0[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in VG)return VM[e]=t[r];return e}var NG=cI("animationend"),QG=cI("animationiteration"),HG=cI("animationstart"),jG=cI("transitionend"),GG=new Map,HV="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function op(e,t){GG.set(e,t),Xm(t,[e])}for(var NM=0;NM<HV.length;NM++){var QM=HV[NM],Lie=QM.toLowerCase(),Oie=QM[0].toUpperCase()+QM.slice(1);op(Lie,"on"+Oie)}op(NG,"onAnimationEnd");op(QG,"onAnimationIteration");op(HG,"onAnimationStart");op("dblclick","onDoubleClick");op("focusin","onFocus");op("focusout","onBlur");op(jG,"onTransitionEnd");Cy("onMouseEnter",["mouseout","mouseover"]);Cy("onMouseLeave",["mouseout","mouseover"]);Cy("onPointerEnter",["pointerout","pointerover"]);Cy("onPointerLeave",["pointerout","pointerover"]);Xm("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xm("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xm("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xm("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xm("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xm("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var B1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Uie=new Set("cancel close invalid load scroll toggle".split(" ").concat(B1));function jV(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Lne(n,t,void 0,e),e.currentTarget=null}function KG(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var l=void 0;if(t)for(var h=n.length-1;0<=h;h--){var p=n[h],o=p.instance,_=p.currentTarget;if(p=p.listener,o!==l&&i.isPropagationStopped())break e;jV(i,p,_),l=o}else for(h=0;h<n.length;h++){if(p=n[h],o=p.instance,_=p.currentTarget,p=p.listener,o!==l&&i.isPropagationStopped())break e;jV(i,p,_),l=o}}}if(SE)throw e=Jk,SE=!1,Jk=null,e}function go(e,t){var r=t[l4];r===void 0&&(r=t[l4]=new Set);var n=e+"__bubble";r.has(n)||(WG(t,e,2,!1),r.add(n))}function HM(e,t,r){var n=0;t&&(n|=4),WG(r,e,n,t)}var uC="_reactListening"+Math.random().toString(36).slice(2);function Hx(e){if(!e[uC]){e[uC]=!0,eG.forEach(function(r){r!=="selectionchange"&&(Uie.has(r)||HM(r,!1,e),HM(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[uC]||(t[uC]=!0,HM("selectionchange",!1,t))}}function WG(e,t,r,n){switch(FG(t)){case 1:var i=Jne;break;case 4:i=$ne;break;default:i=j2}r=i.bind(null,t,r,e),i=void 0,!Yk||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function jM(e,t,r,n,i){var l=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var h=n.tag;if(h===3||h===4){var p=n.stateNode.containerInfo;if(p===i||p.nodeType===8&&p.parentNode===i)break;if(h===4)for(h=n.return;h!==null;){var o=h.tag;if((o===3||o===4)&&(o=h.stateNode.containerInfo,o===i||o.nodeType===8&&o.parentNode===i))return;h=h.return}for(;p!==null;){if(h=hm(p),h===null)return;if(o=h.tag,o===5||o===6){n=l=h;continue e}p=p.parentNode}}n=n.return}mG(function(){var _=l,C=V2(r),M=[];e:{var L=GG.get(e);if(L!==void 0){var z=K2,j=e;switch(e){case"keypress":if(MS(r)===0)break e;case"keydown":case"keyup":z=fie;break;case"focusin":j="focus",z=OM;break;case"focusout":j="blur",z=OM;break;case"beforeblur":case"afterblur":z=OM;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=MV;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=rie;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=gie;break;case NG:case QG:case HG:z=oie;break;case jG:z=vie;break;case"scroll":z=eie;break;case"wheel":z=xie;break;case"copy":case"cut":case"paste":z=aie;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=kV}var K=(t&4)!==0,$=!K&&e==="scroll",q=K?L!==null?L+"Capture":null:L;K=[];for(var ee=_,ie;ee!==null;){ie=ee;var fe=ie.stateNode;if(ie.tag===5&&fe!==null&&(ie=fe,q!==null&&(fe=Ox(ee,q),fe!=null&&K.push(jx(ee,fe,ie)))),$)break;ee=ee.return}0<K.length&&(L=new z(L,j,null,r,C),M.push({event:L,listeners:K}))}}if(!(t&7)){e:{if(L=e==="mouseover"||e==="pointerover",z=e==="mouseout"||e==="pointerout",L&&r!==Xk&&(j=r.relatedTarget||r.fromElement)&&(hm(j)||j[od]))break e;if((z||L)&&(L=C.window===C?C:(L=C.ownerDocument)?L.defaultView||L.parentWindow:window,z?(j=r.relatedTarget||r.toElement,z=_,j=j?hm(j):null,j!==null&&($=Zm(j),j!==$||j.tag!==5&&j.tag!==6)&&(j=null)):(z=null,j=_),z!==j)){if(K=MV,fe="onMouseLeave",q="onMouseEnter",ee="mouse",(e==="pointerout"||e==="pointerover")&&(K=kV,fe="onPointerLeave",q="onPointerEnter",ee="pointer"),$=z==null?L:O0(z),ie=j==null?L:O0(j),L=new K(fe,ee+"leave",z,r,C),L.target=$,L.relatedTarget=ie,fe=null,hm(C)===_&&(K=new K(q,ee+"enter",j,r,C),K.target=ie,K.relatedTarget=$,fe=K),$=fe,z&&j)t:{for(K=z,q=j,ee=0,ie=K;ie;ie=d0(ie))ee++;for(ie=0,fe=q;fe;fe=d0(fe))ie++;for(;0<ee-ie;)K=d0(K),ee--;for(;0<ie-ee;)q=d0(q),ie--;for(;ee--;){if(K===q||q!==null&&K===q.alternate)break t;K=d0(K),q=d0(q)}K=null}else K=null;z!==null&&GV(M,L,z,K,!1),j!==null&&$!==null&&GV(M,$,j,K,!0)}}e:{if(L=_?O0(_):window,z=L.nodeName&&L.nodeName.toLowerCase(),z==="select"||z==="input"&&L.type==="file")var me=Tie;else if(OV(L))if(LG)me=Mie;else{me=Fie;var ye=Iie}else(z=L.nodeName)&&z.toLowerCase()==="input"&&(L.type==="checkbox"||L.type==="radio")&&(me=Pie);if(me&&(me=me(e,_))){DG(M,me,r,C);break e}ye&&ye(e,L,_),e==="focusout"&&(ye=L._wrapperState)&&ye.controlled&&L.type==="number"&&jk(L,"number",L.value)}switch(ye=_?O0(_):window,e){case"focusin":(OV(ye)||ye.contentEditable==="true")&&(D0=ye,r4=_,$1=null);break;case"focusout":$1=r4=D0=null;break;case"mousedown":n4=!0;break;case"contextmenu":case"mouseup":case"dragend":n4=!1,QV(M,r,C);break;case"selectionchange":if(Die)break;case"keydown":case"keyup":QV(M,r,C)}var se;if(q2)e:{switch(e){case"compositionstart":var re="onCompositionStart";break e;case"compositionend":re="onCompositionEnd";break e;case"compositionupdate":re="onCompositionUpdate";break e}re=void 0}else k0?RG(e,r)&&(re="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(re="onCompositionStart");re&&(MG&&r.locale!=="ko"&&(k0||re!=="onCompositionStart"?re==="onCompositionEnd"&&k0&&(se=PG()):(_f=C,G2="value"in _f?_f.value:_f.textContent,k0=!0)),ye=PE(_,re),0<ye.length&&(re=new RV(re,e,null,r,C),M.push({event:re,listeners:ye}),se?re.data=se:(se=kG(r),se!==null&&(re.data=se)))),(se=wie?Bie(e,r):Cie(e,r))&&(_=PE(_,"onBeforeInput"),0<_.length&&(C=new RV("onBeforeInput","beforeinput",null,r,C),M.push({event:C,listeners:_}),C.data=se))}KG(M,t)})}function jx(e,t,r){return{instance:e,listener:t,currentTarget:r}}function PE(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,l=i.stateNode;i.tag===5&&l!==null&&(i=l,l=Ox(e,r),l!=null&&n.unshift(jx(e,l,i)),l=Ox(e,t),l!=null&&n.push(jx(e,l,i))),e=e.return}return n}function d0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function GV(e,t,r,n,i){for(var l=t._reactName,h=[];r!==null&&r!==n;){var p=r,o=p.alternate,_=p.stateNode;if(o!==null&&o===n)break;p.tag===5&&_!==null&&(p=_,i?(o=Ox(r,l),o!=null&&h.unshift(jx(r,o,p))):i||(o=Ox(r,l),o!=null&&h.push(jx(r,o,p)))),r=r.return}h.length!==0&&e.push({event:t,listeners:h})}var zie=/\r\n?/g,Vie=/\u0000|\uFFFD/g;function KV(e){return(typeof e=="string"?e:""+e).replace(zie,`
`).replace(Vie,"")}function hC(e,t,r){if(t=KV(t),KV(e)!==t&&r)throw Error(ar(425))}function ME(){}var i4=null,o4=null;function s4(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var a4=typeof setTimeout=="function"?setTimeout:void 0,Nie=typeof clearTimeout=="function"?clearTimeout:void 0,WV=typeof Promise=="function"?Promise:void 0,Qie=typeof queueMicrotask=="function"?queueMicrotask:typeof WV<"u"?function(e){return WV.resolve(null).then(e).catch(Hie)}:a4;function Hie(e){setTimeout(function(){throw e})}function GM(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),Vx(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Vx(t)}function Mf(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function qV(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Jy=Math.random().toString(36).slice(2),Gh="__reactFiber$"+Jy,Gx="__reactProps$"+Jy,od="__reactContainer$"+Jy,l4="__reactEvents$"+Jy,jie="__reactListeners$"+Jy,Gie="__reactHandles$"+Jy;function hm(e){var t=e[Gh];if(t)return t;for(var r=e.parentNode;r;){if(t=r[od]||r[Gh]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=qV(e);e!==null;){if(r=e[Gh])return r;e=qV(e)}return t}e=r,r=e.parentNode}return null}function Vb(e){return e=e[Gh]||e[od],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function O0(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ar(33))}function uI(e){return e[Gx]||null}var c4=[],U0=-1;function sp(e){return{current:e}}function _o(e){0>U0||(e.current=c4[U0],c4[U0]=null,U0--)}function co(e,t){U0++,c4[U0]=e.current,e.current=t}var Wf={},$a=sp(Wf),Vl=sp(!1),Pm=Wf;function Sy(e,t){var r=e.type.contextTypes;if(!r)return Wf;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},l;for(l in r)i[l]=t[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Nl(e){return e=e.childContextTypes,e!=null}function RE(){_o(Vl),_o($a)}function XV(e,t,r){if($a.current!==Wf)throw Error(ar(168));co($a,t),co(Vl,r)}function qG(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(ar(108,Ine(e)||"Unknown",i));return jo({},r,n)}function kE(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Wf,Pm=$a.current,co($a,e),co(Vl,Vl.current),!0}function ZV(e,t,r){var n=e.stateNode;if(!n)throw Error(ar(169));r?(e=qG(e,t,Pm),n.__reactInternalMemoizedMergedChildContext=e,_o(Vl),_o($a),co($a,e)):_o(Vl),co(Vl,r)}var LA=null,hI=!1,KM=!1;function XG(e){LA===null?LA=[e]:LA.push(e)}function Kie(e){hI=!0,XG(e)}function ap(){if(!KM&&LA!==null){KM=!0;var e=0,t=Qi;try{var r=LA;for(Qi=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}LA=null,hI=!1}catch(i){throw LA!==null&&(LA=LA.slice(e+1)),_G(N2,ap),i}finally{Qi=t,KM=!1}}return null}var z0=[],V0=0,DE=null,LE=0,Jc=[],$c=0,Mm=null,NA=1,QA="";function rm(e,t){z0[V0++]=LE,z0[V0++]=DE,DE=e,LE=t}function ZG(e,t,r){Jc[$c++]=NA,Jc[$c++]=QA,Jc[$c++]=Mm,Mm=e;var n=NA;e=QA;var i=32-ih(n)-1;n&=~(1<<i),r+=1;var l=32-ih(t)+i;if(30<l){var h=i-i%5;l=(n&(1<<h)-1).toString(32),n>>=h,i-=h,NA=1<<32-ih(t)+i|r<<i|n,QA=l+e}else NA=1<<l|r<<i|n,QA=e}function Z2(e){e.return!==null&&(rm(e,1),ZG(e,1,0))}function Y2(e){for(;e===DE;)DE=z0[--V0],z0[V0]=null,LE=z0[--V0],z0[V0]=null;for(;e===Mm;)Mm=Jc[--$c],Jc[$c]=null,QA=Jc[--$c],Jc[$c]=null,NA=Jc[--$c],Jc[$c]=null}var hc=null,ac=null,To=!1,Yu=null;function YG(e,t){var r=nu(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function YV(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,hc=e,ac=Mf(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,hc=e,ac=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Mm!==null?{id:NA,overflow:QA}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=nu(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,hc=e,ac=null,!0):!1;default:return!1}}function u4(e){return(e.mode&1)!==0&&(e.flags&128)===0}function h4(e){if(To){var t=ac;if(t){var r=t;if(!YV(e,t)){if(u4(e))throw Error(ar(418));t=Mf(r.nextSibling);var n=hc;t&&YV(e,t)?YG(n,r):(e.flags=e.flags&-4097|2,To=!1,hc=e)}}else{if(u4(e))throw Error(ar(418));e.flags=e.flags&-4097|2,To=!1,hc=e}}}function JV(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;hc=e}function AC(e){if(e!==hc)return!1;if(!To)return JV(e),To=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!s4(e.type,e.memoizedProps)),t&&(t=ac)){if(u4(e))throw JG(),Error(ar(418));for(;t;)YG(e,t),t=Mf(t.nextSibling)}if(JV(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ar(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ac=Mf(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ac=null}}else ac=hc?Mf(e.stateNode.nextSibling):null;return!0}function JG(){for(var e=ac;e;)e=Mf(e.nextSibling)}function Ey(){ac=hc=null,To=!1}function J2(e){Yu===null?Yu=[e]:Yu.push(e)}var Wie=dd.ReactCurrentBatchConfig;function q_(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ar(309));var n=r.stateNode}if(!n)throw Error(ar(147,e));var i=n,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(h){var p=i.refs;h===null?delete p[l]:p[l]=h},t._stringRef=l,t)}if(typeof e!="string")throw Error(ar(284));if(!r._owner)throw Error(ar(290,e))}return e}function dC(e,t){throw e=Object.prototype.toString.call(t),Error(ar(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $V(e){var t=e._init;return t(e._payload)}function $G(e){function t(q,ee){if(e){var ie=q.deletions;ie===null?(q.deletions=[ee],q.flags|=16):ie.push(ee)}}function r(q,ee){if(!e)return null;for(;ee!==null;)t(q,ee),ee=ee.sibling;return null}function n(q,ee){for(q=new Map;ee!==null;)ee.key!==null?q.set(ee.key,ee):q.set(ee.index,ee),ee=ee.sibling;return q}function i(q,ee){return q=Lf(q,ee),q.index=0,q.sibling=null,q}function l(q,ee,ie){return q.index=ie,e?(ie=q.alternate,ie!==null?(ie=ie.index,ie<ee?(q.flags|=2,ee):ie):(q.flags|=2,ee)):(q.flags|=1048576,ee)}function h(q){return e&&q.alternate===null&&(q.flags|=2),q}function p(q,ee,ie,fe){return ee===null||ee.tag!==6?(ee=$M(ie,q.mode,fe),ee.return=q,ee):(ee=i(ee,ie),ee.return=q,ee)}function o(q,ee,ie,fe){var me=ie.type;return me===R0?C(q,ee,ie.props.children,fe,ie.key):ee!==null&&(ee.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===hf&&$V(me)===ee.type)?(fe=i(ee,ie.props),fe.ref=q_(q,ee,ie),fe.return=q,fe):(fe=zS(ie.type,ie.key,ie.props,null,q.mode,fe),fe.ref=q_(q,ee,ie),fe.return=q,fe)}function _(q,ee,ie,fe){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==ie.containerInfo||ee.stateNode.implementation!==ie.implementation?(ee=eR(ie,q.mode,fe),ee.return=q,ee):(ee=i(ee,ie.children||[]),ee.return=q,ee)}function C(q,ee,ie,fe,me){return ee===null||ee.tag!==7?(ee=xm(ie,q.mode,fe,me),ee.return=q,ee):(ee=i(ee,ie),ee.return=q,ee)}function M(q,ee,ie){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=$M(""+ee,q.mode,ie),ee.return=q,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case rC:return ie=zS(ee.type,ee.key,ee.props,null,q.mode,ie),ie.ref=q_(q,null,ee),ie.return=q,ie;case M0:return ee=eR(ee,q.mode,ie),ee.return=q,ee;case hf:var fe=ee._init;return M(q,fe(ee._payload),ie)}if(b1(ee)||H_(ee))return ee=xm(ee,q.mode,ie,null),ee.return=q,ee;dC(q,ee)}return null}function L(q,ee,ie,fe){var me=ee!==null?ee.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number")return me!==null?null:p(q,ee,""+ie,fe);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case rC:return ie.key===me?o(q,ee,ie,fe):null;case M0:return ie.key===me?_(q,ee,ie,fe):null;case hf:return me=ie._init,L(q,ee,me(ie._payload),fe)}if(b1(ie)||H_(ie))return me!==null?null:C(q,ee,ie,fe,null);dC(q,ie)}return null}function z(q,ee,ie,fe,me){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return q=q.get(ie)||null,p(ee,q,""+fe,me);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case rC:return q=q.get(fe.key===null?ie:fe.key)||null,o(ee,q,fe,me);case M0:return q=q.get(fe.key===null?ie:fe.key)||null,_(ee,q,fe,me);case hf:var ye=fe._init;return z(q,ee,ie,ye(fe._payload),me)}if(b1(fe)||H_(fe))return q=q.get(ie)||null,C(ee,q,fe,me,null);dC(ee,fe)}return null}function j(q,ee,ie,fe){for(var me=null,ye=null,se=ee,re=ee=0,de=null;se!==null&&re<ie.length;re++){se.index>re?(de=se,se=null):de=se.sibling;var _e=L(q,se,ie[re],fe);if(_e===null){se===null&&(se=de);break}e&&se&&_e.alternate===null&&t(q,se),ee=l(_e,ee,re),ye===null?me=_e:ye.sibling=_e,ye=_e,se=de}if(re===ie.length)return r(q,se),To&&rm(q,re),me;if(se===null){for(;re<ie.length;re++)se=M(q,ie[re],fe),se!==null&&(ee=l(se,ee,re),ye===null?me=se:ye.sibling=se,ye=se);return To&&rm(q,re),me}for(se=n(q,se);re<ie.length;re++)de=z(se,q,re,ie[re],fe),de!==null&&(e&&de.alternate!==null&&se.delete(de.key===null?re:de.key),ee=l(de,ee,re),ye===null?me=de:ye.sibling=de,ye=de);return e&&se.forEach(function(ve){return t(q,ve)}),To&&rm(q,re),me}function K(q,ee,ie,fe){var me=H_(ie);if(typeof me!="function")throw Error(ar(150));if(ie=me.call(ie),ie==null)throw Error(ar(151));for(var ye=me=null,se=ee,re=ee=0,de=null,_e=ie.next();se!==null&&!_e.done;re++,_e=ie.next()){se.index>re?(de=se,se=null):de=se.sibling;var ve=L(q,se,_e.value,fe);if(ve===null){se===null&&(se=de);break}e&&se&&ve.alternate===null&&t(q,se),ee=l(ve,ee,re),ye===null?me=ve:ye.sibling=ve,ye=ve,se=de}if(_e.done)return r(q,se),To&&rm(q,re),me;if(se===null){for(;!_e.done;re++,_e=ie.next())_e=M(q,_e.value,fe),_e!==null&&(ee=l(_e,ee,re),ye===null?me=_e:ye.sibling=_e,ye=_e);return To&&rm(q,re),me}for(se=n(q,se);!_e.done;re++,_e=ie.next())_e=z(se,q,re,_e.value,fe),_e!==null&&(e&&_e.alternate!==null&&se.delete(_e.key===null?re:_e.key),ee=l(_e,ee,re),ye===null?me=_e:ye.sibling=_e,ye=_e);return e&&se.forEach(function(Pe){return t(q,Pe)}),To&&rm(q,re),me}function $(q,ee,ie,fe){if(typeof ie=="object"&&ie!==null&&ie.type===R0&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case rC:e:{for(var me=ie.key,ye=ee;ye!==null;){if(ye.key===me){if(me=ie.type,me===R0){if(ye.tag===7){r(q,ye.sibling),ee=i(ye,ie.props.children),ee.return=q,q=ee;break e}}else if(ye.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===hf&&$V(me)===ye.type){r(q,ye.sibling),ee=i(ye,ie.props),ee.ref=q_(q,ye,ie),ee.return=q,q=ee;break e}r(q,ye);break}else t(q,ye);ye=ye.sibling}ie.type===R0?(ee=xm(ie.props.children,q.mode,fe,ie.key),ee.return=q,q=ee):(fe=zS(ie.type,ie.key,ie.props,null,q.mode,fe),fe.ref=q_(q,ee,ie),fe.return=q,q=fe)}return h(q);case M0:e:{for(ye=ie.key;ee!==null;){if(ee.key===ye)if(ee.tag===4&&ee.stateNode.containerInfo===ie.containerInfo&&ee.stateNode.implementation===ie.implementation){r(q,ee.sibling),ee=i(ee,ie.children||[]),ee.return=q,q=ee;break e}else{r(q,ee);break}else t(q,ee);ee=ee.sibling}ee=eR(ie,q.mode,fe),ee.return=q,q=ee}return h(q);case hf:return ye=ie._init,$(q,ee,ye(ie._payload),fe)}if(b1(ie))return j(q,ee,ie,fe);if(H_(ie))return K(q,ee,ie,fe);dC(q,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"?(ie=""+ie,ee!==null&&ee.tag===6?(r(q,ee.sibling),ee=i(ee,ie),ee.return=q,q=ee):(r(q,ee),ee=$M(ie,q.mode,fe),ee.return=q,q=ee),h(q)):r(q,ee)}return $}var Ty=$G(!0),e7=$G(!1),OE=sp(null),UE=null,N0=null,$2=null;function eL(){$2=N0=UE=null}function tL(e){var t=OE.current;_o(OE),e._currentValue=t}function A4(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function uy(e,t){UE=e,$2=N0=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ul=!0),e.firstContext=null)}function fu(e){var t=e._currentValue;if($2!==e)if(e={context:e,memoizedValue:t,next:null},N0===null){if(UE===null)throw Error(ar(308));N0=e,UE.dependencies={lanes:0,firstContext:e}}else N0=N0.next=e;return t}var Am=null;function rL(e){Am===null?Am=[e]:Am.push(e)}function t7(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,rL(t)):(r.next=i.next,i.next=r),t.interleaved=r,sd(e,n)}function sd(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Af=!1;function nL(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function r7(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function GA(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Rf(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,gi&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,sd(e,r)}return i=n.interleaved,i===null?(t.next=t,rL(n)):(t.next=i.next,i.next=t),n.interleaved=t,sd(e,r)}function RS(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Q2(e,r)}}function eN(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var h={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?i=l=h:l=l.next=h,r=r.next}while(r!==null);l===null?i=l=t:l=l.next=t}else i=l=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function zE(e,t,r,n){var i=e.updateQueue;Af=!1;var l=i.firstBaseUpdate,h=i.lastBaseUpdate,p=i.shared.pending;if(p!==null){i.shared.pending=null;var o=p,_=o.next;o.next=null,h===null?l=_:h.next=_,h=o;var C=e.alternate;C!==null&&(C=C.updateQueue,p=C.lastBaseUpdate,p!==h&&(p===null?C.firstBaseUpdate=_:p.next=_,C.lastBaseUpdate=o))}if(l!==null){var M=i.baseState;h=0,C=_=o=null,p=l;do{var L=p.lane,z=p.eventTime;if((n&L)===L){C!==null&&(C=C.next={eventTime:z,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var j=e,K=p;switch(L=t,z=r,K.tag){case 1:if(j=K.payload,typeof j=="function"){M=j.call(z,M,L);break e}M=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=K.payload,L=typeof j=="function"?j.call(z,M,L):j,L==null)break e;M=jo({},M,L);break e;case 2:Af=!0}}p.callback!==null&&p.lane!==0&&(e.flags|=64,L=i.effects,L===null?i.effects=[p]:L.push(p))}else z={eventTime:z,lane:L,tag:p.tag,payload:p.payload,callback:p.callback,next:null},C===null?(_=C=z,o=M):C=C.next=z,h|=L;if(p=p.next,p===null){if(p=i.shared.pending,p===null)break;L=p,p=L.next,L.next=null,i.lastBaseUpdate=L,i.shared.pending=null}}while(!0);if(C===null&&(o=M),i.baseState=o,i.firstBaseUpdate=_,i.lastBaseUpdate=C,t=i.shared.interleaved,t!==null){i=t;do h|=i.lane,i=i.next;while(i!==t)}else l===null&&(i.shared.lanes=0);km|=h,e.lanes=h,e.memoizedState=M}}function tN(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(ar(191,i));i.call(n)}}}var Nb={},$h=sp(Nb),Kx=sp(Nb),Wx=sp(Nb);function dm(e){if(e===Nb)throw Error(ar(174));return e}function iL(e,t){switch(co(Wx,t),co(Kx,e),co($h,Nb),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Kk(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Kk(t,e)}_o($h),co($h,t)}function Iy(){_o($h),_o(Kx),_o(Wx)}function n7(e){dm(Wx.current);var t=dm($h.current),r=Kk(t,e.type);t!==r&&(co(Kx,e),co($h,r))}function oL(e){Kx.current===e&&(_o($h),_o(Kx))}var No=sp(0);function VE(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var WM=[];function sL(){for(var e=0;e<WM.length;e++)WM[e]._workInProgressVersionPrimary=null;WM.length=0}var kS=dd.ReactCurrentDispatcher,qM=dd.ReactCurrentBatchConfig,Rm=0,Ho=null,Ms=null,ea=null,NE=!1,ex=!1,qx=0,qie=0;function Va(){throw Error(ar(321))}function aL(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ah(e[r],t[r]))return!1;return!0}function lL(e,t,r,n,i,l){if(Rm=l,Ho=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,kS.current=e===null||e.memoizedState===null?Jie:$ie,e=r(n,i),ex){l=0;do{if(ex=!1,qx=0,25<=l)throw Error(ar(301));l+=1,ea=Ms=null,t.updateQueue=null,kS.current=eoe,e=r(n,i)}while(ex)}if(kS.current=QE,t=Ms!==null&&Ms.next!==null,Rm=0,ea=Ms=Ho=null,NE=!1,t)throw Error(ar(300));return e}function cL(){var e=qx!==0;return qx=0,e}function zh(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ea===null?Ho.memoizedState=ea=e:ea=ea.next=e,ea}function pu(){if(Ms===null){var e=Ho.alternate;e=e!==null?e.memoizedState:null}else e=Ms.next;var t=ea===null?Ho.memoizedState:ea.next;if(t!==null)ea=t,Ms=e;else{if(e===null)throw Error(ar(310));Ms=e,e={memoizedState:Ms.memoizedState,baseState:Ms.baseState,baseQueue:Ms.baseQueue,queue:Ms.queue,next:null},ea===null?Ho.memoizedState=ea=e:ea=ea.next=e}return ea}function Xx(e,t){return typeof t=="function"?t(e):t}function XM(e){var t=pu(),r=t.queue;if(r===null)throw Error(ar(311));r.lastRenderedReducer=e;var n=Ms,i=n.baseQueue,l=r.pending;if(l!==null){if(i!==null){var h=i.next;i.next=l.next,l.next=h}n.baseQueue=i=l,r.pending=null}if(i!==null){l=i.next,n=n.baseState;var p=h=null,o=null,_=l;do{var C=_.lane;if((Rm&C)===C)o!==null&&(o=o.next={lane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),n=_.hasEagerState?_.eagerState:e(n,_.action);else{var M={lane:C,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null};o===null?(p=o=M,h=n):o=o.next=M,Ho.lanes|=C,km|=C}_=_.next}while(_!==null&&_!==l);o===null?h=n:o.next=p,ah(n,t.memoizedState)||(Ul=!0),t.memoizedState=n,t.baseState=h,t.baseQueue=o,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do l=i.lane,Ho.lanes|=l,km|=l,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ZM(e){var t=pu(),r=t.queue;if(r===null)throw Error(ar(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,l=t.memoizedState;if(i!==null){r.pending=null;var h=i=i.next;do l=e(l,h.action),h=h.next;while(h!==i);ah(l,t.memoizedState)||(Ul=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,n]}function i7(){}function o7(e,t){var r=Ho,n=pu(),i=t(),l=!ah(n.memoizedState,i);if(l&&(n.memoizedState=i,Ul=!0),n=n.queue,uL(l7.bind(null,r,n,e),[e]),n.getSnapshot!==t||l||ea!==null&&ea.memoizedState.tag&1){if(r.flags|=2048,Zx(9,a7.bind(null,r,n,i,t),void 0,null),na===null)throw Error(ar(349));Rm&30||s7(r,t,i)}return i}function s7(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ho.updateQueue,t===null?(t={lastEffect:null,stores:null},Ho.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function a7(e,t,r,n){t.value=r,t.getSnapshot=n,c7(t)&&u7(e)}function l7(e,t,r){return r(function(){c7(t)&&u7(e)})}function c7(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ah(e,r)}catch{return!0}}function u7(e){var t=sd(e,1);t!==null&&oh(t,e,1,-1)}function rN(e){var t=zh();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xx,lastRenderedState:e},t.queue=e,e=e.dispatch=Yie.bind(null,Ho,e),[t.memoizedState,e]}function Zx(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ho.updateQueue,t===null?(t={lastEffect:null,stores:null},Ho.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function h7(){return pu().memoizedState}function DS(e,t,r,n){var i=zh();Ho.flags|=e,i.memoizedState=Zx(1|t,r,void 0,n===void 0?null:n)}function AI(e,t,r,n){var i=pu();n=n===void 0?null:n;var l=void 0;if(Ms!==null){var h=Ms.memoizedState;if(l=h.destroy,n!==null&&aL(n,h.deps)){i.memoizedState=Zx(t,r,l,n);return}}Ho.flags|=e,i.memoizedState=Zx(1|t,r,l,n)}function nN(e,t){return DS(8390656,8,e,t)}function uL(e,t){return AI(2048,8,e,t)}function A7(e,t){return AI(4,2,e,t)}function d7(e,t){return AI(4,4,e,t)}function f7(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function p7(e,t,r){return r=r!=null?r.concat([e]):null,AI(4,4,f7.bind(null,t,e),r)}function hL(){}function m7(e,t){var r=pu();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&aL(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function g7(e,t){var r=pu();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&aL(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function y7(e,t,r){return Rm&21?(ah(r,t)||(r=wG(),Ho.lanes|=r,km|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ul=!0),e.memoizedState=r)}function Xie(e,t){var r=Qi;Qi=r!==0&&4>r?r:4,e(!0);var n=qM.transition;qM.transition={};try{e(!1),t()}finally{Qi=r,qM.transition=n}}function v7(){return pu().memoizedState}function Zie(e,t,r){var n=Df(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},_7(e))x7(t,r);else if(r=t7(e,t,r,n),r!==null){var i=fl();oh(r,e,n,i),b7(r,t,n)}}function Yie(e,t,r){var n=Df(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(_7(e))x7(t,i);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var h=t.lastRenderedState,p=l(h,r);if(i.hasEagerState=!0,i.eagerState=p,ah(p,h)){var o=t.interleaved;o===null?(i.next=i,rL(t)):(i.next=o.next,o.next=i),t.interleaved=i;return}}catch{}finally{}r=t7(e,t,i,n),r!==null&&(i=fl(),oh(r,e,n,i),b7(r,t,n))}}function _7(e){var t=e.alternate;return e===Ho||t!==null&&t===Ho}function x7(e,t){ex=NE=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function b7(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Q2(e,r)}}var QE={readContext:fu,useCallback:Va,useContext:Va,useEffect:Va,useImperativeHandle:Va,useInsertionEffect:Va,useLayoutEffect:Va,useMemo:Va,useReducer:Va,useRef:Va,useState:Va,useDebugValue:Va,useDeferredValue:Va,useTransition:Va,useMutableSource:Va,useSyncExternalStore:Va,useId:Va,unstable_isNewReconciler:!1},Jie={readContext:fu,useCallback:function(e,t){return zh().memoizedState=[e,t===void 0?null:t],e},useContext:fu,useEffect:nN,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,DS(4194308,4,f7.bind(null,t,e),r)},useLayoutEffect:function(e,t){return DS(4194308,4,e,t)},useInsertionEffect:function(e,t){return DS(4,2,e,t)},useMemo:function(e,t){var r=zh();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=zh();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Zie.bind(null,Ho,e),[n.memoizedState,e]},useRef:function(e){var t=zh();return e={current:e},t.memoizedState=e},useState:rN,useDebugValue:hL,useDeferredValue:function(e){return zh().memoizedState=e},useTransition:function(){var e=rN(!1),t=e[0];return e=Xie.bind(null,e[1]),zh().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ho,i=zh();if(To){if(r===void 0)throw Error(ar(407));r=r()}else{if(r=t(),na===null)throw Error(ar(349));Rm&30||s7(n,t,r)}i.memoizedState=r;var l={value:r,getSnapshot:t};return i.queue=l,nN(l7.bind(null,n,l,e),[e]),n.flags|=2048,Zx(9,a7.bind(null,n,l,r,t),void 0,null),r},useId:function(){var e=zh(),t=na.identifierPrefix;if(To){var r=QA,n=NA;r=(n&~(1<<32-ih(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=qx++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=qie++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$ie={readContext:fu,useCallback:m7,useContext:fu,useEffect:uL,useImperativeHandle:p7,useInsertionEffect:A7,useLayoutEffect:d7,useMemo:g7,useReducer:XM,useRef:h7,useState:function(){return XM(Xx)},useDebugValue:hL,useDeferredValue:function(e){var t=pu();return y7(t,Ms.memoizedState,e)},useTransition:function(){var e=XM(Xx)[0],t=pu().memoizedState;return[e,t]},useMutableSource:i7,useSyncExternalStore:o7,useId:v7,unstable_isNewReconciler:!1},eoe={readContext:fu,useCallback:m7,useContext:fu,useEffect:uL,useImperativeHandle:p7,useInsertionEffect:A7,useLayoutEffect:d7,useMemo:g7,useReducer:ZM,useRef:h7,useState:function(){return ZM(Xx)},useDebugValue:hL,useDeferredValue:function(e){var t=pu();return Ms===null?t.memoizedState=e:y7(t,Ms.memoizedState,e)},useTransition:function(){var e=ZM(Xx)[0],t=pu().memoizedState;return[e,t]},useMutableSource:i7,useSyncExternalStore:o7,useId:v7,unstable_isNewReconciler:!1};function Xu(e,t){if(e&&e.defaultProps){t=jo({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function d4(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:jo({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var dI={isMounted:function(e){return(e=e._reactInternals)?Zm(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=fl(),i=Df(e),l=GA(n,i);l.payload=t,r!=null&&(l.callback=r),t=Rf(e,l,i),t!==null&&(oh(t,e,i,n),RS(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=fl(),i=Df(e),l=GA(n,i);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=Rf(e,l,i),t!==null&&(oh(t,e,i,n),RS(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=fl(),n=Df(e),i=GA(r,n);i.tag=2,t!=null&&(i.callback=t),t=Rf(e,i,n),t!==null&&(oh(t,e,n,r),RS(t,e,n))}};function iN(e,t,r,n,i,l,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,h):t.prototype&&t.prototype.isPureReactComponent?!Qx(r,n)||!Qx(i,l):!0}function w7(e,t,r){var n=!1,i=Wf,l=t.contextType;return typeof l=="object"&&l!==null?l=fu(l):(i=Nl(t)?Pm:$a.current,n=t.contextTypes,l=(n=n!=null)?Sy(e,i):Wf),t=new t(r,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=dI,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=l),t}function oN(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&dI.enqueueReplaceState(t,t.state,null)}function f4(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},nL(e);var l=t.contextType;typeof l=="object"&&l!==null?i.context=fu(l):(l=Nl(t)?Pm:$a.current,i.context=Sy(e,l)),i.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(d4(e,t,l,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&dI.enqueueReplaceState(i,i.state,null),zE(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Fy(e,t){try{var r="",n=t;do r+=Tne(n),n=n.return;while(n);var i=r}catch(l){i=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:i,digest:null}}function YM(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function p4(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var toe=typeof WeakMap=="function"?WeakMap:Map;function B7(e,t,r){r=GA(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){jE||(jE=!0,C4=n),p4(e,t)},r}function C7(e,t,r){r=GA(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){p4(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){p4(e,t),typeof n!="function"&&(kf===null?kf=new Set([this]):kf.add(this));var h=t.stack;this.componentDidCatch(t.value,{componentStack:h!==null?h:""})}),r}function sN(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new toe;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=poe.bind(null,e,t,r),t.then(e,e))}function aN(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function lN(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=GA(-1,1),t.tag=2,Rf(r,t,1))),r.lanes|=1),e)}var roe=dd.ReactCurrentOwner,Ul=!1;function hl(e,t,r,n){t.child=e===null?e7(t,null,r,n):Ty(t,e.child,r,n)}function cN(e,t,r,n,i){r=r.render;var l=t.ref;return uy(t,i),n=lL(e,t,r,n,l,i),r=cL(),e!==null&&!Ul?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ad(e,t,i)):(To&&r&&Z2(t),t.flags|=1,hl(e,t,n,i),t.child)}function uN(e,t,r,n,i){if(e===null){var l=r.type;return typeof l=="function"&&!vL(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,S7(e,t,l,n,i)):(e=zS(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&i)){var h=l.memoizedProps;if(r=r.compare,r=r!==null?r:Qx,r(h,n)&&e.ref===t.ref)return ad(e,t,i)}return t.flags|=1,e=Lf(l,n),e.ref=t.ref,e.return=t,t.child=e}function S7(e,t,r,n,i){if(e!==null){var l=e.memoizedProps;if(Qx(l,n)&&e.ref===t.ref)if(Ul=!1,t.pendingProps=n=l,(e.lanes&i)!==0)e.flags&131072&&(Ul=!0);else return t.lanes=e.lanes,ad(e,t,i)}return m4(e,t,r,n,i)}function E7(e,t,r){var n=t.pendingProps,i=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},co(H0,oc),oc|=r;else{if(!(r&1073741824))return e=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,co(H0,oc),oc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,co(H0,oc),oc|=n}else l!==null?(n=l.baseLanes|r,t.memoizedState=null):n=r,co(H0,oc),oc|=n;return hl(e,t,i,r),t.child}function T7(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function m4(e,t,r,n,i){var l=Nl(r)?Pm:$a.current;return l=Sy(t,l),uy(t,i),r=lL(e,t,r,n,l,i),n=cL(),e!==null&&!Ul?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ad(e,t,i)):(To&&n&&Z2(t),t.flags|=1,hl(e,t,r,i),t.child)}function hN(e,t,r,n,i){if(Nl(r)){var l=!0;kE(t)}else l=!1;if(uy(t,i),t.stateNode===null)LS(e,t),w7(t,r,n),f4(t,r,n,i),n=!0;else if(e===null){var h=t.stateNode,p=t.memoizedProps;h.props=p;var o=h.context,_=r.contextType;typeof _=="object"&&_!==null?_=fu(_):(_=Nl(r)?Pm:$a.current,_=Sy(t,_));var C=r.getDerivedStateFromProps,M=typeof C=="function"||typeof h.getSnapshotBeforeUpdate=="function";M||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(p!==n||o!==_)&&oN(t,h,n,_),Af=!1;var L=t.memoizedState;h.state=L,zE(t,n,h,i),o=t.memoizedState,p!==n||L!==o||Vl.current||Af?(typeof C=="function"&&(d4(t,r,C,n),o=t.memoizedState),(p=Af||iN(t,r,p,n,L,o,_))?(M||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=o),h.props=n,h.state=o,h.context=_,n=p):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{h=t.stateNode,r7(e,t),p=t.memoizedProps,_=t.type===t.elementType?p:Xu(t.type,p),h.props=_,M=t.pendingProps,L=h.context,o=r.contextType,typeof o=="object"&&o!==null?o=fu(o):(o=Nl(r)?Pm:$a.current,o=Sy(t,o));var z=r.getDerivedStateFromProps;(C=typeof z=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(p!==M||L!==o)&&oN(t,h,n,o),Af=!1,L=t.memoizedState,h.state=L,zE(t,n,h,i);var j=t.memoizedState;p!==M||L!==j||Vl.current||Af?(typeof z=="function"&&(d4(t,r,z,n),j=t.memoizedState),(_=Af||iN(t,r,_,n,L,j,o)||!1)?(C||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(n,j,o),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(n,j,o)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||p===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=j),h.props=n,h.state=j,h.context=o,n=_):(typeof h.componentDidUpdate!="function"||p===e.memoizedProps&&L===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&L===e.memoizedState||(t.flags|=1024),n=!1)}return g4(e,t,r,n,l,i)}function g4(e,t,r,n,i,l){T7(e,t);var h=(t.flags&128)!==0;if(!n&&!h)return i&&ZV(t,r,!1),ad(e,t,l);n=t.stateNode,roe.current=t;var p=h&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&h?(t.child=Ty(t,e.child,null,l),t.child=Ty(t,null,p,l)):hl(e,t,p,l),t.memoizedState=n.state,i&&ZV(t,r,!0),t.child}function I7(e){var t=e.stateNode;t.pendingContext?XV(e,t.pendingContext,t.pendingContext!==t.context):t.context&&XV(e,t.context,!1),iL(e,t.containerInfo)}function AN(e,t,r,n,i){return Ey(),J2(i),t.flags|=256,hl(e,t,r,n),t.child}var y4={dehydrated:null,treeContext:null,retryLane:0};function v4(e){return{baseLanes:e,cachePool:null,transitions:null}}function F7(e,t,r){var n=t.pendingProps,i=No.current,l=!1,h=(t.flags&128)!==0,p;if((p=h)||(p=e!==null&&e.memoizedState===null?!1:(i&2)!==0),p?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),co(No,i&1),e===null)return h4(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(h=n.children,e=n.fallback,l?(n=t.mode,l=t.child,h={mode:"hidden",children:h},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=h):l=mI(h,n,0,null),e=xm(e,n,r,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=v4(r),t.memoizedState=y4,e):AL(t,h));if(i=e.memoizedState,i!==null&&(p=i.dehydrated,p!==null))return noe(e,t,h,n,p,i,r);if(l){l=n.fallback,h=t.mode,i=e.child,p=i.sibling;var o={mode:"hidden",children:n.children};return!(h&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=o,t.deletions=null):(n=Lf(i,o),n.subtreeFlags=i.subtreeFlags&14680064),p!==null?l=Lf(p,l):(l=xm(l,h,r,null),l.flags|=2),l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,h=e.child.memoizedState,h=h===null?v4(r):{baseLanes:h.baseLanes|r,cachePool:null,transitions:h.transitions},l.memoizedState=h,l.childLanes=e.childLanes&~r,t.memoizedState=y4,n}return l=e.child,e=l.sibling,n=Lf(l,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function AL(e,t){return t=mI({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function fC(e,t,r,n){return n!==null&&J2(n),Ty(t,e.child,null,r),e=AL(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function noe(e,t,r,n,i,l,h){if(r)return t.flags&256?(t.flags&=-257,n=YM(Error(ar(422))),fC(e,t,h,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=n.fallback,i=t.mode,n=mI({mode:"visible",children:n.children},i,0,null),l=xm(l,i,h,null),l.flags|=2,n.return=t,l.return=t,n.sibling=l,t.child=n,t.mode&1&&Ty(t,e.child,null,h),t.child.memoizedState=v4(h),t.memoizedState=y4,l);if(!(t.mode&1))return fC(e,t,h,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var p=n.dgst;return n=p,l=Error(ar(419)),n=YM(l,n,void 0),fC(e,t,h,n)}if(p=(h&e.childLanes)!==0,Ul||p){if(n=na,n!==null){switch(h&-h){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|h)?0:i,i!==0&&i!==l.retryLane&&(l.retryLane=i,sd(e,i),oh(n,e,i,-1))}return yL(),n=YM(Error(ar(421))),fC(e,t,h,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=moe.bind(null,e),i._reactRetry=t,null):(e=l.treeContext,ac=Mf(i.nextSibling),hc=t,To=!0,Yu=null,e!==null&&(Jc[$c++]=NA,Jc[$c++]=QA,Jc[$c++]=Mm,NA=e.id,QA=e.overflow,Mm=t),t=AL(t,n.children),t.flags|=4096,t)}function dN(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),A4(e.return,t,r)}function JM(e,t,r,n,i){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=i)}function P7(e,t,r){var n=t.pendingProps,i=n.revealOrder,l=n.tail;if(hl(e,t,n.children,r),n=No.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&dN(e,r,t);else if(e.tag===19)dN(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(co(No,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&VE(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),JM(t,!1,i,r,l);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&VE(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}JM(t,!0,r,null,l);break;case"together":JM(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function LS(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ad(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),km|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ar(153));if(t.child!==null){for(e=t.child,r=Lf(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Lf(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function ioe(e,t,r){switch(t.tag){case 3:I7(t),Ey();break;case 5:n7(t);break;case 1:Nl(t.type)&&kE(t);break;case 4:iL(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;co(OE,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(co(No,No.current&1),t.flags|=128,null):r&t.child.childLanes?F7(e,t,r):(co(No,No.current&1),e=ad(e,t,r),e!==null?e.sibling:null);co(No,No.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return P7(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),co(No,No.current),n)break;return null;case 22:case 23:return t.lanes=0,E7(e,t,r)}return ad(e,t,r)}var M7,_4,R7,k7;M7=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};_4=function(){};R7=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,dm($h.current);var l=null;switch(r){case"input":i=Qk(e,i),n=Qk(e,n),l=[];break;case"select":i=jo({},i,{value:void 0}),n=jo({},n,{value:void 0}),l=[];break;case"textarea":i=Gk(e,i),n=Gk(e,n),l=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ME)}Wk(r,n);var h;r=null;for(_ in i)if(!n.hasOwnProperty(_)&&i.hasOwnProperty(_)&&i[_]!=null)if(_==="style"){var p=i[_];for(h in p)p.hasOwnProperty(h)&&(r||(r={}),r[h]="")}else _!=="dangerouslySetInnerHTML"&&_!=="children"&&_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(Dx.hasOwnProperty(_)?l||(l=[]):(l=l||[]).push(_,null));for(_ in n){var o=n[_];if(p=i!=null?i[_]:void 0,n.hasOwnProperty(_)&&o!==p&&(o!=null||p!=null))if(_==="style")if(p){for(h in p)!p.hasOwnProperty(h)||o&&o.hasOwnProperty(h)||(r||(r={}),r[h]="");for(h in o)o.hasOwnProperty(h)&&p[h]!==o[h]&&(r||(r={}),r[h]=o[h])}else r||(l||(l=[]),l.push(_,r)),r=o;else _==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,p=p?p.__html:void 0,o!=null&&p!==o&&(l=l||[]).push(_,o)):_==="children"?typeof o!="string"&&typeof o!="number"||(l=l||[]).push(_,""+o):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&(Dx.hasOwnProperty(_)?(o!=null&&_==="onScroll"&&go("scroll",e),l||p===o||(l=[])):(l=l||[]).push(_,o))}r&&(l=l||[]).push("style",r);var _=l;(t.updateQueue=_)&&(t.flags|=4)}};k7=function(e,t,r,n){r!==n&&(t.flags|=4)};function X_(e,t){if(!To)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Na(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function ooe(e,t,r){var n=t.pendingProps;switch(Y2(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Na(t),null;case 1:return Nl(t.type)&&RE(),Na(t),null;case 3:return n=t.stateNode,Iy(),_o(Vl),_o($a),sL(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(AC(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Yu!==null&&(T4(Yu),Yu=null))),_4(e,t),Na(t),null;case 5:oL(t);var i=dm(Wx.current);if(r=t.type,e!==null&&t.stateNode!=null)R7(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ar(166));return Na(t),null}if(e=dm($h.current),AC(t)){n=t.stateNode,r=t.type;var l=t.memoizedProps;switch(n[Gh]=t,n[Gx]=l,e=(t.mode&1)!==0,r){case"dialog":go("cancel",n),go("close",n);break;case"iframe":case"object":case"embed":go("load",n);break;case"video":case"audio":for(i=0;i<B1.length;i++)go(B1[i],n);break;case"source":go("error",n);break;case"img":case"image":case"link":go("error",n),go("load",n);break;case"details":go("toggle",n);break;case"input":bV(n,l),go("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},go("invalid",n);break;case"textarea":BV(n,l),go("invalid",n)}Wk(r,l),i=null;for(var h in l)if(l.hasOwnProperty(h)){var p=l[h];h==="children"?typeof p=="string"?n.textContent!==p&&(l.suppressHydrationWarning!==!0&&hC(n.textContent,p,e),i=["children",p]):typeof p=="number"&&n.textContent!==""+p&&(l.suppressHydrationWarning!==!0&&hC(n.textContent,p,e),i=["children",""+p]):Dx.hasOwnProperty(h)&&p!=null&&h==="onScroll"&&go("scroll",n)}switch(r){case"input":nC(n),wV(n,l,!0);break;case"textarea":nC(n),CV(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=ME)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{h=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=lG(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=h.createElement(r,{is:n.is}):(e=h.createElement(r),r==="select"&&(h=e,n.multiple?h.multiple=!0:n.size&&(h.size=n.size))):e=h.createElementNS(e,r),e[Gh]=t,e[Gx]=n,M7(e,t,!1,!1),t.stateNode=e;e:{switch(h=qk(r,n),r){case"dialog":go("cancel",e),go("close",e),i=n;break;case"iframe":case"object":case"embed":go("load",e),i=n;break;case"video":case"audio":for(i=0;i<B1.length;i++)go(B1[i],e);i=n;break;case"source":go("error",e),i=n;break;case"img":case"image":case"link":go("error",e),go("load",e),i=n;break;case"details":go("toggle",e),i=n;break;case"input":bV(e,n),i=Qk(e,n),go("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=jo({},n,{value:void 0}),go("invalid",e);break;case"textarea":BV(e,n),i=Gk(e,n),go("invalid",e);break;default:i=n}Wk(r,i),p=i;for(l in p)if(p.hasOwnProperty(l)){var o=p[l];l==="style"?hG(e,o):l==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&cG(e,o)):l==="children"?typeof o=="string"?(r!=="textarea"||o!=="")&&Lx(e,o):typeof o=="number"&&Lx(e,""+o):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Dx.hasOwnProperty(l)?o!=null&&l==="onScroll"&&go("scroll",e):o!=null&&L2(e,l,o,h))}switch(r){case"input":nC(e),wV(e,n,!1);break;case"textarea":nC(e),CV(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Kf(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?sy(e,!!n.multiple,l,!1):n.defaultValue!=null&&sy(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=ME)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Na(t),null;case 6:if(e&&t.stateNode!=null)k7(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ar(166));if(r=dm(Wx.current),dm($h.current),AC(t)){if(n=t.stateNode,r=t.memoizedProps,n[Gh]=t,(l=n.nodeValue!==r)&&(e=hc,e!==null))switch(e.tag){case 3:hC(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hC(n.nodeValue,r,(e.mode&1)!==0)}l&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Gh]=t,t.stateNode=n}return Na(t),null;case 13:if(_o(No),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(To&&ac!==null&&t.mode&1&&!(t.flags&128))JG(),Ey(),t.flags|=98560,l=!1;else if(l=AC(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(ar(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(ar(317));l[Gh]=t}else Ey(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Na(t),l=!1}else Yu!==null&&(T4(Yu),Yu=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||No.current&1?Ls===0&&(Ls=3):yL())),t.updateQueue!==null&&(t.flags|=4),Na(t),null);case 4:return Iy(),_4(e,t),e===null&&Hx(t.stateNode.containerInfo),Na(t),null;case 10:return tL(t.type._context),Na(t),null;case 17:return Nl(t.type)&&RE(),Na(t),null;case 19:if(_o(No),l=t.memoizedState,l===null)return Na(t),null;if(n=(t.flags&128)!==0,h=l.rendering,h===null)if(n)X_(l,!1);else{if(Ls!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(h=VE(e),h!==null){for(t.flags|=128,X_(l,!1),n=h.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)l=r,e=n,l.flags&=14680066,h=l.alternate,h===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,e=h.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return co(No,No.current&1|2),t.child}e=e.sibling}l.tail!==null&&ds()>Py&&(t.flags|=128,n=!0,X_(l,!1),t.lanes=4194304)}else{if(!n)if(e=VE(h),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),X_(l,!0),l.tail===null&&l.tailMode==="hidden"&&!h.alternate&&!To)return Na(t),null}else 2*ds()-l.renderingStartTime>Py&&r!==1073741824&&(t.flags|=128,n=!0,X_(l,!1),t.lanes=4194304);l.isBackwards?(h.sibling=t.child,t.child=h):(r=l.last,r!==null?r.sibling=h:t.child=h,l.last=h)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=ds(),t.sibling=null,r=No.current,co(No,n?r&1|2:r&1),t):(Na(t),null);case 22:case 23:return gL(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?oc&1073741824&&(Na(t),t.subtreeFlags&6&&(t.flags|=8192)):Na(t),null;case 24:return null;case 25:return null}throw Error(ar(156,t.tag))}function soe(e,t){switch(Y2(t),t.tag){case 1:return Nl(t.type)&&RE(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Iy(),_o(Vl),_o($a),sL(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return oL(t),null;case 13:if(_o(No),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ar(340));Ey()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _o(No),null;case 4:return Iy(),null;case 10:return tL(t.type._context),null;case 22:case 23:return gL(),null;case 24:return null;default:return null}}var pC=!1,qa=!1,aoe=typeof WeakSet=="function"?WeakSet:Set,Mr=null;function Q0(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Yo(e,t,n)}else r.current=null}function x4(e,t,r){try{r()}catch(n){Yo(e,t,n)}}var fN=!1;function loe(e,t){if(i4=IE,e=zG(),X2(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var h=0,p=-1,o=-1,_=0,C=0,M=e,L=null;t:for(;;){for(var z;M!==r||i!==0&&M.nodeType!==3||(p=h+i),M!==l||n!==0&&M.nodeType!==3||(o=h+n),M.nodeType===3&&(h+=M.nodeValue.length),(z=M.firstChild)!==null;)L=M,M=z;for(;;){if(M===e)break t;if(L===r&&++_===i&&(p=h),L===l&&++C===n&&(o=h),(z=M.nextSibling)!==null)break;M=L,L=M.parentNode}M=z}r=p===-1||o===-1?null:{start:p,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(o4={focusedElem:e,selectionRange:r},IE=!1,Mr=t;Mr!==null;)if(t=Mr,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Mr=e;else for(;Mr!==null;){t=Mr;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var K=j.memoizedProps,$=j.memoizedState,q=t.stateNode,ee=q.getSnapshotBeforeUpdate(t.elementType===t.type?K:Xu(t.type,K),$);q.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var ie=t.stateNode.containerInfo;ie.nodeType===1?ie.textContent="":ie.nodeType===9&&ie.documentElement&&ie.removeChild(ie.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ar(163))}}catch(fe){Yo(t,t.return,fe)}if(e=t.sibling,e!==null){e.return=t.return,Mr=e;break}Mr=t.return}return j=fN,fN=!1,j}function tx(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var l=i.destroy;i.destroy=void 0,l!==void 0&&x4(t,r,l)}i=i.next}while(i!==n)}}function fI(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function b4(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function D7(e){var t=e.alternate;t!==null&&(e.alternate=null,D7(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Gh],delete t[Gx],delete t[l4],delete t[jie],delete t[Gie])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function L7(e){return e.tag===5||e.tag===3||e.tag===4}function pN(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||L7(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function w4(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ME));else if(n!==4&&(e=e.child,e!==null))for(w4(e,t,r),e=e.sibling;e!==null;)w4(e,t,r),e=e.sibling}function B4(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(B4(e,t,r),e=e.sibling;e!==null;)B4(e,t,r),e=e.sibling}var va=null,Zu=!1;function Yd(e,t,r){for(r=r.child;r!==null;)O7(e,t,r),r=r.sibling}function O7(e,t,r){if(Jh&&typeof Jh.onCommitFiberUnmount=="function")try{Jh.onCommitFiberUnmount(sI,r)}catch{}switch(r.tag){case 5:qa||Q0(r,t);case 6:var n=va,i=Zu;va=null,Yd(e,t,r),va=n,Zu=i,va!==null&&(Zu?(e=va,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):va.removeChild(r.stateNode));break;case 18:va!==null&&(Zu?(e=va,r=r.stateNode,e.nodeType===8?GM(e.parentNode,r):e.nodeType===1&&GM(e,r),Vx(e)):GM(va,r.stateNode));break;case 4:n=va,i=Zu,va=r.stateNode.containerInfo,Zu=!0,Yd(e,t,r),va=n,Zu=i;break;case 0:case 11:case 14:case 15:if(!qa&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var l=i,h=l.destroy;l=l.tag,h!==void 0&&(l&2||l&4)&&x4(r,t,h),i=i.next}while(i!==n)}Yd(e,t,r);break;case 1:if(!qa&&(Q0(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(p){Yo(r,t,p)}Yd(e,t,r);break;case 21:Yd(e,t,r);break;case 22:r.mode&1?(qa=(n=qa)||r.memoizedState!==null,Yd(e,t,r),qa=n):Yd(e,t,r);break;default:Yd(e,t,r)}}function mN(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new aoe),t.forEach(function(n){var i=goe.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function ju(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var l=e,h=t,p=h;e:for(;p!==null;){switch(p.tag){case 5:va=p.stateNode,Zu=!1;break e;case 3:va=p.stateNode.containerInfo,Zu=!0;break e;case 4:va=p.stateNode.containerInfo,Zu=!0;break e}p=p.return}if(va===null)throw Error(ar(160));O7(l,h,i),va=null,Zu=!1;var o=i.alternate;o!==null&&(o.return=null),i.return=null}catch(_){Yo(i,t,_)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)U7(t,e),t=t.sibling}function U7(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ju(t,e),Ph(e),n&4){try{tx(3,e,e.return),fI(3,e)}catch(K){Yo(e,e.return,K)}try{tx(5,e,e.return)}catch(K){Yo(e,e.return,K)}}break;case 1:ju(t,e),Ph(e),n&512&&r!==null&&Q0(r,r.return);break;case 5:if(ju(t,e),Ph(e),n&512&&r!==null&&Q0(r,r.return),e.flags&32){var i=e.stateNode;try{Lx(i,"")}catch(K){Yo(e,e.return,K)}}if(n&4&&(i=e.stateNode,i!=null)){var l=e.memoizedProps,h=r!==null?r.memoizedProps:l,p=e.type,o=e.updateQueue;if(e.updateQueue=null,o!==null)try{p==="input"&&l.type==="radio"&&l.name!=null&&sG(i,l),qk(p,h);var _=qk(p,l);for(h=0;h<o.length;h+=2){var C=o[h],M=o[h+1];C==="style"?hG(i,M):C==="dangerouslySetInnerHTML"?cG(i,M):C==="children"?Lx(i,M):L2(i,C,M,_)}switch(p){case"input":Hk(i,l);break;case"textarea":aG(i,l);break;case"select":var L=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!l.multiple;var z=l.value;z!=null?sy(i,!!l.multiple,z,!1):L!==!!l.multiple&&(l.defaultValue!=null?sy(i,!!l.multiple,l.defaultValue,!0):sy(i,!!l.multiple,l.multiple?[]:"",!1))}i[Gx]=l}catch(K){Yo(e,e.return,K)}}break;case 6:if(ju(t,e),Ph(e),n&4){if(e.stateNode===null)throw Error(ar(162));i=e.stateNode,l=e.memoizedProps;try{i.nodeValue=l}catch(K){Yo(e,e.return,K)}}break;case 3:if(ju(t,e),Ph(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Vx(t.containerInfo)}catch(K){Yo(e,e.return,K)}break;case 4:ju(t,e),Ph(e);break;case 13:ju(t,e),Ph(e),i=e.child,i.flags&8192&&(l=i.memoizedState!==null,i.stateNode.isHidden=l,!l||i.alternate!==null&&i.alternate.memoizedState!==null||(pL=ds())),n&4&&mN(e);break;case 22:if(C=r!==null&&r.memoizedState!==null,e.mode&1?(qa=(_=qa)||C,ju(t,e),qa=_):ju(t,e),Ph(e),n&8192){if(_=e.memoizedState!==null,(e.stateNode.isHidden=_)&&!C&&e.mode&1)for(Mr=e,C=e.child;C!==null;){for(M=Mr=C;Mr!==null;){switch(L=Mr,z=L.child,L.tag){case 0:case 11:case 14:case 15:tx(4,L,L.return);break;case 1:Q0(L,L.return);var j=L.stateNode;if(typeof j.componentWillUnmount=="function"){n=L,r=L.return;try{t=n,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(K){Yo(n,r,K)}}break;case 5:Q0(L,L.return);break;case 22:if(L.memoizedState!==null){yN(M);continue}}z!==null?(z.return=L,Mr=z):yN(M)}C=C.sibling}e:for(C=null,M=e;;){if(M.tag===5){if(C===null){C=M;try{i=M.stateNode,_?(l=i.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(p=M.stateNode,o=M.memoizedProps.style,h=o!=null&&o.hasOwnProperty("display")?o.display:null,p.style.display=uG("display",h))}catch(K){Yo(e,e.return,K)}}}else if(M.tag===6){if(C===null)try{M.stateNode.nodeValue=_?"":M.memoizedProps}catch(K){Yo(e,e.return,K)}}else if((M.tag!==22&&M.tag!==23||M.memoizedState===null||M===e)&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===e)break e;for(;M.sibling===null;){if(M.return===null||M.return===e)break e;C===M&&(C=null),M=M.return}C===M&&(C=null),M.sibling.return=M.return,M=M.sibling}}break;case 19:ju(t,e),Ph(e),n&4&&mN(e);break;case 21:break;default:ju(t,e),Ph(e)}}function Ph(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(L7(r)){var n=r;break e}r=r.return}throw Error(ar(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Lx(i,""),n.flags&=-33);var l=pN(e);B4(e,l,i);break;case 3:case 4:var h=n.stateNode.containerInfo,p=pN(e);w4(e,p,h);break;default:throw Error(ar(161))}}catch(o){Yo(e,e.return,o)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function coe(e,t,r){Mr=e,z7(e)}function z7(e,t,r){for(var n=(e.mode&1)!==0;Mr!==null;){var i=Mr,l=i.child;if(i.tag===22&&n){var h=i.memoizedState!==null||pC;if(!h){var p=i.alternate,o=p!==null&&p.memoizedState!==null||qa;p=pC;var _=qa;if(pC=h,(qa=o)&&!_)for(Mr=i;Mr!==null;)h=Mr,o=h.child,h.tag===22&&h.memoizedState!==null?vN(i):o!==null?(o.return=h,Mr=o):vN(i);for(;l!==null;)Mr=l,z7(l),l=l.sibling;Mr=i,pC=p,qa=_}gN(e)}else i.subtreeFlags&8772&&l!==null?(l.return=i,Mr=l):gN(e)}}function gN(e){for(;Mr!==null;){var t=Mr;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qa||fI(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!qa)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Xu(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&tN(t,l,n);break;case 3:var h=t.updateQueue;if(h!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}tN(t,h,r)}break;case 5:var p=t.stateNode;if(r===null&&t.flags&4){r=p;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var _=t.alternate;if(_!==null){var C=_.memoizedState;if(C!==null){var M=C.dehydrated;M!==null&&Vx(M)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ar(163))}qa||t.flags&512&&b4(t)}catch(L){Yo(t,t.return,L)}}if(t===e){Mr=null;break}if(r=t.sibling,r!==null){r.return=t.return,Mr=r;break}Mr=t.return}}function yN(e){for(;Mr!==null;){var t=Mr;if(t===e){Mr=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Mr=r;break}Mr=t.return}}function vN(e){for(;Mr!==null;){var t=Mr;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{fI(4,t)}catch(o){Yo(t,r,o)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(o){Yo(t,i,o)}}var l=t.return;try{b4(t)}catch(o){Yo(t,l,o)}break;case 5:var h=t.return;try{b4(t)}catch(o){Yo(t,h,o)}}}catch(o){Yo(t,t.return,o)}if(t===e){Mr=null;break}var p=t.sibling;if(p!==null){p.return=t.return,Mr=p;break}Mr=t.return}}var uoe=Math.ceil,HE=dd.ReactCurrentDispatcher,dL=dd.ReactCurrentOwner,cu=dd.ReactCurrentBatchConfig,gi=0,na=null,bs=null,Fa=0,oc=0,H0=sp(0),Ls=0,Yx=null,km=0,pI=0,fL=0,rx=null,Ll=null,pL=0,Py=1/0,kA=null,jE=!1,C4=null,kf=null,mC=!1,xf=null,GE=0,nx=0,S4=null,OS=-1,US=0;function fl(){return gi&6?ds():OS!==-1?OS:OS=ds()}function Df(e){return e.mode&1?gi&2&&Fa!==0?Fa&-Fa:Wie.transition!==null?(US===0&&(US=wG()),US):(e=Qi,e!==0||(e=window.event,e=e===void 0?16:FG(e.type)),e):1}function oh(e,t,r,n){if(50<nx)throw nx=0,S4=null,Error(ar(185));Ub(e,r,n),(!(gi&2)||e!==na)&&(e===na&&(!(gi&2)&&(pI|=r),Ls===4&&gf(e,Fa)),Ql(e,n),r===1&&gi===0&&!(t.mode&1)&&(Py=ds()+500,hI&&ap()))}function Ql(e,t){var r=e.callbackNode;Wne(e,t);var n=TE(e,e===na?Fa:0);if(n===0)r!==null&&TV(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&TV(r),t===1)e.tag===0?Kie(_N.bind(null,e)):XG(_N.bind(null,e)),Qie(function(){!(gi&6)&&ap()}),r=null;else{switch(BG(n)){case 1:r=N2;break;case 4:r=xG;break;case 16:r=EE;break;case 536870912:r=bG;break;default:r=EE}r=W7(r,V7.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function V7(e,t){if(OS=-1,US=0,gi&6)throw Error(ar(327));var r=e.callbackNode;if(hy()&&e.callbackNode!==r)return null;var n=TE(e,e===na?Fa:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=KE(e,n);else{t=n;var i=gi;gi|=2;var l=Q7();(na!==e||Fa!==t)&&(kA=null,Py=ds()+500,_m(e,t));do try{doe();break}catch(p){N7(e,p)}while(!0);eL(),HE.current=l,gi=i,bs!==null?t=0:(na=null,Fa=0,t=Ls)}if(t!==0){if(t===2&&(i=$k(e),i!==0&&(n=i,t=E4(e,i))),t===1)throw r=Yx,_m(e,0),gf(e,n),Ql(e,ds()),r;if(t===6)gf(e,n);else{if(i=e.current.alternate,!(n&30)&&!hoe(i)&&(t=KE(e,n),t===2&&(l=$k(e),l!==0&&(n=l,t=E4(e,l))),t===1))throw r=Yx,_m(e,0),gf(e,n),Ql(e,ds()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(ar(345));case 2:nm(e,Ll,kA);break;case 3:if(gf(e,n),(n&130023424)===n&&(t=pL+500-ds(),10<t)){if(TE(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){fl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=a4(nm.bind(null,e,Ll,kA),t);break}nm(e,Ll,kA);break;case 4:if(gf(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var h=31-ih(n);l=1<<h,h=t[h],h>i&&(i=h),n&=~l}if(n=i,n=ds()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*uoe(n/1960))-n,10<n){e.timeoutHandle=a4(nm.bind(null,e,Ll,kA),n);break}nm(e,Ll,kA);break;case 5:nm(e,Ll,kA);break;default:throw Error(ar(329))}}}return Ql(e,ds()),e.callbackNode===r?V7.bind(null,e):null}function E4(e,t){var r=rx;return e.current.memoizedState.isDehydrated&&(_m(e,t).flags|=256),e=KE(e,t),e!==2&&(t=Ll,Ll=r,t!==null&&T4(t)),e}function T4(e){Ll===null?Ll=e:Ll.push.apply(Ll,e)}function hoe(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],l=i.getSnapshot;i=i.value;try{if(!ah(l(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function gf(e,t){for(t&=~fL,t&=~pI,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ih(t),n=1<<r;e[r]=-1,t&=~n}}function _N(e){if(gi&6)throw Error(ar(327));hy();var t=TE(e,0);if(!(t&1))return Ql(e,ds()),null;var r=KE(e,t);if(e.tag!==0&&r===2){var n=$k(e);n!==0&&(t=n,r=E4(e,n))}if(r===1)throw r=Yx,_m(e,0),gf(e,t),Ql(e,ds()),r;if(r===6)throw Error(ar(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,nm(e,Ll,kA),Ql(e,ds()),null}function mL(e,t){var r=gi;gi|=1;try{return e(t)}finally{gi=r,gi===0&&(Py=ds()+500,hI&&ap())}}function Dm(e){xf!==null&&xf.tag===0&&!(gi&6)&&hy();var t=gi;gi|=1;var r=cu.transition,n=Qi;try{if(cu.transition=null,Qi=1,e)return e()}finally{Qi=n,cu.transition=r,gi=t,!(gi&6)&&ap()}}function gL(){oc=H0.current,_o(H0)}function _m(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Nie(r)),bs!==null)for(r=bs.return;r!==null;){var n=r;switch(Y2(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&RE();break;case 3:Iy(),_o(Vl),_o($a),sL();break;case 5:oL(n);break;case 4:Iy();break;case 13:_o(No);break;case 19:_o(No);break;case 10:tL(n.type._context);break;case 22:case 23:gL()}r=r.return}if(na=e,bs=e=Lf(e.current,null),Fa=oc=t,Ls=0,Yx=null,fL=pI=km=0,Ll=rx=null,Am!==null){for(t=0;t<Am.length;t++)if(r=Am[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,l=r.pending;if(l!==null){var h=l.next;l.next=i,n.next=h}r.pending=n}Am=null}return e}function N7(e,t){do{var r=bs;try{if(eL(),kS.current=QE,NE){for(var n=Ho.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}NE=!1}if(Rm=0,ea=Ms=Ho=null,ex=!1,qx=0,dL.current=null,r===null||r.return===null){Ls=1,Yx=t,bs=null;break}e:{var l=e,h=r.return,p=r,o=t;if(t=Fa,p.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var _=o,C=p,M=C.tag;if(!(C.mode&1)&&(M===0||M===11||M===15)){var L=C.alternate;L?(C.updateQueue=L.updateQueue,C.memoizedState=L.memoizedState,C.lanes=L.lanes):(C.updateQueue=null,C.memoizedState=null)}var z=aN(h);if(z!==null){z.flags&=-257,lN(z,h,p,l,t),z.mode&1&&sN(l,_,t),t=z,o=_;var j=t.updateQueue;if(j===null){var K=new Set;K.add(o),t.updateQueue=K}else j.add(o);break e}else{if(!(t&1)){sN(l,_,t),yL();break e}o=Error(ar(426))}}else if(To&&p.mode&1){var $=aN(h);if($!==null){!($.flags&65536)&&($.flags|=256),lN($,h,p,l,t),J2(Fy(o,p));break e}}l=o=Fy(o,p),Ls!==4&&(Ls=2),rx===null?rx=[l]:rx.push(l),l=h;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var q=B7(l,o,t);eN(l,q);break e;case 1:p=o;var ee=l.type,ie=l.stateNode;if(!(l.flags&128)&&(typeof ee.getDerivedStateFromError=="function"||ie!==null&&typeof ie.componentDidCatch=="function"&&(kf===null||!kf.has(ie)))){l.flags|=65536,t&=-t,l.lanes|=t;var fe=C7(l,p,t);eN(l,fe);break e}}l=l.return}while(l!==null)}j7(r)}catch(me){t=me,bs===r&&r!==null&&(bs=r=r.return);continue}break}while(!0)}function Q7(){var e=HE.current;return HE.current=QE,e===null?QE:e}function yL(){(Ls===0||Ls===3||Ls===2)&&(Ls=4),na===null||!(km&268435455)&&!(pI&268435455)||gf(na,Fa)}function KE(e,t){var r=gi;gi|=2;var n=Q7();(na!==e||Fa!==t)&&(kA=null,_m(e,t));do try{Aoe();break}catch(i){N7(e,i)}while(!0);if(eL(),gi=r,HE.current=n,bs!==null)throw Error(ar(261));return na=null,Fa=0,Ls}function Aoe(){for(;bs!==null;)H7(bs)}function doe(){for(;bs!==null&&!Une();)H7(bs)}function H7(e){var t=K7(e.alternate,e,oc);e.memoizedProps=e.pendingProps,t===null?j7(e):bs=t,dL.current=null}function j7(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=soe(r,t),r!==null){r.flags&=32767,bs=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ls=6,bs=null;return}}else if(r=ooe(r,t,oc),r!==null){bs=r;return}if(t=t.sibling,t!==null){bs=t;return}bs=t=e}while(t!==null);Ls===0&&(Ls=5)}function nm(e,t,r){var n=Qi,i=cu.transition;try{cu.transition=null,Qi=1,foe(e,t,r,n)}finally{cu.transition=i,Qi=n}return null}function foe(e,t,r,n){do hy();while(xf!==null);if(gi&6)throw Error(ar(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ar(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(qne(e,l),e===na&&(bs=na=null,Fa=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||mC||(mC=!0,W7(EE,function(){return hy(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=cu.transition,cu.transition=null;var h=Qi;Qi=1;var p=gi;gi|=4,dL.current=null,loe(e,r),U7(r,e),kie(o4),IE=!!i4,o4=i4=null,e.current=r,coe(r),zne(),gi=p,Qi=h,cu.transition=l}else e.current=r;if(mC&&(mC=!1,xf=e,GE=i),l=e.pendingLanes,l===0&&(kf=null),Qne(r.stateNode),Ql(e,ds()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(jE)throw jE=!1,e=C4,C4=null,e;return GE&1&&e.tag!==0&&hy(),l=e.pendingLanes,l&1?e===S4?nx++:(nx=0,S4=e):nx=0,ap(),null}function hy(){if(xf!==null){var e=BG(GE),t=cu.transition,r=Qi;try{if(cu.transition=null,Qi=16>e?16:e,xf===null)var n=!1;else{if(e=xf,xf=null,GE=0,gi&6)throw Error(ar(331));var i=gi;for(gi|=4,Mr=e.current;Mr!==null;){var l=Mr,h=l.child;if(Mr.flags&16){var p=l.deletions;if(p!==null){for(var o=0;o<p.length;o++){var _=p[o];for(Mr=_;Mr!==null;){var C=Mr;switch(C.tag){case 0:case 11:case 15:tx(8,C,l)}var M=C.child;if(M!==null)M.return=C,Mr=M;else for(;Mr!==null;){C=Mr;var L=C.sibling,z=C.return;if(D7(C),C===_){Mr=null;break}if(L!==null){L.return=z,Mr=L;break}Mr=z}}}var j=l.alternate;if(j!==null){var K=j.child;if(K!==null){j.child=null;do{var $=K.sibling;K.sibling=null,K=$}while(K!==null)}}Mr=l}}if(l.subtreeFlags&2064&&h!==null)h.return=l,Mr=h;else e:for(;Mr!==null;){if(l=Mr,l.flags&2048)switch(l.tag){case 0:case 11:case 15:tx(9,l,l.return)}var q=l.sibling;if(q!==null){q.return=l.return,Mr=q;break e}Mr=l.return}}var ee=e.current;for(Mr=ee;Mr!==null;){h=Mr;var ie=h.child;if(h.subtreeFlags&2064&&ie!==null)ie.return=h,Mr=ie;else e:for(h=ee;Mr!==null;){if(p=Mr,p.flags&2048)try{switch(p.tag){case 0:case 11:case 15:fI(9,p)}}catch(me){Yo(p,p.return,me)}if(p===h){Mr=null;break e}var fe=p.sibling;if(fe!==null){fe.return=p.return,Mr=fe;break e}Mr=p.return}}if(gi=i,ap(),Jh&&typeof Jh.onPostCommitFiberRoot=="function")try{Jh.onPostCommitFiberRoot(sI,e)}catch{}n=!0}return n}finally{Qi=r,cu.transition=t}}return!1}function xN(e,t,r){t=Fy(r,t),t=B7(e,t,1),e=Rf(e,t,1),t=fl(),e!==null&&(Ub(e,1,t),Ql(e,t))}function Yo(e,t,r){if(e.tag===3)xN(e,e,r);else for(;t!==null;){if(t.tag===3){xN(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(kf===null||!kf.has(n))){e=Fy(r,e),e=C7(t,e,1),t=Rf(t,e,1),e=fl(),t!==null&&(Ub(t,1,e),Ql(t,e));break}}t=t.return}}function poe(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=fl(),e.pingedLanes|=e.suspendedLanes&r,na===e&&(Fa&r)===r&&(Ls===4||Ls===3&&(Fa&130023424)===Fa&&500>ds()-pL?_m(e,0):fL|=r),Ql(e,t)}function G7(e,t){t===0&&(e.mode&1?(t=sC,sC<<=1,!(sC&130023424)&&(sC=4194304)):t=1);var r=fl();e=sd(e,t),e!==null&&(Ub(e,t,r),Ql(e,r))}function moe(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),G7(e,r)}function goe(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ar(314))}n!==null&&n.delete(t),G7(e,r)}var K7;K7=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Vl.current)Ul=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ul=!1,ioe(e,t,r);Ul=!!(e.flags&131072)}else Ul=!1,To&&t.flags&1048576&&ZG(t,LE,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;LS(e,t),e=t.pendingProps;var i=Sy(t,$a.current);uy(t,r),i=lL(null,t,n,e,i,r);var l=cL();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nl(n)?(l=!0,kE(t)):l=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,nL(t),i.updater=dI,t.stateNode=i,i._reactInternals=t,f4(t,n,e,r),t=g4(null,t,n,!0,l,r)):(t.tag=0,To&&l&&Z2(t),hl(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(LS(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=voe(n),e=Xu(n,e),i){case 0:t=m4(null,t,n,e,r);break e;case 1:t=hN(null,t,n,e,r);break e;case 11:t=cN(null,t,n,e,r);break e;case 14:t=uN(null,t,n,Xu(n.type,e),r);break e}throw Error(ar(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Xu(n,i),m4(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Xu(n,i),hN(e,t,n,i,r);case 3:e:{if(I7(t),e===null)throw Error(ar(387));n=t.pendingProps,l=t.memoizedState,i=l.element,r7(e,t),zE(t,n,null,r);var h=t.memoizedState;if(n=h.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){i=Fy(Error(ar(423)),t),t=AN(e,t,n,r,i);break e}else if(n!==i){i=Fy(Error(ar(424)),t),t=AN(e,t,n,r,i);break e}else for(ac=Mf(t.stateNode.containerInfo.firstChild),hc=t,To=!0,Yu=null,r=e7(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ey(),n===i){t=ad(e,t,r);break e}hl(e,t,n,r)}t=t.child}return t;case 5:return n7(t),e===null&&h4(t),n=t.type,i=t.pendingProps,l=e!==null?e.memoizedProps:null,h=i.children,s4(n,i)?h=null:l!==null&&s4(n,l)&&(t.flags|=32),T7(e,t),hl(e,t,h,r),t.child;case 6:return e===null&&h4(t),null;case 13:return F7(e,t,r);case 4:return iL(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ty(t,null,n,r):hl(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Xu(n,i),cN(e,t,n,i,r);case 7:return hl(e,t,t.pendingProps,r),t.child;case 8:return hl(e,t,t.pendingProps.children,r),t.child;case 12:return hl(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,l=t.memoizedProps,h=i.value,co(OE,n._currentValue),n._currentValue=h,l!==null)if(ah(l.value,h)){if(l.children===i.children&&!Vl.current){t=ad(e,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var p=l.dependencies;if(p!==null){h=l.child;for(var o=p.firstContext;o!==null;){if(o.context===n){if(l.tag===1){o=GA(-1,r&-r),o.tag=2;var _=l.updateQueue;if(_!==null){_=_.shared;var C=_.pending;C===null?o.next=o:(o.next=C.next,C.next=o),_.pending=o}}l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),A4(l.return,r,t),p.lanes|=r;break}o=o.next}}else if(l.tag===10)h=l.type===t.type?null:l.child;else if(l.tag===18){if(h=l.return,h===null)throw Error(ar(341));h.lanes|=r,p=h.alternate,p!==null&&(p.lanes|=r),A4(h,r,t),h=l.sibling}else h=l.child;if(h!==null)h.return=l;else for(h=l;h!==null;){if(h===t){h=null;break}if(l=h.sibling,l!==null){l.return=h.return,h=l;break}h=h.return}l=h}hl(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,uy(t,r),i=fu(i),n=n(i),t.flags|=1,hl(e,t,n,r),t.child;case 14:return n=t.type,i=Xu(n,t.pendingProps),i=Xu(n.type,i),uN(e,t,n,i,r);case 15:return S7(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Xu(n,i),LS(e,t),t.tag=1,Nl(n)?(e=!0,kE(t)):e=!1,uy(t,r),w7(t,n,i),f4(t,n,i,r),g4(null,t,n,!0,e,r);case 19:return P7(e,t,r);case 22:return E7(e,t,r)}throw Error(ar(156,t.tag))};function W7(e,t){return _G(e,t)}function yoe(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nu(e,t,r,n){return new yoe(e,t,r,n)}function vL(e){return e=e.prototype,!(!e||!e.isReactComponent)}function voe(e){if(typeof e=="function")return vL(e)?1:0;if(e!=null){if(e=e.$$typeof,e===U2)return 11;if(e===z2)return 14}return 2}function Lf(e,t){var r=e.alternate;return r===null?(r=nu(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function zS(e,t,r,n,i,l){var h=2;if(n=e,typeof e=="function")vL(e)&&(h=1);else if(typeof e=="string")h=5;else e:switch(e){case R0:return xm(r.children,i,l,t);case O2:h=8,i|=8;break;case Uk:return e=nu(12,r,t,i|2),e.elementType=Uk,e.lanes=l,e;case zk:return e=nu(13,r,t,i),e.elementType=zk,e.lanes=l,e;case Vk:return e=nu(19,r,t,i),e.elementType=Vk,e.lanes=l,e;case nG:return mI(r,i,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tG:h=10;break e;case rG:h=9;break e;case U2:h=11;break e;case z2:h=14;break e;case hf:h=16,n=null;break e}throw Error(ar(130,e==null?e:typeof e,""))}return t=nu(h,r,t,i),t.elementType=e,t.type=n,t.lanes=l,t}function xm(e,t,r,n){return e=nu(7,e,n,t),e.lanes=r,e}function mI(e,t,r,n){return e=nu(22,e,n,t),e.elementType=nG,e.lanes=r,e.stateNode={isHidden:!1},e}function $M(e,t,r){return e=nu(6,e,null,t),e.lanes=r,e}function eR(e,t,r){return t=nu(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function _oe(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kM(0),this.expirationTimes=kM(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kM(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function _L(e,t,r,n,i,l,h,p,o){return e=new _oe(e,t,r,p,o),t===1?(t=1,l===!0&&(t|=8)):t=0,l=nu(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},nL(l),e}function xoe(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M0,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function q7(e){if(!e)return Wf;e=e._reactInternals;e:{if(Zm(e)!==e||e.tag!==1)throw Error(ar(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nl(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ar(171))}if(e.tag===1){var r=e.type;if(Nl(r))return qG(e,r,t)}return t}function X7(e,t,r,n,i,l,h,p,o){return e=_L(r,n,!0,e,i,l,h,p,o),e.context=q7(null),r=e.current,n=fl(),i=Df(r),l=GA(n,i),l.callback=t??null,Rf(r,l,i),e.current.lanes=i,Ub(e,i,n),Ql(e,n),e}function gI(e,t,r,n){var i=t.current,l=fl(),h=Df(i);return r=q7(r),t.context===null?t.context=r:t.pendingContext=r,t=GA(l,h),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Rf(i,t,h),e!==null&&(oh(e,i,h,l),RS(e,i,h)),h}function WE(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function bN(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function xL(e,t){bN(e,t),(e=e.alternate)&&bN(e,t)}function boe(){return null}var Z7=typeof reportError=="function"?reportError:function(e){console.error(e)};function bL(e){this._internalRoot=e}yI.prototype.render=bL.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ar(409));gI(e,t,null,null)};yI.prototype.unmount=bL.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Dm(function(){gI(null,e,null,null)}),t[od]=null}};function yI(e){this._internalRoot=e}yI.prototype.unstable_scheduleHydration=function(e){if(e){var t=EG();e={blockedOn:null,target:e,priority:t};for(var r=0;r<mf.length&&t!==0&&t<mf[r].priority;r++);mf.splice(r,0,e),r===0&&IG(e)}};function wL(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function vI(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function wN(){}function woe(e,t,r,n,i){if(i){if(typeof n=="function"){var l=n;n=function(){var _=WE(h);l.call(_)}}var h=X7(t,n,e,0,null,!1,!1,"",wN);return e._reactRootContainer=h,e[od]=h.current,Hx(e.nodeType===8?e.parentNode:e),Dm(),h}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var p=n;n=function(){var _=WE(o);p.call(_)}}var o=_L(e,0,!1,null,null,!1,!1,"",wN);return e._reactRootContainer=o,e[od]=o.current,Hx(e.nodeType===8?e.parentNode:e),Dm(function(){gI(t,o,r,n)}),o}function _I(e,t,r,n,i){var l=r._reactRootContainer;if(l){var h=l;if(typeof i=="function"){var p=i;i=function(){var o=WE(h);p.call(o)}}gI(t,h,e,i)}else h=woe(r,t,e,i,n);return WE(h)}CG=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=w1(t.pendingLanes);r!==0&&(Q2(t,r|1),Ql(t,ds()),!(gi&6)&&(Py=ds()+500,ap()))}break;case 13:Dm(function(){var n=sd(e,1);if(n!==null){var i=fl();oh(n,e,1,i)}}),xL(e,1)}};H2=function(e){if(e.tag===13){var t=sd(e,134217728);if(t!==null){var r=fl();oh(t,e,134217728,r)}xL(e,134217728)}};SG=function(e){if(e.tag===13){var t=Df(e),r=sd(e,t);if(r!==null){var n=fl();oh(r,e,t,n)}xL(e,t)}};EG=function(){return Qi};TG=function(e,t){var r=Qi;try{return Qi=e,t()}finally{Qi=r}};Zk=function(e,t,r){switch(t){case"input":if(Hk(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=uI(n);if(!i)throw Error(ar(90));oG(n),Hk(n,i)}}}break;case"textarea":aG(e,r);break;case"select":t=r.value,t!=null&&sy(e,!!r.multiple,t,!1)}};fG=mL;pG=Dm;var Boe={usingClientEntryPoint:!1,Events:[Vb,O0,uI,AG,dG,mL]},Z_={findFiberByHostInstance:hm,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Coe={bundleType:Z_.bundleType,version:Z_.version,rendererPackageName:Z_.rendererPackageName,rendererConfig:Z_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dd.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=yG(e),e===null?null:e.stateNode},findFiberByHostInstance:Z_.findFiberByHostInstance||boe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gC.isDisabled&&gC.supportsFiber)try{sI=gC.inject(Coe),Jh=gC}catch{}}vc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Boe;vc.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wL(t))throw Error(ar(200));return xoe(e,t,null,r)};vc.createRoot=function(e,t){if(!wL(e))throw Error(ar(299));var r=!1,n="",i=Z7;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=_L(e,1,!1,null,null,r,!1,n,i),e[od]=t.current,Hx(e.nodeType===8?e.parentNode:e),new bL(t)};vc.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ar(188)):(e=Object.keys(e).join(","),Error(ar(268,e)));return e=yG(t),e=e===null?null:e.stateNode,e};vc.flushSync=function(e){return Dm(e)};vc.hydrate=function(e,t,r){if(!vI(t))throw Error(ar(200));return _I(null,e,t,!0,r)};vc.hydrateRoot=function(e,t,r){if(!wL(e))throw Error(ar(405));var n=r!=null&&r.hydratedSources||null,i=!1,l="",h=Z7;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),t=X7(t,null,e,1,r??null,i,!1,l,h),e[od]=t.current,Hx(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new yI(t)};vc.render=function(e,t,r){if(!vI(t))throw Error(ar(200));return _I(null,e,t,!1,r)};vc.unmountComponentAtNode=function(e){if(!vI(e))throw Error(ar(40));return e._reactRootContainer?(Dm(function(){_I(null,null,e,!1,function(){e._reactRootContainer=null,e[od]=null})}),!0):!1};vc.unstable_batchedUpdates=mL;vc.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!vI(r))throw Error(ar(200));if(e==null||e._reactInternals===void 0)throw Error(ar(38));return _I(e,t,r,!1,n)};vc.version="18.3.1-next-f1338f8080-20240426";function Y7(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Y7)}catch(e){console.error(e)}}Y7(),Y9.exports=vc;var xI=Y9.exports,J7,BN=xI;J7=BN.createRoot,BN.hydrateRoot;var qE={exports:{}};qE.exports;(function(e,t){var r=200,n="__lodash_hash_undefined__",i=800,l=16,h=9007199254740991,p="[object Arguments]",o="[object Array]",_="[object AsyncFunction]",C="[object Boolean]",M="[object Date]",L="[object Error]",z="[object Function]",j="[object GeneratorFunction]",K="[object Map]",$="[object Number]",q="[object Null]",ee="[object Object]",ie="[object Proxy]",fe="[object RegExp]",me="[object Set]",ye="[object String]",se="[object Undefined]",re="[object WeakMap]",de="[object ArrayBuffer]",_e="[object DataView]",ve="[object Float32Array]",Pe="[object Float64Array]",Ee="[object Int8Array]",Ht="[object Int16Array]",Xt="[object Int32Array]",gt="[object Uint8Array]",jt="[object Uint8ClampedArray]",Mt="[object Uint16Array]",Yt="[object Uint32Array]",ht=/[\\^$.*+?()[\]{}|]/g,lr=/^\[object .+?Constructor\]$/,ir=/^(?:0|[1-9]\d*)$/,$t={};$t[ve]=$t[Pe]=$t[Ee]=$t[Ht]=$t[Xt]=$t[gt]=$t[jt]=$t[Mt]=$t[Yt]=!0,$t[p]=$t[o]=$t[de]=$t[C]=$t[_e]=$t[M]=$t[L]=$t[z]=$t[K]=$t[$]=$t[ee]=$t[fe]=$t[me]=$t[ye]=$t[re]=!1;var Vt=typeof _1=="object"&&_1&&_1.Object===Object&&_1,Dr=typeof self=="object"&&self&&self.Object===Object&&self,kr=Vt||Dr||Function("return this")(),Zr=t&&!t.nodeType&&t,Lr=Zr&&!0&&e&&!e.nodeType&&e,Ao=Lr&&Lr.exports===Zr,ji=Ao&&Vt.process,Qe=function(){try{var qe=Lr&&Lr.require&&Lr.require("util").types;return qe||ji&&ji.binding&&ji.binding("util")}catch{}}(),no=Qe&&Qe.isTypedArray;function Io(qe,st,It){switch(It.length){case 0:return qe.call(st);case 1:return qe.call(st,It[0]);case 2:return qe.call(st,It[0],It[1]);case 3:return qe.call(st,It[0],It[1],It[2])}return qe.apply(st,It)}function ms(qe,st){for(var It=-1,cr=Array(qe);++It<qe;)cr[It]=st(It);return cr}function Ot(qe){return function(st){return qe(st)}}function Bs(qe,st){return qe==null?void 0:qe[st]}function Oi(qe,st){return function(It){return qe(st(It))}}var Fo=Array.prototype,Pr=Function.prototype,nn=Object.prototype,Ji=kr["__core-js_shared__"],Po=Pr.toString,io=nn.hasOwnProperty,Cs=function(){var qe=/[^.]+$/.exec(Ji&&Ji.keys&&Ji.keys.IE_PROTO||"");return qe?"Symbol(src)_1."+qe:""}(),Er=nn.toString,Di=Po.call(Object),yi=RegExp("^"+Po.call(io).replace(ht,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Go=Ao?kr.Buffer:void 0,xo=kr.Symbol,es=kr.Uint8Array;Go&&Go.allocUnsafe;var wc=Oi(Object.getPrototypeOf,Object),Ra=Object.create,Wl=nn.propertyIsEnumerable,ka=Fo.splice,ts=xo?xo.toStringTag:void 0,tl=function(){try{var qe=bo(Object,"defineProperty");return qe({},"",{}),qe}catch{}}(),Qs=Go?Go.isBuffer:void 0,_l=Math.max,an=Date.now,Hs=bo(kr,"Map"),js=bo(Object,"create"),rs=function(){function qe(){}return function(st){if(!Ko(st))return{};if(Ra)return Ra(st);qe.prototype=st;var It=new qe;return qe.prototype=void 0,It}}();function ns(qe){var st=-1,It=qe==null?0:qe.length;for(this.clear();++st<It;){var cr=qe[st];this.set(cr[0],cr[1])}}function sa(){this.__data__=js?js(null):{},this.size=0}function ql(qe){var st=this.has(qe)&&delete this.__data__[qe];return this.size-=st?1:0,st}function xl(qe){var st=this.__data__;if(js){var It=st[qe];return It===n?void 0:It}return io.call(st,qe)?st[qe]:void 0}function bl(qe){var st=this.__data__;return js?st[qe]!==void 0:io.call(st,qe)}function ct(qe,st){var It=this.__data__;return this.size+=this.has(qe)?0:1,It[qe]=js&&st===void 0?n:st,this}ns.prototype.clear=sa,ns.prototype.delete=ql,ns.prototype.get=xl,ns.prototype.has=bl,ns.prototype.set=ct;function he(qe){var st=-1,It=qe==null?0:qe.length;for(this.clear();++st<It;){var cr=qe[st];this.set(cr[0],cr[1])}}function ge(){this.__data__=[],this.size=0}function ke(qe){var st=this.__data__,It=vn(st,qe);if(It<0)return!1;var cr=st.length-1;return It==cr?st.pop():ka.call(st,It,1),--this.size,!0}function Ne(qe){var st=this.__data__,It=vn(st,qe);return It<0?void 0:st[It][1]}function Ue(qe){return vn(this.__data__,qe)>-1}function Je(qe,st){var It=this.__data__,cr=vn(It,qe);return cr<0?(++this.size,It.push([qe,st])):It[cr][1]=st,this}he.prototype.clear=ge,he.prototype.delete=ke,he.prototype.get=Ne,he.prototype.has=Ue,he.prototype.set=Je;function lt(qe){var st=-1,It=qe==null?0:qe.length;for(this.clear();++st<It;){var cr=qe[st];this.set(cr[0],cr[1])}}function tt(){this.size=0,this.__data__={hash:new ns,map:new(Hs||he),string:new ns}}function ut(qe){var st=Ro(this,qe).delete(qe);return this.size-=st?1:0,st}function vt(qe){return Ro(this,qe).get(qe)}function ft(qe){return Ro(this,qe).has(qe)}function Rt(qe,st){var It=Ro(this,qe),cr=It.size;return It.set(qe,st),this.size+=It.size==cr?0:1,this}lt.prototype.clear=tt,lt.prototype.delete=ut,lt.prototype.get=vt,lt.prototype.has=ft,lt.prototype.set=Rt;function Kt(qe){var st=this.__data__=new he(qe);this.size=st.size}function Wt(){this.__data__=new he,this.size=0}function vr(qe){var st=this.__data__,It=st.delete(qe);return this.size=st.size,It}function wr(qe){return this.__data__.get(qe)}function Sr(qe){return this.__data__.has(qe)}function br(qe,st){var It=this.__data__;if(It instanceof he){var cr=It.__data__;if(!Hs||cr.length<r-1)return cr.push([qe,st]),this.size=++It.size,this;It=this.__data__=new lt(cr)}return It.set(qe,st),this.size=It.size,this}Kt.prototype.clear=Wt,Kt.prototype.delete=vr,Kt.prototype.get=wr,Kt.prototype.has=Sr,Kt.prototype.set=br;function yn(qe,st){var It=An(qe),cr=!It&&qs(qe),Pn=!It&&!cr&&ca(qe),Un=!It&&!cr&&!Pn&&er(qe),Wn=It||cr||Pn||Un,un=Wn?ms(qe.length,String):[],ui=un.length;for(var Qn in qe)Wn&&(Qn=="length"||Pn&&(Qn=="offset"||Qn=="parent")||Un&&(Qn=="buffer"||Qn=="byteLength"||Qn=="byteOffset")||Yl(Qn,ui))||un.push(Qn);return un}function xn(qe,st,It){(It!==void 0&&!Kr(qe[st],It)||It===void 0&&!(st in qe))&&On(qe,st,It)}function Rr(qe,st,It){var cr=qe[st];(!(io.call(qe,st)&&Kr(cr,It))||It===void 0&&!(st in qe))&&On(qe,st,It)}function vn(qe,st){for(var It=qe.length;It--;)if(Kr(qe[It][0],st))return It;return-1}function On(qe,st,It){st=="__proto__"&&tl?tl(qe,st,{configurable:!0,enumerable:!0,value:It,writable:!0}):qe[st]=It}var Ui=Ws();function vi(qe){return qe==null?qe===void 0?se:q:ts&&ts in Object(qe)?Ss(qe):Bl(qe)}function zi(qe){return is(qe)&&vi(qe)==p}function Mo(qe){if(!Ko(qe)||Cu(qe))return!1;var st=rl(qe)?yi:lr;return st.test(pA(qe))}function aa(qe){return is(qe)&&Jl(qe.length)&&!!$t[vi(qe)]}function dh(qe){if(!Ko(qe))return wo(qe);var st=Ec(qe),It=[];for(var cr in qe)cr=="constructor"&&(st||!io.call(qe,cr))||It.push(cr);return It}function Xl(qe,st,It,cr,Pn){qe!==st&&Ui(st,function(Un,Wn){if(Pn||(Pn=new Kt),Ko(Un))Zl(qe,st,Wn,It,Xl,cr,Pn);else{var un=cr?cr(Cl(qe,Wn),Un,Wn+"",qe,st,Pn):void 0;un===void 0&&(un=Un),xn(qe,Wn,un)}},Wr)}function Zl(qe,st,It,cr,Pn,Un,Wn){var un=Cl(qe,It),ui=Cl(st,It),Qn=Wn.get(ui);if(Qn){xn(qe,It,Qn);return}var Jn=Un?Un(un,ui,It+"",qe,st,Wn):void 0,fo=Jn===void 0;if(fo){var Sl=An(ui),ha=!Sl&&ca(ui),_i=!Sl&&!ha&&er(ui);Jn=ui,Sl||ha||_i?An(un)?Jn=un:_r(un)?Jn=Cc(un):ha?(fo=!1,Jn=Bu(ui)):_i?(fo=!1,Jn=Bc(ui)):Jn=[]:ua(ui)||qs(ui)?(Jn=un,qs(un)?Jn=Yr(un):(!Ko(un)||rl(un))&&(Jn=Sc(ui))):fo=!1}fo&&(Wn.set(ui,Jn),Pn(Jn,ui,cr,Un,Wn),Wn.delete(ui)),xn(qe,It,Jn)}function wu(qe,st){return fA(Tc(qe,st,qr),qe+"")}var wl=tl?function(qe,st){return tl(qe,"toString",{configurable:!0,enumerable:!1,value:oo(st),writable:!0})}:qr;function Bu(qe,st){return qe.slice()}function fh(qe){var st=new qe.constructor(qe.byteLength);return new es(st).set(new es(qe)),st}function Bc(qe,st){var It=fh(qe.buffer);return new qe.constructor(It,qe.byteOffset,qe.length)}function Cc(qe,st){var It=-1,cr=qe.length;for(st||(st=Array(cr));++It<cr;)st[It]=qe[It];return st}function Gs(qe,st,It,cr){var Pn=!It;It||(It={});for(var Un=-1,Wn=st.length;++Un<Wn;){var un=st[Un],ui=void 0;ui===void 0&&(ui=qe[un]),Pn?On(It,un,ui):Rr(It,un,ui)}return It}function Ks(qe){return wu(function(st,It){var cr=-1,Pn=It.length,Un=Pn>1?It[Pn-1]:void 0,Wn=Pn>2?It[2]:void 0;for(Un=qe.length>3&&typeof Un=="function"?(Pn--,Un):void 0,Wn&&la(It[0],It[1],Wn)&&(Un=Pn<3?void 0:Un,Pn=1),st=Object(st);++cr<Pn;){var un=It[cr];un&&qe(st,un,cr,Un)}return st})}function Ws(qe){return function(st,It,cr){for(var Pn=-1,Un=Object(st),Wn=cr(st),un=Wn.length;un--;){var ui=Wn[++Pn];if(It(Un[ui],ui,Un)===!1)break}return st}}function Ro(qe,st){var It=qe.__data__;return ci(st)?It[typeof st=="string"?"string":"hash"]:It.map}function bo(qe,st){var It=Bs(qe,st);return Mo(It)?It:void 0}function Ss(qe){var st=io.call(qe,ts),It=qe[ts];try{qe[ts]=void 0;var cr=!0}catch{}var Pn=Er.call(qe);return cr&&(st?qe[ts]=It:delete qe[ts]),Pn}function Sc(qe){return typeof qe.constructor=="function"&&!Ec(qe)?rs(wc(qe)):{}}function Yl(qe,st){var It=typeof qe;return st=st??h,!!st&&(It=="number"||It!="symbol"&&ir.test(qe))&&qe>-1&&qe%1==0&&qe<st}function la(qe,st,It){if(!Ko(It))return!1;var cr=typeof st;return(cr=="number"?ph(It)&&Yl(st,It.length):cr=="string"&&st in It)?Kr(It[st],qe):!1}function ci(qe){var st=typeof qe;return st=="string"||st=="number"||st=="symbol"||st=="boolean"?qe!=="__proto__":qe===null}function Cu(qe){return!!Cs&&Cs in qe}function Ec(qe){var st=qe&&qe.constructor,It=typeof st=="function"&&st.prototype||nn;return qe===It}function wo(qe){var st=[];if(qe!=null)for(var It in Object(qe))st.push(It);return st}function Bl(qe){return Er.call(qe)}function Tc(qe,st,It){return st=_l(st===void 0?qe.length-1:st,0),function(){for(var cr=arguments,Pn=-1,Un=_l(cr.length-st,0),Wn=Array(Un);++Pn<Un;)Wn[Pn]=cr[st+Pn];Pn=-1;for(var un=Array(st+1);++Pn<st;)un[Pn]=cr[Pn];return un[st]=It(Wn),Io(qe,this,un)}}function Cl(qe,st){if(!(st==="constructor"&&typeof qe[st]=="function")&&st!="__proto__")return qe[st]}var fA=Ic(wl);function Ic(qe){var st=0,It=0;return function(){var cr=an(),Pn=l-(cr-It);if(It=cr,Pn>0){if(++st>=i)return arguments[0]}else st=0;return qe.apply(void 0,arguments)}}function pA(qe){if(qe!=null){try{return Po.call(qe)}catch{}try{return qe+""}catch{}}return""}function Kr(qe,st){return qe===st||qe!==qe&&st!==st}var qs=zi(function(){return arguments}())?zi:function(qe){return is(qe)&&io.call(qe,"callee")&&!Wl.call(qe,"callee")},An=Array.isArray;function ph(qe){return qe!=null&&Jl(qe.length)&&!rl(qe)}function _r(qe){return is(qe)&&ph(qe)}var ca=Qs||Su;function rl(qe){if(!Ko(qe))return!1;var st=vi(qe);return st==z||st==j||st==_||st==ie}function Jl(qe){return typeof qe=="number"&&qe>-1&&qe%1==0&&qe<=h}function Ko(qe){var st=typeof qe;return qe!=null&&(st=="object"||st=="function")}function is(qe){return qe!=null&&typeof qe=="object"}function ua(qe){if(!is(qe)||vi(qe)!=ee)return!1;var st=wc(qe);if(st===null)return!0;var It=io.call(st,"constructor")&&st.constructor;return typeof It=="function"&&It instanceof It&&Po.call(It)==Di}var er=no?Ot(no):aa;function Yr(qe){return Gs(qe,Wr(qe))}function Wr(qe){return ph(qe)?yn(qe):dh(qe)}var os=Ks(function(qe,st,It,cr){Xl(qe,st,It,cr)});function oo(qe){return function(){return qe}}function qr(qe){return qe}function Su(){return!1}e.exports=os})(qE,qE.exports);var Soe=qE.exports;const Os=Lb(Soe);function Eoe(e,t=[]){const r=Re.useRef(e);return Re.useEffect(()=>{r.current=e}),Re.useCallback((...n)=>{var i;return(i=r.current)==null?void 0:i.call(r,...n)},t)}const I4=globalThis!=null&&globalThis.document?Re.useLayoutEffect:Re.useEffect,CN=(e,t)=>{const r=Re.useRef(!1),n=Re.useRef(!1);Re.useEffect(()=>{if(r.current&&n.current)return e();n.current=!0},t),Re.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[])};function Toe(e,t){if(e!=null){if(typeof e=="function"){e(t);return}try{e.current=t}catch{throw new Error(`Cannot assign value '${t}' to ref '${e}'`)}}}function F4(...e){return t=>{e.forEach(r=>{Toe(r,t)})}}function Ioe(...e){return Re.useMemo(()=>F4(...e),e)}function Foe(e,t){const r=Eoe(e);Re.useEffect(()=>{if(t==null)return;let n=null;return n=window.setTimeout(()=>{r()},t),()=>{n&&window.clearTimeout(n)}},[t,r])}function Poe(){return!!(globalThis!=null&&globalThis.document)}function Moe(e,...t){if(e==null)throw new TypeError("Cannot convert undefined or null to object");const r={...e};for(const n of t)if(n!=null)for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(i in r&&delete r[i],r[i]=n[i]);return r}const Vh=e=>e?"":void 0,tR=e=>e?!0:void 0;function Roe(e){return Array.isArray(e)}function uu(e){const t=typeof e;return e!=null&&(t==="object"||t==="function")&&!Roe(e)}function koe(e){const t=e==null?0:e.length;return t?e[t-1]:void 0}function Doe(e){const t=parseFloat(e.toString()),r=e.toString().replace(String(t),"");return{unitless:!r,value:t,unit:r}}function P4(e){if(e==null)return e;const{unitless:t}=Doe(e);return t||typeof e=="number"?`${e}px`:e}const $7=(e,t)=>parseInt(e[1],10)>parseInt(t[1],10)?1:-1,BL=e=>Object.fromEntries(Object.entries(e).sort($7));function SN(e){const t=BL(e);return Object.assign(Object.values(t),t)}function Loe(e){const t=Object.keys(BL(e));return new Set(t)}function EN(e){if(!e)return e;e=P4(e)??e;const t=-.02;return typeof e=="number"?`${e+t}`:e.replace(/(\d+\.?\d*)/u,r=>`${parseFloat(r)+t}`)}function C1(e,t){const r=["@media screen"];return e&&r.push("and",`(min-width: ${P4(e)})`),t&&r.push("and",`(max-width: ${P4(t)})`),r.join(" ")}function Ooe(e){if(!e)return null;e.base=e.base??"0px";const t=SN(e),r=Object.entries(e).sort($7).map(([l,h],p,o)=>{let[,_]=o[p+1]??[];return _=parseFloat(_)>0?EN(_):void 0,{_minW:EN(h),breakpoint:l,minW:h,maxW:_,maxWQuery:C1(null,_),minWQuery:C1(h),minMaxQuery:C1(h,_)}}),n=Loe(e),i=Array.from(n.values());return{keys:n,normalized:t,isResponsive(l){const h=Object.keys(l);return h.length>0&&h.every(p=>n.has(p))},asObject:BL(e),asArray:SN(e),details:r,get(l){return r.find(h=>h.breakpoint===l)},media:[null,...t.map(l=>C1(l)).slice(1)],toArrayValue(l){if(!uu(l))throw new Error("toArrayValue: value must be an object");const h=i.map(p=>l[p]??null);for(;koe(h)===null;)h.pop();return h},toObjectValue(l){if(!Array.isArray(l))throw new Error("toObjectValue: value must be an array");return l.reduce((h,p,o)=>{const _=i[o];return _!=null&&p!=null&&(h[_]=p),h},{})}}}function TN(...e){return function(r){e.some(n=>(n==null||n(r),r==null?void 0:r.defaultPrevented))}}function eK(e){return Re.Children.toArray(e).filter(t=>Re.isValidElement(t))}function bI(e){const t=Object.assign({},e);for(let r in t)t[r]===void 0&&delete t[r];return t}function Uoe(e,t){return`${e} returned \`undefined\`. Seems you forgot to wrap component within ${t}`}function lh(e={}){const{name:t,strict:r=!0,hookName:n="useContext",providerName:i="Provider",errorMessage:l,defaultValue:h}=e,p=Re.createContext(h);p.displayName=t;function o(){var C;const _=Re.useContext(p);if(!_&&r){const M=new Error(l??Uoe(n,i));throw M.name="ContextError",(C=Error.captureStackTrace)==null||C.call(Error,M,o),M}return _}return[p.Provider,o,p]}const Vs=(...e)=>e.filter(Boolean).join(" ");function zoe(e,t,r,n){const i=typeof t=="string"?t.split("."):[t];for(n=0;n<i.length&&e;n+=1)e=e[i[n]];return e===void 0?r:e}const Voe=e=>{const t=new WeakMap;return(n,i,l,h)=>{if(typeof n>"u")return e(n,i,l);t.has(n)||t.set(n,new Map);const p=t.get(n);if(p.has(i))return p.get(i);const o=e(n,i,l,h);return p.set(i,o),o}},tK=Voe(zoe),Noe=e=>e.default||e;function rK(e,t=[]){const r=Object.assign({},e);for(const n of t)n in r&&delete r[n];return r}function Qoe(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function Hoe(e,t){return Array.isArray(e)?e.map(r=>r===null?null:t(r)):uu(e)?Object.keys(e).reduce((r,n)=>(r[n]=t(e[n]),r),{}):e!=null?t(e):null}const joe=e=>typeof e=="function";function iu(e,...t){return joe(e)?e(...t):e}function Goe(e,...t){const r=Object.getOwnPropertyDescriptors(e),n=Object.keys(r),i=h=>{const p={};for(let o=0;o<h.length;o++){const _=h[o];r[_]&&(Object.defineProperty(p,_,r[_]),delete r[_])}return p},l=h=>i(Array.isArray(h)?h:n.filter(h));return t.map(l).concat(i(n))}function IN(e,t,r={}){const{stop:n,getKey:i}=r;function l(h,p=[]){if(uu(h)||Array.isArray(h)){const o={};for(const[_,C]of Object.entries(h)){const M=(i==null?void 0:i(_))??_,L=[...p,M];if(n!=null&&n(h,L))return t(h,p);o[M]=l(C,L)}return o}return t(h,p)}return l(e)}const Fs={open:(e,t)=>`${e}[data-open], ${e}[open], ${e}[data-state=open] ${t}`,closed:(e,t)=>`${e}[data-closed], ${e}[data-state=closed] ${t}`,hover:(e,t)=>`${e}:hover ${t}, ${e}[data-hover] ${t}`,focus:(e,t)=>`${e}:focus ${t}, ${e}[data-focus] ${t}`,focusVisible:(e,t)=>`${e}:focus-visible ${t}`,focusWithin:(e,t)=>`${e}:focus-within ${t}`,active:(e,t)=>`${e}:active ${t}, ${e}[data-active] ${t}`,disabled:(e,t)=>`${e}:disabled ${t}, ${e}[data-disabled] ${t}`,invalid:(e,t)=>`${e}:invalid ${t}, ${e}[data-invalid] ${t}`,checked:(e,t)=>`${e}:checked ${t}, ${e}[data-checked] ${t}`,indeterminate:(e,t)=>`${e}:indeterminate ${t}, ${e}[aria-checked=mixed] ${t}, ${e}[data-indeterminate] ${t}`,readOnly:(e,t)=>`${e}:read-only ${t}, ${e}[readonly] ${t}, ${e}[data-read-only] ${t}`,expanded:(e,t)=>`${e}:read-only ${t}, ${e}[aria-expanded=true] ${t}, ${e}[data-expanded] ${t}`,placeholderShown:(e,t)=>`${e}:placeholder-shown ${t}`},Mh=e=>nK(t=>e(t,"&"),"[role=group]","[data-group]",".group"),TA=e=>nK(t=>e(t,"~ &"),"[data-peer]",".peer"),nK=(e,...t)=>t.map(e).join(", "),Koe={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within, &[data-focus-within]",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty, &[data-empty]",_expanded:"&[aria-expanded=true], &[data-expanded], &[data-state=expanded]",_checked:"&[aria-checked=true], &[data-checked], &[data-state=checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate], &[data-state=indeterminate]",_groupOpen:Mh(Fs.open),_groupClosed:Mh(Fs.closed),_groupHover:Mh(Fs.hover),_peerHover:TA(Fs.hover),_groupFocus:Mh(Fs.focus),_peerFocus:TA(Fs.focus),_groupFocusVisible:Mh(Fs.focusVisible),_peerFocusVisible:TA(Fs.focusVisible),_groupActive:Mh(Fs.active),_peerActive:TA(Fs.active),_groupDisabled:Mh(Fs.disabled),_peerDisabled:TA(Fs.disabled),_groupInvalid:Mh(Fs.invalid),_peerInvalid:TA(Fs.invalid),_groupChecked:Mh(Fs.checked),_peerChecked:TA(Fs.checked),_groupFocusWithin:Mh(Fs.focusWithin),_peerFocusWithin:TA(Fs.focusWithin),_peerPlaceholderShown:TA(Fs.placeholderShown),_placeholder:"&::placeholder, &[data-placeholder]",_placeholderShown:"&:placeholder-shown, &[data-placeholder-shown]",_fullScreen:"&:fullscreen, &[data-fullscreen]",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]",_open:"&[data-open], &[open], &[data-state=open]",_closed:"&[data-closed], &[data-state=closed]",_complete:"&[data-complete]",_incomplete:"&[data-incomplete]",_current:"&[data-current]"};function wI(e){const t=e.conditions??{},r=Object.fromEntries(Object.entries(t).map(([n,i])=>[`_${n}`,i]));return{...Koe,...r}}function iK(e){return Object.keys(wI(e))}const Woe=e=>/!(important)?$/.test(e),FN=e=>typeof e=="string"?e.replace(/!(important)?$/,"").trim():e,qoe=(e,t)=>r=>{const n=String(t),i=Woe(n),l=FN(n),h=e?`${e}.${l}`:l;let p=uu(r.__cssMap)&&h in r.__cssMap?r.__cssMap[h].varRef:t;return p=FN(p),i?`${p} !important`:p};function CL(e){const{scale:t,transform:r,compose:n}=e;return(l,h)=>{const p=qoe(t,l)(h);let o=(r==null?void 0:r(p,h))??p;return n&&(o=n(o,h)),o}}const yC=(...e)=>t=>e.reduce((r,n)=>n(r),t);function Nc(e,t){return r=>{const n={property:r,scale:e};return n.transform=CL({scale:e,transform:t}),n}}const Xoe=({rtl:e,ltr:t})=>r=>r.direction==="rtl"?e:t;function Zoe(e){const{property:t,scale:r,transform:n}=e;return{scale:r,property:Xoe(t),transform:r?CL({scale:r,compose:n}):n}}const oK=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function Yoe(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...oK].join(" ")}function Joe(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...oK].join(" ")}const $oe={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},ese={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function tse(e){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":e,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}const rse={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},M4={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},nse=new Set(Object.values(M4)),R4=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),ise=e=>e.trim();function ose(e,t){if(e==null||R4.has(e))return e;if(!(k4(e)||R4.has(e)))return`url('${e}')`;const i=/(^[a-z-A-Z]+)\((.*)\)/g.exec(e),l=i==null?void 0:i[1],h=i==null?void 0:i[2];if(!l||!h)return e;const p=l.includes("-gradient")?l:`${l}-gradient`,[o,..._]=h.split(",").map(ise).filter(Boolean);if((_==null?void 0:_.length)===0)return e;const C=o in M4?M4[o]:o;_.unshift(C);const M=_.map(L=>{if(nse.has(L))return L;const z=L.indexOf(" "),[j,K]=z!==-1?[L.substr(0,z),L.substr(z+1)]:[L],$=k4(K)?K:K&&K.split(" "),q=`colors.${j}`,ee=q in t.__cssMap?t.__cssMap[q].varRef:j;return $?[ee,...Array.isArray($)?$:[$]].join(" "):ee});return`${p}(${M.join(", ")})`}const k4=e=>typeof e=="string"&&e.includes("(")&&e.includes(")"),sse=(e,t)=>ose(e,t??{});function ase(e){return/^var\(--.+\)$/.test(e)}const lse=e=>{const t=parseFloat(e.toString()),r=e.toString().replace(String(t),"");return{unitless:!r,value:t,unit:r}},Rh=e=>t=>`${e}(${t})`,ni={filter(e){return e!=="auto"?e:$oe},backdropFilter(e){return e!=="auto"?e:ese},ring(e){return tse(ni.px(e))},bgClip(e){return e==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:e}},transform(e){return e==="auto"?Yoe():e==="auto-gpu"?Joe():e},vh(e){return e==="$100vh"?"var(--chakra-vh)":e},px(e){if(e==null)return e;const{unitless:t}=lse(e);return t||typeof e=="number"?`${e}px`:e},fraction(e){return typeof e!="number"||e>1?e:`${e*100}%`},float(e,t){const r={left:"right",right:"left"};return t.direction==="rtl"?r[e]:e},degree(e){if(ase(e)||e==null)return e;const t=typeof e=="string"&&!e.endsWith("deg");return typeof e=="number"||t?`${e}deg`:e},gradient:sse,blur:Rh("blur"),opacity:Rh("opacity"),brightness:Rh("brightness"),contrast:Rh("contrast"),dropShadow:Rh("drop-shadow"),grayscale:Rh("grayscale"),hueRotate:e=>Rh("hue-rotate")(ni.degree(e)),invert:Rh("invert"),saturate:Rh("saturate"),sepia:Rh("sepia"),bgImage(e){return e==null||k4(e)||R4.has(e)?e:`url(${e})`},outline(e){const t=String(e)==="0"||String(e)==="none";return e!==null&&t?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:e}},flexDirection(e){const{space:t,divide:r}=rse[e]??{},n={flexDirection:e};return t&&(n[t]=1),r&&(n[r]=1),n}},yt={borderWidths:Nc("borderWidths"),borderStyles:Nc("borderStyles"),colors:Nc("colors"),borders:Nc("borders"),gradients:Nc("gradients",ni.gradient),radii:Nc("radii",ni.px),space:Nc("space",yC(ni.vh,ni.px)),spaceT:Nc("space",yC(ni.vh,ni.px)),degreeT(e){return{property:e,transform:ni.degree}},prop(e,t,r){return{property:e,scale:t,...t&&{transform:CL({scale:t,transform:r})}}},propT(e,t){return{property:e,transform:t}},sizes:Nc("sizes",yC(ni.vh,ni.px)),sizesT:Nc("sizes",yC(ni.vh,ni.fraction)),shadows:Nc("shadows"),logical:Zoe,blur:Nc("blur",ni.blur)},VS={background:yt.colors("background"),backgroundColor:yt.colors("backgroundColor"),backgroundImage:yt.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:ni.bgClip},bgSize:yt.prop("backgroundSize"),bgPosition:yt.prop("backgroundPosition"),bg:yt.colors("background"),bgColor:yt.colors("backgroundColor"),bgPos:yt.prop("backgroundPosition"),bgRepeat:yt.prop("backgroundRepeat"),bgAttachment:yt.prop("backgroundAttachment"),bgGradient:yt.gradients("backgroundImage"),bgClip:{transform:ni.bgClip}};Object.assign(VS,{bgImage:VS.backgroundImage,bgImg:VS.backgroundImage});const Ci={border:yt.borders("border"),borderWidth:yt.borderWidths("borderWidth"),borderStyle:yt.borderStyles("borderStyle"),borderColor:yt.colors("borderColor"),borderRadius:yt.radii("borderRadius"),borderTop:yt.borders("borderTop"),borderBlockStart:yt.borders("borderBlockStart"),borderTopLeftRadius:yt.radii("borderTopLeftRadius"),borderStartStartRadius:yt.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:yt.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:yt.radii("borderTopRightRadius"),borderStartEndRadius:yt.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:yt.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:yt.borders("borderRight"),borderInlineEnd:yt.borders("borderInlineEnd"),borderBottom:yt.borders("borderBottom"),borderBlockEnd:yt.borders("borderBlockEnd"),borderBottomLeftRadius:yt.radii("borderBottomLeftRadius"),borderBottomRightRadius:yt.radii("borderBottomRightRadius"),borderLeft:yt.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:yt.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:yt.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:yt.borders(["borderLeft","borderRight"]),borderInline:yt.borders("borderInline"),borderY:yt.borders(["borderTop","borderBottom"]),borderBlock:yt.borders("borderBlock"),borderTopWidth:yt.borderWidths("borderTopWidth"),borderBlockStartWidth:yt.borderWidths("borderBlockStartWidth"),borderTopColor:yt.colors("borderTopColor"),borderBlockStartColor:yt.colors("borderBlockStartColor"),borderTopStyle:yt.borderStyles("borderTopStyle"),borderBlockStartStyle:yt.borderStyles("borderBlockStartStyle"),borderBottomWidth:yt.borderWidths("borderBottomWidth"),borderBlockEndWidth:yt.borderWidths("borderBlockEndWidth"),borderBottomColor:yt.colors("borderBottomColor"),borderBlockEndColor:yt.colors("borderBlockEndColor"),borderBottomStyle:yt.borderStyles("borderBottomStyle"),borderBlockEndStyle:yt.borderStyles("borderBlockEndStyle"),borderLeftWidth:yt.borderWidths("borderLeftWidth"),borderInlineStartWidth:yt.borderWidths("borderInlineStartWidth"),borderLeftColor:yt.colors("borderLeftColor"),borderInlineStartColor:yt.colors("borderInlineStartColor"),borderLeftStyle:yt.borderStyles("borderLeftStyle"),borderInlineStartStyle:yt.borderStyles("borderInlineStartStyle"),borderRightWidth:yt.borderWidths("borderRightWidth"),borderInlineEndWidth:yt.borderWidths("borderInlineEndWidth"),borderRightColor:yt.colors("borderRightColor"),borderInlineEndColor:yt.colors("borderInlineEndColor"),borderRightStyle:yt.borderStyles("borderRightStyle"),borderInlineEndStyle:yt.borderStyles("borderInlineEndStyle"),borderTopRadius:yt.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:yt.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:yt.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:yt.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(Ci,{rounded:Ci.borderRadius,roundedTop:Ci.borderTopRadius,roundedTopLeft:Ci.borderTopLeftRadius,roundedTopRight:Ci.borderTopRightRadius,roundedTopStart:Ci.borderStartStartRadius,roundedTopEnd:Ci.borderStartEndRadius,roundedBottom:Ci.borderBottomRadius,roundedBottomLeft:Ci.borderBottomLeftRadius,roundedBottomRight:Ci.borderBottomRightRadius,roundedBottomStart:Ci.borderEndStartRadius,roundedBottomEnd:Ci.borderEndEndRadius,roundedLeft:Ci.borderLeftRadius,roundedRight:Ci.borderRightRadius,roundedStart:Ci.borderInlineStartRadius,roundedEnd:Ci.borderInlineEndRadius,borderStart:Ci.borderInlineStart,borderEnd:Ci.borderInlineEnd,borderTopStartRadius:Ci.borderStartStartRadius,borderTopEndRadius:Ci.borderStartEndRadius,borderBottomStartRadius:Ci.borderEndStartRadius,borderBottomEndRadius:Ci.borderEndEndRadius,borderStartRadius:Ci.borderInlineStartRadius,borderEndRadius:Ci.borderInlineEndRadius,borderStartWidth:Ci.borderInlineStartWidth,borderEndWidth:Ci.borderInlineEndWidth,borderStartColor:Ci.borderInlineStartColor,borderEndColor:Ci.borderInlineEndColor,borderStartStyle:Ci.borderInlineStartStyle,borderEndStyle:Ci.borderInlineEndStyle});const cse={color:yt.colors("color"),textColor:yt.colors("color"),fill:yt.colors("fill"),stroke:yt.colors("stroke"),accentColor:yt.colors("accentColor"),textFillColor:yt.colors("textFillColor")},XE={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:ni.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:yt.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:yt.space("gap"),rowGap:yt.space("rowGap"),columnGap:yt.space("columnGap")};Object.assign(XE,{flexDir:XE.flexDirection});const qc={width:yt.sizesT("width"),inlineSize:yt.sizesT("inlineSize"),height:yt.sizes("height"),blockSize:yt.sizes("blockSize"),boxSize:yt.sizes(["width","height"]),minWidth:yt.sizes("minWidth"),minInlineSize:yt.sizes("minInlineSize"),minHeight:yt.sizes("minHeight"),minBlockSize:yt.sizes("minBlockSize"),maxWidth:yt.sizes("maxWidth"),maxInlineSize:yt.sizes("maxInlineSize"),maxHeight:yt.sizes("maxHeight"),maxBlockSize:yt.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(e,t)=>{var i,l;return{[`@media screen and (min-width: ${((l=(i=t.__breakpoints)==null?void 0:i.get(e))==null?void 0:l.minW)??e})`]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(e,t)=>{var i,l;return{[`@media screen and (max-width: ${((l=(i=t.__breakpoints)==null?void 0:i.get(e))==null?void 0:l._minW)??e})`]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:yt.propT("float",ni.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(qc,{w:qc.width,h:qc.height,minW:qc.minWidth,maxW:qc.maxWidth,minH:qc.minHeight,maxH:qc.maxHeight,overscroll:qc.overscrollBehavior,overscrollX:qc.overscrollBehaviorX,overscrollY:qc.overscrollBehaviorY});const use={filter:{transform:ni.filter},blur:yt.blur("--chakra-blur"),brightness:yt.propT("--chakra-brightness",ni.brightness),contrast:yt.propT("--chakra-contrast",ni.contrast),hueRotate:yt.propT("--chakra-hue-rotate",ni.hueRotate),invert:yt.propT("--chakra-invert",ni.invert),saturate:yt.propT("--chakra-saturate",ni.saturate),dropShadow:yt.propT("--chakra-drop-shadow",ni.dropShadow),backdropFilter:{transform:ni.backdropFilter},backdropBlur:yt.blur("--chakra-backdrop-blur"),backdropBrightness:yt.propT("--chakra-backdrop-brightness",ni.brightness),backdropContrast:yt.propT("--chakra-backdrop-contrast",ni.contrast),backdropHueRotate:yt.propT("--chakra-backdrop-hue-rotate",ni.hueRotate),backdropInvert:yt.propT("--chakra-backdrop-invert",ni.invert),backdropSaturate:yt.propT("--chakra-backdrop-saturate",ni.saturate)},hse={ring:{transform:ni.ring},ringColor:yt.colors("--chakra-ring-color"),ringOffset:yt.prop("--chakra-ring-offset-width"),ringOffsetColor:yt.colors("--chakra-ring-offset-color"),ringInset:yt.prop("--chakra-ring-inset")},Ase={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:ni.outline},outlineOffset:!0,outlineColor:yt.colors("outlineColor")},sK={gridGap:yt.space("gridGap"),gridColumnGap:yt.space("gridColumnGap"),gridRowGap:yt.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0};function dse(e,t,r,n){const i=typeof t=="string"?t.split("."):[t];for(n=0;n<i.length&&e;n+=1)e=e[i[n]];return e===void 0?r:e}const fse=e=>{const t=new WeakMap;return(n,i,l,h)=>{if(typeof n>"u")return e(n,i,l);t.has(n)||t.set(n,new Map);const p=t.get(n);if(p.has(i))return p.get(i);const o=e(n,i,l,h);return p.set(i,o),o}},pse=fse(dse),mse={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},gse={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},rR=(e,t,r)=>{const n={},i=pse(e,t,{});for(const l in i)l in r&&r[l]!=null||(n[l]=i[l]);return n},yse={srOnly:{transform(e){return e===!0?mse:e==="focusable"?gse:{}}},layerStyle:{processResult:!0,transform:(e,t,r)=>rR(t,`layerStyles.${e}`,r)},textStyle:{processResult:!0,transform:(e,t,r)=>rR(t,`textStyles.${e}`,r)},apply:{processResult:!0,transform:(e,t,r)=>rR(t,e,r)}},ix={position:!0,pos:yt.prop("position"),zIndex:yt.prop("zIndex","zIndices"),inset:yt.spaceT("inset"),insetX:yt.spaceT(["left","right"]),insetInline:yt.spaceT("insetInline"),insetY:yt.spaceT(["top","bottom"]),insetBlock:yt.spaceT("insetBlock"),top:yt.spaceT("top"),insetBlockStart:yt.spaceT("insetBlockStart"),bottom:yt.spaceT("bottom"),insetBlockEnd:yt.spaceT("insetBlockEnd"),left:yt.spaceT("left"),insetInlineStart:yt.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:yt.spaceT("right"),insetInlineEnd:yt.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(ix,{insetStart:ix.insetInlineStart,insetEnd:ix.insetInlineEnd});const D4={boxShadow:yt.shadows("boxShadow"),mixBlendMode:!0,blendMode:yt.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:yt.prop("backgroundBlendMode"),opacity:!0};Object.assign(D4,{shadow:D4.boxShadow});const yo={margin:yt.spaceT("margin"),marginTop:yt.spaceT("marginTop"),marginBlockStart:yt.spaceT("marginBlockStart"),marginRight:yt.spaceT("marginRight"),marginInlineEnd:yt.spaceT("marginInlineEnd"),marginBottom:yt.spaceT("marginBottom"),marginBlockEnd:yt.spaceT("marginBlockEnd"),marginLeft:yt.spaceT("marginLeft"),marginInlineStart:yt.spaceT("marginInlineStart"),marginX:yt.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:yt.spaceT("marginInline"),marginY:yt.spaceT(["marginTop","marginBottom"]),marginBlock:yt.spaceT("marginBlock"),padding:yt.space("padding"),paddingTop:yt.space("paddingTop"),paddingBlockStart:yt.space("paddingBlockStart"),paddingRight:yt.space("paddingRight"),paddingBottom:yt.space("paddingBottom"),paddingBlockEnd:yt.space("paddingBlockEnd"),paddingLeft:yt.space("paddingLeft"),paddingInlineStart:yt.space("paddingInlineStart"),paddingInlineEnd:yt.space("paddingInlineEnd"),paddingX:yt.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:yt.space("paddingInline"),paddingY:yt.space(["paddingTop","paddingBottom"]),paddingBlock:yt.space("paddingBlock")};Object.assign(yo,{m:yo.margin,mt:yo.marginTop,mr:yo.marginRight,me:yo.marginInlineEnd,marginEnd:yo.marginInlineEnd,mb:yo.marginBottom,ml:yo.marginLeft,ms:yo.marginInlineStart,marginStart:yo.marginInlineStart,mx:yo.marginX,my:yo.marginY,p:yo.padding,pt:yo.paddingTop,py:yo.paddingY,px:yo.paddingX,pb:yo.paddingBottom,pl:yo.paddingLeft,ps:yo.paddingInlineStart,paddingStart:yo.paddingInlineStart,pr:yo.paddingRight,pe:yo.paddingInlineEnd,paddingEnd:yo.paddingInlineEnd});const vse={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:yt.spaceT("scrollMargin"),scrollMarginTop:yt.spaceT("scrollMarginTop"),scrollMarginBottom:yt.spaceT("scrollMarginBottom"),scrollMarginLeft:yt.spaceT("scrollMarginLeft"),scrollMarginRight:yt.spaceT("scrollMarginRight"),scrollMarginX:yt.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:yt.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:yt.spaceT("scrollPadding"),scrollPaddingTop:yt.spaceT("scrollPaddingTop"),scrollPaddingBottom:yt.spaceT("scrollPaddingBottom"),scrollPaddingLeft:yt.spaceT("scrollPaddingLeft"),scrollPaddingRight:yt.spaceT("scrollPaddingRight"),scrollPaddingX:yt.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:yt.spaceT(["scrollPaddingTop","scrollPaddingBottom"])},_se={fontFamily:yt.prop("fontFamily","fonts"),fontSize:yt.prop("fontSize","fontSizes",ni.px),fontWeight:yt.prop("fontWeight","fontWeights"),lineHeight:yt.prop("lineHeight","lineHeights"),letterSpacing:yt.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(e){if(e===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},xse={textDecorationColor:yt.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:yt.shadows("textShadow")},bse={clipPath:!0,transform:yt.propT("transform",ni.transform),transformOrigin:!0,translateX:yt.spaceT("--chakra-translate-x"),translateY:yt.spaceT("--chakra-translate-y"),skewX:yt.degreeT("--chakra-skew-x"),skewY:yt.degreeT("--chakra-skew-y"),scaleX:yt.prop("--chakra-scale-x"),scaleY:yt.prop("--chakra-scale-y"),scale:yt.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:yt.degreeT("--chakra-rotate")},wse={listStyleType:!0,listStylePosition:!0,listStylePos:yt.prop("listStylePosition"),listStyleImage:!0,listStyleImg:yt.prop("listStyleImage")},Bse={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:yt.prop("transitionDuration","transition.duration"),transitionProperty:yt.prop("transitionProperty","transition.property"),transitionTimingFunction:yt.prop("transitionTimingFunction","transition.easing")},SL=Os({},VS,Ci,cse,XE,qc,use,hse,Ase,sK,yse,ix,D4,yo,vse,_se,xse,bse,wse,Bse);Object.assign({},yo,qc,XE,sK,ix);const Cse=e=>[...Object.keys(SL),...iK(e)],Sse=e=>{const t=wI(e);return r=>{const n={...SL,...t};return Object.hasOwnProperty.call(n,r)}},Ese=e=>t=>{if(!t.__breakpoints)return e;const{isResponsive:r,toArrayValue:n,media:i}=t.__breakpoints,l={};for(const h in e){let p=iu(e[h],t);if(p==null)continue;if(p=uu(p)&&r(p)?n(p):p,!Array.isArray(p)){l[h]=p;continue}const o=p.slice(0,i.length).length;for(let _=0;_<o;_+=1){const C=i==null?void 0:i[_];if(!C){l[h]=p[_];continue}l[C]=l[C]||{},p[_]!=null&&(l[C][h]=p[_])}}return l};function Tse(e){const t=[];let r="",n=!1;for(let i=0;i<e.length;i++){const l=e[i];l==="("?(n=!0,r+=l):l===")"?(n=!1,r+=l):l===","&&!n?(t.push(r),r=""):r+=l}return r=r.trim(),r&&t.push(r),t}function Ise(e){return/^var\(--.+\)$/.test(e)}const Fse=(e,t)=>e.startsWith("--")&&typeof t=="string"&&!Ise(t),Pse=(e,t)=>{if(t==null)return t;const r=h=>{var p,o;return(o=(p=e.__cssMap)==null?void 0:p[h])==null?void 0:o.varRef},n=h=>r(h)??h,[i,l]=Tse(t);return t=r(i)??n(l)??n(t),t};function Mse(e){const{configs:t={},pseudos:r={},theme:n}=e,i=(l,h=!1)=>{var C;const p=iu(l,n),o=Ese(p)(n);let _={};for(let M in o){const L=o[M];let z=iu(L,n);M in r&&(M=r[M]),Fse(M,z)&&(z=Pse(n,z));let j=t[M];if(j===!0&&(j={property:M}),uu(z)){_[M]=_[M]??{},_[M]=Os({},_[M],i(z,!0));continue}let K=((C=j==null?void 0:j.transform)==null?void 0:C.call(j,z,n,p))??z;K=j!=null&&j.processResult?i(K,!0):K;const $=iu(j==null?void 0:j.property,n);if(!h&&(j!=null&&j.static)){const q=iu(j.static,n);_=Os({},_,q)}if($&&Array.isArray($)){for(const q of $)_[q]=K;continue}if($){$==="&"&&uu(K)?_=Os({},_,K):_[$]=K;continue}if(uu(K)){_=Os({},_,K);continue}_[M]=K}return _};return i}const aK=e=>t=>Mse({theme:t,pseudos:wI(t),configs:SL})(e);function ho(e){return{definePartsStyle(t){return t},defineMultiStyleConfig(t){return{parts:e,...t}}}}function Rse(e,t){if(Array.isArray(e))return e;if(uu(e))return t(e);if(e!=null)return[e]}function kse(e,t){for(let r=t+1;r<e.length;r++)if(e[r]!=null)return r;return-1}function Dse(e){const t=e.__breakpoints;return function(n,i,l,h){var L,z;if(!t)return;const p={},o=Rse(l,t.toArrayValue);if(!o)return p;const _=o.length,C=_===1,M=!!n.parts;for(let j=0;j<_;j++){const K=t.details[j],$=t.details[kse(o,j)],q=C1(K.minW,$==null?void 0:$._minW),ee=iu((L=n[i])==null?void 0:L[o[j]],h);if(ee){if(M){(z=n.parts)==null||z.forEach(ie=>{Os(p,{[ie]:C?ee[ie]:{[q]:ee[ie]}})});continue}if(!M){C?Os(p,ee):p[q]=ee;continue}p[q]=ee}}return p}}function Lse(e){return t=>{const{variant:r,size:n,theme:i}=t,l=Dse(i);return Os({},iu(e.baseStyle??{},t),l(e,"sizes",n,t),l(e,"variants",r,t))}}function uA(e){return rK(e,["styleConfig","size","variant","colorScheme"])}function lK(e){return uu(e)&&e.reference?e.reference:String(e)}const BI=(e,...t)=>t.map(lK).join(` ${e} `).replace(/calc/g,""),PN=(...e)=>`calc(${BI("+",...e)})`,MN=(...e)=>`calc(${BI("-",...e)})`,L4=(...e)=>`calc(${BI("*",...e)})`,RN=(...e)=>`calc(${BI("/",...e)})`,kN=e=>{const t=lK(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:L4(t,-1)},UA=Object.assign(e=>({add:(...t)=>UA(PN(e,...t)),subtract:(...t)=>UA(MN(e,...t)),multiply:(...t)=>UA(L4(e,...t)),divide:(...t)=>UA(RN(e,...t)),negate:()=>UA(kN(e)),toString:()=>e.toString()}),{add:PN,subtract:MN,multiply:L4,divide:RN,negate:kN});function Ose(e,t="-"){return e.replace(/\s+/g,t)}function Use(e){const t=Ose(e.toString());return Vse(zse(t))}function zse(e){return e.includes("\\.")?e:!Number.isInteger(parseFloat(e.toString()))?e.replace(".","\\."):e}function Vse(e){return e.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}function Nse(e,t=""){return[t,e].filter(Boolean).join("-")}function Qse(e,t){return`var(${e}${t?`, ${t}`:""})`}function Hse(e,t=""){return Use(`--${Nse(e,t)}`)}function sn(e,t,r){const n=Hse(e,r);return{variable:n,reference:Qse(n,t)}}function jse(e,t){const r={};for(const n of t){if(Array.isArray(n)){const[i,l]=n;r[i]=sn(`${e}-${i}`,l);continue}r[n]=sn(`${e}-${n}`)}return r}const Gse=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function Kse(e){return Qoe(e,Gse)}function Wse(e){return e.semanticTokens}function qse(e){const{__cssMap:t,__cssVars:r,__breakpoints:n,...i}=e;return i}function Xse(e){const t=Kse(e),r=Wse(e),n=iK(e),i=h=>n.includes(h)||h==="default",l={};return IN(t,(h,p)=>{h!=null&&(l[p.join(".")]={isSemantic:!1,value:h})}),IN(r,(h,p)=>{h!=null&&(l[p.join(".")]={isSemantic:!0,value:h})},{stop:h=>Object.keys(h).every(i)}),l}function DN(e,t){return sn(String(e).replace(/\./g,"-"),void 0,t)}function Zse(e){var p;const t=Xse(e),r=(p=e.config)==null?void 0:p.cssVarPrefix,n=wI(e);let i={};const l={};function h(o,_){const M=[String(o).split(".")[0],_].join(".");if(!t[M])return _;const{reference:z}=DN(M,r);return z}for(const[o,_]of Object.entries(t)){const{isSemantic:C,value:M}=_,{variable:L,reference:z}=DN(o,r);if(!C){if(o.startsWith("space")){const K=o.split("."),[$,...q]=K,ee=`${$}.-${q.join(".")}`,ie=UA.negate(M),fe=UA.negate(z);l[ee]={value:ie,var:L,varRef:fe}}i[L]=M,l[o]={value:M,var:L,varRef:z};continue}const j=uu(M)?M:{default:M};i=Os(i,Object.entries(j).reduce((K,[$,q])=>{if(!q)return K;const ee=h(o,`${q}`);if($==="default")return K[L]=ee,K;const ie=(n==null?void 0:n[$])??$;return K[ie]={[L]:ee},K},{})),l[o]={value:z,var:L,varRef:z}}return{cssVars:i,cssMap:l}}function Yse(e){const t=qse(e),{cssMap:r,cssVars:n}=Zse(t);return Object.assign(t,{__cssVars:{...{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"},...n},__cssMap:r,__breakpoints:Ooe(t.breakpoints)}),t}function ki(e,t={}){let r=!1;function n(){if(!r){r=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}function i(...C){n();for(const M of C)t[M]=o(M);return ki(e,t)}function l(...C){for(const M of C)M in t||(t[M]=o(M));return ki(e,t)}function h(){return Object.fromEntries(Object.entries(t).map(([M,L])=>[M,L.selector]))}function p(){return Object.fromEntries(Object.entries(t).map(([M,L])=>[M,L.className]))}function o(C){const z=`chakra-${(["container","root"].includes(C??"")?[e]:[e,C]).filter(Boolean).join("__")}`;return{className:z,selector:`.${z}`,toString:()=>C}}return{parts:i,toPart:o,extend:l,selectors:h,classnames:p,get keys(){return Object.keys(t)},__type:{}}}const Jse=ki("accordion").parts("root","container","button","panel","icon"),$se=ki("alert").parts("title","description","container","icon","spinner"),eae=ki("avatar").parts("label","badge","container","excessLabel","group"),tae=ki("breadcrumb").parts("link","item","container","separator");ki("button").parts();const rae=ki("checkbox").parts("control","icon","container","label");ki("progress").parts("track","filledTrack","label");const nae=ki("drawer").parts("overlay","dialogContainer","dialog","header","closeButton","body","footer"),iae=ki("editable").parts("preview","input","textarea"),oae=ki("form").parts("container","requiredIndicator","helperText"),sae=ki("formError").parts("text","icon"),aae=ki("input").parts("addon","field","element","group"),lae=ki("list").parts("container","item","icon"),cae=ki("menu").parts("button","list","item","groupTitle","icon","command","divider"),uae=ki("modal").parts("overlay","dialogContainer","dialog","header","closeButton","body","footer"),hae=ki("numberinput").parts("root","field","stepperGroup","stepper");ki("pininput").parts("field");const Aae=ki("popover").parts("content","header","body","footer","popper","arrow","closeButton"),dae=ki("progress").parts("label","filledTrack","track"),fae=ki("radio").parts("container","control","label"),pae=ki("select").parts("field","icon"),mae=ki("slider").parts("container","track","thumb","filledTrack","mark"),gae=ki("stat").parts("container","label","helpText","number","icon"),yae=ki("switch").parts("container","track","thumb","label"),vae=ki("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),_ae=ki("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),xae=ki("tag").parts("container","label","closeButton"),bae=ki("card").parts("container","header","body","footer");ki("stepper").parts("stepper","step","title","description","indicator","separator","icon","number");const{definePartsStyle:wae,defineMultiStyleConfig:Bae}=ho(Jse.keys),Cae={borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},Sae={transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},Eae={pt:"2",px:"4",pb:"5"},Tae={fontSize:"1.25em"},Iae=wae({container:Cae,button:Sae,panel:Eae,icon:Tae}),Fae=Bae({baseStyle:Iae});function fm(e,t,r){return Math.min(Math.max(e,r),t)}class Pae extends Error{constructor(t){super(`Failed to parse color: "${t}"`)}}var S1=Pae;function EL(e){if(typeof e!="string")throw new S1(e);if(e.trim().toLowerCase()==="transparent")return[0,0,0,0];let t=e.trim();t=zae.test(e)?kae(e):e;const r=Dae.exec(t);if(r){const h=Array.from(r).slice(1);return[...h.slice(0,3).map(p=>parseInt(Jx(p,2),16)),parseInt(Jx(h[3]||"f",2),16)/255]}const n=Lae.exec(t);if(n){const h=Array.from(n).slice(1);return[...h.slice(0,3).map(p=>parseInt(p,16)),parseInt(h[3]||"ff",16)/255]}const i=Oae.exec(t);if(i){const h=Array.from(i).slice(1);return[...h.slice(0,3).map(p=>parseInt(p,10)),parseFloat(h[3]||"1")]}const l=Uae.exec(t);if(l){const[h,p,o,_]=Array.from(l).slice(1).map(parseFloat);if(fm(0,100,p)!==p)throw new S1(e);if(fm(0,100,o)!==o)throw new S1(e);return[...Vae(h,p,o),Number.isNaN(_)?1:_]}throw new S1(e)}function Mae(e){let t=5381,r=e.length;for(;r;)t=t*33^e.charCodeAt(--r);return(t>>>0)%2341}const LN=e=>parseInt(e.replace(/_/g,""),36),Rae="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((e,t)=>{const r=LN(t.substring(0,3)),n=LN(t.substring(3)).toString(16);let i="";for(let l=0;l<6-n.length;l++)i+="0";return e[r]=`${i}${n}`,e},{});function kae(e){const t=e.toLowerCase().trim(),r=Rae[Mae(t)];if(!r)throw new S1(e);return`#${r}`}const Jx=(e,t)=>Array.from(Array(t)).map(()=>e).join(""),Dae=new RegExp(`^#${Jx("([a-f0-9])",3)}([a-f0-9])?$`,"i"),Lae=new RegExp(`^#${Jx("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),Oae=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${Jx(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),Uae=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,zae=/^[a-z]+$/i,ON=e=>Math.round(e*255),Vae=(e,t,r)=>{let n=r/100;if(t===0)return[n,n,n].map(ON);const i=(e%360+360)%360/60,l=(1-Math.abs(2*n-1))*(t/100),h=l*(1-Math.abs(i%2-1));let p=0,o=0,_=0;i>=0&&i<1?(p=l,o=h):i>=1&&i<2?(p=h,o=l):i>=2&&i<3?(o=l,_=h):i>=3&&i<4?(o=h,_=l):i>=4&&i<5?(p=h,_=l):i>=5&&i<6&&(p=l,_=h);const C=n-l/2,M=p+C,L=o+C,z=_+C;return[M,L,z].map(ON)};function Nae(e,t,r,n){return`rgba(${fm(0,255,e).toFixed()}, ${fm(0,255,t).toFixed()}, ${fm(0,255,r).toFixed()}, ${parseFloat(fm(0,1,n).toFixed(3))})`}function Qae(e,t){const[r,n,i,l]=EL(e);return Nae(r,n,i,l-t)}function Hae(e){const[t,r,n,i]=EL(e);let l=h=>{const p=fm(0,255,h).toString(16);return p.length===1?`0${p}`:p};return`#${l(t)}${l(r)}${l(n)}${i<1?l(Math.round(i*255)):""}`}const jae=e=>Object.keys(e).length===0;function Gae(e,t,r,n,i){for(t=t.split?t.split("."):t,n=0;n<t.length;n++)e=e?e[t[n]]:i;return e===i?r:e}const dl=(e,t,r)=>{const n=Gae(e,`colors.${t}`,t);try{return Hae(n),n}catch{return"#000000"}},Kae=e=>{const[t,r,n]=EL(e);return(t*299+r*587+n*114)/1e3},Wae=e=>t=>{const r=dl(t,e);return Kae(r)<128?"dark":"light"},qae=e=>t=>Wae(e)(t)==="dark",My=(e,t)=>r=>{const n=dl(r,e);return Qae(n,1-t)};function UN(e="1rem",t="rgba(255, 255, 255, 0.15)"){return{backgroundImage:`linear-gradient(
    45deg,
    ${t} 25%,
    transparent 25%,
    transparent 50%,
    ${t} 50%,
    ${t} 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:`${e} ${e}`}}const Xae=()=>`#${Math.floor(Math.random()*16777215).toString(16).padEnd(6,"0")}`;function Zae(e){const t=Xae();return!e||jae(e)?t:e.string&&e.colors?Jae(e.string,e.colors):e.string&&!e.colors?Yae(e.string):e.colors&&!e.string?$ae(e.colors):t}function Yae(e){let t=0;if(e.length===0)return t.toString();for(let n=0;n<e.length;n+=1)t=e.charCodeAt(n)+((t<<5)-t),t=t&t;let r="#";for(let n=0;n<3;n+=1){const i=t>>n*8&255;r+=`00${i.toString(16)}`.substr(-2)}return r}function Jae(e,t){let r=0;if(e.length===0)return t[0];for(let n=0;n<e.length;n+=1)r=e.charCodeAt(n)+((r<<5)-r),r=r&r;return r=(r%t.length+t.length)%t.length,t[r]}function $ae(e){return e[Math.floor(Math.random()*e.length)]}function on(e,t){return r=>r.colorMode==="dark"?t:e}function TL(e){const{orientation:t,vertical:r,horizontal:n}=e;return t?t==="vertical"?r:n:{}}function cK(e){return uu(e)&&e.reference?e.reference:String(e)}const CI=(e,...t)=>t.map(cK).join(` ${e} `).replace(/calc/g,""),zN=(...e)=>`calc(${CI("+",...e)})`,VN=(...e)=>`calc(${CI("-",...e)})`,O4=(...e)=>`calc(${CI("*",...e)})`,NN=(...e)=>`calc(${CI("/",...e)})`,QN=e=>{const t=cK(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:O4(t,-1)},zA=Object.assign(e=>({add:(...t)=>zA(zN(e,...t)),subtract:(...t)=>zA(VN(e,...t)),multiply:(...t)=>zA(O4(e,...t)),divide:(...t)=>zA(NN(e,...t)),negate:()=>zA(QN(e)),toString:()=>e.toString()}),{add:zN,subtract:VN,multiply:O4,divide:NN,negate:QN});function ele(e){return!Number.isInteger(parseFloat(e.toString()))}function tle(e,t="-"){return e.replace(/\s+/g,t)}function uK(e){const t=tle(e.toString());return t.includes("\\.")?e:ele(e)?t.replace(".","\\."):e}function rle(e,t=""){return[t,uK(e)].filter(Boolean).join("-")}function nle(e,t){return`var(${uK(e)}${t?`, ${t}`:""})`}function ile(e,t=""){return`--${rle(e,t)}`}function Ns(e,t){const r=ile(e,t==null?void 0:t.prefix);return{variable:r,reference:nle(r,ole(t==null?void 0:t.fallback))}}function ole(e){return e==null?void 0:e.reference}const{definePartsStyle:Qb,defineMultiStyleConfig:sle}=ho($se.keys),Ac=sn("alert-fg"),ld=sn("alert-bg"),ale=Qb({container:{bg:ld.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:Ac.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:Ac.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function IL(e){const{theme:t,colorScheme:r}=e,n=My(`${r}.200`,.16)(t);return{light:`colors.${r}.100`,dark:n}}const lle=Qb(e=>{const{colorScheme:t}=e,r=IL(e);return{container:{[Ac.variable]:`colors.${t}.600`,[ld.variable]:r.light,_dark:{[Ac.variable]:`colors.${t}.200`,[ld.variable]:r.dark}}}}),cle=Qb(e=>{const{colorScheme:t}=e,r=IL(e);return{container:{[Ac.variable]:`colors.${t}.600`,[ld.variable]:r.light,_dark:{[Ac.variable]:`colors.${t}.200`,[ld.variable]:r.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:Ac.reference}}}),ule=Qb(e=>{const{colorScheme:t}=e,r=IL(e);return{container:{[Ac.variable]:`colors.${t}.600`,[ld.variable]:r.light,_dark:{[Ac.variable]:`colors.${t}.200`,[ld.variable]:r.dark},pt:"2",borderTopWidth:"4px",borderTopColor:Ac.reference}}}),hle=Qb(e=>{const{colorScheme:t}=e;return{container:{[Ac.variable]:"colors.white",[ld.variable]:`colors.${t}.600`,_dark:{[Ac.variable]:"colors.gray.900",[ld.variable]:`colors.${t}.200`},color:Ac.reference}}}),Ale={subtle:lle,"left-accent":cle,"top-accent":ule,solid:hle},dle=sle({baseStyle:ale,variants:Ale,defaultProps:{variant:"subtle",colorScheme:"blue"}}),hK={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},fle={max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch"},ple={sm:"640px",md:"768px",lg:"1024px",xl:"1280px"},AK={...hK,...fle,container:ple},mle=e=>typeof e=="function";function pl(e,...t){return mle(e)?e(...t):e}const{definePartsStyle:dK,defineMultiStyleConfig:gle}=ho(eae.keys),Ay=sn("avatar-border-color"),ox=sn("avatar-bg"),$x=sn("avatar-font-size"),Ry=sn("avatar-size"),yle={borderRadius:"full",border:"0.2em solid",borderColor:Ay.reference,[Ay.variable]:"white",_dark:{[Ay.variable]:"colors.gray.800"}},vle={bg:ox.reference,fontSize:$x.reference,width:Ry.reference,height:Ry.reference,lineHeight:"1",[ox.variable]:"colors.gray.200",_dark:{[ox.variable]:"colors.whiteAlpha.400"}},_le=e=>{const{name:t,theme:r}=e,n=t?Zae({string:t}):"colors.gray.400",i=qae(n)(r);let l="white";return i||(l="gray.800"),{bg:ox.reference,fontSize:$x.reference,color:l,borderColor:Ay.reference,verticalAlign:"top",width:Ry.reference,height:Ry.reference,"&:not([data-loaded])":{[ox.variable]:n},[Ay.variable]:"colors.white",_dark:{[Ay.variable]:"colors.gray.800"}}},xle={fontSize:$x.reference,lineHeight:"1"},ble=dK(e=>({badge:pl(yle,e),excessLabel:pl(vle,e),container:pl(_le,e),label:xle}));function Jd(e){const t=e!=="100%"?AK[e]:void 0;return dK({container:{[Ry.variable]:t??e,[$x.variable]:`calc(${t??e} / 2.5)`},excessLabel:{[Ry.variable]:t??e,[$x.variable]:`calc(${t??e} / 2.5)`}})}const wle={"2xs":Jd(4),xs:Jd(6),sm:Jd(8),md:Jd(12),lg:Jd(16),xl:Jd(24),"2xl":Jd(32),full:Jd("100%")},Ble=gle({baseStyle:ble,sizes:wle,defaultProps:{size:"md"}}),fs=jse("badge",["bg","color","shadow"]),Cle={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:fs.bg.reference,color:fs.color.reference,boxShadow:fs.shadow.reference},Sle=e=>{const{colorScheme:t,theme:r}=e,n=My(`${t}.500`,.6)(r);return{[fs.bg.variable]:`colors.${t}.500`,[fs.color.variable]:"colors.white",_dark:{[fs.bg.variable]:n,[fs.color.variable]:"colors.whiteAlpha.800"}}},Ele=e=>{const{colorScheme:t,theme:r}=e,n=My(`${t}.200`,.16)(r);return{[fs.bg.variable]:`colors.${t}.100`,[fs.color.variable]:`colors.${t}.800`,_dark:{[fs.bg.variable]:n,[fs.color.variable]:`colors.${t}.200`}}},Tle=e=>{const{colorScheme:t,theme:r}=e,n=My(`${t}.200`,.8)(r);return{[fs.color.variable]:`colors.${t}.500`,_dark:{[fs.color.variable]:n},[fs.shadow.variable]:`inset 0 0 0px 1px ${fs.color.reference}`}},Ile={solid:Sle,subtle:Ele,outline:Tle},sx={baseStyle:Cle,variants:Ile,defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:Fle,definePartsStyle:Ple}=ho(tae.keys),nR=sn("breadcrumb-link-decor"),Mle={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:nR.reference,[nR.variable]:"none","&:not([aria-current=page])":{cursor:"pointer",_hover:{[nR.variable]:"underline"},_focusVisible:{boxShadow:"outline"}}},Rle=Ple({link:Mle}),kle=Fle({baseStyle:Rle}),Dle={lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},fK=e=>{const{colorScheme:t,theme:r}=e;if(t==="gray")return{color:on("gray.800","whiteAlpha.900")(e),_hover:{bg:on("gray.100","whiteAlpha.200")(e)},_active:{bg:on("gray.200","whiteAlpha.300")(e)}};const n=My(`${t}.200`,.12)(r),i=My(`${t}.200`,.24)(r);return{color:on(`${t}.600`,`${t}.200`)(e),bg:"transparent",_hover:{bg:on(`${t}.50`,n)(e)},_active:{bg:on(`${t}.100`,i)(e)}}},Lle=e=>{const{colorScheme:t}=e,r=on("gray.200","whiteAlpha.300")(e);return{border:"1px solid",borderColor:t==="gray"?r:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...pl(fK,e)}},Ole={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},Ule=e=>{const{colorScheme:t}=e;if(t==="gray"){const p=on("gray.100","whiteAlpha.200")(e);return{bg:p,color:on("gray.800","whiteAlpha.900")(e),_hover:{bg:on("gray.200","whiteAlpha.300")(e),_disabled:{bg:p}},_active:{bg:on("gray.300","whiteAlpha.400")(e)}}}const{bg:r=`${t}.500`,color:n="white",hoverBg:i=`${t}.600`,activeBg:l=`${t}.700`}=Ole[t]??{},h=on(r,`${t}.200`)(e);return{bg:h,color:on(n,"gray.800")(e),_hover:{bg:on(i,`${t}.300`)(e),_disabled:{bg:h}},_active:{bg:on(l,`${t}.400`)(e)}}},zle=e=>{const{colorScheme:t}=e;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:on(`${t}.500`,`${t}.200`)(e),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:on(`${t}.700`,`${t}.500`)(e)}}},Vle={bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"},Nle={ghost:fK,outline:Lle,solid:Ule,link:zle,unstyled:Vle},Qle={lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},Hle={baseStyle:Dle,variants:Nle,sizes:Qle,defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:bm,defineMultiStyleConfig:jle}=ho(bae.keys),ZE=sn("card-bg"),KA=sn("card-padding"),pK=sn("card-shadow"),NS=sn("card-radius"),mK=sn("card-border-width","0"),gK=sn("card-border-color"),Gle=bm({container:{[ZE.variable]:"colors.chakra-body-bg",backgroundColor:ZE.reference,boxShadow:pK.reference,borderRadius:NS.reference,color:"chakra-body-text",borderWidth:mK.reference,borderColor:gK.reference},body:{padding:KA.reference,flex:"1 1 0%"},header:{padding:KA.reference},footer:{padding:KA.reference}}),Kle={sm:bm({container:{[NS.variable]:"radii.base",[KA.variable]:"space.3"}}),md:bm({container:{[NS.variable]:"radii.md",[KA.variable]:"space.5"}}),lg:bm({container:{[NS.variable]:"radii.xl",[KA.variable]:"space.7"}})},Wle={elevated:bm({container:{[pK.variable]:"shadows.base",_dark:{[ZE.variable]:"colors.gray.700"}}}),outline:bm({container:{[mK.variable]:"1px",[gK.variable]:"colors.chakra-border-color"}}),filled:bm({container:{[ZE.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[KA.variable]:0},header:{[KA.variable]:0},footer:{[KA.variable]:0}}},qle=jle({baseStyle:Gle,variants:Wle,sizes:Kle,defaultProps:{variant:"elevated",size:"md"}}),{definePartsStyle:QS,defineMultiStyleConfig:Xle}=ho(rae.keys),ax=sn("checkbox-size"),Zle=e=>{const{colorScheme:t}=e;return{w:ax.reference,h:ax.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:on(`${t}.500`,`${t}.200`)(e),borderColor:on(`${t}.500`,`${t}.200`)(e),color:on("white","gray.900")(e),_hover:{bg:on(`${t}.600`,`${t}.300`)(e),borderColor:on(`${t}.600`,`${t}.300`)(e)},_disabled:{borderColor:on("gray.200","transparent")(e),bg:on("gray.200","whiteAlpha.300")(e),color:on("gray.500","whiteAlpha.500")(e)}},_indeterminate:{bg:on(`${t}.500`,`${t}.200`)(e),borderColor:on(`${t}.500`,`${t}.200`)(e),color:on("white","gray.900")(e)},_disabled:{bg:on("gray.100","whiteAlpha.100")(e),borderColor:on("gray.100","transparent")(e)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:on("red.500","red.300")(e)}}},Yle={_disabled:{cursor:"not-allowed"}},Jle={userSelect:"none",_disabled:{opacity:.4}},$le={transitionProperty:"transform",transitionDuration:"normal"},ece=QS(e=>({icon:$le,container:Yle,control:pl(Zle,e),label:Jle})),tce={sm:QS({control:{[ax.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:QS({control:{[ax.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:QS({control:{[ax.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},df=Xle({baseStyle:ece,sizes:tce,defaultProps:{size:"md",colorScheme:"blue"}}),lx=Ns("close-button-size"),Y_=Ns("close-button-bg"),rce={w:[lx.reference],h:[lx.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[Y_.variable]:"colors.blackAlpha.100",_dark:{[Y_.variable]:"colors.whiteAlpha.100"}},_active:{[Y_.variable]:"colors.blackAlpha.200",_dark:{[Y_.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:Y_.reference},nce={lg:{[lx.variable]:"sizes.10",fontSize:"md"},md:{[lx.variable]:"sizes.8",fontSize:"xs"},sm:{[lx.variable]:"sizes.6",fontSize:"2xs"}},ice={baseStyle:rce,sizes:nce,defaultProps:{size:"md"}},{variants:oce,defaultProps:sce}=sx,ace={fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:fs.bg.reference,color:fs.color.reference,boxShadow:fs.shadow.reference},lce={baseStyle:ace,variants:oce,defaultProps:sce},cce={w:"100%",mx:"auto",maxW:"prose",px:"4"},uce={baseStyle:cce},hce={opacity:.6,borderColor:"inherit"},Ace={borderStyle:"solid"},dce={borderStyle:"dashed"},fce={solid:Ace,dashed:dce},pce={baseStyle:hce,variants:fce,defaultProps:{variant:"solid"}},{definePartsStyle:U4,defineMultiStyleConfig:mce}=ho(nae.keys),iR=sn("drawer-bg"),oR=sn("drawer-box-shadow");function f0(e){return U4(e==="full"?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:e}})}const gce={bg:"blackAlpha.600",zIndex:"modal"},yce={display:"flex",zIndex:"modal",justifyContent:"center"},vce=e=>{const{isFullHeight:t}=e;return{...t&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[iR.variable]:"colors.white",[oR.variable]:"shadows.lg",_dark:{[iR.variable]:"colors.gray.700",[oR.variable]:"shadows.dark-lg"},bg:iR.reference,boxShadow:oR.reference}},_ce={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},xce={position:"absolute",top:"2",insetEnd:"3"},bce={px:"6",py:"2",flex:"1",overflow:"auto"},wce={px:"6",py:"4"},Bce=U4(e=>({overlay:gce,dialogContainer:yce,dialog:pl(vce,e),header:_ce,closeButton:xce,body:bce,footer:wce})),Cce={xs:f0("xs"),sm:f0("md"),md:f0("lg"),lg:f0("2xl"),xl:f0("4xl"),full:f0("full")},Sce=mce({baseStyle:Bce,sizes:Cce,defaultProps:{size:"xs"}}),{definePartsStyle:Ece,defineMultiStyleConfig:Tce}=ho(iae.keys),Ice={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},Fce={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},Pce={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},Mce=Ece({preview:Ice,input:Fce,textarea:Pce}),Rce=Tce({baseStyle:Mce}),{definePartsStyle:kce,defineMultiStyleConfig:Dce}=ho(oae.keys),dy=sn("form-control-color"),Lce={marginStart:"1",[dy.variable]:"colors.red.500",_dark:{[dy.variable]:"colors.red.300"},color:dy.reference},Oce={mt:"2",[dy.variable]:"colors.gray.600",_dark:{[dy.variable]:"colors.whiteAlpha.600"},color:dy.reference,lineHeight:"normal",fontSize:"sm"},Uce=kce({container:{width:"100%",position:"relative"},requiredIndicator:Lce,helperText:Oce}),zce=Dce({baseStyle:Uce}),{definePartsStyle:Vce,defineMultiStyleConfig:Nce}=ho(sae.keys),fy=sn("form-error-color"),Qce={[fy.variable]:"colors.red.500",_dark:{[fy.variable]:"colors.red.300"},color:fy.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},Hce={marginEnd:"0.5em",[fy.variable]:"colors.red.500",_dark:{[fy.variable]:"colors.red.300"},color:fy.reference},jce=Vce({text:Qce,icon:Hce}),Gce=Nce({baseStyle:jce}),Kce={fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}},Wce={baseStyle:Kce},qce={fontFamily:"heading",fontWeight:"bold"},Xce={"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},Zce={baseStyle:qce,sizes:Xce,defaultProps:{size:"xl"}},{definePartsStyle:HA,defineMultiStyleConfig:Yce}=ho(aae.keys),j0=sn("input-height"),G0=sn("input-font-size"),K0=sn("input-padding"),W0=sn("input-border-radius"),Jce=HA({addon:{height:j0.reference,fontSize:G0.reference,px:K0.reference,borderRadius:W0.reference},field:{width:"100%",height:j0.reference,fontSize:G0.reference,px:K0.reference,borderRadius:W0.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),$d={lg:{[G0.variable]:"fontSizes.lg",[K0.variable]:"space.4",[W0.variable]:"radii.md",[j0.variable]:"sizes.12"},md:{[G0.variable]:"fontSizes.md",[K0.variable]:"space.4",[W0.variable]:"radii.md",[j0.variable]:"sizes.10"},sm:{[G0.variable]:"fontSizes.sm",[K0.variable]:"space.3",[W0.variable]:"radii.sm",[j0.variable]:"sizes.8"},xs:{[G0.variable]:"fontSizes.xs",[K0.variable]:"space.2",[W0.variable]:"radii.sm",[j0.variable]:"sizes.6"}},$ce={lg:HA({field:$d.lg,group:$d.lg}),md:HA({field:$d.md,group:$d.md}),sm:HA({field:$d.sm,group:$d.sm}),xs:HA({field:$d.xs,group:$d.xs})};function FL(e){const{focusBorderColor:t,errorBorderColor:r}=e;return{focusBorderColor:t||on("blue.500","blue.300")(e),errorBorderColor:r||on("red.500","red.300")(e)}}const eue=HA(e=>{const{theme:t}=e,{focusBorderColor:r,errorBorderColor:n}=FL(e);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:on("gray.300","whiteAlpha.400")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:dl(t,n),boxShadow:`0 0 0 1px ${dl(t,n)}`},_focusVisible:{zIndex:1,borderColor:dl(t,r),boxShadow:`0 0 0 1px ${dl(t,r)}`}},addon:{border:"1px solid",borderColor:on("inherit","whiteAlpha.50")(e),bg:on("gray.100","whiteAlpha.300")(e)}}}),tue=HA(e=>{const{theme:t}=e,{focusBorderColor:r,errorBorderColor:n}=FL(e);return{field:{border:"2px solid",borderColor:"transparent",bg:on("gray.100","whiteAlpha.50")(e),_hover:{bg:on("gray.200","whiteAlpha.100")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:dl(t,n)},_focusVisible:{bg:"transparent",borderColor:dl(t,r)}},addon:{border:"2px solid",borderColor:"transparent",bg:on("gray.100","whiteAlpha.50")(e)}}}),rue=HA(e=>{const{theme:t}=e,{focusBorderColor:r,errorBorderColor:n}=FL(e);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:dl(t,n),boxShadow:`0px 1px 0px 0px ${dl(t,n)}`},_focusVisible:{borderColor:dl(t,r),boxShadow:`0px 1px 0px 0px ${dl(t,r)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}}),nue=HA({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}}),iue={outline:eue,filled:tue,flushed:rue,unstyled:nue},Fi=Yce({baseStyle:Jce,sizes:$ce,variants:iue,defaultProps:{size:"md",variant:"outline"}}),sR=sn("kbd-bg"),oue={[sR.variable]:"colors.gray.100",_dark:{[sR.variable]:"colors.whiteAlpha.100"},bg:sR.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"},sue={baseStyle:oue},aue={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}},lue={baseStyle:aue},{defineMultiStyleConfig:cue,definePartsStyle:uue}=ho(lae.keys),hue={marginEnd:"2",display:"inline",verticalAlign:"text-bottom"},Aue=uue({icon:hue}),due=cue({baseStyle:Aue}),{defineMultiStyleConfig:fue,definePartsStyle:pue}=ho(cae.keys),Qh=sn("menu-bg"),aR=sn("menu-shadow"),mue={[Qh.variable]:"#fff",[aR.variable]:"shadows.sm",_dark:{[Qh.variable]:"colors.gray.700",[aR.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:"dropdown",borderRadius:"md",borderWidth:"1px",bg:Qh.reference,boxShadow:aR.reference},gue={py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[Qh.variable]:"colors.gray.100",_dark:{[Qh.variable]:"colors.whiteAlpha.100"}},_active:{[Qh.variable]:"colors.gray.200",_dark:{[Qh.variable]:"colors.whiteAlpha.200"}},_expanded:{[Qh.variable]:"colors.gray.100",_dark:{[Qh.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:Qh.reference},yue={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},vue={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},_ue={opacity:.6},xue={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6},bue={transitionProperty:"common",transitionDuration:"normal"},wue=pue({button:bue,list:mue,item:gue,groupTitle:yue,icon:vue,command:_ue,divider:xue}),Bue=fue({baseStyle:wue}),{defineMultiStyleConfig:Cue,definePartsStyle:z4}=ho(uae.keys),lR=sn("modal-bg"),cR=sn("modal-shadow"),Sue={bg:"blackAlpha.600",zIndex:"modal"},Eue=e=>{const{isCentered:t,scrollBehavior:r}=e;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:t?"center":"flex-start",overflow:r==="inside"?"hidden":"auto",overscrollBehaviorY:"none"}},Tue=e=>{const{isCentered:t,scrollBehavior:r}=e;return{borderRadius:"md",color:"inherit",my:t?"auto":"16",mx:t?"auto":void 0,zIndex:"modal",maxH:r==="inside"?"calc(100% - 7.5rem)":void 0,[lR.variable]:"colors.white",[cR.variable]:"shadows.lg",_dark:{[lR.variable]:"colors.gray.700",[cR.variable]:"shadows.dark-lg"},bg:lR.reference,boxShadow:cR.reference}},Iue={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},Fue={position:"absolute",top:"2",insetEnd:"3"},Pue=e=>{const{scrollBehavior:t}=e;return{px:"6",py:"2",flex:"1",overflow:t==="inside"?"auto":void 0}},Mue={px:"6",py:"4"},Rue=z4(e=>({overlay:Sue,dialogContainer:pl(Eue,e),dialog:pl(Tue,e),header:Iue,closeButton:Fue,body:pl(Pue,e),footer:Mue}));function Gu(e){return z4(e==="full"?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:e}})}const kue={xs:Gu("xs"),sm:Gu("sm"),md:Gu("md"),lg:Gu("lg"),xl:Gu("xl"),"2xl":Gu("2xl"),"3xl":Gu("3xl"),"4xl":Gu("4xl"),"5xl":Gu("5xl"),"6xl":Gu("6xl"),full:Gu("full")},Due=Cue({baseStyle:Rue,sizes:kue,defaultProps:{size:"md"}}),yK={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},{defineMultiStyleConfig:Lue,definePartsStyle:vK}=ho(hae.keys),PL=Ns("number-input-stepper-width"),_K=Ns("number-input-input-padding"),Oue=zA(PL).add("0.5rem").toString(),uR=Ns("number-input-bg"),hR=Ns("number-input-color"),AR=Ns("number-input-border-color"),Uue={[PL.variable]:"sizes.6",[_K.variable]:Oue},zue=e=>{var t;return((t=pl(Fi.baseStyle,e))==null?void 0:t.field)??{}},Vue={width:PL.reference},Nue={borderStart:"1px solid",borderStartColor:AR.reference,color:hR.reference,bg:uR.reference,[hR.variable]:"colors.chakra-body-text",[AR.variable]:"colors.chakra-border-color",_dark:{[hR.variable]:"colors.whiteAlpha.800",[AR.variable]:"colors.whiteAlpha.300"},_active:{[uR.variable]:"colors.gray.200",_dark:{[uR.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},Que=vK(e=>({root:Uue,field:pl(zue,e)??{},stepperGroup:Vue,stepper:Nue}));function vC(e){var l,h;const t=(l=Fi.sizes)==null?void 0:l[e],r={lg:"md",md:"md",sm:"sm",xs:"sm"},n=((h=t.field)==null?void 0:h.fontSize)??"md",i=yK.fontSizes[n];return vK({field:{...t.field,paddingInlineEnd:_K.reference,verticalAlign:"top"},stepper:{fontSize:zA(i).multiply(.75).toString(),_first:{borderTopEndRadius:r[e]},_last:{borderBottomEndRadius:r[e],mt:"-1px",borderTopWidth:1}}})}const Hue={xs:vC("xs"),sm:vC("sm"),md:vC("md"),lg:vC("lg")},jue=Lue({baseStyle:Que,sizes:Hue,variants:Fi.variants,defaultProps:Fi.defaultProps});var w9;const Gue={...(w9=Fi.baseStyle)==null?void 0:w9.field,textAlign:"center"},Kue={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}};var B9;const Wue={outline:e=>{var t,r;return((r=pl((t=Fi.variants)==null?void 0:t.outline,e))==null?void 0:r.field)??{}},flushed:e=>{var t,r;return((r=pl((t=Fi.variants)==null?void 0:t.flushed,e))==null?void 0:r.field)??{}},filled:e=>{var t,r;return((r=pl((t=Fi.variants)==null?void 0:t.filled,e))==null?void 0:r.field)??{}},unstyled:((B9=Fi.variants)==null?void 0:B9.unstyled.field)??{}},que={baseStyle:Gue,sizes:Kue,variants:Wue,defaultProps:Fi.defaultProps},{defineMultiStyleConfig:Xue,definePartsStyle:Zue}=ho(Aae.keys),_C=Ns("popper-bg"),Yue=Ns("popper-arrow-bg"),HN=Ns("popper-arrow-shadow-color"),Jue={zIndex:"popover"},$ue={[_C.variable]:"colors.white",bg:_C.reference,[Yue.variable]:_C.reference,[HN.variable]:"colors.gray.200",_dark:{[_C.variable]:"colors.gray.700",[HN.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},ehe={px:3,py:2,borderBottomWidth:"1px"},the={px:3,py:2},rhe={px:3,py:2,borderTopWidth:"1px"},nhe={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},ihe=Zue({popper:Jue,content:$ue,header:ehe,body:the,footer:rhe,closeButton:nhe}),ohe=Xue({baseStyle:ihe}),{defineMultiStyleConfig:she,definePartsStyle:E1}=ho(dae.keys),ahe=e=>{const{colorScheme:t,theme:r,isIndeterminate:n,hasStripe:i}=e,l=on(UN(),UN("1rem","rgba(0,0,0,0.1)"))(e),h=on(`${t}.500`,`${t}.200`)(e),p=`linear-gradient(
    to right,
    transparent 0%,
    ${dl(r,h)} 50%,
    transparent 100%
  )`;return{...!n&&i&&l,...n?{bgImage:p}:{bgColor:h}}},lhe={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},che=e=>({bg:on("gray.100","whiteAlpha.300")(e)}),uhe=e=>({transitionProperty:"common",transitionDuration:"slow",...ahe(e)}),hhe=E1(e=>({label:lhe,filledTrack:uhe(e),track:che(e)})),Ahe={xs:E1({track:{h:"1"}}),sm:E1({track:{h:"2"}}),md:E1({track:{h:"3"}}),lg:E1({track:{h:"4"}})},dhe=she({sizes:Ahe,baseStyle:hhe,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:fhe,definePartsStyle:HS}=ho(fae.keys),phe=e=>{var r;const t=(r=pl(df.baseStyle,e))==null?void 0:r.control;return{...t,borderRadius:"full",_checked:{...t==null?void 0:t._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},mhe=HS(e=>{var t,r;return{label:(t=df.baseStyle)==null?void 0:t.call(df,e).label,container:(r=df.baseStyle)==null?void 0:r.call(df,e).container,control:phe(e)}}),ghe={md:HS({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:HS({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:HS({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},yhe=fhe({baseStyle:mhe,sizes:ghe,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:vhe,definePartsStyle:_he}=ho(pae.keys),xC=sn("select-bg");var C9;const xhe={...(C9=Fi.baseStyle)==null?void 0:C9.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:xC.reference,[xC.variable]:"colors.white",_dark:{[xC.variable]:"colors.gray.700"},"> option, > optgroup":{bg:xC.reference}},bhe={width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}},whe=_he({field:xhe,icon:bhe}),bC={paddingInlineEnd:"8"};var S9,E9,T9,I9,F9,P9,M9,R9;const Bhe={lg:{...(S9=Fi.sizes)==null?void 0:S9.lg,field:{...(E9=Fi.sizes)==null?void 0:E9.lg.field,...bC}},md:{...(T9=Fi.sizes)==null?void 0:T9.md,field:{...(I9=Fi.sizes)==null?void 0:I9.md.field,...bC}},sm:{...(F9=Fi.sizes)==null?void 0:F9.sm,field:{...(P9=Fi.sizes)==null?void 0:P9.sm.field,...bC}},xs:{...(M9=Fi.sizes)==null?void 0:M9.xs,field:{...(R9=Fi.sizes)==null?void 0:R9.xs.field,...bC},icon:{insetEnd:"1"}}},Che=vhe({baseStyle:whe,sizes:Bhe,variants:Fi.variants,defaultProps:Fi.defaultProps}),dR=sn("skeleton-start-color"),fR=sn("skeleton-end-color"),She={[dR.variable]:"colors.gray.100",[fR.variable]:"colors.gray.400",_dark:{[dR.variable]:"colors.gray.800",[fR.variable]:"colors.gray.600"},background:dR.reference,borderColor:fR.reference,opacity:.7,borderRadius:"sm"},Ehe={baseStyle:She},pR=sn("skip-link-bg"),The={borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[pR.variable]:"colors.white",_dark:{[pR.variable]:"colors.gray.700"},bg:pR.reference}},Ihe={baseStyle:The},{defineMultiStyleConfig:Fhe,definePartsStyle:SI}=ho(mae.keys),Lm=sn("slider-thumb-size"),eb=sn("slider-track-size"),yf=sn("slider-bg"),Phe=e=>{const{orientation:t}=e;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...TL({orientation:t,vertical:{h:"100%",px:UA(Lm.reference).divide(2).toString()},horizontal:{w:"100%",py:UA(Lm.reference).divide(2).toString()}})}},Mhe=e=>({...TL({orientation:e.orientation,horizontal:{h:eb.reference},vertical:{w:eb.reference}}),overflow:"hidden",borderRadius:"sm",[yf.variable]:"colors.gray.200",_dark:{[yf.variable]:"colors.whiteAlpha.200"},_disabled:{[yf.variable]:"colors.gray.300",_dark:{[yf.variable]:"colors.whiteAlpha.300"}},bg:yf.reference}),Rhe=e=>{const{orientation:t}=e;return{...TL({orientation:t,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}}),w:Lm.reference,h:Lm.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}}},khe=e=>{const{colorScheme:t}=e;return{width:"inherit",height:"inherit",[yf.variable]:`colors.${t}.500`,_dark:{[yf.variable]:`colors.${t}.200`},bg:yf.reference}},Dhe=SI(e=>({container:Phe(e),track:Mhe(e),thumb:Rhe(e),filledTrack:khe(e)})),Lhe=SI({container:{[Lm.variable]:"sizes.4",[eb.variable]:"sizes.1"}}),Ohe=SI({container:{[Lm.variable]:"sizes.3.5",[eb.variable]:"sizes.1"}}),Uhe=SI({container:{[Lm.variable]:"sizes.2.5",[eb.variable]:"sizes.0.5"}}),zhe={lg:Lhe,md:Ohe,sm:Uhe},Vhe=Fhe({baseStyle:Dhe,sizes:zhe,defaultProps:{size:"md",colorScheme:"blue"}}),lm=Ns("spinner-size"),Nhe={width:[lm.reference],height:[lm.reference]},Qhe={xs:{[lm.variable]:"sizes.3"},sm:{[lm.variable]:"sizes.4"},md:{[lm.variable]:"sizes.6"},lg:{[lm.variable]:"sizes.8"},xl:{[lm.variable]:"sizes.12"}},Hhe={baseStyle:Nhe,sizes:Qhe,defaultProps:{size:"md"}},{defineMultiStyleConfig:jhe,definePartsStyle:xK}=ho(gae.keys),Ghe={fontWeight:"medium"},Khe={opacity:.8,marginBottom:"2"},Whe={verticalAlign:"baseline",fontWeight:"semibold"},qhe={marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"},Xhe=xK({container:{},label:Ghe,helpText:Khe,number:Whe,icon:qhe}),Zhe={md:xK({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},Yhe=jhe({baseStyle:Xhe,sizes:Zhe,defaultProps:{size:"md"}}),{defineMultiStyleConfig:Jhe,definePartsStyle:T1}=ho(["stepper","step","title","description","indicator","separator","icon","number"]),VA=sn("stepper-indicator-size"),q0=sn("stepper-icon-size"),X0=sn("stepper-title-font-size"),I1=sn("stepper-description-font-size"),J_=sn("stepper-accent-color"),$he=T1(({colorScheme:e})=>({stepper:{display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"},[J_.variable]:`colors.${e}.500`,_dark:{[J_.variable]:`colors.${e}.200`}},title:{fontSize:X0.reference,fontWeight:"medium"},description:{fontSize:I1.reference,color:"chakra-subtle-text"},number:{fontSize:X0.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:q0.reference,height:q0.reference},indicator:{flexShrink:0,borderRadius:"full",width:VA.reference,height:VA.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:J_.reference},"&[data-status=complete]":{bg:J_.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:J_.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:`calc(100% - ${VA.reference} - 8px)`,top:`calc(${VA.reference} + 4px)`,insetStart:`calc(${VA.reference} / 2 - 1px)`}}})),eAe=Jhe({baseStyle:$he,sizes:{xs:T1({stepper:{[VA.variable]:"sizes.4",[q0.variable]:"sizes.3",[X0.variable]:"fontSizes.xs",[I1.variable]:"fontSizes.xs"}}),sm:T1({stepper:{[VA.variable]:"sizes.6",[q0.variable]:"sizes.4",[X0.variable]:"fontSizes.sm",[I1.variable]:"fontSizes.xs"}}),md:T1({stepper:{[VA.variable]:"sizes.8",[q0.variable]:"sizes.5",[X0.variable]:"fontSizes.md",[I1.variable]:"fontSizes.sm"}}),lg:T1({stepper:{[VA.variable]:"sizes.10",[q0.variable]:"sizes.6",[X0.variable]:"fontSizes.lg",[I1.variable]:"fontSizes.md"}})},defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:tAe,definePartsStyle:jS}=ho(yae.keys),cx=Ns("switch-track-width"),wm=Ns("switch-track-height"),mR=Ns("switch-track-diff"),rAe=zA.subtract(cx,wm),V4=Ns("switch-thumb-x"),$_=Ns("switch-bg"),nAe=e=>{const{colorScheme:t}=e;return{borderRadius:"full",p:"0.5",width:[cx.reference],height:[wm.reference],transitionProperty:"common",transitionDuration:"fast",[$_.variable]:"colors.gray.300",_dark:{[$_.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[$_.variable]:`colors.${t}.500`,_dark:{[$_.variable]:`colors.${t}.200`}},bg:$_.reference}},iAe={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[wm.reference],height:[wm.reference],_checked:{transform:`translateX(${V4.reference})`}},oAe=jS(e=>({container:{[mR.variable]:rAe,[V4.variable]:mR.reference,_rtl:{[V4.variable]:zA(mR).negate().toString()}},track:nAe(e),thumb:iAe})),sAe={sm:jS({container:{[cx.variable]:"1.375rem",[wm.variable]:"sizes.3"}}),md:jS({container:{[cx.variable]:"1.875rem",[wm.variable]:"sizes.4"}}),lg:jS({container:{[cx.variable]:"2.875rem",[wm.variable]:"sizes.6"}})},aAe=tAe({baseStyle:oAe,sizes:sAe,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:lAe,definePartsStyle:py}=ho(vae.keys),cAe=py({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),YE={"&[data-is-numeric=true]":{textAlign:"end"}},uAe=py(e=>{const{colorScheme:t}=e;return{th:{color:on("gray.600","gray.400")(e),borderBottom:"1px",borderColor:on(`${t}.100`,`${t}.700`)(e),...YE},td:{borderBottom:"1px",borderColor:on(`${t}.100`,`${t}.700`)(e),...YE},caption:{color:on("gray.600","gray.100")(e)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),hAe=py(e=>{const{colorScheme:t}=e;return{th:{color:on("gray.600","gray.400")(e),borderBottom:"1px",borderColor:on(`${t}.100`,`${t}.700`)(e),...YE},td:{borderBottom:"1px",borderColor:on(`${t}.100`,`${t}.700`)(e),...YE},caption:{color:on("gray.600","gray.100")(e)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:on(`${t}.100`,`${t}.700`)(e)},td:{background:on(`${t}.100`,`${t}.700`)(e)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),AAe={simple:uAe,striped:hAe,unstyled:{}},dAe={sm:py({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:py({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:py({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},fAe=lAe({baseStyle:cAe,variants:AAe,sizes:dAe,defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}}),Ol=sn("tabs-color"),eh=sn("tabs-bg"),wC=sn("tabs-border-color"),{defineMultiStyleConfig:pAe,definePartsStyle:eA}=ho(_ae.keys),mAe=e=>{const{orientation:t}=e;return{display:t==="vertical"?"flex":"block"}},gAe=e=>{const{isFitted:t}=e;return{flex:t?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},yAe=e=>{const{align:t="start",orientation:r}=e;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[t],flexDirection:r==="vertical"?"column":"row"}},vAe={p:4},_Ae=eA(e=>({root:mAe(e),tab:gAe(e),tablist:yAe(e),tabpanel:vAe})),xAe={sm:eA({tab:{py:1,px:4,fontSize:"sm"}}),md:eA({tab:{fontSize:"md",py:2,px:4}}),lg:eA({tab:{fontSize:"lg",py:3,px:4}})},bAe=eA(e=>{const{colorScheme:t,orientation:r}=e,n=r==="vertical",i=n?"borderStart":"borderBottom",l=n?"marginStart":"marginBottom";return{tablist:{[i]:"2px solid",borderColor:"inherit"},tab:{[i]:"2px solid",borderColor:"transparent",[l]:"-2px",_selected:{[Ol.variable]:`colors.${t}.600`,_dark:{[Ol.variable]:`colors.${t}.300`},borderColor:"currentColor"},_active:{[eh.variable]:"colors.gray.200",_dark:{[eh.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:Ol.reference,bg:eh.reference}}}),wAe=eA(e=>{const{colorScheme:t}=e;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[wC.variable]:"transparent",_selected:{[Ol.variable]:`colors.${t}.600`,[wC.variable]:"colors.white",_dark:{[Ol.variable]:`colors.${t}.300`,[wC.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:wC.reference},color:Ol.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),BAe=eA(e=>{const{colorScheme:t}=e;return{tab:{border:"1px solid",borderColor:"inherit",[eh.variable]:"colors.gray.50",_dark:{[eh.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[eh.variable]:"colors.white",[Ol.variable]:`colors.${t}.600`,_dark:{[eh.variable]:"colors.gray.800",[Ol.variable]:`colors.${t}.300`},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:Ol.reference,bg:eh.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),CAe=eA(e=>{const{colorScheme:t,theme:r}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:dl(r,`${t}.700`),bg:dl(r,`${t}.100`)}}}}),SAe=eA(e=>{const{colorScheme:t}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",[Ol.variable]:"colors.gray.600",_dark:{[Ol.variable]:"inherit"},_selected:{[Ol.variable]:"colors.white",[eh.variable]:`colors.${t}.600`,_dark:{[Ol.variable]:"colors.gray.800",[eh.variable]:`colors.${t}.300`}},color:Ol.reference,bg:eh.reference}}}),EAe=eA({}),TAe={line:bAe,enclosed:wAe,"enclosed-colored":BAe,"soft-rounded":CAe,"solid-rounded":SAe,unstyled:EAe},IAe=pAe({baseStyle:_Ae,sizes:xAe,variants:TAe,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),{defineMultiStyleConfig:FAe,definePartsStyle:Bm}=ho(xae.keys),jN=sn("tag-bg"),GN=sn("tag-color"),gR=sn("tag-shadow"),GS=sn("tag-min-height"),KS=sn("tag-min-width"),WS=sn("tag-font-size"),qS=sn("tag-padding-inline"),PAe={fontWeight:"medium",lineHeight:1.2,outline:0,[GN.variable]:fs.color.reference,[jN.variable]:fs.bg.reference,[gR.variable]:fs.shadow.reference,color:GN.reference,bg:jN.reference,boxShadow:gR.reference,borderRadius:"md",minH:GS.reference,minW:KS.reference,fontSize:WS.reference,px:qS.reference,_focusVisible:{[gR.variable]:"shadows.outline"}},MAe={lineHeight:1.2,overflow:"visible"},RAe={fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}},kAe=Bm({container:PAe,label:MAe,closeButton:RAe}),DAe={sm:Bm({container:{[GS.variable]:"sizes.5",[KS.variable]:"sizes.5",[WS.variable]:"fontSizes.xs",[qS.variable]:"space.2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:Bm({container:{[GS.variable]:"sizes.6",[KS.variable]:"sizes.6",[WS.variable]:"fontSizes.sm",[qS.variable]:"space.2"}}),lg:Bm({container:{[GS.variable]:"sizes.8",[KS.variable]:"sizes.8",[WS.variable]:"fontSizes.md",[qS.variable]:"space.3"}})},LAe={subtle:Bm(e=>{var t;return{container:(t=sx.variants)==null?void 0:t.subtle(e)}}),solid:Bm(e=>{var t;return{container:(t=sx.variants)==null?void 0:t.solid(e)}}),outline:Bm(e=>{var t;return{container:(t=sx.variants)==null?void 0:t.outline(e)}})},OAe=FAe({variants:LAe,baseStyle:kAe,sizes:DAe,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}});var k9;const UAe={...(k9=Fi.baseStyle)==null?void 0:k9.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"};var D9;const zAe={outline:e=>{var t;return((t=Fi.variants)==null?void 0:t.outline(e).field)??{}},flushed:e=>{var t;return((t=Fi.variants)==null?void 0:t.flushed(e).field)??{}},filled:e=>{var t;return((t=Fi.variants)==null?void 0:t.filled(e).field)??{}},unstyled:((D9=Fi.variants)==null?void 0:D9.unstyled.field)??{}};var L9,O9,U9,z9;const VAe={xs:((L9=Fi.sizes)==null?void 0:L9.xs.field)??{},sm:((O9=Fi.sizes)==null?void 0:O9.sm.field)??{},md:((U9=Fi.sizes)==null?void 0:U9.md.field)??{},lg:((z9=Fi.sizes)==null?void 0:z9.lg.field)??{}},NAe={baseStyle:UAe,sizes:VAe,variants:zAe,defaultProps:{size:"md",variant:"outline"}},BC=Ns("tooltip-bg"),yR=Ns("tooltip-fg"),QAe=Ns("popper-arrow-bg"),HAe={bg:BC.reference,color:yR.reference,[BC.variable]:"colors.gray.700",[yR.variable]:"colors.whiteAlpha.900",_dark:{[BC.variable]:"colors.gray.300",[yR.variable]:"colors.gray.900"},[QAe.variable]:BC.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"},jAe={baseStyle:HAe},GAe={Accordion:Fae,Alert:dle,Avatar:Ble,Badge:sx,Breadcrumb:kle,Button:Hle,Checkbox:df,CloseButton:ice,Code:lce,Container:uce,Divider:pce,Drawer:Sce,Editable:Rce,Form:zce,FormError:Gce,FormLabel:Wce,Heading:Zce,Input:Fi,Kbd:sue,Link:lue,List:due,Menu:Bue,Modal:Due,NumberInput:jue,PinInput:que,Popover:ohe,Progress:dhe,Radio:yhe,Select:Che,Skeleton:Ehe,SkipLink:Ihe,Slider:Vhe,Spinner:Hhe,Stat:Yhe,Switch:aAe,Table:fAe,Tabs:IAe,Tag:OAe,Textarea:NAe,Tooltip:jAe,Card:qle,Stepper:eAe},KAe={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},WAe={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},qAe={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"}},XAe={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},ZAe={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},YAe={common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},JAe={"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},$Ae={"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},ede={property:YAe,easing:JAe,duration:$Ae},tde={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},rde={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},nde={breakpoints:WAe,zIndices:tde,radii:XAe,blur:rde,colors:qAe,...yK,sizes:AK,shadows:ZAe,space:hK,borders:KAe,transition:ede},ide={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},ode={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},sde="ltr",ade={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},lde={semanticTokens:ide,direction:sde,...nde,components:GAe,styles:ode,config:ade};var cde=!1;function ude(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function hde(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var Ade=function(){function e(r){var n=this;this._insertTag=function(i){var l;n.tags.length===0?n.insertionPoint?l=n.insertionPoint.nextSibling:n.prepend?l=n.container.firstChild:l=n.before:l=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,l),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!cde:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(hde(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var l=ude(i);try{l.insertRule(n,l.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},e}(),Ha="-ms-",JE="-moz-",Ei="-webkit-",bK="comm",ML="rule",RL="decl",dde="@import",wK="@keyframes",fde="@layer",pde=Math.abs,EI=String.fromCharCode,mde=Object.assign;function gde(e,t){return Ba(e,0)^45?(((t<<2^Ba(e,0))<<2^Ba(e,1))<<2^Ba(e,2))<<2^Ba(e,3):0}function BK(e){return e.trim()}function yde(e,t){return(e=t.exec(e))?e[0]:e}function Ti(e,t,r){return e.replace(t,r)}function N4(e,t){return e.indexOf(t)}function Ba(e,t){return e.charCodeAt(t)|0}function tb(e,t,r){return e.slice(t,r)}function Hh(e){return e.length}function kL(e){return e.length}function CC(e,t){return t.push(e),e}function vde(e,t){return e.map(t).join("")}var TI=1,ky=1,CK=0,Gl=0,_s=0,$y="";function II(e,t,r,n,i,l,h){return{value:e,root:t,parent:r,type:n,props:i,children:l,line:TI,column:ky,length:h,return:""}}function e1(e,t){return mde(II("",null,null,"",null,null,0),e,{length:-e.length},t)}function _de(){return _s}function xde(){return _s=Gl>0?Ba($y,--Gl):0,ky--,_s===10&&(ky=1,TI--),_s}function dc(){return _s=Gl<CK?Ba($y,Gl++):0,ky++,_s===10&&(ky=1,TI++),_s}function tA(){return Ba($y,Gl)}function XS(){return Gl}function Hb(e,t){return tb($y,e,t)}function rb(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function SK(e){return TI=ky=1,CK=Hh($y=e),Gl=0,[]}function EK(e){return $y="",e}function ZS(e){return BK(Hb(Gl-1,Q4(e===91?e+2:e===40?e+1:e)))}function bde(e){for(;(_s=tA())&&_s<33;)dc();return rb(e)>2||rb(_s)>3?"":" "}function wde(e,t){for(;--t&&dc()&&!(_s<48||_s>102||_s>57&&_s<65||_s>70&&_s<97););return Hb(e,XS()+(t<6&&tA()==32&&dc()==32))}function Q4(e){for(;dc();)switch(_s){case e:return Gl;case 34:case 39:e!==34&&e!==39&&Q4(_s);break;case 40:e===41&&Q4(e);break;case 92:dc();break}return Gl}function Bde(e,t){for(;dc()&&e+_s!==57;)if(e+_s===84&&tA()===47)break;return"/*"+Hb(t,Gl-1)+"*"+EI(e===47?e:dc())}function Cde(e){for(;!rb(tA());)dc();return Hb(e,Gl)}function Sde(e){return EK(YS("",null,null,null,[""],e=SK(e),0,[0],e))}function YS(e,t,r,n,i,l,h,p,o){for(var _=0,C=0,M=h,L=0,z=0,j=0,K=1,$=1,q=1,ee=0,ie="",fe=i,me=l,ye=n,se=ie;$;)switch(j=ee,ee=dc()){case 40:if(j!=108&&Ba(se,M-1)==58){N4(se+=Ti(ZS(ee),"&","&\f"),"&\f")!=-1&&(q=-1);break}case 34:case 39:case 91:se+=ZS(ee);break;case 9:case 10:case 13:case 32:se+=bde(j);break;case 92:se+=wde(XS()-1,7);continue;case 47:switch(tA()){case 42:case 47:CC(Ede(Bde(dc(),XS()),t,r),o);break;default:se+="/"}break;case 123*K:p[_++]=Hh(se)*q;case 125*K:case 59:case 0:switch(ee){case 0:case 125:$=0;case 59+C:q==-1&&(se=Ti(se,/\f/g,"")),z>0&&Hh(se)-M&&CC(z>32?WN(se+";",n,r,M-1):WN(Ti(se," ","")+";",n,r,M-2),o);break;case 59:se+=";";default:if(CC(ye=KN(se,t,r,_,C,i,p,ie,fe=[],me=[],M),l),ee===123)if(C===0)YS(se,t,ye,ye,fe,l,M,p,me);else switch(L===99&&Ba(se,3)===110?100:L){case 100:case 108:case 109:case 115:YS(e,ye,ye,n&&CC(KN(e,ye,ye,0,0,i,p,ie,i,fe=[],M),me),i,me,M,p,n?fe:me);break;default:YS(se,ye,ye,ye,[""],me,0,p,me)}}_=C=z=0,K=q=1,ie=se="",M=h;break;case 58:M=1+Hh(se),z=j;default:if(K<1){if(ee==123)--K;else if(ee==125&&K++==0&&xde()==125)continue}switch(se+=EI(ee),ee*K){case 38:q=C>0?1:(se+="\f",-1);break;case 44:p[_++]=(Hh(se)-1)*q,q=1;break;case 64:tA()===45&&(se+=ZS(dc())),L=tA(),C=M=Hh(ie=se+=Cde(XS())),ee++;break;case 45:j===45&&Hh(se)==2&&(K=0)}}return l}function KN(e,t,r,n,i,l,h,p,o,_,C){for(var M=i-1,L=i===0?l:[""],z=kL(L),j=0,K=0,$=0;j<n;++j)for(var q=0,ee=tb(e,M+1,M=pde(K=h[j])),ie=e;q<z;++q)(ie=BK(K>0?L[q]+" "+ee:Ti(ee,/&\f/g,L[q])))&&(o[$++]=ie);return II(e,t,r,i===0?ML:p,o,_,C)}function Ede(e,t,r){return II(e,t,r,bK,EI(_de()),tb(e,2,-2),0)}function WN(e,t,r,n){return II(e,t,r,RL,tb(e,0,n),tb(e,n+1,-1),n)}function my(e,t){for(var r="",n=kL(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function Tde(e,t,r,n){switch(e.type){case fde:if(e.children.length)break;case dde:case RL:return e.return=e.return||e.value;case bK:return"";case wK:return e.return=e.value+"{"+my(e.children,n)+"}";case ML:e.value=e.props.join(",")}return Hh(r=my(e.children,n))?e.return=e.value+"{"+r+"}":""}function Ide(e){var t=kL(e);return function(r,n,i,l){for(var h="",p=0;p<t;p++)h+=e[p](r,n,i,l)||"";return h}}function Fde(e){return function(t){t.root||(t=t.return)&&e(t)}}var qN=function(t){var r=new WeakMap;return function(n){if(r.has(n))return r.get(n);var i=t(n);return r.set(n,i),i}};function TK(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var Pde=function(t,r,n){for(var i=0,l=0;i=l,l=tA(),i===38&&l===12&&(r[n]=1),!rb(l);)dc();return Hb(t,Gl)},Mde=function(t,r){var n=-1,i=44;do switch(rb(i)){case 0:i===38&&tA()===12&&(r[n]=1),t[n]+=Pde(Gl-1,r,n);break;case 2:t[n]+=ZS(i);break;case 4:if(i===44){t[++n]=tA()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=EI(i)}while(i=dc());return t},Rde=function(t,r){return EK(Mde(SK(t),r))},XN=new WeakMap,kde=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!XN.get(n))&&!i){XN.set(t,!0);for(var l=[],h=Rde(r,l),p=n.props,o=0,_=0;o<h.length;o++)for(var C=0;C<p.length;C++,_++)t.props[_]=l[o]?h[o].replace(/&\f/g,p[C]):p[C]+" "+h[o]}}},Dde=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function IK(e,t){switch(gde(e,t)){case 5103:return Ei+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ei+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ei+e+JE+e+Ha+e+e;case 6828:case 4268:return Ei+e+Ha+e+e;case 6165:return Ei+e+Ha+"flex-"+e+e;case 5187:return Ei+e+Ti(e,/(\w+).+(:[^]+)/,Ei+"box-$1$2"+Ha+"flex-$1$2")+e;case 5443:return Ei+e+Ha+"flex-item-"+Ti(e,/flex-|-self/,"")+e;case 4675:return Ei+e+Ha+"flex-line-pack"+Ti(e,/align-content|flex-|-self/,"")+e;case 5548:return Ei+e+Ha+Ti(e,"shrink","negative")+e;case 5292:return Ei+e+Ha+Ti(e,"basis","preferred-size")+e;case 6060:return Ei+"box-"+Ti(e,"-grow","")+Ei+e+Ha+Ti(e,"grow","positive")+e;case 4554:return Ei+Ti(e,/([^-])(transform)/g,"$1"+Ei+"$2")+e;case 6187:return Ti(Ti(Ti(e,/(zoom-|grab)/,Ei+"$1"),/(image-set)/,Ei+"$1"),e,"")+e;case 5495:case 3959:return Ti(e,/(image-set\([^]*)/,Ei+"$1$`$1");case 4968:return Ti(Ti(e,/(.+:)(flex-)?(.*)/,Ei+"box-pack:$3"+Ha+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ei+e+e;case 4095:case 3583:case 4068:case 2532:return Ti(e,/(.+)-inline(.+)/,Ei+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Hh(e)-1-t>6)switch(Ba(e,t+1)){case 109:if(Ba(e,t+4)!==45)break;case 102:return Ti(e,/(.+:)(.+)-([^]+)/,"$1"+Ei+"$2-$3$1"+JE+(Ba(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~N4(e,"stretch")?IK(Ti(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ba(e,t+1)!==115)break;case 6444:switch(Ba(e,Hh(e)-3-(~N4(e,"!important")&&10))){case 107:return Ti(e,":",":"+Ei)+e;case 101:return Ti(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ei+(Ba(e,14)===45?"inline-":"")+"box$3$1"+Ei+"$2$3$1"+Ha+"$2box$3")+e}break;case 5936:switch(Ba(e,t+11)){case 114:return Ei+e+Ha+Ti(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ei+e+Ha+Ti(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ei+e+Ha+Ti(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Ei+e+Ha+e+e}return e}var Lde=function(t,r,n,i){if(t.length>-1&&!t.return)switch(t.type){case RL:t.return=IK(t.value,t.length);break;case wK:return my([e1(t,{value:Ti(t.value,"@","@"+Ei)})],i);case ML:if(t.length)return vde(t.props,function(l){switch(yde(l,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return my([e1(t,{props:[Ti(l,/:(read-\w+)/,":"+JE+"$1")]})],i);case"::placeholder":return my([e1(t,{props:[Ti(l,/:(plac\w+)/,":"+Ei+"input-$1")]}),e1(t,{props:[Ti(l,/:(plac\w+)/,":"+JE+"$1")]}),e1(t,{props:[Ti(l,/:(plac\w+)/,Ha+"input-$1")]})],i)}return""})}},Ode=[Lde],Ude=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(K){var $=K.getAttribute("data-emotion");$.indexOf(" ")!==-1&&(document.head.appendChild(K),K.setAttribute("data-s",""))})}var i=t.stylisPlugins||Ode,l={},h,p=[];h=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(K){for(var $=K.getAttribute("data-emotion").split(" "),q=1;q<$.length;q++)l[$[q]]=!0;p.push(K)});var o,_=[kde,Dde];{var C,M=[Tde,Fde(function(K){C.insert(K)})],L=Ide(_.concat(i,M)),z=function($){return my(Sde($),L)};o=function($,q,ee,ie){C=ee,z($?$+"{"+q.styles+"}":q.styles),ie&&(j.inserted[q.name]=!0)}}var j={key:r,sheet:new Ade({key:r,container:h,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:l,registered:{},insert:o};return j.sheet.hydrate(p),j};function $r(){return $r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$r.apply(null,arguments)}var FK={exports:{}},Hi={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oa=typeof Symbol=="function"&&Symbol.for,DL=oa?Symbol.for("react.element"):60103,LL=oa?Symbol.for("react.portal"):60106,FI=oa?Symbol.for("react.fragment"):60107,PI=oa?Symbol.for("react.strict_mode"):60108,MI=oa?Symbol.for("react.profiler"):60114,RI=oa?Symbol.for("react.provider"):60109,kI=oa?Symbol.for("react.context"):60110,OL=oa?Symbol.for("react.async_mode"):60111,DI=oa?Symbol.for("react.concurrent_mode"):60111,LI=oa?Symbol.for("react.forward_ref"):60112,OI=oa?Symbol.for("react.suspense"):60113,zde=oa?Symbol.for("react.suspense_list"):60120,UI=oa?Symbol.for("react.memo"):60115,zI=oa?Symbol.for("react.lazy"):60116,Vde=oa?Symbol.for("react.block"):60121,Nde=oa?Symbol.for("react.fundamental"):60117,Qde=oa?Symbol.for("react.responder"):60118,Hde=oa?Symbol.for("react.scope"):60119;function xc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case DL:switch(e=e.type,e){case OL:case DI:case FI:case MI:case PI:case OI:return e;default:switch(e=e&&e.$$typeof,e){case kI:case LI:case zI:case UI:case RI:return e;default:return t}}case LL:return t}}}function PK(e){return xc(e)===DI}Hi.AsyncMode=OL;Hi.ConcurrentMode=DI;Hi.ContextConsumer=kI;Hi.ContextProvider=RI;Hi.Element=DL;Hi.ForwardRef=LI;Hi.Fragment=FI;Hi.Lazy=zI;Hi.Memo=UI;Hi.Portal=LL;Hi.Profiler=MI;Hi.StrictMode=PI;Hi.Suspense=OI;Hi.isAsyncMode=function(e){return PK(e)||xc(e)===OL};Hi.isConcurrentMode=PK;Hi.isContextConsumer=function(e){return xc(e)===kI};Hi.isContextProvider=function(e){return xc(e)===RI};Hi.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===DL};Hi.isForwardRef=function(e){return xc(e)===LI};Hi.isFragment=function(e){return xc(e)===FI};Hi.isLazy=function(e){return xc(e)===zI};Hi.isMemo=function(e){return xc(e)===UI};Hi.isPortal=function(e){return xc(e)===LL};Hi.isProfiler=function(e){return xc(e)===MI};Hi.isStrictMode=function(e){return xc(e)===PI};Hi.isSuspense=function(e){return xc(e)===OI};Hi.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===FI||e===DI||e===MI||e===PI||e===OI||e===zde||typeof e=="object"&&e!==null&&(e.$$typeof===zI||e.$$typeof===UI||e.$$typeof===RI||e.$$typeof===kI||e.$$typeof===LI||e.$$typeof===Nde||e.$$typeof===Qde||e.$$typeof===Hde||e.$$typeof===Vde)};Hi.typeOf=xc;FK.exports=Hi;var jde=FK.exports,MK=jde,Gde={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Kde={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},RK={};RK[MK.ForwardRef]=Gde;RK[MK.Memo]=Kde;var Wde=!0;function kK(e,t,r){var n="";return r.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(n+=i+" ")}),n}var UL=function(t,r,n){var i=t.key+"-"+r.name;(n===!1||Wde===!1)&&t.registered[i]===void 0&&(t.registered[i]=r.styles)},zL=function(t,r,n){UL(t,r,n);var i=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var l=r;do t.insert(r===l?"."+i:"",l,t.sheet,!0),l=l.next;while(l!==void 0)}};function qde(e){for(var t=0,r,n=0,i=e.length;i>=4;++n,i-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Xde={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Zde=!1,Yde=/[A-Z]|^ms/g,Jde=/_EMO_([^_]+?)_([^]*?)_EMO_/g,DK=function(t){return t.charCodeAt(1)===45},ZN=function(t){return t!=null&&typeof t!="boolean"},vR=TK(function(e){return DK(e)?e:e.replace(Yde,"-$&").toLowerCase()}),YN=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(Jde,function(n,i,l){return jh={name:i,styles:l,next:jh},i})}return Xde[t]!==1&&!DK(t)&&typeof r=="number"&&r!==0?r+"px":r},$de="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function nb(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var i=r;if(i.anim===1)return jh={name:i.name,styles:i.styles,next:jh},i.name;var l=r;if(l.styles!==void 0){var h=l.next;if(h!==void 0)for(;h!==void 0;)jh={name:h.name,styles:h.styles,next:jh},h=h.next;var p=l.styles+";";return p}return efe(e,t,r)}case"function":{if(e!==void 0){var o=jh,_=r(e);return jh=o,nb(e,t,_)}break}}var C=r;if(t==null)return C;var M=t[C];return M!==void 0?M:C}function efe(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=nb(e,t,r[i])+";";else for(var l in r){var h=r[l];if(typeof h!="object"){var p=h;t!=null&&t[p]!==void 0?n+=l+"{"+t[p]+"}":ZN(p)&&(n+=vR(l)+":"+YN(l,p)+";")}else{if(l==="NO_COMPONENT_SELECTOR"&&Zde)throw new Error($de);if(Array.isArray(h)&&typeof h[0]=="string"&&(t==null||t[h[0]]===void 0))for(var o=0;o<h.length;o++)ZN(h[o])&&(n+=vR(l)+":"+YN(l,h[o])+";");else{var _=nb(e,t,h);switch(l){case"animation":case"animationName":{n+=vR(l)+":"+_+";";break}default:n+=l+"{"+_+"}"}}}}return n}var JN=/label:\s*([^\s;{]+)\s*(;|$)/g,jh;function VI(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,i="";jh=void 0;var l=e[0];if(l==null||l.raw===void 0)n=!1,i+=nb(r,t,l);else{var h=l;i+=h[0]}for(var p=1;p<e.length;p++)if(i+=nb(r,t,e[p]),n){var o=l;i+=o[p]}JN.lastIndex=0;for(var _="",C;(C=JN.exec(i))!==null;)_+="-"+C[1];var M=qde(i)+_;return{name:M,styles:i,next:jh}}var tfe=function(t){return t()},LK=yV.useInsertionEffect?yV.useInsertionEffect:!1,OK=LK||tfe,$N=LK||Re.useLayoutEffect,rfe=!1,UK=Re.createContext(typeof HTMLElement<"u"?Ude({key:"css"}):null);UK.Provider;var NI=function(t){return Re.forwardRef(function(r,n){var i=Re.useContext(UK);return t(r,i,n)})},Om=Re.createContext({}),nfe=function(t,r){if(typeof r=="function"){var n=r(t);return n}return $r({},t,r)},ife=qN(function(e){return qN(function(t){return nfe(e,t)})}),ofe=function(t){var r=Re.useContext(Om);return t.theme!==r&&(r=ife(r)(t.theme)),Re.createElement(Om.Provider,{value:r},t.children)},VL={}.hasOwnProperty,H4="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",sfe=function(t,r){var n={};for(var i in r)VL.call(r,i)&&(n[i]=r[i]);return n[H4]=t,n},afe=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return UL(r,n,i),OK(function(){return zL(r,n,i)}),null},lfe=NI(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var i=e[H4],l=[n],h="";typeof e.className=="string"?h=kK(t.registered,l,e.className):e.className!=null&&(h=e.className+" ");var p=VI(l,void 0,Re.useContext(Om));h+=t.key+"-"+p.name;var o={};for(var _ in e)VL.call(e,_)&&_!=="css"&&_!==H4&&!rfe&&(o[_]=e[_]);return o.className=h,r&&(o.ref=r),Re.createElement(Re.Fragment,null,Re.createElement(afe,{cache:t,serialized:p,isStringTag:typeof i=="string"}),Re.createElement(i,o))}),cfe=lfe,rn=function(t,r){var n=arguments;if(r==null||!VL.call(r,"css"))return Re.createElement.apply(void 0,n);var i=n.length,l=new Array(i);l[0]=cfe,l[1]=sfe(t,r);for(var h=2;h<i;h++)l[h]=n[h];return Re.createElement.apply(null,l)},QI=NI(function(e,t){var r=e.styles,n=VI([r],void 0,Re.useContext(Om)),i=Re.useRef();return $N(function(){var l=t.key+"-global",h=new t.sheet.constructor({key:l,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),p=!1,o=document.querySelector('style[data-emotion="'+l+" "+n.name+'"]');return t.sheet.tags.length&&(h.before=t.sheet.tags[0]),o!==null&&(p=!0,o.setAttribute("data-emotion",l),h.hydrate([o])),i.current=[h,p],function(){h.flush()}},[t]),$N(function(){var l=i.current,h=l[0],p=l[1];if(p){l[1]=!1;return}if(n.next!==void 0&&zL(t,n.next,!0),h.tags.length){var o=h.tags[h.tags.length-1].nextElementSibling;h.before=o,h.flush()}t.insert("",n,h,!1)},[t,n.name]),null});function NL(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return VI(t)}var QL=function(){var t=NL.apply(void 0,arguments),r="animation-"+t.name;return{name:r,styles:"@keyframes "+r+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};const HL=Re.createContext({});HL.displayName="ColorModeContext";function jL(){const e=Re.useContext(HL);if(e===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return e}const SC={light:"chakra-ui-light",dark:"chakra-ui-dark"};function ufe(e={}){const{preventTransition:t=!0,nonce:r}=e,n={setDataset:i=>{const l=t?n.preventTransition():void 0;document.documentElement.dataset.theme=i,document.documentElement.style.colorScheme=i,l==null||l()},setClassName(i){document.body.classList.add(i?SC.dark:SC.light),document.body.classList.remove(i?SC.light:SC.dark)},query(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme(i){return n.query().matches??i==="dark"?"dark":"light"},addListener(i){const l=n.query(),h=p=>{i(p.matches?"dark":"light")};return typeof l.addListener=="function"?l.addListener(h):l.addEventListener("change",h),()=>{typeof l.removeListener=="function"?l.removeListener(h):l.removeEventListener("change",h)}},preventTransition(){const i=document.createElement("style");return i.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),r!==void 0&&(i.nonce=r),document.head.appendChild(i),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(i)})})}}};return n}const hfe="chakra-ui-color-mode";function Afe(e){return{ssr:!1,type:"localStorage",get(t){if(!(globalThis!=null&&globalThis.document))return t;let r;try{r=localStorage.getItem(e)||t}catch{}return r||t},set(t){try{localStorage.setItem(e,t)}catch{}}}}const dfe=Afe(hfe),e3=()=>{},ffe=Poe()?Re.useLayoutEffect:Re.useEffect;function t3(e,t){return e.type==="cookie"&&e.ssr?e.get(t):t}const zK=NI(function(t,r){const{value:n,children:i,options:{useSystemColorMode:l,initialColorMode:h,disableTransitionOnChange:p}={},colorModeManager:o=dfe}=t,_=h==="dark"?"dark":"light",[C,M]=Re.useState(()=>t3(o,_)),[L,z]=Re.useState(()=>t3(o)),{getSystemTheme:j,setClassName:K,setDataset:$,addListener:q}=Re.useMemo(()=>ufe({preventTransition:p,nonce:r==null?void 0:r.nonce}),[p,r==null?void 0:r.nonce]),ee=h==="system"&&!C?L:C,ie=Re.useCallback(ye=>{const se=ye==="system"?j():ye;M(se),K(se==="dark"),$(se),o.set(se)},[o,j,K,$]);ffe(()=>{h==="system"&&z(j())},[]),Re.useEffect(()=>{const ye=o.get();if(ye){ie(ye);return}if(h==="system"){ie("system");return}ie(_)},[o,_,h,ie]);const fe=Re.useCallback(()=>{ie(ee==="dark"?"light":"dark")},[ee,ie]);Re.useEffect(()=>{if(l)return q(ie)},[l,q,ie]);const me=Re.useMemo(()=>({colorMode:n??ee,toggleColorMode:n?e3:fe,setColorMode:n?e3:ie,forced:n!==void 0}),[ee,fe,ie,n]);return $e.jsx(HL.Provider,{value:me,children:i})});zK.displayName="ColorModeProvider";const VK=String.raw,NK=VK`
  :root,
  :host {
    --chakra-vh: 100vh;
  }

  @supports (height: -webkit-fill-available) {
    :root,
    :host {
      --chakra-vh: -webkit-fill-available;
    }
  }

  @supports (height: -moz-fill-available) {
    :root,
    :host {
      --chakra-vh: -moz-fill-available;
    }
  }

  @supports (height: 100dvh) {
    :root,
    :host {
      --chakra-vh: 100dvh;
    }
  }
`,pfe=()=>$e.jsx(QI,{styles:NK}),mfe=({scope:e=""})=>$e.jsx(QI,{styles:VK`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        touch-action: manipulation;
      }

      body {
        position: relative;
        min-height: 100%;
        margin: 0;
        font-feature-settings: "kern";
      }

      ${e} :where(*, *::before, *::after) {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
        word-wrap: break-word;
      }

      main {
        display: block;
      }

      ${e} hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      ${e} :where(pre, code, kbd,samp) {
        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      ${e} a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      ${e} abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      ${e} :where(b, strong) {
        font-weight: bold;
      }

      ${e} small {
        font-size: 80%;
      }

      ${e} :where(sub,sup) {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      ${e} sub {
        bottom: -0.25em;
      }

      ${e} sup {
        top: -0.5em;
      }

      ${e} img {
        border-style: none;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      ${e} :where(button, input) {
        overflow: visible;
      }

      ${e} :where(button, select) {
        text-transform: none;
      }

      ${e} :where(
          button::-moz-focus-inner,
          [type="button"]::-moz-focus-inner,
          [type="reset"]::-moz-focus-inner,
          [type="submit"]::-moz-focus-inner
        ) {
        border-style: none;
        padding: 0;
      }

      ${e} fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      ${e} legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      ${e} progress {
        vertical-align: baseline;
      }

      ${e} textarea {
        overflow: auto;
      }

      ${e} :where([type="checkbox"], [type="radio"]) {
        box-sizing: border-box;
        padding: 0;
      }

      ${e} input[type="number"]::-webkit-inner-spin-button,
      ${e} input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      ${e} input[type="number"] {
        -moz-appearance: textfield;
      }

      ${e} input[type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      ${e} input[type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ${e} ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      ${e} details {
        display: block;
      }

      ${e} summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      ${e} :where(
          blockquote,
          dl,
          dd,
          h1,
          h2,
          h3,
          h4,
          h5,
          h6,
          hr,
          figure,
          p,
          pre
        ) {
        margin: 0;
      }

      ${e} button {
        background: transparent;
        padding: 0;
      }

      ${e} fieldset {
        margin: 0;
        padding: 0;
      }

      ${e} :where(ol, ul) {
        margin: 0;
        padding: 0;
      }

      ${e} textarea {
        resize: vertical;
      }

      ${e} :where(button, [role="button"]) {
        cursor: pointer;
      }

      ${e} button::-moz-focus-inner {
        border: 0 !important;
      }

      ${e} table {
        border-collapse: collapse;
      }

      ${e} :where(h1, h2, h3, h4, h5, h6) {
        font-size: inherit;
        font-weight: inherit;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      ${e} :where(img, svg, video, canvas, audio, iframe, embed, object) {
        display: block;
      }

      ${e} :where(img, video) {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible]
        :focus:not([data-focus-visible-added]):not(
          [data-focus-visible-disabled]
        ) {
        outline: none;
        box-shadow: none;
      }

      ${e} select::-ms-expand {
        display: none;
      }

      ${NK}
    `});function gfe(e){const{cssVarsRoot:t,theme:r,children:n}=e,i=Re.useMemo(()=>Yse(r),[r]);return $e.jsxs(ofe,{theme:i,children:[$e.jsx(yfe,{root:t}),n]})}function yfe({root:e=":host, :root"}){const t=[e,"[data-theme]"].join(",");return $e.jsx(QI,{styles:r=>({[t]:r.__cssVars})})}lh({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function vfe(){const{colorMode:e}=jL();return $e.jsx(QI,{styles:t=>{const r=tK(t,"styles.global"),n=iu(r,{theme:t,colorMode:e});return n?aK(n)(t):void 0}})}const[_fe,xfe]=lh({strict:!1,name:"PortalManagerContext"});function QK(e){const{children:t,zIndex:r}=e;return $e.jsx(_fe,{value:{zIndex:r},children:t})}QK.displayName="PortalManager";const HK=Re.createContext({getDocument(){return document},getWindow(){return window}});HK.displayName="EnvironmentContext";function jK(e){const{children:t,environment:r,disabled:n}=e,i=Re.useRef(null),l=Re.useMemo(()=>r||{getDocument:()=>{var p;return((p=i.current)==null?void 0:p.ownerDocument)??document},getWindow:()=>{var p;return((p=i.current)==null?void 0:p.ownerDocument.defaultView)??window}},[r]),h=!n||!r;return $e.jsxs(HK.Provider,{value:l,children:[t,h&&$e.jsx("span",{id:"__chakra_env",hidden:!0,ref:i})]})}jK.displayName="EnvironmentProvider";const bfe=e=>{const{children:t,colorModeManager:r,portalZIndex:n,resetScope:i,resetCSS:l=!0,theme:h={},environment:p,cssVarsRoot:o,disableEnvironment:_,disableGlobalStyle:C}=e,M=$e.jsx(jK,{environment:p,disabled:_,children:t});return $e.jsx(gfe,{theme:h,cssVarsRoot:o,children:$e.jsxs(zK,{colorModeManager:r,options:h.config,children:[l?$e.jsx(mfe,{scope:i}):$e.jsx(pfe,{}),!C&&$e.jsx(vfe,{}),n?$e.jsx(QK,{zIndex:n,children:M}):M]})})};function wfe(e){if(typeof Proxy>"u")return e;const t=new Map,r=(...n)=>e(...n);return new Proxy(r,{get:(n,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}function ib(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const j4=e=>Array.isArray(e);function GK(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function ob(e){return typeof e=="string"||Array.isArray(e)}function r3(e){const t=[{},{}];return e==null||e.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function GL(e,t,r,n){if(typeof t=="function"){const[i,l]=r3(n);t=t(r!==void 0?r:e.custom,i,l)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,l]=r3(n);t=t(r!==void 0?r:e.custom,i,l)}return t}function HI(e,t,r){const n=e.getProps();return GL(n,t,r!==void 0?r:n.custom,e)}const KL=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],WL=["initial",...KL],jb=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],lp=new Set(jb),WA=e=>e*1e3,qA=e=>e/1e3,Bfe={type:"spring",stiffness:500,damping:25,restSpeed:10},Cfe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Sfe={type:"keyframes",duration:.8},Efe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Tfe=(e,{keyframes:t})=>t.length>2?Sfe:lp.has(e)?e.startsWith("scale")?Cfe(t[1]):Bfe:Efe;function qL(e,t){return e?e[t]||e.default||e:void 0}const Ife={skipAnimations:!1,useManualTiming:!1},Ffe=e=>e!==null;function jI(e,{repeat:t,repeatType:r="loop"},n){const i=e.filter(Ffe),l=t&&r!=="loop"&&t%2===1?0:i.length-1;return!l||n===void 0?i[l]:n}const Ya=e=>e;function Pfe(e){let t=new Set,r=new Set,n=!1,i=!1;const l=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function p(_){l.has(_)&&(o.schedule(_),e()),_(h)}const o={schedule:(_,C=!1,M=!1)=>{const z=M&&n?t:r;return C&&l.add(_),z.has(_)||z.add(_),_},cancel:_=>{r.delete(_),l.delete(_)},process:_=>{if(h=_,n){i=!0;return}n=!0,[t,r]=[r,t],r.clear(),t.forEach(p),n=!1,i&&(i=!1,o.process(_))}};return o}const EC=["read","resolveKeyframes","update","preRender","render","postRender"],Mfe=40;function KK(e,t){let r=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},l=()=>r=!0,h=EC.reduce((q,ee)=>(q[ee]=Pfe(l),q),{}),{read:p,resolveKeyframes:o,update:_,preRender:C,render:M,postRender:L}=h,z=()=>{const q=performance.now();r=!1,i.delta=n?1e3/60:Math.max(Math.min(q-i.timestamp,Mfe),1),i.timestamp=q,i.isProcessing=!0,p.process(i),o.process(i),_.process(i),C.process(i),M.process(i),L.process(i),i.isProcessing=!1,r&&t&&(n=!1,e(z))},j=()=>{r=!0,n=!0,i.isProcessing||e(z)};return{schedule:EC.reduce((q,ee)=>{const ie=h[ee];return q[ee]=(fe,me=!1,ye=!1)=>(r||j(),ie.schedule(fe,me,ye)),q},{}),cancel:q=>{for(let ee=0;ee<EC.length;ee++)h[EC[ee]].cancel(q)},state:i,steps:h}}const{schedule:Zi,cancel:qf,state:_a,steps:_R}=KK(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ya,!0),WK=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,Rfe=1e-7,kfe=12;function Dfe(e,t,r,n,i){let l,h,p=0;do h=t+(r-t)/2,l=WK(h,n,i)-e,l>0?r=h:t=h;while(Math.abs(l)>Rfe&&++p<kfe);return h}function Gb(e,t,r,n){if(e===t&&r===n)return Ya;const i=l=>Dfe(l,0,1,e,r);return l=>l===0||l===1?l:WK(i(l),t,n)}const qK=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,XK=e=>t=>1-e(1-t),ZK=Gb(.33,1.53,.69,.99),XL=XK(ZK),YK=qK(XL),JK=e=>(e*=2)<1?.5*XL(e):.5*(2-Math.pow(2,-10*(e-1))),ZL=e=>1-Math.sin(Math.acos(e)),$K=XK(ZL),eW=qK(ZL),tW=e=>/^0[^.\s]+$/u.test(e);function Lfe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||tW(e):!0}let G4=Ya;const rW=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),nW=e=>t=>typeof t=="string"&&t.startsWith(e),iW=nW("--"),Ofe=nW("var(--"),YL=e=>Ofe(e)?Ufe.test(e.split("/*")[0].trim()):!1,Ufe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,zfe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Vfe(e){const t=zfe.exec(e);if(!t)return[,];const[,r,n,i]=t;return[`--${r??n}`,i]}function oW(e,t,r=1){const[n,i]=Vfe(e);if(!n)return;const l=window.getComputedStyle(t).getPropertyValue(n);if(l){const h=l.trim();return rW(h)?parseFloat(h):h}return YL(i)?oW(i,t,r+1):i}const Xf=(e,t,r)=>r>t?t:r<e?e:r,ev={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},sb={...ev,transform:e=>Xf(0,1,e)},TC={...ev,default:1},Kb=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),sf=Kb("deg"),rA=Kb("%"),ln=Kb("px"),Nfe=Kb("vh"),Qfe=Kb("vw"),n3={...rA,parse:e=>rA.parse(e)/100,transform:e=>rA.transform(e*100)},Hfe=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),i3=e=>e===ev||e===ln,o3=(e,t)=>parseFloat(e.split(", ")[t]),s3=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const i=n.match(/^matrix3d\((.+)\)$/u);if(i)return o3(i[1],t);{const l=n.match(/^matrix\((.+)\)$/u);return l?o3(l[1],e):0}},jfe=new Set(["x","y","z"]),Gfe=jb.filter(e=>!jfe.has(e));function Kfe(e){const t=[];return Gfe.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const Dy={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:s3(4,13),y:s3(5,14)};Dy.translateX=Dy.x;Dy.translateY=Dy.y;const sW=e=>t=>t.test(e),Wfe={test:e=>e==="auto",parse:e=>e},aW=[ev,ln,rA,sf,Qfe,Nfe,Wfe],a3=e=>aW.find(sW(e)),Cm=new Set;let K4=!1,W4=!1;function lW(){if(W4){const e=Array.from(Cm).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const i=Kfe(n);i.length&&(r.set(n,i),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const i=r.get(n);i&&i.forEach(([l,h])=>{var p;(p=n.getValue(l))===null||p===void 0||p.set(h)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}W4=!1,K4=!1,Cm.forEach(e=>e.complete()),Cm.clear()}function cW(){Cm.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(W4=!0)})}function qfe(){cW(),lW()}class JL{constructor(t,r,n,i,l,h=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=i,this.element=l,this.isAsync=h}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Cm.add(this),K4||(K4=!0,Zi.read(cW),Zi.resolveKeyframes(lW))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:i}=this;for(let l=0;l<t.length;l++)if(t[l]===null)if(l===0){const h=i==null?void 0:i.get(),p=t[t.length-1];if(h!==void 0)t[0]=h;else if(n&&r){const o=n.readValue(r,p);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=p),i&&h===void 0&&i.set(t[0])}else t[l]=t[l-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Cm.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Cm.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const ux=e=>Math.round(e*1e5)/1e5,$L=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Xfe(e){return e==null}const Zfe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,eO=(e,t)=>r=>!!(typeof r=="string"&&Zfe.test(r)&&r.startsWith(e)||t&&!Xfe(r)&&Object.prototype.hasOwnProperty.call(r,t)),uW=(e,t,r)=>n=>{if(typeof n!="string")return n;const[i,l,h,p]=n.match($L);return{[e]:parseFloat(i),[t]:parseFloat(l),[r]:parseFloat(h),alpha:p!==void 0?parseFloat(p):1}},Yfe=e=>Xf(0,255,e),xR={...ev,transform:e=>Math.round(Yfe(e))},pm={test:eO("rgb","red"),parse:uW("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+xR.transform(e)+", "+xR.transform(t)+", "+xR.transform(r)+", "+ux(sb.transform(n))+")"};function Jfe(e){let t="",r="",n="",i="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),i=e.substring(4,5),t+=t,r+=r,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const q4={test:eO("#"),parse:Jfe,transform:pm.transform},Z0={test:eO("hsl","hue"),parse:uW("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+rA.transform(ux(t))+", "+rA.transform(ux(r))+", "+ux(sb.transform(n))+")"},Ga={test:e=>pm.test(e)||q4.test(e)||Z0.test(e),parse:e=>pm.test(e)?pm.parse(e):Z0.test(e)?Z0.parse(e):q4.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?pm.transform(e):Z0.transform(e)},$fe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function epe(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match($L))===null||t===void 0?void 0:t.length)||0)+(((r=e.match($fe))===null||r===void 0?void 0:r.length)||0)>0}const hW="number",AW="color",tpe="var",rpe="var(",l3="${}",npe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ab(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},i=[];let l=0;const p=t.replace(npe,o=>(Ga.test(o)?(n.color.push(l),i.push(AW),r.push(Ga.parse(o))):o.startsWith(rpe)?(n.var.push(l),i.push(tpe),r.push(o)):(n.number.push(l),i.push(hW),r.push(parseFloat(o))),++l,l3)).split(l3);return{values:r,split:p,indexes:n,types:i}}function dW(e){return ab(e).values}function fW(e){const{split:t,types:r}=ab(e),n=t.length;return i=>{let l="";for(let h=0;h<n;h++)if(l+=t[h],i[h]!==void 0){const p=r[h];p===hW?l+=ux(i[h]):p===AW?l+=Ga.transform(i[h]):l+=i[h]}return l}}const ipe=e=>typeof e=="number"?0:e;function ope(e){const t=dW(e);return fW(e)(t.map(ipe))}const Zf={test:epe,parse:dW,createTransformer:fW,getAnimatableNone:ope},spe=new Set(["brightness","contrast","saturate","opacity"]);function ape(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match($L)||[];if(!n)return e;const i=r.replace(n,"");let l=spe.has(t)?1:0;return n!==r&&(l*=100),t+"("+l+i+")"}const lpe=/\b([a-z-]*)\(.*?\)/gu,X4={...Zf,getAnimatableNone:e=>{const t=e.match(lpe);return t?t.map(ape).join(" "):e}},cpe={borderWidth:ln,borderTopWidth:ln,borderRightWidth:ln,borderBottomWidth:ln,borderLeftWidth:ln,borderRadius:ln,radius:ln,borderTopLeftRadius:ln,borderTopRightRadius:ln,borderBottomRightRadius:ln,borderBottomLeftRadius:ln,width:ln,maxWidth:ln,height:ln,maxHeight:ln,top:ln,right:ln,bottom:ln,left:ln,padding:ln,paddingTop:ln,paddingRight:ln,paddingBottom:ln,paddingLeft:ln,margin:ln,marginTop:ln,marginRight:ln,marginBottom:ln,marginLeft:ln,backgroundPositionX:ln,backgroundPositionY:ln},upe={rotate:sf,rotateX:sf,rotateY:sf,rotateZ:sf,scale:TC,scaleX:TC,scaleY:TC,scaleZ:TC,skew:sf,skewX:sf,skewY:sf,distance:ln,translateX:ln,translateY:ln,translateZ:ln,x:ln,y:ln,z:ln,perspective:ln,transformPerspective:ln,opacity:sb,originX:n3,originY:n3,originZ:ln},c3={...ev,transform:Math.round},tO={...cpe,...upe,zIndex:c3,size:ln,fillOpacity:sb,strokeOpacity:sb,numOctaves:c3},hpe={...tO,color:Ga,backgroundColor:Ga,outlineColor:Ga,fill:Ga,stroke:Ga,borderColor:Ga,borderTopColor:Ga,borderRightColor:Ga,borderBottomColor:Ga,borderLeftColor:Ga,filter:X4,WebkitFilter:X4},rO=e=>hpe[e];function pW(e,t){let r=rO(e);return r!==X4&&(r=Zf),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const Ape=new Set(["auto","none","0"]);function dpe(e,t,r){let n=0,i;for(;n<e.length&&!i;){const l=e[n];typeof l=="string"&&!Ape.has(l)&&ab(l).values.length&&(i=e[n]),n++}if(i&&r)for(const l of t)e[l]=pW(r,i)}class mW extends JL{constructor(t,r,n,i,l){super(t,r,n,i,l,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let o=0;o<t.length;o++){let _=t[o];if(typeof _=="string"&&(_=_.trim(),YL(_))){const C=oW(_,r.current);C!==void 0&&(t[o]=C),o===t.length-1&&(this.finalKeyframe=_)}}if(this.resolveNoneKeyframes(),!Hfe.has(n)||t.length!==2)return;const[i,l]=t,h=a3(i),p=a3(l);if(h!==p)if(i3(h)&&i3(p))for(let o=0;o<t.length;o++){const _=t[o];typeof _=="string"&&(t[o]=parseFloat(_))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let i=0;i<t.length;i++)Lfe(t[i])&&n.push(i);n.length&&dpe(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Dy[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const i=r[r.length-1];i!==void 0&&t.getValue(n,i).jump(i,!1)}measureEndState(){var t;const{element:r,name:n,unresolvedKeyframes:i}=this;if(!r||!r.current)return;const l=r.getValue(n);l&&l.jump(this.measuredOrigin,!1);const h=i.length-1,p=i[h];i[h]=Dy[n](r.measureViewportBox(),window.getComputedStyle(r.current)),p!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=p),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([o,_])=>{r.getValue(o).set(_)}),this.resolveNoneKeyframes()}}function nO(e){return typeof e=="function"}let JS;function fpe(){JS=void 0}const nA={now:()=>(JS===void 0&&nA.set(_a.isProcessing||Ife.useManualTiming?_a.timestamp:performance.now()),JS),set:e=>{JS=e,queueMicrotask(fpe)}},u3=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Zf.test(e)||e==="0")&&!e.startsWith("url("));function ppe(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function mpe(e,t,r,n){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const l=e[e.length-1],h=u3(i,t),p=u3(l,t);return!h||!p?!1:ppe(e)||(r==="spring"||nO(r))&&n}const gpe=40;class gW{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:i=0,repeatDelay:l=0,repeatType:h="loop",...p}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=nA.now(),this.options={autoplay:t,delay:r,type:n,repeat:i,repeatDelay:l,repeatType:h,...p},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>gpe?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&qfe(),this._resolved}onKeyframesResolved(t,r){this.resolvedAt=nA.now(),this.hasAttemptedResolve=!0;const{name:n,type:i,velocity:l,delay:h,onComplete:p,onUpdate:o,isGenerator:_}=this.options;if(!_&&!mpe(t,n,i,l))if(h)this.options.duration=0;else{o==null||o(jI(t,this.options,r)),p==null||p(),this.resolveFinishedPromise();return}const C=this.initPlayback(t,r);C!==!1&&(this._resolved={keyframes:t,finalKeyframe:r,...C},this.onPostResolved())}onPostResolved(){}then(t,r){return this.currentFinishedPromise.then(t,r)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}function yW(e,t){return t?e*(1e3/t):0}const ype=5;function vW(e,t,r){const n=Math.max(t-ype,0);return yW(r-e(n),t-n)}const bR=.001,vpe=.01,_pe=10,xpe=.05,bpe=1;function wpe({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let i,l,h=1-t;h=Xf(xpe,bpe,h),e=Xf(vpe,_pe,qA(e)),h<1?(i=_=>{const C=_*h,M=C*e,L=C-r,z=Z4(_,h),j=Math.exp(-M);return bR-L/z*j},l=_=>{const M=_*h*e,L=M*r+r,z=Math.pow(h,2)*Math.pow(_,2)*e,j=Math.exp(-M),K=Z4(Math.pow(_,2),h);return(-i(_)+bR>0?-1:1)*((L-z)*j)/K}):(i=_=>{const C=Math.exp(-_*e),M=(_-r)*e+1;return-bR+C*M},l=_=>{const C=Math.exp(-_*e),M=(r-_)*(e*e);return C*M});const p=5/e,o=Cpe(i,l,p);if(e=WA(e),isNaN(o))return{stiffness:100,damping:10,duration:e};{const _=Math.pow(o,2)*n;return{stiffness:_,damping:h*2*Math.sqrt(n*_),duration:e}}}const Bpe=12;function Cpe(e,t,r){let n=r;for(let i=1;i<Bpe;i++)n=n-e(n)/t(n);return n}function Z4(e,t){return e*Math.sqrt(1-t*t)}const Spe=["duration","bounce"],Epe=["stiffness","damping","mass"];function h3(e,t){return t.some(r=>e[r]!==void 0)}function Tpe(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!h3(e,Epe)&&h3(e,Spe)){const r=wpe(e);t={...t,...r,mass:1},t.isResolvedFromDuration=!0}return t}function _W({keyframes:e,restDelta:t,restSpeed:r,...n}){const i=e[0],l=e[e.length-1],h={done:!1,value:i},{stiffness:p,damping:o,mass:_,duration:C,velocity:M,isResolvedFromDuration:L}=Tpe({...n,velocity:-qA(n.velocity||0)}),z=M||0,j=o/(2*Math.sqrt(p*_)),K=l-i,$=qA(Math.sqrt(p/_)),q=Math.abs(K)<5;r||(r=q?.01:2),t||(t=q?.005:.5);let ee;if(j<1){const ie=Z4($,j);ee=fe=>{const me=Math.exp(-j*$*fe);return l-me*((z+j*$*K)/ie*Math.sin(ie*fe)+K*Math.cos(ie*fe))}}else if(j===1)ee=ie=>l-Math.exp(-$*ie)*(K+(z+$*K)*ie);else{const ie=$*Math.sqrt(j*j-1);ee=fe=>{const me=Math.exp(-j*$*fe),ye=Math.min(ie*fe,300);return l-me*((z+j*$*K)*Math.sinh(ye)+ie*K*Math.cosh(ye))/ie}}return{calculatedDuration:L&&C||null,next:ie=>{const fe=ee(ie);if(L)h.done=ie>=C;else{let me=0;j<1&&(me=ie===0?WA(z):vW(ee,ie,fe));const ye=Math.abs(me)<=r,se=Math.abs(l-fe)<=t;h.done=ye&&se}return h.value=h.done?l:fe,h}}}function A3({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:l=500,modifyTarget:h,min:p,max:o,restDelta:_=.5,restSpeed:C}){const M=e[0],L={done:!1,value:M},z=re=>p!==void 0&&re<p||o!==void 0&&re>o,j=re=>p===void 0?o:o===void 0||Math.abs(p-re)<Math.abs(o-re)?p:o;let K=r*t;const $=M+K,q=h===void 0?$:h($);q!==$&&(K=q-M);const ee=re=>-K*Math.exp(-re/n),ie=re=>q+ee(re),fe=re=>{const de=ee(re),_e=ie(re);L.done=Math.abs(de)<=_,L.value=L.done?q:_e};let me,ye;const se=re=>{z(L.value)&&(me=re,ye=_W({keyframes:[L.value,j(L.value)],velocity:vW(ie,re,L.value),damping:i,stiffness:l,restDelta:_,restSpeed:C}))};return se(0),{calculatedDuration:null,next:re=>{let de=!1;return!ye&&me===void 0&&(de=!0,fe(re),se(re)),me!==void 0&&re>=me?ye.next(re-me):(!de&&fe(re),L)}}}const Ipe=Gb(.42,0,1,1),Fpe=Gb(0,0,.58,1),xW=Gb(.42,0,.58,1),Ppe=e=>Array.isArray(e)&&typeof e[0]!="number",iO=e=>Array.isArray(e)&&typeof e[0]=="number",d3={linear:Ya,easeIn:Ipe,easeInOut:xW,easeOut:Fpe,circIn:ZL,circInOut:eW,circOut:$K,backIn:XL,backInOut:YK,backOut:ZK,anticipate:JK},f3=e=>{if(iO(e)){G4(e.length===4);const[t,r,n,i]=e;return Gb(t,r,n,i)}else if(typeof e=="string")return G4(d3[e]!==void 0),d3[e];return e},Mpe=(e,t)=>r=>t(e(r)),XA=(...e)=>e.reduce(Mpe),Ly=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},Qo=(e,t,r)=>e+(t-e)*r;function wR(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Rpe({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let i=0,l=0,h=0;if(!t)i=l=h=r;else{const p=r<.5?r*(1+t):r+t-r*t,o=2*r-p;i=wR(o,p,e+1/3),l=wR(o,p,e),h=wR(o,p,e-1/3)}return{red:Math.round(i*255),green:Math.round(l*255),blue:Math.round(h*255),alpha:n}}function $E(e,t){return r=>r>0?t:e}const BR=(e,t,r)=>{const n=e*e,i=r*(t*t-n)+n;return i<0?0:Math.sqrt(i)},kpe=[q4,pm,Z0],Dpe=e=>kpe.find(t=>t.test(e));function p3(e){const t=Dpe(e);if(!t)return!1;let r=t.parse(e);return t===Z0&&(r=Rpe(r)),r}const m3=(e,t)=>{const r=p3(e),n=p3(t);if(!r||!n)return $E(e,t);const i={...r};return l=>(i.red=BR(r.red,n.red,l),i.green=BR(r.green,n.green,l),i.blue=BR(r.blue,n.blue,l),i.alpha=Qo(r.alpha,n.alpha,l),pm.transform(i))},Y4=new Set(["none","hidden"]);function Lpe(e,t){return Y4.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function Ope(e,t){return r=>Qo(e,t,r)}function oO(e){return typeof e=="number"?Ope:typeof e=="string"?YL(e)?$E:Ga.test(e)?m3:Vpe:Array.isArray(e)?bW:typeof e=="object"?Ga.test(e)?m3:Upe:$E}function bW(e,t){const r=[...e],n=r.length,i=e.map((l,h)=>oO(l)(l,t[h]));return l=>{for(let h=0;h<n;h++)r[h]=i[h](l);return r}}function Upe(e,t){const r={...e,...t},n={};for(const i in r)e[i]!==void 0&&t[i]!==void 0&&(n[i]=oO(e[i])(e[i],t[i]));return i=>{for(const l in n)r[l]=n[l](i);return r}}function zpe(e,t){var r;const n=[],i={color:0,var:0,number:0};for(let l=0;l<t.values.length;l++){const h=t.types[l],p=e.indexes[h][i[h]],o=(r=e.values[p])!==null&&r!==void 0?r:0;n[l]=o,i[h]++}return n}const Vpe=(e,t)=>{const r=Zf.createTransformer(t),n=ab(e),i=ab(t);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?Y4.has(e)&&!i.values.length||Y4.has(t)&&!n.values.length?Lpe(e,t):XA(bW(zpe(n,i),i.values),r):$E(e,t)};function wW(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?Qo(e,t,r):oO(e)(e,t)}function Npe(e,t,r){const n=[],i=r||wW,l=e.length-1;for(let h=0;h<l;h++){let p=i(e[h],e[h+1]);if(t){const o=Array.isArray(t)?t[h]||Ya:t;p=XA(o,p)}n.push(p)}return n}function Qpe(e,t,{clamp:r=!0,ease:n,mixer:i}={}){const l=e.length;if(G4(l===t.length),l===1)return()=>t[0];if(l===2&&e[0]===e[1])return()=>t[1];e[0]>e[l-1]&&(e=[...e].reverse(),t=[...t].reverse());const h=Npe(t,n,i),p=h.length,o=_=>{let C=0;if(p>1)for(;C<e.length-2&&!(_<e[C+1]);C++);const M=Ly(e[C],e[C+1],_);return h[C](M)};return r?_=>o(Xf(e[0],e[l-1],_)):o}function Hpe(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const i=Ly(0,t,n);e.push(Qo(r,1,i))}}function jpe(e){const t=[0];return Hpe(t,e.length-1),t}function Gpe(e,t){return e.map(r=>r*t)}function Kpe(e,t){return e.map(()=>t||xW).splice(0,e.length-1)}function eT({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const i=Ppe(n)?n.map(f3):f3(n),l={done:!1,value:t[0]},h=Gpe(r&&r.length===t.length?r:jpe(t),e),p=Qpe(h,t,{ease:Array.isArray(i)?i:Kpe(t,i)});return{calculatedDuration:e,next:o=>(l.value=p(o),l.done=o>=e,l)}}const g3=2e4;function Wpe(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<g3;)t+=r,n=e.next(t);return t>=g3?1/0:t}const qpe=e=>{const t=({timestamp:r})=>e(r);return{start:()=>Zi.update(t,!0),stop:()=>qf(t),now:()=>_a.isProcessing?_a.timestamp:nA.now()}},Xpe={decay:A3,inertia:A3,tween:eT,keyframes:eT,spring:_W},Zpe=e=>e/100;class sO extends gW{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:o}=this.options;o&&o()};const{name:r,motionValue:n,element:i,keyframes:l}=this.options,h=(i==null?void 0:i.KeyframeResolver)||JL,p=(o,_)=>this.onKeyframesResolved(o,_);this.resolver=new h(l,p,r,n,i),this.resolver.scheduleResolve()}initPlayback(t){const{type:r="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:l,velocity:h=0}=this.options,p=nO(r)?r:Xpe[r]||eT;let o,_;p!==eT&&typeof t[0]!="number"&&(o=XA(Zpe,wW(t[0],t[1])),t=[0,100]);const C=p({...this.options,keyframes:t});l==="mirror"&&(_=p({...this.options,keyframes:[...t].reverse(),velocity:-h})),C.calculatedDuration===null&&(C.calculatedDuration=Wpe(C));const{calculatedDuration:M}=C,L=M+i,z=L*(n+1)-i;return{generator:C,mirroredGenerator:_,mapPercentToKeyframes:o,calculatedDuration:M,resolvedDuration:L,totalDuration:z}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,r=!1){const{resolved:n}=this;if(!n){const{keyframes:re}=this.options;return{done:!0,value:re[re.length-1]}}const{finalKeyframe:i,generator:l,mirroredGenerator:h,mapPercentToKeyframes:p,keyframes:o,calculatedDuration:_,totalDuration:C,resolvedDuration:M}=n;if(this.startTime===null)return l.next(0);const{delay:L,repeat:z,repeatType:j,repeatDelay:K,onUpdate:$}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-C/this.speed,this.startTime)),r?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const q=this.currentTime-L*(this.speed>=0?1:-1),ee=this.speed>=0?q<0:q>C;this.currentTime=Math.max(q,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=C);let ie=this.currentTime,fe=l;if(z){const re=Math.min(this.currentTime,C)/M;let de=Math.floor(re),_e=re%1;!_e&&re>=1&&(_e=1),_e===1&&de--,de=Math.min(de,z+1),!!(de%2)&&(j==="reverse"?(_e=1-_e,K&&(_e-=K/M)):j==="mirror"&&(fe=h)),ie=Xf(0,1,_e)*M}const me=ee?{done:!1,value:o[0]}:fe.next(ie);p&&(me.value=p(me.value));let{done:ye}=me;!ee&&_!==null&&(ye=this.speed>=0?this.currentTime>=C:this.currentTime<=0);const se=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ye);return se&&i!==void 0&&(me.value=jI(o,this.options,i)),$&&$(me.value),se&&this.finish(),me}get duration(){const{resolved:t}=this;return t?qA(t.calculatedDuration):0}get time(){return qA(this.currentTime)}set time(t){t=WA(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=qA(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=qpe,onPlay:r,startTime:n}=this.options;this.driver||(this.driver=t(l=>this.tick(l))),r&&r();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const BW=new Set(["opacity","clipPath","filter","transform"]),Ype=10,Jpe=(e,t)=>{let r="";const n=Math.max(Math.round(t/Ype),2);for(let i=0;i<n;i++)r+=e(Ly(0,n-1,i))+", ";return`linear(${r.substring(0,r.length-2)})`};function aO(e){let t;return()=>(t===void 0&&(t=e()),t)}const $pe={linearEasing:void 0};function eme(e,t){const r=aO(e);return()=>{var n;return(n=$pe[t])!==null&&n!==void 0?n:r()}}const tT=eme(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function CW(e){return!!(typeof e=="function"&&tT()||!e||typeof e=="string"&&(e in J4||tT())||iO(e)||Array.isArray(e)&&e.every(CW))}const F1=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,J4={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:F1([0,.65,.55,1]),circOut:F1([.55,0,1,.45]),backIn:F1([.31,.01,.66,-.59]),backOut:F1([.33,1.53,.69,.99])};function SW(e,t){if(e)return typeof e=="function"&&tT()?Jpe(e,t):iO(e)?F1(e):Array.isArray(e)?e.map(r=>SW(r,t)||J4.easeOut):J4[e]}function tme(e,t,r,{delay:n=0,duration:i=300,repeat:l=0,repeatType:h="loop",ease:p,times:o}={}){const _={[t]:r};o&&(_.offset=o);const C=SW(p,i);return Array.isArray(C)&&(_.easing=C),e.animate(_,{delay:n,duration:i,easing:Array.isArray(C)?"linear":C,fill:"both",iterations:l+1,direction:h==="reverse"?"alternate":"normal"})}function y3(e,t){e.timeline=t,e.onfinish=null}const rme=aO(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),rT=10,nme=2e4;function ime(e){return nO(e.type)||e.type==="spring"||!CW(e.ease)}function ome(e,t){const r=new sO({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:e[0]};const i=[];let l=0;for(;!n.done&&l<nme;)n=r.sample(l),i.push(n.value),l+=rT;return{times:void 0,keyframes:i,duration:l-rT,ease:"linear"}}const EW={anticipate:JK,backInOut:YK,circInOut:eW};function sme(e){return e in EW}class v3 extends gW{constructor(t){super(t);const{name:r,motionValue:n,element:i,keyframes:l}=this.options;this.resolver=new mW(l,(h,p)=>this.onKeyframesResolved(h,p),r,n,i),this.resolver.scheduleResolve()}initPlayback(t,r){var n;let{duration:i=300,times:l,ease:h,type:p,motionValue:o,name:_,startTime:C}=this.options;if(!(!((n=o.owner)===null||n===void 0)&&n.current))return!1;if(typeof h=="string"&&tT()&&sme(h)&&(h=EW[h]),ime(this.options)){const{onComplete:L,onUpdate:z,motionValue:j,element:K,...$}=this.options,q=ome(t,$);t=q.keyframes,t.length===1&&(t[1]=t[0]),i=q.duration,l=q.times,h=q.ease,p="keyframes"}const M=tme(o.owner.current,_,t,{...this.options,duration:i,times:l,ease:h});return M.startTime=C??this.calcStartTime(),this.pendingTimeline?(y3(M,this.pendingTimeline),this.pendingTimeline=void 0):M.onfinish=()=>{const{onComplete:L}=this.options;o.set(jI(t,this.options,r)),L&&L(),this.cancel(),this.resolveFinishedPromise()},{animation:M,duration:i,times:l,type:p,ease:h,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:r}=t;return qA(r)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:r}=t;return qA(r.currentTime||0)}set time(t){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.currentTime=WA(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:r}=t;return r.playbackRate}set speed(t){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:r}=t;return r.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:r}=t;return r.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:r}=this;if(!r)return Ya;const{animation:n}=r;y3(n,t)}return Ya}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:r,keyframes:n,duration:i,type:l,ease:h,times:p}=t;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:_,onUpdate:C,onComplete:M,element:L,...z}=this.options,j=new sO({...z,keyframes:n,duration:i,type:l,ease:h,times:p,isGenerator:!0}),K=WA(this.time);_.setWithVelocity(j.sample(K-rT).value,j.sample(K).value,rT)}const{onStop:o}=this.options;o&&o(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:r,name:n,repeatDelay:i,repeatType:l,damping:h,type:p}=t;return rme()&&n&&BW.has(n)&&r&&r.owner&&r.owner.current instanceof HTMLElement&&!r.owner.getProps().onUpdate&&!i&&l!=="mirror"&&h!==0&&p!=="inertia"}}const ame=aO(()=>window.ScrollTimeline!==void 0);class lme{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,r){return Promise.all(this.animations).then(t).catch(r)}getAll(t){return this.animations[0][t]}setAll(t,r){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=r}attachTimeline(t,r){const n=this.animations.map(i=>ame()&&i.attachTimeline?i.attachTimeline(t):r(i));return()=>{n.forEach((i,l)=>{i&&i(),this.animations[l].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let r=0;r<this.animations.length;r++)t=Math.max(t,this.animations[r].duration);return t}runAll(t){this.animations.forEach(r=>r[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function cme({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:l,repeatType:h,repeatDelay:p,from:o,elapsed:_,...C}){return!!Object.keys(C).length}const lO=(e,t,r,n={},i,l)=>h=>{const p=qL(n,e)||{},o=p.delay||n.delay||0;let{elapsed:_=0}=n;_=_-WA(o);let C={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...p,delay:-_,onUpdate:L=>{t.set(L),p.onUpdate&&p.onUpdate(L)},onComplete:()=>{h(),p.onComplete&&p.onComplete()},name:e,motionValue:t,element:l?void 0:i};cme(p)||(C={...C,...Tfe(e,C)}),C.duration&&(C.duration=WA(C.duration)),C.repeatDelay&&(C.repeatDelay=WA(C.repeatDelay)),C.from!==void 0&&(C.keyframes[0]=C.from);let M=!1;if((C.type===!1||C.duration===0&&!C.repeatDelay)&&(C.duration=0,C.delay===0&&(M=!0)),M&&!l&&t.get()!==void 0){const L=jI(C.keyframes,p);if(L!==void 0)return Zi.update(()=>{C.onUpdate(L),C.onComplete()}),new lme([])}return!l&&v3.supports(C)?new v3(C):new sO(C)},ume=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),hme=e=>j4(e)?e[e.length-1]||0:e;function cO(e,t){e.indexOf(t)===-1&&e.push(t)}function uO(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class hO{constructor(){this.subscriptions=[]}add(t){return cO(this.subscriptions,t),()=>uO(this.subscriptions,t)}notify(t,r,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,r,n);else for(let l=0;l<i;l++){const h=this.subscriptions[l];h&&h(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const _3=30,Ame=e=>!isNaN(parseFloat(e));class dme{constructor(t,r={}){this.version="11.11.8",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,i=!0)=>{const l=nA.now();this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=nA.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Ame(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new hO);const n=this.events[t].add(r);return t==="change"?()=>{n(),Zi.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=nA.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>_3)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,_3);return yW(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function lb(e,t){return new dme(e,t)}function fme(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,lb(r))}function pme(e,t){const r=HI(e,t);let{transitionEnd:n={},transition:i={},...l}=r||{};l={...l,...n};for(const h in l){const p=hme(l[h]);fme(e,h,p)}}const GI=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),mme="framerAppearId",TW="data-"+GI(mme);function IW(e){return e.props[TW]}const Za=e=>!!(e&&e.getVelocity);function gme(e){return!!(Za(e)&&e.add)}function FW(e){if(lp.has(e))return"transform";if(BW.has(e))return GI(e)}function $4(e,t){var r;if(!e.applyWillChange)return;const n=e.getValue("willChange");if(gme(n))return n.add(t);!(!((r=e.props.style)===null||r===void 0)&&r.willChange)&&FW(t)&&e.setStaticValue("willChange","transform")}function yme({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function PW(e,t,{delay:r=0,transitionOverride:n,type:i}={}){var l;let{transition:h=e.getDefaultTransition(),transitionEnd:p,...o}=t;n&&(h=n);const _=[],C=i&&e.animationState&&e.animationState.getState()[i];for(const M in o){const L=e.getValue(M,(l=e.latestValues[M])!==null&&l!==void 0?l:null),z=o[M];if(z===void 0||C&&yme(C,M))continue;const j={delay:r,...qL(h||{},M)};let K=!1;if(window.MotionHandoffAnimation){const q=IW(e);if(q){const ee=window.MotionHandoffAnimation(q,M,Zi);ee!==null&&(j.startTime=ee,K=!0)}}$4(e,M),L.start(lO(M,L,z,e.shouldReduceMotion&&lp.has(M)?{type:!1}:j,e,K));const $=L.animation;$&&_.push($)}return p&&Promise.all(_).then(()=>{Zi.update(()=>{p&&pme(e,p)})}),_}function eD(e,t,r={}){var n;const i=HI(e,t,r.type==="exit"?(n=e.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:l=e.getDefaultTransition()||{}}=i||{};r.transitionOverride&&(l=r.transitionOverride);const h=i?()=>Promise.all(PW(e,i,r)):()=>Promise.resolve(),p=e.variantChildren&&e.variantChildren.size?(_=0)=>{const{delayChildren:C=0,staggerChildren:M,staggerDirection:L}=l;return vme(e,t,C+_,M,L,r)}:()=>Promise.resolve(),{when:o}=l;if(o){const[_,C]=o==="beforeChildren"?[h,p]:[p,h];return _().then(()=>C())}else return Promise.all([h(),p(r.delay)])}function vme(e,t,r=0,n=0,i=1,l){const h=[],p=(e.variantChildren.size-1)*n,o=i===1?(_=0)=>_*n:(_=0)=>p-_*n;return Array.from(e.variantChildren).sort(_me).forEach((_,C)=>{_.notify("AnimationStart",t),h.push(eD(_,t,{...l,delay:r+o(C)}).then(()=>_.notify("AnimationComplete",t)))}),Promise.all(h)}function _me(e,t){return e.sortNodePosition(t)}function xme(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const i=t.map(l=>eD(e,l,r));n=Promise.all(i)}else if(typeof t=="string")n=eD(e,t,r);else{const i=typeof t=="function"?HI(e,t,r.custom):t;n=Promise.all(PW(e,i,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}const bme=WL.length;function MW(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?MW(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<bme;r++){const n=WL[r],i=e.props[n];(ob(i)||i===!1)&&(t[n]=i)}return t}const wme=[...KL].reverse(),Bme=KL.length;function Cme(e){return t=>Promise.all(t.map(({animation:r,options:n})=>xme(e,r,n)))}function Sme(e){let t=Cme(e),r=x3(),n=!0;const i=o=>(_,C)=>{var M;const L=HI(e,C,o==="exit"?(M=e.presenceContext)===null||M===void 0?void 0:M.custom:void 0);if(L){const{transition:z,transitionEnd:j,...K}=L;_={..._,...K,...j}}return _};function l(o){t=o(e)}function h(o){const{props:_}=e,C=MW(e.parent)||{},M=[],L=new Set;let z={},j=1/0;for(let $=0;$<Bme;$++){const q=wme[$],ee=r[q],ie=_[q]!==void 0?_[q]:C[q],fe=ob(ie),me=q===o?ee.isActive:null;me===!1&&(j=$);let ye=ie===C[q]&&ie!==_[q]&&fe;if(ye&&n&&e.manuallyAnimateOnMount&&(ye=!1),ee.protectedKeys={...z},!ee.isActive&&me===null||!ie&&!ee.prevProp||ib(ie)||typeof ie=="boolean")continue;const se=Eme(ee.prevProp,ie);let re=se||q===o&&ee.isActive&&!ye&&fe||$>j&&fe,de=!1;const _e=Array.isArray(ie)?ie:[ie];let ve=_e.reduce(i(q),{});me===!1&&(ve={});const{prevResolvedValues:Pe={}}=ee,Ee={...Pe,...ve},Ht=jt=>{re=!0,L.has(jt)&&(de=!0,L.delete(jt)),ee.needsAnimating[jt]=!0;const Mt=e.getValue(jt);Mt&&(Mt.liveStyle=!1)};for(const jt in Ee){const Mt=ve[jt],Yt=Pe[jt];if(z.hasOwnProperty(jt))continue;let ht=!1;j4(Mt)&&j4(Yt)?ht=!GK(Mt,Yt):ht=Mt!==Yt,ht?Mt!=null?Ht(jt):L.add(jt):Mt!==void 0&&L.has(jt)?Ht(jt):ee.protectedKeys[jt]=!0}ee.prevProp=ie,ee.prevResolvedValues=ve,ee.isActive&&(z={...z,...ve}),n&&e.blockInitialAnimation&&(re=!1),re&&(!(ye&&se)||de)&&M.push(..._e.map(jt=>({animation:jt,options:{type:q}})))}if(L.size){const $={};L.forEach(q=>{const ee=e.getBaseTarget(q),ie=e.getValue(q);ie&&(ie.liveStyle=!0),$[q]=ee??null}),M.push({animation:$})}let K=!!M.length;return n&&(_.initial===!1||_.initial===_.animate)&&!e.manuallyAnimateOnMount&&(K=!1),n=!1,K?t(M):Promise.resolve()}function p(o,_){var C;if(r[o].isActive===_)return Promise.resolve();(C=e.variantChildren)===null||C===void 0||C.forEach(L=>{var z;return(z=L.animationState)===null||z===void 0?void 0:z.setActive(o,_)}),r[o].isActive=_;const M=h(o);for(const L in r)r[L].protectedKeys={};return M}return{animateChanges:h,setActive:p,setAnimateFunction:l,getState:()=>r,reset:()=>{r=x3(),n=!0}}}function Eme(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!GK(t,e):!1}function Yp(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function x3(){return{animate:Yp(!0),whileInView:Yp(),whileHover:Yp(),whileTap:Yp(),whileDrag:Yp(),whileFocus:Yp(),exit:Yp()}}class cp{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Tme extends cp{constructor(t){super(t),t.animationState||(t.animationState=Sme(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();ib(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let Ime=0;class Fme extends cp{constructor(){super(...arguments),this.id=Ime++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const i=this.node.animationState.setActive("exit",!t);r&&!t&&i.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const Pme={animation:{Feature:Tme},exit:{Feature:Fme}},RW=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function KI(e,t="page"){return{point:{x:e[`${t}X`],y:e[`${t}Y`]}}}const Mme=e=>t=>RW(t)&&e(t,KI(t));function jA(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function ZA(e,t,r,n){return jA(e,t,Mme(r),n)}const b3=(e,t)=>Math.abs(e-t);function Rme(e,t){const r=b3(e.x,t.x),n=b3(e.y,t.y);return Math.sqrt(r**2+n**2)}class kW{constructor(t,r,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:l=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=SR(this.lastMoveEventInfo,this.history),L=this.startEvent!==null,z=Rme(M.offset,{x:0,y:0})>=3;if(!L&&!z)return;const{point:j}=M,{timestamp:K}=_a;this.history.push({...j,timestamp:K});const{onStart:$,onMove:q}=this.handlers;L||($&&$(this.lastMoveEvent,M),this.startEvent=this.lastMoveEvent),q&&q(this.lastMoveEvent,M)},this.handlePointerMove=(M,L)=>{this.lastMoveEvent=M,this.lastMoveEventInfo=CR(L,this.transformPagePoint),Zi.update(this.updatePoint,!0)},this.handlePointerUp=(M,L)=>{this.end();const{onEnd:z,onSessionEnd:j,resumeAnimation:K}=this.handlers;if(this.dragSnapToOrigin&&K&&K(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const $=SR(M.type==="pointercancel"?this.lastMoveEventInfo:CR(L,this.transformPagePoint),this.history);this.startEvent&&z&&z(M,$),j&&j(M,$)},!RW(t))return;this.dragSnapToOrigin=l,this.handlers=r,this.transformPagePoint=n,this.contextWindow=i||window;const h=KI(t),p=CR(h,this.transformPagePoint),{point:o}=p,{timestamp:_}=_a;this.history=[{...o,timestamp:_}];const{onSessionStart:C}=r;C&&C(t,SR(p,this.history)),this.removeListeners=XA(ZA(this.contextWindow,"pointermove",this.handlePointerMove),ZA(this.contextWindow,"pointerup",this.handlePointerUp),ZA(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),qf(this.updatePoint)}}function CR(e,t){return t?{point:t(e.point)}:e}function w3(e,t){return{x:e.x-t.x,y:e.y-t.y}}function SR({point:e},t){return{point:e,delta:w3(e,DW(t)),offset:w3(e,kme(t)),velocity:Dme(t,.1)}}function kme(e){return e[0]}function DW(e){return e[e.length-1]}function Dme(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const i=DW(e);for(;r>=0&&(n=e[r],!(i.timestamp-n.timestamp>WA(t)));)r--;if(!n)return{x:0,y:0};const l=qA(i.timestamp-n.timestamp);if(l===0)return{x:0,y:0};const h={x:(i.x-n.x)/l,y:(i.y-n.y)/l};return h.x===1/0&&(h.x=0),h.y===1/0&&(h.y=0),h}function LW(e){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=e,r):!1}}const B3=LW("dragHorizontal"),C3=LW("dragVertical");function OW(e){let t=!1;if(e==="y")t=C3();else if(e==="x")t=B3();else{const r=B3(),n=C3();r&&n?t=()=>{r(),n()}:(r&&r(),n&&n())}return t}function UW(){const e=OW(!0);return e?(e(),!1):!0}function Y0(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}const zW=1e-4,Lme=1-zW,Ome=1+zW,VW=.01,Ume=0-VW,zme=0+VW;function mc(e){return e.max-e.min}function Vme(e,t,r){return Math.abs(e-t)<=r}function S3(e,t,r,n=.5){e.origin=n,e.originPoint=Qo(t.min,t.max,e.origin),e.scale=mc(r)/mc(t),e.translate=Qo(r.min,r.max,e.origin)-e.originPoint,(e.scale>=Lme&&e.scale<=Ome||isNaN(e.scale))&&(e.scale=1),(e.translate>=Ume&&e.translate<=zme||isNaN(e.translate))&&(e.translate=0)}function hx(e,t,r,n){S3(e.x,t.x,r.x,n?n.originX:void 0),S3(e.y,t.y,r.y,n?n.originY:void 0)}function E3(e,t,r){e.min=r.min+t.min,e.max=e.min+mc(t)}function Nme(e,t,r){E3(e.x,t.x,r.x),E3(e.y,t.y,r.y)}function T3(e,t,r){e.min=t.min-r.min,e.max=e.min+mc(t)}function Ax(e,t,r){T3(e.x,t.x,r.x),T3(e.y,t.y,r.y)}function Qme(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Qo(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Qo(r,e,n.max):Math.min(e,r)),e}function I3(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function Hme(e,{top:t,left:r,bottom:n,right:i}){return{x:I3(e.x,r,i),y:I3(e.y,t,n)}}function F3(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function jme(e,t){return{x:F3(e.x,t.x),y:F3(e.y,t.y)}}function Gme(e,t){let r=.5;const n=mc(e),i=mc(t);return i>n?r=Ly(t.min,t.max-n,e.min):n>i&&(r=Ly(e.min,e.max-i,t.min)),Xf(0,1,r)}function Kme(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const tD=.35;function Wme(e=tD){return e===!1?e=0:e===!0&&(e=tD),{x:P3(e,"left","right"),y:P3(e,"top","bottom")}}function P3(e,t,r){return{min:M3(e,t),max:M3(e,r)}}function M3(e,t){return typeof e=="number"?e:e[t]||0}const R3=()=>({translate:0,scale:1,origin:0,originPoint:0}),J0=()=>({x:R3(),y:R3()}),k3=()=>({min:0,max:0}),hs=()=>({x:k3(),y:k3()});function Xc(e){return[e("x"),e("y")]}function NW({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function qme({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Xme(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function ER(e){return e===void 0||e===1}function rD({scale:e,scaleX:t,scaleY:r}){return!ER(e)||!ER(t)||!ER(r)}function im(e){return rD(e)||QW(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function QW(e){return D3(e.x)||D3(e.y)}function D3(e){return e&&e!=="0%"}function nT(e,t,r){const n=e-r,i=t*n;return r+i}function L3(e,t,r,n,i){return i!==void 0&&(e=nT(e,i,n)),nT(e,r,n)+t}function nD(e,t=0,r=1,n,i){e.min=L3(e.min,t,r,n,i),e.max=L3(e.max,t,r,n,i)}function HW(e,{x:t,y:r}){nD(e.x,t.translate,t.scale,t.originPoint),nD(e.y,r.translate,r.scale,r.originPoint)}const O3=.999999999999,U3=1.0000000000001;function Zme(e,t,r,n=!1){const i=r.length;if(!i)return;t.x=t.y=1;let l,h;for(let p=0;p<i;p++){l=r[p],h=l.projectionDelta;const{visualElement:o}=l.options;o&&o.props.style&&o.props.style.display==="contents"||(n&&l.options.layoutScroll&&l.scroll&&l!==l.root&&ey(e,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),h&&(t.x*=h.x.scale,t.y*=h.y.scale,HW(e,h)),n&&im(l.latestValues)&&ey(e,l.latestValues))}t.x<U3&&t.x>O3&&(t.x=1),t.y<U3&&t.y>O3&&(t.y=1)}function $0(e,t){e.min=e.min+t,e.max=e.max+t}function z3(e,t,r,n,i=.5){const l=Qo(e.min,e.max,i);nD(e,t,r,l,n)}function ey(e,t){z3(e.x,t.x,t.scaleX,t.scale,t.originX),z3(e.y,t.y,t.scaleY,t.scale,t.originY)}function jW(e,t){return NW(Xme(e.getBoundingClientRect(),t))}function Yme(e,t,r){const n=jW(e,r),{scroll:i}=t;return i&&($0(n.x,i.offset.x),$0(n.y,i.offset.y)),n}const GW=({current:e})=>e?e.ownerDocument.defaultView:null,Jme=new WeakMap;class $me{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=hs(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=C=>{const{dragSnapToOrigin:M}=this.getProps();M?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(KI(C,"page").point)},l=(C,M)=>{const{drag:L,dragPropagation:z,onDragStart:j}=this.getProps();if(L&&!z&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=OW(L),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Xc($=>{let q=this.getAxisMotionValue($).get()||0;if(rA.test(q)){const{projection:ee}=this.visualElement;if(ee&&ee.layout){const ie=ee.layout.layoutBox[$];ie&&(q=mc(ie)*(parseFloat(q)/100))}}this.originPoint[$]=q}),j&&Zi.postRender(()=>j(C,M)),$4(this.visualElement,"transform");const{animationState:K}=this.visualElement;K&&K.setActive("whileDrag",!0)},h=(C,M)=>{const{dragPropagation:L,dragDirectionLock:z,onDirectionLock:j,onDrag:K}=this.getProps();if(!L&&!this.openGlobalLock)return;const{offset:$}=M;if(z&&this.currentDirection===null){this.currentDirection=ege($),this.currentDirection!==null&&j&&j(this.currentDirection);return}this.updateAxis("x",M.point,$),this.updateAxis("y",M.point,$),this.visualElement.render(),K&&K(C,M)},p=(C,M)=>this.stop(C,M),o=()=>Xc(C=>{var M;return this.getAnimationState(C)==="paused"&&((M=this.getAxisMotionValue(C).animation)===null||M===void 0?void 0:M.play())}),{dragSnapToOrigin:_}=this.getProps();this.panSession=new kW(t,{onSessionStart:i,onStart:l,onMove:h,onSessionEnd:p,resumeAnimation:o},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:_,contextWindow:GW(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=r;this.startAnimation(i);const{onDragEnd:l}=this.getProps();l&&Zi.postRender(()=>l(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:i}=this.getProps();if(!n||!IC(t,i,this.currentDirection))return;const l=this.getAxisMotionValue(t);let h=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(h=Qme(h,this.constraints[t],this.elastic[t])),l.set(h)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,l=this.constraints;r&&Y0(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&i?this.constraints=Hme(i.layoutBox,r):this.constraints=!1,this.elastic=Wme(n),l!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Xc(h=>{this.constraints!==!1&&this.getAxisMotionValue(h)&&(this.constraints[h]=Kme(i.layoutBox[h],this.constraints[h]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Y0(t))return!1;const n=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const l=Yme(n,i.root,this.visualElement.getTransformPagePoint());let h=jme(i.layout.layoutBox,l);if(r){const p=r(qme(h));this.hasMutatedConstraints=!!p,p&&(h=NW(p))}return h}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:i,dragTransition:l,dragSnapToOrigin:h,onDragTransitionEnd:p}=this.getProps(),o=this.constraints||{},_=Xc(C=>{if(!IC(C,r,this.currentDirection))return;let M=o&&o[C]||{};h&&(M={min:0,max:0});const L=i?200:1e6,z=i?40:1e7,j={type:"inertia",velocity:n?t[C]:0,bounceStiffness:L,bounceDamping:z,timeConstant:750,restDelta:1,restSpeed:10,...l,...M};return this.startAxisValueAnimation(C,j)});return Promise.all(_).then(p)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return $4(this.visualElement,t),n.start(lO(t,n,0,r,this.visualElement,!1))}stopAnimation(){Xc(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Xc(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),i=n[r];return i||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Xc(r=>{const{drag:n}=this.getProps();if(!IC(r,n,this.currentDirection))return;const{projection:i}=this.visualElement,l=this.getAxisMotionValue(r);if(i&&i.layout){const{min:h,max:p}=i.layout.layoutBox[r];l.set(t[r]-Qo(h,p,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Y0(r)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Xc(h=>{const p=this.getAxisMotionValue(h);if(p&&this.constraints!==!1){const o=p.get();i[h]=Gme({min:o,max:o},this.constraints[h])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Xc(h=>{if(!IC(h,t,null))return;const p=this.getAxisMotionValue(h),{min:o,max:_}=this.constraints[h];p.set(Qo(o,_,i[h]))})}addListeners(){if(!this.visualElement.current)return;Jme.set(this.visualElement,this);const t=this.visualElement.current,r=ZA(t,"pointerdown",o=>{const{drag:_,dragListener:C=!0}=this.getProps();_&&C&&this.start(o)}),n=()=>{const{dragConstraints:o}=this.getProps();Y0(o)&&o.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,l=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Zi.read(n);const h=jA(window,"resize",()=>this.scalePositionWithinConstraints()),p=i.addEventListener("didUpdate",({delta:o,hasLayoutChanged:_})=>{this.isDragging&&_&&(Xc(C=>{const M=this.getAxisMotionValue(C);M&&(this.originPoint[C]+=o[C].translate,M.set(M.get()+o[C].translate))}),this.visualElement.render())});return()=>{h(),r(),l(),p&&p()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:l=!1,dragElastic:h=tD,dragMomentum:p=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:i,dragConstraints:l,dragElastic:h,dragMomentum:p}}}function IC(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function ege(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class tge extends cp{constructor(t){super(t),this.removeGroupControls=Ya,this.removeListeners=Ya,this.controls=new $me(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ya}unmount(){this.removeGroupControls(),this.removeListeners()}}const V3=e=>(t,r)=>{e&&Zi.postRender(()=>e(t,r))};class rge extends cp{constructor(){super(...arguments),this.removePointerDownListener=Ya}onPointerDown(t){this.session=new kW(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:GW(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:V3(t),onStart:V3(r),onMove:n,onEnd:(l,h)=>{delete this.session,i&&Zi.postRender(()=>i(l,h))}}}mount(){this.removePointerDownListener=ZA(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Wb=Re.createContext(null);function nge(){const e=Re.useContext(Wb);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:n}=e,i=Re.useId();Re.useEffect(()=>n(i),[]);const l=Re.useCallback(()=>r&&r(i),[i,r]);return!t&&r?[!1,l]:[!0]}function ige(){return oge(Re.useContext(Wb))}function oge(e){return e===null?!0:e.isPresent}const AO=Re.createContext({}),KW=Re.createContext({}),$S={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function N3(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const t1={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ln.test(e))e=parseFloat(e);else return e;const r=N3(e,t.target.x),n=N3(e,t.target.y);return`${r}% ${n}%`}},sge={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,i=Zf.parse(e);if(i.length>5)return n;const l=Zf.createTransformer(e),h=typeof i[0]!="number"?1:0,p=r.x.scale*t.x,o=r.y.scale*t.y;i[0+h]/=p,i[1+h]/=o;const _=Qo(p,o,.5);return typeof i[2+h]=="number"&&(i[2+h]/=_),typeof i[3+h]=="number"&&(i[3+h]/=_),l(i)}},iT={};function age(e){Object.assign(iT,e)}const{schedule:dO,cancel:JUe}=KK(queueMicrotask,!1);class lge extends Re.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:i}=this.props,{projection:l}=t;age(cge),l&&(r.group&&r.group.add(l),n&&n.register&&i&&n.register(l),l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),$S.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:i,isPresent:l}=this.props,h=n.projection;return h&&(h.isPresent=l,i||t.layoutDependency!==r||r===void 0?h.willUpdate():this.safeToRemove(),t.isPresent!==l&&(l?h.promote():h.relegate()||Zi.postRender(()=>{const p=h.getStack();(!p||!p.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),dO.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function WW(e){const[t,r]=nge(),n=Re.useContext(AO);return $e.jsx(lge,{...e,layoutGroup:n,switchLayoutGroup:Re.useContext(KW),isPresent:t,safeToRemove:r})}const cge={borderRadius:{...t1,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:t1,borderTopRightRadius:t1,borderBottomLeftRadius:t1,borderBottomRightRadius:t1,boxShadow:sge},qW=["TopLeft","TopRight","BottomLeft","BottomRight"],uge=qW.length,Q3=e=>typeof e=="string"?parseFloat(e):e,H3=e=>typeof e=="number"||ln.test(e);function hge(e,t,r,n,i,l){i?(e.opacity=Qo(0,r.opacity!==void 0?r.opacity:1,Age(n)),e.opacityExit=Qo(t.opacity!==void 0?t.opacity:1,0,dge(n))):l&&(e.opacity=Qo(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let h=0;h<uge;h++){const p=`border${qW[h]}Radius`;let o=j3(t,p),_=j3(r,p);if(o===void 0&&_===void 0)continue;o||(o=0),_||(_=0),o===0||_===0||H3(o)===H3(_)?(e[p]=Math.max(Qo(Q3(o),Q3(_),n),0),(rA.test(_)||rA.test(o))&&(e[p]+="%")):e[p]=_}(t.rotate||r.rotate)&&(e.rotate=Qo(t.rotate||0,r.rotate||0,n))}function j3(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Age=XW(0,.5,$K),dge=XW(.5,.95,Ya);function XW(e,t,r){return n=>n<e?0:n>t?1:r(Ly(e,t,n))}function G3(e,t){e.min=t.min,e.max=t.max}function Qc(e,t){G3(e.x,t.x),G3(e.y,t.y)}function K3(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function W3(e,t,r,n,i){return e-=t,e=nT(e,1/r,n),i!==void 0&&(e=nT(e,1/i,n)),e}function fge(e,t=0,r=1,n=.5,i,l=e,h=e){if(rA.test(t)&&(t=parseFloat(t),t=Qo(h.min,h.max,t/100)-h.min),typeof t!="number")return;let p=Qo(l.min,l.max,n);e===l&&(p-=t),e.min=W3(e.min,t,r,p,i),e.max=W3(e.max,t,r,p,i)}function q3(e,t,[r,n,i],l,h){fge(e,t[r],t[n],t[i],t.scale,l,h)}const pge=["x","scaleX","originX"],mge=["y","scaleY","originY"];function X3(e,t,r,n){q3(e.x,t,pge,r?r.x:void 0,n?n.x:void 0),q3(e.y,t,mge,r?r.y:void 0,n?n.y:void 0)}function Z3(e){return e.translate===0&&e.scale===1}function ZW(e){return Z3(e.x)&&Z3(e.y)}function Y3(e,t){return e.min===t.min&&e.max===t.max}function gge(e,t){return Y3(e.x,t.x)&&Y3(e.y,t.y)}function J3(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function YW(e,t){return J3(e.x,t.x)&&J3(e.y,t.y)}function $3(e){return mc(e.x)/mc(e.y)}function eQ(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class yge{constructor(){this.members=[]}add(t){cO(this.members,t),t.scheduleRender()}remove(t){if(uO(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(i=>t===i);if(r===0)return!1;let n;for(let i=r;i>=0;i--){const l=this.members[i];if(l.isPresent!==!1){n=l;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function vge(e,t,r){let n="";const i=e.x.translate/t.x,l=e.y.translate/t.y,h=(r==null?void 0:r.z)||0;if((i||l||h)&&(n=`translate3d(${i}px, ${l}px, ${h}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:_,rotate:C,rotateX:M,rotateY:L,skewX:z,skewY:j}=r;_&&(n=`perspective(${_}px) ${n}`),C&&(n+=`rotate(${C}deg) `),M&&(n+=`rotateX(${M}deg) `),L&&(n+=`rotateY(${L}deg) `),z&&(n+=`skewX(${z}deg) `),j&&(n+=`skewY(${j}deg) `)}const p=e.x.scale*t.x,o=e.y.scale*t.y;return(p!==1||o!==1)&&(n+=`scale(${p}, ${o})`),n||"none"}const _ge=(e,t)=>e.depth-t.depth;class xge{constructor(){this.children=[],this.isDirty=!1}add(t){cO(this.children,t),this.isDirty=!0}remove(t){uO(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(_ge),this.isDirty=!1,this.children.forEach(t)}}function eE(e){const t=Za(e)?e.get():e;return ume(t)?t.toValue():t}function bge(e,t){const r=nA.now(),n=({timestamp:i})=>{const l=i-r;l>=t&&(qf(n),e(l-t))};return Zi.read(n,!0),()=>qf(n)}function wge(e){return e instanceof SVGElement&&e.tagName!=="svg"}function Bge(e,t,r){const n=Za(e)?e:lb(e);return n.start(lO("",n,t,r)),n.animation}const om={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},P1=typeof window<"u"&&window.MotionDebug!==void 0,TR=["","X","Y","Z"],Cge={visibility:"hidden"},tQ=1e3;let Sge=0;function IR(e,t,r,n){const{latestValues:i}=t;i[e]&&(r[e]=i[e],t.setStaticValue(e,0),n&&(n[e]=0))}function JW(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=IW(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:i,layoutId:l}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Zi,!(i||l))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&JW(n)}function $W({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(h={},p=t==null?void 0:t()){this.id=Sge++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,P1&&(om.totalNodes=om.resolvedTargetDeltas=om.recalculatedProjection=0),this.nodes.forEach(Ige),this.nodes.forEach(kge),this.nodes.forEach(Dge),this.nodes.forEach(Fge),P1&&window.MotionDebug.record(om)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=h,this.root=p?p.root||p:this,this.path=p?[...p.path,p]:[],this.parent=p,this.depth=p?p.depth+1:0;for(let o=0;o<this.path.length;o++)this.path[o].shouldResetTransform=!0;this.root===this&&(this.nodes=new xge)}addEventListener(h,p){return this.eventHandlers.has(h)||this.eventHandlers.set(h,new hO),this.eventHandlers.get(h).add(p)}notifyListeners(h,...p){const o=this.eventHandlers.get(h);o&&o.notify(...p)}hasListeners(h){return this.eventHandlers.has(h)}mount(h,p=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=wge(h),this.instance=h;const{layoutId:o,layout:_,visualElement:C}=this.options;if(C&&!C.current&&C.mount(h),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),p&&(_||o)&&(this.isLayoutDirty=!0),e){let M;const L=()=>this.root.updateBlockedByResize=!1;e(h,()=>{this.root.updateBlockedByResize=!0,M&&M(),M=bge(L,250),$S.hasAnimatedSinceResize&&($S.hasAnimatedSinceResize=!1,this.nodes.forEach(nQ))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&C&&(o||_)&&this.addEventListener("didUpdate",({delta:M,hasLayoutChanged:L,hasRelativeTargetChanged:z,layout:j})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const K=this.options.transition||C.getDefaultTransition()||Vge,{onLayoutAnimationStart:$,onLayoutAnimationComplete:q}=C.getProps(),ee=!this.targetLayout||!YW(this.targetLayout,j)||z,ie=!L&&z;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||ie||L&&(ee||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(M,ie);const fe={...qL(K,"layout"),onPlay:$,onComplete:q};(C.shouldReduceMotion||this.options.layoutRoot)&&(fe.delay=0,fe.type=!1),this.startAnimation(fe)}else L||nQ(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=j})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const h=this.getStack();h&&h.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,qf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Lge),this.animationId++)}getTransformTemplate(){const{visualElement:h}=this.options;return h&&h.getProps().transformTemplate}willUpdate(h=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&JW(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let C=0;C<this.path.length;C++){const M=this.path[C];M.shouldResetTransform=!0,M.updateScroll("snapshot"),M.options.layoutRoot&&M.willUpdate(!1)}const{layoutId:p,layout:o}=this.options;if(p===void 0&&!o)return;const _=this.getTransformTemplate();this.prevTransformTemplateValue=_?_(this.latestValues,""):void 0,this.updateSnapshot(),h&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(rQ);return}this.isUpdating||this.nodes.forEach(Mge),this.isUpdating=!1,this.nodes.forEach(Rge),this.nodes.forEach(Ege),this.nodes.forEach(Tge),this.clearAllSnapshots();const p=nA.now();_a.delta=Xf(0,1e3/60,p-_a.timestamp),_a.timestamp=p,_a.isProcessing=!0,_R.update.process(_a),_R.preRender.process(_a),_R.render.process(_a),_a.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,dO.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Pge),this.sharedNodes.forEach(Oge)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Zi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Zi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let o=0;o<this.path.length;o++)this.path[o].updateScroll();const h=this.layout;this.layout=this.measure(!1),this.layoutCorrected=hs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:p}=this.options;p&&p.notify("LayoutMeasure",this.layout.layoutBox,h?h.layoutBox:void 0)}updateScroll(h="measure"){let p=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===h&&(p=!1),p){const o=n(this.instance);this.scroll={animationId:this.root.animationId,phase:h,isRoot:o,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:o}}}resetTransform(){if(!i)return;const h=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,p=this.projectionDelta&&!ZW(this.projectionDelta),o=this.getTransformTemplate(),_=o?o(this.latestValues,""):void 0,C=_!==this.prevTransformTemplateValue;h&&(p||im(this.latestValues)||C)&&(i(this.instance,_),this.shouldResetTransform=!1,this.scheduleRender())}measure(h=!0){const p=this.measurePageBox();let o=this.removeElementScroll(p);return h&&(o=this.removeTransform(o)),Nge(o),{animationId:this.root.animationId,measuredBox:p,layoutBox:o,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:p}=this.options;if(!p)return hs();const o=p.measureViewportBox();if(!(((h=this.scroll)===null||h===void 0?void 0:h.wasRoot)||this.path.some(Qge))){const{scroll:C}=this.root;C&&($0(o.x,C.offset.x),$0(o.y,C.offset.y))}return o}removeElementScroll(h){var p;const o=hs();if(Qc(o,h),!((p=this.scroll)===null||p===void 0)&&p.wasRoot)return o;for(let _=0;_<this.path.length;_++){const C=this.path[_],{scroll:M,options:L}=C;C!==this.root&&M&&L.layoutScroll&&(M.wasRoot&&Qc(o,h),$0(o.x,M.offset.x),$0(o.y,M.offset.y))}return o}applyTransform(h,p=!1){const o=hs();Qc(o,h);for(let _=0;_<this.path.length;_++){const C=this.path[_];!p&&C.options.layoutScroll&&C.scroll&&C!==C.root&&ey(o,{x:-C.scroll.offset.x,y:-C.scroll.offset.y}),im(C.latestValues)&&ey(o,C.latestValues)}return im(this.latestValues)&&ey(o,this.latestValues),o}removeTransform(h){const p=hs();Qc(p,h);for(let o=0;o<this.path.length;o++){const _=this.path[o];if(!_.instance||!im(_.latestValues))continue;rD(_.latestValues)&&_.updateSnapshot();const C=hs(),M=_.measurePageBox();Qc(C,M),X3(p,_.latestValues,_.snapshot?_.snapshot.layoutBox:void 0,C)}return im(this.latestValues)&&X3(p,this.latestValues),p}setTargetDelta(h){this.targetDelta=h,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(h){this.options={...this.options,...h,crossfade:h.crossfade!==void 0?h.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_a.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(h=!1){var p;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const _=!!this.resumingFrom||this!==o;if(!(h||_&&this.isSharedProjectionDirty||this.isProjectionDirty||!((p=this.parent)===null||p===void 0)&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:M,layoutId:L}=this.options;if(!(!this.layout||!(M||L))){if(this.resolvedRelativeTargetAt=_a.timestamp,!this.targetDelta&&!this.relativeTarget){const z=this.getClosestProjectingParent();z&&z.layout&&this.animationProgress!==1?(this.relativeParent=z,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hs(),this.relativeTargetOrigin=hs(),Ax(this.relativeTargetOrigin,this.layout.layoutBox,z.layout.layoutBox),Qc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=hs(),this.targetWithTransforms=hs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Nme(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Qc(this.target,this.layout.layoutBox),HW(this.target,this.targetDelta)):Qc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const z=this.getClosestProjectingParent();z&&!!z.resumingFrom==!!this.resumingFrom&&!z.options.layoutScroll&&z.target&&this.animationProgress!==1?(this.relativeParent=z,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hs(),this.relativeTargetOrigin=hs(),Ax(this.relativeTargetOrigin,this.target,z.target),Qc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}P1&&om.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||rD(this.parent.latestValues)||QW(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var h;const p=this.getLead(),o=!!this.resumingFrom||this!==p;let _=!0;if((this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty)&&(_=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(_=!1),this.resolvedRelativeTargetAt===_a.timestamp&&(_=!1),_)return;const{layout:C,layoutId:M}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(C||M))return;Qc(this.layoutCorrected,this.layout.layoutBox);const L=this.treeScale.x,z=this.treeScale.y;Zme(this.layoutCorrected,this.treeScale,this.path,o),p.layout&&!p.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(p.target=p.layout.layoutBox,p.targetWithTransforms=hs());const{target:j}=p;if(!j){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(K3(this.prevProjectionDelta.x,this.projectionDelta.x),K3(this.prevProjectionDelta.y,this.projectionDelta.y)),hx(this.projectionDelta,this.layoutCorrected,j,this.latestValues),(this.treeScale.x!==L||this.treeScale.y!==z||!eQ(this.projectionDelta.x,this.prevProjectionDelta.x)||!eQ(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",j)),P1&&om.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(h=!0){var p;if((p=this.options.visualElement)===null||p===void 0||p.scheduleRender(),h){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=J0(),this.projectionDelta=J0(),this.projectionDeltaWithTransform=J0()}setAnimationOrigin(h,p=!1){const o=this.snapshot,_=o?o.latestValues:{},C={...this.latestValues},M=J0();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!p;const L=hs(),z=o?o.source:void 0,j=this.layout?this.layout.source:void 0,K=z!==j,$=this.getStack(),q=!$||$.members.length<=1,ee=!!(K&&!q&&this.options.crossfade===!0&&!this.path.some(zge));this.animationProgress=0;let ie;this.mixTargetDelta=fe=>{const me=fe/1e3;iQ(M.x,h.x,me),iQ(M.y,h.y,me),this.setTargetDelta(M),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ax(L,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Uge(this.relativeTarget,this.relativeTargetOrigin,L,me),ie&&gge(this.relativeTarget,ie)&&(this.isProjectionDirty=!1),ie||(ie=hs()),Qc(ie,this.relativeTarget)),K&&(this.animationValues=C,hge(C,_,this.latestValues,me,ee,q)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=me},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(h){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(qf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Zi.update(()=>{$S.hasAnimatedSinceResize=!0,this.currentAnimation=Bge(0,tQ,{...h,onUpdate:p=>{this.mixTargetDelta(p),h.onUpdate&&h.onUpdate(p)},onComplete:()=>{h.onComplete&&h.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const h=this.getStack();h&&h.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(tQ),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const h=this.getLead();let{targetWithTransforms:p,target:o,layout:_,latestValues:C}=h;if(!(!p||!o||!_)){if(this!==h&&this.layout&&_&&eq(this.options.animationType,this.layout.layoutBox,_.layoutBox)){o=this.target||hs();const M=mc(this.layout.layoutBox.x);o.x.min=h.target.x.min,o.x.max=o.x.min+M;const L=mc(this.layout.layoutBox.y);o.y.min=h.target.y.min,o.y.max=o.y.min+L}Qc(p,o),ey(p,C),hx(this.projectionDeltaWithTransform,this.layoutCorrected,p,C)}}registerSharedNode(h,p){this.sharedNodes.has(h)||this.sharedNodes.set(h,new yge),this.sharedNodes.get(h).add(p);const _=p.options.initialPromotionConfig;p.promote({transition:_?_.transition:void 0,preserveFollowOpacity:_&&_.shouldPreserveFollowOpacity?_.shouldPreserveFollowOpacity(p):void 0})}isLead(){const h=this.getStack();return h?h.lead===this:!0}getLead(){var h;const{layoutId:p}=this.options;return p?((h=this.getStack())===null||h===void 0?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:p}=this.options;return p?(h=this.getStack())===null||h===void 0?void 0:h.prevLead:void 0}getStack(){const{layoutId:h}=this.options;if(h)return this.root.sharedNodes.get(h)}promote({needsReset:h,transition:p,preserveFollowOpacity:o}={}){const _=this.getStack();_&&_.promote(this,o),h&&(this.projectionDelta=void 0,this.needsReset=!0),p&&this.setOptions({transition:p})}relegate(){const h=this.getStack();return h?h.relegate(this):!1}resetSkewAndRotation(){const{visualElement:h}=this.options;if(!h)return;let p=!1;const{latestValues:o}=h;if((o.z||o.rotate||o.rotateX||o.rotateY||o.rotateZ||o.skewX||o.skewY)&&(p=!0),!p)return;const _={};o.z&&IR("z",h,_,this.animationValues);for(let C=0;C<TR.length;C++)IR(`rotate${TR[C]}`,h,_,this.animationValues),IR(`skew${TR[C]}`,h,_,this.animationValues);h.render();for(const C in _)h.setStaticValue(C,_[C]),this.animationValues&&(this.animationValues[C]=_[C]);h.scheduleRender()}getProjectionStyles(h){var p,o;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Cge;const _={visibility:""},C=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,_.opacity="",_.pointerEvents=eE(h==null?void 0:h.pointerEvents)||"",_.transform=C?C(this.latestValues,""):"none",_;const M=this.getLead();if(!this.projectionDelta||!this.layout||!M.target){const K={};return this.options.layoutId&&(K.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,K.pointerEvents=eE(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!im(this.latestValues)&&(K.transform=C?C({},""):"none",this.hasProjected=!1),K}const L=M.animationValues||M.latestValues;this.applyTransformsToTarget(),_.transform=vge(this.projectionDeltaWithTransform,this.treeScale,L),C&&(_.transform=C(L,_.transform));const{x:z,y:j}=this.projectionDelta;_.transformOrigin=`${z.origin*100}% ${j.origin*100}% 0`,M.animationValues?_.opacity=M===this?(o=(p=L.opacity)!==null&&p!==void 0?p:this.latestValues.opacity)!==null&&o!==void 0?o:1:this.preserveOpacity?this.latestValues.opacity:L.opacityExit:_.opacity=M===this?L.opacity!==void 0?L.opacity:"":L.opacityExit!==void 0?L.opacityExit:0;for(const K in iT){if(L[K]===void 0)continue;const{correct:$,applyTo:q}=iT[K],ee=_.transform==="none"?L[K]:$(L[K],M);if(q){const ie=q.length;for(let fe=0;fe<ie;fe++)_[q[fe]]=ee}else _[K]=ee}return this.options.layoutId&&(_.pointerEvents=M===this?eE(h==null?void 0:h.pointerEvents)||"":"none"),_}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(h=>{var p;return(p=h.currentAnimation)===null||p===void 0?void 0:p.stop()}),this.root.nodes.forEach(rQ),this.root.sharedNodes.clear()}}}function Ege(e){e.updateLayout()}function Tge(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=e.layout,{animationType:l}=e.options,h=r.source!==e.layout.source;l==="size"?Xc(M=>{const L=h?r.measuredBox[M]:r.layoutBox[M],z=mc(L);L.min=n[M].min,L.max=L.min+z}):eq(l,r.layoutBox,n)&&Xc(M=>{const L=h?r.measuredBox[M]:r.layoutBox[M],z=mc(n[M]);L.max=L.min+z,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[M].max=e.relativeTarget[M].min+z)});const p=J0();hx(p,n,r.layoutBox);const o=J0();h?hx(o,e.applyTransform(i,!0),r.measuredBox):hx(o,n,r.layoutBox);const _=!ZW(p);let C=!1;if(!e.resumeFrom){const M=e.getClosestProjectingParent();if(M&&!M.resumeFrom){const{snapshot:L,layout:z}=M;if(L&&z){const j=hs();Ax(j,r.layoutBox,L.layoutBox);const K=hs();Ax(K,n,z.layoutBox),YW(j,K)||(C=!0),M.options.layoutRoot&&(e.relativeTarget=K,e.relativeTargetOrigin=j,e.relativeParent=M)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:o,layoutDelta:p,hasLayoutChanged:_,hasRelativeTargetChanged:C})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function Ige(e){P1&&om.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Fge(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Pge(e){e.clearSnapshot()}function rQ(e){e.clearMeasurements()}function Mge(e){e.isLayoutDirty=!1}function Rge(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function nQ(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function kge(e){e.resolveTargetDelta()}function Dge(e){e.calcProjection()}function Lge(e){e.resetSkewAndRotation()}function Oge(e){e.removeLeadSnapshot()}function iQ(e,t,r){e.translate=Qo(t.translate,0,r),e.scale=Qo(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function oQ(e,t,r,n){e.min=Qo(t.min,r.min,n),e.max=Qo(t.max,r.max,n)}function Uge(e,t,r,n){oQ(e.x,t.x,r.x,n),oQ(e.y,t.y,r.y,n)}function zge(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Vge={duration:.45,ease:[.4,0,.1,1]},sQ=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),aQ=sQ("applewebkit/")&&!sQ("chrome/")?Math.round:Ya;function lQ(e){e.min=aQ(e.min),e.max=aQ(e.max)}function Nge(e){lQ(e.x),lQ(e.y)}function eq(e,t,r){return e==="position"||e==="preserve-aspect"&&!Vme($3(t),$3(r),.2)}function Qge(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const Hge=$W({attachResizeListener:(e,t)=>jA(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),FR={current:void 0},tq=$W({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!FR.current){const e=new Hge({});e.mount(window),e.setOptions({layoutScroll:!0}),FR.current=e}return FR.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),jge={pan:{Feature:rge},drag:{Feature:tge,ProjectionNode:tq,MeasureLayout:WW}};function cQ(e,t){const r=t?"pointerenter":"pointerleave",n=t?"onHoverStart":"onHoverEnd",i=(l,h)=>{if(l.pointerType==="touch"||UW())return;const p=e.getProps();e.animationState&&p.whileHover&&e.animationState.setActive("whileHover",t);const o=p[n];o&&Zi.postRender(()=>o(l,h))};return ZA(e.current,r,i,{passive:!e.getProps()[n]})}class Gge extends cp{mount(){this.unmount=XA(cQ(this.node,!0),cQ(this.node,!1))}unmount(){}}class Kge extends cp{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=XA(jA(this.node.current,"focus",()=>this.onFocus()),jA(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const rq=(e,t)=>t?e===t?!0:rq(e,t.parentElement):!1;function PR(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,KI(r))}class Wge extends cp{constructor(){super(...arguments),this.removeStartListeners=Ya,this.removeEndListeners=Ya,this.removeAccessibleListeners=Ya,this.startPointerPress=(t,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),l=ZA(window,"pointerup",(p,o)=>{if(!this.checkPressEnd())return;const{onTap:_,onTapCancel:C,globalTapTarget:M}=this.node.getProps(),L=!M&&!rq(this.node.current,p.target)?C:_;L&&Zi.update(()=>L(p,o))},{passive:!(n.onTap||n.onPointerUp)}),h=ZA(window,"pointercancel",(p,o)=>this.cancelPress(p,o),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=XA(l,h),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=l=>{if(l.key!=="Enter"||this.isPressing)return;const h=p=>{p.key!=="Enter"||!this.checkPressEnd()||PR("up",(o,_)=>{const{onTap:C}=this.node.getProps();C&&Zi.postRender(()=>C(o,_))})};this.removeEndListeners(),this.removeEndListeners=jA(this.node.current,"keyup",h),PR("down",(p,o)=>{this.startPress(p,o)})},r=jA(this.node.current,"keydown",t),n=()=>{this.isPressing&&PR("cancel",(l,h)=>this.cancelPress(l,h))},i=jA(this.node.current,"blur",n);this.removeAccessibleListeners=XA(r,i)}}startPress(t,r){this.isPressing=!0;const{onTapStart:n,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Zi.postRender(()=>n(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!UW()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Zi.postRender(()=>n(t,r))}mount(){const t=this.node.getProps(),r=ZA(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=jA(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=XA(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const iD=new WeakMap,MR=new WeakMap,qge=e=>{const t=iD.get(e.target);t&&t(e)},Xge=e=>{e.forEach(qge)};function Zge({root:e,...t}){const r=e||document;MR.has(r)||MR.set(r,{});const n=MR.get(r),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(Xge,{root:e,...t})),n[i]}function Yge(e,t,r){const n=Zge(t);return iD.set(e,r),n.observe(e),()=>{iD.delete(e),n.unobserve(e)}}const Jge={some:0,all:1};class $ge extends cp{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:i="some",once:l}=t,h={root:r?r.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:Jge[i]},p=o=>{const{isIntersecting:_}=o;if(this.isInView===_||(this.isInView=_,l&&!_&&this.hasEnteredView))return;_&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",_);const{onViewportEnter:C,onViewportLeave:M}=this.node.getProps(),L=_?C:M;L&&L(o)};return Yge(this.node.current,h,p)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(e0e(t,r))&&this.startObserver()}unmount(){}}function e0e({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const t0e={inView:{Feature:$ge},tap:{Feature:Wge},focus:{Feature:Kge},hover:{Feature:Gge}},r0e={layout:{ProjectionNode:tq,MeasureLayout:WW}},fO=Re.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),WI=Re.createContext({}),pO=typeof window<"u",nq=pO?Re.useLayoutEffect:Re.useEffect,iq=Re.createContext({strict:!1});function n0e(e,t,r,n,i){var l,h;const{visualElement:p}=Re.useContext(WI),o=Re.useContext(iq),_=Re.useContext(Wb),C=Re.useContext(fO).reducedMotion,M=Re.useRef();n=n||o.renderer,!M.current&&n&&(M.current=n(e,{visualState:t,parent:p,props:r,presenceContext:_,blockInitialAnimation:_?_.initial===!1:!1,reducedMotionConfig:C}));const L=M.current,z=Re.useContext(KW);L&&!L.projection&&i&&(L.type==="html"||L.type==="svg")&&i0e(M.current,r,i,z),Re.useInsertionEffect(()=>{L&&L.update(r,_)});const j=r[TW],K=Re.useRef(!!j&&!(!((l=window.MotionHandoffIsComplete)===null||l===void 0)&&l.call(window,j))&&((h=window.MotionHasOptimisedAnimation)===null||h===void 0?void 0:h.call(window,j)));return nq(()=>{L&&(window.MotionIsMounted=!0,L.updateFeatures(),dO.render(L.render),K.current&&L.animationState&&L.animationState.animateChanges())}),Re.useEffect(()=>{L&&(!K.current&&L.animationState&&L.animationState.animateChanges(),K.current&&(queueMicrotask(()=>{var $;($=window.MotionHandoffMarkAsComplete)===null||$===void 0||$.call(window,j)}),K.current=!1))}),L}function i0e(e,t,r,n){const{layoutId:i,layout:l,drag:h,dragConstraints:p,layoutScroll:o,layoutRoot:_}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:oq(e.parent)),e.projection.setOptions({layoutId:i,layout:l,alwaysMeasureLayout:!!h||p&&Y0(p),visualElement:e,animationType:typeof l=="string"?l:"both",initialPromotionConfig:n,layoutScroll:o,layoutRoot:_})}function oq(e){if(e)return e.options.allowProjection!==!1?e.projection:oq(e.parent)}function o0e(e,t,r){return Re.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):Y0(r)&&(r.current=n))},[t])}function qI(e){return ib(e.animate)||WL.some(t=>ob(e[t]))}function sq(e){return!!(qI(e)||e.variants)}function s0e(e,t){if(qI(e)){const{initial:r,animate:n}=e;return{initial:r===!1||ob(r)?r:void 0,animate:ob(n)?n:void 0}}return e.inherit!==!1?t:{}}function a0e(e){const{initial:t,animate:r}=s0e(e,Re.useContext(WI));return Re.useMemo(()=>({initial:t,animate:r}),[uQ(t),uQ(r)])}function uQ(e){return Array.isArray(e)?e.join(" "):e}const hQ={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Oy={};for(const e in hQ)Oy[e]={isEnabled:t=>hQ[e].some(r=>!!t[r])};function l0e(e){for(const t in e)Oy[t]={...Oy[t],...e[t]}}const c0e=Symbol.for("motionComponentSymbol");function u0e({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:i}){e&&l0e(e);function l(p,o){let _;const C={...Re.useContext(fO),...p,layoutId:h0e(p)},{isStatic:M}=C,L=a0e(p),z=n(p,M);if(!M&&pO){A0e();const j=d0e(C);_=j.MeasureLayout,L.visualElement=n0e(i,z,C,t,j.ProjectionNode)}return $e.jsxs(WI.Provider,{value:L,children:[_&&L.visualElement?$e.jsx(_,{visualElement:L.visualElement,...C}):null,r(i,p,o0e(z,L.visualElement,o),z,M,L.visualElement)]})}const h=Re.forwardRef(l);return h[c0e]=i,h}function h0e({layoutId:e}){const t=Re.useContext(AO).id;return t&&e!==void 0?t+"-"+e:e}function A0e(e,t){Re.useContext(iq).strict}function d0e(e){const{drag:t,layout:r}=Oy;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const f0e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function mO(e){return typeof e!="string"||e.includes("-")?!1:!!(f0e.indexOf(e)>-1||/[A-Z]/u.test(e))}function aq(e,{style:t,vars:r},n,i){Object.assign(e.style,t,i&&i.getProjectionStyles(n));for(const l in r)e.style.setProperty(l,r[l])}const lq=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function cq(e,t,r,n){aq(e,t,void 0,n);for(const i in t.attrs)e.setAttribute(lq.has(i)?i:GI(i),t.attrs[i])}function uq(e,{layout:t,layoutId:r}){return lp.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!iT[e]||e==="opacity")}function gO(e,t,r){var n;const{style:i}=e,l={};for(const h in i)(Za(i[h])||t.style&&Za(t.style[h])||uq(h,e)||((n=r==null?void 0:r.getValue(h))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(l[h]=i[h]);return r&&i&&typeof i.willChange=="string"&&(r.applyWillChange=!1),l}function hq(e,t,r){const n=gO(e,t,r);for(const i in e)if(Za(e[i])||Za(t[i])){const l=jb.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[l]=e[i]}return n}function yO(e){const t=Re.useRef(null);return t.current===null&&(t.current=e()),t.current}function p0e({applyWillChange:e=!1,scrapeMotionValuesFromProps:t,createRenderState:r,onMount:n},i,l,h,p){const o={latestValues:m0e(i,l,h,p?!1:e,t),renderState:r()};return n&&(o.mount=_=>n(i,_,o)),o}const Aq=e=>(t,r)=>{const n=Re.useContext(WI),i=Re.useContext(Wb),l=()=>p0e(e,t,n,i,r);return r?l():yO(l)};function AQ(e,t,r){const n=Array.isArray(t)?t:[t];for(let i=0;i<n.length;i++){const l=GL(e,n[i]);if(l){const{transitionEnd:h,transition:p,...o}=l;r(o,h)}}}function m0e(e,t,r,n,i){var l;const h={};let p=n&&((l=e.style)===null||l===void 0?void 0:l.willChange)===void 0;const o=i(e,{});for(const K in o)h[K]=eE(o[K]);let{initial:_,animate:C}=e;const M=qI(e),L=sq(e);t&&L&&!M&&e.inherit!==!1&&(_===void 0&&(_=t.initial),C===void 0&&(C=t.animate));let z=r?r.initial===!1:!1;z=z||_===!1;const j=z?C:_;return j&&typeof j!="boolean"&&!ib(j)&&AQ(e,j,(K,$)=>{for(const q in K){let ee=K[q];if(Array.isArray(ee)){const ie=z?ee.length-1:0;ee=ee[ie]}ee!==null&&(h[q]=ee)}for(const q in $)h[q]=$[q]}),p&&C&&_!==!1&&!ib(C)&&AQ(e,C,K=>{for(const $ in K)if(FW($)){h.willChange="transform";return}}),h}const vO=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),dq=()=>({...vO(),attrs:{}}),fq=(e,t)=>t&&typeof e=="number"?t.transform(e):e,g0e={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},y0e=jb.length;function v0e(e,t,r){let n="",i=!0;for(let l=0;l<y0e;l++){const h=jb[l],p=e[h];if(p===void 0)continue;let o=!0;if(typeof p=="number"?o=p===(h.startsWith("scale")?1:0):o=parseFloat(p)===0,!o||r){const _=fq(p,tO[h]);if(!o){i=!1;const C=g0e[h]||h;n+=`${C}(${_}) `}r&&(t[h]=_)}}return n=n.trim(),r?n=r(t,i?"":n):i&&(n="none"),n}function _O(e,t,r){const{style:n,vars:i,transformOrigin:l}=e;let h=!1,p=!1;for(const o in t){const _=t[o];if(lp.has(o)){h=!0;continue}else if(iW(o)){i[o]=_;continue}else{const C=fq(_,tO[o]);o.startsWith("origin")?(p=!0,l[o]=C):n[o]=C}}if(t.transform||(h||r?n.transform=v0e(t,e.transform,r):n.transform&&(n.transform="none")),p){const{originX:o="50%",originY:_="50%",originZ:C=0}=l;n.transformOrigin=`${o} ${_} ${C}`}}function dQ(e,t,r){return typeof e=="string"?e:ln.transform(t+r*e)}function _0e(e,t,r){const n=dQ(t,e.x,e.width),i=dQ(r,e.y,e.height);return`${n} ${i}`}const x0e={offset:"stroke-dashoffset",array:"stroke-dasharray"},b0e={offset:"strokeDashoffset",array:"strokeDasharray"};function w0e(e,t,r=1,n=0,i=!0){e.pathLength=1;const l=i?x0e:b0e;e[l.offset]=ln.transform(-n);const h=ln.transform(t),p=ln.transform(r);e[l.array]=`${h} ${p}`}function xO(e,{attrX:t,attrY:r,attrScale:n,originX:i,originY:l,pathLength:h,pathSpacing:p=1,pathOffset:o=0,..._},C,M){if(_O(e,_,M),C){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:L,style:z,dimensions:j}=e;L.transform&&(j&&(z.transform=L.transform),delete L.transform),j&&(i!==void 0||l!==void 0||z.transform)&&(z.transformOrigin=_0e(j,i!==void 0?i:.5,l!==void 0?l:.5)),t!==void 0&&(L.x=t),r!==void 0&&(L.y=r),n!==void 0&&(L.scale=n),h!==void 0&&w0e(L,h,p,o,!1)}const bO=e=>typeof e=="string"&&e.toLowerCase()==="svg",B0e={useVisualState:Aq({scrapeMotionValuesFromProps:hq,createRenderState:dq,onMount:(e,t,{renderState:r,latestValues:n})=>{Zi.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),Zi.render(()=>{xO(r,n,bO(t.tagName),e.transformTemplate),cq(t,r)})}})},C0e={useVisualState:Aq({applyWillChange:!0,scrapeMotionValuesFromProps:gO,createRenderState:vO})};function pq(e,t,r){for(const n in t)!Za(t[n])&&!uq(n,r)&&(e[n]=t[n])}function S0e({transformTemplate:e},t){return Re.useMemo(()=>{const r=vO();return _O(r,t,e),Object.assign({},r.vars,r.style)},[t])}function E0e(e,t){const r=e.style||{},n={};return pq(n,r,e),Object.assign(n,S0e(e,t)),n}function T0e(e,t){const r={},n=E0e(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const I0e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function oT(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||I0e.has(e)}let mq=e=>!oT(e);function F0e(e){e&&(mq=t=>t.startsWith("on")?!oT(t):e(t))}try{F0e(require("@emotion/is-prop-valid").default)}catch{}function P0e(e,t,r){const n={};for(const i in e)i==="values"&&typeof e.values=="object"||(mq(i)||r===!0&&oT(i)||!t&&!oT(i)||e.draggable&&i.startsWith("onDrag"))&&(n[i]=e[i]);return n}function M0e(e,t,r,n){const i=Re.useMemo(()=>{const l=dq();return xO(l,t,bO(n),e.transformTemplate),{...l.attrs,style:{...l.style}}},[t]);if(e.style){const l={};pq(l,e.style,e),i.style={...l,...i.style}}return i}function R0e(e=!1){return(r,n,i,{latestValues:l},h)=>{const o=(mO(r)?M0e:T0e)(n,l,h,r),_=P0e(n,typeof r=="string",e),C=r!==Re.Fragment?{..._,...o,ref:i}:{},{children:M}=n,L=Re.useMemo(()=>Za(M)?M.get():M,[M]);return Re.createElement(r,{...C,children:L})}}function k0e(e,t){return function(n,{forwardMotionProps:i}={forwardMotionProps:!1}){const h={...mO(n)?B0e:C0e,preloadedFeatures:e,useRender:R0e(i),createVisualElement:t,Component:n};return u0e(h)}}const oD={current:null},gq={current:!1};function D0e(){if(gq.current=!0,!!pO)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>oD.current=e.matches;e.addListener(t),t()}else oD.current=!1}function L0e(e,t,r){for(const n in t){const i=t[n],l=r[n];if(Za(i))e.addValue(n,i);else if(Za(l))e.addValue(n,lb(i,{owner:e}));else if(l!==i)if(e.hasValue(n)){const h=e.getValue(n);h.liveStyle===!0?h.jump(i):h.hasAnimated||h.set(i)}else{const h=e.getStaticValue(n);e.addValue(n,lb(h!==void 0?h:i,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const fQ=new WeakMap,O0e=[...aW,Ga,Zf],U0e=e=>O0e.find(sW(e)),pQ=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class z0e{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:l,visualState:h},p={}){this.applyWillChange=!1,this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=JL,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const L=nA.now();this.renderScheduledAt<L&&(this.renderScheduledAt=L,Zi.render(this.render,!1,!0))};const{latestValues:o,renderState:_}=h;this.latestValues=o,this.baseTarget={...o},this.initialValues=r.initial?{...o}:{},this.renderState=_,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=p,this.blockInitialAnimation=!!l,this.isControllingVariants=qI(r),this.isVariantNode=sq(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:C,...M}=this.scrapeMotionValuesFromProps(r,{},this);for(const L in M){const z=M[L];o[L]!==void 0&&Za(z)&&z.set(o[L],!1)}}mount(t){this.current=t,fQ.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),gq.current||D0e(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:oD.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){fQ.delete(this.current),this.projection&&this.projection.unmount(),qf(this.notifyUpdate),qf(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=lp.has(t),i=r.on("change",p=>{this.latestValues[t]=p,this.props.onUpdate&&Zi.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),l=r.on("renderRequest",this.scheduleRender);let h;window.MotionCheckAppearSync&&(h=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{i(),l(),h&&h(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Oy){const r=Oy[t];if(!r)continue;const{isEnabled:n,Feature:i}=r;if(!this.features[t]&&i&&n(this.props)&&(this.features[t]=new i(this)),this.features[t]){const l=this.features[t];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):hs()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<pQ.length;n++){const i=pQ[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const l="on"+i,h=t[l];h&&(this.propEventSubscriptions[i]=this.on(i,h))}this.prevMotionValues=L0e(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=lb(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){var n;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(rW(i)||tW(i))?i=parseFloat(i):!U0e(i)&&Zf.test(r)&&(i=pW(t,r)),this.setBaseTarget(t,Za(i)?i.get():i)),Za(i)?i.get():i}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const h=GL(this.props,n,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);h&&(i=h[t])}if(n&&i!==void 0)return i;const l=this.getBaseTargetFromProps(this.props,t);return l!==void 0&&!Za(l)?l:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new hO),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class yq extends z0e{constructor(){super(...arguments),this.KeyframeResolver=mW}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}}function V0e(e){return window.getComputedStyle(e)}class N0e extends yq{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=aq}readValueFromInstance(t,r){if(lp.has(r)){const n=rO(r);return n&&n.default||0}else{const n=V0e(t),i=(iW(r)?n.getPropertyValue(r):n[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:r}){return jW(t,r)}build(t,r,n){_O(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return gO(t,r,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Za(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}class Q0e extends yq{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=hs}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(lp.has(r)){const n=rO(r);return n&&n.default||0}return r=lq.has(r)?r:GI(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return hq(t,r,n)}build(t,r,n){xO(t,r,this.isSVGTag,n.transformTemplate)}renderInstance(t,r,n,i){cq(t,r,n,i)}mount(t){this.isSVGTag=bO(t.tagName),super.mount(t)}}const H0e=(e,t)=>mO(e)?new Q0e(t):new N0e(t,{allowProjection:e!==Re.Fragment}),j0e=k0e({...Pme,...t0e,...jge,...r0e},H0e),G0e=wfe(j0e);class K0e extends Re.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function W0e({children:e,isPresent:t}){const r=Re.useId(),n=Re.useRef(null),i=Re.useRef({width:0,height:0,top:0,left:0}),{nonce:l}=Re.useContext(fO);return Re.useInsertionEffect(()=>{const{width:h,height:p,top:o,left:_}=i.current;if(t||!n.current||!h||!p)return;n.current.dataset.motionPopId=r;const C=document.createElement("style");return l&&(C.nonce=l),document.head.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${p}px !important;
            top: ${o}px !important;
            left: ${_}px !important;
          }
        `),()=>{document.head.removeChild(C)}},[t]),$e.jsx(K0e,{isPresent:t,childRef:n,sizeRef:i,children:Re.cloneElement(e,{ref:n})})}const q0e=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:i,presenceAffectsLayout:l,mode:h})=>{const p=yO(X0e),o=Re.useId(),_=Re.useCallback(M=>{p.set(M,!0);for(const L of p.values())if(!L)return;n&&n()},[p,n]),C=Re.useMemo(()=>({id:o,initial:t,isPresent:r,custom:i,onExitComplete:_,register:M=>(p.set(M,!1),()=>p.delete(M))}),l?[Math.random(),_]:[r,_]);return Re.useMemo(()=>{p.forEach((M,L)=>p.set(L,!1))},[r]),Re.useEffect(()=>{!r&&!p.size&&n&&n()},[r]),h==="popLayout"&&(e=$e.jsx(W0e,{isPresent:r,children:e})),$e.jsx(Wb.Provider,{value:C,children:e})};function X0e(){return new Map}const FC=e=>e.key||"";function mQ(e){const t=[];return Re.Children.forEach(e,r=>{Re.isValidElement(r)&&t.push(r)}),t}const Z0e=({children:e,exitBeforeEnter:t,custom:r,initial:n=!0,onExitComplete:i,presenceAffectsLayout:l=!0,mode:h="sync"})=>{const p=Re.useMemo(()=>mQ(e),[e]),o=p.map(FC),_=Re.useRef(!0),C=Re.useRef(p),M=yO(()=>new Map),[L,z]=Re.useState(p),[j,K]=Re.useState(p);nq(()=>{_.current=!1,C.current=p;for(let ee=0;ee<j.length;ee++){const ie=FC(j[ee]);o.includes(ie)?M.delete(ie):M.get(ie)!==!0&&M.set(ie,!1)}},[j,o.length,o.join("-")]);const $=[];if(p!==L){let ee=[...p];for(let ie=0;ie<j.length;ie++){const fe=j[ie],me=FC(fe);o.includes(me)||(ee.splice(ie,0,fe),$.push(fe))}h==="wait"&&$.length&&(ee=$),K(mQ(ee)),z(p);return}const{forceRender:q}=Re.useContext(AO);return $e.jsx($e.Fragment,{children:j.map(ee=>{const ie=FC(ee),fe=p===j||o.includes(ie),me=()=>{if(M.has(ie))M.set(ie,!0);else return;let ye=!0;M.forEach(se=>{se||(ye=!1)}),ye&&(q==null||q(),K(C.current),i&&i())};return $e.jsx(q0e,{isPresent:fe,initial:!_.current||n?void 0:!1,custom:fe?void 0:r,presenceAffectsLayout:l,mode:h,onExitComplete:fe?void 0:me,children:ee},ie)})})},Y0e=(e,t)=>e.find(r=>r.id===t);function gQ(e,t){const r=vq(e,t),n=r?e[r].findIndex(i=>i.id===t):-1;return{position:r,index:n}}function vq(e,t){for(const[r,n]of Object.entries(e))if(Y0e(n,t))return r}function J0e(e){const t=e.includes("right"),r=e.includes("left");let n="center";return t&&(n="flex-end"),r&&(n="flex-start"),{display:"flex",flexDirection:"column",alignItems:n}}function $0e(e){const r=e==="top"||e==="bottom"?"0 auto":void 0,n=e.includes("top")?"env(safe-area-inset-top, 0px)":void 0,i=e.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,l=e.includes("left")?void 0:"env(safe-area-inset-right, 0px)",h=e.includes("right")?void 0:"env(safe-area-inset-left, 0px)";return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:r,top:n,bottom:i,right:l,left:h}}var eye=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,tye=TK(function(e){return eye.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),rye=tye,nye=function(t){return t!=="theme"},yQ=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?rye:nye},vQ=function(t,r,n){var i;if(r){var l=r.shouldForwardProp;i=t.__emotion_forwardProp&&l?function(h){return t.__emotion_forwardProp(h)&&l(h)}:l}return typeof i!="function"&&n&&(i=t.__emotion_forwardProp),i},iye=!1,oye=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return UL(r,n,i),OK(function(){return zL(r,n,i)}),null},sye=function e(t,r){var n=t.__emotion_real===t,i=n&&t.__emotion_base||t,l,h;r!==void 0&&(l=r.label,h=r.target);var p=vQ(t,r,n),o=p||yQ(i),_=!o("as");return function(){var C=arguments,M=n&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(l!==void 0&&M.push("label:"+l+";"),C[0]==null||C[0].raw===void 0)M.push.apply(M,C);else{M.push(C[0][0]);for(var L=C.length,z=1;z<L;z++)M.push(C[z],C[0][z])}var j=NI(function(K,$,q){var ee=_&&K.as||i,ie="",fe=[],me=K;if(K.theme==null){me={};for(var ye in K)me[ye]=K[ye];me.theme=Re.useContext(Om)}typeof K.className=="string"?ie=kK($.registered,fe,K.className):K.className!=null&&(ie=K.className+" ");var se=VI(M.concat(fe),$.registered,me);ie+=$.key+"-"+se.name,h!==void 0&&(ie+=" "+h);var re=_&&p===void 0?yQ(ee):o,de={};for(var _e in K)_&&_e==="as"||re(_e)&&(de[_e]=K[_e]);return de.className=ie,q&&(de.ref=q),Re.createElement(Re.Fragment,null,Re.createElement(oye,{cache:$,serialized:se,isStringTag:typeof ee=="string"}),Re.createElement(ee,de))});return j.displayName=l!==void 0?l:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",j.defaultProps=t.defaultProps,j.__emotion_real=j,j.__emotion_base=i,j.__emotion_styles=M,j.__emotion_forwardProp=p,Object.defineProperty(j,"toString",{value:function(){return h===void 0&&iye?"NO_COMPONENT_SELECTOR":"."+h}}),j.withComponent=function(K,$){return e(K,$r({},r,$,{shouldForwardProp:vQ(j,$,!0)})).apply(void 0,M)},j}},aye=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],cb=sye.bind();aye.forEach(function(e){cb[e]=cb(e)});const lye=new Set([...Cse({}),"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),cye=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function uye(e){return(cye.has(e)||!lye.has(e))&&e[0]!=="_"}const hye=Noe(cb),Aye=({baseStyle:e})=>t=>{const{theme:r,css:n,__css:i,sx:l,...h}=t,p=Sse(r),[o]=Goe(h,p),_=iu(e,t),C=Moe({},i,_,bI(o),l),M=aK(C)(t.theme);return n?[M,n]:M};function RR(e,t){const{baseStyle:r,...n}=t??{};n.shouldForwardProp||(n.shouldForwardProp=uye);const i=Aye({baseStyle:r}),l=hye(e,n)(i);return Re.forwardRef(function(o,_){const{children:C,...M}=o,{colorMode:L,forced:z}=jL(),j=z?L:void 0;return Re.createElement(l,{ref:_,"data-theme":j,...M},C)})}function dye(){const e=new Map;return new Proxy(RR,{apply(t,r,n){return RR(...n)},get(t,r){return e.has(r)||e.set(r,RR(r)),e.get(r)}})}const bi=dye(),fye={initial:e=>{const{position:t}=e,r=["top","bottom"].includes(t)?"y":"x";let n=["top-right","bottom-right"].includes(t)?1:-1;return t==="bottom"&&(n=1),{opacity:0,[r]:n*24}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},_q=Re.memo(e=>{const{id:t,message:r,onCloseComplete:n,onRequestRemove:i,requestClose:l=!1,position:h="bottom",duration:p=5e3,containerStyle:o,motionVariants:_=fye,toastSpacing:C="0.5rem"}=e,[M,L]=Re.useState(p),z=ige();CN(()=>{z||n==null||n()},[z]),CN(()=>{L(p)},[p]);const j=()=>L(null),K=()=>L(p),$=()=>{z&&i()};Re.useEffect(()=>{z&&l&&i()},[z,l,i]),Foe($,M);const q=Re.useMemo(()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:C,...o}),[o,C]),ee=Re.useMemo(()=>J0e(h),[h]);return $e.jsx(G0e.div,{layout:!0,className:"chakra-toast",variants:_,initial:"initial",animate:"animate",exit:"exit",onHoverStart:j,onHoverEnd:K,custom:{position:h},style:ee,children:$e.jsx(bi.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:q,children:iu(r,{id:t,onClose:$})})})});_q.displayName="ToastComponent";function Yi(e){return Re.forwardRef(e)}var pye=typeof Element<"u",mye=typeof Map=="function",gye=typeof Set=="function",yye=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function tE(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,i;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!tE(e[n],t[n]))return!1;return!0}var l;if(mye&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(l=e.entries();!(n=l.next()).done;)if(!t.has(n.value[0]))return!1;for(l=e.entries();!(n=l.next()).done;)if(!tE(n.value[1],t.get(n.value[0])))return!1;return!0}if(gye&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(l=e.entries();!(n=l.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(yye&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[n]))return!1;if(pye&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((i[n]==="_owner"||i[n]==="__v"||i[n]==="__o")&&e.$$typeof)&&!tE(e[i[n]],t[i[n]]))return!1;return!0}return e!==e&&t!==t}var vye=function(t,r){try{return tE(t,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const xq=Lb(vye);function _ye(){const e=Re.useContext(Om);if(!e)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return e}function bq(){const e=jL(),t=_ye();return{...e,theme:t}}function wq(e,t={}){const{styleConfig:r,...n}=t,{theme:i,colorMode:l}=bq(),h=e?tK(i,`components.${e}`):void 0,p=r||h,o=Os({theme:i,colorMode:l},(p==null?void 0:p.defaultProps)??{},bI(rK(n,["children"]))),_=Re.useRef({});if(p){const M=Lse(p)(o);xq(_.current,M)||(_.current=M)}return _.current}function tv(e,t={}){return wq(e,t)}function qb(e,t={}){return wq(e,t)}const _Q={path:$e.jsxs("g",{stroke:"currentColor",strokeWidth:"1.5",children:[$e.jsx("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),$e.jsx("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),$e.jsx("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},rv=Yi((e,t)=>{const{as:r,viewBox:n,color:i="currentColor",focusable:l=!1,children:h,className:p,__css:o,..._}=e,C=Vs("chakra-icon",p),M=tv("Icon",e),L={w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:i,...o,...M},z={ref:t,focusable:l,className:C,__css:L},j=n??_Q.viewBox;if(r&&typeof r!="string")return $e.jsx(bi.svg,{as:r,...z,..._});const K=h??_Q.path;return $e.jsx(bi.svg,{verticalAlign:"middle",viewBox:j,...z,..._,children:K})});rv.displayName="Icon";function xye(e){return $e.jsx(rv,{viewBox:"0 0 24 24",...e,children:$e.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})}function bye(e){return $e.jsx(rv,{viewBox:"0 0 24 24",...e,children:$e.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})}function xQ(e){return $e.jsx(rv,{viewBox:"0 0 24 24",...e,children:$e.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}const wye=QL({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),wO=Yi((e,t)=>{const r=tv("Spinner",e),{label:n="Loading...",thickness:i="2px",speed:l="0.45s",emptyColor:h="transparent",className:p,...o}=uA(e),_=Vs("chakra-spinner",p),C={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:i,borderBottomColor:h,borderLeftColor:h,animation:`${wye} ${l} linear infinite`,...r};return $e.jsx(bi.div,{ref:t,__css:C,className:_,...o,children:n&&$e.jsx(bi.span,{srOnly:!0,children:n})})});wO.displayName="Spinner";const[Bye,BO]=lh({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[Cye,CO]=lh({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),Bq={info:{icon:bye,colorScheme:"blue"},warning:{icon:xQ,colorScheme:"orange"},success:{icon:xye,colorScheme:"green"},error:{icon:xQ,colorScheme:"red"},loading:{icon:wO,colorScheme:"blue"}};function Sye(e){return Bq[e].colorScheme}function Eye(e){return Bq[e].icon}const Cq=Yi(function(t,r){const{status:n="info",addRole:i=!0,...l}=uA(t),h=t.colorScheme??Sye(n),p=qb("Alert",{...t,colorScheme:h}),o={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...p.container};return $e.jsx(Bye,{value:{status:n},children:$e.jsx(Cye,{value:p,children:$e.jsx(bi.div,{"data-status":n,role:i?"alert":void 0,ref:r,...l,className:Vs("chakra-alert",t.className),__css:o})})})});Cq.displayName="Alert";function Sq(e){const{status:t}=BO(),r=Eye(t),n=CO(),i=t==="loading"?n.spinner:n.icon;return $e.jsx(bi.span,{display:"inherit","data-status":t,...e,className:Vs("chakra-alert__icon",e.className),__css:i,children:e.children||$e.jsx(r,{h:"100%",w:"100%"})})}Sq.displayName="AlertIcon";const Eq=Yi(function(t,r){const n=CO(),{status:i}=BO();return $e.jsx(bi.div,{ref:r,"data-status":i,...t,className:Vs("chakra-alert__title",t.className),__css:n.title})});Eq.displayName="AlertTitle";const Tq=Yi(function(t,r){const{status:n}=BO(),i=CO(),l={display:"inline",...i.description};return $e.jsx(bi.div,{ref:r,"data-status":n,...t,className:Vs("chakra-alert__desc",t.className),__css:l})});Tq.displayName="AlertDescription";function Tye(e){return $e.jsx(rv,{focusable:"false","aria-hidden":!0,...e,children:$e.jsx("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}const Iq=Yi(function(t,r){const n=tv("CloseButton",t),{children:i,isDisabled:l,__css:h,...p}=uA(t),o={outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0};return $e.jsx(bi.button,{type:"button","aria-label":"Close",ref:r,disabled:l,__css:{...o,...n,...h},...p,children:i||$e.jsx(Tye,{width:"1em",height:"1em"})})});Iq.displayName="CloseButton";const Iye=e=>{const{status:t,variant:r="solid",id:n,title:i,isClosable:l,onClose:h,description:p,colorScheme:o,icon:_}=e,C=n?{root:`toast-${n}`,title:`toast-${n}-title`,description:`toast-${n}-description`}:void 0;return $e.jsxs(Cq,{addRole:!1,status:t,variant:r,id:C==null?void 0:C.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:o,children:[$e.jsx(Sq,{children:_}),$e.jsxs(bi.div,{flex:"1",maxWidth:"100%",children:[i&&$e.jsx(Eq,{id:C==null?void 0:C.title,children:i}),p&&$e.jsx(Tq,{id:C==null?void 0:C.description,display:"block",children:p})]}),l&&$e.jsx(Iq,{size:"sm",onClick:h,position:"absolute",insetEnd:1,top:1})]})};function Fq(e={}){const{render:t,toastComponent:r=Iye}=e;return i=>typeof t=="function"?t({...i,...e}):$e.jsx(r,{...i,...e})}const Fye={top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]},Kh=Pye(Fye);function Pye(e){let t=e;const r=new Set,n=i=>{t=i(t),r.forEach(l=>l())};return{getState:()=>t,subscribe:i=>(r.add(i),()=>{n(()=>e),r.delete(i)}),removeToast:(i,l)=>{n(h=>({...h,[l]:h[l].filter(p=>p.id!=i)}))},notify:(i,l)=>{const h=Mye(i,l),{position:p,id:o}=h;return n(_=>{const M=p.includes("top")?[h,..._[p]??[]]:[..._[p]??[],h];return{..._,[p]:M}}),o},update:(i,l)=>{i&&n(h=>{const p={...h},{position:o,index:_}=gQ(p,i);return o&&_!==-1&&(p[o][_]={...p[o][_],...l,message:Fq(l)}),p})},closeAll:({positions:i}={})=>{n(l=>(i??["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((o,_)=>(o[_]=l[_].map(C=>({...C,requestClose:!0})),o),{...l}))},close:i=>{n(l=>{const h=vq(l,i);return h?{...l,[h]:l[h].map(p=>p.id==i?{...p,requestClose:!0}:p)}:l})},isActive:i=>!!gQ(Kh.getState(),i).position}}let bQ=0;function Mye(e,t={}){bQ+=1;const r=t.id??bQ,n=t.position??"bottom";return{id:r,message:e,position:n,duration:t.duration,onCloseComplete:t.onCloseComplete,onRequestRemove:()=>Kh.removeToast(String(r),n),status:t.status,requestClose:!1,containerStyle:t.containerStyle}}const[Pq,Rye]=lh({strict:!1,name:"PortalContext"}),SO="chakra-portal",kye=".chakra-portal",Dye=e=>$e.jsx("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:e.zIndex,top:0,left:0,right:0},children:e.children}),Lye=e=>{const{appendToParentPortal:t,children:r}=e,[n,i]=Re.useState(null),l=Re.useRef(null),[,h]=Re.useState({});Re.useEffect(()=>h({}),[]);const p=Rye(),o=xfe();I4(()=>{if(!n)return;const C=n.ownerDocument,M=t?p??C.body:C.body;if(!M)return;l.current=C.createElement("div"),l.current.className=SO,M.appendChild(l.current),h({});const L=l.current;return()=>{M.contains(L)&&M.removeChild(L)}},[n]);const _=o!=null&&o.zIndex?$e.jsx(Dye,{zIndex:o==null?void 0:o.zIndex,children:r}):r;return l.current?xI.createPortal($e.jsx(Pq,{value:l.current,children:_}),l.current):$e.jsx("span",{ref:C=>{C&&i(C)}})},Oye=e=>{const{children:t,containerRef:r,appendToParentPortal:n}=e,i=r.current,l=i??(typeof window<"u"?document.body:void 0),h=Re.useMemo(()=>{const o=i==null?void 0:i.ownerDocument.createElement("div");return o&&(o.className=SO),o},[i]),[,p]=Re.useState({});return I4(()=>p({}),[]),I4(()=>{if(!(!h||!l))return l.appendChild(h),()=>{l.removeChild(h)}},[h,l]),l&&h?xI.createPortal($e.jsx(Pq,{value:n?h:null,children:t}),h):null};function XI(e){const t={appendToParentPortal:!0,...e},{containerRef:r,...n}=t;return r?$e.jsx(Oye,{containerRef:r,...n}):$e.jsx(Lye,{...n})}XI.className=SO;XI.selector=kye;XI.displayName="Portal";const[Uye,zye]=lh({name:"ToastOptionsContext",strict:!1}),Vye=e=>{const t=Re.useSyncExternalStore(Kh.subscribe,Kh.getState,Kh.getState),{motionVariants:r,component:n=_q,portalProps:i,animatePresenceProps:l}=e,p=Object.keys(t).map(o=>{const _=t[o];return $e.jsx("div",{role:"region","aria-live":"polite","aria-label":`Notifications-${o}`,id:`chakra-toast-manager-${o}`,style:$0e(o),children:$e.jsx(Z0e,{...l,initial:!1,children:_.map(C=>$e.jsx(n,{motionVariants:r,...C},C.id))})},o)});return $e.jsx(XI,{...i,children:p})},Nye=e=>function({children:r,theme:n=e,toastOptions:i,...l}){return $e.jsxs(bfe,{theme:n,...l,children:[$e.jsx(Uye,{value:i==null?void 0:i.defaultOptions,children:r}),$e.jsx(Vye,{...i})]})},Qye=Nye(lde),Of=bi("div");Of.displayName="Box";const[e5e,Hye]=lh({strict:!1,name:"ButtonGroupContext"});function M1(e){const{children:t,className:r,...n}=e,i=Re.isValidElement(t)?Re.cloneElement(t,{"aria-hidden":!0,focusable:!1}):t,l=Vs("chakra-button__icon",r);return $e.jsx(bi.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...n,className:l,children:i})}M1.displayName="ButtonIcon";function sD(e){const{label:t,placement:r,spacing:n="0.5rem",children:i=$e.jsx(wO,{color:"currentColor",width:"1em",height:"1em"}),className:l,__css:h,...p}=e,o=Vs("chakra-button__spinner",l),_=r==="start"?"marginEnd":"marginStart",C=Re.useMemo(()=>({display:"flex",alignItems:"center",position:t?"relative":"absolute",[_]:t?n:0,fontSize:"1em",lineHeight:"normal",...h}),[h,t,_,n]);return $e.jsx(bi.div,{className:o,...p,__css:C,children:i})}sD.displayName="ButtonSpinner";function jye(e){const[t,r]=Re.useState(!e);return{ref:Re.useCallback(l=>{l&&r(l.tagName==="BUTTON")},[]),type:t?"button":void 0}}const Nh=Yi((e,t)=>{const r=Hye(),n=tv("Button",{...r,...e}),{isDisabled:i=r==null?void 0:r.isDisabled,isLoading:l,isActive:h,children:p,leftIcon:o,rightIcon:_,loadingText:C,iconSpacing:M="0.5rem",type:L,spinner:z,spinnerPlacement:j="start",className:K,as:$,shouldWrapChildren:q,...ee}=uA(e),ie=Re.useMemo(()=>{const se={...n==null?void 0:n._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...n,...!!r&&{_focus:se}}},[n,r]),{ref:fe,type:me}=jye($),ye={rightIcon:_,leftIcon:o,iconSpacing:M,children:p,shouldWrapChildren:q};return $e.jsxs(bi.button,{disabled:i||l,ref:Ioe(t,fe),as:$,type:L??me,"data-active":Vh(h),"data-loading":Vh(l),__css:ie,className:Vs("chakra-button",K),...ee,children:[l&&j==="start"&&$e.jsx(sD,{className:"chakra-button__spinner--start",label:C,placement:"start",spacing:M,children:z}),l?C||$e.jsx(bi.span,{opacity:0,children:$e.jsx(wQ,{...ye})}):$e.jsx(wQ,{...ye}),l&&j==="end"&&$e.jsx(sD,{className:"chakra-button__spinner--end",label:C,placement:"end",spacing:M,children:z})]})});Nh.displayName="Button";function wQ(e){const{leftIcon:t,rightIcon:r,children:n,iconSpacing:i,shouldWrapChildren:l}=e;return l?$e.jsxs("span",{style:{display:"contents"},children:[t&&$e.jsx(M1,{marginEnd:i,children:t}),n,r&&$e.jsx(M1,{marginStart:i,children:r})]}):$e.jsxs($e.Fragment,{children:[t&&$e.jsx(M1,{marginEnd:i,children:t}),n,r&&$e.jsx(M1,{marginStart:i,children:r})]})}const Mq=Yi((e,t)=>{const{icon:r,children:n,isRound:i,"aria-label":l,...h}=e,p=r||n,o=Re.isValidElement(p)?Re.cloneElement(p,{"aria-hidden":!0,focusable:!1}):null;return $e.jsx(Nh,{px:"0",py:"0",borderRadius:i?"full":void 0,ref:t,"aria-label":l,...h,children:o})});Mq.displayName="IconButton";const[Gye,Kye]=lh({name:"FormControlStylesContext",errorMessage:`useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormControl />" `}),[Wye,Rq]=lh({strict:!1,name:"FormControlContext"});function qye(e){const{id:t,isRequired:r,isInvalid:n,isDisabled:i,isReadOnly:l,...h}=e,p=Re.useId(),o=t||`field-${p}`,_=`${o}-label`,C=`${o}-feedback`,M=`${o}-helptext`,[L,z]=Re.useState(!1),[j,K]=Re.useState(!1),[$,q]=Re.useState(!1),ee=Re.useCallback((se={},re=null)=>({id:M,...se,ref:F4(re,de=>{de&&K(!0)})}),[M]),ie=Re.useCallback((se={},re=null)=>({...se,ref:re,"data-focus":Vh($),"data-disabled":Vh(i),"data-invalid":Vh(n),"data-readonly":Vh(l),id:se.id!==void 0?se.id:_,htmlFor:se.htmlFor!==void 0?se.htmlFor:o}),[o,i,$,n,l,_]),fe=Re.useCallback((se={},re=null)=>({id:C,...se,ref:F4(re,de=>{de&&z(!0)}),"aria-live":"polite"}),[C]),me=Re.useCallback((se={},re=null)=>({...se,...h,ref:re,role:"group","data-focus":Vh($),"data-disabled":Vh(i),"data-invalid":Vh(n),"data-readonly":Vh(l)}),[h,i,$,n,l]),ye=Re.useCallback((se={},re=null)=>({...se,ref:re,role:"presentation","aria-hidden":!0,children:se.children||"*"}),[]);return{isRequired:!!r,isInvalid:!!n,isReadOnly:!!l,isDisabled:!!i,isFocused:!!$,onFocus:()=>q(!0),onBlur:()=>q(!1),hasFeedbackText:L,setHasFeedbackText:z,hasHelpText:j,setHasHelpText:K,id:o,labelId:_,feedbackId:C,helpTextId:M,htmlProps:h,getHelpTextProps:ee,getErrorMessageProps:fe,getRootProps:me,getLabelProps:ie,getRequiredIndicatorProps:ye}}const Xye=Yi(function(t,r){const n=qb("Form",t),i=uA(t),{getRootProps:l,htmlProps:h,...p}=qye(i),o=Vs("chakra-form-control",t.className);return $e.jsx(Wye,{value:p,children:$e.jsx(Gye,{value:n,children:$e.jsx(bi.div,{...l({},r),className:o,__css:n.container})})})});Xye.displayName="FormControl";const Zye=Yi(function(t,r){const n=Rq(),i=Kye(),l=Vs("chakra-form__helper-text",t.className);return $e.jsx(bi.div,{...n==null?void 0:n.getHelpTextProps(t,r),__css:i.helperText,className:l})});Zye.displayName="FormHelperText";function Yye(e){const{isDisabled:t,isInvalid:r,isReadOnly:n,isRequired:i,...l}=Jye(e);return{...l,disabled:t,readOnly:n,required:i,"aria-invalid":tR(r),"aria-required":tR(i),"aria-readonly":tR(n)}}function Jye(e){const t=Rq(),{id:r,disabled:n,readOnly:i,required:l,isRequired:h,isInvalid:p,isReadOnly:o,isDisabled:_,onFocus:C,onBlur:M,...L}=e,z=e["aria-describedby"]?[e["aria-describedby"]]:[];return t!=null&&t.hasFeedbackText&&(t!=null&&t.isInvalid)&&z.push(t.feedbackId),t!=null&&t.hasHelpText&&z.push(t.helpTextId),{...L,"aria-describedby":z.join(" ")||void 0,id:r??(t==null?void 0:t.id),isDisabled:n??_??(t==null?void 0:t.isDisabled),isReadOnly:i??o??(t==null?void 0:t.isReadOnly),isRequired:l??h??(t==null?void 0:t.isRequired),isInvalid:p??(t==null?void 0:t.isInvalid),onFocus:TN(t==null?void 0:t.onFocus,C),onBlur:TN(t==null?void 0:t.onBlur,M)}}const EO=Yi(function(t,r){const{direction:n,align:i,justify:l,wrap:h,basis:p,grow:o,shrink:_,...C}=t,M={display:"flex",flexDirection:n,alignItems:i,justifyContent:l,flexWrap:h,flexBasis:p,flexGrow:o,flexShrink:_};return $e.jsx(bi.div,{ref:r,__css:M,...C})});EO.displayName="Flex";function $ye(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}var kq={exports:{}},eve="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",tve=eve,rve=tve;function Dq(){}function Lq(){}Lq.resetWarningCache=Dq;var nve=function(){function e(n,i,l,h,p,o){if(o!==rve){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Lq,resetWarningCache:Dq};return r.PropTypes=r,r};kq.exports=nve();var Oq=kq.exports;function aD(e,t){return aD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},aD(e,t)}function Um(e){"@babel/helpers - typeof";return Um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Um(e)}function ive(e,t){if(Um(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Um(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uq(e){var t=ive(e,"string");return Um(t)=="symbol"?t:t+""}function ty(e,t,r){return(t=Uq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ove(e){const{viewBox:t="0 0 24 24",d:r,displayName:n,defaultProps:i={}}=e,l=Re.Children.toArray(e.path),h=Yi((p,o)=>$e.jsx(rv,{ref:o,viewBox:t,...i,...p,children:l.length?l:$e.jsx("path",{fill:"currentColor",d:r})}));return h.displayName=n,h}const TO=Yi(function(t,r){const{htmlSize:n,...i}=t,l=qb("Input",i),h=uA(i),p=Yye(h),o=Vs("chakra-input",t.className);return $e.jsx(bi.input,{size:n,...p,__css:l.field,ref:r,className:o})});TO.displayName="Input";TO.id="Input";const[sve,ave]=lh({name:"InputGroupStylesContext",errorMessage:`useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in "<InputGroup />" `}),zq=Yi(function(t,r){const n=qb("Input",t),{children:i,className:l,...h}=uA(t),p=Vs("chakra-input__group",l),o={},_=eK(i),C=n.field;_.forEach(L=>{n&&(C&&L.type.id==="InputLeftElement"&&(o.paddingStart=C.height??C.h),C&&L.type.id==="InputRightElement"&&(o.paddingEnd=C.height??C.h),L.type.id==="InputRightAddon"&&(o.borderEndRadius=0),L.type.id==="InputLeftAddon"&&(o.borderStartRadius=0))});const M=_.map(L=>{var j,K;const z=bI({size:((j=L.props)==null?void 0:j.size)||t.size,variant:((K=L.props)==null?void 0:K.variant)||t.variant});return L.type.id!=="Input"?Re.cloneElement(L,z):Re.cloneElement(L,Object.assign(z,o,L.props))});return $e.jsx(bi.div,{className:p,ref:r,__css:{width:"100%",display:"flex",position:"relative",isolation:"isolate",...n.group},"data-group":!0,...h,children:$e.jsx(sve,{value:n,children:M})})});zq.displayName="InputGroup";const lve=bi("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),ZI=Yi(function(t,r){const{placement:n="left",...i}=t,l=ave(),h=l.field,o={[n==="left"?"insetStart":"insetEnd"]:"0",width:(h==null?void 0:h.height)??(h==null?void 0:h.h),height:(h==null?void 0:h.height)??(h==null?void 0:h.h),fontSize:h==null?void 0:h.fontSize,...l.element};return $e.jsx(lve,{ref:r,__css:o,...i})});ZI.id="InputElement";ZI.displayName="InputElement";const Vq=Yi(function(t,r){const{className:n,...i}=t,l=Vs("chakra-input__left-element",n);return $e.jsx(ZI,{ref:r,placement:"left",className:l,...i})});Vq.id="InputLeftElement";Vq.displayName="InputLeftElement";const IO=Yi(function(t,r){const{className:n,...i}=t,l=Vs("chakra-input__right-element",n);return $e.jsx(ZI,{ref:r,placement:"right",className:l,...i})});IO.id="InputRightElement";IO.displayName="InputRightElement";var Hl="top",mu="bottom",gu="right",jl="left",FO="auto",Xb=[Hl,mu,gu,jl],Uy="start",ub="end",cve="clippingParents",Nq="viewport",r1="popper",uve="reference",BQ=Xb.reduce(function(e,t){return e.concat([t+"-"+Uy,t+"-"+ub])},[]),Qq=[].concat(Xb,[FO]).reduce(function(e,t){return e.concat([t,t+"-"+Uy,t+"-"+ub])},[]),hve="beforeRead",Ave="read",dve="afterRead",fve="beforeMain",pve="main",mve="afterMain",gve="beforeWrite",yve="write",vve="afterWrite",_ve=[hve,Ave,dve,fve,pve,mve,gve,yve,vve];function oA(e){return e?(e.nodeName||"").toLowerCase():null}function gc(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function zm(e){var t=gc(e).Element;return e instanceof t||e instanceof Element}function hu(e){var t=gc(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function PO(e){if(typeof ShadowRoot>"u")return!1;var t=gc(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function xve(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},i=t.attributes[r]||{},l=t.elements[r];!hu(l)||!oA(l)||(Object.assign(l.style,n),Object.keys(i).forEach(function(h){var p=i[h];p===!1?l.removeAttribute(h):l.setAttribute(h,p===!0?"":p)}))})}function bve(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var i=t.elements[n],l=t.attributes[n]||{},h=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),p=h.reduce(function(o,_){return o[_]="",o},{});!hu(i)||!oA(i)||(Object.assign(i.style,p),Object.keys(l).forEach(function(o){i.removeAttribute(o)}))})}}const wve={name:"applyStyles",enabled:!0,phase:"write",fn:xve,effect:bve,requires:["computeStyles"]};function iA(e){return e.split("-")[0]}var Sm=Math.max,sT=Math.min,zy=Math.round;function lD(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Hq(){return!/^((?!chrome|android).)*safari/i.test(lD())}function Vy(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),i=1,l=1;t&&hu(e)&&(i=e.offsetWidth>0&&zy(n.width)/e.offsetWidth||1,l=e.offsetHeight>0&&zy(n.height)/e.offsetHeight||1);var h=zm(e)?gc(e):window,p=h.visualViewport,o=!Hq()&&r,_=(n.left+(o&&p?p.offsetLeft:0))/i,C=(n.top+(o&&p?p.offsetTop:0))/l,M=n.width/i,L=n.height/l;return{width:M,height:L,top:C,right:_+M,bottom:C+L,left:_,x:_,y:C}}function MO(e){var t=Vy(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function jq(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&PO(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function cd(e){return gc(e).getComputedStyle(e)}function Bve(e){return["table","td","th"].indexOf(oA(e))>=0}function up(e){return((zm(e)?e.ownerDocument:e.document)||window.document).documentElement}function YI(e){return oA(e)==="html"?e:e.assignedSlot||e.parentNode||(PO(e)?e.host:null)||up(e)}function CQ(e){return!hu(e)||cd(e).position==="fixed"?null:e.offsetParent}function Cve(e){var t=/firefox/i.test(lD()),r=/Trident/i.test(lD());if(r&&hu(e)){var n=cd(e);if(n.position==="fixed")return null}var i=YI(e);for(PO(i)&&(i=i.host);hu(i)&&["html","body"].indexOf(oA(i))<0;){var l=cd(i);if(l.transform!=="none"||l.perspective!=="none"||l.contain==="paint"||["transform","perspective"].indexOf(l.willChange)!==-1||t&&l.willChange==="filter"||t&&l.filter&&l.filter!=="none")return i;i=i.parentNode}return null}function Zb(e){for(var t=gc(e),r=CQ(e);r&&Bve(r)&&cd(r).position==="static";)r=CQ(r);return r&&(oA(r)==="html"||oA(r)==="body"&&cd(r).position==="static")?t:r||Cve(e)||t}function RO(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function dx(e,t,r){return Sm(e,sT(t,r))}function Sve(e,t,r){var n=dx(e,t,r);return n>r?r:n}function Gq(){return{top:0,right:0,bottom:0,left:0}}function Kq(e){return Object.assign({},Gq(),e)}function Wq(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var Eve=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,Kq(typeof t!="number"?t:Wq(t,Xb))};function Tve(e){var t,r=e.state,n=e.name,i=e.options,l=r.elements.arrow,h=r.modifiersData.popperOffsets,p=iA(r.placement),o=RO(p),_=[jl,gu].indexOf(p)>=0,C=_?"height":"width";if(!(!l||!h)){var M=Eve(i.padding,r),L=MO(l),z=o==="y"?Hl:jl,j=o==="y"?mu:gu,K=r.rects.reference[C]+r.rects.reference[o]-h[o]-r.rects.popper[C],$=h[o]-r.rects.reference[o],q=Zb(l),ee=q?o==="y"?q.clientHeight||0:q.clientWidth||0:0,ie=K/2-$/2,fe=M[z],me=ee-L[C]-M[j],ye=ee/2-L[C]/2+ie,se=dx(fe,ye,me),re=o;r.modifiersData[n]=(t={},t[re]=se,t.centerOffset=se-ye,t)}}function Ive(e){var t=e.state,r=e.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||jq(t.elements.popper,i)&&(t.elements.arrow=i))}const Fve={name:"arrow",enabled:!0,phase:"main",fn:Tve,effect:Ive,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ny(e){return e.split("-")[1]}var Pve={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Mve(e,t){var r=e.x,n=e.y,i=t.devicePixelRatio||1;return{x:zy(r*i)/i||0,y:zy(n*i)/i||0}}function SQ(e){var t,r=e.popper,n=e.popperRect,i=e.placement,l=e.variation,h=e.offsets,p=e.position,o=e.gpuAcceleration,_=e.adaptive,C=e.roundOffsets,M=e.isFixed,L=h.x,z=L===void 0?0:L,j=h.y,K=j===void 0?0:j,$=typeof C=="function"?C({x:z,y:K}):{x:z,y:K};z=$.x,K=$.y;var q=h.hasOwnProperty("x"),ee=h.hasOwnProperty("y"),ie=jl,fe=Hl,me=window;if(_){var ye=Zb(r),se="clientHeight",re="clientWidth";if(ye===gc(r)&&(ye=up(r),cd(ye).position!=="static"&&p==="absolute"&&(se="scrollHeight",re="scrollWidth")),ye=ye,i===Hl||(i===jl||i===gu)&&l===ub){fe=mu;var de=M&&ye===me&&me.visualViewport?me.visualViewport.height:ye[se];K-=de-n.height,K*=o?1:-1}if(i===jl||(i===Hl||i===mu)&&l===ub){ie=gu;var _e=M&&ye===me&&me.visualViewport?me.visualViewport.width:ye[re];z-=_e-n.width,z*=o?1:-1}}var ve=Object.assign({position:p},_&&Pve),Pe=C===!0?Mve({x:z,y:K},gc(r)):{x:z,y:K};if(z=Pe.x,K=Pe.y,o){var Ee;return Object.assign({},ve,(Ee={},Ee[fe]=ee?"0":"",Ee[ie]=q?"0":"",Ee.transform=(me.devicePixelRatio||1)<=1?"translate("+z+"px, "+K+"px)":"translate3d("+z+"px, "+K+"px, 0)",Ee))}return Object.assign({},ve,(t={},t[fe]=ee?K+"px":"",t[ie]=q?z+"px":"",t.transform="",t))}function Rve(e){var t=e.state,r=e.options,n=r.gpuAcceleration,i=n===void 0?!0:n,l=r.adaptive,h=l===void 0?!0:l,p=r.roundOffsets,o=p===void 0?!0:p,_={placement:iA(t.placement),variation:Ny(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,SQ(Object.assign({},_,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:h,roundOffsets:o})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,SQ(Object.assign({},_,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:o})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const kve={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Rve,data:{}};var PC={passive:!0};function Dve(e){var t=e.state,r=e.instance,n=e.options,i=n.scroll,l=i===void 0?!0:i,h=n.resize,p=h===void 0?!0:h,o=gc(t.elements.popper),_=[].concat(t.scrollParents.reference,t.scrollParents.popper);return l&&_.forEach(function(C){C.addEventListener("scroll",r.update,PC)}),p&&o.addEventListener("resize",r.update,PC),function(){l&&_.forEach(function(C){C.removeEventListener("scroll",r.update,PC)}),p&&o.removeEventListener("resize",r.update,PC)}}const Lve={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Dve,data:{}};var Ove={left:"right",right:"left",bottom:"top",top:"bottom"};function rE(e){return e.replace(/left|right|bottom|top/g,function(t){return Ove[t]})}var Uve={start:"end",end:"start"};function EQ(e){return e.replace(/start|end/g,function(t){return Uve[t]})}function kO(e){var t=gc(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function DO(e){return Vy(up(e)).left+kO(e).scrollLeft}function zve(e,t){var r=gc(e),n=up(e),i=r.visualViewport,l=n.clientWidth,h=n.clientHeight,p=0,o=0;if(i){l=i.width,h=i.height;var _=Hq();(_||!_&&t==="fixed")&&(p=i.offsetLeft,o=i.offsetTop)}return{width:l,height:h,x:p+DO(e),y:o}}function Vve(e){var t,r=up(e),n=kO(e),i=(t=e.ownerDocument)==null?void 0:t.body,l=Sm(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),h=Sm(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),p=-n.scrollLeft+DO(e),o=-n.scrollTop;return cd(i||r).direction==="rtl"&&(p+=Sm(r.clientWidth,i?i.clientWidth:0)-l),{width:l,height:h,x:p,y:o}}function LO(e){var t=cd(e),r=t.overflow,n=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function qq(e){return["html","body","#document"].indexOf(oA(e))>=0?e.ownerDocument.body:hu(e)&&LO(e)?e:qq(YI(e))}function fx(e,t){var r;t===void 0&&(t=[]);var n=qq(e),i=n===((r=e.ownerDocument)==null?void 0:r.body),l=gc(n),h=i?[l].concat(l.visualViewport||[],LO(n)?n:[]):n,p=t.concat(h);return i?p:p.concat(fx(YI(h)))}function cD(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Nve(e,t){var r=Vy(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function TQ(e,t,r){return t===Nq?cD(zve(e,r)):zm(t)?Nve(t,r):cD(Vve(up(e)))}function Qve(e){var t=fx(YI(e)),r=["absolute","fixed"].indexOf(cd(e).position)>=0,n=r&&hu(e)?Zb(e):e;return zm(n)?t.filter(function(i){return zm(i)&&jq(i,n)&&oA(i)!=="body"}):[]}function Hve(e,t,r,n){var i=t==="clippingParents"?Qve(e):[].concat(t),l=[].concat(i,[r]),h=l[0],p=l.reduce(function(o,_){var C=TQ(e,_,n);return o.top=Sm(C.top,o.top),o.right=sT(C.right,o.right),o.bottom=sT(C.bottom,o.bottom),o.left=Sm(C.left,o.left),o},TQ(e,h,n));return p.width=p.right-p.left,p.height=p.bottom-p.top,p.x=p.left,p.y=p.top,p}function Xq(e){var t=e.reference,r=e.element,n=e.placement,i=n?iA(n):null,l=n?Ny(n):null,h=t.x+t.width/2-r.width/2,p=t.y+t.height/2-r.height/2,o;switch(i){case Hl:o={x:h,y:t.y-r.height};break;case mu:o={x:h,y:t.y+t.height};break;case gu:o={x:t.x+t.width,y:p};break;case jl:o={x:t.x-r.width,y:p};break;default:o={x:t.x,y:t.y}}var _=i?RO(i):null;if(_!=null){var C=_==="y"?"height":"width";switch(l){case Uy:o[_]=o[_]-(t[C]/2-r[C]/2);break;case ub:o[_]=o[_]+(t[C]/2-r[C]/2);break}}return o}function hb(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=n===void 0?e.placement:n,l=r.strategy,h=l===void 0?e.strategy:l,p=r.boundary,o=p===void 0?cve:p,_=r.rootBoundary,C=_===void 0?Nq:_,M=r.elementContext,L=M===void 0?r1:M,z=r.altBoundary,j=z===void 0?!1:z,K=r.padding,$=K===void 0?0:K,q=Kq(typeof $!="number"?$:Wq($,Xb)),ee=L===r1?uve:r1,ie=e.rects.popper,fe=e.elements[j?ee:L],me=Hve(zm(fe)?fe:fe.contextElement||up(e.elements.popper),o,C,h),ye=Vy(e.elements.reference),se=Xq({reference:ye,element:ie,strategy:"absolute",placement:i}),re=cD(Object.assign({},ie,se)),de=L===r1?re:ye,_e={top:me.top-de.top+q.top,bottom:de.bottom-me.bottom+q.bottom,left:me.left-de.left+q.left,right:de.right-me.right+q.right},ve=e.modifiersData.offset;if(L===r1&&ve){var Pe=ve[i];Object.keys(_e).forEach(function(Ee){var Ht=[gu,mu].indexOf(Ee)>=0?1:-1,Xt=[Hl,mu].indexOf(Ee)>=0?"y":"x";_e[Ee]+=Pe[Xt]*Ht})}return _e}function jve(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=r.boundary,l=r.rootBoundary,h=r.padding,p=r.flipVariations,o=r.allowedAutoPlacements,_=o===void 0?Qq:o,C=Ny(n),M=C?p?BQ:BQ.filter(function(j){return Ny(j)===C}):Xb,L=M.filter(function(j){return _.indexOf(j)>=0});L.length===0&&(L=M);var z=L.reduce(function(j,K){return j[K]=hb(e,{placement:K,boundary:i,rootBoundary:l,padding:h})[iA(K)],j},{});return Object.keys(z).sort(function(j,K){return z[j]-z[K]})}function Gve(e){if(iA(e)===FO)return[];var t=rE(e);return[EQ(e),t,EQ(t)]}function Kve(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var i=r.mainAxis,l=i===void 0?!0:i,h=r.altAxis,p=h===void 0?!0:h,o=r.fallbackPlacements,_=r.padding,C=r.boundary,M=r.rootBoundary,L=r.altBoundary,z=r.flipVariations,j=z===void 0?!0:z,K=r.allowedAutoPlacements,$=t.options.placement,q=iA($),ee=q===$,ie=o||(ee||!j?[rE($)]:Gve($)),fe=[$].concat(ie).reduce(function(Vt,Dr){return Vt.concat(iA(Dr)===FO?jve(t,{placement:Dr,boundary:C,rootBoundary:M,padding:_,flipVariations:j,allowedAutoPlacements:K}):Dr)},[]),me=t.rects.reference,ye=t.rects.popper,se=new Map,re=!0,de=fe[0],_e=0;_e<fe.length;_e++){var ve=fe[_e],Pe=iA(ve),Ee=Ny(ve)===Uy,Ht=[Hl,mu].indexOf(Pe)>=0,Xt=Ht?"width":"height",gt=hb(t,{placement:ve,boundary:C,rootBoundary:M,altBoundary:L,padding:_}),jt=Ht?Ee?gu:jl:Ee?mu:Hl;me[Xt]>ye[Xt]&&(jt=rE(jt));var Mt=rE(jt),Yt=[];if(l&&Yt.push(gt[Pe]<=0),p&&Yt.push(gt[jt]<=0,gt[Mt]<=0),Yt.every(function(Vt){return Vt})){de=ve,re=!1;break}se.set(ve,Yt)}if(re)for(var ht=j?3:1,lr=function(Dr){var kr=fe.find(function(Zr){var Lr=se.get(Zr);if(Lr)return Lr.slice(0,Dr).every(function(Ao){return Ao})});if(kr)return de=kr,"break"},ir=ht;ir>0;ir--){var $t=lr(ir);if($t==="break")break}t.placement!==de&&(t.modifiersData[n]._skip=!0,t.placement=de,t.reset=!0)}}const Wve={name:"flip",enabled:!0,phase:"main",fn:Kve,requiresIfExists:["offset"],data:{_skip:!1}};function IQ(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function FQ(e){return[Hl,gu,mu,jl].some(function(t){return e[t]>=0})}function qve(e){var t=e.state,r=e.name,n=t.rects.reference,i=t.rects.popper,l=t.modifiersData.preventOverflow,h=hb(t,{elementContext:"reference"}),p=hb(t,{altBoundary:!0}),o=IQ(h,n),_=IQ(p,i,l),C=FQ(o),M=FQ(_);t.modifiersData[r]={referenceClippingOffsets:o,popperEscapeOffsets:_,isReferenceHidden:C,hasPopperEscaped:M},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":C,"data-popper-escaped":M})}const Xve={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:qve};function Zve(e,t,r){var n=iA(e),i=[jl,Hl].indexOf(n)>=0?-1:1,l=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,h=l[0],p=l[1];return h=h||0,p=(p||0)*i,[jl,gu].indexOf(n)>=0?{x:p,y:h}:{x:h,y:p}}function Yve(e){var t=e.state,r=e.options,n=e.name,i=r.offset,l=i===void 0?[0,0]:i,h=Qq.reduce(function(C,M){return C[M]=Zve(M,t.rects,l),C},{}),p=h[t.placement],o=p.x,_=p.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=o,t.modifiersData.popperOffsets.y+=_),t.modifiersData[n]=h}const Jve={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Yve};function $ve(e){var t=e.state,r=e.name;t.modifiersData[r]=Xq({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const e_e={name:"popperOffsets",enabled:!0,phase:"read",fn:$ve,data:{}};function t_e(e){return e==="x"?"y":"x"}function r_e(e){var t=e.state,r=e.options,n=e.name,i=r.mainAxis,l=i===void 0?!0:i,h=r.altAxis,p=h===void 0?!1:h,o=r.boundary,_=r.rootBoundary,C=r.altBoundary,M=r.padding,L=r.tether,z=L===void 0?!0:L,j=r.tetherOffset,K=j===void 0?0:j,$=hb(t,{boundary:o,rootBoundary:_,padding:M,altBoundary:C}),q=iA(t.placement),ee=Ny(t.placement),ie=!ee,fe=RO(q),me=t_e(fe),ye=t.modifiersData.popperOffsets,se=t.rects.reference,re=t.rects.popper,de=typeof K=="function"?K(Object.assign({},t.rects,{placement:t.placement})):K,_e=typeof de=="number"?{mainAxis:de,altAxis:de}:Object.assign({mainAxis:0,altAxis:0},de),ve=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Pe={x:0,y:0};if(ye){if(l){var Ee,Ht=fe==="y"?Hl:jl,Xt=fe==="y"?mu:gu,gt=fe==="y"?"height":"width",jt=ye[fe],Mt=jt+$[Ht],Yt=jt-$[Xt],ht=z?-re[gt]/2:0,lr=ee===Uy?se[gt]:re[gt],ir=ee===Uy?-re[gt]:-se[gt],$t=t.elements.arrow,Vt=z&&$t?MO($t):{width:0,height:0},Dr=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Gq(),kr=Dr[Ht],Zr=Dr[Xt],Lr=dx(0,se[gt],Vt[gt]),Ao=ie?se[gt]/2-ht-Lr-kr-_e.mainAxis:lr-Lr-kr-_e.mainAxis,ji=ie?-se[gt]/2+ht+Lr+Zr+_e.mainAxis:ir+Lr+Zr+_e.mainAxis,Qe=t.elements.arrow&&Zb(t.elements.arrow),no=Qe?fe==="y"?Qe.clientTop||0:Qe.clientLeft||0:0,Io=(Ee=ve==null?void 0:ve[fe])!=null?Ee:0,ms=jt+Ao-Io-no,Ot=jt+ji-Io,Bs=dx(z?sT(Mt,ms):Mt,jt,z?Sm(Yt,Ot):Yt);ye[fe]=Bs,Pe[fe]=Bs-jt}if(p){var Oi,Fo=fe==="x"?Hl:jl,Pr=fe==="x"?mu:gu,nn=ye[me],Ji=me==="y"?"height":"width",Po=nn+$[Fo],io=nn-$[Pr],Cs=[Hl,jl].indexOf(q)!==-1,Er=(Oi=ve==null?void 0:ve[me])!=null?Oi:0,Di=Cs?Po:nn-se[Ji]-re[Ji]-Er+_e.altAxis,yi=Cs?nn+se[Ji]+re[Ji]-Er-_e.altAxis:io,Go=z&&Cs?Sve(Di,nn,yi):dx(z?Di:Po,nn,z?yi:io);ye[me]=Go,Pe[me]=Go-nn}t.modifiersData[n]=Pe}}const n_e={name:"preventOverflow",enabled:!0,phase:"main",fn:r_e,requiresIfExists:["offset"]};function i_e(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function o_e(e){return e===gc(e)||!hu(e)?kO(e):i_e(e)}function s_e(e){var t=e.getBoundingClientRect(),r=zy(t.width)/e.offsetWidth||1,n=zy(t.height)/e.offsetHeight||1;return r!==1||n!==1}function a_e(e,t,r){r===void 0&&(r=!1);var n=hu(t),i=hu(t)&&s_e(t),l=up(t),h=Vy(e,i,r),p={scrollLeft:0,scrollTop:0},o={x:0,y:0};return(n||!n&&!r)&&((oA(t)!=="body"||LO(l))&&(p=o_e(t)),hu(t)?(o=Vy(t,!0),o.x+=t.clientLeft,o.y+=t.clientTop):l&&(o.x=DO(l))),{x:h.left+p.scrollLeft-o.x,y:h.top+p.scrollTop-o.y,width:h.width,height:h.height}}function l_e(e){var t=new Map,r=new Set,n=[];e.forEach(function(l){t.set(l.name,l)});function i(l){r.add(l.name);var h=[].concat(l.requires||[],l.requiresIfExists||[]);h.forEach(function(p){if(!r.has(p)){var o=t.get(p);o&&i(o)}}),n.push(l)}return e.forEach(function(l){r.has(l.name)||i(l)}),n}function c_e(e){var t=l_e(e);return _ve.reduce(function(r,n){return r.concat(t.filter(function(i){return i.phase===n}))},[])}function u_e(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function h_e(e){var t=e.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var PQ={placement:"bottom",modifiers:[],strategy:"absolute"};function MQ(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function A_e(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,i=t.defaultOptions,l=i===void 0?PQ:i;return function(p,o,_){_===void 0&&(_=l);var C={placement:"bottom",orderedModifiers:[],options:Object.assign({},PQ,l),modifiersData:{},elements:{reference:p,popper:o},attributes:{},styles:{}},M=[],L=!1,z={state:C,setOptions:function(q){var ee=typeof q=="function"?q(C.options):q;K(),C.options=Object.assign({},l,C.options,ee),C.scrollParents={reference:zm(p)?fx(p):p.contextElement?fx(p.contextElement):[],popper:fx(o)};var ie=c_e(h_e([].concat(n,C.options.modifiers)));return C.orderedModifiers=ie.filter(function(fe){return fe.enabled}),j(),z.update()},forceUpdate:function(){if(!L){var q=C.elements,ee=q.reference,ie=q.popper;if(MQ(ee,ie)){C.rects={reference:a_e(ee,Zb(ie),C.options.strategy==="fixed"),popper:MO(ie)},C.reset=!1,C.placement=C.options.placement,C.orderedModifiers.forEach(function(_e){return C.modifiersData[_e.name]=Object.assign({},_e.data)});for(var fe=0;fe<C.orderedModifiers.length;fe++){if(C.reset===!0){C.reset=!1,fe=-1;continue}var me=C.orderedModifiers[fe],ye=me.fn,se=me.options,re=se===void 0?{}:se,de=me.name;typeof ye=="function"&&(C=ye({state:C,options:re,name:de,instance:z})||C)}}}},update:u_e(function(){return new Promise(function($){z.forceUpdate(),$(C)})}),destroy:function(){K(),L=!0}};if(!MQ(p,o))return z;z.setOptions(_).then(function($){!L&&_.onFirstUpdate&&_.onFirstUpdate($)});function j(){C.orderedModifiers.forEach(function($){var q=$.name,ee=$.options,ie=ee===void 0?{}:ee,fe=$.effect;if(typeof fe=="function"){var me=fe({state:C,name:q,instance:z,options:ie}),ye=function(){};M.push(me||ye)}})}function K(){M.forEach(function($){return $()}),M=[]}return z}}var d_e=[Lve,e_e,kve,wve,Jve,Wve,n_e,Fve,Xve],f_e=A_e({defaultModifiers:d_e});const Zq=e=>$e.jsx(bi.div,{className:"chakra-stack__item",...e,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...e.__css}});Zq.displayName="StackItem";function p_e(e){const{spacing:t,direction:r}=e,n={column:{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":Hoe(r,i=>n[i])}}const OO=Yi((e,t)=>{const{isInline:r,direction:n,align:i,justify:l,spacing:h="0.5rem",wrap:p,children:o,divider:_,className:C,shouldWrapChildren:M,...L}=e,z=r?"row":n??"column",j=Re.useMemo(()=>p_e({spacing:h,direction:z}),[h,z]),K=!!_,$=!M&&!K,q=Re.useMemo(()=>{const ie=eK(o);return $?ie:ie.map((fe,me)=>{const ye=typeof fe.key<"u"?fe.key:me,se=me+1===ie.length,de=M?$e.jsx(Zq,{children:fe},ye):fe;if(!K)return de;const _e=Re.cloneElement(_,{__css:j}),ve=se?null:_e;return $e.jsxs(Re.Fragment,{children:[de,ve]},ye)})},[_,j,K,$,M,o]),ee=Vs("chakra-stack",C);return $e.jsx(bi.div,{ref:t,display:"flex",alignItems:i,justifyContent:l,flexDirection:z,flexWrap:p,gap:K?void 0:h,className:ee,...L,children:q})});OO.displayName="Stack";const Ab=Yi((e,t)=>$e.jsx(OO,{align:"center",...e,direction:"row",ref:t}));Ab.displayName="HStack";const Yq=Yi((e,t)=>$e.jsx(OO,{align:"center",...e,direction:"column",ref:t}));Yq.displayName="VStack";const[m_e,Yb]=lh({name:"TableStylesContext",errorMessage:`useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Table />" `}),Jq=Yi((e,t)=>{const r=qb("Table",e),{className:n,layout:i,...l}=uA(e);return $e.jsx(m_e,{value:r,children:$e.jsx(bi.table,{ref:t,__css:{tableLayout:i,...r.table},className:Vs("chakra-table",n),...l})})});Jq.displayName="Table";const g_e=Yi((e,t)=>{const r=Yb();return $e.jsx(bi.tbody,{...e,ref:t,__css:r.tbody})}),Hc=Yi(({isNumeric:e,...t},r)=>{const n=Yb();return $e.jsx(bi.td,{...t,ref:r,__css:n.td,"data-is-numeric":e})}),RQ=Yi(({isNumeric:e,...t},r)=>{const n=Yb();return $e.jsx(bi.th,{...t,ref:r,__css:n.th,"data-is-numeric":e})}),y_e=Yi((e,t)=>{const r=Yb();return $e.jsx(bi.thead,{...e,ref:t,__css:r.thead})}),Jp=Yi((e,t)=>{const r=Yb();return $e.jsx(bi.tr,{...e,ref:t,__css:r.tr})});function v_e(e,t){const r=e??"bottom",i={"top-start":{ltr:"top-left",rtl:"top-right"},"top-end":{ltr:"top-right",rtl:"top-left"},"bottom-start":{ltr:"bottom-left",rtl:"bottom-right"},"bottom-end":{ltr:"bottom-right",rtl:"bottom-left"}}[r];return(i==null?void 0:i[t])??r}function __e(e,t){const r=i=>({...t,...i,position:v_e((i==null?void 0:i.position)??(t==null?void 0:t.position),e)}),n=i=>{const l=r(i),h=Fq(l);return Kh.notify(h,l)};return n.update=(i,l)=>{Kh.update(i,r(l))},n.promise=(i,l)=>{const h=n({...l.loading,status:"loading",duration:null});i.then(p=>n.update(h,{status:"success",duration:5e3,...iu(l.success,p)})).catch(p=>n.update(h,{status:"error",duration:5e3,...iu(l.error,p)}))},n.closeAll=Kh.closeAll,n.close=Kh.close,n.isActive=Kh.isActive,n}function x_e(e){const{theme:t}=bq(),r=zye();return Re.useMemo(()=>__e(t.direction,{...r,...e}),[e,t.direction,r])}const UO=Yi(function(t,r){const n=tv("Heading",t),{className:i,...l}=uA(t);return $e.jsx(bi.h2,{ref:r,className:Vs("chakra-heading",t.className),...l,__css:n})});UO.displayName="Heading";const sm=Yi(function(t,r){const n=tv("Text",t),{className:i,align:l,decoration:h,casing:p,...o}=uA(t),_=bI({textAlign:t.align,textDecoration:t.decoration,textTransform:t.casing});return $e.jsx(bi.p,{ref:r,className:Vs("chakra-text",t.className),..._,...o,__css:n})});sm.displayName="Text";const b_e=()=>$e.jsx(Of,{bg:"#e05c04",px:4,children:$e.jsx(EO,{h:"8vh",alignItems:"center",justifyContent:"space-between",children:$e.jsx(UO,{size:"md",color:"white",children:"BHP"})})});function kQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Gr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kQ(Object(r),!0).forEach(function(n){ty(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function w_e(e){if(Array.isArray(e))return e}function B_e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,l,h,p=[],o=!0,_=!1;try{if(l=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;o=!1}else for(;!(o=(n=l.call(r)).done)&&(p.push(n.value),p.length!==t);o=!0);}catch(C){_=!0,i=C}finally{try{if(!o&&r.return!=null&&(h=r.return(),Object(h)!==h))return}finally{if(_)throw i}}return p}}function uD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function $q(e,t){if(e){if(typeof e=="string")return uD(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?uD(e,t):void 0}}function C_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Js(e,t){return w_e(e)||B_e(e,t)||$q(e,t)||C_e()}function ch(e,t){if(e==null)return{};var r,n,i=$ye(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var S_e=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function JI(e){var t=e.defaultInputValue,r=t===void 0?"":t,n=e.defaultMenuIsOpen,i=n===void 0?!1:n,l=e.defaultValue,h=l===void 0?null:l,p=e.inputValue,o=e.menuIsOpen,_=e.onChange,C=e.onInputChange,M=e.onMenuClose,L=e.onMenuOpen,z=e.value,j=ch(e,S_e),K=Re.useState(p!==void 0?p:r),$=Js(K,2),q=$[0],ee=$[1],ie=Re.useState(o!==void 0?o:i),fe=Js(ie,2),me=fe[0],ye=fe[1],se=Re.useState(z!==void 0?z:h),re=Js(se,2),de=re[0],_e=re[1],ve=Re.useCallback(function(Mt,Yt){typeof _=="function"&&_(Mt,Yt),_e(Mt)},[_]),Pe=Re.useCallback(function(Mt,Yt){var ht;typeof C=="function"&&(ht=C(Mt,Yt)),ee(ht!==void 0?ht:Mt)},[C]),Ee=Re.useCallback(function(){typeof L=="function"&&L(),ye(!0)},[L]),Ht=Re.useCallback(function(){typeof M=="function"&&M(),ye(!1)},[M]),Xt=p!==void 0?p:q,gt=o!==void 0?o:me,jt=z!==void 0?z:de;return Gr(Gr({},j),{},{inputValue:Xt,menuIsOpen:gt,onChange:ve,onInputChange:Pe,onMenuClose:Ht,onMenuOpen:Ee,value:jt})}function E_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Uq(n.key),n)}}function T_e(e,t,r){return t&&DQ(e.prototype,t),r&&DQ(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function I_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aD(e,t)}function aT(e){return aT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},aT(e)}function eX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eX=function(){return!!e})()}function F_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P_e(e,t){if(t&&(Um(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F_e(e)}function M_e(e){var t=eX();return function(){var r,n=aT(e);if(t){var i=aT(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return P_e(this,r)}}function R_e(e){if(Array.isArray(e))return uD(e)}function k_e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function D_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gy(e){return R_e(e)||k_e(e)||$q(e)||D_e()}function L_e(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const O_e=Math.min,U_e=Math.max,lT=Math.round,MC=Math.floor,cT=e=>({x:e,y:e});function z_e(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function tX(e){return nX(e)?(e.nodeName||"").toLowerCase():"#document"}function ud(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function rX(e){var t;return(t=(nX(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function nX(e){return e instanceof Node||e instanceof ud(e).Node}function V_e(e){return e instanceof Element||e instanceof ud(e).Element}function zO(e){return e instanceof HTMLElement||e instanceof ud(e).HTMLElement}function LQ(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ud(e).ShadowRoot}function iX(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=VO(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(i)}function N_e(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Q_e(e){return["html","body","#document"].includes(tX(e))}function VO(e){return ud(e).getComputedStyle(e)}function H_e(e){if(tX(e)==="html")return e;const t=e.assignedSlot||e.parentNode||LQ(e)&&e.host||rX(e);return LQ(t)?t.host:t}function oX(e){const t=H_e(e);return Q_e(t)?e.ownerDocument?e.ownerDocument.body:e.body:zO(t)&&iX(t)?t:oX(t)}function uT(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=oX(e),l=i===((n=e.ownerDocument)==null?void 0:n.body),h=ud(i);if(l){const p=hD(h);return t.concat(h,h.visualViewport||[],iX(i)?i:[],p&&r?uT(p):[])}return t.concat(i,uT(i,[],r))}function hD(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function j_e(e){const t=VO(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=zO(e),l=i?e.offsetWidth:r,h=i?e.offsetHeight:n,p=lT(r)!==l||lT(n)!==h;return p&&(r=l,n=h),{width:r,height:n,$:p}}function NO(e){return V_e(e)?e:e.contextElement}function OQ(e){const t=NO(e);if(!zO(t))return cT(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:l}=j_e(t);let h=(l?lT(r.width):r.width)/n,p=(l?lT(r.height):r.height)/i;return(!h||!Number.isFinite(h))&&(h=1),(!p||!Number.isFinite(p))&&(p=1),{x:h,y:p}}const G_e=cT(0);function K_e(e){const t=ud(e);return!N_e()||!t.visualViewport?G_e:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function W_e(e,t,r){return!1}function UQ(e,t,r,n){t===void 0&&(t=!1);const i=e.getBoundingClientRect(),l=NO(e);let h=cT(1);t&&(h=OQ(e));const p=W_e()?K_e(l):cT(0);let o=(i.left+p.x)/h.x,_=(i.top+p.y)/h.y,C=i.width/h.x,M=i.height/h.y;if(l){const L=ud(l),z=n;let j=L,K=hD(j);for(;K&&n&&z!==j;){const $=OQ(K),q=K.getBoundingClientRect(),ee=VO(K),ie=q.left+(K.clientLeft+parseFloat(ee.paddingLeft))*$.x,fe=q.top+(K.clientTop+parseFloat(ee.paddingTop))*$.y;o*=$.x,_*=$.y,C*=$.x,M*=$.y,o+=ie,_+=fe,j=ud(K),K=hD(j)}}return z_e({width:C,height:M,x:o,y:_})}function q_e(e,t){let r=null,n;const i=rX(e);function l(){var p;clearTimeout(n),(p=r)==null||p.disconnect(),r=null}function h(p,o){p===void 0&&(p=!1),o===void 0&&(o=1),l();const{left:_,top:C,width:M,height:L}=e.getBoundingClientRect();if(p||t(),!M||!L)return;const z=MC(C),j=MC(i.clientWidth-(_+M)),K=MC(i.clientHeight-(C+L)),$=MC(_),ee={rootMargin:-z+"px "+-j+"px "+-K+"px "+-$+"px",threshold:U_e(0,O_e(1,o))||1};let ie=!0;function fe(me){const ye=me[0].intersectionRatio;if(ye!==o){if(!ie)return h();ye?h(!1,ye):n=setTimeout(()=>{h(!1,1e-7)},1e3)}ie=!1}try{r=new IntersectionObserver(fe,{...ee,root:i.ownerDocument})}catch{r=new IntersectionObserver(fe,ee)}r.observe(e)}return h(!0),l}function X_e(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:l=!0,elementResize:h=typeof ResizeObserver=="function",layoutShift:p=typeof IntersectionObserver=="function",animationFrame:o=!1}=n,_=NO(e),C=i||l?[..._?uT(_):[],...uT(t)]:[];C.forEach(q=>{i&&q.addEventListener("scroll",r,{passive:!0}),l&&q.addEventListener("resize",r)});const M=_&&p?q_e(_,r):null;let L=-1,z=null;h&&(z=new ResizeObserver(q=>{let[ee]=q;ee&&ee.target===_&&z&&(z.unobserve(t),cancelAnimationFrame(L),L=requestAnimationFrame(()=>{var ie;(ie=z)==null||ie.observe(t)})),r()}),_&&!o&&z.observe(_),z.observe(t));let j,K=o?UQ(e):null;o&&$();function $(){const q=UQ(e);K&&(q.x!==K.x||q.y!==K.y||q.width!==K.width||q.height!==K.height)&&r(),K=q,j=requestAnimationFrame($)}return r(),()=>{var q;C.forEach(ee=>{i&&ee.removeEventListener("scroll",r),l&&ee.removeEventListener("resize",r)}),M==null||M(),(q=z)==null||q.disconnect(),z=null,o&&cancelAnimationFrame(j)}}var AD=Re.useLayoutEffect,Z_e=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],hT=function(){};function Y_e(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function J_e(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var l=[].concat(n);if(t&&e)for(var h in t)t.hasOwnProperty(h)&&t[h]&&l.push("".concat(Y_e(e,h)));return l.filter(function(p){return p}).map(function(p){return String(p).trim()}).join(" ")}var AT=function(t){return l1e(t)?t.filter(Boolean):Um(t)==="object"&&t!==null?[t]:[]},sX=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var r=ch(t,Z_e);return Gr({},r)},$o=function(t,r,n){var i=t.cx,l=t.getStyles,h=t.getClassNames,p=t.className;return{css:l(r,t),className:i(n??{},h(r,t),p)}};function $_e(e,t,r){if(r){var n=r(e,t);if(typeof n=="string")return n}return e}function $I(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function e1e(e){return $I(e)?window.innerHeight:e.clientHeight}function aX(e){return $I(e)?window.pageYOffset:e.scrollTop}function dT(e,t){if($I(e)){window.scrollTo(0,t);return}e.scrollTop=t}function t1e(e){var t=getComputedStyle(e),r=t.position==="absolute",n=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var i=e;i=i.parentElement;)if(t=getComputedStyle(i),!(r&&t.position==="static")&&n.test(t.overflow+t.overflowY+t.overflowX))return i;return document.documentElement}function r1e(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function RC(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:hT,i=aX(e),l=t-i,h=10,p=0;function o(){p+=h;var _=r1e(p,i,l,r);dT(e,_),p<r?window.requestAnimationFrame(o):n(e)}o()}function zQ(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),i=t.offsetHeight/3;n.bottom+i>r.bottom?dT(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+i,e.scrollHeight)):n.top-i<r.top&&dT(e,Math.max(t.offsetTop-i,0))}function n1e(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function VQ(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function i1e(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var lX=!1,o1e={get passive(){return lX=!0}},kC=typeof window<"u"?window:{};kC.addEventListener&&kC.removeEventListener&&(kC.addEventListener("p",hT,o1e),kC.removeEventListener("p",hT,!1));var s1e=lX;function a1e(e){return e!=null}function l1e(e){return Array.isArray(e)}function R1(e,t,r){return e?t:r}var c1e=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var l=Object.entries(t).filter(function(h){var p=Js(h,1),o=p[0];return!n.includes(o)});return l.reduce(function(h,p){var o=Js(p,2),_=o[0],C=o[1];return h[_]=C,h},{})},u1e=["children","innerProps"],h1e=["children","innerProps"];function A1e(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,i=e.placement,l=e.shouldScroll,h=e.isFixedPosition,p=e.controlHeight,o=t1e(r),_={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return _;var C=o.getBoundingClientRect(),M=C.height,L=r.getBoundingClientRect(),z=L.bottom,j=L.height,K=L.top,$=r.offsetParent.getBoundingClientRect(),q=$.top,ee=h?window.innerHeight:e1e(o),ie=aX(o),fe=parseInt(getComputedStyle(r).marginBottom,10),me=parseInt(getComputedStyle(r).marginTop,10),ye=q-me,se=ee-K,re=ye+ie,de=M-ie-K,_e=z-ee+ie+fe,ve=ie+K-me,Pe=160;switch(i){case"auto":case"bottom":if(se>=j)return{placement:"bottom",maxHeight:t};if(de>=j&&!h)return l&&RC(o,_e,Pe),{placement:"bottom",maxHeight:t};if(!h&&de>=n||h&&se>=n){l&&RC(o,_e,Pe);var Ee=h?se-fe:de-fe;return{placement:"bottom",maxHeight:Ee}}if(i==="auto"||h){var Ht=t,Xt=h?ye:re;return Xt>=n&&(Ht=Math.min(Xt-fe-p,t)),{placement:"top",maxHeight:Ht}}if(i==="bottom")return l&&dT(o,_e),{placement:"bottom",maxHeight:t};break;case"top":if(ye>=j)return{placement:"top",maxHeight:t};if(re>=j&&!h)return l&&RC(o,ve,Pe),{placement:"top",maxHeight:t};if(!h&&re>=n||h&&ye>=n){var gt=t;return(!h&&re>=n||h&&ye>=n)&&(gt=h?ye-me:re-me),l&&RC(o,ve,Pe),{placement:"top",maxHeight:gt}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return _}function d1e(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var cX=function(t){return t==="auto"?"bottom":t},f1e=function(t,r){var n,i=t.placement,l=t.theme,h=l.borderRadius,p=l.spacing,o=l.colors;return Gr((n={label:"menu"},ty(n,d1e(i),"100%"),ty(n,"position","absolute"),ty(n,"width","100%"),ty(n,"zIndex",1),n),r?{}:{backgroundColor:o.neutral0,borderRadius:h,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:p.menuGutter,marginTop:p.menuGutter})},uX=Re.createContext(null),p1e=function(t){var r=t.children,n=t.minMenuHeight,i=t.maxMenuHeight,l=t.menuPlacement,h=t.menuPosition,p=t.menuShouldScrollIntoView,o=t.theme,_=Re.useContext(uX)||{},C=_.setPortalPlacement,M=Re.useRef(null),L=Re.useState(i),z=Js(L,2),j=z[0],K=z[1],$=Re.useState(null),q=Js($,2),ee=q[0],ie=q[1],fe=o.spacing.controlHeight;return AD(function(){var me=M.current;if(me){var ye=h==="fixed",se=p&&!ye,re=A1e({maxHeight:i,menuEl:me,minHeight:n,placement:l,shouldScroll:se,isFixedPosition:ye,controlHeight:fe});K(re.maxHeight),ie(re.placement),C==null||C(re.placement)}},[i,l,h,p,n,C,fe]),r({ref:M,placerProps:Gr(Gr({},t),{},{placement:ee||cX(l),maxHeight:j})})},m1e=function(t){var r=t.children,n=t.innerRef,i=t.innerProps;return rn("div",$r({},$o(t,"menu",{menu:!0}),{ref:n},i),r)},g1e=m1e,y1e=function(t,r){var n=t.maxHeight,i=t.theme.spacing.baseUnit;return Gr({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},r?{}:{paddingBottom:i,paddingTop:i})},v1e=function(t){var r=t.children,n=t.innerProps,i=t.innerRef,l=t.isMulti;return rn("div",$r({},$o(t,"menuList",{"menu-list":!0,"menu-list--is-multi":l}),{ref:i},n),r)},hX=function(t,r){var n=t.theme,i=n.spacing.baseUnit,l=n.colors;return Gr({textAlign:"center"},r?{}:{color:l.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},_1e=hX,x1e=hX,b1e=function(t){var r=t.children,n=r===void 0?"No options":r,i=t.innerProps,l=ch(t,u1e);return rn("div",$r({},$o(Gr(Gr({},l),{},{children:n,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),n)},w1e=function(t){var r=t.children,n=r===void 0?"Loading...":r,i=t.innerProps,l=ch(t,h1e);return rn("div",$r({},$o(Gr(Gr({},l),{},{children:n,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),n)},B1e=function(t){var r=t.rect,n=t.offset,i=t.position;return{left:r.left,position:i,top:n,width:r.width,zIndex:1}},C1e=function(t){var r=t.appendTo,n=t.children,i=t.controlElement,l=t.innerProps,h=t.menuPlacement,p=t.menuPosition,o=Re.useRef(null),_=Re.useRef(null),C=Re.useState(cX(h)),M=Js(C,2),L=M[0],z=M[1],j=Re.useMemo(function(){return{setPortalPlacement:z}},[]),K=Re.useState(null),$=Js(K,2),q=$[0],ee=$[1],ie=Re.useCallback(function(){if(i){var se=n1e(i),re=p==="fixed"?0:window.pageYOffset,de=se[L]+re;(de!==(q==null?void 0:q.offset)||se.left!==(q==null?void 0:q.rect.left)||se.width!==(q==null?void 0:q.rect.width))&&ee({offset:de,rect:se})}},[i,p,L,q==null?void 0:q.offset,q==null?void 0:q.rect.left,q==null?void 0:q.rect.width]);AD(function(){ie()},[ie]);var fe=Re.useCallback(function(){typeof _.current=="function"&&(_.current(),_.current=null),i&&o.current&&(_.current=X_e(i,o.current,ie,{elementResize:"ResizeObserver"in window}))},[i,ie]);AD(function(){fe()},[fe]);var me=Re.useCallback(function(se){o.current=se,fe()},[fe]);if(!r&&p!=="fixed"||!q)return null;var ye=rn("div",$r({ref:me},$o(Gr(Gr({},t),{},{offset:q.offset,position:p,rect:q.rect}),"menuPortal",{"menu-portal":!0}),l),n);return rn(uX.Provider,{value:j},r?xI.createPortal(ye,r):ye)},S1e=function(t){var r=t.isDisabled,n=t.isRtl;return{label:"container",direction:n?"rtl":void 0,pointerEvents:r?"none":void 0,position:"relative"}},E1e=function(t){var r=t.children,n=t.innerProps,i=t.isDisabled,l=t.isRtl;return rn("div",$r({},$o(t,"container",{"--is-disabled":i,"--is-rtl":l}),n),r)},T1e=function(t,r){var n=t.theme.spacing,i=t.isMulti,l=t.hasValue,h=t.selectProps.controlShouldRenderValue;return Gr({alignItems:"center",display:i&&l&&h?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},r?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(n.baseUnit*2,"px")})},I1e=function(t){var r=t.children,n=t.innerProps,i=t.isMulti,l=t.hasValue;return rn("div",$r({},$o(t,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":l}),n),r)},F1e=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},P1e=function(t){var r=t.children,n=t.innerProps;return rn("div",$r({},$o(t,"indicatorsContainer",{indicators:!0}),n),r)},NQ,M1e=["size"],R1e=["innerProps","isRtl","size"],k1e={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},AX=function(t){var r=t.size,n=ch(t,M1e);return rn("svg",$r({height:r,width:r,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:k1e},n))},QO=function(t){return rn(AX,$r({size:20},t),rn("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},dX=function(t){return rn(AX,$r({size:20},t),rn("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},fX=function(t,r){var n=t.isFocused,i=t.theme,l=i.spacing.baseUnit,h=i.colors;return Gr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},r?{}:{color:n?h.neutral60:h.neutral20,padding:l*2,":hover":{color:n?h.neutral80:h.neutral40}})},D1e=fX,L1e=function(t){var r=t.children,n=t.innerProps;return rn("div",$r({},$o(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),r||rn(dX,null))},O1e=fX,U1e=function(t){var r=t.children,n=t.innerProps;return rn("div",$r({},$o(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),r||rn(QO,null))},z1e=function(t,r){var n=t.isDisabled,i=t.theme,l=i.spacing.baseUnit,h=i.colors;return Gr({label:"indicatorSeparator",alignSelf:"stretch",width:1},r?{}:{backgroundColor:n?h.neutral10:h.neutral20,marginBottom:l*2,marginTop:l*2})},V1e=function(t){var r=t.innerProps;return rn("span",$r({},r,$o(t,"indicatorSeparator",{"indicator-separator":!0})))},N1e=QL(NQ||(NQ=L_e([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),Q1e=function(t,r){var n=t.isFocused,i=t.size,l=t.theme,h=l.colors,p=l.spacing.baseUnit;return Gr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},r?{}:{color:n?h.neutral60:h.neutral20,padding:p*2})},kR=function(t){var r=t.delay,n=t.offset;return rn("span",{css:NL({animation:"".concat(N1e," 1s ease-in-out ").concat(r,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},H1e=function(t){var r=t.innerProps,n=t.isRtl,i=t.size,l=i===void 0?4:i,h=ch(t,R1e);return rn("div",$r({},$o(Gr(Gr({},h),{},{innerProps:r,isRtl:n,size:l}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),r),rn(kR,{delay:0,offset:n}),rn(kR,{delay:160,offset:!0}),rn(kR,{delay:320,offset:!n}))},j1e=function(t,r){var n=t.isDisabled,i=t.isFocused,l=t.theme,h=l.colors,p=l.borderRadius,o=l.spacing;return Gr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:o.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},r?{}:{backgroundColor:n?h.neutral5:h.neutral0,borderColor:n?h.neutral10:i?h.primary:h.neutral20,borderRadius:p,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(h.primary):void 0,"&:hover":{borderColor:i?h.primary:h.neutral30}})},G1e=function(t){var r=t.children,n=t.isDisabled,i=t.isFocused,l=t.innerRef,h=t.innerProps,p=t.menuIsOpen;return rn("div",$r({ref:l},$o(t,"control",{control:!0,"control--is-disabled":n,"control--is-focused":i,"control--menu-is-open":p}),h,{"aria-disabled":n||void 0}),r)},K1e=G1e,W1e=["data"],q1e=function(t,r){var n=t.theme.spacing;return r?{}:{paddingBottom:n.baseUnit*2,paddingTop:n.baseUnit*2}},X1e=function(t){var r=t.children,n=t.cx,i=t.getStyles,l=t.getClassNames,h=t.Heading,p=t.headingProps,o=t.innerProps,_=t.label,C=t.theme,M=t.selectProps;return rn("div",$r({},$o(t,"group",{group:!0}),o),rn(h,$r({},p,{selectProps:M,theme:C,getStyles:i,getClassNames:l,cx:n}),_),rn("div",null,r))},Z1e=function(t,r){var n=t.theme,i=n.colors,l=n.spacing;return Gr({label:"group",cursor:"default",display:"block"},r?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:l.baseUnit*3,paddingRight:l.baseUnit*3,textTransform:"uppercase"})},Y1e=function(t){var r=sX(t);r.data;var n=ch(r,W1e);return rn("div",$r({},$o(t,"groupHeading",{"group-heading":!0}),n))},J1e=X1e,$1e=["innerRef","isDisabled","isHidden","inputClassName"],exe=function(t,r){var n=t.isDisabled,i=t.value,l=t.theme,h=l.spacing,p=l.colors;return Gr(Gr({visibility:n?"hidden":"visible",transform:i?"translateZ(0)":""},txe),r?{}:{margin:h.baseUnit/2,paddingBottom:h.baseUnit/2,paddingTop:h.baseUnit/2,color:p.neutral80})},pX={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},txe={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Gr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},pX)},rxe=function(t){return Gr({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},pX)},nxe=function(t){var r=t.cx,n=t.value,i=sX(t),l=i.innerRef,h=i.isDisabled,p=i.isHidden,o=i.inputClassName,_=ch(i,$1e);return rn("div",$r({},$o(t,"input",{"input-container":!0}),{"data-value":n||""}),rn("input",$r({className:r({input:!0},o),ref:l,style:rxe(p),disabled:h},_)))},ixe=nxe,oxe=function(t,r){var n=t.theme,i=n.spacing,l=n.borderRadius,h=n.colors;return Gr({label:"multiValue",display:"flex",minWidth:0},r?{}:{backgroundColor:h.neutral10,borderRadius:l/2,margin:i.baseUnit/2})},sxe=function(t,r){var n=t.theme,i=n.borderRadius,l=n.colors,h=t.cropWithEllipsis;return Gr({overflow:"hidden",textOverflow:h||h===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},r?{}:{borderRadius:i/2,color:l.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},axe=function(t,r){var n=t.theme,i=n.spacing,l=n.borderRadius,h=n.colors,p=t.isFocused;return Gr({alignItems:"center",display:"flex"},r?{}:{borderRadius:l/2,backgroundColor:p?h.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:h.dangerLight,color:h.danger}})},mX=function(t){var r=t.children,n=t.innerProps;return rn("div",n,r)},lxe=mX,cxe=mX;function uxe(e){var t=e.children,r=e.innerProps;return rn("div",$r({role:"button"},r),t||rn(QO,{size:14}))}var hxe=function(t){var r=t.children,n=t.components,i=t.data,l=t.innerProps,h=t.isDisabled,p=t.removeProps,o=t.selectProps,_=n.Container,C=n.Label,M=n.Remove;return rn(_,{data:i,innerProps:Gr(Gr({},$o(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":h})),l),selectProps:o},rn(C,{data:i,innerProps:Gr({},$o(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:o},r),rn(M,{data:i,innerProps:Gr(Gr({},$o(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(r||"option")},p),selectProps:o}))},Axe=hxe,dxe=function(t,r){var n=t.isDisabled,i=t.isFocused,l=t.isSelected,h=t.theme,p=h.spacing,o=h.colors;return Gr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},r?{}:{backgroundColor:l?o.primary:i?o.primary25:"transparent",color:n?o.neutral20:l?o.neutral0:"inherit",padding:"".concat(p.baseUnit*2,"px ").concat(p.baseUnit*3,"px"),":active":{backgroundColor:n?void 0:l?o.primary:o.primary50}})},fxe=function(t){var r=t.children,n=t.isDisabled,i=t.isFocused,l=t.isSelected,h=t.innerRef,p=t.innerProps;return rn("div",$r({},$o(t,"option",{option:!0,"option--is-disabled":n,"option--is-focused":i,"option--is-selected":l}),{ref:h,"aria-disabled":n},p),r)},pxe=fxe,mxe=function(t,r){var n=t.theme,i=n.spacing,l=n.colors;return Gr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},r?{}:{color:l.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},gxe=function(t){var r=t.children,n=t.innerProps;return rn("div",$r({},$o(t,"placeholder",{placeholder:!0}),n),r)},yxe=gxe,vxe=function(t,r){var n=t.isDisabled,i=t.theme,l=i.spacing,h=i.colors;return Gr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},r?{}:{color:n?h.neutral40:h.neutral80,marginLeft:l.baseUnit/2,marginRight:l.baseUnit/2})},_xe=function(t){var r=t.children,n=t.isDisabled,i=t.innerProps;return rn("div",$r({},$o(t,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),i),r)},xxe=_xe,bxe={ClearIndicator:U1e,Control:K1e,DropdownIndicator:L1e,DownChevron:dX,CrossIcon:QO,Group:J1e,GroupHeading:Y1e,IndicatorsContainer:P1e,IndicatorSeparator:V1e,Input:ixe,LoadingIndicator:H1e,Menu:g1e,MenuList:v1e,MenuPortal:C1e,LoadingMessage:w1e,NoOptionsMessage:b1e,MultiValue:Axe,MultiValueContainer:lxe,MultiValueLabel:cxe,MultiValueRemove:uxe,Option:pxe,Placeholder:yxe,SelectContainer:E1e,SingleValue:xxe,ValueContainer:I1e},wxe=function(t){return Gr(Gr({},bxe),t.components)},QQ=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function Bxe(e,t){return!!(e===t||QQ(e)&&QQ(t))}function Cxe(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!Bxe(e[r],t[r]))return!1;return!0}function Sxe(e,t){t===void 0&&(t=Cxe);var r=null;function n(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];if(r&&r.lastThis===this&&t(i,r.lastArgs))return r.lastResult;var h=e.apply(this,i);return r={lastResult:h,lastArgs:i,lastThis:this},h}return n.clear=function(){r=null},n}var Exe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},Txe=function(t){return rn("span",$r({css:Exe},t))},HQ=Txe,Ixe={guidance:function(t){var r=t.isSearchable,n=t.isMulti,i=t.tabSelectsValue,l=t.context,h=t.isInitialFocus;switch(l){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return h?"".concat(t["aria-label"]||"Select"," is focused ").concat(r?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var r=t.action,n=t.label,i=n===void 0?"":n,l=t.labels,h=t.isDisabled;switch(r){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(l.length>1?"s":""," ").concat(l.join(","),", selected.");case"select-option":return h?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(t){var r=t.context,n=t.focused,i=t.options,l=t.label,h=l===void 0?"":l,p=t.selectValue,o=t.isDisabled,_=t.isSelected,C=t.isAppleDevice,M=function(K,$){return K&&K.length?"".concat(K.indexOf($)+1," of ").concat(K.length):""};if(r==="value"&&p)return"value ".concat(h," focused, ").concat(M(p,n),".");if(r==="menu"&&C){var L=o?" disabled":"",z="".concat(_?" selected":"").concat(L);return"".concat(h).concat(z,", ").concat(M(i,n),".")}return""},onFilter:function(t){var r=t.inputValue,n=t.resultsMessage;return"".concat(n).concat(r?" for search term "+r:"",".")}},Fxe=function(t){var r=t.ariaSelection,n=t.focusedOption,i=t.focusedValue,l=t.focusableOptions,h=t.isFocused,p=t.selectValue,o=t.selectProps,_=t.id,C=t.isAppleDevice,M=o.ariaLiveMessages,L=o.getOptionLabel,z=o.inputValue,j=o.isMulti,K=o.isOptionDisabled,$=o.isSearchable,q=o.menuIsOpen,ee=o.options,ie=o.screenReaderStatus,fe=o.tabSelectsValue,me=o.isLoading,ye=o["aria-label"],se=o["aria-live"],re=Re.useMemo(function(){return Gr(Gr({},Ixe),M||{})},[M]),de=Re.useMemo(function(){var Xt="";if(r&&re.onChange){var gt=r.option,jt=r.options,Mt=r.removedValue,Yt=r.removedValues,ht=r.value,lr=function(Lr){return Array.isArray(Lr)?null:Lr},ir=Mt||gt||lr(ht),$t=ir?L(ir):"",Vt=jt||Yt||void 0,Dr=Vt?Vt.map(L):[],kr=Gr({isDisabled:ir&&K(ir,p),label:$t,labels:Dr},r);Xt=re.onChange(kr)}return Xt},[r,re,K,p,L]),_e=Re.useMemo(function(){var Xt="",gt=n||i,jt=!!(n&&p&&p.includes(n));if(gt&&re.onFocus){var Mt={focused:gt,label:L(gt),isDisabled:K(gt,p),isSelected:jt,options:l,context:gt===n?"menu":"value",selectValue:p,isAppleDevice:C};Xt=re.onFocus(Mt)}return Xt},[n,i,L,K,re,l,p,C]),ve=Re.useMemo(function(){var Xt="";if(q&&ee.length&&!me&&re.onFilter){var gt=ie({count:l.length});Xt=re.onFilter({inputValue:z,resultsMessage:gt})}return Xt},[l,z,q,re,ee,ie,me]),Pe=(r==null?void 0:r.action)==="initial-input-focus",Ee=Re.useMemo(function(){var Xt="";if(re.guidance){var gt=i?"value":q?"menu":"input";Xt=re.guidance({"aria-label":ye,context:gt,isDisabled:n&&K(n,p),isMulti:j,isSearchable:$,tabSelectsValue:fe,isInitialFocus:Pe})}return Xt},[ye,n,i,j,K,$,q,re,p,fe,Pe]),Ht=rn(Re.Fragment,null,rn("span",{id:"aria-selection"},de),rn("span",{id:"aria-focused"},_e),rn("span",{id:"aria-results"},ve),rn("span",{id:"aria-guidance"},Ee));return rn(Re.Fragment,null,rn(HQ,{id:_},Pe&&Ht),rn(HQ,{"aria-live":se,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},h&&!Pe&&Ht))},Pxe=Fxe,dD=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],Mxe=new RegExp("["+dD.map(function(e){return e.letters}).join("")+"]","g"),gX={};for(var DR=0;DR<dD.length;DR++)for(var LR=dD[DR],OR=0;OR<LR.letters.length;OR++)gX[LR.letters[OR]]=LR.base;var yX=function(t){return t.replace(Mxe,function(r){return gX[r]})},Rxe=Sxe(yX),jQ=function(t){return t.replace(/^\s+|\s+$/g,"")},kxe=function(t){return"".concat(t.label," ").concat(t.value)},Dxe=function(t){return function(r,n){if(r.data.__isNew__)return!0;var i=Gr({ignoreCase:!0,ignoreAccents:!0,stringify:kxe,trim:!0,matchFrom:"any"},t),l=i.ignoreCase,h=i.ignoreAccents,p=i.stringify,o=i.trim,_=i.matchFrom,C=o?jQ(n):n,M=o?jQ(p(r)):p(r);return l&&(C=C.toLowerCase(),M=M.toLowerCase()),h&&(C=Rxe(C),M=yX(M)),_==="start"?M.substr(0,C.length)===C:M.indexOf(C)>-1}},Lxe=["innerRef"];function Oxe(e){var t=e.innerRef,r=ch(e,Lxe),n=c1e(r,"onExited","in","enter","exit","appear");return rn("input",$r({ref:t},n,{css:NL({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var Uxe=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()};function zxe(e){var t=e.isEnabled,r=e.onBottomArrive,n=e.onBottomLeave,i=e.onTopArrive,l=e.onTopLeave,h=Re.useRef(!1),p=Re.useRef(!1),o=Re.useRef(0),_=Re.useRef(null),C=Re.useCallback(function($,q){if(_.current!==null){var ee=_.current,ie=ee.scrollTop,fe=ee.scrollHeight,me=ee.clientHeight,ye=_.current,se=q>0,re=fe-me-ie,de=!1;re>q&&h.current&&(n&&n($),h.current=!1),se&&p.current&&(l&&l($),p.current=!1),se&&q>re?(r&&!h.current&&r($),ye.scrollTop=fe,de=!0,h.current=!0):!se&&-q>ie&&(i&&!p.current&&i($),ye.scrollTop=0,de=!0,p.current=!0),de&&Uxe($)}},[r,n,i,l]),M=Re.useCallback(function($){C($,$.deltaY)},[C]),L=Re.useCallback(function($){o.current=$.changedTouches[0].clientY},[]),z=Re.useCallback(function($){var q=o.current-$.changedTouches[0].clientY;C($,q)},[C]),j=Re.useCallback(function($){if($){var q=s1e?{passive:!1}:!1;$.addEventListener("wheel",M,q),$.addEventListener("touchstart",L,q),$.addEventListener("touchmove",z,q)}},[z,L,M]),K=Re.useCallback(function($){$&&($.removeEventListener("wheel",M,!1),$.removeEventListener("touchstart",L,!1),$.removeEventListener("touchmove",z,!1))},[z,L,M]);return Re.useEffect(function(){if(t){var $=_.current;return j($),function(){K($)}}},[t,j,K]),function($){_.current=$}}var GQ=["boxSizing","height","overflow","paddingRight","position"],KQ={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function WQ(e){e.preventDefault()}function qQ(e){e.stopPropagation()}function XQ(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function ZQ(){return"ontouchstart"in window||navigator.maxTouchPoints}var YQ=!!(typeof window<"u"&&window.document&&window.document.createElement),n1=0,p0={capture:!1,passive:!1};function Vxe(e){var t=e.isEnabled,r=e.accountForScrollbars,n=r===void 0?!0:r,i=Re.useRef({}),l=Re.useRef(null),h=Re.useCallback(function(o){if(YQ){var _=document.body,C=_&&_.style;if(n&&GQ.forEach(function(j){var K=C&&C[j];i.current[j]=K}),n&&n1<1){var M=parseInt(i.current.paddingRight,10)||0,L=document.body?document.body.clientWidth:0,z=window.innerWidth-L+M||0;Object.keys(KQ).forEach(function(j){var K=KQ[j];C&&(C[j]=K)}),C&&(C.paddingRight="".concat(z,"px"))}_&&ZQ()&&(_.addEventListener("touchmove",WQ,p0),o&&(o.addEventListener("touchstart",XQ,p0),o.addEventListener("touchmove",qQ,p0))),n1+=1}},[n]),p=Re.useCallback(function(o){if(YQ){var _=document.body,C=_&&_.style;n1=Math.max(n1-1,0),n&&n1<1&&GQ.forEach(function(M){var L=i.current[M];C&&(C[M]=L)}),_&&ZQ()&&(_.removeEventListener("touchmove",WQ,p0),o&&(o.removeEventListener("touchstart",XQ,p0),o.removeEventListener("touchmove",qQ,p0)))}},[n]);return Re.useEffect(function(){if(t){var o=l.current;return h(o),function(){p(o)}}},[t,h,p]),function(o){l.current=o}}var Nxe=function(t){var r=t.target;return r.ownerDocument.activeElement&&r.ownerDocument.activeElement.blur()},Qxe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Hxe(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,i=n===void 0?!0:n,l=e.onBottomArrive,h=e.onBottomLeave,p=e.onTopArrive,o=e.onTopLeave,_=zxe({isEnabled:i,onBottomArrive:l,onBottomLeave:h,onTopArrive:p,onTopLeave:o}),C=Vxe({isEnabled:r}),M=function(z){_(z),C(z)};return rn(Re.Fragment,null,r&&rn("div",{onClick:Nxe,css:Qxe}),t(M))}var jxe={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Gxe=function(t){var r=t.name,n=t.onFocus;return rn("input",{required:!0,name:r,tabIndex:-1,"aria-hidden":"true",onFocus:n,css:jxe,value:"",onChange:function(){}})},Kxe=Gxe;function HO(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function Wxe(){return HO(/^iPhone/i)}function vX(){return HO(/^Mac/i)}function qxe(){return HO(/^iPad/i)||vX()&&navigator.maxTouchPoints>1}function Xxe(){return Wxe()||qxe()}function Zxe(){return vX()||Xxe()}var Yxe=function(t){return t.label},_X=function(t){return t.label},xX=function(t){return t.value},Jxe=function(t){return!!t.isDisabled},$xe={clearIndicator:O1e,container:S1e,control:j1e,dropdownIndicator:D1e,group:q1e,groupHeading:Z1e,indicatorsContainer:F1e,indicatorSeparator:z1e,input:exe,loadingIndicator:Q1e,loadingMessage:x1e,menu:f1e,menuList:y1e,menuPortal:B1e,multiValue:oxe,multiValueLabel:sxe,multiValueRemove:axe,noOptionsMessage:_1e,option:dxe,placeholder:mxe,singleValue:vxe,valueContainer:T1e},ebe={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},tbe=4,bX=4,rbe=38,nbe=bX*2,ibe={baseUnit:bX,controlHeight:rbe,menuGutter:nbe},UR={borderRadius:tbe,colors:ebe,spacing:ibe},obe={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:VQ(),captureMenuScroll:!VQ(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:Dxe(),formatGroupLabel:Yxe,getOptionLabel:_X,getOptionValue:xX,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:Jxe,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!i1e(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var r=t.count;return"".concat(r," result").concat(r!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function JQ(e,t,r,n){var i=CX(e,t,r),l=SX(e,t,r),h=BX(e,t),p=fT(e,t);return{type:"option",data:t,isDisabled:i,isSelected:l,label:h,value:p,index:n}}function nE(e,t){return e.options.map(function(r,n){if("options"in r){var i=r.options.map(function(h,p){return JQ(e,h,t,p)}).filter(function(h){return eH(e,h)});return i.length>0?{type:"group",data:r,options:i,index:n}:void 0}var l=JQ(e,r,t,n);return eH(e,l)?l:void 0}).filter(a1e)}function wX(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,gy(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function $Q(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,gy(n.options.map(function(i){return{data:i.data,id:"".concat(t,"-").concat(n.index,"-").concat(i.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function sbe(e,t){return wX(nE(e,t))}function eH(e,t){var r=e.inputValue,n=r===void 0?"":r,i=t.data,l=t.isSelected,h=t.label,p=t.value;return(!TX(e)||!l)&&EX(e,{label:h,value:p,data:i},n)}function abe(e,t){var r=e.focusedValue,n=e.selectValue,i=n.indexOf(r);if(i>-1){var l=t.indexOf(r);if(l>-1)return r;if(i<t.length)return t[i]}return null}function lbe(e,t){var r=e.focusedOption;return r&&t.indexOf(r)>-1?r:t[0]}var zR=function(t,r){var n,i=(n=t.find(function(l){return l.data===r}))===null||n===void 0?void 0:n.id;return i||null},BX=function(t,r){return t.getOptionLabel(r)},fT=function(t,r){return t.getOptionValue(r)};function CX(e,t,r){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,r):!1}function SX(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=fT(e,t);return r.some(function(i){return fT(e,i)===n})}function EX(e,t,r){return e.filterOption?e.filterOption(t,r):!0}var TX=function(t){var r=t.hideSelectedOptions,n=t.isMulti;return r===void 0?n:r},cbe=1,Jb=function(e){I_e(r,e);var t=M_e(r);function r(n){var i;if(E_e(this,r),i=t.call(this,n),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.isAppleDevice=Zxe(),i.controlRef=null,i.getControlRef=function(o){i.controlRef=o},i.focusedOptionRef=null,i.getFocusedOptionRef=function(o){i.focusedOptionRef=o},i.menuListRef=null,i.getMenuListRef=function(o){i.menuListRef=o},i.inputRef=null,i.getInputRef=function(o){i.inputRef=o},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(o,_){var C=i.props,M=C.onChange,L=C.name;_.name=L,i.ariaOnChange(o,_),M(o,_)},i.setValue=function(o,_,C){var M=i.props,L=M.closeMenuOnSelect,z=M.isMulti,j=M.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:j}),L&&(i.setState({inputIsHiddenAfterUpdate:!z}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(o,{action:_,option:C})},i.selectOption=function(o){var _=i.props,C=_.blurInputOnSelect,M=_.isMulti,L=_.name,z=i.state.selectValue,j=M&&i.isOptionSelected(o,z),K=i.isOptionDisabled(o,z);if(j){var $=i.getOptionValue(o);i.setValue(z.filter(function(q){return i.getOptionValue(q)!==$}),"deselect-option",o)}else if(!K)M?i.setValue([].concat(gy(z),[o]),"select-option",o):i.setValue(o,"select-option");else{i.ariaOnChange(o,{action:"select-option",option:o,name:L});return}C&&i.blurInput()},i.removeValue=function(o){var _=i.props.isMulti,C=i.state.selectValue,M=i.getOptionValue(o),L=C.filter(function(j){return i.getOptionValue(j)!==M}),z=R1(_,L,L[0]||null);i.onChange(z,{action:"remove-value",removedValue:o}),i.focusInput()},i.clearValue=function(){var o=i.state.selectValue;i.onChange(R1(i.props.isMulti,[],null),{action:"clear",removedValues:o})},i.popValue=function(){var o=i.props.isMulti,_=i.state.selectValue,C=_[_.length-1],M=_.slice(0,_.length-1),L=R1(o,M,M[0]||null);i.onChange(L,{action:"pop-value",removedValue:C})},i.getFocusedOptionId=function(o){return zR(i.state.focusableOptionsWithIds,o)},i.getFocusableOptionsWithIds=function(){return $Q(nE(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var o=arguments.length,_=new Array(o),C=0;C<o;C++)_[C]=arguments[C];return J_e.apply(void 0,[i.props.classNamePrefix].concat(_))},i.getOptionLabel=function(o){return BX(i.props,o)},i.getOptionValue=function(o){return fT(i.props,o)},i.getStyles=function(o,_){var C=i.props.unstyled,M=$xe[o](_,C);M.boxSizing="border-box";var L=i.props.styles[o];return L?L(M,_):M},i.getClassNames=function(o,_){var C,M;return(C=(M=i.props.classNames)[o])===null||C===void 0?void 0:C.call(M,_)},i.getElementId=function(o){return"".concat(i.state.instancePrefix,"-").concat(o)},i.getComponents=function(){return wxe(i.props)},i.buildCategorizedOptions=function(){return nE(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return wX(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(o,_){i.setState({ariaSelection:Gr({value:o},_)})},i.onMenuMouseDown=function(o){o.button===0&&(o.stopPropagation(),o.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(o){i.blockOptionHover=!1},i.onControlMouseDown=function(o){if(!o.defaultPrevented){var _=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?o.target.tagName!=="INPUT"&&o.target.tagName!=="TEXTAREA"&&i.onMenuClose():_&&i.openMenu("first"):(_&&(i.openAfterFocus=!0),i.focusInput()),o.target.tagName!=="INPUT"&&o.target.tagName!=="TEXTAREA"&&o.preventDefault()}},i.onDropdownIndicatorMouseDown=function(o){if(!(o&&o.type==="mousedown"&&o.button!==0)&&!i.props.isDisabled){var _=i.props,C=_.isMulti,M=_.menuIsOpen;i.focusInput(),M?(i.setState({inputIsHiddenAfterUpdate:!C}),i.onMenuClose()):i.openMenu("first"),o.preventDefault()}},i.onClearIndicatorMouseDown=function(o){o&&o.type==="mousedown"&&o.button!==0||(i.clearValue(),o.preventDefault(),i.openAfterFocus=!1,o.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(o){typeof i.props.closeMenuOnScroll=="boolean"?o.target instanceof HTMLElement&&$I(o.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(o)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(o){var _=o.touches,C=_&&_.item(0);C&&(i.initialTouchX=C.clientX,i.initialTouchY=C.clientY,i.userIsDragging=!1)},i.onTouchMove=function(o){var _=o.touches,C=_&&_.item(0);if(C){var M=Math.abs(C.clientX-i.initialTouchX),L=Math.abs(C.clientY-i.initialTouchY),z=5;i.userIsDragging=M>z||L>z}},i.onTouchEnd=function(o){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(o.target)&&i.menuListRef&&!i.menuListRef.contains(o.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(o){i.userIsDragging||i.onControlMouseDown(o)},i.onClearIndicatorTouchEnd=function(o){i.userIsDragging||i.onClearIndicatorMouseDown(o)},i.onDropdownIndicatorTouchEnd=function(o){i.userIsDragging||i.onDropdownIndicatorMouseDown(o)},i.handleInputChange=function(o){var _=i.props.inputValue,C=o.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(C,{action:"input-change",prevInputValue:_}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(o){i.props.onFocus&&i.props.onFocus(o),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(o){var _=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(o),i.onInputChange("",{action:"input-blur",prevInputValue:_}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(o){if(!(i.blockOptionHover||i.state.focusedOption===o)){var _=i.getFocusableOptions(),C=_.indexOf(o);i.setState({focusedOption:o,focusedOptionId:C>-1?i.getFocusedOptionId(o):null})}},i.shouldHideSelectedOptions=function(){return TX(i.props)},i.onValueInputFocus=function(o){o.preventDefault(),o.stopPropagation(),i.focus()},i.onKeyDown=function(o){var _=i.props,C=_.isMulti,M=_.backspaceRemovesValue,L=_.escapeClearsValue,z=_.inputValue,j=_.isClearable,K=_.isDisabled,$=_.menuIsOpen,q=_.onKeyDown,ee=_.tabSelectsValue,ie=_.openMenuOnFocus,fe=i.state,me=fe.focusedOption,ye=fe.focusedValue,se=fe.selectValue;if(!K&&!(typeof q=="function"&&(q(o),o.defaultPrevented))){switch(i.blockOptionHover=!0,o.key){case"ArrowLeft":if(!C||z)return;i.focusValue("previous");break;case"ArrowRight":if(!C||z)return;i.focusValue("next");break;case"Delete":case"Backspace":if(z)return;if(ye)i.removeValue(ye);else{if(!M)return;C?i.popValue():j&&i.clearValue()}break;case"Tab":if(i.isComposing||o.shiftKey||!$||!ee||!me||ie&&i.isOptionSelected(me,se))return;i.selectOption(me);break;case"Enter":if(o.keyCode===229)break;if($){if(!me||i.isComposing)return;i.selectOption(me);break}return;case"Escape":$?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:z}),i.onMenuClose()):j&&L&&i.clearValue();break;case" ":if(z)return;if(!$){i.openMenu("first");break}if(!me)return;i.selectOption(me);break;case"ArrowUp":$?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":$?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!$)return;i.focusOption("pageup");break;case"PageDown":if(!$)return;i.focusOption("pagedown");break;case"Home":if(!$)return;i.focusOption("first");break;case"End":if(!$)return;i.focusOption("last");break;default:return}o.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++cbe),i.state.selectValue=AT(n.value),n.menuIsOpen&&i.state.selectValue.length){var l=i.getFocusableOptionsWithIds(),h=i.buildFocusableOptions(),p=h.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=l,i.state.focusedOption=h[p],i.state.focusedOptionId=zR(l,h[p])}return i}return T_e(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&zQ(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var l=this.props,h=l.isDisabled,p=l.menuIsOpen,o=this.state.isFocused;(o&&!h&&i.isDisabled||o&&p&&!i.menuIsOpen)&&this.focusInput(),o&&h&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!o&&!h&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(zQ(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,l){this.props.onInputChange(i,l)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var l=this,h=this.state,p=h.selectValue,o=h.isFocused,_=this.buildFocusableOptions(),C=i==="first"?0:_.length-1;if(!this.props.isMulti){var M=_.indexOf(p[0]);M>-1&&(C=M)}this.scrollToFocusedOptionOnUpdate=!(o&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:_[C],focusedOptionId:this.getFocusedOptionId(_[C])},function(){return l.onMenuOpen()})}},{key:"focusValue",value:function(i){var l=this.state,h=l.selectValue,p=l.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var o=h.indexOf(p);p||(o=-1);var _=h.length-1,C=-1;if(h.length){switch(i){case"previous":o===0?C=0:o===-1?C=_:C=o-1;break;case"next":o>-1&&o<_&&(C=o+1);break}this.setState({inputIsHidden:C!==-1,focusedValue:h[C]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",l=this.props.pageSize,h=this.state.focusedOption,p=this.getFocusableOptions();if(p.length){var o=0,_=p.indexOf(h);h||(_=-1),i==="up"?o=_>0?_-1:p.length-1:i==="down"?o=(_+1)%p.length:i==="pageup"?(o=_-l,o<0&&(o=0)):i==="pagedown"?(o=_+l,o>p.length-1&&(o=p.length-1)):i==="last"&&(o=p.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:p[o],focusedValue:null,focusedOptionId:this.getFocusedOptionId(p[o])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(UR):Gr(Gr({},UR),this.props.theme):UR}},{key:"getCommonProps",value:function(){var i=this.clearValue,l=this.cx,h=this.getStyles,p=this.getClassNames,o=this.getValue,_=this.selectOption,C=this.setValue,M=this.props,L=M.isMulti,z=M.isRtl,j=M.options,K=this.hasValue();return{clearValue:i,cx:l,getStyles:h,getClassNames:p,getValue:o,hasValue:K,isMulti:L,isRtl:z,options:j,selectOption:_,selectProps:M,setValue:C,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,l=i.isClearable,h=i.isMulti;return l===void 0?h:l}},{key:"isOptionDisabled",value:function(i,l){return CX(this.props,i,l)}},{key:"isOptionSelected",value:function(i,l){return SX(this.props,i,l)}},{key:"filterOption",value:function(i,l){return EX(this.props,i,l)}},{key:"formatOptionLabel",value:function(i,l){if(typeof this.props.formatOptionLabel=="function"){var h=this.props.inputValue,p=this.state.selectValue;return this.props.formatOptionLabel(i,{context:l,inputValue:h,selectValue:p})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,l=i.isDisabled,h=i.isSearchable,p=i.inputId,o=i.inputValue,_=i.tabIndex,C=i.form,M=i.menuIsOpen,L=i.required,z=this.getComponents(),j=z.Input,K=this.state,$=K.inputIsHidden,q=K.ariaSelection,ee=this.commonProps,ie=p||this.getElementId("input"),fe=Gr(Gr(Gr({"aria-autocomplete":"list","aria-expanded":M,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":L,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},M&&{"aria-controls":this.getElementId("listbox")}),!h&&{"aria-readonly":!0}),this.hasValue()?(q==null?void 0:q.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return h?Re.createElement(j,$r({},ee,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:ie,innerRef:this.getInputRef,isDisabled:l,isHidden:$,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:_,form:C,type:"text",value:o},fe)):Re.createElement(Oxe,$r({id:ie,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:hT,onFocus:this.onInputFocus,disabled:l,tabIndex:_,inputMode:"none",form:C,value:""},fe))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,l=this.getComponents(),h=l.MultiValue,p=l.MultiValueContainer,o=l.MultiValueLabel,_=l.MultiValueRemove,C=l.SingleValue,M=l.Placeholder,L=this.commonProps,z=this.props,j=z.controlShouldRenderValue,K=z.isDisabled,$=z.isMulti,q=z.inputValue,ee=z.placeholder,ie=this.state,fe=ie.selectValue,me=ie.focusedValue,ye=ie.isFocused;if(!this.hasValue()||!j)return q?null:Re.createElement(M,$r({},L,{key:"placeholder",isDisabled:K,isFocused:ye,innerProps:{id:this.getElementId("placeholder")}}),ee);if($)return fe.map(function(re,de){var _e=re===me,ve="".concat(i.getOptionLabel(re),"-").concat(i.getOptionValue(re));return Re.createElement(h,$r({},L,{components:{Container:p,Label:o,Remove:_},isFocused:_e,isDisabled:K,key:ve,index:de,removeProps:{onClick:function(){return i.removeValue(re)},onTouchEnd:function(){return i.removeValue(re)},onMouseDown:function(Ee){Ee.preventDefault()}},data:re}),i.formatOptionLabel(re,"value"))});if(q)return null;var se=fe[0];return Re.createElement(C,$r({},L,{data:se,isDisabled:K}),this.formatOptionLabel(se,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),l=i.ClearIndicator,h=this.commonProps,p=this.props,o=p.isDisabled,_=p.isLoading,C=this.state.isFocused;if(!this.isClearable()||!l||o||!this.hasValue()||_)return null;var M={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return Re.createElement(l,$r({},h,{innerProps:M,isFocused:C}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),l=i.LoadingIndicator,h=this.commonProps,p=this.props,o=p.isDisabled,_=p.isLoading,C=this.state.isFocused;if(!l||!_)return null;var M={"aria-hidden":"true"};return Re.createElement(l,$r({},h,{innerProps:M,isDisabled:o,isFocused:C}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),l=i.DropdownIndicator,h=i.IndicatorSeparator;if(!l||!h)return null;var p=this.commonProps,o=this.props.isDisabled,_=this.state.isFocused;return Re.createElement(h,$r({},p,{isDisabled:o,isFocused:_}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),l=i.DropdownIndicator;if(!l)return null;var h=this.commonProps,p=this.props.isDisabled,o=this.state.isFocused,_={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return Re.createElement(l,$r({},h,{innerProps:_,isDisabled:p,isFocused:o}))}},{key:"renderMenu",value:function(){var i=this,l=this.getComponents(),h=l.Group,p=l.GroupHeading,o=l.Menu,_=l.MenuList,C=l.MenuPortal,M=l.LoadingMessage,L=l.NoOptionsMessage,z=l.Option,j=this.commonProps,K=this.state.focusedOption,$=this.props,q=$.captureMenuScroll,ee=$.inputValue,ie=$.isLoading,fe=$.loadingMessage,me=$.minMenuHeight,ye=$.maxMenuHeight,se=$.menuIsOpen,re=$.menuPlacement,de=$.menuPosition,_e=$.menuPortalTarget,ve=$.menuShouldBlockScroll,Pe=$.menuShouldScrollIntoView,Ee=$.noOptionsMessage,Ht=$.onMenuScrollToTop,Xt=$.onMenuScrollToBottom;if(!se)return null;var gt=function($t,Vt){var Dr=$t.type,kr=$t.data,Zr=$t.isDisabled,Lr=$t.isSelected,Ao=$t.label,ji=$t.value,Qe=K===kr,no=Zr?void 0:function(){return i.onOptionHover(kr)},Io=Zr?void 0:function(){return i.selectOption(kr)},ms="".concat(i.getElementId("option"),"-").concat(Vt),Ot={id:ms,onClick:Io,onMouseMove:no,onMouseOver:no,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:Lr};return Re.createElement(z,$r({},j,{innerProps:Ot,data:kr,isDisabled:Zr,isSelected:Lr,key:ms,label:Ao,type:Dr,value:ji,isFocused:Qe,innerRef:Qe?i.getFocusedOptionRef:void 0}),i.formatOptionLabel($t.data,"menu"))},jt;if(this.hasOptions())jt=this.getCategorizedOptions().map(function(ir){if(ir.type==="group"){var $t=ir.data,Vt=ir.options,Dr=ir.index,kr="".concat(i.getElementId("group"),"-").concat(Dr),Zr="".concat(kr,"-heading");return Re.createElement(h,$r({},j,{key:kr,data:$t,options:Vt,Heading:p,headingProps:{id:Zr,data:ir.data},label:i.formatGroupLabel(ir.data)}),ir.options.map(function(Lr){return gt(Lr,"".concat(Dr,"-").concat(Lr.index))}))}else if(ir.type==="option")return gt(ir,"".concat(ir.index))});else if(ie){var Mt=fe({inputValue:ee});if(Mt===null)return null;jt=Re.createElement(M,j,Mt)}else{var Yt=Ee({inputValue:ee});if(Yt===null)return null;jt=Re.createElement(L,j,Yt)}var ht={minMenuHeight:me,maxMenuHeight:ye,menuPlacement:re,menuPosition:de,menuShouldScrollIntoView:Pe},lr=Re.createElement(p1e,$r({},j,ht),function(ir){var $t=ir.ref,Vt=ir.placerProps,Dr=Vt.placement,kr=Vt.maxHeight;return Re.createElement(o,$r({},j,ht,{innerRef:$t,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:ie,placement:Dr}),Re.createElement(Hxe,{captureEnabled:q,onTopArrive:Ht,onBottomArrive:Xt,lockEnabled:ve},function(Zr){return Re.createElement(_,$r({},j,{innerRef:function(Ao){i.getMenuListRef(Ao),Zr(Ao)},innerProps:{role:"listbox","aria-multiselectable":j.isMulti,id:i.getElementId("listbox")},isLoading:ie,maxHeight:kr,focusedOption:K}),jt)}))});return _e||de==="fixed"?Re.createElement(C,$r({},j,{appendTo:_e,controlElement:this.controlRef,menuPlacement:re,menuPosition:de}),lr):lr}},{key:"renderFormField",value:function(){var i=this,l=this.props,h=l.delimiter,p=l.isDisabled,o=l.isMulti,_=l.name,C=l.required,M=this.state.selectValue;if(C&&!this.hasValue()&&!p)return Re.createElement(Kxe,{name:_,onFocus:this.onValueInputFocus});if(!(!_||p))if(o)if(h){var L=M.map(function(K){return i.getOptionValue(K)}).join(h);return Re.createElement("input",{name:_,type:"hidden",value:L})}else{var z=M.length>0?M.map(function(K,$){return Re.createElement("input",{key:"i-".concat($),name:_,type:"hidden",value:i.getOptionValue(K)})}):Re.createElement("input",{name:_,type:"hidden",value:""});return Re.createElement("div",null,z)}else{var j=M[0]?this.getOptionValue(M[0]):"";return Re.createElement("input",{name:_,type:"hidden",value:j})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,l=this.state,h=l.ariaSelection,p=l.focusedOption,o=l.focusedValue,_=l.isFocused,C=l.selectValue,M=this.getFocusableOptions();return Re.createElement(Pxe,$r({},i,{id:this.getElementId("live-region"),ariaSelection:h,focusedOption:p,focusedValue:o,isFocused:_,selectValue:C,focusableOptions:M,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),l=i.Control,h=i.IndicatorsContainer,p=i.SelectContainer,o=i.ValueContainer,_=this.props,C=_.className,M=_.id,L=_.isDisabled,z=_.menuIsOpen,j=this.state.isFocused,K=this.commonProps=this.getCommonProps();return Re.createElement(p,$r({},K,{className:C,innerProps:{id:M,onKeyDown:this.onKeyDown},isDisabled:L,isFocused:j}),this.renderLiveRegion(),Re.createElement(l,$r({},K,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:L,isFocused:j,menuIsOpen:z}),Re.createElement(o,$r({},K,{isDisabled:L}),this.renderPlaceholderOrValue(),this.renderInput()),Re.createElement(h,$r({},K,{isDisabled:L}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,l){var h=l.prevProps,p=l.clearFocusValueOnUpdate,o=l.inputIsHiddenAfterUpdate,_=l.ariaSelection,C=l.isFocused,M=l.prevWasFocused,L=l.instancePrefix,z=i.options,j=i.value,K=i.menuIsOpen,$=i.inputValue,q=i.isMulti,ee=AT(j),ie={};if(h&&(j!==h.value||z!==h.options||K!==h.menuIsOpen||$!==h.inputValue)){var fe=K?sbe(i,ee):[],me=K?$Q(nE(i,ee),"".concat(L,"-option")):[],ye=p?abe(l,ee):null,se=lbe(l,fe),re=zR(me,se);ie={selectValue:ee,focusedOption:se,focusedOptionId:re,focusableOptionsWithIds:me,focusedValue:ye,clearFocusValueOnUpdate:!1}}var de=o!=null&&i!==h?{inputIsHidden:o,inputIsHiddenAfterUpdate:void 0}:{},_e=_,ve=C&&M;return C&&!ve&&(_e={value:R1(q,ee,ee[0]||null),options:ee,action:"initial-input-focus"},ve=!M),(_==null?void 0:_.action)==="initial-input-focus"&&(_e=null),Gr(Gr(Gr({},ie),de),{},{prevProps:i,ariaSelection:_e,prevWasFocused:ve})}}]),r}(Re.Component);Jb.defaultProps=obe;var ube=Re.forwardRef(function(e,t){var r=JI(e);return Re.createElement(Jb,$r({ref:t},r))}),hbe=ube;function Abe(e,t){return`${e} returned \`undefined\`. Seems you forgot to wrap component within ${t}`}function $b(e={}){const{name:t,strict:r=!0,hookName:n="useContext",providerName:i="Provider",errorMessage:l,defaultValue:h}=e,p=Re.createContext(h);p.displayName=t;function o(){var _;const C=Re.useContext(p);if(!C&&r){const M=new Error(l??Abe(n,i));throw M.name="ContextError",(_=Error.captureStackTrace)==null||_.call(Error,M,o),M}return C}return[p.Provider,o,p]}function dbe(e,t){if(e!=null){if(typeof e=="function"){e(t);return}try{e.current=t}catch{throw new Error(`Cannot assign value '${t}' to ref '${e}'`)}}}function db(...e){return t=>{e.forEach(r=>{dbe(r,t)})}}function nv(){const e=Re.useContext(Om);if(!e)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return e}var IX=Re.createContext({});IX.displayName="ColorModeContext";function jO(){const e=Re.useContext(IX);if(e===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return e}function tH(e,t){const{colorMode:r}=jO();return r==="dark"?t:e}var fbe=globalThis!=null&&globalThis.document?Re.useLayoutEffect:Re.useEffect;function pbe(){const e=jO(),t=nv();return{...e,theme:t}}var Vm=(...e)=>e.filter(Boolean).join(" ");function YA(e){const t=typeof e;return e!=null&&(t==="object"||t==="function")&&!Array.isArray(e)}function bf(e,...t){return mbe(e)?e(...t):e}var mbe=e=>typeof e=="function",ef=e=>e?"":void 0,VR=e=>e?!0:void 0;function rH(...e){return function(r){e.some(n=>(n==null||n(r),r==null?void 0:r.defaultPrevented))}}var gbe=e=>/!(important)?$/.test(e),nH=e=>typeof e=="string"?e.replace(/!(important)?$/,"").trim():e,ybe=(e,t)=>r=>{const n=String(t),i=gbe(n),l=nH(n),h=e?`${e}.${l}`:l;let p=YA(r.__cssMap)&&h in r.__cssMap?r.__cssMap[h].varRef:t;return p=nH(p),i?`${p} !important`:p};function GO(e){const{scale:t,transform:r,compose:n}=e;return(l,h)=>{var p;const o=ybe(t,l)(h);let _=(p=r==null?void 0:r(o,h))!=null?p:o;return n&&(_=n(_,h)),_}}var DC=(...e)=>t=>e.reduce((r,n)=>n(r),t);function jc(e,t){return r=>{const n={property:r,scale:e};return n.transform=GO({scale:e,transform:t}),n}}var vbe=({rtl:e,ltr:t})=>r=>r.direction==="rtl"?e:t;function _be(e){const{property:t,scale:r,transform:n}=e;return{scale:r,property:vbe(t),transform:r?GO({scale:r,compose:n}):n}}var FX=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function xbe(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...FX].join(" ")}function bbe(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...FX].join(" ")}var wbe={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},Bbe={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function Cbe(e){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":e,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}var Sbe={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},fD={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},Ebe=new Set(Object.values(fD)),pD=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),Tbe=e=>e.trim();function Ibe(e,t){if(e==null||pD.has(e))return e;if(!(mD(e)||pD.has(e)))return`url('${e}')`;const i=/(^[a-z-A-Z]+)\((.*)\)/g.exec(e),l=i==null?void 0:i[1],h=i==null?void 0:i[2];if(!l||!h)return e;const p=l.includes("-gradient")?l:`${l}-gradient`,[o,..._]=h.split(",").map(Tbe).filter(Boolean);if((_==null?void 0:_.length)===0)return e;const C=o in fD?fD[o]:o;_.unshift(C);const M=_.map(L=>{if(Ebe.has(L))return L;const z=L.indexOf(" "),[j,K]=z!==-1?[L.substr(0,z),L.substr(z+1)]:[L],$=mD(K)?K:K&&K.split(" "),q=`colors.${j}`,ee=q in t.__cssMap?t.__cssMap[q].varRef:j;return $?[ee,...Array.isArray($)?$:[$]].join(" "):ee});return`${p}(${M.join(", ")})`}var mD=e=>typeof e=="string"&&e.includes("(")&&e.includes(")"),Fbe=(e,t)=>Ibe(e,t??{});function Pbe(e){return/^var\(--.+\)$/.test(e)}var Mbe=e=>{const t=parseFloat(e.toString()),r=e.toString().replace(String(t),"");return{unitless:!r,value:t,unit:r}},kh=e=>t=>`${e}(${t})`,ii={filter(e){return e!=="auto"?e:wbe},backdropFilter(e){return e!=="auto"?e:Bbe},ring(e){return Cbe(ii.px(e))},bgClip(e){return e==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:e}},transform(e){return e==="auto"?xbe():e==="auto-gpu"?bbe():e},vh(e){return e==="$100vh"?"var(--chakra-vh)":e},px(e){if(e==null)return e;const{unitless:t}=Mbe(e);return t||typeof e=="number"?`${e}px`:e},fraction(e){return typeof e!="number"||e>1?e:`${e*100}%`},float(e,t){const r={left:"right",right:"left"};return t.direction==="rtl"?r[e]:e},degree(e){if(Pbe(e)||e==null)return e;const t=typeof e=="string"&&!e.endsWith("deg");return typeof e=="number"||t?`${e}deg`:e},gradient:Fbe,blur:kh("blur"),opacity:kh("opacity"),brightness:kh("brightness"),contrast:kh("contrast"),dropShadow:kh("drop-shadow"),grayscale:kh("grayscale"),hueRotate:e=>kh("hue-rotate")(ii.degree(e)),invert:kh("invert"),saturate:kh("saturate"),sepia:kh("sepia"),bgImage(e){return e==null||mD(e)||pD.has(e)?e:`url(${e})`},outline(e){const t=String(e)==="0"||String(e)==="none";return e!==null&&t?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:e}},flexDirection(e){var t;const{space:r,divide:n}=(t=Sbe[e])!=null?t:{},i={flexDirection:e};return r&&(i[r]=1),n&&(i[n]=1),i}},xt={borderWidths:jc("borderWidths"),borderStyles:jc("borderStyles"),colors:jc("colors"),borders:jc("borders"),gradients:jc("gradients",ii.gradient),radii:jc("radii",ii.px),space:jc("space",DC(ii.vh,ii.px)),spaceT:jc("space",DC(ii.vh,ii.px)),degreeT(e){return{property:e,transform:ii.degree}},prop(e,t,r){return{property:e,scale:t,...t&&{transform:GO({scale:t,transform:r})}}},propT(e,t){return{property:e,transform:t}},sizes:jc("sizes",DC(ii.vh,ii.px)),sizesT:jc("sizes",DC(ii.vh,ii.fraction)),shadows:jc("shadows"),logical:_be,blur:jc("blur",ii.blur)},iE={background:xt.colors("background"),backgroundColor:xt.colors("backgroundColor"),backgroundImage:xt.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:ii.bgClip},bgSize:xt.prop("backgroundSize"),bgPosition:xt.prop("backgroundPosition"),bg:xt.colors("background"),bgColor:xt.colors("backgroundColor"),bgPos:xt.prop("backgroundPosition"),bgRepeat:xt.prop("backgroundRepeat"),bgAttachment:xt.prop("backgroundAttachment"),bgGradient:xt.gradients("backgroundImage"),bgClip:{transform:ii.bgClip}};Object.assign(iE,{bgImage:iE.backgroundImage,bgImg:iE.backgroundImage});var Si={border:xt.borders("border"),borderWidth:xt.borderWidths("borderWidth"),borderStyle:xt.borderStyles("borderStyle"),borderColor:xt.colors("borderColor"),borderRadius:xt.radii("borderRadius"),borderTop:xt.borders("borderTop"),borderBlockStart:xt.borders("borderBlockStart"),borderTopLeftRadius:xt.radii("borderTopLeftRadius"),borderStartStartRadius:xt.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:xt.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:xt.radii("borderTopRightRadius"),borderStartEndRadius:xt.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:xt.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:xt.borders("borderRight"),borderInlineEnd:xt.borders("borderInlineEnd"),borderBottom:xt.borders("borderBottom"),borderBlockEnd:xt.borders("borderBlockEnd"),borderBottomLeftRadius:xt.radii("borderBottomLeftRadius"),borderBottomRightRadius:xt.radii("borderBottomRightRadius"),borderLeft:xt.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:xt.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:xt.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:xt.borders(["borderLeft","borderRight"]),borderInline:xt.borders("borderInline"),borderY:xt.borders(["borderTop","borderBottom"]),borderBlock:xt.borders("borderBlock"),borderTopWidth:xt.borderWidths("borderTopWidth"),borderBlockStartWidth:xt.borderWidths("borderBlockStartWidth"),borderTopColor:xt.colors("borderTopColor"),borderBlockStartColor:xt.colors("borderBlockStartColor"),borderTopStyle:xt.borderStyles("borderTopStyle"),borderBlockStartStyle:xt.borderStyles("borderBlockStartStyle"),borderBottomWidth:xt.borderWidths("borderBottomWidth"),borderBlockEndWidth:xt.borderWidths("borderBlockEndWidth"),borderBottomColor:xt.colors("borderBottomColor"),borderBlockEndColor:xt.colors("borderBlockEndColor"),borderBottomStyle:xt.borderStyles("borderBottomStyle"),borderBlockEndStyle:xt.borderStyles("borderBlockEndStyle"),borderLeftWidth:xt.borderWidths("borderLeftWidth"),borderInlineStartWidth:xt.borderWidths("borderInlineStartWidth"),borderLeftColor:xt.colors("borderLeftColor"),borderInlineStartColor:xt.colors("borderInlineStartColor"),borderLeftStyle:xt.borderStyles("borderLeftStyle"),borderInlineStartStyle:xt.borderStyles("borderInlineStartStyle"),borderRightWidth:xt.borderWidths("borderRightWidth"),borderInlineEndWidth:xt.borderWidths("borderInlineEndWidth"),borderRightColor:xt.colors("borderRightColor"),borderInlineEndColor:xt.colors("borderInlineEndColor"),borderRightStyle:xt.borderStyles("borderRightStyle"),borderInlineEndStyle:xt.borderStyles("borderInlineEndStyle"),borderTopRadius:xt.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:xt.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:xt.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:xt.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(Si,{rounded:Si.borderRadius,roundedTop:Si.borderTopRadius,roundedTopLeft:Si.borderTopLeftRadius,roundedTopRight:Si.borderTopRightRadius,roundedTopStart:Si.borderStartStartRadius,roundedTopEnd:Si.borderStartEndRadius,roundedBottom:Si.borderBottomRadius,roundedBottomLeft:Si.borderBottomLeftRadius,roundedBottomRight:Si.borderBottomRightRadius,roundedBottomStart:Si.borderEndStartRadius,roundedBottomEnd:Si.borderEndEndRadius,roundedLeft:Si.borderLeftRadius,roundedRight:Si.borderRightRadius,roundedStart:Si.borderInlineStartRadius,roundedEnd:Si.borderInlineEndRadius,borderStart:Si.borderInlineStart,borderEnd:Si.borderInlineEnd,borderTopStartRadius:Si.borderStartStartRadius,borderTopEndRadius:Si.borderStartEndRadius,borderBottomStartRadius:Si.borderEndStartRadius,borderBottomEndRadius:Si.borderEndEndRadius,borderStartRadius:Si.borderInlineStartRadius,borderEndRadius:Si.borderInlineEndRadius,borderStartWidth:Si.borderInlineStartWidth,borderEndWidth:Si.borderInlineEndWidth,borderStartColor:Si.borderInlineStartColor,borderEndColor:Si.borderInlineEndColor,borderStartStyle:Si.borderInlineStartStyle,borderEndStyle:Si.borderInlineEndStyle});var Rbe={color:xt.colors("color"),textColor:xt.colors("color"),fill:xt.colors("fill"),stroke:xt.colors("stroke")},gD={boxShadow:xt.shadows("boxShadow"),mixBlendMode:!0,blendMode:xt.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:xt.prop("backgroundBlendMode"),opacity:!0};Object.assign(gD,{shadow:gD.boxShadow});var kbe={filter:{transform:ii.filter},blur:xt.blur("--chakra-blur"),brightness:xt.propT("--chakra-brightness",ii.brightness),contrast:xt.propT("--chakra-contrast",ii.contrast),hueRotate:xt.propT("--chakra-hue-rotate",ii.hueRotate),invert:xt.propT("--chakra-invert",ii.invert),saturate:xt.propT("--chakra-saturate",ii.saturate),dropShadow:xt.propT("--chakra-drop-shadow",ii.dropShadow),backdropFilter:{transform:ii.backdropFilter},backdropBlur:xt.blur("--chakra-backdrop-blur"),backdropBrightness:xt.propT("--chakra-backdrop-brightness",ii.brightness),backdropContrast:xt.propT("--chakra-backdrop-contrast",ii.contrast),backdropHueRotate:xt.propT("--chakra-backdrop-hue-rotate",ii.hueRotate),backdropInvert:xt.propT("--chakra-backdrop-invert",ii.invert),backdropSaturate:xt.propT("--chakra-backdrop-saturate",ii.saturate)},pT={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:ii.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:xt.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:xt.space("gap"),rowGap:xt.space("rowGap"),columnGap:xt.space("columnGap")};Object.assign(pT,{flexDir:pT.flexDirection});var PX={gridGap:xt.space("gridGap"),gridColumnGap:xt.space("gridColumnGap"),gridRowGap:xt.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},Dbe={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:ii.outline},outlineOffset:!0,outlineColor:xt.colors("outlineColor")},Zc={width:xt.sizesT("width"),inlineSize:xt.sizesT("inlineSize"),height:xt.sizes("height"),blockSize:xt.sizes("blockSize"),boxSize:xt.sizes(["width","height"]),minWidth:xt.sizes("minWidth"),minInlineSize:xt.sizes("minInlineSize"),minHeight:xt.sizes("minHeight"),minBlockSize:xt.sizes("minBlockSize"),maxWidth:xt.sizes("maxWidth"),maxInlineSize:xt.sizes("maxInlineSize"),maxHeight:xt.sizes("maxHeight"),maxBlockSize:xt.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(e,t)=>{var r,n,i;return{[`@media screen and (min-width: ${(i=(n=(r=t.__breakpoints)==null?void 0:r.get(e))==null?void 0:n.minW)!=null?i:e})`]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(e,t)=>{var r,n,i;return{[`@media screen and (max-width: ${(i=(n=(r=t.__breakpoints)==null?void 0:r.get(e))==null?void 0:n._minW)!=null?i:e})`]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:xt.propT("float",ii.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(Zc,{w:Zc.width,h:Zc.height,minW:Zc.minWidth,maxW:Zc.maxWidth,minH:Zc.minHeight,maxH:Zc.maxHeight,overscroll:Zc.overscrollBehavior,overscrollX:Zc.overscrollBehaviorX,overscrollY:Zc.overscrollBehaviorY});var Lbe={listStyleType:!0,listStylePosition:!0,listStylePos:xt.prop("listStylePosition"),listStyleImage:!0,listStyleImg:xt.prop("listStyleImage")};function Obe(e,t,r,n){const i=typeof t=="string"?t.split("."):[t];for(n=0;n<i.length&&e;n+=1)e=e[i[n]];return e===void 0?r:e}var Ube=e=>{const t=new WeakMap;return(n,i,l,h)=>{if(typeof n>"u")return e(n,i,l);t.has(n)||t.set(n,new Map);const p=t.get(n);if(p.has(i))return p.get(i);const o=e(n,i,l,h);return p.set(i,o),o}},zbe=Ube(Obe),Vbe={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},Nbe={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},NR=(e,t,r)=>{const n={},i=zbe(e,t,{});for(const l in i)l in r&&r[l]!=null||(n[l]=i[l]);return n},Qbe={srOnly:{transform(e){return e===!0?Vbe:e==="focusable"?Nbe:{}}},layerStyle:{processResult:!0,transform:(e,t,r)=>NR(t,`layerStyles.${e}`,r)},textStyle:{processResult:!0,transform:(e,t,r)=>NR(t,`textStyles.${e}`,r)},apply:{processResult:!0,transform:(e,t,r)=>NR(t,e,r)}},px={position:!0,pos:xt.prop("position"),zIndex:xt.prop("zIndex","zIndices"),inset:xt.spaceT("inset"),insetX:xt.spaceT(["left","right"]),insetInline:xt.spaceT("insetInline"),insetY:xt.spaceT(["top","bottom"]),insetBlock:xt.spaceT("insetBlock"),top:xt.spaceT("top"),insetBlockStart:xt.spaceT("insetBlockStart"),bottom:xt.spaceT("bottom"),insetBlockEnd:xt.spaceT("insetBlockEnd"),left:xt.spaceT("left"),insetInlineStart:xt.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:xt.spaceT("right"),insetInlineEnd:xt.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(px,{insetStart:px.insetInlineStart,insetEnd:px.insetInlineEnd});var Hbe={ring:{transform:ii.ring},ringColor:xt.colors("--chakra-ring-color"),ringOffset:xt.prop("--chakra-ring-offset-width"),ringOffsetColor:xt.colors("--chakra-ring-offset-color"),ringInset:xt.prop("--chakra-ring-inset")},vo={margin:xt.spaceT("margin"),marginTop:xt.spaceT("marginTop"),marginBlockStart:xt.spaceT("marginBlockStart"),marginRight:xt.spaceT("marginRight"),marginInlineEnd:xt.spaceT("marginInlineEnd"),marginBottom:xt.spaceT("marginBottom"),marginBlockEnd:xt.spaceT("marginBlockEnd"),marginLeft:xt.spaceT("marginLeft"),marginInlineStart:xt.spaceT("marginInlineStart"),marginX:xt.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:xt.spaceT("marginInline"),marginY:xt.spaceT(["marginTop","marginBottom"]),marginBlock:xt.spaceT("marginBlock"),padding:xt.space("padding"),paddingTop:xt.space("paddingTop"),paddingBlockStart:xt.space("paddingBlockStart"),paddingRight:xt.space("paddingRight"),paddingBottom:xt.space("paddingBottom"),paddingBlockEnd:xt.space("paddingBlockEnd"),paddingLeft:xt.space("paddingLeft"),paddingInlineStart:xt.space("paddingInlineStart"),paddingInlineEnd:xt.space("paddingInlineEnd"),paddingX:xt.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:xt.space("paddingInline"),paddingY:xt.space(["paddingTop","paddingBottom"]),paddingBlock:xt.space("paddingBlock")};Object.assign(vo,{m:vo.margin,mt:vo.marginTop,mr:vo.marginRight,me:vo.marginInlineEnd,marginEnd:vo.marginInlineEnd,mb:vo.marginBottom,ml:vo.marginLeft,ms:vo.marginInlineStart,marginStart:vo.marginInlineStart,mx:vo.marginX,my:vo.marginY,p:vo.padding,pt:vo.paddingTop,py:vo.paddingY,px:vo.paddingX,pb:vo.paddingBottom,pl:vo.paddingLeft,ps:vo.paddingInlineStart,paddingStart:vo.paddingInlineStart,pr:vo.paddingRight,pe:vo.paddingInlineEnd,paddingEnd:vo.paddingInlineEnd});var jbe={textDecorationColor:xt.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:xt.shadows("textShadow")},Gbe={clipPath:!0,transform:xt.propT("transform",ii.transform),transformOrigin:!0,translateX:xt.spaceT("--chakra-translate-x"),translateY:xt.spaceT("--chakra-translate-y"),skewX:xt.degreeT("--chakra-skew-x"),skewY:xt.degreeT("--chakra-skew-y"),scaleX:xt.prop("--chakra-scale-x"),scaleY:xt.prop("--chakra-scale-y"),scale:xt.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:xt.degreeT("--chakra-rotate")},Kbe={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:xt.prop("transitionDuration","transition.duration"),transitionProperty:xt.prop("transitionProperty","transition.property"),transitionTimingFunction:xt.prop("transitionTimingFunction","transition.easing")},Wbe={fontFamily:xt.prop("fontFamily","fonts"),fontSize:xt.prop("fontSize","fontSizes",ii.px),fontWeight:xt.prop("fontWeight","fontWeights"),lineHeight:xt.prop("lineHeight","lineHeights"),letterSpacing:xt.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(e){if(e===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},qbe={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:xt.spaceT("scrollMargin"),scrollMarginTop:xt.spaceT("scrollMarginTop"),scrollMarginBottom:xt.spaceT("scrollMarginBottom"),scrollMarginLeft:xt.spaceT("scrollMarginLeft"),scrollMarginRight:xt.spaceT("scrollMarginRight"),scrollMarginX:xt.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:xt.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:xt.spaceT("scrollPadding"),scrollPaddingTop:xt.spaceT("scrollPaddingTop"),scrollPaddingBottom:xt.spaceT("scrollPaddingBottom"),scrollPaddingLeft:xt.spaceT("scrollPaddingLeft"),scrollPaddingRight:xt.spaceT("scrollPaddingRight"),scrollPaddingX:xt.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:xt.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function MX(e){return YA(e)&&e.reference?e.reference:String(e)}var eF=(e,...t)=>t.map(MX).join(` ${e} `).replace(/calc/g,""),iH=(...e)=>`calc(${eF("+",...e)})`,oH=(...e)=>`calc(${eF("-",...e)})`,yD=(...e)=>`calc(${eF("*",...e)})`,sH=(...e)=>`calc(${eF("/",...e)})`,aH=e=>{const t=MX(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:yD(t,-1)},i1=Object.assign(e=>({add:(...t)=>i1(iH(e,...t)),subtract:(...t)=>i1(oH(e,...t)),multiply:(...t)=>i1(yD(e,...t)),divide:(...t)=>i1(sH(e,...t)),negate:()=>i1(aH(e)),toString:()=>e.toString()}),{add:iH,subtract:oH,multiply:yD,divide:sH,negate:aH});function Xbe(e){const t=parseFloat(e.toString()),r=e.toString().replace(String(t),"");return{unitless:!r,value:t,unit:r}}function lH(e){if(e==null)return e;const{unitless:t}=Xbe(e);return t||typeof e=="number"?`${e}px`:e}function Zbe(e,t){const r=["@media screen"];return e&&r.push("and",`(min-width: ${lH(e)})`),t&&r.push("and",`(max-width: ${lH(t)})`),r.join(" ")}var ga={hover:(e,t)=>`${e}:hover ${t}, ${e}[data-hover] ${t}`,focus:(e,t)=>`${e}:focus ${t}, ${e}[data-focus] ${t}`,focusVisible:(e,t)=>`${e}:focus-visible ${t}`,focusWithin:(e,t)=>`${e}:focus-within ${t}`,active:(e,t)=>`${e}:active ${t}, ${e}[data-active] ${t}`,disabled:(e,t)=>`${e}:disabled ${t}, ${e}[data-disabled] ${t}`,invalid:(e,t)=>`${e}:invalid ${t}, ${e}[data-invalid] ${t}`,checked:(e,t)=>`${e}:checked ${t}, ${e}[data-checked] ${t}`,indeterminate:(e,t)=>`${e}:indeterminate ${t}, ${e}[aria-checked=mixed] ${t}, ${e}[data-indeterminate] ${t}`,readOnly:(e,t)=>`${e}:read-only ${t}, ${e}[readonly] ${t}, ${e}[data-read-only] ${t}`,expanded:(e,t)=>`${e}:read-only ${t}, ${e}[aria-expanded=true] ${t}, ${e}[data-expanded] ${t}`,placeholderShown:(e,t)=>`${e}:placeholder-shown ${t}`},tf=e=>RX(t=>e(t,"&"),"[role=group]","[data-group]",".group"),IA=e=>RX(t=>e(t,"~ &"),"[data-peer]",".peer"),RX=(e,...t)=>t.map(e).join(", "),KO={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:tf(ga.hover),_peerHover:IA(ga.hover),_groupFocus:tf(ga.focus),_peerFocus:IA(ga.focus),_groupFocusVisible:tf(ga.focusVisible),_peerFocusVisible:IA(ga.focusVisible),_groupActive:tf(ga.active),_peerActive:IA(ga.active),_groupDisabled:tf(ga.disabled),_peerDisabled:IA(ga.disabled),_groupInvalid:tf(ga.invalid),_peerInvalid:IA(ga.invalid),_groupChecked:tf(ga.checked),_peerChecked:IA(ga.checked),_groupFocusWithin:tf(ga.focusWithin),_peerFocusWithin:IA(ga.focusWithin),_peerPlaceholderShown:IA(ga.placeholderShown),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]"},Ybe=Object.keys(KO);function Jbe(e,t=[]){const r=Object.assign({},e);for(const n of t)n in r&&delete r[n];return r}var WO=Os({},iE,Si,Rbe,pT,Zc,kbe,Hbe,Dbe,PX,Qbe,px,gD,vo,qbe,Wbe,jbe,Gbe,Lbe,Kbe);Object.assign({},vo,Zc,pT,PX,px);var $be=[...Object.keys(WO),...Ybe],ewe={...WO,...KO},twe=e=>e in ewe,rwe=e=>t=>{if(!t.__breakpoints)return e;const{isResponsive:r,toArrayValue:n,media:i}=t.__breakpoints,l={};for(const h in e){let p=bf(e[h],t);if(p==null)continue;if(p=YA(p)&&r(p)?n(p):p,!Array.isArray(p)){l[h]=p;continue}const o=p.slice(0,i.length).length;for(let _=0;_<o;_+=1){const C=i==null?void 0:i[_];if(!C){l[h]=p[_];continue}l[C]=l[C]||{},p[_]!=null&&(l[C][h]=p[_])}}return l};function nwe(e){const t=[];let r="",n=!1;for(let i=0;i<e.length;i++){const l=e[i];l==="("?(n=!0,r+=l):l===")"?(n=!1,r+=l):l===","&&!n?(t.push(r),r=""):r+=l}return r=r.trim(),r&&t.push(r),t}function iwe(e){return/^var\(--.+\)$/.test(e)}var owe=(e,t)=>e.startsWith("--")&&typeof t=="string"&&!iwe(t),swe=(e,t)=>{var r,n;if(t==null)return t;const i=o=>{var _,C;return(C=(_=e.__cssMap)==null?void 0:_[o])==null?void 0:C.varRef},l=o=>{var _;return(_=i(o))!=null?_:o},[h,p]=nwe(t);return t=(n=(r=i(h))!=null?r:l(p))!=null?n:l(t),t};function awe(e){const{configs:t={},pseudos:r={},theme:n}=e,i=(l,h=!1)=>{var p,o,_;const C=bf(l,n),M=rwe(C)(n);let L={};for(let z in M){const j=M[z];let K=bf(j,n);z in r&&(z=r[z]),owe(z,K)&&(K=swe(n,K));let $=t[z];if($===!0&&($={property:z}),YA(K)){L[z]=(p=L[z])!=null?p:{},L[z]=Os({},L[z],i(K,!0));continue}let q=(_=(o=$==null?void 0:$.transform)==null?void 0:o.call($,K,n,C))!=null?_:K;q=$!=null&&$.processResult?i(q,!0):q;const ee=bf($==null?void 0:$.property,n);if(!h&&($!=null&&$.static)){const ie=bf($.static,n);L=Os({},L,ie)}if(ee&&Array.isArray(ee)){for(const ie of ee)L[ie]=q;continue}if(ee){ee==="&"&&YA(q)?L=Os({},L,q):L[ee]=q;continue}if(YA(q)){L=Os({},L,q);continue}L[z]=q}return L};return i}var lwe=e=>t=>awe({theme:t,pseudos:KO,configs:WO})(e);function cwe(e,t){if(Array.isArray(e))return e;if(YA(e))return t(e);if(e!=null)return[e]}function uwe(e,t){for(let r=t+1;r<e.length;r++)if(e[r]!=null)return r;return-1}function hwe(e){const t=e.__breakpoints;return function(n,i,l,h){var p,o;if(!t)return;const _={},C=cwe(l,t.toArrayValue);if(!C)return _;const M=C.length,L=M===1,z=!!n.parts;for(let j=0;j<M;j++){const K=t.details[j],$=t.details[uwe(C,j)],q=Zbe(K.minW,$==null?void 0:$._minW),ee=bf((p=n[i])==null?void 0:p[C[j]],h);if(ee){if(z){(o=n.parts)==null||o.forEach(ie=>{Os(_,{[ie]:L?ee[ie]:{[q]:ee[ie]}})});continue}if(!z){L?Os(_,ee):_[q]=ee;continue}_[q]=ee}}return _}}function Awe(e){return t=>{var r;const{variant:n,size:i,theme:l}=t,h=hwe(l);return Os({},bf((r=e.baseStyle)!=null?r:{},t),h(e,"sizes",i,t),h(e,"variants",n,t))}}function tF(e){return Jbe(e,["styleConfig","size","variant","colorScheme"])}function dwe(e,t){const r={};return Object.keys(e).forEach(n=>{t.includes(n)||(r[n]=e[n])}),r}function fwe(e,t,r,n){const i=typeof t=="string"?t.split("."):[t];for(n=0;n<i.length&&e;n+=1)e=e[i[n]];return e===void 0?r:e}var pwe=e=>{const t=new WeakMap;return(n,i,l,h)=>{if(typeof n>"u")return e(n,i,l);t.has(n)||t.set(n,new Map);const p=t.get(n);if(p.has(i))return p.get(i);const o=e(n,i,l,h);return p.set(i,o),o}},mwe=pwe(fwe);function kX(e,t){const r={};return Object.keys(e).forEach(n=>{const i=e[n];t(i,n,e)&&(r[n]=i)}),r}var DX=e=>kX(e,t=>t!=null);function gwe(e){return typeof e=="function"}function ywe(e,...t){return gwe(e)?e(...t):e}function LX(e,t={}){var r;const{styleConfig:n,...i}=t,{theme:l,colorMode:h}=pbe(),p=e?mwe(l,`components.${e}`):void 0,o=n||p,_=Os({theme:l,colorMode:h},(r=o==null?void 0:o.defaultProps)!=null?r:{},DX(dwe(i,["children"]))),C=Re.useRef({});if(o){const L=Awe(o)(_);xq(C.current,L)||(C.current=L)}return C.current}function rF(e,t={}){return LX(e,t)}function sA(e,t={}){return LX(e,t)}var vwe=new Set([...$be,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),_we=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function xwe(e){return _we.has(e)||!vwe.has(e)}function bwe(e,...t){if(e==null)throw new TypeError("Cannot convert undefined or null to object");const r={...e};for(const n of t)if(n!=null)for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(i in r&&delete r[i],r[i]=n[i]);return r}var cH,wwe=(cH=cb.default)!=null?cH:cb,Bwe=({baseStyle:e})=>t=>{const{theme:r,css:n,__css:i,sx:l,...h}=t,p=kX(h,(M,L)=>twe(L)),o=ywe(e,t),_=bwe({},i,o,DX(p),l),C=lwe(_)(t.theme);return n?[C,n]:C};function QR(e,t){const{baseStyle:r,...n}=t??{};n.shouldForwardProp||(n.shouldForwardProp=xwe);const i=Bwe({baseStyle:r}),l=wwe(e,n)(i);return Yh.forwardRef(function(o,_){const{colorMode:C,forced:M}=jO();return Yh.createElement(l,{ref:_,"data-theme":M?C:void 0,...o})})}function Cwe(){const e=new Map;return new Proxy(QR,{apply(t,r,n){return QR(...n)},get(t,r){return e.has(r)||e.set(r,QR(r)),e.get(r)}})}var yu=Cwe();function Ym(e){return Re.forwardRef(e)}var[Swe,Ewe]=$b({name:"FormControlStylesContext",errorMessage:`useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormControl />" `}),[Twe,OX]=$b({strict:!1,name:"FormControlContext"});function Iwe(e){const{id:t,isRequired:r,isInvalid:n,isDisabled:i,isReadOnly:l,...h}=e,p=Re.useId(),o=t||`field-${p}`,_=`${o}-label`,C=`${o}-feedback`,M=`${o}-helptext`,[L,z]=Re.useState(!1),[j,K]=Re.useState(!1),[$,q]=Re.useState(!1),ee=Re.useCallback((se={},re=null)=>({id:M,...se,ref:db(re,de=>{de&&K(!0)})}),[M]),ie=Re.useCallback((se={},re=null)=>({...se,ref:re,"data-focus":ef($),"data-disabled":ef(i),"data-invalid":ef(n),"data-readonly":ef(l),id:se.id!==void 0?se.id:_,htmlFor:se.htmlFor!==void 0?se.htmlFor:o}),[o,i,$,n,l,_]),fe=Re.useCallback((se={},re=null)=>({id:C,...se,ref:db(re,de=>{de&&z(!0)}),"aria-live":"polite"}),[C]),me=Re.useCallback((se={},re=null)=>({...se,...h,ref:re,role:"group","data-focus":ef($),"data-disabled":ef(i),"data-invalid":ef(n),"data-readonly":ef(l)}),[h,i,$,n,l]),ye=Re.useCallback((se={},re=null)=>({...se,ref:re,role:"presentation","aria-hidden":!0,children:se.children||"*"}),[]);return{isRequired:!!r,isInvalid:!!n,isReadOnly:!!l,isDisabled:!!i,isFocused:!!$,onFocus:()=>q(!0),onBlur:()=>q(!1),hasFeedbackText:L,setHasFeedbackText:z,hasHelpText:j,setHasHelpText:K,id:o,labelId:_,feedbackId:C,helpTextId:M,htmlProps:h,getHelpTextProps:ee,getErrorMessageProps:fe,getRootProps:me,getLabelProps:ie,getRequiredIndicatorProps:ye}}var Fwe=Ym(function(t,r){const n=sA("Form",t),i=tF(t),{getRootProps:l,htmlProps:h,...p}=Iwe(i),o=Vm("chakra-form-control",t.className);return $e.jsx(Twe,{value:p,children:$e.jsx(Swe,{value:n,children:$e.jsx(yu.div,{...l({},r),className:o,__css:n.container})})})});Fwe.displayName="FormControl";var Pwe=Ym(function(t,r){const n=OX(),i=Ewe(),l=Vm("chakra-form__helper-text",t.className);return $e.jsx(yu.div,{...n==null?void 0:n.getHelpTextProps(t,r),__css:i.helperText,className:l})});Pwe.displayName="FormHelperText";var uH={path:$e.jsxs("g",{stroke:"currentColor",strokeWidth:"1.5",children:[$e.jsx("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),$e.jsx("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),$e.jsx("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},nF=Ym((e,t)=>{const{as:r,viewBox:n,color:i="currentColor",focusable:l=!1,children:h,className:p,__css:o,..._}=e,C=Vm("chakra-icon",p),M=rF("Icon",e),L={w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:i,...o,...M},z={ref:t,focusable:l,className:C,__css:L},j=n??uH.viewBox;if(r&&typeof r!="string")return $e.jsx(yu.svg,{as:r,...z,..._});const K=h??uH.path;return $e.jsx(yu.svg,{verticalAlign:"middle",viewBox:j,...z,..._,children:K})});nF.displayName="Icon";function Mwe(e){const{isDisabled:t,isInvalid:r,isReadOnly:n,isRequired:i,...l}=Rwe(e);return{...l,disabled:t,readOnly:n,required:i,"aria-invalid":VR(r),"aria-required":VR(i),"aria-readonly":VR(n)}}function Rwe(e){var t,r,n;const i=OX(),{id:l,disabled:h,readOnly:p,required:o,isRequired:_,isInvalid:C,isReadOnly:M,isDisabled:L,onFocus:z,onBlur:j,...K}=e,$=e["aria-describedby"]?[e["aria-describedby"]]:[];return i!=null&&i.hasFeedbackText&&(i!=null&&i.isInvalid)&&$.push(i.feedbackId),i!=null&&i.hasHelpText&&$.push(i.helpTextId),{...K,"aria-describedby":$.join(" ")||void 0,id:l??(i==null?void 0:i.id),isDisabled:(t=h??L)!=null?t:i==null?void 0:i.isDisabled,isReadOnly:(r=p??M)!=null?r:i==null?void 0:i.isReadOnly,isRequired:(n=o??_)!=null?n:i==null?void 0:i.isRequired,isInvalid:C??(i==null?void 0:i.isInvalid),onFocus:rH(i==null?void 0:i.onFocus,z),onBlur:rH(i==null?void 0:i.onBlur,j)}}var UX=Object.freeze(["base","sm","md","lg","xl","2xl"]);function kwe(e,t=UX){const r={};return e.forEach((n,i)=>{const l=t[i];n!=null&&(r[l]=n)}),r}var ws=yu("div");ws.displayName="Box";var zX=Ym(function(t,r){const{size:n,centerContent:i=!0,...l}=t,h=i?{display:"flex",alignItems:"center",justifyContent:"center"}:{};return $e.jsx(ws,{ref:r,boxSize:n,__css:{...h,flexShrink:0,flexGrow:0},...l})});zX.displayName="Square";var Dwe=Ym(function(t,r){const{size:n,...i}=t;return $e.jsx(zX,{size:n,ref:r,borderRadius:"9999px",...i})});Dwe.displayName="Circle";var VX=Ym(function(t,r){const{borderLeftWidth:n,borderBottomWidth:i,borderTopWidth:l,borderRightWidth:h,borderWidth:p,borderStyle:o,borderColor:_,...C}=rF("Divider",t),{className:M,orientation:L="horizontal",__css:z,...j}=tF(t),K={vertical:{borderLeftWidth:n||h||p||"1px",height:"100%"},horizontal:{borderBottomWidth:i||l||p||"1px",width:"100%"}};return $e.jsx(yu.hr,{ref:r,"aria-orientation":L,...j,__css:{...C,border:"0",borderColor:_,borderStyle:o,...K[L],...z},className:Vm("chakra-divider",M)})});VX.displayName="Divider";var NX=Re.createContext({getDocument(){return document},getWindow(){return window}});NX.displayName="EnvironmentContext";function Lwe({defer:e}={}){const[,t]=Re.useReducer(r=>r+1,0);return fbe(()=>{e&&t()},[e]),Re.useContext(NX)}function Owe(e,t={}){const{ssr:r=!0,fallback:n}=t,{getWindow:i}=Lwe(),l=Array.isArray(e)?e:[e];let h=Array.isArray(n)?n:[n];h=h.filter(_=>_!=null);const[p,o]=Re.useState(()=>l.map((_,C)=>({media:_,matches:r?!!h[C]:i().matchMedia(_).matches})));return Re.useEffect(()=>{const _=i();o(l.map(L=>({media:L,matches:_.matchMedia(L).matches})));const C=l.map(L=>_.matchMedia(L)),M=L=>{o(z=>z.slice().map(j=>j.media===L.media?{...j,matches:L.matches}:j))};return C.forEach(L=>{typeof L.addListener=="function"?L.addListener(M):L.addEventListener("change",M)}),()=>{C.forEach(L=>{typeof L.removeListener=="function"?L.removeListener(M):L.removeEventListener("change",M)})}},[i]),p.map(_=>_.matches)}function Uwe(e,t,r=UX){let n=Object.keys(e).indexOf(t);if(n!==-1)return e[t];let i=r.indexOf(t);for(;i>=0;){const l=r[i];if(e.hasOwnProperty(l)){n=i;break}i-=1}if(n!==-1){const l=r[n];return e[l]}}function zwe(e){var t,r;const n=YA(e)?e:{fallback:e??"base"},l=nv().__breakpoints.details.map(({minMaxQuery:_,breakpoint:C})=>({breakpoint:C,query:_.replace("@media screen and ","")})),h=l.map(_=>_.breakpoint===n.fallback),o=Owe(l.map(_=>_.query),{fallback:h,ssr:n.ssr}).findIndex(_=>_==!0);return(r=(t=l[o])==null?void 0:t.breakpoint)!=null?r:n.fallback}function Vwe(e,t){var r;const n=YA(t)?t:{fallback:t??"base"},i=zwe(n),l=nv();if(!i)return;const h=Array.from(((r=l.__breakpoints)==null?void 0:r.keys)||[]),p=Array.isArray(e)?Object.fromEntries(Object.entries(kwe(e,h)).map(([o,_])=>[o,_])):e;return Uwe(p,i,h)}var Nwe=QL({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),QX=Ym((e,t)=>{const r=rF("Spinner",e),{label:n="Loading...",thickness:i="2px",speed:l="0.45s",emptyColor:h="transparent",className:p,...o}=tF(e),_=Vm("chakra-spinner",p),C={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:i,borderBottomColor:h,borderLeftColor:h,animation:`${Nwe} ${l} linear infinite`,...r};return $e.jsx(yu.div,{ref:t,__css:C,className:_,...o,children:n&&$e.jsx(yu.span,{srOnly:!0,children:n})})});QX.displayName="Spinner";var Qwe=Object.defineProperty,Hwe=(e,t,r)=>t in e?Qwe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Zo=(e,t,r)=>(Hwe(e,typeof t!="symbol"?t+"":t,r),r);function hH(e){return e.sort((t,r)=>{const n=t.compareDocumentPosition(r);if(n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(n&Node.DOCUMENT_POSITION_DISCONNECTED||n&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}var jwe=e=>typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE;function AH(e,t,r){let n=e+1;return r&&n>=t&&(n=0),n}function dH(e,t,r){let n=e-1;return r&&n<0&&(n=t),n}var vD=typeof window<"u"?Re.useLayoutEffect:Re.useEffect,mT=e=>e,Gwe=class{constructor(){Zo(this,"descendants",new Map),Zo(this,"register",e=>{if(e!=null)return jwe(e)?this.registerNode(e):t=>{this.registerNode(t,e)}}),Zo(this,"unregister",e=>{this.descendants.delete(e);const t=hH(Array.from(this.descendants.keys()));this.assignIndex(t)}),Zo(this,"destroy",()=>{this.descendants.clear()}),Zo(this,"assignIndex",e=>{this.descendants.forEach(t=>{const r=e.indexOf(t.node);t.index=r,t.node.dataset.index=t.index.toString()})}),Zo(this,"count",()=>this.descendants.size),Zo(this,"enabledCount",()=>this.enabledValues().length),Zo(this,"values",()=>Array.from(this.descendants.values()).sort((t,r)=>t.index-r.index)),Zo(this,"enabledValues",()=>this.values().filter(e=>!e.disabled)),Zo(this,"item",e=>{if(this.count()!==0)return this.values()[e]}),Zo(this,"enabledItem",e=>{if(this.enabledCount()!==0)return this.enabledValues()[e]}),Zo(this,"first",()=>this.item(0)),Zo(this,"firstEnabled",()=>this.enabledItem(0)),Zo(this,"last",()=>this.item(this.descendants.size-1)),Zo(this,"lastEnabled",()=>{const e=this.enabledValues().length-1;return this.enabledItem(e)}),Zo(this,"indexOf",e=>{var t,r;return e&&(r=(t=this.descendants.get(e))==null?void 0:t.index)!=null?r:-1}),Zo(this,"enabledIndexOf",e=>e==null?-1:this.enabledValues().findIndex(t=>t.node.isSameNode(e))),Zo(this,"next",(e,t=!0)=>{const r=AH(e,this.count(),t);return this.item(r)}),Zo(this,"nextEnabled",(e,t=!0)=>{const r=this.item(e);if(!r)return;const n=this.enabledIndexOf(r.node),i=AH(n,this.enabledCount(),t);return this.enabledItem(i)}),Zo(this,"prev",(e,t=!0)=>{const r=dH(e,this.count()-1,t);return this.item(r)}),Zo(this,"prevEnabled",(e,t=!0)=>{const r=this.item(e);if(!r)return;const n=this.enabledIndexOf(r.node),i=dH(n,this.enabledCount()-1,t);return this.enabledItem(i)}),Zo(this,"registerNode",(e,t)=>{if(!e||this.descendants.has(e))return;const r=Array.from(this.descendants.keys()).concat(e),n=hH(r);t!=null&&t.disabled&&(t.disabled=!!t.disabled);const i={node:e,index:-1,...t};this.descendants.set(e,i),this.assignIndex(n)})}};function Kwe(){const e=Re.useRef(new Gwe);return vD(()=>()=>e.current.destroy()),e.current}var[Wwe,HX]=$b({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});function qwe(e){const t=HX(),[r,n]=Re.useState(-1),i=Re.useRef(null);vD(()=>()=>{i.current&&t.unregister(i.current)},[]),vD(()=>{if(!i.current)return;const h=Number(i.current.dataset.index);r!=h&&!Number.isNaN(h)&&n(h)});const l=mT(e?t.register(e):t.register);return{descendants:t,index:r,enabledIndex:t.enabledIndexOf(i.current),register:db(l,i)}}function Xwe(){return[mT(Wwe),()=>mT(HX()),()=>Kwe(),i=>qwe(i)]}function jX(e){return e!=null&&typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}function GX(e){var t;if(!jX(e))return!1;const r=(t=e.ownerDocument.defaultView)!=null?t:window;return e instanceof r.HTMLElement}function Zwe(e){var t,r;return(r=(t=KX(e))==null?void 0:t.defaultView)!=null?r:window}function KX(e){return jX(e)?e.ownerDocument:document}function Ywe(e){return KX(e).activeElement}var WX=e=>e.hasAttribute("tabindex"),Jwe=e=>WX(e)&&e.tabIndex===-1;function $we(e){return!!e.getAttribute("disabled")||!!e.getAttribute("aria-disabled")}function qX(e){return e.parentElement&&qX(e.parentElement)?!0:e.hidden}function eBe(e){const t=e.getAttribute("contenteditable");return t!=="false"&&t!=null}function tBe(e){if(!GX(e)||qX(e)||$we(e))return!1;const{localName:t}=e;if(["input","select","textarea","button"].indexOf(t)>=0)return!0;const n={a:()=>e.hasAttribute("href"),audio:()=>e.hasAttribute("controls"),video:()=>e.hasAttribute("controls")};return t in n?n[t]():eBe(e)?!0:WX(e)}function rBe(e){return e?GX(e)&&tBe(e)&&!Jwe(e):!1}function gT(e,t=[]){const r=Re.useRef(e);return Re.useEffect(()=>{r.current=e}),Re.useCallback((...n)=>{var i;return(i=r.current)==null?void 0:i.call(r,...n)},t)}function nBe(e,t,r,n){const i=gT(r);return Re.useEffect(()=>{const l=typeof e=="function"?e():e??document;if(!(!r||!l))return l.addEventListener(t,i,n),()=>{l.removeEventListener(t,i,n)}},[t,e,n,i,r]),()=>{const l=typeof e=="function"?e():e??document;l==null||l.removeEventListener(t,i,n)}}function XX(e,t){const r=Re.useRef(!1),n=Re.useRef(!1);Re.useEffect(()=>{if(r.current&&n.current)return e();n.current=!0},t),Re.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[])}function iBe(e){const t=e.current;if(!t)return!1;const r=Ywe(t);return!r||t.contains(r)?!1:!!rBe(r)}function oBe(e,t){const{shouldFocus:r,visible:n,focusRef:i}=t,l=r&&!n;XX(()=>{if(!l||iBe(e))return;const h=(i==null?void 0:i.current)||e.current;let p;if(h)return p=requestAnimationFrame(()=>{h.focus({preventScroll:!0})}),()=>{cancelAnimationFrame(p)}},[l,e,i])}var m0=(e,t)=>({var:e,varRef:t?`var(${e}, ${t})`:`var(${e})`}),sc={arrowShadowColor:m0("--popper-arrow-shadow-color"),arrowSize:m0("--popper-arrow-size","8px"),arrowSizeHalf:m0("--popper-arrow-size-half"),arrowBg:m0("--popper-arrow-bg"),transformOrigin:m0("--popper-transform-origin"),arrowOffset:m0("--popper-arrow-offset")};function sBe(e){if(e.includes("top"))return"1px 1px 0px 0 var(--popper-arrow-shadow-color)";if(e.includes("bottom"))return"-1px -1px 0px 0 var(--popper-arrow-shadow-color)";if(e.includes("right"))return"-1px 1px 0px 0 var(--popper-arrow-shadow-color)";if(e.includes("left"))return"1px -1px 0px 0 var(--popper-arrow-shadow-color)"}var aBe={top:"bottom center","top-start":"bottom left","top-end":"bottom right",bottom:"top center","bottom-start":"top left","bottom-end":"top right",left:"right center","left-start":"right top","left-end":"right bottom",right:"left center","right-start":"left top","right-end":"left bottom"},lBe=e=>aBe[e],fH={scroll:!0,resize:!0};function cBe(e){let t;return typeof e=="object"?t={enabled:!0,options:{...fH,...e}}:t={enabled:e,options:fH},t}var uBe={name:"matchWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:e})=>{e.styles.popper.width=`${e.rects.reference.width}px`},effect:({state:e})=>()=>{const t=e.elements.reference;e.elements.popper.style.width=`${t.offsetWidth}px`}},hBe={name:"transformOrigin",enabled:!0,phase:"write",fn:({state:e})=>{pH(e)},effect:({state:e})=>()=>{pH(e)}},pH=e=>{e.elements.popper.style.setProperty(sc.transformOrigin.var,lBe(e.placement))},ABe={name:"positionArrow",enabled:!0,phase:"afterWrite",fn:({state:e})=>{dBe(e)}},dBe=e=>{var t;if(!e.placement)return;const r=fBe(e.placement);if((t=e.elements)!=null&&t.arrow&&r){Object.assign(e.elements.arrow.style,{[r.property]:r.value,width:sc.arrowSize.varRef,height:sc.arrowSize.varRef,zIndex:-1});const n={[sc.arrowSizeHalf.var]:`calc(${sc.arrowSize.varRef} / 2 - 1px)`,[sc.arrowOffset.var]:`calc(${sc.arrowSizeHalf.varRef} * -1)`};for(const i in n)e.elements.arrow.style.setProperty(i,n[i])}},fBe=e=>{if(e.startsWith("top"))return{property:"bottom",value:sc.arrowOffset.varRef};if(e.startsWith("bottom"))return{property:"top",value:sc.arrowOffset.varRef};if(e.startsWith("left"))return{property:"right",value:sc.arrowOffset.varRef};if(e.startsWith("right"))return{property:"left",value:sc.arrowOffset.varRef}},pBe={name:"innerArrow",enabled:!0,phase:"main",requires:["arrow"],fn:({state:e})=>{mH(e)},effect:({state:e})=>()=>{mH(e)}},mH=e=>{if(!e.elements.arrow)return;const t=e.elements.arrow.querySelector("[data-popper-arrow-inner]");if(!t)return;const r=sBe(e.placement);r&&t.style.setProperty("--popper-arrow-default-shadow",r),Object.assign(t.style,{transform:"rotate(45deg)",background:sc.arrowBg.varRef,top:0,left:0,width:"100%",height:"100%",position:"absolute",zIndex:"inherit",boxShadow:"var(--popper-arrow-shadow, var(--popper-arrow-default-shadow))"})},mBe={"start-start":{ltr:"left-start",rtl:"right-start"},"start-end":{ltr:"left-end",rtl:"right-end"},"end-start":{ltr:"right-start",rtl:"left-start"},"end-end":{ltr:"right-end",rtl:"left-end"},start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}},gBe={"auto-start":"auto-end","auto-end":"auto-start","top-start":"top-end","top-end":"top-start","bottom-start":"bottom-end","bottom-end":"bottom-start"};function yBe(e,t="ltr"){var r,n;const i=((r=mBe[e])==null?void 0:r[t])||e;return t==="ltr"?i:(n=gBe[e])!=null?n:i}function vBe(e={}){const{enabled:t=!0,modifiers:r,placement:n="bottom",strategy:i="absolute",arrowPadding:l=8,eventListeners:h=!0,offset:p,gutter:o=8,flip:_=!0,boundary:C="clippingParents",preventOverflow:M=!0,matchWidth:L,direction:z="ltr"}=e,j=Re.useRef(null),K=Re.useRef(null),$=Re.useRef(null),q=yBe(n,z),ee=Re.useRef(()=>{}),ie=Re.useCallback(()=>{var _e;!t||!j.current||!K.current||((_e=ee.current)==null||_e.call(ee),$.current=f_e(j.current,K.current,{placement:q,modifiers:[pBe,ABe,hBe,{...uBe,enabled:!!L},{name:"eventListeners",...cBe(h)},{name:"arrow",options:{padding:l}},{name:"offset",options:{offset:p??[0,o]}},{name:"flip",enabled:!!_,options:{padding:8}},{name:"preventOverflow",enabled:!!M,options:{boundary:C}},...r??[]],strategy:i}),$.current.forceUpdate(),ee.current=$.current.destroy)},[q,t,r,L,h,l,p,o,_,M,C,i]);Re.useEffect(()=>()=>{var _e;!j.current&&!K.current&&((_e=$.current)==null||_e.destroy(),$.current=null)},[]);const fe=Re.useCallback(_e=>{j.current=_e,ie()},[ie]),me=Re.useCallback((_e={},ve=null)=>({..._e,ref:db(fe,ve)}),[fe]),ye=Re.useCallback(_e=>{K.current=_e,ie()},[ie]),se=Re.useCallback((_e={},ve=null)=>({..._e,ref:db(ye,ve),style:{..._e.style,position:i,minWidth:L?void 0:"max-content",inset:"0 auto auto 0"}}),[i,ye,L]),re=Re.useCallback((_e={},ve=null)=>{const{size:Pe,shadowColor:Ee,bg:Ht,style:Xt,...gt}=_e;return{...gt,ref:ve,"data-popper-arrow":"",style:_Be(_e)}},[]),de=Re.useCallback((_e={},ve=null)=>({..._e,ref:ve,"data-popper-arrow-inner":""}),[]);return{update(){var _e;(_e=$.current)==null||_e.update()},forceUpdate(){var _e;(_e=$.current)==null||_e.forceUpdate()},transformOrigin:sc.transformOrigin.varRef,referenceRef:fe,popperRef:ye,getPopperProps:se,getArrowProps:re,getArrowInnerProps:de,getReferenceProps:me}}function _Be(e){const{size:t,shadowColor:r,bg:n,style:i}=e,l={...i,position:"absolute"};return t&&(l["--popper-arrow-size"]=t),r&&(l["--popper-arrow-shadow-color"]=r),n&&(l["--popper-arrow-bg"]=n),l}function xBe(e={}){const{onClose:t,onOpen:r,isOpen:n,id:i}=e,l=gT(r),h=gT(t),[p,o]=Re.useState(e.defaultIsOpen||!1),_=n!==void 0?n:p,C=n!==void 0,M=Re.useId(),L=i??`disclosure-${M}`,z=Re.useCallback(()=>{C||o(!1),h==null||h()},[C,h]),j=Re.useCallback(()=>{C||o(!0),l==null||l()},[C,l]),K=Re.useCallback(()=>{_?z():j()},[_,j,z]);function $(ee={}){return{...ee,"aria-expanded":_,"aria-controls":L,onClick(ie){var fe;(fe=ee.onClick)==null||fe.call(ee,ie),K()}}}function q(ee={}){return{...ee,hidden:!_,id:L}}return{isOpen:_,onOpen:j,onClose:z,onToggle:K,isControlled:C,getButtonProps:$,getDisclosureProps:q}}function bBe(e){const{ref:t,handler:r,enabled:n=!0}=e,i=gT(r),h=Re.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}).current;Re.useEffect(()=>{if(!n)return;const p=M=>{HR(M,t)&&(h.isPointerDown=!0)},o=M=>{if(h.ignoreEmulatedMouseEvents){h.ignoreEmulatedMouseEvents=!1;return}h.isPointerDown&&r&&HR(M,t)&&(h.isPointerDown=!1,i(M))},_=M=>{h.ignoreEmulatedMouseEvents=!0,r&&h.isPointerDown&&HR(M,t)&&(h.isPointerDown=!1,i(M))},C=ZX(t.current);return C.addEventListener("mousedown",p,!0),C.addEventListener("mouseup",o,!0),C.addEventListener("touchstart",p,!0),C.addEventListener("touchend",_,!0),()=>{C.removeEventListener("mousedown",p,!0),C.removeEventListener("mouseup",o,!0),C.removeEventListener("touchstart",p,!0),C.removeEventListener("touchend",_,!0)}},[r,t,i,h,n])}function HR(e,t){var r;const n=e.target;return n&&!ZX(n).contains(n)?!1:!((r=t.current)!=null&&r.contains(n))}function ZX(e){var t;return(t=e==null?void 0:e.ownerDocument)!=null?t:document}function wBe(e){const{isOpen:t,ref:r}=e,[n,i]=Re.useState(t),[l,h]=Re.useState(!1);return Re.useEffect(()=>{l||(i(t),h(!0))},[t,l,n]),nBe(()=>r.current,"animationend",()=>{i(t)}),{present:!(t?!1:!n),onComplete(){var o;const _=Zwe(r.current),C=new _.CustomEvent("animationend",{bubbles:!0});(o=r.current)==null||o.dispatchEvent(C)}}}var[BBe,t5e,CBe,r5e]=Xwe(),[SBe,n5e]=$b({strict:!1,name:"MenuContext"});function EBe(e,...t){const r=Re.useId(),n=e||r;return Re.useMemo(()=>t.map(i=>`${i}-${n}`),[n,t])}function TBe(e){var t;return(t=e==null?void 0:e.ownerDocument)!=null?t:document}function IBe(e={}){const{id:t,closeOnSelect:r=!0,closeOnBlur:n=!0,initialFocusRef:i,autoSelect:l=!0,isLazy:h,isOpen:p,defaultIsOpen:o,onClose:_,onOpen:C,placement:M="bottom-start",lazyBehavior:L="unmount",direction:z,computePositionOnMount:j=!1,...K}=e,$=Re.useRef(null),q=Re.useRef(null),ee=CBe(),ie=Re.useCallback(()=>{requestAnimationFrame(()=>{var $t;($t=$.current)==null||$t.focus({preventScroll:!1})})},[]),fe=Re.useCallback(()=>{const $t=setTimeout(()=>{var Vt;if(i)(Vt=i.current)==null||Vt.focus();else{const Dr=ee.firstEnabled();Dr&&Ee(Dr.index)}});Mt.current.add($t)},[ee,i]),me=Re.useCallback(()=>{const $t=setTimeout(()=>{const Vt=ee.lastEnabled();Vt&&Ee(Vt.index)});Mt.current.add($t)},[ee]),ye=Re.useCallback(()=>{C==null||C(),l?fe():ie()},[l,fe,ie,C]),{isOpen:se,onOpen:re,onClose:de,onToggle:_e}=xBe({isOpen:p,defaultIsOpen:o,onClose:_,onOpen:ye});bBe({enabled:se&&n,ref:$,handler:$t=>{var Vt;(Vt=q.current)!=null&&Vt.contains($t.target)||de()}});const ve=vBe({...K,enabled:se||j,placement:M,direction:z}),[Pe,Ee]=Re.useState(-1);XX(()=>{se||Ee(-1)},[se]),oBe($,{focusRef:q,visible:se,shouldFocus:!0});const Ht=wBe({isOpen:se,ref:$}),[Xt,gt]=EBe(t,"menu-button","menu-list"),jt=Re.useCallback(()=>{re(),ie()},[re,ie]),Mt=Re.useRef(new Set([]));Re.useEffect(()=>{const $t=Mt.current;return()=>{$t.forEach(Vt=>clearTimeout(Vt)),$t.clear()}},[]);const Yt=Re.useCallback(()=>{re(),fe()},[fe,re]),ht=Re.useCallback(()=>{re(),me()},[re,me]),lr=Re.useCallback(()=>{var $t,Vt;const Dr=TBe($.current),kr=($t=$.current)==null?void 0:$t.contains(Dr.activeElement);if(!(se&&!kr))return;const Lr=(Vt=ee.item(Pe))==null?void 0:Vt.node;Lr==null||Lr.focus({preventScroll:!0})},[se,Pe,ee]),ir=Re.useRef(null);return{openAndFocusMenu:jt,openAndFocusFirstItem:Yt,openAndFocusLastItem:ht,onTransitionEnd:lr,unstable__animationState:Ht,descendants:ee,popper:ve,buttonId:Xt,menuId:gt,forceUpdate:ve.forceUpdate,orientation:"vertical",isOpen:se,onToggle:_e,onOpen:re,onClose:de,menuRef:$,buttonRef:q,focusedIndex:Pe,closeOnSelect:r,closeOnBlur:n,autoSelect:l,setFocusedIndex:Ee,isLazy:h,lazyBehavior:L,initialFocusRef:i,rafId:ir}}var[FBe,PBe]=$b({name:"MenuStylesContext",errorMessage:`useMenuStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Menu />" `}),YX=e=>{const{children:t}=e,r=sA("Menu",e),n=tF(e),{direction:i}=nv(),{descendants:l,...h}=IBe({...n,direction:i}),p=Re.useMemo(()=>h,[h]),{isOpen:o,onClose:_,forceUpdate:C}=p;return $e.jsx(BBe,{value:l,children:$e.jsx(SBe,{value:p,children:$e.jsx(FBe,{value:r,children:bf(t,{isOpen:o,onClose:_,forceUpdate:C})})})})};YX.displayName="Menu";var JX=e=>{const{className:t,children:r,...n}=e,i=PBe(),l=Re.Children.only(r),h=Re.isValidElement(l)?Re.cloneElement(l,{focusable:"false","aria-hidden":!0,className:Vm("chakra-menu__icon",l.props.className)}):null,p=Vm("chakra-menu__icon-wrapper",t);return $e.jsx(yu.span,{className:p,...n,__css:i.icon,children:h})};JX.displayName="MenuIcon";var MBe=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],gH=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=String(t).toLowerCase(),l=String(n.getOptionValue(r)).toLowerCase(),h=String(n.getOptionLabel(r)).toLowerCase();return l===i||h===i},jR={formatCreateLabel:function(t){return'Create "'.concat(t,'"')},isValidNewOption:function(t,r,n,i){return!(!t||r.some(function(l){return gH(t,l,i)})||n.some(function(l){return gH(t,l,i)}))},getNewOptionData:function(t,r){return{label:r,value:t,__isNew__:!0}}};function $X(e){var t=e.allowCreateWhileLoading,r=t===void 0?!1:t,n=e.createOptionPosition,i=n===void 0?"last":n,l=e.formatCreateLabel,h=l===void 0?jR.formatCreateLabel:l,p=e.isValidNewOption,o=p===void 0?jR.isValidNewOption:p,_=e.getNewOptionData,C=_===void 0?jR.getNewOptionData:_,M=e.onCreateOption,L=e.options,z=L===void 0?[]:L,j=e.onChange,K=ch(e,MBe),$=K.getOptionValue,q=$===void 0?xX:$,ee=K.getOptionLabel,ie=ee===void 0?_X:ee,fe=K.inputValue,me=K.isLoading,ye=K.isMulti,se=K.value,re=K.name,de=Re.useMemo(function(){return o(fe,AT(se),z,{getOptionValue:q,getOptionLabel:ie})?C(fe,h(fe)):void 0},[h,C,ie,q,fe,o,z,se]),_e=Re.useMemo(function(){return(r||!me)&&de?i==="first"?[de].concat(gy(z)):[].concat(gy(z),[de]):z},[r,i,me,de,z]),ve=Re.useCallback(function(Pe,Ee){if(Ee.action!=="select-option")return j(Pe,Ee);var Ht=Array.isArray(Pe)?Pe:[Pe];if(Ht[Ht.length-1]===de){if(M)M(fe);else{var Xt=C(fe,fe),gt={action:"create-option",name:re,option:Xt};j(R1(ye,[].concat(gy(AT(se)),[Xt]),Xt),gt)}return}j(Pe,Ee)},[C,fe,ye,re,de,M,j,se]);return Gr(Gr({},K),{},{options:_e,onChange:ve})}var RBe=Re.forwardRef(function(e,t){var r=JI(e),n=$X(r);return Re.createElement(Jb,$r({ref:t},n))}),kBe=RBe,DBe=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];function eZ(e){var t=e.defaultOptions,r=t===void 0?!1:t,n=e.cacheOptions,i=n===void 0?!1:n,l=e.loadOptions;e.options;var h=e.isLoading,p=h===void 0?!1:h,o=e.onInputChange,_=e.filterOption,C=_===void 0?null:_,M=ch(e,DBe),L=M.inputValue,z=Re.useRef(void 0),j=Re.useRef(!1),K=Re.useState(Array.isArray(r)?r:void 0),$=Js(K,2),q=$[0],ee=$[1],ie=Re.useState(typeof L<"u"?L:""),fe=Js(ie,2),me=fe[0],ye=fe[1],se=Re.useState(r===!0),re=Js(se,2),de=re[0],_e=re[1],ve=Re.useState(void 0),Pe=Js(ve,2),Ee=Pe[0],Ht=Pe[1],Xt=Re.useState([]),gt=Js(Xt,2),jt=gt[0],Mt=gt[1],Yt=Re.useState(!1),ht=Js(Yt,2),lr=ht[0],ir=ht[1],$t=Re.useState({}),Vt=Js($t,2),Dr=Vt[0],kr=Vt[1],Zr=Re.useState(void 0),Lr=Js(Zr,2),Ao=Lr[0],ji=Lr[1],Qe=Re.useState(void 0),no=Js(Qe,2),Io=no[0],ms=no[1];i!==Io&&(kr({}),ms(i)),r!==Ao&&(ee(Array.isArray(r)?r:void 0),ji(r)),Re.useEffect(function(){return j.current=!0,function(){j.current=!1}},[]);var Ot=Re.useCallback(function(Fo,Pr){if(!l)return Pr();var nn=l(Fo,Pr);nn&&typeof nn.then=="function"&&nn.then(Pr,function(){return Pr()})},[l]);Re.useEffect(function(){r===!0&&Ot(me,function(Fo){j.current&&(ee(Fo||[]),_e(!!z.current))})},[]);var Bs=Re.useCallback(function(Fo,Pr){var nn=$_e(Fo,Pr,o);if(!nn){z.current=void 0,ye(""),Ht(""),Mt([]),_e(!1),ir(!1);return}if(i&&Dr[nn])ye(nn),Ht(nn),Mt(Dr[nn]),_e(!1),ir(!1);else{var Ji=z.current={};ye(nn),_e(!0),ir(!Ee),Ot(nn,function(Po){j&&Ji===z.current&&(z.current=void 0,_e(!1),Ht(nn),Mt(Po||[]),ir(!1),kr(Po?Gr(Gr({},Dr),{},ty({},nn,Po)):Dr))})}},[i,Ot,Ee,Dr,o]),Oi=lr?[]:me&&Ee?jt:q||[];return Gr(Gr({},M),{},{options:Oi,isLoading:de||p,onInputChange:Bs,filterOption:C})}var LBe=Re.forwardRef(function(e,t){var r=eZ(e),n=JI(r);return Re.createElement(Jb,$r({ref:t},n))}),OBe=LBe,UBe=Re.forwardRef(function(e,t){var r=eZ(e),n=JI(r),i=$X(n);return Re.createElement(Jb,$r({ref:t},i))}),zBe=UBe,tZ=e=>{let{className:t,clearValue:r,cx:n,getStyles:i,getClassNames:l,getValue:h,hasValue:p,isMulti:o,isRtl:_,options:C,selectOption:M,selectProps:L,setValue:z,theme:j,...K}=e;return{...K}},VBe=e=>typeof e=="string"&&["sm","md","lg"].includes(e),NBe=e=>VBe(e)?e:e==="xs"?"sm":e==="xl"?"lg":"md",uh=e=>{let t=nv(),r=NBe(t.components.Input.defaultProps.size),n=e??r;return Vwe(typeof n=="string"?[n]:n,{fallback:"md"})||r},QBe=e=>{let{children:t,className:r,cx:n,innerProps:i,isDisabled:l,isRtl:h,hasValue:p,selectProps:{chakraStyles:o}}=e,_={position:"relative",direction:h?"rtl":void 0,...l?{cursor:"not-allowed"}:{}},C=o!=null&&o.container?o.container(_,e):_;return $e.jsx(ws,{...i,className:n({"--is-disabled":l,"--is-rtl":h,"--has-value":p},r),sx:C,children:t})},HBe=e=>{let{children:t,className:r,cx:n,isMulti:i,hasValue:l,innerProps:h,selectProps:{chakraStyles:p,size:o,variant:_,focusBorderColor:C,errorBorderColor:M,controlShouldRenderValue:L}}=e,z=uh(o),j=sA("Input",{size:z,variant:_,focusBorderColor:C,errorBorderColor:M}),K={display:i&&l&&L?"flex":"grid",alignItems:"center",flex:1,paddingY:"2px",paddingX:j.field.px,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},$=p!=null&&p.valueContainer?p.valueContainer(K,e):K;return $e.jsx(ws,{...h,className:n({"value-container":!0,"value-container--is-multi":i,"value-container--has-value":l},r),sx:$,children:t})},jBe=e=>{let{children:t,className:r,cx:n,innerProps:i,selectProps:{chakraStyles:l}}=e,h={display:"flex",alignItems:"center",alignSelf:"stretch",flexShrink:0},p=l!=null&&l.indicatorsContainer?l.indicatorsContainer(h,e):h;return $e.jsx(ws,{...i,className:n({indicators:!0},r),sx:p,children:t})},GBe=e=>{let{className:t,cx:r,children:n,innerRef:i,innerProps:l,isDisabled:h,isFocused:p,menuIsOpen:o,selectProps:{chakraStyles:_,size:C,variant:M,focusBorderColor:L,errorBorderColor:z,isInvalid:j,isReadOnly:K}}=e,$=uh(C),{field:{height:q,h:ee,...ie}}=sA("Input",{size:$,variant:M,focusBorderColor:L,errorBorderColor:z}),fe={...ie,position:"relative",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",padding:0,overflow:"hidden",height:"auto",minH:q||ee,...h?{pointerEvents:"none"}:{}},me=_!=null&&_.control?_.control(fe,e):fe;return $e.jsx(ws,{ref:i,className:r({control:!0,"control--is-disabled":h,"control--is-focused":p,"control--menu-is-open":o},t),sx:me,...l,"data-focus":p?!0:void 0,"data-focus-visible":p?!0:void 0,"data-invalid":j?!0:void 0,"data-disabled":h?!0:void 0,"data-readonly":K?!0:void 0,children:n})},KBe=e=>{let{className:t,cx:r,selectProps:{chakraStyles:n,useBasicStyles:i,variant:l}}=e,h={opacity:1,...i||l!=="outline"?{display:"none"}:{}},p=n!=null&&n.indicatorSeparator?n.indicatorSeparator(h,e):h;return $e.jsx(VX,{className:r({"indicator-separator":!0},t),sx:p,orientation:"vertical"})},WBe=e=>$e.jsx(nF,{role:"presentation",focusable:"false","aria-hidden":"true",...e,children:$e.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}),qBe=e=>{let{children:t,className:r,cx:n,innerProps:i,selectProps:{chakraStyles:l,useBasicStyles:h,size:p,focusBorderColor:o,errorBorderColor:_,variant:C}}=e,M=uh(p),L=sA("Input",{size:M,variant:C,focusBorderColor:o,errorBorderColor:_}),z={sm:"16px",md:"20px",lg:"24px"}[M],j={...L.addon,display:"flex",alignItems:"center",justifyContent:"center",height:"100%",borderRadius:0,borderWidth:0,fontSize:z,...h&&{background:"transparent",padding:0,width:6,marginRight:2,marginLeft:1,cursor:"inherit"}},K=l!=null&&l.dropdownIndicator?l.dropdownIndicator(j,e):j,$={height:"1em",width:"1em"},q=l!=null&&l.downChevron?l.downChevron($,e):$;return $e.jsx(ws,{...i,className:n({indicator:!0,"dropdown-indicator":!0},r),sx:K,children:t||$e.jsx(WBe,{sx:q})})},XBe=e=>$e.jsx(nF,{focusable:"false","aria-hidden":!0,...e,children:$e.jsx("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})}),ZBe=e=>{let{children:t,className:r,cx:n,innerProps:i,selectProps:{chakraStyles:l,size:h}}=e,p=uh(h),o={...rF("CloseButton",{size:p}),marginX:1,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,cursor:"pointer"},_=l!=null&&l.clearIndicator?l.clearIndicator(o,e):o,C={width:"1em",height:"1em"},M=l!=null&&l.crossIcon?l.crossIcon(C,e):C;return $e.jsx(ws,{role:"button",className:n({indicator:!0,"clear-indicator":!0},r),sx:_,"aria-label":"Clear selected options",...i,children:t||$e.jsx(XBe,{sx:M})})},YBe=e=>{let{className:t,cx:r,innerProps:n,selectProps:{chakraStyles:i,size:l},color:h,emptyColor:p,speed:o,thickness:_,spinnerSize:C}=e,M=uh(l),L={sm:"xs",md:"sm",lg:"md"}[M],z={marginRight:3},j=i!=null&&i.loadingIndicator?i.loadingIndicator(z,e):z;return $e.jsx(QX,{className:r({indicator:!0,"loading-indicator":!0},t),sx:j,...n,size:C||L,color:h,emptyColor:p,speed:o,thickness:_})},JBe=GBe,$Be=e=>{let{className:t,cx:r,value:n,selectProps:{chakraStyles:i,isReadOnly:l}}=e,{innerRef:h,isDisabled:p,isHidden:o,inputClassName:_,...C}=tZ(e),M={gridArea:"1 / 2",minW:"2px",border:0,margin:0,outline:0,padding:0},L={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content",color:"inherit",marginX:"0.125rem",paddingY:"0.125rem",visibility:p?"hidden":"visible",transform:n?"translateZ(0)":"",_after:{content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre",padding:0,...M}},z=i!=null&&i.inputContainer?i.inputContainer(L,e):L,j={background:0,opacity:o?0:1,width:"100%",...M},K=i!=null&&i.input?i.input(j,e):j;return $e.jsx(ws,{className:r({"input-container":!0},t),"data-value":n||"",sx:z,children:$e.jsx(yu.input,{className:r({input:!0},_),ref:h,sx:K,disabled:p,readOnly:l?!0:void 0,...C})})},eCe=$Be,tCe=e=>e?{bottom:"top",top:"bottom"}[e]:"top",rCe=e=>{let{className:t,cx:r,children:n,innerProps:i,innerRef:l,placement:h,selectProps:{chakraStyles:p}}=e,o={position:"absolute",[tCe(h)]:"100%",marginY:"8px",width:"100%",zIndex:1},_=p!=null&&p.menu?p.menu(o,e):o;return $e.jsx(YX,{children:$e.jsx(ws,{...i,ref:l,className:r({menu:!0},t),sx:_,children:n})})},nCe=rCe,iCe=e=>{var t;let{className:r,cx:n,innerRef:i,children:l,maxHeight:h,isMulti:p,innerProps:o,selectProps:{chakraStyles:_,size:C,variant:M,focusBorderColor:L,errorBorderColor:z}}=e,j=sA("Menu"),K=uh(C),$=sA("Input",{size:K,variant:M,focusBorderColor:L,errorBorderColor:z}).field,q={...j.list,minW:"100%",maxHeight:`${h}px`,overflowY:"auto","--input-border-radius":$==null?void 0:$["--input-border-radius"],borderRadius:($==null?void 0:$.borderRadius)||((t=j.list)==null?void 0:t.borderRadius),position:"relative",WebkitOverflowScrolling:"touch"},ee=_!=null&&_.menuList?_.menuList(q,e):q;return $e.jsx(ws,{...o,className:n({"menu-list":!0,"menu-list--is-multi":p},r),sx:ee,ref:i,children:l})},oCe=e=>{let{children:t,className:r,cx:n,innerProps:i,selectProps:{chakraStyles:l,size:h}}=e,p=uh(h),o={color:"chakra-subtle-text",textAlign:"center",paddingY:{sm:"6px",md:"8px",lg:"10px"}[p],fontSize:p},_=l!=null&&l.loadingMessage?l.loadingMessage(o,e):o;return $e.jsx(ws,{...i,className:n({"menu-notice":!0,"menu-notice--loading":!0},r),sx:_,children:t})},sCe=e=>{let{children:t,className:r,cx:n,innerProps:i,selectProps:{chakraStyles:l,size:h}}=e,p=uh(h),o={color:"chakra-subtle-text",textAlign:"center",paddingY:{sm:"6px",md:"8px",lg:"10px"}[p],fontSize:p},_=l!=null&&l.noOptionsMessage?l.noOptionsMessage(o,e):o;return $e.jsx(ws,{...i,className:n({"menu-notice":!0,"menu-notice--no-options":!0},r),sx:_,children:t})},aCe=e=>{let{children:t,className:r,cx:n,theme:i,getStyles:l,Heading:h,headingProps:p,label:o,selectProps:_,innerProps:C,getClassNames:M}=e,{chakraStyles:L}=_,z={},j=L!=null&&L.group?L.group(z,e):z;return $e.jsxs(ws,{...C,className:n({group:!0},r),sx:j,children:[$e.jsx(h,{...p,selectProps:_,cx:n,theme:i,getStyles:l,getClassNames:M,children:o}),$e.jsx(ws,{children:t})]})},lCe=e=>{let{cx:t,className:r,selectProps:{chakraStyles:n,size:i,hasStickyGroupHeaders:l}}=e,{data:h,...p}=tZ(e),o=sA("Menu"),_=uh(i),C={sm:"xs",md:"sm",lg:"md"},M={sm:"0.4rem 0.8rem",md:"0.5rem 1rem",lg:"0.6rem 1.2rem"},L={...o.groupTitle,fontSize:C[_],padding:M[_],margin:0,borderBottomWidth:l?"1px":0,position:l?"sticky":"static",top:-2,bg:o.list.bg,zIndex:1},z=n!=null&&n.groupHeading?n.groupHeading(L,e):L;return $e.jsx(ws,{...p,className:t({"group-heading":!0},r),sx:z})},cCe=e=>$e.jsx("svg",{viewBox:"0 0 14 14",width:"1em",height:"1em",...e,children:$e.jsx("polygon",{fill:"currentColor",points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"})}),uCe=e=>{let{className:t,cx:r,innerRef:n,innerProps:i,children:l,isFocused:h,isDisabled:p,isSelected:o,selectProps:{chakraStyles:_,size:C,isMulti:M,hideSelectedOptions:L,selectedOptionStyle:z,selectedOptionColorScheme:j}}=e,K=sA("Menu").item,$=uh(C),q={sm:"0.6rem",md:"0.8rem",lg:"1rem"},ee={sm:"0.3rem",md:"0.4rem",lg:"0.5rem"},ie=tH(`${j}.500`,`${j}.300`),fe=tH("white","black"),me=z==="check"&&(!M||L===!1),ye=z==="color",se={...K,cursor:"pointer",display:"flex",alignItems:"center",width:"100%",textAlign:"start",fontSize:$,paddingX:q[$],paddingY:ee[$],...ye&&{_selected:{bg:ie,color:fe,_active:{bg:ie}}}},re=_!=null&&_.option?_.option(se,e):se;return $e.jsxs(ws,{...i,className:r({option:!0,"option--is-disabled":p,"option--is-focused":h,"option--is-selected":o},t),sx:re,ref:n,"data-focus":h?!0:void 0,"aria-disabled":p?!0:void 0,"aria-selected":o,children:[me&&$e.jsx(JX,{fontSize:"0.8em",marginEnd:"0.75rem",opacity:o?1:0,children:$e.jsx(cCe,{})}),l]})},hCe=e=>typeof e=="object"&&e!==null&&"colorScheme"in e&&typeof e.colorScheme=="string",ACe=e=>typeof e=="object"&&e!==null&&"variant"in e&&typeof e.variant=="string",rZ=e=>typeof e=="object"&&e!==null&&"isFixed"in e&&typeof e.isFixed=="boolean",dCe=e=>{let{children:t,className:r,components:n,cx:i,data:l,innerProps:h,isDisabled:p,isFocused:o,removeProps:_,selectProps:C,cropWithEllipsis:M}=e,{Container:L,Label:z,Remove:j}=n,{chakraStyles:K,colorScheme:$,tagVariant:q,size:ee}=C,ie=uh(ee),fe="",me="",ye=!1;hCe(l)&&(fe=l.colorScheme),ACe(l)&&(me=l.variant),rZ(l)&&(ye=l.isFixed);let se=sA("Tag",{size:ie,colorScheme:fe||$,variant:me||q||(ye?"solid":"subtle")}),re={...se.container,display:"flex",alignItems:"center",minWidth:0,margin:"0.125rem"},de=K!=null&&K.multiValue?K.multiValue(re,e):re,_e={...se.label,overflow:"hidden",textOverflow:M||M===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},ve=K!=null&&K.multiValueLabel?K.multiValueLabel(_e,e):_e,Pe={...se.closeButton,display:"flex",alignItems:"center",justifyContent:"center"},Ee=K!=null&&K.multiValueRemove?K.multiValueRemove(Pe,e):Pe;return $e.jsxs(L,{data:l,innerProps:{className:i({"multi-value":!0,"multi-value--is-disabled":p},r),...h},sx:de,selectProps:C,children:[$e.jsx(z,{data:l,innerProps:{className:i({"multi-value__label":!0},r)},sx:ve,selectProps:C,children:t}),$e.jsx(j,{data:l,innerProps:{className:i({"multi-value__remove":!0},r),"aria-label":`Remove ${t||"option"}`,..._},sx:Ee,selectProps:C,isFocused:o})]})},fCe=e=>{let{children:t,innerProps:r,sx:n}=e;return $e.jsx(yu.span,{...r,sx:n,children:t})},pCe=e=>{let{children:t,innerProps:r,sx:n}=e;return $e.jsx(yu.span,{...r,sx:n,children:t})},mCe=e=>$e.jsx(nF,{verticalAlign:"inherit",viewBox:"0 0 512 512",...e,children:$e.jsx("path",{fill:"currentColor",d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})}),gCe=e=>{let{children:t,innerProps:r,isFocused:n,data:i,sx:l}=e;return rZ(i)&&i.isFixed?null:$e.jsx(ws,{...r,role:"button",sx:l,"data-focus":n?!0:void 0,"data-focus-visible":n?!0:void 0,children:t||$e.jsx(mCe,{})})},yCe=dCe,vCe=e=>{let{children:t,className:r,cx:n,innerProps:i,selectProps:{chakraStyles:l}}=e,h={gridArea:"1 / 1 / 2 / 3",color:"chakra-placeholder-color",mx:"0.125rem",userSelect:"none"},p=l!=null&&l.placeholder?l.placeholder(h,e):h;return $e.jsx(ws,{...i,className:n({placeholder:!0},r),sx:p,children:t})},_Ce=vCe,xCe=e=>{let{children:t,className:r,cx:n,isDisabled:i,innerProps:l,selectProps:{chakraStyles:h}}=e,p={gridArea:"1 / 1 / 2 / 3",mx:"0.125rem",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},o=h!=null&&h.singleValue?h.singleValue(p,e):p;return $e.jsx(ws,{className:n({"single-value":!0,"single-value--is-disabled":i},r),sx:o,...l,children:t})},bCe=xCe,wCe={ClearIndicator:ZBe,Control:JBe,DropdownIndicator:qBe,Group:aCe,GroupHeading:lCe,IndicatorSeparator:KBe,IndicatorsContainer:jBe,Input:eCe,LoadingIndicator:YBe,LoadingMessage:oCe,Menu:nCe,MenuList:iCe,MultiValue:yCe,MultiValueContainer:fCe,MultiValueLabel:pCe,MultiValueRemove:gCe,NoOptionsMessage:sCe,Option:uCe,Placeholder:_Ce,SelectContainer:QBe,SingleValue:bCe,ValueContainer:HBe},BCe=wCe,CCe=({components:e={},theme:t,size:r,colorScheme:n="gray",isDisabled:i,isInvalid:l,isReadOnly:h,required:p,isRequired:o,inputId:_,tagVariant:C,selectedOptionStyle:M="color",selectedOptionColorScheme:L,selectedOptionColor:z,variant:j,focusBorderColor:K,errorBorderColor:$,chakraStyles:q={},onFocus:ee,onBlur:ie,menuIsOpen:fe,...me})=>{var ye;let se=nv(),{variant:re}=se.components.Input.defaultProps,de=Mwe({id:_,isDisabled:i,isInvalid:l,isRequired:o,isReadOnly:h,onFocus:ee,onBlur:ie}),_e=fe??(de.readOnly?!1:void 0),ve=M;["color","check"].includes(M)||(ve="color");let Pe=L||z||"blue";return typeof Pe!="string"&&(Pe="blue"),{components:{...BCe,...e},colorScheme:n,size:r,tagVariant:C,selectedOptionStyle:ve,selectedOptionColorScheme:Pe,variant:j??re,chakraStyles:q,focusBorderColor:K,errorBorderColor:$,onFocus:de.onFocus,onBlur:de.onBlur,isDisabled:de.disabled,isInvalid:!!de["aria-invalid"],inputId:de.id,isReadOnly:de.readOnly,required:p??de.required,menuIsOpen:_e,...me,"aria-invalid":(ye=me["aria-invalid"])!=null?ye:de["aria-invalid"]}},iF=CCe,SCe=Re.forwardRef((e,t)=>{let r=iF(e);return $e.jsx(hbe,{ref:t,...r})}),o1=SCe;Re.forwardRef((e,t)=>{let r=iF(e);return $e.jsx(kBe,{ref:t,...r})});Re.forwardRef((e,t)=>{let r=iF(e);return $e.jsx(OBe,{ref:t,...r})});Re.forwardRef((e,t)=>{let r=iF(e);return $e.jsx(zBe,{ref:t,...r})});var nZ={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},yH=Yh.createContext&&Yh.createContext(nZ),ECe=["attr","size","title"];function TCe(e,t){if(e==null)return{};var r=ICe(e,t),n,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)n=l[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ICe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function yT(){return yT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yT.apply(this,arguments)}function vH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function vT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vH(Object(r),!0).forEach(function(n){FCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FCe(e,t,r){return t=PCe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PCe(e){var t=MCe(e,"string");return typeof t=="symbol"?t:t+""}function MCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iZ(e){return e&&e.map((t,r)=>Yh.createElement(t.tag,vT({key:r},t.attr),iZ(t.child)))}function Jm(e){return t=>Yh.createElement(RCe,yT({attr:vT({},e.attr)},t),iZ(e.child))}function RCe(e){var t=r=>{var{attr:n,size:i,title:l}=e,h=TCe(e,ECe),p=i||r.size||"1em",o;return r.className&&(o=r.className),e.className&&(o=(o?o+" ":"")+e.className),Yh.createElement("svg",yT({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,h,{className:o,style:vT(vT({color:e.color||r.color},r.style),e.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),l&&Yh.createElement("title",null,l),e.children)};return yH!==void 0?Yh.createElement(yH.Consumer,null,r=>t(r)):t(nZ)}function kCe(e){return Jm({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M544 416L32 416c-17.7 0-32 14.3-32 32s14.3 32 32 32l512 0c17.7 0 32-14.3 32-32s-14.3-32-32-32zm22.6-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L480 274.7 480 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 210.7-41.4-41.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0l96-96zm-320-45.3c-12.5-12.5-32.8-12.5-45.3 0L160 274.7 160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 210.7L54.6 233.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3z"},child:[]}]})(e)}function DCe(e){return Jm({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M249.4 25.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3L269.3 96 416 96c53 0 96 43 96 96v32c0 17.7-14.3 32-32 32s-32-14.3-32-32V192c0-17.7-14.3-32-32-32l-146.7 0 25.4 25.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0l-80-80c-12.5-12.5-12.5-32.8 0-45.3l80-80zm13.3 256l80 80c12.5 12.5 12.5 32.8 0 45.3l-80 80c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 416 96 416c-17.7 0-32 14.3-32 32v32c0 17.7-14.3 32-32 32s-32-14.3-32-32V448c0-53 43-96 96-96l146.7 0-25.4-25.4c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0zM384 384a64 64 0 1 1 128 0 64 64 0 1 1 -128 0zM64 192A64 64 0 1 1 64 64a64 64 0 1 1 0 128z"},child:[]}]})(e)}function LCe(e){return Jm({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M0 256L28.5 28c2-16 15.6-28 31.8-28H228.9c15 0 27.1 12.1 27.1 27.1c0 3.2-.6 6.5-1.7 9.5L208 160H347.3c20.2 0 36.7 16.4 36.7 36.7c0 7.4-2.2 14.6-6.4 20.7l-192.2 281c-5.9 8.6-15.6 13.7-25.9 13.7h-2.9c-15.7 0-28.5-12.8-28.5-28.5c0-2.3 .3-4.6 .9-6.9L176 288H32c-17.7 0-32-14.3-32-32z"},child:[]}]})(e)}function OCe(e){return Jm({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M135.2 117.4L109.1 192H402.9l-26.1-74.6C372.3 104.6 360.2 96 346.6 96H165.4c-13.6 0-25.7 8.6-30.2 21.4zM39.6 196.8L74.8 96.3C88.3 57.8 124.6 32 165.4 32H346.6c40.8 0 77.1 25.8 90.6 64.3l35.2 100.5c23.2 9.6 39.6 32.5 39.6 59.2V400v48c0 17.7-14.3 32-32 32H448c-17.7 0-32-14.3-32-32V400H96v48c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32V400 256c0-26.7 16.4-49.6 39.6-59.2zM128 288a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm288 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"},child:[]}]})(e)}function UCe(e){return Jm({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M308.5 135.3c7.1-6.3 9.9-16.2 6.2-25c-2.3-5.3-4.8-10.5-7.6-15.5L304 89.4c-3-5-6.3-9.9-9.8-14.6c-5.7-7.6-15.7-10.1-24.7-7.1l-28.2 9.3c-10.7-8.8-23-16-36.2-20.9L199 27.1c-1.9-9.3-9.1-16.7-18.5-17.8C173.9 8.4 167.2 8 160.4 8h-.7c-6.8 0-13.5 .4-20.1 1.2c-9.4 1.1-16.6 8.6-18.5 17.8L115 56.1c-13.3 5-25.5 12.1-36.2 20.9L50.5 67.8c-9-3-19-.5-24.7 7.1c-3.5 4.7-6.8 9.6-9.9 14.6l-3 5.3c-2.8 5-5.3 10.2-7.6 15.6c-3.7 8.7-.9 18.6 6.2 25l22.2 19.8C32.6 161.9 32 168.9 32 176s.6 14.1 1.7 20.9L11.5 216.7c-7.1 6.3-9.9 16.2-6.2 25c2.3 5.3 4.8 10.5 7.6 15.6l3 5.2c3 5.1 6.3 9.9 9.9 14.6c5.7 7.6 15.7 10.1 24.7 7.1l28.2-9.3c10.7 8.8 23 16 36.2 20.9l6.1 29.1c1.9 9.3 9.1 16.7 18.5 17.8c6.7 .8 13.5 1.2 20.4 1.2s13.7-.4 20.4-1.2c9.4-1.1 16.6-8.6 18.5-17.8l6.1-29.1c13.3-5 25.5-12.1 36.2-20.9l28.2 9.3c9 3 19 .5 24.7-7.1c3.5-4.7 6.8-9.5 9.8-14.6l3.1-5.4c2.8-5 5.3-10.2 7.6-15.5c3.7-8.7 .9-18.6-6.2-25l-22.2-19.8c1.1-6.8 1.7-13.8 1.7-20.9s-.6-14.1-1.7-20.9l22.2-19.8zM112 176a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM504.7 500.5c6.3 7.1 16.2 9.9 25 6.2c5.3-2.3 10.5-4.8 15.5-7.6l5.4-3.1c5-3 9.9-6.3 14.6-9.8c7.6-5.7 10.1-15.7 7.1-24.7l-9.3-28.2c8.8-10.7 16-23 20.9-36.2l29.1-6.1c9.3-1.9 16.7-9.1 17.8-18.5c.8-6.7 1.2-13.5 1.2-20.4s-.4-13.7-1.2-20.4c-1.1-9.4-8.6-16.6-17.8-18.5L583.9 307c-5-13.3-12.1-25.5-20.9-36.2l9.3-28.2c3-9 .5-19-7.1-24.7c-4.7-3.5-9.6-6.8-14.6-9.9l-5.3-3c-5-2.8-10.2-5.3-15.6-7.6c-8.7-3.7-18.6-.9-25 6.2l-19.8 22.2c-6.8-1.1-13.8-1.7-20.9-1.7s-14.1 .6-20.9 1.7l-19.8-22.2c-6.3-7.1-16.2-9.9-25-6.2c-5.3 2.3-10.5 4.8-15.6 7.6l-5.2 3c-5.1 3-9.9 6.3-14.6 9.9c-7.6 5.7-10.1 15.7-7.1 24.7l9.3 28.2c-8.8 10.7-16 23-20.9 36.2L315.1 313c-9.3 1.9-16.7 9.1-17.8 18.5c-.8 6.7-1.2 13.5-1.2 20.4s.4 13.7 1.2 20.4c1.1 9.4 8.6 16.6 17.8 18.5l29.1 6.1c5 13.3 12.1 25.5 20.9 36.2l-9.3 28.2c-3 9-.5 19 7.1 24.7c4.7 3.5 9.5 6.8 14.6 9.8l5.4 3.1c5 2.8 10.2 5.3 15.5 7.6c8.7 3.7 18.6 .9 25-6.2l19.8-22.2c6.8 1.1 13.8 1.7 20.9 1.7s14.1-.6 20.9-1.7l19.8 22.2zM464 304a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"},child:[]}]})(e)}function zCe(e){return Jm({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M96 0C43 0 0 43 0 96V352c0 48 35.2 87.7 81.1 94.9l-46 46C28.1 499.9 33.1 512 43 512H82.7c8.5 0 16.6-3.4 22.6-9.4L160 448H288l54.6 54.6c6 6 14.1 9.4 22.6 9.4H405c10 0 15-12.1 7.9-19.1l-46-46c46-7.1 81.1-46.9 81.1-94.9V96c0-53-43-96-96-96H96zM64 128c0-17.7 14.3-32 32-32h80c17.7 0 32 14.3 32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V128zM272 96h80c17.7 0 32 14.3 32 32v96c0 17.7-14.3 32-32 32H272c-17.7 0-32-14.3-32-32V128c0-17.7 14.3-32 32-32zM64 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zm288-32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"},child:[]}]})(e)}function VCe(e){return Jm({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M64 80c-8.8 0-16 7.2-16 16l0 320c0 8.8 7.2 16 16 16l320 0c8.8 0 16-7.2 16-16l0-320c0-8.8-7.2-16-16-16L64 80zM0 96C0 60.7 28.7 32 64 32l320 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zm224 64c6.7 0 13 2.8 17.6 7.7l104 112c6.5 7 8.2 17.2 4.4 25.9s-12.5 14.4-22 14.4l-208 0c-9.5 0-18.2-5.7-22-14.4s-2.1-18.9 4.4-25.9l104-112c4.5-4.9 10.9-7.7 17.6-7.7z"},child:[]}]})(e)}const _D={NMKM:{site:"Mt Keith",location:[[0,0],[0,0]]},CNM:{site:"Cliffs",location:[[0,0],[0,0]]},NLNM:{site:"Leinster",location:[[0,0],[0,0]]},NPI:{site:"Non-Process Infrastructure",location:[[0,0],[0,0]]},BRO:{site:"BurnsRED Office",location:[[144.98176569919508,-37.818534455210106],[144.9908777222061,-37.811264469979434]]},WFH:{site:"BurnsRED WFH Office",location:[[144.8949274511054,-37.76481882313553],[144.907305,-37.755989]]}},xD={3e7:{icon:OCe,label:"Vehicle and Mobile Equipment"},4e7:{icon:zCe,label:"Rail"},5e7:{icon:VCe,label:"Lifting"},6e7:{icon:LCe,label:"Electrical"},7e7:{icon:kCe,label:"Falling object"},8e7:{icon:UCe,label:"Crushing"},9e7:{icon:DCe,label:"Mat. Moving"}},bD={3e7:{31e6:{control:"Crash, Collision, Overturn on Mine Site"},32e6:{control:"Pre-start Inspections"},33e6:{control:"Use mobile plant"},34e6:{control:"General Safety Rules for Operator"},35e6:{control:"Warning Signals and Reversing"}},4e7:{41e6:{control:"Control 1"},42e6:{control:"Control 2"}},5e7:{51e6:{control:"Control 1"},52e6:{control:"Control 2"}},6e7:{61e6:{control:"Control 1"},62e6:{control:"Control 2"}},7e7:{71e6:{control:"Control 1"},72e6:{control:"Control 2"}},8e7:{81e6:{control:"Control 1"},82e6:{control:"Control 2"}},9e7:{91e6:{control:"Control 1"},92e6:{control:"Control 2"}}},wD={31e6:{311e5:{operating_context:"Underground"},312e5:{operating_context:"Surface"},313e5:{operating_context:"Onsite non-Mining"},314e5:{operating_context:"Offsite"}},32e6:{321e5:{operating_context:"Operating Context 1"},322e5:{operating_context:"Operating Context 2"}},33e6:{331e5:{operating_context:"Operating Context 1"},332e5:{operating_context:"Operating Context 2"}},34e6:{341e5:{operating_context:"Operating Context 1"},342e5:{operating_context:"Operating Context 2"}},35e6:{351e5:{operating_context:"Operating Context 1"},352e5:{operating_context:"Operating Context 2"}},41e6:{411e5:{operating_context:"Operating Context 1"},412e5:{operating_context:"Operating Context 2"}},42e6:{421e5:{operating_context:"Operating Context 1"},422e5:{operating_context:"Operating Context 2"}},51e6:{511e5:{operating_context:"Operating Context 1"},512e5:{operating_context:"Operating Context 2"}},52e6:{521e5:{operating_context:"Operating Context 1"},522e5:{operating_context:"Operating Context 2"}},61e6:{611e5:{operating_context:"Operating Context 1"},612e5:{operating_context:"Operating Context 2"}},62e6:{621e5:{operating_context:"Operating Context 1"},622e5:{operating_context:"Operating Context 2"}},71e6:{711e5:{operating_context:"Operating Context 1"},712e5:{operating_context:"Operating Context 2"}},72e6:{721e5:{operating_context:"Operating Context 1"},722e5:{operating_context:"Operating Context 2"}},81e6:{811e5:{operating_context:"Operating Context 1"},812e5:{operating_context:"Operating Context 2"}},82e6:{821e5:{operating_context:"Operating Context 1"},822e5:{operating_context:"Operating Context 2"}},91e6:{911e5:{operating_context:"Operating Context 1"},912e5:{operating_context:"Operating Context 2"}},92e6:{921e5:{operating_context:"Operating Context 1"},922e5:{operating_context:"Operating Context 2"}}},BD={312e5:{3111e4:{equipment:"Off-highway Truck"},3112e4:{equipment:"Wheel Loaders"},3113e4:{equipment:"Rubber Tyred SME"},3114e4:{equipment:"Dozers"},3115e4:{equipment:"Drills and tracked SME"},3116e4:{equipment:"Excavators/ Shovels"},3117e4:{equipment:"Off-highway haulers"}},311e5:{3121e4:{equipment:"UG ME"},3122e4:{equipment:"UG Loaders, bogger"},3123e4:{equipment:"UG shuttle cars, miners"}},313e5:{3131e4:{equipment:"Off-highway Truck"},3132e4:{equipment:"Wheel Loaders"},3133e4:{equipment:"Rubber Tyred SME"},3134e4:{equipment:"Dozers"}},314e5:{3141e4:{equipment:"Off-highway Truck"},3142e4:{equipment:"Wheel Loaders"},3143e4:{equipment:"Rubber Tyred SME"},3144e4:{equipment:"Dozers"}},321e5:{32111e3:{equipment:"Off-highway Truck"},3212e4:{equipment:"Wheel Loaders"}},322e5:{3221e4:{equipment:"Off-highway Truck"},3222e4:{equipment:"Wheel Loaders"}},331e5:{3311e4:{equipment:"Off-highway Truck"},3312e4:{equipment:"Wheel Loaders"}},332e5:{3321e4:{equipment:"Off-highway Truck"},3322e4:{equipment:"Wheel Loaders"}},341e5:{3411e4:{equipment:"Off-highway Truck"},3412e4:{equipment:"Wheel Loaders"}},342e5:{3421e4:{equipment:"Off-highway Truck"},3422e4:{equipment:"Wheel Loaders"}},351e5:{3511e4:{equipment:"Off-highway Truck"},3512e4:{equipment:"Wheel Loaders"}},352e5:{3521e4:{equipment:"Off-highway Truck"},3522e4:{equipment:"Wheel Loaders"}},411e5:{4111e4:{equipment:"Equipment Item 1"},4112e4:{equipment:"Equipment Item 2"}},412e5:{4121e4:{equipment:"Equipment Item 1"},4122e4:{equipment:"Equipment Item 2"}},421e5:{4211e4:{equipment:"Equipment Item 1"},4212e4:{equipment:"Equipment Item 2"}},422e5:{4221e4:{equipment:"Equipment Item 1"},4222e4:{equipment:"Equipment Item 2"}},511e5:{5111e4:{equipment:"Equipment Item 1"},5112e4:{equipment:"Equipment Item 2"}},512e5:{5121e4:{equipment:"Equipment Item 1"},5122e4:{equipment:"Equipment Item 2"}},521e5:{5211e4:{equipment:"Equipment Item 1"},5212e4:{equipment:"Equipment Item 2"}},522e5:{5221e4:{equipment:"Equipment Item 1"},5222e4:{equipment:"Equipment Item 2"}},611e5:{6111e4:{equipment:"Equipment Item 1"},6112e4:{equipment:"Equipment Item 2"}},612e5:{6121e4:{equipment:"Equipment Item 1"},6122e4:{equipment:"Equipment Item 2"}},621e5:{6211e4:{equipment:"Equipment Item 1"},6212e4:{equipment:"Equipment Item 2"}},622e5:{6221e4:{equipment:"Equipment Item 1"},6222e4:{equipment:"Equipment Item 2"}},711e5:{7111e4:{equipment:"Equipment Item 1"},7112e4:{equipment:"Equipment Item 2"}},712e5:{7121e4:{equipment:"Equipment Item 1"},7122e4:{equipment:"Equipment Item 2"}},721e5:{7211e4:{equipment:"Equipment Item 1"},7212e4:{equipment:"Equipment Item 2"}},722e5:{7221e4:{equipment:"Equipment Item 1"},7222e4:{equipment:"Equipment Item 2"}},811e5:{8111e4:{equipment:"Equipment Item 1"},8112e4:{equipment:"Equipment Item 2"}},812e5:{8121e4:{equipment:"Equipment Item 1"},8122e4:{equipment:"Equipment Item 2"}},821e5:{8211e4:{equipment:"Equipment Item 1"},8212e4:{equipment:"Equipment Item 2"}},822e5:{8221e4:{equipment:"Equipment Item 1"},8222e4:{equipment:"Equipment Item 2"}},911e5:{9111e4:{equipment:"Equipment Item 1"},9112e4:{equipment:"Equipment Item 2"}},912e5:{9121e4:{equipment:"Equipment Item 1"},9122e4:{equipment:"Equipment Item 2"}},921e5:{9211e4:{equipment:"Equipment Item 1"},9212e4:{equipment:"Equipment Item 2"}},922e5:{9221e4:{equipment:"Equipment Item 1"},9222e4:{equipment:"Equipment Item 2"}}};var oF={},oZ={L:1,M:0,Q:3,H:2},sZ={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},NCe=sZ;function aZ(e){this.mode=NCe.MODE_8BIT_BYTE,this.data=e}aZ.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var QCe=aZ,LC=oZ;function Wh(e,t){this.totalCount=e,this.dataCount=t}Wh.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];Wh.getRSBlocks=function(e,t){var r=Wh.getRsBlockTable(e,t);if(r==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var n=r.length/3,i=new Array,l=0;l<n;l++)for(var h=r[l*3+0],p=r[l*3+1],o=r[l*3+2],_=0;_<h;_++)i.push(new Wh(p,o));return i};Wh.getRsBlockTable=function(e,t){switch(t){case LC.L:return Wh.RS_BLOCK_TABLE[(e-1)*4+0];case LC.M:return Wh.RS_BLOCK_TABLE[(e-1)*4+1];case LC.Q:return Wh.RS_BLOCK_TABLE[(e-1)*4+2];case LC.H:return Wh.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};var HCe=Wh;function lZ(){this.buffer=new Array,this.length=0}lZ.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var jCe=lZ,th={glog:function(e){if(e<1)throw new Error("glog("+e+")");return th.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return th.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var Ca=0;Ca<8;Ca++)th.EXP_TABLE[Ca]=1<<Ca;for(var Ca=8;Ca<256;Ca++)th.EXP_TABLE[Ca]=th.EXP_TABLE[Ca-4]^th.EXP_TABLE[Ca-5]^th.EXP_TABLE[Ca-6]^th.EXP_TABLE[Ca-8];for(var Ca=0;Ca<255;Ca++)th.LOG_TABLE[th.EXP_TABLE[Ca]]=Ca;var cZ=th,$p=cZ;function oE(e,t){if(e.length==null)throw new Error(e.length+"/"+t);for(var r=0;r<e.length&&e[r]==0;)r++;this.num=new Array(e.length-r+t);for(var n=0;n<e.length-r;n++)this.num[n]=e[n+r]}oE.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),r=0;r<this.getLength();r++)for(var n=0;n<e.getLength();n++)t[r+n]^=$p.gexp($p.glog(this.get(r))+$p.glog(e.get(n)));return new oE(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=$p.glog(this.get(0))-$p.glog(e.get(0)),r=new Array(this.getLength()),n=0;n<this.getLength();n++)r[n]=this.get(n);for(var n=0;n<e.getLength();n++)r[n]^=$p.gexp($p.glog(e.get(n))+t);return new oE(r,0).mod(e)}};var uZ=oE,Gc=sZ,_H=uZ,GCe=cZ,rf={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},ya={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;ya.getBCHDigit(t)-ya.getBCHDigit(ya.G15)>=0;)t^=ya.G15<<ya.getBCHDigit(t)-ya.getBCHDigit(ya.G15);return(e<<10|t)^ya.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;ya.getBCHDigit(t)-ya.getBCHDigit(ya.G18)>=0;)t^=ya.G18<<ya.getBCHDigit(t)-ya.getBCHDigit(ya.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;e!=0;)t++,e>>>=1;return t},getPatternPosition:function(e){return ya.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,r){switch(e){case rf.PATTERN000:return(t+r)%2==0;case rf.PATTERN001:return t%2==0;case rf.PATTERN010:return r%3==0;case rf.PATTERN011:return(t+r)%3==0;case rf.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case rf.PATTERN101:return t*r%2+t*r%3==0;case rf.PATTERN110:return(t*r%2+t*r%3)%2==0;case rf.PATTERN111:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new _H([1],0),r=0;r<e;r++)t=t.multiply(new _H([1,GCe.gexp(r)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case Gc.MODE_NUMBER:return 10;case Gc.MODE_ALPHA_NUM:return 9;case Gc.MODE_8BIT_BYTE:return 8;case Gc.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case Gc.MODE_NUMBER:return 12;case Gc.MODE_ALPHA_NUM:return 11;case Gc.MODE_8BIT_BYTE:return 16;case Gc.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(t<41)switch(e){case Gc.MODE_NUMBER:return 14;case Gc.MODE_ALPHA_NUM:return 13;case Gc.MODE_8BIT_BYTE:return 16;case Gc.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),r=0,n=0;n<t;n++)for(var i=0;i<t;i++){for(var l=0,h=e.isDark(n,i),p=-1;p<=1;p++)if(!(n+p<0||t<=n+p))for(var o=-1;o<=1;o++)i+o<0||t<=i+o||p==0&&o==0||h==e.isDark(n+p,i+o)&&l++;l>5&&(r+=3+l-5)}for(var n=0;n<t-1;n++)for(var i=0;i<t-1;i++){var _=0;e.isDark(n,i)&&_++,e.isDark(n+1,i)&&_++,e.isDark(n,i+1)&&_++,e.isDark(n+1,i+1)&&_++,(_==0||_==4)&&(r+=3)}for(var n=0;n<t;n++)for(var i=0;i<t-6;i++)e.isDark(n,i)&&!e.isDark(n,i+1)&&e.isDark(n,i+2)&&e.isDark(n,i+3)&&e.isDark(n,i+4)&&!e.isDark(n,i+5)&&e.isDark(n,i+6)&&(r+=40);for(var i=0;i<t;i++)for(var n=0;n<t-6;n++)e.isDark(n,i)&&!e.isDark(n+1,i)&&e.isDark(n+2,i)&&e.isDark(n+3,i)&&e.isDark(n+4,i)&&!e.isDark(n+5,i)&&e.isDark(n+6,i)&&(r+=40);for(var C=0,i=0;i<t;i++)for(var n=0;n<t;n++)e.isDark(n,i)&&C++;var M=Math.abs(100*C/t/t-50)/5;return r+=M*10,r}},KCe=ya,WCe=QCe,hZ=HCe,AZ=jCe,hp=KCe,qCe=uZ;function Zh(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var bc=Zh.prototype;bc.addData=function(e){var t=new WCe(e);this.dataList.push(t),this.dataCache=null};bc.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]};bc.getModuleCount=function(){return this.moduleCount};bc.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=hZ.getRSBlocks(e,this.errorCorrectLevel),r=new AZ,n=0,i=0;i<t.length;i++)n+=t[i].dataCount;for(var i=0;i<this.dataList.length;i++){var l=this.dataList[i];r.put(l.mode,4),r.put(l.getLength(),hp.getLengthInBits(l.mode,e)),l.write(r)}if(r.getLengthInBits()<=n*8)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())};bc.makeImpl=function(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=Zh.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)};bc.setupPositionProbePattern=function(e,t){for(var r=-1;r<=7;r++)if(!(e+r<=-1||this.moduleCount<=e+r))for(var n=-1;n<=7;n++)t+n<=-1||this.moduleCount<=t+n||(0<=r&&r<=6&&(n==0||n==6)||0<=n&&n<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=n&&n<=4?this.modules[e+r][t+n]=!0:this.modules[e+r][t+n]=!1)};bc.getBestMaskPattern=function(){for(var e=0,t=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=hp.getLostPoint(this);(r==0||e>n)&&(e=n,t=r)}return t};bc.createMovieClip=function(e,t,r){var n=e.createEmptyMovieClip(t,r),i=1;this.make();for(var l=0;l<this.modules.length;l++)for(var h=l*i,p=0;p<this.modules[l].length;p++){var o=p*i,_=this.modules[l][p];_&&(n.beginFill(0,100),n.moveTo(o,h),n.lineTo(o+i,h),n.lineTo(o+i,h+i),n.lineTo(o,h+i),n.endFill())}return n};bc.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)};bc.setupPositionAdjustPattern=function(){for(var e=hp.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var n=e[t],i=e[r];if(this.modules[n][i]==null)for(var l=-2;l<=2;l++)for(var h=-2;h<=2;h++)l==-2||l==2||h==-2||h==2||l==0&&h==0?this.modules[n+l][i+h]=!0:this.modules[n+l][i+h]=!1}};bc.setupTypeNumber=function(e){for(var t=hp.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var n=!e&&(t>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(var r=0;r<18;r++){var n=!e&&(t>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}};bc.setupTypeInfo=function(e,t){for(var r=this.errorCorrectLevel<<3|t,n=hp.getBCHTypeInfo(r),i=0;i<15;i++){var l=!e&&(n>>i&1)==1;i<6?this.modules[i][8]=l:i<8?this.modules[i+1][8]=l:this.modules[this.moduleCount-15+i][8]=l}for(var i=0;i<15;i++){var l=!e&&(n>>i&1)==1;i<8?this.modules[8][this.moduleCount-i-1]=l:i<9?this.modules[8][15-i-1+1]=l:this.modules[8][15-i-1]=l}this.modules[this.moduleCount-8][8]=!e};bc.mapData=function(e,t){for(var r=-1,n=this.moduleCount-1,i=7,l=0,h=this.moduleCount-1;h>0;h-=2)for(h==6&&h--;;){for(var p=0;p<2;p++)if(this.modules[n][h-p]==null){var o=!1;l<e.length&&(o=(e[l]>>>i&1)==1);var _=hp.getMask(t,n,h-p);_&&(o=!o),this.modules[n][h-p]=o,i--,i==-1&&(l++,i=7)}if(n+=r,n<0||this.moduleCount<=n){n-=r,r=-r;break}}};Zh.PAD0=236;Zh.PAD1=17;Zh.createData=function(e,t,r){for(var n=hZ.getRSBlocks(e,t),i=new AZ,l=0;l<r.length;l++){var h=r[l];i.put(h.mode,4),i.put(h.getLength(),hp.getLengthInBits(h.mode,e)),h.write(i)}for(var p=0,l=0;l<n.length;l++)p+=n[l].dataCount;if(i.getLengthInBits()>p*8)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+p*8+")");for(i.getLengthInBits()+4<=p*8&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=p*8||(i.put(Zh.PAD0,8),i.getLengthInBits()>=p*8));)i.put(Zh.PAD1,8);return Zh.createBytes(i,n)};Zh.createBytes=function(e,t){for(var r=0,n=0,i=0,l=new Array(t.length),h=new Array(t.length),p=0;p<t.length;p++){var o=t[p].dataCount,_=t[p].totalCount-o;n=Math.max(n,o),i=Math.max(i,_),l[p]=new Array(o);for(var C=0;C<l[p].length;C++)l[p][C]=255&e.buffer[C+r];r+=o;var M=hp.getErrorCorrectPolynomial(_),L=new qCe(l[p],M.getLength()-1),z=L.mod(M);h[p]=new Array(M.getLength()-1);for(var C=0;C<h[p].length;C++){var j=C+z.getLength()-h[p].length;h[p][C]=j>=0?z.get(j):0}}for(var K=0,C=0;C<t.length;C++)K+=t[C].totalCount;for(var $=new Array(K),q=0,C=0;C<n;C++)for(var p=0;p<t.length;p++)C<l[p].length&&($[q++]=l[p][C]);for(var C=0;C<i;C++)for(var p=0;p<t.length;p++)C<h[p].length&&($[q++]=h[p][C]);return $};var XCe=Zh,qO={};Object.defineProperty(qO,"__esModule",{value:!0});var ZCe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},YCe=Oq,Kc=fZ(YCe),dZ=Re,OC=fZ(dZ);function fZ(e){return e&&e.__esModule?e:{default:e}}function JCe(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var $Ce={bgColor:Kc.default.oneOfType([Kc.default.object,Kc.default.string]).isRequired,bgD:Kc.default.string.isRequired,fgColor:Kc.default.oneOfType([Kc.default.object,Kc.default.string]).isRequired,fgD:Kc.default.string.isRequired,size:Kc.default.number.isRequired,title:Kc.default.string,viewBoxSize:Kc.default.number.isRequired,xmlns:Kc.default.string},XO=(0,dZ.forwardRef)(function(e,t){var r=e.bgColor,n=e.bgD,i=e.fgD,l=e.fgColor,h=e.size,p=e.title,o=e.viewBoxSize,_=e.xmlns,C=_===void 0?"http://www.w3.org/2000/svg":_,M=JCe(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return OC.default.createElement("svg",ZCe({},M,{height:h,ref:t,viewBox:"0 0 "+o+" "+o,width:h,xmlns:C}),p?OC.default.createElement("title",null,p):null,OC.default.createElement("path",{d:n,fill:r}),OC.default.createElement("path",{d:i,fill:l}))});XO.displayName="QRCodeSvg";XO.propTypes=$Ce;qO.default=XO;Object.defineProperty(oF,"__esModule",{value:!0});oF.QRCode=void 0;var eSe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tSe=Oq,FA=ew(tSe),rSe=oZ,nSe=ew(rSe),iSe=XCe,oSe=ew(iSe),pZ=Re,sSe=ew(pZ),aSe=qO,lSe=ew(aSe);function ew(e){return e&&e.__esModule?e:{default:e}}function cSe(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var uSe={bgColor:FA.default.oneOfType([FA.default.object,FA.default.string]),fgColor:FA.default.oneOfType([FA.default.object,FA.default.string]),level:FA.default.string,size:FA.default.number,value:FA.default.string.isRequired},sF=(0,pZ.forwardRef)(function(e,t){var r=e.bgColor,n=r===void 0?"#FFFFFF":r,i=e.fgColor,l=i===void 0?"#000000":i,h=e.level,p=h===void 0?"L":h,o=e.size,_=o===void 0?256:o,C=e.value,M=cSe(e,["bgColor","fgColor","level","size","value"]),L=new oSe.default(-1,nSe.default[p]);L.addData(C),L.make();var z=L.modules;return sSe.default.createElement(lSe.default,eSe({},M,{bgColor:n,bgD:z.map(function(j,K){return j.map(function($,q){return $?"":"M "+q+" "+K+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:l,fgD:z.map(function(j,K){return j.map(function($,q){return $?"M "+q+" "+K+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:_,viewBoxSize:z.length}))});oF.QRCode=sF;sF.displayName="QRCode";sF.propTypes=uSe;var hSe=oF.default=sF;/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var CD=function(e,t){return CD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},CD(e,t)};function hh(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");CD(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var SD=function(){return SD=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(t[l]=r[l])}return t},SD.apply(this,arguments)};function ul(e,t,r,n){function i(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function p(C){try{_(n.next(C))}catch(M){h(M)}}function o(C){try{_(n.throw(C))}catch(M){h(M)}}function _(C){C.done?l(C.value):i(C.value).then(p,o)}_((n=n.apply(e,[])).next())})}function ja(e,t){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,i,l,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(_){return function(C){return o([_,C])}}function o(_){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(l=_[0]&2?i.return:_[0]?i.throw||((l=i.return)&&l.call(i),0):i.next)&&!(l=l.call(i,_[1])).done)return l;switch(i=0,l&&(_=[_[0]&2,l.value]),_[0]){case 0:case 1:l=_;break;case 4:return r.label++,{value:_[1],done:!1};case 5:r.label++,i=_[1],_=[0];continue;case 7:_=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(_[0]===6||_[0]===2)){r=0;continue}if(_[0]===3&&(!l||_[1]>l[0]&&_[1]<l[3])){r.label=_[1];break}if(_[0]===6&&r.label<l[1]){r.label=l[1],l=_;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(_);break}l[2]&&r.ops.pop(),r.trys.pop();continue}_=t.call(e,r)}catch(C){_=[6,C],i=0}finally{n=l=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}function UC(e,t,r){if(arguments.length===2)for(var n=0,i=t.length,l;n<i;n++)(l||!(n in t))&&(l||(l=Array.prototype.slice.call(t,0,n)),l[n]=t[n]);return e.concat(l||t)}var hd=function(){function e(t,r,n,i){this.left=t,this.top=r,this.width=n,this.height=i}return e.prototype.add=function(t,r,n,i){return new e(this.left+t,this.top+r,this.width+n,this.height+i)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var n=Array.from(r).find(function(i){return i.width!==0});return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),aF=function(e,t){return hd.fromClientRect(e,t.getBoundingClientRect())},ASe=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),i=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new hd(0,0,n,i)},lF=function(e){for(var t=[],r=0,n=e.length;r<n;){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var l=e.charCodeAt(r++);(l&64512)===56320?t.push(((i&1023)<<10)+(l&1023)+65536):(t.push(i),r--)}else t.push(i)}return t},As=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],i=-1,l="";++i<r;){var h=e[i];h<=65535?n.push(h):(h-=65536,n.push((h>>10)+55296,h%1024+56320)),(i+1===r||n.length>16384)&&(l+=String.fromCharCode.apply(String,n),n.length=0)}return l},xH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",dSe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var zC=0;zC<xH.length;zC++)dSe[xH.charCodeAt(zC)]=zC;var bH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var VC=0;VC<bH.length;VC++)k1[bH.charCodeAt(VC)]=VC;var fSe=function(e){var t=e.length*.75,r=e.length,n,i=0,l,h,p,o;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var _=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),C=Array.isArray(_)?_:new Uint8Array(_);for(n=0;n<r;n+=4)l=k1[e.charCodeAt(n)],h=k1[e.charCodeAt(n+1)],p=k1[e.charCodeAt(n+2)],o=k1[e.charCodeAt(n+3)],C[i++]=l<<2|h>>4,C[i++]=(h&15)<<4|p>>2,C[i++]=(p&3)<<6|o&63;return _},pSe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},mSe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},Em=5,ZO=11,GR=2,gSe=ZO-Em,mZ=65536>>Em,ySe=1<<Em,KR=ySe-1,vSe=1024>>Em,_Se=mZ+vSe,xSe=_Se,bSe=32,wSe=xSe+bSe,BSe=65536>>ZO,CSe=1<<gSe,SSe=CSe-1,wH=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},ESe=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},TSe=function(e,t){var r=fSe(e),n=Array.isArray(r)?mSe(r):new Uint32Array(r),i=Array.isArray(r)?pSe(r):new Uint16Array(r),l=24,h=wH(i,l/2,n[4]/2),p=n[5]===2?wH(i,(l+n[4])/2):ESe(n,Math.ceil((l+n[4])/4));return new ISe(n[0],n[1],n[2],n[3],h,p)},ISe=function(){function e(t,r,n,i,l,h){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=i,this.index=l,this.data=h}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Em],r=(r<<GR)+(t&KR),this.data[r];if(t<=65535)return r=this.index[mZ+(t-55296>>Em)],r=(r<<GR)+(t&KR),this.data[r];if(t<this.highStart)return r=wSe-BSe+(t>>ZO),r=this.index[r],r+=t>>Em&SSe,r=this.index[r],r=(r<<GR)+(t&KR),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),BH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",FSe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var NC=0;NC<BH.length;NC++)FSe[BH.charCodeAt(NC)]=NC;var PSe="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",CH=50,MSe=1,gZ=2,yZ=3,RSe=4,kSe=5,SH=7,vZ=8,EH=9,wf=10,ED=11,TH=12,TD=13,DSe=14,D1=15,ID=16,QC=17,s1=18,LSe=19,IH=20,FD=21,a1=22,WR=23,g0=24,ic=25,L1=26,O1=27,y0=28,OSe=29,cm=30,USe=31,HC=32,jC=33,PD=34,MD=35,RD=36,fb=37,kD=38,sE=39,aE=40,qR=41,_Z=42,zSe=43,VSe=[9001,65288],xZ="!",qn="",GC="",DD=TSe(PSe),PA=[cm,RD],LD=[MSe,gZ,yZ,kSe],bZ=[wf,vZ],FH=[O1,L1],NSe=LD.concat(bZ),PH=[kD,sE,aE,PD,MD],QSe=[D1,TD],HSe=function(e,t){t===void 0&&(t="strict");var r=[],n=[],i=[];return e.forEach(function(l,h){var p=DD.get(l);if(p>CH?(i.push(!0),p-=CH):i.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(l)!==-1)return n.push(h),r.push(ID);if(p===RSe||p===ED){if(h===0)return n.push(h),r.push(cm);var o=r[h-1];return NSe.indexOf(o)===-1?(n.push(n[h-1]),r.push(o)):(n.push(h),r.push(cm))}if(n.push(h),p===USe)return r.push(t==="strict"?FD:fb);if(p===_Z||p===OSe)return r.push(cm);if(p===zSe)return l>=131072&&l<=196605||l>=196608&&l<=262141?r.push(fb):r.push(cm);r.push(p)}),[n,r,i]},XR=function(e,t,r,n){var i=n[r];if(Array.isArray(e)?e.indexOf(i)!==-1:e===i)for(var l=r;l<=n.length;){l++;var h=n[l];if(h===t)return!0;if(h!==wf)break}if(i===wf)for(var l=r;l>0;){l--;var p=n[l];if(Array.isArray(e)?e.indexOf(p)!==-1:e===p)for(var o=r;o<=n.length;){o++;var h=n[o];if(h===t)return!0;if(h!==wf)break}if(p!==wf)break}return!1},MH=function(e,t){for(var r=e;r>=0;){var n=t[r];if(n===wf)r--;else return n}return 0},jSe=function(e,t,r,n,i){if(r[n]===0)return qn;var l=n-1;if(Array.isArray(i)&&i[l]===!0)return qn;var h=l-1,p=l+1,o=t[l],_=h>=0?t[h]:0,C=t[p];if(o===gZ&&C===yZ)return qn;if(LD.indexOf(o)!==-1)return xZ;if(LD.indexOf(C)!==-1||bZ.indexOf(C)!==-1)return qn;if(MH(l,t)===vZ)return GC;if(DD.get(e[l])===ED||(o===HC||o===jC)&&DD.get(e[p])===ED||o===SH||C===SH||o===EH||[wf,TD,D1].indexOf(o)===-1&&C===EH||[QC,s1,LSe,g0,y0].indexOf(C)!==-1||MH(l,t)===a1||XR(WR,a1,l,t)||XR([QC,s1],FD,l,t)||XR(TH,TH,l,t))return qn;if(o===wf)return GC;if(o===WR||C===WR)return qn;if(C===ID||o===ID)return GC;if([TD,D1,FD].indexOf(C)!==-1||o===DSe||_===RD&&QSe.indexOf(o)!==-1||o===y0&&C===RD||C===IH||PA.indexOf(C)!==-1&&o===ic||PA.indexOf(o)!==-1&&C===ic||o===O1&&[fb,HC,jC].indexOf(C)!==-1||[fb,HC,jC].indexOf(o)!==-1&&C===L1||PA.indexOf(o)!==-1&&FH.indexOf(C)!==-1||FH.indexOf(o)!==-1&&PA.indexOf(C)!==-1||[O1,L1].indexOf(o)!==-1&&(C===ic||[a1,D1].indexOf(C)!==-1&&t[p+1]===ic)||[a1,D1].indexOf(o)!==-1&&C===ic||o===ic&&[ic,y0,g0].indexOf(C)!==-1)return qn;if([ic,y0,g0,QC,s1].indexOf(C)!==-1)for(var M=l;M>=0;){var L=t[M];if(L===ic)return qn;if([y0,g0].indexOf(L)!==-1)M--;else break}if([O1,L1].indexOf(C)!==-1)for(var M=[QC,s1].indexOf(o)!==-1?h:l;M>=0;){var L=t[M];if(L===ic)return qn;if([y0,g0].indexOf(L)!==-1)M--;else break}if(kD===o&&[kD,sE,PD,MD].indexOf(C)!==-1||[sE,PD].indexOf(o)!==-1&&[sE,aE].indexOf(C)!==-1||[aE,MD].indexOf(o)!==-1&&C===aE||PH.indexOf(o)!==-1&&[IH,L1].indexOf(C)!==-1||PH.indexOf(C)!==-1&&o===O1||PA.indexOf(o)!==-1&&PA.indexOf(C)!==-1||o===g0&&PA.indexOf(C)!==-1||PA.concat(ic).indexOf(o)!==-1&&C===a1&&VSe.indexOf(e[p])===-1||PA.concat(ic).indexOf(C)!==-1&&o===s1)return qn;if(o===qR&&C===qR){for(var z=r[l],j=1;z>0&&(z--,t[z]===qR);)j++;if(j%2!==0)return qn}return o===HC&&C===jC?qn:GC},GSe=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=HSe(e,t.lineBreak),n=r[0],i=r[1],l=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(i=i.map(function(p){return[ic,cm,_Z].indexOf(p)!==-1?fb:p}));var h=t.wordBreak==="keep-all"?l.map(function(p,o){return p&&e[o]>=19968&&e[o]<=40959}):void 0;return[n,i,h]},KSe=function(){function e(t,r,n,i){this.codePoints=t,this.required=r===xZ,this.start=n,this.end=i}return e.prototype.slice=function(){return As.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),WSe=function(e,t){var r=lF(e),n=GSe(r,t),i=n[0],l=n[1],h=n[2],p=r.length,o=0,_=0;return{next:function(){if(_>=p)return{done:!0,value:null};for(var C=qn;_<p&&(C=jSe(r,l,i,++_,h))===qn;);if(C!==qn||_===p){var M=new KSe(r,C,o,_);return o=_,{value:M,done:!1}}return{done:!0,value:null}}}},qSe=1,XSe=2,tw=4,RH=8,_T=10,kH=47,mx=92,ZSe=9,YSe=32,KC=34,l1=61,JSe=35,$Se=36,eEe=37,WC=39,qC=40,c1=41,tEe=95,kl=45,rEe=33,nEe=60,iEe=62,oEe=64,sEe=91,aEe=93,lEe=61,cEe=123,XC=63,uEe=125,DH=124,hEe=126,AEe=128,LH=65533,ZR=42,mm=43,dEe=44,fEe=58,pEe=59,pb=46,mEe=0,gEe=8,yEe=11,vEe=14,_Ee=31,xEe=127,Dh=-1,wZ=48,BZ=97,CZ=101,bEe=102,wEe=117,BEe=122,SZ=65,EZ=69,TZ=70,CEe=85,SEe=90,Wa=function(e){return e>=wZ&&e<=57},EEe=function(e){return e>=55296&&e<=57343},v0=function(e){return Wa(e)||e>=SZ&&e<=TZ||e>=BZ&&e<=bEe},TEe=function(e){return e>=BZ&&e<=BEe},IEe=function(e){return e>=SZ&&e<=SEe},FEe=function(e){return TEe(e)||IEe(e)},PEe=function(e){return e>=AEe},ZC=function(e){return e===_T||e===ZSe||e===YSe},xT=function(e){return FEe(e)||PEe(e)||e===tEe},OH=function(e){return xT(e)||Wa(e)||e===kl},MEe=function(e){return e>=mEe&&e<=gEe||e===yEe||e>=vEe&&e<=_Ee||e===xEe},ff=function(e,t){return e!==mx?!1:t!==_T},YC=function(e,t,r){return e===kl?xT(t)||ff(t,r):xT(e)?!0:!!(e===mx&&ff(e,t))},YR=function(e,t,r){return e===mm||e===kl?Wa(t)?!0:t===pb&&Wa(r):Wa(e===pb?t:e)},REe=function(e){var t=0,r=1;(e[t]===mm||e[t]===kl)&&(e[t]===kl&&(r=-1),t++);for(var n=[];Wa(e[t]);)n.push(e[t++]);var i=n.length?parseInt(As.apply(void 0,n),10):0;e[t]===pb&&t++;for(var l=[];Wa(e[t]);)l.push(e[t++]);var h=l.length,p=h?parseInt(As.apply(void 0,l),10):0;(e[t]===EZ||e[t]===CZ)&&t++;var o=1;(e[t]===mm||e[t]===kl)&&(e[t]===kl&&(o=-1),t++);for(var _=[];Wa(e[t]);)_.push(e[t++]);var C=_.length?parseInt(As.apply(void 0,_),10):0;return r*(i+p*Math.pow(10,-h))*Math.pow(10,o*C)},kEe={type:2},DEe={type:3},LEe={type:4},OEe={type:13},UEe={type:8},zEe={type:21},VEe={type:9},NEe={type:10},QEe={type:11},HEe={type:12},jEe={type:14},JC={type:23},GEe={type:1},KEe={type:25},WEe={type:24},qEe={type:26},XEe={type:27},ZEe={type:28},YEe={type:29},JEe={type:31},OD={type:32},IZ=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(lF(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==OD;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case KC:return this.consumeStringToken(KC);case JSe:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),i=this.peekCodePoint(2);if(OH(r)||ff(n,i)){var l=YC(r,n,i)?XSe:qSe,h=this.consumeName();return{type:5,value:h,flags:l}}break;case $Se:if(this.peekCodePoint(0)===l1)return this.consumeCodePoint(),OEe;break;case WC:return this.consumeStringToken(WC);case qC:return kEe;case c1:return DEe;case ZR:if(this.peekCodePoint(0)===l1)return this.consumeCodePoint(),jEe;break;case mm:if(YR(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case dEe:return LEe;case kl:var p=t,o=this.peekCodePoint(0),_=this.peekCodePoint(1);if(YR(p,o,_))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(YC(p,o,_))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(o===kl&&_===iEe)return this.consumeCodePoint(),this.consumeCodePoint(),WEe;break;case pb:if(YR(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case kH:if(this.peekCodePoint(0)===ZR)for(this.consumeCodePoint();;){var C=this.consumeCodePoint();if(C===ZR&&(C=this.consumeCodePoint(),C===kH))return this.consumeToken();if(C===Dh)return this.consumeToken()}break;case fEe:return qEe;case pEe:return XEe;case nEe:if(this.peekCodePoint(0)===rEe&&this.peekCodePoint(1)===kl&&this.peekCodePoint(2)===kl)return this.consumeCodePoint(),this.consumeCodePoint(),KEe;break;case oEe:var M=this.peekCodePoint(0),L=this.peekCodePoint(1),z=this.peekCodePoint(2);if(YC(M,L,z)){var h=this.consumeName();return{type:7,value:h}}break;case sEe:return ZEe;case mx:if(ff(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case aEe:return YEe;case lEe:if(this.peekCodePoint(0)===l1)return this.consumeCodePoint(),UEe;break;case cEe:return QEe;case uEe:return HEe;case wEe:case CEe:var j=this.peekCodePoint(0),K=this.peekCodePoint(1);return j===mm&&(v0(K)||K===XC)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case DH:if(this.peekCodePoint(0)===l1)return this.consumeCodePoint(),VEe;if(this.peekCodePoint(0)===DH)return this.consumeCodePoint(),zEe;break;case hEe:if(this.peekCodePoint(0)===l1)return this.consumeCodePoint(),NEe;break;case Dh:return OD}return ZC(t)?(this.consumeWhiteSpace(),JEe):Wa(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):xT(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:As(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();v0(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var n=!1;r===XC&&t.length<6;)t.push(r),r=this.consumeCodePoint(),n=!0;if(n){var i=parseInt(As.apply(void 0,t.map(function(o){return o===XC?wZ:o})),16),l=parseInt(As.apply(void 0,t.map(function(o){return o===XC?TZ:o})),16);return{type:30,start:i,end:l}}var h=parseInt(As.apply(void 0,t),16);if(this.peekCodePoint(0)===kl&&v0(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var p=[];v0(r)&&p.length<6;)p.push(r),r=this.consumeCodePoint();var l=parseInt(As.apply(void 0,p),16);return{type:30,start:h,end:l}}else return{type:30,start:h,end:h}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===qC?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===qC?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Dh)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===WC||r===KC){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Dh||this.peekCodePoint(0)===c1)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),JC)}for(;;){var i=this.consumeCodePoint();if(i===Dh||i===c1)return{type:22,value:As.apply(void 0,t)};if(ZC(i))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Dh||this.peekCodePoint(0)===c1?(this.consumeCodePoint(),{type:22,value:As.apply(void 0,t)}):(this.consumeBadUrlRemnants(),JC);if(i===KC||i===WC||i===qC||MEe(i))return this.consumeBadUrlRemnants(),JC;if(i===mx)if(ff(i,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),JC;else t.push(i)}},e.prototype.consumeWhiteSpace=function(){for(;ZC(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===c1||t===Dh)return;ff(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,n="";t>0;){var i=Math.min(r,t);n+=As.apply(void 0,this._value.splice(0,i)),t-=i}return this._value.shift(),n},e.prototype.consumeStringToken=function(t){var r="",n=0;do{var i=this._value[n];if(i===Dh||i===void 0||i===t)return r+=this.consumeStringSlice(n),{type:0,value:r};if(i===_T)return this._value.splice(0,n),GEe;if(i===mx){var l=this._value[n+1];l!==Dh&&l!==void 0&&(l===_T?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):ff(i,l)&&(r+=this.consumeStringSlice(n),r+=As(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=tw,n=this.peekCodePoint(0);for((n===mm||n===kl)&&t.push(this.consumeCodePoint());Wa(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(n===pb&&Wa(i))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=RH;Wa(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),i=this.peekCodePoint(1);var l=this.peekCodePoint(2);if((n===EZ||n===CZ)&&((i===mm||i===kl)&&Wa(l)||Wa(i)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=RH;Wa(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[REe(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],n=t[1],i=this.peekCodePoint(0),l=this.peekCodePoint(1),h=this.peekCodePoint(2);if(YC(i,l,h)){var p=this.consumeName();return{type:15,number:r,flags:n,unit:p}}return i===eEe?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(v0(t)){for(var r=As(t);v0(this.peekCodePoint(0))&&r.length<6;)r+=As(this.consumeCodePoint());ZC(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||EEe(n)||n>1114111?LH:n}return t===Dh?LH:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(OH(r))t+=As(r);else if(ff(r,this.peekCodePoint(0)))t+=As(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),FZ=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new IZ;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},n=this.consumeToken();;){if(n.type===32||eTe(n,t))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?OD:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),rw=function(e){return e.type===15},iv=function(e){return e.type===17},Xi=function(e){return e.type===20},$Ee=function(e){return e.type===0},UD=function(e,t){return Xi(e)&&e.value===t},PZ=function(e){return e.type!==31},Qy=function(e){return e.type!==31&&e.type!==4},hA=function(e){var t=[],r=[];return e.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&t.push(r),t},eTe=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},Yf=function(e){return e.type===17||e.type===15},xs=function(e){return e.type===16||Yf(e)},MZ=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Ea={type:17,number:0,flags:tw},YO={type:16,number:50,flags:tw},Bf={type:16,number:100,flags:tw},U1=function(e,t,r){var n=e[0],i=e[1];return[lo(n,t),lo(typeof i<"u"?i:n,r)]},lo=function(e,t){if(e.type===16)return e.number/100*t;if(rw(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},RZ="deg",kZ="grad",DZ="rad",LZ="turn",cF={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case RZ:return Math.PI*t.number/180;case kZ:return Math.PI/200*t.number;case DZ:return t.number;case LZ:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},OZ=function(e){return e.type===15&&(e.unit===RZ||e.unit===kZ||e.unit===DZ||e.unit===LZ)},UZ=function(e){var t=e.filter(Xi).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Ea,Ea];case"to top":case"bottom":return ou(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Ea,Bf];case"to right":case"left":return ou(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Bf,Bf];case"to bottom":case"top":return ou(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Bf,Ea];case"to left":case"right":return ou(270)}return 0},ou=function(e){return Math.PI*e/180},Uf={name:"color",parse:function(e,t){if(t.type===18){var r=tTe[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var n=t.value.substring(0,1),i=t.value.substring(1,2),l=t.value.substring(2,3);return Cf(parseInt(n+n,16),parseInt(i+i,16),parseInt(l+l,16),1)}if(t.value.length===4){var n=t.value.substring(0,1),i=t.value.substring(1,2),l=t.value.substring(2,3),h=t.value.substring(3,4);return Cf(parseInt(n+n,16),parseInt(i+i,16),parseInt(l+l,16),parseInt(h+h,16)/255)}if(t.value.length===6){var n=t.value.substring(0,2),i=t.value.substring(2,4),l=t.value.substring(4,6);return Cf(parseInt(n,16),parseInt(i,16),parseInt(l,16),1)}if(t.value.length===8){var n=t.value.substring(0,2),i=t.value.substring(2,4),l=t.value.substring(4,6),h=t.value.substring(6,8);return Cf(parseInt(n,16),parseInt(i,16),parseInt(l,16),parseInt(h,16)/255)}}if(t.type===20){var p=JA[t.value.toUpperCase()];if(typeof p<"u")return p}return JA.TRANSPARENT}},zf=function(e){return(255&e)===0},Ys=function(e){var t=255&e,r=255&e>>8,n=255&e>>16,i=255&e>>24;return t<255?"rgba("+i+","+n+","+r+","+t/255+")":"rgb("+i+","+n+","+r+")"},Cf=function(e,t,r,n){return(e<<24|t<<16|r<<8|Math.round(n*255)<<0)>>>0},UH=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},zH=function(e,t){var r=t.filter(Qy);if(r.length===3){var n=r.map(UH),i=n[0],l=n[1],h=n[2];return Cf(i,l,h,1)}if(r.length===4){var p=r.map(UH),i=p[0],l=p[1],h=p[2],o=p[3];return Cf(i,l,h,o)}return 0};function JR(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var VH=function(e,t){var r=t.filter(Qy),n=r[0],i=r[1],l=r[2],h=r[3],p=(n.type===17?ou(n.number):cF.parse(e,n))/(Math.PI*2),o=xs(i)?i.number/100:0,_=xs(l)?l.number/100:0,C=typeof h<"u"&&xs(h)?lo(h,1):1;if(o===0)return Cf(_*255,_*255,_*255,1);var M=_<=.5?_*(o+1):_+o-_*o,L=_*2-M,z=JR(L,M,p+1/3),j=JR(L,M,p),K=JR(L,M,p-1/3);return Cf(z*255,j*255,K*255,C)},tTe={hsl:VH,hsla:VH,rgb:zH,rgba:zH},gx=function(e,t){return Uf.parse(e,FZ.create(t).parseComponentValue())},JA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},rTe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(Xi(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},nTe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},uF=function(e,t){var r=Uf.parse(e,t[0]),n=t[1];return n&&xs(n)?{color:r,stop:n}:{color:r,stop:null}},NH=function(e,t){var r=e[0],n=e[e.length-1];r.stop===null&&(r.stop=Ea),n.stop===null&&(n.stop=Bf);for(var i=[],l=0,h=0;h<e.length;h++){var p=e[h].stop;if(p!==null){var o=lo(p,t);o>l?i.push(o):i.push(l),l=o}else i.push(null)}for(var _=null,h=0;h<i.length;h++){var C=i[h];if(C===null)_===null&&(_=h);else if(_!==null){for(var M=h-_,L=i[_-1],z=(C-L)/(M+1),j=1;j<=M;j++)i[_+j-1]=z*j;_=null}}return e.map(function(K,$){var q=K.color;return{color:q,stop:Math.max(Math.min(1,i[$]/t),0)}})},iTe=function(e,t,r){var n=t/2,i=r/2,l=lo(e[0],t)-n,h=i-lo(e[1],r);return(Math.atan2(h,l)+Math.PI*2)%(Math.PI*2)},oTe=function(e,t,r){var n=typeof e=="number"?e:iTe(e,t,r),i=Math.abs(t*Math.sin(n))+Math.abs(r*Math.cos(n)),l=t/2,h=r/2,p=i/2,o=Math.sin(n-Math.PI/2)*p,_=Math.cos(n-Math.PI/2)*p;return[i,l-_,l+_,h-o,h+o]},Ku=function(e,t){return Math.sqrt(e*e+t*t)},QH=function(e,t,r,n,i){var l=[[0,0],[0,t],[e,0],[e,t]];return l.reduce(function(h,p){var o=p[0],_=p[1],C=Ku(r-o,n-_);return(i?C<h.optimumDistance:C>h.optimumDistance)?{optimumCorner:p,optimumDistance:C}:h},{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},sTe=function(e,t,r,n,i){var l=0,h=0;switch(e.size){case 0:e.shape===0?l=h=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-i)):e.shape===1&&(l=Math.min(Math.abs(t),Math.abs(t-n)),h=Math.min(Math.abs(r),Math.abs(r-i)));break;case 2:if(e.shape===0)l=h=Math.min(Ku(t,r),Ku(t,r-i),Ku(t-n,r),Ku(t-n,r-i));else if(e.shape===1){var p=Math.min(Math.abs(r),Math.abs(r-i))/Math.min(Math.abs(t),Math.abs(t-n)),o=QH(n,i,t,r,!0),_=o[0],C=o[1];l=Ku(_-t,(C-r)/p),h=p*l}break;case 1:e.shape===0?l=h=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-i)):e.shape===1&&(l=Math.max(Math.abs(t),Math.abs(t-n)),h=Math.max(Math.abs(r),Math.abs(r-i)));break;case 3:if(e.shape===0)l=h=Math.max(Ku(t,r),Ku(t,r-i),Ku(t-n,r),Ku(t-n,r-i));else if(e.shape===1){var p=Math.max(Math.abs(r),Math.abs(r-i))/Math.max(Math.abs(t),Math.abs(t-n)),M=QH(n,i,t,r,!1),_=M[0],C=M[1];l=Ku(_-t,(C-r)/p),h=p*l}break}return Array.isArray(e.size)&&(l=lo(e.size[0],n),h=e.size.length===2?lo(e.size[1],i):l),[l,h]},aTe=function(e,t){var r=ou(180),n=[];return hA(t).forEach(function(i,l){if(l===0){var h=i[0];if(h.type===20&&h.value==="to"){r=UZ(i);return}else if(OZ(h)){r=cF.parse(e,h);return}}var p=uF(e,i);n.push(p)}),{angle:r,stops:n,type:1}},$C=function(e,t){var r=ou(180),n=[];return hA(t).forEach(function(i,l){if(l===0){var h=i[0];if(h.type===20&&["top","left","right","bottom"].indexOf(h.value)!==-1){r=UZ(i);return}else if(OZ(h)){r=(cF.parse(e,h)+ou(270))%ou(360);return}}var p=uF(e,i);n.push(p)}),{angle:r,stops:n,type:1}},lTe=function(e,t){var r=ou(180),n=[],i=1,l=0,h=3,p=[];return hA(t).forEach(function(o,_){var C=o[0];if(_===0){if(Xi(C)&&C.value==="linear"){i=1;return}else if(Xi(C)&&C.value==="radial"){i=2;return}}if(C.type===18){if(C.name==="from"){var M=Uf.parse(e,C.values[0]);n.push({stop:Ea,color:M})}else if(C.name==="to"){var M=Uf.parse(e,C.values[0]);n.push({stop:Bf,color:M})}else if(C.name==="color-stop"){var L=C.values.filter(Qy);if(L.length===2){var M=Uf.parse(e,L[1]),z=L[0];iv(z)&&n.push({stop:{type:16,number:z.number*100,flags:z.flags},color:M})}}}}),i===1?{angle:(r+ou(180))%ou(360),stops:n,type:i}:{size:h,shape:l,stops:n,position:p,type:i}},zZ="closest-side",VZ="farthest-side",NZ="closest-corner",QZ="farthest-corner",HZ="circle",jZ="ellipse",GZ="cover",KZ="contain",cTe=function(e,t){var r=0,n=3,i=[],l=[];return hA(t).forEach(function(h,p){var o=!0;if(p===0){var _=!1;o=h.reduce(function(M,L){if(_)if(Xi(L))switch(L.value){case"center":return l.push(YO),M;case"top":case"left":return l.push(Ea),M;case"right":case"bottom":return l.push(Bf),M}else(xs(L)||Yf(L))&&l.push(L);else if(Xi(L))switch(L.value){case HZ:return r=0,!1;case jZ:return r=1,!1;case"at":return _=!0,!1;case zZ:return n=0,!1;case GZ:case VZ:return n=1,!1;case KZ:case NZ:return n=2,!1;case QZ:return n=3,!1}else if(Yf(L)||xs(L))return Array.isArray(n)||(n=[]),n.push(L),!1;return M},o)}if(o){var C=uF(e,h);i.push(C)}}),{size:n,shape:r,stops:i,position:l,type:2}},eS=function(e,t){var r=0,n=3,i=[],l=[];return hA(t).forEach(function(h,p){var o=!0;if(p===0?o=h.reduce(function(C,M){if(Xi(M))switch(M.value){case"center":return l.push(YO),!1;case"top":case"left":return l.push(Ea),!1;case"right":case"bottom":return l.push(Bf),!1}else if(xs(M)||Yf(M))return l.push(M),!1;return C},o):p===1&&(o=h.reduce(function(C,M){if(Xi(M))switch(M.value){case HZ:return r=0,!1;case jZ:return r=1,!1;case KZ:case zZ:return n=0,!1;case VZ:return n=1,!1;case NZ:return n=2,!1;case GZ:case QZ:return n=3,!1}else if(Yf(M)||xs(M))return Array.isArray(n)||(n=[]),n.push(M),!1;return C},o)),o){var _=uF(e,h);i.push(_)}}),{size:n,shape:r,stops:i,position:l,type:2}},uTe=function(e){return e.type===1},hTe=function(e){return e.type===2},JO={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var n=WZ[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function ATe(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!WZ[e.name])}var WZ={"linear-gradient":aTe,"-moz-linear-gradient":$C,"-ms-linear-gradient":$C,"-o-linear-gradient":$C,"-webkit-linear-gradient":$C,"radial-gradient":cTe,"-moz-radial-gradient":eS,"-ms-radial-gradient":eS,"-o-radial-gradient":eS,"-webkit-radial-gradient":eS,"-webkit-gradient":lTe},dTe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(n){return Qy(n)&&ATe(n)}).map(function(n){return JO.parse(e,n)})}},fTe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(Xi(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},pTe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return hA(t).map(function(r){return r.filter(xs)}).map(MZ)}},mTe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return hA(t).map(function(r){return r.filter(Xi).map(function(n){return n.value}).join(" ")}).map(gTe)}},gTe=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},yy;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(yy||(yy={}));var yTe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return hA(t).map(function(r){return r.filter(vTe)})}},vTe=function(e){return Xi(e)||xs(e)},hF=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},_Te=hF("top"),xTe=hF("right"),bTe=hF("bottom"),wTe=hF("left"),AF=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return MZ(r.filter(xs))}}},BTe=AF("top-left"),CTe=AF("top-right"),STe=AF("bottom-right"),ETe=AF("bottom-left"),dF=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},TTe=dF("top"),ITe=dF("right"),FTe=dF("bottom"),PTe=dF("left"),fF=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return rw(r)?r.number:0}}},MTe=fF("top"),RTe=fF("right"),kTe=fF("bottom"),DTe=fF("left"),LTe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},OTe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},UTe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(Xi).reduce(function(r,n){return r|zTe(n.value)},0)}},zTe=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},VTe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},NTe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},bT;(function(e){e.NORMAL="normal",e.STRICT="strict"})(bT||(bT={}));var QTe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return bT.STRICT;case"normal":default:return bT.NORMAL}}},HTe={name:"line-height",initialValue:"normal",prefix:!1,type:4},HH=function(e,t){return Xi(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:xs(e)?lo(e,t):t},jTe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:JO.parse(e,t)}},GTe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},zD={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},pF=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},KTe=pF("top"),WTe=pF("right"),qTe=pF("bottom"),XTe=pF("left"),ZTe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(Xi).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},YTe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},mF=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},JTe=mF("top"),$Te=mF("right"),eIe=mF("bottom"),tIe=mF("left"),rIe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},nIe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},iIe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&UD(t[0],"none")?[]:hA(t).map(function(r){for(var n={color:JA.TRANSPARENT,offsetX:Ea,offsetY:Ea,blur:Ea},i=0,l=0;l<r.length;l++){var h=r[l];Yf(h)?(i===0?n.offsetX=h:i===1?n.offsetY=h:n.blur=h,i++):n.color=Uf.parse(e,h)}return n})}},oIe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},sIe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=cIe[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},aIe=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},lIe=function(e){var t=e.filter(function(o){return o.type===17}).map(function(o){return o.number}),r=t[0],n=t[1];t[2],t[3];var i=t[4],l=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var h=t[12],p=t[13];return t[14],t[15],t.length===16?[r,n,i,l,h,p]:null},cIe={matrix:aIe,matrix3d:lIe},jH={type:16,number:50,flags:tw},uIe=[jH,jH],hIe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(xs);return r.length!==2?uIe:[r[0],r[1]]}},AIe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},yx;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(yx||(yx={}));var dIe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return yx.BREAK_ALL;case"keep-all":return yx.KEEP_ALL;case"normal":default:return yx.NORMAL}}},fIe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(iv(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},qZ={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},pIe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return iv(t)?t.number:1}},mIe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},gIe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(Xi).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},yIe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],n=[];return t.forEach(function(i){switch(i.type){case 20:case 0:r.push(i.value);break;case 17:r.push(i.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(i){return i.indexOf(" ")===-1?i:"'"+i+"'"})}},vIe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},_Ie={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(iv(t))return t.number;if(Xi(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},xIe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(Xi).map(function(r){return r.value})}},bIe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},ks=function(e,t){return(e&t)!==0},wIe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},BIe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var n=[],i=t.filter(PZ),l=0;l<i.length;l++){var h=i[l],p=i[l+1];if(h.type===20){var o=p&&iv(p)?p.number:1;n.push({counter:h.value,increment:o})}}return n}},CIe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],n=t.filter(PZ),i=0;i<n.length;i++){var l=n[i],h=n[i+1];if(Xi(l)&&l.value!=="none"){var p=h&&iv(h)?h.number:0;r.push({counter:l.value,reset:p})}}return r}},SIe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(rw).map(function(r){return qZ.parse(e,r)})}},EIe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var n=[],i=t.filter($Ee);if(i.length%2!==0)return null;for(var l=0;l<i.length;l+=2){var h=i[l].value,p=i[l+1].value;n.push({open:h,close:p})}return n}},GH=function(e,t,r){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?r?n.open:n.close:""},TIe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&UD(t[0],"none")?[]:hA(t).map(function(r){for(var n={color:255,offsetX:Ea,offsetY:Ea,blur:Ea,spread:Ea,inset:!1},i=0,l=0;l<r.length;l++){var h=r[l];UD(h,"inset")?n.inset=!0:Yf(h)?(i===0?n.offsetX=h:i===1?n.offsetY=h:i===2?n.blur=h:n.spread=h,i++):n.color=Uf.parse(e,h)}return n})}},IIe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],n=[];return t.filter(Xi).forEach(function(i){switch(i.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(i){n.indexOf(i)===-1&&n.push(i)}),n}},FIe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},PIe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return rw(t)?t.number:0}},MIe=function(){function e(t,r){var n,i;this.animationDuration=Ir(t,SIe,r.animationDuration),this.backgroundClip=Ir(t,rTe,r.backgroundClip),this.backgroundColor=Ir(t,nTe,r.backgroundColor),this.backgroundImage=Ir(t,dTe,r.backgroundImage),this.backgroundOrigin=Ir(t,fTe,r.backgroundOrigin),this.backgroundPosition=Ir(t,pTe,r.backgroundPosition),this.backgroundRepeat=Ir(t,mTe,r.backgroundRepeat),this.backgroundSize=Ir(t,yTe,r.backgroundSize),this.borderTopColor=Ir(t,_Te,r.borderTopColor),this.borderRightColor=Ir(t,xTe,r.borderRightColor),this.borderBottomColor=Ir(t,bTe,r.borderBottomColor),this.borderLeftColor=Ir(t,wTe,r.borderLeftColor),this.borderTopLeftRadius=Ir(t,BTe,r.borderTopLeftRadius),this.borderTopRightRadius=Ir(t,CTe,r.borderTopRightRadius),this.borderBottomRightRadius=Ir(t,STe,r.borderBottomRightRadius),this.borderBottomLeftRadius=Ir(t,ETe,r.borderBottomLeftRadius),this.borderTopStyle=Ir(t,TTe,r.borderTopStyle),this.borderRightStyle=Ir(t,ITe,r.borderRightStyle),this.borderBottomStyle=Ir(t,FTe,r.borderBottomStyle),this.borderLeftStyle=Ir(t,PTe,r.borderLeftStyle),this.borderTopWidth=Ir(t,MTe,r.borderTopWidth),this.borderRightWidth=Ir(t,RTe,r.borderRightWidth),this.borderBottomWidth=Ir(t,kTe,r.borderBottomWidth),this.borderLeftWidth=Ir(t,DTe,r.borderLeftWidth),this.boxShadow=Ir(t,TIe,r.boxShadow),this.color=Ir(t,LTe,r.color),this.direction=Ir(t,OTe,r.direction),this.display=Ir(t,UTe,r.display),this.float=Ir(t,VTe,r.cssFloat),this.fontFamily=Ir(t,yIe,r.fontFamily),this.fontSize=Ir(t,vIe,r.fontSize),this.fontStyle=Ir(t,bIe,r.fontStyle),this.fontVariant=Ir(t,xIe,r.fontVariant),this.fontWeight=Ir(t,_Ie,r.fontWeight),this.letterSpacing=Ir(t,NTe,r.letterSpacing),this.lineBreak=Ir(t,QTe,r.lineBreak),this.lineHeight=Ir(t,HTe,r.lineHeight),this.listStyleImage=Ir(t,jTe,r.listStyleImage),this.listStylePosition=Ir(t,GTe,r.listStylePosition),this.listStyleType=Ir(t,zD,r.listStyleType),this.marginTop=Ir(t,KTe,r.marginTop),this.marginRight=Ir(t,WTe,r.marginRight),this.marginBottom=Ir(t,qTe,r.marginBottom),this.marginLeft=Ir(t,XTe,r.marginLeft),this.opacity=Ir(t,pIe,r.opacity);var l=Ir(t,ZTe,r.overflow);this.overflowX=l[0],this.overflowY=l[l.length>1?1:0],this.overflowWrap=Ir(t,YTe,r.overflowWrap),this.paddingTop=Ir(t,JTe,r.paddingTop),this.paddingRight=Ir(t,$Te,r.paddingRight),this.paddingBottom=Ir(t,eIe,r.paddingBottom),this.paddingLeft=Ir(t,tIe,r.paddingLeft),this.paintOrder=Ir(t,IIe,r.paintOrder),this.position=Ir(t,nIe,r.position),this.textAlign=Ir(t,rIe,r.textAlign),this.textDecorationColor=Ir(t,mIe,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=Ir(t,gIe,(i=r.textDecorationLine)!==null&&i!==void 0?i:r.textDecoration),this.textShadow=Ir(t,iIe,r.textShadow),this.textTransform=Ir(t,oIe,r.textTransform),this.transform=Ir(t,sIe,r.transform),this.transformOrigin=Ir(t,hIe,r.transformOrigin),this.visibility=Ir(t,AIe,r.visibility),this.webkitTextStrokeColor=Ir(t,FIe,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Ir(t,PIe,r.webkitTextStrokeWidth),this.wordBreak=Ir(t,dIe,r.wordBreak),this.zIndex=Ir(t,fIe,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return zf(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return ks(this.display,4)||ks(this.display,33554432)||ks(this.display,268435456)||ks(this.display,536870912)||ks(this.display,67108864)||ks(this.display,134217728)},e}(),RIe=function(){function e(t,r){this.content=Ir(t,wIe,r.content),this.quotes=Ir(t,EIe,r.quotes)}return e}(),KH=function(){function e(t,r){this.counterIncrement=Ir(t,BIe,r.counterIncrement),this.counterReset=Ir(t,CIe,r.counterReset)}return e}(),Ir=function(e,t,r){var n=new IZ,i=r!==null&&typeof r<"u"?r.toString():t.initialValue;n.write(i);var l=new FZ(n.read());switch(t.type){case 2:var h=l.parseComponentValue();return t.parse(e,Xi(h)?h.value:t.initialValue);case 0:return t.parse(e,l.parseComponentValue());case 1:return t.parse(e,l.parseComponentValues());case 4:return l.parseComponentValue();case 3:switch(t.format){case"angle":return cF.parse(e,l.parseComponentValue());case"color":return Uf.parse(e,l.parseComponentValue());case"image":return JO.parse(e,l.parseComponentValue());case"length":var p=l.parseComponentValue();return Yf(p)?p:Ea;case"length-percentage":var o=l.parseComponentValue();return xs(o)?o:Ea;case"time":return qZ.parse(e,l.parseComponentValue())}break}},kIe="data-html2canvas-debug",DIe=function(e){var t=e.getAttribute(kIe);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},VD=function(e,t){var r=DIe(e);return r===1||t===r},AA=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,VD(r,3))debugger;this.styles=new MIe(t,window.getComputedStyle(r,null)),HD(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=aF(this.context,r),VD(r,4)&&(this.flags|=16)}return e}(),LIe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",WH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",z1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var tS=0;tS<WH.length;tS++)z1[WH.charCodeAt(tS)]=tS;var OIe=function(e){var t=e.length*.75,r=e.length,n,i=0,l,h,p,o;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var _=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),C=Array.isArray(_)?_:new Uint8Array(_);for(n=0;n<r;n+=4)l=z1[e.charCodeAt(n)],h=z1[e.charCodeAt(n+1)],p=z1[e.charCodeAt(n+2)],o=z1[e.charCodeAt(n+3)],C[i++]=l<<2|h>>4,C[i++]=(h&15)<<4|p>>2,C[i++]=(p&3)<<6|o&63;return _},UIe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},zIe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},Tm=5,$O=11,$R=2,VIe=$O-Tm,XZ=65536>>Tm,NIe=1<<Tm,ek=NIe-1,QIe=1024>>Tm,HIe=XZ+QIe,jIe=HIe,GIe=32,KIe=jIe+GIe,WIe=65536>>$O,qIe=1<<VIe,XIe=qIe-1,qH=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},ZIe=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},YIe=function(e,t){var r=OIe(e),n=Array.isArray(r)?zIe(r):new Uint32Array(r),i=Array.isArray(r)?UIe(r):new Uint16Array(r),l=24,h=qH(i,l/2,n[4]/2),p=n[5]===2?qH(i,(l+n[4])/2):ZIe(n,Math.ceil((l+n[4])/4));return new JIe(n[0],n[1],n[2],n[3],h,p)},JIe=function(){function e(t,r,n,i,l,h){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=i,this.index=l,this.data=h}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Tm],r=(r<<$R)+(t&ek),this.data[r];if(t<=65535)return r=this.index[XZ+(t-55296>>Tm)],r=(r<<$R)+(t&ek),this.data[r];if(t<this.highStart)return r=KIe-WIe+(t>>$O),r=this.index[r],r+=t>>Tm&XIe,r=this.index[r],r=(r<<$R)+(t&ek),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),XH="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$Ie=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var rS=0;rS<XH.length;rS++)$Ie[XH.charCodeAt(rS)]=rS;var eFe=1,tk=2,rk=3,ZH=4,YH=5,tFe=7,JH=8,nk=9,ik=10,$H=11,e8=12,t8=13,r8=14,ok=15,rFe=function(e){for(var t=[],r=0,n=e.length;r<n;){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var l=e.charCodeAt(r++);(l&64512)===56320?t.push(((i&1023)<<10)+(l&1023)+65536):(t.push(i),r--)}else t.push(i)}return t},nFe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],i=-1,l="";++i<r;){var h=e[i];h<=65535?n.push(h):(h-=65536,n.push((h>>10)+55296,h%1024+56320)),(i+1===r||n.length>16384)&&(l+=String.fromCharCode.apply(String,n),n.length=0)}return l},iFe=YIe(LIe),Yc="",sk="",oFe=function(e){return iFe.get(e)},sFe=function(e,t,r){var n=r-2,i=t[n],l=t[r-1],h=t[r];if(l===tk&&h===rk)return Yc;if(l===tk||l===rk||l===ZH||h===tk||h===rk||h===ZH)return sk;if(l===JH&&[JH,nk,$H,e8].indexOf(h)!==-1||(l===$H||l===nk)&&(h===nk||h===ik)||(l===e8||l===ik)&&h===ik||h===t8||h===YH||h===tFe||l===eFe)return Yc;if(l===t8&&h===r8){for(;i===YH;)i=t[--n];if(i===r8)return Yc}if(l===ok&&h===ok){for(var p=0;i===ok;)p++,i=t[--n];if(p%2===0)return Yc}return sk},aFe=function(e){var t=rFe(e),r=t.length,n=0,i=0,l=t.map(oFe);return{next:function(){if(n>=r)return{done:!0,value:null};for(var h=Yc;n<r&&(h=sFe(t,l,++n))===Yc;);if(h!==Yc||n===r){var p=nFe.apply(null,t.slice(i,n));return i=n,{value:p,done:!1}}return{done:!0,value:null}}}},lFe=function(e){for(var t=aFe(e),r=[],n;!(n=t.next()).done;)n.value&&r.push(n.value.slice());return r},cFe=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=t+"px",n.style.display="block",e.body.appendChild(n),r.selectNode(n);var i=r.getBoundingClientRect(),l=Math.round(i.height);if(e.body.removeChild(n),l===t)return!0}}return!1},uFe=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=t.firstChild,i=lF(n.data).map(function(o){return As(o)}),l=0,h={},p=i.every(function(o,_){r.setStart(n,l),r.setEnd(n,l+o.length);var C=r.getBoundingClientRect();l+=o.length;var M=C.x>h.x||C.y>h.y;return h=C,_===0?!0:M});return e.body.removeChild(t),p},hFe=function(){return typeof new Image().crossOrigin<"u"},AFe=function(){return typeof new XMLHttpRequest().responseType=="string"},dFe=function(e){var t=new Image,r=e.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},n8=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},fFe=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var i=new Image,l=t.toDataURL();i.src=l;var h=ND(r,r,0,0,i);return n.fillStyle="red",n.fillRect(0,0,r,r),i8(h).then(function(p){n.drawImage(p,0,0);var o=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var _=e.createElement("div");return _.style.backgroundImage="url("+l+")",_.style.height=r+"px",n8(o)?i8(ND(r,r,0,0,_)):Promise.reject(!1)}).then(function(p){return n.drawImage(p,0,0),n8(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},ND=function(e,t,r,n,i){var l="http://www.w3.org/2000/svg",h=document.createElementNS(l,"svg"),p=document.createElementNS(l,"foreignObject");return h.setAttributeNS(null,"width",e.toString()),h.setAttributeNS(null,"height",t.toString()),p.setAttributeNS(null,"width","100%"),p.setAttributeNS(null,"height","100%"),p.setAttributeNS(null,"x",r.toString()),p.setAttributeNS(null,"y",n.toString()),p.setAttributeNS(null,"externalResourcesRequired","true"),h.appendChild(p),p.appendChild(i),h},i8=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},xa={get SUPPORT_RANGE_BOUNDS(){var e=cFe(document);return Object.defineProperty(xa,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=xa.SUPPORT_RANGE_BOUNDS&&uFe(document);return Object.defineProperty(xa,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=dFe(document);return Object.defineProperty(xa,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?fFe(document):Promise.resolve(!1);return Object.defineProperty(xa,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=hFe();return Object.defineProperty(xa,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=AFe();return Object.defineProperty(xa,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(xa,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(xa,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},vx=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),pFe=function(e,t,r,n){var i=yFe(t,r),l=[],h=0;return i.forEach(function(p){if(r.textDecorationLine.length||p.trim().length>0)if(xa.SUPPORT_RANGE_BOUNDS){var o=o8(n,h,p.length).getClientRects();if(o.length>1){var _=eU(p),C=0;_.forEach(function(L){l.push(new vx(L,hd.fromDOMRectList(e,o8(n,C+h,L.length).getClientRects()))),C+=L.length})}else l.push(new vx(p,hd.fromDOMRectList(e,o)))}else{var M=n.splitText(p.length);l.push(new vx(p,mFe(e,n))),n=M}else xa.SUPPORT_RANGE_BOUNDS||(n=n.splitText(p.length));h+=p.length}),l},mFe=function(e,t){var r=t.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var i=t.parentNode;if(i){i.replaceChild(n,t);var l=aF(e,n);return n.firstChild&&i.replaceChild(n.firstChild,n),l}}return hd.EMPTY},o8=function(e,t,r){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var i=n.createRange();return i.setStart(e,t),i.setEnd(e,t+r),i},eU=function(e){if(xa.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return lFe(e)},gFe=function(e,t){if(xa.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(n){return n.segment})}return _Fe(e,t)},yFe=function(e,t){return t.letterSpacing!==0?eU(e):gFe(e,t)},vFe=[32,160,4961,65792,65793,4153,4241],_Fe=function(e,t){for(var r=WSe(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),n=[],i,l=function(){if(i.value){var h=i.value.slice(),p=lF(h),o="";p.forEach(function(_){vFe.indexOf(_)===-1?o+=As(_):(o.length&&n.push(o),n.push(As(_)),o="")}),o.length&&n.push(o)}};!(i=r.next()).done;)l();return n},xFe=function(){function e(t,r,n){this.text=bFe(r.data,n.textTransform),this.textBounds=pFe(t,this.text,n,r)}return e}(),bFe=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(wFe,BFe);case 2:return e.toUpperCase();default:return e}},wFe=/(^|\s|:|-|\(|\))([a-z])/g,BFe=function(e,t,r){return e.length>0?t+r.toUpperCase():e},ZZ=function(e){hh(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.src=n.currentSrc||n.src,i.intrinsicWidth=n.naturalWidth,i.intrinsicHeight=n.naturalHeight,i.context.cache.addImage(i.src),i}return t}(AA),YZ=function(e){hh(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.canvas=n,i.intrinsicWidth=n.width,i.intrinsicHeight=n.height,i}return t}(AA),JZ=function(e){hh(t,e);function t(r,n){var i=e.call(this,r,n)||this,l=new XMLSerializer,h=aF(r,n);return n.setAttribute("width",h.width+"px"),n.setAttribute("height",h.height+"px"),i.svg="data:image/svg+xml,"+encodeURIComponent(l.serializeToString(n)),i.intrinsicWidth=n.width.baseVal.value,i.intrinsicHeight=n.height.baseVal.value,i.context.cache.addImage(i.svg),i}return t}(AA),$Z=function(e){hh(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.value=n.value,i}return t}(AA),QD=function(e){hh(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.start=n.start,i.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,i}return t}(AA),CFe=[{type:15,flags:0,unit:"px",number:3}],SFe=[{type:16,flags:0,number:50}],EFe=function(e){return e.width>e.height?new hd(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new hd(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},TFe=function(e){var t=e.type===IFe?new Array(e.value.length+1).join(""):e.value;return t.length===0?e.placeholder||"":t},wT="checkbox",BT="radio",IFe="password",s8=707406591,tU=function(e){hh(t,e);function t(r,n){var i=e.call(this,r,n)||this;switch(i.type=n.type.toLowerCase(),i.checked=n.checked,i.value=TFe(n),(i.type===wT||i.type===BT)&&(i.styles.backgroundColor=3739148031,i.styles.borderTopColor=i.styles.borderRightColor=i.styles.borderBottomColor=i.styles.borderLeftColor=2779096575,i.styles.borderTopWidth=i.styles.borderRightWidth=i.styles.borderBottomWidth=i.styles.borderLeftWidth=1,i.styles.borderTopStyle=i.styles.borderRightStyle=i.styles.borderBottomStyle=i.styles.borderLeftStyle=1,i.styles.backgroundClip=[0],i.styles.backgroundOrigin=[0],i.bounds=EFe(i.bounds)),i.type){case wT:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=CFe;break;case BT:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=SFe;break}return i}return t}(AA),eY=function(e){hh(t,e);function t(r,n){var i=e.call(this,r,n)||this,l=n.options[n.selectedIndex||0];return i.value=l&&l.text||"",i}return t}(AA),tY=function(e){hh(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.value=n.value,i}return t}(AA),rY=function(e){hh(t,e);function t(r,n){var i=e.call(this,r,n)||this;i.src=n.src,i.width=parseInt(n.width,10)||0,i.height=parseInt(n.height,10)||0,i.backgroundColor=i.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){i.tree=iY(r,n.contentWindow.document.documentElement);var l=n.contentWindow.document.documentElement?gx(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):JA.TRANSPARENT,h=n.contentWindow.document.body?gx(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):JA.TRANSPARENT;i.backgroundColor=zf(l)?zf(h)?i.styles.backgroundColor:h:l}}catch{}return i}return t}(AA),FFe=["OL","UL","MENU"],lE=function(e,t,r,n){for(var i=t.firstChild,l=void 0;i;i=l)if(l=i.nextSibling,oY(i)&&i.data.trim().length>0)r.textNodes.push(new xFe(e,i,r.styles));else if(ry(i))if(cY(i)&&i.assignedNodes)i.assignedNodes().forEach(function(p){return lE(e,p,r,n)});else{var h=nY(e,i);h.styles.isVisible()&&(PFe(i,h,n)?h.flags|=4:MFe(h.styles)&&(h.flags|=2),FFe.indexOf(i.tagName)!==-1&&(h.flags|=8),r.elements.push(h),i.slot,i.shadowRoot?lE(e,i.shadowRoot,h,n):!CT(i)&&!sY(i)&&!ST(i)&&lE(e,i,h,n))}},nY=function(e,t){return jD(t)?new ZZ(e,t):aY(t)?new YZ(e,t):sY(t)?new JZ(e,t):RFe(t)?new $Z(e,t):kFe(t)?new QD(e,t):DFe(t)?new tU(e,t):ST(t)?new eY(e,t):CT(t)?new tY(e,t):lY(t)?new rY(e,t):new AA(e,t)},iY=function(e,t){var r=nY(e,t);return r.flags|=4,lE(e,t,r,r),r},PFe=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||rU(e)&&r.styles.isTransparent()},MFe=function(e){return e.isPositioned()||e.isFloating()},oY=function(e){return e.nodeType===Node.TEXT_NODE},ry=function(e){return e.nodeType===Node.ELEMENT_NODE},HD=function(e){return ry(e)&&typeof e.style<"u"&&!cE(e)},cE=function(e){return typeof e.className=="object"},RFe=function(e){return e.tagName==="LI"},kFe=function(e){return e.tagName==="OL"},DFe=function(e){return e.tagName==="INPUT"},LFe=function(e){return e.tagName==="HTML"},sY=function(e){return e.tagName==="svg"},rU=function(e){return e.tagName==="BODY"},aY=function(e){return e.tagName==="CANVAS"},a8=function(e){return e.tagName==="VIDEO"},jD=function(e){return e.tagName==="IMG"},lY=function(e){return e.tagName==="IFRAME"},l8=function(e){return e.tagName==="STYLE"},OFe=function(e){return e.tagName==="SCRIPT"},CT=function(e){return e.tagName==="TEXTAREA"},ST=function(e){return e.tagName==="SELECT"},cY=function(e){return e.tagName==="SLOT"},c8=function(e){return e.tagName.indexOf("-")>0},UFe=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(n){return r.counters[n].pop()})},e.prototype.parse=function(t){var r=this,n=t.counterIncrement,i=t.counterReset,l=!0;n!==null&&n.forEach(function(p){var o=r.counters[p.counter];o&&p.increment!==0&&(l=!1,o.length||o.push(1),o[Math.max(0,o.length-1)]+=p.increment)});var h=[];return l&&i.forEach(function(p){var o=r.counters[p.counter];h.push(p.counter),o||(o=r.counters[p.counter]=[]),o.push(p.reset)}),h},e}(),u8={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},h8={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},zFe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},VFe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},_0=function(e,t,r,n,i,l){return e<t||e>r?mb(e,i,l.length>0):n.integers.reduce(function(h,p,o){for(;e>=p;)e-=p,h+=n.values[o];return h},"")+l},uY=function(e,t,r,n){var i="";do r||e--,i=n(e)+i,e/=t;while(e*t>=t);return i},cs=function(e,t,r,n,i){var l=r-t+1;return(e<0?"-":"")+(uY(Math.abs(e),l,n,function(h){return As(Math.floor(h%l)+t)})+i)},em=function(e,t,r){r===void 0&&(r=". ");var n=t.length;return uY(Math.abs(e),n,!1,function(i){return t[Math.floor(i%n)]})+r},I0=1,af=2,lf=4,V1=8,MA=function(e,t,r,n,i,l){if(e<-9999||e>9999)return mb(e,4,i.length>0);var h=Math.abs(e),p=i;if(h===0)return t[0]+p;for(var o=0;h>0&&o<=4;o++){var _=h%10;_===0&&ks(l,I0)&&p!==""?p=t[_]+p:_>1||_===1&&o===0||_===1&&o===1&&ks(l,af)||_===1&&o===1&&ks(l,lf)&&e>100||_===1&&o>1&&ks(l,V1)?p=t[_]+(o>0?r[o-1]:"")+p:_===1&&o>0&&(p=r[o-1]+p),h=Math.floor(h/10)}return(e<0?n:"")+p},A8="",d8="",f8="",ak="",mb=function(e,t,r){var n=r?". ":"",i=r?"":"",l=r?", ":"",h=r?" ":"";switch(t){case 0:return""+h;case 1:return""+h;case 2:return""+h;case 5:var p=cs(e,48,57,!0,n);return p.length<4?"0"+p:p;case 4:return em(e,"",i);case 6:return _0(e,1,3999,u8,3,n).toLowerCase();case 7:return _0(e,1,3999,u8,3,n);case 8:return cs(e,945,969,!1,n);case 9:return cs(e,97,122,!1,n);case 10:return cs(e,65,90,!1,n);case 11:return cs(e,1632,1641,!0,n);case 12:case 49:return _0(e,1,9999,h8,3,n);case 35:return _0(e,1,9999,h8,3,n).toLowerCase();case 13:return cs(e,2534,2543,!0,n);case 14:case 30:return cs(e,6112,6121,!0,n);case 15:return em(e,"",i);case 16:return em(e,"",i);case 17:case 48:return MA(e,"",A8,"",i,af|lf|V1);case 47:return MA(e,"",d8,"",i,I0|af|lf|V1);case 42:return MA(e,"",A8,"",i,af|lf|V1);case 41:return MA(e,"",d8,"",i,I0|af|lf|V1);case 26:return MA(e,"","",f8,i,0);case 25:return MA(e,"","",f8,i,I0|af|lf);case 31:return MA(e,"","",ak,l,I0|af|lf);case 33:return MA(e,"","",ak,l,0);case 32:return MA(e,"","",ak,l,I0|af|lf);case 18:return cs(e,2406,2415,!0,n);case 20:return _0(e,1,19999,VFe,3,n);case 21:return cs(e,2790,2799,!0,n);case 22:return cs(e,2662,2671,!0,n);case 22:return _0(e,1,10999,zFe,3,n);case 23:return em(e,"");case 24:return em(e,"");case 27:return cs(e,3302,3311,!0,n);case 28:return em(e,"",i);case 29:return em(e,"",i);case 34:return cs(e,3792,3801,!0,n);case 37:return cs(e,6160,6169,!0,n);case 38:return cs(e,4160,4169,!0,n);case 39:return cs(e,2918,2927,!0,n);case 40:return cs(e,1776,1785,!0,n);case 43:return cs(e,3046,3055,!0,n);case 44:return cs(e,3174,3183,!0,n);case 45:return cs(e,3664,3673,!0,n);case 46:return cs(e,3872,3881,!0,n);case 3:default:return cs(e,48,57,!0,n)}},hY="data-html2canvas-ignore",p8=function(){function e(t,r,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new UFe,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var n=this,i=NFe(t,r);if(!i.contentWindow)return Promise.reject("Unable to find iframe window");var l=t.defaultView.pageXOffset,h=t.defaultView.pageYOffset,p=i.contentWindow,o=p.document,_=jFe(i).then(function(){return ul(n,void 0,void 0,function(){var C,M;return ja(this,function(L){switch(L.label){case 0:return this.scrolledElements.forEach(qFe),p&&(p.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(p.scrollY!==r.top||p.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(p.scrollX-r.left,p.scrollY-r.top,0,0))),C=this.options.onclone,M=this.clonedReferenceElement,typeof M>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:o.fonts&&o.fonts.ready?[4,o.fonts.ready]:[3,2];case 1:L.sent(),L.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,HFe(o)]:[3,4];case 3:L.sent(),L.label=4;case 4:return typeof C=="function"?[2,Promise.resolve().then(function(){return C(o,M)}).then(function(){return i})]:[2,i]}})})});return o.open(),o.write(KFe(document.doctype)+"<html></html>"),WFe(this.referenceElement.ownerDocument,l,h),o.replaceChild(o.adoptNode(this.documentElement),o.documentElement),o.close(),_},e.prototype.createElementClone=function(t){if(VD(t,2))debugger;if(aY(t))return this.createCanvasClone(t);if(a8(t))return this.createVideoClone(t);if(l8(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return jD(r)&&(jD(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),c8(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return lk(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(l,h){return h&&typeof h.cssText=="string"?l+h.cssText:l},""),i=t.cloneNode(!1);return i.textContent=n,i}}catch(l){if(this.context.logger.error("Unable to access cssRules property",l),l.name!=="SecurityError")throw l}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var i=t.cloneNode(!1);try{i.width=t.width,i.height=t.height;var l=t.getContext("2d"),h=i.getContext("2d");if(h)if(!this.options.allowTaint&&l)h.putImageData(l.getImageData(0,0,t.width,t.height),0,0);else{var p=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(p){var o=p.getContextAttributes();(o==null?void 0:o.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}h.drawImage(t,0,0)}return i}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return i},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var i=t.ownerDocument.createElement("canvas");return i.width=t.offsetWidth,i.height=t.offsetHeight,i},e.prototype.appendChildNode=function(t,r,n){(!ry(r)||!OFe(r)&&!r.hasAttribute(hY)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!ry(r)||!l8(r))&&t.appendChild(this.cloneNode(r,n))},e.prototype.cloneChildNodes=function(t,r,n){for(var i=this,l=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;l;l=l.nextSibling)if(ry(l)&&cY(l)&&typeof l.assignedNodes=="function"){var h=l.assignedNodes();h.length&&h.forEach(function(p){return i.appendChildNode(r,p,n)})}else this.appendChildNode(r,l,n)},e.prototype.cloneNode=function(t,r){if(oY(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&ry(t)&&(HD(t)||cE(t))){var i=this.createElementClone(t);i.style.transitionProperty="none";var l=n.getComputedStyle(t),h=n.getComputedStyle(t,":before"),p=n.getComputedStyle(t,":after");this.referenceElement===t&&HD(i)&&(this.clonedReferenceElement=i),rU(i)&&YFe(i);var o=this.counters.parse(new KH(this.context,l)),_=this.resolvePseudoContent(t,i,h,_x.BEFORE);c8(t)&&(r=!0),a8(t)||this.cloneChildNodes(t,i,r),_&&i.insertBefore(_,i.firstChild);var C=this.resolvePseudoContent(t,i,p,_x.AFTER);return C&&i.appendChild(C),this.counters.pop(o),(l&&(this.options.copyStyles||cE(t))&&!lY(t)||r)&&lk(l,i),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([i,t.scrollLeft,t.scrollTop]),(CT(t)||ST(t))&&(CT(i)||ST(i))&&(i.value=t.value),i}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,n,i){var l=this;if(n){var h=n.content,p=r.ownerDocument;if(!(!p||!h||h==="none"||h==="-moz-alt-content"||n.display==="none")){this.counters.parse(new KH(this.context,n));var o=new RIe(this.context,n),_=p.createElement("html2canvaspseudoelement");lk(n,_),o.content.forEach(function(M){if(M.type===0)_.appendChild(p.createTextNode(M.value));else if(M.type===22){var L=p.createElement("img");L.src=M.value,L.style.opacity="1",_.appendChild(L)}else if(M.type===18){if(M.name==="attr"){var z=M.values.filter(Xi);z.length&&_.appendChild(p.createTextNode(t.getAttribute(z[0].value)||""))}else if(M.name==="counter"){var j=M.values.filter(Qy),K=j[0],$=j[1];if(K&&Xi(K)){var q=l.counters.getCounterValue(K.value),ee=$&&Xi($)?zD.parse(l.context,$.value):3;_.appendChild(p.createTextNode(mb(q,ee,!1)))}}else if(M.name==="counters"){var ie=M.values.filter(Qy),K=ie[0],fe=ie[1],$=ie[2];if(K&&Xi(K)){var me=l.counters.getCounterValues(K.value),ye=$&&Xi($)?zD.parse(l.context,$.value):3,se=fe&&fe.type===0?fe.value:"",re=me.map(function(ve){return mb(ve,ye,!1)}).join(se);_.appendChild(p.createTextNode(re))}}}else if(M.type===20)switch(M.value){case"open-quote":_.appendChild(p.createTextNode(GH(o.quotes,l.quoteDepth++,!0)));break;case"close-quote":_.appendChild(p.createTextNode(GH(o.quotes,--l.quoteDepth,!1)));break;default:_.appendChild(p.createTextNode(M.value))}}),_.className=GD+" "+KD;var C=i===_x.BEFORE?" "+GD:" "+KD;return cE(r)?r.className.baseValue+=C:r.className+=C,_}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),_x;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(_x||(_x={}));var NFe=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(hY,"true"),e.body.appendChild(r),r},QFe=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},HFe=function(e){return Promise.all([].slice.call(e.images,0).map(QFe))},jFe=function(e){return new Promise(function(t,r){var n=e.contentWindow;if(!n)return r("No window assigned for iframe");var i=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var l=setInterval(function(){i.body.childNodes.length>0&&i.readyState==="complete"&&(clearInterval(l),t(e))},50)}})},GFe=["all","d","content"],lk=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e.item(r);GFe.indexOf(n)===-1&&t.style.setProperty(n,e.getPropertyValue(n))}return t},KFe=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},WFe=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},qFe=function(e){var t=e[0],r=e[1],n=e[2];t.scrollLeft=r,t.scrollTop=n},XFe=":before",ZFe=":after",GD="___html2canvas___pseudoelement_before",KD="___html2canvas___pseudoelement_after",m8=`{
    content: "" !important;
    display: none !important;
}`,YFe=function(e){JFe(e,"."+GD+XFe+m8+`
         .`+KD+ZFe+m8)},JFe=function(e,t){var r=e.ownerDocument;if(r){var n=r.createElement("style");n.textContent=t,e.appendChild(n)}},AY=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),$Fe=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(uk(t)||nPe(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return ul(this,void 0,void 0,function(){var r,n,i,l,h=this;return ja(this,function(p){switch(p.label){case 0:return r=AY.isSameOrigin(t),n=!ck(t)&&this._options.useCORS===!0&&xa.SUPPORT_CORS_IMAGES&&!r,i=!ck(t)&&!r&&!uk(t)&&typeof this._options.proxy=="string"&&xa.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!ck(t)&&!uk(t)&&!i&&!n?[2]:(l=t,i?[4,this.proxy(l)]:[3,2]);case 1:l=p.sent(),p.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(o,_){var C=new Image;C.onload=function(){return o(C)},C.onerror=_,(iPe(l)||n)&&(C.crossOrigin="anonymous"),C.src=l,C.complete===!0&&setTimeout(function(){return o(C)},500),h._options.imageTimeout>0&&setTimeout(function(){return _("Timed out ("+h._options.imageTimeout+"ms) loading image")},h._options.imageTimeout)})];case 3:return[2,p.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var i=t.substring(0,256);return new Promise(function(l,h){var p=xa.SUPPORT_RESPONSE_TYPE?"blob":"text",o=new XMLHttpRequest;o.onload=function(){if(o.status===200)if(p==="text")l(o.response);else{var M=new FileReader;M.addEventListener("load",function(){return l(M.result)},!1),M.addEventListener("error",function(L){return h(L)},!1),M.readAsDataURL(o.response)}else h("Failed to proxy resource "+i+" with status code "+o.status)},o.onerror=h;var _=n.indexOf("?")>-1?"&":"?";if(o.open("GET",""+n+_+"url="+encodeURIComponent(t)+"&responseType="+p),p!=="text"&&o instanceof XMLHttpRequest&&(o.responseType=p),r._options.imageTimeout){var C=r._options.imageTimeout;o.timeout=C,o.ontimeout=function(){return h("Timed out ("+C+"ms) proxying "+i)}}o.send()})},e}(),ePe=/^data:image\/svg\+xml/i,tPe=/^data:image\/.*;base64,/i,rPe=/^data:image\/.*/i,nPe=function(e){return xa.SUPPORT_SVG_DRAWING||!oPe(e)},ck=function(e){return rPe.test(e)},iPe=function(e){return tPe.test(e)},uk=function(e){return e.substr(0,4)==="blob"},oPe=function(e){return e.substr(-3).toLowerCase()==="svg"||ePe.test(e)},Cr=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),x0=function(e,t,r){return new Cr(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},nS=function(){function e(t,r,n,i){this.type=1,this.start=t,this.startControl=r,this.endControl=n,this.end=i}return e.prototype.subdivide=function(t,r){var n=x0(this.start,this.startControl,t),i=x0(this.startControl,this.endControl,t),l=x0(this.endControl,this.end,t),h=x0(n,i,t),p=x0(i,l,t),o=x0(h,p,t);return r?new e(this.start,n,h,o):new e(o,p,l,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),eu=function(e){return e.type===1},sPe=function(){function e(t){var r=t.styles,n=t.bounds,i=U1(r.borderTopLeftRadius,n.width,n.height),l=i[0],h=i[1],p=U1(r.borderTopRightRadius,n.width,n.height),o=p[0],_=p[1],C=U1(r.borderBottomRightRadius,n.width,n.height),M=C[0],L=C[1],z=U1(r.borderBottomLeftRadius,n.width,n.height),j=z[0],K=z[1],$=[];$.push((l+o)/n.width),$.push((j+M)/n.width),$.push((h+K)/n.height),$.push((_+L)/n.height);var q=Math.max.apply(Math,$);q>1&&(l/=q,h/=q,o/=q,_/=q,M/=q,L/=q,j/=q,K/=q);var ee=n.width-o,ie=n.height-L,fe=n.width-M,me=n.height-K,ye=r.borderTopWidth,se=r.borderRightWidth,re=r.borderBottomWidth,de=r.borderLeftWidth,_e=lo(r.paddingTop,t.bounds.width),ve=lo(r.paddingRight,t.bounds.width),Pe=lo(r.paddingBottom,t.bounds.width),Ee=lo(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=l>0||h>0?So(n.left+de/3,n.top+ye/3,l-de/3,h-ye/3,Li.TOP_LEFT):new Cr(n.left+de/3,n.top+ye/3),this.topRightBorderDoubleOuterBox=l>0||h>0?So(n.left+ee,n.top+ye/3,o-se/3,_-ye/3,Li.TOP_RIGHT):new Cr(n.left+n.width-se/3,n.top+ye/3),this.bottomRightBorderDoubleOuterBox=M>0||L>0?So(n.left+fe,n.top+ie,M-se/3,L-re/3,Li.BOTTOM_RIGHT):new Cr(n.left+n.width-se/3,n.top+n.height-re/3),this.bottomLeftBorderDoubleOuterBox=j>0||K>0?So(n.left+de/3,n.top+me,j-de/3,K-re/3,Li.BOTTOM_LEFT):new Cr(n.left+de/3,n.top+n.height-re/3),this.topLeftBorderDoubleInnerBox=l>0||h>0?So(n.left+de*2/3,n.top+ye*2/3,l-de*2/3,h-ye*2/3,Li.TOP_LEFT):new Cr(n.left+de*2/3,n.top+ye*2/3),this.topRightBorderDoubleInnerBox=l>0||h>0?So(n.left+ee,n.top+ye*2/3,o-se*2/3,_-ye*2/3,Li.TOP_RIGHT):new Cr(n.left+n.width-se*2/3,n.top+ye*2/3),this.bottomRightBorderDoubleInnerBox=M>0||L>0?So(n.left+fe,n.top+ie,M-se*2/3,L-re*2/3,Li.BOTTOM_RIGHT):new Cr(n.left+n.width-se*2/3,n.top+n.height-re*2/3),this.bottomLeftBorderDoubleInnerBox=j>0||K>0?So(n.left+de*2/3,n.top+me,j-de*2/3,K-re*2/3,Li.BOTTOM_LEFT):new Cr(n.left+de*2/3,n.top+n.height-re*2/3),this.topLeftBorderStroke=l>0||h>0?So(n.left+de/2,n.top+ye/2,l-de/2,h-ye/2,Li.TOP_LEFT):new Cr(n.left+de/2,n.top+ye/2),this.topRightBorderStroke=l>0||h>0?So(n.left+ee,n.top+ye/2,o-se/2,_-ye/2,Li.TOP_RIGHT):new Cr(n.left+n.width-se/2,n.top+ye/2),this.bottomRightBorderStroke=M>0||L>0?So(n.left+fe,n.top+ie,M-se/2,L-re/2,Li.BOTTOM_RIGHT):new Cr(n.left+n.width-se/2,n.top+n.height-re/2),this.bottomLeftBorderStroke=j>0||K>0?So(n.left+de/2,n.top+me,j-de/2,K-re/2,Li.BOTTOM_LEFT):new Cr(n.left+de/2,n.top+n.height-re/2),this.topLeftBorderBox=l>0||h>0?So(n.left,n.top,l,h,Li.TOP_LEFT):new Cr(n.left,n.top),this.topRightBorderBox=o>0||_>0?So(n.left+ee,n.top,o,_,Li.TOP_RIGHT):new Cr(n.left+n.width,n.top),this.bottomRightBorderBox=M>0||L>0?So(n.left+fe,n.top+ie,M,L,Li.BOTTOM_RIGHT):new Cr(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=j>0||K>0?So(n.left,n.top+me,j,K,Li.BOTTOM_LEFT):new Cr(n.left,n.top+n.height),this.topLeftPaddingBox=l>0||h>0?So(n.left+de,n.top+ye,Math.max(0,l-de),Math.max(0,h-ye),Li.TOP_LEFT):new Cr(n.left+de,n.top+ye),this.topRightPaddingBox=o>0||_>0?So(n.left+Math.min(ee,n.width-se),n.top+ye,ee>n.width+se?0:Math.max(0,o-se),Math.max(0,_-ye),Li.TOP_RIGHT):new Cr(n.left+n.width-se,n.top+ye),this.bottomRightPaddingBox=M>0||L>0?So(n.left+Math.min(fe,n.width-de),n.top+Math.min(ie,n.height-re),Math.max(0,M-se),Math.max(0,L-re),Li.BOTTOM_RIGHT):new Cr(n.left+n.width-se,n.top+n.height-re),this.bottomLeftPaddingBox=j>0||K>0?So(n.left+de,n.top+Math.min(me,n.height-re),Math.max(0,j-de),Math.max(0,K-re),Li.BOTTOM_LEFT):new Cr(n.left+de,n.top+n.height-re),this.topLeftContentBox=l>0||h>0?So(n.left+de+Ee,n.top+ye+_e,Math.max(0,l-(de+Ee)),Math.max(0,h-(ye+_e)),Li.TOP_LEFT):new Cr(n.left+de+Ee,n.top+ye+_e),this.topRightContentBox=o>0||_>0?So(n.left+Math.min(ee,n.width+de+Ee),n.top+ye+_e,ee>n.width+de+Ee?0:o-de+Ee,_-(ye+_e),Li.TOP_RIGHT):new Cr(n.left+n.width-(se+ve),n.top+ye+_e),this.bottomRightContentBox=M>0||L>0?So(n.left+Math.min(fe,n.width-(de+Ee)),n.top+Math.min(ie,n.height+ye+_e),Math.max(0,M-(se+ve)),L-(re+Pe),Li.BOTTOM_RIGHT):new Cr(n.left+n.width-(se+ve),n.top+n.height-(re+Pe)),this.bottomLeftContentBox=j>0||K>0?So(n.left+de+Ee,n.top+me,Math.max(0,j-(de+Ee)),K-(re+Pe),Li.BOTTOM_LEFT):new Cr(n.left+de+Ee,n.top+n.height-(re+Pe))}return e}(),Li;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Li||(Li={}));var So=function(e,t,r,n,i){var l=4*((Math.sqrt(2)-1)/3),h=r*l,p=n*l,o=e+r,_=t+n;switch(i){case Li.TOP_LEFT:return new nS(new Cr(e,_),new Cr(e,_-p),new Cr(o-h,t),new Cr(o,t));case Li.TOP_RIGHT:return new nS(new Cr(e,t),new Cr(e+h,t),new Cr(o,_-p),new Cr(o,_));case Li.BOTTOM_RIGHT:return new nS(new Cr(o,t),new Cr(o,t+p),new Cr(e+h,_),new Cr(e,_));case Li.BOTTOM_LEFT:default:return new nS(new Cr(o,_),new Cr(o-h,_),new Cr(e,t+p),new Cr(e,t))}},ET=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},aPe=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},TT=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},lPe=function(){function e(t,r,n){this.offsetX=t,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return e}(),iS=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),cPe=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),uPe=function(e){return e.type===0},dY=function(e){return e.type===1},hPe=function(e){return e.type===2},g8=function(e,t){return e.length===t.length?e.some(function(r,n){return r===t[n]}):!1},APe=function(e,t,r,n,i){return e.map(function(l,h){switch(h){case 0:return l.add(t,r);case 1:return l.add(t+n,r);case 2:return l.add(t+n,r+i);case 3:return l.add(t,r+i)}return l})},fY=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),pY=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new sPe(this.container),this.container.styles.opacity<1&&this.effects.push(new cPe(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,i=this.container.bounds.top+this.container.styles.transformOrigin[1].number,l=this.container.styles.transform;this.effects.push(new lPe(n,i,l))}if(this.container.styles.overflowX!==0){var h=ET(this.curves),p=TT(this.curves);g8(h,p)?this.effects.push(new iS(h,6)):(this.effects.push(new iS(h,2)),this.effects.push(new iS(p,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,i=this.effects.slice(0);n;){var l=n.effects.filter(function(o){return!dY(o)});if(r||n.container.styles.position!==0||!n.parent){if(i.unshift.apply(i,l),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var h=ET(n.curves),p=TT(n.curves);g8(h,p)||i.unshift(new iS(p,6))}}else i.unshift.apply(i,l);n=n.parent}return i.filter(function(o){return ks(o.target,t)})},e}(),WD=function(e,t,r,n){e.container.elements.forEach(function(i){var l=ks(i.flags,4),h=ks(i.flags,2),p=new pY(i,e);ks(i.styles.display,2048)&&n.push(p);var o=ks(i.flags,8)?[]:n;if(l||h){var _=l||i.styles.isPositioned()?r:t,C=new fY(p);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var M=i.styles.zIndex.order;if(M<0){var L=0;_.negativeZIndex.some(function(j,K){return M>j.element.container.styles.zIndex.order?(L=K,!1):L>0}),_.negativeZIndex.splice(L,0,C)}else if(M>0){var z=0;_.positiveZIndex.some(function(j,K){return M>=j.element.container.styles.zIndex.order?(z=K+1,!1):z>0}),_.positiveZIndex.splice(z,0,C)}else _.zeroOrAutoZIndexOrTransformedOrOpacity.push(C)}else i.styles.isFloating()?_.nonPositionedFloats.push(C):_.nonPositionedInlineLevel.push(C);WD(p,C,l?C:r,o)}else i.styles.isInlineLevel()?t.inlineLevel.push(p):t.nonInlineLevel.push(p),WD(p,t,r,o);ks(i.flags,8)&&mY(i,o)})},mY=function(e,t){for(var r=e instanceof QD?e.start:1,n=e instanceof QD?e.reversed:!1,i=0;i<t.length;i++){var l=t[i];l.container instanceof $Z&&typeof l.container.value=="number"&&l.container.value!==0&&(r=l.container.value),l.listValue=mb(r,l.container.styles.listStyleType,!0),r+=n?-1:1}},dPe=function(e){var t=new pY(e,null),r=new fY(t),n=[];return WD(t,r,r,n),mY(t.container,n),r},y8=function(e,t){switch(t){case 0:return su(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return su(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return su(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return su(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},fPe=function(e,t){switch(t){case 0:return su(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return su(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return su(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return su(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},pPe=function(e,t){switch(t){case 0:return su(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return su(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return su(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return su(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},mPe=function(e,t){switch(t){case 0:return oS(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return oS(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return oS(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return oS(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},oS=function(e,t){var r=[];return eu(e)?r.push(e.subdivide(.5,!1)):r.push(e),eu(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},su=function(e,t,r,n){var i=[];return eu(e)?i.push(e.subdivide(.5,!1)):i.push(e),eu(r)?i.push(r.subdivide(.5,!0)):i.push(r),eu(n)?i.push(n.subdivide(.5,!0).reverse()):i.push(n),eu(t)?i.push(t.subdivide(.5,!1).reverse()):i.push(t),i},gY=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},IT=function(e){var t=e.styles,r=e.bounds,n=lo(t.paddingLeft,r.width),i=lo(t.paddingRight,r.width),l=lo(t.paddingTop,r.width),h=lo(t.paddingBottom,r.width);return r.add(n+t.borderLeftWidth,l+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+i),-(t.borderTopWidth+t.borderBottomWidth+l+h))},gPe=function(e,t){return e===0?t.bounds:e===2?IT(t):gY(t)},yPe=function(e,t){return e===0?t.bounds:e===2?IT(t):gY(t)},hk=function(e,t,r){var n=gPe(F0(e.styles.backgroundOrigin,t),e),i=yPe(F0(e.styles.backgroundClip,t),e),l=vPe(F0(e.styles.backgroundSize,t),r,n),h=l[0],p=l[1],o=U1(F0(e.styles.backgroundPosition,t),n.width-h,n.height-p),_=_Pe(F0(e.styles.backgroundRepeat,t),o,l,n,i),C=Math.round(n.left+o[0]),M=Math.round(n.top+o[1]);return[_,C,M,h,p]},b0=function(e){return Xi(e)&&e.value===yy.AUTO},sS=function(e){return typeof e=="number"},vPe=function(e,t,r){var n=t[0],i=t[1],l=t[2],h=e[0],p=e[1];if(!h)return[0,0];if(xs(h)&&p&&xs(p))return[lo(h,r.width),lo(p,r.height)];var o=sS(l);if(Xi(h)&&(h.value===yy.CONTAIN||h.value===yy.COVER)){if(sS(l)){var _=r.width/r.height;return _<l!=(h.value===yy.COVER)?[r.width,r.width/l]:[r.height*l,r.height]}return[r.width,r.height]}var C=sS(n),M=sS(i),L=C||M;if(b0(h)&&(!p||b0(p))){if(C&&M)return[n,i];if(!o&&!L)return[r.width,r.height];if(L&&o){var z=C?n:i*l,j=M?i:n/l;return[z,j]}var K=C?n:r.width,$=M?i:r.height;return[K,$]}if(o){var q=0,ee=0;return xs(h)?q=lo(h,r.width):xs(p)&&(ee=lo(p,r.height)),b0(h)?q=ee*l:(!p||b0(p))&&(ee=q/l),[q,ee]}var ie=null,fe=null;if(xs(h)?ie=lo(h,r.width):p&&xs(p)&&(fe=lo(p,r.height)),ie!==null&&(!p||b0(p))&&(fe=C&&M?ie/n*i:r.height),fe!==null&&b0(h)&&(ie=C&&M?fe/i*n:r.width),ie!==null&&fe!==null)return[ie,fe];throw new Error("Unable to calculate background-size for element")},F0=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},_Pe=function(e,t,r,n,i){var l=t[0],h=t[1],p=r[0],o=r[1];switch(e){case 2:return[new Cr(Math.round(n.left),Math.round(n.top+h)),new Cr(Math.round(n.left+n.width),Math.round(n.top+h)),new Cr(Math.round(n.left+n.width),Math.round(o+n.top+h)),new Cr(Math.round(n.left),Math.round(o+n.top+h))];case 3:return[new Cr(Math.round(n.left+l),Math.round(n.top)),new Cr(Math.round(n.left+l+p),Math.round(n.top)),new Cr(Math.round(n.left+l+p),Math.round(n.height+n.top)),new Cr(Math.round(n.left+l),Math.round(n.height+n.top))];case 1:return[new Cr(Math.round(n.left+l),Math.round(n.top+h)),new Cr(Math.round(n.left+l+p),Math.round(n.top+h)),new Cr(Math.round(n.left+l+p),Math.round(n.top+h+o)),new Cr(Math.round(n.left+l),Math.round(n.top+h+o))];default:return[new Cr(Math.round(i.left),Math.round(i.top)),new Cr(Math.round(i.left+i.width),Math.round(i.top)),new Cr(Math.round(i.left+i.width),Math.round(i.height+i.top)),new Cr(Math.round(i.left),Math.round(i.height+i.top))]}},xPe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",v8="Hidden Text",bPe=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var n=this._document.createElement("div"),i=this._document.createElement("img"),l=this._document.createElement("span"),h=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",h.appendChild(n),i.src=xPe,i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",l.style.fontFamily=t,l.style.fontSize=r,l.style.margin="0",l.style.padding="0",l.appendChild(this._document.createTextNode(v8)),n.appendChild(l),n.appendChild(i);var p=i.offsetTop-l.offsetTop+2;n.removeChild(l),n.appendChild(this._document.createTextNode(v8)),n.style.lineHeight="normal",i.style.verticalAlign="super";var o=i.offsetTop-n.offsetTop+2;return h.removeChild(n),{baseline:p,middle:o}},e.prototype.getMetrics=function(t,r){var n=t+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(t,r)),this._data[n]},e}(),yY=function(){function e(t,r){this.context=t,this.options=r}return e}(),wPe=1e4,BPe=function(e){hh(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i._activeEffects=[],i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),n.canvas||(i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px"),i.fontMetrics=new bPe(document),i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.ctx.textBaseline="bottom",i._activeEffects=[],i.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),i}return t.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(i){return n.applyEffect(i)})},t.prototype.applyEffect=function(r){this.ctx.save(),hPe(r)&&(this.ctx.globalAlpha=r.opacity),uPe(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),dY(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return ul(this,void 0,void 0,function(){var n;return ja(this,function(i){switch(i.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return ul(this,void 0,void 0,function(){return ja(this,function(n){switch(n.label){case 0:if(ks(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,n,i){var l=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+i);else{var h=eU(r.text);h.reduce(function(p,o){return l.ctx.fillText(o,p,r.bounds.top+i),p+l.ctx.measureText(o).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(h){return h==="normal"||h==="small-caps"}).join(""),i=IPe(r.fontFamily).join(", "),l=rw(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,l,i].join(" "),i,l]},t.prototype.renderTextNode=function(r,n){return ul(this,void 0,void 0,function(){var i,l,h,p,o,_,C,M,L=this;return ja(this,function(z){return i=this.createFontStyle(n),l=i[0],h=i[1],p=i[2],this.ctx.font=l,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",o=this.fontMetrics.getMetrics(h,p),_=o.baseline,C=o.middle,M=n.paintOrder,r.textBounds.forEach(function(j){M.forEach(function(K){switch(K){case 0:L.ctx.fillStyle=Ys(n.color),L.renderTextWithLetterSpacing(j,n.letterSpacing,_);var $=n.textShadow;$.length&&j.text.trim().length&&($.slice(0).reverse().forEach(function(q){L.ctx.shadowColor=Ys(q.color),L.ctx.shadowOffsetX=q.offsetX.number*L.options.scale,L.ctx.shadowOffsetY=q.offsetY.number*L.options.scale,L.ctx.shadowBlur=q.blur.number,L.renderTextWithLetterSpacing(j,n.letterSpacing,_)}),L.ctx.shadowColor="",L.ctx.shadowOffsetX=0,L.ctx.shadowOffsetY=0,L.ctx.shadowBlur=0),n.textDecorationLine.length&&(L.ctx.fillStyle=Ys(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(q){switch(q){case 1:L.ctx.fillRect(j.bounds.left,Math.round(j.bounds.top+_),j.bounds.width,1);break;case 2:L.ctx.fillRect(j.bounds.left,Math.round(j.bounds.top),j.bounds.width,1);break;case 3:L.ctx.fillRect(j.bounds.left,Math.ceil(j.bounds.top+C),j.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&j.text.trim().length&&(L.ctx.strokeStyle=Ys(n.webkitTextStrokeColor),L.ctx.lineWidth=n.webkitTextStrokeWidth,L.ctx.lineJoin=window.chrome?"miter":"round",L.ctx.strokeText(j.text,j.bounds.left,j.bounds.top+_)),L.ctx.strokeStyle="",L.ctx.lineWidth=0,L.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,n,i){if(i&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var l=IT(r),h=TT(n);this.path(h),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,r.intrinsicWidth,r.intrinsicHeight,l.left,l.top,l.width,l.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return ul(this,void 0,void 0,function(){var n,i,l,h,p,o,ee,ee,_,C,M,L,fe,z,j,me,K,$,q,ee,ie,fe,me;return ja(this,function(ye){switch(ye.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,i=r.curves,l=n.styles,h=0,p=n.textNodes,ye.label=1;case 1:return h<p.length?(o=p[h],[4,this.renderTextNode(o,l)]):[3,4];case 2:ye.sent(),ye.label=3;case 3:return h++,[3,1];case 4:if(!(n instanceof ZZ))return[3,8];ye.label=5;case 5:return ye.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return ee=ye.sent(),this.renderReplacedElement(n,i,ee),[3,8];case 7:return ye.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof YZ&&this.renderReplacedElement(n,i,n.canvas),!(n instanceof JZ))return[3,12];ye.label=9;case 9:return ye.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return ee=ye.sent(),this.renderReplacedElement(n,i,ee),[3,12];case 11:return ye.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof rY&&n.tree?(_=new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,_.render(n.tree)]):[3,14];case 13:C=ye.sent(),n.width&&n.height&&this.ctx.drawImage(C,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),ye.label=14;case 14:if(n instanceof tU&&(M=Math.min(n.bounds.width,n.bounds.height),n.type===wT?n.checked&&(this.ctx.save(),this.path([new Cr(n.bounds.left+M*.39363,n.bounds.top+M*.79),new Cr(n.bounds.left+M*.16,n.bounds.top+M*.5549),new Cr(n.bounds.left+M*.27347,n.bounds.top+M*.44071),new Cr(n.bounds.left+M*.39694,n.bounds.top+M*.5649),new Cr(n.bounds.left+M*.72983,n.bounds.top+M*.23),new Cr(n.bounds.left+M*.84,n.bounds.top+M*.34085),new Cr(n.bounds.left+M*.39363,n.bounds.top+M*.79)]),this.ctx.fillStyle=Ys(s8),this.ctx.fill(),this.ctx.restore()):n.type===BT&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+M/2,n.bounds.top+M/2,M/4,0,Math.PI*2,!0),this.ctx.fillStyle=Ys(s8),this.ctx.fill(),this.ctx.restore())),CPe(n)&&n.value.length){switch(L=this.createFontStyle(l),fe=L[0],z=L[1],j=this.fontMetrics.getMetrics(fe,z).baseline,this.ctx.font=fe,this.ctx.fillStyle=Ys(l.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=EPe(n.styles.textAlign),me=IT(n),K=0,n.styles.textAlign){case 1:K+=me.width/2;break;case 2:K+=me.width;break}$=me.add(K,0,0,-me.height/2+1),this.ctx.save(),this.path([new Cr(me.left,me.top),new Cr(me.left+me.width,me.top),new Cr(me.left+me.width,me.top+me.height),new Cr(me.left,me.top+me.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new vx(n.value,$),l.letterSpacing,j),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ks(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(q=n.styles.listStyleImage,q.type!==0)return[3,18];ee=void 0,ie=q.url,ye.label=15;case 15:return ye.trys.push([15,17,,18]),[4,this.context.cache.match(ie)];case 16:return ee=ye.sent(),this.ctx.drawImage(ee,n.bounds.left-(ee.width+10),n.bounds.top),[3,18];case 17:return ye.sent(),this.context.logger.error("Error loading list-style-image "+ie),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(fe=this.createFontStyle(l)[0],this.ctx.font=fe,this.ctx.fillStyle=Ys(l.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",me=new hd(n.bounds.left,n.bounds.top+lo(n.styles.paddingTop,n.bounds.width),n.bounds.width,HH(l.lineHeight,l.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new vx(r.listValue,me),l.letterSpacing,HH(l.lineHeight,l.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),ye.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return ul(this,void 0,void 0,function(){var n,i,q,l,h,q,p,o,q,_,C,q,M,L,q,z,j,q,K,$,q;return ja(this,function(ee){switch(ee.label){case 0:if(ks(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:ee.sent(),n=0,i=r.negativeZIndex,ee.label=2;case 2:return n<i.length?(q=i[n],[4,this.renderStack(q)]):[3,5];case 3:ee.sent(),ee.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:ee.sent(),l=0,h=r.nonInlineLevel,ee.label=7;case 7:return l<h.length?(q=h[l],[4,this.renderNode(q)]):[3,10];case 8:ee.sent(),ee.label=9;case 9:return l++,[3,7];case 10:p=0,o=r.nonPositionedFloats,ee.label=11;case 11:return p<o.length?(q=o[p],[4,this.renderStack(q)]):[3,14];case 12:ee.sent(),ee.label=13;case 13:return p++,[3,11];case 14:_=0,C=r.nonPositionedInlineLevel,ee.label=15;case 15:return _<C.length?(q=C[_],[4,this.renderStack(q)]):[3,18];case 16:ee.sent(),ee.label=17;case 17:return _++,[3,15];case 18:M=0,L=r.inlineLevel,ee.label=19;case 19:return M<L.length?(q=L[M],[4,this.renderNode(q)]):[3,22];case 20:ee.sent(),ee.label=21;case 21:return M++,[3,19];case 22:z=0,j=r.zeroOrAutoZIndexOrTransformedOrOpacity,ee.label=23;case 23:return z<j.length?(q=j[z],[4,this.renderStack(q)]):[3,26];case 24:ee.sent(),ee.label=25;case 25:return z++,[3,23];case 26:K=0,$=r.positiveZIndex,ee.label=27;case 27:return K<$.length?(q=$[K],[4,this.renderStack(q)]):[3,30];case 28:ee.sent(),ee.label=29;case 29:return K++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var n=this;r.forEach(function(i,l){var h=eu(i)?i.start:i;l===0?n.ctx.moveTo(h.x,h.y):n.ctx.lineTo(h.x,h.y),eu(i)&&n.ctx.bezierCurveTo(i.startControl.x,i.startControl.y,i.endControl.x,i.endControl.y,i.end.x,i.end.y)})},t.prototype.renderRepeat=function(r,n,i,l){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(i,l),this.ctx.fill(),this.ctx.translate(-i,-l)},t.prototype.resizeImage=function(r,n,i){var l;if(r.width===n&&r.height===i)return r;var h=(l=this.canvas.ownerDocument)!==null&&l!==void 0?l:document,p=h.createElement("canvas");p.width=Math.max(1,n),p.height=Math.max(1,i);var o=p.getContext("2d");return o.drawImage(r,0,0,r.width,r.height,0,0,n,i),p},t.prototype.renderBackgroundImage=function(r){return ul(this,void 0,void 0,function(){var n,i,l,h,p,o;return ja(this,function(_){switch(_.label){case 0:n=r.styles.backgroundImage.length-1,i=function(C){var M,L,z,_e,gt,jt,Ee,Ht,re,j,_e,gt,jt,Ee,Ht,K,$,q,ee,ie,fe,me,ye,se,re,de,_e,ve,Pe,Ee,Ht,Xt,gt,jt,Mt,Yt,ht,lr,ir,$t,Vt,Dr;return ja(this,function(kr){switch(kr.label){case 0:if(C.type!==0)return[3,5];M=void 0,L=C.url,kr.label=1;case 1:return kr.trys.push([1,3,,4]),[4,l.context.cache.match(L)];case 2:return M=kr.sent(),[3,4];case 3:return kr.sent(),l.context.logger.error("Error loading background-image "+L),[3,4];case 4:return M&&(z=hk(r,n,[M.width,M.height,M.width/M.height]),_e=z[0],gt=z[1],jt=z[2],Ee=z[3],Ht=z[4],re=l.ctx.createPattern(l.resizeImage(M,Ee,Ht),"repeat"),l.renderRepeat(_e,re,gt,jt)),[3,6];case 5:uTe(C)?(j=hk(r,n,[null,null,null]),_e=j[0],gt=j[1],jt=j[2],Ee=j[3],Ht=j[4],K=oTe(C.angle,Ee,Ht),$=K[0],q=K[1],ee=K[2],ie=K[3],fe=K[4],me=document.createElement("canvas"),me.width=Ee,me.height=Ht,ye=me.getContext("2d"),se=ye.createLinearGradient(q,ie,ee,fe),NH(C.stops,$).forEach(function(Zr){return se.addColorStop(Zr.stop,Ys(Zr.color))}),ye.fillStyle=se,ye.fillRect(0,0,Ee,Ht),Ee>0&&Ht>0&&(re=l.ctx.createPattern(me,"repeat"),l.renderRepeat(_e,re,gt,jt))):hTe(C)&&(de=hk(r,n,[null,null,null]),_e=de[0],ve=de[1],Pe=de[2],Ee=de[3],Ht=de[4],Xt=C.position.length===0?[YO]:C.position,gt=lo(Xt[0],Ee),jt=lo(Xt[Xt.length-1],Ht),Mt=sTe(C,gt,jt,Ee,Ht),Yt=Mt[0],ht=Mt[1],Yt>0&&ht>0&&(lr=l.ctx.createRadialGradient(ve+gt,Pe+jt,0,ve+gt,Pe+jt,Yt),NH(C.stops,Yt*2).forEach(function(Zr){return lr.addColorStop(Zr.stop,Ys(Zr.color))}),l.path(_e),l.ctx.fillStyle=lr,Yt!==ht?(ir=r.bounds.left+.5*r.bounds.width,$t=r.bounds.top+.5*r.bounds.height,Vt=ht/Yt,Dr=1/Vt,l.ctx.save(),l.ctx.translate(ir,$t),l.ctx.transform(1,0,0,Vt,0,0),l.ctx.translate(-ir,-$t),l.ctx.fillRect(ve,Dr*(Pe-$t)+$t,Ee,Ht*Dr),l.ctx.restore()):l.ctx.fill())),kr.label=6;case 6:return n--,[2]}})},l=this,h=0,p=r.styles.backgroundImage.slice(0).reverse(),_.label=1;case 1:return h<p.length?(o=p[h],[5,i(o)]):[3,4];case 2:_.sent(),_.label=3;case 3:return h++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,n,i){return ul(this,void 0,void 0,function(){return ja(this,function(l){return this.path(y8(i,n)),this.ctx.fillStyle=Ys(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,n,i,l){return ul(this,void 0,void 0,function(){var h,p;return ja(this,function(o){switch(o.label){case 0:return n<3?[4,this.renderSolidBorder(r,i,l)]:[3,2];case 1:return o.sent(),[2];case 2:return h=fPe(l,i),this.path(h),this.ctx.fillStyle=Ys(r),this.ctx.fill(),p=pPe(l,i),this.path(p),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return ul(this,void 0,void 0,function(){var n,i,l,h,p,o,_,C,M=this;return ja(this,function(L){switch(L.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,i=!zf(n.backgroundColor)||n.backgroundImage.length,l=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],h=SPe(F0(n.backgroundClip,0),r.curves),i||n.boxShadow.length?(this.ctx.save(),this.path(h),this.ctx.clip(),zf(n.backgroundColor)||(this.ctx.fillStyle=Ys(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:L.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(z){M.ctx.save();var j=ET(r.curves),K=z.inset?0:wPe,$=APe(j,-K+(z.inset?1:-1)*z.spread.number,(z.inset?1:-1)*z.spread.number,z.spread.number*(z.inset?-2:2),z.spread.number*(z.inset?-2:2));z.inset?(M.path(j),M.ctx.clip(),M.mask($)):(M.mask(j),M.ctx.clip(),M.path($)),M.ctx.shadowOffsetX=z.offsetX.number+K,M.ctx.shadowOffsetY=z.offsetY.number,M.ctx.shadowColor=Ys(z.color),M.ctx.shadowBlur=z.blur.number,M.ctx.fillStyle=z.inset?Ys(z.color):"rgba(0,0,0,1)",M.ctx.fill(),M.ctx.restore()}),L.label=2;case 2:p=0,o=0,_=l,L.label=3;case 3:return o<_.length?(C=_[o],C.style!==0&&!zf(C.color)&&C.width>0?C.style!==2?[3,5]:[4,this.renderDashedDottedBorder(C.color,C.width,p,r.curves,2)]:[3,11]):[3,13];case 4:return L.sent(),[3,11];case 5:return C.style!==3?[3,7]:[4,this.renderDashedDottedBorder(C.color,C.width,p,r.curves,3)];case 6:return L.sent(),[3,11];case 7:return C.style!==4?[3,9]:[4,this.renderDoubleBorder(C.color,C.width,p,r.curves)];case 8:return L.sent(),[3,11];case 9:return[4,this.renderSolidBorder(C.color,p,r.curves)];case 10:L.sent(),L.label=11;case 11:p++,L.label=12;case 12:return o++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,n,i,l,h){return ul(this,void 0,void 0,function(){var p,o,_,C,M,L,z,j,K,$,q,ee,ie,fe,me,ye,me,ye;return ja(this,function(se){return this.ctx.save(),p=mPe(l,i),o=y8(l,i),h===2&&(this.path(o),this.ctx.clip()),eu(o[0])?(_=o[0].start.x,C=o[0].start.y):(_=o[0].x,C=o[0].y),eu(o[1])?(M=o[1].end.x,L=o[1].end.y):(M=o[1].x,L=o[1].y),i===0||i===2?z=Math.abs(_-M):z=Math.abs(C-L),this.ctx.beginPath(),h===3?this.formatPath(p):this.formatPath(o.slice(0,2)),j=n<3?n*3:n*2,K=n<3?n*2:n,h===3&&(j=n,K=n),$=!0,z<=j*2?$=!1:z<=j*2+K?(q=z/(2*j+K),j*=q,K*=q):(ee=Math.floor((z+K)/(j+K)),ie=(z-ee*j)/(ee-1),fe=(z-(ee+1)*j)/ee,K=fe<=0||Math.abs(K-ie)<Math.abs(K-fe)?ie:fe),$&&(h===3?this.ctx.setLineDash([0,j+K]):this.ctx.setLineDash([j,K])),h===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Ys(r),this.ctx.stroke(),this.ctx.setLineDash([]),h===2&&(eu(o[0])&&(me=o[3],ye=o[0],this.ctx.beginPath(),this.formatPath([new Cr(me.end.x,me.end.y),new Cr(ye.start.x,ye.start.y)]),this.ctx.stroke()),eu(o[1])&&(me=o[1],ye=o[2],this.ctx.beginPath(),this.formatPath([new Cr(me.end.x,me.end.y),new Cr(ye.start.x,ye.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return ul(this,void 0,void 0,function(){var n;return ja(this,function(i){switch(i.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Ys(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=dPe(r),[4,this.renderStack(n)];case 1:return i.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(yY),CPe=function(e){return e instanceof tY||e instanceof eY?!0:e instanceof tU&&e.type!==BT&&e.type!==wT},SPe=function(e,t){switch(e){case 0:return ET(t);case 2:return aPe(t);case 1:default:return TT(t)}},EPe=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},TPe=["-apple-system","system-ui"],IPe=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return TPe.indexOf(t)===-1}):e},FPe=function(e){hh(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),i.options=n,i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px",i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),i}return t.prototype.render=function(r){return ul(this,void 0,void 0,function(){var n,i;return ja(this,function(l){switch(l.label){case 0:return n=ND(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,PPe(n)];case 1:return i=l.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Ys(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(yY),PPe=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},MPe=function(){function e(t){var r=t.id,n=t.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,UC([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,UC([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,UC([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,UC([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),RPe=function(){function e(t,r){var n;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new MPe({id:this.instanceName,enabled:t.logging}),this.cache=(n=t.cache)!==null&&n!==void 0?n:new $Fe(this,t)}return e.instanceCount=1,e}(),_8=function(e,t){return t===void 0&&(t={}),kPe(e,t)};typeof window<"u"&&AY.setContext(window);var kPe=function(e,t){return ul(void 0,void 0,void 0,function(){var r,n,i,l,h,p,o,_,C,M,L,z,j,K,$,q,ee,ie,fe,me,se,ye,se,re,de,_e,ve,Pe,Ee,Ht,Xt,gt,jt,Mt,Yt,ht,lr,ir,$t,Vt;return ja(this,function(Dr){switch(Dr.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return i={allowTaint:(re=t.allowTaint)!==null&&re!==void 0?re:!1,imageTimeout:(de=t.imageTimeout)!==null&&de!==void 0?de:15e3,proxy:t.proxy,useCORS:(_e=t.useCORS)!==null&&_e!==void 0?_e:!1},l=SD({logging:(ve=t.logging)!==null&&ve!==void 0?ve:!0,cache:t.cache},i),h={windowWidth:(Pe=t.windowWidth)!==null&&Pe!==void 0?Pe:n.innerWidth,windowHeight:(Ee=t.windowHeight)!==null&&Ee!==void 0?Ee:n.innerHeight,scrollX:(Ht=t.scrollX)!==null&&Ht!==void 0?Ht:n.pageXOffset,scrollY:(Xt=t.scrollY)!==null&&Xt!==void 0?Xt:n.pageYOffset},p=new hd(h.scrollX,h.scrollY,h.windowWidth,h.windowHeight),o=new RPe(l,p),_=(gt=t.foreignObjectRendering)!==null&&gt!==void 0?gt:!1,C={allowTaint:(jt=t.allowTaint)!==null&&jt!==void 0?jt:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:_,copyStyles:_},o.logger.debug("Starting document clone with size "+p.width+"x"+p.height+" scrolled to "+-p.left+","+-p.top),M=new p8(o,e,C),L=M.clonedReferenceElement,L?[4,M.toIFrame(r,p)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return z=Dr.sent(),j=rU(L)||LFe(L)?ASe(L.ownerDocument):aF(o,L),K=j.width,$=j.height,q=j.left,ee=j.top,ie=DPe(o,L,t.backgroundColor),fe={canvas:t.canvas,backgroundColor:ie,scale:(Yt=(Mt=t.scale)!==null&&Mt!==void 0?Mt:n.devicePixelRatio)!==null&&Yt!==void 0?Yt:1,x:((ht=t.x)!==null&&ht!==void 0?ht:0)+q,y:((lr=t.y)!==null&&lr!==void 0?lr:0)+ee,width:(ir=t.width)!==null&&ir!==void 0?ir:Math.ceil(K),height:($t=t.height)!==null&&$t!==void 0?$t:Math.ceil($)},_?(o.logger.debug("Document cloned, using foreign object rendering"),se=new FPe(o,fe),[4,se.render(L)]):[3,3];case 2:return me=Dr.sent(),[3,5];case 3:return o.logger.debug("Document cloned, element located at "+q+","+ee+" with size "+K+"x"+$+" using computed rendering"),o.logger.debug("Starting DOM parsing"),ye=iY(o,L),ie===ye.styles.backgroundColor&&(ye.styles.backgroundColor=JA.TRANSPARENT),o.logger.debug("Starting renderer for element at "+fe.x+","+fe.y+" with size "+fe.width+"x"+fe.height),se=new BPe(o,fe),[4,se.render(ye)];case 4:me=Dr.sent(),Dr.label=5;case 5:return(!((Vt=t.removeContainer)!==null&&Vt!==void 0)||Vt)&&(p8.destroy(z)||o.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),o.logger.debug("Finished rendering"),[2,me]}})})},DPe=function(e,t,r){var n=t.ownerDocument,i=n.documentElement?gx(e,getComputedStyle(n.documentElement).backgroundColor):JA.TRANSPARENT,l=n.body?gx(e,getComputedStyle(n.body).backgroundColor):JA.TRANSPARENT,h=typeof r=="string"?gx(e,r):r===null?JA.TRANSPARENT:4294967295;return t===n.documentElement?zf(i)?zf(l)?h:l:i:h};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var qD=function(e,t){return qD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},qD(e,t)};function Ar(e,t){qD(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var bn=function(){return bn=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(t[l]=r[l])}return t},bn.apply(this,arguments)};function LPe(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function Tn(e,t,r,n){function i(l){return l instanceof r?l:new r(function(h){h(l)})}return new(r||(r=Promise))(function(l,h){function p(C){try{_(n.next(C))}catch(M){h(M)}}function o(C){try{_(n.throw(C))}catch(M){h(M)}}function _(C){C.done?l(C.value):i(C.value).then(p,o)}_((n=n.apply(e,[])).next())})}function In(e,t){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,i,l,h;return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(_){return function(C){return o([_,C])}}function o(_){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(l=_[0]&2?i.return:_[0]?i.throw||((l=i.return)&&l.call(i),0):i.next)&&!(l=l.call(i,_[1])).done)return l;switch(i=0,l&&(_=[_[0]&2,l.value]),_[0]){case 0:case 1:l=_;break;case 4:return r.label++,{value:_[1],done:!1};case 5:r.label++,i=_[1],_=[0];continue;case 7:_=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(_[0]===6||_[0]===2)){r=0;continue}if(_[0]===3&&(!l||_[1]>l[0]&&_[1]<l[3])){r.label=_[1];break}if(_[0]===6&&r.label<l[1]){r.label=l[1],l=_;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(_);break}l[2]&&r.ops.pop(),r.trys.pop();continue}_=t.call(e,r)}catch(C){_=[6,C],i=0}finally{n=l=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}function si(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var l=arguments[t],h=0,p=l.length;h<p;h++,i++)n[i]=l[h];return n}var ny="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N1=new Uint8Array(256);for(var aS=0;aS<ny.length;aS++)N1[ny.charCodeAt(aS)]=aS;var OPe=function(e){for(var t="",r=e.length,n=0;n<r;n+=3)t+=ny[e[n]>>2],t+=ny[(e[n]&3)<<4|e[n+1]>>4],t+=ny[(e[n+1]&15)<<2|e[n+2]>>6],t+=ny[e[n+2]&63];return r%3===2?t=t.substring(0,t.length-1)+"=":r%3===1&&(t=t.substring(0,t.length-2)+"=="),t},x8=function(e){var t=e.length*.75,r=e.length,n,i=0,l,h,p,o;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var _=new Uint8Array(t);for(n=0;n<r;n+=4)l=N1[e.charCodeAt(n)],h=N1[e.charCodeAt(n+1)],p=N1[e.charCodeAt(n+2)],o=N1[e.charCodeAt(n+3)],_[i++]=l<<2|h>>4,_[i++]=(h&15)<<4|p>>2,_[i++]=(p&3)<<6|o&63;return _},UPe=/^(data)?:?([\w\/\+]+)?;?(charset=[\w-]+|base64)?.*,/i,zPe=function(e){var t=e.trim(),r=t.substring(0,100),n=r.match(UPe);if(!n)return x8(t);var i=n[0],l=t.substring(i.length);return x8(l)},_n=function(e){return e.charCodeAt(0)},VPe=function(e){return e.codePointAt(0)},nw=function(e,t){return Ju(e.toString(16),t,"0").toUpperCase()},gF=function(e){return nw(e,2)},$A=function(e){return String.fromCharCode(e)},NPe=function(e){return $A(parseInt(e,16))},Ju=function(e,t,r){for(var n="",i=0,l=t-e.length;i<l;i++)n+=r;return n+e},Ta=function(e,t,r){for(var n=e.length,i=0;i<n;i++)t[r++]=e.charCodeAt(i);return n},QPe=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},iw=function(e){return e.replace(/\t|\u0085|\u2028|\u2029/g,"    ").replace(/[\b\v]/g,"")},HPe=["\\n","\\f","\\r","\\u000B"],vY=function(e){return/^[\n\f\r\u000B]$/.test(e)},_Y=function(e){return e.split(/[\n\f\r\u000B]/)},xY=function(e){return e.replace(/[\n\f\r\u000B]/g," ")},bY=function(e,t){var r=e.charCodeAt(t),n,i=t+1,l=1;return r>=55296&&r<=56319&&e.length>i&&(n=e.charCodeAt(i),n>=56320&&n<=57343&&(l=2)),[e.slice(t,t+l),l]},jPe=function(e){for(var t=[],r=0,n=e.length;r<n;){var i=bY(e,r),l=i[0],h=i[1];t.push(l),r+=h}return t},GPe=function(e){for(var t=HPe.join("|"),r=["$"],n=0,i=e.length;n<i;n++){var l=e[n];if(vY(l))throw new TypeError("`wordBreak` must not include "+t);r.push(l===""?".":QPe(l))}var h=r.join("|");return new RegExp("("+t+")|((.*?)("+h+"))","gm")},KPe=function(e,t,r,n){for(var i=GPe(t),l=iw(e).match(i),h="",p=0,o=[],_=function(){h!==""&&o.push(h),h="",p=0},C=0,M=l.length;C<M;C++){var L=l[C];if(vY(L))_();else{var z=n(L);p+z>r&&_(),h+=L,p+=z}}return _(),o},WPe=/^D:(\d\d\d\d)(\d\d)?(\d\d)?(\d\d)?(\d\d)?(\d\d)?([+\-Z])?(\d\d)?'?(\d\d)?'?$/,wY=function(e){var t=e.match(WPe);if(t){var r=t[1],n=t[2],i=n===void 0?"01":n,l=t[3],h=l===void 0?"01":l,p=t[4],o=p===void 0?"00":p,_=t[5],C=_===void 0?"00":_,M=t[6],L=M===void 0?"00":M,z=t[7],j=z===void 0?"Z":z,K=t[8],$=K===void 0?"00":K,q=t[9],ee=q===void 0?"00":q,ie=j==="Z"?"Z":""+j+$+":"+ee,fe=new Date(r+"-"+i+"-"+h+"T"+o+":"+C+":"+L+ie);return fe}},nU=function(e,t){for(var r,n=0,i;n<e.length;){var l=e.substring(n).match(t);if(!l)return{match:i,pos:n};i=l,n+=((r=l.index)!==null&&r!==void 0?r:0)+l[0].length}return{match:i,pos:n}},FT=function(e){return e[e.length-1]},XD=function(e){if(e instanceof Uint8Array)return e;for(var t=e.length,r=new Uint8Array(t),n=0;n<t;n++)r[n]=e.charCodeAt(n);return r},qPe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e.length,n=[],i=0;i<r;i++){var l=e[i];n[i]=l instanceof Uint8Array?l:XD(l)}for(var h=0,i=0;i<r;i++)h+=e[i].length;for(var p=new Uint8Array(h),o=0,_=0;_<r;_++)for(var C=n[_],M=0,L=C.length;M<L;M++)p[o++]=C[M];return p},XPe=function(e){for(var t=0,r=0,n=e.length;r<n;r++)t+=e[r].length;for(var i=new Uint8Array(t),l=0,r=0,n=e.length;r<n;r++){var h=e[r];i.set(h,l),l+=h.length}return i},BY=function(e){for(var t="",r=0,n=e.length;r<n;r++)t+=$A(e[r]);return t},ZPe=function(e,t){return e.id-t.id},YPe=function(e,t){for(var r=[],n=0,i=e.length;n<i;n++){var l=e[n],h=e[n-1];(n===0||t(l)!==t(h))&&r.push(l)}return r},w0=function(e){for(var t=e.length,r=0,n=Math.floor(t/2);r<n;r++){var i=r,l=t-r-1,h=e[r];e[i]=e[l],e[l]=h}return e},JPe=function(e){for(var t=0,r=0,n=e.length;r<n;r++)t+=e[r];return t},$Pe=function(e,t){for(var r=new Array(t-e),n=0,i=r.length;n<i;n++)r[n]=e+n;return r},eMe=function(e,t){for(var r=new Array(t.length),n=0,i=t.length;n<i;n++)r[n]=e[t[n]];return r},tMe=function(e){return e instanceof Uint8Array||e instanceof ArrayBuffer||typeof e=="string"},u1=function(e){if(typeof e=="string")return zPe(e);if(e instanceof ArrayBuffer)return new Uint8Array(e);if(e instanceof Uint8Array)return e;throw new TypeError("`input` must be one of `string | ArrayBuffer | Uint8Array`")},Hy=function(){return new Promise(function(e){setTimeout(function(){return e()},0)})},rMe=function(e,t){t===void 0&&(t=!0);var r=[];t&&r.push(65279);for(var n=0,i=e.length;n<i;){var l=e.codePointAt(n);if(l<65536)r.push(l),n+=1;else if(l<1114112)r.push(CY(l),SY(l)),n+=2;else throw new Error("Invalid code point: 0x"+gF(l))}return new Uint16Array(r)},nMe=function(e){return e>=0&&e<=65535},iMe=function(e){return e>=65536&&e<=1114111},CY=function(e){return Math.floor((e-65536)/1024)+55296},SY=function(e){return(e-65536)%1024+56320},Vf;(function(e){e.BigEndian="BigEndian",e.LittleEndian="LittleEndian"})(Vf||(Vf={}));var h1="".codePointAt(0),EY=function(e,t){if(t===void 0&&(t=!0),e.length<=1)return String.fromCodePoint(h1);for(var r=t?sMe(e):Vf.BigEndian,n=t?2:0,i=[];e.length-n>=2;){var l=w8(e[n++],e[n++],r);if(oMe(l))if(e.length-n<2)i.push(h1);else{var h=w8(e[n++],e[n++],r);b8(h)?i.push(l,h):i.push(h1)}else b8(l)?(n+=2,i.push(h1)):i.push(l)}return n<e.length&&i.push(h1),String.fromCodePoint.apply(String,i)},oMe=function(e){return e>=55296&&e<=56319},b8=function(e){return e>=56320&&e<=57343},w8=function(e,t,r){if(r===Vf.LittleEndian)return t<<8|e;if(r===Vf.BigEndian)return e<<8|t;throw new Error("Invalid byteOrder: "+r)},sMe=function(e){return TY(e)?Vf.BigEndian:IY(e)?Vf.LittleEndian:Vf.BigEndian},TY=function(e){return e[0]===254&&e[1]===255},IY=function(e){return e[0]===255&&e[1]===254},FY=function(e){return TY(e)||IY(e)},aMe=function(e){var t=String(e);if(Math.abs(e)<1){var r=parseInt(e.toString().split("e-")[1]);if(r){var n=e<0;n&&(e*=-1),e*=Math.pow(10,r-1),t="0."+new Array(r).join("0")+e.toString().substring(2),n&&(t="-"+t)}}else{var r=parseInt(e.toString().split("+")[1]);r>20&&(r-=20,e/=Math.pow(10,r),t=e.toString()+new Array(r+1).join("0"))}return t},uE=function(e){return Math.ceil(e.toString(2).length/8)},B0=function(e){for(var t=new Uint8Array(uE(e)),r=1;r<=t.length;r++)t[r-1]=e>>(t.length-r)*8;return t},ow=function(e){throw new Error(e)},fd={};(function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function r(l,h){return Object.prototype.hasOwnProperty.call(l,h)}e.assign=function(l){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var p=h.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var o in p)r(p,o)&&(l[o]=p[o])}}return l},e.shrinkBuf=function(l,h){return l.length===h?l:l.subarray?l.subarray(0,h):(l.length=h,l)};var n={arraySet:function(l,h,p,o,_){if(h.subarray&&l.subarray){l.set(h.subarray(p,p+o),_);return}for(var C=0;C<o;C++)l[_+C]=h[p+C]},flattenChunks:function(l){var h,p,o,_,C,M;for(o=0,h=0,p=l.length;h<p;h++)o+=l[h].length;for(M=new Uint8Array(o),_=0,h=0,p=l.length;h<p;h++)C=l[h],M.set(C,_),_+=C.length;return M}},i={arraySet:function(l,h,p,o,_){for(var C=0;C<o;C++)l[_+C]=h[p+C]},flattenChunks:function(l){return[].concat.apply([],l)}};e.setTyped=function(l){l?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,n)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(t)})(fd);var sw={},dA={},ov={},lMe=fd,cMe=4,B8=0,C8=1,uMe=2;function sv(e){for(var t=e.length;--t>=0;)e[t]=0}var hMe=0,PY=1,AMe=2,dMe=3,fMe=258,iU=29,aw=256,gb=aw+1+iU,vy=30,oU=19,MY=2*gb+1,gm=15,Ak=16,pMe=7,sU=256,RY=16,kY=17,DY=18,ZD=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],hE=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],mMe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],LY=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],gMe=512,OA=new Array((gb+2)*2);sv(OA);var xx=new Array(vy*2);sv(xx);var yb=new Array(gMe);sv(yb);var vb=new Array(fMe-dMe+1);sv(vb);var aU=new Array(iU);sv(aU);var PT=new Array(vy);sv(PT);function dk(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}var OY,UY,zY;function fk(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function VY(e){return e<256?yb[e]:yb[256+(e>>>7)]}function _b(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function zl(e,t,r){e.bi_valid>Ak-r?(e.bi_buf|=t<<e.bi_valid&65535,_b(e,e.bi_buf),e.bi_buf=t>>Ak-e.bi_valid,e.bi_valid+=r-Ak):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function qh(e,t,r){zl(e,r[t*2],r[t*2+1])}function NY(e,t){var r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1}function yMe(e){e.bi_valid===16?(_b(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function vMe(e,t){var r=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,l=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,o=t.stat_desc.max_length,_,C,M,L,z,j,K=0;for(L=0;L<=gm;L++)e.bl_count[L]=0;for(r[e.heap[e.heap_max]*2+1]=0,_=e.heap_max+1;_<MY;_++)C=e.heap[_],L=r[r[C*2+1]*2+1]+1,L>o&&(L=o,K++),r[C*2+1]=L,!(C>n)&&(e.bl_count[L]++,z=0,C>=p&&(z=h[C-p]),j=r[C*2],e.opt_len+=j*(L+z),l&&(e.static_len+=j*(i[C*2+1]+z)));if(K!==0){do{for(L=o-1;e.bl_count[L]===0;)L--;e.bl_count[L]--,e.bl_count[L+1]+=2,e.bl_count[o]--,K-=2}while(K>0);for(L=o;L!==0;L--)for(C=e.bl_count[L];C!==0;)M=e.heap[--_],!(M>n)&&(r[M*2+1]!==L&&(e.opt_len+=(L-r[M*2+1])*r[M*2],r[M*2+1]=L),C--)}}function QY(e,t,r){var n=new Array(gm+1),i=0,l,h;for(l=1;l<=gm;l++)n[l]=i=i+r[l-1]<<1;for(h=0;h<=t;h++){var p=e[h*2+1];p!==0&&(e[h*2]=NY(n[p]++,p))}}function _Me(){var e,t,r,n,i,l=new Array(gm+1);for(r=0,n=0;n<iU-1;n++)for(aU[n]=r,e=0;e<1<<ZD[n];e++)vb[r++]=n;for(vb[r-1]=n,i=0,n=0;n<16;n++)for(PT[n]=i,e=0;e<1<<hE[n];e++)yb[i++]=n;for(i>>=7;n<vy;n++)for(PT[n]=i<<7,e=0;e<1<<hE[n]-7;e++)yb[256+i++]=n;for(t=0;t<=gm;t++)l[t]=0;for(e=0;e<=143;)OA[e*2+1]=8,e++,l[8]++;for(;e<=255;)OA[e*2+1]=9,e++,l[9]++;for(;e<=279;)OA[e*2+1]=7,e++,l[7]++;for(;e<=287;)OA[e*2+1]=8,e++,l[8]++;for(QY(OA,gb+1,l),e=0;e<vy;e++)xx[e*2+1]=5,xx[e*2]=NY(e,5);OY=new dk(OA,ZD,aw+1,gb,gm),UY=new dk(xx,hE,0,vy,gm),zY=new dk(new Array(0),mMe,0,oU,pMe)}function HY(e){var t;for(t=0;t<gb;t++)e.dyn_ltree[t*2]=0;for(t=0;t<vy;t++)e.dyn_dtree[t*2]=0;for(t=0;t<oU;t++)e.bl_tree[t*2]=0;e.dyn_ltree[sU*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function jY(e){e.bi_valid>8?_b(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function xMe(e,t,r,n){jY(e),_b(e,r),_b(e,~r),lMe.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}function S8(e,t,r,n){var i=t*2,l=r*2;return e[i]<e[l]||e[i]===e[l]&&n[t]<=n[r]}function pk(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&S8(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!S8(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function E8(e,t,r){var n,i,l=0,h,p;if(e.last_lit!==0)do n=e.pending_buf[e.d_buf+l*2]<<8|e.pending_buf[e.d_buf+l*2+1],i=e.pending_buf[e.l_buf+l],l++,n===0?qh(e,i,t):(h=vb[i],qh(e,h+aw+1,t),p=ZD[h],p!==0&&(i-=aU[h],zl(e,i,p)),n--,h=VY(n),qh(e,h,r),p=hE[h],p!==0&&(n-=PT[h],zl(e,n,p)));while(l<e.last_lit);qh(e,sU,t)}function YD(e,t){var r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,l=t.stat_desc.elems,h,p,o=-1,_;for(e.heap_len=0,e.heap_max=MY,h=0;h<l;h++)r[h*2]!==0?(e.heap[++e.heap_len]=o=h,e.depth[h]=0):r[h*2+1]=0;for(;e.heap_len<2;)_=e.heap[++e.heap_len]=o<2?++o:0,r[_*2]=1,e.depth[_]=0,e.opt_len--,i&&(e.static_len-=n[_*2+1]);for(t.max_code=o,h=e.heap_len>>1;h>=1;h--)pk(e,r,h);_=l;do h=e.heap[1],e.heap[1]=e.heap[e.heap_len--],pk(e,r,1),p=e.heap[1],e.heap[--e.heap_max]=h,e.heap[--e.heap_max]=p,r[_*2]=r[h*2]+r[p*2],e.depth[_]=(e.depth[h]>=e.depth[p]?e.depth[h]:e.depth[p])+1,r[h*2+1]=r[p*2+1]=_,e.heap[1]=_++,pk(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],vMe(e,t),QY(r,o,e.bl_count)}function T8(e,t,r){var n,i=-1,l,h=t[0*2+1],p=0,o=7,_=4;for(h===0&&(o=138,_=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)l=h,h=t[(n+1)*2+1],!(++p<o&&l===h)&&(p<_?e.bl_tree[l*2]+=p:l!==0?(l!==i&&e.bl_tree[l*2]++,e.bl_tree[RY*2]++):p<=10?e.bl_tree[kY*2]++:e.bl_tree[DY*2]++,p=0,i=l,h===0?(o=138,_=3):l===h?(o=6,_=3):(o=7,_=4))}function I8(e,t,r){var n,i=-1,l,h=t[0*2+1],p=0,o=7,_=4;for(h===0&&(o=138,_=3),n=0;n<=r;n++)if(l=h,h=t[(n+1)*2+1],!(++p<o&&l===h)){if(p<_)do qh(e,l,e.bl_tree);while(--p!==0);else l!==0?(l!==i&&(qh(e,l,e.bl_tree),p--),qh(e,RY,e.bl_tree),zl(e,p-3,2)):p<=10?(qh(e,kY,e.bl_tree),zl(e,p-3,3)):(qh(e,DY,e.bl_tree),zl(e,p-11,7));p=0,i=l,h===0?(o=138,_=3):l===h?(o=6,_=3):(o=7,_=4)}}function bMe(e){var t;for(T8(e,e.dyn_ltree,e.l_desc.max_code),T8(e,e.dyn_dtree,e.d_desc.max_code),YD(e,e.bl_desc),t=oU-1;t>=3&&e.bl_tree[LY[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t}function wMe(e,t,r,n){var i;for(zl(e,t-257,5),zl(e,r-1,5),zl(e,n-4,4),i=0;i<n;i++)zl(e,e.bl_tree[LY[i]*2+1],3);I8(e,e.dyn_ltree,t-1),I8(e,e.dyn_dtree,r-1)}function BMe(e){var t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return B8;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return C8;for(r=32;r<aw;r++)if(e.dyn_ltree[r*2]!==0)return C8;return B8}var F8=!1;function CMe(e){F8||(_Me(),F8=!0),e.l_desc=new fk(e.dyn_ltree,OY),e.d_desc=new fk(e.dyn_dtree,UY),e.bl_desc=new fk(e.bl_tree,zY),e.bi_buf=0,e.bi_valid=0,HY(e)}function GY(e,t,r,n){zl(e,(hMe<<1)+(n?1:0),3),xMe(e,t,r)}function SMe(e){zl(e,PY<<1,3),qh(e,sU,OA),yMe(e)}function EMe(e,t,r,n){var i,l,h=0;e.level>0?(e.strm.data_type===uMe&&(e.strm.data_type=BMe(e)),YD(e,e.l_desc),YD(e,e.d_desc),h=bMe(e),i=e.opt_len+3+7>>>3,l=e.static_len+3+7>>>3,l<=i&&(i=l)):i=l=r+5,r+4<=i&&t!==-1?GY(e,t,r,n):e.strategy===cMe||l===i?(zl(e,(PY<<1)+(n?1:0),3),E8(e,OA,xx)):(zl(e,(AMe<<1)+(n?1:0),3),wMe(e,e.l_desc.max_code+1,e.d_desc.max_code+1,h+1),E8(e,e.dyn_ltree,e.dyn_dtree)),HY(e),n&&jY(e)}function TMe(e,t,r){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=r&255,e.last_lit++,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(vb[r]+aw+1)*2]++,e.dyn_dtree[VY(t)*2]++),e.last_lit===e.lit_bufsize-1}ov._tr_init=CMe;ov._tr_stored_block=GY;ov._tr_flush_block=EMe;ov._tr_tally=TMe;ov._tr_align=SMe;function IMe(e,t,r,n){for(var i=e&65535|0,l=e>>>16&65535|0,h=0;r!==0;){h=r>2e3?2e3:r,r-=h;do i=i+t[n++]|0,l=l+i|0;while(--h);i%=65521,l%=65521}return i|l<<16|0}var KY=IMe;function FMe(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t}var PMe=FMe();function MMe(e,t,r,n){var i=PMe,l=n+r;e^=-1;for(var h=n;h<l;h++)e=e>>>8^i[(e^t[h])&255];return e^-1}var WY=MMe,lU={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Al=fd,Au=ov,qY=KY,cf=WY,RMe=lU,$m=0,kMe=1,DMe=3,Nf=4,P8=5,Xh=0,M8=1,du=-2,LMe=-3,mk=-5,OMe=-1,UMe=1,lS=2,zMe=3,VMe=4,NMe=0,QMe=2,yF=8,HMe=9,jMe=15,GMe=8,KMe=29,WMe=256,JD=WMe+1+KMe,qMe=30,XMe=19,ZMe=2*JD+1,YMe=15,oi=3,Sf=258,sh=Sf+oi+1,JMe=32,vF=42,$D=69,AE=73,dE=91,fE=103,ym=113,Q1=666,Ds=1,lw=2,Nm=3,av=4,$Me=3;function Ef(e,t){return e.msg=RMe[t],t}function R8(e){return(e<<1)-(e>4?9:0)}function vf(e){for(var t=e.length;--t>=0;)e[t]=0}function uf(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(Al.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))}function Ia(e,t){Au._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,uf(e.strm)}function xi(e,t){e.pending_buf[e.pending++]=t}function A1(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function eRe(e,t,r,n){var i=e.avail_in;return i>n&&(i=n),i===0?0:(e.avail_in-=i,Al.arraySet(t,e.input,e.next_in,i,r),e.state.wrap===1?e.adler=qY(e.adler,t,i,r):e.state.wrap===2&&(e.adler=cf(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)}function XY(e,t){var r=e.max_chain_length,n=e.strstart,i,l,h=e.prev_length,p=e.nice_match,o=e.strstart>e.w_size-sh?e.strstart-(e.w_size-sh):0,_=e.window,C=e.w_mask,M=e.prev,L=e.strstart+Sf,z=_[n+h-1],j=_[n+h];e.prev_length>=e.good_match&&(r>>=2),p>e.lookahead&&(p=e.lookahead);do if(i=t,!(_[i+h]!==j||_[i+h-1]!==z||_[i]!==_[n]||_[++i]!==_[n+1])){n+=2,i++;do;while(_[++n]===_[++i]&&_[++n]===_[++i]&&_[++n]===_[++i]&&_[++n]===_[++i]&&_[++n]===_[++i]&&_[++n]===_[++i]&&_[++n]===_[++i]&&_[++n]===_[++i]&&n<L);if(l=Sf-(L-n),n=L-Sf,l>h){if(e.match_start=t,h=l,l>=p)break;z=_[n+h-1],j=_[n+h]}}while((t=M[t&C])>o&&--r!==0);return h<=e.lookahead?h:e.lookahead}function Qm(e){var t=e.w_size,r,n,i,l,h;do{if(l=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-sh)){Al.arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,n=e.hash_size,r=n;do i=e.head[--r],e.head[r]=i>=t?i-t:0;while(--n);n=t,r=n;do i=e.prev[--r],e.prev[r]=i>=t?i-t:0;while(--n);l+=t}if(e.strm.avail_in===0)break;if(n=eRe(e.strm,e.window,e.strstart+e.lookahead,l),e.lookahead+=n,e.lookahead+e.insert>=oi)for(h=e.strstart-e.insert,e.ins_h=e.window[h],e.ins_h=(e.ins_h<<e.hash_shift^e.window[h+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[h+oi-1])&e.hash_mask,e.prev[h&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=h,h++,e.insert--,!(e.lookahead+e.insert<oi)););}while(e.lookahead<sh&&e.strm.avail_in!==0)}function tRe(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Qm(e),e.lookahead===0&&t===$m)return Ds;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((e.strstart===0||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,Ia(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-sh&&(Ia(e,!1),e.strm.avail_out===0))return Ds}return e.insert=0,t===Nf?(Ia(e,!0),e.strm.avail_out===0?Nm:av):(e.strstart>e.block_start&&(Ia(e,!1),e.strm.avail_out===0),Ds)}function gk(e,t){for(var r,n;;){if(e.lookahead<sh){if(Qm(e),e.lookahead<sh&&t===$m)return Ds;if(e.lookahead===0)break}if(r=0,e.lookahead>=oi&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+oi-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-sh&&(e.match_length=XY(e,r)),e.match_length>=oi)if(n=Au._tr_tally(e,e.strstart-e.match_start,e.match_length-oi),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=oi){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+oi-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=Au._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(Ia(e,!1),e.strm.avail_out===0))return Ds}return e.insert=e.strstart<oi-1?e.strstart:oi-1,t===Nf?(Ia(e,!0),e.strm.avail_out===0?Nm:av):e.last_lit&&(Ia(e,!1),e.strm.avail_out===0)?Ds:lw}function C0(e,t){for(var r,n,i;;){if(e.lookahead<sh){if(Qm(e),e.lookahead<sh&&t===$m)return Ds;if(e.lookahead===0)break}if(r=0,e.lookahead>=oi&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+oi-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=oi-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-sh&&(e.match_length=XY(e,r),e.match_length<=5&&(e.strategy===UMe||e.match_length===oi&&e.strstart-e.match_start>4096)&&(e.match_length=oi-1)),e.prev_length>=oi&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-oi,n=Au._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-oi),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+oi-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=oi-1,e.strstart++,n&&(Ia(e,!1),e.strm.avail_out===0))return Ds}else if(e.match_available){if(n=Au._tr_tally(e,0,e.window[e.strstart-1]),n&&Ia(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Ds}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=Au._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<oi-1?e.strstart:oi-1,t===Nf?(Ia(e,!0),e.strm.avail_out===0?Nm:av):e.last_lit&&(Ia(e,!1),e.strm.avail_out===0)?Ds:lw}function rRe(e,t){for(var r,n,i,l,h=e.window;;){if(e.lookahead<=Sf){if(Qm(e),e.lookahead<=Sf&&t===$m)return Ds;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=oi&&e.strstart>0&&(i=e.strstart-1,n=h[i],n===h[++i]&&n===h[++i]&&n===h[++i])){l=e.strstart+Sf;do;while(n===h[++i]&&n===h[++i]&&n===h[++i]&&n===h[++i]&&n===h[++i]&&n===h[++i]&&n===h[++i]&&n===h[++i]&&i<l);e.match_length=Sf-(l-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=oi?(r=Au._tr_tally(e,1,e.match_length-oi),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=Au._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(Ia(e,!1),e.strm.avail_out===0))return Ds}return e.insert=0,t===Nf?(Ia(e,!0),e.strm.avail_out===0?Nm:av):e.last_lit&&(Ia(e,!1),e.strm.avail_out===0)?Ds:lw}function nRe(e,t){for(var r;;){if(e.lookahead===0&&(Qm(e),e.lookahead===0)){if(t===$m)return Ds;break}if(e.match_length=0,r=Au._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(Ia(e,!1),e.strm.avail_out===0))return Ds}return e.insert=0,t===Nf?(Ia(e,!0),e.strm.avail_out===0?Nm:av):e.last_lit&&(Ia(e,!1),e.strm.avail_out===0)?Ds:lw}function Lh(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}var iy;iy=[new Lh(0,0,0,0,tRe),new Lh(4,4,8,4,gk),new Lh(4,5,16,8,gk),new Lh(4,6,32,32,gk),new Lh(4,4,16,16,C0),new Lh(8,16,32,32,C0),new Lh(8,16,128,128,C0),new Lh(8,32,128,256,C0),new Lh(32,128,258,1024,C0),new Lh(32,258,258,4096,C0)];function iRe(e){e.window_size=2*e.w_size,vf(e.head),e.max_lazy_match=iy[e.level].max_lazy,e.good_match=iy[e.level].good_length,e.nice_match=iy[e.level].nice_length,e.max_chain_length=iy[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=oi-1,e.match_available=0,e.ins_h=0}function oRe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=yF,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Al.Buf16(ZMe*2),this.dyn_dtree=new Al.Buf16((2*qMe+1)*2),this.bl_tree=new Al.Buf16((2*XMe+1)*2),vf(this.dyn_ltree),vf(this.dyn_dtree),vf(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Al.Buf16(YMe+1),this.heap=new Al.Buf16(2*JD+1),vf(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Al.Buf16(2*JD+1),vf(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ZY(e){var t;return!e||!e.state?Ef(e,du):(e.total_in=e.total_out=0,e.data_type=QMe,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?vF:ym,e.adler=t.wrap===2?0:1,t.last_flush=$m,Au._tr_init(t),Xh)}function YY(e){var t=ZY(e);return t===Xh&&iRe(e.state),t}function sRe(e,t){return!e||!e.state||e.state.wrap!==2?du:(e.state.gzhead=t,Xh)}function JY(e,t,r,n,i,l){if(!e)return du;var h=1;if(t===OMe&&(t=6),n<0?(h=0,n=-n):n>15&&(h=2,n-=16),i<1||i>HMe||r!==yF||n<8||n>15||t<0||t>9||l<0||l>VMe)return Ef(e,du);n===8&&(n=9);var p=new oRe;return e.state=p,p.strm=e,p.wrap=h,p.gzhead=null,p.w_bits=n,p.w_size=1<<p.w_bits,p.w_mask=p.w_size-1,p.hash_bits=i+7,p.hash_size=1<<p.hash_bits,p.hash_mask=p.hash_size-1,p.hash_shift=~~((p.hash_bits+oi-1)/oi),p.window=new Al.Buf8(p.w_size*2),p.head=new Al.Buf16(p.hash_size),p.prev=new Al.Buf16(p.w_size),p.lit_bufsize=1<<i+6,p.pending_buf_size=p.lit_bufsize*4,p.pending_buf=new Al.Buf8(p.pending_buf_size),p.d_buf=1*p.lit_bufsize,p.l_buf=3*p.lit_bufsize,p.level=t,p.strategy=l,p.method=r,YY(e)}function aRe(e,t){return JY(e,t,yF,jMe,GMe,NMe)}function lRe(e,t){var r,n,i,l;if(!e||!e.state||t>P8||t<0)return e?Ef(e,du):du;if(n=e.state,!e.output||!e.input&&e.avail_in!==0||n.status===Q1&&t!==Nf)return Ef(e,e.avail_out===0?mk:du);if(n.strm=e,r=n.last_flush,n.last_flush=t,n.status===vF)if(n.wrap===2)e.adler=0,xi(n,31),xi(n,139),xi(n,8),n.gzhead?(xi(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),xi(n,n.gzhead.time&255),xi(n,n.gzhead.time>>8&255),xi(n,n.gzhead.time>>16&255),xi(n,n.gzhead.time>>24&255),xi(n,n.level===9?2:n.strategy>=lS||n.level<2?4:0),xi(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(xi(n,n.gzhead.extra.length&255),xi(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=cf(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=$D):(xi(n,0),xi(n,0),xi(n,0),xi(n,0),xi(n,0),xi(n,n.level===9?2:n.strategy>=lS||n.level<2?4:0),xi(n,$Me),n.status=ym);else{var h=yF+(n.w_bits-8<<4)<<8,p=-1;n.strategy>=lS||n.level<2?p=0:n.level<6?p=1:n.level===6?p=2:p=3,h|=p<<6,n.strstart!==0&&(h|=JMe),h+=31-h%31,n.status=ym,A1(n,h),n.strstart!==0&&(A1(n,e.adler>>>16),A1(n,e.adler&65535)),e.adler=1}if(n.status===$D)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(n.gzhead.extra.length&65535)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=cf(e.adler,n.pending_buf,n.pending-i,i)),uf(e),i=n.pending,n.pending===n.pending_buf_size));)xi(n,n.gzhead.extra[n.gzindex]&255),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(e.adler=cf(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=AE)}else n.status=AE;if(n.status===AE)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=cf(e.adler,n.pending_buf,n.pending-i,i)),uf(e),i=n.pending,n.pending===n.pending_buf_size)){l=1;break}n.gzindex<n.gzhead.name.length?l=n.gzhead.name.charCodeAt(n.gzindex++)&255:l=0,xi(n,l)}while(l!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=cf(e.adler,n.pending_buf,n.pending-i,i)),l===0&&(n.gzindex=0,n.status=dE)}else n.status=dE;if(n.status===dE)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=cf(e.adler,n.pending_buf,n.pending-i,i)),uf(e),i=n.pending,n.pending===n.pending_buf_size)){l=1;break}n.gzindex<n.gzhead.comment.length?l=n.gzhead.comment.charCodeAt(n.gzindex++)&255:l=0,xi(n,l)}while(l!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=cf(e.adler,n.pending_buf,n.pending-i,i)),l===0&&(n.status=fE)}else n.status=fE;if(n.status===fE&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&uf(e),n.pending+2<=n.pending_buf_size&&(xi(n,e.adler&255),xi(n,e.adler>>8&255),e.adler=0,n.status=ym)):n.status=ym),n.pending!==0){if(uf(e),e.avail_out===0)return n.last_flush=-1,Xh}else if(e.avail_in===0&&R8(t)<=R8(r)&&t!==Nf)return Ef(e,mk);if(n.status===Q1&&e.avail_in!==0)return Ef(e,mk);if(e.avail_in!==0||n.lookahead!==0||t!==$m&&n.status!==Q1){var o=n.strategy===lS?nRe(n,t):n.strategy===zMe?rRe(n,t):iy[n.level].func(n,t);if((o===Nm||o===av)&&(n.status=Q1),o===Ds||o===Nm)return e.avail_out===0&&(n.last_flush=-1),Xh;if(o===lw&&(t===kMe?Au._tr_align(n):t!==P8&&(Au._tr_stored_block(n,0,0,!1),t===DMe&&(vf(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),uf(e),e.avail_out===0))return n.last_flush=-1,Xh}return t!==Nf?Xh:n.wrap<=0?M8:(n.wrap===2?(xi(n,e.adler&255),xi(n,e.adler>>8&255),xi(n,e.adler>>16&255),xi(n,e.adler>>24&255),xi(n,e.total_in&255),xi(n,e.total_in>>8&255),xi(n,e.total_in>>16&255),xi(n,e.total_in>>24&255)):(A1(n,e.adler>>>16),A1(n,e.adler&65535)),uf(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?Xh:M8)}function cRe(e){var t;return!e||!e.state?du:(t=e.state.status,t!==vF&&t!==$D&&t!==AE&&t!==dE&&t!==fE&&t!==ym&&t!==Q1?Ef(e,du):(e.state=null,t===ym?Ef(e,LMe):Xh))}function uRe(e,t){var r=t.length,n,i,l,h,p,o,_,C;if(!e||!e.state||(n=e.state,h=n.wrap,h===2||h===1&&n.status!==vF||n.lookahead))return du;for(h===1&&(e.adler=qY(e.adler,t,r,0)),n.wrap=0,r>=n.w_size&&(h===0&&(vf(n.head),n.strstart=0,n.block_start=0,n.insert=0),C=new Al.Buf8(n.w_size),Al.arraySet(C,t,r-n.w_size,n.w_size,0),t=C,r=n.w_size),p=e.avail_in,o=e.next_in,_=e.input,e.avail_in=r,e.next_in=0,e.input=t,Qm(n);n.lookahead>=oi;){i=n.strstart,l=n.lookahead-(oi-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+oi-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++;while(--l);n.strstart=i,n.lookahead=oi-1,Qm(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=oi-1,n.match_available=0,e.next_in=o,e.input=_,e.avail_in=p,n.wrap=h,Xh}dA.deflateInit=aRe;dA.deflateInit2=JY;dA.deflateReset=YY;dA.deflateResetKeep=ZY;dA.deflateSetHeader=sRe;dA.deflate=lRe;dA.deflateEnd=cRe;dA.deflateSetDictionary=uRe;dA.deflateInfo="pako deflate (from Nodeca project)";var eg={},_F=fd,$Y=!0,eJ=!0;try{String.fromCharCode.apply(null,[0])}catch{$Y=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{eJ=!1}var xb=new _F.Buf8(256);for(var nf=0;nf<256;nf++)xb[nf]=nf>=252?6:nf>=248?5:nf>=240?4:nf>=224?3:nf>=192?2:1;xb[254]=xb[254]=1;eg.string2buf=function(e){var t,r,n,i,l,h=e.length,p=0;for(i=0;i<h;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<h&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),p+=r<128?1:r<2048?2:r<65536?3:4;for(t=new _F.Buf8(p),l=0,i=0;l<p;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<h&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[l++]=r:r<2048?(t[l++]=192|r>>>6,t[l++]=128|r&63):r<65536?(t[l++]=224|r>>>12,t[l++]=128|r>>>6&63,t[l++]=128|r&63):(t[l++]=240|r>>>18,t[l++]=128|r>>>12&63,t[l++]=128|r>>>6&63,t[l++]=128|r&63);return t};function tJ(e,t){if(t<65534&&(e.subarray&&eJ||!e.subarray&&$Y))return String.fromCharCode.apply(null,_F.shrinkBuf(e,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}eg.buf2binstring=function(e){return tJ(e,e.length)};eg.binstring2buf=function(e){for(var t=new _F.Buf8(e.length),r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t};eg.buf2string=function(e,t){var r,n,i,l,h=t||e.length,p=new Array(h*2);for(n=0,r=0;r<h;){if(i=e[r++],i<128){p[n++]=i;continue}if(l=xb[i],l>4){p[n++]=65533,r+=l-1;continue}for(i&=l===2?31:l===3?15:7;l>1&&r<h;)i=i<<6|e[r++]&63,l--;if(l>1){p[n++]=65533;continue}i<65536?p[n++]=i:(i-=65536,p[n++]=55296|i>>10&1023,p[n++]=56320|i&1023)}return tJ(p,n)};eg.utf8border=function(e,t){var r;for(t=t||e.length,t>e.length&&(t=e.length),r=t-1;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+xb[e[r]]>t?r:t};function hRe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var rJ=hRe,bx=dA,wx=fd,e2=eg,t2=lU,ARe=rJ,nJ=Object.prototype.toString,dRe=0,yk=4,_y=0,k8=1,D8=2,fRe=-1,pRe=0,mRe=8;function Hm(e){if(!(this instanceof Hm))return new Hm(e);this.options=wx.assign({level:fRe,method:mRe,chunkSize:16384,windowBits:15,memLevel:8,strategy:pRe,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ARe,this.strm.avail_out=0;var r=bx.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==_y)throw new Error(t2[r]);if(t.header&&bx.deflateSetHeader(this.strm,t.header),t.dictionary){var n;if(typeof t.dictionary=="string"?n=e2.string2buf(t.dictionary):nJ.call(t.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(t.dictionary):n=t.dictionary,r=bx.deflateSetDictionary(this.strm,n),r!==_y)throw new Error(t2[r]);this._dict_set=!0}}Hm.prototype.push=function(e,t){var r=this.strm,n=this.options.chunkSize,i,l;if(this.ended)return!1;l=t===~~t?t:t===!0?yk:dRe,typeof e=="string"?r.input=e2.string2buf(e):nJ.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new wx.Buf8(n),r.next_out=0,r.avail_out=n),i=bx.deflate(r,l),i!==k8&&i!==_y)return this.onEnd(i),this.ended=!0,!1;(r.avail_out===0||r.avail_in===0&&(l===yk||l===D8))&&(this.options.to==="string"?this.onData(e2.buf2binstring(wx.shrinkBuf(r.output,r.next_out))):this.onData(wx.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||r.avail_out===0)&&i!==k8);return l===yk?(i=bx.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===_y):(l===D8&&(this.onEnd(_y),r.avail_out=0),!0)};Hm.prototype.onData=function(e){this.chunks.push(e)};Hm.prototype.onEnd=function(e){e===_y&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=wx.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function cU(e,t){var r=new Hm(t);if(r.push(e,!0),r.err)throw r.msg||t2[r.err];return r.result}function gRe(e,t){return t=t||{},t.raw=!0,cU(e,t)}function yRe(e,t){return t=t||{},t.gzip=!0,cU(e,t)}sw.Deflate=Hm;sw.deflate=cU;sw.deflateRaw=gRe;sw.gzip=yRe;var cw={},Ah={},cS=30,vRe=12,_Re=function(t,r){var n,i,l,h,p,o,_,C,M,L,z,j,K,$,q,ee,ie,fe,me,ye,se,re,de,_e,ve;n=t.state,i=t.next_in,_e=t.input,l=i+(t.avail_in-5),h=t.next_out,ve=t.output,p=h-(r-t.avail_out),o=h+(t.avail_out-257),_=n.dmax,C=n.wsize,M=n.whave,L=n.wnext,z=n.window,j=n.hold,K=n.bits,$=n.lencode,q=n.distcode,ee=(1<<n.lenbits)-1,ie=(1<<n.distbits)-1;e:do{K<15&&(j+=_e[i++]<<K,K+=8,j+=_e[i++]<<K,K+=8),fe=$[j&ee];t:for(;;){if(me=fe>>>24,j>>>=me,K-=me,me=fe>>>16&255,me===0)ve[h++]=fe&65535;else if(me&16){ye=fe&65535,me&=15,me&&(K<me&&(j+=_e[i++]<<K,K+=8),ye+=j&(1<<me)-1,j>>>=me,K-=me),K<15&&(j+=_e[i++]<<K,K+=8,j+=_e[i++]<<K,K+=8),fe=q[j&ie];r:for(;;){if(me=fe>>>24,j>>>=me,K-=me,me=fe>>>16&255,me&16){if(se=fe&65535,me&=15,K<me&&(j+=_e[i++]<<K,K+=8,K<me&&(j+=_e[i++]<<K,K+=8)),se+=j&(1<<me)-1,se>_){t.msg="invalid distance too far back",n.mode=cS;break e}if(j>>>=me,K-=me,me=h-p,se>me){if(me=se-me,me>M&&n.sane){t.msg="invalid distance too far back",n.mode=cS;break e}if(re=0,de=z,L===0){if(re+=C-me,me<ye){ye-=me;do ve[h++]=z[re++];while(--me);re=h-se,de=ve}}else if(L<me){if(re+=C+L-me,me-=L,me<ye){ye-=me;do ve[h++]=z[re++];while(--me);if(re=0,L<ye){me=L,ye-=me;do ve[h++]=z[re++];while(--me);re=h-se,de=ve}}}else if(re+=L-me,me<ye){ye-=me;do ve[h++]=z[re++];while(--me);re=h-se,de=ve}for(;ye>2;)ve[h++]=de[re++],ve[h++]=de[re++],ve[h++]=de[re++],ye-=3;ye&&(ve[h++]=de[re++],ye>1&&(ve[h++]=de[re++]))}else{re=h-se;do ve[h++]=ve[re++],ve[h++]=ve[re++],ve[h++]=ve[re++],ye-=3;while(ye>2);ye&&(ve[h++]=ve[re++],ye>1&&(ve[h++]=ve[re++]))}}else if(me&64){t.msg="invalid distance code",n.mode=cS;break e}else{fe=q[(fe&65535)+(j&(1<<me)-1)];continue r}break}}else if(me&64)if(me&32){n.mode=vRe;break e}else{t.msg="invalid literal/length code",n.mode=cS;break e}else{fe=$[(fe&65535)+(j&(1<<me)-1)];continue t}break}}while(i<l&&h<o);ye=K>>3,i-=ye,K-=ye<<3,j&=(1<<K)-1,t.next_in=i,t.next_out=h,t.avail_in=i<l?5+(l-i):5-(i-l),t.avail_out=h<o?257+(o-h):257-(h-o),n.hold=j,n.bits=K},L8=fd,S0=15,O8=852,U8=592,z8=0,vk=1,V8=2,xRe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],bRe=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],wRe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],BRe=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],CRe=function(t,r,n,i,l,h,p,o){var _=o.bits,C=0,M=0,L=0,z=0,j=0,K=0,$=0,q=0,ee=0,ie=0,fe,me,ye,se,re,de=null,_e=0,ve,Pe=new L8.Buf16(S0+1),Ee=new L8.Buf16(S0+1),Ht=null,Xt=0,gt,jt,Mt;for(C=0;C<=S0;C++)Pe[C]=0;for(M=0;M<i;M++)Pe[r[n+M]]++;for(j=_,z=S0;z>=1&&Pe[z]===0;z--);if(j>z&&(j=z),z===0)return l[h++]=1<<24|64<<16|0,l[h++]=1<<24|64<<16|0,o.bits=1,0;for(L=1;L<z&&Pe[L]===0;L++);for(j<L&&(j=L),q=1,C=1;C<=S0;C++)if(q<<=1,q-=Pe[C],q<0)return-1;if(q>0&&(t===z8||z!==1))return-1;for(Ee[1]=0,C=1;C<S0;C++)Ee[C+1]=Ee[C]+Pe[C];for(M=0;M<i;M++)r[n+M]!==0&&(p[Ee[r[n+M]]++]=M);if(t===z8?(de=Ht=p,ve=19):t===vk?(de=xRe,_e-=257,Ht=bRe,Xt-=257,ve=256):(de=wRe,Ht=BRe,ve=-1),ie=0,M=0,C=L,re=h,K=j,$=0,ye=-1,ee=1<<j,se=ee-1,t===vk&&ee>O8||t===V8&&ee>U8)return 1;for(;;){gt=C-$,p[M]<ve?(jt=0,Mt=p[M]):p[M]>ve?(jt=Ht[Xt+p[M]],Mt=de[_e+p[M]]):(jt=96,Mt=0),fe=1<<C-$,me=1<<K,L=me;do me-=fe,l[re+(ie>>$)+me]=gt<<24|jt<<16|Mt|0;while(me!==0);for(fe=1<<C-1;ie&fe;)fe>>=1;if(fe!==0?(ie&=fe-1,ie+=fe):ie=0,M++,--Pe[C]===0){if(C===z)break;C=r[n+p[M]]}if(C>j&&(ie&se)!==ye){for($===0&&($=j),re+=L,K=C-$,q=1<<K;K+$<z&&(q-=Pe[K+$],!(q<=0));)K++,q<<=1;if(ee+=1<<K,t===vk&&ee>O8||t===V8&&ee>U8)return 1;ye=ie&se,l[ye]=j<<24|K<<16|re-h|0}}return ie!==0&&(l[re+ie]=C-$<<24|64<<16|0),o.bits=j,0},lc=fd,r2=KY,Oh=WY,SRe=_Re,Bx=CRe,ERe=0,iJ=1,oJ=2,N8=4,TRe=5,uS=6,jm=0,IRe=1,FRe=2,vu=-2,sJ=-3,aJ=-4,PRe=-5,Q8=8,lJ=1,H8=2,j8=3,G8=4,K8=5,W8=6,q8=7,X8=8,Z8=9,Y8=10,MT=11,RA=12,_k=13,J8=14,xk=15,$8=16,ej=17,tj=18,rj=19,hS=20,AS=21,nj=22,ij=23,oj=24,sj=25,aj=26,bk=27,lj=28,cj=29,Eo=30,cJ=31,MRe=32,RRe=852,kRe=592,DRe=15,LRe=DRe;function uj(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function ORe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new lc.Buf16(320),this.work=new lc.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function uJ(e){var t;return!e||!e.state?vu:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=lJ,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new lc.Buf32(RRe),t.distcode=t.distdyn=new lc.Buf32(kRe),t.sane=1,t.back=-1,jm)}function hJ(e){var t;return!e||!e.state?vu:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,uJ(e))}function AJ(e,t){var r,n;return!e||!e.state||(n=e.state,t<0?(r=0,t=-t):(r=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?vu:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,hJ(e))}function dJ(e,t){var r,n;return e?(n=new ORe,e.state=n,n.window=null,r=AJ(e,t),r!==jm&&(e.state=null),r):vu}function URe(e){return dJ(e,LRe)}var hj=!0,wk,Bk;function zRe(e){if(hj){var t;for(wk=new lc.Buf32(512),Bk=new lc.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Bx(iJ,e.lens,0,288,wk,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Bx(oJ,e.lens,0,32,Bk,0,e.work,{bits:5}),hj=!1}e.lencode=wk,e.lenbits=9,e.distcode=Bk,e.distbits=5}function fJ(e,t,r,n){var i,l=e.state;return l.window===null&&(l.wsize=1<<l.wbits,l.wnext=0,l.whave=0,l.window=new lc.Buf8(l.wsize)),n>=l.wsize?(lc.arraySet(l.window,t,r-l.wsize,l.wsize,0),l.wnext=0,l.whave=l.wsize):(i=l.wsize-l.wnext,i>n&&(i=n),lc.arraySet(l.window,t,r-n,i,l.wnext),n-=i,n?(lc.arraySet(l.window,t,r-n,n,0),l.wnext=n,l.whave=l.wsize):(l.wnext+=i,l.wnext===l.wsize&&(l.wnext=0),l.whave<l.wsize&&(l.whave+=i))),0}function VRe(e,t){var r,n,i,l,h,p,o,_,C,M,L,z,j,K,$=0,q,ee,ie,fe,me,ye,se,re,de=new lc.Buf8(4),_e,ve,Pe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return vu;r=e.state,r.mode===RA&&(r.mode=_k),h=e.next_out,i=e.output,o=e.avail_out,l=e.next_in,n=e.input,p=e.avail_in,_=r.hold,C=r.bits,M=p,L=o,re=jm;e:for(;;)switch(r.mode){case lJ:if(r.wrap===0){r.mode=_k;break}for(;C<16;){if(p===0)break e;p--,_+=n[l++]<<C,C+=8}if(r.wrap&2&&_===35615){r.check=0,de[0]=_&255,de[1]=_>>>8&255,r.check=Oh(r.check,de,2,0),_=0,C=0,r.mode=H8;break}if(r.flags=0,r.head&&(r.head.done=!1),!(r.wrap&1)||(((_&255)<<8)+(_>>8))%31){e.msg="incorrect header check",r.mode=Eo;break}if((_&15)!==Q8){e.msg="unknown compression method",r.mode=Eo;break}if(_>>>=4,C-=4,se=(_&15)+8,r.wbits===0)r.wbits=se;else if(se>r.wbits){e.msg="invalid window size",r.mode=Eo;break}r.dmax=1<<se,e.adler=r.check=1,r.mode=_&512?Y8:RA,_=0,C=0;break;case H8:for(;C<16;){if(p===0)break e;p--,_+=n[l++]<<C,C+=8}if(r.flags=_,(r.flags&255)!==Q8){e.msg="unknown compression method",r.mode=Eo;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=Eo;break}r.head&&(r.head.text=_>>8&1),r.flags&512&&(de[0]=_&255,de[1]=_>>>8&255,r.check=Oh(r.check,de,2,0)),_=0,C=0,r.mode=j8;case j8:for(;C<32;){if(p===0)break e;p--,_+=n[l++]<<C,C+=8}r.head&&(r.head.time=_),r.flags&512&&(de[0]=_&255,de[1]=_>>>8&255,de[2]=_>>>16&255,de[3]=_>>>24&255,r.check=Oh(r.check,de,4,0)),_=0,C=0,r.mode=G8;case G8:for(;C<16;){if(p===0)break e;p--,_+=n[l++]<<C,C+=8}r.head&&(r.head.xflags=_&255,r.head.os=_>>8),r.flags&512&&(de[0]=_&255,de[1]=_>>>8&255,r.check=Oh(r.check,de,2,0)),_=0,C=0,r.mode=K8;case K8:if(r.flags&1024){for(;C<16;){if(p===0)break e;p--,_+=n[l++]<<C,C+=8}r.length=_,r.head&&(r.head.extra_len=_),r.flags&512&&(de[0]=_&255,de[1]=_>>>8&255,r.check=Oh(r.check,de,2,0)),_=0,C=0}else r.head&&(r.head.extra=null);r.mode=W8;case W8:if(r.flags&1024&&(z=r.length,z>p&&(z=p),z&&(r.head&&(se=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),lc.arraySet(r.head.extra,n,l,z,se)),r.flags&512&&(r.check=Oh(r.check,n,z,l)),p-=z,l+=z,r.length-=z),r.length))break e;r.length=0,r.mode=q8;case q8:if(r.flags&2048){if(p===0)break e;z=0;do se=n[l+z++],r.head&&se&&r.length<65536&&(r.head.name+=String.fromCharCode(se));while(se&&z<p);if(r.flags&512&&(r.check=Oh(r.check,n,z,l)),p-=z,l+=z,se)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=X8;case X8:if(r.flags&4096){if(p===0)break e;z=0;do se=n[l+z++],r.head&&se&&r.length<65536&&(r.head.comment+=String.fromCharCode(se));while(se&&z<p);if(r.flags&512&&(r.check=Oh(r.check,n,z,l)),p-=z,l+=z,se)break e}else r.head&&(r.head.comment=null);r.mode=Z8;case Z8:if(r.flags&512){for(;C<16;){if(p===0)break e;p--,_+=n[l++]<<C,C+=8}if(_!==(r.check&65535)){e.msg="header crc mismatch",r.mode=Eo;break}_=0,C=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=RA;break;case Y8:for(;C<32;){if(p===0)break e;p--,_+=n[l++]<<C,C+=8}e.adler=r.check=uj(_),_=0,C=0,r.mode=MT;case MT:if(r.havedict===0)return e.next_out=h,e.avail_out=o,e.next_in=l,e.avail_in=p,r.hold=_,r.bits=C,FRe;e.adler=r.check=1,r.mode=RA;case RA:if(t===TRe||t===uS)break e;case _k:if(r.last){_>>>=C&7,C-=C&7,r.mode=bk;break}for(;C<3;){if(p===0)break e;p--,_+=n[l++]<<C,C+=8}switch(r.last=_&1,_>>>=1,C-=1,_&3){case 0:r.mode=J8;break;case 1:if(zRe(r),r.mode=hS,t===uS){_>>>=2,C-=2;break e}break;case 2:r.mode=ej;break;case 3:e.msg="invalid block type",r.mode=Eo}_>>>=2,C-=2;break;case J8:for(_>>>=C&7,C-=C&7;C<32;){if(p===0)break e;p--,_+=n[l++]<<C,C+=8}if((_&65535)!==(_>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Eo;break}if(r.length=_&65535,_=0,C=0,r.mode=xk,t===uS)break e;case xk:r.mode=$8;case $8:if(z=r.length,z){if(z>p&&(z=p),z>o&&(z=o),z===0)break e;lc.arraySet(i,n,l,z,h),p-=z,l+=z,o-=z,h+=z,r.length-=z;break}r.mode=RA;break;case ej:for(;C<14;){if(p===0)break e;p--,_+=n[l++]<<C,C+=8}if(r.nlen=(_&31)+257,_>>>=5,C-=5,r.ndist=(_&31)+1,_>>>=5,C-=5,r.ncode=(_&15)+4,_>>>=4,C-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Eo;break}r.have=0,r.mode=tj;case tj:for(;r.have<r.ncode;){for(;C<3;){if(p===0)break e;p--,_+=n[l++]<<C,C+=8}r.lens[Pe[r.have++]]=_&7,_>>>=3,C-=3}for(;r.have<19;)r.lens[Pe[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,_e={bits:r.lenbits},re=Bx(ERe,r.lens,0,19,r.lencode,0,r.work,_e),r.lenbits=_e.bits,re){e.msg="invalid code lengths set",r.mode=Eo;break}r.have=0,r.mode=rj;case rj:for(;r.have<r.nlen+r.ndist;){for(;$=r.lencode[_&(1<<r.lenbits)-1],q=$>>>24,ee=$>>>16&255,ie=$&65535,!(q<=C);){if(p===0)break e;p--,_+=n[l++]<<C,C+=8}if(ie<16)_>>>=q,C-=q,r.lens[r.have++]=ie;else{if(ie===16){for(ve=q+2;C<ve;){if(p===0)break e;p--,_+=n[l++]<<C,C+=8}if(_>>>=q,C-=q,r.have===0){e.msg="invalid bit length repeat",r.mode=Eo;break}se=r.lens[r.have-1],z=3+(_&3),_>>>=2,C-=2}else if(ie===17){for(ve=q+3;C<ve;){if(p===0)break e;p--,_+=n[l++]<<C,C+=8}_>>>=q,C-=q,se=0,z=3+(_&7),_>>>=3,C-=3}else{for(ve=q+7;C<ve;){if(p===0)break e;p--,_+=n[l++]<<C,C+=8}_>>>=q,C-=q,se=0,z=11+(_&127),_>>>=7,C-=7}if(r.have+z>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Eo;break}for(;z--;)r.lens[r.have++]=se}}if(r.mode===Eo)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=Eo;break}if(r.lenbits=9,_e={bits:r.lenbits},re=Bx(iJ,r.lens,0,r.nlen,r.lencode,0,r.work,_e),r.lenbits=_e.bits,re){e.msg="invalid literal/lengths set",r.mode=Eo;break}if(r.distbits=6,r.distcode=r.distdyn,_e={bits:r.distbits},re=Bx(oJ,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,_e),r.distbits=_e.bits,re){e.msg="invalid distances set",r.mode=Eo;break}if(r.mode=hS,t===uS)break e;case hS:r.mode=AS;case AS:if(p>=6&&o>=258){e.next_out=h,e.avail_out=o,e.next_in=l,e.avail_in=p,r.hold=_,r.bits=C,SRe(e,L),h=e.next_out,i=e.output,o=e.avail_out,l=e.next_in,n=e.input,p=e.avail_in,_=r.hold,C=r.bits,r.mode===RA&&(r.back=-1);break}for(r.back=0;$=r.lencode[_&(1<<r.lenbits)-1],q=$>>>24,ee=$>>>16&255,ie=$&65535,!(q<=C);){if(p===0)break e;p--,_+=n[l++]<<C,C+=8}if(ee&&!(ee&240)){for(fe=q,me=ee,ye=ie;$=r.lencode[ye+((_&(1<<fe+me)-1)>>fe)],q=$>>>24,ee=$>>>16&255,ie=$&65535,!(fe+q<=C);){if(p===0)break e;p--,_+=n[l++]<<C,C+=8}_>>>=fe,C-=fe,r.back+=fe}if(_>>>=q,C-=q,r.back+=q,r.length=ie,ee===0){r.mode=aj;break}if(ee&32){r.back=-1,r.mode=RA;break}if(ee&64){e.msg="invalid literal/length code",r.mode=Eo;break}r.extra=ee&15,r.mode=nj;case nj:if(r.extra){for(ve=r.extra;C<ve;){if(p===0)break e;p--,_+=n[l++]<<C,C+=8}r.length+=_&(1<<r.extra)-1,_>>>=r.extra,C-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=ij;case ij:for(;$=r.distcode[_&(1<<r.distbits)-1],q=$>>>24,ee=$>>>16&255,ie=$&65535,!(q<=C);){if(p===0)break e;p--,_+=n[l++]<<C,C+=8}if(!(ee&240)){for(fe=q,me=ee,ye=ie;$=r.distcode[ye+((_&(1<<fe+me)-1)>>fe)],q=$>>>24,ee=$>>>16&255,ie=$&65535,!(fe+q<=C);){if(p===0)break e;p--,_+=n[l++]<<C,C+=8}_>>>=fe,C-=fe,r.back+=fe}if(_>>>=q,C-=q,r.back+=q,ee&64){e.msg="invalid distance code",r.mode=Eo;break}r.offset=ie,r.extra=ee&15,r.mode=oj;case oj:if(r.extra){for(ve=r.extra;C<ve;){if(p===0)break e;p--,_+=n[l++]<<C,C+=8}r.offset+=_&(1<<r.extra)-1,_>>>=r.extra,C-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Eo;break}r.mode=sj;case sj:if(o===0)break e;if(z=L-o,r.offset>z){if(z=r.offset-z,z>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Eo;break}z>r.wnext?(z-=r.wnext,j=r.wsize-z):j=r.wnext-z,z>r.length&&(z=r.length),K=r.window}else K=i,j=h-r.offset,z=r.length;z>o&&(z=o),o-=z,r.length-=z;do i[h++]=K[j++];while(--z);r.length===0&&(r.mode=AS);break;case aj:if(o===0)break e;i[h++]=r.length,o--,r.mode=AS;break;case bk:if(r.wrap){for(;C<32;){if(p===0)break e;p--,_|=n[l++]<<C,C+=8}if(L-=o,e.total_out+=L,r.total+=L,L&&(e.adler=r.check=r.flags?Oh(r.check,i,L,h-L):r2(r.check,i,L,h-L)),L=o,(r.flags?_:uj(_))!==r.check){e.msg="incorrect data check",r.mode=Eo;break}_=0,C=0}r.mode=lj;case lj:if(r.wrap&&r.flags){for(;C<32;){if(p===0)break e;p--,_+=n[l++]<<C,C+=8}if(_!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=Eo;break}_=0,C=0}r.mode=cj;case cj:re=IRe;break e;case Eo:re=sJ;break e;case cJ:return aJ;case MRe:default:return vu}return e.next_out=h,e.avail_out=o,e.next_in=l,e.avail_in=p,r.hold=_,r.bits=C,(r.wsize||L!==e.avail_out&&r.mode<Eo&&(r.mode<bk||t!==N8))&&fJ(e,e.output,e.next_out,L-e.avail_out),M-=e.avail_in,L-=e.avail_out,e.total_in+=M,e.total_out+=L,r.total+=L,r.wrap&&L&&(e.adler=r.check=r.flags?Oh(r.check,i,L,e.next_out-L):r2(r.check,i,L,e.next_out-L)),e.data_type=r.bits+(r.last?64:0)+(r.mode===RA?128:0)+(r.mode===hS||r.mode===xk?256:0),(M===0&&L===0||t===N8)&&re===jm&&(re=PRe),re}function NRe(e){if(!e||!e.state)return vu;var t=e.state;return t.window&&(t.window=null),e.state=null,jm}function QRe(e,t){var r;return!e||!e.state||(r=e.state,!(r.wrap&2))?vu:(r.head=t,t.done=!1,jm)}function HRe(e,t){var r=t.length,n,i,l;return!e||!e.state||(n=e.state,n.wrap!==0&&n.mode!==MT)?vu:n.mode===MT&&(i=1,i=r2(i,t,r,0),i!==n.check)?sJ:(l=fJ(e,t,r,r),l?(n.mode=cJ,aJ):(n.havedict=1,jm))}Ah.inflateReset=hJ;Ah.inflateReset2=AJ;Ah.inflateResetKeep=uJ;Ah.inflateInit=URe;Ah.inflateInit2=dJ;Ah.inflate=VRe;Ah.inflateEnd=NRe;Ah.inflateGetHeader=QRe;Ah.inflateSetDictionary=HRe;Ah.inflateInfo="pako inflate (from Nodeca project)";var pJ={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function jRe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var GRe=jRe,xy=Ah,Cx=fd,pE=eg,us=pJ,n2=lU,KRe=rJ,WRe=GRe,mJ=Object.prototype.toString;function Gm(e){if(!(this instanceof Gm))return new Gm(e);this.options=Cx.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new KRe,this.strm.avail_out=0;var r=xy.inflateInit2(this.strm,t.windowBits);if(r!==us.Z_OK)throw new Error(n2[r]);if(this.header=new WRe,xy.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=pE.string2buf(t.dictionary):mJ.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=xy.inflateSetDictionary(this.strm,t.dictionary),r!==us.Z_OK)))throw new Error(n2[r])}Gm.prototype.push=function(e,t){var r=this.strm,n=this.options.chunkSize,i=this.options.dictionary,l,h,p,o,_,C=!1;if(this.ended)return!1;h=t===~~t?t:t===!0?us.Z_FINISH:us.Z_NO_FLUSH,typeof e=="string"?r.input=pE.binstring2buf(e):mJ.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new Cx.Buf8(n),r.next_out=0,r.avail_out=n),l=xy.inflate(r,us.Z_NO_FLUSH),l===us.Z_NEED_DICT&&i&&(l=xy.inflateSetDictionary(this.strm,i)),l===us.Z_BUF_ERROR&&C===!0&&(l=us.Z_OK,C=!1),l!==us.Z_STREAM_END&&l!==us.Z_OK)return this.onEnd(l),this.ended=!0,!1;r.next_out&&(r.avail_out===0||l===us.Z_STREAM_END||r.avail_in===0&&(h===us.Z_FINISH||h===us.Z_SYNC_FLUSH))&&(this.options.to==="string"?(p=pE.utf8border(r.output,r.next_out),o=r.next_out-p,_=pE.buf2string(r.output,p),r.next_out=o,r.avail_out=n-o,o&&Cx.arraySet(r.output,r.output,p,o,0),this.onData(_)):this.onData(Cx.shrinkBuf(r.output,r.next_out))),r.avail_in===0&&r.avail_out===0&&(C=!0)}while((r.avail_in>0||r.avail_out===0)&&l!==us.Z_STREAM_END);return l===us.Z_STREAM_END&&(h=us.Z_FINISH),h===us.Z_FINISH?(l=xy.inflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===us.Z_OK):(h===us.Z_SYNC_FLUSH&&(this.onEnd(us.Z_OK),r.avail_out=0),!0)};Gm.prototype.onData=function(e){this.chunks.push(e)};Gm.prototype.onEnd=function(e){e===us.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Cx.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function uU(e,t){var r=new Gm(t);if(r.push(e,!0),r.err)throw r.msg||n2[r.err];return r.result}function qRe(e,t){return t=t||{},t.raw=!0,uU(e,t)}cw.Inflate=Gm;cw.inflate=uU;cw.inflateRaw=qRe;cw.ungzip=uU;var XRe=fd.assign,ZRe=sw,YRe=cw,JRe=pJ,gJ={};XRe(gJ,ZRe,YRe,JRe);var $Re=gJ;const xF=Lb($Re);var Aj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",H1=new Uint8Array(256);for(var dS=0;dS<Aj.length;dS++)H1[Aj.charCodeAt(dS)]=dS;var eke=function(e){var t=e.length*.75,r=e.length,n,i=0,l,h,p,o;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var _=new Uint8Array(t);for(n=0;n<r;n+=4)l=H1[e.charCodeAt(n)],h=H1[e.charCodeAt(n+1)],p=H1[e.charCodeAt(n+2)],o=H1[e.charCodeAt(n+3)],_[i++]=l<<2|h>>4,_[i++]=(h&15)<<4|p>>2,_[i++]=(p&3)<<6|o&63;return _},tke=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},yJ=function(e){return tke(xF.inflate(eke(e)))},rke=function(e,t,r){for(var n="",i=0,l=t-e.length;i<l;i++)n+=r;return n+e};const nke="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",ike="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",oke="eJyFWVtT2zgU/isZP+3OhE5Iy/UtDaHNFhI2IdDS4UGxFUeLbKW6AKHT/77Hhnbb1fnUFw98x9K5fzpyvmZDU1Wy9tlxdnUenChlZ3e//+awc7B32D/Kutmpqf1EVJJeGJpglbQ706VWX4JshEHrX4Wdn4SiUnr7q5jga6nKdaPvXBYqVISMvdAqH9Slpjd3dvuEuFP1KIsL5fN1duxtkN1suBZW5F7auWxWjx69rAtZzEwl6hc73741j9nx553+QXenv9frHr456h729m672YJetVrV8sI45ZWpG0W93k+Cy7XK72rpXHZMK7MraV37WtbrvX7V6/VIxcR4lT87s9naxovOH/mfnd2jw6MuPY967XO3ffbb5+v2edAZFGYpO/Ot87JynXGdG7sxVnhZvOp0Blp3Zs1urjOTTtp7QknbiN4qVF3O87VsQ9huMveiLoQtvkvpxaHYvH+J6d4+Be/j9//e9Pe72cDlTZxsdrzfP+pmJ/LH/zu7ewfdbO6L99e0crf98+rlzybY59JblVM8Pn/Nrj/S+iZeEzLEbQSF4Vv3f7B8zLWoYvxLMOToUseSOlTLJs5lHcsKo7WwMb6RNm/qNRKIikSOogMsaBPG7CesrLVcIRFYJlyzo7tjVungYjSnNhMxvN5u1pLxnlxRhvHEaeHWMfwkrYlRUzNZ8g/Mm35tJfPuipqWQdU9865Tjwwo7znvJB/TWnEG50YbZg8nKwVEuuniWOmXIJgaLK2kPmTcJBJzLVPEuWdsH8TQ2xgaxtBJDI1i6DSG3sXQ+xgax9BfMfQhhs5i6DyGJjE0jaGLGPo7hmYxNI+hyxhaxNBVDF3H0McY+hRDNzG0pJPoTnqeNpYkA336sg5ySq5UrmweGBYNDWk7OjiYFmn5jTeG4Zwl02MM/zIdxHAB01AMy8WQiqF/YoihV6aFmWgxXcvQ3oYJZQwx3MDQCxP7EEP3MfQQQwyTbhnS5+sLFMKSO0zb91PV6JUu4FFfmAcmzvzp3ByXuplX4hJqpjqWZ7fc2bHSxir2PAC75MHSMZ4zAWzbxql27oRTCx/NMiiSVAZQQCNuN/6NGIR+xXTHiil8GuRYmilEWXJH2jPOjmLPA0eTO2kl0/s0C4nSig1HanQJkIwX/4V3KVwiwmkpCNGPBAC51FptnGIalTz1axPQpPh86POlTQHgRh+RB88NLi2Tr7Rk2hn0VSVyy9Xw0kpOcWG8yPl+K+iyJVn/LduFOV3GaOBmuDvUpbCh0iIwakxJQybD0rlg/ZAVX7ADZuQxtljRjMcPhWfggJ0inFdQEckFzWoQfLyb2ZLpTg30GoQzu1Nr0lWWSp5J2hjnU4LyE6BoQjqjEqTuE7agUPeKq+ZPwLJBqjMEWLRILdqCRa69dqEekaktF3yfLHAYBGqGBbAuoAUjrOSECIK7fyQdzb9/r2BUIcrJQR0IPi6TpAEa1Shg1MvkbkO0G2DVUYInHXDTQUJUQLs2T7IuGcEMqHiXdDIkmyQlHKCUWmBIDn29SUTucm0ss9kUaZ+BuM0BXgBrF0hB4Cuz/bbhQjvgMDPRFJTgAOGAVqugvdpoZswMwMFL4CCNWl4JXagVc7vaYmqYAD0qVSyjZJklTh0syoEdNaJBlNAJCNAYbNR8eaOBgfv8trTmTtbsHcjKUjkw9b4DyR6nGCVQV/NXkRGoKQscMigyN2DBDYjYy0cu8Als5JkJZQhJQSd5y6PRD56OSDBA40OiKkGAn1BrIN1TlBF09KBMOaQZOzFNjiXAwxOpPZMrz5O0fzAJRsSmVcwnDQUsMuk5c4RCX4AJp+VxKmBLhcyYNk/UK1+RH5J1fAYS560oZCUsY7lMsMIYRGmMCucMWE1BWwvNnAzNzQQ0uElVVA2mpsVv8gfiI5FDJeBScuglq1xS+SDMk6mbpi0viCW4XzsMSNEQGBEgmxcq59JwAjaySW8mID8G4LN0WSelA7DnAHI0P3NNwT5PiQ4ZodMe6b5LugIGgXGyFYAJPn25MWWT79pw30cwlwYsoq3Qr1XpCy13kD8Bp+rkVhRyfEIo1OOj0PwOedvNPkhbXwhlm1+Pb7/9C/NFF2U=",ske="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",ake="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",lke="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",cke="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",uke="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",hke="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",Ake="eJyFnV9TG0myxb8K0U/3RjC7NgZj5o0ZZnYGz5pZGyH3bsyDEA3oImhWfxCajf3ut1Xqyjx5Mkt+cbh/p9RdlZV1qrrVJf5T/dg+PjZPi+r76urvy/nortk7PPpwfLh39P7DyUm1X/3cPi0+jR6brsDl5LGZf/dDO735dTGaTsYbdTmdorq3UfdUHj1Opmss0MFhM7m731xwU7Y73pY+fbqbdqW+e3vUkfnPk9fm5vfJYnxffb+YLZv96sf70Ww0XjSzL83msz+9Lpqnm+bmc/s4euqr+cMP7Wv1/b++O3jzZv+7g7cf9k9O3u+fHLz9Y78adGVn08lT83s7nywm7dPmSl0xFS7vJ+OHp2Y+r74/6vhVM5unYtWbNwd/efPmTXeNT+1iMt605Mf2eT3bNGLvf8b/u/f25MPR/ubf4/Tvyebfkzfp33fp3+O905v2utn7sp4vmsf53q9P43b23M5Gi+bmL3t7p9Pp3ufN2eZ7n5t5M3vp6DaYk/neaG8xG900j6PZw157u/fb5KldrJ+b735puk+d/m1v9HTz13a2N+k+PF9ezyc3k9Fs0sz/0lX3p+4yN5Onuy/j+yZ1QKrFl0X3kdHsJqtdwR9Hz7/0ffL+/cl+9TUfHb4/2K9O5+NNpGed+OHdfnXWyHEX4+P96svi5pdhV/Yg/feq++/bg7fb/vp7s5hNxl1E//Wfavi1+v5gE9lPXU3mz6MukP/d3+J3XcwSbl7H09Gj8KOjoy3/97LtQnU9VeVNf6Kn5eP1pqfunrx2006no5nwD+/ebflzMxtvMj4Lx8cftsLosZPmXXi0ZvkzqQapy732PJo1T9PmtiTZj0n1RvPNGecPqhz3yvN0ORcqMRt3A3XkL3G/fr5vnnzxrimTVltykBs5n47m9742fzaz1tP2qfFwsQpKLu5nTVD2tl3OAjp5CcrOJ68BbF6aoG+bOKZPE6iwhGjcTtsnj+fN48RK0gPTjQ842vx7OZp6fDdrupEcNPPfy2aevEZT8KDve637+/fHW3bq0Q8e/ahpe9Cf7MyX+smjn/0H/+aHwC9+UP7qG3buT/9R0du3W/Sbtjuf6+++Ep88uvDn+t2X+oevxGewjvdb9MWf69Kfa+DPdeVrP/SlvvrT1x790yffdTeZPTQLYxsyRq87zY5T/hx5yrF4yngyGU9m4+Wj77XlxrXn3dQTDJHkb6Yy6lMeXQs6PDzsx1jgv75UcOVb/8E73433PkgTj/7Pn+vBl9IhLGn/6K8YmE5ge8/BqPdDaObR3Ndr4Sux9CF88Um48pV49R9c+0r8qejwg+aXTYSDg9zrMJna8ruycTGZ3hSn+pt2FcTZzM46EyzSQk2T421u/+1mYYg+K59ZR3PH7bSdTQI+bwpnGS9n3TQ+XvsuS8NmPklL18D+t6uWeFjdLSed8tgu4pXDRk4n/oZMoc+JczsJWLB+6lZy4XLgZnR3F01pW45LMVpwbPqumTU3/qPdWmh0Nxs9g6nlj153dxFN0EoN7/VoviPCu9XC+ks6wOrdXUGOzXQ6eZ5P5oHUtXVx3y7NWtFN+ya5tedmo5fABkfj5SJauiQvv502r16jkZXx42g8i5Y717MmuvBNuxiNzYhTadL1JAZAlBmOQ61sc9OFNFqjLp/uRrPl43S0DC7T3nXLzIfgdCNsB/TLo8nZk2xwp7rqOXjf53w7u7ntlnlmXagLFDvH6vrDcrnAhV7gncwJs5vHzueWU7yCnGmkTDzjZjPk5/Ng+poW1uZtoZ5tkPTd6OxuiLush16TlZzrUJ2Ybf7p5G+zRiemsEv1dLbvdG3kaiCTxc3kZXITdFJta6bL5WBoaLXth3SdF3xIJ0gagzJVpzsvGiTQVH9KvZ4ZKIp9GKTmNBr0M9RD0hP0Ab0HcBfRO4bOIeAWxN5iUkOPD4+z2D/0CC5FnqOrQpsH2so4Lp+iCujwKOWotVRd50dn0xup0tmsrUI4vVFqhphmAidH1MWrvfrhSR+waftn83QXXP6zvYTew0WN1OTYOUgCUYcXTyOylrUVga6mturdj4+c9tF9OwtadUFX1zAURsEXcok32WwLYRvQBTRidmozjzfmy7TGmQX1pRSUKJY42Wo2wcfldDF5nq6DelEDNcltd+RE6lZbi8loejO5vfV9tS5bwyd7HU3YXcny08402zHrlKVxoaOfSjZIHQqeEo/NX+lE+PCtWzDgEzi5AZq1D80T3gaJOc6au8ncLnx1iNLKS6djPy7kXmTZjWpzN6LBphWkDMyCobU8lmRcFlLqn2Tahyd55Zqec9mnYNLKnxb3vq4/Fg1wGvnWu7xsWxRMpinOjqVZ8LS0fNiRlYUA/1kaGqVKXZR6pDT1lDx3XrpyeRxf7FyW8IyZ1wXNdBE87lkYk1ZPXLU7HDFY6b3PJhe0xNZIQxWuM3UsUOj1PtWucI6P0Me7BJ51iQxVk2nE3cJ8OMj5OgonpI/hIkPuMGzH6T2MfKkTmWJ5ofFrITV/LY3x32j+y3HoonY/msKztzzIN7cm9Jxb+iJyefFlu2zSVPtGB9I6SILA87Pc31gzxQb13Rr16iic67+E613J4PgWRzKss4noG4+2MOX/WKjEkjL/UOz8ZjKOjPasMKHNdrbmk+0frW5huft5d17vXFqfFs55WjTp+HbgovDs8M9g4tSlSGG6LznFQ9iUN9mrzEpAz7ZzKNgq6PPdnVeatneb/n5qg0dVrTdTSR8v5QzqTlUYyXfhTYM8X4GZXGNeSN+ncB6H7w/dFKGeXxrjPy0330X+sV99bGZPv48ms803yP+qTjdfVVf7370/+mO/P9q6h0HbelrUmzrCv22O3sjR1lUMwoahcNEdHelRrgIgSA7DpasM3Y5/g4zzGKUPmWHbp0MGbQcOon9sjqT1l/YoxwyRab0KA3PWgW/9oND6Qdj6gW/9oNj6QdD6vPAzLNkJkqvu6ETaMOyOuqk4H9bd4bEe5SYBgqorhVcCOnyY8bI7eieFlvlsgEyAgMNVgOYAAaIAgSIBAiYBAtYHSMmLacPKHK3tkcRHEcZnS/tCOF4F0aAVTiNXOQ/frMAYFkQDWXg4mrMKQ1oQZbbwKL1F9DkuEiW68DjbReaUF4FGvXAa+pnD+M/oMkDkBMojO8jqwF+OjUH4rvAFFiFSIXwFsxC5FD5nGyJY78gYDCQjdJHMwEoEkZ8I96aSpchZsgb2Iog8RnhkNCJ6txGJLEd47Dsis/mIwA4kgrWhjF98q1cerQNE1iTc+1NvE+hPgsifhJM/KWd/ygr4kyDyJ+GhP2UV/EkQDTDh0QAT0Q8wkWiACY8HmMg8wEQgfxJO/pQ5+FNGlwEif1Ie+VNWB/5y7E/Cd4Uv8CeRCuEr+JPIpfA5fxLB+lPG4E8ZoT9lBv4kiPxJuPenLEX+lDXwJ0HkT8IjfxLR+5NI5E/CY38Smf1JBPYnEaw/ZfziW73yaB0g8ifh3p8wNGhSlpNTWZHsikT2LCODcVlO7mXF0MJMEfAxy2k0WjEakraEH5dWp8FpxXiE2jI8TK1KVmdF8jsjgukZflniZH8kRh5oigwK9WA3tOI34x/4otV3xb/gkLbMzvg7r7SqNUyjgWsajtZpBPBPy8lEreid1OiRnZoC4KmWk7FaMXJXW8JbrNXJZ60Ym60tw45rVbZdq1rvNdpLIU6rAl+XOPmxFb0pK0FLRkqGjBLZsZHYjEEEK0ZKRoxSaMNQAEwYKVkASpEBoO6HP6o0+FGKhz6W4IGPGtkuSmS6IIHlAr2MKdmtkSKzhQKD8OpstCh9I8qByaJajnLBYLHEjig7c0XNWisoYKxA0VYBg6kiJUtFyRsqqJGdggxmipSsFKXISFH3NooqmShKsYViCTZQ1Ng+UbPmCcpLGJNVSNcxJdNEyVtm33r0S0FklsLJKZWzTWYFPFIQGaTw0B2zCtYoiEas8Gi4iujHqkg0UIXHo1RkHqIikAsKJwvMHPwvo8sAkfMpj2wvqwN/OTY84bvCF1idSIXwFUxO5FL4nL2JYL0tYzC2jNDVMgNLE0R+JtybWZYiJ8sa2Jgg8jDhkYGJ6N1LJLIu4bFvicymJQI7lgjWrjJ+8a1eebQOEFmUcO9Pua5oUMrIoVQgiwKBPUokMCll5FIqhDYlMviUMhppKkRDTVU/1lSjwaZCPNpU5+GmCtmVCuRXIoBhCbuMGFkWCJFniTwIrsmupcLOWAa+pVoplgXnUr0YS+ddqljzEg7uJQztSyD4lzIyMBW8g4kWWZiI4GHKyMRUiFxMVW9jqpGPqRAbmersZKqwlalivUz4S9D+VcDWESM/U8EbWq4YGpoyMjQVyNBAYEMTCQxNGRmaCqGhiQyGpowGoQrRIFTVD0LVaBCqEA9C1XkQqkKGpgIZmghgaMIuI0aGBkJkaCIPgmuyoamwM5aBoalWimXB0FQvxtIZmirW0ISDoQlDQxMIhqaMDE0Fb2iiRYYmIhiaMjI0FSJDU9UbmmpkaCrEhqY6G5oqbGiqWEMT/hK0fxWwjaG9YyYxYQFbvdVm/W+UqANlQmaWMVmZYDayXgAby4RMLOPQwnoRDCwTGnIZRwMua364ZYUGW8bxUMsqD7TMybIyJsPqMdhVTy49IasSHBlVLw7cldikMt4RscCgshJHrGBOWS1EzBlT5taWegqm1BO0pB6BIWVCdpSxN6Neiayol8CIMiEbyjgyoax5C8oKGVDGsf1klc0nc7aezK3x9PTFtXXlyNoTWkFl7NdP/SBAvxFEhiOcHEc5W05WwHMEkekID10nq2A7gmgUCY+GkYh+HIlEA0l4PJJE5qEkArmPcLKfzMF/MroMEDmQ8siCsjrwl2MTEr4rfIENiVQIX8GIRC6Fz1mRCNaLMgYzygjdKDOwI0HkR8K9IWUpcqSsgSUJIk8SHpmSiN6VRCJbEh77kshsTCKwM4lgrSnjF9/qlUfrAJE9CXf+9ENHT7ujgyM5yp8FlL0EkAkpcLgC0BxIQBIkYBIfYH1ogOSBrWiQMlCOcgsAmeoCh+oCzdUFRF0OijQEmDQEWN+QLTkzcT/zcT/zcT8rxP0sjPuZj/tZEPezIO5nLu5nPu5nvRkcSXs2PnAoR7XRamuDZzTue9qbLkZGEIVHOMVIeBQoEX20RKKQCee4icDBE8FGUDCFMfMrHwYIaEa1L8WhFR7EN21itPHNiOObOcc38zC+WQzimyWOb+Yuvllw8c0CxTdjjm/Pr3wYML49qn0pF9/MXXx/7kPbT4Y/Y1iR5ZAiI4NSwTiUYrUoZeBECsGKFIoXKcphAzaSuT4d5aYAyi0BZBoCHNoBNDcDkLQCmDQCWN8GILkJira/cdk16uAkI2pjE3RQkxd/hhU6qIk7CHbdWh50XBN1XBN13EQyNh3lugMy1QQOtQSaKwNI6gJMqqKsldVaOrJru4RMTYC75V6iuSaAaMoFReoILN8GAMr5oKj/EVOTEDMzfmd2tCck9wKA7G1AEs6Ns557Uz33fnpesNLz0EXPvYGeB955HtjmuXPMc2+W5/2gP5T2jGyKneOgBxRk3TkNeqA2687NoAdGWXcOgx5IboEiGfRCrN74NsmIRxS3qQnbZIY7YN/UJmhqEzS1tUe+zm2hgm1YwdbXhAcYKEEdZYAB8rHXASZoaQosfUOWhYYsw4YsfUP4fgyUoCHLINhLk1cfq+2TkHd6ZO8sEwpuKhN395OJ2lvJhMK7yKTQDWRiOfyAcvgV6VD+iIkOKCc6Im8/HynRkUKiA7au9NEkOjBypY99osORr3NbqGAbVrD1NeFEByWooyQ6IGuTH/usPpC4S1YDsrVWjrVWKrVWxLVWRWutTCOrLPu9kLU98rVe+9qZqQ7HBQk0REiNRgsV8QOHCtAYIjUeTlSIRxbJNMhIpfFmVUgPEiijSaUByWqQ+lTEjwIu4EcslaAhQyqPEZJ5SFu5LQo7wxKOeSryrYazE5AamwIV2t12tgpSyTWsuiyNMPYSUiNboSLfGsNsNqTGvkOF2IJIZjci2RqTFddFYWdgvHP9Vm0f7b/9IEdyYwfIrORV2DwveHecj4bmqLZH4nyK0MuEmsfZ268OfusbrIXW/mxrfzbcc9/X2e25dzxqKW5Ip3MPPaoDRPWN9qOTFMUBt2FTcY5ItA27l2xKQHBIoBCxGgXKlrkqXXNYEuqiQM0j9VuNjILpB1T4UQ5seUD1BXq7w8AKopAqj4KZ1St/7qFHdYCo6sLLlY4ClbW1L87BEe6u8Kna3vdvlwXpyK6FEsp3zYCCNVHibiGUqF39JESrmcToO6bEzNdLidilzKc8pE4DRG0RTg0SHrVKRN80kah9wrmRInBLRbDNFUxtxi8bGFGb3ZcNzKM2R182sERt9l82sMBt5i8bGHObzQg/LQrcfqtyFKwaxsIWCSJiC3BcrOqiY2UXIytTpKxI8cpfnJ4GiGIknKIjPIqLiD4iIlEshHMUROD2i2BbLti2+aJv7qEe2Uc2F9hIQMFTnAtqGlD7FOfCNAgYPau5gGYAsc+hLvoZCo7s470LPy+poN8TXfSzkR59NSVro9HXRBdV9A3RBRrtISEKszNa5lHAI6NliULvjZYF7gQ2WsbUHbhWZUQdU1irknrl4zn06Kv/YO1LcbdFy9deMtu5oQMtp160InWlFaP+tCV8p1qdetaK3L1W5T62qu1oq1Fvux+eCDn1+64fnoiKXBV6ZVjgXwvnqQvlOSuKv7/Q67BpFRIDKaUFSpQUKEUpgbpPCFQpHVDiZECNUwE1mwioUBrQZviAUgqUN8P7Aldh5Ich/RqeoQ7LcrcX9oj3at4GCD0uiLpbOPW18KijRfS9LBJ1sXDuXxG4c0WwPSuYuhX3+DKiDi3s8SX1ysdz6NFX/8Hal+Lui7bE9pJ9xoVdyAr1JMvUoSxH/cplfPdyCepllrmzWec+Z912PauUASRflhXKBydHaUGFroo9NiwqX4tnq4uf4cxh2SeQ7JmD1FFGSaMCpYsKUaKo6lNENUoOFTgtVOGEUMWmgnJKArNz1jHq+NLOWZavgugOA/Y1+GwdlONODTeY9lp+ugO9KYg6Uzj1pfCoK0X0PSkSdaRw7kcRuBtFsL0omDoRn+Yxoi4sPM0j9crHc+jRV//B2pfizose8PUS3qQfEqK+czfpzKO+i27SWaK+8zfpLHDf8U06Y+o73LrAiPqusHWB1Csfz6FHX/0Ha1+K+y56038r/d5324cjOcqfBZQ7C5DpJ+BwBaC5dwBJxwCTPgHWdweQ3BOK9JWpdGRzLiGbbgkFmZa4S7JEbX4lRKmVGGVVYiahErG5tEH0nuQGNaaTGtulCdnX4rbIb2pJPOx488U0YLvDJSHavZIYbVzZsM2XzUfSLfINMyBbQeVYQaVSE0W8zUYVraMy2ZukSLYlCeKXEv9R4Y6GdGR3NCQU7GhI3O1oSNTuaEgo3NGQFNrRkBjtaEjM7Gj4XG1fDjnUIzsQEgqyPnGX9YnarE8ofNUrKTQeErPvrCVkk/9z76Hv9CinNSLjnCoMzHkGvr2DQnsHYXsHvr3cS6AE7R3Q+P8MvaRkY/Xb7+E+9y6vR7U9krxThPm1pfmRGfS+IAqJ8CguIvrgiEQREh6HSWSOlQiUIMIpS/AR5jtClC+FR5ikDvy5OX2E74pVkEgiFWJVSCmRS7FyySWCzTB8SksZMvSoDhBlXfRItpfy91yQeoIonMKjcIrowykShVN4HE6ROZwiUOoJp9TLHFJPEKWe8ij1sjrw5+bUE74rVkHqiVSIVSH1RC7FyqWeCDb1cC8VZcjQozpAlHrRXqosudcicyXi1yJjNQxw8bXIuAAHe+drkXEhF/j4tchY5YR17+C8CwVO3l3v4IRlBqVrunS26rdjHqW2LbAz5qU0t4V2x9ynvJUp8d3LSWGWDktCXRR4QBRfTtoW6Lo73dBtV7fpyK7CE8q3Q4CChXnibmGeqF2YJ0TL78T0FkFZ3tauxK7IL/vRrO25sDG4dOMWeBgQGaGAePWtiq6+leUBCEj26wlK2/UO5CjXGpBs11Nkt+spx+16SmW7niLdrqdMt+spy9v1lMh2PUHjdrrd1nWoZHtjqmXsJxrfSrkvRRS30tyXAoX7UigsSadIk05Z0Pj79fN9Y6u02cm3fX0sHdmXzRLS1ziEbe5vTyRL5f4WULD7MnG3+zJRu/syIcpLUGhfZmI5LwHZTZgbJPe32vqZadbMt1723CGyU4II8+Zx4jNnacos/SXoVyGUuxf8EpXXcBTxjgNV9N0cZUF/yu8+CFmZo7U98m3wLyPmaRVd2L3Wxpz8OH6tjUXvzO61Nubs0f61NhasW7vX2oiDb7vbAOaRg0e3ASyRl5duA1hmV3e3AczJ3zMHMxREHiic7F545IYieuMXidxfOE8BIrAVimAnA8E0I2ROg1uxmRsyDk7As4RwmiqU74hQMGmo5GcO0Wj6EM5ziAil6PFskjlMKYLIMoSzGWUBZhhBNM0Ij+YaEf2EIxLNOsLjqUdknn9EoElIOM1EmfN0lPnMR4MnJuE0OymPpqisBvNUlpa+NM9YwqNpS8TyfMATmPB4FhOZpzIRSilEk1rGK4/WASq0Opro3LvMeTaI32WOVZ76drzLHBcJpsH4XeZYdVNi4V3mWKbpMX6XOVRxqowfWMRqOG0WH1jEBXgK3fnAIi7kptP4gUWs8tRqVJxRrMCTiFV5srVqOKHYIsHEawvw9GtVNwlb2U0mVqYJ2Yo8LRuVHY1EO0XbnaNFYWek3aRN6jcjHU3gVCCYxm0Jnsyt6qZ0K+/uCze9GxUneSuwc1rVubXdqgrTpBV48rdquASwRYKFgC3AywGrFhYFtpBbGliZFwhW5WWCUd1iwaizUjzdwsGqvHwgNVxEmDLRUsIUWJY+6ZYVVg0XF7bIt2Zit9CwamG5YQu5RYeVdyczL0CMuCoJ66KwM2J+YTLoVyOHR3Ikz6MVyRshiuxzaeX4MFqpPIFWpE+UleljZGX52bESeYS/RWaXCiFqi9+lQjxqVbhLhSRqX7BLhQRuqdulQpja7Hd3RJxaX9jdEYlRHMq7OyKdIlLa3RGpHJt4d0ekUZR4o4OnFKFwo4OXouiUNjp4lSITb3TwGkcl2ujgFYqI2QVAiGLhdwEQj6IQ7gIgidof7AIggVvudgEQpjZHb8/HCkWg+PZ8LEfx2PX2fFyColN+ez7WOValt+djlSJnXxtnRtEKXhtnIYpQ/No4axSV6LVxVjgS/rVx5tR6+bsMpxGj1qtArVchar2qvvWqUetV4Narwq1XxbZeObW+/5H4U0+o5RlTuzOOWp013+asUIsz5vZmzq3N3LY1U9vSq76VH/TIvtV7ha0DFLzVe0WtAmrf6r0yrQFGb/VeQSuA2Ld6N2jzo/rbVxvTkf5oqyC7UFdBfyMrHdmN4gkFe8ETd9vAE7U7wBMKf+wqKbQtPDH7s1YJ2U3fG5Te/337Vg7lORAwCQIw+0QIBHwOBFie/gDTxzkA9ZVTgPmdU0DyOEeZvTfaEvOG8wbRZ5qgwfpLsMgKDcbnCsdA8YdgobT84qki/V1TZVEU5BHBsfTe5rnAkeTuxD70TIgeJW5Ya0/bBhFoS61t4+5tg+7lm3iUop6XG3ZkQS/zi9Mb5u+MN3Rpmr300VkGT3oTd493E7XPdBMKXwxPCj3iTSzojKV5mDvsPXTbhiF6KKA8HgHZn91VjsmpVJJQkSahMqkusL66QOT3dgWlp8zSHn20rMiml3LMLqWSXIo4t1TR1FImmaVIEkvQSOaBIRohIDt3DZ0NAndz1xBNEBDNXUNjgcDM3DVEA1SUR8ARkK3/ad+kZ15v5Ege9CmSB62AzAM/5W6Dx5CtDwrbDR5D43zA9DGpMDE+LaYPRIeVewo6rPyjz2FvfB/kFOJ7gGx3KsfuVCrdqYjyEhTtaGU5LwFJrwoSv9NORLvTzl7aI2t3w4LdDUO7G3q7GxbtbhjY3TCwu2Fod2t75Gu9drWrjUvW3iVr75J1wSXr0CVr75J14JJ14JK1c8nau2Tdu+SBtEdcElDwa5g1uSRQ+7uXdeCSoNAvXNbokoDsb1nWFX5RVlfu27G6cl+J1c4lgbsvv+rKfeNVV/5rrrry323VFX+hVVfuW6waXBIJfl9VV2aRWFd+kVhXfpFYO6M8Vu7WiDUbJZ7FrhHryq8R6ypYI9aV+xqprnCNWFdujVhXfo1YV2aNWFd+jVg7s0TBrxHryq8R68AvUeI1Yl35NWJd+TVi7T2zJs/U4CztkU/nZSF3l2HuLn3usmeCEmT1Msjqpc1qfEzfN889pmdOXhg/pmfRu6J7TM+c/dE/pmfBOqV7TE8cPNNtNmMeuWe02Ywl8tHSZjOW2VHdZjPm5K2Zj3xPs8sKJ6sVHuWsiD5xRaLsFc6JKgJnqwhxyrIbZ07jUrHx5YxxrAtjgxKBbVqFwKtF9IatUuDaIpJ1C2f/FsGZeFbYyTMHOxdEni6cjT0LbXA9Z/EihD4vamD2orHji1CwfdGd94vCE4AIPAtkgaeCzIP5IEvLABWGYDg9iFgeajxRCI9nC5FLI9HNGyLYkUjf5PUxib7JCySaRYrf5AW6n0uib/ICiWeU8Ju8QLPzSvRNnpdgdkFKEwxK0RyDup9mUKWZBqV4ssESPN+gRlMOSjTrgDQKs4TnHpRo+kEpGhao+5GBKg0OlHgAoMZjALXiMOA5CSSyB6OYmQkUtCDE7K6o8RRltGCWQt1PVEYN5irUabpCiWcs1NykBSLPWyDB1IWUZi+UeAIDrY0v76Yx1MKZDAsEkxnKPJ+hVpjSsIib1VDkiQ01nttA4+kNpGCGA3UZ0/JwD6c61HeOaZ7wUIrnPCyxY9S7mQ81M+qvO3Jd5a/srjF4h4L0D3RcYzgABX+K45qaD9T+0Y3roLmg0J/XuDbNA2b+kMZ4M+ikWZujB3sUfWE5lmWmRw8BCs8hW1M8eghQfI78183NWQQ+hDA809aStz/4f3M9zb/5v33B06hWakxaZKNGlFuACF+XAg7Jh1RtGHF+0QaQvEQBTF4tUHZb8R+825DuMtNmPk/PxgU2pgj84UtB9m9WCqbf/tmw2yq/Pn+bHVi01p+Z/Fa5/V2i28g+VRFjVKR/tTQj+gt0t9TV2+njoQ/HNjgPGA5A9hcKHtwkDNx9cf/A8QRsv89/MHMsMPod9wcT6Acf6IdCoB94PlNqw/9QDP+DnbSU2S558F1iRygGvfDOf6xSV+x65z8u4jtoxzv/cQnqttI7/7HMnenfvw/jxV286/37uIjv+ML797Eap0Pp/ftYpiQpvH+/VTeO9yLz8FP2YEDZgxGZM4KQf3lQUdsfbb/t3Rxt3gg/kCMN5OZobY9sZyTkwttilfurZASXyujVf3AdILqycH95Mx9BHQyHihj+WjjPusSpXlb0lYNJEaoGFCoG9DU8wzqmVCWUfIXyxAu1yQiqktGr/+A6QFQD4f7y9LYo1IIUqAwpr8WzrcsK1ZBlX1FZjUAVhUHlhL0Gn11HjKqigq9E/g1YqENGUIWMXv0H1wGi60d/5qmX0Ez6y2cEl8/o1X9wHSC6vHB3+byuKSxrrWy1hKbN7SLL2//3N4r4gepG2mbxePtH7yPNXDA45Sz+mGyRijR5DhJpdsnvS8zjeszt80yr5QuGWr7diFVTnajE82hcuKxugLI42gFmSmgKdtGV9f97IbII7hF/j0KYi/MvLBB2xcM9n6FIH+1js/37SseG2Bd5BMtfV7I42LcmGi79rGJ3qgmm3WfC6UUi4Wa/mVB5w9bgzW9zbd/azGToSO2J5K7F+MwvKS/QAdsLv/Sr7m26vOBSG5AdcC9uUQ3cvZn3wstnwPaFvRezUAamd5jCWnvk69wWKtiGFWx9TdzaVpWgjq19dfDFLF0FSX5vg9/NC5Xemacja/gJ2VfLEwoW9om7aSFRu4RPiJbkidF9fGLmN3wTsevxlUuoVYWPElaVe5SwMgkFKG5TE7YpeBaxMgmlKGgqP7JYmYRa+YRaFRJqFSbUyifUqphQqyChVj6hVj6hVj6hXk3wX33wX33wXwvBfw2D/xoH/9UH/zUI/msQ/LVLobVv2JqnKMJcPPgKxiv4oT/++/9jjgIE",dke="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",fke="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",pke="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",mke="eJxtmNtu20YQhl+F4FULyMGeD7pz3AY1ChtG7NpFA18w1NomIlECSRcxgrx7SVk7+wOdG8H5OJydf2Z2d5gf9cV+t0v9VK/r+6vXsXlOlbHe28paq229qj/t++m62aXZ4J/m8PRb1z9/baZxefK63Z6eXN5dVMvTCh83u277xr/6kLrnl2XNq7TpXnczuZyabdee98/b2VzM/x4/dd/T5qab2pd6PQ2vaVVfvDRD005puE3Lu7eH1HbN9hTjx4/77/X6y5lcnUmjVzHIVVDicVX/1W/SsO36dLMfu6nb9/X6TAoBD+5euvZbn8axXtuZ36dhPJrVQqgPQoh5hev91LWLkIv94W1Ygq9+aX+tZAx2tfz64284/sblN/rqfLP/mqrbt3FKu7G67Nv9cNgPzZQ2H6rz7bb6vLgZq89pTMO/M/xfEqturJpqSM/d7GJIm2oamk3aNcO3av80O5xh3yyKmm1193ZIT02bqovTKjP+MAf++7zsZvZ3276kYyWWXB0z99S18/PbafPHQ71W4fjn/fxnFO+ZvkrT0LVzTr78qB/+nk38bHM9exgP8zr1z9U7jt6840YW5uSJKcZOCaBBnKgm5mU8MVNYyMwWFvO7Ukagkmgg6sDWQ5yFFqjzUrLEaQ3BEmiwNsMSaZS0vgWfOkPHWQowNeTUc0kumnxZvsgPxlGai6VTGUqAVCTQ6QkWnc77DKEiLktSUBJKqHIQZ86d8gCpHYoiEzMsb1ubYy8vW50DChB5ZhGqrijD0EqUIeiaEHIfCg5Kpuu0ApiToaGPSY0uaQsyr65L2oKi1yFt1PLaQ3lzfXTgXodGoJYzglndSLDMPg1sTPJpQJHJigw0QrGERqD9YhyTOgONQDUyuF1zaxuokc/BW2ztXCMrGZ9WMW1oQZHIXWNBkSCfRZEL5BMUiZw6CzVSFCfUSGZFNjIldoKDkonTKQiJIGzWmFd3BizJJ9SINoLDriOfUCOZS+zg+KGD1qGiLNMLxtJD1/ns00ON6EzyUCM6vbxhoBKaqbG3DFQCNiL1iHccBPV0DHhQH/JW8EW90dkyFKGywCJU0WkVSvSGeiSUODWFFD0HYdPQVoiRgfPMA+/nnRgiAyNYSjpWNQcNSMrtFCUH4ZIRpSCWocFCSuhCEY6hoUClc0WC52BJlCYYLQdhN+hygRRRlo5BKRRLS6oihSqh+ZzzRGG1Mo4Iz1LoP0qsxDGFzk0JE42ji0jCPejomJKCuwil4m5CiRMEUMVSzVLDUstSx1Juc0oVWMpqY295qVltmtWmWW2a1aZZbZrVplltmtWmWW2G1WZYbYbVZlhthtVmWG2G1WZYbYbVZlhtltVmWW2W1WZZbZbVZlltltVmWW2W1QYjQCh7E2aAQHeGhCFgPoNoy8KNb2wxBhmGKBxoUZXlLGsLI6AsftEDHV0wIURVbANLcTKlGGBIKPOAxCmhePCKUwFzAmpDFRQvjA9R06Hq8TONvshgKDCuRAZTXigUxjxNFfKRo3CLhnIJBMFRvMZpqpNBMlQJzGT5WFQMVQI/AikPMIhEU1aDjqJvQwmjSHB05cC9jbYwc5UtAHNLhDw41ha+lEqF4JaH3gmB61SYcqInxTDmQK8v08vjqv4zDf1N0w3Lf4A8/vwPpfK11w==";var gke={Courier:ske,"Courier-Bold":nke,"Courier-Oblique":oke,"Courier-BoldOblique":ike,Helvetica:uke,"Helvetica-Bold":ake,"Helvetica-Oblique":cke,"Helvetica-BoldOblique":lke,"Times-Roman":fke,"Times-Bold":hke,"Times-Italic":dke,"Times-BoldItalic":Ake,Symbol:pke,ZapfDingbats:mke},bb;(function(e){e.Courier="Courier",e.CourierBold="Courier-Bold",e.CourierOblique="Courier-Oblique",e.CourierBoldOblique="Courier-BoldOblique",e.Helvetica="Helvetica",e.HelveticaBold="Helvetica-Bold",e.HelveticaOblique="Helvetica-Oblique",e.HelveticaBoldOblique="Helvetica-BoldOblique",e.TimesRoman="Times-Roman",e.TimesRomanBold="Times-Bold",e.TimesRomanItalic="Times-Italic",e.TimesRomanBoldItalic="Times-BoldItalic",e.Symbol="Symbol",e.ZapfDingbats="ZapfDingbats"})(bb||(bb={}));var dj={},yke=function(){function e(){var t=this;this.getWidthOfGlyph=function(r){return t.CharWidths[r]},this.getXAxisKerningForPair=function(r,n){return(t.KernPairXAmounts[r]||{})[n]}}return e.load=function(t){var r=dj[t];if(r)return r;var n=yJ(gke[t]),i=Object.assign(new e,JSON.parse(n));return i.CharWidths=i.CharMetrics.reduce(function(l,h){return l[h.N]=h.WX,l},{}),i.KernPairXAmounts=i.KernPairs.reduce(function(l,h){var p=h[0],o=h[1],_=h[2];return l[p]||(l[p]={}),l[p][o]=_,l},{}),dj[t]=i,i},e}();const vke="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";var _ke=yJ(vke),Ck=JSON.parse(_ke),Sk=function(){function e(t,r){var n=this;this.canEncodeUnicodeCodePoint=function(i){return i in n.unicodeMappings},this.encodeUnicodeCodePoint=function(i){var l=n.unicodeMappings[i];if(!l){var h=String.fromCharCode(i),p="0x"+rke(i.toString(16),4,"0"),o=n.name+' cannot encode "'+h+'" ('+p+")";throw new Error(o)}return{code:l[0],name:l[1]}},this.name=t,this.supportedCodePoints=Object.keys(r).map(Number).sort(function(i,l){return i-l}),this.unicodeMappings=r}return e}(),fS={Symbol:new Sk("Symbol",Ck.symbol),ZapfDingbats:new Sk("ZapfDingbats",Ck.zapfdingbats),WinAnsi:new Sk("WinAnsi",Ck.win1252)},bF=function(e){return Object.keys(e).map(function(t){return e[t]})},xke=bF(bb),fj=function(e){return xke.includes(e)},pS=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height},Ps=function(e){return"`"+e+"`"},bke=function(e){return"'"+e+"'"},pj=function(e){var t=typeof e;return t==="string"?bke(e):t==="undefined"?Ps(e):e},wke=function(e,t,r){for(var n=new Array(r.length),i=0,l=r.length;i<l;i++){var h=r[i];n[i]=pj(h)}var p=n.join(" or ");return Ps(t)+" must be one of "+p+", but was actually "+pj(e)},Tf=function(e,t,r){Array.isArray(r)||(r=bF(r));for(var n=0,i=r.length;n<i;n++)if(e===r[n])return;throw new TypeError(wke(e,t,r))},Wc=function(e,t,r){Array.isArray(r)||(r=bF(r)),Tf(e,t,r.concat(void 0))},Bke=function(e,t,r){Array.isArray(r)||(r=bF(r));for(var n=0,i=e.length;n<i;n++)Tf(e[n],t,r)},Cke=function(e){return e===null?"null":e===void 0?"undefined":typeof e=="string"?"string":isNaN(e)?"NaN":typeof e=="number"?"number":typeof e=="boolean"?"boolean":typeof e=="symbol"?"symbol":typeof e=="bigint"?"bigint":e.constructor&&e.constructor.name?e.constructor.name:e.name?e.name:e.constructor?String(e.constructor):String(e)},Ske=function(e,t){return t==="null"?e===null:t==="undefined"?e===void 0:t==="string"?typeof e=="string":t==="number"?typeof e=="number"&&!isNaN(e):t==="boolean"?typeof e=="boolean":t==="symbol"?typeof e=="symbol":t==="bigint"?typeof e=="bigint":t===Date?e instanceof Date:t===Array?e instanceof Array:t===Uint8Array?e instanceof Uint8Array:t===ArrayBuffer?e instanceof ArrayBuffer:t===Function?e instanceof Function:e instanceof t[0]},Eke=function(e,t,r){for(var n=new Array(r.length),i=0,l=r.length;i<l;i++){var h=r[i];h==="null"&&(n[i]=Ps("null")),h==="undefined"&&(n[i]=Ps("undefined")),h==="string"?n[i]=Ps("string"):h==="number"?n[i]=Ps("number"):h==="boolean"?n[i]=Ps("boolean"):h==="symbol"?n[i]=Ps("symbol"):h==="bigint"?n[i]=Ps("bigint"):h===Array?n[i]=Ps("Array"):h===Uint8Array?n[i]=Ps("Uint8Array"):h===ArrayBuffer?n[i]=Ps("ArrayBuffer"):n[i]=Ps(h[1])}var p=n.join(" or ");return Ps(t)+" must be of type "+p+", but was actually of type "+Ps(Cke(e))},Ct=function(e,t,r){for(var n=0,i=r.length;n<i;n++)if(Ske(e,r[n]))return;throw new TypeError(Eke(e,t,r))},ur=function(e,t,r){Ct(e,t,r.concat("undefined"))},vJ=function(e,t,r){for(var n=0,i=e.length;n<i;n++)Ct(e[n],t,r)},cc=function(e,t,r,n){if(Ct(e,t,["number"]),Ct(r,"min",["number"]),Ct(n,"max",["number"]),n=Math.max(r,n),e<r||e>n)throw new Error(Ps(t)+" must be at least "+r+" and at most "+n+", but was actually "+e)},Wu=function(e,t,r,n){Ct(e,t,["number","undefined"]),typeof e=="number"&&cc(e,t,r,n)},_J=function(e,t,r){if(Ct(e,t,["number"]),e%r!==0)throw new Error(Ps(t)+" must be a multiple of "+r+", but was actually "+e)},Tke=function(e,t){if(!Number.isInteger(e))throw new Error(Ps(t)+" must be an integer, but was actually "+e)},wF=function(e,t){if(![1,0].includes(Math.sign(e)))throw new Error(Ps(t)+" must be a positive number or 0, but was actually "+e)},wn=new Uint16Array(256);for(var mS=0;mS<256;mS++)wn[mS]=mS;wn[22]=_n("");wn[24]=_n("");wn[25]=_n("");wn[26]=_n("");wn[27]=_n("");wn[28]=_n("");wn[29]=_n("");wn[30]=_n("");wn[31]=_n("");wn[127]=_n("");wn[128]=_n("");wn[129]=_n("");wn[130]=_n("");wn[131]=_n("");wn[132]=_n("");wn[133]=_n("");wn[134]=_n("");wn[135]=_n("");wn[136]=_n("");wn[137]=_n("");wn[138]=_n("");wn[139]=_n("");wn[140]=_n("");wn[141]=_n("");wn[142]=_n("");wn[143]=_n("");wn[144]=_n("");wn[145]=_n("");wn[146]=_n("");wn[147]=_n("");wn[148]=_n("");wn[149]=_n("");wn[150]=_n("");wn[151]=_n("");wn[152]=_n("");wn[153]=_n("");wn[154]=_n("");wn[155]=_n("");wn[156]=_n("");wn[157]=_n("");wn[158]=_n("");wn[159]=_n("");wn[160]=_n("");wn[173]=_n("");var xJ=function(e){for(var t=new Array(e.length),r=0,n=e.length;r<n;r++)t[r]=wn[e[r]];return String.fromCodePoint.apply(String,t)},ed=function(){function e(t){this.populate=t,this.value=void 0}return e.prototype.getValue=function(){return this.value},e.prototype.access=function(){return this.value||(this.value=this.populate()),this.value},e.prototype.invalidate=function(){this.value=void 0},e.populatedBy=function(t){return new e(t)},e}(),au=function(e){Ar(t,e);function t(r,n){var i=this,l="Method "+r+"."+n+"() not implemented";return i=e.call(this,l)||this,i}return t}(Error),hU=function(e){Ar(t,e);function t(r){var n=this,i="Cannot construct "+r+" - it has a private constructor";return n=e.call(this,i)||this,n}return t}(Error),RT=function(e){Ar(t,e);function t(r,n){var i=this,l=function(o){var _,C;return(_=o==null?void 0:o.name)!==null&&_!==void 0?_:(C=o==null?void 0:o.constructor)===null||C===void 0?void 0:C.name},h=Array.isArray(r)?r.map(l):[l(r)],p="Expected instance of "+h.join(" or ")+", "+("but got instance of "+(n&&l(n)));return i=e.call(this,p)||this,i}return t}(Error),Ike=function(e){Ar(t,e);function t(r){var n=this,i=r+" stream encoding not supported";return n=e.call(this,i)||this,n}return t}(Error),AU=function(e){Ar(t,e);function t(r,n){var i=this,l="Cannot call "+r+"."+n+"() more than once";return i=e.call(this,l)||this,i}return t}(Error);(function(e){Ar(t,e);function t(r){var n=this,i="Missing catalog (ref="+r+")";return n=e.call(this,i)||this,n}return t})(Error);var Fke=function(e){Ar(t,e);function t(){var r=this,n="Can't embed page with missing Contents";return r=e.call(this,n)||this,r}return t}(Error),Pke=function(e){Ar(t,e);function t(r){var n,i,l,h=this,p=(l=(i=(n=r==null?void 0:r.contructor)===null||n===void 0?void 0:n.name)!==null&&i!==void 0?i:r==null?void 0:r.name)!==null&&l!==void 0?l:r,o="Unrecognized stream type: "+p;return h=e.call(this,o)||this,h}return t}(Error),Mke=function(e){Ar(t,e);function t(){var r=this,n="Found mismatched contexts while embedding pages. All pages in the array passed to `PDFDocument.embedPages()` must be from the same document.";return r=e.call(this,n)||this,r}return t}(Error),Rke=function(e){Ar(t,e);function t(r){var n=this,i="Attempted to convert PDFArray with "+r+" elements to rectangle, but must have exactly 4 elements.";return n=e.call(this,i)||this,n}return t}(Error),bJ=function(e){Ar(t,e);function t(r){var n=this,i='Attempted to convert "'+r+'" to a date, but it does not match the PDF date string format.';return n=e.call(this,i)||this,n}return t}(Error),mj=function(e){Ar(t,e);function t(r,n){var i=this,l="Invalid targetIndex specified: targetIndex="+r+" must be less than Count="+n;return i=e.call(this,l)||this,i}return t}(Error),gj=function(e){Ar(t,e);function t(r,n){var i=this,l="Failed to "+n+" at targetIndex="+r+" due to corrupt page tree: It is likely that one or more 'Count' entries are invalid";return i=e.call(this,l)||this,i}return t}(Error),kT=function(e){Ar(t,e);function t(r,n,i){var l=this,h="index should be at least "+n+" and at most "+i+", but was actually "+r;return l=e.call(this,h)||this,l}return t}(Error),dU=function(e){Ar(t,e);function t(){var r=this,n="Attempted to set invalid field value";return r=e.call(this,n)||this,r}return t}(Error),kke=function(e){Ar(t,e);function t(){var r=this,n="Attempted to select multiple values for single-select field";return r=e.call(this,n)||this,r}return t}(Error),Dke=function(e){Ar(t,e);function t(r){var n=this,i="No /DA (default appearance) entry found for field: "+r;return n=e.call(this,i)||this,n}return t}(Error),Lke=function(e){Ar(t,e);function t(r){var n=this,i="No Tf operator found for DA of field: "+r;return n=e.call(this,i)||this,n}return t}(Error),yj=function(e){Ar(t,e);function t(r,n){var i=this,l="Failed to parse number "+("(line:"+r.line+" col:"+r.column+" offset="+r.offset+'): "'+n+'"');return i=e.call(this,l)||this,i}return t}(Error),Ap=function(e){Ar(t,e);function t(r,n){var i=this,l="Failed to parse PDF document "+("(line:"+r.line+" col:"+r.column+" offset="+r.offset+"): "+n);return i=e.call(this,l)||this,i}return t}(Error),Oke=function(e){Ar(t,e);function t(r,n,i){var l=this,h="Expected next byte to be "+n+" but it was actually "+i;return l=e.call(this,r,h)||this,l}return t}(Ap),Uke=function(e){Ar(t,e);function t(r,n){var i=this,l="Failed to parse PDF object starting with the following byte: "+n;return i=e.call(this,r,l)||this,i}return t}(Ap),zke=function(e){Ar(t,e);function t(r){var n=this,i="Failed to parse invalid PDF object";return n=e.call(this,r,i)||this,n}return t}(Ap),Vke=function(e){Ar(t,e);function t(r){var n=this,i="Failed to parse PDF stream";return n=e.call(this,r,i)||this,n}return t}(Ap),Nke=function(e){Ar(t,e);function t(r){var n=this,i="Failed to parse PDF literal string due to unbalanced parenthesis";return n=e.call(this,r,i)||this,n}return t}(Ap),Qke=function(e){Ar(t,e);function t(r){var n=this,i="Parser stalled";return n=e.call(this,r,i)||this,n}return t}(Ap),Hke=function(e){Ar(t,e);function t(r){var n=this,i="No PDF header found";return n=e.call(this,r,i)||this,n}return t}(Ap),jke=function(e){Ar(t,e);function t(r,n){var i=this,l="Did not find expected keyword '"+BY(n)+"'";return i=e.call(this,r,l)||this,i}return t}(Ap),i2;(function(e){e[e.Null=0]="Null",e[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.Newline=10]="Newline",e[e.FormFeed=12]="FormFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationPoint=33]="ExclamationPoint",e[e.Hash=35]="Hash",e[e.Percent=37]="Percent",e[e.LeftParen=40]="LeftParen",e[e.RightParen=41]="RightParen",e[e.Plus=43]="Plus",e[e.Minus=45]="Minus",e[e.Dash=45]="Dash",e[e.Period=46]="Period",e[e.ForwardSlash=47]="ForwardSlash",e[e.Zero=48]="Zero",e[e.One=49]="One",e[e.Two=50]="Two",e[e.Three=51]="Three",e[e.Four=52]="Four",e[e.Five=53]="Five",e[e.Six=54]="Six",e[e.Seven=55]="Seven",e[e.Eight=56]="Eight",e[e.Nine=57]="Nine",e[e.LessThan=60]="LessThan",e[e.GreaterThan=62]="GreaterThan",e[e.A=65]="A",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.O=79]="O",e[e.P=80]="P",e[e.R=82]="R",e[e.LeftSquareBracket=91]="LeftSquareBracket",e[e.BackSlash=92]="BackSlash",e[e.RightSquareBracket=93]="RightSquareBracket",e[e.a=97]="a",e[e.b=98]="b",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.i=105]="i",e[e.j=106]="j",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.x=120]="x",e[e.LeftCurly=123]="LeftCurly",e[e.RightCurly=125]="RightCurly",e[e.Tilde=126]="Tilde"})(i2||(i2={}));const We=i2;var BF=function(){function e(t,r){this.major=String(t),this.minor=String(r)}return e.prototype.toString=function(){var t=$A(129);return"%PDF-"+this.major+"."+this.minor+`
%`+t+t+t+t},e.prototype.sizeInBytes=function(){return 12+this.major.length+this.minor.length},e.prototype.copyBytesInto=function(t,r){var n=r;return t[r++]=We.Percent,t[r++]=We.P,t[r++]=We.D,t[r++]=We.F,t[r++]=We.Dash,r+=Ta(this.major,t,r),t[r++]=We.Period,r+=Ta(this.minor,t,r),t[r++]=We.Newline,t[r++]=We.Percent,t[r++]=129,t[r++]=129,t[r++]=129,t[r++]=129,r-n},e.forVersion=function(t,r){return new e(t,r)},e}(),ml=function(){function e(){}return e.prototype.clone=function(t){throw new au(this.constructor.name,"clone")},e.prototype.toString=function(){throw new au(this.constructor.name,"toString")},e.prototype.sizeInBytes=function(){throw new au(this.constructor.name,"sizeInBytes")},e.prototype.copyBytesInto=function(t,r){throw new au(this.constructor.name,"copyBytesInto")},e}(),pn=function(e){Ar(t,e);function t(r){var n=e.call(this)||this;return n.numberValue=r,n.stringValue=aMe(r),n}return t.prototype.asNumber=function(){return this.numberValue},t.prototype.value=function(){return this.numberValue},t.prototype.clone=function(){return t.of(this.numberValue)},t.prototype.toString=function(){return this.stringValue},t.prototype.sizeInBytes=function(){return this.stringValue.length},t.prototype.copyBytesInto=function(r,n){return n+=Ta(this.stringValue,r,n),this.stringValue.length},t.of=function(r){return new t(r)},t}(ml),mi=function(e){Ar(t,e);function t(r){var n=e.call(this)||this;return n.array=[],n.context=r,n}return t.prototype.size=function(){return this.array.length},t.prototype.push=function(r){this.array.push(r)},t.prototype.insert=function(r,n){this.array.splice(r,0,n)},t.prototype.indexOf=function(r){var n=this.array.indexOf(r);return n===-1?void 0:n},t.prototype.remove=function(r){this.array.splice(r,1)},t.prototype.set=function(r,n){this.array[r]=n},t.prototype.get=function(r){return this.array[r]},t.prototype.lookupMaybe=function(r){for(var n,i=[],l=1;l<arguments.length;l++)i[l-1]=arguments[l];return(n=this.context).lookupMaybe.apply(n,si([this.get(r)],i))},t.prototype.lookup=function(r){for(var n,i=[],l=1;l<arguments.length;l++)i[l-1]=arguments[l];return(n=this.context).lookup.apply(n,si([this.get(r)],i))},t.prototype.asRectangle=function(){if(this.size()!==4)throw new Rke(this.size());var r=this.lookup(0,pn).asNumber(),n=this.lookup(1,pn).asNumber(),i=this.lookup(2,pn).asNumber(),l=this.lookup(3,pn).asNumber(),h=r,p=n,o=i-r,_=l-n;return{x:h,y:p,width:o,height:_}},t.prototype.asArray=function(){return this.array.slice()},t.prototype.clone=function(r){for(var n=t.withContext(r||this.context),i=0,l=this.size();i<l;i++)n.push(this.array[i]);return n},t.prototype.toString=function(){for(var r="[ ",n=0,i=this.size();n<i;n++)r+=this.get(n).toString(),r+=" ";return r+="]",r},t.prototype.sizeInBytes=function(){for(var r=3,n=0,i=this.size();n<i;n++)r+=this.get(n).sizeInBytes()+1;return r},t.prototype.copyBytesInto=function(r,n){var i=n;r[n++]=We.LeftSquareBracket,r[n++]=We.Space;for(var l=0,h=this.size();l<h;l++)n+=this.get(l).copyBytesInto(r,n),r[n++]=We.Space;return r[n++]=We.RightSquareBracket,n-i},t.prototype.scalePDFNumbers=function(r,n){for(var i=0,l=this.size();i<l;i++){var h=this.lookup(i);if(h instanceof pn){var p=i%2===0?r:n;this.set(i,pn.of(h.asNumber()*p))}}},t.withContext=function(r){return new t(r)},t}(ml),Ek={},wb=function(e){Ar(t,e);function t(r,n){var i=this;if(r!==Ek)throw new hU("PDFBool");return i=e.call(this)||this,i.value=n,i}return t.prototype.asBoolean=function(){return this.value},t.prototype.clone=function(){return this},t.prototype.toString=function(){return String(this.value)},t.prototype.sizeInBytes=function(){return this.value?4:5},t.prototype.copyBytesInto=function(r,n){return this.value?(r[n++]=We.t,r[n++]=We.r,r[n++]=We.u,r[n++]=We.e,4):(r[n++]=We.f,r[n++]=We.a,r[n++]=We.l,r[n++]=We.s,r[n++]=We.e,5)},t.True=new t(Ek,!0),t.False=new t(Ek,!1),t}(ml),bu=new Uint8Array(256);bu[We.LeftParen]=1;bu[We.RightParen]=1;bu[We.LessThan]=1;bu[We.GreaterThan]=1;bu[We.LeftSquareBracket]=1;bu[We.RightSquareBracket]=1;bu[We.LeftCurly]=1;bu[We.RightCurly]=1;bu[We.ForwardSlash]=1;bu[We.Percent]=1;var pd=new Uint8Array(256);pd[We.Null]=1;pd[We.Tab]=1;pd[We.Newline]=1;pd[We.FormFeed]=1;pd[We.CarriageReturn]=1;pd[We.Space]=1;var fU=new Uint8Array(256);for(var d1=0,Gke=256;d1<Gke;d1++)fU[d1]=pd[d1]||bu[d1]?1:0;fU[We.Hash]=1;var Kke=function(e){return e.replace(/#([\dABCDEF]{2})/g,function(t,r){return NPe(r)})},Wke=function(e){return e>=We.ExclamationPoint&&e<=We.Tilde&&!fU[e]},vj={},_j=new Map,Ge=function(e){Ar(t,e);function t(r,n){var i=this;if(r!==vj)throw new hU("PDFName");i=e.call(this)||this;for(var l="/",h=0,p=n.length;h<p;h++){var o=n[h],_=_n(o);l+=Wke(_)?o:"#"+gF(_)}return i.encodedName=l,i}return t.prototype.asBytes=function(){for(var r=[],n="",i=!1,l=function(M){M!==void 0&&r.push(M),i=!1},h=1,p=this.encodedName.length;h<p;h++){var o=this.encodedName[h],_=_n(o),C=this.encodedName[h+1];i?_>=We.Zero&&_<=We.Nine||_>=We.a&&_<=We.f||_>=We.A&&_<=We.F?(n+=o,(n.length===2||!(C>="0"&&C<="9"||C>="a"&&C<="f"||C>="A"&&C<="F"))&&(l(parseInt(n,16)),n="")):l(_):_===We.Hash?i=!0:l(_)}return new Uint8Array(r)},t.prototype.decodeText=function(){var r=this.asBytes();return String.fromCharCode.apply(String,Array.from(r))},t.prototype.asString=function(){return this.encodedName},t.prototype.value=function(){return this.encodedName},t.prototype.clone=function(){return this},t.prototype.toString=function(){return this.encodedName},t.prototype.sizeInBytes=function(){return this.encodedName.length},t.prototype.copyBytesInto=function(r,n){return n+=Ta(this.encodedName,r,n),this.encodedName.length},t.of=function(r){var n=Kke(r),i=_j.get(n);return i||(i=new t(vj,n),_j.set(n,i)),i},t.Length=t.of("Length"),t.FlateDecode=t.of("FlateDecode"),t.Resources=t.of("Resources"),t.Font=t.of("Font"),t.XObject=t.of("XObject"),t.ExtGState=t.of("ExtGState"),t.Contents=t.of("Contents"),t.Type=t.of("Type"),t.Parent=t.of("Parent"),t.MediaBox=t.of("MediaBox"),t.Page=t.of("Page"),t.Annots=t.of("Annots"),t.TrimBox=t.of("TrimBox"),t.ArtBox=t.of("ArtBox"),t.BleedBox=t.of("BleedBox"),t.CropBox=t.of("CropBox"),t.Rotate=t.of("Rotate"),t.Title=t.of("Title"),t.Author=t.of("Author"),t.Subject=t.of("Subject"),t.Creator=t.of("Creator"),t.Keywords=t.of("Keywords"),t.Producer=t.of("Producer"),t.CreationDate=t.of("CreationDate"),t.ModDate=t.of("ModDate"),t}(ml),qke=function(e){Ar(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.asNull=function(){return null},t.prototype.clone=function(){return this},t.prototype.toString=function(){return"null"},t.prototype.sizeInBytes=function(){return 4},t.prototype.copyBytesInto=function(r,n){return r[n++]=We.n,r[n++]=We.u,r[n++]=We.l,r[n++]=We.l,4},t}(ml);const Dl=new qke;var Sn=function(e){Ar(t,e);function t(r,n){var i=e.call(this)||this;return i.dict=r,i.context=n,i}return t.prototype.keys=function(){return Array.from(this.dict.keys())},t.prototype.values=function(){return Array.from(this.dict.values())},t.prototype.entries=function(){return Array.from(this.dict.entries())},t.prototype.set=function(r,n){this.dict.set(r,n)},t.prototype.get=function(r,n){n===void 0&&(n=!1);var i=this.dict.get(r);if(!(i===Dl&&!n))return i},t.prototype.has=function(r){var n=this.dict.get(r);return n!==void 0&&n!==Dl},t.prototype.lookupMaybe=function(r){for(var n,i=[],l=1;l<arguments.length;l++)i[l-1]=arguments[l];var h=i.includes(Dl),p=(n=this.context).lookupMaybe.apply(n,si([this.get(r,h)],i));if(!(p===Dl&&!h))return p},t.prototype.lookup=function(r){for(var n,i=[],l=1;l<arguments.length;l++)i[l-1]=arguments[l];var h=i.includes(Dl),p=(n=this.context).lookup.apply(n,si([this.get(r,h)],i));if(!(p===Dl&&!h))return p},t.prototype.delete=function(r){return this.dict.delete(r)},t.prototype.asMap=function(){return new Map(this.dict)},t.prototype.uniqueKey=function(r){r===void 0&&(r="");for(var n=this.keys(),i=Ge.of(this.context.addRandomSuffix(r,10));n.includes(i);)i=Ge.of(this.context.addRandomSuffix(r,10));return i},t.prototype.clone=function(r){for(var n=t.withContext(r||this.context),i=this.entries(),l=0,h=i.length;l<h;l++){var p=i[l],o=p[0],_=p[1];n.set(o,_)}return n},t.prototype.toString=function(){for(var r=`<<
`,n=this.entries(),i=0,l=n.length;i<l;i++){var h=n[i],p=h[0],o=h[1];r+=p.toString()+" "+o.toString()+`
`}return r+=">>",r},t.prototype.sizeInBytes=function(){for(var r=5,n=this.entries(),i=0,l=n.length;i<l;i++){var h=n[i],p=h[0],o=h[1];r+=p.sizeInBytes()+o.sizeInBytes()+2}return r},t.prototype.copyBytesInto=function(r,n){var i=n;r[n++]=We.LessThan,r[n++]=We.LessThan,r[n++]=We.Newline;for(var l=this.entries(),h=0,p=l.length;h<p;h++){var o=l[h],_=o[0],C=o[1];n+=_.copyBytesInto(r,n),r[n++]=We.Space,n+=C.copyBytesInto(r,n),r[n++]=We.Newline}return r[n++]=We.GreaterThan,r[n++]=We.GreaterThan,n-i},t.withContext=function(r){return new t(new Map,r)},t.fromMapWithContext=function(r,n){return new t(r,n)},t}(ml),fc=function(e){Ar(t,e);function t(r){var n=e.call(this)||this;return n.dict=r,n}return t.prototype.clone=function(r){throw new au(this.constructor.name,"clone")},t.prototype.getContentsString=function(){throw new au(this.constructor.name,"getContentsString")},t.prototype.getContents=function(){throw new au(this.constructor.name,"getContents")},t.prototype.getContentsSize=function(){throw new au(this.constructor.name,"getContentsSize")},t.prototype.updateDict=function(){var r=this.getContentsSize();this.dict.set(Ge.Length,pn.of(r))},t.prototype.sizeInBytes=function(){return this.updateDict(),this.dict.sizeInBytes()+this.getContentsSize()+18},t.prototype.toString=function(){this.updateDict();var r=this.dict.toString();return r+=`
stream
`,r+=this.getContentsString(),r+=`
endstream`,r},t.prototype.copyBytesInto=function(r,n){this.updateDict();var i=n;n+=this.dict.copyBytesInto(r,n),r[n++]=We.Newline,r[n++]=We.s,r[n++]=We.t,r[n++]=We.r,r[n++]=We.e,r[n++]=We.a,r[n++]=We.m,r[n++]=We.Newline;for(var l=this.getContents(),h=0,p=l.length;h<p;h++)r[n++]=l[h];return r[n++]=We.Newline,r[n++]=We.e,r[n++]=We.n,r[n++]=We.d,r[n++]=We.s,r[n++]=We.t,r[n++]=We.r,r[n++]=We.e,r[n++]=We.a,r[n++]=We.m,n-i},t}(ml),Bb=function(e){Ar(t,e);function t(r,n){var i=e.call(this,r)||this;return i.contents=n,i}return t.prototype.asUint8Array=function(){return this.contents.slice()},t.prototype.clone=function(r){return t.of(this.dict.clone(r),this.contents.slice())},t.prototype.getContentsString=function(){return BY(this.contents)},t.prototype.getContents=function(){return this.contents},t.prototype.getContentsSize=function(){return this.contents.length},t.of=function(r,n){return new t(r,n)},t}(fc),xj={},bj=new Map,Mi=function(e){Ar(t,e);function t(r,n,i){var l=this;if(r!==xj)throw new hU("PDFRef");return l=e.call(this)||this,l.objectNumber=n,l.generationNumber=i,l.tag=n+" "+i+" R",l}return t.prototype.clone=function(){return this},t.prototype.toString=function(){return this.tag},t.prototype.sizeInBytes=function(){return this.tag.length},t.prototype.copyBytesInto=function(r,n){return n+=Ta(this.tag,r,n),this.tag.length},t.of=function(r,n){n===void 0&&(n=0);var i=r+" "+n+" R",l=bj.get(i);return l||(l=new t(xj,r,n),bj.set(i,l)),l},t}(ml),Yn=function(){function e(t,r){this.name=t,this.args=r||[]}return e.prototype.clone=function(t){for(var r=new Array(this.args.length),n=0,i=r.length;n<i;n++){var l=this.args[n];r[n]=l instanceof ml?l.clone(t):l}return e.of(this.name,r)},e.prototype.toString=function(){for(var t="",r=0,n=this.args.length;r<n;r++)t+=String(this.args[r])+" ";return t+=this.name,t},e.prototype.sizeInBytes=function(){for(var t=0,r=0,n=this.args.length;r<n;r++){var i=this.args[r];t+=(i instanceof ml?i.sizeInBytes():i.length)+1}return t+=this.name.length,t},e.prototype.copyBytesInto=function(t,r){for(var n=r,i=0,l=this.args.length;i<l;i++){var h=this.args[i];h instanceof ml?r+=h.copyBytesInto(t,r):r+=Ta(h,t,r),t[r++]=We.Space}return r+=Ta(this.name,t,r),r-n},e.of=function(t,r){return new e(t,r)},e}(),o2;(function(e){e.NonStrokingColor="sc",e.NonStrokingColorN="scn",e.NonStrokingColorRgb="rg",e.NonStrokingColorGray="g",e.NonStrokingColorCmyk="k",e.NonStrokingColorspace="cs",e.StrokingColor="SC",e.StrokingColorN="SCN",e.StrokingColorRgb="RG",e.StrokingColorGray="G",e.StrokingColorCmyk="K",e.StrokingColorspace="CS",e.BeginMarkedContentSequence="BDC",e.BeginMarkedContent="BMC",e.EndMarkedContent="EMC",e.MarkedContentPointWithProps="DP",e.MarkedContentPoint="MP",e.DrawObject="Do",e.ConcatTransformationMatrix="cm",e.PopGraphicsState="Q",e.PushGraphicsState="q",e.SetFlatness="i",e.SetGraphicsStateParams="gs",e.SetLineCapStyle="J",e.SetLineDashPattern="d",e.SetLineJoinStyle="j",e.SetLineMiterLimit="M",e.SetLineWidth="w",e.SetTextMatrix="Tm",e.SetRenderingIntent="ri",e.AppendRectangle="re",e.BeginInlineImage="BI",e.BeginInlineImageData="ID",e.EndInlineImage="EI",e.ClipEvenOdd="W*",e.ClipNonZero="W",e.CloseAndStroke="s",e.CloseFillEvenOddAndStroke="b*",e.CloseFillNonZeroAndStroke="b",e.ClosePath="h",e.AppendBezierCurve="c",e.CurveToReplicateFinalPoint="y",e.CurveToReplicateInitialPoint="v",e.EndPath="n",e.FillEvenOddAndStroke="B*",e.FillEvenOdd="f*",e.FillNonZeroAndStroke="B",e.FillNonZero="f",e.LegacyFillNonZero="F",e.LineTo="l",e.MoveTo="m",e.ShadingFill="sh",e.StrokePath="S",e.BeginText="BT",e.EndText="ET",e.MoveText="Td",e.MoveTextSetLeading="TD",e.NextLine="T*",e.SetCharacterSpacing="Tc",e.SetFontAndSize="Tf",e.SetTextHorizontalScaling="Tz",e.SetTextLineHeight="TL",e.SetTextRenderingMode="Tr",e.SetTextRise="Ts",e.SetWordSpacing="Tw",e.ShowText="Tj",e.ShowTextAdjusted="TJ",e.ShowTextLine="'",e.ShowTextLineAndSpace='"',e.Type3D0="d0",e.Type3D1="d1",e.BeginCompatibilitySection="BX",e.EndCompatibilitySection="EX"})(o2||(o2={}));const li=o2;var pU=function(e){Ar(t,e);function t(r,n){var i=e.call(this,r)||this;return i.computeContents=function(){var l=i.getUnencodedContents();return i.encode?xF.deflate(l):l},i.encode=n,n&&r.set(Ge.of("Filter"),Ge.of("FlateDecode")),i.contentsCache=ed.populatedBy(i.computeContents),i}return t.prototype.getContents=function(){return this.contentsCache.access()},t.prototype.getContentsSize=function(){return this.contentsCache.access().length},t.prototype.getUnencodedContents=function(){throw new au(this.constructor.name,"getUnencodedContents")},t}(fc),Sx=function(e){Ar(t,e);function t(r,n,i){i===void 0&&(i=!0);var l=e.call(this,r,i)||this;return l.operators=n,l}return t.prototype.push=function(){for(var r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];(r=this.operators).push.apply(r,n)},t.prototype.clone=function(r){for(var n=new Array(this.operators.length),i=0,l=this.operators.length;i<l;i++)n[i]=this.operators[i].clone(r);var h=this,p=h.dict,o=h.encode;return t.of(p.clone(r),n,o)},t.prototype.getContentsString=function(){for(var r="",n=0,i=this.operators.length;n<i;n++)r+=this.operators[n]+`
`;return r},t.prototype.getUnencodedContents=function(){for(var r=new Uint8Array(this.getUnencodedContentsSize()),n=0,i=0,l=this.operators.length;i<l;i++)n+=this.operators[i].copyBytesInto(r,n),r[n++]=We.Newline;return r},t.prototype.getUnencodedContentsSize=function(){for(var r=0,n=0,i=this.operators.length;n<i;n++)r+=this.operators[n].sizeInBytes()+1;return r},t.of=function(r,n,i){return i===void 0&&(i=!0),new t(r,n,i)},t}(pU),Xke=function(){function e(t){this.seed=t}return e.prototype.nextInt=function(){var t=Math.sin(this.seed++)*1e4;return t-Math.floor(t)},e.withSeed=function(t){return new e(t)},e}(),Zke=function(e,t){var r=e[0],n=t[0];return r.objectNumber-n.objectNumber},s2=function(){function e(){this.largestObjectNumber=0,this.header=BF.forVersion(1,7),this.trailerInfo={},this.indirectObjects=new Map,this.rng=Xke.withSeed(1)}return e.prototype.assign=function(t,r){this.indirectObjects.set(t,r),t.objectNumber>this.largestObjectNumber&&(this.largestObjectNumber=t.objectNumber)},e.prototype.nextRef=function(){return this.largestObjectNumber+=1,Mi.of(this.largestObjectNumber)},e.prototype.register=function(t){var r=this.nextRef();return this.assign(r,t),r},e.prototype.delete=function(t){return this.indirectObjects.delete(t)},e.prototype.lookupMaybe=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=r.includes(Dl),l=t instanceof Mi?this.indirectObjects.get(t):t;if(!(!l||l===Dl&&!i)){for(var h=0,p=r.length;h<p;h++){var o=r[h];if(o===Dl){if(l===Dl)return l}else if(l instanceof o)return l}throw new RT(r,l)}},e.prototype.lookup=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=t instanceof Mi?this.indirectObjects.get(t):t;if(r.length===0)return i;for(var l=0,h=r.length;l<h;l++){var p=r[l];if(p===Dl){if(i===Dl)return i}else if(i instanceof p)return i}throw new RT(r,i)},e.prototype.getObjectRef=function(t){for(var r=Array.from(this.indirectObjects.entries()),n=0,i=r.length;n<i;n++){var l=r[n],h=l[0],p=l[1];if(p===t)return h}},e.prototype.enumerateIndirectObjects=function(){return Array.from(this.indirectObjects.entries()).sort(Zke)},e.prototype.obj=function(t){if(t instanceof ml)return t;if(t==null)return Dl;if(typeof t=="string")return Ge.of(t);if(typeof t=="number")return pn.of(t);if(typeof t=="boolean")return t?wb.True:wb.False;if(Array.isArray(t)){for(var r=mi.withContext(this),n=0,i=t.length;n<i;n++)r.push(this.obj(t[n]));return r}else{for(var l=Sn.withContext(this),h=Object.keys(t),n=0,i=h.length;n<i;n++){var p=h[n],o=t[p];o!==void 0&&l.set(Ge.of(p),this.obj(o))}return l}},e.prototype.stream=function(t,r){return r===void 0&&(r={}),Bb.of(this.obj(r),XD(t))},e.prototype.flateStream=function(t,r){return r===void 0&&(r={}),this.stream(xF.deflate(XD(t)),bn(bn({},r),{Filter:"FlateDecode"}))},e.prototype.contentStream=function(t,r){return r===void 0&&(r={}),Sx.of(this.obj(r),t)},e.prototype.formXObject=function(t,r){return r===void 0&&(r={}),this.contentStream(t,bn(bn({BBox:this.obj([0,0,0,0]),Matrix:this.obj([1,0,0,1,0,0])},r),{Type:"XObject",Subtype:"Form"}))},e.prototype.getPushGraphicsStateContentStream=function(){if(this.pushGraphicsStateContentStreamRef)return this.pushGraphicsStateContentStreamRef;var t=this.obj({}),r=Yn.of(li.PushGraphicsState),n=Sx.of(t,[r]);return this.pushGraphicsStateContentStreamRef=this.register(n),this.pushGraphicsStateContentStreamRef},e.prototype.getPopGraphicsStateContentStream=function(){if(this.popGraphicsStateContentStreamRef)return this.popGraphicsStateContentStreamRef;var t=this.obj({}),r=Yn.of(li.PopGraphicsState),n=Sx.of(t,[r]);return this.popGraphicsStateContentStreamRef=this.register(n),this.popGraphicsStateContentStreamRef},e.prototype.addRandomSuffix=function(t,r){return r===void 0&&(r=4),t+"-"+Math.floor(this.rng.nextInt()*Math.pow(10,r))},e.create=function(){return new e},e}(),td=function(e){Ar(t,e);function t(r,n,i){i===void 0&&(i=!0);var l=e.call(this,r,n)||this;return l.normalized=!1,l.autoNormalizeCTM=i,l}return t.prototype.clone=function(r){for(var n=t.fromMapWithContext(new Map,r||this.context,this.autoNormalizeCTM),i=this.entries(),l=0,h=i.length;l<h;l++){var p=i[l],o=p[0],_=p[1];n.set(o,_)}return n},t.prototype.Parent=function(){return this.lookupMaybe(Ge.Parent,Sn)},t.prototype.Contents=function(){return this.lookup(Ge.of("Contents"))},t.prototype.Annots=function(){return this.lookupMaybe(Ge.Annots,mi)},t.prototype.BleedBox=function(){return this.lookupMaybe(Ge.BleedBox,mi)},t.prototype.TrimBox=function(){return this.lookupMaybe(Ge.TrimBox,mi)},t.prototype.ArtBox=function(){return this.lookupMaybe(Ge.ArtBox,mi)},t.prototype.Resources=function(){var r=this.getInheritableAttribute(Ge.Resources);return this.context.lookupMaybe(r,Sn)},t.prototype.MediaBox=function(){var r=this.getInheritableAttribute(Ge.MediaBox);return this.context.lookup(r,mi)},t.prototype.CropBox=function(){var r=this.getInheritableAttribute(Ge.CropBox);return this.context.lookupMaybe(r,mi)},t.prototype.Rotate=function(){var r=this.getInheritableAttribute(Ge.Rotate);return this.context.lookupMaybe(r,pn)},t.prototype.getInheritableAttribute=function(r){var n;return this.ascend(function(i){n||(n=i.get(r))}),n},t.prototype.setParent=function(r){this.set(Ge.Parent,r)},t.prototype.addContentStream=function(r){var n=this.normalizedEntries().Contents||this.context.obj([]);this.set(Ge.Contents,n),n.push(r)},t.prototype.wrapContentStreams=function(r,n){var i=this.Contents();return i instanceof mi?(i.insert(0,r),i.push(n),!0):!1},t.prototype.addAnnot=function(r){var n=this.normalizedEntries().Annots;n.push(r)},t.prototype.removeAnnot=function(r){var n=this.normalizedEntries().Annots,i=n.indexOf(r);i!==void 0&&n.remove(i)},t.prototype.setFontDictionary=function(r,n){var i=this.normalizedEntries().Font;i.set(r,n)},t.prototype.newFontDictionaryKey=function(r){var n=this.normalizedEntries().Font;return n.uniqueKey(r)},t.prototype.newFontDictionary=function(r,n){var i=this.newFontDictionaryKey(r);return this.setFontDictionary(i,n),i},t.prototype.setXObject=function(r,n){var i=this.normalizedEntries().XObject;i.set(r,n)},t.prototype.newXObjectKey=function(r){var n=this.normalizedEntries().XObject;return n.uniqueKey(r)},t.prototype.newXObject=function(r,n){var i=this.newXObjectKey(r);return this.setXObject(i,n),i},t.prototype.setExtGState=function(r,n){var i=this.normalizedEntries().ExtGState;i.set(r,n)},t.prototype.newExtGStateKey=function(r){var n=this.normalizedEntries().ExtGState;return n.uniqueKey(r)},t.prototype.newExtGState=function(r,n){var i=this.newExtGStateKey(r);return this.setExtGState(i,n),i},t.prototype.ascend=function(r){r(this);var n=this.Parent();n&&n.ascend(r)},t.prototype.normalize=function(){if(!this.normalized){var r=this.context,n=this.get(Ge.Contents),i=this.context.lookup(n);i instanceof fc&&this.set(Ge.Contents,r.obj([n])),this.autoNormalizeCTM&&this.wrapContentStreams(this.context.getPushGraphicsStateContentStream(),this.context.getPopGraphicsStateContentStream());var l=this.getInheritableAttribute(Ge.Resources),h=r.lookupMaybe(l,Sn)||r.obj({});this.set(Ge.Resources,h);var p=h.lookupMaybe(Ge.Font,Sn)||r.obj({});h.set(Ge.Font,p);var o=h.lookupMaybe(Ge.XObject,Sn)||r.obj({});h.set(Ge.XObject,o);var _=h.lookupMaybe(Ge.ExtGState,Sn)||r.obj({});h.set(Ge.ExtGState,_);var C=this.Annots()||r.obj([]);this.set(Ge.Annots,C),this.normalized=!0}},t.prototype.normalizedEntries=function(){this.normalize();var r=this.Annots(),n=this.Resources(),i=this.Contents();return{Annots:r,Resources:n,Contents:i,Font:n.lookup(Ge.Font,Sn),XObject:n.lookup(Ge.XObject,Sn),ExtGState:n.lookup(Ge.ExtGState,Sn)}},t.InheritableEntries=["Resources","MediaBox","CropBox","Rotate"],t.withContextAndParent=function(r,n){var i=new Map;return i.set(Ge.Type,Ge.Page),i.set(Ge.Parent,n),i.set(Ge.Resources,r.obj({})),i.set(Ge.MediaBox,r.obj([0,0,612,792])),new t(i,r,!1)},t.fromMapWithContext=function(r,n,i){return i===void 0&&(i=!0),new t(r,n,i)},t}(Sn),wj=function(){function e(t,r){var n=this;this.traversedObjects=new Map,this.copy=function(i){return i instanceof td?n.copyPDFPage(i):i instanceof Sn?n.copyPDFDict(i):i instanceof mi?n.copyPDFArray(i):i instanceof fc?n.copyPDFStream(i):i instanceof Mi?n.copyPDFIndirectObject(i):i.clone()},this.copyPDFPage=function(i){for(var l=i.clone(),h=td.InheritableEntries,p=0,o=h.length;p<o;p++){var _=Ge.of(h[p]),C=l.getInheritableAttribute(_);!l.get(_)&&C&&l.set(_,C)}return l.delete(Ge.of("Parent")),n.copyPDFDict(l)},this.copyPDFDict=function(i){if(n.traversedObjects.has(i))return n.traversedObjects.get(i);var l=i.clone(n.dest);n.traversedObjects.set(i,l);for(var h=i.entries(),p=0,o=h.length;p<o;p++){var _=h[p],C=_[0],M=_[1];l.set(C,n.copy(M))}return l},this.copyPDFArray=function(i){if(n.traversedObjects.has(i))return n.traversedObjects.get(i);var l=i.clone(n.dest);n.traversedObjects.set(i,l);for(var h=0,p=i.size();h<p;h++){var o=i.get(h);l.set(h,n.copy(o))}return l},this.copyPDFStream=function(i){if(n.traversedObjects.has(i))return n.traversedObjects.get(i);var l=i.clone(n.dest);n.traversedObjects.set(i,l);for(var h=i.dict.entries(),p=0,o=h.length;p<o;p++){var _=h[p],C=_[0],M=_[1];l.dict.set(C,n.copy(M))}return l},this.copyPDFIndirectObject=function(i){var l=n.traversedObjects.has(i);if(!l){var h=n.dest.nextRef();n.traversedObjects.set(i,h);var p=n.src.lookup(i);if(p){var o=n.copy(p);n.dest.assign(h,o)}}return n.traversedObjects.get(i)},this.src=t,this.dest=r}return e.for=function(t,r){return new e(t,r)},e}(),wJ=function(){function e(t){this.subsections=t?[[t]]:[],this.chunkIdx=0,this.chunkLength=t?1:0}return e.prototype.addEntry=function(t,r){this.append({ref:t,offset:r,deleted:!1})},e.prototype.addDeletedEntry=function(t,r){this.append({ref:t,offset:r,deleted:!0})},e.prototype.toString=function(){for(var t=`xref
`,r=0,n=this.subsections.length;r<n;r++){var i=this.subsections[r];t+=i[0].ref.objectNumber+" "+i.length+`
`;for(var l=0,h=i.length;l<h;l++){var p=i[l];t+=Ju(String(p.offset),10,"0"),t+=" ",t+=Ju(String(p.ref.generationNumber),5,"0"),t+=" ",t+=p.deleted?"f":"n",t+=` 
`}}return t},e.prototype.sizeInBytes=function(){for(var t=5,r=0,n=this.subsections.length;r<n;r++){var i=this.subsections[r],l=i.length,h=i[0];t+=2,t+=String(h.ref.objectNumber).length,t+=String(l).length,t+=20*l}return t},e.prototype.copyBytesInto=function(t,r){var n=r;return t[r++]=We.x,t[r++]=We.r,t[r++]=We.e,t[r++]=We.f,t[r++]=We.Newline,r+=this.copySubsectionsIntoBuffer(this.subsections,t,r),r-n},e.prototype.copySubsectionsIntoBuffer=function(t,r,n){for(var i=n,l=t.length,h=0;h<l;h++){var p=this.subsections[h],o=String(p[0].ref.objectNumber);n+=Ta(o,r,n),r[n++]=We.Space;var _=String(p.length);n+=Ta(_,r,n),r[n++]=We.Newline,n+=this.copyEntriesIntoBuffer(p,r,n)}return n-i},e.prototype.copyEntriesIntoBuffer=function(t,r,n){for(var i=t.length,l=0;l<i;l++){var h=t[l],p=Ju(String(h.offset),10,"0");n+=Ta(p,r,n),r[n++]=We.Space;var o=Ju(String(h.ref.generationNumber),5,"0");n+=Ta(o,r,n),r[n++]=We.Space,r[n++]=h.deleted?We.f:We.n,r[n++]=We.Space,r[n++]=We.Newline}return 20*i},e.prototype.append=function(t){if(this.chunkLength===0){this.subsections.push([t]),this.chunkIdx=0,this.chunkLength=1;return}var r=this.subsections[this.chunkIdx],n=r[this.chunkLength-1];t.ref.objectNumber-n.ref.objectNumber>1?(this.subsections.push([t]),this.chunkIdx+=1,this.chunkLength=1):(r.push(t),this.chunkLength+=1)},e.create=function(){return new e({ref:Mi.of(0,65535),offset:0,deleted:!0})},e.createEmpty=function(){return new e},e}(),mU=function(){function e(t){this.lastXRefOffset=String(t)}return e.prototype.toString=function(){return`startxref
`+this.lastXRefOffset+`
%%EOF`},e.prototype.sizeInBytes=function(){return 16+this.lastXRefOffset.length},e.prototype.copyBytesInto=function(t,r){var n=r;return t[r++]=We.s,t[r++]=We.t,t[r++]=We.a,t[r++]=We.r,t[r++]=We.t,t[r++]=We.x,t[r++]=We.r,t[r++]=We.e,t[r++]=We.f,t[r++]=We.Newline,r+=Ta(this.lastXRefOffset,t,r),t[r++]=We.Newline,t[r++]=We.Percent,t[r++]=We.Percent,t[r++]=We.E,t[r++]=We.O,t[r++]=We.F,r-n},e.forLastCrossRefSectionOffset=function(t){return new e(t)},e}(),Yke=function(){function e(t){this.dict=t}return e.prototype.toString=function(){return`trailer
`+this.dict.toString()},e.prototype.sizeInBytes=function(){return 8+this.dict.sizeInBytes()},e.prototype.copyBytesInto=function(t,r){var n=r;return t[r++]=We.t,t[r++]=We.r,t[r++]=We.a,t[r++]=We.i,t[r++]=We.l,t[r++]=We.e,t[r++]=We.r,t[r++]=We.Newline,r+=this.dict.copyBytesInto(t,r),r-n},e.of=function(t){return new e(t)},e}(),BJ=function(e){Ar(t,e);function t(r,n,i){i===void 0&&(i=!0);var l=e.call(this,r.obj({}),i)||this;return l.objects=n,l.offsets=l.computeObjectOffsets(),l.offsetsString=l.computeOffsetsString(),l.dict.set(Ge.of("Type"),Ge.of("ObjStm")),l.dict.set(Ge.of("N"),pn.of(l.objects.length)),l.dict.set(Ge.of("First"),pn.of(l.offsetsString.length)),l}return t.prototype.getObjectsCount=function(){return this.objects.length},t.prototype.clone=function(r){return t.withContextAndObjects(r||this.dict.context,this.objects.slice(),this.encode)},t.prototype.getContentsString=function(){for(var r=this.offsetsString,n=0,i=this.objects.length;n<i;n++){var l=this.objects[n],h=l[1];r+=h+`
`}return r},t.prototype.getUnencodedContents=function(){for(var r=new Uint8Array(this.getUnencodedContentsSize()),n=Ta(this.offsetsString,r,0),i=0,l=this.objects.length;i<l;i++){var h=this.objects[i],p=h[1];n+=p.copyBytesInto(r,n),r[n++]=We.Newline}return r},t.prototype.getUnencodedContentsSize=function(){return this.offsetsString.length+FT(this.offsets)[1]+FT(this.objects)[1].sizeInBytes()+1},t.prototype.computeOffsetsString=function(){for(var r="",n=0,i=this.offsets.length;n<i;n++){var l=this.offsets[n],h=l[0],p=l[1];r+=h+" "+p+" "}return r},t.prototype.computeObjectOffsets=function(){for(var r=0,n=new Array(this.objects.length),i=0,l=this.objects.length;i<l;i++){var h=this.objects[i],p=h[0],o=h[1];n[i]=[p.objectNumber,r],r+=o.sizeInBytes()+1}return n},t.withContextAndObjects=function(r,n,i){return i===void 0&&(i=!0),new t(r,n,i)},t}(pU),CJ=function(){function e(t,r){var n=this;this.parsedObjects=0,this.shouldWaitForTick=function(i){return n.parsedObjects+=i,n.parsedObjects%n.objectsPerTick===0},this.context=t,this.objectsPerTick=r}return e.prototype.serializeToBuffer=function(){return Tn(this,void 0,void 0,function(){var t,r,n,i,l,h,p,o,_,C,M,L,z,j,K,$,q;return In(this,function(ee){switch(ee.label){case 0:return[4,this.computeBufferSize()];case 1:t=ee.sent(),r=t.size,n=t.header,i=t.indirectObjects,l=t.xref,h=t.trailerDict,p=t.trailer,o=0,_=new Uint8Array(r),o+=n.copyBytesInto(_,o),_[o++]=We.Newline,_[o++]=We.Newline,C=0,M=i.length,ee.label=2;case 2:return C<M?(L=i[C],z=L[0],j=L[1],K=String(z.objectNumber),o+=Ta(K,_,o),_[o++]=We.Space,$=String(z.generationNumber),o+=Ta($,_,o),_[o++]=We.Space,_[o++]=We.o,_[o++]=We.b,_[o++]=We.j,_[o++]=We.Newline,o+=j.copyBytesInto(_,o),_[o++]=We.Newline,_[o++]=We.e,_[o++]=We.n,_[o++]=We.d,_[o++]=We.o,_[o++]=We.b,_[o++]=We.j,_[o++]=We.Newline,_[o++]=We.Newline,q=j instanceof BJ?j.getObjectsCount():1,this.shouldWaitForTick(q)?[4,Hy()]:[3,4]):[3,5];case 3:ee.sent(),ee.label=4;case 4:return C++,[3,2];case 5:return l&&(o+=l.copyBytesInto(_,o),_[o++]=We.Newline),h&&(o+=h.copyBytesInto(_,o),_[o++]=We.Newline,_[o++]=We.Newline),o+=p.copyBytesInto(_,o),[2,_]}})})},e.prototype.computeIndirectObjectSize=function(t){var r=t[0],n=t[1],i=r.sizeInBytes()+3,l=n.sizeInBytes()+9;return i+l},e.prototype.createTrailerDict=function(){return this.context.obj({Size:this.context.largestObjectNumber+1,Root:this.context.trailerInfo.Root,Encrypt:this.context.trailerInfo.Encrypt,Info:this.context.trailerInfo.Info,ID:this.context.trailerInfo.ID})},e.prototype.computeBufferSize=function(){return Tn(this,void 0,void 0,function(){var t,r,n,i,l,h,p,o,_,C,M;return In(this,function(L){switch(L.label){case 0:t=BF.forVersion(1,7),r=t.sizeInBytes()+2,n=wJ.create(),i=this.context.enumerateIndirectObjects(),l=0,h=i.length,L.label=1;case 1:return l<h?(p=i[l],o=p[0],n.addEntry(o,r),r+=this.computeIndirectObjectSize(p),this.shouldWaitForTick(1)?[4,Hy()]:[3,3]):[3,4];case 2:L.sent(),L.label=3;case 3:return l++,[3,1];case 4:return _=r,r+=n.sizeInBytes()+1,C=Yke.of(this.createTrailerDict()),r+=C.sizeInBytes()+2,M=mU.forLastCrossRefSectionOffset(_),r+=M.sizeInBytes(),[2,{size:r,header:t,indirectObjects:i,xref:n,trailerDict:C,trailer:M}]}})})},e.forContext=function(t,r){return new e(t,r)},e}(),SJ=function(e){Ar(t,e);function t(r){var n=e.call(this)||this;return n.data=r,n}return t.prototype.clone=function(){return t.of(this.data.slice())},t.prototype.toString=function(){return"PDFInvalidObject("+this.data.length+" bytes)"},t.prototype.sizeInBytes=function(){return this.data.length},t.prototype.copyBytesInto=function(r,n){for(var i=this.data.length,l=0;l<i;l++)r[n++]=this.data[l];return i},t.of=function(r){return new t(r)},t}(ml),pf;(function(e){e[e.Deleted=0]="Deleted",e[e.Uncompressed=1]="Uncompressed",e[e.Compressed=2]="Compressed"})(pf||(pf={}));var Jke=function(e){Ar(t,e);function t(r,n,i){i===void 0&&(i=!0);var l=e.call(this,r,i)||this;return l.computeIndex=function(){for(var h=[],p=0,o=0,_=l.entries.length;o<_;o++){var C=l.entries[o],M=l.entries[o-1];o===0?h.push(C.ref.objectNumber):C.ref.objectNumber-M.ref.objectNumber>1&&(h.push(p),h.push(C.ref.objectNumber),p=0),p+=1}return h.push(p),h},l.computeEntryTuples=function(){for(var h=new Array(l.entries.length),p=0,o=l.entries.length;p<o;p++){var _=l.entries[p];if(_.type===pf.Deleted){var C=_.type,M=_.nextFreeObjectNumber,L=_.ref;h[p]=[C,M,L.generationNumber]}if(_.type===pf.Uncompressed){var C=_.type,z=_.offset,L=_.ref;h[p]=[C,z,L.generationNumber]}if(_.type===pf.Compressed){var C=_.type,j=_.objectStreamRef,K=_.index;h[p]=[C,j.objectNumber,K]}}return h},l.computeMaxEntryByteWidths=function(){for(var h=l.entryTuplesCache.access(),p=[0,0,0],o=0,_=h.length;o<_;o++){var C=h[o],M=C[0],L=C[1],z=C[2],j=uE(M),K=uE(L),$=uE(z);j>p[0]&&(p[0]=j),K>p[1]&&(p[1]=K),$>p[2]&&(p[2]=$)}return p},l.entries=n||[],l.entryTuplesCache=ed.populatedBy(l.computeEntryTuples),l.maxByteWidthsCache=ed.populatedBy(l.computeMaxEntryByteWidths),l.indexCache=ed.populatedBy(l.computeIndex),r.set(Ge.of("Type"),Ge.of("XRef")),l}return t.prototype.addDeletedEntry=function(r,n){var i=pf.Deleted;this.entries.push({type:i,ref:r,nextFreeObjectNumber:n}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},t.prototype.addUncompressedEntry=function(r,n){var i=pf.Uncompressed;this.entries.push({type:i,ref:r,offset:n}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},t.prototype.addCompressedEntry=function(r,n,i){var l=pf.Compressed;this.entries.push({type:l,ref:r,objectStreamRef:n,index:i}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},t.prototype.clone=function(r){var n=this,i=n.dict,l=n.entries,h=n.encode;return t.of(i.clone(r),l.slice(),h)},t.prototype.getContentsString=function(){for(var r=this.entryTuplesCache.access(),n=this.maxByteWidthsCache.access(),i="",l=0,h=r.length;l<h;l++){for(var p=r[l],o=p[0],_=p[1],C=p[2],M=w0(B0(o)),L=w0(B0(_)),z=w0(B0(C)),j=n[0]-1;j>=0;j--)i+=(M[j]||0).toString(2);for(var j=n[1]-1;j>=0;j--)i+=(L[j]||0).toString(2);for(var j=n[2]-1;j>=0;j--)i+=(z[j]||0).toString(2)}return i},t.prototype.getUnencodedContents=function(){for(var r=this.entryTuplesCache.access(),n=this.maxByteWidthsCache.access(),i=new Uint8Array(this.getUnencodedContentsSize()),l=0,h=0,p=r.length;h<p;h++){for(var o=r[h],_=o[0],C=o[1],M=o[2],L=w0(B0(_)),z=w0(B0(C)),j=w0(B0(M)),K=n[0]-1;K>=0;K--)i[l++]=L[K]||0;for(var K=n[1]-1;K>=0;K--)i[l++]=z[K]||0;for(var K=n[2]-1;K>=0;K--)i[l++]=j[K]||0}return i},t.prototype.getUnencodedContentsSize=function(){var r=this.maxByteWidthsCache.access(),n=JPe(r);return n*this.entries.length},t.prototype.updateDict=function(){e.prototype.updateDict.call(this);var r=this.maxByteWidthsCache.access(),n=this.indexCache.access(),i=this.dict.context;this.dict.set(Ge.of("W"),i.obj(r)),this.dict.set(Ge.of("Index"),i.obj(n))},t.create=function(r,n){n===void 0&&(n=!0);var i=new t(r,[],n);return i.addDeletedEntry(Mi.of(0,65535),0),i},t.of=function(r,n,i){return i===void 0&&(i=!0),new t(r,n,i)},t}(pU),$ke=function(e){Ar(t,e);function t(r,n,i,l){var h=e.call(this,r,n)||this;return h.encodeStreams=i,h.objectsPerStream=l,h}return t.prototype.computeBufferSize=function(){return Tn(this,void 0,void 0,function(){var r,n,i,l,h,p,o,_,j,K,C,q,M,L,$,z,j,K,$,q,ee,ie,fe,me;return In(this,function(ye){switch(ye.label){case 0:r=this.context.largestObjectNumber+1,n=BF.forVersion(1,7),i=n.sizeInBytes()+2,l=Jke.create(this.createTrailerDict(),this.encodeStreams),h=[],p=[],o=[],_=this.context.enumerateIndirectObjects(),j=0,K=_.length,ye.label=1;case 1:return j<K?(C=_[j],q=C[0],M=C[1],L=q===this.context.trailerInfo.Encrypt||M instanceof fc||M instanceof SJ||q.generationNumber!==0,L?(h.push(C),l.addUncompressedEntry(q,i),i+=this.computeIndirectObjectSize(C),this.shouldWaitForTick(1)?[4,Hy()]:[3,3]):[3,4]):[3,6];case 2:ye.sent(),ye.label=3;case 3:return[3,5];case 4:$=FT(p),z=FT(o),(!$||$.length%this.objectsPerStream===0)&&($=[],p.push($),z=Mi.of(r++),o.push(z)),l.addCompressedEntry(q,z,$.length),$.push(C),ye.label=5;case 5:return j++,[3,1];case 6:j=0,K=p.length,ye.label=7;case 7:return j<K?($=p[j],q=o[j],ee=BJ.withContextAndObjects(this.context,$,this.encodeStreams),l.addUncompressedEntry(q,i),i+=this.computeIndirectObjectSize([q,ee]),h.push([q,ee]),this.shouldWaitForTick($.length)?[4,Hy()]:[3,9]):[3,10];case 8:ye.sent(),ye.label=9;case 9:return j++,[3,7];case 10:return ie=Mi.of(r++),l.dict.set(Ge.of("Size"),pn.of(r)),l.addUncompressedEntry(ie,i),fe=i,i+=this.computeIndirectObjectSize([ie,l]),h.push([ie,l]),me=mU.forLastCrossRefSectionOffset(fe),i+=me.sizeInBytes(),[2,{size:i,header:n,indirectObjects:h,trailer:me}]}})})},t.forContext=function(r,n,i,l){return i===void 0&&(i=!0),l===void 0&&(l=50),new t(r,n,i,l)},t}(CJ),cn=function(e){Ar(t,e);function t(r){var n=e.call(this)||this;return n.value=r,n}return t.prototype.asBytes=function(){for(var r=this.value+(this.value.length%2===1?"0":""),n=r.length,i=new Uint8Array(r.length/2),l=0,h=0;l<n;){var p=parseInt(r.substring(l,l+2),16);i[h]=p,l+=2,h+=1}return i},t.prototype.decodeText=function(){var r=this.asBytes();return FY(r)?EY(r):xJ(r)},t.prototype.decodeDate=function(){var r=this.decodeText(),n=wY(r);if(!n)throw new bJ(r);return n},t.prototype.asString=function(){return this.value},t.prototype.clone=function(){return t.of(this.value)},t.prototype.toString=function(){return"<"+this.value+">"},t.prototype.sizeInBytes=function(){return this.value.length+2},t.prototype.copyBytesInto=function(r,n){return r[n++]=We.LessThan,n+=Ta(this.value,r,n),r[n++]=We.GreaterThan,this.value.length+2},t.of=function(r){return new t(r)},t.fromText=function(r){for(var n=rMe(r),i="",l=0,h=n.length;l<h;l++)i+=nw(n[l],4);return new t(i)},t}(ml),DT=function(){function e(t,r){this.encoding=t===bb.ZapfDingbats?fS.ZapfDingbats:t===bb.Symbol?fS.Symbol:fS.WinAnsi,this.font=yke.load(t),this.fontName=this.font.FontName,this.customName=r}return e.prototype.encodeText=function(t){for(var r=this.encodeTextAsGlyphs(t),n=new Array(r.length),i=0,l=r.length;i<l;i++)n[i]=gF(r[i].code);return cn.of(n.join(""))},e.prototype.widthOfTextAtSize=function(t,r){for(var n=this.encodeTextAsGlyphs(t),i=0,l=0,h=n.length;l<h;l++){var p=n[l].name,o=(n[l+1]||{}).name,_=this.font.getXAxisKerningForPair(p,o)||0;i+=this.widthOfGlyph(p)+_}var C=r/1e3;return i*C},e.prototype.heightOfFontAtSize=function(t,r){r===void 0&&(r={});var n=r.descender,i=n===void 0?!0:n,l=this.font,h=l.Ascender,p=l.Descender,o=l.FontBBox,_=h||o[3],C=p||o[1],M=_-C;return i||(M+=p||0),M/1e3*t},e.prototype.sizeOfFontAtHeight=function(t){var r=this.font,n=r.Ascender,i=r.Descender,l=r.FontBBox,h=n||l[3],p=i||l[1];return 1e3*t/(h-p)},e.prototype.embedIntoContext=function(t,r){var n=t.obj({Type:"Font",Subtype:"Type1",BaseFont:this.customName||this.fontName,Encoding:this.encoding===fS.WinAnsi?"WinAnsiEncoding":void 0});return r?(t.assign(r,n),r):t.register(n)},e.prototype.widthOfGlyph=function(t){return this.font.getWidthOfGlyph(t)||250},e.prototype.encodeTextAsGlyphs=function(t){for(var r=Array.from(t),n=new Array(r.length),i=0,l=r.length;i<l;i++){var h=VPe(r[i]);n[i]=this.encoding.encodeUnicodeCodePoint(h)}return n},e.for=function(t,r){return new e(t,r)},e}(),e4e=function(e,t){for(var r=new Array(e.length),n=0,i=e.length;n<i;n++){var l=e[n],h=Bj(mE(t(l))),p=Bj.apply(void 0,l.codePoints.map(r4e));r[n]=[h,p]}return t4e(r)},t4e=function(e){return`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange
`+e.length+` beginbfchar
`+e.map(function(t){var r=t[0],n=t[1];return r+" "+n}).join(`
`)+`
endbfchar
endcmap
CMapName currentdict /CMap defineresource pop
end
end`},Bj=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"<"+e.join("")+">"},mE=function(e){return nw(e,4)},r4e=function(e){if(nMe(e))return mE(e);if(iMe(e)){var t=CY(e),r=SY(e);return""+mE(t)+mE(r)}var n=gF(e),i="0x"+n+" is not a valid UTF-8 or UTF-16 codepoint.";throw new Error(i)},n4e=function(e){var t=0,r=function(n){t|=1<<n-1};return e.fixedPitch&&r(1),e.serif&&r(2),r(3),e.script&&r(4),e.nonsymbolic&&r(6),e.italic&&r(7),e.allCap&&r(17),e.smallCap&&r(18),e.forceBold&&r(19),t},i4e=function(e){var t=e["OS/2"]?e["OS/2"].sFamilyClass:0,r=n4e({fixedPitch:e.post.isFixedPitch,serif:1<=t&&t<=7,symbolic:!0,script:t===10,italic:e.head.macStyle.italic});return r},Pi=function(e){Ar(t,e);function t(r){var n=e.call(this)||this;return n.value=r,n}return t.prototype.asBytes=function(){for(var r=[],n="",i=!1,l=function(M){M!==void 0&&r.push(M),i=!1},h=0,p=this.value.length;h<p;h++){var o=this.value[h],_=_n(o),C=this.value[h+1];i?_===We.Newline||_===We.CarriageReturn?l():_===We.n?l(We.Newline):_===We.r?l(We.CarriageReturn):_===We.t?l(We.Tab):_===We.b?l(We.Backspace):_===We.f?l(We.FormFeed):_===We.LeftParen?l(We.LeftParen):_===We.RightParen?l(We.RightParen):_===We.Backspace?l(We.BackSlash):_>=We.Zero&&_<=We.Seven?(n+=o,(n.length===3||!(C>="0"&&C<="7"))&&(l(parseInt(n,8)),n="")):l(_):_===We.BackSlash?i=!0:l(_)}return new Uint8Array(r)},t.prototype.decodeText=function(){var r=this.asBytes();return FY(r)?EY(r):xJ(r)},t.prototype.decodeDate=function(){var r=this.decodeText(),n=wY(r);if(!n)throw new bJ(r);return n},t.prototype.asString=function(){return this.value},t.prototype.clone=function(){return t.of(this.value)},t.prototype.toString=function(){return"("+this.value+")"},t.prototype.sizeInBytes=function(){return this.value.length+2},t.prototype.copyBytesInto=function(r,n){return r[n++]=We.LeftParen,n+=Ta(this.value,r,n),r[n++]=We.RightParen,this.value.length+2},t.of=function(r){return new t(r)},t.fromDate=function(r){var n=Ju(String(r.getUTCFullYear()),4,"0"),i=Ju(String(r.getUTCMonth()+1),2,"0"),l=Ju(String(r.getUTCDate()),2,"0"),h=Ju(String(r.getUTCHours()),2,"0"),p=Ju(String(r.getUTCMinutes()),2,"0"),o=Ju(String(r.getUTCSeconds()),2,"0");return new t("D:"+n+i+l+h+p+o+"Z")},t}(ml),gU=function(){function e(t,r,n,i){var l=this;this.allGlyphsInFontSortedById=function(){for(var h=new Array(l.font.characterSet.length),p=0,o=h.length;p<o;p++){var _=l.font.characterSet[p];h[p]=l.font.glyphForCodePoint(_)}return YPe(h.sort(ZPe),function(C){return C.id})},this.font=t,this.scale=1e3/this.font.unitsPerEm,this.fontData=r,this.fontName=this.font.postscriptName||"Font",this.customName=n,this.fontFeatures=i,this.baseFontName="",this.glyphCache=ed.populatedBy(this.allGlyphsInFontSortedById)}return e.for=function(t,r,n,i){return Tn(this,void 0,void 0,function(){var l;return In(this,function(h){switch(h.label){case 0:return[4,t.create(r)];case 1:return l=h.sent(),[2,new e(l,r,n,i)]}})})},e.prototype.encodeText=function(t){for(var r=this.font.layout(t,this.fontFeatures).glyphs,n=new Array(r.length),i=0,l=r.length;i<l;i++)n[i]=nw(r[i].id,4);return cn.of(n.join(""))},e.prototype.widthOfTextAtSize=function(t,r){for(var n=this.font.layout(t,this.fontFeatures).glyphs,i=0,l=0,h=n.length;l<h;l++)i+=n[l].advanceWidth*this.scale;var p=r/1e3;return i*p},e.prototype.heightOfFontAtSize=function(t,r){r===void 0&&(r={});var n=r.descender,i=n===void 0?!0:n,l=this.font,h=l.ascent,p=l.descent,o=l.bbox,_=(h||o.maxY)*this.scale,C=(p||o.minY)*this.scale,M=_-C;return i||(M-=Math.abs(p)||0),M/1e3*t},e.prototype.sizeOfFontAtHeight=function(t){var r=this.font,n=r.ascent,i=r.descent,l=r.bbox,h=(n||l.maxY)*this.scale,p=(i||l.minY)*this.scale;return 1e3*t/(h-p)},e.prototype.embedIntoContext=function(t,r){return this.baseFontName=this.customName||t.addRandomSuffix(this.fontName),this.embedFontDict(t,r)},e.prototype.embedFontDict=function(t,r){return Tn(this,void 0,void 0,function(){var n,i,l;return In(this,function(h){switch(h.label){case 0:return[4,this.embedCIDFontDict(t)];case 1:return n=h.sent(),i=this.embedUnicodeCmap(t),l=t.obj({Type:"Font",Subtype:"Type0",BaseFont:this.baseFontName,Encoding:"Identity-H",DescendantFonts:[n],ToUnicode:i}),r?(t.assign(r,l),[2,r]):[2,t.register(l)]}})})},e.prototype.isCFF=function(){return this.font.cff},e.prototype.embedCIDFontDict=function(t){return Tn(this,void 0,void 0,function(){var r,n;return In(this,function(i){switch(i.label){case 0:return[4,this.embedFontDescriptor(t)];case 1:return r=i.sent(),n=t.obj({Type:"Font",Subtype:this.isCFF()?"CIDFontType0":"CIDFontType2",CIDToGIDMap:"Identity",BaseFont:this.baseFontName,CIDSystemInfo:{Registry:Pi.of("Adobe"),Ordering:Pi.of("Identity"),Supplement:0},FontDescriptor:r,W:this.computeWidths()}),[2,t.register(n)]}})})},e.prototype.embedFontDescriptor=function(t){return Tn(this,void 0,void 0,function(){var r,n,i,l,h,p,o,_,C,M,L,z,j,K,$;return In(this,function(q){switch(q.label){case 0:return[4,this.embedFontStream(t)];case 1:return r=q.sent(),n=this.scale,i=this.font,l=i.italicAngle,h=i.ascent,p=i.descent,o=i.capHeight,_=i.xHeight,C=this.font.bbox,M=C.minX,L=C.minY,z=C.maxX,j=C.maxY,K=t.obj(($={Type:"FontDescriptor",FontName:this.baseFontName,Flags:i4e(this.font),FontBBox:[M*n,L*n,z*n,j*n],ItalicAngle:l,Ascent:h*n,Descent:p*n,CapHeight:(o||h)*n,XHeight:(_||0)*n,StemV:0},$[this.isCFF()?"FontFile3":"FontFile2"]=r,$)),[2,t.register(K)]}})})},e.prototype.serializeFont=function(){return Tn(this,void 0,void 0,function(){return In(this,function(t){return[2,this.fontData]})})},e.prototype.embedFontStream=function(t){return Tn(this,void 0,void 0,function(){var r,n,i;return In(this,function(l){switch(l.label){case 0:return i=(n=t).flateStream,[4,this.serializeFont()];case 1:return r=i.apply(n,[l.sent(),{Subtype:this.isCFF()?"CIDFontType0C":void 0}]),[2,t.register(r)]}})})},e.prototype.embedUnicodeCmap=function(t){var r=e4e(this.glyphCache.access(),this.glyphId.bind(this)),n=t.flateStream(r);return t.register(n)},e.prototype.glyphId=function(t){return t?t.id:-1},e.prototype.computeWidths=function(){for(var t=this.glyphCache.access(),r=[],n=[],i=0,l=t.length;i<l;i++){var h=t[i],p=t[i-1],o=this.glyphId(h),_=this.glyphId(p);i===0?r.push(o):o-_!==1&&(r.push(n),r.push(o),n=[]),n.push(h.advanceWidth*this.scale)}return r.push(n),r},e}(),o4e=function(e){Ar(t,e);function t(r,n,i,l){var h=e.call(this,r,n,i,l)||this;return h.subset=h.font.createSubset(),h.glyphs=[],h.glyphCache=ed.populatedBy(function(){return h.glyphs}),h.glyphIdMap=new Map,h}return t.for=function(r,n,i,l){return Tn(this,void 0,void 0,function(){var h;return In(this,function(p){switch(p.label){case 0:return[4,r.create(n)];case 1:return h=p.sent(),[2,new t(h,n,i,l)]}})})},t.prototype.encodeText=function(r){for(var n=this.font.layout(r,this.fontFeatures).glyphs,i=new Array(n.length),l=0,h=n.length;l<h;l++){var p=n[l],o=this.subset.includeGlyph(p);this.glyphs[o-1]=p,this.glyphIdMap.set(p.id,o),i[l]=nw(o,4)}return this.glyphCache.invalidate(),cn.of(i.join(""))},t.prototype.isCFF=function(){return this.subset.cff},t.prototype.glyphId=function(r){return r?this.glyphIdMap.get(r.id):-1},t.prototype.serializeFont=function(){var r=this;return new Promise(function(n,i){var l=[];r.subset.encodeStream().on("data",function(h){return l.push(h)}).on("end",function(){return n(XPe(l))}).on("error",function(h){return i(h)})})},t}(gU),a2;(function(e){e.Source="Source",e.Data="Data",e.Alternative="Alternative",e.Supplement="Supplement",e.EncryptedPayload="EncryptedPayload",e.FormData="EncryptedPayload",e.Schema="Schema",e.Unspecified="Unspecified"})(a2||(a2={}));var s4e=function(){function e(t,r,n){n===void 0&&(n={}),this.fileData=t,this.fileName=r,this.options=n}return e.for=function(t,r,n){return n===void 0&&(n={}),new e(t,r,n)},e.prototype.embedIntoContext=function(t,r){return Tn(this,void 0,void 0,function(){var n,i,l,h,p,o,_,C,M;return In(this,function(L){return n=this.options,i=n.mimeType,l=n.description,h=n.creationDate,p=n.modificationDate,o=n.afRelationship,_=t.flateStream(this.fileData,{Type:"EmbeddedFile",Subtype:i??void 0,Params:{Size:this.fileData.length,CreationDate:h?Pi.fromDate(h):void 0,ModDate:p?Pi.fromDate(p):void 0}}),C=t.register(_),M=t.obj({Type:"Filespec",F:Pi.of(this.fileName),UF:cn.fromText(this.fileName),EF:{F:C},Desc:l?cn.fromText(l):void 0,AFRelationship:o??void 0}),r?(t.assign(r,M),[2,r]):[2,t.register(M)]})})},e}(),Cj=[65472,65473,65474,65475,65477,65478,65479,65480,65481,65482,65483,65484,65485,65486,65487],by;(function(e){e.DeviceGray="DeviceGray",e.DeviceRGB="DeviceRGB",e.DeviceCMYK="DeviceCMYK"})(by||(by={}));var a4e={1:by.DeviceGray,3:by.DeviceRGB,4:by.DeviceCMYK},EJ=function(){function e(t,r,n,i,l){this.imageData=t,this.bitsPerComponent=r,this.width=n,this.height=i,this.colorSpace=l}return e.for=function(t){return Tn(this,void 0,void 0,function(){var r,n,i,l,h,p,o,_,C,M;return In(this,function(L){if(r=new DataView(t.buffer),n=r.getUint16(0),n!==65496)throw new Error("SOI not found in JPEG");for(i=2;i<r.byteLength&&(l=r.getUint16(i),i+=2,!Cj.includes(l));)i+=r.getUint16(i);if(!Cj.includes(l))throw new Error("Invalid JPEG");if(i+=2,h=r.getUint8(i++),p=r.getUint16(i),i+=2,o=r.getUint16(i),i+=2,_=r.getUint8(i++),C=a4e[_],!C)throw new Error("Unknown JPEG channel.");return M=C,[2,new e(t,h,o,p,M)]})})},e.prototype.embedIntoContext=function(t,r){return Tn(this,void 0,void 0,function(){var n;return In(this,function(i){return n=t.stream(this.imageData,{Type:"XObject",Subtype:"Image",BitsPerComponent:this.bitsPerComponent,Width:this.width,Height:this.height,ColorSpace:this.colorSpace,Filter:"DCTDecode",Decode:this.colorSpace===by.DeviceCMYK?[1,0,1,0,1,0,1,0]:void 0}),r?(t.assign(r,n),[2,r]):[2,t.register(n)]})})},e}(),nr={};nr.toRGBA8=function(e){var t=e.width,r=e.height;if(e.tabs.acTL==null)return[nr.toRGBA8.decodeImage(e.data,t,r,e).buffer];var n=[];e.frames[0].data==null&&(e.frames[0].data=e.data);for(var i=t*r*4,l=new Uint8Array(i),h=new Uint8Array(i),p=new Uint8Array(i),o=0;o<e.frames.length;o++){var _=e.frames[o],C=_.rect.x,M=_.rect.y,L=_.rect.width,z=_.rect.height,j=nr.toRGBA8.decodeImage(_.data,L,z,e);if(o!=0)for(var K=0;K<i;K++)p[K]=l[K];if(_.blend==0?nr._copyTile(j,L,z,l,t,r,C,M,0):_.blend==1&&nr._copyTile(j,L,z,l,t,r,C,M,1),n.push(l.buffer.slice(0)),_.dispose!=0){if(_.dispose==1)nr._copyTile(h,L,z,l,t,r,C,M,0);else if(_.dispose==2)for(var K=0;K<i;K++)l[K]=p[K]}}return n};nr.toRGBA8.decodeImage=function(e,t,r,n){var i=t*r,l=nr.decode._getBPP(n),h=Math.ceil(t*l/8),p=new Uint8Array(i*4),o=new Uint32Array(p.buffer),_=n.ctype,C=n.depth,M=nr._bin.readUshort;if(_==6){var L=i<<2;if(C==8)for(var z=0;z<L;z+=4)p[z]=e[z],p[z+1]=e[z+1],p[z+2]=e[z+2],p[z+3]=e[z+3];if(C==16)for(var z=0;z<L;z++)p[z]=e[z<<1]}else if(_==2){var j=n.tabs.tRNS;if(j==null){if(C==8)for(var z=0;z<i;z++){var K=z*3;o[z]=255<<24|e[K+2]<<16|e[K+1]<<8|e[K]}if(C==16)for(var z=0;z<i;z++){var K=z*6;o[z]=255<<24|e[K+4]<<16|e[K+2]<<8|e[K]}}else{var $=j[0],q=j[1],ee=j[2];if(C==8)for(var z=0;z<i;z++){var ie=z<<2,K=z*3;o[z]=255<<24|e[K+2]<<16|e[K+1]<<8|e[K],e[K]==$&&e[K+1]==q&&e[K+2]==ee&&(p[ie+3]=0)}if(C==16)for(var z=0;z<i;z++){var ie=z<<2,K=z*6;o[z]=255<<24|e[K+4]<<16|e[K+2]<<8|e[K],M(e,K)==$&&M(e,K+2)==q&&M(e,K+4)==ee&&(p[ie+3]=0)}}}else if(_==3){var fe=n.tabs.PLTE,me=n.tabs.tRNS,ye=me?me.length:0;if(C==1)for(var se=0;se<r;se++)for(var re=se*h,de=se*t,z=0;z<t;z++){var ie=de+z<<2,_e=e[re+(z>>3)]>>7-((z&7)<<0)&1,ve=3*_e;p[ie]=fe[ve],p[ie+1]=fe[ve+1],p[ie+2]=fe[ve+2],p[ie+3]=_e<ye?me[_e]:255}if(C==2)for(var se=0;se<r;se++)for(var re=se*h,de=se*t,z=0;z<t;z++){var ie=de+z<<2,_e=e[re+(z>>2)]>>6-((z&3)<<1)&3,ve=3*_e;p[ie]=fe[ve],p[ie+1]=fe[ve+1],p[ie+2]=fe[ve+2],p[ie+3]=_e<ye?me[_e]:255}if(C==4)for(var se=0;se<r;se++)for(var re=se*h,de=se*t,z=0;z<t;z++){var ie=de+z<<2,_e=e[re+(z>>1)]>>4-((z&1)<<2)&15,ve=3*_e;p[ie]=fe[ve],p[ie+1]=fe[ve+1],p[ie+2]=fe[ve+2],p[ie+3]=_e<ye?me[_e]:255}if(C==8)for(var z=0;z<i;z++){var ie=z<<2,_e=e[z],ve=3*_e;p[ie]=fe[ve],p[ie+1]=fe[ve+1],p[ie+2]=fe[ve+2],p[ie+3]=_e<ye?me[_e]:255}}else if(_==4){if(C==8)for(var z=0;z<i;z++){var ie=z<<2,Pe=z<<1,Ee=e[Pe];p[ie]=Ee,p[ie+1]=Ee,p[ie+2]=Ee,p[ie+3]=e[Pe+1]}if(C==16)for(var z=0;z<i;z++){var ie=z<<2,Pe=z<<2,Ee=e[Pe];p[ie]=Ee,p[ie+1]=Ee,p[ie+2]=Ee,p[ie+3]=e[Pe+2]}}else if(_==0)for(var $=n.tabs.tRNS?n.tabs.tRNS:-1,se=0;se<r;se++){var Ht=se*h,Xt=se*t;if(C==1)for(var gt=0;gt<t;gt++){var Ee=255*(e[Ht+(gt>>>3)]>>>7-(gt&7)&1),jt=Ee==$*255?0:255;o[Xt+gt]=jt<<24|Ee<<16|Ee<<8|Ee}else if(C==2)for(var gt=0;gt<t;gt++){var Ee=85*(e[Ht+(gt>>>2)]>>>6-((gt&3)<<1)&3),jt=Ee==$*85?0:255;o[Xt+gt]=jt<<24|Ee<<16|Ee<<8|Ee}else if(C==4)for(var gt=0;gt<t;gt++){var Ee=17*(e[Ht+(gt>>>1)]>>>4-((gt&1)<<2)&15),jt=Ee==$*17?0:255;o[Xt+gt]=jt<<24|Ee<<16|Ee<<8|Ee}else if(C==8)for(var gt=0;gt<t;gt++){var Ee=e[Ht+gt],jt=Ee==$?0:255;o[Xt+gt]=jt<<24|Ee<<16|Ee<<8|Ee}else if(C==16)for(var gt=0;gt<t;gt++){var Ee=e[Ht+(gt<<1)],jt=M(e,Ht+(gt<<z))==$?0:255;o[Xt+gt]=jt<<24|Ee<<16|Ee<<8|Ee}}return p};nr.decode=function(e){for(var t=new Uint8Array(e),r=8,n=nr._bin,i=n.readUshort,l=n.readUint,h={tabs:{},frames:[]},p=new Uint8Array(t.length),o=0,_,C=0,M=[137,80,78,71,13,10,26,10],L=0;L<8;L++)if(t[L]!=M[L])throw"The input is not a PNG file!";for(;r<t.length;){var z=n.readUint(t,r);r+=4;var j=n.readASCII(t,r,4);if(r+=4,j=="IHDR")nr.decode._IHDR(t,r,h);else if(j=="IDAT"){for(var L=0;L<z;L++)p[o+L]=t[r+L];o+=z}else if(j=="acTL")h.tabs[j]={num_frames:l(t,r),num_plays:l(t,r+4)},_=new Uint8Array(t.length);else if(j=="fcTL"){if(C!=0){var K=h.frames[h.frames.length-1];K.data=nr.decode._decompress(h,_.slice(0,C),K.rect.width,K.rect.height),C=0}var $={x:l(t,r+12),y:l(t,r+16),width:l(t,r+4),height:l(t,r+8)},q=i(t,r+22);q=i(t,r+20)/(q==0?100:q);var ee={rect:$,delay:Math.round(q*1e3),dispose:t[r+24],blend:t[r+25]};h.frames.push(ee)}else if(j=="fdAT"){for(var L=0;L<z-4;L++)_[C+L]=t[r+L+4];C+=z-4}else if(j=="pHYs")h.tabs[j]=[n.readUint(t,r),n.readUint(t,r+4),t[r+8]];else if(j=="cHRM"){h.tabs[j]=[];for(var L=0;L<8;L++)h.tabs[j].push(n.readUint(t,r+L*4))}else if(j=="tEXt"){h.tabs[j]==null&&(h.tabs[j]={});var ie=n.nextZero(t,r),fe=n.readASCII(t,r,ie-r),me=n.readASCII(t,ie+1,r+z-ie-1);h.tabs[j][fe]=me}else if(j=="iTXt"){h.tabs[j]==null&&(h.tabs[j]={});var ie=0,ye=r;ie=n.nextZero(t,ye);var fe=n.readASCII(t,ye,ie-ye);ye=ie+1,t[ye],t[ye+1],ye+=2,ie=n.nextZero(t,ye),n.readASCII(t,ye,ie-ye),ye=ie+1,ie=n.nextZero(t,ye),n.readUTF8(t,ye,ie-ye),ye=ie+1;var me=n.readUTF8(t,ye,z-(ye-r));h.tabs[j][fe]=me}else if(j=="PLTE")h.tabs[j]=n.readBytes(t,r,z);else if(j=="hIST"){var se=h.tabs.PLTE.length/3;h.tabs[j]=[];for(var L=0;L<se;L++)h.tabs[j].push(i(t,r+L*2))}else if(j=="tRNS")h.ctype==3?h.tabs[j]=n.readBytes(t,r,z):h.ctype==0?h.tabs[j]=i(t,r):h.ctype==2&&(h.tabs[j]=[i(t,r),i(t,r+2),i(t,r+4)]);else if(j=="gAMA")h.tabs[j]=n.readUint(t,r)/1e5;else if(j=="sRGB")h.tabs[j]=t[r];else if(j=="bKGD")h.ctype==0||h.ctype==4?h.tabs[j]=[i(t,r)]:h.ctype==2||h.ctype==6?h.tabs[j]=[i(t,r),i(t,r+2),i(t,r+4)]:h.ctype==3&&(h.tabs[j]=t[r]);else if(j=="IEND")break;r+=z,n.readUint(t,r),r+=4}if(C!=0){var K=h.frames[h.frames.length-1];K.data=nr.decode._decompress(h,_.slice(0,C),K.rect.width,K.rect.height),C=0}return h.data=nr.decode._decompress(h,p,h.width,h.height),delete h.compress,delete h.interlace,delete h.filter,h};nr.decode._decompress=function(e,t,r,n){var i=nr.decode._getBPP(e),l=Math.ceil(r*i/8),h=new Uint8Array((l+1+e.interlace)*n);return t=nr.decode._inflate(t,h),e.interlace==0?t=nr.decode._filterZero(t,e,0,r,n):e.interlace==1&&(t=nr.decode._readInterlace(t,e)),t};nr.decode._inflate=function(e,t){var r=nr.inflateRaw(new Uint8Array(e.buffer,2,e.length-6),t);return r};nr.inflateRaw=function(){var e={};return e.H={},e.H.N=function(t,r){var n=Uint8Array,i=0,l=0,h=0,p=0,o=0,_=0,C=0,M=0,L=0,z,j;if(t[0]==3&&t[1]==0)return r||new n(0);var K=e.H,$=K.b,q=K.e,ee=K.R,ie=K.n,fe=K.A,me=K.Z,ye=K.m,se=r==null;for(se&&(r=new n(t.length>>>2<<3));i==0;){if(i=$(t,L,1),l=$(t,L+1,2),L+=3,l==0){L&7&&(L+=8-(L&7));var re=(L>>>3)+4,de=t[re-4]|t[re-3]<<8;se&&(r=e.H.W(r,M+de)),r.set(new n(t.buffer,t.byteOffset+re,de),M),L=re+de<<3,M+=de;continue}if(se&&(r=e.H.W(r,M+(1<<17))),l==1&&(z=ye.J,j=ye.h,_=511,C=31),l==2){h=q(t,L,5)+257,p=q(t,L+5,5)+1,o=q(t,L+10,4)+4,L+=14;for(var _e=1,ve=0;ve<38;ve+=2)ye.Q[ve]=0,ye.Q[ve+1]=0;for(var ve=0;ve<o;ve++){var Pe=q(t,L+ve*3,3);ye.Q[(ye.X[ve]<<1)+1]=Pe,Pe>_e&&(_e=Pe)}L+=3*o,ie(ye.Q,_e),fe(ye.Q,_e,ye.u),z=ye.w,j=ye.d,L=ee(ye.u,(1<<_e)-1,h+p,t,L,ye.v);var Ee=K.V(ye.v,0,h,ye.C);_=(1<<Ee)-1;var Ht=K.V(ye.v,h,p,ye.D);C=(1<<Ht)-1,ie(ye.C,Ee),fe(ye.C,Ee,z),ie(ye.D,Ht),fe(ye.D,Ht,j)}for(;;){var Xt=z[me(t,L)&_];L+=Xt&15;var gt=Xt>>>4;if(!(gt>>>8))r[M++]=gt;else{if(gt==256)break;var jt=M+gt-254;if(gt>264){var Mt=ye.q[gt-257];jt=M+(Mt>>>3)+q(t,L,Mt&7),L+=Mt&7}var Yt=j[me(t,L)&C];L+=Yt&15;var ht=Yt>>>4,lr=ye.c[ht],ir=(lr>>>4)+$(t,L,lr&15);for(L+=lr&15;M<jt;)r[M]=r[M++-ir],r[M]=r[M++-ir],r[M]=r[M++-ir],r[M]=r[M++-ir];M=jt}}}return r.length==M?r:r.slice(0,M)},e.H.W=function(t,r){var n=t.length;if(r<=n)return t;var i=new Uint8Array(n<<1);return i.set(t,0),i},e.H.R=function(t,r,n,i,l,h){for(var p=e.H.e,o=e.H.Z,_=0;_<n;){var C=t[o(i,l)&r];l+=C&15;var M=C>>>4;if(M<=15)h[_]=M,_++;else{var L=0,z=0;M==16?(z=3+p(i,l,2),l+=2,L=h[_-1]):M==17?(z=3+p(i,l,3),l+=3):M==18&&(z=11+p(i,l,7),l+=7);for(var j=_+z;_<j;)h[_]=L,_++}}return l},e.H.V=function(t,r,n,i){for(var l=0,h=0,p=i.length>>>1;h<n;){var o=t[h+r];i[h<<1]=0,i[(h<<1)+1]=o,o>l&&(l=o),h++}for(;h<p;)i[h<<1]=0,i[(h<<1)+1]=0,h++;return l},e.H.n=function(t,r){for(var n=e.H.m,i=t.length,l,h,p,o,_,C=n.j,o=0;o<=r;o++)C[o]=0;for(o=1;o<i;o+=2)C[t[o]]++;var M=n.K;for(l=0,C[0]=0,h=1;h<=r;h++)l=l+C[h-1]<<1,M[h]=l;for(p=0;p<i;p+=2)_=t[p+1],_!=0&&(t[p]=M[_],M[_]++)},e.H.A=function(t,r,n){for(var i=t.length,l=e.H.m,h=l.r,p=0;p<i;p+=2)if(t[p+1]!=0)for(var o=p>>1,_=t[p+1],C=o<<4|_,M=r-_,L=t[p]<<M,z=L+(1<<M);L!=z;){var j=h[L]>>>15-r;n[j]=C,L++}},e.H.l=function(t,r){for(var n=e.H.m.r,i=15-r,l=0;l<t.length;l+=2){var h=t[l]<<r-t[l+1];t[l]=n[h]>>>i}},e.H.M=function(t,r,n){n=n<<(r&7);var i=r>>>3;t[i]|=n,t[i+1]|=n>>>8},e.H.I=function(t,r,n){n=n<<(r&7);var i=r>>>3;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},e.H.e=function(t,r,n){return(t[r>>>3]|t[(r>>>3)+1]<<8)>>>(r&7)&(1<<n)-1},e.H.b=function(t,r,n){return(t[r>>>3]|t[(r>>>3)+1]<<8|t[(r>>>3)+2]<<16)>>>(r&7)&(1<<n)-1},e.H.Z=function(t,r){return(t[r>>>3]|t[(r>>>3)+1]<<8|t[(r>>>3)+2]<<16)>>>(r&7)},e.H.i=function(t,r){return(t[r>>>3]|t[(r>>>3)+1]<<8|t[(r>>>3)+2]<<16|t[(r>>>3)+3]<<24)>>>(r&7)},e.H.m=function(){var t=Uint16Array,r=Uint32Array;return{K:new t(16),j:new t(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new t(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new r(32),J:new t(512),_:[],h:new t(32),$:[],w:new t(32768),C:[],v:[],d:new t(32768),D:[],u:new t(512),Q:[],r:new t(32768),s:new r(286),Y:new r(30),a:new r(19),t:new r(15e3),k:new t(65536),g:new t(32768)}}(),function(){for(var t=e.H.m,r=32768,n=0;n<r;n++){var i=n;i=(i&2863311530)>>>1|(i&1431655765)<<1,i=(i&3435973836)>>>2|(i&858993459)<<2,i=(i&4042322160)>>>4|(i&252645135)<<4,i=(i&4278255360)>>>8|(i&16711935)<<8,t.r[n]=(i>>>16|i<<16)>>>17}function l(h,p,o){for(;p--!=0;)h.push(0,o)}for(var n=0;n<32;n++)t.q[n]=t.S[n]<<3|t.T[n],t.c[n]=t.p[n]<<4|t.z[n];l(t._,144,8),l(t._,112,9),l(t._,24,7),l(t._,8,8),e.H.n(t._,9),e.H.A(t._,9,t.J),e.H.l(t._,9),l(t.$,32,5),e.H.n(t.$,5),e.H.A(t.$,5,t.h),e.H.l(t.$,5),l(t.Q,19,0),l(t.C,286,0),l(t.D,30,0),l(t.v,320,0)}(),e.H.N}();nr.decode._readInterlace=function(e,t){for(var r=t.width,n=t.height,i=nr.decode._getBPP(t),l=i>>3,h=Math.ceil(r*i/8),p=new Uint8Array(n*h),o=0,_=[0,0,4,0,2,0,1],C=[0,4,0,2,0,1,0],M=[8,8,8,4,4,2,2],L=[8,8,4,4,2,2,1],z=0;z<7;){for(var j=M[z],K=L[z],$=0,q=0,ee=_[z];ee<n;)ee+=j,q++;for(var ie=C[z];ie<r;)ie+=K,$++;var fe=Math.ceil($*i/8);nr.decode._filterZero(e,t,o,$,q);for(var me=0,ye=_[z];ye<n;){for(var se=C[z],re=o+me*fe<<3;se<r;){if(i==1){var de=e[re>>3];de=de>>7-(re&7)&1,p[ye*h+(se>>3)]|=de<<7-((se&7)<<0)}if(i==2){var de=e[re>>3];de=de>>6-(re&7)&3,p[ye*h+(se>>2)]|=de<<6-((se&3)<<1)}if(i==4){var de=e[re>>3];de=de>>4-(re&7)&15,p[ye*h+(se>>1)]|=de<<4-((se&1)<<2)}if(i>=8)for(var _e=ye*h+se*l,ve=0;ve<l;ve++)p[_e+ve]=e[(re>>3)+ve];re+=i,se+=K}me++,ye+=j}$*q!=0&&(o+=q*(1+fe)),z=z+1}return p};nr.decode._getBPP=function(e){var t=[1,null,3,1,2,null,4][e.ctype];return t*e.depth};nr.decode._filterZero=function(e,t,r,n,i){var l=nr.decode._getBPP(t),h=Math.ceil(n*l/8),p=nr.decode._paeth;l=Math.ceil(l/8);var o=0,_=1,C=e[r],M=0;if(C>1&&(e[r]=[0,0,1][C-2]),C==3)for(M=l;M<h;M++)e[M+1]=e[M+1]+(e[M+1-l]>>>1)&255;for(var L=0;L<i;L++)if(o=r+L*h,_=o+L+1,C=e[_-1],M=0,C==0)for(;M<h;M++)e[o+M]=e[_+M];else if(C==1){for(;M<l;M++)e[o+M]=e[_+M];for(;M<h;M++)e[o+M]=e[_+M]+e[o+M-l]}else if(C==2)for(;M<h;M++)e[o+M]=e[_+M]+e[o+M-h];else if(C==3){for(;M<l;M++)e[o+M]=e[_+M]+(e[o+M-h]>>>1);for(;M<h;M++)e[o+M]=e[_+M]+(e[o+M-h]+e[o+M-l]>>>1)}else{for(;M<l;M++)e[o+M]=e[_+M]+p(0,e[o+M-h],0);for(;M<h;M++)e[o+M]=e[_+M]+p(e[o+M-l],e[o+M-h],e[o+M-l-h])}return e};nr.decode._paeth=function(e,t,r){var n=e+t-r,i=n-e,l=n-t,h=n-r;return i*i<=l*l&&i*i<=h*h?e:l*l<=h*h?t:r};nr.decode._IHDR=function(e,t,r){var n=nr._bin;r.width=n.readUint(e,t),t+=4,r.height=n.readUint(e,t),t+=4,r.depth=e[t],t++,r.ctype=e[t],t++,r.compress=e[t],t++,r.filter=e[t],t++,r.interlace=e[t],t++};nr._bin={nextZero:function(e,t){for(;e[t]!=0;)t++;return t},readUshort:function(e,t){return e[t]<<8|e[t+1]},writeUshort:function(e,t,r){e[t]=r>>8&255,e[t+1]=r&255},readUint:function(e,t){return e[t]*(256*256*256)+(e[t+1]<<16|e[t+2]<<8|e[t+3])},writeUint:function(e,t,r){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=r&255},readASCII:function(e,t,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(e[t+i]);return n},writeASCII:function(e,t,r){for(var n=0;n<r.length;n++)e[t+n]=r.charCodeAt(n)},readBytes:function(e,t,r){for(var n=[],i=0;i<r;i++)n.push(e[t+i]);return n},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,r){for(var n="",i,l=0;l<r;l++)n+="%"+nr._bin.pad(e[t+l].toString(16));try{i=decodeURIComponent(n)}catch{return nr._bin.readASCII(e,t,r)}return i}};nr._copyTile=function(e,t,r,n,i,l,h,p,o){for(var _=Math.min(t,i),C=Math.min(r,l),M=0,L=0,z=0;z<C;z++)for(var j=0;j<_;j++)if(h>=0&&p>=0?(M=z*t+j<<2,L=(p+z)*i+h+j<<2):(M=(-p+z)*t-h+j<<2,L=z*i+j<<2),o==0)n[L]=e[M],n[L+1]=e[M+1],n[L+2]=e[M+2],n[L+3]=e[M+3];else if(o==1){var K=e[M+3]*.00392156862745098,$=e[M]*K,q=e[M+1]*K,ee=e[M+2]*K,ie=n[L+3]*(1/255),fe=n[L]*ie,me=n[L+1]*ie,ye=n[L+2]*ie,se=1-K,re=K+ie*se,de=re==0?0:1/re;n[L+3]=255*re,n[L+0]=($+fe*se)*de,n[L+1]=(q+me*se)*de,n[L+2]=(ee+ye*se)*de}else if(o==2){var K=e[M+3],$=e[M],q=e[M+1],ee=e[M+2],ie=n[L+3],fe=n[L],me=n[L+1],ye=n[L+2];K==ie&&$==fe&&q==me&&ee==ye?(n[L]=0,n[L+1]=0,n[L+2]=0,n[L+3]=0):(n[L]=$,n[L+1]=q,n[L+2]=ee,n[L+3]=K)}else if(o==3){var K=e[M+3],$=e[M],q=e[M+1],ee=e[M+2],ie=n[L+3],fe=n[L],me=n[L+1],ye=n[L+2];if(K==ie&&$==fe&&q==me&&ee==ye)continue;if(K<220&&ie>20)return!1}return!0};nr.encode=function(e,t,r,n,i,l,h){n==null&&(n=0),h==null&&(h=!1);var p=nr.encode.compress(e,t,r,n,[!1,!1,!1,0,h]);return nr.encode.compressPNG(p,-1),nr.encode._main(p,t,r,i,l)};nr.encodeLL=function(e,t,r,n,i,l,h,p){for(var o={ctype:0+(n==1?0:2)+(i==0?0:4),depth:l,frames:[]},_=(n+i)*l,C=_*t,M=0;M<e.length;M++)o.frames.push({rect:{x:0,y:0,width:t,height:r},img:new Uint8Array(e[M]),blend:0,dispose:1,bpp:Math.ceil(_/8),bpl:Math.ceil(C/8)});nr.encode.compressPNG(o,0,!0);var L=nr.encode._main(o,t,r,h,p);return L};nr.encode._main=function(e,t,r,n,i){i==null&&(i={});var l=nr.crc.crc,h=nr._bin.writeUint,p=nr._bin.writeUshort,o=nr._bin.writeASCII,_=8,C=e.frames.length>1,M=!1,L=33+(C?20:0);if(i.sRGB!=null&&(L+=13),i.pHYs!=null&&(L+=21),e.ctype==3){for(var z=e.plte.length,j=0;j<z;j++)e.plte[j]>>>24!=255&&(M=!0);L+=8+z*3+4+(M?8+z*1+4:0)}for(var K=0;K<e.frames.length;K++){var $=e.frames[K];C&&(L+=38),L+=$.cimg.length+12,K!=0&&(L+=4)}L+=12;for(var q=new Uint8Array(L),ee=[137,80,78,71,13,10,26,10],j=0;j<8;j++)q[j]=ee[j];if(h(q,_,13),_+=4,o(q,_,"IHDR"),_+=4,h(q,_,t),_+=4,h(q,_,r),_+=4,q[_]=e.depth,_++,q[_]=e.ctype,_++,q[_]=0,_++,q[_]=0,_++,q[_]=0,_++,h(q,_,l(q,_-17,17)),_+=4,i.sRGB!=null&&(h(q,_,1),_+=4,o(q,_,"sRGB"),_+=4,q[_]=i.sRGB,_++,h(q,_,l(q,_-5,5)),_+=4),i.pHYs!=null&&(h(q,_,9),_+=4,o(q,_,"pHYs"),_+=4,h(q,_,i.pHYs[0]),_+=4,h(q,_,i.pHYs[1]),_+=4,q[_]=i.pHYs[2],_++,h(q,_,l(q,_-13,13)),_+=4),C&&(h(q,_,8),_+=4,o(q,_,"acTL"),_+=4,h(q,_,e.frames.length),_+=4,h(q,_,i.loop!=null?i.loop:0),_+=4,h(q,_,l(q,_-12,12)),_+=4),e.ctype==3){var z=e.plte.length;h(q,_,z*3),_+=4,o(q,_,"PLTE"),_+=4;for(var j=0;j<z;j++){var ie=j*3,fe=e.plte[j],me=fe&255,ye=fe>>>8&255,se=fe>>>16&255;q[_+ie+0]=me,q[_+ie+1]=ye,q[_+ie+2]=se}if(_+=z*3,h(q,_,l(q,_-z*3-4,z*3+4)),_+=4,M){h(q,_,z),_+=4,o(q,_,"tRNS"),_+=4;for(var j=0;j<z;j++)q[_+j]=e.plte[j]>>>24&255;_+=z,h(q,_,l(q,_-z-4,z+4)),_+=4}}for(var re=0,K=0;K<e.frames.length;K++){var $=e.frames[K];C&&(h(q,_,26),_+=4,o(q,_,"fcTL"),_+=4,h(q,_,re++),_+=4,h(q,_,$.rect.width),_+=4,h(q,_,$.rect.height),_+=4,h(q,_,$.rect.x),_+=4,h(q,_,$.rect.y),_+=4,p(q,_,n[K]),_+=2,p(q,_,1e3),_+=2,q[_]=$.dispose,_++,q[_]=$.blend,_++,h(q,_,l(q,_-30,30)),_+=4);var de=$.cimg,z=de.length;h(q,_,z+(K==0?0:4)),_+=4;var _e=_;o(q,_,K==0?"IDAT":"fdAT"),_+=4,K!=0&&(h(q,_,re++),_+=4),q.set(de,_),_+=z,h(q,_,l(q,_e,_-_e)),_+=4}return h(q,_,0),_+=4,o(q,_,"IEND"),_+=4,h(q,_,l(q,_-4,4)),_+=4,q.buffer};nr.encode.compressPNG=function(e,t,r){for(var n=0;n<e.frames.length;n++){var i=e.frames[n];i.rect.width;var l=i.rect.height,h=new Uint8Array(l*i.bpl+l);i.cimg=nr.encode._filterZero(i.img,l,i.bpp,i.bpl,h,t,r)}};nr.encode.compress=function(e,t,r,n,i){for(var l=i[0],h=i[1],p=i[2],o=i[3],_=i[4],C=6,M=8,L=255,z=0;z<e.length;z++)for(var j=new Uint8Array(e[z]),K=j.length,$=0;$<K;$+=4)L&=j[$+3];var q=L!=255,ee=nr.encode.framize(e,t,r,l,h,p),ie={},fe=[],me=[];if(n!=0){for(var ye=[],$=0;$<ee.length;$++)ye.push(ee[$].img.buffer);for(var se=nr.encode.concatRGBA(ye),re=nr.quantize(se,n),de=0,_e=new Uint8Array(re.abuf),$=0;$<ee.length;$++){var ve=ee[$].img,Pe=ve.length;me.push(new Uint8Array(re.inds.buffer,de>>2,Pe>>2));for(var z=0;z<Pe;z+=4)ve[z]=_e[de+z],ve[z+1]=_e[de+z+1],ve[z+2]=_e[de+z+2],ve[z+3]=_e[de+z+3];de+=Pe}for(var $=0;$<re.plte.length;$++)fe.push(re.plte[$].est.rgba)}else for(var z=0;z<ee.length;z++){var Ee=ee[z],Ht=new Uint32Array(Ee.img.buffer),Xt=Ee.rect.width,K=Ht.length,gt=new Uint8Array(K);me.push(gt);for(var $=0;$<K;$++){var jt=Ht[$];if($!=0&&jt==Ht[$-1])gt[$]=gt[$-1];else if($>Xt&&jt==Ht[$-Xt])gt[$]=gt[$-Xt];else{var Mt=ie[jt];if(Mt==null&&(ie[jt]=Mt=fe.length,fe.push(jt),fe.length>=300))break;gt[$]=Mt}}}var Yt=fe.length;Yt<=256&&_==!1&&(Yt<=2?M=1:Yt<=4?M=2:Yt<=16?M=4:M=8,M=Math.max(M,o));for(var z=0;z<ee.length;z++){var Ee=ee[z];Ee.rect.x,Ee.rect.y;var Xt=Ee.rect.width,ht=Ee.rect.height,lr=Ee.img;new Uint32Array(lr.buffer);var ir=4*Xt,$t=4;if(Yt<=256&&_==!1){ir=Math.ceil(M*Xt/8);for(var Vt=new Uint8Array(ir*ht),Dr=me[z],kr=0;kr<ht;kr++){var $=kr*ir,Zr=kr*Xt;if(M==8)for(var Lr=0;Lr<Xt;Lr++)Vt[$+Lr]=Dr[Zr+Lr];else if(M==4)for(var Lr=0;Lr<Xt;Lr++)Vt[$+(Lr>>1)]|=Dr[Zr+Lr]<<4-(Lr&1)*4;else if(M==2)for(var Lr=0;Lr<Xt;Lr++)Vt[$+(Lr>>2)]|=Dr[Zr+Lr]<<6-(Lr&3)*2;else if(M==1)for(var Lr=0;Lr<Xt;Lr++)Vt[$+(Lr>>3)]|=Dr[Zr+Lr]<<7-(Lr&7)*1}lr=Vt,C=3,$t=1}else if(q==!1&&ee.length==1){for(var Vt=new Uint8Array(Xt*ht*3),Ao=Xt*ht,$=0;$<Ao;$++){var ve=$*3,ji=$*4;Vt[ve]=lr[ji],Vt[ve+1]=lr[ji+1],Vt[ve+2]=lr[ji+2]}lr=Vt,C=2,$t=3,ir=3*Xt}Ee.img=lr,Ee.bpl=ir,Ee.bpp=$t}return{ctype:C,depth:M,plte:fe,frames:ee}};nr.encode.framize=function(e,t,r,n,i,l){for(var h=[],p=0;p<e.length;p++){var o=new Uint8Array(e[p]),_=new Uint32Array(o.buffer),C,M=0,L=0,z=t,j=r,K=n?1:0;if(p!=0){for(var $=l||n||p==1||h[p-2].dispose!=0?1:2,q=0,ee=1e9,ie=0;ie<$;ie++){for(var Ee=new Uint8Array(e[p-1-ie]),fe=new Uint32Array(e[p-1-ie]),me=t,ye=r,se=-1,re=-1,de=0;de<r;de++)for(var _e=0;_e<t;_e++){var ve=de*t+_e;_[ve]!=fe[ve]&&(_e<me&&(me=_e),_e>se&&(se=_e),de<ye&&(ye=de),de>re&&(re=de))}se==-1&&(me=ye=se=re=0),i&&((me&1)==1&&me--,(ye&1)==1&&ye--);var Pe=(se-me+1)*(re-ye+1);Pe<ee&&(ee=Pe,q=ie,M=me,L=ye,z=se-me+1,j=re-ye+1)}var Ee=new Uint8Array(e[p-1-q]);q==1&&(h[p-1].dispose=2),C=new Uint8Array(z*j*4),nr._copyTile(Ee,t,r,C,z,j,-M,-L,0),K=nr._copyTile(o,t,r,C,z,j,-M,-L,3)?1:0,K==1?nr.encode._prepareDiff(o,t,r,C,{x:M,y:L,width:z,height:j}):nr._copyTile(o,t,r,C,z,j,-M,-L,0)}else C=o.slice(0);h.push({rect:{x:M,y:L,width:z,height:j},img:C,blend:K,dispose:0})}if(n)for(var p=0;p<h.length;p++){var Ht=h[p];if(Ht.blend!=1){var Xt=Ht.rect,gt=h[p-1].rect,jt=Math.min(Xt.x,gt.x),Mt=Math.min(Xt.y,gt.y),Yt=Math.max(Xt.x+Xt.width,gt.x+gt.width),ht=Math.max(Xt.y+Xt.height,gt.y+gt.height),lr={x:jt,y:Mt,width:Yt-jt,height:ht-Mt};h[p-1].dispose=1,p-1!=0&&nr.encode._updateFrame(e,t,r,h,p-1,lr,i),nr.encode._updateFrame(e,t,r,h,p,lr,i)}}var ir=0;if(e.length!=1)for(var ve=0;ve<h.length;ve++){var Ht=h[ve];ir+=Ht.rect.width*Ht.rect.height}return h};nr.encode._updateFrame=function(e,t,r,n,i,l,h){for(var p=Uint8Array,o=Uint32Array,_=new p(e[i-1]),C=new o(e[i-1]),M=i+1<e.length?new p(e[i+1]):null,L=new p(e[i]),z=new o(L.buffer),j=t,K=r,$=-1,q=-1,ee=0;ee<l.height;ee++)for(var ie=0;ie<l.width;ie++){var fe=l.x+ie,me=l.y+ee,ye=me*t+fe,se=z[ye];se==0||n[i-1].dispose==0&&C[ye]==se&&(M==null||M[ye*4+3]!=0)||(fe<j&&(j=fe),fe>$&&($=fe),me<K&&(K=me),me>q&&(q=me))}$==-1&&(j=K=$=q=0),h&&((j&1)==1&&j--,(K&1)==1&&K--),l={x:j,y:K,width:$-j+1,height:q-K+1};var re=n[i];re.rect=l,re.blend=1,re.img=new Uint8Array(l.width*l.height*4),n[i-1].dispose==0?(nr._copyTile(_,t,r,re.img,l.width,l.height,-l.x,-l.y,0),nr.encode._prepareDiff(L,t,r,re.img,l)):nr._copyTile(L,t,r,re.img,l.width,l.height,-l.x,-l.y,0)};nr.encode._prepareDiff=function(e,t,r,n,i){nr._copyTile(e,t,r,n,i.width,i.height,-i.x,-i.y,2)};nr.encode._filterZero=function(e,t,r,n,i,l,h){var p=[],o=[0,1,2,3,4];l!=-1?o=[l]:(t*n>5e5||r==1)&&(o=[0]);var _;h&&(_={level:0});for(var C=h&&UZIP!=null?UZIP:xF,M=0;M<o.length;M++){for(var L=0;L<t;L++)nr.encode._filterLine(i,e,L,n,r,o[M]);p.push(C.deflate(i,_))}for(var z,j=1e9,M=0;M<p.length;M++)p[M].length<j&&(z=M,j=p[M].length);return p[z]};nr.encode._filterLine=function(e,t,r,n,i,l){var h=r*n,p=h+r,o=nr.decode._paeth;if(e[p]=l,p++,l==0)if(n<500)for(var _=0;_<n;_++)e[p+_]=t[h+_];else e.set(new Uint8Array(t.buffer,h,n),p);else if(l==1){for(var _=0;_<i;_++)e[p+_]=t[h+_];for(var _=i;_<n;_++)e[p+_]=t[h+_]-t[h+_-i]+256&255}else if(r==0){for(var _=0;_<i;_++)e[p+_]=t[h+_];if(l==2)for(var _=i;_<n;_++)e[p+_]=t[h+_];if(l==3)for(var _=i;_<n;_++)e[p+_]=t[h+_]-(t[h+_-i]>>1)+256&255;if(l==4)for(var _=i;_<n;_++)e[p+_]=t[h+_]-o(t[h+_-i],0,0)+256&255}else{if(l==2)for(var _=0;_<n;_++)e[p+_]=t[h+_]+256-t[h+_-n]&255;if(l==3){for(var _=0;_<i;_++)e[p+_]=t[h+_]+256-(t[h+_-n]>>1)&255;for(var _=i;_<n;_++)e[p+_]=t[h+_]+256-(t[h+_-n]+t[h+_-i]>>1)&255}if(l==4){for(var _=0;_<i;_++)e[p+_]=t[h+_]+256-o(0,t[h+_-n],0)&255;for(var _=i;_<n;_++)e[p+_]=t[h+_]+256-o(t[h+_-i],t[h+_-n],t[h+_-i-n])&255}}};nr.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var r=t,n=0;n<8;n++)r&1?r=3988292384^r>>>1:r=r>>>1;e[t]=r}return e}(),update:function(e,t,r,n){for(var i=0;i<n;i++)e=nr.crc.table[(e^t[r+i])&255]^e>>>8;return e},crc:function(e,t,r){return nr.crc.update(4294967295,e,t,r)^4294967295}};nr.quantize=function(e,t){var r=new Uint8Array(e),n=r.slice(0),i=new Uint32Array(n.buffer),l=nr.quantize.getKDtree(n,t),h=l[0],p=l[1];nr.quantize.planeDst;for(var o=r,_=i,C=o.length,M=new Uint8Array(r.length>>2),L=0;L<C;L+=4){var z=o[L]*.00392156862745098,j=o[L+1]*(1/255),K=o[L+2]*(1/255),$=o[L+3]*(1/255),q=nr.quantize.getNearest(h,z,j,K,$);M[L>>2]=q.ind,_[L>>2]=q.est.rgba}return{abuf:n.buffer,inds:M,plte:p}};nr.quantize.getKDtree=function(e,t,r){r==null&&(r=1e-4);var n=new Uint32Array(e.buffer),i={i0:0,i1:e.length,bst:null,est:null,tdst:0,left:null,right:null};i.bst=nr.quantize.stats(e,i.i0,i.i1),i.est=nr.quantize.estats(i.bst);for(var l=[i];l.length<t;){for(var h=0,p=0,o=0;o<l.length;o++)l[o].est.L>h&&(h=l[o].est.L,p=o);if(h<r)break;var _=l[p],C=nr.quantize.splitPixels(e,n,_.i0,_.i1,_.est.e,_.est.eMq255),M=_.i0>=C||_.i1<=C;if(M){_.est.L=0;continue}var L={i0:_.i0,i1:C,bst:null,est:null,tdst:0,left:null,right:null};L.bst=nr.quantize.stats(e,L.i0,L.i1),L.est=nr.quantize.estats(L.bst);var z={i0:C,i1:_.i1,bst:null,est:null,tdst:0,left:null,right:null};z.bst={R:[],m:[],N:_.bst.N-L.bst.N};for(var o=0;o<16;o++)z.bst.R[o]=_.bst.R[o]-L.bst.R[o];for(var o=0;o<4;o++)z.bst.m[o]=_.bst.m[o]-L.bst.m[o];z.est=nr.quantize.estats(z.bst),_.left=L,_.right=z,l[p]=L,l.push(z)}l.sort(function(j,K){return K.bst.N-j.bst.N});for(var o=0;o<l.length;o++)l[o].ind=o;return[i,l]};nr.quantize.getNearest=function(e,t,r,n,i){if(e.left==null)return e.tdst=nr.quantize.dist(e.est.q,t,r,n,i),e;var l=nr.quantize.planeDst(e.est,t,r,n,i),h=e.left,p=e.right;l>0&&(h=e.right,p=e.left);var o=nr.quantize.getNearest(h,t,r,n,i);if(o.tdst<=l*l)return o;var _=nr.quantize.getNearest(p,t,r,n,i);return _.tdst<o.tdst?_:o};nr.quantize.planeDst=function(e,t,r,n,i){var l=e.e;return l[0]*t+l[1]*r+l[2]*n+l[3]*i-e.eMq};nr.quantize.dist=function(e,t,r,n,i){var l=t-e[0],h=r-e[1],p=n-e[2],o=i-e[3];return l*l+h*h+p*p+o*o};nr.quantize.splitPixels=function(e,t,r,n,i,l){var h=nr.quantize.vecDot;for(n-=4;r<n;){for(;h(e,r,i)<=l;)r+=4;for(;h(e,n,i)>l;)n-=4;if(r>=n)break;var p=t[r>>2];t[r>>2]=t[n>>2],t[n>>2]=p,r+=4,n-=4}for(;h(e,r,i)>l;)r-=4;return r+4};nr.quantize.vecDot=function(e,t,r){return e[t]*r[0]+e[t+1]*r[1]+e[t+2]*r[2]+e[t+3]*r[3]};nr.quantize.stats=function(e,t,r){for(var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[0,0,0,0],l=r-t>>2,h=t;h<r;h+=4){var p=e[h]*.00392156862745098,o=e[h+1]*(1/255),_=e[h+2]*(1/255),C=e[h+3]*(1/255);i[0]+=p,i[1]+=o,i[2]+=_,i[3]+=C,n[0]+=p*p,n[1]+=p*o,n[2]+=p*_,n[3]+=p*C,n[5]+=o*o,n[6]+=o*_,n[7]+=o*C,n[10]+=_*_,n[11]+=_*C,n[15]+=C*C}return n[4]=n[1],n[8]=n[2],n[9]=n[6],n[12]=n[3],n[13]=n[7],n[14]=n[11],{R:n,m:i,N:l}};nr.quantize.estats=function(e){var t=e.R,r=e.m,n=e.N,i=r[0],l=r[1],h=r[2],p=r[3],o=n==0?0:1/n,_=[t[0]-i*i*o,t[1]-i*l*o,t[2]-i*h*o,t[3]-i*p*o,t[4]-l*i*o,t[5]-l*l*o,t[6]-l*h*o,t[7]-l*p*o,t[8]-h*i*o,t[9]-h*l*o,t[10]-h*h*o,t[11]-h*p*o,t[12]-p*i*o,t[13]-p*l*o,t[14]-p*h*o,t[15]-p*p*o],C=_,M=nr.M4,L=[.5,.5,.5,.5],z=0,j=0;if(n!=0)for(var K=0;K<10&&(L=M.multVec(C,L),j=Math.sqrt(M.dot(L,L)),L=M.sml(1/j,L),!(Math.abs(j-z)<1e-9));K++)z=j;var $=[i*o,l*o,h*o,p*o],q=M.dot(M.sml(255,$),L);return{Cov:_,q:$,e:L,L:z,eMq255:q,eMq:M.dot(L,$),rgba:(Math.round(255*$[3])<<24|Math.round(255*$[2])<<16|Math.round(255*$[1])<<8|Math.round(255*$[0])<<0)>>>0}};nr.M4={multVec:function(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],e[4]*t[0]+e[5]*t[1]+e[6]*t[2]+e[7]*t[3],e[8]*t[0]+e[9]*t[1]+e[10]*t[2]+e[11]*t[3],e[12]*t[0]+e[13]*t[1]+e[14]*t[2]+e[15]*t[3]]},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},sml:function(e,t){return[e*t[0],e*t[1],e*t[2],e*t[3]]}};nr.encode.concatRGBA=function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r].byteLength;for(var n=new Uint8Array(t),i=0,r=0;r<e.length;r++){for(var l=new Uint8Array(e[r]),h=l.length,p=0;p<h;p+=4){var o=l[p],_=l[p+1],C=l[p+2],M=l[p+3];M==0&&(o=_=C=0),n[i+p]=o,n[i+p+1]=_,n[i+p+2]=C,n[i+p+3]=M}i+=h}return n.buffer};var l4e=function(e){if(e===0)return um.Greyscale;if(e===2)return um.Truecolour;if(e===3)return um.IndexedColour;if(e===4)return um.GreyscaleWithAlpha;if(e===6)return um.TruecolourWithAlpha;throw new Error("Unknown color type: "+e)},c4e=function(e){for(var t=Math.floor(e.length/4),r=new Uint8Array(t*3),n=new Uint8Array(t*1),i=0,l=0,h=0;i<e.length;)r[l++]=e[i++],r[l++]=e[i++],r[l++]=e[i++],n[h++]=e[i++];return{rgbChannel:r,alphaChannel:n}},um;(function(e){e.Greyscale="Greyscale",e.Truecolour="Truecolour",e.IndexedColour="IndexedColour",e.GreyscaleWithAlpha="GreyscaleWithAlpha",e.TruecolourWithAlpha="TruecolourWithAlpha"})(um||(um={}));var u4e=function(){function e(t){var r=nr.decode(t),n=nr.toRGBA8(r);if(n.length>1)throw new Error("Animated PNGs are not supported");var i=new Uint8Array(n[0]),l=c4e(i),h=l.rgbChannel,p=l.alphaChannel;this.rgbChannel=h;var o=p.some(function(_){return _<255});o&&(this.alphaChannel=p),this.type=l4e(r.ctype),this.width=r.width,this.height=r.height,this.bitsPerComponent=8}return e.load=function(t){return new e(t)},e}(),TJ=function(){function e(t){this.image=t,this.bitsPerComponent=t.bitsPerComponent,this.width=t.width,this.height=t.height,this.colorSpace="DeviceRGB"}return e.for=function(t){return Tn(this,void 0,void 0,function(){var r;return In(this,function(n){return r=u4e.load(t),[2,new e(r)]})})},e.prototype.embedIntoContext=function(t,r){return Tn(this,void 0,void 0,function(){var n,i;return In(this,function(l){return n=this.embedAlphaChannel(t),i=t.flateStream(this.image.rgbChannel,{Type:"XObject",Subtype:"Image",BitsPerComponent:this.image.bitsPerComponent,Width:this.image.width,Height:this.image.height,ColorSpace:this.colorSpace,SMask:n}),r?(t.assign(r,i),[2,r]):[2,t.register(i)]})})},e.prototype.embedAlphaChannel=function(t){if(this.image.alphaChannel){var r=t.flateStream(this.image.alphaChannel,{Type:"XObject",Subtype:"Image",Height:this.image.height,Width:this.image.width,BitsPerComponent:this.image.bitsPerComponent,ColorSpace:"DeviceGray",Decode:[0,1]});return t.register(r)}},e}(),IJ=function(){function e(t,r,n){this.bytes=t,this.start=r||0,this.pos=this.start,this.end=r&&n?r+n:this.bytes.length}return Object.defineProperty(e.prototype,"length",{get:function(){return this.end-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this.length===0},enumerable:!1,configurable:!0}),e.prototype.getByte=function(){return this.pos>=this.end?-1:this.bytes[this.pos++]},e.prototype.getUint16=function(){var t=this.getByte(),r=this.getByte();return t===-1||r===-1?-1:(t<<8)+r},e.prototype.getInt32=function(){var t=this.getByte(),r=this.getByte(),n=this.getByte(),i=this.getByte();return(t<<24)+(r<<16)+(n<<8)+i},e.prototype.getBytes=function(t,r){r===void 0&&(r=!1);var n=this.bytes,i=this.pos,l=this.end;if(t){var p=i+t;p>l&&(p=l),this.pos=p;var h=n.subarray(i,p);return r?new Uint8ClampedArray(h):h}else{var h=n.subarray(i,l);return r?new Uint8ClampedArray(h):h}},e.prototype.peekByte=function(){var t=this.getByte();return this.pos--,t},e.prototype.peekBytes=function(t,r){r===void 0&&(r=!1);var n=this.getBytes(t,r);return this.pos-=n.length,n},e.prototype.skip=function(t){t||(t=1),this.pos+=t},e.prototype.reset=function(){this.pos=this.start},e.prototype.moveStart=function(){this.start=this.pos},e.prototype.makeSubStream=function(t,r){return new e(this.bytes,t,r)},e.prototype.decode=function(){return this.bytes},e}(),h4e=new Uint8Array(0),uw=function(){function e(t){if(this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=h4e,this.minBufferLength=512,t)for(;this.minBufferLength<t;)this.minBufferLength*=2}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){for(;!this.eof&&this.bufferLength===0;)this.readBlock();return this.bufferLength===0},enumerable:!1,configurable:!0}),e.prototype.getByte=function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.pos++]},e.prototype.getUint16=function(){var t=this.getByte(),r=this.getByte();return t===-1||r===-1?-1:(t<<8)+r},e.prototype.getInt32=function(){var t=this.getByte(),r=this.getByte(),n=this.getByte(),i=this.getByte();return(t<<24)+(r<<16)+(n<<8)+i},e.prototype.getBytes=function(t,r){r===void 0&&(r=!1);var n,i=this.pos;if(t){for(this.ensureBuffer(i+t),n=i+t;!this.eof&&this.bufferLength<n;)this.readBlock();var l=this.bufferLength;n>l&&(n=l)}else{for(;!this.eof;)this.readBlock();n=this.bufferLength}this.pos=n;var h=this.buffer.subarray(i,n);return r&&!(h instanceof Uint8ClampedArray)?new Uint8ClampedArray(h):h},e.prototype.peekByte=function(){var t=this.getByte();return this.pos--,t},e.prototype.peekBytes=function(t,r){r===void 0&&(r=!1);var n=this.getBytes(t,r);return this.pos-=n.length,n},e.prototype.skip=function(t){t||(t=1),this.pos+=t},e.prototype.reset=function(){this.pos=0},e.prototype.makeSubStream=function(t,r){for(var n=t+r;this.bufferLength<=n&&!this.eof;)this.readBlock();return new IJ(this.buffer,t,r)},e.prototype.decode=function(){for(;!this.eof;)this.readBlock();return this.buffer.subarray(0,this.bufferLength)},e.prototype.readBlock=function(){throw new au(this.constructor.name,"readBlock")},e.prototype.ensureBuffer=function(t){var r=this.buffer;if(t<=r.byteLength)return r;for(var n=this.minBufferLength;n<t;)n*=2;var i=new Uint8Array(n);return i.set(r),this.buffer=i},e}(),Sj=function(e){return e===32||e===9||e===13||e===10},A4e=function(e){Ar(t,e);function t(r,n){var i=e.call(this,n)||this;return i.stream=r,i.input=new Uint8Array(5),n&&(n=.8*n),i}return t.prototype.readBlock=function(){for(var r=126,n=122,i=-1,l=this.stream,h=l.getByte();Sj(h);)h=l.getByte();if(h===i||h===r){this.eof=!0;return}var p=this.bufferLength,o,_;if(h===n){for(o=this.ensureBuffer(p+4),_=0;_<4;++_)o[p+_]=0;this.bufferLength+=4}else{var C=this.input;for(C[0]=h,_=1;_<5;++_){for(h=l.getByte();Sj(h);)h=l.getByte();if(C[_]=h,h===i||h===r)break}if(o=this.ensureBuffer(p+_-1),this.bufferLength+=_-1,_<5){for(;_<5;++_)C[_]=117;this.eof=!0}var M=0;for(_=0;_<5;++_)M=M*85+(C[_]-33);for(_=3;_>=0;--_)o[p+_]=M&255,M>>=8}},t}(uw),d4e=function(e){Ar(t,e);function t(r,n){var i=e.call(this,n)||this;return i.stream=r,i.firstDigit=-1,n&&(n=.5*n),i}return t.prototype.readBlock=function(){var r=8e3,n=this.stream.getBytes(r);if(!n.length){this.eof=!0;return}for(var i=n.length+1>>1,l=this.ensureBuffer(this.bufferLength+i),h=this.bufferLength,p=this.firstDigit,o=0,_=n.length;o<_;o++){var C=n[o],M=void 0;if(C>=48&&C<=57)M=C&15;else if(C>=65&&C<=70||C>=97&&C<=102)M=(C&15)+9;else if(C===62){this.eof=!0;break}else continue;p<0?p=M:(l[h++]=p<<4|M,p=-1)}p>=0&&this.eof&&(l[h++]=p<<4,p=-1),this.firstDigit=p,this.bufferLength=h},t}(uw),Ej=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f4e=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),p4e=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),m4e=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],g4e=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5],y4e=function(e){Ar(t,e);function t(r,n){var i=e.call(this,n)||this;i.stream=r;var l=r.getByte(),h=r.getByte();if(l===-1||h===-1)throw new Error("Invalid header in flate stream: "+l+", "+h);if((l&15)!==8)throw new Error("Unknown compression method in flate stream: "+l+", "+h);if(((l<<8)+h)%31!==0)throw new Error("Bad FCHECK in flate stream: "+l+", "+h);if(h&32)throw new Error("FDICT bit set in flate stream: "+l+", "+h);return i.codeSize=0,i.codeBuf=0,i}return t.prototype.readBlock=function(){var r,n,i=this.stream,l=this.getBits(3);if(l&1&&(this.eof=!0),l>>=1,l===0){var h=void 0;if((h=i.getByte())===-1)throw new Error("Bad block header in flate stream");var p=h;if((h=i.getByte())===-1)throw new Error("Bad block header in flate stream");if(p|=h<<8,(h=i.getByte())===-1)throw new Error("Bad block header in flate stream");var o=h;if((h=i.getByte())===-1)throw new Error("Bad block header in flate stream");if(o|=h<<8,o!==(~p&65535)&&(p!==0||o!==0))throw new Error("Bad uncompressed block length in flate stream");this.codeBuf=0,this.codeSize=0;var _=this.bufferLength;r=this.ensureBuffer(_+p);var C=_+p;if(this.bufferLength=C,p===0)i.peekByte()===-1&&(this.eof=!0);else for(var M=_;M<C;++M){if((h=i.getByte())===-1){this.eof=!0;break}r[M]=h}return}var L,z;if(l===1)L=m4e,z=g4e;else if(l===2){var j=this.getBits(5)+257,K=this.getBits(5)+1,$=this.getBits(4)+4,q=new Uint8Array(Ej.length),ee=void 0;for(ee=0;ee<$;++ee)q[Ej[ee]]=this.getBits(3);var ie=this.generateHuffmanTable(q);n=0,ee=0;for(var fe=j+K,me=new Uint8Array(fe),ye=void 0,se=void 0,re=void 0;ee<fe;){var de=this.getCode(ie);if(de===16)ye=2,se=3,re=n;else if(de===17)ye=3,se=3,re=n=0;else if(de===18)ye=7,se=11,re=n=0;else{me[ee++]=n=de;continue}for(var _e=this.getBits(ye)+se;_e-- >0;)me[ee++]=re}L=this.generateHuffmanTable(me.subarray(0,j)),z=this.generateHuffmanTable(me.subarray(j,fe))}else throw new Error("Unknown block type in flate stream");r=this.buffer;for(var ve=r?r.length:0,Pe=this.bufferLength;;){var Ee=this.getCode(L);if(Ee<256){Pe+1>=ve&&(r=this.ensureBuffer(Pe+1),ve=r.length),r[Pe++]=Ee;continue}if(Ee===256){this.bufferLength=Pe;return}Ee-=257,Ee=f4e[Ee];var Ht=Ee>>16;Ht>0&&(Ht=this.getBits(Ht)),n=(Ee&65535)+Ht,Ee=this.getCode(z),Ee=p4e[Ee],Ht=Ee>>16,Ht>0&&(Ht=this.getBits(Ht));var Xt=(Ee&65535)+Ht;Pe+n>=ve&&(r=this.ensureBuffer(Pe+n),ve=r.length);for(var gt=0;gt<n;++gt,++Pe)r[Pe]=r[Pe-Xt]}},t.prototype.getBits=function(r){for(var n=this.stream,i=this.codeSize,l=this.codeBuf,h;i<r;){if((h=n.getByte())===-1)throw new Error("Bad encoding in flate stream");l|=h<<i,i+=8}return h=l&(1<<r)-1,this.codeBuf=l>>r,this.codeSize=i-=r,h},t.prototype.getCode=function(r){for(var n=this.stream,i=r[0],l=r[1],h=this.codeSize,p=this.codeBuf,o;h<l&&(o=n.getByte())!==-1;)p|=o<<h,h+=8;var _=i[p&(1<<l)-1];typeof i=="number"&&console.log("FLATE:",_);var C=_>>16,M=_&65535;if(C<1||h<C)throw new Error("Bad encoding in flate stream");return this.codeBuf=p>>C,this.codeSize=h-C,M},t.prototype.generateHuffmanTable=function(r){var n=r.length,i=0,l;for(l=0;l<n;++l)r[l]>i&&(i=r[l]);for(var h=1<<i,p=new Int32Array(h),o=1,_=0,C=2;o<=i;++o,_<<=1,C<<=1)for(var M=0;M<n;++M)if(r[M]===o){var L=0,z=_;for(l=0;l<o;++l)L=L<<1|z&1,z>>=1;for(l=L;l<h;l+=C)p[l]=o<<16|M;++_}return[p,i]},t}(uw),v4e=function(e){Ar(t,e);function t(r,n,i){var l=e.call(this,n)||this;l.stream=r,l.cachedData=0,l.bitsCached=0;for(var h=4096,p={earlyChange:i,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(h),dictionaryLengths:new Uint16Array(h),dictionaryPrevCodes:new Uint16Array(h),currentSequence:new Uint8Array(h),currentSequenceLength:0},o=0;o<256;++o)p.dictionaryValues[o]=o,p.dictionaryLengths[o]=1;return l.lzwState=p,l}return t.prototype.readBlock=function(){var r=512,n=r*2,i=r,l,h,p,o=this.lzwState;if(o){var _=o.earlyChange,C=o.nextCode,M=o.dictionaryValues,L=o.dictionaryLengths,z=o.dictionaryPrevCodes,j=o.codeLength,K=o.prevCode,$=o.currentSequence,q=o.currentSequenceLength,ee=0,ie=this.bufferLength,fe=this.ensureBuffer(this.bufferLength+n);for(l=0;l<r;l++){var me=this.readBits(j),ye=q>0;if(!me||me<256)$[0]=me,q=1;else if(me>=258)if(me<C)for(q=L[me],h=q-1,p=me;h>=0;h--)$[h]=M[p],p=z[p];else $[q++]=$[0];else if(me===256){j=9,C=258,q=0;continue}else{this.eof=!0,delete this.lzwState;break}if(ye&&(z[C]=K,L[C]=L[K]+1,M[C]=$[0],C++,j=C+_&C+_-1?j:Math.min(Math.log(C+_)/.6931471805599453+1,12)|0),K=me,ee+=q,n<ee){do n+=i;while(n<ee);fe=this.ensureBuffer(this.bufferLength+n)}for(h=0;h<q;h++)fe[ie++]=$[h]}o.nextCode=C,o.codeLength=j,o.prevCode=K,o.currentSequenceLength=q,this.bufferLength=ie}},t.prototype.readBits=function(r){for(var n=this.bitsCached,i=this.cachedData;n<r;){var l=this.stream.getByte();if(l===-1)return this.eof=!0,null;i=i<<8|l,n+=8}return this.bitsCached=n-=r,this.cachedData=i,i>>>n&(1<<r)-1},t}(uw),_4e=function(e){Ar(t,e);function t(r,n){var i=e.call(this,n)||this;return i.stream=r,i}return t.prototype.readBlock=function(){var r=this.stream.getBytes(2);if(!r||r.length<2||r[0]===128){this.eof=!0;return}var n,i=this.bufferLength,l=r[0];if(l<128){if(n=this.ensureBuffer(i+l+1),n[i++]=r[1],l>0){var h=this.stream.getBytes(l);n.set(h,i),i+=l}}else{l=257-l;var p=r[1];n=this.ensureBuffer(i+l+1);for(var o=0;o<l;o++)n[i++]=p}this.bufferLength=i},t}(uw),Tj=function(e,t,r){if(t===Ge.of("FlateDecode"))return new y4e(e);if(t===Ge.of("LZWDecode")){var n=1;if(r instanceof Sn){var i=r.lookup(Ge.of("EarlyChange"));i instanceof pn&&(n=i.asNumber())}return new v4e(e,void 0,n)}if(t===Ge.of("ASCII85Decode"))return new A4e(e);if(t===Ge.of("ASCIIHexDecode"))return new d4e(e);if(t===Ge.of("RunLengthDecode"))return new _4e(e);throw new Ike(t.asString())},FJ=function(e){var t=e.dict,r=e.contents,n=new IJ(r),i=t.lookup(Ge.of("Filter")),l=t.lookup(Ge.of("DecodeParms"));if(i instanceof Ge)n=Tj(n,i,l);else if(i instanceof mi)for(var h=0,p=i.size();h<p;h++)n=Tj(n,i.lookup(h,Ge),l&&l.lookupMaybe(h,Sn));else if(i)throw new RT([Ge,mi],i);return n},x4e=function(e){var t=e.MediaBox(),r=t.lookup(2,pn).asNumber()-t.lookup(0,pn).asNumber(),n=t.lookup(3,pn).asNumber()-t.lookup(1,pn).asNumber();return{left:0,bottom:0,right:r,top:n}},b4e=function(e){return[1,0,0,1,-e.left,-e.bottom]},PJ=function(){function e(t,r,n){this.page=t;var i=r??x4e(t);this.width=i.right-i.left,this.height=i.top-i.bottom,this.boundingBox=i,this.transformationMatrix=n??b4e(i)}return e.for=function(t,r,n){return Tn(this,void 0,void 0,function(){return In(this,function(i){return[2,new e(t,r,n)]})})},e.prototype.embedIntoContext=function(t,r){return Tn(this,void 0,void 0,function(){var n,i,l,h,p,o,_,C,M,L;return In(this,function(z){if(n=this.page.normalizedEntries(),i=n.Contents,l=n.Resources,!i)throw new Fke;return h=this.decodeContents(i),p=this.boundingBox,o=p.left,_=p.bottom,C=p.right,M=p.top,L=t.flateStream(h,{Type:"XObject",Subtype:"Form",FormType:1,BBox:[o,_,C,M],Matrix:this.transformationMatrix,Resources:l}),r?(t.assign(r,L),[2,r]):[2,t.register(L)]})})},e.prototype.decodeContents=function(t){for(var r=Uint8Array.of(We.Newline),n=[],i=0,l=t.size();i<l;i++){var h=t.lookup(i,fc),p=void 0;if(h instanceof Bb)p=FJ(h).decode();else if(h instanceof Sx)p=h.getUnencodedContents();else throw new Pke(h);n.push(p,r)}return qPe.apply(void 0,n)},e}(),gS=function(e,t){if(e!==void 0)return t[e]},Ex;(function(e){e.UseNone="UseNone",e.UseOutlines="UseOutlines",e.UseThumbs="UseThumbs",e.UseOC="UseOC"})(Ex||(Ex={}));var Tx;(function(e){e.L2R="L2R",e.R2L="R2L"})(Tx||(Tx={}));var Ix;(function(e){e.None="None",e.AppDefault="AppDefault"})(Ix||(Ix={}));var LT;(function(e){e.Simplex="Simplex",e.DuplexFlipShortEdge="DuplexFlipShortEdge",e.DuplexFlipLongEdge="DuplexFlipLongEdge"})(LT||(LT={}));var Ij=function(){function e(t){this.dict=t}return e.prototype.lookupBool=function(t){var r=this.dict.lookup(Ge.of(t));if(r instanceof wb)return r},e.prototype.lookupName=function(t){var r=this.dict.lookup(Ge.of(t));if(r instanceof Ge)return r},e.prototype.HideToolbar=function(){return this.lookupBool("HideToolbar")},e.prototype.HideMenubar=function(){return this.lookupBool("HideMenubar")},e.prototype.HideWindowUI=function(){return this.lookupBool("HideWindowUI")},e.prototype.FitWindow=function(){return this.lookupBool("FitWindow")},e.prototype.CenterWindow=function(){return this.lookupBool("CenterWindow")},e.prototype.DisplayDocTitle=function(){return this.lookupBool("DisplayDocTitle")},e.prototype.NonFullScreenPageMode=function(){return this.lookupName("NonFullScreenPageMode")},e.prototype.Direction=function(){return this.lookupName("Direction")},e.prototype.PrintScaling=function(){return this.lookupName("PrintScaling")},e.prototype.Duplex=function(){return this.lookupName("Duplex")},e.prototype.PickTrayByPDFSize=function(){return this.lookupBool("PickTrayByPDFSize")},e.prototype.PrintPageRange=function(){var t=this.dict.lookup(Ge.of("PrintPageRange"));if(t instanceof mi)return t},e.prototype.NumCopies=function(){var t=this.dict.lookup(Ge.of("NumCopies"));if(t instanceof pn)return t},e.prototype.getHideToolbar=function(){var t,r;return(r=(t=this.HideToolbar())===null||t===void 0?void 0:t.asBoolean())!==null&&r!==void 0?r:!1},e.prototype.getHideMenubar=function(){var t,r;return(r=(t=this.HideMenubar())===null||t===void 0?void 0:t.asBoolean())!==null&&r!==void 0?r:!1},e.prototype.getHideWindowUI=function(){var t,r;return(r=(t=this.HideWindowUI())===null||t===void 0?void 0:t.asBoolean())!==null&&r!==void 0?r:!1},e.prototype.getFitWindow=function(){var t,r;return(r=(t=this.FitWindow())===null||t===void 0?void 0:t.asBoolean())!==null&&r!==void 0?r:!1},e.prototype.getCenterWindow=function(){var t,r;return(r=(t=this.CenterWindow())===null||t===void 0?void 0:t.asBoolean())!==null&&r!==void 0?r:!1},e.prototype.getDisplayDocTitle=function(){var t,r;return(r=(t=this.DisplayDocTitle())===null||t===void 0?void 0:t.asBoolean())!==null&&r!==void 0?r:!1},e.prototype.getNonFullScreenPageMode=function(){var t,r,n=(t=this.NonFullScreenPageMode())===null||t===void 0?void 0:t.decodeText();return(r=gS(n,Ex))!==null&&r!==void 0?r:Ex.UseNone},e.prototype.getReadingDirection=function(){var t,r,n=(t=this.Direction())===null||t===void 0?void 0:t.decodeText();return(r=gS(n,Tx))!==null&&r!==void 0?r:Tx.L2R},e.prototype.getPrintScaling=function(){var t,r,n=(t=this.PrintScaling())===null||t===void 0?void 0:t.decodeText();return(r=gS(n,Ix))!==null&&r!==void 0?r:Ix.AppDefault},e.prototype.getDuplex=function(){var t,r=(t=this.Duplex())===null||t===void 0?void 0:t.decodeText();return gS(r,LT)},e.prototype.getPickTrayByPDFSize=function(){var t;return(t=this.PickTrayByPDFSize())===null||t===void 0?void 0:t.asBoolean()},e.prototype.getPrintPageRange=function(){var t=this.PrintPageRange();if(!t)return[];for(var r=[],n=0;n<t.size();n+=2){var i=t.lookup(n,pn).asNumber(),l=t.lookup(n+1,pn).asNumber();r.push({start:i,end:l})}return r},e.prototype.getNumCopies=function(){var t,r;return(r=(t=this.NumCopies())===null||t===void 0?void 0:t.asNumber())!==null&&r!==void 0?r:1},e.prototype.setHideToolbar=function(t){var r=this.dict.context.obj(t);this.dict.set(Ge.of("HideToolbar"),r)},e.prototype.setHideMenubar=function(t){var r=this.dict.context.obj(t);this.dict.set(Ge.of("HideMenubar"),r)},e.prototype.setHideWindowUI=function(t){var r=this.dict.context.obj(t);this.dict.set(Ge.of("HideWindowUI"),r)},e.prototype.setFitWindow=function(t){var r=this.dict.context.obj(t);this.dict.set(Ge.of("FitWindow"),r)},e.prototype.setCenterWindow=function(t){var r=this.dict.context.obj(t);this.dict.set(Ge.of("CenterWindow"),r)},e.prototype.setDisplayDocTitle=function(t){var r=this.dict.context.obj(t);this.dict.set(Ge.of("DisplayDocTitle"),r)},e.prototype.setNonFullScreenPageMode=function(t){Tf(t,"nonFullScreenPageMode",Ex);var r=Ge.of(t);this.dict.set(Ge.of("NonFullScreenPageMode"),r)},e.prototype.setReadingDirection=function(t){Tf(t,"readingDirection",Tx);var r=Ge.of(t);this.dict.set(Ge.of("Direction"),r)},e.prototype.setPrintScaling=function(t){Tf(t,"printScaling",Ix);var r=Ge.of(t);this.dict.set(Ge.of("PrintScaling"),r)},e.prototype.setDuplex=function(t){Tf(t,"duplex",LT);var r=Ge.of(t);this.dict.set(Ge.of("Duplex"),r)},e.prototype.setPickTrayByPDFSize=function(t){var r=this.dict.context.obj(t);this.dict.set(Ge.of("PickTrayByPDFSize"),r)},e.prototype.setPrintPageRange=function(t){Array.isArray(t)||(t=[t]);for(var r=[],n=0,i=t.length;n<i;n++)r.push(t[n].start),r.push(t[n].end);vJ(r,"printPageRange",["number"]);var l=this.dict.context.obj(r);this.dict.set(Ge.of("PrintPageRange"),l)},e.prototype.setNumCopies=function(t){cc(t,"numCopies",1,Number.MAX_VALUE),Tke(t,"numCopies");var r=this.dict.context.obj(t);this.dict.set(Ge.of("NumCopies"),r)},e.fromDict=function(t){return new e(t)},e.create=function(t){var r=t.obj({});return new e(r)},e}(),w4e=/\/([^\0\t\n\f\r\ ]+)[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]+Tf/,MJ=function(){function e(t,r){this.dict=t,this.ref=r}return e.prototype.T=function(){return this.dict.lookupMaybe(Ge.of("T"),Pi,cn)},e.prototype.Ff=function(){var t=this.getInheritableAttribute(Ge.of("Ff"));return this.dict.context.lookupMaybe(t,pn)},e.prototype.V=function(){var t=this.getInheritableAttribute(Ge.of("V"));return this.dict.context.lookup(t)},e.prototype.Kids=function(){return this.dict.lookupMaybe(Ge.of("Kids"),mi)},e.prototype.DA=function(){var t=this.dict.lookup(Ge.of("DA"));if(t instanceof Pi||t instanceof cn)return t},e.prototype.setKids=function(t){this.dict.set(Ge.of("Kids"),this.dict.context.obj(t))},e.prototype.getParent=function(){var t=this.dict.get(Ge.of("Parent"));if(t instanceof Mi){var r=this.dict.lookup(Ge.of("Parent"),Sn);return new e(r,t)}},e.prototype.setParent=function(t){t?this.dict.set(Ge.of("Parent"),t):this.dict.delete(Ge.of("Parent"))},e.prototype.getFullyQualifiedName=function(){var t=this.getParent();return t?t.getFullyQualifiedName()+"."+this.getPartialName():this.getPartialName()},e.prototype.getPartialName=function(){var t;return(t=this.T())===null||t===void 0?void 0:t.decodeText()},e.prototype.setPartialName=function(t){t?this.dict.set(Ge.of("T"),cn.fromText(t)):this.dict.delete(Ge.of("T"))},e.prototype.setDefaultAppearance=function(t){this.dict.set(Ge.of("DA"),Pi.of(t))},e.prototype.getDefaultAppearance=function(){var t=this.DA();return t instanceof cn?t.decodeText():t==null?void 0:t.asString()},e.prototype.setFontSize=function(t){var r,n=(r=this.getFullyQualifiedName())!==null&&r!==void 0?r:"",i=this.getDefaultAppearance();if(!i)throw new Dke(n);var l=nU(i,w4e);if(!l.match)throw new Lke(n);var h=i.slice(0,l.pos-l.match[0].length),p=l.pos<=i.length?i.slice(l.pos):"",o=l.match[1],_=h+" /"+o+" "+t+" Tf "+p;this.setDefaultAppearance(_)},e.prototype.getFlags=function(){var t,r;return(r=(t=this.Ff())===null||t===void 0?void 0:t.asNumber())!==null&&r!==void 0?r:0},e.prototype.setFlags=function(t){this.dict.set(Ge.of("Ff"),pn.of(t))},e.prototype.hasFlag=function(t){var r=this.getFlags();return(r&t)!==0},e.prototype.setFlag=function(t){var r=this.getFlags();this.setFlags(r|t)},e.prototype.clearFlag=function(t){var r=this.getFlags();this.setFlags(r&~t)},e.prototype.setFlagTo=function(t,r){r?this.setFlag(t):this.clearFlag(t)},e.prototype.getInheritableAttribute=function(t){var r;return this.ascend(function(n){r||(r=n.dict.get(t))}),r},e.prototype.ascend=function(t){t(this);var r=this.getParent();r&&r.ascend(t)},e}(),Tk=function(){function e(t){this.dict=t}return e.prototype.W=function(){var t=this.dict.lookup(Ge.of("W"));if(t instanceof pn)return t},e.prototype.getWidth=function(){var t,r;return(r=(t=this.W())===null||t===void 0?void 0:t.asNumber())!==null&&r!==void 0?r:1},e.prototype.setWidth=function(t){var r=this.dict.context.obj(t);this.dict.set(Ge.of("W"),r)},e.fromDict=function(t){return new e(t)},e}(),B4e=function(){function e(t){this.dict=t}return e.prototype.Rect=function(){return this.dict.lookup(Ge.of("Rect"),mi)},e.prototype.AP=function(){return this.dict.lookupMaybe(Ge.of("AP"),Sn)},e.prototype.F=function(){var t=this.dict.lookup(Ge.of("F"));return this.dict.context.lookupMaybe(t,pn)},e.prototype.getRectangle=function(){var t,r=this.Rect();return(t=r==null?void 0:r.asRectangle())!==null&&t!==void 0?t:{x:0,y:0,width:0,height:0}},e.prototype.setRectangle=function(t){var r=t.x,n=t.y,i=t.width,l=t.height,h=this.dict.context.obj([r,n,r+i,n+l]);this.dict.set(Ge.of("Rect"),h)},e.prototype.getAppearanceState=function(){var t=this.dict.lookup(Ge.of("AS"));if(t instanceof Ge)return t},e.prototype.setAppearanceState=function(t){this.dict.set(Ge.of("AS"),t)},e.prototype.setAppearances=function(t){this.dict.set(Ge.of("AP"),t)},e.prototype.ensureAP=function(){var t=this.AP();return t||(t=this.dict.context.obj({}),this.dict.set(Ge.of("AP"),t)),t},e.prototype.getNormalAppearance=function(){var t=this.ensureAP(),r=t.get(Ge.of("N"));if(r instanceof Mi||r instanceof Sn)return r;throw new Error("Unexpected N type: "+(r==null?void 0:r.constructor.name))},e.prototype.setNormalAppearance=function(t){var r=this.ensureAP();r.set(Ge.of("N"),t)},e.prototype.setRolloverAppearance=function(t){var r=this.ensureAP();r.set(Ge.of("R"),t)},e.prototype.setDownAppearance=function(t){var r=this.ensureAP();r.set(Ge.of("D"),t)},e.prototype.removeRolloverAppearance=function(){var t=this.AP();t==null||t.delete(Ge.of("R"))},e.prototype.removeDownAppearance=function(){var t=this.AP();t==null||t.delete(Ge.of("D"))},e.prototype.getAppearances=function(){var t=this.AP();if(t){var r=t.lookup(Ge.of("N"),Sn,fc),n=t.lookupMaybe(Ge.of("R"),Sn,fc),i=t.lookupMaybe(Ge.of("D"),Sn,fc);return{normal:r,rollover:n,down:i}}},e.prototype.getFlags=function(){var t,r;return(r=(t=this.F())===null||t===void 0?void 0:t.asNumber())!==null&&r!==void 0?r:0},e.prototype.setFlags=function(t){this.dict.set(Ge.of("F"),pn.of(t))},e.prototype.hasFlag=function(t){var r=this.getFlags();return(r&t)!==0},e.prototype.setFlag=function(t){var r=this.getFlags();this.setFlags(r|t)},e.prototype.clearFlag=function(t){var r=this.getFlags();this.setFlags(r&~t)},e.prototype.setFlagTo=function(t,r){r?this.setFlag(t):this.clearFlag(t)},e.fromDict=function(t){return new e(t)},e}(),Ik=function(){function e(t){this.dict=t}return e.prototype.R=function(){var t=this.dict.lookup(Ge.of("R"));if(t instanceof pn)return t},e.prototype.BC=function(){var t=this.dict.lookup(Ge.of("BC"));if(t instanceof mi)return t},e.prototype.BG=function(){var t=this.dict.lookup(Ge.of("BG"));if(t instanceof mi)return t},e.prototype.CA=function(){var t=this.dict.lookup(Ge.of("CA"));if(t instanceof cn||t instanceof Pi)return t},e.prototype.RC=function(){var t=this.dict.lookup(Ge.of("RC"));if(t instanceof cn||t instanceof Pi)return t},e.prototype.AC=function(){var t=this.dict.lookup(Ge.of("AC"));if(t instanceof cn||t instanceof Pi)return t},e.prototype.getRotation=function(){var t;return(t=this.R())===null||t===void 0?void 0:t.asNumber()},e.prototype.getBorderColor=function(){var t=this.BC();if(t){for(var r=[],n=0,i=t==null?void 0:t.size();n<i;n++){var l=t.get(n);l instanceof pn&&r.push(l.asNumber())}return r}},e.prototype.getBackgroundColor=function(){var t=this.BG();if(t){for(var r=[],n=0,i=t==null?void 0:t.size();n<i;n++){var l=t.get(n);l instanceof pn&&r.push(l.asNumber())}return r}},e.prototype.getCaptions=function(){var t=this.CA(),r=this.RC(),n=this.AC();return{normal:t==null?void 0:t.decodeText(),rollover:r==null?void 0:r.decodeText(),down:n==null?void 0:n.decodeText()}},e.prototype.setRotation=function(t){var r=this.dict.context.obj(t);this.dict.set(Ge.of("R"),r)},e.prototype.setBorderColor=function(t){var r=this.dict.context.obj(t);this.dict.set(Ge.of("BC"),r)},e.prototype.setBackgroundColor=function(t){var r=this.dict.context.obj(t);this.dict.set(Ge.of("BG"),r)},e.prototype.setCaptions=function(t){var r=cn.fromText(t.normal);if(this.dict.set(Ge.of("CA"),r),t.rollover){var n=cn.fromText(t.rollover);this.dict.set(Ge.of("RC"),n)}else this.dict.delete(Ge.of("RC"));if(t.down){var i=cn.fromText(t.down);this.dict.set(Ge.of("AC"),i)}else this.dict.delete(Ge.of("AC"))},e.fromDict=function(t){return new e(t)},e}(),l2=function(e){Ar(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.MK=function(){var r=this.dict.lookup(Ge.of("MK"));if(r instanceof Sn)return r},t.prototype.BS=function(){var r=this.dict.lookup(Ge.of("BS"));if(r instanceof Sn)return r},t.prototype.DA=function(){var r=this.dict.lookup(Ge.of("DA"));if(r instanceof Pi||r instanceof cn)return r},t.prototype.P=function(){var r=this.dict.get(Ge.of("P"));if(r instanceof Mi)return r},t.prototype.setP=function(r){this.dict.set(Ge.of("P"),r)},t.prototype.setDefaultAppearance=function(r){this.dict.set(Ge.of("DA"),Pi.of(r))},t.prototype.getDefaultAppearance=function(){var r=this.DA();return r instanceof cn?r.decodeText():r==null?void 0:r.asString()},t.prototype.getAppearanceCharacteristics=function(){var r=this.MK();if(r)return Ik.fromDict(r)},t.prototype.getOrCreateAppearanceCharacteristics=function(){var r=this.MK();if(r)return Ik.fromDict(r);var n=Ik.fromDict(this.dict.context.obj({}));return this.dict.set(Ge.of("MK"),n.dict),n},t.prototype.getBorderStyle=function(){var r=this.BS();if(r)return Tk.fromDict(r)},t.prototype.getOrCreateBorderStyle=function(){var r=this.BS();if(r)return Tk.fromDict(r);var n=Tk.fromDict(this.dict.context.obj({}));return this.dict.set(Ge.of("BS"),n.dict),n},t.prototype.getOnValue=function(){var r,n=(r=this.getAppearances())===null||r===void 0?void 0:r.normal;if(n instanceof Sn)for(var i=n.keys(),l=0,h=i.length;l<h;l++){var p=i[l];if(p!==Ge.of("Off"))return p}},t.fromDict=function(r){return new t(r)},t.create=function(r,n){var i=r.obj({Type:"Annot",Subtype:"Widget",Rect:[0,0,0,0],Parent:n});return new t(i)},t}(B4e),lv=function(e){Ar(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.FT=function(){var r=this.getInheritableAttribute(Ge.of("FT"));return this.dict.context.lookup(r,Ge)},t.prototype.getWidgets=function(){var r=this.Kids();if(!r)return[l2.fromDict(this.dict)];for(var n=new Array(r.size()),i=0,l=r.size();i<l;i++){var h=r.lookup(i,Sn);n[i]=l2.fromDict(h)}return n},t.prototype.addWidget=function(r){var n=this.normalizedEntries().Kids;n.push(r)},t.prototype.removeWidget=function(r){var n=this.Kids();if(n){if(r<0||r>n.size())throw new kT(r,0,n.size());n.remove(r)}else{if(r!==0)throw new kT(r,0,0);this.setKids([])}},t.prototype.normalizedEntries=function(){var r=this.Kids();return r||(r=this.dict.context.obj([this.ref]),this.dict.set(Ge.of("Kids"),r)),{Kids:r}},t.fromDict=function(r,n){return new t(r,n)},t}(MJ),yU=function(e){Ar(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.Opt=function(){return this.dict.lookupMaybe(Ge.of("Opt"),Pi,cn,mi)},t.prototype.setOpt=function(r){this.dict.set(Ge.of("Opt"),this.dict.context.obj(r))},t.prototype.getExportValues=function(){var r=this.Opt();if(r){if(r instanceof Pi||r instanceof cn)return[r];for(var n=[],i=0,l=r.size();i<l;i++){var h=r.lookup(i);(h instanceof Pi||h instanceof cn)&&n.push(h)}return n}},t.prototype.removeExportValue=function(r){var n=this.Opt();if(n)if(n instanceof Pi||n instanceof cn){if(r!==0)throw new kT(r,0,0);this.setOpt([])}else{if(r<0||r>n.size())throw new kT(r,0,n.size());n.remove(r)}},t.prototype.normalizeExportValues=function(){for(var r,n,i,l,h=(r=this.getExportValues())!==null&&r!==void 0?r:[],p=[],o=this.getWidgets(),_=0,C=o.length;_<C;_++){var M=o[_],L=(n=h[_])!==null&&n!==void 0?n:cn.fromText((l=(i=M.getOnValue())===null||i===void 0?void 0:i.decodeText())!==null&&l!==void 0?l:"");p.push(L)}this.setOpt(p)},t.prototype.addOpt=function(r,n){var i;this.normalizeExportValues();var l=r.decodeText(),h;if(n)for(var p=(i=this.getExportValues())!==null&&i!==void 0?i:[],o=0,_=p.length;o<_;o++){var C=p[o];C.decodeText()===l&&(h=o)}var M=this.Opt();return M.push(r),h??M.size()-1},t.prototype.addWidgetWithOpt=function(r,n,i){var l=this.addOpt(n,i),h=Ge.of(String(l));return this.addWidget(r),h},t}(lv),CF=function(e){Ar(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.setValue=function(r){var n,i=(n=this.getOnValue())!==null&&n!==void 0?n:Ge.of("Yes");if(r!==i&&r!==Ge.of("Off"))throw new dU;this.dict.set(Ge.of("V"),r);for(var l=this.getWidgets(),h=0,p=l.length;h<p;h++){var o=l[h],_=o.getOnValue()===r?r:Ge.of("Off");o.setAppearanceState(_)}},t.prototype.getValue=function(){var r=this.V();return r instanceof Ge?r:Ge.of("Off")},t.prototype.getOnValue=function(){var r=this.getWidgets()[0];return r==null?void 0:r.getOnValue()},t.fromDict=function(r,n){return new t(r,n)},t.create=function(r){var n=r.obj({FT:"Btn",Kids:[]}),i=r.register(n);return new t(n,i)},t}(yU),vs=function(e){return 1<<e},qu;(function(e){e[e.ReadOnly=vs(0)]="ReadOnly",e[e.Required=vs(1)]="Required",e[e.NoExport=vs(2)]="NoExport"})(qu||(qu={}));var tu;(function(e){e[e.NoToggleToOff=vs(14)]="NoToggleToOff",e[e.Radio=vs(15)]="Radio",e[e.PushButton=vs(16)]="PushButton",e[e.RadiosInUnison=vs(25)]="RadiosInUnison"})(tu||(tu={}));var zo;(function(e){e[e.Multiline=vs(12)]="Multiline",e[e.Password=vs(13)]="Password",e[e.FileSelect=vs(20)]="FileSelect",e[e.DoNotSpellCheck=vs(22)]="DoNotSpellCheck",e[e.DoNotScroll=vs(23)]="DoNotScroll",e[e.Comb=vs(24)]="Comb",e[e.RichText=vs(25)]="RichText"})(zo||(zo={}));var Ii;(function(e){e[e.Combo=vs(17)]="Combo",e[e.Edit=vs(18)]="Edit",e[e.Sort=vs(19)]="Sort",e[e.MultiSelect=vs(21)]="MultiSelect",e[e.DoNotSpellCheck=vs(22)]="DoNotSpellCheck",e[e.CommitOnSelChange=vs(26)]="CommitOnSelChange"})(Ii||(Ii={}));var RJ=function(e){Ar(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.setValues=function(r){if(this.hasFlag(Ii.Combo)&&!this.hasFlag(Ii.Edit)&&!this.valuesAreValid(r))throw new dU;if(r.length===0&&this.dict.delete(Ge.of("V")),r.length===1&&this.dict.set(Ge.of("V"),r[0]),r.length>1){if(!this.hasFlag(Ii.MultiSelect))throw new kke;this.dict.set(Ge.of("V"),this.dict.context.obj(r))}this.updateSelectedIndices(r)},t.prototype.valuesAreValid=function(r){for(var n=this.getOptions(),i=function(o,_){var C=r[o].decodeText();if(!n.find(function(M){return C===(M.display||M.value).decodeText()}))return{value:!1}},l=0,h=r.length;l<h;l++){var p=i(l);if(typeof p=="object")return p.value}return!0},t.prototype.updateSelectedIndices=function(r){if(r.length>1){for(var n=new Array(r.length),i=this.getOptions(),l=function(o,_){var C=r[o].decodeText();n[o]=i.findIndex(function(M){return C===(M.display||M.value).decodeText()})},h=0,p=r.length;h<p;h++)l(h,p);this.dict.set(Ge.of("I"),this.dict.context.obj(n.sort()))}else this.dict.delete(Ge.of("I"))},t.prototype.getValues=function(){var r=this.V();if(r instanceof Pi||r instanceof cn)return[r];if(r instanceof mi){for(var n=[],i=0,l=r.size();i<l;i++){var h=r.lookup(i);(h instanceof Pi||h instanceof cn)&&n.push(h)}return n}return[]},t.prototype.Opt=function(){return this.dict.lookupMaybe(Ge.of("Opt"),Pi,cn,mi)},t.prototype.setOptions=function(r){for(var n=new Array(r.length),i=0,l=r.length;i<l;i++){var h=r[i],p=h.value,o=h.display;n[i]=this.dict.context.obj([p,o||p])}this.dict.set(Ge.of("Opt"),this.dict.context.obj(n))},t.prototype.getOptions=function(){var r=this.Opt();if(r instanceof Pi||r instanceof cn)return[{value:r,display:r}];if(r instanceof mi){for(var n=[],i=0,l=r.size();i<l;i++){var h=r.lookup(i);if((h instanceof Pi||h instanceof cn)&&n.push({value:h,display:h}),h instanceof mi&&h.size()>0){var p=h.lookup(0,Pi,cn),o=h.lookupMaybe(1,Pi,cn);n.push({value:p,display:o||p})}}return n}return[]},t}(lv),SF=function(e){Ar(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.fromDict=function(r,n){return new t(r,n)},t.create=function(r){var n=r.obj({FT:"Ch",Ff:Ii.Combo,Kids:[]}),i=r.register(n);return new t(n,i)},t}(RJ),OT=function(e){Ar(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.addField=function(r){var n=this.normalizedEntries().Kids;n==null||n.push(r)},t.prototype.normalizedEntries=function(){var r=this.Kids();return r||(r=this.dict.context.obj([]),this.dict.set(Ge.of("Kids"),r)),{Kids:r}},t.fromDict=function(r,n){return new t(r,n)},t.create=function(r){var n=r.obj({}),i=r.register(n);return new t(n,i)},t}(MJ),vU=function(e){Ar(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.fromDict=function(r,n){return new t(r,n)},t}(lv),EF=function(e){Ar(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.MaxLen=function(){var r=this.dict.lookup(Ge.of("MaxLen"));if(r instanceof pn)return r},t.prototype.Q=function(){var r=this.dict.lookup(Ge.of("Q"));if(r instanceof pn)return r},t.prototype.setMaxLength=function(r){this.dict.set(Ge.of("MaxLen"),pn.of(r))},t.prototype.removeMaxLength=function(){this.dict.delete(Ge.of("MaxLen"))},t.prototype.getMaxLength=function(){var r;return(r=this.MaxLen())===null||r===void 0?void 0:r.asNumber()},t.prototype.setQuadding=function(r){this.dict.set(Ge.of("Q"),pn.of(r))},t.prototype.getQuadding=function(){var r;return(r=this.Q())===null||r===void 0?void 0:r.asNumber()},t.prototype.setValue=function(r){this.dict.set(Ge.of("V"),r)},t.prototype.removeValue=function(){this.dict.delete(Ge.of("V"))},t.prototype.getValue=function(){var r=this.V();if(r instanceof Pi||r instanceof cn)return r},t.fromDict=function(r,n){return new t(r,n)},t.create=function(r){var n=r.obj({FT:"Tx",Kids:[]}),i=r.register(n);return new t(n,i)},t}(lv),TF=function(e){Ar(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.fromDict=function(r,n){return new t(r,n)},t.create=function(r){var n=r.obj({FT:"Btn",Ff:tu.PushButton,Kids:[]}),i=r.register(n);return new t(n,i)},t}(yU),IF=function(e){Ar(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.setValue=function(r){var n=this.getOnValues();if(!n.includes(r)&&r!==Ge.of("Off"))throw new dU;this.dict.set(Ge.of("V"),r);for(var i=this.getWidgets(),l=0,h=i.length;l<h;l++){var p=i[l],o=p.getOnValue()===r?r:Ge.of("Off");p.setAppearanceState(o)}},t.prototype.getValue=function(){var r=this.V();return r instanceof Ge?r:Ge.of("Off")},t.prototype.getOnValues=function(){for(var r=this.getWidgets(),n=[],i=0,l=r.length;i<l;i++){var h=r[i].getOnValue();h&&n.push(h)}return n},t.fromDict=function(r,n){return new t(r,n)},t.create=function(r){var n=r.obj({FT:"Btn",Ff:tu.Radio,Kids:[]}),i=r.register(n);return new t(n,i)},t}(yU),FF=function(e){Ar(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.fromDict=function(r,n){return new t(r,n)},t.create=function(r){var n=r.obj({FT:"Ch",Kids:[]}),i=r.register(n);return new t(n,i)},t}(RJ),_U=function(e){if(!e)return[];for(var t=[],r=0,n=e.size();r<n;r++){var i=e.get(r),l=e.lookup(r);i instanceof Mi&&l instanceof Sn&&t.push([kJ(l,i),i])}return t},kJ=function(e,t){var r=C4e(e);return r?OT.fromDict(e,t):S4e(e,t)},C4e=function(e){var t=e.lookup(Ge.of("Kids"));if(t instanceof mi)for(var r=0,n=t.size();r<n;r++){var i=t.lookup(r),l=i instanceof Sn&&i.has(Ge.of("T"));if(l)return!0}return!1},S4e=function(e,t){var r=xU(e,Ge.of("FT")),n=e.context.lookup(r,Ge);return n===Ge.of("Btn")?E4e(e,t):n===Ge.of("Ch")?T4e(e,t):n===Ge.of("Tx")?EF.fromDict(e,t):n===Ge.of("Sig")?vU.fromDict(e,t):lv.fromDict(e,t)},E4e=function(e,t){var r,n=xU(e,Ge.of("Ff")),i=e.context.lookupMaybe(n,pn),l=(r=i==null?void 0:i.asNumber())!==null&&r!==void 0?r:0;return c2(l,tu.PushButton)?TF.fromDict(e,t):c2(l,tu.Radio)?IF.fromDict(e,t):CF.fromDict(e,t)},T4e=function(e,t){var r,n=xU(e,Ge.of("Ff")),i=e.context.lookupMaybe(n,pn),l=(r=i==null?void 0:i.asNumber())!==null&&r!==void 0?r:0;return c2(l,Ii.Combo)?SF.fromDict(e,t):FF.fromDict(e,t)},c2=function(e,t){return(e&t)!==0},xU=function(e,t){var r;return DJ(e,function(n){r||(r=n.get(t))}),r},DJ=function(e,t){t(e);var r=e.lookupMaybe(Ge.of("Parent"),Sn);r&&DJ(r,t)},UT=function(){function e(t){this.dict=t}return e.prototype.Fields=function(){var t=this.dict.lookup(Ge.of("Fields"));if(t instanceof mi)return t},e.prototype.getFields=function(){for(var t=this.normalizedEntries().Fields,r=new Array(t.size()),n=0,i=t.size();n<i;n++){var l=t.get(n),h=t.lookup(n,Sn);r[n]=[kJ(h,l),l]}return r},e.prototype.getAllFields=function(){var t=[],r=function(n){if(n)for(var i=0,l=n.length;i<l;i++){var h=n[i];t.push(h);var p=h[0];p instanceof OT&&r(_U(p.Kids()))}};return r(this.getFields()),t},e.prototype.addField=function(t){var r=this.normalizedEntries().Fields;r==null||r.push(t)},e.prototype.removeField=function(t){var r=t.getParent(),n=r===void 0?this.normalizedEntries().Fields:r.Kids(),i=n==null?void 0:n.indexOf(t.ref);if(n===void 0||i===void 0)throw new Error("Tried to remove inexistent field "+t.getFullyQualifiedName());n.remove(i),r!==void 0&&n.size()===0&&this.removeField(r)},e.prototype.normalizedEntries=function(){var t=this.Fields();return t||(t=this.dict.context.obj([]),this.dict.set(Ge.of("Fields"),t)),{Fields:t}},e.fromDict=function(t){return new e(t)},e.create=function(t){var r=t.obj({Fields:[]});return new e(r)},e}(),LJ=function(e){Ar(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.Pages=function(){return this.lookup(Ge.of("Pages"),Sn)},t.prototype.AcroForm=function(){return this.lookupMaybe(Ge.of("AcroForm"),Sn)},t.prototype.getAcroForm=function(){var r=this.AcroForm();if(r)return UT.fromDict(r)},t.prototype.getOrCreateAcroForm=function(){var r=this.getAcroForm();if(!r){r=UT.create(this.context);var n=this.context.register(r.dict);this.set(Ge.of("AcroForm"),n)}return r},t.prototype.ViewerPreferences=function(){return this.lookupMaybe(Ge.of("ViewerPreferences"),Sn)},t.prototype.getViewerPreferences=function(){var r=this.ViewerPreferences();if(r)return Ij.fromDict(r)},t.prototype.getOrCreateViewerPreferences=function(){var r=this.getViewerPreferences();if(!r){r=Ij.create(this.context);var n=this.context.register(r.dict);this.set(Ge.of("ViewerPreferences"),n)}return r},t.prototype.insertLeafNode=function(r,n){var i=this.get(Ge.of("Pages")),l=this.Pages().insertLeafNode(r,n);return l||i},t.prototype.removeLeafNode=function(r){this.Pages().removeLeafNode(r)},t.withContextAndPages=function(r,n){var i=new Map;return i.set(Ge.of("Type"),Ge.of("Catalog")),i.set(Ge.of("Pages"),n),new t(i,r)},t.fromMapWithContext=function(r,n){return new t(r,n)},t}(Sn),OJ=function(e){Ar(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.Parent=function(){return this.lookup(Ge.of("Parent"))},t.prototype.Kids=function(){return this.lookup(Ge.of("Kids"),mi)},t.prototype.Count=function(){return this.lookup(Ge.of("Count"),pn)},t.prototype.pushTreeNode=function(r){var n=this.Kids();n.push(r)},t.prototype.pushLeafNode=function(r){var n=this.Kids();this.insertLeafKid(n.size(),r)},t.prototype.insertLeafNode=function(r,n){var i=this.Kids(),l=this.Count().asNumber();if(n>l)throw new mj(n,l);for(var h=n,p=0,o=i.size();p<o;p++){if(h===0){this.insertLeafKid(p,r);return}var _=i.get(p),C=this.context.lookup(_);if(C instanceof t){if(C.Count().asNumber()>h)return C.insertLeafNode(r,h)||_;h-=C.Count().asNumber()}C instanceof td&&(h-=1)}if(h===0){this.insertLeafKid(i.size(),r);return}throw new gj(n,"insertLeafNode")},t.prototype.removeLeafNode=function(r,n){n===void 0&&(n=!0);var i=this.Kids(),l=this.Count().asNumber();if(r>=l)throw new mj(r,l);for(var h=r,p=0,o=i.size();p<o;p++){var _=i.get(p),C=this.context.lookup(_);if(C instanceof t)if(C.Count().asNumber()>h){C.removeLeafNode(h,n),n&&C.Kids().size()===0&&i.remove(p);return}else h-=C.Count().asNumber();if(C instanceof td)if(h===0){this.removeKid(p);return}else h-=1}throw new gj(r,"removeLeafNode")},t.prototype.ascend=function(r){r(this);var n=this.Parent();n&&n.ascend(r)},t.prototype.traverse=function(r){for(var n=this.Kids(),i=0,l=n.size();i<l;i++){var h=n.get(i),p=this.context.lookup(h);p instanceof t&&p.traverse(r),r(p,h)}},t.prototype.insertLeafKid=function(r,n){var i=this.Kids();this.ascend(function(l){var h=l.Count().asNumber()+1;l.set(Ge.of("Count"),pn.of(h))}),i.insert(r,n)},t.prototype.removeKid=function(r){var n=this.Kids(),i=n.lookup(r);i instanceof td&&this.ascend(function(l){var h=l.Count().asNumber()-1;l.set(Ge.of("Count"),pn.of(h))}),n.remove(r)},t.withContext=function(r,n){var i=new Map;return i.set(Ge.of("Type"),Ge.of("Pages")),i.set(Ge.of("Kids"),r.obj([])),i.set(Ge.of("Count"),r.obj(0)),n&&i.set(Ge.of("Parent"),n),new t(i,r)},t.fromMapWithContext=function(r,n){return new t(r,n)},t}(Sn),el=new Uint8Array(256);el[We.Zero]=1;el[We.One]=1;el[We.Two]=1;el[We.Three]=1;el[We.Four]=1;el[We.Five]=1;el[We.Six]=1;el[We.Seven]=1;el[We.Eight]=1;el[We.Nine]=1;var PF=new Uint8Array(256);PF[We.Period]=1;PF[We.Plus]=1;PF[We.Minus]=1;var bU=new Uint8Array(256);for(var f1=0,I4e=256;f1<I4e;f1++)bU[f1]=el[f1]||PF[f1]?1:0;var Fj=We.Newline,Pj=We.CarriageReturn,F4e=function(){function e(t,r){r===void 0&&(r=!1),this.bytes=t,this.capNumbers=r}return e.prototype.parseRawInt=function(){for(var t="";!this.bytes.done();){var r=this.bytes.peek();if(!el[r])break;t+=$A(this.bytes.next())}var n=Number(t);if(!t||!isFinite(n))throw new yj(this.bytes.position(),t);return n},e.prototype.parseRawNumber=function(){for(var t="";!this.bytes.done();){var r=this.bytes.peek();if(!bU[r]||(t+=$A(this.bytes.next()),r===We.Period))break}for(;!this.bytes.done();){var r=this.bytes.peek();if(!el[r])break;t+=$A(this.bytes.next())}var n=Number(t);if(!t||!isFinite(n))throw new yj(this.bytes.position(),t);if(n>Number.MAX_SAFE_INTEGER)if(this.capNumbers){var i="Parsed number that is too large for some PDF readers: "+t+", using Number.MAX_SAFE_INTEGER instead.";return console.warn(i),Number.MAX_SAFE_INTEGER}else{var i="Parsed number that is too large for some PDF readers: "+t+", not capping.";console.warn(i)}return n},e.prototype.skipWhitespace=function(){for(;!this.bytes.done()&&pd[this.bytes.peek()];)this.bytes.next()},e.prototype.skipLine=function(){for(;!this.bytes.done();){var t=this.bytes.peek();if(t===Fj||t===Pj)return;this.bytes.next()}},e.prototype.skipComment=function(){if(this.bytes.peek()!==We.Percent)return!1;for(;!this.bytes.done();){var t=this.bytes.peek();if(t===Fj||t===Pj)return!0;this.bytes.next()}return!0},e.prototype.skipWhitespaceAndComments=function(){for(this.skipWhitespace();this.skipComment();)this.skipWhitespace()},e.prototype.matchKeyword=function(t){for(var r=this.bytes.offset(),n=0,i=t.length;n<i;n++)if(this.bytes.done()||this.bytes.next()!==t[n])return this.bytes.moveTo(r),!1;return!0},e}(),MF=function(){function e(t){this.idx=0,this.line=0,this.column=0,this.bytes=t,this.length=this.bytes.length}return e.prototype.moveTo=function(t){this.idx=t},e.prototype.next=function(){var t=this.bytes[this.idx++];return t===We.Newline?(this.line+=1,this.column=0):this.column+=1,t},e.prototype.assertNext=function(t){if(this.peek()!==t)throw new Oke(this.position(),t,this.peek());return this.next()},e.prototype.peek=function(){return this.bytes[this.idx]},e.prototype.peekAhead=function(t){return this.bytes[this.idx+t]},e.prototype.peekAt=function(t){return this.bytes[t]},e.prototype.done=function(){return this.idx>=this.length},e.prototype.offset=function(){return this.idx},e.prototype.slice=function(t,r){return this.bytes.slice(t,r)},e.prototype.position=function(){return{line:this.line,column:this.column,offset:this.idx}},e.of=function(t){return new e(t)},e.fromPDFRawStream=function(t){return e.of(FJ(t).decode())},e}(),P4e=We.Space,p1=We.CarriageReturn,m1=We.Newline,g1=[We.s,We.t,We.r,We.e,We.a,We.m],yS=[We.e,We.n,We.d,We.s,We.t,We.r,We.e,We.a,We.m],qi={header:[We.Percent,We.P,We.D,We.F,We.Dash],eof:[We.Percent,We.Percent,We.E,We.O,We.F],obj:[We.o,We.b,We.j],endobj:[We.e,We.n,We.d,We.o,We.b,We.j],xref:[We.x,We.r,We.e,We.f],trailer:[We.t,We.r,We.a,We.i,We.l,We.e,We.r],startxref:[We.s,We.t,We.a,We.r,We.t,We.x,We.r,We.e,We.f],true:[We.t,We.r,We.u,We.e],false:[We.f,We.a,We.l,We.s,We.e],null:[We.n,We.u,We.l,We.l],stream:g1,streamEOF1:si(g1,[P4e,p1,m1]),streamEOF2:si(g1,[p1,m1]),streamEOF3:si(g1,[p1]),streamEOF4:si(g1,[m1]),endstream:yS,EOF1endstream:si([p1,m1],yS),EOF2endstream:si([p1],yS),EOF3endstream:si([m1],yS)},UJ=function(e){Ar(t,e);function t(r,n,i){i===void 0&&(i=!1);var l=e.call(this,r,i)||this;return l.context=n,l}return t.prototype.parseObject=function(){if(this.skipWhitespaceAndComments(),this.matchKeyword(qi.true))return wb.True;if(this.matchKeyword(qi.false))return wb.False;if(this.matchKeyword(qi.null))return Dl;var r=this.bytes.peek();if(r===We.LessThan&&this.bytes.peekAhead(1)===We.LessThan)return this.parseDictOrStream();if(r===We.LessThan)return this.parseHexString();if(r===We.LeftParen)return this.parseString();if(r===We.ForwardSlash)return this.parseName();if(r===We.LeftSquareBracket)return this.parseArray();if(bU[r])return this.parseNumberOrRef();throw new Uke(this.bytes.position(),r)},t.prototype.parseNumberOrRef=function(){var r=this.parseRawNumber();this.skipWhitespaceAndComments();var n=this.bytes.offset();if(el[this.bytes.peek()]){var i=this.parseRawNumber();if(this.skipWhitespaceAndComments(),this.bytes.peek()===We.R)return this.bytes.assertNext(We.R),Mi.of(r,i)}return this.bytes.moveTo(n),pn.of(r)},t.prototype.parseHexString=function(){var r="";for(this.bytes.assertNext(We.LessThan);!this.bytes.done()&&this.bytes.peek()!==We.GreaterThan;)r+=$A(this.bytes.next());return this.bytes.assertNext(We.GreaterThan),cn.of(r)},t.prototype.parseString=function(){for(var r=0,n=!1,i="";!this.bytes.done();){var l=this.bytes.next();if(i+=$A(l),n||(l===We.LeftParen&&(r+=1),l===We.RightParen&&(r-=1)),l===We.BackSlash?n=!n:n&&(n=!1),r===0)return Pi.of(i.substring(1,i.length-1))}throw new Nke(this.bytes.position())},t.prototype.parseName=function(){this.bytes.assertNext(We.ForwardSlash);for(var r="";!this.bytes.done();){var n=this.bytes.peek();if(pd[n]||bu[n])break;r+=$A(n),this.bytes.next()}return Ge.of(r)},t.prototype.parseArray=function(){this.bytes.assertNext(We.LeftSquareBracket),this.skipWhitespaceAndComments();for(var r=mi.withContext(this.context);this.bytes.peek()!==We.RightSquareBracket;){var n=this.parseObject();r.push(n),this.skipWhitespaceAndComments()}return this.bytes.assertNext(We.RightSquareBracket),r},t.prototype.parseDict=function(){this.bytes.assertNext(We.LessThan),this.bytes.assertNext(We.LessThan),this.skipWhitespaceAndComments();for(var r=new Map;!this.bytes.done()&&this.bytes.peek()!==We.GreaterThan&&this.bytes.peekAhead(1)!==We.GreaterThan;){var n=this.parseName(),i=this.parseObject();r.set(n,i),this.skipWhitespaceAndComments()}this.skipWhitespaceAndComments(),this.bytes.assertNext(We.GreaterThan),this.bytes.assertNext(We.GreaterThan);var l=r.get(Ge.of("Type"));return l===Ge.of("Catalog")?LJ.fromMapWithContext(r,this.context):l===Ge.of("Pages")?OJ.fromMapWithContext(r,this.context):l===Ge.of("Page")?td.fromMapWithContext(r,this.context):Sn.fromMapWithContext(r,this.context)},t.prototype.parseDictOrStream=function(){var r=this.bytes.position(),n=this.parseDict();if(this.skipWhitespaceAndComments(),!this.matchKeyword(qi.streamEOF1)&&!this.matchKeyword(qi.streamEOF2)&&!this.matchKeyword(qi.streamEOF3)&&!this.matchKeyword(qi.streamEOF4)&&!this.matchKeyword(qi.stream))return n;var i=this.bytes.offset(),l,h=n.get(Ge.of("Length"));h instanceof pn?(l=i+h.asNumber(),this.bytes.moveTo(l),this.skipWhitespaceAndComments(),this.matchKeyword(qi.endstream)||(this.bytes.moveTo(i),l=this.findEndOfStreamFallback(r))):l=this.findEndOfStreamFallback(r);var p=this.bytes.slice(i,l);return Bb.of(n,p)},t.prototype.findEndOfStreamFallback=function(r){for(var n=1,i=this.bytes.offset();!this.bytes.done()&&(i=this.bytes.offset(),this.matchKeyword(qi.stream)?n+=1:this.matchKeyword(qi.EOF1endstream)||this.matchKeyword(qi.EOF2endstream)||this.matchKeyword(qi.EOF3endstream)||this.matchKeyword(qi.endstream)?n-=1:this.bytes.next(),n!==0););if(n!==0)throw new Vke(r);return i},t.forBytes=function(r,n,i){return new t(MF.of(r),n,i)},t.forByteStream=function(r,n,i){return i===void 0&&(i=!1),new t(r,n,i)},t}(F4e),M4e=function(e){Ar(t,e);function t(r,n){var i=e.call(this,MF.fromPDFRawStream(r),r.dict.context)||this,l=r.dict;return i.alreadyParsed=!1,i.shouldWaitForTick=n||function(){return!1},i.firstOffset=l.lookup(Ge.of("First"),pn).asNumber(),i.objectCount=l.lookup(Ge.of("N"),pn).asNumber(),i}return t.prototype.parseIntoContext=function(){return Tn(this,void 0,void 0,function(){var r,n,i,l,h,p,o,_;return In(this,function(C){switch(C.label){case 0:if(this.alreadyParsed)throw new AU("PDFObjectStreamParser","parseIntoContext");this.alreadyParsed=!0,r=this.parseOffsetsAndObjectNumbers(),n=0,i=r.length,C.label=1;case 1:return n<i?(l=r[n],h=l.objectNumber,p=l.offset,this.bytes.moveTo(this.firstOffset+p),o=this.parseObject(),_=Mi.of(h,0),this.context.assign(_,o),this.shouldWaitForTick()?[4,Hy()]:[3,3]):[3,4];case 2:C.sent(),C.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.parseOffsetsAndObjectNumbers=function(){for(var r=[],n=0,i=this.objectCount;n<i;n++){this.skipWhitespaceAndComments();var l=this.parseRawInt();this.skipWhitespaceAndComments();var h=this.parseRawInt();r.push({objectNumber:l,offset:h})}return r},t.forStream=function(r,n){return new t(r,n)},t}(UJ),R4e=function(){function e(t){this.alreadyParsed=!1,this.dict=t.dict,this.bytes=MF.fromPDFRawStream(t),this.context=this.dict.context;var r=this.dict.lookup(Ge.of("Size"),pn),n=this.dict.lookup(Ge.of("Index"));if(n instanceof mi){this.subsections=[];for(var i=0,l=n.size();i<l;i+=2){var h=n.lookup(i+0,pn).asNumber(),p=n.lookup(i+1,pn).asNumber();this.subsections.push({firstObjectNumber:h,length:p})}}else this.subsections=[{firstObjectNumber:0,length:r.asNumber()}];var o=this.dict.lookup(Ge.of("W"),mi);this.byteWidths=[-1,-1,-1];for(var i=0,l=o.size();i<l;i++)this.byteWidths[i]=o.lookup(i,pn).asNumber()}return e.prototype.parseIntoContext=function(){if(this.alreadyParsed)throw new AU("PDFXRefStreamParser","parseIntoContext");this.alreadyParsed=!0,this.context.trailerInfo={Root:this.dict.get(Ge.of("Root")),Encrypt:this.dict.get(Ge.of("Encrypt")),Info:this.dict.get(Ge.of("Info")),ID:this.dict.get(Ge.of("ID"))};var t=this.parseEntries();return t},e.prototype.parseEntries=function(){for(var t=[],r=this.byteWidths,n=r[0],i=r[1],l=r[2],h=0,p=this.subsections.length;h<p;h++)for(var o=this.subsections[h],_=o.firstObjectNumber,C=o.length,M=0;M<C;M++){for(var L=0,z=0,j=n;z<j;z++)L=L<<8|this.bytes.next();for(var K=0,z=0,j=i;z<j;z++)K=K<<8|this.bytes.next();for(var $=0,z=0,j=l;z<j;z++)$=$<<8|this.bytes.next();n===0&&(L=1);var q=_+M,ee={ref:Mi.of(q,$),offset:K,deleted:L===0,inObjectStream:L===2};t.push(ee)}return t},e.forStream=function(t){return new e(t)},e}(),k4e=function(e){Ar(t,e);function t(r,n,i,l){n===void 0&&(n=1/0),i===void 0&&(i=!1),l===void 0&&(l=!1);var h=e.call(this,MF.of(r),s2.create(),l)||this;return h.alreadyParsed=!1,h.parsedObjects=0,h.shouldWaitForTick=function(){return h.parsedObjects+=1,h.parsedObjects%h.objectsPerTick===0},h.objectsPerTick=n,h.throwOnInvalidObject=i,h}return t.prototype.parseDocument=function(){return Tn(this,void 0,void 0,function(){var r,n;return In(this,function(i){switch(i.label){case 0:if(this.alreadyParsed)throw new AU("PDFParser","parseDocument");this.alreadyParsed=!0,this.context.header=this.parseHeader(),i.label=1;case 1:return this.bytes.done()?[3,3]:[4,this.parseDocumentSection()];case 2:if(i.sent(),n=this.bytes.offset(),n===r)throw new Qke(this.bytes.position());return r=n,[3,1];case 3:return this.maybeRecoverRoot(),this.context.lookup(Mi.of(0))&&(console.warn("Removing parsed object: 0 0 R"),this.context.delete(Mi.of(0))),[2,this.context]}})})},t.prototype.maybeRecoverRoot=function(){var r=function(C){return C instanceof Sn&&C.lookup(Ge.of("Type"))===Ge.of("Catalog")},n=this.context.lookup(this.context.trailerInfo.Root);if(!r(n))for(var i=this.context.enumerateIndirectObjects(),l=0,h=i.length;l<h;l++){var p=i[l],o=p[0],_=p[1];r(_)&&(this.context.trailerInfo.Root=o)}},t.prototype.parseHeader=function(){for(;!this.bytes.done();){if(this.matchKeyword(qi.header)){var r=this.parseRawInt();this.bytes.assertNext(We.Period);var n=this.parseRawInt(),i=BF.forVersion(r,n);return this.skipBinaryHeaderComment(),i}this.bytes.next()}throw new Hke(this.bytes.position())},t.prototype.parseIndirectObjectHeader=function(){this.skipWhitespaceAndComments();var r=this.parseRawInt();this.skipWhitespaceAndComments();var n=this.parseRawInt();if(this.skipWhitespaceAndComments(),!this.matchKeyword(qi.obj))throw new jke(this.bytes.position(),qi.obj);return Mi.of(r,n)},t.prototype.matchIndirectObjectHeader=function(){var r=this.bytes.offset();try{return this.parseIndirectObjectHeader(),!0}catch{return this.bytes.moveTo(r),!1}},t.prototype.parseIndirectObject=function(){return Tn(this,void 0,void 0,function(){var r,n;return In(this,function(i){switch(i.label){case 0:return r=this.parseIndirectObjectHeader(),this.skipWhitespaceAndComments(),n=this.parseObject(),this.skipWhitespaceAndComments(),this.matchKeyword(qi.endobj),n instanceof Bb&&n.dict.lookup(Ge.of("Type"))===Ge.of("ObjStm")?[4,M4e.forStream(n,this.shouldWaitForTick).parseIntoContext()]:[3,2];case 1:return i.sent(),[3,3];case 2:n instanceof Bb&&n.dict.lookup(Ge.of("Type"))===Ge.of("XRef")?R4e.forStream(n).parseIntoContext():this.context.assign(r,n),i.label=3;case 3:return[2,r]}})})},t.prototype.tryToParseInvalidIndirectObject=function(){var r=this.bytes.position(),n="Trying to parse invalid object: "+JSON.stringify(r)+")";if(this.throwOnInvalidObject)throw new Error(n);console.warn(n);var i=this.parseIndirectObjectHeader();console.warn("Invalid object ref: "+i),this.skipWhitespaceAndComments();for(var l=this.bytes.offset(),h=!0;!this.bytes.done()&&(this.matchKeyword(qi.endobj)&&(h=!1),!!h);)this.bytes.next();if(h)throw new zke(r);var p=this.bytes.offset()-qi.endobj.length,o=SJ.of(this.bytes.slice(l,p));return this.context.assign(i,o),i},t.prototype.parseIndirectObjects=function(){return Tn(this,void 0,void 0,function(){var r;return In(this,function(n){switch(n.label){case 0:this.skipWhitespaceAndComments(),n.label=1;case 1:if(!(!this.bytes.done()&&el[this.bytes.peek()]))return[3,8];r=this.bytes.offset(),n.label=2;case 2:return n.trys.push([2,4,,5]),[4,this.parseIndirectObject()];case 3:return n.sent(),[3,5];case 4:return n.sent(),this.bytes.moveTo(r),this.tryToParseInvalidIndirectObject(),[3,5];case 5:return this.skipWhitespaceAndComments(),this.skipJibberish(),this.shouldWaitForTick()?[4,Hy()]:[3,7];case 6:n.sent(),n.label=7;case 7:return[3,1];case 8:return[2]}})})},t.prototype.maybeParseCrossRefSection=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(qi.xref)){this.skipWhitespaceAndComments();for(var r=-1,n=wJ.createEmpty();!this.bytes.done()&&el[this.bytes.peek()];){var i=this.parseRawInt();this.skipWhitespaceAndComments();var l=this.parseRawInt();this.skipWhitespaceAndComments();var h=this.bytes.peek();if(h===We.n||h===We.f){var p=Mi.of(r,l);this.bytes.next()===We.n?n.addEntry(p,i):n.addDeletedEntry(p,i),r+=1}else r=i;this.skipWhitespaceAndComments()}return n}},t.prototype.maybeParseTrailerDict=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(qi.trailer)){this.skipWhitespaceAndComments();var r=this.parseDict(),n=this.context;n.trailerInfo={Root:r.get(Ge.of("Root"))||n.trailerInfo.Root,Encrypt:r.get(Ge.of("Encrypt"))||n.trailerInfo.Encrypt,Info:r.get(Ge.of("Info"))||n.trailerInfo.Info,ID:r.get(Ge.of("ID"))||n.trailerInfo.ID}}},t.prototype.maybeParseTrailer=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(qi.startxref)){this.skipWhitespaceAndComments();var r=this.parseRawInt();return this.skipWhitespace(),this.matchKeyword(qi.eof),this.skipWhitespaceAndComments(),this.matchKeyword(qi.eof),this.skipWhitespaceAndComments(),mU.forLastCrossRefSectionOffset(r)}},t.prototype.parseDocumentSection=function(){return Tn(this,void 0,void 0,function(){return In(this,function(r){switch(r.label){case 0:return[4,this.parseIndirectObjects()];case 1:return r.sent(),this.maybeParseCrossRefSection(),this.maybeParseTrailerDict(),this.maybeParseTrailer(),this.skipJibberish(),[2]}})})},t.prototype.skipJibberish=function(){for(this.skipWhitespaceAndComments();!this.bytes.done();){var r=this.bytes.offset(),n=this.bytes.peek(),i=n>=We.Space&&n<=We.Tilde;if(i&&(this.matchKeyword(qi.xref)||this.matchKeyword(qi.trailer)||this.matchKeyword(qi.startxref)||this.matchIndirectObjectHeader())){this.bytes.moveTo(r);break}this.bytes.next()}},t.prototype.skipBinaryHeaderComment=function(){this.skipWhitespaceAndComments();try{var r=this.bytes.offset();this.parseIndirectObjectHeader(),this.bytes.moveTo(r)}catch{this.bytes.next(),this.skipWhitespaceAndComments()}},t.forBytesWithOptions=function(r,n,i,l){return new t(r,n,i,l)},t}(UJ),Uh=function(e){return 1<<e},Fx;(function(e){e[e.Invisible=Uh(0)]="Invisible",e[e.Hidden=Uh(1)]="Hidden",e[e.Print=Uh(2)]="Print",e[e.NoZoom=Uh(3)]="NoZoom",e[e.NoRotate=Uh(4)]="NoRotate",e[e.NoView=Uh(5)]="NoView",e[e.ReadOnly=Uh(6)]="ReadOnly",e[e.Locked=Uh(7)]="Locked",e[e.ToggleNoView=Uh(8)]="ToggleNoView",e[e.LockedContents=Uh(9)]="LockedContents"})(Fx||(Fx={}));var RF=function(e){return e instanceof Ge?e:Ge.of(e)},mn=function(e){return e instanceof pn?e:pn.of(e)},Fn=function(e){return e instanceof pn?e.asNumber():e},Cb;(function(e){e.Degrees="degrees",e.Radians="radians"})(Cb||(Cb={}));var hn=function(e){return Ct(e,"degreeAngle",["number"]),{type:Cb.Degrees,angle:e}},zJ=Cb.Radians,VJ=Cb.Degrees,NJ=function(e){return e*Math.PI/180},D4e=function(e){return e*180/Math.PI},Pa=function(e){return e.type===zJ?e.angle:e.type===VJ?NJ(e.angle):ow("Invalid rotation: "+JSON.stringify(e))},QJ=function(e){return e.type===zJ?D4e(e.angle):e.type===VJ?e.angle:ow("Invalid rotation: "+JSON.stringify(e))},md=function(e){e===void 0&&(e=0);var t=e/90%4;return t===0?0:t===1?90:t===2?180:t===3?270:0},tg=function(e,t){t===void 0&&(t=0);var r=md(t);return r===90||r===270?{width:e.height,height:e.width}:{width:e.width,height:e.height}},L4e=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=0);var n=e.x,i=e.y,l=e.width,h=e.height,p=md(r),o=t/2;return p===0?{x:n-o,y:i-o,width:l,height:h}:p===90?{x:n-h+o,y:i-o,width:h,height:l}:p===180?{x:n-l+o,y:i-h+o,width:l,height:h}:p===270?{x:n-o,y:i-l+o,width:h,height:l}:{x:n-o,y:i-o,width:l,height:h}},HJ=function(){return Yn.of(li.ClipNonZero)},zT=Math.cos,VT=Math.sin,NT=Math.tan,kF=function(e,t,r,n,i,l){return Yn.of(li.ConcatTransformationMatrix,[mn(e),mn(t),mn(r),mn(n),mn(i),mn(l)])},lu=function(e,t){return kF(1,0,0,1,e,t)},Sb=function(e,t){return kF(e,0,0,t,0,0)},cv=function(e){return kF(zT(Fn(e)),VT(Fn(e)),-VT(Fn(e)),zT(Fn(e)),0,0)},vS=function(e){return cv(NJ(Fn(e)))},wU=function(e,t){return kF(1,NT(Fn(e)),NT(Fn(t)),1,0,0)},DF=function(e,t){return Yn.of(li.SetLineDashPattern,["["+e.map(mn).join(" ")+"]",mn(t)])},oy;(function(e){e[e.Butt=0]="Butt",e[e.Round=1]="Round",e[e.Projecting=2]="Projecting"})(oy||(oy={}));var LF=function(e){return Yn.of(li.SetLineCapStyle,[mn(e)])},Mj;(function(e){e[e.Miter=0]="Miter",e[e.Round=1]="Round",e[e.Bevel=2]="Bevel"})(Mj||(Mj={}));var rg=function(e){return Yn.of(li.SetGraphicsStateParams,[RF(e)])},Us=function(){return Yn.of(li.PushGraphicsState)},zs=function(){return Yn.of(li.PopGraphicsState)},hw=function(e){return Yn.of(li.SetLineWidth,[mn(e)])},uc=function(e,t,r,n,i,l){return Yn.of(li.AppendBezierCurve,[mn(e),mn(t),mn(r),mn(n),mn(i),mn(l)])},_S=function(e,t,r,n){return Yn.of(li.CurveToReplicateInitialPoint,[mn(e),mn(t),mn(r),mn(n)])},Jf=function(){return Yn.of(li.ClosePath)},aA=function(e,t){return Yn.of(li.MoveTo,[mn(e),mn(t)])},ta=function(e,t){return Yn.of(li.LineTo,[mn(e),mn(t)])},Aw=function(){return Yn.of(li.StrokePath)},BU=function(){return Yn.of(li.FillNonZero)},CU=function(){return Yn.of(li.FillNonZeroAndStroke)},jJ=function(){return Yn.of(li.EndPath)},O4e=function(){return Yn.of(li.NextLine)},GJ=function(e){return Yn.of(li.ShowText,[e])},KJ=function(){return Yn.of(li.BeginText)},WJ=function(){return Yn.of(li.EndText)},SU=function(e,t){return Yn.of(li.SetFontAndSize,[RF(e),mn(t)])},U4e=function(e){return Yn.of(li.SetTextLineHeight,[mn(e)])},Rj;(function(e){e[e.Fill=0]="Fill",e[e.Outline=1]="Outline",e[e.FillAndOutline=2]="FillAndOutline",e[e.Invisible=3]="Invisible",e[e.FillAndClip=4]="FillAndClip",e[e.OutlineAndClip=5]="OutlineAndClip",e[e.FillAndOutlineAndClip=6]="FillAndOutlineAndClip",e[e.Clip=7]="Clip"})(Rj||(Rj={}));var z4e=function(e,t,r,n,i,l){return Yn.of(li.SetTextMatrix,[mn(e),mn(t),mn(r),mn(n),mn(i),mn(l)])},qJ=function(e,t,r,n,i){return z4e(zT(Fn(e)),VT(Fn(e))+NT(Fn(t)),-VT(Fn(e))+NT(Fn(r)),zT(Fn(e)),n,i)},EU=function(e){return Yn.of(li.DrawObject,[RF(e)])},V4e=function(e){return Yn.of(li.NonStrokingColorGray,[mn(e)])},N4e=function(e){return Yn.of(li.StrokingColorGray,[mn(e)])},Q4e=function(e,t,r){return Yn.of(li.NonStrokingColorRgb,[mn(e),mn(t),mn(r)])},H4e=function(e,t,r){return Yn.of(li.StrokingColorRgb,[mn(e),mn(t),mn(r)])},j4e=function(e,t,r,n){return Yn.of(li.NonStrokingColorCmyk,[mn(e),mn(t),mn(r),mn(n)])},G4e=function(e,t,r,n){return Yn.of(li.StrokingColorCmyk,[mn(e),mn(t),mn(r),mn(n)])},XJ=function(e){return Yn.of(li.BeginMarkedContent,[RF(e)])},ZJ=function(){return Yn.of(li.EndMarkedContent)},$f;(function(e){e.Grayscale="Grayscale",e.RGB="RGB",e.CMYK="CMYK"})($f||($f={}));var YJ=function(e){return cc(e,"gray",0,1),{type:$f.Grayscale,gray:e}},Ri=function(e,t,r){return cc(e,"red",0,1),cc(t,"green",0,1),cc(r,"blue",0,1),{type:$f.RGB,red:e,green:t,blue:r}},JJ=function(e,t,r,n){return cc(e,"cyan",0,1),cc(t,"magenta",0,1),cc(r,"yellow",0,1),cc(n,"key",0,1),{type:$f.CMYK,cyan:e,magenta:t,yellow:r,key:n}},TU=$f.Grayscale,IU=$f.RGB,FU=$f.CMYK,ng=function(e){return e.type===TU?V4e(e.gray):e.type===IU?Q4e(e.red,e.green,e.blue):e.type===FU?j4e(e.cyan,e.magenta,e.yellow,e.key):ow("Invalid color: "+JSON.stringify(e))},dw=function(e){return e.type===TU?N4e(e.gray):e.type===IU?H4e(e.red,e.green,e.blue):e.type===FU?G4e(e.cyan,e.magenta,e.yellow,e.key):ow("Invalid color: "+JSON.stringify(e))},gl=function(e,t){return t===void 0&&(t=1),(e==null?void 0:e.length)===1?YJ(e[0]*t):(e==null?void 0:e.length)===3?Ri(e[0]*t,e[1]*t,e[2]*t):(e==null?void 0:e.length)===4?JJ(e[0]*t,e[1]*t,e[2]*t,e[3]*t):void 0},kj=function(e){return e.type===TU?[e.gray]:e.type===IU?[e.red,e.green,e.blue]:e.type===FU?[e.cyan,e.magenta,e.yellow,e.key]:ow("Invalid color: "+JSON.stringify(e))},Hr=0,jr=0,Xn=0,Zn=0,j1=0,G1=0,Dj=new Map([["A",7],["a",7],["C",6],["c",6],["H",1],["h",1],["L",2],["l",2],["M",2],["m",2],["Q",4],["q",4],["S",4],["s",4],["T",2],["t",2],["V",1],["v",1],["Z",0],["z",0]]),K4e=function(e){for(var t,r=[],n=[],i="",l=!1,h=0,p=0,o=e;p<o.length;p++){var _=o[p];if(Dj.has(_))h=Dj.get(_),t&&(i.length>0&&(n[n.length]=+i),r[r.length]={cmd:t,args:n},n=[],i="",l=!1),t=_;else if([" ",","].includes(_)||_==="-"&&i.length>0&&i[i.length-1]!=="e"||_==="."&&l){if(i.length===0)continue;n.length===h?(r[r.length]={cmd:t,args:n},n=[+i],t==="M"&&(t="L"),t==="m"&&(t="l")):n[n.length]=+i,l=_===".",i=["-","."].includes(_)?_:""}else i+=_,_==="."&&(l=!0)}return i.length>0&&(n.length===h?(r[r.length]={cmd:t,args:n},n=[+i],t==="M"&&(t="L"),t==="m"&&(t="l")):n[n.length]=+i),r[r.length]={cmd:t,args:n},r},W4e=function(e){Hr=jr=Xn=Zn=j1=G1=0;for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n.cmd&&typeof Lj[n.cmd]=="function"){var i=Lj[n.cmd](n.args);Array.isArray(i)?t=t.concat(i):t.push(i)}}return t},Lj={M:function(e){return Hr=e[0],jr=e[1],Xn=Zn=null,j1=Hr,G1=jr,aA(Hr,jr)},m:function(e){return Hr+=e[0],jr+=e[1],Xn=Zn=null,j1=Hr,G1=jr,aA(Hr,jr)},C:function(e){return Hr=e[4],jr=e[5],Xn=e[2],Zn=e[3],uc(e[0],e[1],e[2],e[3],e[4],e[5])},c:function(e){var t=uc(e[0]+Hr,e[1]+jr,e[2]+Hr,e[3]+jr,e[4]+Hr,e[5]+jr);return Xn=Hr+e[2],Zn=jr+e[3],Hr+=e[4],jr+=e[5],t},S:function(e){(Xn===null||Zn===null)&&(Xn=Hr,Zn=jr);var t=uc(Hr-(Xn-Hr),jr-(Zn-jr),e[0],e[1],e[2],e[3]);return Xn=e[0],Zn=e[1],Hr=e[2],jr=e[3],t},s:function(e){(Xn===null||Zn===null)&&(Xn=Hr,Zn=jr);var t=uc(Hr-(Xn-Hr),jr-(Zn-jr),Hr+e[0],jr+e[1],Hr+e[2],jr+e[3]);return Xn=Hr+e[0],Zn=jr+e[1],Hr+=e[2],jr+=e[3],t},Q:function(e){return Xn=e[0],Zn=e[1],Hr=e[2],jr=e[3],_S(e[0],e[1],Hr,jr)},q:function(e){var t=_S(e[0]+Hr,e[1]+jr,e[2]+Hr,e[3]+jr);return Xn=Hr+e[0],Zn=jr+e[1],Hr+=e[2],jr+=e[3],t},T:function(e){Xn===null||Zn===null?(Xn=Hr,Zn=jr):(Xn=Hr-(Xn-Hr),Zn=jr-(Zn-jr));var t=_S(Xn,Zn,e[0],e[1]);return Xn=Hr-(Xn-Hr),Zn=jr-(Zn-jr),Hr=e[0],jr=e[1],t},t:function(e){Xn===null||Zn===null?(Xn=Hr,Zn=jr):(Xn=Hr-(Xn-Hr),Zn=jr-(Zn-jr));var t=_S(Xn,Zn,Hr+e[0],jr+e[1]);return Hr+=e[0],jr+=e[1],t},A:function(e){var t=Oj(Hr,jr,e);return Hr=e[5],jr=e[6],t},a:function(e){e[5]+=Hr,e[6]+=jr;var t=Oj(Hr,jr,e);return Hr=e[5],jr=e[6],t},L:function(e){return Hr=e[0],jr=e[1],Xn=Zn=null,ta(Hr,jr)},l:function(e){return Hr+=e[0],jr+=e[1],Xn=Zn=null,ta(Hr,jr)},H:function(e){return Hr=e[0],Xn=Zn=null,ta(Hr,jr)},h:function(e){return Hr+=e[0],Xn=Zn=null,ta(Hr,jr)},V:function(e){return jr=e[0],Xn=Zn=null,ta(Hr,jr)},v:function(e){return jr+=e[0],Xn=Zn=null,ta(Hr,jr)},Z:function(){var e=Jf();return Hr=j1,jr=G1,e},z:function(){var e=Jf();return Hr=j1,jr=G1,e}},Oj=function(e,t,r){for(var n=r[0],i=r[1],l=r[2],h=r[3],p=r[4],o=r[5],_=r[6],C=q4e(o,_,n,i,h,p,l,e,t),M=[],L=0,z=C;L<z.length;L++){var j=z[L],K=X4e.apply(void 0,j);M.push(uc.apply(void 0,K))}return M},q4e=function(e,t,r,n,i,l,h,p,o){var _=h*(Math.PI/180),C=Math.sin(_),M=Math.cos(_);r=Math.abs(r),n=Math.abs(n),Xn=M*(p-e)*.5+C*(o-t)*.5,Zn=M*(o-t)*.5-C*(p-e)*.5;var L=Xn*Xn/(r*r)+Zn*Zn/(n*n);L>1&&(L=Math.sqrt(L),r*=L,n*=L);var z=M/r,j=C/r,K=-C/n,$=M/n,q=z*p+j*o,ee=K*p+$*o,ie=z*e+j*t,fe=K*e+$*t,me=(ie-q)*(ie-q)+(fe-ee)*(fe-ee),ye=1/me-.25;ye<0&&(ye=0);var se=Math.sqrt(ye);l===i&&(se=-se);var re=.5*(q+ie)-se*(fe-ee),de=.5*(ee+fe)+se*(ie-q),_e=Math.atan2(ee-de,q-re),ve=Math.atan2(fe-de,ie-re),Pe=ve-_e;Pe<0&&l===1?Pe+=2*Math.PI:Pe>0&&l===0&&(Pe-=2*Math.PI);for(var Ee=Math.ceil(Math.abs(Pe/(Math.PI*.5+.001))),Ht=[],Xt=0;Xt<Ee;Xt++){var gt=_e+Xt*Pe/Ee,jt=_e+(Xt+1)*Pe/Ee;Ht[Xt]=[re,de,gt,jt,r,n,C,M]}return Ht},X4e=function(e,t,r,n,i,l,h,p){var o=p*i,_=-h*l,C=h*i,M=p*l,L=.5*(n-r),z=8/3*Math.sin(L*.5)*Math.sin(L*.5)/Math.sin(L),j=e+Math.cos(r)-z*Math.sin(r),K=t+Math.sin(r)+z*Math.cos(r),$=e+Math.cos(n),q=t+Math.sin(n),ee=$+z*Math.sin(n),ie=q-z*Math.cos(n),fe=[o*j+_*K,C*j+M*K,o*ee+_*ie,C*ee+M*ie,o*$+_*q,C*$+M*q];return fe},Z4e=function(e){return W4e(K4e(e))},Y4e=function(e,t){for(var r=[Us(),t.graphicsState&&rg(t.graphicsState),KJ(),ng(t.color),SU(t.font,t.size),U4e(t.lineHeight),qJ(Pa(t.rotate),Pa(t.xSkew),Pa(t.ySkew),t.x,t.y)].filter(Boolean),n=0,i=e.length;n<i;n++)r.push(GJ(e[n]),O4e());return r.push(WJ(),zs()),r},$J=function(e,t){return[Us(),t.graphicsState&&rg(t.graphicsState),lu(t.x,t.y),cv(Pa(t.rotate)),Sb(t.width,t.height),wU(Pa(t.xSkew),Pa(t.ySkew)),EU(e),zs()].filter(Boolean)},J4e=function(e,t){return[Us(),t.graphicsState&&rg(t.graphicsState),lu(t.x,t.y),cv(Pa(t.rotate)),Sb(t.xScale,t.yScale),wU(Pa(t.xSkew),Pa(t.ySkew)),EU(e),zs()].filter(Boolean)},$4e=function(e){var t,r;return[Us(),e.graphicsState&&rg(e.graphicsState),e.color&&dw(e.color),hw(e.thickness),DF((t=e.dashArray)!==null&&t!==void 0?t:[],(r=e.dashPhase)!==null&&r!==void 0?r:0),aA(e.start.x,e.start.y),e.lineCap&&LF(e.lineCap),aA(e.start.x,e.start.y),ta(e.end.x,e.end.y),Aw(),zs()].filter(Boolean)},jy=function(e){var t,r;return[Us(),e.graphicsState&&rg(e.graphicsState),e.color&&ng(e.color),e.borderColor&&dw(e.borderColor),hw(e.borderWidth),e.borderLineCap&&LF(e.borderLineCap),DF((t=e.borderDashArray)!==null&&t!==void 0?t:[],(r=e.borderDashPhase)!==null&&r!==void 0?r:0),lu(e.x,e.y),cv(Pa(e.rotate)),wU(Pa(e.xSkew),Pa(e.ySkew)),aA(0,0),ta(0,e.height),ta(e.width,e.height),ta(e.width,0),Jf(),e.color&&e.borderWidth?CU():e.color?BU():e.borderColor?Aw():Jf(),zs()].filter(Boolean)},QT=4*((Math.sqrt(2)-1)/3),eDe=function(e){var t=Fn(e.x),r=Fn(e.y),n=Fn(e.xScale),i=Fn(e.yScale);t-=n,r-=i;var l=n*QT,h=i*QT,p=t+n*2,o=r+i*2,_=t+n,C=r+i;return[Us(),aA(t,C),uc(t,C-h,_-l,r,_,r),uc(_+l,r,p,C-h,p,C),uc(p,C+h,_+l,o,_,o),uc(_-l,o,t,C+h,t,C),zs()]},tDe=function(e){var t=Fn(e.x),r=Fn(e.y),n=Fn(e.xScale),i=Fn(e.yScale),l=-n,h=-i,p=n*QT,o=i*QT,_=l+n*2,C=h+i*2,M=l+n,L=h+i;return[lu(t,r),cv(Pa(e.rotate)),aA(l,L),uc(l,L-o,M-p,h,M,h),uc(M+p,h,_,L-o,_,L),uc(_,L+o,M+p,C,M,C),uc(M-p,C,l,L+o,l,L)]},u2=function(e){var t,r,n;return si([Us(),e.graphicsState&&rg(e.graphicsState),e.color&&ng(e.color),e.borderColor&&dw(e.borderColor),hw(e.borderWidth),e.borderLineCap&&LF(e.borderLineCap),DF((t=e.borderDashArray)!==null&&t!==void 0?t:[],(r=e.borderDashPhase)!==null&&r!==void 0?r:0)],e.rotate===void 0?eDe({x:e.x,y:e.y,xScale:e.xScale,yScale:e.yScale}):tDe({x:e.x,y:e.y,xScale:e.xScale,yScale:e.yScale,rotate:(n=e.rotate)!==null&&n!==void 0?n:hn(0)}),[e.color&&e.borderWidth?CU():e.color?BU():e.borderColor?Aw():Jf(),zs()]).filter(Boolean)},rDe=function(e,t){var r,n,i;return si([Us(),t.graphicsState&&rg(t.graphicsState),lu(t.x,t.y),cv(Pa((r=t.rotate)!==null&&r!==void 0?r:hn(0))),t.scale?Sb(t.scale,-t.scale):Sb(1,-1),t.color&&ng(t.color),t.borderColor&&dw(t.borderColor),t.borderWidth&&hw(t.borderWidth),t.borderLineCap&&LF(t.borderLineCap),DF((n=t.borderDashArray)!==null&&n!==void 0?n:[],(i=t.borderDashPhase)!==null&&i!==void 0?i:0)],Z4e(e),[t.color&&t.borderWidth?CU():t.color?BU():t.borderColor?Aw():Jf(),zs()]).filter(Boolean)},nDe=function(e){var t=Fn(e.size),r=-1+.75,n=-1+.51,i=1-.525,l=1-.31,h=-1+.325,p=-((h-r)*(l-r))/(i-n)+n;return[Us(),e.color&&dw(e.color),hw(e.thickness),lu(e.x,e.y),aA(h*t,p*t),ta(r*t,n*t),ta(l*t,i*t),Aw(),zs()].filter(Boolean)},dp=function(e){return e.rotation===0?[lu(0,0),vS(0)]:e.rotation===90?[lu(e.width,0),vS(90)]:e.rotation===180?[lu(e.width,e.height),vS(180)]:e.rotation===270?[lu(0,e.height),vS(270)]:[]},xS=function(e){var t=jy({x:e.x,y:e.y,width:e.width,height:e.height,borderWidth:e.borderWidth,color:e.color,borderColor:e.borderColor,rotate:hn(0),xSkew:hn(0),ySkew:hn(0)});if(!e.filled)return t;var r=Fn(e.width),n=Fn(e.height),i=Math.min(r,n)/2,l=nDe({x:r/2,y:n/2,size:i,thickness:e.thickness,color:e.markColor});return si([Us()],t,l,[zs()])},bS=function(e){var t=Fn(e.width),r=Fn(e.height),n=Math.min(t,r)/2,i=u2({x:e.x,y:e.y,xScale:n,yScale:n,color:e.color,borderColor:e.borderColor,borderWidth:e.borderWidth});if(!e.filled)return i;var l=u2({x:e.x,y:e.y,xScale:n*.45,yScale:n*.45,color:e.dotColor,borderColor:void 0,borderWidth:0});return si([Us()],i,l,[zs()])},Uj=function(e){var t=Fn(e.x),r=Fn(e.y),n=Fn(e.width),i=Fn(e.height),l=jy({x:t,y:r,width:n,height:i,borderWidth:e.borderWidth,color:e.color,borderColor:e.borderColor,rotate:hn(0),xSkew:hn(0),ySkew:hn(0)}),h=PU(e.textLines,{color:e.textColor,font:e.font,size:e.fontSize,rotate:hn(0),xSkew:hn(0),ySkew:hn(0)});return si([Us()],l,h,[zs()])},PU=function(e,t){for(var r=[KJ(),ng(t.color),SU(t.font,t.size)],n=0,i=e.length;n<i;n++){var l=e[n],h=l.encoded,p=l.x,o=l.y;r.push(qJ(Pa(t.rotate),Pa(t.xSkew),Pa(t.ySkew),p,o),GJ(h))}return r.push(WJ()),r},e$=function(e){var t=Fn(e.x),r=Fn(e.y),n=Fn(e.width),i=Fn(e.height),l=Fn(e.borderWidth),h=Fn(e.padding),p=t+l/2+h,o=r+l/2+h,_=n-(l/2+h)*2,C=i-(l/2+h)*2,M=[aA(p,o),ta(p,o+C),ta(p+_,o+C),ta(p+_,o),Jf(),HJ(),jJ()],L=jy({x:t,y:r,width:n,height:i,borderWidth:e.borderWidth,color:e.color,borderColor:e.borderColor,rotate:hn(0),xSkew:hn(0),ySkew:hn(0)}),z=PU(e.textLines,{color:e.textColor,font:e.font,size:e.fontSize,rotate:hn(0),xSkew:hn(0),ySkew:hn(0)}),j=si([XJ("Tx"),Us()],z,[zs(),ZJ()]);return si([Us()],L,M,j,[zs()])},iDe=function(e){for(var t=Fn(e.x),r=Fn(e.y),n=Fn(e.width),i=Fn(e.height),l=Fn(e.lineHeight),h=Fn(e.borderWidth),p=Fn(e.padding),o=t+h/2+p,_=r+h/2+p,C=n-(h/2+p)*2,M=i-(h/2+p)*2,L=[aA(o,_),ta(o,_+M),ta(o+C,_+M),ta(o+C,_),Jf(),HJ(),jJ()],z=jy({x:t,y:r,width:n,height:i,borderWidth:e.borderWidth,color:e.color,borderColor:e.borderColor,rotate:hn(0),xSkew:hn(0),ySkew:hn(0)}),j=[],K=0,$=e.selectedLines.length;K<$;K++){var q=e.textLines[e.selectedLines[K]];j.push.apply(j,jy({x:q.x-p,y:q.y-(l-q.height)/2,width:n-h,height:q.height+(l-q.height)/2,borderWidth:0,color:e.selectedColor,borderColor:void 0,rotate:hn(0),xSkew:hn(0),ySkew:hn(0)}))}var ee=PU(e.textLines,{color:e.textColor,font:e.font,size:e.fontSize,rotate:hn(0),xSkew:hn(0),ySkew:hn(0)}),ie=si([XJ("Tx"),Us()],ee,[zs(),ZJ()]);return si([Us()],z,j,L,ie,[zs()])},oDe=function(e){Ar(t,e);function t(){var r=this,n="Input document to `PDFDocument.load` is encrypted. You can use `PDFDocument.load(..., { ignoreEncryption: true })` if you wish to load the document anyways.";return r=e.call(this,n)||this,r}return t}(Error),sDe=function(e){Ar(t,e);function t(){var r=this,n="Input to `PDFDocument.embedFont` was a custom font, but no `fontkit` instance was found. You must register a `fontkit` instance with `PDFDocument.registerFontkit(...)` before embedding custom fonts.";return r=e.call(this,n)||this,r}return t}(Error),aDe=function(e){Ar(t,e);function t(){var r=this,n="A `page` passed to `PDFDocument.addPage` or `PDFDocument.insertPage` was from a different (foreign) PDF document. If you want to copy pages from one PDFDocument to another, you must use `PDFDocument.copyPages(...)` to copy the pages before adding or inserting them.";return r=e.call(this,n)||this,r}return t}(Error),lDe=function(e){Ar(t,e);function t(){var r=this,n="PDFDocument has no pages so `PDFDocument.removePage` cannot be called";return r=e.call(this,n)||this,r}return t}(Error),cDe=function(e){Ar(t,e);function t(r){var n=this,i='PDFDocument has no form field with the name "'+r+'"';return n=e.call(this,i)||this,n}return t}(Error),tm=function(e){Ar(t,e);function t(r,n,i){var l,h,p=this,o=n==null?void 0:n.name,_=(h=(l=i==null?void 0:i.constructor)===null||l===void 0?void 0:l.name)!==null&&h!==void 0?h:i,C='Expected field "'+r+'" to be of type '+o+", "+("but it is actually of type "+_);return p=e.call(this,C)||this,p}return t}(Error);(function(e){Ar(t,e);function t(r){var n=this,i='Failed to select check box due to missing onValue: "'+r+'"';return n=e.call(this,i)||this,n}return t})(Error);var t$=function(e){Ar(t,e);function t(r){var n=this,i='A field already exists with the specified name: "'+r+'"';return n=e.call(this,i)||this,n}return t}(Error),uDe=function(e){Ar(t,e);function t(r){var n=this,i='Field name contains invalid component: "'+r+'"';return n=e.call(this,i)||this,n}return t}(Error);(function(e){Ar(t,e);function t(r){var n=this,i='A non-terminal field already exists with the specified name: "'+r+'"';return n=e.call(this,i)||this,n}return t})(Error);var hDe=function(e){Ar(t,e);function t(r){var n=this,i="Reading rich text fields is not supported: Attempted to read rich text field: "+r;return n=e.call(this,i)||this,n}return t}(Error),ADe=function(e){Ar(t,e);function t(r,n){var i=this,l="Failed to layout combed text as lineLength="+r+" is greater than cellCount="+n;return i=e.call(this,l)||this,i}return t}(Error),dDe=function(e){Ar(t,e);function t(r,n,i){var l=this,h="Attempted to set text with length="+r+" for TextField with maxLength="+n+" and name="+i;return l=e.call(this,h)||this,l}return t}(Error),fDe=function(e){Ar(t,e);function t(r,n,i){var l=this,h="Attempted to set maxLength="+n+", which is less than "+r+", the length of this field's current value (name="+i+")";return l=e.call(this,h)||this,l}return t}(Error),Rs;(function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right"})(Rs||(Rs={}));var r$=4,n$=500,i$=function(e,t,r,n){n===void 0&&(n=!1);for(var i=r$;i<n$;){for(var l=0,h=0,p=e.length;h<p;h++){l+=1;for(var o=e[h],_=o.split(" "),C=r.width,M=0,L=_.length;M<L;M++){var z=M===L-1,j=z?_[M]:_[M]+" ",K=t.widthOfTextAtSize(j,i);C-=K,C<=0&&(l+=1,C=r.width-K)}}if(!n&&l>e.length)return i-1;var $=t.heightAtSize(i),q=$+$*.2,ee=q*l;if(ee>Math.abs(r.height))return i-1;i+=1}return i},pDe=function(e,t,r,n){for(var i=r.width/n,l=r.height,h=r$,p=jPe(e);h<n$;){for(var o=0,_=p.length;o<_;o++){var C=p[o],M=t.widthOfTextAtSize(C,h)>i*.75;if(M)return h-1}var L=t.heightAtSize(h,{descender:!1});if(L>l)return h-1;h+=1}return h},mDe=function(e){for(var t=e.length;t>0;t--)if(/\s/.test(e[t]))return t},gDe=function(e,t,r,n){for(var i,l=e.length;l>0;){var h=e.substring(0,l),p=r.encodeText(h),o=r.widthOfTextAtSize(h,n);if(o<t){var _=e.substring(l)||void 0;return{line:h,encoded:p,width:o,remainder:_}}l=(i=mDe(h))!==null&&i!==void 0?i:0}return{line:e,encoded:r.encodeText(e),width:r.widthOfTextAtSize(e,n),remainder:void 0}},o$=function(e,t){var r=t.alignment,n=t.fontSize,i=t.font,l=t.bounds,h=_Y(iw(e));(n===void 0||n===0)&&(n=i$(h,i,l,!0));for(var p=i.heightAtSize(n),o=p+p*.2,_=[],C=l.x,M=l.y,L=l.x+l.width,z=l.y+l.height,j=l.y+l.height,K=0,$=h.length;K<$;K++)for(var q=h[K];q!==void 0;){var ee=gDe(q,l.width,i,n),ie=ee.line,fe=ee.encoded,me=ee.width,ye=ee.remainder,se=r===Rs.Left?l.x:r===Rs.Center?l.x+l.width/2-me/2:r===Rs.Right?l.x+l.width-me:l.x;j-=o,se<C&&(C=se),j<M&&(M=j),se+me>L&&(L=se+me),j+p>z&&(z=j+p),_.push({text:ie,encoded:fe,width:me,height:p,x:se,y:j}),q=ye==null?void 0:ye.trim()}return{fontSize:n,lineHeight:o,lines:_,bounds:{x:C,y:M,width:L-C,height:z-M}}},yDe=function(e,t){var r=t.fontSize,n=t.font,i=t.bounds,l=t.cellCount,h=xY(iw(e));if(h.length>l)throw new ADe(h.length,l);(r===void 0||r===0)&&(r=pDe(h,n,i,l));for(var p=i.width/l,o=n.heightAtSize(r,{descender:!1}),_=i.y+(i.height/2-o/2),C=[],M=i.x,L=i.y,z=i.x+i.width,j=i.y+i.height,K=0,$=0;K<l;){var q=bY(h,$),ee=q[0],ie=q[1],fe=n.encodeText(ee),me=n.widthOfTextAtSize(ee,r),ye=i.x+(p*K+p/2),se=ye-me/2;se<M&&(M=se),_<L&&(L=_),se+me>z&&(z=se+me),_+o>j&&(j=_+o),C.push({text:h,encoded:fe,width:me,height:o,x:se,y:_}),K+=1,$+=ie}return{fontSize:r,cells:C,bounds:{x:M,y:L,width:z-M,height:j-L}}},HT=function(e,t){var r=t.alignment,n=t.fontSize,i=t.font,l=t.bounds,h=xY(iw(e));(n===void 0||n===0)&&(n=i$([h],i,l));var p=i.encodeText(h),o=i.widthOfTextAtSize(h,n),_=i.heightAtSize(n,{descender:!1}),C=r===Rs.Left?l.x:r===Rs.Center?l.x+l.width/2-o/2:r===Rs.Right?l.x+l.width-o:l.x,M=l.y+(l.height/2-_/2);return{fontSize:n,line:{text:h,encoded:p,width:o,height:_,x:C,y:M},bounds:{x:C,y:M,width:o,height:_}}},uv=function(e){return"normal"in e?e:{normal:e}},vDe=/\/([^\0\t\n\f\r\ ]+)[\0\t\n\f\r\ ]+(\d*\.\d+|\d+)[\0\t\n\f\r\ ]+Tf/,ep=function(e){var t,r,n=(t=e.getDefaultAppearance())!==null&&t!==void 0?t:"",i=(r=nU(n,vDe).match)!==null&&r!==void 0?r:[],l=Number(i[2]);return isFinite(l)?l:void 0},_De=/(\d*\.\d+|\d+)[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]+(g|rg|k)/,_u=function(e){var t,r=(t=e.getDefaultAppearance())!==null&&t!==void 0?t:"",n=nU(r,_De).match,i=n??[],l=i[1],h=i[2],p=i[3],o=i[4],_=i[5];if(_==="g"&&l)return YJ(Number(l));if(_==="rg"&&l&&h&&p)return Ri(Number(l),Number(h),Number(p));if(_==="k"&&l&&h&&p&&o)return JJ(Number(l),Number(h),Number(p),Number(o))},xu=function(e,t,r,n){var i;n===void 0&&(n=0);var l=[ng(t).toString(),SU((i=r==null?void 0:r.name)!==null&&i!==void 0?i:"dummy__noop",n).toString()].join(`
`);e.setDefaultAppearance(l)},xDe=function(e,t){var r,n,i,l=_u(t),h=_u(e.acroField),p=t.getRectangle(),o=t.getAppearanceCharacteristics(),_=t.getBorderStyle(),C=(r=_==null?void 0:_.getWidth())!==null&&r!==void 0?r:0,M=md(o==null?void 0:o.getRotation()),L=tg(p,M),z=L.width,j=L.height,K=dp(bn(bn({},p),{rotation:M})),$=Ri(0,0,0),q=(n=gl(o==null?void 0:o.getBorderColor()))!==null&&n!==void 0?n:$,ee=gl(o==null?void 0:o.getBackgroundColor()),ie=gl(o==null?void 0:o.getBackgroundColor(),.8),fe=(i=l??h)!==null&&i!==void 0?i:$;xu(l?t:e.acroField,fe);var me={x:0+C/2,y:0+C/2,width:z-C,height:j-C,thickness:1.5,borderWidth:C,borderColor:q,markColor:fe};return{normal:{on:si(K,xS(bn(bn({},me),{color:ee,filled:!0}))),off:si(K,xS(bn(bn({},me),{color:ee,filled:!1})))},down:{on:si(K,xS(bn(bn({},me),{color:ie,filled:!0}))),off:si(K,xS(bn(bn({},me),{color:ie,filled:!1})))}}},bDe=function(e,t){var r,n,i,l=_u(t),h=_u(e.acroField),p=t.getRectangle(),o=t.getAppearanceCharacteristics(),_=t.getBorderStyle(),C=(r=_==null?void 0:_.getWidth())!==null&&r!==void 0?r:0,M=md(o==null?void 0:o.getRotation()),L=tg(p,M),z=L.width,j=L.height,K=dp(bn(bn({},p),{rotation:M})),$=Ri(0,0,0),q=(n=gl(o==null?void 0:o.getBorderColor()))!==null&&n!==void 0?n:$,ee=gl(o==null?void 0:o.getBackgroundColor()),ie=gl(o==null?void 0:o.getBackgroundColor(),.8),fe=(i=l??h)!==null&&i!==void 0?i:$;xu(l?t:e.acroField,fe);var me={x:z/2,y:j/2,width:z-C,height:j-C,borderWidth:C,borderColor:q,dotColor:fe};return{normal:{on:si(K,bS(bn(bn({},me),{color:ee,filled:!0}))),off:si(K,bS(bn(bn({},me),{color:ee,filled:!1})))},down:{on:si(K,bS(bn(bn({},me),{color:ie,filled:!0}))),off:si(K,bS(bn(bn({},me),{color:ie,filled:!1})))}}},wDe=function(e,t,r){var n,i,l,h,p,o=_u(t),_=_u(e.acroField),C=ep(t),M=ep(e.acroField),L=t.getRectangle(),z=t.getAppearanceCharacteristics(),j=t.getBorderStyle(),K=z==null?void 0:z.getCaptions(),$=(n=K==null?void 0:K.normal)!==null&&n!==void 0?n:"",q=(l=(i=K==null?void 0:K.down)!==null&&i!==void 0?i:$)!==null&&l!==void 0?l:"",ee=(h=j==null?void 0:j.getWidth())!==null&&h!==void 0?h:0,ie=md(z==null?void 0:z.getRotation()),fe=tg(L,ie),me=fe.width,ye=fe.height,se=dp(bn(bn({},L),{rotation:ie})),re=Ri(0,0,0),de=gl(z==null?void 0:z.getBorderColor()),_e=gl(z==null?void 0:z.getBackgroundColor()),ve=gl(z==null?void 0:z.getBackgroundColor(),.8),Pe={x:ee,y:ee,width:me-ee*2,height:ye-ee*2},Ee=HT($,{alignment:Rs.Center,fontSize:C??M,font:r,bounds:Pe}),Ht=HT(q,{alignment:Rs.Center,fontSize:C??M,font:r,bounds:Pe}),Xt=Math.min(Ee.fontSize,Ht.fontSize),gt=(p=o??_)!==null&&p!==void 0?p:re;xu(o||C!==void 0?t:e.acroField,gt,r,Xt);var jt={x:0+ee/2,y:0+ee/2,width:me-ee,height:ye-ee,borderWidth:ee,borderColor:de,textColor:gt,font:r.name,fontSize:Xt};return{normal:si(se,Uj(bn(bn({},jt),{color:_e,textLines:[Ee.line]}))),down:si(se,Uj(bn(bn({},jt),{color:ve,textLines:[Ht.line]})))}},BDe=function(e,t,r){var n,i,l,h,p=_u(t),o=_u(e.acroField),_=ep(t),C=ep(e.acroField),M=t.getRectangle(),L=t.getAppearanceCharacteristics(),z=t.getBorderStyle(),j=(n=e.getText())!==null&&n!==void 0?n:"",K=(i=z==null?void 0:z.getWidth())!==null&&i!==void 0?i:0,$=md(L==null?void 0:L.getRotation()),q=tg(M,$),ee=q.width,ie=q.height,fe=dp(bn(bn({},M),{rotation:$})),me=Ri(0,0,0),ye=gl(L==null?void 0:L.getBorderColor()),se=gl(L==null?void 0:L.getBackgroundColor()),re,de,_e=e.isCombed()?0:1,ve={x:K+_e,y:K+_e,width:ee-(K+_e)*2,height:ie-(K+_e)*2};if(e.isMultiline()){var Pe=o$(j,{alignment:e.getAlignment(),fontSize:_??C,font:r,bounds:ve});re=Pe.lines,de=Pe.fontSize}else if(e.isCombed()){var Pe=yDe(j,{fontSize:_??C,font:r,bounds:ve,cellCount:(l=e.getMaxLength())!==null&&l!==void 0?l:0});re=Pe.cells,de=Pe.fontSize}else{var Pe=HT(j,{alignment:e.getAlignment(),fontSize:_??C,font:r,bounds:ve});re=[Pe.line],de=Pe.fontSize}var Ee=(h=p??o)!==null&&h!==void 0?h:me;xu(p||_!==void 0?t:e.acroField,Ee,r,de);var Ht={x:0+K/2,y:0+K/2,width:ee-K,height:ie-K,borderWidth:K??0,borderColor:ye,textColor:Ee,font:r.name,fontSize:de,color:se,textLines:re,padding:_e};return si(fe,e$(Ht))},CDe=function(e,t,r){var n,i,l,h=_u(t),p=_u(e.acroField),o=ep(t),_=ep(e.acroField),C=t.getRectangle(),M=t.getAppearanceCharacteristics(),L=t.getBorderStyle(),z=(n=e.getSelected()[0])!==null&&n!==void 0?n:"",j=(i=L==null?void 0:L.getWidth())!==null&&i!==void 0?i:0,K=md(M==null?void 0:M.getRotation()),$=tg(C,K),q=$.width,ee=$.height,ie=dp(bn(bn({},C),{rotation:K})),fe=Ri(0,0,0),me=gl(M==null?void 0:M.getBorderColor()),ye=gl(M==null?void 0:M.getBackgroundColor()),se=1,re={x:j+se,y:j+se,width:q-(j+se)*2,height:ee-(j+se)*2},de=HT(z,{alignment:Rs.Left,fontSize:o??_,font:r,bounds:re}),_e=de.line,ve=de.fontSize,Pe=(l=h??p)!==null&&l!==void 0?l:fe;xu(h||o!==void 0?t:e.acroField,Pe,r,ve);var Ee={x:0+j/2,y:0+j/2,width:q-j,height:ee-j,borderWidth:j??0,borderColor:me,textColor:Pe,font:r.name,fontSize:ve,color:ye,textLines:[_e],padding:se};return si(ie,e$(Ee))},SDe=function(e,t,r){var n,i,l=_u(t),h=_u(e.acroField),p=ep(t),o=ep(e.acroField),_=t.getRectangle(),C=t.getAppearanceCharacteristics(),M=t.getBorderStyle(),L=(n=M==null?void 0:M.getWidth())!==null&&n!==void 0?n:0,z=md(C==null?void 0:C.getRotation()),j=tg(_,z),K=j.width,$=j.height,q=dp(bn(bn({},_),{rotation:z})),ee=Ri(0,0,0),ie=gl(C==null?void 0:C.getBorderColor()),fe=gl(C==null?void 0:C.getBackgroundColor()),me=e.getOptions(),ye=e.getSelected();e.isSorted()&&me.sort();for(var se="",re=0,de=me.length;re<de;re++)se+=me[re],re<de-1&&(se+=`
`);for(var _e=1,ve={x:L+_e,y:L+_e,width:K-(L+_e)*2,height:$-(L+_e)*2},Pe=o$(se,{alignment:Rs.Left,fontSize:p??o,font:r,bounds:ve}),Ee=Pe.lines,Ht=Pe.fontSize,Xt=Pe.lineHeight,gt=[],re=0,de=Ee.length;re<de;re++){var jt=Ee[re];ye.includes(jt.text)&&gt.push(re)}var Mt=Ri(153/255,193/255,218/255),Yt=(i=l??h)!==null&&i!==void 0?i:ee;return xu(l||p!==void 0?t:e.acroField,Yt,r,Ht),si(q,iDe({x:0+L/2,y:0+L/2,width:K-L,height:$-L,borderWidth:L??0,borderColor:ie,textColor:Yt,font:r.name,fontSize:Ht,color:fe,textLines:Ee,lineHeight:Xt,selectedColor:Mt,selectedLines:gt,padding:_e}))},s$=function(){function e(t,r,n){this.alreadyEmbedded=!1,Ct(t,"ref",[[Mi,"PDFRef"]]),Ct(r,"doc",[[tp,"PDFDocument"]]),Ct(n,"embedder",[[PJ,"PDFPageEmbedder"]]),this.ref=t,this.doc=r,this.width=n.width,this.height=n.height,this.embedder=n}return e.prototype.scale=function(t){return Ct(t,"factor",["number"]),{width:this.width*t,height:this.height*t}},e.prototype.size=function(){return this.scale(1)},e.prototype.embed=function(){return Tn(this,void 0,void 0,function(){return In(this,function(t){switch(t.label){case 0:return this.alreadyEmbedded?[3,2]:[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:t.sent(),this.alreadyEmbedded=!0,t.label=2;case 2:return[2]}})})},e.of=function(t,r,n){return new e(t,r,n)},e}(),yc=function(){function e(t,r,n){this.modified=!0,Ct(t,"ref",[[Mi,"PDFRef"]]),Ct(r,"doc",[[tp,"PDFDocument"]]),Ct(n,"embedder",[[gU,"CustomFontEmbedder"],[DT,"StandardFontEmbedder"]]),this.ref=t,this.doc=r,this.name=n.fontName,this.embedder=n}return e.prototype.encodeText=function(t){return Ct(t,"text",["string"]),this.modified=!0,this.embedder.encodeText(t)},e.prototype.widthOfTextAtSize=function(t,r){return Ct(t,"text",["string"]),Ct(r,"size",["number"]),this.embedder.widthOfTextAtSize(t,r)},e.prototype.heightAtSize=function(t,r){var n;return Ct(t,"size",["number"]),ur(r==null?void 0:r.descender,"options.descender",["boolean"]),this.embedder.heightOfFontAtSize(t,{descender:(n=r==null?void 0:r.descender)!==null&&n!==void 0?n:!0})},e.prototype.sizeAtHeight=function(t){return Ct(t,"height",["number"]),this.embedder.sizeOfFontAtHeight(t)},e.prototype.getCharacterSet=function(){return this.embedder instanceof DT?this.embedder.encoding.supportedCodePoints:this.embedder.font.characterSet},e.prototype.embed=function(){return Tn(this,void 0,void 0,function(){return In(this,function(t){switch(t.label){case 0:return this.modified?[4,this.embedder.embedIntoContext(this.doc.context,this.ref)]:[3,2];case 1:t.sent(),this.modified=!1,t.label=2;case 2:return[2]}})})},e.of=function(t,r,n){return new e(t,r,n)},e}(),h2=function(){function e(t,r,n){Ct(t,"ref",[[Mi,"PDFRef"]]),Ct(r,"doc",[[tp,"PDFDocument"]]),Ct(n,"embedder",[[EJ,"JpegEmbedder"],[TJ,"PngEmbedder"]]),this.ref=t,this.doc=r,this.width=n.width,this.height=n.height,this.embedder=n}return e.prototype.scale=function(t){return Ct(t,"factor",["number"]),{width:this.width*t,height:this.height*t}},e.prototype.scaleToFit=function(t,r){Ct(t,"width",["number"]),Ct(r,"height",["number"]);var n=t/this.width,i=r/this.height,l=Math.min(n,i);return this.scale(l)},e.prototype.size=function(){return this.scale(1)},e.prototype.embed=function(){return Tn(this,void 0,void 0,function(){var t,r,n;return In(this,function(i){switch(i.label){case 0:return this.embedder?(this.embedTask||(t=this,r=t.doc,n=t.ref,this.embedTask=this.embedder.embedIntoContext(r.context,n)),[4,this.embedTask]):[2];case 1:return i.sent(),this.embedder=void 0,[2]}})})},e.of=function(t,r,n){return new e(t,r,n)},e}(),Qf;(function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right"})(Qf||(Qf={}));var hv=function(e){ur(e==null?void 0:e.x,"options.x",["number"]),ur(e==null?void 0:e.y,"options.y",["number"]),ur(e==null?void 0:e.width,"options.width",["number"]),ur(e==null?void 0:e.height,"options.height",["number"]),ur(e==null?void 0:e.textColor,"options.textColor",[[Object,"Color"]]),ur(e==null?void 0:e.backgroundColor,"options.backgroundColor",[[Object,"Color"]]),ur(e==null?void 0:e.borderColor,"options.borderColor",[[Object,"Color"]]),ur(e==null?void 0:e.borderWidth,"options.borderWidth",["number"]),ur(e==null?void 0:e.rotate,"options.rotate",[[Object,"Rotation"]])},ig=function(){function e(t,r,n){Ct(t,"acroField",[[lv,"PDFAcroTerminal"]]),Ct(r,"ref",[[Mi,"PDFRef"]]),Ct(n,"doc",[[tp,"PDFDocument"]]),this.acroField=t,this.ref=r,this.doc=n}return e.prototype.getName=function(){var t;return(t=this.acroField.getFullyQualifiedName())!==null&&t!==void 0?t:""},e.prototype.isReadOnly=function(){return this.acroField.hasFlag(qu.ReadOnly)},e.prototype.enableReadOnly=function(){this.acroField.setFlagTo(qu.ReadOnly,!0)},e.prototype.disableReadOnly=function(){this.acroField.setFlagTo(qu.ReadOnly,!1)},e.prototype.isRequired=function(){return this.acroField.hasFlag(qu.Required)},e.prototype.enableRequired=function(){this.acroField.setFlagTo(qu.Required,!0)},e.prototype.disableRequired=function(){this.acroField.setFlagTo(qu.Required,!1)},e.prototype.isExported=function(){return!this.acroField.hasFlag(qu.NoExport)},e.prototype.enableExporting=function(){this.acroField.setFlagTo(qu.NoExport,!1)},e.prototype.disableExporting=function(){this.acroField.setFlagTo(qu.NoExport,!0)},e.prototype.needsAppearancesUpdate=function(){throw new au(this.constructor.name,"needsAppearancesUpdate")},e.prototype.defaultUpdateAppearances=function(t){throw new au(this.constructor.name,"defaultUpdateAppearances")},e.prototype.markAsDirty=function(){this.doc.getForm().markFieldAsDirty(this.ref)},e.prototype.markAsClean=function(){this.doc.getForm().markFieldAsClean(this.ref)},e.prototype.isDirty=function(){return this.doc.getForm().fieldIsDirty(this.ref)},e.prototype.createWidget=function(t){var r,n=t.textColor,i=t.backgroundColor,l=t.borderColor,h=t.borderWidth,p=QJ(t.rotate),o=t.caption,_=t.x,C=t.y,M=t.width+h,L=t.height+h,z=!!t.hidden,j=t.page;_J(p,"degreesAngle",90);var K=l2.create(this.doc.context,this.ref),$=L4e({x:_,y:C,width:M,height:L},h,p);K.setRectangle($),j&&K.setP(j);var q=K.getOrCreateAppearanceCharacteristics();i&&q.setBackgroundColor(kj(i)),q.setRotation(p),o&&q.setCaptions({normal:o}),l&&q.setBorderColor(kj(l));var ee=K.getOrCreateBorderStyle();if(h!==void 0&&ee.setWidth(h),K.setFlagTo(Fx.Print,!0),K.setFlagTo(Fx.Hidden,z),K.setFlagTo(Fx.Invisible,!1),n){var ie=(r=this.acroField.getDefaultAppearance())!==null&&r!==void 0?r:"",fe=ie+`
`+ng(n).toString();this.acroField.setDefaultAppearance(fe)}return K},e.prototype.updateWidgetAppearanceWithFont=function(t,r,n){var i=n.normal,l=n.rollover,h=n.down;this.updateWidgetAppearances(t,{normal:this.createAppearanceStream(t,i,r),rollover:l&&this.createAppearanceStream(t,l,r),down:h&&this.createAppearanceStream(t,h,r)})},e.prototype.updateOnOffWidgetAppearance=function(t,r,n){var i=n.normal,l=n.rollover,h=n.down;this.updateWidgetAppearances(t,{normal:this.createAppearanceDict(t,i,r),rollover:l&&this.createAppearanceDict(t,l,r),down:h&&this.createAppearanceDict(t,h,r)})},e.prototype.updateWidgetAppearances=function(t,r){var n=r.normal,i=r.rollover,l=r.down;t.setNormalAppearance(n),i?t.setRolloverAppearance(i):t.removeRolloverAppearance(),l?t.setDownAppearance(l):t.removeDownAppearance()},e.prototype.createAppearanceStream=function(t,r,n){var i,l=this.acroField.dict.context,h=t.getRectangle(),p=h.width,o=h.height,_=n&&{Font:(i={},i[n.name]=n.ref,i)},C=l.formXObject(r,{Resources:_,BBox:l.obj([0,0,p,o]),Matrix:l.obj([1,0,0,1,0,0])}),M=l.register(C);return M},e.prototype.createImageAppearanceStream=function(t,r,n){var i,l,h=this.acroField.dict.context,p=t.getRectangle(),o=t.getAppearanceCharacteristics(),_=t.getBorderStyle(),C=(l=_==null?void 0:_.getWidth())!==null&&l!==void 0?l:0,M=md(o==null?void 0:o.getRotation()),L=dp(bn(bn({},p),{rotation:M})),z=tg(p,M),j=r.scaleToFit(z.width-C*2,z.height-C*2),K={x:C,y:C,width:j.width,height:j.height,rotate:hn(0),xSkew:hn(0),ySkew:hn(0)};n===Qf.Center?(K.x+=(z.width-C*2)/2-j.width/2,K.y+=(z.height-C*2)/2-j.height/2):n===Qf.Right&&(K.x=z.width-C-j.width,K.y=z.height-C-j.height);var $=this.doc.context.addRandomSuffix("Image",10),q=si(L,$J($,K)),ee={XObject:(i={},i[$]=r.ref,i)},ie=h.formXObject(q,{Resources:ee,BBox:h.obj([0,0,p.width,p.height]),Matrix:h.obj([1,0,0,1,0,0])});return h.register(ie)},e.prototype.createAppearanceDict=function(t,r,n){var i=this.acroField.dict.context,l=this.createAppearanceStream(t,r.on),h=this.createAppearanceStream(t,r.off),p=i.obj({});return p.set(n,l),p.set(Ge.of("Off"),h),p},e}(),K1=function(e){Ar(t,e);function t(r,n,i){var l=e.call(this,r,n,i)||this;return Ct(r,"acroCheckBox",[[CF,"PDFAcroCheckBox"]]),l.acroField=r,l}return t.prototype.check=function(){var r,n=(r=this.acroField.getOnValue())!==null&&r!==void 0?r:Ge.of("Yes");this.markAsDirty(),this.acroField.setValue(n)},t.prototype.uncheck=function(){this.markAsDirty(),this.acroField.setValue(Ge.of("Off"))},t.prototype.isChecked=function(){var r=this.acroField.getOnValue();return!!r&&r===this.acroField.getValue()},t.prototype.addToPage=function(r,n){var i,l,h,p,o,_;Ct(r,"page",[[ru,"PDFPage"]]),hv(n),n||(n={}),"textColor"in n||(n.textColor=Ri(0,0,0)),"backgroundColor"in n||(n.backgroundColor=Ri(1,1,1)),"borderColor"in n||(n.borderColor=Ri(0,0,0)),"borderWidth"in n||(n.borderWidth=1);var C=this.createWidget({x:(i=n.x)!==null&&i!==void 0?i:0,y:(l=n.y)!==null&&l!==void 0?l:0,width:(h=n.width)!==null&&h!==void 0?h:50,height:(p=n.height)!==null&&p!==void 0?p:50,textColor:n.textColor,backgroundColor:n.backgroundColor,borderColor:n.borderColor,borderWidth:(o=n.borderWidth)!==null&&o!==void 0?o:0,rotate:(_=n.rotate)!==null&&_!==void 0?_:hn(0),hidden:n.hidden,page:r.ref}),M=this.doc.context.register(C.dict);this.acroField.addWidget(M),C.setAppearanceState(Ge.of("Off")),this.updateWidgetAppearance(C,Ge.of("Yes")),r.node.addAnnot(M)},t.prototype.needsAppearancesUpdate=function(){for(var r,n=this.acroField.getWidgets(),i=0,l=n.length;i<l;i++){var h=n[i],p=h.getAppearanceState(),o=(r=h.getAppearances())===null||r===void 0?void 0:r.normal;if(!(o instanceof Sn)||p&&!o.has(p))return!0}return!1},t.prototype.defaultUpdateAppearances=function(){this.updateAppearances()},t.prototype.updateAppearances=function(r){var n;ur(r,"provider",[Function]);for(var i=this.acroField.getWidgets(),l=0,h=i.length;l<h;l++){var p=i[l],o=(n=p.getOnValue())!==null&&n!==void 0?n:Ge.of("Yes");o&&this.updateWidgetAppearance(p,o,r)}this.markAsClean()},t.prototype.updateWidgetAppearance=function(r,n,i){var l=i??xDe,h=uv(l(this,r));this.updateOnOffWidgetAppearance(r,n,h)},t.of=function(r,n,i){return new t(r,n,i)},t}(ig),gE=function(e){Ar(t,e);function t(r,n,i){var l=e.call(this,r,n,i)||this;return Ct(r,"acroComboBox",[[SF,"PDFAcroComboBox"]]),l.acroField=r,l}return t.prototype.getOptions=function(){for(var r=this.acroField.getOptions(),n=new Array(r.length),i=0,l=n.length;i<l;i++){var h=r[i],p=h.display,o=h.value;n[i]=(p??o).decodeText()}return n},t.prototype.getSelected=function(){for(var r=this.acroField.getValues(),n=new Array(r.length),i=0,l=r.length;i<l;i++)n[i]=r[i].decodeText();return n},t.prototype.setOptions=function(r){Ct(r,"options",[Array]);for(var n=new Array(r.length),i=0,l=r.length;i<l;i++)n[i]={value:cn.fromText(r[i])};this.acroField.setOptions(n)},t.prototype.addOptions=function(r){Ct(r,"options",["string",Array]);for(var n=Array.isArray(r)?r:[r],i=this.acroField.getOptions(),l=new Array(n.length),h=0,p=n.length;h<p;h++)l[h]={value:cn.fromText(n[h])};this.acroField.setOptions(i.concat(l))},t.prototype.select=function(r,n){n===void 0&&(n=!1),Ct(r,"options",["string",Array]),Ct(n,"merge",["boolean"]);var i=Array.isArray(r)?r:[r],l=this.getOptions(),h=i.find(function(M){return!l.includes(M)});h&&this.enableEditing(),this.markAsDirty(),(i.length>1||i.length===1&&n)&&this.enableMultiselect();for(var p=new Array(i.length),o=0,_=i.length;o<_;o++)p[o]=cn.fromText(i[o]);if(n){var C=this.acroField.getValues();this.acroField.setValues(C.concat(p))}else this.acroField.setValues(p)},t.prototype.clear=function(){this.markAsDirty(),this.acroField.setValues([])},t.prototype.setFontSize=function(r){wF(r,"fontSize"),this.acroField.setFontSize(r),this.markAsDirty()},t.prototype.isEditable=function(){return this.acroField.hasFlag(Ii.Edit)},t.prototype.enableEditing=function(){this.acroField.setFlagTo(Ii.Edit,!0)},t.prototype.disableEditing=function(){this.acroField.setFlagTo(Ii.Edit,!1)},t.prototype.isSorted=function(){return this.acroField.hasFlag(Ii.Sort)},t.prototype.enableSorting=function(){this.acroField.setFlagTo(Ii.Sort,!0)},t.prototype.disableSorting=function(){this.acroField.setFlagTo(Ii.Sort,!1)},t.prototype.isMultiselect=function(){return this.acroField.hasFlag(Ii.MultiSelect)},t.prototype.enableMultiselect=function(){this.acroField.setFlagTo(Ii.MultiSelect,!0)},t.prototype.disableMultiselect=function(){this.acroField.setFlagTo(Ii.MultiSelect,!1)},t.prototype.isSpellChecked=function(){return!this.acroField.hasFlag(Ii.DoNotSpellCheck)},t.prototype.enableSpellChecking=function(){this.acroField.setFlagTo(Ii.DoNotSpellCheck,!1)},t.prototype.disableSpellChecking=function(){this.acroField.setFlagTo(Ii.DoNotSpellCheck,!0)},t.prototype.isSelectOnClick=function(){return this.acroField.hasFlag(Ii.CommitOnSelChange)},t.prototype.enableSelectOnClick=function(){this.acroField.setFlagTo(Ii.CommitOnSelChange,!0)},t.prototype.disableSelectOnClick=function(){this.acroField.setFlagTo(Ii.CommitOnSelChange,!1)},t.prototype.addToPage=function(r,n){var i,l,h,p,o,_,C;Ct(r,"page",[[ru,"PDFPage"]]),hv(n),n||(n={}),"textColor"in n||(n.textColor=Ri(0,0,0)),"backgroundColor"in n||(n.backgroundColor=Ri(1,1,1)),"borderColor"in n||(n.borderColor=Ri(0,0,0)),"borderWidth"in n||(n.borderWidth=1);var M=this.createWidget({x:(i=n.x)!==null&&i!==void 0?i:0,y:(l=n.y)!==null&&l!==void 0?l:0,width:(h=n.width)!==null&&h!==void 0?h:200,height:(p=n.height)!==null&&p!==void 0?p:50,textColor:n.textColor,backgroundColor:n.backgroundColor,borderColor:n.borderColor,borderWidth:(o=n.borderWidth)!==null&&o!==void 0?o:0,rotate:(_=n.rotate)!==null&&_!==void 0?_:hn(0),hidden:n.hidden,page:r.ref}),L=this.doc.context.register(M.dict);this.acroField.addWidget(L);var z=(C=n.font)!==null&&C!==void 0?C:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(M,z),r.node.addAnnot(L)},t.prototype.needsAppearancesUpdate=function(){var r;if(this.isDirty())return!0;for(var n=this.acroField.getWidgets(),i=0,l=n.length;i<l;i++){var h=n[i],p=((r=h.getAppearances())===null||r===void 0?void 0:r.normal)instanceof fc;if(!p)return!0}return!1},t.prototype.defaultUpdateAppearances=function(r){Ct(r,"font",[[yc,"PDFFont"]]),this.updateAppearances(r)},t.prototype.updateAppearances=function(r,n){Ct(r,"font",[[yc,"PDFFont"]]),ur(n,"provider",[Function]);for(var i=this.acroField.getWidgets(),l=0,h=i.length;l<h;l++){var p=i[l];this.updateWidgetAppearance(p,r,n)}this.markAsClean()},t.prototype.updateWidgetAppearance=function(r,n,i){var l=i??CDe,h=uv(l(this,r,n));this.updateWidgetAppearanceWithFont(r,n,h)},t.of=function(r,n,i){return new t(r,n,i)},t}(ig),yE=function(e){Ar(t,e);function t(r,n,i){var l=e.call(this,r,n,i)||this;return Ct(r,"acroListBox",[[FF,"PDFAcroListBox"]]),l.acroField=r,l}return t.prototype.getOptions=function(){for(var r=this.acroField.getOptions(),n=new Array(r.length),i=0,l=n.length;i<l;i++){var h=r[i],p=h.display,o=h.value;n[i]=(p??o).decodeText()}return n},t.prototype.getSelected=function(){for(var r=this.acroField.getValues(),n=new Array(r.length),i=0,l=r.length;i<l;i++)n[i]=r[i].decodeText();return n},t.prototype.setOptions=function(r){Ct(r,"options",[Array]),this.markAsDirty();for(var n=new Array(r.length),i=0,l=r.length;i<l;i++)n[i]={value:cn.fromText(r[i])};this.acroField.setOptions(n)},t.prototype.addOptions=function(r){Ct(r,"options",["string",Array]),this.markAsDirty();for(var n=Array.isArray(r)?r:[r],i=this.acroField.getOptions(),l=new Array(n.length),h=0,p=n.length;h<p;h++)l[h]={value:cn.fromText(n[h])};this.acroField.setOptions(i.concat(l))},t.prototype.select=function(r,n){n===void 0&&(n=!1),Ct(r,"options",["string",Array]),Ct(n,"merge",["boolean"]);var i=Array.isArray(r)?r:[r],l=this.getOptions();Bke(i,"option",l),this.markAsDirty(),(i.length>1||i.length===1&&n)&&this.enableMultiselect();for(var h=new Array(i.length),p=0,o=i.length;p<o;p++)h[p]=cn.fromText(i[p]);if(n){var _=this.acroField.getValues();this.acroField.setValues(_.concat(h))}else this.acroField.setValues(h)},t.prototype.clear=function(){this.markAsDirty(),this.acroField.setValues([])},t.prototype.setFontSize=function(r){wF(r,"fontSize"),this.acroField.setFontSize(r),this.markAsDirty()},t.prototype.isSorted=function(){return this.acroField.hasFlag(Ii.Sort)},t.prototype.enableSorting=function(){this.acroField.setFlagTo(Ii.Sort,!0)},t.prototype.disableSorting=function(){this.acroField.setFlagTo(Ii.Sort,!1)},t.prototype.isMultiselect=function(){return this.acroField.hasFlag(Ii.MultiSelect)},t.prototype.enableMultiselect=function(){this.acroField.setFlagTo(Ii.MultiSelect,!0)},t.prototype.disableMultiselect=function(){this.acroField.setFlagTo(Ii.MultiSelect,!1)},t.prototype.isSelectOnClick=function(){return this.acroField.hasFlag(Ii.CommitOnSelChange)},t.prototype.enableSelectOnClick=function(){this.acroField.setFlagTo(Ii.CommitOnSelChange,!0)},t.prototype.disableSelectOnClick=function(){this.acroField.setFlagTo(Ii.CommitOnSelChange,!1)},t.prototype.addToPage=function(r,n){var i,l,h,p,o,_,C;Ct(r,"page",[[ru,"PDFPage"]]),hv(n),n||(n={}),"textColor"in n||(n.textColor=Ri(0,0,0)),"backgroundColor"in n||(n.backgroundColor=Ri(1,1,1)),"borderColor"in n||(n.borderColor=Ri(0,0,0)),"borderWidth"in n||(n.borderWidth=1);var M=this.createWidget({x:(i=n.x)!==null&&i!==void 0?i:0,y:(l=n.y)!==null&&l!==void 0?l:0,width:(h=n.width)!==null&&h!==void 0?h:200,height:(p=n.height)!==null&&p!==void 0?p:100,textColor:n.textColor,backgroundColor:n.backgroundColor,borderColor:n.borderColor,borderWidth:(o=n.borderWidth)!==null&&o!==void 0?o:0,rotate:(_=n.rotate)!==null&&_!==void 0?_:hn(0),hidden:n.hidden,page:r.ref}),L=this.doc.context.register(M.dict);this.acroField.addWidget(L);var z=(C=n.font)!==null&&C!==void 0?C:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(M,z),r.node.addAnnot(L)},t.prototype.needsAppearancesUpdate=function(){var r;if(this.isDirty())return!0;for(var n=this.acroField.getWidgets(),i=0,l=n.length;i<l;i++){var h=n[i],p=((r=h.getAppearances())===null||r===void 0?void 0:r.normal)instanceof fc;if(!p)return!0}return!1},t.prototype.defaultUpdateAppearances=function(r){Ct(r,"font",[[yc,"PDFFont"]]),this.updateAppearances(r)},t.prototype.updateAppearances=function(r,n){Ct(r,"font",[[yc,"PDFFont"]]),ur(n,"provider",[Function]);for(var i=this.acroField.getWidgets(),l=0,h=i.length;l<h;l++){var p=i[l];this.updateWidgetAppearance(p,r,n)}this.markAsClean()},t.prototype.updateWidgetAppearance=function(r,n,i){var l=i??SDe,h=uv(l(this,r,n));this.updateWidgetAppearanceWithFont(r,n,h)},t.of=function(r,n,i){return new t(r,n,i)},t}(ig),W1=function(e){Ar(t,e);function t(r,n,i){var l=e.call(this,r,n,i)||this;return Ct(r,"acroRadioButton",[[IF,"PDFAcroRadioButton"]]),l.acroField=r,l}return t.prototype.getOptions=function(){var r=this.acroField.getExportValues();if(r){for(var n=new Array(r.length),i=0,l=r.length;i<l;i++)n[i]=r[i].decodeText();return n}for(var h=this.acroField.getOnValues(),p=new Array(h.length),i=0,l=p.length;i<l;i++)p[i]=h[i].decodeText();return p},t.prototype.getSelected=function(){var r=this.acroField.getValue();if(r!==Ge.of("Off")){var n=this.acroField.getExportValues();if(n){for(var i=this.acroField.getOnValues(),l=0,h=i.length;l<h;l++)if(i[l]===r)return n[l].decodeText()}return r.decodeText()}},t.prototype.select=function(r){Ct(r,"option",["string"]);var n=this.getOptions();Tf(r,"option",n),this.markAsDirty();var i=this.acroField.getOnValues(),l=this.acroField.getExportValues();if(l)for(var h=0,p=l.length;h<p;h++)l[h].decodeText()===r&&this.acroField.setValue(i[h]);else for(var h=0,p=i.length;h<p;h++){var o=i[h];o.decodeText()===r&&this.acroField.setValue(o)}},t.prototype.clear=function(){this.markAsDirty(),this.acroField.setValue(Ge.of("Off"))},t.prototype.isOffToggleable=function(){return!this.acroField.hasFlag(tu.NoToggleToOff)},t.prototype.enableOffToggling=function(){this.acroField.setFlagTo(tu.NoToggleToOff,!1)},t.prototype.disableOffToggling=function(){this.acroField.setFlagTo(tu.NoToggleToOff,!0)},t.prototype.isMutuallyExclusive=function(){return!this.acroField.hasFlag(tu.RadiosInUnison)},t.prototype.enableMutualExclusion=function(){this.acroField.setFlagTo(tu.RadiosInUnison,!1)},t.prototype.disableMutualExclusion=function(){this.acroField.setFlagTo(tu.RadiosInUnison,!0)},t.prototype.addOptionToPage=function(r,n,i){var l,h,p,o,_,C,M,L,z;Ct(r,"option",["string"]),Ct(n,"page",[[ru,"PDFPage"]]),hv(i);var j=this.createWidget({x:(l=i==null?void 0:i.x)!==null&&l!==void 0?l:0,y:(h=i==null?void 0:i.y)!==null&&h!==void 0?h:0,width:(p=i==null?void 0:i.width)!==null&&p!==void 0?p:50,height:(o=i==null?void 0:i.height)!==null&&o!==void 0?o:50,textColor:(_=i==null?void 0:i.textColor)!==null&&_!==void 0?_:Ri(0,0,0),backgroundColor:(C=i==null?void 0:i.backgroundColor)!==null&&C!==void 0?C:Ri(1,1,1),borderColor:(M=i==null?void 0:i.borderColor)!==null&&M!==void 0?M:Ri(0,0,0),borderWidth:(L=i==null?void 0:i.borderWidth)!==null&&L!==void 0?L:1,rotate:(z=i==null?void 0:i.rotate)!==null&&z!==void 0?z:hn(0),hidden:i==null?void 0:i.hidden,page:n.ref}),K=this.doc.context.register(j.dict),$=this.acroField.addWidgetWithOpt(K,cn.fromText(r),!this.isMutuallyExclusive());j.setAppearanceState(Ge.of("Off")),this.updateWidgetAppearance(j,$),n.node.addAnnot(K)},t.prototype.needsAppearancesUpdate=function(){for(var r,n=this.acroField.getWidgets(),i=0,l=n.length;i<l;i++){var h=n[i],p=h.getAppearanceState(),o=(r=h.getAppearances())===null||r===void 0?void 0:r.normal;if(!(o instanceof Sn)||p&&!o.has(p))return!0}return!1},t.prototype.defaultUpdateAppearances=function(){this.updateAppearances()},t.prototype.updateAppearances=function(r){ur(r,"provider",[Function]);for(var n=this.acroField.getWidgets(),i=0,l=n.length;i<l;i++){var h=n[i],p=h.getOnValue();p&&this.updateWidgetAppearance(h,p,r)}},t.prototype.updateWidgetAppearance=function(r,n,i){var l=i??bDe,h=uv(l(this,r));this.updateOnOffWidgetAppearance(r,n,h)},t.of=function(r,n,i){return new t(r,n,i)},t}(ig),A2=function(e){Ar(t,e);function t(r,n,i){var l=e.call(this,r,n,i)||this;return Ct(r,"acroSignature",[[vU,"PDFAcroSignature"]]),l.acroField=r,l}return t.prototype.needsAppearancesUpdate=function(){return!1},t.of=function(r,n,i){return new t(r,n,i)},t}(ig),vE=function(e){Ar(t,e);function t(r,n,i){var l=e.call(this,r,n,i)||this;return Ct(r,"acroText",[[EF,"PDFAcroText"]]),l.acroField=r,l}return t.prototype.getText=function(){var r=this.acroField.getValue();if(!r&&this.isRichFormatted())throw new hDe(this.getName());return r==null?void 0:r.decodeText()},t.prototype.setText=function(r){ur(r,"text",["string"]);var n=this.getMaxLength();if(n!==void 0&&r&&r.length>n)throw new dDe(r.length,n,this.getName());this.markAsDirty(),this.disableRichFormatting(),r?this.acroField.setValue(cn.fromText(r)):this.acroField.removeValue()},t.prototype.getAlignment=function(){var r=this.acroField.getQuadding();return r===0?Rs.Left:r===1?Rs.Center:r===2?Rs.Right:Rs.Left},t.prototype.setAlignment=function(r){Tf(r,"alignment",Rs),this.markAsDirty(),this.acroField.setQuadding(r)},t.prototype.getMaxLength=function(){return this.acroField.getMaxLength()},t.prototype.setMaxLength=function(r){if(Wu(r,"maxLength",0,Number.MAX_SAFE_INTEGER),this.markAsDirty(),r===void 0)this.acroField.removeMaxLength();else{var n=this.getText();if(n&&n.length>r)throw new fDe(n.length,r,this.getName());this.acroField.setMaxLength(r)}},t.prototype.removeMaxLength=function(){this.markAsDirty(),this.acroField.removeMaxLength()},t.prototype.setImage=function(r){for(var n=this.getAlignment(),i=n===Rs.Center?Qf.Center:n===Rs.Right?Qf.Right:Qf.Left,l=this.acroField.getWidgets(),h=0,p=l.length;h<p;h++){var o=l[h],_=this.createImageAppearanceStream(o,r,i);this.updateWidgetAppearances(o,{normal:_})}this.markAsClean()},t.prototype.setFontSize=function(r){wF(r,"fontSize"),this.acroField.setFontSize(r),this.markAsDirty()},t.prototype.isMultiline=function(){return this.acroField.hasFlag(zo.Multiline)},t.prototype.enableMultiline=function(){this.markAsDirty(),this.acroField.setFlagTo(zo.Multiline,!0)},t.prototype.disableMultiline=function(){this.markAsDirty(),this.acroField.setFlagTo(zo.Multiline,!1)},t.prototype.isPassword=function(){return this.acroField.hasFlag(zo.Password)},t.prototype.enablePassword=function(){this.acroField.setFlagTo(zo.Password,!0)},t.prototype.disablePassword=function(){this.acroField.setFlagTo(zo.Password,!1)},t.prototype.isFileSelector=function(){return this.acroField.hasFlag(zo.FileSelect)},t.prototype.enableFileSelection=function(){this.acroField.setFlagTo(zo.FileSelect,!0)},t.prototype.disableFileSelection=function(){this.acroField.setFlagTo(zo.FileSelect,!1)},t.prototype.isSpellChecked=function(){return!this.acroField.hasFlag(zo.DoNotSpellCheck)},t.prototype.enableSpellChecking=function(){this.acroField.setFlagTo(zo.DoNotSpellCheck,!1)},t.prototype.disableSpellChecking=function(){this.acroField.setFlagTo(zo.DoNotSpellCheck,!0)},t.prototype.isScrollable=function(){return!this.acroField.hasFlag(zo.DoNotScroll)},t.prototype.enableScrolling=function(){this.acroField.setFlagTo(zo.DoNotScroll,!1)},t.prototype.disableScrolling=function(){this.acroField.setFlagTo(zo.DoNotScroll,!0)},t.prototype.isCombed=function(){return this.acroField.hasFlag(zo.Comb)&&!this.isMultiline()&&!this.isPassword()&&!this.isFileSelector()&&this.getMaxLength()!==void 0},t.prototype.enableCombing=function(){if(this.getMaxLength()===void 0){var r="PDFTextFields must have a max length in order to be combed";console.warn(r)}this.markAsDirty(),this.disableMultiline(),this.disablePassword(),this.disableFileSelection(),this.acroField.setFlagTo(zo.Comb,!0)},t.prototype.disableCombing=function(){this.markAsDirty(),this.acroField.setFlagTo(zo.Comb,!1)},t.prototype.isRichFormatted=function(){return this.acroField.hasFlag(zo.RichText)},t.prototype.enableRichFormatting=function(){this.acroField.setFlagTo(zo.RichText,!0)},t.prototype.disableRichFormatting=function(){this.acroField.setFlagTo(zo.RichText,!1)},t.prototype.addToPage=function(r,n){var i,l,h,p,o,_,C;Ct(r,"page",[[ru,"PDFPage"]]),hv(n),n||(n={}),"textColor"in n||(n.textColor=Ri(0,0,0)),"backgroundColor"in n||(n.backgroundColor=Ri(1,1,1)),"borderColor"in n||(n.borderColor=Ri(0,0,0)),"borderWidth"in n||(n.borderWidth=1);var M=this.createWidget({x:(i=n.x)!==null&&i!==void 0?i:0,y:(l=n.y)!==null&&l!==void 0?l:0,width:(h=n.width)!==null&&h!==void 0?h:200,height:(p=n.height)!==null&&p!==void 0?p:50,textColor:n.textColor,backgroundColor:n.backgroundColor,borderColor:n.borderColor,borderWidth:(o=n.borderWidth)!==null&&o!==void 0?o:0,rotate:(_=n.rotate)!==null&&_!==void 0?_:hn(0),hidden:n.hidden,page:r.ref}),L=this.doc.context.register(M.dict);this.acroField.addWidget(L);var z=(C=n.font)!==null&&C!==void 0?C:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(M,z),r.node.addAnnot(L)},t.prototype.needsAppearancesUpdate=function(){var r;if(this.isDirty())return!0;for(var n=this.acroField.getWidgets(),i=0,l=n.length;i<l;i++){var h=n[i],p=((r=h.getAppearances())===null||r===void 0?void 0:r.normal)instanceof fc;if(!p)return!0}return!1},t.prototype.defaultUpdateAppearances=function(r){Ct(r,"font",[[yc,"PDFFont"]]),this.updateAppearances(r)},t.prototype.updateAppearances=function(r,n){Ct(r,"font",[[yc,"PDFFont"]]),ur(n,"provider",[Function]);for(var i=this.acroField.getWidgets(),l=0,h=i.length;l<h;l++){var p=i[l];this.updateWidgetAppearance(p,r,n)}this.markAsClean()},t.prototype.updateWidgetAppearance=function(r,n,i){var l=i??BDe,h=uv(l(this,r,n));this.updateWidgetAppearanceWithFont(r,n,h)},t.of=function(r,n,i){return new t(r,n,i)},t}(ig),jT;(function(e){e.Courier="Courier",e.CourierBold="Courier-Bold",e.CourierOblique="Courier-Oblique",e.CourierBoldOblique="Courier-BoldOblique",e.Helvetica="Helvetica",e.HelveticaBold="Helvetica-Bold",e.HelveticaOblique="Helvetica-Oblique",e.HelveticaBoldOblique="Helvetica-BoldOblique",e.TimesRoman="Times-Roman",e.TimesRomanBold="Times-Bold",e.TimesRomanItalic="Times-Italic",e.TimesRomanBoldItalic="Times-BoldItalic",e.Symbol="Symbol",e.ZapfDingbats="ZapfDingbats"})(jT||(jT={}));var EDe=function(){function e(t,r){var n=this;this.embedDefaultFont=function(){return n.doc.embedStandardFont(jT.Helvetica)},Ct(t,"acroForm",[[UT,"PDFAcroForm"]]),Ct(r,"doc",[[tp,"PDFDocument"]]),this.acroForm=t,this.doc=r,this.dirtyFields=new Set,this.defaultFontCache=ed.populatedBy(this.embedDefaultFont)}return e.prototype.hasXFA=function(){return this.acroForm.dict.has(Ge.of("XFA"))},e.prototype.deleteXFA=function(){this.acroForm.dict.delete(Ge.of("XFA"))},e.prototype.getFields=function(){for(var t=this.acroForm.getAllFields(),r=[],n=0,i=t.length;n<i;n++){var l=t[n],h=l[0],p=l[1],o=TDe(h,p,this.doc);o&&r.push(o)}return r},e.prototype.getFieldMaybe=function(t){Ct(t,"name",["string"]);for(var r=this.getFields(),n=0,i=r.length;n<i;n++){var l=r[n];if(l.getName()===t)return l}},e.prototype.getField=function(t){Ct(t,"name",["string"]);var r=this.getFieldMaybe(t);if(r)return r;throw new cDe(t)},e.prototype.getButton=function(t){Ct(t,"name",["string"]);var r=this.getField(t);if(r instanceof _E)return r;throw new tm(t,_E,r)},e.prototype.getCheckBox=function(t){Ct(t,"name",["string"]);var r=this.getField(t);if(r instanceof K1)return r;throw new tm(t,K1,r)},e.prototype.getDropdown=function(t){Ct(t,"name",["string"]);var r=this.getField(t);if(r instanceof gE)return r;throw new tm(t,gE,r)},e.prototype.getOptionList=function(t){Ct(t,"name",["string"]);var r=this.getField(t);if(r instanceof yE)return r;throw new tm(t,yE,r)},e.prototype.getRadioGroup=function(t){Ct(t,"name",["string"]);var r=this.getField(t);if(r instanceof W1)return r;throw new tm(t,W1,r)},e.prototype.getSignature=function(t){Ct(t,"name",["string"]);var r=this.getField(t);if(r instanceof A2)return r;throw new tm(t,A2,r)},e.prototype.getTextField=function(t){Ct(t,"name",["string"]);var r=this.getField(t);if(r instanceof vE)return r;throw new tm(t,vE,r)},e.prototype.createButton=function(t){Ct(t,"name",["string"]);var r=E0(t),n=this.findOrCreateNonTerminals(r.nonTerminal),i=TF.create(this.doc.context);return i.setPartialName(r.terminal),T0(n,[i,i.ref],r.terminal),_E.of(i,i.ref,this.doc)},e.prototype.createCheckBox=function(t){Ct(t,"name",["string"]);var r=E0(t),n=this.findOrCreateNonTerminals(r.nonTerminal),i=CF.create(this.doc.context);return i.setPartialName(r.terminal),T0(n,[i,i.ref],r.terminal),K1.of(i,i.ref,this.doc)},e.prototype.createDropdown=function(t){Ct(t,"name",["string"]);var r=E0(t),n=this.findOrCreateNonTerminals(r.nonTerminal),i=SF.create(this.doc.context);return i.setPartialName(r.terminal),T0(n,[i,i.ref],r.terminal),gE.of(i,i.ref,this.doc)},e.prototype.createOptionList=function(t){Ct(t,"name",["string"]);var r=E0(t),n=this.findOrCreateNonTerminals(r.nonTerminal),i=FF.create(this.doc.context);return i.setPartialName(r.terminal),T0(n,[i,i.ref],r.terminal),yE.of(i,i.ref,this.doc)},e.prototype.createRadioGroup=function(t){Ct(t,"name",["string"]);var r=E0(t),n=this.findOrCreateNonTerminals(r.nonTerminal),i=IF.create(this.doc.context);return i.setPartialName(r.terminal),T0(n,[i,i.ref],r.terminal),W1.of(i,i.ref,this.doc)},e.prototype.createTextField=function(t){Ct(t,"name",["string"]);var r=E0(t),n=this.findOrCreateNonTerminals(r.nonTerminal),i=EF.create(this.doc.context);return i.setPartialName(r.terminal),T0(n,[i,i.ref],r.terminal),vE.of(i,i.ref,this.doc)},e.prototype.flatten=function(t){t===void 0&&(t={updateFieldAppearances:!0}),t.updateFieldAppearances&&this.updateFieldAppearances();for(var r=this.getFields(),n=0,i=r.length;n<i;n++){for(var l=r[n],h=l.acroField.getWidgets(),p=0,o=h.length;p<o;p++){var _=h[p],C=this.findWidgetPage(_),M=this.findWidgetAppearanceRef(l,_),L=C.node.newXObject("FlatWidget",M),z=_.getRectangle(),j=si([Us(),lu(z.x,z.y)],dp(bn(bn({},z),{rotation:0})),[EU(L),zs()]).filter(Boolean);C.pushOperators.apply(C,j)}this.removeField(l)}},e.prototype.removeField=function(t){for(var r=t.acroField.getWidgets(),n=new Set,i=0,l=r.length;i<l;i++){var h=r[i],p=this.findWidgetAppearanceRef(t,h),o=this.findWidgetPage(h);n.add(o),o.node.removeAnnot(p)}n.forEach(function(z){return z.node.removeAnnot(t.ref)}),this.acroForm.removeField(t.acroField);for(var _=t.acroField.normalizedEntries().Kids,C=_.size(),M=0;M<C;M++){var L=_.get(M);L instanceof Mi&&this.doc.context.delete(L)}this.doc.context.delete(t.ref)},e.prototype.updateFieldAppearances=function(t){ur(t,"font",[[yc,"PDFFont"]]),t=t??this.getDefaultFont();for(var r=this.getFields(),n=0,i=r.length;n<i;n++){var l=r[n];l.needsAppearancesUpdate()&&l.defaultUpdateAppearances(t)}},e.prototype.markFieldAsDirty=function(t){ur(t,"fieldRef",[[Mi,"PDFRef"]]),this.dirtyFields.add(t)},e.prototype.markFieldAsClean=function(t){ur(t,"fieldRef",[[Mi,"PDFRef"]]),this.dirtyFields.delete(t)},e.prototype.fieldIsDirty=function(t){return ur(t,"fieldRef",[[Mi,"PDFRef"]]),this.dirtyFields.has(t)},e.prototype.getDefaultFont=function(){return this.defaultFontCache.access()},e.prototype.findWidgetPage=function(t){var r=t.P(),n=this.doc.getPages().find(function(l){return l.ref===r});if(n===void 0){var i=this.doc.context.getObjectRef(t.dict);if(i===void 0)throw new Error("Could not find PDFRef for PDFObject");if(n=this.doc.findPageForAnnotationRef(i),n===void 0)throw new Error("Could not find page for PDFRef "+i)}return n},e.prototype.findWidgetAppearanceRef=function(t,r){var n,i=r.getNormalAppearance();if(i instanceof Sn&&(t instanceof K1||t instanceof W1)){var l=t.acroField.getValue(),h=(n=i.get(l))!==null&&n!==void 0?n:i.get(Ge.of("Off"));h instanceof Mi&&(i=h)}if(!(i instanceof Mi)){var p=t.getName();throw new Error("Failed to extract appearance ref for: "+p)}return i},e.prototype.findOrCreateNonTerminals=function(t){for(var r=[this.acroForm],n=0,i=t.length;n<i;n++){var l=t[n];if(!l)throw new uDe(l);var h=r[0],p=r[1],o=this.findNonTerminal(l,h);if(o)r=o;else{var _=OT.create(this.doc.context);_.setPartialName(l),_.setParent(p);var C=this.doc.context.register(_.dict);h.addField(C),r=[_,C]}}return r},e.prototype.findNonTerminal=function(t,r){for(var n=r instanceof UT?this.acroForm.getFields():_U(r.Kids()),i=0,l=n.length;i<l;i++){var h=n[i],p=h[0],o=h[1];if(p.getPartialName()===t){if(p instanceof OT)return[p,o];throw new t$(t)}}},e.of=function(t,r){return new e(t,r)},e}(),TDe=function(e,t,r){if(e instanceof TF)return _E.of(e,t,r);if(e instanceof CF)return K1.of(e,t,r);if(e instanceof SF)return gE.of(e,t,r);if(e instanceof FF)return yE.of(e,t,r);if(e instanceof EF)return vE.of(e,t,r);if(e instanceof IF)return W1.of(e,t,r);if(e instanceof vU)return A2.of(e,t,r)},E0=function(e){if(e.length===0)throw new Error("PDF field names must not be empty strings");for(var t=e.split("."),r=0,n=t.length;r<n;r++)if(t[r]==="")throw new Error('Periods in PDF field names must be separated by at least one character: "'+e+'"');return t.length===1?{nonTerminal:[],terminal:t[0]}:{nonTerminal:t.slice(0,t.length-1),terminal:t[t.length-1]}},T0=function(e,t,r){for(var n=e[0],i=e[1],l=t[0],h=t[1],p=n.normalizedEntries(),o=_U("Kids"in p?p.Kids:p.Fields),_=0,C=o.length;_<C;_++)if(o[_][0].getPartialName()===r)throw new t$(r);n.addField(h),l.setParent(i)},IDe={"4A0":[4767.87,6740.79],"2A0":[3370.39,4767.87],A0:[2383.94,3370.39],A1:[1683.78,2383.94],A2:[1190.55,1683.78],A3:[841.89,1190.55],A4:[595.28,841.89],A5:[419.53,595.28],A6:[297.64,419.53],A7:[209.76,297.64],A8:[147.4,209.76],A9:[104.88,147.4],A10:[73.7,104.88],B0:[2834.65,4008.19],B1:[2004.09,2834.65],B2:[1417.32,2004.09],B3:[1000.63,1417.32],B4:[708.66,1000.63],B5:[498.9,708.66],B6:[354.33,498.9],B7:[249.45,354.33],B8:[175.75,249.45],B9:[124.72,175.75],B10:[87.87,124.72],C0:[2599.37,3676.54],C1:[1836.85,2599.37],C2:[1298.27,1836.85],C3:[918.43,1298.27],C4:[649.13,918.43],C5:[459.21,649.13],C6:[323.15,459.21],C7:[229.61,323.15],C8:[161.57,229.61],C9:[113.39,161.57],C10:[79.37,113.39],RA0:[2437.8,3458.27],RA1:[1729.13,2437.8],RA2:[1218.9,1729.13],RA3:[864.57,1218.9],RA4:[609.45,864.57],SRA0:[2551.18,3628.35],SRA1:[1814.17,2551.18],SRA2:[1275.59,1814.17],SRA3:[907.09,1275.59],SRA4:[637.8,907.09],Executive:[521.86,756],Folio:[612,936],Legal:[612,1008],Letter:[612,792],Tabloid:[792,1224]},d2;(function(e){e[e.Fastest=1/0]="Fastest",e[e.Fast=1500]="Fast",e[e.Medium=500]="Medium",e[e.Slow=100]="Slow"})(d2||(d2={}));var FDe=function(){function e(t,r,n){this.alreadyEmbedded=!1,this.ref=t,this.doc=r,this.embedder=n}return e.prototype.embed=function(){return Tn(this,void 0,void 0,function(){var t,r,n,i,l;return In(this,function(h){switch(h.label){case 0:return this.alreadyEmbedded?[3,2]:[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:t=h.sent(),this.doc.catalog.has(Ge.of("Names"))||this.doc.catalog.set(Ge.of("Names"),this.doc.context.obj({})),r=this.doc.catalog.lookup(Ge.of("Names"),Sn),r.has(Ge.of("EmbeddedFiles"))||r.set(Ge.of("EmbeddedFiles"),this.doc.context.obj({})),n=r.lookup(Ge.of("EmbeddedFiles"),Sn),n.has(Ge.of("Names"))||n.set(Ge.of("Names"),this.doc.context.obj([])),i=n.lookup(Ge.of("Names"),mi),i.push(cn.fromText(this.embedder.fileName)),i.push(t),this.doc.catalog.has(Ge.of("AF"))||this.doc.catalog.set(Ge.of("AF"),this.doc.context.obj([])),l=this.doc.catalog.lookup(Ge.of("AF"),mi),l.push(t),this.alreadyEmbedded=!0,h.label=2;case 2:return[2]}})})},e.of=function(t,r,n){return new e(t,r,n)},e}(),PDe=function(){function e(t,r,n){this.alreadyEmbedded=!1,this.ref=t,this.doc=r,this.embedder=n}return e.prototype.embed=function(){return Tn(this,void 0,void 0,function(){var t,r,n,i,l,h,p;return In(this,function(o){switch(o.label){case 0:return this.alreadyEmbedded?[3,2]:(t=this.doc,r=t.catalog,n=t.context,[4,this.embedder.embedIntoContext(this.doc.context,this.ref)]);case 1:i=o.sent(),r.has(Ge.of("Names"))||r.set(Ge.of("Names"),n.obj({})),l=r.lookup(Ge.of("Names"),Sn),l.has(Ge.of("JavaScript"))||l.set(Ge.of("JavaScript"),n.obj({})),h=l.lookup(Ge.of("JavaScript"),Sn),h.has(Ge.of("Names"))||h.set(Ge.of("Names"),n.obj([])),p=h.lookup(Ge.of("Names"),mi),p.push(cn.fromText(this.embedder.scriptName)),p.push(i),this.alreadyEmbedded=!0,o.label=2;case 2:return[2]}})})},e.of=function(t,r,n){return new e(t,r,n)},e}(),MDe=function(){function e(t,r){this.script=t,this.scriptName=r}return e.for=function(t,r){return new e(t,r)},e.prototype.embedIntoContext=function(t,r){return Tn(this,void 0,void 0,function(){var n;return In(this,function(i){return n=t.obj({Type:"Action",S:"JavaScript",JS:cn.fromText(this.script)}),r?(t.assign(r,n),[2,r]):[2,t.register(n)]})})},e}(),tp=function(){function e(t,r,n){var i=this;if(this.defaultWordBreaks=[" "],this.computePages=function(){var l=[];return i.catalog.Pages().traverse(function(h,p){if(h instanceof td){var o=i.pageMap.get(h);o||(o=ru.of(h,p,i),i.pageMap.set(h,o)),l.push(o)}}),l},this.getOrCreateForm=function(){var l=i.catalog.getOrCreateAcroForm();return EDe.of(l,i)},Ct(t,"context",[[s2,"PDFContext"]]),Ct(r,"ignoreEncryption",["boolean"]),this.context=t,this.catalog=t.lookup(t.trailerInfo.Root),this.isEncrypted=!!t.lookup(t.trailerInfo.Encrypt),this.pageCache=ed.populatedBy(this.computePages),this.pageMap=new Map,this.formCache=ed.populatedBy(this.getOrCreateForm),this.fonts=[],this.images=[],this.embeddedPages=[],this.embeddedFiles=[],this.javaScripts=[],!r&&this.isEncrypted)throw new oDe;n&&this.updateInfoDict()}return e.load=function(t,r){return r===void 0&&(r={}),Tn(this,void 0,void 0,function(){var n,i,l,h,p,o,_,C,M,L,z,j;return In(this,function(K){switch(K.label){case 0:return n=r.ignoreEncryption,i=n===void 0?!1:n,l=r.parseSpeed,h=l===void 0?d2.Slow:l,p=r.throwOnInvalidObject,o=p===void 0?!1:p,_=r.updateMetadata,C=_===void 0?!0:_,M=r.capNumbers,L=M===void 0?!1:M,Ct(t,"pdf",["string",Uint8Array,ArrayBuffer]),Ct(i,"ignoreEncryption",["boolean"]),Ct(h,"parseSpeed",["number"]),Ct(o,"throwOnInvalidObject",["boolean"]),z=u1(t),[4,k4e.forBytesWithOptions(z,h,o,L).parseDocument()];case 1:return j=K.sent(),[2,new e(j,i,C)]}})})},e.create=function(t){return t===void 0&&(t={}),Tn(this,void 0,void 0,function(){var r,n,i,l,h,p;return In(this,function(o){return r=t.updateMetadata,n=r===void 0?!0:r,i=s2.create(),l=OJ.withContext(i),h=i.register(l),p=LJ.withContextAndPages(i,h),i.trailerInfo.Root=i.register(p),[2,new e(i,!1,n)]})})},e.prototype.registerFontkit=function(t){this.fontkit=t},e.prototype.getForm=function(){var t=this.formCache.access();return t.hasXFA()&&(console.warn("Removing XFA form data as pdf-lib does not support reading or writing XFA"),t.deleteXFA()),t},e.prototype.getTitle=function(){var t=this.getInfoDict().lookup(Ge.Title);if(t)return of(t),t.decodeText()},e.prototype.getAuthor=function(){var t=this.getInfoDict().lookup(Ge.Author);if(t)return of(t),t.decodeText()},e.prototype.getSubject=function(){var t=this.getInfoDict().lookup(Ge.Subject);if(t)return of(t),t.decodeText()},e.prototype.getKeywords=function(){var t=this.getInfoDict().lookup(Ge.Keywords);if(t)return of(t),t.decodeText()},e.prototype.getCreator=function(){var t=this.getInfoDict().lookup(Ge.Creator);if(t)return of(t),t.decodeText()},e.prototype.getProducer=function(){var t=this.getInfoDict().lookup(Ge.Producer);if(t)return of(t),t.decodeText()},e.prototype.getCreationDate=function(){var t=this.getInfoDict().lookup(Ge.CreationDate);if(t)return of(t),t.decodeDate()},e.prototype.getModificationDate=function(){var t=this.getInfoDict().lookup(Ge.ModDate);if(t)return of(t),t.decodeDate()},e.prototype.setTitle=function(t,r){Ct(t,"title",["string"]);var n=Ge.of("Title");if(this.getInfoDict().set(n,cn.fromText(t)),r!=null&&r.showInWindowTitleBar){var i=this.catalog.getOrCreateViewerPreferences();i.setDisplayDocTitle(!0)}},e.prototype.setAuthor=function(t){Ct(t,"author",["string"]);var r=Ge.of("Author");this.getInfoDict().set(r,cn.fromText(t))},e.prototype.setSubject=function(t){Ct(t,"author",["string"]);var r=Ge.of("Subject");this.getInfoDict().set(r,cn.fromText(t))},e.prototype.setKeywords=function(t){Ct(t,"keywords",[Array]);var r=Ge.of("Keywords");this.getInfoDict().set(r,cn.fromText(t.join(" ")))},e.prototype.setCreator=function(t){Ct(t,"creator",["string"]);var r=Ge.of("Creator");this.getInfoDict().set(r,cn.fromText(t))},e.prototype.setProducer=function(t){Ct(t,"creator",["string"]);var r=Ge.of("Producer");this.getInfoDict().set(r,cn.fromText(t))},e.prototype.setLanguage=function(t){Ct(t,"language",["string"]);var r=Ge.of("Lang");this.catalog.set(r,Pi.of(t))},e.prototype.setCreationDate=function(t){Ct(t,"creationDate",[[Date,"Date"]]);var r=Ge.of("CreationDate");this.getInfoDict().set(r,Pi.fromDate(t))},e.prototype.setModificationDate=function(t){Ct(t,"modificationDate",[[Date,"Date"]]);var r=Ge.of("ModDate");this.getInfoDict().set(r,Pi.fromDate(t))},e.prototype.getPageCount=function(){return this.pageCount===void 0&&(this.pageCount=this.getPages().length),this.pageCount},e.prototype.getPages=function(){return this.pageCache.access()},e.prototype.getPage=function(t){var r=this.getPages();return cc(t,"index",0,r.length-1),r[t]},e.prototype.getPageIndices=function(){return $Pe(0,this.getPageCount())},e.prototype.removePage=function(t){var r=this.getPageCount();if(this.pageCount===0)throw new lDe;cc(t,"index",0,r-1),this.catalog.removeLeafNode(t),this.pageCount=r-1},e.prototype.addPage=function(t){return Ct(t,"page",["undefined",[ru,"PDFPage"],Array]),this.insertPage(this.getPageCount(),t)},e.prototype.insertPage=function(t,r){var n=this.getPageCount();if(cc(t,"index",0,n),Ct(r,"page",["undefined",[ru,"PDFPage"],Array]),!r||Array.isArray(r)){var i=Array.isArray(r)?r:IDe.A4;r=ru.create(this),r.setSize.apply(r,i)}else if(r.doc!==this)throw new aDe;var l=this.catalog.insertLeafNode(r.ref,t);return r.node.setParent(l),this.pageMap.set(r.node,r),this.pageCache.invalidate(),this.pageCount=n+1,r},e.prototype.copyPages=function(t,r){return Tn(this,void 0,void 0,function(){var n,i,l,h,p,o,_,C;return In(this,function(M){switch(M.label){case 0:return Ct(t,"srcDoc",[[e,"PDFDocument"]]),Ct(r,"indices",[Array]),[4,t.flush()];case 1:for(M.sent(),n=wj.for(t.context,this.context),i=t.getPages(),l=new Array(r.length),h=0,p=r.length;h<p;h++)o=i[r[h]],_=n.copy(o.node),C=this.context.register(_),l[h]=ru.of(_,C,this);return[2,l]}})})},e.prototype.copy=function(){return Tn(this,void 0,void 0,function(){var t,r,n,i;return In(this,function(l){switch(l.label){case 0:return[4,e.create()];case 1:return t=l.sent(),[4,t.copyPages(this,this.getPageIndices())];case 2:for(r=l.sent(),n=0,i=r.length;n<i;n++)t.addPage(r[n]);return this.getAuthor()!==void 0&&t.setAuthor(this.getAuthor()),this.getCreationDate()!==void 0&&t.setCreationDate(this.getCreationDate()),this.getCreator()!==void 0&&t.setCreator(this.getCreator()),this.getModificationDate()!==void 0&&t.setModificationDate(this.getModificationDate()),this.getProducer()!==void 0&&t.setProducer(this.getProducer()),this.getSubject()!==void 0&&t.setSubject(this.getSubject()),this.getTitle()!==void 0&&t.setTitle(this.getTitle()),t.defaultWordBreaks=this.defaultWordBreaks,[2,t]}})})},e.prototype.addJavaScript=function(t,r){Ct(t,"name",["string"]),Ct(r,"script",["string"]);var n=MDe.for(r,t),i=this.context.nextRef(),l=PDe.of(i,this,n);this.javaScripts.push(l)},e.prototype.attach=function(t,r,n){return n===void 0&&(n={}),Tn(this,void 0,void 0,function(){var i,l,h,p;return In(this,function(o){return Ct(t,"attachment",["string",Uint8Array,ArrayBuffer]),Ct(r,"name",["string"]),ur(n.mimeType,"mimeType",["string"]),ur(n.description,"description",["string"]),ur(n.creationDate,"options.creationDate",[Date]),ur(n.modificationDate,"options.modificationDate",[Date]),Wc(n.afRelationship,"options.afRelationship",a2),i=u1(t),l=s4e.for(i,r,n),h=this.context.nextRef(),p=FDe.of(h,this,l),this.embeddedFiles.push(p),[2]})})},e.prototype.embedFont=function(t,r){return r===void 0&&(r={}),Tn(this,void 0,void 0,function(){var n,i,l,h,p,o,_,C,M,L;return In(this,function(z){switch(z.label){case 0:return n=r.subset,i=n===void 0?!1:n,l=r.customName,h=r.features,Ct(t,"font",["string",Uint8Array,ArrayBuffer]),Ct(i,"subset",["boolean"]),fj(t)?(p=DT.for(t,l),[3,7]):[3,1];case 1:return tMe(t)?(o=u1(t),_=this.assertFontkit(),i?[4,o4e.for(_,o,l,h)]:[3,3]):[3,6];case 2:return C=z.sent(),[3,5];case 3:return[4,gU.for(_,o,l,h)];case 4:C=z.sent(),z.label=5;case 5:return p=C,[3,7];case 6:throw new TypeError("`font` must be one of `StandardFonts | string | Uint8Array | ArrayBuffer`");case 7:return M=this.context.nextRef(),L=yc.of(M,this,p),this.fonts.push(L),[2,L]}})})},e.prototype.embedStandardFont=function(t,r){if(Ct(t,"font",["string"]),!fj(t))throw new TypeError("`font` must be one of type `StandardFonts`");var n=DT.for(t,r),i=this.context.nextRef(),l=yc.of(i,this,n);return this.fonts.push(l),l},e.prototype.embedJpg=function(t){return Tn(this,void 0,void 0,function(){var r,n,i,l;return In(this,function(h){switch(h.label){case 0:return Ct(t,"jpg",["string",Uint8Array,ArrayBuffer]),r=u1(t),[4,EJ.for(r)];case 1:return n=h.sent(),i=this.context.nextRef(),l=h2.of(i,this,n),this.images.push(l),[2,l]}})})},e.prototype.embedPng=function(t){return Tn(this,void 0,void 0,function(){var r,n,i,l;return In(this,function(h){switch(h.label){case 0:return Ct(t,"png",["string",Uint8Array,ArrayBuffer]),r=u1(t),[4,TJ.for(r)];case 1:return n=h.sent(),i=this.context.nextRef(),l=h2.of(i,this,n),this.images.push(l),[2,l]}})})},e.prototype.embedPdf=function(t,r){return r===void 0&&(r=[0]),Tn(this,void 0,void 0,function(){var n,i,l;return In(this,function(h){switch(h.label){case 0:return Ct(t,"pdf",["string",Uint8Array,ArrayBuffer,[e,"PDFDocument"]]),Ct(r,"indices",[Array]),t instanceof e?(i=t,[3,3]):[3,1];case 1:return[4,e.load(t)];case 2:i=h.sent(),h.label=3;case 3:return n=i,l=eMe(n.getPages(),r),[2,this.embedPages(l)]}})})},e.prototype.embedPage=function(t,r,n){return Tn(this,void 0,void 0,function(){var i;return In(this,function(l){switch(l.label){case 0:return Ct(t,"page",[[ru,"PDFPage"]]),[4,this.embedPages([t],[r],[n])];case 1:return i=l.sent()[0],[2,i]}})})},e.prototype.embedPages=function(t,r,n){return r===void 0&&(r=[]),n===void 0&&(n=[]),Tn(this,void 0,void 0,function(){var _,C,i,l,h,p,o,_,C,M,L,z,j,K,$;return In(this,function(q){switch(q.label){case 0:if(t.length===0)return[2,[]];for(_=0,C=t.length-1;_<C;_++)if(i=t[_],l=t[_+1],i.node.context!==l.node.context)throw new Mke;h=t[0].node.context,p=h===this.context?function(ee){return ee}:wj.for(h,this.context).copy,o=new Array(t.length),_=0,C=t.length,q.label=1;case 1:return _<C?(M=p(t[_].node),L=r[_],z=n[_],[4,PJ.for(M,L,z)]):[3,4];case 2:j=q.sent(),K=this.context.nextRef(),o[_]=s$.of(K,this,j),q.label=3;case 3:return _++,[3,1];case 4:return($=this.embeddedPages).push.apply($,o),[2,o]}})})},e.prototype.flush=function(){return Tn(this,void 0,void 0,function(){return In(this,function(t){switch(t.label){case 0:return[4,this.embedAll(this.fonts)];case 1:return t.sent(),[4,this.embedAll(this.images)];case 2:return t.sent(),[4,this.embedAll(this.embeddedPages)];case 3:return t.sent(),[4,this.embedAll(this.embeddedFiles)];case 4:return t.sent(),[4,this.embedAll(this.javaScripts)];case 5:return t.sent(),[2]}})})},e.prototype.save=function(t){return t===void 0&&(t={}),Tn(this,void 0,void 0,function(){var r,n,i,l,h,p,o,_,C,M;return In(this,function(L){switch(L.label){case 0:return r=t.useObjectStreams,n=r===void 0?!0:r,i=t.addDefaultPage,l=i===void 0?!0:i,h=t.objectsPerTick,p=h===void 0?50:h,o=t.updateFieldAppearances,_=o===void 0?!0:o,Ct(n,"useObjectStreams",["boolean"]),Ct(l,"addDefaultPage",["boolean"]),Ct(p,"objectsPerTick",["number"]),Ct(_,"updateFieldAppearances",["boolean"]),l&&this.getPageCount()===0&&this.addPage(),_&&(C=this.formCache.getValue(),C&&C.updateFieldAppearances()),[4,this.flush()];case 1:return L.sent(),M=n?$ke:CJ,[2,M.forContext(this.context,p).serializeToBuffer()]}})})},e.prototype.saveAsBase64=function(t){return t===void 0&&(t={}),Tn(this,void 0,void 0,function(){var r,n,i,l,h;return In(this,function(p){switch(p.label){case 0:return r=t.dataUri,n=r===void 0?!1:r,i=LPe(t,["dataUri"]),Ct(n,"dataUri",["boolean"]),[4,this.save(i)];case 1:return l=p.sent(),h=OPe(l),[2,n?"data:application/pdf;base64,"+h:h]}})})},e.prototype.findPageForAnnotationRef=function(t){for(var r=this.getPages(),n=0,i=r.length;n<i;n++){var l=r[n],h=l.node.Annots();if((h==null?void 0:h.indexOf(t))!==void 0)return l}},e.prototype.embedAll=function(t){return Tn(this,void 0,void 0,function(){var r,n;return In(this,function(i){switch(i.label){case 0:r=0,n=t.length,i.label=1;case 1:return r<n?[4,t[r].embed()]:[3,4];case 2:i.sent(),i.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},e.prototype.updateInfoDict=function(){var t="pdf-lib (https://github.com/Hopding/pdf-lib)",r=new Date,n=this.getInfoDict();this.setProducer(t),this.setModificationDate(r),n.get(Ge.of("Creator"))||this.setCreator(t),n.get(Ge.of("CreationDate"))||this.setCreationDate(r)},e.prototype.getInfoDict=function(){var t=this.context.lookup(this.context.trailerInfo.Info);if(t instanceof Sn)return t;var r=this.context.obj({});return this.context.trailerInfo.Info=this.context.register(r),r},e.prototype.assertFontkit=function(){if(!this.fontkit)throw new sDe;return this.fontkit},e}();function of(e){if(!(e instanceof cn)&&!(e instanceof Pi))throw new RT([cn,Pi],e)}var DA;(function(e){e.Normal="Normal",e.Multiply="Multiply",e.Screen="Screen",e.Overlay="Overlay",e.Darken="Darken",e.Lighten="Lighten",e.ColorDodge="ColorDodge",e.ColorBurn="ColorBurn",e.HardLight="HardLight",e.SoftLight="SoftLight",e.Difference="Difference",e.Exclusion="Exclusion"})(DA||(DA={}));var ru=function(){function e(t,r,n){this.fontSize=24,this.fontColor=Ri(0,0,0),this.lineHeight=24,this.x=0,this.y=0,Ct(t,"leafNode",[[td,"PDFPageLeaf"]]),Ct(r,"ref",[[Mi,"PDFRef"]]),Ct(n,"doc",[[tp,"PDFDocument"]]),this.node=t,this.ref=r,this.doc=n}return e.prototype.setRotation=function(t){var r=QJ(t);_J(r,"degreesAngle",90),this.node.set(Ge.of("Rotate"),this.doc.context.obj(r))},e.prototype.getRotation=function(){var t=this.node.Rotate();return hn(t?t.asNumber():0)},e.prototype.setSize=function(t,r){Ct(t,"width",["number"]),Ct(r,"height",["number"]);var n=this.getMediaBox();this.setMediaBox(n.x,n.y,t,r);var i=this.getCropBox(),l=this.getBleedBox(),h=this.getTrimBox(),p=this.getArtBox(),o=this.node.CropBox(),_=this.node.BleedBox(),C=this.node.TrimBox(),M=this.node.ArtBox();o&&pS(i,n)&&this.setCropBox(n.x,n.y,t,r),_&&pS(l,n)&&this.setBleedBox(n.x,n.y,t,r),C&&pS(h,n)&&this.setTrimBox(n.x,n.y,t,r),M&&pS(p,n)&&this.setArtBox(n.x,n.y,t,r)},e.prototype.setWidth=function(t){Ct(t,"width",["number"]),this.setSize(t,this.getSize().height)},e.prototype.setHeight=function(t){Ct(t,"height",["number"]),this.setSize(this.getSize().width,t)},e.prototype.setMediaBox=function(t,r,n,i){Ct(t,"x",["number"]),Ct(r,"y",["number"]),Ct(n,"width",["number"]),Ct(i,"height",["number"]);var l=this.doc.context.obj([t,r,t+n,r+i]);this.node.set(Ge.MediaBox,l)},e.prototype.setCropBox=function(t,r,n,i){Ct(t,"x",["number"]),Ct(r,"y",["number"]),Ct(n,"width",["number"]),Ct(i,"height",["number"]);var l=this.doc.context.obj([t,r,t+n,r+i]);this.node.set(Ge.CropBox,l)},e.prototype.setBleedBox=function(t,r,n,i){Ct(t,"x",["number"]),Ct(r,"y",["number"]),Ct(n,"width",["number"]),Ct(i,"height",["number"]);var l=this.doc.context.obj([t,r,t+n,r+i]);this.node.set(Ge.BleedBox,l)},e.prototype.setTrimBox=function(t,r,n,i){Ct(t,"x",["number"]),Ct(r,"y",["number"]),Ct(n,"width",["number"]),Ct(i,"height",["number"]);var l=this.doc.context.obj([t,r,t+n,r+i]);this.node.set(Ge.TrimBox,l)},e.prototype.setArtBox=function(t,r,n,i){Ct(t,"x",["number"]),Ct(r,"y",["number"]),Ct(n,"width",["number"]),Ct(i,"height",["number"]);var l=this.doc.context.obj([t,r,t+n,r+i]);this.node.set(Ge.ArtBox,l)},e.prototype.getSize=function(){var t=this.getMediaBox(),r=t.width,n=t.height;return{width:r,height:n}},e.prototype.getWidth=function(){return this.getSize().width},e.prototype.getHeight=function(){return this.getSize().height},e.prototype.getMediaBox=function(){var t=this.node.MediaBox();return t.asRectangle()},e.prototype.getCropBox=function(){var t,r=this.node.CropBox();return(t=r==null?void 0:r.asRectangle())!==null&&t!==void 0?t:this.getMediaBox()},e.prototype.getBleedBox=function(){var t,r=this.node.BleedBox();return(t=r==null?void 0:r.asRectangle())!==null&&t!==void 0?t:this.getCropBox()},e.prototype.getTrimBox=function(){var t,r=this.node.TrimBox();return(t=r==null?void 0:r.asRectangle())!==null&&t!==void 0?t:this.getCropBox()},e.prototype.getArtBox=function(){var t,r=this.node.ArtBox();return(t=r==null?void 0:r.asRectangle())!==null&&t!==void 0?t:this.getCropBox()},e.prototype.translateContent=function(t,r){Ct(t,"x",["number"]),Ct(r,"y",["number"]),this.node.normalize(),this.getContentStream();var n=this.createContentStream(Us(),lu(t,r)),i=this.doc.context.register(n),l=this.createContentStream(zs()),h=this.doc.context.register(l);this.node.wrapContentStreams(i,h)},e.prototype.scale=function(t,r){Ct(t,"x",["number"]),Ct(r,"y",["number"]),this.setSize(this.getWidth()*t,this.getHeight()*r),this.scaleContent(t,r),this.scaleAnnotations(t,r)},e.prototype.scaleContent=function(t,r){Ct(t,"x",["number"]),Ct(r,"y",["number"]),this.node.normalize(),this.getContentStream();var n=this.createContentStream(Us(),Sb(t,r)),i=this.doc.context.register(n),l=this.createContentStream(zs()),h=this.doc.context.register(l);this.node.wrapContentStreams(i,h)},e.prototype.scaleAnnotations=function(t,r){Ct(t,"x",["number"]),Ct(r,"y",["number"]);var n=this.node.Annots();if(n)for(var i=0;i<n.size();i++){var l=n.lookup(i);l instanceof Sn&&this.scaleAnnot(l,t,r)}},e.prototype.resetPosition=function(){this.getContentStream(!1),this.x=0,this.y=0},e.prototype.setFont=function(t){Ct(t,"font",[[yc,"PDFFont"]]),this.font=t,this.fontKey=this.node.newFontDictionary(this.font.name,this.font.ref)},e.prototype.setFontSize=function(t){Ct(t,"fontSize",["number"]),this.fontSize=t},e.prototype.setFontColor=function(t){Ct(t,"fontColor",[[Object,"Color"]]),this.fontColor=t},e.prototype.setLineHeight=function(t){Ct(t,"lineHeight",["number"]),this.lineHeight=t},e.prototype.getPosition=function(){return{x:this.x,y:this.y}},e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e.prototype.moveTo=function(t,r){Ct(t,"x",["number"]),Ct(r,"y",["number"]),this.x=t,this.y=r},e.prototype.moveDown=function(t){Ct(t,"yDecrease",["number"]),this.y-=t},e.prototype.moveUp=function(t){Ct(t,"yIncrease",["number"]),this.y+=t},e.prototype.moveLeft=function(t){Ct(t,"xDecrease",["number"]),this.x-=t},e.prototype.moveRight=function(t){Ct(t,"xIncrease",["number"]),this.x+=t},e.prototype.pushOperators=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];vJ(t,"operator",[[Yn,"PDFOperator"]]);var n=this.getContentStream();n.push.apply(n,t)},e.prototype.drawText=function(t,r){var n,i,l,h,p,o,_;r===void 0&&(r={}),Ct(t,"text",["string"]),ur(r.color,"options.color",[[Object,"Color"]]),Wu(r.opacity,"opacity.opacity",0,1),ur(r.font,"options.font",[[yc,"PDFFont"]]),ur(r.size,"options.size",["number"]),ur(r.rotate,"options.rotate",[[Object,"Rotation"]]),ur(r.xSkew,"options.xSkew",[[Object,"Rotation"]]),ur(r.ySkew,"options.ySkew",[[Object,"Rotation"]]),ur(r.x,"options.x",["number"]),ur(r.y,"options.y",["number"]),ur(r.lineHeight,"options.lineHeight",["number"]),ur(r.maxWidth,"options.maxWidth",["number"]),ur(r.wordBreaks,"options.wordBreaks",[Array]),Wc(r.blendMode,"options.blendMode",DA);for(var C=this.setOrEmbedFont(r.font),M=C.oldFont,L=C.newFont,z=C.newFontKey,j=r.size||this.fontSize,K=r.wordBreaks||this.doc.defaultWordBreaks,$=function(se){return L.widthOfTextAtSize(se,j)},q=r.maxWidth===void 0?_Y(iw(t)):KPe(t,K,r.maxWidth,$),ee=new Array(q.length),ie=0,fe=q.length;ie<fe;ie++)ee[ie]=L.encodeText(q[ie]);var me=this.maybeEmbedGraphicsState({opacity:r.opacity,blendMode:r.blendMode}),ye=this.getContentStream();ye.push.apply(ye,Y4e(ee,{color:(n=r.color)!==null&&n!==void 0?n:this.fontColor,font:z,size:j,rotate:(i=r.rotate)!==null&&i!==void 0?i:hn(0),xSkew:(l=r.xSkew)!==null&&l!==void 0?l:hn(0),ySkew:(h=r.ySkew)!==null&&h!==void 0?h:hn(0),x:(p=r.x)!==null&&p!==void 0?p:this.x,y:(o=r.y)!==null&&o!==void 0?o:this.y,lineHeight:(_=r.lineHeight)!==null&&_!==void 0?_:this.lineHeight,graphicsState:me})),r.font&&(M?this.setFont(M):this.resetFont())},e.prototype.drawImage=function(t,r){var n,i,l,h,p,o,_;r===void 0&&(r={}),Ct(t,"image",[[h2,"PDFImage"]]),ur(r.x,"options.x",["number"]),ur(r.y,"options.y",["number"]),ur(r.width,"options.width",["number"]),ur(r.height,"options.height",["number"]),ur(r.rotate,"options.rotate",[[Object,"Rotation"]]),ur(r.xSkew,"options.xSkew",[[Object,"Rotation"]]),ur(r.ySkew,"options.ySkew",[[Object,"Rotation"]]),Wu(r.opacity,"opacity.opacity",0,1),Wc(r.blendMode,"options.blendMode",DA);var C=this.node.newXObject("Image",t.ref),M=this.maybeEmbedGraphicsState({opacity:r.opacity,blendMode:r.blendMode}),L=this.getContentStream();L.push.apply(L,$J(C,{x:(n=r.x)!==null&&n!==void 0?n:this.x,y:(i=r.y)!==null&&i!==void 0?i:this.y,width:(l=r.width)!==null&&l!==void 0?l:t.size().width,height:(h=r.height)!==null&&h!==void 0?h:t.size().height,rotate:(p=r.rotate)!==null&&p!==void 0?p:hn(0),xSkew:(o=r.xSkew)!==null&&o!==void 0?o:hn(0),ySkew:(_=r.ySkew)!==null&&_!==void 0?_:hn(0),graphicsState:M}))},e.prototype.drawPage=function(t,r){var n,i,l,h,p;r===void 0&&(r={}),Ct(t,"embeddedPage",[[s$,"PDFEmbeddedPage"]]),ur(r.x,"options.x",["number"]),ur(r.y,"options.y",["number"]),ur(r.xScale,"options.xScale",["number"]),ur(r.yScale,"options.yScale",["number"]),ur(r.width,"options.width",["number"]),ur(r.height,"options.height",["number"]),ur(r.rotate,"options.rotate",[[Object,"Rotation"]]),ur(r.xSkew,"options.xSkew",[[Object,"Rotation"]]),ur(r.ySkew,"options.ySkew",[[Object,"Rotation"]]),Wu(r.opacity,"opacity.opacity",0,1),Wc(r.blendMode,"options.blendMode",DA);var o=this.node.newXObject("EmbeddedPdfPage",t.ref),_=this.maybeEmbedGraphicsState({opacity:r.opacity,blendMode:r.blendMode}),C=r.width!==void 0?r.width/t.width:r.xScale!==void 0?r.xScale:1,M=r.height!==void 0?r.height/t.height:r.yScale!==void 0?r.yScale:1,L=this.getContentStream();L.push.apply(L,J4e(o,{x:(n=r.x)!==null&&n!==void 0?n:this.x,y:(i=r.y)!==null&&i!==void 0?i:this.y,xScale:C,yScale:M,rotate:(l=r.rotate)!==null&&l!==void 0?l:hn(0),xSkew:(h=r.xSkew)!==null&&h!==void 0?h:hn(0),ySkew:(p=r.ySkew)!==null&&p!==void 0?p:hn(0),graphicsState:_}))},e.prototype.drawSvgPath=function(t,r){var n,i,l,h,p,o,_,C,M;r===void 0&&(r={}),Ct(t,"path",["string"]),ur(r.x,"options.x",["number"]),ur(r.y,"options.y",["number"]),ur(r.scale,"options.scale",["number"]),ur(r.rotate,"options.rotate",[[Object,"Rotation"]]),ur(r.borderWidth,"options.borderWidth",["number"]),ur(r.color,"options.color",[[Object,"Color"]]),Wu(r.opacity,"opacity.opacity",0,1),ur(r.borderColor,"options.borderColor",[[Object,"Color"]]),ur(r.borderDashArray,"options.borderDashArray",[Array]),ur(r.borderDashPhase,"options.borderDashPhase",["number"]),Wc(r.borderLineCap,"options.borderLineCap",oy),Wu(r.borderOpacity,"options.borderOpacity",0,1),Wc(r.blendMode,"options.blendMode",DA);var L=this.maybeEmbedGraphicsState({opacity:r.opacity,borderOpacity:r.borderOpacity,blendMode:r.blendMode});!("color"in r)&&!("borderColor"in r)&&(r.borderColor=Ri(0,0,0));var z=this.getContentStream();z.push.apply(z,rDe(t,{x:(n=r.x)!==null&&n!==void 0?n:this.x,y:(i=r.y)!==null&&i!==void 0?i:this.y,scale:r.scale,rotate:(l=r.rotate)!==null&&l!==void 0?l:hn(0),color:(h=r.color)!==null&&h!==void 0?h:void 0,borderColor:(p=r.borderColor)!==null&&p!==void 0?p:void 0,borderWidth:(o=r.borderWidth)!==null&&o!==void 0?o:0,borderDashArray:(_=r.borderDashArray)!==null&&_!==void 0?_:void 0,borderDashPhase:(C=r.borderDashPhase)!==null&&C!==void 0?C:void 0,borderLineCap:(M=r.borderLineCap)!==null&&M!==void 0?M:void 0,graphicsState:L}))},e.prototype.drawLine=function(t){var r,n,i,l,h;Ct(t.start,"options.start",[[Object,"{ x: number, y: number }"]]),Ct(t.end,"options.end",[[Object,"{ x: number, y: number }"]]),Ct(t.start.x,"options.start.x",["number"]),Ct(t.start.y,"options.start.y",["number"]),Ct(t.end.x,"options.end.x",["number"]),Ct(t.end.y,"options.end.y",["number"]),ur(t.thickness,"options.thickness",["number"]),ur(t.color,"options.color",[[Object,"Color"]]),ur(t.dashArray,"options.dashArray",[Array]),ur(t.dashPhase,"options.dashPhase",["number"]),Wc(t.lineCap,"options.lineCap",oy),Wu(t.opacity,"opacity.opacity",0,1),Wc(t.blendMode,"options.blendMode",DA);var p=this.maybeEmbedGraphicsState({borderOpacity:t.opacity,blendMode:t.blendMode});"color"in t||(t.color=Ri(0,0,0));var o=this.getContentStream();o.push.apply(o,$4e({start:t.start,end:t.end,thickness:(r=t.thickness)!==null&&r!==void 0?r:1,color:(n=t.color)!==null&&n!==void 0?n:void 0,dashArray:(i=t.dashArray)!==null&&i!==void 0?i:void 0,dashPhase:(l=t.dashPhase)!==null&&l!==void 0?l:void 0,lineCap:(h=t.lineCap)!==null&&h!==void 0?h:void 0,graphicsState:p}))},e.prototype.drawRectangle=function(t){var r,n,i,l,h,p,o,_,C,M,L,z,j;t===void 0&&(t={}),ur(t.x,"options.x",["number"]),ur(t.y,"options.y",["number"]),ur(t.width,"options.width",["number"]),ur(t.height,"options.height",["number"]),ur(t.rotate,"options.rotate",[[Object,"Rotation"]]),ur(t.xSkew,"options.xSkew",[[Object,"Rotation"]]),ur(t.ySkew,"options.ySkew",[[Object,"Rotation"]]),ur(t.borderWidth,"options.borderWidth",["number"]),ur(t.color,"options.color",[[Object,"Color"]]),Wu(t.opacity,"opacity.opacity",0,1),ur(t.borderColor,"options.borderColor",[[Object,"Color"]]),ur(t.borderDashArray,"options.borderDashArray",[Array]),ur(t.borderDashPhase,"options.borderDashPhase",["number"]),Wc(t.borderLineCap,"options.borderLineCap",oy),Wu(t.borderOpacity,"options.borderOpacity",0,1),Wc(t.blendMode,"options.blendMode",DA);var K=this.maybeEmbedGraphicsState({opacity:t.opacity,borderOpacity:t.borderOpacity,blendMode:t.blendMode});!("color"in t)&&!("borderColor"in t)&&(t.color=Ri(0,0,0));var $=this.getContentStream();$.push.apply($,jy({x:(r=t.x)!==null&&r!==void 0?r:this.x,y:(n=t.y)!==null&&n!==void 0?n:this.y,width:(i=t.width)!==null&&i!==void 0?i:150,height:(l=t.height)!==null&&l!==void 0?l:100,rotate:(h=t.rotate)!==null&&h!==void 0?h:hn(0),xSkew:(p=t.xSkew)!==null&&p!==void 0?p:hn(0),ySkew:(o=t.ySkew)!==null&&o!==void 0?o:hn(0),borderWidth:(_=t.borderWidth)!==null&&_!==void 0?_:0,color:(C=t.color)!==null&&C!==void 0?C:void 0,borderColor:(M=t.borderColor)!==null&&M!==void 0?M:void 0,borderDashArray:(L=t.borderDashArray)!==null&&L!==void 0?L:void 0,borderDashPhase:(z=t.borderDashPhase)!==null&&z!==void 0?z:void 0,graphicsState:K,borderLineCap:(j=t.borderLineCap)!==null&&j!==void 0?j:void 0}))},e.prototype.drawSquare=function(t){t===void 0&&(t={});var r=t.size;ur(r,"size",["number"]),this.drawRectangle(bn(bn({},t),{width:r,height:r}))},e.prototype.drawEllipse=function(t){var r,n,i,l,h,p,o,_,C,M,L;t===void 0&&(t={}),ur(t.x,"options.x",["number"]),ur(t.y,"options.y",["number"]),ur(t.xScale,"options.xScale",["number"]),ur(t.yScale,"options.yScale",["number"]),ur(t.rotate,"options.rotate",[[Object,"Rotation"]]),ur(t.color,"options.color",[[Object,"Color"]]),Wu(t.opacity,"opacity.opacity",0,1),ur(t.borderColor,"options.borderColor",[[Object,"Color"]]),Wu(t.borderOpacity,"options.borderOpacity",0,1),ur(t.borderWidth,"options.borderWidth",["number"]),ur(t.borderDashArray,"options.borderDashArray",[Array]),ur(t.borderDashPhase,"options.borderDashPhase",["number"]),Wc(t.borderLineCap,"options.borderLineCap",oy),Wc(t.blendMode,"options.blendMode",DA);var z=this.maybeEmbedGraphicsState({opacity:t.opacity,borderOpacity:t.borderOpacity,blendMode:t.blendMode});!("color"in t)&&!("borderColor"in t)&&(t.color=Ri(0,0,0));var j=this.getContentStream();j.push.apply(j,u2({x:(r=t.x)!==null&&r!==void 0?r:this.x,y:(n=t.y)!==null&&n!==void 0?n:this.y,xScale:(i=t.xScale)!==null&&i!==void 0?i:100,yScale:(l=t.yScale)!==null&&l!==void 0?l:100,rotate:(h=t.rotate)!==null&&h!==void 0?h:void 0,color:(p=t.color)!==null&&p!==void 0?p:void 0,borderColor:(o=t.borderColor)!==null&&o!==void 0?o:void 0,borderWidth:(_=t.borderWidth)!==null&&_!==void 0?_:0,borderDashArray:(C=t.borderDashArray)!==null&&C!==void 0?C:void 0,borderDashPhase:(M=t.borderDashPhase)!==null&&M!==void 0?M:void 0,borderLineCap:(L=t.borderLineCap)!==null&&L!==void 0?L:void 0,graphicsState:z}))},e.prototype.drawCircle=function(t){t===void 0&&(t={});var r=t.size,n=r===void 0?100:r;ur(n,"size",["number"]),this.drawEllipse(bn(bn({},t),{xScale:n,yScale:n}))},e.prototype.setOrEmbedFont=function(t){var r=this.font,n=this.fontKey;t?this.setFont(t):this.getFont();var i=this.font,l=this.fontKey;return{oldFont:r,oldFontKey:n,newFont:i,newFontKey:l}},e.prototype.getFont=function(){if(!this.font||!this.fontKey){var t=this.doc.embedStandardFont(jT.Helvetica);this.setFont(t)}return[this.font,this.fontKey]},e.prototype.resetFont=function(){this.font=void 0,this.fontKey=void 0},e.prototype.getContentStream=function(t){return t===void 0&&(t=!0),t&&this.contentStream?this.contentStream:(this.contentStream=this.createContentStream(),this.contentStreamRef=this.doc.context.register(this.contentStream),this.node.addContentStream(this.contentStreamRef),this.contentStream)},e.prototype.createContentStream=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=this.doc.context.obj({}),i=Sx.of(n,t);return i},e.prototype.maybeEmbedGraphicsState=function(t){var r=t.opacity,n=t.borderOpacity,i=t.blendMode;if(!(r===void 0&&n===void 0&&i===void 0)){var l=this.doc.context.obj({Type:"ExtGState",ca:r,CA:n,BM:i}),h=this.node.newExtGState("GS",l);return h}},e.prototype.scaleAnnot=function(t,r,n){for(var i=["RD","CL","Vertices","QuadPoints","L","Rect"],l=0,h=i.length;l<h;l++){var p=t.lookup(Ge.of(i[l]));p instanceof mi&&p.scalePDFNumbers(r,n)}var o=t.lookup(Ge.of("InkList"));if(o instanceof mi)for(var l=0,h=o.size();l<h;l++){var _=o.lookup(l);_ instanceof mi&&_.scalePDFNumbers(r,n)}},e.of=function(t,r,n){return new e(t,r,n)},e.create=function(t){Ct(t,"doc",[[tp,"PDFDocument"]]);var r=Mi.of(-1),n=td.withContextAndParent(t.context,r),i=t.context.register(n);return new e(n,i,t)},e}(),_E=function(e){Ar(t,e);function t(r,n,i){var l=e.call(this,r,n,i)||this;return Ct(r,"acroButton",[[TF,"PDFAcroPushButton"]]),l.acroField=r,l}return t.prototype.setImage=function(r,n){n===void 0&&(n=Qf.Center);for(var i=this.acroField.getWidgets(),l=0,h=i.length;l<h;l++){var p=i[l],o=this.createImageAppearanceStream(p,r,n);this.updateWidgetAppearances(p,{normal:o})}this.markAsClean()},t.prototype.setFontSize=function(r){wF(r,"fontSize"),this.acroField.setFontSize(r),this.markAsDirty()},t.prototype.addToPage=function(r,n,i){var l,h,p,o,_,C,M,L,z,j,K;ur(r,"text",["string"]),ur(n,"page",[[ru,"PDFPage"]]),hv(i);var $=this.createWidget({x:((l=i==null?void 0:i.x)!==null&&l!==void 0?l:0)-((h=i==null?void 0:i.borderWidth)!==null&&h!==void 0?h:0)/2,y:((p=i==null?void 0:i.y)!==null&&p!==void 0?p:0)-((o=i==null?void 0:i.borderWidth)!==null&&o!==void 0?o:0)/2,width:(_=i==null?void 0:i.width)!==null&&_!==void 0?_:100,height:(C=i==null?void 0:i.height)!==null&&C!==void 0?C:50,textColor:(M=i==null?void 0:i.textColor)!==null&&M!==void 0?M:Ri(0,0,0),backgroundColor:(L=i==null?void 0:i.backgroundColor)!==null&&L!==void 0?L:Ri(.75,.75,.75),borderColor:i==null?void 0:i.borderColor,borderWidth:(z=i==null?void 0:i.borderWidth)!==null&&z!==void 0?z:0,rotate:(j=i==null?void 0:i.rotate)!==null&&j!==void 0?j:hn(0),caption:r,hidden:i==null?void 0:i.hidden,page:n.ref}),q=this.doc.context.register($.dict);this.acroField.addWidget(q);var ee=(K=i==null?void 0:i.font)!==null&&K!==void 0?K:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance($,ee),n.node.addAnnot(q)},t.prototype.needsAppearancesUpdate=function(){var r;if(this.isDirty())return!0;for(var n=this.acroField.getWidgets(),i=0,l=n.length;i<l;i++){var h=n[i],p=((r=h.getAppearances())===null||r===void 0?void 0:r.normal)instanceof fc;if(!p)return!0}return!1},t.prototype.defaultUpdateAppearances=function(r){Ct(r,"font",[[yc,"PDFFont"]]),this.updateAppearances(r)},t.prototype.updateAppearances=function(r,n){Ct(r,"font",[[yc,"PDFFont"]]),ur(n,"provider",[Function]);for(var i=this.acroField.getWidgets(),l=0,h=i.length;l<h;l++){var p=i[l];this.updateWidgetAppearance(p,r,n)}},t.prototype.updateWidgetAppearance=function(r,n,i){var l=i??wDe,h=uv(l(this,r,n));this.updateWidgetAppearanceWithFont(r,n,h)},t.of=function(r,n,i){return new t(r,n,i)},t}(ig);const RDe=({value:e,summaryTableRef:t,createMarker:r})=>{const n=Re.useRef(null),[i,l]=Re.useState(window.innerWidth);Re.useEffect(()=>{const _=()=>{l(window.innerWidth)};return window.addEventListener("resize",_),()=>{window.removeEventListener("resize",_)}},[]);const h=async()=>{if(n.current&&t.current){const _=await _8(n.current),C=await _8(t.current),M=_.toDataURL("image/png"),L=C.toDataURL("image/png"),z=await fetch("qr_frame.pdf").then(Ee=>Ee.arrayBuffer()),j=await tp.load(z),K=j.getPages()[0],{width:$,height:q}=K.getSize(),ee=await j.embedPng(M),ie=275,fe=275,me=($-ie)/2,ye=(q-fe)/2;K.drawImage(ee,{x:me,y:ye,width:ie,height:fe});const se=await j.embedPng(L),re=se.size().width/4,de=se.size().height/4;K.drawImage(se,{x:20,y:20,width:re,height:de});const _e=await j.save(),ve=new Blob([_e],{type:"application/pdf"}),Pe=document.createElement("a");Pe.href=URL.createObjectURL(ve),Pe.download="ccc_qr.pdf",Pe.click()}},p=()=>{window.open(e,"_blank","noopener,noreferrer")},o=()=>{window.open("https://christian-burnsred.github.io/","_blank","noopener,noreferrer")};return $e.jsxs(EO,{bg:"gray.100",borderRadius:"md",padding:1,justifyContent:"center",alignItems:"center",direction:i>1060?"row":"column",children:[$e.jsx(Of,{ref:n,position:"relative",width:"auto",display:"flex",justifyContent:"center",mb:[4,4,0],children:$e.jsx(hSe,{style:{height:"auto",width:"auto"},value:e})}),$e.jsx(Of,{position:"relative",width:i>1060?"auto":"100%",display:"flex",justifyContent:"center",alignItems:"center",padding:4,children:i>1060?$e.jsxs(Yq,{spacing:4,width:"100%",children:[$e.jsx(Nh,{colorScheme:"purple",onClick:o,width:"100%",children:"Open AR App"}),$e.jsx(Nh,{colorScheme:"blue",onClick:p,width:"100%",children:"Open 'Flex' App"}),$e.jsx(Nh,{colorScheme:"orange",onClick:h,width:"100%",children:"Download as PDF"}),$e.jsx(Nh,{colorScheme:"green",width:"100%",onClick:r,children:"Create Marker"})]}):$e.jsxs(Of,{children:[$e.jsxs(Ab,{padding:1,width:"100%",children:[$e.jsx(Nh,{colorScheme:"purple",onClick:o,width:"100%",children:"Open AR App"}),$e.jsx(Nh,{colorScheme:"blue",onClick:p,width:"100%",children:"Open 'Flex' App"})]}),$e.jsxs(Ab,{padding:1,width:"100%",children:[$e.jsx(Nh,{colorScheme:"orange",onClick:h,width:"100%",children:"Download as PDF"}),$e.jsx(Nh,{colorScheme:"green",width:"100%",onClick:r,children:"Create Marker"})]})]})})]})},kDe=e=>{const t=JSON.stringify(e);return btoa(t)},DDe=async({params:e})=>{const t="http://bhp-qr-code-evolve-platform-prototype1.burnsred.com.au/",r=kDe(e),n=`${t}?params=${encodeURIComponent(r)}`;return console.log(n),n},LDe=Re.forwardRef(({selectedOperation:e,selectedControl:t,selectedControlFramework:r,selectedOperatingContext:n,selectedEquipment:i,locationCoords:l},h)=>(console.log(t),console.log(r),$e.jsxs(Jq,{ref:h,variant:"simple",size:"md",children:[$e.jsx(y_e,{children:$e.jsxs(Jp,{children:[$e.jsx(RQ,{children:"Parameter"}),$e.jsx(RQ,{children:"Value"})]})}),$e.jsxs(g_e,{children:[$e.jsxs(Jp,{children:[$e.jsx(Hc,{children:"Operation"}),$e.jsx(Hc,{children:e?_D[e].site:null})]}),$e.jsxs(Jp,{children:[$e.jsx(Hc,{children:"Control"}),$e.jsx(Hc,{children:t?xD[t].label:null})]}),$e.jsxs(Jp,{children:[$e.jsx(Hc,{children:"Control Framework"}),$e.jsx(Hc,{children:t&&r?bD[t][r].control:null})]}),$e.jsxs(Jp,{children:[$e.jsx(Hc,{children:"Operating Context"}),$e.jsx(Hc,{children:r&&n?wD[r][n].operating_context:null})]}),$e.jsxs(Jp,{children:[$e.jsx(Hc,{children:"Equipment"}),$e.jsx(Hc,{children:i&&n?BD[n][i].equipment:null})]}),$e.jsxs(Jp,{children:[$e.jsx(Hc,{children:"Location"}),$e.jsx(Hc,{children:l?`${l.lat}, ${l.lng}`:null})]})]})]})));var a$={exports:{}};(function(e,t){var r={};(function(n,i){e.exports=i()})(_1,function(){var n,i,l;function h(o,_){if(!n)n=_;else if(!i)i=_;else{var C="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+i+")(sharedChunk); self.onerror = null;",M={};n(M),l=_(M),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(l.workerUrl=window.URL.createObjectURL(new Blob([C],{type:"text/javascript"})))}}h(["exports"],function(o){function _(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}var C,M={},L={};function z(){if(C)return L;C=1,Object.defineProperty(L,"__esModule",{value:!0}),L.setMatrixArrayType=function(y){L.ARRAY_TYPE=s=y},L.toRadian=function(y){return y*d},L.equals=function(y,f){return Math.abs(y-f)<=A*Math.max(1,Math.abs(y),Math.abs(f))},L.RANDOM=L.ARRAY_TYPE=L.EPSILON=void 0;var A=1e-6;L.EPSILON=A;var s=typeof Float32Array<"u"?Float32Array:Array;L.ARRAY_TYPE=s;var c=Math.random;L.RANDOM=c;var d=Math.PI/180;return Math.hypot||(Math.hypot=function(){for(var y=0,f=arguments.length;f--;)y+=arguments[f]*arguments[f];return Math.sqrt(y)}),L}var j,K={};function $(){if(j)return K;function A(f){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},A(f)}j=1,Object.defineProperty(K,"__esModule",{value:!0}),K.create=function(){var f=new s.ARRAY_TYPE(4);return s.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f},K.clone=function(f){var v=new s.ARRAY_TYPE(4);return v[0]=f[0],v[1]=f[1],v[2]=f[2],v[3]=f[3],v},K.copy=function(f,v){return f[0]=v[0],f[1]=v[1],f[2]=v[2],f[3]=v[3],f},K.identity=function(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=1,f},K.fromValues=function(f,v,B,I){var R=new s.ARRAY_TYPE(4);return R[0]=f,R[1]=v,R[2]=B,R[3]=I,R},K.set=function(f,v,B,I,R){return f[0]=v,f[1]=B,f[2]=I,f[3]=R,f},K.transpose=function(f,v){if(f===v){var B=v[1];f[1]=v[2],f[2]=B}else f[0]=v[0],f[1]=v[2],f[2]=v[1],f[3]=v[3];return f},K.invert=function(f,v){var B=v[0],I=v[1],R=v[2],b=v[3],E=B*b-R*I;return E?(f[0]=b*(E=1/E),f[1]=-I*E,f[2]=-R*E,f[3]=B*E,f):null},K.adjoint=function(f,v){var B=v[0];return f[0]=v[3],f[1]=-v[1],f[2]=-v[2],f[3]=B,f},K.determinant=function(f){return f[0]*f[3]-f[2]*f[1]},K.multiply=d,K.rotate=function(f,v,B){var I=v[0],R=v[1],b=v[2],E=v[3],P=Math.sin(B),T=Math.cos(B);return f[0]=I*T+b*P,f[1]=R*T+E*P,f[2]=I*-P+b*T,f[3]=R*-P+E*T,f},K.scale=function(f,v,B){var I=v[1],R=v[2],b=v[3],E=B[0],P=B[1];return f[0]=v[0]*E,f[1]=I*E,f[2]=R*P,f[3]=b*P,f},K.fromRotation=function(f,v){var B=Math.sin(v),I=Math.cos(v);return f[0]=I,f[1]=B,f[2]=-B,f[3]=I,f},K.fromScaling=function(f,v){return f[0]=v[0],f[1]=0,f[2]=0,f[3]=v[1],f},K.str=function(f){return"mat2("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+")"},K.frob=function(f){return Math.hypot(f[0],f[1],f[2],f[3])},K.LDU=function(f,v,B,I){return f[2]=I[2]/I[0],B[0]=I[0],B[1]=I[1],B[3]=I[3]-f[2]*B[1],[f,v,B]},K.add=function(f,v,B){return f[0]=v[0]+B[0],f[1]=v[1]+B[1],f[2]=v[2]+B[2],f[3]=v[3]+B[3],f},K.subtract=y,K.exactEquals=function(f,v){return f[0]===v[0]&&f[1]===v[1]&&f[2]===v[2]&&f[3]===v[3]},K.equals=function(f,v){var B=f[0],I=f[1],R=f[2],b=f[3],E=v[0],P=v[1],T=v[2],F=v[3];return Math.abs(B-E)<=s.EPSILON*Math.max(1,Math.abs(B),Math.abs(E))&&Math.abs(I-P)<=s.EPSILON*Math.max(1,Math.abs(I),Math.abs(P))&&Math.abs(R-T)<=s.EPSILON*Math.max(1,Math.abs(R),Math.abs(T))&&Math.abs(b-F)<=s.EPSILON*Math.max(1,Math.abs(b),Math.abs(F))},K.multiplyScalar=function(f,v,B){return f[0]=v[0]*B,f[1]=v[1]*B,f[2]=v[2]*B,f[3]=v[3]*B,f},K.multiplyScalarAndAdd=function(f,v,B,I){return f[0]=v[0]+B[0]*I,f[1]=v[1]+B[1]*I,f[2]=v[2]+B[2]*I,f[3]=v[3]+B[3]*I,f},K.sub=K.mul=void 0;var s=function(f,v){if(f&&f.__esModule)return f;if(f===null||A(f)!=="object"&&typeof f!="function")return{default:f};var B=c(void 0);if(B&&B.has(f))return B.get(f);var I={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in f)if(b!=="default"&&Object.prototype.hasOwnProperty.call(f,b)){var E=R?Object.getOwnPropertyDescriptor(f,b):null;E&&(E.get||E.set)?Object.defineProperty(I,b,E):I[b]=f[b]}return I.default=f,B&&B.set(f,I),I}(z());function c(f){if(typeof WeakMap!="function")return null;var v=new WeakMap,B=new WeakMap;return(c=function(I){return I?B:v})(f)}function d(f,v,B){var I=v[0],R=v[1],b=v[2],E=v[3],P=B[0],T=B[1],F=B[2],D=B[3];return f[0]=I*P+b*T,f[1]=R*P+E*T,f[2]=I*F+b*D,f[3]=R*F+E*D,f}function y(f,v,B){return f[0]=v[0]-B[0],f[1]=v[1]-B[1],f[2]=v[2]-B[2],f[3]=v[3]-B[3],f}return K.mul=d,K.sub=y,K}var q,ee={};function ie(){if(q)return ee;function A(f){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},A(f)}q=1,Object.defineProperty(ee,"__esModule",{value:!0}),ee.create=function(){var f=new s.ARRAY_TYPE(6);return s.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0,f[4]=0,f[5]=0),f[0]=1,f[3]=1,f},ee.clone=function(f){var v=new s.ARRAY_TYPE(6);return v[0]=f[0],v[1]=f[1],v[2]=f[2],v[3]=f[3],v[4]=f[4],v[5]=f[5],v},ee.copy=function(f,v){return f[0]=v[0],f[1]=v[1],f[2]=v[2],f[3]=v[3],f[4]=v[4],f[5]=v[5],f},ee.identity=function(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=1,f[4]=0,f[5]=0,f},ee.fromValues=function(f,v,B,I,R,b){var E=new s.ARRAY_TYPE(6);return E[0]=f,E[1]=v,E[2]=B,E[3]=I,E[4]=R,E[5]=b,E},ee.set=function(f,v,B,I,R,b,E){return f[0]=v,f[1]=B,f[2]=I,f[3]=R,f[4]=b,f[5]=E,f},ee.invert=function(f,v){var B=v[0],I=v[1],R=v[2],b=v[3],E=v[4],P=v[5],T=B*b-I*R;return T?(f[0]=b*(T=1/T),f[1]=-I*T,f[2]=-R*T,f[3]=B*T,f[4]=(R*P-b*E)*T,f[5]=(I*E-B*P)*T,f):null},ee.determinant=function(f){return f[0]*f[3]-f[1]*f[2]},ee.multiply=d,ee.rotate=function(f,v,B){var I=v[0],R=v[1],b=v[2],E=v[3],P=v[4],T=v[5],F=Math.sin(B),D=Math.cos(B);return f[0]=I*D+b*F,f[1]=R*D+E*F,f[2]=I*-F+b*D,f[3]=R*-F+E*D,f[4]=P,f[5]=T,f},ee.scale=function(f,v,B){var I=v[1],R=v[2],b=v[3],E=v[4],P=v[5],T=B[0],F=B[1];return f[0]=v[0]*T,f[1]=I*T,f[2]=R*F,f[3]=b*F,f[4]=E,f[5]=P,f},ee.translate=function(f,v,B){var I=v[0],R=v[1],b=v[2],E=v[3],P=v[4],T=v[5],F=B[0],D=B[1];return f[0]=I,f[1]=R,f[2]=b,f[3]=E,f[4]=I*F+b*D+P,f[5]=R*F+E*D+T,f},ee.fromRotation=function(f,v){var B=Math.sin(v),I=Math.cos(v);return f[0]=I,f[1]=B,f[2]=-B,f[3]=I,f[4]=0,f[5]=0,f},ee.fromScaling=function(f,v){return f[0]=v[0],f[1]=0,f[2]=0,f[3]=v[1],f[4]=0,f[5]=0,f},ee.fromTranslation=function(f,v){return f[0]=1,f[1]=0,f[2]=0,f[3]=1,f[4]=v[0],f[5]=v[1],f},ee.str=function(f){return"mat2d("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+")"},ee.frob=function(f){return Math.hypot(f[0],f[1],f[2],f[3],f[4],f[5],1)},ee.add=function(f,v,B){return f[0]=v[0]+B[0],f[1]=v[1]+B[1],f[2]=v[2]+B[2],f[3]=v[3]+B[3],f[4]=v[4]+B[4],f[5]=v[5]+B[5],f},ee.subtract=y,ee.multiplyScalar=function(f,v,B){return f[0]=v[0]*B,f[1]=v[1]*B,f[2]=v[2]*B,f[3]=v[3]*B,f[4]=v[4]*B,f[5]=v[5]*B,f},ee.multiplyScalarAndAdd=function(f,v,B,I){return f[0]=v[0]+B[0]*I,f[1]=v[1]+B[1]*I,f[2]=v[2]+B[2]*I,f[3]=v[3]+B[3]*I,f[4]=v[4]+B[4]*I,f[5]=v[5]+B[5]*I,f},ee.exactEquals=function(f,v){return f[0]===v[0]&&f[1]===v[1]&&f[2]===v[2]&&f[3]===v[3]&&f[4]===v[4]&&f[5]===v[5]},ee.equals=function(f,v){var B=f[0],I=f[1],R=f[2],b=f[3],E=f[4],P=f[5],T=v[0],F=v[1],D=v[2],V=v[3],H=v[4],Z=v[5];return Math.abs(B-T)<=s.EPSILON*Math.max(1,Math.abs(B),Math.abs(T))&&Math.abs(I-F)<=s.EPSILON*Math.max(1,Math.abs(I),Math.abs(F))&&Math.abs(R-D)<=s.EPSILON*Math.max(1,Math.abs(R),Math.abs(D))&&Math.abs(b-V)<=s.EPSILON*Math.max(1,Math.abs(b),Math.abs(V))&&Math.abs(E-H)<=s.EPSILON*Math.max(1,Math.abs(E),Math.abs(H))&&Math.abs(P-Z)<=s.EPSILON*Math.max(1,Math.abs(P),Math.abs(Z))},ee.sub=ee.mul=void 0;var s=function(f,v){if(f&&f.__esModule)return f;if(f===null||A(f)!=="object"&&typeof f!="function")return{default:f};var B=c(void 0);if(B&&B.has(f))return B.get(f);var I={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in f)if(b!=="default"&&Object.prototype.hasOwnProperty.call(f,b)){var E=R?Object.getOwnPropertyDescriptor(f,b):null;E&&(E.get||E.set)?Object.defineProperty(I,b,E):I[b]=f[b]}return I.default=f,B&&B.set(f,I),I}(z());function c(f){if(typeof WeakMap!="function")return null;var v=new WeakMap,B=new WeakMap;return(c=function(I){return I?B:v})(f)}function d(f,v,B){var I=v[0],R=v[1],b=v[2],E=v[3],P=v[4],T=v[5],F=B[0],D=B[1],V=B[2],H=B[3],Z=B[4],J=B[5];return f[0]=I*F+b*D,f[1]=R*F+E*D,f[2]=I*V+b*H,f[3]=R*V+E*H,f[4]=I*Z+b*J+P,f[5]=R*Z+E*J+T,f}function y(f,v,B){return f[0]=v[0]-B[0],f[1]=v[1]-B[1],f[2]=v[2]-B[2],f[3]=v[3]-B[3],f[4]=v[4]-B[4],f[5]=v[5]-B[5],f}return ee.mul=d,ee.sub=y,ee}var fe,me={};function ye(){if(fe)return me;function A(f){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},A(f)}fe=1,Object.defineProperty(me,"__esModule",{value:!0}),me.create=function(){var f=new s.ARRAY_TYPE(9);return s.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f},me.fromMat4=function(f,v){return f[0]=v[0],f[1]=v[1],f[2]=v[2],f[3]=v[4],f[4]=v[5],f[5]=v[6],f[6]=v[8],f[7]=v[9],f[8]=v[10],f},me.clone=function(f){var v=new s.ARRAY_TYPE(9);return v[0]=f[0],v[1]=f[1],v[2]=f[2],v[3]=f[3],v[4]=f[4],v[5]=f[5],v[6]=f[6],v[7]=f[7],v[8]=f[8],v},me.copy=function(f,v){return f[0]=v[0],f[1]=v[1],f[2]=v[2],f[3]=v[3],f[4]=v[4],f[5]=v[5],f[6]=v[6],f[7]=v[7],f[8]=v[8],f},me.fromValues=function(f,v,B,I,R,b,E,P,T){var F=new s.ARRAY_TYPE(9);return F[0]=f,F[1]=v,F[2]=B,F[3]=I,F[4]=R,F[5]=b,F[6]=E,F[7]=P,F[8]=T,F},me.set=function(f,v,B,I,R,b,E,P,T,F){return f[0]=v,f[1]=B,f[2]=I,f[3]=R,f[4]=b,f[5]=E,f[6]=P,f[7]=T,f[8]=F,f},me.identity=function(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=1,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},me.transpose=function(f,v){if(f===v){var B=v[1],I=v[2],R=v[5];f[1]=v[3],f[2]=v[6],f[3]=B,f[5]=v[7],f[6]=I,f[7]=R}else f[0]=v[0],f[1]=v[3],f[2]=v[6],f[3]=v[1],f[4]=v[4],f[5]=v[7],f[6]=v[2],f[7]=v[5],f[8]=v[8];return f},me.invert=function(f,v){var B=v[0],I=v[1],R=v[2],b=v[3],E=v[4],P=v[5],T=v[6],F=v[7],D=v[8],V=D*E-P*F,H=-D*b+P*T,Z=F*b-E*T,J=B*V+I*H+R*Z;return J?(f[0]=V*(J=1/J),f[1]=(-D*I+R*F)*J,f[2]=(P*I-R*E)*J,f[3]=H*J,f[4]=(D*B-R*T)*J,f[5]=(-P*B+R*b)*J,f[6]=Z*J,f[7]=(-F*B+I*T)*J,f[8]=(E*B-I*b)*J,f):null},me.adjoint=function(f,v){var B=v[0],I=v[1],R=v[2],b=v[3],E=v[4],P=v[5],T=v[6],F=v[7],D=v[8];return f[0]=E*D-P*F,f[1]=R*F-I*D,f[2]=I*P-R*E,f[3]=P*T-b*D,f[4]=B*D-R*T,f[5]=R*b-B*P,f[6]=b*F-E*T,f[7]=I*T-B*F,f[8]=B*E-I*b,f},me.determinant=function(f){var v=f[3],B=f[4],I=f[5],R=f[6],b=f[7],E=f[8];return f[0]*(E*B-I*b)+f[1]*(-E*v+I*R)+f[2]*(b*v-B*R)},me.multiply=d,me.translate=function(f,v,B){var I=v[0],R=v[1],b=v[2],E=v[3],P=v[4],T=v[5],F=v[6],D=v[7],V=v[8],H=B[0],Z=B[1];return f[0]=I,f[1]=R,f[2]=b,f[3]=E,f[4]=P,f[5]=T,f[6]=H*I+Z*E+F,f[7]=H*R+Z*P+D,f[8]=H*b+Z*T+V,f},me.rotate=function(f,v,B){var I=v[0],R=v[1],b=v[2],E=v[3],P=v[4],T=v[5],F=v[6],D=v[7],V=v[8],H=Math.sin(B),Z=Math.cos(B);return f[0]=Z*I+H*E,f[1]=Z*R+H*P,f[2]=Z*b+H*T,f[3]=Z*E-H*I,f[4]=Z*P-H*R,f[5]=Z*T-H*b,f[6]=F,f[7]=D,f[8]=V,f},me.scale=function(f,v,B){var I=B[0],R=B[1];return f[0]=I*v[0],f[1]=I*v[1],f[2]=I*v[2],f[3]=R*v[3],f[4]=R*v[4],f[5]=R*v[5],f[6]=v[6],f[7]=v[7],f[8]=v[8],f},me.fromTranslation=function(f,v){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=1,f[5]=0,f[6]=v[0],f[7]=v[1],f[8]=1,f},me.fromRotation=function(f,v){var B=Math.sin(v),I=Math.cos(v);return f[0]=I,f[1]=B,f[2]=0,f[3]=-B,f[4]=I,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},me.fromScaling=function(f,v){return f[0]=v[0],f[1]=0,f[2]=0,f[3]=0,f[4]=v[1],f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},me.fromMat2d=function(f,v){return f[0]=v[0],f[1]=v[1],f[2]=0,f[3]=v[2],f[4]=v[3],f[5]=0,f[6]=v[4],f[7]=v[5],f[8]=1,f},me.fromQuat=function(f,v){var B=v[0],I=v[1],R=v[2],b=v[3],E=B+B,P=I+I,T=R+R,F=B*E,D=I*E,V=I*P,H=R*E,Z=R*P,J=R*T,G=b*E,te=b*P,oe=b*T;return f[0]=1-V-J,f[3]=D-oe,f[6]=H+te,f[1]=D+oe,f[4]=1-F-J,f[7]=Z-G,f[2]=H-te,f[5]=Z+G,f[8]=1-F-V,f},me.normalFromMat4=function(f,v){var B=v[0],I=v[1],R=v[2],b=v[3],E=v[4],P=v[5],T=v[6],F=v[7],D=v[8],V=v[9],H=v[10],Z=v[11],J=v[12],G=v[13],te=v[14],oe=v[15],pe=B*P-I*E,we=B*T-R*E,Ce=B*F-b*E,xe=I*T-R*P,De=I*F-b*P,Ie=R*F-b*T,Oe=D*G-V*J,Ke=D*te-H*J,Ze=D*oe-Z*J,Ye=V*te-H*G,et=V*oe-Z*G,at=H*oe-Z*te,rt=pe*at-we*et+Ce*Ye+xe*Ze-De*Ke+Ie*Oe;return rt?(f[0]=(P*at-T*et+F*Ye)*(rt=1/rt),f[1]=(T*Ze-E*at-F*Ke)*rt,f[2]=(E*et-P*Ze+F*Oe)*rt,f[3]=(R*et-I*at-b*Ye)*rt,f[4]=(B*at-R*Ze+b*Ke)*rt,f[5]=(I*Ze-B*et-b*Oe)*rt,f[6]=(G*Ie-te*De+oe*xe)*rt,f[7]=(te*Ce-J*Ie-oe*we)*rt,f[8]=(J*De-G*Ce+oe*pe)*rt,f):null},me.projection=function(f,v,B){return f[0]=2/v,f[1]=0,f[2]=0,f[3]=0,f[4]=-2/B,f[5]=0,f[6]=-1,f[7]=1,f[8]=1,f},me.str=function(f){return"mat3("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+", "+f[6]+", "+f[7]+", "+f[8]+")"},me.frob=function(f){return Math.hypot(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8])},me.add=function(f,v,B){return f[0]=v[0]+B[0],f[1]=v[1]+B[1],f[2]=v[2]+B[2],f[3]=v[3]+B[3],f[4]=v[4]+B[4],f[5]=v[5]+B[5],f[6]=v[6]+B[6],f[7]=v[7]+B[7],f[8]=v[8]+B[8],f},me.subtract=y,me.multiplyScalar=function(f,v,B){return f[0]=v[0]*B,f[1]=v[1]*B,f[2]=v[2]*B,f[3]=v[3]*B,f[4]=v[4]*B,f[5]=v[5]*B,f[6]=v[6]*B,f[7]=v[7]*B,f[8]=v[8]*B,f},me.multiplyScalarAndAdd=function(f,v,B,I){return f[0]=v[0]+B[0]*I,f[1]=v[1]+B[1]*I,f[2]=v[2]+B[2]*I,f[3]=v[3]+B[3]*I,f[4]=v[4]+B[4]*I,f[5]=v[5]+B[5]*I,f[6]=v[6]+B[6]*I,f[7]=v[7]+B[7]*I,f[8]=v[8]+B[8]*I,f},me.exactEquals=function(f,v){return f[0]===v[0]&&f[1]===v[1]&&f[2]===v[2]&&f[3]===v[3]&&f[4]===v[4]&&f[5]===v[5]&&f[6]===v[6]&&f[7]===v[7]&&f[8]===v[8]},me.equals=function(f,v){var B=f[0],I=f[1],R=f[2],b=f[3],E=f[4],P=f[5],T=f[6],F=f[7],D=f[8],V=v[0],H=v[1],Z=v[2],J=v[3],G=v[4],te=v[5],oe=v[6],pe=v[7],we=v[8];return Math.abs(B-V)<=s.EPSILON*Math.max(1,Math.abs(B),Math.abs(V))&&Math.abs(I-H)<=s.EPSILON*Math.max(1,Math.abs(I),Math.abs(H))&&Math.abs(R-Z)<=s.EPSILON*Math.max(1,Math.abs(R),Math.abs(Z))&&Math.abs(b-J)<=s.EPSILON*Math.max(1,Math.abs(b),Math.abs(J))&&Math.abs(E-G)<=s.EPSILON*Math.max(1,Math.abs(E),Math.abs(G))&&Math.abs(P-te)<=s.EPSILON*Math.max(1,Math.abs(P),Math.abs(te))&&Math.abs(T-oe)<=s.EPSILON*Math.max(1,Math.abs(T),Math.abs(oe))&&Math.abs(F-pe)<=s.EPSILON*Math.max(1,Math.abs(F),Math.abs(pe))&&Math.abs(D-we)<=s.EPSILON*Math.max(1,Math.abs(D),Math.abs(we))},me.sub=me.mul=void 0;var s=function(f,v){if(f&&f.__esModule)return f;if(f===null||A(f)!=="object"&&typeof f!="function")return{default:f};var B=c(void 0);if(B&&B.has(f))return B.get(f);var I={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in f)if(b!=="default"&&Object.prototype.hasOwnProperty.call(f,b)){var E=R?Object.getOwnPropertyDescriptor(f,b):null;E&&(E.get||E.set)?Object.defineProperty(I,b,E):I[b]=f[b]}return I.default=f,B&&B.set(f,I),I}(z());function c(f){if(typeof WeakMap!="function")return null;var v=new WeakMap,B=new WeakMap;return(c=function(I){return I?B:v})(f)}function d(f,v,B){var I=v[0],R=v[1],b=v[2],E=v[3],P=v[4],T=v[5],F=v[6],D=v[7],V=v[8],H=B[0],Z=B[1],J=B[2],G=B[3],te=B[4],oe=B[5],pe=B[6],we=B[7],Ce=B[8];return f[0]=H*I+Z*E+J*F,f[1]=H*R+Z*P+J*D,f[2]=H*b+Z*T+J*V,f[3]=G*I+te*E+oe*F,f[4]=G*R+te*P+oe*D,f[5]=G*b+te*T+oe*V,f[6]=pe*I+we*E+Ce*F,f[7]=pe*R+we*P+Ce*D,f[8]=pe*b+we*T+Ce*V,f}function y(f,v,B){return f[0]=v[0]-B[0],f[1]=v[1]-B[1],f[2]=v[2]-B[2],f[3]=v[3]-B[3],f[4]=v[4]-B[4],f[5]=v[5]-B[5],f[6]=v[6]-B[6],f[7]=v[7]-B[7],f[8]=v[8]-B[8],f}return me.mul=d,me.sub=y,me}var se,re={};function de(){if(se)return re;function A(b){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},A(b)}se=1,Object.defineProperty(re,"__esModule",{value:!0}),re.create=function(){var b=new s.ARRAY_TYPE(16);return s.ARRAY_TYPE!=Float32Array&&(b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[11]=0,b[12]=0,b[13]=0,b[14]=0),b[0]=1,b[5]=1,b[10]=1,b[15]=1,b},re.clone=function(b){var E=new s.ARRAY_TYPE(16);return E[0]=b[0],E[1]=b[1],E[2]=b[2],E[3]=b[3],E[4]=b[4],E[5]=b[5],E[6]=b[6],E[7]=b[7],E[8]=b[8],E[9]=b[9],E[10]=b[10],E[11]=b[11],E[12]=b[12],E[13]=b[13],E[14]=b[14],E[15]=b[15],E},re.copy=function(b,E){return b[0]=E[0],b[1]=E[1],b[2]=E[2],b[3]=E[3],b[4]=E[4],b[5]=E[5],b[6]=E[6],b[7]=E[7],b[8]=E[8],b[9]=E[9],b[10]=E[10],b[11]=E[11],b[12]=E[12],b[13]=E[13],b[14]=E[14],b[15]=E[15],b},re.fromValues=function(b,E,P,T,F,D,V,H,Z,J,G,te,oe,pe,we,Ce){var xe=new s.ARRAY_TYPE(16);return xe[0]=b,xe[1]=E,xe[2]=P,xe[3]=T,xe[4]=F,xe[5]=D,xe[6]=V,xe[7]=H,xe[8]=Z,xe[9]=J,xe[10]=G,xe[11]=te,xe[12]=oe,xe[13]=pe,xe[14]=we,xe[15]=Ce,xe},re.set=function(b,E,P,T,F,D,V,H,Z,J,G,te,oe,pe,we,Ce,xe){return b[0]=E,b[1]=P,b[2]=T,b[3]=F,b[4]=D,b[5]=V,b[6]=H,b[7]=Z,b[8]=J,b[9]=G,b[10]=te,b[11]=oe,b[12]=pe,b[13]=we,b[14]=Ce,b[15]=xe,b},re.identity=d,re.transpose=function(b,E){if(b===E){var P=E[1],T=E[2],F=E[3],D=E[6],V=E[7],H=E[11];b[1]=E[4],b[2]=E[8],b[3]=E[12],b[4]=P,b[6]=E[9],b[7]=E[13],b[8]=T,b[9]=D,b[11]=E[14],b[12]=F,b[13]=V,b[14]=H}else b[0]=E[0],b[1]=E[4],b[2]=E[8],b[3]=E[12],b[4]=E[1],b[5]=E[5],b[6]=E[9],b[7]=E[13],b[8]=E[2],b[9]=E[6],b[10]=E[10],b[11]=E[14],b[12]=E[3],b[13]=E[7],b[14]=E[11],b[15]=E[15];return b},re.invert=function(b,E){var P=E[0],T=E[1],F=E[2],D=E[3],V=E[4],H=E[5],Z=E[6],J=E[7],G=E[8],te=E[9],oe=E[10],pe=E[11],we=E[12],Ce=E[13],xe=E[14],De=E[15],Ie=P*H-T*V,Oe=P*Z-F*V,Ke=P*J-D*V,Ze=T*Z-F*H,Ye=T*J-D*H,et=F*J-D*Z,at=G*Ce-te*we,rt=G*xe-oe*we,_t=G*De-pe*we,Tt=te*xe-oe*Ce,dt=te*De-pe*Ce,Zt=oe*De-pe*xe,Qt=Ie*Zt-Oe*dt+Ke*Tt+Ze*_t-Ye*rt+et*at;return Qt?(b[0]=(H*Zt-Z*dt+J*Tt)*(Qt=1/Qt),b[1]=(F*dt-T*Zt-D*Tt)*Qt,b[2]=(Ce*et-xe*Ye+De*Ze)*Qt,b[3]=(oe*Ye-te*et-pe*Ze)*Qt,b[4]=(Z*_t-V*Zt-J*rt)*Qt,b[5]=(P*Zt-F*_t+D*rt)*Qt,b[6]=(xe*Ke-we*et-De*Oe)*Qt,b[7]=(G*et-oe*Ke+pe*Oe)*Qt,b[8]=(V*dt-H*_t+J*at)*Qt,b[9]=(T*_t-P*dt-D*at)*Qt,b[10]=(we*Ye-Ce*Ke+De*Ie)*Qt,b[11]=(te*Ke-G*Ye-pe*Ie)*Qt,b[12]=(H*rt-V*Tt-Z*at)*Qt,b[13]=(P*Tt-T*rt+F*at)*Qt,b[14]=(Ce*Oe-we*Ze-xe*Ie)*Qt,b[15]=(G*Ze-te*Oe+oe*Ie)*Qt,b):null},re.adjoint=function(b,E){var P=E[0],T=E[1],F=E[2],D=E[3],V=E[4],H=E[5],Z=E[6],J=E[7],G=E[8],te=E[9],oe=E[10],pe=E[11],we=E[12],Ce=E[13],xe=E[14],De=E[15];return b[0]=H*(oe*De-pe*xe)-te*(Z*De-J*xe)+Ce*(Z*pe-J*oe),b[1]=-(T*(oe*De-pe*xe)-te*(F*De-D*xe)+Ce*(F*pe-D*oe)),b[2]=T*(Z*De-J*xe)-H*(F*De-D*xe)+Ce*(F*J-D*Z),b[3]=-(T*(Z*pe-J*oe)-H*(F*pe-D*oe)+te*(F*J-D*Z)),b[4]=-(V*(oe*De-pe*xe)-G*(Z*De-J*xe)+we*(Z*pe-J*oe)),b[5]=P*(oe*De-pe*xe)-G*(F*De-D*xe)+we*(F*pe-D*oe),b[6]=-(P*(Z*De-J*xe)-V*(F*De-D*xe)+we*(F*J-D*Z)),b[7]=P*(Z*pe-J*oe)-V*(F*pe-D*oe)+G*(F*J-D*Z),b[8]=V*(te*De-pe*Ce)-G*(H*De-J*Ce)+we*(H*pe-J*te),b[9]=-(P*(te*De-pe*Ce)-G*(T*De-D*Ce)+we*(T*pe-D*te)),b[10]=P*(H*De-J*Ce)-V*(T*De-D*Ce)+we*(T*J-D*H),b[11]=-(P*(H*pe-J*te)-V*(T*pe-D*te)+G*(T*J-D*H)),b[12]=-(V*(te*xe-oe*Ce)-G*(H*xe-Z*Ce)+we*(H*oe-Z*te)),b[13]=P*(te*xe-oe*Ce)-G*(T*xe-F*Ce)+we*(T*oe-F*te),b[14]=-(P*(H*xe-Z*Ce)-V*(T*xe-F*Ce)+we*(T*Z-F*H)),b[15]=P*(H*oe-Z*te)-V*(T*oe-F*te)+G*(T*Z-F*H),b},re.determinant=function(b){var E=b[0],P=b[1],T=b[2],F=b[3],D=b[4],V=b[5],H=b[6],Z=b[7],J=b[8],G=b[9],te=b[10],oe=b[11],pe=b[12],we=b[13],Ce=b[14],xe=b[15];return(E*V-P*D)*(te*xe-oe*Ce)-(E*H-T*D)*(G*xe-oe*we)+(E*Z-F*D)*(G*Ce-te*we)+(P*H-T*V)*(J*xe-oe*pe)-(P*Z-F*V)*(J*Ce-te*pe)+(T*Z-F*H)*(J*we-G*pe)},re.multiply=y,re.translate=function(b,E,P){var T,F,D,V,H,Z,J,G,te,oe,pe,we,Ce=P[0],xe=P[1],De=P[2];return E===b?(b[12]=E[0]*Ce+E[4]*xe+E[8]*De+E[12],b[13]=E[1]*Ce+E[5]*xe+E[9]*De+E[13],b[14]=E[2]*Ce+E[6]*xe+E[10]*De+E[14],b[15]=E[3]*Ce+E[7]*xe+E[11]*De+E[15]):(F=E[1],D=E[2],V=E[3],H=E[4],Z=E[5],J=E[6],G=E[7],te=E[8],oe=E[9],pe=E[10],we=E[11],b[0]=T=E[0],b[1]=F,b[2]=D,b[3]=V,b[4]=H,b[5]=Z,b[6]=J,b[7]=G,b[8]=te,b[9]=oe,b[10]=pe,b[11]=we,b[12]=T*Ce+H*xe+te*De+E[12],b[13]=F*Ce+Z*xe+oe*De+E[13],b[14]=D*Ce+J*xe+pe*De+E[14],b[15]=V*Ce+G*xe+we*De+E[15]),b},re.scale=function(b,E,P){var T=P[0],F=P[1],D=P[2];return b[0]=E[0]*T,b[1]=E[1]*T,b[2]=E[2]*T,b[3]=E[3]*T,b[4]=E[4]*F,b[5]=E[5]*F,b[6]=E[6]*F,b[7]=E[7]*F,b[8]=E[8]*D,b[9]=E[9]*D,b[10]=E[10]*D,b[11]=E[11]*D,b[12]=E[12],b[13]=E[13],b[14]=E[14],b[15]=E[15],b},re.rotate=function(b,E,P,T){var F,D,V,H,Z,J,G,te,oe,pe,we,Ce,xe,De,Ie,Oe,Ke,Ze,Ye,et,at,rt,_t,Tt,dt=T[0],Zt=T[1],Qt=T[2],Lt=Math.hypot(dt,Zt,Qt);return Lt<s.EPSILON?null:(dt*=Lt=1/Lt,Zt*=Lt,Qt*=Lt,F=Math.sin(P),D=Math.cos(P),Z=E[1],J=E[2],G=E[3],oe=E[5],pe=E[6],we=E[7],xe=E[9],De=E[10],Ie=E[11],Oe=dt*dt*(V=1-D)+D,Ye=dt*Zt*V-Qt*F,et=Zt*Zt*V+D,at=Qt*Zt*V+dt*F,rt=dt*Qt*V+Zt*F,_t=Zt*Qt*V-dt*F,Tt=Qt*Qt*V+D,b[0]=(H=E[0])*Oe+(te=E[4])*(Ke=Zt*dt*V+Qt*F)+(Ce=E[8])*(Ze=Qt*dt*V-Zt*F),b[1]=Z*Oe+oe*Ke+xe*Ze,b[2]=J*Oe+pe*Ke+De*Ze,b[3]=G*Oe+we*Ke+Ie*Ze,b[4]=H*Ye+te*et+Ce*at,b[5]=Z*Ye+oe*et+xe*at,b[6]=J*Ye+pe*et+De*at,b[7]=G*Ye+we*et+Ie*at,b[8]=H*rt+te*_t+Ce*Tt,b[9]=Z*rt+oe*_t+xe*Tt,b[10]=J*rt+pe*_t+De*Tt,b[11]=G*rt+we*_t+Ie*Tt,E!==b&&(b[12]=E[12],b[13]=E[13],b[14]=E[14],b[15]=E[15]),b)},re.rotateX=function(b,E,P){var T=Math.sin(P),F=Math.cos(P),D=E[4],V=E[5],H=E[6],Z=E[7],J=E[8],G=E[9],te=E[10],oe=E[11];return E!==b&&(b[0]=E[0],b[1]=E[1],b[2]=E[2],b[3]=E[3],b[12]=E[12],b[13]=E[13],b[14]=E[14],b[15]=E[15]),b[4]=D*F+J*T,b[5]=V*F+G*T,b[6]=H*F+te*T,b[7]=Z*F+oe*T,b[8]=J*F-D*T,b[9]=G*F-V*T,b[10]=te*F-H*T,b[11]=oe*F-Z*T,b},re.rotateY=function(b,E,P){var T=Math.sin(P),F=Math.cos(P),D=E[0],V=E[1],H=E[2],Z=E[3],J=E[8],G=E[9],te=E[10],oe=E[11];return E!==b&&(b[4]=E[4],b[5]=E[5],b[6]=E[6],b[7]=E[7],b[12]=E[12],b[13]=E[13],b[14]=E[14],b[15]=E[15]),b[0]=D*F-J*T,b[1]=V*F-G*T,b[2]=H*F-te*T,b[3]=Z*F-oe*T,b[8]=D*T+J*F,b[9]=V*T+G*F,b[10]=H*T+te*F,b[11]=Z*T+oe*F,b},re.rotateZ=function(b,E,P){var T=Math.sin(P),F=Math.cos(P),D=E[0],V=E[1],H=E[2],Z=E[3],J=E[4],G=E[5],te=E[6],oe=E[7];return E!==b&&(b[8]=E[8],b[9]=E[9],b[10]=E[10],b[11]=E[11],b[12]=E[12],b[13]=E[13],b[14]=E[14],b[15]=E[15]),b[0]=D*F+J*T,b[1]=V*F+G*T,b[2]=H*F+te*T,b[3]=Z*F+oe*T,b[4]=J*F-D*T,b[5]=G*F-V*T,b[6]=te*F-H*T,b[7]=oe*F-Z*T,b},re.fromTranslation=function(b,E){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=E[0],b[13]=E[1],b[14]=E[2],b[15]=1,b},re.fromScaling=function(b,E){return b[0]=E[0],b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=E[1],b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=E[2],b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},re.fromRotation=function(b,E,P){var T,F,D,V=P[0],H=P[1],Z=P[2],J=Math.hypot(V,H,Z);return J<s.EPSILON?null:(V*=J=1/J,H*=J,Z*=J,T=Math.sin(E),F=Math.cos(E),b[0]=V*V*(D=1-F)+F,b[1]=H*V*D+Z*T,b[2]=Z*V*D-H*T,b[3]=0,b[4]=V*H*D-Z*T,b[5]=H*H*D+F,b[6]=Z*H*D+V*T,b[7]=0,b[8]=V*Z*D+H*T,b[9]=H*Z*D-V*T,b[10]=Z*Z*D+F,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b)},re.fromXRotation=function(b,E){var P=Math.sin(E),T=Math.cos(E);return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=T,b[6]=P,b[7]=0,b[8]=0,b[9]=-P,b[10]=T,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},re.fromYRotation=function(b,E){var P=Math.sin(E),T=Math.cos(E);return b[0]=T,b[1]=0,b[2]=-P,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=P,b[9]=0,b[10]=T,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},re.fromZRotation=function(b,E){var P=Math.sin(E),T=Math.cos(E);return b[0]=T,b[1]=P,b[2]=0,b[3]=0,b[4]=-P,b[5]=T,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},re.fromRotationTranslation=f,re.fromQuat2=function(b,E){var P=new s.ARRAY_TYPE(3),T=-E[0],F=-E[1],D=-E[2],V=E[3],H=E[4],Z=E[5],J=E[6],G=E[7],te=T*T+F*F+D*D+V*V;return te>0?(P[0]=2*(H*V+G*T+Z*D-J*F)/te,P[1]=2*(Z*V+G*F+J*T-H*D)/te,P[2]=2*(J*V+G*D+H*F-Z*T)/te):(P[0]=2*(H*V+G*T+Z*D-J*F),P[1]=2*(Z*V+G*F+J*T-H*D),P[2]=2*(J*V+G*D+H*F-Z*T)),f(b,E,P),b},re.getTranslation=function(b,E){return b[0]=E[12],b[1]=E[13],b[2]=E[14],b},re.getScaling=v,re.getRotation=function(b,E){var P=new s.ARRAY_TYPE(3);v(P,E);var T=1/P[0],F=1/P[1],D=1/P[2],V=E[0]*T,H=E[1]*F,Z=E[2]*D,J=E[4]*T,G=E[5]*F,te=E[6]*D,oe=E[8]*T,pe=E[9]*F,we=E[10]*D,Ce=V+G+we,xe=0;return Ce>0?(xe=2*Math.sqrt(Ce+1),b[3]=.25*xe,b[0]=(te-pe)/xe,b[1]=(oe-Z)/xe,b[2]=(H-J)/xe):V>G&&V>we?(xe=2*Math.sqrt(1+V-G-we),b[3]=(te-pe)/xe,b[0]=.25*xe,b[1]=(H+J)/xe,b[2]=(oe+Z)/xe):G>we?(xe=2*Math.sqrt(1+G-V-we),b[3]=(oe-Z)/xe,b[0]=(H+J)/xe,b[1]=.25*xe,b[2]=(te+pe)/xe):(xe=2*Math.sqrt(1+we-V-G),b[3]=(H-J)/xe,b[0]=(oe+Z)/xe,b[1]=(te+pe)/xe,b[2]=.25*xe),b},re.fromRotationTranslationScale=function(b,E,P,T){var F=E[0],D=E[1],V=E[2],H=E[3],Z=F+F,J=D+D,G=V+V,te=F*Z,oe=F*J,pe=F*G,we=D*J,Ce=D*G,xe=V*G,De=H*Z,Ie=H*J,Oe=H*G,Ke=T[0],Ze=T[1],Ye=T[2];return b[0]=(1-(we+xe))*Ke,b[1]=(oe+Oe)*Ke,b[2]=(pe-Ie)*Ke,b[3]=0,b[4]=(oe-Oe)*Ze,b[5]=(1-(te+xe))*Ze,b[6]=(Ce+De)*Ze,b[7]=0,b[8]=(pe+Ie)*Ye,b[9]=(Ce-De)*Ye,b[10]=(1-(te+we))*Ye,b[11]=0,b[12]=P[0],b[13]=P[1],b[14]=P[2],b[15]=1,b},re.fromRotationTranslationScaleOrigin=function(b,E,P,T,F){var D=E[0],V=E[1],H=E[2],Z=E[3],J=D+D,G=V+V,te=H+H,oe=D*J,pe=D*G,we=D*te,Ce=V*G,xe=V*te,De=H*te,Ie=Z*J,Oe=Z*G,Ke=Z*te,Ze=T[0],Ye=T[1],et=T[2],at=F[0],rt=F[1],_t=F[2],Tt=(1-(Ce+De))*Ze,dt=(pe+Ke)*Ze,Zt=(we-Oe)*Ze,Qt=(pe-Ke)*Ye,Lt=(1-(oe+De))*Ye,Pt=(xe+Ie)*Ye,yr=(we+Oe)*et,qt=(xe-Ie)*et,tr=(1-(oe+Ce))*et;return b[0]=Tt,b[1]=dt,b[2]=Zt,b[3]=0,b[4]=Qt,b[5]=Lt,b[6]=Pt,b[7]=0,b[8]=yr,b[9]=qt,b[10]=tr,b[11]=0,b[12]=P[0]+at-(Tt*at+Qt*rt+yr*_t),b[13]=P[1]+rt-(dt*at+Lt*rt+qt*_t),b[14]=P[2]+_t-(Zt*at+Pt*rt+tr*_t),b[15]=1,b},re.fromQuat=function(b,E){var P=E[0],T=E[1],F=E[2],D=E[3],V=P+P,H=T+T,Z=F+F,J=P*V,G=T*V,te=T*H,oe=F*V,pe=F*H,we=F*Z,Ce=D*V,xe=D*H,De=D*Z;return b[0]=1-te-we,b[1]=G+De,b[2]=oe-xe,b[3]=0,b[4]=G-De,b[5]=1-J-we,b[6]=pe+Ce,b[7]=0,b[8]=oe+xe,b[9]=pe-Ce,b[10]=1-J-te,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},re.frustum=function(b,E,P,T,F,D,V){var H=1/(P-E),Z=1/(F-T),J=1/(D-V);return b[0]=2*D*H,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=2*D*Z,b[6]=0,b[7]=0,b[8]=(P+E)*H,b[9]=(F+T)*Z,b[10]=(V+D)*J,b[11]=-1,b[12]=0,b[13]=0,b[14]=V*D*2*J,b[15]=0,b},re.perspectiveNO=B,re.perspectiveZO=function(b,E,P,T,F){var D,V=1/Math.tan(E/2);return b[0]=V/P,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=V,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[11]=-1,b[12]=0,b[13]=0,b[15]=0,F!=null&&F!==1/0?(b[10]=F*(D=1/(T-F)),b[14]=F*T*D):(b[10]=-1,b[14]=-T),b},re.perspectiveFromFieldOfView=function(b,E,P,T){var F=Math.tan(E.upDegrees*Math.PI/180),D=Math.tan(E.downDegrees*Math.PI/180),V=Math.tan(E.leftDegrees*Math.PI/180),H=Math.tan(E.rightDegrees*Math.PI/180),Z=2/(V+H),J=2/(F+D);return b[0]=Z,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=J,b[6]=0,b[7]=0,b[8]=-(V-H)*Z*.5,b[9]=(F-D)*J*.5,b[10]=T/(P-T),b[11]=-1,b[12]=0,b[13]=0,b[14]=T*P/(P-T),b[15]=0,b},re.orthoNO=I,re.orthoZO=function(b,E,P,T,F,D,V){var H=1/(E-P),Z=1/(T-F),J=1/(D-V);return b[0]=-2*H,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=-2*Z,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=J,b[11]=0,b[12]=(E+P)*H,b[13]=(F+T)*Z,b[14]=D*J,b[15]=1,b},re.lookAt=function(b,E,P,T){var F,D,V,H,Z,J,G,te,oe,pe,we=E[0],Ce=E[1],xe=E[2],De=T[0],Ie=T[1],Oe=T[2],Ke=P[0],Ze=P[1],Ye=P[2];return Math.abs(we-Ke)<s.EPSILON&&Math.abs(Ce-Ze)<s.EPSILON&&Math.abs(xe-Ye)<s.EPSILON?d(b):(G=we-Ke,te=Ce-Ze,oe=xe-Ye,F=Ie*(oe*=pe=1/Math.hypot(G,te,oe))-Oe*(te*=pe),D=Oe*(G*=pe)-De*oe,V=De*te-Ie*G,(pe=Math.hypot(F,D,V))?(F*=pe=1/pe,D*=pe,V*=pe):(F=0,D=0,V=0),H=te*V-oe*D,Z=oe*F-G*V,J=G*D-te*F,(pe=Math.hypot(H,Z,J))?(H*=pe=1/pe,Z*=pe,J*=pe):(H=0,Z=0,J=0),b[0]=F,b[1]=H,b[2]=G,b[3]=0,b[4]=D,b[5]=Z,b[6]=te,b[7]=0,b[8]=V,b[9]=J,b[10]=oe,b[11]=0,b[12]=-(F*we+D*Ce+V*xe),b[13]=-(H*we+Z*Ce+J*xe),b[14]=-(G*we+te*Ce+oe*xe),b[15]=1,b)},re.targetTo=function(b,E,P,T){var F=E[0],D=E[1],V=E[2],H=T[0],Z=T[1],J=T[2],G=F-P[0],te=D-P[1],oe=V-P[2],pe=G*G+te*te+oe*oe;pe>0&&(G*=pe=1/Math.sqrt(pe),te*=pe,oe*=pe);var we=Z*oe-J*te,Ce=J*G-H*oe,xe=H*te-Z*G;return(pe=we*we+Ce*Ce+xe*xe)>0&&(we*=pe=1/Math.sqrt(pe),Ce*=pe,xe*=pe),b[0]=we,b[1]=Ce,b[2]=xe,b[3]=0,b[4]=te*xe-oe*Ce,b[5]=oe*we-G*xe,b[6]=G*Ce-te*we,b[7]=0,b[8]=G,b[9]=te,b[10]=oe,b[11]=0,b[12]=F,b[13]=D,b[14]=V,b[15]=1,b},re.str=function(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"},re.frob=function(b){return Math.hypot(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15])},re.add=function(b,E,P){return b[0]=E[0]+P[0],b[1]=E[1]+P[1],b[2]=E[2]+P[2],b[3]=E[3]+P[3],b[4]=E[4]+P[4],b[5]=E[5]+P[5],b[6]=E[6]+P[6],b[7]=E[7]+P[7],b[8]=E[8]+P[8],b[9]=E[9]+P[9],b[10]=E[10]+P[10],b[11]=E[11]+P[11],b[12]=E[12]+P[12],b[13]=E[13]+P[13],b[14]=E[14]+P[14],b[15]=E[15]+P[15],b},re.subtract=R,re.multiplyScalar=function(b,E,P){return b[0]=E[0]*P,b[1]=E[1]*P,b[2]=E[2]*P,b[3]=E[3]*P,b[4]=E[4]*P,b[5]=E[5]*P,b[6]=E[6]*P,b[7]=E[7]*P,b[8]=E[8]*P,b[9]=E[9]*P,b[10]=E[10]*P,b[11]=E[11]*P,b[12]=E[12]*P,b[13]=E[13]*P,b[14]=E[14]*P,b[15]=E[15]*P,b},re.multiplyScalarAndAdd=function(b,E,P,T){return b[0]=E[0]+P[0]*T,b[1]=E[1]+P[1]*T,b[2]=E[2]+P[2]*T,b[3]=E[3]+P[3]*T,b[4]=E[4]+P[4]*T,b[5]=E[5]+P[5]*T,b[6]=E[6]+P[6]*T,b[7]=E[7]+P[7]*T,b[8]=E[8]+P[8]*T,b[9]=E[9]+P[9]*T,b[10]=E[10]+P[10]*T,b[11]=E[11]+P[11]*T,b[12]=E[12]+P[12]*T,b[13]=E[13]+P[13]*T,b[14]=E[14]+P[14]*T,b[15]=E[15]+P[15]*T,b},re.exactEquals=function(b,E){return b[0]===E[0]&&b[1]===E[1]&&b[2]===E[2]&&b[3]===E[3]&&b[4]===E[4]&&b[5]===E[5]&&b[6]===E[6]&&b[7]===E[7]&&b[8]===E[8]&&b[9]===E[9]&&b[10]===E[10]&&b[11]===E[11]&&b[12]===E[12]&&b[13]===E[13]&&b[14]===E[14]&&b[15]===E[15]},re.equals=function(b,E){var P=b[0],T=b[1],F=b[2],D=b[3],V=b[4],H=b[5],Z=b[6],J=b[7],G=b[8],te=b[9],oe=b[10],pe=b[11],we=b[12],Ce=b[13],xe=b[14],De=b[15],Ie=E[0],Oe=E[1],Ke=E[2],Ze=E[3],Ye=E[4],et=E[5],at=E[6],rt=E[7],_t=E[8],Tt=E[9],dt=E[10],Zt=E[11],Qt=E[12],Lt=E[13],Pt=E[14],yr=E[15];return Math.abs(P-Ie)<=s.EPSILON*Math.max(1,Math.abs(P),Math.abs(Ie))&&Math.abs(T-Oe)<=s.EPSILON*Math.max(1,Math.abs(T),Math.abs(Oe))&&Math.abs(F-Ke)<=s.EPSILON*Math.max(1,Math.abs(F),Math.abs(Ke))&&Math.abs(D-Ze)<=s.EPSILON*Math.max(1,Math.abs(D),Math.abs(Ze))&&Math.abs(V-Ye)<=s.EPSILON*Math.max(1,Math.abs(V),Math.abs(Ye))&&Math.abs(H-et)<=s.EPSILON*Math.max(1,Math.abs(H),Math.abs(et))&&Math.abs(Z-at)<=s.EPSILON*Math.max(1,Math.abs(Z),Math.abs(at))&&Math.abs(J-rt)<=s.EPSILON*Math.max(1,Math.abs(J),Math.abs(rt))&&Math.abs(G-_t)<=s.EPSILON*Math.max(1,Math.abs(G),Math.abs(_t))&&Math.abs(te-Tt)<=s.EPSILON*Math.max(1,Math.abs(te),Math.abs(Tt))&&Math.abs(oe-dt)<=s.EPSILON*Math.max(1,Math.abs(oe),Math.abs(dt))&&Math.abs(pe-Zt)<=s.EPSILON*Math.max(1,Math.abs(pe),Math.abs(Zt))&&Math.abs(we-Qt)<=s.EPSILON*Math.max(1,Math.abs(we),Math.abs(Qt))&&Math.abs(Ce-Lt)<=s.EPSILON*Math.max(1,Math.abs(Ce),Math.abs(Lt))&&Math.abs(xe-Pt)<=s.EPSILON*Math.max(1,Math.abs(xe),Math.abs(Pt))&&Math.abs(De-yr)<=s.EPSILON*Math.max(1,Math.abs(De),Math.abs(yr))},re.sub=re.mul=re.ortho=re.perspective=void 0;var s=function(b,E){if(b&&b.__esModule)return b;if(b===null||A(b)!=="object"&&typeof b!="function")return{default:b};var P=c(void 0);if(P&&P.has(b))return P.get(b);var T={},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var D in b)if(D!=="default"&&Object.prototype.hasOwnProperty.call(b,D)){var V=F?Object.getOwnPropertyDescriptor(b,D):null;V&&(V.get||V.set)?Object.defineProperty(T,D,V):T[D]=b[D]}return T.default=b,P&&P.set(b,T),T}(z());function c(b){if(typeof WeakMap!="function")return null;var E=new WeakMap,P=new WeakMap;return(c=function(T){return T?P:E})(b)}function d(b){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}function y(b,E,P){var T=E[0],F=E[1],D=E[2],V=E[3],H=E[4],Z=E[5],J=E[6],G=E[7],te=E[8],oe=E[9],pe=E[10],we=E[11],Ce=E[12],xe=E[13],De=E[14],Ie=E[15],Oe=P[0],Ke=P[1],Ze=P[2],Ye=P[3];return b[0]=Oe*T+Ke*H+Ze*te+Ye*Ce,b[1]=Oe*F+Ke*Z+Ze*oe+Ye*xe,b[2]=Oe*D+Ke*J+Ze*pe+Ye*De,b[3]=Oe*V+Ke*G+Ze*we+Ye*Ie,b[4]=(Oe=P[4])*T+(Ke=P[5])*H+(Ze=P[6])*te+(Ye=P[7])*Ce,b[5]=Oe*F+Ke*Z+Ze*oe+Ye*xe,b[6]=Oe*D+Ke*J+Ze*pe+Ye*De,b[7]=Oe*V+Ke*G+Ze*we+Ye*Ie,b[8]=(Oe=P[8])*T+(Ke=P[9])*H+(Ze=P[10])*te+(Ye=P[11])*Ce,b[9]=Oe*F+Ke*Z+Ze*oe+Ye*xe,b[10]=Oe*D+Ke*J+Ze*pe+Ye*De,b[11]=Oe*V+Ke*G+Ze*we+Ye*Ie,b[12]=(Oe=P[12])*T+(Ke=P[13])*H+(Ze=P[14])*te+(Ye=P[15])*Ce,b[13]=Oe*F+Ke*Z+Ze*oe+Ye*xe,b[14]=Oe*D+Ke*J+Ze*pe+Ye*De,b[15]=Oe*V+Ke*G+Ze*we+Ye*Ie,b}function f(b,E,P){var T=E[0],F=E[1],D=E[2],V=E[3],H=T+T,Z=F+F,J=D+D,G=T*H,te=T*Z,oe=T*J,pe=F*Z,we=F*J,Ce=D*J,xe=V*H,De=V*Z,Ie=V*J;return b[0]=1-(pe+Ce),b[1]=te+Ie,b[2]=oe-De,b[3]=0,b[4]=te-Ie,b[5]=1-(G+Ce),b[6]=we+xe,b[7]=0,b[8]=oe+De,b[9]=we-xe,b[10]=1-(G+pe),b[11]=0,b[12]=P[0],b[13]=P[1],b[14]=P[2],b[15]=1,b}function v(b,E){var P=E[4],T=E[5],F=E[6],D=E[8],V=E[9],H=E[10];return b[0]=Math.hypot(E[0],E[1],E[2]),b[1]=Math.hypot(P,T,F),b[2]=Math.hypot(D,V,H),b}function B(b,E,P,T,F){var D,V=1/Math.tan(E/2);return b[0]=V/P,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=V,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[11]=-1,b[12]=0,b[13]=0,b[15]=0,F!=null&&F!==1/0?(b[10]=(F+T)*(D=1/(T-F)),b[14]=2*F*T*D):(b[10]=-1,b[14]=-2*T),b}function I(b,E,P,T,F,D,V){var H=1/(E-P),Z=1/(T-F),J=1/(D-V);return b[0]=-2*H,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=-2*Z,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=2*J,b[11]=0,b[12]=(E+P)*H,b[13]=(F+T)*Z,b[14]=(V+D)*J,b[15]=1,b}function R(b,E,P){return b[0]=E[0]-P[0],b[1]=E[1]-P[1],b[2]=E[2]-P[2],b[3]=E[3]-P[3],b[4]=E[4]-P[4],b[5]=E[5]-P[5],b[6]=E[6]-P[6],b[7]=E[7]-P[7],b[8]=E[8]-P[8],b[9]=E[9]-P[9],b[10]=E[10]-P[10],b[11]=E[11]-P[11],b[12]=E[12]-P[12],b[13]=E[13]-P[13],b[14]=E[14]-P[14],b[15]=E[15]-P[15],b}return re.perspective=B,re.ortho=I,re.mul=y,re.sub=R,re}var _e,ve={},Pe={};function Ee(){if(_e)return Pe;function A(F){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},A(F)}_e=1,Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.create=d,Pe.clone=function(F){var D=new s.ARRAY_TYPE(3);return D[0]=F[0],D[1]=F[1],D[2]=F[2],D},Pe.length=y,Pe.fromValues=function(F,D,V){var H=new s.ARRAY_TYPE(3);return H[0]=F,H[1]=D,H[2]=V,H},Pe.copy=function(F,D){return F[0]=D[0],F[1]=D[1],F[2]=D[2],F},Pe.set=function(F,D,V,H){return F[0]=D,F[1]=V,F[2]=H,F},Pe.add=function(F,D,V){return F[0]=D[0]+V[0],F[1]=D[1]+V[1],F[2]=D[2]+V[2],F},Pe.subtract=f,Pe.multiply=v,Pe.divide=B,Pe.ceil=function(F,D){return F[0]=Math.ceil(D[0]),F[1]=Math.ceil(D[1]),F[2]=Math.ceil(D[2]),F},Pe.floor=function(F,D){return F[0]=Math.floor(D[0]),F[1]=Math.floor(D[1]),F[2]=Math.floor(D[2]),F},Pe.min=function(F,D,V){return F[0]=Math.min(D[0],V[0]),F[1]=Math.min(D[1],V[1]),F[2]=Math.min(D[2],V[2]),F},Pe.max=function(F,D,V){return F[0]=Math.max(D[0],V[0]),F[1]=Math.max(D[1],V[1]),F[2]=Math.max(D[2],V[2]),F},Pe.round=function(F,D){return F[0]=Math.round(D[0]),F[1]=Math.round(D[1]),F[2]=Math.round(D[2]),F},Pe.scale=function(F,D,V){return F[0]=D[0]*V,F[1]=D[1]*V,F[2]=D[2]*V,F},Pe.scaleAndAdd=function(F,D,V,H){return F[0]=D[0]+V[0]*H,F[1]=D[1]+V[1]*H,F[2]=D[2]+V[2]*H,F},Pe.distance=I,Pe.squaredDistance=R,Pe.squaredLength=b,Pe.negate=function(F,D){return F[0]=-D[0],F[1]=-D[1],F[2]=-D[2],F},Pe.inverse=function(F,D){return F[0]=1/D[0],F[1]=1/D[1],F[2]=1/D[2],F},Pe.normalize=function(F,D){var V=D[0],H=D[1],Z=D[2],J=V*V+H*H+Z*Z;return J>0&&(J=1/Math.sqrt(J)),F[0]=D[0]*J,F[1]=D[1]*J,F[2]=D[2]*J,F},Pe.dot=E,Pe.cross=function(F,D,V){var H=D[0],Z=D[1],J=D[2],G=V[0],te=V[1],oe=V[2];return F[0]=Z*oe-J*te,F[1]=J*G-H*oe,F[2]=H*te-Z*G,F},Pe.lerp=function(F,D,V,H){var Z=D[0],J=D[1],G=D[2];return F[0]=Z+H*(V[0]-Z),F[1]=J+H*(V[1]-J),F[2]=G+H*(V[2]-G),F},Pe.hermite=function(F,D,V,H,Z,J){var G=J*J,te=G*(2*J-3)+1,oe=G*(J-2)+J,pe=G*(J-1),we=G*(3-2*J);return F[0]=D[0]*te+V[0]*oe+H[0]*pe+Z[0]*we,F[1]=D[1]*te+V[1]*oe+H[1]*pe+Z[1]*we,F[2]=D[2]*te+V[2]*oe+H[2]*pe+Z[2]*we,F},Pe.bezier=function(F,D,V,H,Z,J){var G=1-J,te=G*G,oe=J*J,pe=te*G,we=3*J*te,Ce=3*oe*G,xe=oe*J;return F[0]=D[0]*pe+V[0]*we+H[0]*Ce+Z[0]*xe,F[1]=D[1]*pe+V[1]*we+H[1]*Ce+Z[1]*xe,F[2]=D[2]*pe+V[2]*we+H[2]*Ce+Z[2]*xe,F},Pe.random=function(F,D){D=D||1;var V=2*s.RANDOM()*Math.PI,H=2*s.RANDOM()-1,Z=Math.sqrt(1-H*H)*D;return F[0]=Math.cos(V)*Z,F[1]=Math.sin(V)*Z,F[2]=H*D,F},Pe.transformMat4=function(F,D,V){var H=D[0],Z=D[1],J=D[2],G=V[3]*H+V[7]*Z+V[11]*J+V[15];return F[0]=(V[0]*H+V[4]*Z+V[8]*J+V[12])/(G=G||1),F[1]=(V[1]*H+V[5]*Z+V[9]*J+V[13])/G,F[2]=(V[2]*H+V[6]*Z+V[10]*J+V[14])/G,F},Pe.transformMat3=function(F,D,V){var H=D[0],Z=D[1],J=D[2];return F[0]=H*V[0]+Z*V[3]+J*V[6],F[1]=H*V[1]+Z*V[4]+J*V[7],F[2]=H*V[2]+Z*V[5]+J*V[8],F},Pe.transformQuat=function(F,D,V){var H=V[0],Z=V[1],J=V[2],G=D[0],te=D[1],oe=D[2],pe=Z*oe-J*te,we=J*G-H*oe,Ce=H*te-Z*G,xe=Z*Ce-J*we,De=J*pe-H*Ce,Ie=H*we-Z*pe,Oe=2*V[3];return we*=Oe,Ce*=Oe,De*=2,Ie*=2,F[0]=G+(pe*=Oe)+(xe*=2),F[1]=te+we+De,F[2]=oe+Ce+Ie,F},Pe.rotateX=function(F,D,V,H){var Z=[],J=[];return Z[0]=D[0]-V[0],Z[1]=D[1]-V[1],Z[2]=D[2]-V[2],J[0]=Z[0],J[1]=Z[1]*Math.cos(H)-Z[2]*Math.sin(H),J[2]=Z[1]*Math.sin(H)+Z[2]*Math.cos(H),F[0]=J[0]+V[0],F[1]=J[1]+V[1],F[2]=J[2]+V[2],F},Pe.rotateY=function(F,D,V,H){var Z=[],J=[];return Z[0]=D[0]-V[0],Z[1]=D[1]-V[1],Z[2]=D[2]-V[2],J[0]=Z[2]*Math.sin(H)+Z[0]*Math.cos(H),J[1]=Z[1],J[2]=Z[2]*Math.cos(H)-Z[0]*Math.sin(H),F[0]=J[0]+V[0],F[1]=J[1]+V[1],F[2]=J[2]+V[2],F},Pe.rotateZ=function(F,D,V,H){var Z=[],J=[];return Z[0]=D[0]-V[0],Z[1]=D[1]-V[1],Z[2]=D[2]-V[2],J[0]=Z[0]*Math.cos(H)-Z[1]*Math.sin(H),J[1]=Z[0]*Math.sin(H)+Z[1]*Math.cos(H),J[2]=Z[2],F[0]=J[0]+V[0],F[1]=J[1]+V[1],F[2]=J[2]+V[2],F},Pe.angle=function(F,D){var V=F[0],H=F[1],Z=F[2],J=D[0],G=D[1],te=D[2],oe=Math.sqrt(V*V+H*H+Z*Z)*Math.sqrt(J*J+G*G+te*te),pe=oe&&E(F,D)/oe;return Math.acos(Math.min(Math.max(pe,-1),1))},Pe.zero=function(F){return F[0]=0,F[1]=0,F[2]=0,F},Pe.str=function(F){return"vec3("+F[0]+", "+F[1]+", "+F[2]+")"},Pe.exactEquals=function(F,D){return F[0]===D[0]&&F[1]===D[1]&&F[2]===D[2]},Pe.equals=function(F,D){var V=F[0],H=F[1],Z=F[2],J=D[0],G=D[1],te=D[2];return Math.abs(V-J)<=s.EPSILON*Math.max(1,Math.abs(V),Math.abs(J))&&Math.abs(H-G)<=s.EPSILON*Math.max(1,Math.abs(H),Math.abs(G))&&Math.abs(Z-te)<=s.EPSILON*Math.max(1,Math.abs(Z),Math.abs(te))},Pe.forEach=Pe.sqrLen=Pe.len=Pe.sqrDist=Pe.dist=Pe.div=Pe.mul=Pe.sub=void 0;var s=function(F,D){if(F&&F.__esModule)return F;if(F===null||A(F)!=="object"&&typeof F!="function")return{default:F};var V=c(void 0);if(V&&V.has(F))return V.get(F);var H={},Z=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var J in F)if(J!=="default"&&Object.prototype.hasOwnProperty.call(F,J)){var G=Z?Object.getOwnPropertyDescriptor(F,J):null;G&&(G.get||G.set)?Object.defineProperty(H,J,G):H[J]=F[J]}return H.default=F,V&&V.set(F,H),H}(z());function c(F){if(typeof WeakMap!="function")return null;var D=new WeakMap,V=new WeakMap;return(c=function(H){return H?V:D})(F)}function d(){var F=new s.ARRAY_TYPE(3);return s.ARRAY_TYPE!=Float32Array&&(F[0]=0,F[1]=0,F[2]=0),F}function y(F){return Math.hypot(F[0],F[1],F[2])}function f(F,D,V){return F[0]=D[0]-V[0],F[1]=D[1]-V[1],F[2]=D[2]-V[2],F}function v(F,D,V){return F[0]=D[0]*V[0],F[1]=D[1]*V[1],F[2]=D[2]*V[2],F}function B(F,D,V){return F[0]=D[0]/V[0],F[1]=D[1]/V[1],F[2]=D[2]/V[2],F}function I(F,D){return Math.hypot(D[0]-F[0],D[1]-F[1],D[2]-F[2])}function R(F,D){var V=D[0]-F[0],H=D[1]-F[1],Z=D[2]-F[2];return V*V+H*H+Z*Z}function b(F){var D=F[0],V=F[1],H=F[2];return D*D+V*V+H*H}function E(F,D){return F[0]*D[0]+F[1]*D[1]+F[2]*D[2]}Pe.sub=f,Pe.mul=v,Pe.div=B,Pe.dist=I,Pe.sqrDist=R,Pe.len=y,Pe.sqrLen=b;var P,T=(P=d(),function(F,D,V,H,Z,J){var G,te;for(D||(D=3),V||(V=0),te=H?Math.min(H*D+V,F.length):F.length,G=V;G<te;G+=D)P[0]=F[G],P[1]=F[G+1],P[2]=F[G+2],Z(P,P,J),F[G]=P[0],F[G+1]=P[1],F[G+2]=P[2];return F});return Pe.forEach=T,Pe}var Ht,Xt,gt={};function jt(){if(Ht)return gt;function A(T){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},A(T)}Ht=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.create=d,gt.clone=function(T){var F=new s.ARRAY_TYPE(4);return F[0]=T[0],F[1]=T[1],F[2]=T[2],F[3]=T[3],F},gt.fromValues=function(T,F,D,V){var H=new s.ARRAY_TYPE(4);return H[0]=T,H[1]=F,H[2]=D,H[3]=V,H},gt.copy=function(T,F){return T[0]=F[0],T[1]=F[1],T[2]=F[2],T[3]=F[3],T},gt.set=function(T,F,D,V,H){return T[0]=F,T[1]=D,T[2]=V,T[3]=H,T},gt.add=function(T,F,D){return T[0]=F[0]+D[0],T[1]=F[1]+D[1],T[2]=F[2]+D[2],T[3]=F[3]+D[3],T},gt.subtract=y,gt.multiply=f,gt.divide=v,gt.ceil=function(T,F){return T[0]=Math.ceil(F[0]),T[1]=Math.ceil(F[1]),T[2]=Math.ceil(F[2]),T[3]=Math.ceil(F[3]),T},gt.floor=function(T,F){return T[0]=Math.floor(F[0]),T[1]=Math.floor(F[1]),T[2]=Math.floor(F[2]),T[3]=Math.floor(F[3]),T},gt.min=function(T,F,D){return T[0]=Math.min(F[0],D[0]),T[1]=Math.min(F[1],D[1]),T[2]=Math.min(F[2],D[2]),T[3]=Math.min(F[3],D[3]),T},gt.max=function(T,F,D){return T[0]=Math.max(F[0],D[0]),T[1]=Math.max(F[1],D[1]),T[2]=Math.max(F[2],D[2]),T[3]=Math.max(F[3],D[3]),T},gt.round=function(T,F){return T[0]=Math.round(F[0]),T[1]=Math.round(F[1]),T[2]=Math.round(F[2]),T[3]=Math.round(F[3]),T},gt.scale=function(T,F,D){return T[0]=F[0]*D,T[1]=F[1]*D,T[2]=F[2]*D,T[3]=F[3]*D,T},gt.scaleAndAdd=function(T,F,D,V){return T[0]=F[0]+D[0]*V,T[1]=F[1]+D[1]*V,T[2]=F[2]+D[2]*V,T[3]=F[3]+D[3]*V,T},gt.distance=B,gt.squaredDistance=I,gt.length=R,gt.squaredLength=b,gt.negate=function(T,F){return T[0]=-F[0],T[1]=-F[1],T[2]=-F[2],T[3]=-F[3],T},gt.inverse=function(T,F){return T[0]=1/F[0],T[1]=1/F[1],T[2]=1/F[2],T[3]=1/F[3],T},gt.normalize=function(T,F){var D=F[0],V=F[1],H=F[2],Z=F[3],J=D*D+V*V+H*H+Z*Z;return J>0&&(J=1/Math.sqrt(J)),T[0]=D*J,T[1]=V*J,T[2]=H*J,T[3]=Z*J,T},gt.dot=function(T,F){return T[0]*F[0]+T[1]*F[1]+T[2]*F[2]+T[3]*F[3]},gt.cross=function(T,F,D,V){var H=D[0]*V[1]-D[1]*V[0],Z=D[0]*V[2]-D[2]*V[0],J=D[0]*V[3]-D[3]*V[0],G=D[1]*V[2]-D[2]*V[1],te=D[1]*V[3]-D[3]*V[1],oe=D[2]*V[3]-D[3]*V[2],pe=F[0],we=F[1],Ce=F[2],xe=F[3];return T[0]=we*oe-Ce*te+xe*G,T[1]=-pe*oe+Ce*J-xe*Z,T[2]=pe*te-we*J+xe*H,T[3]=-pe*G+we*Z-Ce*H,T},gt.lerp=function(T,F,D,V){var H=F[0],Z=F[1],J=F[2],G=F[3];return T[0]=H+V*(D[0]-H),T[1]=Z+V*(D[1]-Z),T[2]=J+V*(D[2]-J),T[3]=G+V*(D[3]-G),T},gt.random=function(T,F){var D,V,H,Z,J,G;F=F||1;do J=(D=2*s.RANDOM()-1)*D+(V=2*s.RANDOM()-1)*V;while(J>=1);do G=(H=2*s.RANDOM()-1)*H+(Z=2*s.RANDOM()-1)*Z;while(G>=1);var te=Math.sqrt((1-J)/G);return T[0]=F*D,T[1]=F*V,T[2]=F*H*te,T[3]=F*Z*te,T},gt.transformMat4=function(T,F,D){var V=F[0],H=F[1],Z=F[2],J=F[3];return T[0]=D[0]*V+D[4]*H+D[8]*Z+D[12]*J,T[1]=D[1]*V+D[5]*H+D[9]*Z+D[13]*J,T[2]=D[2]*V+D[6]*H+D[10]*Z+D[14]*J,T[3]=D[3]*V+D[7]*H+D[11]*Z+D[15]*J,T},gt.transformQuat=function(T,F,D){var V=F[0],H=F[1],Z=F[2],J=D[0],G=D[1],te=D[2],oe=D[3],pe=oe*V+G*Z-te*H,we=oe*H+te*V-J*Z,Ce=oe*Z+J*H-G*V,xe=-J*V-G*H-te*Z;return T[0]=pe*oe+xe*-J+we*-te-Ce*-G,T[1]=we*oe+xe*-G+Ce*-J-pe*-te,T[2]=Ce*oe+xe*-te+pe*-G-we*-J,T[3]=F[3],T},gt.zero=function(T){return T[0]=0,T[1]=0,T[2]=0,T[3]=0,T},gt.str=function(T){return"vec4("+T[0]+", "+T[1]+", "+T[2]+", "+T[3]+")"},gt.exactEquals=function(T,F){return T[0]===F[0]&&T[1]===F[1]&&T[2]===F[2]&&T[3]===F[3]},gt.equals=function(T,F){var D=T[0],V=T[1],H=T[2],Z=T[3],J=F[0],G=F[1],te=F[2],oe=F[3];return Math.abs(D-J)<=s.EPSILON*Math.max(1,Math.abs(D),Math.abs(J))&&Math.abs(V-G)<=s.EPSILON*Math.max(1,Math.abs(V),Math.abs(G))&&Math.abs(H-te)<=s.EPSILON*Math.max(1,Math.abs(H),Math.abs(te))&&Math.abs(Z-oe)<=s.EPSILON*Math.max(1,Math.abs(Z),Math.abs(oe))},gt.forEach=gt.sqrLen=gt.len=gt.sqrDist=gt.dist=gt.div=gt.mul=gt.sub=void 0;var s=function(T,F){if(T&&T.__esModule)return T;if(T===null||A(T)!=="object"&&typeof T!="function")return{default:T};var D=c(void 0);if(D&&D.has(T))return D.get(T);var V={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Z in T)if(Z!=="default"&&Object.prototype.hasOwnProperty.call(T,Z)){var J=H?Object.getOwnPropertyDescriptor(T,Z):null;J&&(J.get||J.set)?Object.defineProperty(V,Z,J):V[Z]=T[Z]}return V.default=T,D&&D.set(T,V),V}(z());function c(T){if(typeof WeakMap!="function")return null;var F=new WeakMap,D=new WeakMap;return(c=function(V){return V?D:F})(T)}function d(){var T=new s.ARRAY_TYPE(4);return s.ARRAY_TYPE!=Float32Array&&(T[0]=0,T[1]=0,T[2]=0,T[3]=0),T}function y(T,F,D){return T[0]=F[0]-D[0],T[1]=F[1]-D[1],T[2]=F[2]-D[2],T[3]=F[3]-D[3],T}function f(T,F,D){return T[0]=F[0]*D[0],T[1]=F[1]*D[1],T[2]=F[2]*D[2],T[3]=F[3]*D[3],T}function v(T,F,D){return T[0]=F[0]/D[0],T[1]=F[1]/D[1],T[2]=F[2]/D[2],T[3]=F[3]/D[3],T}function B(T,F){return Math.hypot(F[0]-T[0],F[1]-T[1],F[2]-T[2],F[3]-T[3])}function I(T,F){var D=F[0]-T[0],V=F[1]-T[1],H=F[2]-T[2],Z=F[3]-T[3];return D*D+V*V+H*H+Z*Z}function R(T){return Math.hypot(T[0],T[1],T[2],T[3])}function b(T){var F=T[0],D=T[1],V=T[2],H=T[3];return F*F+D*D+V*V+H*H}gt.sub=y,gt.mul=f,gt.div=v,gt.dist=B,gt.sqrDist=I,gt.len=R,gt.sqrLen=b;var E,P=(E=d(),function(T,F,D,V,H,Z){var J,G;for(F||(F=4),D||(D=0),G=V?Math.min(V*F+D,T.length):T.length,J=D;J<G;J+=F)E[0]=T[J],E[1]=T[J+1],E[2]=T[J+2],E[3]=T[J+3],H(E,E,Z),T[J]=E[0],T[J+1]=E[1],T[J+2]=E[2],T[J+3]=E[3];return T});return gt.forEach=P,gt}function Mt(){if(Xt)return ve;function A(Ie){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Oe){return typeof Oe}:function(Oe){return Oe&&typeof Symbol=="function"&&Oe.constructor===Symbol&&Oe!==Symbol.prototype?"symbol":typeof Oe},A(Ie)}Xt=1,Object.defineProperty(ve,"__esModule",{value:!0}),ve.create=B,ve.identity=function(Ie){return Ie[0]=0,Ie[1]=0,Ie[2]=0,Ie[3]=1,Ie},ve.setAxisAngle=I,ve.getAxisAngle=function(Ie,Oe){var Ke=2*Math.acos(Oe[3]),Ze=Math.sin(Ke/2);return Ze>s.EPSILON?(Ie[0]=Oe[0]/Ze,Ie[1]=Oe[1]/Ze,Ie[2]=Oe[2]/Ze):(Ie[0]=1,Ie[1]=0,Ie[2]=0),Ke},ve.getAngle=function(Ie,Oe){var Ke=D(Ie,Oe);return Math.acos(2*Ke*Ke-1)},ve.multiply=R,ve.rotateX=function(Ie,Oe,Ke){Ke*=.5;var Ze=Oe[0],Ye=Oe[1],et=Oe[2],at=Oe[3],rt=Math.sin(Ke),_t=Math.cos(Ke);return Ie[0]=Ze*_t+at*rt,Ie[1]=Ye*_t+et*rt,Ie[2]=et*_t-Ye*rt,Ie[3]=at*_t-Ze*rt,Ie},ve.rotateY=function(Ie,Oe,Ke){Ke*=.5;var Ze=Oe[0],Ye=Oe[1],et=Oe[2],at=Oe[3],rt=Math.sin(Ke),_t=Math.cos(Ke);return Ie[0]=Ze*_t-et*rt,Ie[1]=Ye*_t+at*rt,Ie[2]=et*_t+Ze*rt,Ie[3]=at*_t-Ye*rt,Ie},ve.rotateZ=function(Ie,Oe,Ke){Ke*=.5;var Ze=Oe[0],Ye=Oe[1],et=Oe[2],at=Oe[3],rt=Math.sin(Ke),_t=Math.cos(Ke);return Ie[0]=Ze*_t+Ye*rt,Ie[1]=Ye*_t-Ze*rt,Ie[2]=et*_t+at*rt,Ie[3]=at*_t-et*rt,Ie},ve.calculateW=function(Ie,Oe){var Ke=Oe[0],Ze=Oe[1],Ye=Oe[2];return Ie[0]=Ke,Ie[1]=Ze,Ie[2]=Ye,Ie[3]=Math.sqrt(Math.abs(1-Ke*Ke-Ze*Ze-Ye*Ye)),Ie},ve.exp=b,ve.ln=E,ve.pow=function(Ie,Oe,Ke){return E(Ie,Oe),F(Ie,Ie,Ke),b(Ie,Ie),Ie},ve.slerp=P,ve.random=function(Ie){var Oe=s.RANDOM(),Ke=s.RANDOM(),Ze=s.RANDOM(),Ye=Math.sqrt(1-Oe),et=Math.sqrt(Oe);return Ie[0]=Ye*Math.sin(2*Math.PI*Ke),Ie[1]=Ye*Math.cos(2*Math.PI*Ke),Ie[2]=et*Math.sin(2*Math.PI*Ze),Ie[3]=et*Math.cos(2*Math.PI*Ze),Ie},ve.invert=function(Ie,Oe){var Ke=Oe[0],Ze=Oe[1],Ye=Oe[2],et=Oe[3],at=Ke*Ke+Ze*Ze+Ye*Ye+et*et,rt=at?1/at:0;return Ie[0]=-Ke*rt,Ie[1]=-Ze*rt,Ie[2]=-Ye*rt,Ie[3]=et*rt,Ie},ve.conjugate=function(Ie,Oe){return Ie[0]=-Oe[0],Ie[1]=-Oe[1],Ie[2]=-Oe[2],Ie[3]=Oe[3],Ie},ve.fromMat3=T,ve.fromEuler=function(Ie,Oe,Ke,Ze){var Ye=.5*Math.PI/180;Oe*=Ye,Ke*=Ye,Ze*=Ye;var et=Math.sin(Oe),at=Math.cos(Oe),rt=Math.sin(Ke),_t=Math.cos(Ke),Tt=Math.sin(Ze),dt=Math.cos(Ze);return Ie[0]=et*_t*dt-at*rt*Tt,Ie[1]=at*rt*dt+et*_t*Tt,Ie[2]=at*_t*Tt-et*rt*dt,Ie[3]=at*_t*dt+et*rt*Tt,Ie},ve.str=function(Ie){return"quat("+Ie[0]+", "+Ie[1]+", "+Ie[2]+", "+Ie[3]+")"},ve.setAxes=ve.sqlerp=ve.rotationTo=ve.equals=ve.exactEquals=ve.normalize=ve.sqrLen=ve.squaredLength=ve.len=ve.length=ve.lerp=ve.dot=ve.scale=ve.mul=ve.add=ve.set=ve.copy=ve.fromValues=ve.clone=void 0;var s=v(z()),c=v(ye()),d=v(Ee()),y=v(jt());function f(Ie){if(typeof WeakMap!="function")return null;var Oe=new WeakMap,Ke=new WeakMap;return(f=function(Ze){return Ze?Ke:Oe})(Ie)}function v(Ie,Oe){if(Ie&&Ie.__esModule)return Ie;if(Ie===null||A(Ie)!=="object"&&typeof Ie!="function")return{default:Ie};var Ke=f(Oe);if(Ke&&Ke.has(Ie))return Ke.get(Ie);var Ze={},Ye=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var et in Ie)if(et!=="default"&&Object.prototype.hasOwnProperty.call(Ie,et)){var at=Ye?Object.getOwnPropertyDescriptor(Ie,et):null;at&&(at.get||at.set)?Object.defineProperty(Ze,et,at):Ze[et]=Ie[et]}return Ze.default=Ie,Ke&&Ke.set(Ie,Ze),Ze}function B(){var Ie=new s.ARRAY_TYPE(4);return s.ARRAY_TYPE!=Float32Array&&(Ie[0]=0,Ie[1]=0,Ie[2]=0),Ie[3]=1,Ie}function I(Ie,Oe,Ke){Ke*=.5;var Ze=Math.sin(Ke);return Ie[0]=Ze*Oe[0],Ie[1]=Ze*Oe[1],Ie[2]=Ze*Oe[2],Ie[3]=Math.cos(Ke),Ie}function R(Ie,Oe,Ke){var Ze=Oe[0],Ye=Oe[1],et=Oe[2],at=Oe[3],rt=Ke[0],_t=Ke[1],Tt=Ke[2],dt=Ke[3];return Ie[0]=Ze*dt+at*rt+Ye*Tt-et*_t,Ie[1]=Ye*dt+at*_t+et*rt-Ze*Tt,Ie[2]=et*dt+at*Tt+Ze*_t-Ye*rt,Ie[3]=at*dt-Ze*rt-Ye*_t-et*Tt,Ie}function b(Ie,Oe){var Ke=Oe[0],Ze=Oe[1],Ye=Oe[2],et=Oe[3],at=Math.sqrt(Ke*Ke+Ze*Ze+Ye*Ye),rt=Math.exp(et),_t=at>0?rt*Math.sin(at)/at:0;return Ie[0]=Ke*_t,Ie[1]=Ze*_t,Ie[2]=Ye*_t,Ie[3]=rt*Math.cos(at),Ie}function E(Ie,Oe){var Ke=Oe[0],Ze=Oe[1],Ye=Oe[2],et=Oe[3],at=Math.sqrt(Ke*Ke+Ze*Ze+Ye*Ye),rt=at>0?Math.atan2(at,et)/at:0;return Ie[0]=Ke*rt,Ie[1]=Ze*rt,Ie[2]=Ye*rt,Ie[3]=.5*Math.log(Ke*Ke+Ze*Ze+Ye*Ye+et*et),Ie}function P(Ie,Oe,Ke,Ze){var Ye,et,at,rt,_t,Tt=Oe[0],dt=Oe[1],Zt=Oe[2],Qt=Oe[3],Lt=Ke[0],Pt=Ke[1],yr=Ke[2],qt=Ke[3];return(et=Tt*Lt+dt*Pt+Zt*yr+Qt*qt)<0&&(et=-et,Lt=-Lt,Pt=-Pt,yr=-yr,qt=-qt),1-et>s.EPSILON?(Ye=Math.acos(et),at=Math.sin(Ye),rt=Math.sin((1-Ze)*Ye)/at,_t=Math.sin(Ze*Ye)/at):(rt=1-Ze,_t=Ze),Ie[0]=rt*Tt+_t*Lt,Ie[1]=rt*dt+_t*Pt,Ie[2]=rt*Zt+_t*yr,Ie[3]=rt*Qt+_t*qt,Ie}function T(Ie,Oe){var Ke,Ze=Oe[0]+Oe[4]+Oe[8];if(Ze>0)Ke=Math.sqrt(Ze+1),Ie[3]=.5*Ke,Ie[0]=(Oe[5]-Oe[7])*(Ke=.5/Ke),Ie[1]=(Oe[6]-Oe[2])*Ke,Ie[2]=(Oe[1]-Oe[3])*Ke;else{var Ye=0;Oe[4]>Oe[0]&&(Ye=1),Oe[8]>Oe[3*Ye+Ye]&&(Ye=2);var et=(Ye+1)%3,at=(Ye+2)%3;Ke=Math.sqrt(Oe[3*Ye+Ye]-Oe[3*et+et]-Oe[3*at+at]+1),Ie[Ye]=.5*Ke,Ie[3]=(Oe[3*et+at]-Oe[3*at+et])*(Ke=.5/Ke),Ie[et]=(Oe[3*et+Ye]+Oe[3*Ye+et])*Ke,Ie[at]=(Oe[3*at+Ye]+Oe[3*Ye+at])*Ke}return Ie}ve.clone=y.clone,ve.fromValues=y.fromValues,ve.copy=y.copy,ve.set=y.set,ve.add=y.add,ve.mul=R;var F=y.scale;ve.scale=F;var D=y.dot;ve.dot=D,ve.lerp=y.lerp;var V=y.length;ve.length=V,ve.len=V;var H=y.squaredLength;ve.squaredLength=H,ve.sqrLen=H;var Z=y.normalize;ve.normalize=Z,ve.exactEquals=y.exactEquals,ve.equals=y.equals;var J,G,te,oe=(J=d.create(),G=d.fromValues(1,0,0),te=d.fromValues(0,1,0),function(Ie,Oe,Ke){var Ze=d.dot(Oe,Ke);return Ze<-.999999?(d.cross(J,G,Oe),d.len(J)<1e-6&&d.cross(J,te,Oe),d.normalize(J,J),I(Ie,J,Math.PI),Ie):Ze>.999999?(Ie[0]=0,Ie[1]=0,Ie[2]=0,Ie[3]=1,Ie):(d.cross(J,Oe,Ke),Ie[0]=J[0],Ie[1]=J[1],Ie[2]=J[2],Ie[3]=1+Ze,Z(Ie,Ie))});ve.rotationTo=oe;var pe,we,Ce=(pe=B(),we=B(),function(Ie,Oe,Ke,Ze,Ye,et){return P(pe,Oe,Ye,et),P(we,Ke,Ze,et),P(Ie,pe,we,2*et*(1-et)),Ie});ve.sqlerp=Ce;var xe,De=(xe=c.create(),function(Ie,Oe,Ke,Ze){return xe[0]=Ke[0],xe[3]=Ke[1],xe[6]=Ke[2],xe[1]=Ze[0],xe[4]=Ze[1],xe[7]=Ze[2],xe[2]=-Oe[0],xe[5]=-Oe[1],xe[8]=-Oe[2],Z(Ie,T(Ie,xe))});return ve.setAxes=De,ve}var Yt,ht={};function lr(){if(Yt)return ht;function A(P){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},A(P)}Yt=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.create=function(){var P=new s.ARRAY_TYPE(8);return s.ARRAY_TYPE!=Float32Array&&(P[0]=0,P[1]=0,P[2]=0,P[4]=0,P[5]=0,P[6]=0,P[7]=0),P[3]=1,P},ht.clone=function(P){var T=new s.ARRAY_TYPE(8);return T[0]=P[0],T[1]=P[1],T[2]=P[2],T[3]=P[3],T[4]=P[4],T[5]=P[5],T[6]=P[6],T[7]=P[7],T},ht.fromValues=function(P,T,F,D,V,H,Z,J){var G=new s.ARRAY_TYPE(8);return G[0]=P,G[1]=T,G[2]=F,G[3]=D,G[4]=V,G[5]=H,G[6]=Z,G[7]=J,G},ht.fromRotationTranslationValues=function(P,T,F,D,V,H,Z){var J=new s.ARRAY_TYPE(8);J[0]=P,J[1]=T,J[2]=F,J[3]=D;var G=.5*V,te=.5*H,oe=.5*Z;return J[4]=G*D+te*F-oe*T,J[5]=te*D+oe*P-G*F,J[6]=oe*D+G*T-te*P,J[7]=-G*P-te*T-oe*F,J},ht.fromRotationTranslation=v,ht.fromTranslation=function(P,T){return P[0]=0,P[1]=0,P[2]=0,P[3]=1,P[4]=.5*T[0],P[5]=.5*T[1],P[6]=.5*T[2],P[7]=0,P},ht.fromRotation=function(P,T){return P[0]=T[0],P[1]=T[1],P[2]=T[2],P[3]=T[3],P[4]=0,P[5]=0,P[6]=0,P[7]=0,P},ht.fromMat4=function(P,T){var F=c.create();d.getRotation(F,T);var D=new s.ARRAY_TYPE(3);return d.getTranslation(D,T),v(P,F,D),P},ht.copy=B,ht.identity=function(P){return P[0]=0,P[1]=0,P[2]=0,P[3]=1,P[4]=0,P[5]=0,P[6]=0,P[7]=0,P},ht.set=function(P,T,F,D,V,H,Z,J,G){return P[0]=T,P[1]=F,P[2]=D,P[3]=V,P[4]=H,P[5]=Z,P[6]=J,P[7]=G,P},ht.getDual=function(P,T){return P[0]=T[4],P[1]=T[5],P[2]=T[6],P[3]=T[7],P},ht.setDual=function(P,T){return P[4]=T[0],P[5]=T[1],P[6]=T[2],P[7]=T[3],P},ht.getTranslation=function(P,T){var F=T[4],D=T[5],V=T[6],H=T[7],Z=-T[0],J=-T[1],G=-T[2],te=T[3];return P[0]=2*(F*te+H*Z+D*G-V*J),P[1]=2*(D*te+H*J+V*Z-F*G),P[2]=2*(V*te+H*G+F*J-D*Z),P},ht.translate=function(P,T,F){var D=T[0],V=T[1],H=T[2],Z=T[3],J=.5*F[0],G=.5*F[1],te=.5*F[2],oe=T[4],pe=T[5],we=T[6],Ce=T[7];return P[0]=D,P[1]=V,P[2]=H,P[3]=Z,P[4]=Z*J+V*te-H*G+oe,P[5]=Z*G+H*J-D*te+pe,P[6]=Z*te+D*G-V*J+we,P[7]=-D*J-V*G-H*te+Ce,P},ht.rotateX=function(P,T,F){var D=-T[0],V=-T[1],H=-T[2],Z=T[3],J=T[4],G=T[5],te=T[6],oe=T[7],pe=J*Z+oe*D+G*H-te*V,we=G*Z+oe*V+te*D-J*H,Ce=te*Z+oe*H+J*V-G*D,xe=oe*Z-J*D-G*V-te*H;return c.rotateX(P,T,F),P[4]=pe*(Z=P[3])+xe*(D=P[0])+we*(H=P[2])-Ce*(V=P[1]),P[5]=we*Z+xe*V+Ce*D-pe*H,P[6]=Ce*Z+xe*H+pe*V-we*D,P[7]=xe*Z-pe*D-we*V-Ce*H,P},ht.rotateY=function(P,T,F){var D=-T[0],V=-T[1],H=-T[2],Z=T[3],J=T[4],G=T[5],te=T[6],oe=T[7],pe=J*Z+oe*D+G*H-te*V,we=G*Z+oe*V+te*D-J*H,Ce=te*Z+oe*H+J*V-G*D,xe=oe*Z-J*D-G*V-te*H;return c.rotateY(P,T,F),P[4]=pe*(Z=P[3])+xe*(D=P[0])+we*(H=P[2])-Ce*(V=P[1]),P[5]=we*Z+xe*V+Ce*D-pe*H,P[6]=Ce*Z+xe*H+pe*V-we*D,P[7]=xe*Z-pe*D-we*V-Ce*H,P},ht.rotateZ=function(P,T,F){var D=-T[0],V=-T[1],H=-T[2],Z=T[3],J=T[4],G=T[5],te=T[6],oe=T[7],pe=J*Z+oe*D+G*H-te*V,we=G*Z+oe*V+te*D-J*H,Ce=te*Z+oe*H+J*V-G*D,xe=oe*Z-J*D-G*V-te*H;return c.rotateZ(P,T,F),P[4]=pe*(Z=P[3])+xe*(D=P[0])+we*(H=P[2])-Ce*(V=P[1]),P[5]=we*Z+xe*V+Ce*D-pe*H,P[6]=Ce*Z+xe*H+pe*V-we*D,P[7]=xe*Z-pe*D-we*V-Ce*H,P},ht.rotateByQuatAppend=function(P,T,F){var D=F[0],V=F[1],H=F[2],Z=F[3],J=T[0],G=T[1],te=T[2],oe=T[3];return P[0]=J*Z+oe*D+G*H-te*V,P[1]=G*Z+oe*V+te*D-J*H,P[2]=te*Z+oe*H+J*V-G*D,P[3]=oe*Z-J*D-G*V-te*H,P[4]=(J=T[4])*Z+(oe=T[7])*D+(G=T[5])*H-(te=T[6])*V,P[5]=G*Z+oe*V+te*D-J*H,P[6]=te*Z+oe*H+J*V-G*D,P[7]=oe*Z-J*D-G*V-te*H,P},ht.rotateByQuatPrepend=function(P,T,F){var D=T[0],V=T[1],H=T[2],Z=T[3],J=F[0],G=F[1],te=F[2],oe=F[3];return P[0]=D*oe+Z*J+V*te-H*G,P[1]=V*oe+Z*G+H*J-D*te,P[2]=H*oe+Z*te+D*G-V*J,P[3]=Z*oe-D*J-V*G-H*te,P[4]=D*(oe=F[7])+Z*(J=F[4])+V*(te=F[6])-H*(G=F[5]),P[5]=V*oe+Z*G+H*J-D*te,P[6]=H*oe+Z*te+D*G-V*J,P[7]=Z*oe-D*J-V*G-H*te,P},ht.rotateAroundAxis=function(P,T,F,D){if(Math.abs(D)<s.EPSILON)return B(P,T);var V=Math.hypot(F[0],F[1],F[2]);D*=.5;var H=Math.sin(D),Z=H*F[0]/V,J=H*F[1]/V,G=H*F[2]/V,te=Math.cos(D),oe=T[0],pe=T[1],we=T[2],Ce=T[3];P[0]=oe*te+Ce*Z+pe*G-we*J,P[1]=pe*te+Ce*J+we*Z-oe*G,P[2]=we*te+Ce*G+oe*J-pe*Z,P[3]=Ce*te-oe*Z-pe*J-we*G;var xe=T[4],De=T[5],Ie=T[6],Oe=T[7];return P[4]=xe*te+Oe*Z+De*G-Ie*J,P[5]=De*te+Oe*J+Ie*Z-xe*G,P[6]=Ie*te+Oe*G+xe*J-De*Z,P[7]=Oe*te-xe*Z-De*J-Ie*G,P},ht.add=function(P,T,F){return P[0]=T[0]+F[0],P[1]=T[1]+F[1],P[2]=T[2]+F[2],P[3]=T[3]+F[3],P[4]=T[4]+F[4],P[5]=T[5]+F[5],P[6]=T[6]+F[6],P[7]=T[7]+F[7],P},ht.multiply=I,ht.scale=function(P,T,F){return P[0]=T[0]*F,P[1]=T[1]*F,P[2]=T[2]*F,P[3]=T[3]*F,P[4]=T[4]*F,P[5]=T[5]*F,P[6]=T[6]*F,P[7]=T[7]*F,P},ht.lerp=function(P,T,F,D){var V=1-D;return R(T,F)<0&&(D=-D),P[0]=T[0]*V+F[0]*D,P[1]=T[1]*V+F[1]*D,P[2]=T[2]*V+F[2]*D,P[3]=T[3]*V+F[3]*D,P[4]=T[4]*V+F[4]*D,P[5]=T[5]*V+F[5]*D,P[6]=T[6]*V+F[6]*D,P[7]=T[7]*V+F[7]*D,P},ht.invert=function(P,T){var F=E(T);return P[0]=-T[0]/F,P[1]=-T[1]/F,P[2]=-T[2]/F,P[3]=T[3]/F,P[4]=-T[4]/F,P[5]=-T[5]/F,P[6]=-T[6]/F,P[7]=T[7]/F,P},ht.conjugate=function(P,T){return P[0]=-T[0],P[1]=-T[1],P[2]=-T[2],P[3]=T[3],P[4]=-T[4],P[5]=-T[5],P[6]=-T[6],P[7]=T[7],P},ht.normalize=function(P,T){var F=E(T);if(F>0){F=Math.sqrt(F);var D=T[0]/F,V=T[1]/F,H=T[2]/F,Z=T[3]/F,J=T[4],G=T[5],te=T[6],oe=T[7],pe=D*J+V*G+H*te+Z*oe;P[0]=D,P[1]=V,P[2]=H,P[3]=Z,P[4]=(J-D*pe)/F,P[5]=(G-V*pe)/F,P[6]=(te-H*pe)/F,P[7]=(oe-Z*pe)/F}return P},ht.str=function(P){return"quat2("+P[0]+", "+P[1]+", "+P[2]+", "+P[3]+", "+P[4]+", "+P[5]+", "+P[6]+", "+P[7]+")"},ht.exactEquals=function(P,T){return P[0]===T[0]&&P[1]===T[1]&&P[2]===T[2]&&P[3]===T[3]&&P[4]===T[4]&&P[5]===T[5]&&P[6]===T[6]&&P[7]===T[7]},ht.equals=function(P,T){var F=P[0],D=P[1],V=P[2],H=P[3],Z=P[4],J=P[5],G=P[6],te=P[7],oe=T[0],pe=T[1],we=T[2],Ce=T[3],xe=T[4],De=T[5],Ie=T[6],Oe=T[7];return Math.abs(F-oe)<=s.EPSILON*Math.max(1,Math.abs(F),Math.abs(oe))&&Math.abs(D-pe)<=s.EPSILON*Math.max(1,Math.abs(D),Math.abs(pe))&&Math.abs(V-we)<=s.EPSILON*Math.max(1,Math.abs(V),Math.abs(we))&&Math.abs(H-Ce)<=s.EPSILON*Math.max(1,Math.abs(H),Math.abs(Ce))&&Math.abs(Z-xe)<=s.EPSILON*Math.max(1,Math.abs(Z),Math.abs(xe))&&Math.abs(J-De)<=s.EPSILON*Math.max(1,Math.abs(J),Math.abs(De))&&Math.abs(G-Ie)<=s.EPSILON*Math.max(1,Math.abs(G),Math.abs(Ie))&&Math.abs(te-Oe)<=s.EPSILON*Math.max(1,Math.abs(te),Math.abs(Oe))},ht.sqrLen=ht.squaredLength=ht.len=ht.length=ht.dot=ht.mul=ht.setReal=ht.getReal=void 0;var s=f(z()),c=f(Mt()),d=f(de());function y(P){if(typeof WeakMap!="function")return null;var T=new WeakMap,F=new WeakMap;return(y=function(D){return D?F:T})(P)}function f(P,T){if(P&&P.__esModule)return P;if(P===null||A(P)!=="object"&&typeof P!="function")return{default:P};var F=y(T);if(F&&F.has(P))return F.get(P);var D={},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var H in P)if(H!=="default"&&Object.prototype.hasOwnProperty.call(P,H)){var Z=V?Object.getOwnPropertyDescriptor(P,H):null;Z&&(Z.get||Z.set)?Object.defineProperty(D,H,Z):D[H]=P[H]}return D.default=P,F&&F.set(P,D),D}function v(P,T,F){var D=.5*F[0],V=.5*F[1],H=.5*F[2],Z=T[0],J=T[1],G=T[2],te=T[3];return P[0]=Z,P[1]=J,P[2]=G,P[3]=te,P[4]=D*te+V*G-H*J,P[5]=V*te+H*Z-D*G,P[6]=H*te+D*J-V*Z,P[7]=-D*Z-V*J-H*G,P}function B(P,T){return P[0]=T[0],P[1]=T[1],P[2]=T[2],P[3]=T[3],P[4]=T[4],P[5]=T[5],P[6]=T[6],P[7]=T[7],P}function I(P,T,F){var D=T[0],V=T[1],H=T[2],Z=T[3],J=F[4],G=F[5],te=F[6],oe=F[7],pe=T[4],we=T[5],Ce=T[6],xe=T[7],De=F[0],Ie=F[1],Oe=F[2],Ke=F[3];return P[0]=D*Ke+Z*De+V*Oe-H*Ie,P[1]=V*Ke+Z*Ie+H*De-D*Oe,P[2]=H*Ke+Z*Oe+D*Ie-V*De,P[3]=Z*Ke-D*De-V*Ie-H*Oe,P[4]=D*oe+Z*J+V*te-H*G+pe*Ke+xe*De+we*Oe-Ce*Ie,P[5]=V*oe+Z*G+H*J-D*te+we*Ke+xe*Ie+Ce*De-pe*Oe,P[6]=H*oe+Z*te+D*G-V*J+Ce*Ke+xe*Oe+pe*Ie-we*De,P[7]=Z*oe-D*J-V*G-H*te+xe*Ke-pe*De-we*Ie-Ce*Oe,P}ht.getReal=c.copy,ht.setReal=c.copy,ht.mul=I;var R=c.dot;ht.dot=R;var b=c.length;ht.length=b,ht.len=b;var E=c.squaredLength;return ht.squaredLength=E,ht.sqrLen=E,ht}var ir,$t,Vt={};function Dr(){if(ir)return Vt;function A(T){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},A(T)}ir=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.create=d,Vt.clone=function(T){var F=new s.ARRAY_TYPE(2);return F[0]=T[0],F[1]=T[1],F},Vt.fromValues=function(T,F){var D=new s.ARRAY_TYPE(2);return D[0]=T,D[1]=F,D},Vt.copy=function(T,F){return T[0]=F[0],T[1]=F[1],T},Vt.set=function(T,F,D){return T[0]=F,T[1]=D,T},Vt.add=function(T,F,D){return T[0]=F[0]+D[0],T[1]=F[1]+D[1],T},Vt.subtract=y,Vt.multiply=f,Vt.divide=v,Vt.ceil=function(T,F){return T[0]=Math.ceil(F[0]),T[1]=Math.ceil(F[1]),T},Vt.floor=function(T,F){return T[0]=Math.floor(F[0]),T[1]=Math.floor(F[1]),T},Vt.min=function(T,F,D){return T[0]=Math.min(F[0],D[0]),T[1]=Math.min(F[1],D[1]),T},Vt.max=function(T,F,D){return T[0]=Math.max(F[0],D[0]),T[1]=Math.max(F[1],D[1]),T},Vt.round=function(T,F){return T[0]=Math.round(F[0]),T[1]=Math.round(F[1]),T},Vt.scale=function(T,F,D){return T[0]=F[0]*D,T[1]=F[1]*D,T},Vt.scaleAndAdd=function(T,F,D,V){return T[0]=F[0]+D[0]*V,T[1]=F[1]+D[1]*V,T},Vt.distance=B,Vt.squaredDistance=I,Vt.length=R,Vt.squaredLength=b,Vt.negate=function(T,F){return T[0]=-F[0],T[1]=-F[1],T},Vt.inverse=function(T,F){return T[0]=1/F[0],T[1]=1/F[1],T},Vt.normalize=function(T,F){var D=F[0],V=F[1],H=D*D+V*V;return H>0&&(H=1/Math.sqrt(H)),T[0]=F[0]*H,T[1]=F[1]*H,T},Vt.dot=function(T,F){return T[0]*F[0]+T[1]*F[1]},Vt.cross=function(T,F,D){var V=F[0]*D[1]-F[1]*D[0];return T[0]=T[1]=0,T[2]=V,T},Vt.lerp=function(T,F,D,V){var H=F[0],Z=F[1];return T[0]=H+V*(D[0]-H),T[1]=Z+V*(D[1]-Z),T},Vt.random=function(T,F){F=F||1;var D=2*s.RANDOM()*Math.PI;return T[0]=Math.cos(D)*F,T[1]=Math.sin(D)*F,T},Vt.transformMat2=function(T,F,D){var V=F[0],H=F[1];return T[0]=D[0]*V+D[2]*H,T[1]=D[1]*V+D[3]*H,T},Vt.transformMat2d=function(T,F,D){var V=F[0],H=F[1];return T[0]=D[0]*V+D[2]*H+D[4],T[1]=D[1]*V+D[3]*H+D[5],T},Vt.transformMat3=function(T,F,D){var V=F[0],H=F[1];return T[0]=D[0]*V+D[3]*H+D[6],T[1]=D[1]*V+D[4]*H+D[7],T},Vt.transformMat4=function(T,F,D){var V=F[0],H=F[1];return T[0]=D[0]*V+D[4]*H+D[12],T[1]=D[1]*V+D[5]*H+D[13],T},Vt.rotate=function(T,F,D,V){var H=F[0]-D[0],Z=F[1]-D[1],J=Math.sin(V),G=Math.cos(V);return T[0]=H*G-Z*J+D[0],T[1]=H*J+Z*G+D[1],T},Vt.angle=function(T,F){var D=T[0],V=T[1],H=F[0],Z=F[1],J=Math.sqrt(D*D+V*V)*Math.sqrt(H*H+Z*Z);return Math.acos(Math.min(Math.max(J&&(D*H+V*Z)/J,-1),1))},Vt.zero=function(T){return T[0]=0,T[1]=0,T},Vt.str=function(T){return"vec2("+T[0]+", "+T[1]+")"},Vt.exactEquals=function(T,F){return T[0]===F[0]&&T[1]===F[1]},Vt.equals=function(T,F){var D=T[0],V=T[1],H=F[0],Z=F[1];return Math.abs(D-H)<=s.EPSILON*Math.max(1,Math.abs(D),Math.abs(H))&&Math.abs(V-Z)<=s.EPSILON*Math.max(1,Math.abs(V),Math.abs(Z))},Vt.forEach=Vt.sqrLen=Vt.sqrDist=Vt.dist=Vt.div=Vt.mul=Vt.sub=Vt.len=void 0;var s=function(T,F){if(T&&T.__esModule)return T;if(T===null||A(T)!=="object"&&typeof T!="function")return{default:T};var D=c(void 0);if(D&&D.has(T))return D.get(T);var V={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Z in T)if(Z!=="default"&&Object.prototype.hasOwnProperty.call(T,Z)){var J=H?Object.getOwnPropertyDescriptor(T,Z):null;J&&(J.get||J.set)?Object.defineProperty(V,Z,J):V[Z]=T[Z]}return V.default=T,D&&D.set(T,V),V}(z());function c(T){if(typeof WeakMap!="function")return null;var F=new WeakMap,D=new WeakMap;return(c=function(V){return V?D:F})(T)}function d(){var T=new s.ARRAY_TYPE(2);return s.ARRAY_TYPE!=Float32Array&&(T[0]=0,T[1]=0),T}function y(T,F,D){return T[0]=F[0]-D[0],T[1]=F[1]-D[1],T}function f(T,F,D){return T[0]=F[0]*D[0],T[1]=F[1]*D[1],T}function v(T,F,D){return T[0]=F[0]/D[0],T[1]=F[1]/D[1],T}function B(T,F){return Math.hypot(F[0]-T[0],F[1]-T[1])}function I(T,F){var D=F[0]-T[0],V=F[1]-T[1];return D*D+V*V}function R(T){return Math.hypot(T[0],T[1])}function b(T){var F=T[0],D=T[1];return F*F+D*D}Vt.len=R,Vt.sub=y,Vt.mul=f,Vt.div=v,Vt.dist=B,Vt.sqrDist=I,Vt.sqrLen=b;var E,P=(E=d(),function(T,F,D,V,H,Z){var J,G;for(F||(F=2),D||(D=0),G=V?Math.min(V*F+D,T.length):T.length,J=D;J<G;J+=F)E[0]=T[J],E[1]=T[J+1],H(E,E,Z),T[J]=E[0],T[J+1]=E[1];return T});return Vt.forEach=P,Vt}function kr(){if($t)return M;function A(T){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},A(T)}$t=1,Object.defineProperty(M,"__esModule",{value:!0}),M.vec4=M.vec3=M.vec2=M.quat2=M.quat=M.mat4=M.mat3=M.mat2d=M.mat2=M.glMatrix=void 0;var s=P(z());M.glMatrix=s;var c=P($());M.mat2=c;var d=P(ie());M.mat2d=d;var y=P(ye());M.mat3=y;var f=P(de());M.mat4=f;var v=P(Mt());M.quat=v;var B=P(lr());M.quat2=B;var I=P(Dr());M.vec2=I;var R=P(Ee());M.vec3=R;var b=P(jt());function E(T){if(typeof WeakMap!="function")return null;var F=new WeakMap,D=new WeakMap;return(E=function(V){return V?D:F})(T)}function P(T,F){if(T&&T.__esModule)return T;if(T===null||A(T)!=="object"&&typeof T!="function")return{default:T};var D=E(F);if(D&&D.has(T))return D.get(T);var V={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Z in T)if(Z!=="default"&&Object.prototype.hasOwnProperty.call(T,Z)){var J=H?Object.getOwnPropertyDescriptor(T,Z):null;J&&(J.get||J.set)?Object.defineProperty(V,Z,J):V[Z]=T[Z]}return V.default=T,D&&D.set(T,V),V}return M.vec4=b,M}var Zr,Lr,Ao,ji,Qe=kr(),no=function(){if(Lr)return Zr;function A(s,c,d,y){this.cx=3*s,this.bx=3*(d-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(y-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=c,this.p2x=d,this.p2y=y}return Lr=1,Zr=A,A.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,c){if(c===void 0&&(c=1e-6),s<0)return 0;if(s>1)return 1;for(var d=s,y=0;y<8;y++){var f=this.sampleCurveX(d)-s;if(Math.abs(f)<c)return d;var v=this.sampleCurveDerivativeX(d);if(Math.abs(v)<1e-6)break;d-=f/v}var B=0,I=1;for(d=s,y=0;y<20&&(f=this.sampleCurveX(d),!(Math.abs(f-s)<c));y++)s>f?B=d:I=d,d=.5*(I-B)+B;return d},solve:function(s,c){return this.sampleCurveY(this.solveCurveX(s,c))}},Zr}(),Io=_(no);function ms(){if(ji)return Ao;function A(s,c){this.x=s,this.y=c}return ji=1,Ao=A,A.prototype={clone:function(){return new A(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,c){return this.clone()._rotateAround(s,c)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var c=s.x-this.x,d=s.y-this.y;return c*c+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,c){return Math.atan2(this.x*c-this.y*s,this.x*s+this.y*c)},_matMult:function(s){var c=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=c,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var c=Math.cos(s),d=Math.sin(s),y=d*this.x+c*this.y;return this.x=c*this.x-d*this.y,this.y=y,this},_rotateAround:function(s,c){var d=Math.cos(s),y=Math.sin(s),f=c.y+y*(this.x-c.x)+d*(this.y-c.y);return this.x=c.x+d*(this.x-c.x)-y*(this.y-c.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},A.convert=function(s){return s instanceof A?s:Array.isArray(s)?new A(s[0],s[1]):s},Ao}var Ot=_(ms());function Bs(A,s){if(Array.isArray(A)){if(!Array.isArray(s)||A.length!==s.length)return!1;for(let c=0;c<A.length;c++)if(!Bs(A[c],s[c]))return!1;return!0}if(typeof A=="object"&&A!==null&&s!==null){if(typeof s!="object"||Object.keys(A).length!==Object.keys(s).length)return!1;for(const c in A)if(!Bs(A[c],s[c]))return!1;return!0}return A===s}const Oi=Math.PI/180,Fo=180/Math.PI;function Pr(A){return A*Oi}function nn(A){return A*Fo}const Ji=[[0,0],[1,0],[1,1],[0,1]];function Po(A){if(A<=0)return 0;if(A>=1)return 1;const s=A*A,c=s*A;return 4*(A<.5?c:3*(A-s)+c-.75)}function io(A,s,c,d){const y=new Io(A,s,c,d);return function(f){return y.solve(f)}}const Cs=io(.25,.1,.25,1);function Er(A,s,c){return Math.min(c,Math.max(s,A))}function Di(A,s,c){return(c=Er((c-A)/(s-A),0,1))*c*(3-2*c)}function yi(A,s,c){const d=c-s,y=((A-s)%d+d)%d+s;return y===s?c:y}function Go(A,s,c){if(!A.length)return c(null,[]);let d=A.length;const y=new Array(A.length);let f=null;A.forEach((v,B)=>{s(v,(I,R)=>{I&&(f=I),y[B]=R,--d==0&&c(f,y)})})}function xo(A,...s){for(const c of s)for(const d in c)A[d]=c[d];return A}let es=1;function wc(){return es++}function Ra(A){return A<=1?1:Math.pow(2,Math.ceil(Math.log(A)/Math.LN2))}function Wl(A,s){A.forEach(c=>{s[c]&&(s[c]=s[c].bind(s))})}function ka(A,s){return A.indexOf(s,A.length-s.length)!==-1}function ts(A,s,c){const d={};for(const y in A)d[y]=s.call(this,A[y],y,A);return d}function tl(A,s,c){const d={};for(const y in A)s.call(this,A[y],y,A)&&(d[y]=A[y]);return d}function Qs(A){return Array.isArray(A)?A.map(Qs):typeof A=="object"&&A?ts(A,Qs):A}const _l={};function an(A){_l[A]||(typeof console<"u"&&console.warn(A),_l[A]=!0)}function Hs(A,s,c){return(c.y-A.y)*(s.x-A.x)>(s.y-A.y)*(c.x-A.x)}function js(A){let s=0;for(let c,d,y=0,f=A.length,v=f-1;y<f;v=y++)c=A[y],d=A[v],s+=(d.x-c.x)*(c.y+d.y);return s}function rs([A,s,c]){const d=Pr(s+90),y=Pr(c);return{x:A*Math.cos(d)*Math.sin(y),y:A*Math.sin(d)*Math.sin(y),z:A*Math.cos(y),azimuthal:s,polar:c}}function ns(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function sa(A){const s={};if(A.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(c,d,y,f)=>{const v=y||f;return s[d]=!v||v.toLowerCase(),""}),s["max-age"]){const c=parseInt(s["max-age"],10);isNaN(c)?delete s["max-age"]:s["max-age"]=c}return s}let ql,xl=null;function bl(A,s){return[A[4*s],A[4*s+1],A[4*s+2],A[4*s+3]]}function ct(A,s,c,d){for(;s<c;){const y=s+c>>1;A[y]<d?s=y+1:c=y}return s}function he(A,s,c,d){for(;s<c;){const y=s+c>>1;A[y]<=d?s=y+1:c=y}return s}function ge(A){return A>0?1/(1.001-A):1+A}function ke(A){return A>0?1-1/(1.001-A):-A}const Ne={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(ql==null){const A=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{ql=r.API_URL_REGEX!=null?new RegExp(r.API_URL_REGEX):A}catch{ql=A}}return ql},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!Ne.API_URL)return null;try{const A=new URL(Ne.API_URL);return A.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":A.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function Ue(A){return Ne.API_URL_REGEX.test(A)}function Je(A){return Ne.API_SPRITE_REGEX.test(A)}let lt,tt,ut,vt,ft,Rt;function Kt(){return lt==null&&(lt=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),lt}const Wt={now:()=>vt!==void 0?vt:performance.now(),setNow(A){vt=A},restoreNow(){vt=void 0},frame(A){const s=requestAnimationFrame(A);return{cancel:()=>cancelAnimationFrame(s)}},getImageData(A,s=0){const{width:c,height:d}=A;ft||(ft=document.createElement("canvas"));const y=ft.getContext("2d",{willReadFrequently:!0});if(!y)throw new Error("failed to create canvas 2d context");return(c>ft.width||d>ft.height)&&(ft.width=c,ft.height=d),y.clearRect(-s,-s,c+2*s,d+2*s),y.drawImage(A,0,0,c,d),y.getImageData(-s,-s,c+2*s,d+2*s)},resolveURL:A=>(tt||(tt=document.createElement("a")),tt.href=A,tt.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(ut==null&&(ut=window.matchMedia("(prefers-reduced-motion: reduce)")),ut.matches)},hasCanvasFingerprintNoise(){if(Rt!==void 0)return Rt;if(!Kt())return Rt=!1,!1;const A=new OffscreenCanvas(85,1),s=A.getContext("2d",{willReadFrequently:!0});let c=0;for(let y=0;y<A.width;++y)s.fillStyle=`rgba(${c++},${c++},${c++}, 255)`,s.fillRect(y,0,1,1);const d=s.getImageData(0,0,A.width,A.height);c=0;for(let y=0;y<d.data.length;++y)if(y%4!=3&&c++!==d.data[y])return Rt=!0,!0;return Rt=!1,!1}};function vr(A,s){const c=A.indexOf("?");if(c<0)return`${A}?${new URLSearchParams(s).toString()}`;const d=new URLSearchParams(A.slice(c));for(const y in s)d.set(y,s[y]);return`${A.slice(0,c)}?${d.toString()}`}function wr(A,s={persistentParams:[]}){const c=A.indexOf("?");if(c<0)return A;const d=new URLSearchParams,y=new URLSearchParams(A.slice(c));for(const v of s.persistentParams){const B=y.get(v);B&&d.set(v,B)}const f=d.toString();return`${A.slice(0,c)}${f.length>0?`?${f}`:""}`}const Sr="mapbox-tiles";let br=500,yn=50;const xn=["language","worldview","jobid"];let Rr,vn;function On(){try{return caches}catch{}}function Ui(){const A=On();A&&Rr==null&&(Rr=A.open(Sr))}let vi=1/0;const zi={supported:!1,testSupport:function(A){!dh&&aa&&(Xl?wu(A):Mo=A)}};let Mo,aa,dh=!1,Xl=!1;const Zl=typeof self<"u"?self:{};function wu(A){const s=A.createTexture();A.bindTexture(A.TEXTURE_2D,s);try{if(A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,aa),A.isContextLost())return;zi.supported=!0}catch{}A.deleteTexture(s),dh=!0}Zl.document&&(aa=Zl.document.createElement("img"),aa.onload=function(){Mo&&wu(Mo),Mo=null,Xl=!0},aa.onerror=function(){dh=!0,Mo=null},aa.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const wl={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(wl);class Bu extends Error{constructor(s,c,d){c===401&&Ue(d)&&(s+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(s),this.status=c,this.url=d}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const fh=ns()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,Bc=function(A,s){if(!(/^file:/.test(c=A.url)||/^file:/.test(fh())&&!/^\w+:/.test(c))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(d,y){const f=new AbortController,v=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,referrer:fh(),referrerPolicy:d.referrerPolicy,signal:f.signal});let B=!1,I=!1;const R=(b=v.url).indexOf("sku=")>0&&Ue(b);var b;d.type==="json"&&v.headers.set("Accept","application/json");const E=(T,F,D)=>{if(I)return;if(T&&T.message!=="SecurityError"&&an(T.toString()),F&&D)return P(F);const V=Date.now();fetch(v).then(H=>{if(H.ok){const Z=R?H.clone():null;return P(H,Z,V)}return y(new Bu(H.statusText,H.status,d.url))}).catch(H=>{H.name!=="AbortError"&&y(new Error(`${H.message} ${d.url}`))})},P=(T,F,D)=>{(d.type==="arrayBuffer"?T.arrayBuffer():d.type==="json"?T.json():T.text()).then(V=>{I||(F&&D&&function(H,Z,J){if(Ui(),Rr==null)return;const G=sa(Z.headers.get("Cache-Control")||"");if(G["no-store"])return;const te={status:Z.status,statusText:Z.statusText,headers:new Headers};Z.headers.forEach((we,Ce)=>te.headers.set(Ce,we)),G["max-age"]&&te.headers.set("Expires",new Date(J+1e3*G["max-age"]).toUTCString());const oe=te.headers.get("Expires");if(!oe||new Date(oe).getTime()-J<42e4)return;let pe=wr(H.url,{persistentParams:xn});if(Z.status===206){const we=H.headers.get("Range");if(!we)return;te.status=200,pe=vr(pe,{range:we})}(function(we,Ce){if(vn===void 0)try{new Response(new ReadableStream),vn=!0}catch{vn=!1}vn?Ce(we.body):we.blob().then(Ce)})(Z,we=>{const Ce=new Response((xe=Z.status)!==200&&xe!==404&&[101,103,204,205,304].includes(xe)?null:we,te);var xe;Ui(),Rr!=null&&Rr.then(De=>De.put(pe,Ce)).catch(De=>an(De.message))})}(v,F,D),B=!0,y(null,V,T.headers.get("Cache-Control"),T.headers.get("Expires")))}).catch(V=>{I||y(new Error(V.message))})};return R?function(T,F){if(Ui(),Rr==null)return F(null);Rr.then(D=>{let V=wr(T.url,{persistentParams:xn});const H=T.headers.get("Range");H&&(V=vr(V,{range:H})),D.match(V).then(Z=>{const J=function(G){if(!G)return!1;const te=new Date(G.headers.get("Expires")||0),oe=sa(G.headers.get("Cache-Control")||"");return te>Date.now()&&!oe["no-cache"]}(Z);D.delete(V),J&&D.put(V,Z.clone()),F(null,Z,J)}).catch(F)}).catch(F)}(v,E):E(null,null),{cancel:()=>{I=!0,B||f.abort()}}}(A,s);if(ns()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",A,s,void 0,!0)}var c;return function(d,y){const f=new XMLHttpRequest;f.open(d.method||"GET",d.url,!0),d.type==="arrayBuffer"&&(f.responseType="arraybuffer");for(const v in d.headers)f.setRequestHeader(v,d.headers[v]);return d.type==="json"&&(f.responseType="text",f.setRequestHeader("Accept","application/json")),f.withCredentials=d.credentials==="include",f.onerror=()=>{y(new Error(f.statusText))},f.onload=()=>{if((f.status>=200&&f.status<300||f.status===0)&&f.response!==null){let v=f.response;if(d.type==="json")try{v=JSON.parse(f.response)}catch(B){return y(B)}y(null,v,f.getResponseHeader("Cache-Control"),f.getResponseHeader("Expires"))}else y(new Bu(f.statusText,f.status,d.url))},f.send(d.body),{cancel:()=>f.abort()}}(A,s)},Cc=function(A,s){return Bc(xo(A,{type:"arrayBuffer"}),s)};function Gs(A){const s=document.createElement("a");return s.href=A,s.protocol===location.protocol&&s.host===location.host}const Ks="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ws,Ro;Ws=[],Ro=0;const bo=function(A,s){if(zi.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*"),Ro>=Ne.MAX_PARALLEL_IMAGE_REQUESTS){const f={requestParameters:A,callback:s,cancelled:!1,cancel(){this.cancelled=!0}};return Ws.push(f),f}Ro++;let c=!1;const d=()=>{if(!c)for(c=!0,Ro--;Ws.length&&Ro<Ne.MAX_PARALLEL_IMAGE_REQUESTS;){const f=Ws.shift(),{requestParameters:v,callback:B,cancelled:I}=f;I||(f.cancel=bo(v,B).cancel)}},y=Cc(A,(f,v,B,I)=>{d(),f?s(f):v&&(self.createImageBitmap?function(R,b){const E=new Blob([new Uint8Array(R)],{type:"image/png"});createImageBitmap(E).then(P=>{b(null,P)}).catch(P=>{b(new Error(`Could not load image because of ${P.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(v,(R,b)=>s(R,b,B,I)):function(R,b){const E=new Image;E.onload=()=>{b(null,E),URL.revokeObjectURL(E.src),E.onload=null,requestAnimationFrame(()=>{E.src=Ks})},E.onerror=()=>b(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const P=new Blob([new Uint8Array(R)],{type:"image/png"});E.src=R.byteLength?URL.createObjectURL(P):Ks}(v,(R,b)=>s(R,b,B,I)))});return{cancel:()=>{y.cancel(),d()}}};var Ss,Sc,Yl,la={exports:{}},ci={exports:{}},Cu={exports:{}},Ec=function(){if(Yl)return la.exports;Yl=1;var A=(Ss||(Ss=1,ci.exports=function(c,d){var y,f,v,B,I,R,b,E;for(f=c.length-(y=3&c.length),v=d,I=3432918353,R=461845907,E=0;E<f;)b=255&c.charCodeAt(E)|(255&c.charCodeAt(++E))<<8|(255&c.charCodeAt(++E))<<16|(255&c.charCodeAt(++E))<<24,++E,v=27492+(65535&(B=5*(65535&(v=(v^=b=(65535&(b=(b=(65535&b)*I+(((b>>>16)*I&65535)<<16)&4294967295)<<15|b>>>17))*R+(((b>>>16)*R&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(B>>>16)&65535)<<16);switch(b=0,y){case 3:b^=(255&c.charCodeAt(E+2))<<16;case 2:b^=(255&c.charCodeAt(E+1))<<8;case 1:v^=b=(65535&(b=(b=(65535&(b^=255&c.charCodeAt(E)))*I+(((b>>>16)*I&65535)<<16)&4294967295)<<15|b>>>17))*R+(((b>>>16)*R&65535)<<16)&4294967295}return v^=c.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0}),ci.exports),s=(Sc||(Sc=1,Cu.exports=function(c,d){for(var y,f=c.length,v=d^f,B=0;f>=4;)y=1540483477*(65535&(y=255&c.charCodeAt(B)|(255&c.charCodeAt(++B))<<8|(255&c.charCodeAt(++B))<<16|(255&c.charCodeAt(++B))<<24))+((1540483477*(y>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(y=1540483477*(65535&(y^=y>>>24))+((1540483477*(y>>>16)&65535)<<16)),f-=4,++B;switch(f){case 3:v^=(255&c.charCodeAt(B+2))<<16;case 2:v^=(255&c.charCodeAt(B+1))<<8;case 1:v=1540483477*(65535&(v^=255&c.charCodeAt(B)))+((1540483477*(v>>>16)&65535)<<16)}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0}),Cu.exports);return la.exports=A,la.exports.murmur3=A,la.exports.murmur2=s,la.exports}(),wo=_(Ec);class Bl{constructor(s,...c){xo(this,c[0]||{}),this.type=s}}class Tc extends Bl{constructor(s,c={}){super("error",xo({error:s},c))}}function Cl(A,s,c){c[A]&&c[A].indexOf(s)!==-1||(c[A]=c[A]||[],c[A].push(s))}function fA(A,s,c){if(c&&c[A]){const d=c[A].indexOf(s);d!==-1&&c[A].splice(d,1)}}class Ic{on(s,c){return this._listeners=this._listeners||{},Cl(s,c,this._listeners),this}off(s,c){return fA(s,c,this._listeners),fA(s,c,this._oneTimeListeners),this}once(s,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},Cl(s,c,this._oneTimeListeners),this):new Promise(d=>this.once(s,d))}fire(s,c){const d=typeof s=="string"?new Bl(s,c):s,y=d.type;if(this.listens(y)){d.target=this;const f=this._listeners&&this._listeners[y]?this._listeners[y].slice():[];for(const I of f)I.call(this,d);const v=this._oneTimeListeners&&this._oneTimeListeners[y]?this._oneTimeListeners[y].slice():[];for(const I of v)fA(y,I,this._oneTimeListeners),I.call(this,d);const B=this._eventedParent;B&&(xo(d,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),B.fire(d))}else d instanceof Tc&&console.error(d.error);return this}listens(s){return!!(this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s))}setEventedParent(s,c){return this._eventedParent=s,this._eventedParentData=c,this}}var pA,Kr={},qs=function(){if(pA)return Kr;pA=1;var A={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function s(f){return(f=Math.round(f))<0?0:f>255?255:f}function c(f){return s(f[f.length-1]==="%"?parseFloat(f)/100*255:parseInt(f))}function d(f){return(v=f[f.length-1]==="%"?parseFloat(f)/100:parseFloat(f))<0?0:v>1?1:v;var v}function y(f,v,B){return B<0?B+=1:B>1&&(B-=1),6*B<1?f+(v-f)*B*6:2*B<1?v:3*B<2?f+(v-f)*(2/3-B)*6:f}try{Kr.parseCSSColor=function(f){var v,B=f.replace(/ /g,"").toLowerCase();if(B in A)return A[B].slice();if(B[0]==="#")return B.length===4?(v=parseInt(B.substr(1),16))>=0&&v<=4095?[(3840&v)>>4|(3840&v)>>8,240&v|(240&v)>>4,15&v|(15&v)<<4,1]:null:B.length===7&&(v=parseInt(B.substr(1),16))>=0&&v<=16777215?[(16711680&v)>>16,(65280&v)>>8,255&v,1]:null;var I=B.indexOf("("),R=B.indexOf(")");if(I!==-1&&R+1===B.length){var b=B.substr(0,I),E=B.substr(I+1,R-(I+1)).split(","),P=1;switch(b){case"rgba":if(E.length!==4)return null;P=d(E.pop());case"rgb":return E.length!==3?null:[c(E[0]),c(E[1]),c(E[2]),P];case"hsla":if(E.length!==4)return null;P=d(E.pop());case"hsl":if(E.length!==3)return null;var T=(parseFloat(E[0])%360+360)%360/360,F=d(E[1]),D=d(E[2]),V=D<=.5?D*(F+1):D+F-D*F,H=2*D-V;return[s(255*y(H,V,T+1/3)),s(255*y(H,V,T)),s(255*y(H,V,T-1/3)),P];default:return null}}return null}}catch{}return Kr}();class An{constructor(s,c,d,y=1){this.r=s,this.g=c,this.b=d,this.a=y}static parse(s){if(!s)return;if(s instanceof An)return s;if(typeof s!="string")return;const c=qs.parseCSSColor(s);return c?new An(c[0]/255*c[3],c[1]/255*c[3],c[2]/255*c[3],c[3]):void 0}toString(){const[s,c,d,y]=this.a===0?[0,0,0,0]:[255*this.r/this.a,255*this.g/this.a,255*this.b/this.a,this.a];return`rgba(${Math.round(s)},${Math.round(c)},${Math.round(d)},${y})`}toRenderColor(s){const{r:c,g:d,b:y,a:f}=this;return new ph(s,c,d,y,f)}}class ph{constructor(s,c,d,y,f){if(s){const v=s.image.height,B=v*v;c=f===0?0:c/f*(v-1),d=f===0?0:d/f*(v-1),y=f===0?0:y/f*(v-1);const I=Math.floor(c),R=Math.floor(d),b=Math.floor(y),E=Math.ceil(c),P=Math.ceil(d),T=Math.ceil(y),F=c-I,D=d-R,V=y-b,H=s.image.data,Z=4*(I+R*B+b*v),J=4*(I+R*B+T*v),G=4*(I+P*B+b*v),te=4*(I+P*B+T*v),oe=4*(E+R*B+b*v),pe=4*(E+R*B+T*v),we=4*(E+P*B+b*v),Ce=4*(E+P*B+T*v);if(Z<0||Ce>=H.length)throw new Error("out of range");this.r=_r(_r(_r(H[Z],H[J],V),_r(H[G],H[te],V),D),_r(_r(H[oe],H[pe],V),_r(H[we],H[Ce],V),D),F)/255*f,this.g=_r(_r(_r(H[Z+1],H[J+1],V),_r(H[G+1],H[te+1],V),D),_r(_r(H[oe+1],H[pe+1],V),_r(H[we+1],H[Ce+1],V),D),F)/255*f,this.b=_r(_r(_r(H[Z+2],H[J+2],V),_r(H[G+2],H[te+2],V),D),_r(_r(H[oe+2],H[pe+2],V),_r(H[we+2],H[Ce+2],V),D),F)/255*f,this.a=f}else this.r=c,this.g=d,this.b=y,this.a=f}toArray(){const{r:s,g:c,b:d,a:y}=this;return y===0?[0,0,0,0]:[255*s/y,255*c/y,255*d/y,y]}toArray01(){const{r:s,g:c,b:d,a:y}=this;return y===0?[0,0,0,0]:[s/y,c/y,d/y,y]}toArray01Scaled(s){const{r:c,g:d,b:y,a:f}=this;return f===0?[0,0,0]:[c/f*s,d/f*s,y/f*s]}toArray01PremultipliedAlpha(){const{r:s,g:c,b:d,a:y}=this;return[s,c,d,y]}toArray01Linear(){const{r:s,g:c,b:d,a:y}=this;return y===0?[0,0,0,0]:[Math.pow(s/y,2.2),Math.pow(c/y,2.2),Math.pow(d/y,2.2),y]}}function _r(A,s,c){return A*(1-c)+s*c}function ca(A,s,c){return A.map((d,y)=>_r(d,s[y],c))}An.black=new An(0,0,0,1),An.white=new An(1,1,1,1),An.transparent=new An(0,0,0,0),An.red=new An(1,0,0,1),An.blue=new An(0,0,1,1);var rl=Object.freeze({__proto__:null,array:ca,color:function(A,s,c){return new An(_r(A.r,s.r,c),_r(A.g,s.g,c),_r(A.b,s.b,c),_r(A.a,s.a,c))},number:_r});function Jl(A,...s){for(const c of s)for(const d in c)A[d]=c[d];return A}class Ko extends Error{constructor(s,c){super(c),this.message=c,this.key=s}}class is{constructor(s,c=[]){this.parent=s,this.bindings={};for(const[d,y]of c)this.bindings[d]=y}concat(s){return new is(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}const ua={kind:"null"},er={kind:"number"},Yr={kind:"string"},Wr={kind:"boolean"},os={kind:"color"},oo={kind:"object"},qr={kind:"value"},Su={kind:"collator"},qe={kind:"formatted"},st={kind:"resolvedImage"};function It(A,s){return{kind:"array",itemType:A,N:s}}function cr(A){if(A.kind==="array"){const s=cr(A.itemType);return typeof A.N=="number"?`array<${s}, ${A.N}>`:A.itemType.kind==="value"?"array":`array<${s}>`}return A.kind}const Pn=[ua,er,Yr,Wr,os,qe,oo,It(qr),st];function Un(A,s){if(s.kind==="error")return null;if(A.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!Un(A.itemType,s.itemType))&&(typeof A.N!="number"||A.N===s.N))return null}else{if(A.kind===s.kind)return null;if(A.kind==="value"){for(const c of Pn)if(!Un(c,s))return null}}return`Expected ${cr(A)} but found ${cr(s)} instead.`}function Wn(A,s){return s.some(c=>c.kind===A.kind)}function un(A,s){return s.some(c=>c==="null"?A===null:c==="array"?Array.isArray(A):c==="object"?A&&!Array.isArray(A)&&typeof A=="object":c===typeof A)}class ui{constructor(s,c,d){this.sensitivity=s?c?"variant":"case":c?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,c){return this.collator.compare(s,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Qn{constructor(s,c,d,y,f){this.text=s.normalize?s.normalize():s,this.image=c,this.scale=d,this.fontStack=y,this.textColor=f}}class Jn{constructor(s){this.sections=s}static fromString(s){return new Jn([new Qn(s,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||s.image&&s.image.namePrimary.length!==0)}static factory(s){return s instanceof Jn?s:Jn.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}serialize(){const s=["format"];for(const c of this.sections){if(c.image){s.push(["image",c.image.namePrimary]);continue}s.push(c.text);const d={};c.fontStack&&(d["text-font"]=["literal",c.fontStack.split(",")]),c.scale&&(d["font-scale"]=c.scale),c.textColor&&(d["text-color"]=["rgba"].concat(c.textColor.toRenderColor(null).toArray())),s.push(d)}return s}}class fo{constructor(s){this.namePrimary=s.namePrimary,s.nameSecondary&&(this.nameSecondary=s.nameSecondary),this.available=s.available}toString(){return this.nameSecondary?`[${this.namePrimary},${this.nameSecondary}]`:this.namePrimary}static fromString(s,c){return s?new fo({namePrimary:s,nameSecondary:c,available:!1}):null}serialize(){return this.nameSecondary?["image",this.namePrimary,this.nameSecondary]:["image",this.namePrimary]}}function Sl(A,s,c,d){return typeof A=="number"&&A>=0&&A<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof c=="number"&&c>=0&&c<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[A,s,c,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[A,s,c,d]:[A,s,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ha(A){if(A===null||typeof A=="string"||typeof A=="boolean"||typeof A=="number"||A instanceof An||A instanceof ui||A instanceof Jn||A instanceof fo)return!0;if(Array.isArray(A)){for(const s of A)if(!ha(s))return!1;return!0}if(typeof A=="object"){for(const s in A)if(!ha(A[s]))return!1;return!0}return!1}function _i(A){if(A===null)return ua;if(typeof A=="string")return Yr;if(typeof A=="boolean")return Wr;if(typeof A=="number")return er;if(A instanceof An)return os;if(A instanceof ui)return Su;if(A instanceof Jn)return qe;if(A instanceof fo)return st;if(Array.isArray(A)){const s=A.length;let c;for(const d of A){const y=_i(d);if(c){if(c===y)continue;c=qr;break}c=y}return It(c||qr,s)}return oo}function Wo(A){const s=typeof A;return A===null?"":s==="string"||s==="number"||s==="boolean"?String(A):A instanceof An||A instanceof Jn||A instanceof fo?A.toString():JSON.stringify(A)}class Da{constructor(s,c){this.type=s,this.value=c}static parse(s,c){if(s.length!==2)return c.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!ha(s[1]))return c.error("invalid value");const d=s[1];let y=_i(d);const f=c.expectedType;return y.kind!=="array"||y.N!==0||!f||f.kind!=="array"||typeof f.N=="number"&&f.N!==0||(y=f),new Da(y,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof An?["rgba"].concat(this.value.toRenderColor(null).toArray()):this.value instanceof Jn?this.value.serialize():this.value}}class $i{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}}const fp={string:Yr,number:er,boolean:Wr,object:oo};class La{constructor(s,c){this.type=s,this.args=c}static parse(s,c){if(s.length<2)return c.error("Expected at least one argument.");let d,y=1;const f=s[0];if(f==="array"){let B,I;if(s.length>2){const R=s[1];if(typeof R!="string"||!(R in fp)||R==="object")return c.error('The item type argument of "array" must be one of string, number, boolean',1);B=fp[R],y++}else B=qr;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return c.error('The length argument to "array" must be a positive integer literal',2);I=s[2],y++}d=It(B,I)}else d=fp[f];const v=[];for(;y<s.length;y++){const B=c.parse(s[y],y,qr);if(!B)return null;v.push(B)}return new La(d,v)}evaluate(s){for(let c=0;c<this.args.length;c++){const d=this.args[c].evaluate(s);if(!Un(this.type,_i(d)))return d;if(c===this.args.length-1)throw new $i(`The expression ${JSON.stringify(this.args[c].serialize())} evaluated to ${cr(_i(d))} but was expected to be of type ${cr(this.type)}.`)}return null}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){const s=this.type,c=[s.kind];if(s.kind==="array"){const d=s.itemType;if(d.kind==="string"||d.kind==="number"||d.kind==="boolean"){c.push(d.kind);const y=s.N;(typeof y=="number"||this.args.length>1)&&c.push(y)}}return c.concat(this.args.map(d=>d.serialize()))}}class El{constructor(s){this.type=qe,this.sections=s}static parse(s,c){if(s.length<2)return c.error("Expected at least one argument.");const d=s[1];if(!Array.isArray(d)&&typeof d=="object")return c.error("First argument must be an image or text section.");const y=[];let f=!1;for(let v=1;v<=s.length-1;++v){const B=s[v];if(f&&typeof B=="object"&&!Array.isArray(B)){f=!1;let I=null;if(B["font-scale"]&&(I=c.parseObjectValue(B["font-scale"],v,"font-scale",er),!I))return null;let R=null;if(B["text-font"]&&(R=c.parseObjectValue(B["text-font"],v,"text-font",It(Yr)),!R))return null;let b=null;if(B["text-color"]&&(b=c.parseObjectValue(B["text-color"],v,"text-color",os),!b))return null;const E=y[y.length-1];E.scale=I,E.font=R,E.textColor=b}else{const I=c.parse(s[v],v,qr);if(!I)return null;const R=I.type.kind;if(R!=="string"&&R!=="value"&&R!=="null"&&R!=="resolvedImage")return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");f=!0,y.push({content:I,scale:null,font:null,textColor:null})}}return new El(y)}evaluate(s){return new Jn(this.sections.map(c=>{const d=c.content.evaluate(s);return _i(d)===st?new Qn("",d,null,null,null):new Qn(Wo(d),null,c.scale?c.scale.evaluate(s):null,c.font?c.font.evaluate(s).join(","):null,c.textColor?c.textColor.evaluate(s):null)}))}eachChild(s){for(const c of this.sections)s(c.content),c.scale&&s(c.scale),c.font&&s(c.font),c.textColor&&s(c.textColor)}outputDefined(){return!1}serialize(){const s=["format"];for(const c of this.sections){s.push(c.content.serialize());const d={};c.scale&&(d["font-scale"]=c.scale.serialize()),c.font&&(d["text-font"]=c.font.serialize()),c.textColor&&(d["text-color"]=c.textColor.serialize()),s.push(d)}return s}}class Fc{constructor(s,c){this.type=st,this.inputPrimary=s,this.inputSecondary=c}static parse(s,c){if(s.length<2)return c.error("Expected two or more arguments.");const d=c.parse(s[1],1,Yr);if(!d)return c.error("No image name provided.");if(s.length===2)return new Fc(d);const y=c.parse(s[2],1,Yr);return y?new Fc(d,y):c.error("Secondary image variant is not a string.")}evaluate(s){const c=fo.fromString(this.inputPrimary.evaluate(s),this.inputSecondary?this.inputSecondary.evaluate(s):void 0);return c&&s.availableImages&&(c.available=s.availableImages.indexOf(c.namePrimary)>-1,c.nameSecondary&&c.available&&s.availableImages&&(c.available=s.availableImages.indexOf(c.nameSecondary)>-1)),c}eachChild(s){s(this.inputPrimary),this.inputSecondary&&s(this.inputSecondary)}outputDefined(){return!1}serialize(){return this.inputSecondary?["image",this.inputPrimary.serialize(),this.inputSecondary.serialize()]:["image",this.inputPrimary.serialize()]}}function Pc(A){return A instanceof Number?"number":A instanceof String?"string":A instanceof Boolean?"boolean":Array.isArray(A)?"array":A===null?"null":typeof A}const mh={"to-boolean":Wr,"to-color":os,"to-number":er,"to-string":Yr};class nl{constructor(s,c){this.type=s,this.args=c}static parse(s,c){if(s.length<2)return c.error("Expected at least one argument.");const d=s[0],y=[];let f=ua;if(d==="to-array"){if(!Array.isArray(s[1]))return null;const v=s[1].length;if(c.expectedType){if(c.expectedType.kind!=="array")return c.error(`Expected ${c.expectedType.kind} but found array.`);f=It(c.expectedType.itemType,v)}else{if(!(v>0&&ha(s[1][0])))return null;f=It(_i(s[1][0]),v)}for(let B=0;B<v;B++){const I=s[1][B];let R;if(Pc(I)==="array")R=c.parse(I,void 0,f.itemType);else{const b=Pc(I);if(b!==f.itemType.kind)return c.error(`Expected ${f.itemType.kind} but found ${b}.`);R=c.registry.literal.parse(["literal",I===void 0?null:I],c)}if(!R)return null;y.push(R)}}else{if((d==="to-boolean"||d==="to-string")&&s.length!==2)return c.error("Expected one argument.");f=mh[d];for(let v=1;v<s.length;v++){const B=c.parse(s[v],v,qr);if(!B)return null;y.push(B)}}return new nl(f,y)}evaluate(s){if(this.type.kind==="boolean")return!!this.args[0].evaluate(s);if(this.type.kind==="color"){let c,d;for(const y of this.args){if(c=y.evaluate(s),d=null,c instanceof An)return c;if(typeof c=="string"){const f=s.parseColor(c);if(f)return f}else if(Array.isArray(c)&&(d=c.length<3||c.length>4?`Invalid rbga value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:Sl(c[0],c[1],c[2],c[3]),!d))return new An(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new $i(d||`Could not parse color from value '${typeof c=="string"?c:String(JSON.stringify(c))}'`)}if(this.type.kind==="number"){let c=null;for(const d of this.args){if(c=d.evaluate(s),c===null)return 0;const y=Number(c);if(!isNaN(y))return y}throw new $i(`Could not convert ${JSON.stringify(c)} to number.`)}return this.type.kind==="formatted"?Jn.fromString(Wo(this.args[0].evaluate(s))):this.type.kind==="resolvedImage"?fo.fromString(Wo(this.args[0].evaluate(s))):this.type.kind==="array"?this.args.map(c=>c.evaluate(s)):Wo(this.args[0].evaluate(s))}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){if(this.type.kind==="formatted")return new El([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Fc(this.args[0]).serialize();const s=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(c=>{s.push(c.serialize())}),s}}const sg=["Unknown","Point","LineString","Polygon"];class mA{constructor(s,c){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=s,this.options=c}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?sg[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(s){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const s=this.featureDistanceData.center,c=this.featureDistanceData.scale,{x:d,y}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(d*c-s[0])+this.featureDistanceData.bearing[1]*(y*c-s[1])}return 0}parseColor(s){let c=this._parseColorCache[s];return c||(c=this._parseColorCache[s]=An.parse(s)),c}getConfig(s){return this.options?this.options.get(s):null}}class Es{constructor(s,c,d,y,f){this.name=s,this.type=c,this._evaluate=d,this.args=y,this._overloadIndex=f}evaluate(s){if(!this._evaluate){const c=Es.definitions[this.name];this._evaluate=Array.isArray(c)?c[2]:c.overloads[this._overloadIndex][1]}return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(s=>s.serialize()))}static parse(s,c){const d=s[0],y=Es.definitions[d];if(!y)return c.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const f=Array.isArray(y)?y[0]:y.type,v=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,B=[];let I=null,R=-1;for(const[b,E]of v){if(Array.isArray(b)&&b.length!==s.length-1)continue;B.push(b),R++,I=new Ew(c.registry,c.path,null,c.scope,void 0,c._scope,c.options);const P=[];let T=!1;for(let F=1;F<s.length;F++){const D=s[F],V=Array.isArray(b)?b[F-1]:b.type,H=I.parse(D,1+P.length,V);if(!H){T=!0;break}P.push(H)}if(!T)if(Array.isArray(b)&&b.length!==P.length)I.error(`Expected ${b.length} arguments, but found ${P.length} instead.`);else{for(let F=0;F<P.length;F++){const D=Array.isArray(b)?b[F]:b.type,V=P[F];I.concat(F+1).checkSubtype(D,V.type)}if(I.errors.length===0)return new Es(d,f,E,P,R)}}if(B.length===1)c.errors.push(...I.errors);else{const b=(B.length?B:v.map(([P])=>P)).map(ag).join(" | "),E=[];for(let P=1;P<s.length;P++){const T=c.parse(s[P],1+E.length);if(!T)return null;E.push(cr(T.type))}c.error(`Expected arguments of type ${b}, but found (${E.join(", ")}) instead.`)}return null}static register(s,c){Es.definitions=c;for(const d in c)s[d]=Es}}function ag(A){return Array.isArray(A)?`(${A.map(cr).join(", ")})`:`(${cr(A.type)}...)`}class Tl{constructor(s,c,d){this.type=Su,this.locale=d,this.caseSensitive=s,this.diacriticSensitive=c}static parse(s,c){if(s.length!==2)return c.error("Expected one argument.");const d=s[1];if(typeof d!="object"||Array.isArray(d))return c.error("Collator options argument must be an object.");const y=d["case-sensitive"]===void 0?c.parse(!1,1,Wr):c.parseObjectValue(d["case-sensitive"],1,"case-sensitive",Wr);if(!y)return null;const f=d["diacritic-sensitive"]===void 0?c.parse(!1,1,Wr):c.parseObjectValue(d["diacritic-sensitive"],1,"diacritic-sensitive",Wr);if(!f)return null;let v=null;return d.locale&&(v=c.parseObjectValue(d.locale,1,"locale",Yr),!v)?null:new Tl(y,f,v)}evaluate(s){return new ui(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}serialize(){const s={};return s["case-sensitive"]=this.caseSensitive.serialize(),s["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(s.locale=this.locale.serialize()),["collator",s]}}function pp(A,s,c=0,d=A.length-1,y=Tu){for(;d>c;){if(d-c>600){const I=d-c+1,R=s-c+1,b=Math.log(I),E=.5*Math.exp(2*b/3),P=.5*Math.sqrt(b*E*(I-E)/I)*(R-I/2<0?-1:1);pp(A,s,Math.max(c,Math.floor(s-R*E/I+P)),Math.min(d,Math.floor(s+(I-R)*E/I+P)),y)}const f=A[s];let v=c,B=d;for(Eu(A,c,s),y(A[d],f)>0&&Eu(A,c,d);v<B;){for(Eu(A,v,B),v++,B--;y(A[v],f)<0;)v++;for(;y(A[B],f)>0;)B--}y(A[c],f)===0?Eu(A,c,B):(B++,Eu(A,B,d)),B<=s&&(c=B+1),s<=B&&(d=B-1)}}function Eu(A,s,c){const d=A[s];A[s]=A[c],A[c]=d}function Tu(A,s){return A<s?-1:A>s?1:0}function lg(A){let s=0;for(let c,d,y=0,f=A.length,v=f-1;y<f;v=y++)c=A[y],d=A[v],s+=(d.x-c.x)*(c.y+d.y);return s}function Mc(A,s){A[0]=Math.min(A[0],s[0]),A[1]=Math.min(A[1],s[1]),A[2]=Math.max(A[2],s[0]),A[3]=Math.max(A[3],s[1])}function ko(A,s){return!(A[0]<=s[0]||A[2]>=s[2]||A[1]<=s[1]||A[3]>=s[3])}function cg(A,s,c){const d=A[0]-s[0],y=A[1]-s[1],f=A[0]-c[0],v=A[1]-c[1];return d*v-f*y==0&&d*f<=0&&y*v<=0}function Iu(A,s,c=!1){let d=!1;for(let B=0,I=s.length;B<I;B++){const R=s[B];for(let b=0,E=R.length,P=E-1;b<E;P=b++){const T=R[P],F=R[b];if(cg(A,T,F))return c;(f=T)[1]>(y=A)[1]!=(v=F)[1]>y[1]&&y[0]<(v[0]-f[0])*(y[1]-f[1])/(v[1]-f[1])+f[0]&&(d=!d)}}var y,f,v;return d}function Fu(A,s,c,d){const y=d[0]-c[0],f=d[1]-c[1],v=(A[0]-c[0])*f-y*(A[1]-c[1]),B=(s[0]-c[0])*f-y*(s[1]-c[1]);return v>0&&B<0||v<0&&B>0}function U(A,s,c,d){return(y=[d[0]-c[0],d[1]-c[1]])[0]*(f=[s[0]-A[0],s[1]-A[1]])[1]-y[1]*f[0]!=0&&!(!Fu(A,s,c,d)||!Fu(c,d,A,s));var y,f}const ne=8192;function ue(A,s){const c=(180+A[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A[1]*Math.PI/360)))/360,y=Math.pow(2,s.z);return[Math.round(c*y*ne),Math.round(d*y*ne)]}function Se(A,s){for(let c=0;c<s.length;c++)if(Iu(A,s[c]))return!0;return!1}function Bt(A,s,c){for(const d of c)for(let y=0,f=d.length,v=f-1;y<f;v=y++)if(U(A,s,d[v],d[y]))return!0;return!1}function At(A,s){for(let c=0;c<A.length;++c)if(!Iu(A[c],s))return!1;for(let c=0;c<A.length-1;++c)if(Bt(A[c],A[c+1],s))return!1;return!0}function fr(A,s){for(let c=0;c<s.length;c++)if(At(A,s[c]))return!0;return!1}function $n(A,s,c){const d=[];for(let y=0;y<A.length;y++){const f=[];for(let v=0;v<A[y].length;v++){const B=ue(A[y][v],c);Mc(s,B),f.push(B)}d.push(f)}return d}function pr(A,s,c){const d=[];for(let y=0;y<A.length;y++){const f=$n(A[y],s,c);d.push(f)}return d}function Vn(A,s,c,d){if(A[0]<c[0]||A[0]>c[2]){const y=.5*d;let f=A[0]-c[0]>y?-d:c[0]-A[0]>y?d:0;f===0&&(f=A[0]-c[2]>y?-d:c[2]-A[0]>y?d:0),A[0]+=f}Mc(s,A)}function Do(A,s,c,d){const y=Math.pow(2,d.z)*ne,f=[d.x*ne,d.y*ne],v=[];if(!A)return v;for(const B of A)for(const I of B){const R=[I.x+f[0],I.y+f[1]];Vn(R,s,c,y),v.push(R)}return v}function qo(A,s,c,d){const y=Math.pow(2,d.z)*ne,f=[d.x*ne,d.y*ne],v=[];if(!A)return v;for(const I of A){const R=[];for(const b of I){const E=[b.x+f[0],b.y+f[1]];Mc(s,E),R.push(E)}v.push(R)}if(s[2]-s[0]<=y/2){(B=s)[0]=B[1]=1/0,B[2]=B[3]=-1/0;for(const I of v)for(const R of I)Vn(R,s,c,y)}var B;return v}class Aa{constructor(s,c){this.type=Wr,this.geojson=s,this.geometries=c}static parse(s,c){if(s.length!==2)return c.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(ha(s[1])){const d=s[1];if(d.type==="FeatureCollection")for(let y=0;y<d.features.length;++y){const f=d.features[y].geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new Aa(d,d.features[y].geometry)}else if(d.type==="Feature"){const y=d.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new Aa(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new Aa(d,d)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(c,d){const y=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],v=c.canonicalID();if(!v)return!1;if(d.type==="Polygon"){const B=$n(d.coordinates,f,v),I=Do(c.geometry(),y,f,v);if(!ko(y,f))return!1;for(const R of I)if(!Iu(R,B))return!1}if(d.type==="MultiPolygon"){const B=pr(d.coordinates,f,v),I=Do(c.geometry(),y,f,v);if(!ko(y,f))return!1;for(const R of I)if(!Se(R,B))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(c,d){const y=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],v=c.canonicalID();if(!v)return!1;if(d.type==="Polygon"){const B=$n(d.coordinates,f,v),I=qo(c.geometry(),y,f,v);if(!ko(y,f))return!1;for(const R of I)if(!At(R,B))return!1}if(d.type==="MultiPolygon"){const B=pr(d.coordinates,f,v),I=qo(c.geometry(),y,f,v);if(!ko(y,f))return!1;for(const R of I)if(!fr(R,B))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const ss={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},Bo=1/298.257223563,gh=Bo*(2-Bo),gd=Math.PI/180;class yd{static fromTile(s,c,d){const y=Math.PI*(1-2*(s+.5)/Math.pow(2,c)),f=Math.atan(.5*(Math.exp(y)-Math.exp(-y)))/gd;return new yd(f,d)}static get units(){return ss}constructor(s,c){if(s===void 0)throw new Error("No latitude given.");if(c&&!ss[c])throw new Error(`Unknown unit ${c}. Use one of: ${Object.keys(ss).join(", ")}`);const d=6378.137*gd*(c?ss[c]:1),y=Math.cos(s*gd),f=1/(1-gh*(1-y*y)),v=Math.sqrt(f);this.kx=d*v*y,this.ky=d*v*f*(1-gh)}distance(s,c){const d=Vi(s[0]-c[0])*this.kx,y=(s[1]-c[1])*this.ky;return Math.sqrt(d*d+y*y)}bearing(s,c){const d=Vi(c[0]-s[0])*this.kx;return Math.atan2(d,(c[1]-s[1])*this.ky)/gd}destination(s,c,d){const y=d*gd;return this.offset(s,Math.sin(y)*c,Math.cos(y)*c)}offset(s,c,d){return[s[0]+c/this.kx,s[1]+d/this.ky]}lineDistance(s){let c=0;for(let d=0;d<s.length-1;d++)c+=this.distance(s[d],s[d+1]);return c}area(s){let c=0;for(let d=0;d<s.length;d++){const y=s[d];for(let f=0,v=y.length,B=v-1;f<v;B=f++)c+=Vi(y[f][0]-y[B][0])*(y[f][1]+y[B][1])*(d?-1:1)}return Math.abs(c)/2*this.kx*this.ky}along(s,c){let d=0;if(c<=0)return s[0];for(let y=0;y<s.length-1;y++){const f=s[y],v=s[y+1],B=this.distance(f,v);if(d+=B,d>c)return Pu(f,v,(c-(d-B))/B)}return s[s.length-1]}pointToSegmentDistance(s,c,d){let[y,f]=c,v=Vi(d[0]-y)*this.kx,B=(d[1]-f)*this.ky;if(v!==0||B!==0){const I=(Vi(s[0]-y)*this.kx*v+(s[1]-f)*this.ky*B)/(v*v+B*B);I>1?(y=d[0],f=d[1]):I>0&&(y+=v/this.kx*I,f+=B/this.ky*I)}return v=Vi(s[0]-y)*this.kx,B=(s[1]-f)*this.ky,Math.sqrt(v*v+B*B)}pointOnLine(s,c){let d=1/0,y=s[0][0],f=s[0][1],v=0,B=0;for(let I=0;I<s.length-1;I++){let R=s[I][0],b=s[I][1],E=Vi(s[I+1][0]-R)*this.kx,P=(s[I+1][1]-b)*this.ky,T=0;E===0&&P===0||(T=(Vi(c[0]-R)*this.kx*E+(c[1]-b)*this.ky*P)/(E*E+P*P),T>1?(R=s[I+1][0],b=s[I+1][1]):T>0&&(R+=E/this.kx*T,b+=P/this.ky*T)),E=Vi(c[0]-R)*this.kx,P=(c[1]-b)*this.ky;const F=E*E+P*P;F<d&&(d=F,y=R,f=b,v=I,B=T)}return{point:[y,f],index:v,t:Math.max(0,Math.min(1,B))}}lineSlice(s,c,d){let y=this.pointOnLine(d,s),f=this.pointOnLine(d,c);if(y.index>f.index||y.index===f.index&&y.t>f.t){const R=y;y=f,f=R}const v=[y.point],B=y.index+1,I=f.index;!ug(d[B],v[0])&&B<=I&&v.push(d[B]);for(let R=B+1;R<=I;R++)v.push(d[R]);return ug(d[I],f.point)||v.push(f.point),v}lineSliceAlong(s,c,d){let y=0;const f=[];for(let v=0;v<d.length-1;v++){const B=d[v],I=d[v+1],R=this.distance(B,I);if(y+=R,y>s&&f.length===0&&f.push(Pu(B,I,(s-(y-R))/R)),y>=c)return f.push(Pu(B,I,(c-(y-R))/R)),f;y>s&&f.push(I)}return f}bufferPoint(s,c){const d=c/this.ky,y=c/this.kx;return[s[0]-y,s[1]-d,s[0]+y,s[1]+d]}bufferBBox(s,c){const d=c/this.ky,y=c/this.kx;return[s[0]-y,s[1]-d,s[2]+y,s[3]+d]}insideBBox(s,c){return Vi(s[0]-c[0])>=0&&Vi(s[0]-c[2])<=0&&s[1]>=c[1]&&s[1]<=c[3]}}function ug(A,s){return A[0]===s[0]&&A[1]===s[1]}function Pu(A,s,c){const d=Vi(s[0]-A[0]);return[A[0]+d*c,A[1]+(s[1]-A[1])*c]}function Vi(A){for(;A<-180;)A+=360;for(;A>180;)A-=360;return A}class pv{constructor(s=[],c=(d,y)=>d<y?-1:d>y?1:0){if(this.data=s,this.length=this.data.length,this.compare=c,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],c=this.data.pop();return--this.length>0&&(this.data[0]=c,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:c,compare:d}=this,y=c[s];for(;s>0;){const f=s-1>>1,v=c[f];if(d(y,v)>=0)break;c[s]=v,s=f}c[s]=y}_down(s){const{data:c,compare:d}=this,y=this.length>>1,f=c[s];for(;s<y;){let v=1+(s<<1);const B=v+1;if(B<this.length&&d(c[B],c[v])<0&&(v=B),d(c[v],f)>=0)break;c[s]=c[v],s=v}c[s]=f}}var Gt=8192;function yw(A,s){return s.dist-A.dist}const vd=100,hg=50;function Ag(A){const s=[1/0,1/0,-1/0,-1/0];if(s.length!==A.length)return!1;for(let c=0;c<s.length;c++)if(s[c]!==A[c])return!1;return!0}function dg(A){return A[1]-A[0]+1}function Mu(A,s){const c=A[1]>=A[0]&&A[1]<s;return c||console.warn("Distance Expression: Index is out of range"),c}function mv(A,s){if(A[0]>A[1])return[null,null];const c=dg(A);if(s){if(c===2)return[A,null];const d=Math.floor(c/2);return[[A[0],A[0]+d],[A[0]+d,A[1]]]}{if(c===1)return[A,null];const d=Math.floor(c/2)-1;return[[A[0],A[0]+d],[A[0]+d+1,A[1]]]}}function il(A,s){const c=[1/0,1/0,-1/0,-1/0];if(!Mu(s,A.length))return c;for(let d=s[0];d<=s[1];++d)Mc(c,A[d]);return c}function fg(A){const s=[1/0,1/0,-1/0,-1/0];for(let c=0;c<A.length;++c)for(let d=0;d<A[c].length;++d)Mc(s,A[c][d]);return s}function _d(A,s,c){if(Ag(A)||Ag(s))return NaN;let d=0,y=0;return A[2]<s[0]&&(d=s[0]-A[2]),A[0]>s[2]&&(d=A[0]-s[2]),A[1]>s[3]&&(y=A[1]-s[3]),A[3]<s[1]&&(y=s[1]-A[3]),c.distance([0,0],[d,y])}function vw(A){return 360*A-180}function _w(A){return 360/Math.PI*Math.atan(Math.exp((180-360*A)*Math.PI/180))-90}function ol(A,s){const c=Math.pow(2,s.z),d=(A.y/Gt+s.y)/c;return[vw((A.x/Gt+s.x)/c),_w(d)]}function xw(A,s){const c=[];for(let d=0;d<A.length;++d)c.push(ol(A[d],s));return c}function gv(A,s,c){const d=c.pointOnLine(s,A).point;return c.distance(A,d)}function yv(A,s,c,d,y){const f=c.slice(d[0],d[1]+1);let v=1/0;for(let B=s[0];B<=s[1];++B)if((v=Math.min(v,gv(A[B],f,y)))===0)return 0;return v}function pg(A,s,c,d,y){const f=Math.min(y.pointToSegmentDistance(A,c,d),y.pointToSegmentDistance(s,c,d)),v=Math.min(y.pointToSegmentDistance(c,A,s),y.pointToSegmentDistance(d,A,s));return Math.min(f,v)}function bw(A,s,c,d,y){if(!Mu(s,A.length)||!Mu(d,c.length))return NaN;let f=1/0;for(let v=s[0];v<s[1];++v)for(let B=d[0];B<d[1];++B){if(U(A[v],A[v+1],c[B],c[B+1]))return 0;f=Math.min(f,pg(A[v],A[v+1],c[B],c[B+1],y))}return f}function ww(A,s,c,d,y){if(!Mu(s,A.length)||!Mu(d,c.length))return NaN;let f=1/0;for(let v=s[0];v<=s[1];++v)for(let B=d[0];B<=d[1];++B)if((f=Math.min(f,y.distance(A[v],c[B])))===0)return f;return f}function Bw(A,s,c){if(Iu(A,s,!0))return 0;let d=1/0;for(const y of s){const f=y.length;if(f<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(y[0]!==y[f-1]&&(d=Math.min(d,c.pointToSegmentDistance(A,y[f-1],y[0])))===0||(d=Math.min(d,gv(A,y,c)))===0)return d}return d}function Cw(A,s,c,d){if(!Mu(s,A.length))return NaN;for(let f=s[0];f<=s[1];++f)if(Iu(A[f],c,!0))return 0;let y=1/0;for(let f=s[0];f<s[1];++f)for(const v of c)for(let B=0,I=v.length,R=I-1;B<I;R=B++){if(U(A[f],A[f+1],v[R],v[B]))return 0;y=Math.min(y,pg(A[f],A[f+1],v[R],v[B],d))}return y}function vv(A,s){for(const c of A)for(let d=0;d<=c.length-1;++d)if(Iu(c[d],s,!0))return!0;return!1}function Sw(A,s,c,d=1/0){const y=fg(A),f=fg(s);if(d!==1/0&&_d(y,f,c)>=d)return d;if(ko(y,f)){if(vv(A,s))return 0}else if(vv(s,A))return 0;let v=d;for(const B of A)for(let I=0,R=B.length,b=R-1;I<R;b=I++)for(const E of s)for(let P=0,T=E.length,F=T-1;P<T;F=P++){if(U(B[b],B[I],E[F],E[P]))return 0;v=Math.min(v,pg(B[b],B[I],E[F],E[P],c))}return v}function mp(A,s,c,d,y,f,v){if(f===null||v===null)return;const B=_d(il(d,f),il(y,v),c);B<s&&A.push({dist:B,range1:f,range2:v})}function mg(A,s,c,d,y=1/0){let f=Math.min(d.distance(A[0],c[0][0]),y);if(f===0)return f;const v=new pv([{dist:0,range1:[0,A.length-1],range2:[0,0]}],yw),B=s?hg:vd,I=fg(c);for(;v.length;){const R=v.pop();if(R.dist>=f)continue;const b=R.range1;if(dg(b)<=B){if(!Mu(b,A.length))return NaN;if(s){const E=Cw(A,b,c,d);if((f=Math.min(f,E))===0)return f}else for(let E=b[0];E<=b[1];++E){const P=Bw(A[E],c,d);if((f=Math.min(f,P))===0)return f}}else{const E=mv(b,s);if(E[0]!==null){const P=_d(il(A,E[0]),I,d);P<f&&v.push({dist:P,range1:E[0],range2:[0,0]})}if(E[1]!==null){const P=_d(il(A,E[1]),I,d);P<f&&v.push({dist:P,range1:E[1],range2:[0,0]})}}}return f}function gp(A,s,c,d,y,f=1/0){let v=Math.min(f,y.distance(A[0],c[0]));if(v===0)return v;const B=new pv([{dist:0,range1:[0,A.length-1],range2:[0,c.length-1]}],yw),I=s?hg:vd,R=d?hg:vd;for(;B.length;){const b=B.pop();if(b.dist>=v)continue;const E=b.range1,P=b.range2;if(dg(E)<=I&&dg(P)<=R){if(!Mu(E,A.length)||!Mu(P,c.length))return NaN;if(s&&d?v=Math.min(v,bw(A,E,c,P,y)):s||d?s&&!d?v=Math.min(v,yv(c,P,A,E,y)):!s&&d&&(v=Math.min(v,yv(A,E,c,P,y))):v=Math.min(v,ww(A,E,c,P,y)),v===0)return v}else{const T=mv(E,s),F=mv(P,d);mp(B,v,y,A,c,T[0],F[0]),mp(B,v,y,A,c,T[0],F[1]),mp(B,v,y,A,c,T[1],F[0]),mp(B,v,y,A,c,T[1],F[1])}}return v}function xd(A,s,c,d,y=1/0){let f=y;const v=il(A,[0,A.length-1]);for(const B of c)if(!(f!==1/0&&_d(v,il(B,[0,B.length-1]),d)>=f)&&(f=Math.min(f,gp(A,s,B,!0,d,f)),f===0))return f;return f}function yp(A,s,c,d,y=1/0){let f=y;const v=il(A,[0,A.length-1]);for(const B of c){if(f!==1/0&&_d(v,fg(B),d)>=f)continue;const I=mg(A,s,B,d,f);if(isNaN(I))return I;if((f=Math.min(f,I))===0)return f}return f}function gg(A){return A==="Point"||A==="MultiPoint"||A==="LineString"||A==="MultiLineString"||A==="Polygon"||A==="MultiPolygon"}class yh{constructor(s,c){this.type=er,this.geojson=s,this.geometries=c}static parse(s,c){if(s.length!==2)return c.error(`'distance' expression requires either one argument, but found ' ${s.length-1} instead.`);if(ha(s[1])){const d=s[1];if(d.type==="FeatureCollection"){for(let y=0;y<d.features.length;++y)if(gg(d.features[y].geometry.type))return new yh(d,d.features[y].geometry)}else if(d.type==="Feature"){if(gg(d.geometry.type))return new yh(d,d.geometry)}else if(gg(d.type))return new yh(d,d)}return c.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(s){const c=s.geometry(),d=s.canonicalID();if(c!=null&&d!=null){if(s.geometryType()==="Point")return function(y,f,v){const B=[];for(const R of y)for(const b of R)B.push(ol(b,f));const I=new yd(B[0][1],"meters");return v.type==="Point"||v.type==="MultiPoint"||v.type==="LineString"?gp(B,!1,v.type==="Point"?[v.coordinates]:v.coordinates,v.type==="LineString",I):v.type==="MultiLineString"?xd(B,!1,v.coordinates,I):v.type==="Polygon"||v.type==="MultiPolygon"?yp(B,!1,v.type==="Polygon"?[v.coordinates]:v.coordinates,I):null}(c,d,this.geometries);if(s.geometryType()==="LineString")return function(y,f,v){const B=[];for(const R of y){const b=[];for(const E of R)b.push(ol(E,f));B.push(b)}const I=new yd(B[0][0][1],"meters");if(v.type==="Point"||v.type==="MultiPoint"||v.type==="LineString")return xd(v.type==="Point"?[v.coordinates]:v.coordinates,v.type==="LineString",B,I);if(v.type==="MultiLineString"){let R=1/0;for(let b=0;b<v.coordinates.length;b++){const E=xd(v.coordinates[b],!0,B,I,R);if(isNaN(E))return E;if((R=Math.min(R,E))===0)return R}return R}if(v.type==="Polygon"||v.type==="MultiPolygon"){let R=1/0;for(let b=0;b<B.length;b++){const E=yp(B[b],!0,v.type==="Polygon"?[v.coordinates]:v.coordinates,I,R);if(isNaN(E))return E;if((R=Math.min(R,E))===0)return R}return R}return null}(c,d,this.geometries);if(s.geometryType()==="Polygon")return function(y,f,v){const B=[];for(const R of function(b,E){const P=b.length;if(P<=1)return[b];const T=[];let F,D;for(let V=0;V<P;V++){const H=lg(b[V]);H!==0&&(b[V].area=Math.abs(H),D===void 0&&(D=H<0),D===H<0?(F&&T.push(F),F=[b[V]]):F.push(b[V]))}return F&&T.push(F),T}(y)){const b=[];for(let E=0;E<R.length;++E)b.push(xw(R[E],f));B.push(b)}const I=new yd(B[0][0][0][1],"meters");if(v.type==="Point"||v.type==="MultiPoint"||v.type==="LineString")return yp(v.type==="Point"?[v.coordinates]:v.coordinates,v.type==="LineString",B,I);if(v.type==="MultiLineString"){let R=1/0;for(let b=0;b<v.coordinates.length;b++){const E=yp(v.coordinates[b],!0,B,I,R);if(isNaN(E))return E;if((R=Math.min(R,E))===0)return R}return R}return v.type==="Polygon"||v.type==="MultiPolygon"?function(R,b,E){let P=1/0;for(const T of R)for(const F of b){const D=Sw(T,F,E,P);if(isNaN(D))return D;if((P=Math.min(P,D))===0)return P}return P}(v.type==="Polygon"?[v.coordinates]:v.coordinates,B,I):null}(c,d,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function vh(A,s){switch(A){case"string":return Wo(s);case"number":return+s;case"boolean":return!!s;case"color":return An.parse(s);case"formatted":return Jn.fromString(Wo(s));case"resolvedImage":return fo.fromString(Wo(s))}return s}function dn(A,s,c,d){return d!==void 0&&(A=d*Math.round(A/d)),s!==void 0&&A<s&&(A=s),c!==void 0&&A>c&&(A=c),A}class bd{constructor(s,c,d){this.type=s,this.key=c,this.scope=d}static parse(s,c){let d=c.expectedType;if(d==null&&(d=qr),s.length<2||s.length>3)return c.error("Invalid number of arguments for 'config' expression.");const y=c.parse(s[1],1);if(!(y instanceof Da))return c.error("Key name of 'config' expression must be a string literal.");if(s.length>=3){const f=c.parse(s[2],2);return f instanceof Da?new bd(d,Wo(y.value),Wo(f.value)):c.error("Scope of 'config' expression must be a string literal.")}return new bd(d,Wo(y.value))}evaluate(s){const c=[this.key,this.scope,s.scope].filter(Boolean).join(""),d=s.getConfig(c);if(!d)return null;const{type:y,value:f,values:v,minValue:B,maxValue:I,stepValue:R}=d,b=d.default.evaluate(s);let E=b;if(f){const P=s.scope;s.scope=(P||"").split("").slice(1).join(""),E=f.evaluate(s),s.scope=P}return y&&(E=vh(y,E)),E===void 0||B===void 0&&I===void 0&&R===void 0||(typeof E=="number"?E=dn(E,B,I,R):Array.isArray(E)&&(E=E.map(P=>typeof P=="number"?dn(P,B,I,R):P))),f!==void 0&&E!==void 0&&v&&!v.includes(E)&&(E=b,y&&(E=vh(y,E))),(y&&y!==this.type||E!==void 0&&_i(E)!==this.type)&&(E=vh(this.type.kind,E)),E}eachChild(){}outputDefined(){return!1}serialize(){const s=["config",this.key];return this.scope&&s.concat(this.key),s}}function vp(A){if(A instanceof Es&&(A.name==="get"&&A.args.length===1||A.name==="feature-state"||A.name==="has"&&A.args.length===1||A.name==="properties"||A.name==="geometry-type"||A.name==="id"||/^filter-/.test(A.name))||A instanceof Aa||A instanceof yh)return!1;let s=!0;return A.eachChild(c=>{s&&!vp(c)&&(s=!1)}),s}function yg(A){if(A instanceof Es&&A.name==="feature-state")return!1;let s=!0;return A.eachChild(c=>{s&&!yg(c)&&(s=!1)}),s}function vg(A){if(A instanceof bd)return new Set([A.key]);let s=new Set;return A.eachChild(c=>{s=new Set([...s,...vg(c)])}),s}function _p(A,s){if(A instanceof Es&&s.indexOf(A.name)>=0)return!1;let c=!0;return A.eachChild(d=>{c&&!_p(d,s)&&(c=!1)}),c}class Hn{constructor(s,c){this.type=c.type,this.name=s,this.boundExpression=c}static parse(s,c){if(s.length!==2||typeof s[1]!="string")return c.error("'var' expression requires exactly one string literal argument.");const d=s[1];return c.scope.has(d)?new Hn(d,c.scope.get(d)):c.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class _v{constructor(s,c=[],d,y=new is,f=[],v,B){this.registry=s,this.path=c,this.key=c.map(I=>typeof I=="string"?`['${I}']`:`[${I}]`).join(""),this.scope=y,this.errors=f,this.expectedType=d,this._scope=v,this.options=B}parse(s,c,d,y,f={}){return c||d?this.concat(c,null,d,y)._parse(s,f):this._parse(s,f)}parseObjectValue(s,c,d,y,f,v={}){return this.concat(c,d,y,f)._parse(s,v)}_parse(s,c){function d(y,f,v){return v==="assert"?new La(f,[y]):v==="coerce"?new nl(f,[y]):y}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const y=typeof s[0]=="string"?this.registry[s[0]]:void 0;if(y){let f=y.parse(s,this);if(!f)return null;if(this.expectedType){const v=this.expectedType,B=f.type;if(v.kind!=="string"&&v.kind!=="number"&&v.kind!=="boolean"&&v.kind!=="object"&&v.kind!=="array"||B.kind!=="value")if(v.kind!=="color"&&v.kind!=="formatted"&&v.kind!=="resolvedImage"||B.kind!=="value"&&B.kind!=="string"){if(this.checkSubtype(v,B))return null}else f=d(f,v,c.typeAnnotation||"coerce");else f=d(f,v,c.typeAnnotation||"assert")}if(!(f instanceof Da)&&f.type.kind!=="resolvedImage"&&xv(f)){const v=new mA(this._scope,this.options);try{f=new Da(f.type,f.evaluate(v))}catch(B){return this.error(B.message),null}}return f}return nl.parse(["to-array",s],this)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,c,d,y){let f=typeof s=="number"?this.path.concat(s):this.path;f=typeof c=="string"?f.concat(c):f;const v=y?this.scope.concat(y):this.scope;return new _v(this.registry,f,d||null,v,this.errors,this._scope,this.options)}error(s,...c){const d=`${this.key}${c.map(y=>`[${y}]`).join("")}`;this.errors.push(new Ko(d,s))}checkSubtype(s,c){const d=Un(s,c);return d&&this.error(d),d}}var Ew=_v;function xv(A){if(A instanceof Hn)return xv(A.boundExpression);if(A instanceof Es&&A.name==="error"||A instanceof Tl||A instanceof Aa||A instanceof yh||A instanceof bd)return!1;const s=A instanceof nl||A instanceof La;let c=!0;return A.eachChild(d=>{c=s?c&&xv(d):c&&d instanceof Da}),!!c&&vp(A)&&_p(A,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function _g(A,s){const c=A.length-1;let d,y,f=0,v=c,B=0;for(;f<=v;)if(B=Math.floor((f+v)/2),d=A[B],y=A[B+1],d<=s){if(B===c||s<y)return B;f=B+1}else{if(!(d>s))throw new $i("Input is not a number.");v=B-1}return 0}class xp{constructor(s,c,d){this.type=s,this.input=c,this.labels=[],this.outputs=[];for(const[y,f]of d)this.labels.push(y),this.outputs.push(f)}static parse(s,c){if(s.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return c.error("Expected an even number of arguments.");const d=c.parse(s[1],1,er);if(!d)return null;const y=[];let f=null;c.expectedType&&c.expectedType.kind!=="value"&&(f=c.expectedType);for(let v=1;v<s.length;v+=2){const B=v===1?-1/0:s[v],I=s[v+1],R=v,b=v+1;if(typeof B!="number")return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',R);if(y.length&&y[y.length-1][0]>=B)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',R);const E=c.parse(I,b,f);if(!E)return null;f=f||E.type,y.push([B,E])}return new xp(f,d,y)}evaluate(s){const c=this.labels,d=this.outputs;if(c.length===1)return d[0].evaluate(s);const y=this.input.evaluate(s);if(y<=c[0])return d[0].evaluate(s);const f=c.length;return y>=c[f-1]?d[f-1].evaluate(s):d[_g(c,y)].evaluate(s)}eachChild(s){s(this.input);for(const c of this.outputs)s(c)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}serialize(){const s=["step",this.input.serialize()];for(let c=0;c<this.labels.length;c++)c>0&&s.push(this.labels[c]),s.push(this.outputs[c].serialize());return s}}const Tw=.95047,Iw=1.08883,Fw=4/29,wd=6/29,Pw=3*wd*wd,KF=wd*wd*wd,WF=Math.PI/180,qF=180/Math.PI;function bv(A){return A>KF?Math.pow(A,1/3):A/Pw+Fw}function wv(A){return A>wd?A*A*A:Pw*(A-Fw)}function Bv(A){return 255*(A<=.0031308?12.92*A:1.055*Math.pow(A,1/2.4)-.055)}function Cv(A){return(A/=255)<=.04045?A/12.92:Math.pow((A+.055)/1.055,2.4)}function Mw(A){const s=Cv(A.r),c=Cv(A.g),d=Cv(A.b),y=bv((.4124564*s+.3575761*c+.1804375*d)/Tw),f=bv((.2126729*s+.7151522*c+.072175*d)/1);return{l:116*f-16,a:500*(y-f),b:200*(f-bv((.0193339*s+.119192*c+.9503041*d)/Iw)),alpha:A.a}}function Rw(A){let s=(A.l+16)/116,c=isNaN(A.a)?s:s+A.a/500,d=isNaN(A.b)?s:s-A.b/200;return s=1*wv(s),c=Tw*wv(c),d=Iw*wv(d),new An(Bv(3.2404542*c-1.5371385*s-.4985314*d),Bv(-.969266*c+1.8760108*s+.041556*d),Bv(.0556434*c-.2040259*s+1.0572252*d),A.alpha)}function XF(A,s,c){const d=s-A;return A+c*(d>180||d<-180?d-360*Math.round(d/360):d)}const bp={forward:Mw,reverse:Rw,interpolate:function(A,s,c){return{l:_r(A.l,s.l,c),a:_r(A.a,s.a,c),b:_r(A.b,s.b,c),alpha:_r(A.alpha,s.alpha,c)}}},wp={forward:function(A){const{l:s,a:c,b:d}=Mw(A),y=Math.atan2(d,c)*qF;return{h:y<0?y+360:y,c:Math.sqrt(c*c+d*d),l:s,alpha:A.a}},reverse:function(A){const s=A.h*WF,c=A.c;return Rw({l:A.l,a:Math.cos(s)*c,b:Math.sin(s)*c,alpha:A.alpha})},interpolate:function(A,s,c){return{h:XF(A.h,s.h,c),c:_r(A.c,s.c,c),l:_r(A.l,s.l,c),alpha:_r(A.alpha,s.alpha,c)}}};var kw=Object.freeze({__proto__:null,hcl:wp,lab:bp});class sl{constructor(s,c,d,y,f){this.type=s,this.operator=c,this.interpolation=d,this.input=y,this.labels=[],this.outputs=[];for(const[v,B]of f)this.labels.push(v),this.outputs.push(B)}static interpolationFactor(s,c,d,y){let f=0;if(s.name==="exponential")f=Sv(c,s.base,d,y);else if(s.name==="linear")f=Sv(c,1,d,y);else if(s.name==="cubic-bezier"){const v=s.controlPoints;f=new Io(v[0],v[1],v[2],v[3]).solve(Sv(c,1,d,y))}return f}static parse(s,c){let[d,y,f,...v]=s;if(!Array.isArray(y)||y.length===0)return c.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){const R=y[1];if(typeof R!="number")return c.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:R}}else{if(y[0]!=="cubic-bezier")return c.error(`Unknown interpolation type ${String(y[0])}`,1,0);{const R=y.slice(1);if(R.length!==4||R.some(b=>typeof b!="number"||b<0||b>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:R}}}if(s.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(f=c.parse(f,2,er),!f)return null;const B=[];let I=null;d==="interpolate-hcl"||d==="interpolate-lab"?I=os:c.expectedType&&c.expectedType.kind!=="value"&&(I=c.expectedType);for(let R=0;R<v.length;R+=2){const b=v[R],E=v[R+1],P=R+3,T=R+4;if(typeof b!="number")return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(B.length&&B[B.length-1][0]>=b)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',P);const F=c.parse(E,T,I);if(!F)return null;I=I||F.type,B.push([b,F])}return I.kind==="number"||I.kind==="color"||I.kind==="array"&&I.itemType.kind==="number"&&typeof I.N=="number"?new sl(I,d,y,f,B):c.error(`Type ${cr(I)} is not interpolatable.`)}evaluate(s){const c=this.labels,d=this.outputs;if(c.length===1)return d[0].evaluate(s);const y=this.input.evaluate(s);if(y<=c[0])return d[0].evaluate(s);const f=c.length;if(y>=c[f-1])return d[f-1].evaluate(s);const v=_g(c,y),B=sl.interpolationFactor(this.interpolation,y,c[v],c[v+1]),I=d[v].evaluate(s),R=d[v+1].evaluate(s);return this.operator==="interpolate"?rl[this.type.kind.toLowerCase()](I,R,B):this.operator==="interpolate-hcl"?wp.reverse(wp.interpolate(wp.forward(I),wp.forward(R),B)):bp.reverse(bp.interpolate(bp.forward(I),bp.forward(R),B))}eachChild(s){s(this.input);for(const c of this.outputs)s(c)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}serialize(){let s;s=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const c=[this.operator,s,this.input.serialize()];for(let d=0;d<this.labels.length;d++)c.push(this.labels[d],this.outputs[d].serialize());return c}}function Sv(A,s,c,d){const y=d-c,f=A-c;return y===0?0:s===1?f/y:(Math.pow(s,f)-1)/(Math.pow(s,y)-1)}class xg{constructor(s,c){this.type=s,this.args=c}static parse(s,c){if(s.length<2)return c.error("Expectected at least one argument.");let d=null;const y=c.expectedType;y&&y.kind!=="value"&&(d=y);const f=[];for(const B of s.slice(1)){const I=c.parse(B,1+f.length,d,void 0,{typeAnnotation:"omit"});if(!I)return null;d=d||I.type,f.push(I)}const v=y&&f.some(B=>Un(y,B.type));return new xg(v?qr:d,f)}evaluate(s){let c,d=null,y=0;for(const f of this.args){if(y++,d=f.evaluate(s),d&&d instanceof fo&&!d.available&&(c||(c=d),d=null,y===this.args.length))return c;if(d!==null)break}return d}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}serialize(){const s=["coalesce"];return this.eachChild(c=>{s.push(c.serialize())}),s}}class bg{constructor(s,c){this.type=c.type,this.bindings=[].concat(s),this.result=c}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const c of this.bindings)s(c[1]);s(this.result)}static parse(s,c){if(s.length<4)return c.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const d=[];for(let f=1;f<s.length-1;f+=2){const v=s[f];if(typeof v!="string")return c.error(`Expected string, but found ${typeof v} instead.`,f);if(/[^a-zA-Z0-9_]/.test(v))return c.error("Variable names must contain only alphanumeric characters or '_'.",f);const B=c.parse(s[f+1],f+1);if(!B)return null;d.push([v,B])}const y=c.parse(s[s.length-1],s.length-1,c.expectedType,d);return y?new bg(d,y):null}outputDefined(){return this.result.outputDefined()}serialize(){const s=["let"];for(const[c,d]of this.bindings)s.push(c,d.serialize());return s.push(this.result.serialize()),s}}class Ev{constructor(s,c,d){this.type=s,this.index=c,this.input=d}static parse(s,c){if(s.length!==3)return c.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const d=c.parse(s[1],1,er),y=c.parse(s[2],2,It(c.expectedType||qr));return d&&y?new Ev(y.type.itemType,d,y):null}evaluate(s){const c=this.index.evaluate(s),d=this.input.evaluate(s);if(c<0)throw new $i(`Array index out of bounds: ${c} < 0.`);if(c>=d.length)throw new $i(`Array index out of bounds: ${c} > ${d.length-1}.`);if(c!==Math.floor(c))throw new $i(`Array index must be an integer, but found ${c} instead.`);return d[c]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Tv{constructor(s,c){this.type=Wr,this.needle=s,this.haystack=c}static parse(s,c){if(s.length!==3)return c.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const d=c.parse(s[1],1,qr),y=c.parse(s[2],2,qr);return d&&y?Wn(d.type,[Wr,Yr,er,ua,qr])?new Tv(d,y):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${cr(d.type)} instead`):null}evaluate(s){const c=this.needle.evaluate(s),d=this.haystack.evaluate(s);if(d==null)return!1;if(!un(c,["boolean","string","number","null"]))throw new $i(`Expected first argument to be of type boolean, string, number or null, but found ${cr(_i(c))} instead.`);if(!un(d,["string","array"]))throw new $i(`Expected second argument to be of type array or string, but found ${cr(_i(d))} instead.`);return d.indexOf(c)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class wg{constructor(s,c,d){this.type=er,this.needle=s,this.haystack=c,this.fromIndex=d}static parse(s,c){if(s.length<=2||s.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const d=c.parse(s[1],1,qr),y=c.parse(s[2],2,qr);if(!d||!y)return null;if(!Wn(d.type,[Wr,Yr,er,ua,qr]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${cr(d.type)} instead`);if(s.length===4){const f=c.parse(s[3],3,er);return f?new wg(d,y,f):null}return new wg(d,y)}evaluate(s){const c=this.needle.evaluate(s),d=this.haystack.evaluate(s);if(!un(c,["boolean","string","number","null"]))throw new $i(`Expected first argument to be of type boolean, string, number or null, but found ${cr(_i(c))} instead.`);if(!un(d,["string","array"]))throw new $i(`Expected second argument to be of type array or string, but found ${cr(_i(d))} instead.`);if(this.fromIndex){const y=this.fromIndex.evaluate(s);return d.indexOf(c,y)}return d.indexOf(c)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const s=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),s]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Iv{constructor(s,c,d,y,f,v){this.inputType=s,this.type=c,this.input=d,this.cases=y,this.outputs=f,this.otherwise=v}static parse(s,c){if(s.length<5)return c.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return c.error("Expected an even number of arguments.");let d,y;c.expectedType&&c.expectedType.kind!=="value"&&(y=c.expectedType);const f={},v=[];for(let R=2;R<s.length-1;R+=2){let b=s[R];const E=s[R+1];Array.isArray(b)||(b=[b]);const P=c.concat(R);if(b.length===0)return P.error("Expected at least one branch label.");for(const F of b){if(typeof F!="number"&&typeof F!="string")return P.error("Branch labels must be numbers or strings.");if(typeof F=="number"&&Math.abs(F)>Number.MAX_SAFE_INTEGER)return P.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof F=="number"&&Math.floor(F)!==F)return P.error("Numeric branch labels must be integer values.");if(d){if(P.checkSubtype(d,_i(F)))return null}else d=_i(F);if(f[String(F)]!==void 0)return P.error("Branch labels must be unique.");f[String(F)]=v.length}const T=c.parse(E,R,y);if(!T)return null;y=y||T.type,v.push(T)}const B=c.parse(s[1],1,qr);if(!B)return null;const I=c.parse(s[s.length-1],s.length-1,y);return I?B.type.kind!=="value"&&c.concat(1).checkSubtype(d,B.type)?null:new Iv(d,y,B,f,v,I):null}evaluate(s){const c=this.input.evaluate(s);return(_i(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const s=["match",this.input.serialize()],c=Object.keys(this.cases).sort(),d=[],y={};for(const v of c){const B=y[this.cases[v]];B===void 0?(y[this.cases[v]]=d.length,d.push([this.cases[v],[v]])):d[B][1].push(v)}const f=v=>this.inputType.kind==="number"?Number(v):v;for(const[v,B]of d)s.push(B.length===1?f(B[0]):B.map(f)),s.push(this.outputs[v].serialize());return s.push(this.otherwise.serialize()),s}}class Bp{constructor(s,c,d){this.type=s,this.branches=c,this.otherwise=d}static parse(s,c){if(s.length<4)return c.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return c.error("Expected an odd number of arguments.");let d;c.expectedType&&c.expectedType.kind!=="value"&&(d=c.expectedType);const y=[];for(let v=1;v<s.length-1;v+=2){const B=c.parse(s[v],v,Wr);if(!B)return null;const I=c.parse(s[v+1],v+1,d);if(!I)return null;y.push([B,I]),d=d||I.type}const f=c.parse(s[s.length-1],s.length-1,d);return f?new Bp(d,y,f):null}evaluate(s){for(const[c,d]of this.branches)if(c.evaluate(s))return d.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[c,d]of this.branches)s(c),s(d);s(this.otherwise)}outputDefined(){return this.branches.every(([s,c])=>c.outputDefined())&&this.otherwise.outputDefined()}serialize(){const s=["case"];return this.eachChild(c=>{s.push(c.serialize())}),s}}class Bg{constructor(s,c,d,y){this.type=s,this.input=c,this.beginIndex=d,this.endIndex=y}static parse(s,c){if(s.length<=2||s.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const d=c.parse(s[1],1,qr),y=c.parse(s[2],2,er);if(!d||!y)return null;if(!Wn(d.type,[It(qr),Yr,qr]))return c.error(`Expected first argument to be of type array or string, but found ${cr(d.type)} instead`);if(s.length===4){const f=c.parse(s[3],3,er);return f?new Bg(d.type,d,y,f):null}return new Bg(d.type,d,y)}evaluate(s){const c=this.input.evaluate(s),d=this.beginIndex.evaluate(s);if(!un(c,["string","array"]))throw new $i(`Expected first argument to be of type array or string, but found ${cr(_i(c))} instead.`);if(this.endIndex){const y=this.endIndex.evaluate(s);return c.slice(d,y)}return c.slice(d)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const s=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),s]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Fv(A,s){return A==="=="||A==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function Dw(A,s,c,d){return d.compare(s,c)===0}function Bd(A,s,c){const d=A!=="=="&&A!=="!=";return class l${constructor(f,v,B){this.type=Wr,this.lhs=f,this.rhs=v,this.collator=B,this.hasUntypedArgument=f.type.kind==="value"||v.type.kind==="value"}static parse(f,v){if(f.length!==3&&f.length!==4)return v.error("Expected two or three arguments.");const B=f[0];let I=v.parse(f[1],1,qr);if(!I)return null;if(!Fv(B,I.type))return v.concat(1).error(`"${B}" comparisons are not supported for type '${cr(I.type)}'.`);let R=v.parse(f[2],2,qr);if(!R)return null;if(!Fv(B,R.type))return v.concat(2).error(`"${B}" comparisons are not supported for type '${cr(R.type)}'.`);if(I.type.kind!==R.type.kind&&I.type.kind!=="value"&&R.type.kind!=="value")return v.error(`Cannot compare types '${cr(I.type)}' and '${cr(R.type)}'.`);d&&(I.type.kind==="value"&&R.type.kind!=="value"?I=new La(R.type,[I]):I.type.kind!=="value"&&R.type.kind==="value"&&(R=new La(I.type,[R])));let b=null;if(f.length===4){if(I.type.kind!=="string"&&R.type.kind!=="string"&&I.type.kind!=="value"&&R.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(b=v.parse(f[3],3,Su),!b)return null}return new l$(I,R,b)}evaluate(f){const v=this.lhs.evaluate(f),B=this.rhs.evaluate(f);if(d&&this.hasUntypedArgument){const I=_i(v),R=_i(B);if(I.kind!==R.kind||I.kind!=="string"&&I.kind!=="number")throw new $i(`Expected arguments for "${A}" to be (string, string) or (number, number), but found (${I.kind}, ${R.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const I=_i(v),R=_i(B);if(I.kind!=="string"||R.kind!=="string")return s(f,v,B)}return this.collator?c(f,v,B,this.collator.evaluate(f)):s(f,v,B)}eachChild(f){f(this.lhs),f(this.rhs),this.collator&&f(this.collator)}outputDefined(){return!0}serialize(){const f=[A];return this.eachChild(v=>{f.push(v.serialize())}),f}}}const ZF=Bd("==",function(A,s,c){return s===c},Dw),Lw=Bd("!=",function(A,s,c){return s!==c},function(A,s,c,d){return!Dw(0,s,c,d)}),Ow=Bd("<",function(A,s,c){return s<c},function(A,s,c,d){return d.compare(s,c)<0}),Cd=Bd(">",function(A,s,c){return s>c},function(A,s,c,d){return d.compare(s,c)>0}),Uw=Bd("<=",function(A,s,c){return s<=c},function(A,s,c,d){return d.compare(s,c)<=0}),zw=Bd(">=",function(A,s,c){return s>=c},function(A,s,c,d){return d.compare(s,c)>=0});class Pv{constructor(s,c,d,y,f,v){this.type=Yr,this.number=s,this.locale=c,this.currency=d,this.unit=y,this.minFractionDigits=f,this.maxFractionDigits=v}static parse(s,c){if(s.length!==3)return c.error("Expected two arguments.");const d=c.parse(s[1],1,er);if(!d)return null;const y=s[2];if(typeof y!="object"||Array.isArray(y))return c.error("NumberFormat options argument must be an object.");let f=null;if(y.locale&&(f=c.parseObjectValue(y.locale,2,"locale",Yr),!f))return null;let v=null;if(y.currency&&(v=c.parseObjectValue(y.currency,2,"currency",Yr),!v))return null;let B=null;if(y.unit&&(B=c.parseObjectValue(y.unit,2,"unit",Yr),!B))return null;let I=null;if(y["min-fraction-digits"]&&(I=c.parseObjectValue(y["min-fraction-digits"],2,"min-fraction-digits",er),!I))return null;let R=null;return y["max-fraction-digits"]&&(R=c.parseObjectValue(y["max-fraction-digits"],2,"max-fraction-digits",er),!R)?null:new Pv(d,f,v,B,I,R)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(s):void 0,unit:this.unit?this.unit.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.unit&&s(this.unit),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const s={};return this.locale&&(s.locale=this.locale.serialize()),this.currency&&(s.currency=this.currency.serialize()),this.unit&&(s.unit=this.unit.serialize()),this.minFractionDigits&&(s["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(s["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),s]}}class Cp{constructor(s){this.type=er,this.input=s}static parse(s,c){if(s.length!==2)return c.error(`Expected 1 argument, but found ${s.length-1} instead.`);const d=c.parse(s[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?c.error(`Expected argument of type string or array, but found ${cr(d.type)} instead.`):new Cp(d):null}evaluate(s){const c=this.input.evaluate(s);if(typeof c=="string"||Array.isArray(c))return c.length;throw new $i(`Expected value to be of type string or array, but found ${cr(_i(c))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}serialize(){const s=["length"];return this.eachChild(c=>{s.push(c.serialize())}),s}}function Cg(A){return function(){A=1831565813+(A|=0)|0;let s=Math.imul(A^A>>>15,1|A);return s=s+Math.imul(s^s>>>7,61|s)^s,((s^s>>>14)>>>0)/4294967296}}const Sd={"==":ZF,"!=":Lw,">":Cd,"<":Ow,">=":zw,"<=":Uw,array:La,at:Ev,boolean:La,case:Bp,coalesce:xg,collator:Tl,format:El,image:Fc,in:Tv,"index-of":wg,interpolate:sl,"interpolate-hcl":sl,"interpolate-lab":sl,length:Cp,let:bg,literal:Da,match:Iv,number:La,"number-format":Pv,object:La,slice:Bg,step:xp,string:La,"to-boolean":nl,"to-color":nl,"to-number":nl,"to-string":nl,var:Hn,within:Aa,distance:yh,config:bd};function Vw(A,[s,c,d,y]){s=s.evaluate(A),c=c.evaluate(A),d=d.evaluate(A);const f=y?y.evaluate(A):1,v=Sl(s,c,d,f);if(v)throw new $i(v);return new An(s/255*f,c/255*f,d/255*f,f)}function Mv(A,[s,c,d,y]){s=s.evaluate(A),c=c.evaluate(A),d=d.evaluate(A);const f=y?y.evaluate(A):1,v=function(R,b,E,P){return typeof R=="number"&&R>=0&&R<=360?typeof b=="number"&&b>=0&&b<=100&&typeof E=="number"&&E>=0&&E<=100?P===void 0||typeof P=="number"&&P>=0&&P<=1?null:`Invalid hsla value [${[R,b,E,P].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof P=="number"?[R,b,E,P]:[R,b,E]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof P=="number"?[R,b,E,P]:[R,b,E]).join(", ")}]: 'h' must be between 0 and 360.`}(s,c,d,f);if(v)throw new $i(v);const B=`hsla(${s}, ${c}%, ${d}%, ${f})`,I=An.parse(B);if(!I)throw new $i(`Failed to parse HSLA color: ${B}`);return I}function Rv(A,s){return A in s}function kv(A,s){const c=s[A];return c===void 0?null:c}function gA(A){return{type:A}}function Nw(A){return{result:"success",value:A}}function _h(A){return{result:"error",value:A}}function Dv(A,s){return!!A&&!!A.parameters&&A.parameters.indexOf(s)>-1}function Sg(A){return A["property-type"]==="data-driven"}function Lv(A){return Dv(A.expression,"measure-light")}function Qw(A){return Dv(A.expression,"zoom")}function Ov(A){return!!A.expression&&A.expression.interpolated}function Eg(A){return typeof A=="object"&&A!==null&&!Array.isArray(A)}function Hw(A){return A}function jw(A,s){const c=s.type==="color",d=A.stops&&typeof A.stops[0][0]=="object",y=d||!(d||A.property!==void 0),f=A.type||(Ov(s)?"exponential":"interval");if(c&&((A=Jl({},A)).stops&&(A.stops=A.stops.map(R=>[R[0],An.parse(R[1])])),A.default=An.parse(A.default?A.default:s.default)),A.colorSpace&&A.colorSpace!=="rgb"&&!kw[A.colorSpace])throw new Error(`Unknown color space: ${A.colorSpace}`);let v,B,I;if(f==="exponential")v=Kw;else if(f==="interval")v=Gw;else if(f==="categorical"){v=YF,B=Object.create(null);for(const R of A.stops)B[R[0]]=R[1];I=typeof A.stops[0][0]}else{if(f!=="identity")throw new Error(`Unknown function type "${f}"`);v=JF}if(d){const R={},b=[];for(let T=0;T<A.stops.length;T++){const F=A.stops[T],D=F[0].zoom;R[D]===void 0&&(R[D]={zoom:D,type:A.type,property:A.property,default:A.default,stops:[]},b.push(D)),R[D].stops.push([F[0].value,F[1]])}const E=[];for(const T of b)E.push([R[T].zoom,jw(R[T],s)]);const P={name:"linear"};return{kind:"composite",interpolationType:P,interpolationFactor:sl.interpolationFactor.bind(void 0,P),zoomStops:E.map(T=>T[0]),evaluate:({zoom:T},F)=>Kw({stops:E,base:A.base},s,T).evaluate(T,F)}}if(y){const R=f==="exponential"?{name:"exponential",base:A.base!==void 0?A.base:1}:null;return{kind:"camera",interpolationType:R,interpolationFactor:sl.interpolationFactor.bind(void 0,R),zoomStops:A.stops.map(b=>b[0]),evaluate:({zoom:b})=>v(A,s,b,B,I)}}return{kind:"source",evaluate(R,b){const E=b&&b.properties?b.properties[A.property]:void 0;return E===void 0?Sp(A.default,s.default):v(A,s,E,B,I)}}}function Sp(A,s,c){return A!==void 0?A:s!==void 0?s:c!==void 0?c:void 0}function YF(A,s,c,d,y){return Sp(typeof c===y?d[c]:void 0,A.default,s.default)}function Gw(A,s,c){if(Pc(c)!=="number")return Sp(A.default,s.default);const d=A.stops.length;if(d===1||c<=A.stops[0][0])return A.stops[0][1];if(c>=A.stops[d-1][0])return A.stops[d-1][1];const y=_g(A.stops.map(f=>f[0]),c);return A.stops[y][1]}function Kw(A,s,c){const d=A.base!==void 0?A.base:1;if(Pc(c)!=="number")return Sp(A.default,s.default);const y=A.stops.length;if(y===1||c<=A.stops[0][0])return A.stops[0][1];if(c>=A.stops[y-1][0])return A.stops[y-1][1];const f=_g(A.stops.map(b=>b[0]),c),v=function(b,E,P,T){const F=T-P,D=b-P;return F===0?0:E===1?D/F:(Math.pow(E,D)-1)/(Math.pow(E,F)-1)}(c,d,A.stops[f][0],A.stops[f+1][0]),B=A.stops[f][1],I=A.stops[f+1][1];let R=rl[s.type]||Hw;if(A.colorSpace&&A.colorSpace!=="rgb"){const b=kw[A.colorSpace];R=(E,P)=>b.reverse(b.interpolate(b.forward(E),b.forward(P),v))}return typeof B.evaluate=="function"?{evaluate(...b){const E=B.evaluate.apply(void 0,b),P=I.evaluate.apply(void 0,b);if(E!==void 0&&P!==void 0)return R(E,P,v)}}:R(B,I,v)}function JF(A,s,c){return s.type==="color"?c=An.parse(c):s.type==="formatted"?c=Jn.fromString(c.toString()):s.type==="resolvedImage"?c=fo.fromString(c.toString()):Pc(c)===s.type||s.type==="enum"&&s.values[c]||(c=void 0),Sp(c,A.default,s.default)}Es.register(Sd,{error:[{kind:"error"},[Yr],(A,[s])=>{throw new $i(s.evaluate(A))}],typeof:[Yr,[qr],(A,[s])=>cr(_i(s.evaluate(A)))],"to-rgba":[It(er,4),[os],(A,[s])=>s.evaluate(A).toRenderColor(null).toArray()],rgb:[os,[er,er,er],Vw],rgba:[os,[er,er,er,er],Vw],hsl:[os,[er,er,er],Mv],hsla:[os,[er,er,er,er],Mv],has:{type:Wr,overloads:[[[Yr],(A,[s])=>Rv(s.evaluate(A),A.properties())],[[Yr,oo],(A,[s,c])=>Rv(s.evaluate(A),c.evaluate(A))]]},get:{type:qr,overloads:[[[Yr],(A,[s])=>kv(s.evaluate(A),A.properties())],[[Yr,oo],(A,[s,c])=>kv(s.evaluate(A),c.evaluate(A))]]},"feature-state":[qr,[Yr],(A,[s])=>kv(s.evaluate(A),A.featureState||{})],properties:[oo,[],A=>A.properties()],"geometry-type":[Yr,[],A=>A.geometryType()],id:[qr,[],A=>A.id()],zoom:[er,[],A=>A.globals.zoom],pitch:[er,[],A=>A.globals.pitch||0],"distance-from-center":[er,[],A=>A.distanceFromCenter()],"measure-light":[er,[Yr],(A,[s])=>A.measureLight(s.evaluate(A))],"heatmap-density":[er,[],A=>A.globals.heatmapDensity||0],"line-progress":[er,[],A=>A.globals.lineProgress||0],"raster-value":[er,[],A=>A.globals.rasterValue||0],"raster-particle-speed":[er,[],A=>A.globals.rasterParticleSpeed||0],"sky-radial-progress":[er,[],A=>A.globals.skyRadialProgress||0],accumulated:[qr,[],A=>A.globals.accumulated===void 0?null:A.globals.accumulated],"+":[er,gA(er),(A,s)=>{let c=0;for(const d of s)c+=d.evaluate(A);return c}],"*":[er,gA(er),(A,s)=>{let c=1;for(const d of s)c*=d.evaluate(A);return c}],"-":{type:er,overloads:[[[er,er],(A,[s,c])=>s.evaluate(A)-c.evaluate(A)],[[er],(A,[s])=>-s.evaluate(A)]]},"/":[er,[er,er],(A,[s,c])=>s.evaluate(A)/c.evaluate(A)],"%":[er,[er,er],(A,[s,c])=>s.evaluate(A)%c.evaluate(A)],ln2:[er,[],()=>Math.LN2],pi:[er,[],()=>Math.PI],e:[er,[],()=>Math.E],"^":[er,[er,er],(A,[s,c])=>Math.pow(s.evaluate(A),c.evaluate(A))],sqrt:[er,[er],(A,[s])=>Math.sqrt(s.evaluate(A))],log10:[er,[er],(A,[s])=>Math.log(s.evaluate(A))/Math.LN10],ln:[er,[er],(A,[s])=>Math.log(s.evaluate(A))],log2:[er,[er],(A,[s])=>Math.log(s.evaluate(A))/Math.LN2],sin:[er,[er],(A,[s])=>Math.sin(s.evaluate(A))],cos:[er,[er],(A,[s])=>Math.cos(s.evaluate(A))],tan:[er,[er],(A,[s])=>Math.tan(s.evaluate(A))],asin:[er,[er],(A,[s])=>Math.asin(s.evaluate(A))],acos:[er,[er],(A,[s])=>Math.acos(s.evaluate(A))],atan:[er,[er],(A,[s])=>Math.atan(s.evaluate(A))],min:[er,gA(er),(A,s)=>Math.min(...s.map(c=>c.evaluate(A)))],max:[er,gA(er),(A,s)=>Math.max(...s.map(c=>c.evaluate(A)))],abs:[er,[er],(A,[s])=>Math.abs(s.evaluate(A))],round:[er,[er],(A,[s])=>{const c=s.evaluate(A);return c<0?-Math.round(-c):Math.round(c)}],floor:[er,[er],(A,[s])=>Math.floor(s.evaluate(A))],ceil:[er,[er],(A,[s])=>Math.ceil(s.evaluate(A))],"filter-==":[Wr,[Yr,qr],(A,[s,c])=>A.properties()[s.value]===c.value],"filter-id-==":[Wr,[qr],(A,[s])=>A.id()===s.value],"filter-type-==":[Wr,[Yr],(A,[s])=>A.geometryType()===s.value],"filter-<":[Wr,[Yr,qr],(A,[s,c])=>{const d=A.properties()[s.value],y=c.value;return typeof d==typeof y&&d<y}],"filter-id-<":[Wr,[qr],(A,[s])=>{const c=A.id(),d=s.value;return typeof c==typeof d&&c<d}],"filter->":[Wr,[Yr,qr],(A,[s,c])=>{const d=A.properties()[s.value],y=c.value;return typeof d==typeof y&&d>y}],"filter-id->":[Wr,[qr],(A,[s])=>{const c=A.id(),d=s.value;return typeof c==typeof d&&c>d}],"filter-<=":[Wr,[Yr,qr],(A,[s,c])=>{const d=A.properties()[s.value],y=c.value;return typeof d==typeof y&&d<=y}],"filter-id-<=":[Wr,[qr],(A,[s])=>{const c=A.id(),d=s.value;return typeof c==typeof d&&c<=d}],"filter->=":[Wr,[Yr,qr],(A,[s,c])=>{const d=A.properties()[s.value],y=c.value;return typeof d==typeof y&&d>=y}],"filter-id->=":[Wr,[qr],(A,[s])=>{const c=A.id(),d=s.value;return typeof c==typeof d&&c>=d}],"filter-has":[Wr,[qr],(A,[s])=>s.value in A.properties()],"filter-has-id":[Wr,[],A=>A.id()!==null&&A.id()!==void 0],"filter-type-in":[Wr,[It(Yr)],(A,[s])=>s.value.indexOf(A.geometryType())>=0],"filter-id-in":[Wr,[It(qr)],(A,[s])=>s.value.indexOf(A.id())>=0],"filter-in-small":[Wr,[Yr,It(qr)],(A,[s,c])=>c.value.indexOf(A.properties()[s.value])>=0],"filter-in-large":[Wr,[Yr,It(qr)],(A,[s,c])=>function(d,y,f,v){for(;f<=v;){const B=f+v>>1;if(y[B]===d)return!0;y[B]>d?v=B-1:f=B+1}return!1}(A.properties()[s.value],c.value,0,c.value.length-1)],all:{type:Wr,overloads:[[[Wr,Wr],(A,[s,c])=>s.evaluate(A)&&c.evaluate(A)],[gA(Wr),(A,s)=>{for(const c of s)if(!c.evaluate(A))return!1;return!0}]]},any:{type:Wr,overloads:[[[Wr,Wr],(A,[s,c])=>s.evaluate(A)||c.evaluate(A)],[gA(Wr),(A,s)=>{for(const c of s)if(c.evaluate(A))return!0;return!1}]]},"!":[Wr,[Wr],(A,[s])=>!s.evaluate(A)],"is-supported-script":[Wr,[Yr],(A,[s])=>{const c=A.globals&&A.globals.isSupportedScript;return!c||c(s.evaluate(A))}],upcase:[Yr,[Yr],(A,[s])=>s.evaluate(A).toUpperCase()],downcase:[Yr,[Yr],(A,[s])=>s.evaluate(A).toLowerCase()],concat:[Yr,gA(qr),(A,s)=>s.map(c=>Wo(c.evaluate(A))).join("")],"resolved-locale":[Yr,[Su],(A,[s])=>s.evaluate(A).resolvedLocale()],random:[er,[er,er,qr],(A,s)=>{const[c,d,y]=s.map(v=>v.evaluate(A));if(c>d||c===d)return c;let f;if(typeof y=="string")f=function(v){let B=0;if(v.length===0)return B;for(let I=0;I<v.length;I++)B=(B<<5)-B+v.charCodeAt(I),B|=0;return B}(y);else{if(typeof y!="number")throw new $i(`Invalid seed input: ${y}`);f=y}return c+Cg(f)()*(d-c)}]});class Tg{constructor(s,c,d,y){this.expression=s,this._warningHistory={},this._evaluator=new mA(d,y),this._defaultValue=c?function(f){return f.type==="color"&&(Eg(f.default)||Array.isArray(f.default))?new An(0,0,0,0):f.type==="color"?An.parse(f.default)||null:f.default===void 0?null:f.default}(c):null,this._enumValues=c&&c.type==="enum"?c.values:null}evaluateWithoutErrorHandling(s,c,d,y,f,v,B,I){return this._evaluator.globals=s,this._evaluator.feature=c,this._evaluator.featureState=d,this._evaluator.canonical=y||null,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=v,this._evaluator.featureTileCoord=B||null,this._evaluator.featureDistanceData=I||null,this.expression.evaluate(this._evaluator)}evaluate(s,c,d,y,f,v,B,I){this._evaluator.globals=s,this._evaluator.feature=c||null,this._evaluator.featureState=d||null,this._evaluator.canonical=y||null,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=v||null,this._evaluator.featureTileCoord=B||null,this._evaluator.featureDistanceData=I||null;try{const R=this.expression.evaluate(this._evaluator);if(R==null||typeof R=="number"&&R!=R)return this._defaultValue;if(this._enumValues&&!(R in this._enumValues))throw new $i(`Expected value to be one of ${Object.keys(this._enumValues).map(b=>JSON.stringify(b)).join(", ")}, but found ${JSON.stringify(R)} instead.`);return R}catch(R){return this._warningHistory[R.message]||(this._warningHistory[R.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${R.message}`)),this._defaultValue}}}function Ig(A){return Array.isArray(A)&&A.length>0&&typeof A[0]=="string"&&A[0]in Sd}function Ep(A,s,c,d){const y=new Ew(Sd,[],s?function(v){const B={color:os,string:Yr,number:er,enum:Yr,boolean:Wr,formatted:qe,resolvedImage:st};return v.type==="array"?It(B[v.value]||qr,v.length):B[v.type]}(s):void 0,void 0,void 0,c,d),f=y.parse(A,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?Nw(new Tg(f,s,c,d)):_h(y.errors)}class Uv{constructor(s,c,d){this.kind=s,this._styleExpression=c,this.isLightConstant=d,this.isStateDependent=s!=="constant"&&!yg(c.expression),this.configDependencies=vg(c.expression)}evaluateWithoutErrorHandling(s,c,d,y,f,v){return this._styleExpression.evaluateWithoutErrorHandling(s,c,d,y,f,v)}evaluate(s,c,d,y,f,v){return this._styleExpression.evaluate(s,c,d,y,f,v)}}class Rc{constructor(s,c,d,y,f){this.kind=s,this.zoomStops=d,this._styleExpression=c,this.isStateDependent=s!=="camera"&&!yg(c.expression),this.isLightConstant=f,this.configDependencies=vg(c.expression),this.interpolationType=y}evaluateWithoutErrorHandling(s,c,d,y,f,v){return this._styleExpression.evaluateWithoutErrorHandling(s,c,d,y,f,v)}evaluate(s,c,d,y,f,v){return this._styleExpression.evaluate(s,c,d,y,f,v)}interpolationFactor(s,c,d){return this.interpolationType?sl.interpolationFactor(this.interpolationType,s,c,d):0}}function Ww(A,s,c,d){if((A=Ep(A,s,c,d)).result==="error")return A;const y=A.value.expression,f=vp(y);if(!f&&!Sg(s))return _h([new Ko("","data expressions not supported")]);const v=_p(y,["zoom","pitch","distance-from-center"]);if(!v&&!Qw(s))return _h([new Ko("","zoom expressions not supported")]);const B=_p(y,["measure-light"]);if(!B&&!Lv(s))return _h([new Ko("","measure-light expression not supported")]);const I=s.expression&&s.expression.relaxZoomRestriction,R=Pg(y);return R||v||I?R instanceof Ko?_h([R]):R instanceof sl&&!Ov(s)?_h([new Ko("",'"interpolate" expressions cannot be used with this property')]):Nw(R?new Rc(f?"camera":"composite",A.value,R.labels,R instanceof sl?R.interpolation:void 0,B):new Uv(f?"constant":"source",A.value,B)):_h([new Ko("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class Fg{constructor(s,c){this._parameters=s,this._specification=c,Jl(this,jw(this._parameters,this._specification))}static deserialize(s){return new Fg(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function Pg(A){let s=null;if(A instanceof bg)s=Pg(A.result);else if(A instanceof xg){for(const c of A.args)if(s=Pg(c),s)break}else(A instanceof xp||A instanceof sl)&&A.input instanceof Es&&A.input.name==="zoom"&&(s=A);return s instanceof Ko||A.eachChild(c=>{const d=Pg(c);d instanceof Ko?s=d:s&&d&&s!==d&&(s=new Ko("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}var Mg,zv,qw=function(){if(zv)return Mg;zv=1,Mg=s;var A=3;function s(c,d,y){var f=this.cells=[];if(c instanceof ArrayBuffer){this.arrayBuffer=c;var v=new Int32Array(this.arrayBuffer);c=v[0],this.d=(d=v[1])+2*(y=v[2]);for(var B=0;B<this.d*this.d;B++){var I=v[A+B],R=v[A+B+1];f.push(I===R?null:v.subarray(I,R))}var b=v[A+f.length+1];this.keys=v.subarray(v[A+f.length],b),this.bboxes=v.subarray(b),this.insert=this._insertReadonly}else{this.d=d+2*y;for(var E=0;E<this.d*this.d;E++)f.push([]);this.keys=[],this.bboxes=[]}this.n=d,this.extent=c,this.padding=y,this.scale=d/c,this.uid=0;var P=y/d*c;this.min=-P,this.max=c+P}return s.prototype.insert=function(c,d,y,f,v){this._forEachCell(d,y,f,v,this._insertCell,this.uid++),this.keys.push(c),this.bboxes.push(d),this.bboxes.push(y),this.bboxes.push(f),this.bboxes.push(v)},s.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},s.prototype._insertCell=function(c,d,y,f,v,B){this.cells[v].push(B)},s.prototype.query=function(c,d,y,f,v){var B=this.min,I=this.max;if(c<=B&&d<=B&&I<=y&&I<=f&&!v)return Array.prototype.slice.call(this.keys);var R=[];return this._forEachCell(c,d,y,f,this._queryCell,R,{},v),R},s.prototype._queryCell=function(c,d,y,f,v,B,I,R){var b=this.cells[v];if(b!==null)for(var E=this.keys,P=this.bboxes,T=0;T<b.length;T++){var F=b[T];if(I[F]===void 0){var D=4*F;(R?R(P[D+0],P[D+1],P[D+2],P[D+3]):c<=P[D+2]&&d<=P[D+3]&&y>=P[D+0]&&f>=P[D+1])?(I[F]=!0,B.push(E[F])):I[F]=!1}}},s.prototype._forEachCell=function(c,d,y,f,v,B,I,R){for(var b=this._convertToCellCoord(c),E=this._convertToCellCoord(d),P=this._convertToCellCoord(y),T=this._convertToCellCoord(f),F=b;F<=P;F++)for(var D=E;D<=T;D++){var V=this.d*D+F;if((!R||R(this._convertFromCellCoord(F),this._convertFromCellCoord(D),this._convertFromCellCoord(F+1),this._convertFromCellCoord(D+1)))&&v.call(this,c,d,y,f,V,B,I,R))return}},s.prototype._convertFromCellCoord=function(c){return(c-this.padding)/this.scale},s.prototype._convertToCellCoord=function(c){return Math.max(0,Math.min(this.d-1,Math.floor(c*this.scale)+this.padding))},s.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var c=this.cells,d=A+this.cells.length+1+1,y=0,f=0;f<this.cells.length;f++)y+=this.cells[f].length;var v=new Int32Array(d+y+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;for(var B=d,I=0;I<c.length;I++){var R=c[I];v[A+I]=B,v.set(R,B),B+=R.length}return v[A+c.length]=B,v.set(this.keys,B),v[A+c.length+1]=B+=this.keys.length,v.set(this.bboxes,B),B+=this.bboxes.length,v.buffer},Mg}(),yA=_(qw);const Ed={};function rr(A,s,c={}){Object.defineProperty(A,"_classRegistryKey",{value:s,writable:!1}),Ed[s]={klass:A,omit:c.omit||[]}}rr(Object,"Object"),yA.serialize=function(A,s){const c=A.toArrayBuffer();return s&&s.add(c),{buffer:c}},yA.deserialize=function(A){return new yA(A.buffer)},Object.defineProperty(yA,"name",{value:"Grid"}),rr(yA,"Grid"),rr(An,"Color"),rr(Error,"Error"),rr(Jn,"Formatted"),rr(Qn,"FormattedSection"),rr(Bu,"AJAXError"),rr(fo,"ResolvedImage"),rr(Fg,"StylePropertyFunction"),rr(Tg,"StyleExpression",{omit:["_evaluator"]}),rr(Rc,"ZoomDependentExpression"),rr(Uv,"ZoomConstantExpression"),rr(Es,"CompoundExpression",{omit:["_evaluate"]});for(const A in Sd)Ed[Sd[A]._classRegistryKey]||rr(Sd[A],`Expression${A}`);function Vv(A){return A&&typeof ArrayBuffer<"u"&&(A instanceof ArrayBuffer||A.constructor&&A.constructor.name==="ArrayBuffer")}function Xw(A){return self.ImageBitmap&&A instanceof ImageBitmap}function Oa(A,s){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp)return A;if(Vv(A)||Xw(A))return s&&s.add(A),A;if(ArrayBuffer.isView(A)){const c=A;return s&&s.add(c.buffer),c}if(A instanceof ImageData)return s&&s.add(A.data.buffer),A;if(Array.isArray(A)){const c=[];for(const d of A)c.push(Oa(d,s));return c}if(A instanceof Map){const c={$name:"Map"};for(const[d,y]of A.entries())c[d]=Oa(y);return c}if(A instanceof Set){const c={$name:"Set"};let d=0;for(const y of A.values())c[++d]=Oa(y);return c}if(typeof A=="object"){const c=A.constructor,d=c._classRegistryKey;if(!d)throw new Error(`can't serialize object of unregistered class ${d}`);const y=c.serialize?c.serialize(A,s):{};if(!c.serialize){for(const f in A)A.hasOwnProperty(f)&&(Ed[d].omit.indexOf(f)>=0||(y[f]=Oa(A[f],s)));A instanceof Error&&(y.message=A.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(y.$name=d),y}throw new Error("can't serialize object of type "+typeof A)}function vA(A){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||Vv(A)||Xw(A)||ArrayBuffer.isView(A)||A instanceof ImageData)return A;if(Array.isArray(A))return A.map(vA);if(typeof A=="object"){const s=A.$name||"Object";if(s==="Map"){const y=new Map;for(const f of Object.keys(A))f!=="$name"&&y.set(f,vA(A[f]));return y}if(s==="Set"){const y=new Set;for(const f of Object.keys(A))f!=="$name"&&y.add(vA(A[f]));return y}const{klass:c}=Ed[s];if(!c)throw new Error(`can't deserialize unregistered class ${s}`);if(c.deserialize)return c.deserialize(A);const d=Object.create(c.prototype);for(const y of Object.keys(A))y!=="$name"&&(d[y]=vA(A[y]));return d}throw new Error("can't deserialize object of type "+typeof A)}const dr={"Latin-1 Supplement":A=>A>=128&&A<=255,Arabic:A=>A>=1536&&A<=1791,"Arabic Supplement":A=>A>=1872&&A<=1919,"Arabic Extended-A":A=>A>=2208&&A<=2303,"Hangul Jamo":A=>A>=4352&&A<=4607,"Unified Canadian Aboriginal Syllabics":A=>A>=5120&&A<=5759,Khmer:A=>A>=6016&&A<=6143,"Unified Canadian Aboriginal Syllabics Extended":A=>A>=6320&&A<=6399,"General Punctuation":A=>A>=8192&&A<=8303,"Letterlike Symbols":A=>A>=8448&&A<=8527,"Number Forms":A=>A>=8528&&A<=8591,"Miscellaneous Technical":A=>A>=8960&&A<=9215,"Control Pictures":A=>A>=9216&&A<=9279,"Optical Character Recognition":A=>A>=9280&&A<=9311,"Enclosed Alphanumerics":A=>A>=9312&&A<=9471,"Geometric Shapes":A=>A>=9632&&A<=9727,"Miscellaneous Symbols":A=>A>=9728&&A<=9983,"Miscellaneous Symbols and Arrows":A=>A>=11008&&A<=11263,"CJK Radicals Supplement":A=>A>=11904&&A<=12031,"Kangxi Radicals":A=>A>=12032&&A<=12255,"Ideographic Description Characters":A=>A>=12272&&A<=12287,"CJK Symbols and Punctuation":A=>A>=12288&&A<=12351,Hiragana:A=>A>=12352&&A<=12447,Katakana:A=>A>=12448&&A<=12543,Bopomofo:A=>A>=12544&&A<=12591,"Hangul Compatibility Jamo":A=>A>=12592&&A<=12687,Kanbun:A=>A>=12688&&A<=12703,"Bopomofo Extended":A=>A>=12704&&A<=12735,"CJK Strokes":A=>A>=12736&&A<=12783,"Katakana Phonetic Extensions":A=>A>=12784&&A<=12799,"Enclosed CJK Letters and Months":A=>A>=12800&&A<=13055,"CJK Compatibility":A=>A>=13056&&A<=13311,"CJK Unified Ideographs Extension A":A=>A>=13312&&A<=19903,"Yijing Hexagram Symbols":A=>A>=19904&&A<=19967,"CJK Unified Ideographs":A=>A>=19968&&A<=40959,"Yi Syllables":A=>A>=40960&&A<=42127,"Yi Radicals":A=>A>=42128&&A<=42191,"Hangul Jamo Extended-A":A=>A>=43360&&A<=43391,"Hangul Syllables":A=>A>=44032&&A<=55215,"Hangul Jamo Extended-B":A=>A>=55216&&A<=55295,"Private Use Area":A=>A>=57344&&A<=63743,"CJK Compatibility Ideographs":A=>A>=63744&&A<=64255,"Arabic Presentation Forms-A":A=>A>=64336&&A<=65023,"Vertical Forms":A=>A>=65040&&A<=65055,"CJK Compatibility Forms":A=>A>=65072&&A<=65103,"Small Form Variants":A=>A>=65104&&A<=65135,"Arabic Presentation Forms-B":A=>A>=65136&&A<=65279,"Halfwidth and Fullwidth Forms":A=>A>=65280&&A<=65519,"CJK Unified Ideographs Extension B":A=>A>=131072&&A<=173791};function Rg(A){for(const s of A)if(Dg(s.charCodeAt(0)))return!0;return!1}function $F(A){for(const s of A)if(!kg(s.charCodeAt(0)))return!1;return!0}function kg(A){return!(dr.Arabic(A)||dr["Arabic Supplement"](A)||dr["Arabic Extended-A"](A)||dr["Arabic Presentation Forms-A"](A)||dr["Arabic Presentation Forms-B"](A))}function Dg(A){return!(A!==746&&A!==747&&(A<4352||!(dr["Bopomofo Extended"](A)||dr.Bopomofo(A)||dr["CJK Compatibility Forms"](A)&&!(A>=65097&&A<=65103)||dr["CJK Compatibility Ideographs"](A)||dr["CJK Compatibility"](A)||dr["CJK Radicals Supplement"](A)||dr["CJK Strokes"](A)||!(!dr["CJK Symbols and Punctuation"](A)||A>=12296&&A<=12305||A>=12308&&A<=12319||A===12336)||dr["CJK Unified Ideographs Extension A"](A)||dr["CJK Unified Ideographs"](A)||dr["Enclosed CJK Letters and Months"](A)||dr["Hangul Compatibility Jamo"](A)||dr["Hangul Jamo Extended-A"](A)||dr["Hangul Jamo Extended-B"](A)||dr["Hangul Jamo"](A)||dr["Hangul Syllables"](A)||dr.Hiragana(A)||dr["Ideographic Description Characters"](A)||dr.Kanbun(A)||dr["Kangxi Radicals"](A)||dr["Katakana Phonetic Extensions"](A)||dr.Katakana(A)&&A!==12540||!(!dr["Halfwidth and Fullwidth Forms"](A)||A===65288||A===65289||A===65293||A>=65306&&A<=65310||A===65339||A===65341||A===65343||A>=65371&&A<=65503||A===65507||A>=65512&&A<=65519)||!(!dr["Small Form Variants"](A)||A>=65112&&A<=65118||A>=65123&&A<=65126)||dr["Unified Canadian Aboriginal Syllabics"](A)||dr["Unified Canadian Aboriginal Syllabics Extended"](A)||dr["Vertical Forms"](A)||dr["Yijing Hexagram Symbols"](A)||dr["Yi Syllables"](A)||dr["Yi Radicals"](A))))}function Tp(A){return!(Dg(A)||function(s){return!!(dr["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||dr["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||dr["Letterlike Symbols"](s)||dr["Number Forms"](s)||dr["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||dr["Control Pictures"](s)&&s!==9251||dr["Optical Character Recognition"](s)||dr["Enclosed Alphanumerics"](s)||dr["Geometric Shapes"](s)||dr["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||dr["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||dr["CJK Symbols and Punctuation"](s)||dr.Katakana(s)||dr["Private Use Area"](s)||dr["CJK Compatibility Forms"](s)||dr["Small Form Variants"](s)||dr["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(A))}function Nv(A){return A>=1424&&A<=2303||dr["Arabic Presentation Forms-A"](A)||dr["Arabic Presentation Forms-B"](A)}function eP(A,s){return!(!s&&Nv(A)||A>=2304&&A<=3583||A>=3840&&A<=4255||dr.Khmer(A))}function tP(A){for(const s of A)if(Nv(s.charCodeAt(0)))return!0;return!1}const Ip="deferred",Fp="loading",Lg="loaded";let Td=null,as="unavailable",xh=null;const Zw=function(A){A&&typeof A=="string"&&A.indexOf("NetworkError")>-1&&(as="error"),Td&&Td(A)};function Qv(){Hv.fire(new Bl("pluginStateChange",{pluginStatus:as,pluginURL:xh}))}const Hv=new Ic,jv=function(){return as},Gv=function(){if(as!==Ip||!xh)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");as=Fp,Qv(),xh&&Cc({url:xh},A=>{A?Zw(A):(as=Lg,Qv())})},Ua={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>as===Lg||Ua.applyArabicShaping!=null,isLoading:()=>as===Fp,setState(A){as=A.pluginStatus,xh=A.pluginURL},isParsed:()=>Ua.applyArabicShaping!=null&&Ua.processBidirectionalText!=null&&Ua.processStyledBidirectionalText!=null,getPluginURL:()=>xh};class Gi{constructor(s,c){this.zoom=s,c?(this.now=c.now,this.fadeDuration=c.fadeDuration,this.transition=c.transition,this.pitch=c.pitch,this.brightness=c.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(s){return function(c,d){for(const y of c)if(!eP(y.charCodeAt(0),d))return!1;return!0}(s,Ua.isLoaded())}}class Og{constructor(s,c,d,y){this.property=s,this.value=c,this.expression=function(f,v,B,I){if(Eg(f))return new Fg(f,v);if(Ig(f)||Array.isArray(f)&&f.length>0){const R=Ww(f,v,B,I);if(R.result==="error")throw new Error(R.value.map(b=>`${b.key}: ${b.message}`).join(", "));return R.value}{let R=f;return typeof f=="string"&&v.type==="color"&&(R=An.parse(f)),{kind:"constant",configDependencies:new Set,evaluate:()=>R}}}(c===void 0?s.specification.default:c,s.specification,d,y)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(s,c,d){return this.property.possiblyEvaluate(this,s,c,d)}}class Kv{constructor(s,c,d){this.property=s,this.value=new Og(s,void 0,c,d)}transitioned(s,c){return new Jw(this.property,this.value,c,xo({},s.transition,this.transition),s.now)}untransitioned(){return new Jw(this.property,this.value,null,{},0)}}class Yw{constructor(s,c,d){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues),this._scope=c,this._options=d,this.configDependencies=new Set}getValue(s){return Qs(this._values[s].value.value)}setValue(s,c){this._values.hasOwnProperty(s)||(this._values[s]=new Kv(this._values[s].property,this._scope,this._options)),this._values[s].value=new Og(this._values[s].property,c===null?void 0:Qs(c),this._scope,this._options),this._values[s].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[s].value.expression.configDependencies]))}setTransitionOrValue(s,c){c&&(this._options=c);const d=this._properties.properties;if(s)for(const y in s){const f=s[y];if(ka(y,"-transition")){const v=y.slice(0,-11);d[v]&&this.setTransition(v,f)}else d.hasOwnProperty(y)&&this.setValue(y,f)}}getTransition(s){return Qs(this._values[s].transition)}setTransition(s,c){this._values.hasOwnProperty(s)||(this._values[s]=new Kv(this._values[s].property)),this._values[s].transition=Qs(c)||void 0}serialize(){const s={};for(const c of Object.keys(this._values)){const d=this.getValue(c);d!==void 0&&(s[c]=d);const y=this.getTransition(c);y!==void 0&&(s[`${c}-transition`]=y)}return s}transitioned(s,c){const d=new $w(this._properties);for(const y of Object.keys(this._values))d._values[y]=this._values[y].transitioned(s,c._values[y]);return d}untransitioned(){const s=new $w(this._properties);for(const c of Object.keys(this._values))s._values[c]=this._values[c].untransitioned();return s}}class Jw{constructor(s,c,d,y,f){const v=y.delay||0,B=y.duration||0;f=f||0,this.property=s,this.value=c,this.begin=f+v,this.end=this.begin+B,s.specification.transition&&(y.delay||y.duration)&&(this.prior=d)}possiblyEvaluate(s,c,d){const y=s.now||0,f=this.value.possiblyEvaluate(s,c,d),v=this.prior;if(v){if(y>this.end)return this.prior=null,f;if(this.value.isDataDriven())return this.prior=null,f;if(y<this.begin)return v.possiblyEvaluate(s,c,d);{const B=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(s,c,d),f,Po(B))}}return f}}class $w{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,c,d){const y=new Fd(this._properties);for(const f of Object.keys(this._values))y._values[f]=this._values[f].possiblyEvaluate(s,c,d);return y}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class rP{constructor(s,c,d){this._properties=s,this._values=Object.create(s.defaultPropertyValues),this._scope=c,this._options=d,this.configDependencies=new Set}getValue(s){return Qs(this._values[s].value)}setValue(s,c){this._values[s]=new Og(this._values[s].property,c===null?void 0:Qs(c),this._scope,this._options),this._values[s].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[s].expression.configDependencies]))}serialize(){const s={};for(const c of Object.keys(this._values)){const d=this.getValue(c);d!==void 0&&(s[c]=d)}return s}possiblyEvaluate(s,c,d){const y=new Fd(this._properties);for(const f of Object.keys(this._values))y._values[f]=this._values[f].possiblyEvaluate(s,c,d);return y}}class Id{constructor(s,c,d){this.property=s,this.value=c,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,c,d,y){return this.property.evaluate(this.value,this.parameters,s,c,d,y)}}class Fd{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class zt{constructor(s){this.specification=s}possiblyEvaluate(s,c){return s.expression.evaluate(c)}interpolate(s,c,d){const y=rl[this.specification.type];return y?y(s,c,d):s}}class mr{constructor(s,c){this.specification=s,this.overrides=c}possiblyEvaluate(s,c,d,y){return new Id(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(c,null,{},d,y)}:s.expression,c)}interpolate(s,c,d){if(s.value.kind!=="constant"||c.value.kind!=="constant")return s;if(s.value.value===void 0||c.value.value===void 0)return new Id(this,{kind:"constant",value:void 0},s.parameters);const y=rl[this.specification.type];return y?new Id(this,{kind:"constant",value:y(s.value.value,c.value.value,d)},s.parameters):s}evaluate(s,c,d,y,f,v){return s.kind==="constant"?s.value:s.evaluate(c,d,y,f,v)}}class $l{constructor(s){this.specification=s}possiblyEvaluate(s,c,d,y){return!!s.expression.evaluate(c,null,{},d,y)}interpolate(){return!1}}class wi{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const c=new Gi(0,{});for(const d in s){const y=s[d];y.specification.overridable&&this.overridableProperties.push(d);const f=this.defaultPropertyValues[d]=new Og(y,void 0),v=this.defaultTransitionablePropertyValues[d]=new Kv(y);this.defaultTransitioningPropertyValues[d]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[d]=f.possiblyEvaluate(c)}}}rr(mr,"DataDrivenProperty"),rr(zt,"DataConstantProperty"),rr($l,"ColorRampProperty");var ot=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"imports":{"type":"array","value":"import"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"experimental":true,"type":"featuresets"}},"featuresets":{"experimental":true,"*":{"type":"featureset"}},"featureset":{"experimental":true,"selectors":{"type":"array","value":"selector"}},"selector":{"experimental":true,"layer":{"type":"string","required":true},"properties":{"type":"selectorProperty","required":false},"featureNamespace":{"type":"string","required":false}},"selectorProperty":{"experimental":true,"*":{"type":"*"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","property-type":"data-constant","expression":{},"required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"property-type":"data-constant"},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"experimental":true,"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{"experimental":true},"hillshade":{},"model":{"experimental":true},"background":{},"sky":{},"slot":{},"clip":{"experimental":true}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{},"property-type":"data-constant","experimental":true},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{},"property-type":"data-constant","experimental":true}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","experimental":true,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"colorTheme":{"data":{"type":"string","property-type":"data-constant","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","experimental":true,"default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","experimental":true,"default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"experimental":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-trim-fade-range":{"type":"array","value":"number","experimental":true,"length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-trim-color":{"type":"color","experimental":true,"default":"transparent","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"property-type":"data-constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1},"default":"ground","experimental":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"experimental":true,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]},"property-type":"data-constant"},"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"model-front-cutoff":{"type":"array","private":true,"value":"number","property-type":"data-constant","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Pp(A){return A instanceof Number||A instanceof String||A instanceof Boolean?A.valueOf():A}function Ug(A){if(Array.isArray(A))return A.map(Ug);if(A instanceof Object&&!(A instanceof Number||A instanceof String||A instanceof Boolean)){const s={};for(const c in A)s[c]=Ug(A[c]);return s}return Pp(A)}function Wv(A){if(A===!0||A===!1)return!0;if(!Array.isArray(A)||A.length===0)return!1;switch(A[0]){case"has":return A.length>=2&&A[1]!=="$id"&&A[1]!=="$type";case"in":return A.length>=3&&(typeof A[1]!="string"||Array.isArray(A[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return A.length!==3||Array.isArray(A[1])||Array.isArray(A[2]);case"any":case"all":for(const s of A.slice(1))if(!Wv(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}function ec(A,s="",c=null,d="fill"){if(A==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Wv(A)||(A=zg(A));const y=A;let f=!0;try{f=function(E){if(!Pd(E))return E;let P=Ug(E);return _A(P),P=qv(P),P}(y)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(y,null,2)}
        `)}const v=ot[`filter_${d}`],B=Ep(f,v,s,c);let I=null;if(B.result==="error")throw new Error(B.value.map(E=>`${E.key}: ${E.message}`).join(", "));I=(E,P,T)=>B.value.evaluate(E,P,{},T);let R=null,b=null;if(f!==y){const E=Ep(y,v,s,c);if(E.result==="error")throw new Error(E.value.map(P=>`${P.key}: ${P.message}`).join(", "));R=(P,T,F,D,V)=>E.value.evaluate(P,T,{},F,void 0,void 0,D,V),b=!vp(E.value.expression)}return{filter:I,dynamicFilter:R||void 0,needGeometry:eB(f),needFeature:!!b}}function qv(A){if(!Array.isArray(A))return A;const s=function(c){if(nP.has(c[0])){for(let d=1;d<c.length;d++)if(Pd(c[d]))return!0}return c}(A);return s===!0?s:s.map(c=>qv(c))}function _A(A){let s=!1;const c=[];if(A[0]==="case"){for(let d=1;d<A.length-1;d+=2)s=s||Pd(A[d]),c.push(A[d+1]);c.push(A[A.length-1])}else if(A[0]==="match"){s=s||Pd(A[1]);for(let d=2;d<A.length-1;d+=2)c.push(A[d+1]);c.push(A[A.length-1])}else if(A[0]==="step"){s=s||Pd(A[1]);for(let d=1;d<A.length-1;d+=2)c.push(A[d+1])}s&&(A.length=0,A.push("any",...c));for(let d=1;d<A.length;d++)_A(A[d])}function Pd(A){if(!Array.isArray(A))return!1;if((s=A[0])==="pitch"||s==="distance-from-center")return!0;var s;for(let c=1;c<A.length;c++)if(Pd(A[c]))return!0;return!1}const nP=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function iP(A,s){return A<s?-1:A>s?1:0}function eB(A){if(!Array.isArray(A))return!1;if(A[0]==="within"||A[0]==="distance")return!0;for(let s=1;s<A.length;s++)if(eB(A[s]))return!0;return!1}function zg(A){if(!A)return!0;const s=A[0];return A.length<=1?s!=="any":s==="=="?Vg(A[1],A[2],"=="):s==="!="?Rp(Vg(A[1],A[2],"==")):s==="<"||s===">"||s==="<="||s===">="?Vg(A[1],A[2],s):s==="any"?(c=A.slice(1),["any"].concat(c.map(zg))):s==="all"?["all"].concat(A.slice(1).map(zg)):s==="none"?["all"].concat(A.slice(1).map(zg).map(Rp)):s==="in"?Ng(A[1],A.slice(2)):s==="!in"?Rp(Ng(A[1],A.slice(2))):s==="has"?Mp(A[1]):s!=="!has"||Rp(Mp(A[1]));var c}function Vg(A,s,c){switch(A){case"$type":return[`filter-type-${c}`,s];case"$id":return[`filter-id-${c}`,s];default:return[`filter-${c}`,A,s]}}function Ng(A,s){if(s.length===0)return!1;switch(A){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(c=>typeof c!=typeof s[0])?["filter-in-large",A,["literal",s.sort(iP)]]:["filter-in-small",A,["literal",s]]}}function Mp(A){switch(A){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",A]}}function Rp(A){return["!",A]}const Md="";function tB(A,s){return s?`${A}${Md}${s}`:A}const tc="-transition",oP=new Set(["fill","line","background","hillshade","raster"]);class Xs extends Ic{constructor(s,c,d,y,f){if(super(),this.id=s.id,this.fqid=tB(this.id,d),this.type=s.type,this.scope=d,this.lut=y,this.options=f,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,s.type!=="custom"&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&s.type!=="sky"&&s.type!=="slot"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),s.slot&&(this.slot=s.slot),c.layout&&(this._unevaluatedLayout=new rP(c.layout,this.scope,f),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),c.paint)){this._transitionablePaint=new Yw(c.paint,this.scope,f);for(const v in s.paint)this.setPaintProperty(v,s.paint[v]);for(const v in s.layout)this.setLayoutProperty(v,s.layout[v]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Fd(c.paint)}}onAdd(s){}onRemove(s){}isDraped(s){return!this.is3D()&&oP.has(this.type)}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,c){if(this.type==="custom"&&s==="visibility")return void(this.visibility=c);const d=this._unevaluatedLayout;d._properties.properties[s]&&(d.setValue(s,c),this.configDependencies=new Set([...this.configDependencies,...d.configDependencies]),s==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0})}getPaintProperty(s){return ka(s,tc)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,c){const d=this._transitionablePaint,y=d._properties.properties;if(ka(s,tc)){const E=s.slice(0,-11);return y[E]&&d.setTransition(E,c||void 0),!1}if(!y[s])return!1;const f=d._values[s],v=f.value.isDataDriven(),B=f.value;d.setValue(s,c),this.configDependencies=new Set([...this.configDependencies,...d.configDependencies]),this._handleSpecialPaintPropertyUpdate(s);const I=d._values[s].value,R=I.isDataDriven(),b=ka(s,"pattern")||s==="line-dasharray";return R||v||b||this._handleOverridablePaintPropertyUpdate(s,B,I)}_handleSpecialPaintPropertyUpdate(s){}getProgramIds(){return null}getDefaultProgramParams(s,c,d){return null}_handleOverridablePaintPropertyUpdate(s,c,d){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,c){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,c)}serialize(){return tl({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(s,c)=>!(s===void 0||c==="layout"&&!Object.keys(s).length||c==="paint"&&!Object.keys(s).length))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const s in this.paint._values){const c=this.paint.get(s);if(c instanceof Id&&Sg(c.property.specification)&&(c.value.kind==="source"||c.value.kind==="composite")&&c.value.isStateDependent)return!0}return!1}compileFilter(s){this._filterCompiled||(this._featureFilter=ec(this.filter,this.scope,s),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(s){this._stats&&(s.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(s){}queryIntersectsFeature(s,c,d,y,f,v,B,I,R){}queryIntersectsMatchingFeature(s,c,d,y){}}const sP={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class kp{constructor(s,c){this._structArray=s,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class fi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,c){return s._trim(),c&&(s.isTransferred=!0,c.add(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const c=Object.create(this.prototype);return c.arrayBuffer=s.arrayBuffer,c.length=s.length,c.capacity=s.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...s){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...s){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Bn(A,s=1){let c=0,d=0;return{members:A.map(y=>{const f=sP[y.type].BYTES_PER_ELEMENT,v=c=rB(c,Math.max(s,f)),B=y.components||1;return d=Math.max(d,f),c+=f*B,{name:y.name,type:y.type,components:B,offset:v}}),size:rB(c,Math.max(d,s)),alignment:s}}function rB(A,s){return Math.ceil(A/s)*s}class bh extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c){const d=this.length;return this.resize(d+1),this.emplace(d,s,c)}emplace(s,c,d){const y=2*s;return this.int16[y+0]=c,this.int16[y+1]=d,s}}bh.prototype.bytesPerElement=4,rr(bh,"StructArrayLayout2i4");class Qg extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,d){const y=this.length;return this.resize(y+1),this.emplace(y,s,c,d)}emplace(s,c,d,y){const f=3*s;return this.int16[f+0]=c,this.int16[f+1]=d,this.int16[f+2]=y,s}}Qg.prototype.bytesPerElement=6,rr(Qg,"StructArrayLayout3i6");class wh extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,d,y){const f=this.length;return this.resize(f+1),this.emplace(f,s,c,d,y)}emplace(s,c,d,y,f){const v=4*s;return this.int16[v+0]=c,this.int16[v+1]=d,this.int16[v+2]=y,this.int16[v+3]=f,s}}wh.prototype.bytesPerElement=8,rr(wh,"StructArrayLayout4i8");class Hg extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,d,y,f){const v=this.length;return this.resize(v+1),this.emplace(v,s,c,d,y,f)}emplace(s,c,d,y,f,v){const B=5*s;return this.int16[B+0]=c,this.int16[B+1]=d,this.int16[B+2]=y,this.int16[B+3]=f,this.int16[B+4]=v,s}}Hg.prototype.bytesPerElement=10,rr(Hg,"StructArrayLayout5i10");class Xv extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,d,y,f,v,B){const I=this.length;return this.resize(I+1),this.emplace(I,s,c,d,y,f,v,B)}emplace(s,c,d,y,f,v,B,I){const R=6*s,b=12*s,E=3*s;return this.int16[R+0]=c,this.int16[R+1]=d,this.uint8[b+4]=y,this.uint8[b+5]=f,this.uint8[b+6]=v,this.uint8[b+7]=B,this.float32[E+2]=I,s}}Xv.prototype.bytesPerElement=12,rr(Xv,"StructArrayLayout2i4ub1f12");class Ru extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,d,y){const f=this.length;return this.resize(f+1),this.emplace(f,s,c,d,y)}emplace(s,c,d,y,f){const v=4*s;return this.float32[v+0]=c,this.float32[v+1]=d,this.float32[v+2]=y,this.float32[v+3]=f,s}}Ru.prototype.bytesPerElement=16,rr(Ru,"StructArrayLayout4f16");class Bh extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,d){const y=this.length;return this.resize(y+1),this.emplace(y,s,c,d)}emplace(s,c,d,y){const f=3*s;return this.float32[f+0]=c,this.float32[f+1]=d,this.float32[f+2]=y,s}}Bh.prototype.bytesPerElement=12,rr(Bh,"StructArrayLayout3f12");class ku extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,d,y,f){const v=this.length;return this.resize(v+1),this.emplace(v,s,c,d,y,f)}emplace(s,c,d,y,f,v){const B=6*s,I=3*s;return this.uint16[B+0]=c,this.uint16[B+1]=d,this.uint16[B+2]=y,this.uint16[B+3]=f,this.float32[I+2]=v,s}}ku.prototype.bytesPerElement=12,rr(ku,"StructArrayLayout4ui1f12");class xA extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,d,y){const f=this.length;return this.resize(f+1),this.emplace(f,s,c,d,y)}emplace(s,c,d,y,f){const v=4*s;return this.uint16[v+0]=c,this.uint16[v+1]=d,this.uint16[v+2]=y,this.uint16[v+3]=f,s}}xA.prototype.bytesPerElement=8,rr(xA,"StructArrayLayout4ui8");class jg extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,d,y,f,v){const B=this.length;return this.resize(B+1),this.emplace(B,s,c,d,y,f,v)}emplace(s,c,d,y,f,v,B){const I=6*s;return this.int16[I+0]=c,this.int16[I+1]=d,this.int16[I+2]=y,this.int16[I+3]=f,this.int16[I+4]=v,this.int16[I+5]=B,s}}jg.prototype.bytesPerElement=12,rr(jg,"StructArrayLayout6i12");class Zv extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,d,y,f,v,B,I,R,b,E,P){const T=this.length;return this.resize(T+1),this.emplace(T,s,c,d,y,f,v,B,I,R,b,E,P)}emplace(s,c,d,y,f,v,B,I,R,b,E,P,T){const F=12*s;return this.int16[F+0]=c,this.int16[F+1]=d,this.int16[F+2]=y,this.int16[F+3]=f,this.uint16[F+4]=v,this.uint16[F+5]=B,this.uint16[F+6]=I,this.uint16[F+7]=R,this.int16[F+8]=b,this.int16[F+9]=E,this.int16[F+10]=P,this.int16[F+11]=T,s}}Zv.prototype.bytesPerElement=24,rr(Zv,"StructArrayLayout4i4ui4i24");class Yv extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,d,y,f,v){const B=this.length;return this.resize(B+1),this.emplace(B,s,c,d,y,f,v)}emplace(s,c,d,y,f,v,B){const I=10*s,R=5*s;return this.int16[I+0]=c,this.int16[I+1]=d,this.int16[I+2]=y,this.float32[R+2]=f,this.float32[R+3]=v,this.float32[R+4]=B,s}}Yv.prototype.bytesPerElement=20,rr(Yv,"StructArrayLayout3i3f20");class Jv extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const c=this.length;return this.resize(c+1),this.emplace(c,s)}emplace(s,c){return this.uint32[1*s+0]=c,s}}Jv.prototype.bytesPerElement=4,rr(Jv,"StructArrayLayout1ul4");class Ch extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c){const d=this.length;return this.resize(d+1),this.emplace(d,s,c)}emplace(s,c,d){const y=2*s;return this.uint16[y+0]=c,this.uint16[y+1]=d,s}}Ch.prototype.bytesPerElement=4,rr(Ch,"StructArrayLayout2ui4");class Rd extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,d,y,f,v,B,I,R,b,E,P,T){const F=this.length;return this.resize(F+1),this.emplace(F,s,c,d,y,f,v,B,I,R,b,E,P,T)}emplace(s,c,d,y,f,v,B,I,R,b,E,P,T,F){const D=20*s,V=10*s;return this.int16[D+0]=c,this.int16[D+1]=d,this.int16[D+2]=y,this.int16[D+3]=f,this.int16[D+4]=v,this.float32[V+3]=B,this.float32[V+4]=I,this.float32[V+5]=R,this.float32[V+6]=b,this.int16[D+14]=E,this.uint32[V+8]=P,this.uint16[D+18]=T,this.uint16[D+19]=F,s}}Rd.prototype.bytesPerElement=40,rr(Rd,"StructArrayLayout5i4f1i1ul2ui40");class bA extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,d,y,f,v,B){const I=this.length;return this.resize(I+1),this.emplace(I,s,c,d,y,f,v,B)}emplace(s,c,d,y,f,v,B,I){const R=8*s;return this.int16[R+0]=c,this.int16[R+1]=d,this.int16[R+2]=y,this.int16[R+4]=f,this.int16[R+5]=v,this.int16[R+6]=B,this.int16[R+7]=I,s}}bA.prototype.bytesPerElement=16,rr(bA,"StructArrayLayout3i2i2i16");class da extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,c,d,y,f){const v=this.length;return this.resize(v+1),this.emplace(v,s,c,d,y,f)}emplace(s,c,d,y,f,v){const B=4*s,I=8*s;return this.float32[B+0]=c,this.float32[B+1]=d,this.float32[B+2]=y,this.int16[I+6]=f,this.int16[I+7]=v,s}}da.prototype.bytesPerElement=16,rr(da,"StructArrayLayout2f1f2i16");class kd extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,d,y,f,v){const B=this.length;return this.resize(B+1),this.emplace(B,s,c,d,y,f,v)}emplace(s,c,d,y,f,v,B){const I=20*s,R=5*s;return this.uint8[I+0]=c,this.uint8[I+1]=d,this.float32[R+1]=y,this.float32[R+2]=f,this.float32[R+3]=v,this.float32[R+4]=B,s}}kd.prototype.bytesPerElement=20,rr(kd,"StructArrayLayout2ub4f20");class gs extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,d){const y=this.length;return this.resize(y+1),this.emplace(y,s,c,d)}emplace(s,c,d,y){const f=3*s;return this.uint16[f+0]=c,this.uint16[f+1]=d,this.uint16[f+2]=y,s}}gs.prototype.bytesPerElement=6,rr(gs,"StructArrayLayout3ui6");class $v extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s,c,d,y,f,v,B,I,R,b,E,P,T,F,D,V,H,Z,J,G,te){const oe=this.length;return this.resize(oe+1),this.emplace(oe,s,c,d,y,f,v,B,I,R,b,E,P,T,F,D,V,H,Z,J,G,te)}emplace(s,c,d,y,f,v,B,I,R,b,E,P,T,F,D,V,H,Z,J,G,te,oe){const pe=30*s,we=15*s,Ce=60*s;return this.int16[pe+0]=c,this.int16[pe+1]=d,this.int16[pe+2]=y,this.float32[we+2]=f,this.float32[we+3]=v,this.uint16[pe+8]=B,this.uint16[pe+9]=I,this.uint32[we+5]=R,this.uint32[we+6]=b,this.uint32[we+7]=E,this.uint16[pe+16]=P,this.uint16[pe+17]=T,this.uint16[pe+18]=F,this.float32[we+10]=D,this.float32[we+11]=V,this.uint8[Ce+48]=H,this.uint8[Ce+49]=Z,this.uint8[Ce+50]=J,this.uint32[we+13]=G,this.int16[pe+28]=te,this.uint8[Ce+58]=oe,s}}$v.prototype.bytesPerElement=60,rr($v,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class e_ extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s,c,d,y,f,v,B,I,R,b,E,P,T,F,D,V,H,Z,J,G,te,oe,pe,we,Ce,xe,De,Ie,Oe,Ke,Ze,Ye){const et=this.length;return this.resize(et+1),this.emplace(et,s,c,d,y,f,v,B,I,R,b,E,P,T,F,D,V,H,Z,J,G,te,oe,pe,we,Ce,xe,De,Ie,Oe,Ke,Ze,Ye)}emplace(s,c,d,y,f,v,B,I,R,b,E,P,T,F,D,V,H,Z,J,G,te,oe,pe,we,Ce,xe,De,Ie,Oe,Ke,Ze,Ye,et){const at=20*s,rt=40*s,_t=80*s;return this.float32[at+0]=c,this.float32[at+1]=d,this.int16[rt+4]=y,this.int16[rt+5]=f,this.int16[rt+6]=v,this.int16[rt+7]=B,this.int16[rt+8]=I,this.int16[rt+9]=R,this.int16[rt+10]=b,this.int16[rt+11]=E,this.int16[rt+12]=P,this.uint16[rt+13]=T,this.uint16[rt+14]=F,this.uint16[rt+15]=D,this.uint16[rt+16]=V,this.uint16[rt+17]=H,this.uint16[rt+18]=Z,this.uint16[rt+19]=J,this.uint16[rt+20]=G,this.uint16[rt+21]=te,this.uint16[rt+22]=oe,this.uint16[rt+23]=pe,this.uint16[rt+24]=we,this.uint16[rt+25]=Ce,this.uint16[rt+26]=xe,this.uint16[rt+27]=De,this.uint32[at+14]=Ie,this.float32[at+15]=Oe,this.float32[at+16]=Ke,this.float32[at+17]=Ze,this.float32[at+18]=Ye,this.uint8[_t+76]=et,s}}e_.prototype.bytesPerElement=80,rr(e_,"StructArrayLayout2f9i15ui1ul4f1ub80");class Dd extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const c=this.length;return this.resize(c+1),this.emplace(c,s)}emplace(s,c){return this.float32[1*s+0]=c,s}}Dd.prototype.bytesPerElement=4,rr(Dd,"StructArrayLayout1f4");class Du extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,d,y,f){const v=this.length;return this.resize(v+1),this.emplace(v,s,c,d,y,f)}emplace(s,c,d,y,f,v){const B=5*s;return this.float32[B+0]=c,this.float32[B+1]=d,this.float32[B+2]=y,this.float32[B+3]=f,this.float32[B+4]=v,s}}Du.prototype.bytesPerElement=20,rr(Du,"StructArrayLayout5f20");class t_ extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,d,y,f,v,B){const I=this.length;return this.resize(I+1),this.emplace(I,s,c,d,y,f,v,B)}emplace(s,c,d,y,f,v,B,I){const R=7*s;return this.float32[R+0]=c,this.float32[R+1]=d,this.float32[R+2]=y,this.float32[R+3]=f,this.float32[R+4]=v,this.float32[R+5]=B,this.float32[R+6]=I,s}}t_.prototype.bytesPerElement=28,rr(t_,"StructArrayLayout7f28");class Dp extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,c,d,y){const f=this.length;return this.resize(f+1),this.emplace(f,s,c,d,y)}emplace(s,c,d,y,f){const v=6*s;return this.uint32[3*s+0]=c,this.uint16[v+2]=d,this.uint16[v+3]=y,this.uint16[v+4]=f,s}}Dp.prototype.bytesPerElement=12,rr(Dp,"StructArrayLayout1ul3ui12");class r_ extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const c=this.length;return this.resize(c+1),this.emplace(c,s)}emplace(s,c){return this.uint16[1*s+0]=c,s}}r_.prototype.bytesPerElement=2,rr(r_,"StructArrayLayout1ui2");class Lp extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c){const d=this.length;return this.resize(d+1),this.emplace(d,s,c)}emplace(s,c,d){const y=2*s;return this.float32[y+0]=c,this.float32[y+1]=d,s}}Lp.prototype.bytesPerElement=8,rr(Lp,"StructArrayLayout2f8");class Op extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,d,y,f,v,B,I,R,b,E,P,T,F,D,V){const H=this.length;return this.resize(H+1),this.emplace(H,s,c,d,y,f,v,B,I,R,b,E,P,T,F,D,V)}emplace(s,c,d,y,f,v,B,I,R,b,E,P,T,F,D,V,H){const Z=16*s;return this.float32[Z+0]=c,this.float32[Z+1]=d,this.float32[Z+2]=y,this.float32[Z+3]=f,this.float32[Z+4]=v,this.float32[Z+5]=B,this.float32[Z+6]=I,this.float32[Z+7]=R,this.float32[Z+8]=b,this.float32[Z+9]=E,this.float32[Z+10]=P,this.float32[Z+11]=T,this.float32[Z+12]=F,this.float32[Z+13]=D,this.float32[Z+14]=V,this.float32[Z+15]=H,s}}Op.prototype.bytesPerElement=64,rr(Op,"StructArrayLayout16f64");class Gg extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,c,d,y,f,v,B){const I=this.length;return this.resize(I+1),this.emplace(I,s,c,d,y,f,v,B)}emplace(s,c,d,y,f,v,B,I){const R=10*s,b=5*s;return this.uint16[R+0]=c,this.uint16[R+1]=d,this.uint16[R+2]=y,this.uint16[R+3]=f,this.float32[b+2]=v,this.float32[b+3]=B,this.float32[b+4]=I,s}}Gg.prototype.bytesPerElement=20,rr(Gg,"StructArrayLayout4ui3f20");class Kg extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s){const c=this.length;return this.resize(c+1),this.emplace(c,s)}emplace(s,c){return this.int16[1*s+0]=c,s}}Kg.prototype.bytesPerElement=2,rr(Kg,"StructArrayLayout1i2");class Wg extends fi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(s){const c=this.length;return this.resize(c+1),this.emplace(c,s)}emplace(s,c){return this.uint8[1*s+0]=c,s}}Wg.prototype.bytesPerElement=1,rr(Wg,"StructArrayLayout1ub1");class nB extends kp{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}nB.prototype.size=40;class qg extends Rd{get(s){return new nB(this,s)}}rr(qg,"CollisionBoxArray");class Up extends kp{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(s){this._structArray.uint8[this._pos1+49]=s}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(s){this._structArray.uint8[this._pos1+50]=s}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(s){this._structArray.uint32[this._pos4+13]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(s){this._structArray.uint8[this._pos1+58]=s}}Up.prototype.size=60;class n_ extends $v{get(s){return new Up(this,s)}}rr(n_,"PlacedSymbolArray");class iB extends kp{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(s){this._structArray.uint32[this._pos4+14]=s}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(s){this._structArray.float32[this._pos4+18]=s}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}}iB.prototype.size=80;class i_ extends e_{get(s){return new iB(this,s)}}rr(i_,"SymbolInstanceArray");class oB extends Dd{getoffsetX(s){return this.float32[1*s+0]}}rr(oB,"GlyphOffsetArray");class Xg extends bh{getx(s){return this.int16[2*s+0]}gety(s){return this.int16[2*s+1]}}rr(Xg,"SymbolLineVertexArray");class sB extends kp{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}sB.prototype.size=12;class aB extends Dp{get(s){return new sB(this,s)}}rr(aB,"FeatureIndexArray");class lB extends Ch{geta_centroid_pos0(s){return this.uint16[2*s+0]}geta_centroid_pos1(s){return this.uint16[2*s+1]}}rr(lB,"FillExtrusionCentroidArray");class cB extends kp{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}cB.prototype.size=6;class o_ extends Qg{get(s){return new cB(this,s)}}rr(o_,"FillExtrusionWallArray");const aP=Bn([{name:"a_pos",components:2,type:"Int16"}],4),lP=Bn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Ki{constructor(s=[]){this.segments=s}_prepareSegment(s,c,d,y){let f=this.segments[this.segments.length-1];return s>Ki.MAX_VERTEX_ARRAY_LENGTH&&an(`Max vertices per segment is ${Ki.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`),(!f||f.vertexLength+s>Ki.MAX_VERTEX_ARRAY_LENGTH||f.sortKey!==y)&&(f={vertexOffset:c,primitiveOffset:d,vertexLength:0,primitiveLength:0},y!==void 0&&(f.sortKey=y),this.segments.push(f)),f}prepareSegment(s,c,d,y){return this._prepareSegment(s,c.length,d.length,y)}get(){return this.segments}destroy(){for(const s of this.segments)for(const c in s.vaos)s.vaos[c].destroy()}static simpleSegment(s,c,d,y){return new Ki([{vertexOffset:s,primitiveOffset:c,vertexLength:d,primitiveLength:y,vaos:{},sortKey:0}])}}function uB(A,s){return 256*(A=Er(Math.floor(A),0,255))+Er(Math.floor(s),0,255)}Ki.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,rr(Ki,"SegmentVector");const cP=Bn([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),uP=Bn([{name:"a_dash",components:4,type:"Uint16"}]);class zp{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(s,c,d,y){this.ids.push(hB(s)),this.positions.push(c,d,y)}eachPosition(s,c){const d=hB(s);let y=0,f=this.ids.length-1;for(;y<f;){const v=y+f>>1;this.ids[v]>=d?f=v:y=v+1}for(;this.ids[y]===d;)c(this.positions[3*y],this.positions[3*y+1],this.positions[3*y+2]),y++}static serialize(s,c){const d=new Float64Array(s.ids),y=new Uint32Array(s.positions);return Ld(d,y,0,d.length-1),c&&(c.add(d.buffer),c.add(y.buffer)),{ids:d,positions:y}}static deserialize(s){const c=new zp;let d;c.ids=s.ids,c.positions=s.positions;for(const y of c.ids)y!==d&&c.uniqueIds.push(y),d=y;return c.indexed=!0,c}}function hB(A){const s=+A;return!isNaN(s)&&Number.MIN_SAFE_INTEGER<=s&&s<=Number.MAX_SAFE_INTEGER?s:wo(String(A))}function Ld(A,s,c,d){for(;c<d;){const y=A[c+d>>1];let f=c-1,v=d+1;for(;;){do f++;while(A[f]<y);do v--;while(A[v]>y);if(f>=v)break;Zg(A,f,v),Zg(s,3*f,3*v),Zg(s,3*f+1,3*v+1),Zg(s,3*f+2,3*v+2)}v-c<d-v?(Ld(A,s,c,v),c=v+1):(Ld(A,s,v+1,d),d=v)}}function Zg(A,s,c){const d=A[s];A[s]=A[c],A[c]=d}rr(zp,"FeaturePositionMap");class Lu{constructor(s){this.gl=s.gl,this.initialized=!1}fetchUniformLocation(s,c){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(s,c),this.initialized=!0),!!this.location}set(s,c,d){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class wA extends Lu{constructor(s){super(s),this.current=0}set(s,c,d){this.fetchUniformLocation(s,c)&&this.current!==d&&(this.current=d,this.gl.uniform1i(this.location,d))}}class Zs extends Lu{constructor(s){super(s),this.current=0}set(s,c,d){this.fetchUniformLocation(s,c)&&this.current!==d&&(this.current=d,this.gl.uniform1f(this.location,d))}}class kc extends Lu{constructor(s){super(s),this.current=[0,0]}set(s,c,d){this.fetchUniformLocation(s,c)&&(d[0]===this.current[0]&&d[1]===this.current[1]||(this.current=d,this.gl.uniform2f(this.location,d[0],d[1])))}}class s_ extends Lu{constructor(s){super(s),this.current=[0,0,0]}set(s,c,d){this.fetchUniformLocation(s,c)&&(d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]||(this.current=d,this.gl.uniform3f(this.location,d[0],d[1],d[2])))}}class Yg extends Lu{constructor(s){super(s),this.current=[0,0,0,0]}set(s,c,d){this.fetchUniformLocation(s,c)&&(d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]&&d[3]===this.current[3]||(this.current=d,this.gl.uniform4f(this.location,d[0],d[1],d[2],d[3])))}}class a_ extends Lu{constructor(s){super(s),this.current=An.transparent.toRenderColor(null)}set(s,c,d){this.fetchUniformLocation(s,c)&&(d.r===this.current.r&&d.g===this.current.g&&d.b===this.current.b&&d.a===this.current.a||(this.current=d,this.gl.uniform4f(this.location,d.r,d.g,d.b,d.a)))}}const AB=new Float32Array(16);class Vp extends Lu{constructor(s){super(s),this.current=AB}set(s,c,d){if(this.fetchUniformLocation(s,c)){if(d[12]!==this.current[12]||d[0]!==this.current[0])return this.current=d,void this.gl.uniformMatrix4fv(this.location,!1,d);for(let y=1;y<16;y++)if(d[y]!==this.current[y]){this.current=d,this.gl.uniformMatrix4fv(this.location,!1,d);break}}}}const hP=new Float32Array(9),AP=new Float32Array(4);class l_ extends Lu{constructor(s){super(s),this.current=AP}set(s,c,d){if(this.fetchUniformLocation(s,c)){for(let y=0;y<4;y++)if(d[y]!==this.current[y]){this.current=d,this.gl.uniformMatrix2fv(this.location,!1,d);break}}}}function c_(A){return[uB(255*A.r,255*A.g),uB(255*A.b,255*A.a)]}class Np{constructor(s,c,d,y){this.value=s,this.uniformNames=c.map(f=>`u_${f}`),this.type=d,this.context=y}setUniform(s,c,d,y,f){const v=y.constantOr(this.value);c.set(s,f,v instanceof An?v.toRenderColor(this.context.lut):v)}getBinding(s,c){return this.type==="color"?new a_(s):new Zs(s)}}class Od{constructor(s,c){this.uniformNames=c.map(d=>`u_${d}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(s){this.pixelRatio=s.pixelRatio||1,this.pattern=s.tl.concat(s.br)}setUniform(s,c,d,y,f){const v=f==="u_pattern"||f==="u_dash"?this.pattern:f==="u_pixel_ratio"?this.pixelRatio:null;v&&c.set(s,f,v)}getBinding(s,c){return c==="u_pattern"||c==="u_dash"?new Yg(s):new Zs(s)}}class Dc{constructor(s,c,d,y){this.expression=s,this.type=d,this.maxValue=0,this.paintVertexAttributes=c.map(f=>({name:`a_${f}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(s,c,d,y,f,v,B){const I=this.paintVertexArray.length,R=this.expression.evaluate(new Gi(0,{brightness:v}),c,{},f,y,B);this.paintVertexArray.resize(s),this._setPaintValue(I,s,R,this.context)}updatePaintArray(s,c,d,y,f,v,B){const I=this.expression.evaluate({zoom:0,brightness:B},d,y,void 0,f);this._setPaintValue(s,c,I,this.context)}_setPaintValue(s,c,d,y){if(this.type==="color"){const f=c_(d.toRenderColor(y.lut));for(let v=s;v<c;v++)this.paintVertexArray.emplace(v,f[0],f[1])}else{for(let f=s;f<c;f++)this.paintVertexArray.emplace(f,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class al{constructor(s,c,d,y,f,v){this.expression=s,this.uniformNames=c.map(B=>`u_${B}_t`),this.type=d,this.useIntegerZoom=y,this.context=f,this.maxValue=0,this.paintVertexAttributes=c.map(B=>({name:`a_${B}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new v}populatePaintArray(s,c,d,y,f,v,B){const I=this.expression.evaluate(new Gi(this.context.zoom,{brightness:v}),c,{},f,y,B),R=this.expression.evaluate(new Gi(this.context.zoom+1,{brightness:v}),c,{},f,y,B),b=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(b,s,I,R,this.context)}updatePaintArray(s,c,d,y,f,v,B){const I=this.expression.evaluate({zoom:this.context.zoom,brightness:B},d,y,void 0,f),R=this.expression.evaluate({zoom:this.context.zoom+1,brightness:B},d,y,void 0,f);this._setPaintValue(s,c,I,R,this.context)}_setPaintValue(s,c,d,y,f){if(this.type==="color"){const v=c_(d.toRenderColor(f.lut)),B=c_(d.toRenderColor(f.lut));for(let I=s;I<c;I++)this.paintVertexArray.emplace(I,v[0],v[1],B[0],B[1])}else{for(let v=s;v<c;v++)this.paintVertexArray.emplace(v,d,y);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(y))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,c,d,y,f){const v=this.useIntegerZoom?Math.floor(d.zoom):d.zoom,B=Er(this.expression.interpolationFactor(v,this.context.zoom,this.context.zoom+1),0,1);c.set(s,f,B)}getBinding(s,c){return new Zs(s)}}class Lc{constructor(s,c,d,y,f){this.expression=s,this.layerId=f,this.paintVertexAttributes=(d==="array"?uP:cP).members;for(let v=0;v<c.length;++v);this.paintVertexArray=new y}populatePaintArray(s,c,d,y){const f=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValues(f,s,c.patterns&&c.patterns[this.layerId],d)}updatePaintArray(s,c,d,y,f,v,B){this._setPaintValues(s,c,d.patterns&&d.patterns[this.layerId],v)}_setPaintValues(s,c,d,y){if(!y||!d)return;const f=y[d];if(!f)return;const{tl:v,br:B,pixelRatio:I}=f;for(let R=s;R<c;R++)this.paintVertexArray.emplace(R,v[0],v[1],B[0],B[1],I)}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class BA{constructor(s,c,d=()=>!0){this.binders={},this._buffers=[],this.context=c;const y=[];for(const f in s.paint._values){const v=s.paint.get(f);if(!d(f)||!(v instanceof Id&&Sg(v.property.specification)))continue;const B=fP(f,s.type),I=v.value,R=v.property.specification.type,b=!!v.property.useIntegerZoom,E=f==="line-dasharray"||f.endsWith("pattern"),P=f==="line-dasharray"&&s.layout.get("line-cap").value.kind!=="constant";if(I.kind!=="constant"||P)if(I.kind==="source"||P||E){const T=m(f,R,"source");this.binders[f]=E?new Lc(I,B,R,T,s.id):new Dc(I,B,R,T),y.push(`/a_${f}`)}else{const T=m(f,R,"composite");this.binders[f]=new al(I,B,R,b,c,T),y.push(`/z_${f}`)}else this.binders[f]=E?new Od(I.value,B):new Np(I.value,B,R,c),y.push(`/u_${f}`)}this.cacheKey=y.sort().join("")}getMaxValue(s){const c=this.binders[s];return c instanceof Dc||c instanceof al?c.maxValue:0}populatePaintArrays(s,c,d,y,f,v,B){for(const I in this.binders){const R=this.binders[I];R.context=this.context,(R instanceof Dc||R instanceof al||R instanceof Lc)&&R.populatePaintArray(s,c,d,y,f,v,B)}}setConstantPatternPositions(s){for(const c in this.binders){const d=this.binders[c];d instanceof Od&&d.setConstantPatternPositions(s)}}updatePaintArrays(s,c,d,y,f,v,B,I){let R=!1;const b=Object.keys(s),E=b.length!==0,P=E?b:c.uniqueIds;this.context.lut=f.lut;for(const T in this.binders){const F=this.binders[T];if(F.context=this.context,(F instanceof Dc||F instanceof al||F instanceof Lc)&&(F.expression.isStateDependent===!0||F.expression.isLightConstant===!1)){const D=f.paint.get(T);F.expression=D.value;for(const V of P){const H=s[V.toString()];c.eachPosition(V,(Z,J,G)=>{const te=y.feature(Z);F.updatePaintArray(J,G,te,H,v,B,I)})}if(!E)for(const V of d.uniqueIds){const H=s[V.toString()];d.eachPosition(V,(Z,J,G)=>{const te=y.feature(Z);F.updatePaintArray(J,G,te,H,v,B,I)})}R=!0}}return R}defines(){const s=[];for(const c in this.binders){const d=this.binders[c];(d instanceof Np||d instanceof Od)&&s.push(...d.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return s}getBinderAttributes(){const s=[];for(const c in this.binders){const d=this.binders[c];if(d instanceof Dc||d instanceof al||d instanceof Lc)for(let y=0;y<d.paintVertexAttributes.length;y++)s.push(d.paintVertexAttributes[y].name)}return s}getBinderUniforms(){const s=[];for(const c in this.binders){const d=this.binders[c];if(d instanceof Np||d instanceof Od||d instanceof al)for(const y of d.uniformNames)s.push(y)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s){const c=[];for(const d in this.binders){const y=this.binders[d];if(y instanceof Np||y instanceof Od||y instanceof al)for(const f of y.uniformNames)c.push({name:f,property:d,binding:y.getBinding(s,f)})}return c}setUniforms(s,c,d,y,f){for(const{name:v,property:B,binding:I}of d)this.binders[B].setUniform(s,I,f,y.get(B),v)}updatePaintBuffers(){this._buffers=[];for(const s in this.binders){const c=this.binders[s];(c instanceof Dc||c instanceof al||c instanceof Lc)&&c.paintVertexBuffer&&this._buffers.push(c.paintVertexBuffer)}}upload(s){for(const c in this.binders){const d=this.binders[c];(d instanceof Dc||d instanceof al||d instanceof Lc)&&d.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const c=this.binders[s];(c instanceof Dc||c instanceof al||c instanceof Lc)&&c.destroy()}}}class Sh{constructor(s,c,d=()=>!0){this.programConfigurations={};for(const y of s)this.programConfigurations[y.id]=new BA(y,c,d);this.needsUpload=!1,this._featureMap=new zp,this._featureMapWithoutIds=new zp,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(s,c,d,y,f,v,B,I){for(const R in this.programConfigurations)this.programConfigurations[R].populatePaintArrays(s,c,y,f,v,B,I);c.id!==void 0?this._featureMap.add(c.id,d,this._bufferOffset,s):(this._featureMapWithoutIds.add(this._idlessCounter,d,this._bufferOffset,s),this._idlessCounter+=1),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,c,d,y,f,v){for(const B of d)this.needsUpload=this.programConfigurations[B.id].updatePaintArrays(s,this._featureMap,this._featureMapWithoutIds,c,B,y,f,v||0)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const c in this.programConfigurations)this.programConfigurations[c].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}const dP={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function fP(A,s){return dP[A]||[A.replace(`${s}-`,"").replace(/-/g,"_")]}const pP={"line-pattern":{source:ku,composite:ku},"fill-pattern":{source:ku,composite:ku},"fill-extrusion-pattern":{source:ku,composite:ku},"line-dasharray":{source:xA,composite:xA}},dB={color:{source:Lp,composite:Ru},number:{source:Dd,composite:Lp}};function m(A,s,c){const d=pP[A];return d&&d[c]||dB[s][c]}rr(Np,"ConstantBinder"),rr(Od,"PatternConstantBinder"),rr(Dc,"SourceExpressionBinder"),rr(Lc,"PatternCompositeBinder"),rr(al,"CompositeExpressionBinder"),rr(BA,"ProgramConfiguration",{omit:["_buffers"]}),rr(Sh,"ProgramConfigurationSet");const a=Gt/Math.PI/2,u=5,g=6,x=16383,w=64,S=[w,32,16],k=-a,O=a;function N(A,s,c,d=a){return c=Pr(c),[A*Math.sin(c)*d,-s*d,A*Math.cos(c)*d]}function Q(A,s,c){return N(Math.cos(Pr(A)),Math.sin(Pr(A)),s,c)}const W=63710088e-1,X=2*Math.PI*W;class Y{constructor(s,c){if(isNaN(s)||isNaN(c))throw new Error(`Invalid LngLat object: (${s}, ${c})`);if(this.lng=+s,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Y(yi(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const c=Math.PI/180,d=this.lat*c,y=s.lat*c,f=Math.sin(d)*Math.sin(y)+Math.cos(d)*Math.cos(y)*Math.cos((s.lng-this.lng)*c);return W*Math.acos(Math.min(f,1))}toBounds(s=0){const c=360*s/40075017,d=c/Math.cos(Math.PI/180*this.lat);return new ae({lng:this.lng-d,lat:this.lat-c},{lng:this.lng+d,lat:this.lat+c})}toEcef(s){return Q(this.lat,this.lng,a+s*a/W)}static convert(s){if(s instanceof Y)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new Y(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new Y(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class ae{constructor(s,c){if(s)if(c)this.setSouthWest(s).setNorthEast(c);else if(s.length===4){const d=s;this.setSouthWest([d[0],d[1]]).setNorthEast([d[2],d[3]])}else{const d=s;this.setSouthWest(d[0]).setNorthEast(d[1])}}setNorthEast(s){return this._ne=s instanceof Y?new Y(s.lng,s.lat):Y.convert(s),this}setSouthWest(s){return this._sw=s instanceof Y?new Y(s.lng,s.lat):Y.convert(s),this}extend(s){const c=this._sw,d=this._ne;let y,f;if(s instanceof Y)y=s,f=s;else{if(!(s instanceof ae))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(ae.convert(s)):this.extend(Y.convert(s)):typeof s=="object"&&s!==null&&s.hasOwnProperty("lat")&&(s.hasOwnProperty("lon")||s.hasOwnProperty("lng"))?this.extend(Y.convert(s)):this;if(y=s._sw,f=s._ne,!y||!f)return this}return c||d?(c.lng=Math.min(y.lng,c.lng),c.lat=Math.min(y.lat,c.lat),d.lng=Math.max(f.lng,d.lng),d.lat=Math.max(f.lat,d.lat)):(this._sw=new Y(y.lng,y.lat),this._ne=new Y(f.lng,f.lat)),this}getCenter(){return new Y((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Y(this.getWest(),this.getNorth())}getSouthEast(){return new Y(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:c,lat:d}=Y.convert(s);let y=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&y}static convert(s){if(s)return s instanceof ae?s:new ae(s)}}const le=0,ce=25.5;function Ae(A){return X*Math.cos(A*Math.PI/180)}function Be(A){return(180+A)/360}function Te(A){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A*Math.PI/360)))/360}function be(A,s){return A/Ae(s)}function Me(A){return 360*A-180}function Fe(A){return 360/Math.PI*Math.atan(Math.exp((180-360*A)*Math.PI/180))-90}function ze(A,s){return A*Ae(Fe(s))}const Le=85.051129;function Ve(A){return Math.cos(Pr(Er(A,-Le,Le)))}function Xe(A,s){const c=Er(s,le,ce),d=Math.pow(2,c);return Ve(A)*X/(512*d)}function je(A){return 1/Math.cos(A*Math.PI/180)}function He(A,s=0){const c=Math.exp(Math.PI*(1-(A.y+s/Gt)/(1<<A.z)*2));return 80150034*c/(c*c+1)/Gt/(1<<A.z)}class nt{constructor(s,c,d=0){this.x=+s,this.y=+c,this.z=+d}static fromLngLat(s,c=0){const d=Y.convert(s);return new nt(Be(d.lng),Te(d.lat),be(c,d.lat))}toLngLat(){return new Y(Me(this.x),Fe(this.y))}toAltitude(){return ze(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/X*je(Fe(this.y))}}function mt(A,s,c,d,y,f,v,B,I){const R=(s+d)/2,b=(c+y)/2,E=new Ot(R,b);B(E),function(P,T,F,D,V,H){const Z=F-V,J=D-H;return Math.abs((D-T)*Z-(F-P)*J)/Math.hypot(Z,J)}(E.x,E.y,f.x,f.y,v.x,v.y)>=I?(mt(A,s,c,R,b,f,E,B,I),mt(A,R,b,d,y,E,v,B,I)):A.push(v)}function Et(A,s,c){let d=A[0],y=d.x,f=d.y;s(d);const v=[d];for(let B=1;B<A.length;B++){const I=A[B],{x:R,y:b}=I;s(I),mt(v,y,f,R,b,d,I,s,c),y=R,f=b,d=I}return v}function pt(A,s,c,d){if(d(s,c)){const y=s.add(c)._mult(.5);pt(A,s,y,d),pt(A,y,c,d)}else A.push(c)}function kt(A,s){let c=A[0];const d=[c];for(let y=1;y<A.length;y++){const f=A[y];pt(d,c,f,s),c=f}return d}const it=Math.pow(2,14)-1,wt=-it-1;function bt(A,s){const c=Math.round(A.x*s),d=Math.round(A.y*s);return A.x=Er(c,wt,it),A.y=Er(d,wt,it),(c<A.x||c>A.x+1||d<A.y||d>A.y+1)&&an("Geometry exceeds allowed extent, reduce your vector tile buffer size"),A}function Dt(A,s,c){const d=A.loadGeometry(),y=A.extent,f=Gt/y;if(s&&c&&c.projection.isReprojectedInTileSpace){const v=1<<s.z,{scale:B,x:I,y:R,projection:b}=c,E=P=>{const T=Me((s.x+P.x/y)/v),F=Fe((s.y+P.y/y)/v),D=b.project(T,F);P.x=(D.x*B-I)*y,P.y=(D.y*B-R)*y};for(let P=0;P<d.length;P++)if(A.type!==1)d[P]=Et(d[P],E,1);else{const T=[];for(const F of d[P])F.x<0||F.x>=y||F.y<0||F.y>=y||(E(F),T.push(F));d[P]=T}}for(const v of d)for(const B of v)bt(B,f);return d}function Ut(A,s){return{type:A.type,id:A.id,properties:A.properties,geometry:s?Dt(A):[]}}function St(A,s,c,d,y){A.emplaceBack(2*s+(d+1)/2,2*c+(y+1)/2)}function Ft(A,s,c){A.emplaceBack(s.x,s.y,s.z,c[0]*16384,c[1]*16384,c[2]*16384)}class gr{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(c=>c.fqid),this.index=s.index,this.hasPattern=!1,this.projection=s.projection,this.layoutVertexArray=new bh,this.indexArray=new gs,this.segments=new Ki,this.programConfigurations=new Sh(s.layers,{zoom:s.zoom,lut:s.lut}),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}updateFootprints(s,c){}populate(s,c,d,y){const f=this.layers[0],v=[];let B=null;f.type==="circle"&&(B=f.layout.get("circle-sort-key"));for(const{feature:R,id:b,index:E,sourceLayerIndex:P}of s){const T=this.layers[0]._featureFilter.needGeometry,F=Ut(R,T);if(!this.layers[0]._featureFilter.filter(new Gi(this.zoom),F,d))continue;const D=B?B.evaluate(F,{},d):void 0,V={id:b,properties:R.properties,type:R.type,sourceLayerIndex:P,index:E,geometry:T?F.geometry:Dt(R,d,y),patterns:{},sortKey:D};v.push(V)}B&&v.sort((R,b)=>R.sortKey-b.sortKey);let I=null;y.projection.name==="globe"&&(this.globeExtVertexArray=new jg,I=y.projection);for(const R of v){const{geometry:b,index:E,sourceLayerIndex:P}=R,T=s[E].feature;this.addFeature(R,b,E,c.availableImages,d,I,c.brightness),c.featureIndex.insert(T,b,E,P,this.index)}}update(s,c,d,y,f){const v=Object.keys(s).length!==0;v&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(s,c,v?this.stateDependentLayers:this.layers,d,y,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,aP.members),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=s.createVertexBuffer(this.globeExtVertexArray,lP.members))),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(s,c,d,y,f,v,B){for(const I of c)for(const R of I){const b=R.x,E=R.y;if(b<0||b>=Gt||E<0||E>=Gt)continue;if(v){const F=v.projectTilePoint(b,E,f),D=v.upVector(f,b,E),V=this.globeExtVertexArray;Ft(V,F,D),Ft(V,F,D),Ft(V,F,D),Ft(V,F,D)}const P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),T=P.vertexLength;St(this.layoutVertexArray,b,E,-1,-1),St(this.layoutVertexArray,b,E,1,-1),St(this.layoutVertexArray,b,E,1,1),St(this.layoutVertexArray,b,E,-1,1),this.indexArray.emplaceBack(T,T+1,T+2),this.indexArray.emplaceBack(T,T+2,T+3),P.vertexLength+=4,P.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,d,{},y,f,B)}}function Nt(A,s){for(let c=0;c<A.length;c++)if(hi(s,A[c]))return!0;for(let c=0;c<s.length;c++)if(hi(A,s[c]))return!0;return!!xr(A,s)}function Jt(A,s,c){return!!hi(A,s)||!!zr(s,A,c)}function Br(A,s){if(A.length===1)return jn(s,A[0]);for(let c=0;c<s.length;c++){const d=s[c];for(let y=0;y<d.length;y++)if(hi(A,d[y]))return!0}for(let c=0;c<A.length;c++)if(jn(s,A[c]))return!0;for(let c=0;c<s.length;c++)if(xr(A,s[c]))return!0;return!1}function sr(A,s,c){if(A.length>1){if(xr(A,s))return!0;for(let d=0;d<s.length;d++)if(zr(s[d],A,c))return!0}for(let d=0;d<A.length;d++)if(zr(A[d],s,c))return!0;return!1}function xr(A,s){if(A.length===0||s.length===0)return!1;for(let c=0;c<A.length-1;c++){const d=A[c],y=A[c+1];for(let f=0;f<s.length-1;f++)if(Qr(d,y,s[f],s[f+1]))return!0}return!1}function Qr(A,s,c,d){return Hs(A,c,d)!==Hs(s,c,d)&&Hs(A,s,c)!==Hs(A,s,d)}function zr(A,s,c){const d=c*c;if(s.length===1)return A.distSqr(s[0])<d;for(let y=1;y<s.length;y++)if(Dn(A,s[y-1],s[y])<d)return!0;return!1}function Dn(A,s,c){const d=s.distSqr(c);if(d===0)return A.distSqr(s);const y=((A.x-s.x)*(c.x-s.x)+(A.y-s.y)*(c.y-s.y))/d;return A.distSqr(y<0?s:y>1?c:c.sub(s)._mult(y)._add(s))}function jn(A,s){let c,d,y,f=!1;for(let v=0;v<A.length;v++){c=A[v];for(let B=0,I=c.length-1;B<c.length;I=B++)d=c[B],y=c[I],d.y>s.y!=y.y>s.y&&s.x<(y.x-d.x)*(s.y-d.y)/(y.y-d.y)+d.x&&(f=!f)}return f}function hi(A,s){let c=!1;for(let d=0,y=A.length-1;d<A.length;y=d++){const f=A[d],v=A[y];f.y>s.y!=v.y>s.y&&s.x<(v.x-f.x)*(s.y-f.y)/(v.y-f.y)+f.x&&(c=!c)}return c}function Il(A,s,c,d,y){for(const v of A)if(s<=v.x&&c<=v.y&&d>=v.x&&y>=v.y)return!0;const f=[new Ot(s,c),new Ot(s,y),new Ot(d,y),new Ot(d,c)];if(A.length>2){for(const v of f)if(hi(A,v))return!0}for(let v=0;v<A.length-1;v++)if(so(A[v],A[v+1],f))return!0;return!1}function so(A,s,c){const d=c[0],y=c[2];if(A.x<d.x&&s.x<d.x||A.x>y.x&&s.x>y.x||A.y<d.y&&s.y<d.y||A.y>y.y&&s.y>y.y)return!1;const f=Hs(A,s,c[0]);return f!==Hs(A,s,c[1])||f!==Hs(A,s,c[2])||f!==Hs(A,s,c[3])}function tn(A,s,c,d,y,f){let v=s.y-A.y,B=A.x-s.x;if(f=f||0){const I=v*v+B*B;if(I===0)return!0;const R=Math.sqrt(I);v/=R,B/=R}return!((c.x-A.x)*v+(c.y-A.y)*B-f<0||(d.x-A.x)*v+(d.y-A.y)*B-f<0||(y.x-A.x)*v+(y.y-A.y)*B-f<0)}function Nn(A,s,c,d,y,f,v){return!(tn(A,s,d,y,f,v)||tn(s,c,d,y,f,v)||tn(c,A,d,y,f,v)||tn(d,y,A,s,c,v)||tn(y,f,A,s,c,v)||tn(f,d,A,s,c,v))}function Bi(A,s,c){const d=s.paint.get(A).value;return d.kind==="constant"?d.value:c.programConfigurations.get(s.id).getMaxValue(A)}function zn(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function Vr(A,s,c,d,y){if(!s[0]&&!s[1])return A;const f=Ot.convert(s)._mult(y);c==="viewport"&&f._rotate(-d);const v=[];for(let B=0;B<A.length;B++)v.push(A[B].sub(f));return v}function Cn(A,s,c,d){const y=Ot.convert(A)._mult(d);return s==="viewport"&&y._rotate(-c),y}let Rn,Wi;rr(gr,"CircleBucket",{omit:["layers"]});var ao,fn={exports:{}},Lo=(ao||(ao=1,function(A,s){(function(c){function d(f,v,B){var I=y(256*f,256*(v=Math.pow(2,B)-v-1),B),R=y(256*(f+1),256*(v+1),B);return I[0]+","+I[1]+","+R[0]+","+R[1]}function y(f,v,B){var I=2*Math.PI*6378137/256/Math.pow(2,B);return[f*I-2*Math.PI*6378137/2,v*I-2*Math.PI*6378137/2]}c.getURL=function(f,v,B,I,R,b){return b=b||{},f+"?"+["bbox="+d(B,I,R),"format="+(b.format||"image/png"),"service="+(b.service||"WMS"),"version="+(b.version||"1.1.1"),"request="+(b.request||"GetMap"),"srs="+(b.srs||"EPSG:3857"),"width="+(b.width||256),"height="+(b.height||256),"layers="+v].join("&")},c.getTileBBox=d,c.getMercCoords=y,Object.defineProperty(c,"__esModule",{value:!0})})(s)}(0,fn.exports)),fn.exports);class Xo{constructor(s,c,d){this.z=s,this.x=c,this.y=d,this.key=fa(0,s,s,c,d)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,c){const d=Lo.getTileBBox(this.x,this.y,this.z),y=function(f,v,B){let I,R="";for(let b=f;b>0;b--)I=1<<b-1,R+=(v&I?1:0)+(B&I?2:0);return R}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(c==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",y).replace("{bbox-epsg-3857}",d)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Oo{constructor(s,c){this.wrap=s,this.canonical=c,this.key=fa(s,c.z,c.z,c.x,c.y)}}class ei{constructor(s,c,d,y,f){this.overscaledZ=s,this.wrap=c,this.canonical=new Xo(d,+y,+f),this.key=c===0&&s===d?this.canonical.key:fa(c,s,d,y,f)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){const c=this.canonical.z-s;return s>this.canonical.z?new ei(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ei(s,this.wrap,s,this.canonical.x>>c,this.canonical.y>>c)}calculateScaledKey(s,c=!0){if(this.overscaledZ===s&&c)return this.key;if(s>this.canonical.z)return fa(this.wrap*+c,s,this.canonical.z,this.canonical.x,this.canonical.y);{const d=this.canonical.z-s;return fa(this.wrap*+c,s,s,this.canonical.x>>d,this.canonical.y>>d)}}isChildOf(s){if(s.wrap!==this.wrap)return!1;const c=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.z<this.canonical.z&&s.canonical.x===this.canonical.x>>c&&s.canonical.y===this.canonical.y>>c}children(s){if(this.overscaledZ>=s)return[new ei(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const c=this.canonical.z+1,d=2*this.canonical.x,y=2*this.canonical.y;return[new ei(c,this.wrap,c,d,y),new ei(c,this.wrap,c,d+1,y),new ei(c,this.wrap,c,d,y+1),new ei(c,this.wrap,c,d+1,y+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new ei(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new ei(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Oo(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function fa(A,s,c,d,y){const f=1<<Math.min(c,22);let v=f*(y%f)+d%f;return A&&c<22&&(v+=f*f*((A<0?-2*A-1:2*A)%(1<<2*(22-c)))),16*(32*v+c)+(s-c)}const pa=[A=>{let s=A.canonical.x-1,c=A.wrap;return s<0&&(s=(1<<A.canonical.z)-1,c--),new ei(A.overscaledZ,c,A.canonical.z,s,A.canonical.y)},A=>{let s=A.canonical.x+1,c=A.wrap;return s===1<<A.canonical.z&&(s=0,c++),new ei(A.overscaledZ,c,A.canonical.z,s,A.canonical.y)},A=>new ei(A.overscaledZ,A.wrap,A.canonical.z,A.canonical.x,(A.canonical.y===0?1<<A.canonical.z:A.canonical.y)-1),A=>new ei(A.overscaledZ,A.wrap,A.canonical.z,A.canonical.x,A.canonical.y===(1<<A.canonical.z)-1?0:A.canonical.y+1)];rr(Xo,"CanonicalTileID"),rr(ei,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const Fl=Bn([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:ll}=Fl,za=Bn([{name:"a_pos_3",components:3,type:"Int16"}]);var Pl=Bn([{name:"a_pos",type:"Int16",components:2}]);class Ou{constructor(s,c){this.pos=s,this.dir=c}intersectsPlane(s,c,d){const y=Qe.vec3.dot(c,this.dir);if(Math.abs(y)<1e-6)return!1;const f=((s[0]-this.pos[0])*c[0]+(s[1]-this.pos[1])*c[1]+(s[2]-this.pos[2])*c[2])/y;return d[0]=this.pos[0]+this.dir[0]*f,d[1]=this.pos[1]+this.dir[1]*f,d[2]=this.pos[2]+this.dir[2]*f,!0}closestPointOnSphere(s,c,d){if(Qe.vec3.equals(this.pos,s)||c===0)return d[0]=d[1]=d[2]=0,!1;const[y,f,v]=this.dir,B=this.pos[0]-s[0],I=this.pos[1]-s[1],R=this.pos[2]-s[2],b=y*y+f*f+v*v,E=2*(B*y+I*f+R*v),P=E*E-4*b*(B*B+I*I+R*R-c*c);if(P<0){const T=Math.max(-E/2,0),F=B+y*T,D=I+f*T,V=R+v*T,H=Math.hypot(F,D,V);return d[0]=F*c/H,d[1]=D*c/H,d[2]=V*c/H,!1}{const T=(-E-Math.sqrt(P))/(2*b);if(T<0){const F=Math.hypot(B,I,R);return d[0]=B*c/F,d[1]=I*c/F,d[2]=R*c/F,!1}return d[0]=B+y*T,d[1]=I+f*T,d[2]=R+v*T,!0}}}class Eh{constructor(s,c,d,y,f){this.TL=s,this.TR=c,this.BR=d,this.BL=y,this.horizon=f}static fromInvProjectionMatrix(s,c,d){const y=[-1,1,1],f=[1,1,1],v=[1,-1,1],B=[-1,-1,1],I=Qe.vec3.transformMat4(y,y,s),R=Qe.vec3.transformMat4(f,f,s),b=Qe.vec3.transformMat4(v,v,s),E=Qe.vec3.transformMat4(B,B,s);return new Eh(I,R,b,E,c/d)}}function Oc(A,s,c){let d=1/0,y=-1/0;const f=[];for(const v of A){Qe.vec3.sub(f,v,s);const B=Qe.vec3.dot(f,c);d=Math.min(d,B),y=Math.max(y,B)}return[d,y]}function Ud(A,s){let c=!0;for(let d=0;d<A.planes.length;d++){const y=A.planes[d];let f=0;for(let v=0;v<s.length;v++)f+=Qe.vec3.dot(y,s[v])+y[3]>=0;if(f===0)return 0;f!==s.length&&(c=!1)}return c?2:1}function zd(A,s){for(const c of A.projections){const d=Oc(s,A.points[0],c.axis);if(c.projection[1]<d[0]||c.projection[0]>d[1])return 0}return 1}function Jg(A,s){let c=0;const d=[0,0,0,0];for(let y=0;y<A.length;y++)d[0]=A[y][0],d[1]=A[y][1],d[2]=A[y][2],d[3]=1,Qe.vec4.dot(d,s)>=0&&c++;return c}class Vd{constructor(s,c){this.points=s||new Array(8).fill([0,0,0]),this.planes=c||new Array(6).fill([0,0,0,0]),this.bounds=ti.fromPoints(this.points),this.projections=[],this.frustumEdges=[Qe.vec3.sub([],this.points[2],this.points[3]),Qe.vec3.sub([],this.points[0],this.points[3]),Qe.vec3.sub([],this.points[4],this.points[0]),Qe.vec3.sub([],this.points[5],this.points[1]),Qe.vec3.sub([],this.points[6],this.points[2]),Qe.vec3.sub([],this.points[7],this.points[3])];for(const d of this.frustumEdges){const y=[0,-d[2],d[1]],f=[d[2],0,-d[0]];this.projections.push({axis:y,projection:Oc(this.points,this.points[0],y)}),this.projections.push({axis:f,projection:Oc(this.points,this.points[0],f)})}}static fromInvProjectionMatrix(s,c,d,y){const f=Math.pow(2,d),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(R=>{const b=Qe.vec4.transformMat4([],R,s),E=1/b[3]/c*f;return Qe.vec4.mul(b,b,[E,E,y?1/b[3]:E,E])}),B=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(R=>{const b=Qe.vec3.sub([],v[R[0]],v[R[1]]),E=Qe.vec3.sub([],v[R[2]],v[R[1]]),P=Qe.vec3.normalize([],Qe.vec3.cross([],b,E)),T=-Qe.vec3.dot(P,v[R[1]]);return P.concat(T)}),I=[];for(let R=0;R<v.length;R++)I.push([v[R][0],v[R][1],v[R][2]]);return new Vd(I,B)}intersectsPrecise(s,c,d){for(let y=0;y<c.length;y++)if(!Jg(s,c[y]))return 0;for(let y=0;y<this.planes.length;y++)if(!Jg(s,this.planes[y]))return 0;for(const y of d)for(const f of this.frustumEdges){const v=Qe.vec3.cross([],y,f),B=Qe.vec3.length(v);if(B===0)continue;Qe.vec3.scale(v,v,1/B);const I=Oc(this.points,this.points[0],v),R=Oc(s,this.points[0],v);if(I[0]>R[1]||R[0]>I[1])return 0}return 1}containsPoint(s){for(const c of this.planes){const d=c[3];if(Qe.vec3.dot([c[0],c[1],c[2]],s)+d<0)return!1}return!0}}class ti{static fromPoints(s){const c=[1/0,1/0,1/0],d=[-1/0,-1/0,-1/0];for(const y of s)Qe.vec3.min(c,c,y),Qe.vec3.max(d,d,y);return new ti(c,d)}static fromTileIdAndHeight(s,c,d){const y=1<<s.canonical.z,f=s.canonical.x,v=s.canonical.y;return new ti([f/y,v/y,c],[(f+1)/y,(v+1)/y,d])}static applyTransform(s,c){const d=s.getCorners();for(let y=0;y<d.length;++y)Qe.vec3.transformMat4(d[y],d[y],c);return ti.fromPoints(d)}static applyTransformFast(s,c){const d=[c[12],c[13],c[14]],y=[...d];for(let f=0;f<3;f++)for(let v=0;v<3;v++){const B=c[4*v+f],I=B*s.min[v],R=B*s.max[v];d[f]+=Math.min(I,R),y[f]+=Math.max(I,R)}return new ti(d,y)}static projectAabbCorners(s,c){const d=s.getCorners();for(let y=0;y<d.length;++y)Qe.vec3.transformMat4(d[y],d[y],c);return d}constructor(s,c){this.min=s,this.max=c,this.center=Qe.vec3.scale([],Qe.vec3.add([],this.min,this.max),.5)}quadrant(s){const c=[s%2==0,s<2],d=Qe.vec3.clone(this.min),y=Qe.vec3.clone(this.max);for(let f=0;f<c.length;f++)d[f]=c[f]?this.min[f]:this.center[f],y[f]=c[f]?this.center[f]:this.max[f];return y[2]=this.max[2],new ti(d,y)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}distanceZ(s){return Math.max(Math.min(this.max[2],s[2]),this.min[2])-s[2]}getCorners(){const s=this.min,c=this.max;return[[s[0],s[1],s[2]],[c[0],s[1],s[2]],[c[0],c[1],s[2]],[s[0],c[1],s[2]],[s[0],s[1],c[2]],[c[0],s[1],c[2]],[c[0],c[1],c[2]],[s[0],c[1],c[2]]]}intersects(s){return this.intersectsAabb(s.bounds)?Ud(s,this.getCorners()):0}intersectsFlat(s){return this.intersectsAabb(s.bounds)?Ud(s,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(s,c){return c||this.intersects(s)?zd(s,this.getCorners()):0}intersectsPreciseFlat(s,c){return c||this.intersectsFlat(s)?zd(s,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(s){for(let c=0;c<3;++c)if(this.min[c]>s.max[c]||s.min[c]>this.max[c])return!1;return!0}intersectsAabbXY(s){return!(this.min[0]>s.max[0]||s.min[0]>this.max[0]||this.min[1]>s.max[1]||s.min[1]>this.max[1])}encapsulate(s){for(let c=0;c<3;c++)this.min[c]=Math.min(this.min[c],s.min[c]),this.max[c]=Math.max(this.max[c],s.max[c])}encapsulatePoint(s){for(let c=0;c<3;c++)this.min[c]=Math.min(this.min[c],s[c]),this.max[c]=Math.max(this.max[c],s[c])}closestPoint(s){return[Math.max(Math.min(this.max[0],s[0]),this.min[0]),Math.max(Math.min(this.max[1],s[1]),this.min[1]),Math.max(Math.min(this.max[2],s[2]),this.min[2])]}}function CA(A){return A*a/W}rr(ti,"Aabb");const mP=[new ti([k,k,k],[O,O,O]),new ti([k,k,k],[0,0,O]),new ti([0,k,k],[O,0,O]),new ti([k,0,k],[0,O,O]),new ti([0,0,k],[O,O,O])];function fB(A,s,c,d=!0){const y=Qe.vec3.scale([],A._camera.position,A.worldSize),f=[s,c,1,1];Qe.vec4.transformMat4(f,f,A.pixelMatrixInverse),Qe.vec4.scale(f,f,1/f[3]);const v=Qe.vec3.sub([],f,y),B=Qe.vec3.normalize([],v),I=A.globeMatrix,R=[I[12],I[13],I[14]],b=Qe.vec3.sub([],R,y),E=Qe.vec3.length(b),P=Qe.vec3.normalize([],b),T=A.worldSize/(2*Math.PI),F=Qe.vec3.dot(P,B),D=Math.asin(T/E);if(D<Math.acos(F)){if(!d)return null;const De=[],Ie=[];Qe.vec3.scale(De,B,E/F),Qe.vec3.normalize(Ie,Qe.vec3.sub(Ie,De,b)),Qe.vec3.normalize(B,Qe.vec3.add(B,b,Qe.vec3.scale(B,Ie,Math.tan(D)*E)))}const V=[];new Ou(y,B).closestPointOnSphere(R,T,V);const H=Qe.vec3.normalize([],bl(I,0)),Z=Qe.vec3.normalize([],bl(I,1)),J=Qe.vec3.normalize([],bl(I,2)),G=Qe.vec3.dot(H,V),te=Qe.vec3.dot(Z,V),oe=Qe.vec3.dot(J,V),pe=nn(Math.asin(-te/T));let we=nn(Math.atan2(G,oe));we=A.center.lng+function(De,Ie){const Oe=(Ie-De+180)%360-180;return Oe<-180?Oe+360:Oe}(A.center.lng,we);const Ce=Be(we),xe=Er(Te(pe),0,1);return new nt(Ce,xe)}class xee{constructor(s,c,d){this.a=Qe.vec3.sub([],s,d),this.b=Qe.vec3.sub([],c,d),this.center=d;const y=Qe.vec3.normalize([],this.a),f=Qe.vec3.normalize([],this.b);this.angle=Math.acos(Qe.vec3.dot(y,f))}}function gP(A,s){if(A.angle===0)return null;let c;return c=A.a[s]===0?1/A.angle*.5*Math.PI:1/A.angle*Math.atan(A.b[s]/A.a[s]/Math.sin(A.angle)-1/Math.tan(A.angle)),c<0||c>1?null:function(d,y,f,v){const B=Math.sin(f);return d*(Math.sin((1-v)*f)/B)+y*(Math.sin(v*f)/B)}(A.a[s],A.b[s],A.angle,Er(c,0,1))+A.center[s]}function Th(A){if(A.z<=1)return mP[A.z+2*A.y+A.x];const s=yP(pB(A));return ti.fromPoints(s)}function SA(A,s,c){return Qe.vec3.scale(A,A,1-c),Qe.vec3.scaleAndAdd(A,A,s,c)}function ZU(A,s,c){for(const d of A)Qe.vec3.transformMat4(d,d,s),Qe.vec3.scale(d,d,c)}function YU(A,s,c,d){const y=s/A.worldSize,f=A.globeMatrix;if(c.z<=1){const Ce=Th(c).getCorners();return ZU(Ce,f,y),ti.fromPoints(Ce)}const v=pB(c,d),B=yP(v,a+CA(A._tileCoverLift));ZU(B,f,y);const I=Number.MAX_VALUE,R=[-I,-I,-I],b=[I,I,I];if(v.contains(A.center)){for(const De of B)Qe.vec3.min(b,b,De),Qe.vec3.max(R,R,De);R[2]=0;const Ce=A.point,xe=[Ce.x*y,Ce.y*y,0];return Qe.vec3.min(b,b,xe),Qe.vec3.max(R,R,xe),new ti(b,R)}if(A._tileCoverLift>0){for(const Ce of B)Qe.vec3.min(b,b,Ce),Qe.vec3.max(R,R,Ce);return new ti(b,R)}const E=[f[12]*y,f[13]*y,f[14]*y],P=v.getCenter(),T=Er(A.center.lat,-Le,Le),F=Er(P.lat,-Le,Le),D=Be(A.center.lng),V=Te(T);let H=D-Be(P.lng);const Z=V-Te(F);H>.5?H-=1:H<-.5&&(H+=1);let J=0;if(Math.abs(H)>Math.abs(Z))J=H>=0?1:3;else{J=Z>=0?0:2;const Ce=[f[4]*y,f[5]*y,f[6]*y],xe=-Math.sin(Pr(Z>=0?v.getSouth():v.getNorth()))*a;Qe.vec3.scaleAndAdd(E,E,Ce,xe)}const G=B[J],te=B[(J+1)%4],oe=new xee(G,te,E),pe=[gP(oe,0)||G[0],gP(oe,1)||G[1],gP(oe,2)||G[2]],we=Nd(A.zoom);if(we>0){const Ce=function({x:De,y:Ie,z:Oe},Ke,Ze,Ye,et){const at=1/(1<<Oe);let rt=De*at,_t=rt+at,Tt=Ie*at,dt=Tt+at,Zt=0;const Qt=(rt+_t)/2-Ye;return Qt>.5?Zt=-1:Qt<-.5&&(Zt=1),rt=((rt+Zt)*Ke-(Ye*=Ke))*Ze+Ye,_t=((_t+Zt)*Ke-Ye)*Ze+Ye,Tt=(Tt*Ke-(et*=Ke))*Ze+et,dt=(dt*Ke-et)*Ze+et,[[rt,dt,0],[_t,dt,0],[_t,Tt,0],[rt,Tt,0]]}(c,s,A._pixelsPerMercatorPixel,D,V);for(let De=0;De<B.length;De++)SA(B[De],Ce[De],we);const xe=Qe.vec3.add([],Ce[J],Ce[(J+1)%4]);Qe.vec3.scale(xe,xe,.5),SA(pe,xe,we)}for(const Ce of B)Qe.vec3.min(b,b,Ce),Qe.vec3.max(R,R,Ce);return b[2]=Math.min(G[2],te[2]),Qe.vec3.min(b,b,pe),Qe.vec3.max(R,R,pe),new ti(b,R)}function pB({x:A,y:s,z:c},d=!1){const y=1/(1<<c),f=new Y(Me(A*y),s===(1<<c)-1&&d?-90:Fe((s+1)*y)),v=new Y(Me((A+1)*y),s===0&&d?90:Fe(s*y));return new ae(f,v)}function yP(A,s=a){const c=Pr(A.getNorth()),d=Pr(A.getSouth()),y=Math.cos(c),f=Math.cos(d),v=Math.sin(c),B=Math.sin(d),I=A.getWest(),R=A.getEast();return[N(f,B,I,s),N(f,B,R,s),N(y,v,R,s),N(y,v,I,s)]}function u_(A,s,c,d){const y=1<<c.z,f=(A/Gt+c.x)/y;return Q(Fe((s/Gt+c.y)/y),Me(f),d)}function mB({min:A,max:s}){return x/Math.max(s[0]-A[0],s[1]-A[1],s[2]-A[2])}const JU=new Float64Array(16);function gB(A){const s=mB(A),c=Qe.mat4.fromScaling(JU,[s,s,s]);return Qe.mat4.translate(c,c,Qe.vec3.negate([],A.min))}function vP(A){const s=Qe.mat4.fromTranslation(JU,A.min),c=1/mB(A);return Qe.mat4.scale(s,s,[c,c,c])}function _P(A){const s=Gt/(2*Math.PI);return A/(2*Math.PI)/s}function $U(A,s){return Gt/(512*Math.pow(2,A))*mB(Th(s))}function e5(A,s,c,d,y){const f=_P(c),v=[A,s,-c/(2*Math.PI)],B=Qe.mat4.identity(new Float64Array(16));return Qe.mat4.translate(B,B,v),Qe.mat4.scale(B,B,[f,f,f]),Qe.mat4.rotateX(B,B,Pr(-y)),Qe.mat4.rotateY(B,B,Pr(-d)),B}function Nd(A){return Di(u,g,A)}function t5(A,s){const c=Q(s.lat,s.lng),d=function(f){const v=Q(f._center.lat,f._center.lng),B=Qe.vec3.fromValues(0,1,0);let I=Qe.vec3.cross([],B,v);const R=Qe.mat4.fromRotation([],-f.angle,v);I=Qe.vec3.transformMat4(I,I,R),Qe.mat4.fromRotation(R,-f._pitch,I);const b=Qe.vec3.normalize([],v);return Qe.vec3.scale(b,b,CA(f.cameraToCenterDistance/f.pixelsPerMeter)),Qe.vec3.transformMat4(b,b,R),Qe.vec3.add([],v,b)}(A),y=Qe.vec3.subtract([],d,c);return Qe.vec3.angle(y,c)}function xP(A,s){return t5(A,s)>Math.PI/2*1.01}const r5=Pr(85),bee=Math.cos(r5),wee=Math.sin(r5),Bee=Qe.mat4.create(),n5=A=>{const s=[];return A.paint.get("circle-pitch-alignment")==="map"&&s.push("PITCH_WITH_MAP"),A.paint.get("circle-pitch-scale")==="map"&&s.push("SCALE_WITH_MAP"),s};function i5(A,s,c,d,y,f,v,B,I){if(f&&A.queryGeometry.isAboveHorizon)return!1;f&&(I*=A.pixelToTileUnitsFactor);const R=A.tileID.canonical,b=c.projection.upVectorScale(R,c.center.lat,c.worldSize).metersToTile;for(const E of s)for(const P of E){const T=P.add(B),F=y&&c.elevation?c.elevation.exaggeration()*y.getElevationAt(T.x,T.y,!0):0,D=c.projection.projectTilePoint(T.x,T.y,R);if(F>0){const J=c.projection.upVector(R,T.x,T.y);D.x+=J[0]*b*F,D.y+=J[1]*b*F,D.z+=J[2]*b*F}const V=f?T:Cee(D.x,D.y,D.z,d),H=f?A.tilespaceRays.map(J=>Eee(J,F)):A.queryGeometry.screenGeometry,Z=Qe.vec4.transformMat4([],[D.x,D.y,D.z,1],d);if(!v&&f?I*=Z[3]/c.cameraToCenterDistance:v&&!f&&(I*=c.cameraToCenterDistance/Z[3]),f){const J=Fe((P.y/Gt+R.y)/(1<<R.z));I/=c.projection.pixelsPerMeter(J,1)/be(1,J)}if(Jt(H,V,I))return!0}return!1}function Cee(A,s,c,d){const y=Qe.vec4.transformMat4([],[A,s,c,1],d);return new Ot(y[0]/y[3],y[1]/y[3])}const o5=Qe.vec3.fromValues(0,0,0),See=Qe.vec3.fromValues(0,0,1);function Eee(A,s){const c=Qe.vec3.create();return o5[2]=s,A.intersectsPlane(o5,See,c),new Ot(c[0],c[1])}class s5 extends gr{}let a5,l5,c5,u5;function h5(A,{width:s,height:c},d,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==s*c*d)throw new RangeError("mismatched image size")}else y=new Uint8Array(s*c*d);return A.width=s,A.height=c,A.data=y,A}function A5(A,s,c){const{width:d,height:y}=s;d===A.width&&y===A.height||(bP(A,s,{x:0,y:0},{x:0,y:0},{width:Math.min(A.width,d),height:Math.min(A.height,y)},c,null),A.width=d,A.height=y,A.data=s.data)}function bP(A,s,c,d,y,f,v,B){if(y.width===0||y.height===0)return s;if(y.width>A.width||y.height>A.height||c.x>A.width-y.width||c.y>A.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>s.width||y.height>s.height||d.x>s.width-y.width||d.y>s.height-y.height)throw new RangeError("out of range destination coordinates for image copy");const I=A.data,R=s.data,b=f===4&&B;for(let E=0;E<y.height;E++){const P=((c.y+E)*A.width+c.x)*f,T=((d.y+E)*s.width+d.x)*f;if(b)for(let F=0;F<y.width;F++){const D=P+F*f+3,V=T+F*f;R[V+0]=255,R[V+1]=255,R[V+2]=255,R[V+3]=I[D]}else if(v)for(let F=0;F<y.width;F++){const D=P+F*f,V=T+F*f,H=I[D+3],Z=new An(I[D+0]/255*H,I[D+1]/255*H,I[D+2]/255*H,H).toRenderColor(v).toArray();R[V+0]=Z[0],R[V+1]=Z[1],R[V+2]=Z[2],R[V+3]=Z[3]}else for(let F=0;F<y.width*f;F++)R[T+F]=I[P+F]}return s}rr(s5,"HeatmapBucket",{omit:["layers"]});class Qd{constructor(s,c){h5(this,s,1,c)}resize(s){A5(this,new Qd(s),1)}clone(){return new Qd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,c,d,y,f){bP(s,c,d,y,f,1,null)}}class ma{constructor(s,c){h5(this,s,4,c)}resize(s){A5(this,new ma(s),4)}replace(s,c){c?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new ma({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,c,d,y,f,v,B){bP(s,c,d,y,f,4,v,B)}}class d5{constructor(s,c){this.width=s.width,this.height=s.height,this.data=c instanceof Uint8Array?new Float32Array(c.buffer):c}}function h_(A){const s={},c=A.resolution||256,d=A.clips?A.clips.length:1,y=A.image||new ma({width:c,height:d}),f=(v,B,I)=>{s[A.evaluationKey]=I;const R=A.expression.evaluate(s);R&&(y.data[v+B+0]=Math.floor(255*R.r/R.a),y.data[v+B+1]=Math.floor(255*R.g/R.a),y.data[v+B+2]=Math.floor(255*R.b/R.a),y.data[v+B+3]=Math.floor(255*R.a))};if(A.clips)for(let v=0,B=0;v<d;++v,B+=4*c)for(let I=0,R=0;I<c;I++,R+=4){const b=I/(c-1),{start:E,end:P}=A.clips[v];f(B,R,E*(1-b)+P*b)}else for(let v=0,B=0;v<c;v++,B+=4)f(0,B,v/(c-1));return y}rr(Qd,"AlphaImage"),rr(ma,"RGBAImage");const Tee=Bn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Iee}=Tee;function A_(A,s,c=2){const d=s&&s.length,y=d?s[0]*c:A.length;let f=f5(A,0,y,c,!0);const v=[];if(!f||f.next===f.prev)return v;let B,I,R;if(d&&(f=function(b,E,P,T){const F=[];for(let D=0,V=E.length;D<V;D++){const H=f5(b,E[D]*T,D<V-1?E[D+1]*T:b.length,T,!1);H===H.next&&(H.steiner=!0),F.push(Oee(H))}F.sort(kee);for(let D=0;D<F.length;D++)P=Dee(F[D],P);return P}(A,s,f,c)),A.length>80*c){B=1/0,I=1/0;let b=-1/0,E=-1/0;for(let P=c;P<y;P+=c){const T=A[P],F=A[P+1];T<B&&(B=T),F<I&&(I=F),T>b&&(b=T),F>E&&(E=F)}R=Math.max(b-B,E-I),R=R!==0?32767/R:0}return d_(f,v,c,B,I,R,0),v}function f5(A,s,c,d,y){let f;if(y===function(v,B,I,R){let b=0;for(let E=B,P=I-R;E<I;E+=R)b+=(v[P]-v[E])*(v[E+1]+v[P+1]),P=E;return b}(A,s,c,d)>0)for(let v=s;v<c;v+=d)f=g5(v/d|0,A[v],A[v+1],f);else for(let v=c-d;v>=s;v-=d)f=g5(v/d|0,A[v],A[v+1],f);return f&&yB(f,f.next)&&(p_(f),f=f.next),f}function Qp(A,s){if(!A)return A;s||(s=A);let c,d=A;do if(c=!1,d.steiner||!yB(d,d.next)&&Uo(d.prev,d,d.next)!==0)d=d.next;else{if(p_(d),d=s=d.prev,d===d.next)break;c=!0}while(c||d!==s);return s}function d_(A,s,c,d,y,f,v){if(!A)return;!v&&f&&function(I,R,b,E){let P=I;do P.z===0&&(P.z=wP(P.x,P.y,R,b,E)),P.prevZ=P.prev,P.nextZ=P.next,P=P.next;while(P!==I);P.prevZ.nextZ=null,P.prevZ=null,function(T){let F,D=1;do{let V,H=T;T=null;let Z=null;for(F=0;H;){F++;let J=H,G=0;for(let oe=0;oe<D&&(G++,J=J.nextZ,J);oe++);let te=D;for(;G>0||te>0&&J;)G!==0&&(te===0||!J||H.z<=J.z)?(V=H,H=H.nextZ,G--):(V=J,J=J.nextZ,te--),Z?Z.nextZ=V:T=V,V.prevZ=Z,Z=V;H=J}Z.nextZ=null,D*=2}while(F>1)}(P)}(A,d,y,f);let B=A;for(;A.prev!==A.next;){const I=A.prev,R=A.next;if(f?Pee(A,d,y,f):Fee(A))s.push(I.i,A.i,R.i),p_(A),A=R.next,B=R.next;else if((A=R)===B){v?v===1?d_(A=Mee(Qp(A),s),s,c,d,y,f,2):v===2&&Ree(A,s,c,d,y,f):d_(Qp(A),s,c,d,y,f,1);break}}}function Fee(A){const s=A.prev,c=A,d=A.next;if(Uo(s,c,d)>=0)return!1;const y=s.x,f=c.x,v=d.x,B=s.y,I=c.y,R=d.y,b=y<f?y<v?y:v:f<v?f:v,E=B<I?B<R?B:R:I<R?I:R,P=y>f?y>v?y:v:f>v?f:v,T=B>I?B>R?B:R:I>R?I:R;let F=d.next;for(;F!==s;){if(F.x>=b&&F.x<=P&&F.y>=E&&F.y<=T&&$g(y,B,f,I,v,R,F.x,F.y)&&Uo(F.prev,F,F.next)>=0)return!1;F=F.next}return!0}function Pee(A,s,c,d){const y=A.prev,f=A,v=A.next;if(Uo(y,f,v)>=0)return!1;const B=y.x,I=f.x,R=v.x,b=y.y,E=f.y,P=v.y,T=B<I?B<R?B:R:I<R?I:R,F=b<E?b<P?b:P:E<P?E:P,D=B>I?B>R?B:R:I>R?I:R,V=b>E?b>P?b:P:E>P?E:P,H=wP(T,F,s,c,d),Z=wP(D,V,s,c,d);let J=A.prevZ,G=A.nextZ;for(;J&&J.z>=H&&G&&G.z<=Z;){if(J.x>=T&&J.x<=D&&J.y>=F&&J.y<=V&&J!==y&&J!==v&&$g(B,b,I,E,R,P,J.x,J.y)&&Uo(J.prev,J,J.next)>=0||(J=J.prevZ,G.x>=T&&G.x<=D&&G.y>=F&&G.y<=V&&G!==y&&G!==v&&$g(B,b,I,E,R,P,G.x,G.y)&&Uo(G.prev,G,G.next)>=0))return!1;G=G.nextZ}for(;J&&J.z>=H;){if(J.x>=T&&J.x<=D&&J.y>=F&&J.y<=V&&J!==y&&J!==v&&$g(B,b,I,E,R,P,J.x,J.y)&&Uo(J.prev,J,J.next)>=0)return!1;J=J.prevZ}for(;G&&G.z<=Z;){if(G.x>=T&&G.x<=D&&G.y>=F&&G.y<=V&&G!==y&&G!==v&&$g(B,b,I,E,R,P,G.x,G.y)&&Uo(G.prev,G,G.next)>=0)return!1;G=G.nextZ}return!0}function Mee(A,s){let c=A;do{const d=c.prev,y=c.next.next;!yB(d,y)&&p5(d,c,c.next,y)&&f_(d,y)&&f_(y,d)&&(s.push(d.i,c.i,y.i),p_(c),p_(c.next),c=A=y),c=c.next}while(c!==A);return Qp(c)}function Ree(A,s,c,d,y,f){let v=A;do{let B=v.next.next;for(;B!==v.prev;){if(v.i!==B.i&&Uee(v,B)){let I=m5(v,B);return v=Qp(v,v.next),I=Qp(I,I.next),d_(v,s,c,d,y,f,0),void d_(I,s,c,d,y,f,0)}B=B.next}v=v.next}while(v!==A)}function kee(A,s){return A.x-s.x}function Dee(A,s){const c=function(y,f){let v=f;const B=y.x,I=y.y;let R,b=-1/0;do{if(I<=v.y&&I>=v.next.y&&v.next.y!==v.y){const D=v.x+(I-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(D<=B&&D>b&&(b=D,R=v.x<v.next.x?v:v.next,D===B))return R}v=v.next}while(v!==f);if(!R)return null;const E=R,P=R.x,T=R.y;let F=1/0;v=R;do{if(B>=v.x&&v.x>=P&&B!==v.x&&$g(I<T?B:b,I,P,T,I<T?b:B,I,v.x,v.y)){const D=Math.abs(I-v.y)/(B-v.x);f_(v,y)&&(D<F||D===F&&(v.x>R.x||v.x===R.x&&Lee(R,v)))&&(R=v,F=D)}v=v.next}while(v!==E);return R}(A,s);if(!c)return s;const d=m5(c,A);return Qp(d,d.next),Qp(c,c.next)}function Lee(A,s){return Uo(A.prev,A,s.prev)<0&&Uo(s.next,A,A.next)<0}function wP(A,s,c,d,y){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=(A-c)*y|0)|A<<8))|A<<4))|A<<2))|A<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-d)*y|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function Oee(A){let s=A,c=A;do(s.x<c.x||s.x===c.x&&s.y<c.y)&&(c=s),s=s.next;while(s!==A);return c}function $g(A,s,c,d,y,f,v,B){return(y-v)*(s-B)>=(A-v)*(f-B)&&(A-v)*(d-B)>=(c-v)*(s-B)&&(c-v)*(f-B)>=(y-v)*(d-B)}function Uee(A,s){return A.next.i!==s.i&&A.prev.i!==s.i&&!function(c,d){let y=c;do{if(y.i!==c.i&&y.next.i!==c.i&&y.i!==d.i&&y.next.i!==d.i&&p5(y,y.next,c,d))return!0;y=y.next}while(y!==c);return!1}(A,s)&&(f_(A,s)&&f_(s,A)&&function(c,d){let y=c,f=!1;const v=(c.x+d.x)/2,B=(c.y+d.y)/2;do y.y>B!=y.next.y>B&&y.next.y!==y.y&&v<(y.next.x-y.x)*(B-y.y)/(y.next.y-y.y)+y.x&&(f=!f),y=y.next;while(y!==c);return f}(A,s)&&(Uo(A.prev,A,s.prev)||Uo(A,s.prev,s))||yB(A,s)&&Uo(A.prev,A,A.next)>0&&Uo(s.prev,s,s.next)>0)}function Uo(A,s,c){return(s.y-A.y)*(c.x-s.x)-(s.x-A.x)*(c.y-s.y)}function yB(A,s){return A.x===s.x&&A.y===s.y}function p5(A,s,c,d){const y=_B(Uo(A,s,c)),f=_B(Uo(A,s,d)),v=_B(Uo(c,d,A)),B=_B(Uo(c,d,s));return y!==f&&v!==B||!(y!==0||!vB(A,c,s))||!(f!==0||!vB(A,d,s))||!(v!==0||!vB(c,A,d))||!(B!==0||!vB(c,s,d))}function vB(A,s,c){return s.x<=Math.max(A.x,c.x)&&s.x>=Math.min(A.x,c.x)&&s.y<=Math.max(A.y,c.y)&&s.y>=Math.min(A.y,c.y)}function _B(A){return A>0?1:A<0?-1:0}function f_(A,s){return Uo(A.prev,A,A.next)<0?Uo(A,s,A.next)>=0&&Uo(A,A.prev,s)>=0:Uo(A,s,A.prev)<0||Uo(A,A.next,s)<0}function m5(A,s){const c=BP(A.i,A.x,A.y),d=BP(s.i,s.x,s.y),y=A.next,f=s.prev;return A.next=s,s.prev=A,c.next=y,y.prev=c,d.next=c,c.prev=d,f.next=d,d.prev=f,d}function g5(A,s,c,d){const y=BP(A,s,c);return d?(y.next=d.next,y.prev=d,d.next.prev=y,d.next=y):(y.prev=y,y.next=y),y}function p_(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function BP(A,s,c){return{i:A,x:s,y:c,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function xB(A,s){const c=A.length;if(c<=1)return[A];const d=[];let y,f;for(let v=0;v<c;v++){const B=js(A[v]);B!==0&&(A[v].area=Math.abs(B),f===void 0&&(f=B<0),f===B<0?(y&&d.push(y),y=[A[v]]):y.push(A[v]))}if(y&&d.push(y),s>1)for(let v=0;v<d.length;v++)d[v].length<=s||(pp(d[v],s,1,d[v].length-1,zee),d[v]=d[v].slice(0,s));return d}function zee(A,s){return s.area-A.area}function CP(A,s,c){const d=c.patternDependencies;let y=!1;for(const f of s){const v=f.paint.get(`${A}-pattern`);v.isConstant()||(y=!0);const B=v.constantOr(null);B&&(y=!0,d[B]=!0)}return y}function SP(A,s,c,d,y){const f=y.patternDependencies;for(const v of s){const B=v.paint.get(`${A}-pattern`).value;if(B.kind!=="constant"){let I=B.evaluate({zoom:d},c,{},y.availableImages);I=I&&I.name?I.name:I,f[I]=!0,c.patterns[v.id]=I}}return c}class EP{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(c=>c.fqid),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new bh,this.indexArray=new gs,this.indexArray2=new Ch,this.programConfigurations=new Sh(s.layers,{zoom:s.zoom,lut:s.lut}),this.segments=new Ki,this.segments2=new Ki,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id),this.projection=s.projection}updateFootprints(s,c){}populate(s,c,d,y){this.hasPattern=CP("fill",this.layers,c);const f=this.layers[0].layout.get("fill-sort-key"),v=[];for(const{feature:B,id:I,index:R,sourceLayerIndex:b}of s){const E=this.layers[0]._featureFilter.needGeometry,P=Ut(B,E);if(!this.layers[0]._featureFilter.filter(new Gi(this.zoom),P,d))continue;const T=f?f.evaluate(P,{},d,c.availableImages):void 0,F={id:I,properties:B.properties,type:B.type,sourceLayerIndex:b,index:R,geometry:E?P.geometry:Dt(B,d,y),patterns:{},sortKey:T};v.push(F)}f&&v.sort((B,I)=>B.sortKey-I.sortKey);for(const B of v){const{geometry:I,index:R,sourceLayerIndex:b}=B;if(this.hasPattern){const E=SP("fill",this.layers,B,this.zoom,c);this.patternFeatures.push(E)}else this.addFeature(B,I,R,d,{},c.availableImages,c.brightness);c.featureIndex.insert(s[R].feature,I,R,b,this.index)}}update(s,c,d,y,f){const v=Object.keys(s).length!==0;v&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(s,c,v?this.stateDependentLayers:this.layers,d,y,f)}addFeatures(s,c,d,y,f,v){for(const B of this.patternFeatures)this.addFeature(B,B.geometry,B.index,c,d,y,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Iee),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,c,d,y,f,v=[],B){for(const I of xB(c,500)){let R=0;for(const D of I)R+=D.length;const b=this.segments.prepareSegment(R,this.layoutVertexArray,this.indexArray),E=b.vertexLength,P=[],T=[];for(const D of I){if(D.length===0)continue;D!==I[0]&&T.push(P.length/2);const V=this.segments2.prepareSegment(D.length,this.layoutVertexArray,this.indexArray2),H=V.vertexLength;this.layoutVertexArray.emplaceBack(D[0].x,D[0].y),this.indexArray2.emplaceBack(H+D.length-1,H),P.push(D[0].x),P.push(D[0].y);for(let Z=1;Z<D.length;Z++)this.layoutVertexArray.emplaceBack(D[Z].x,D[Z].y),this.indexArray2.emplaceBack(H+Z-1,H+Z),P.push(D[Z].x),P.push(D[Z].y);V.vertexLength+=D.length,V.primitiveLength+=D.length}const F=A_(P,T);for(let D=0;D<F.length;D+=3)this.indexArray.emplaceBack(E+F[D],E+F[D+1],E+F[D+2]);b.vertexLength+=R,b.primitiveLength+=F.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,d,f,v,y,B)}}let y5,v5,_5,x5;rr(EP,"FillBucket",{omit:["layers","patternFeatures"]});class TP{constructor(s,c,d,y){if(this.triangleCount=c.length/3,this.min=new Ot(0,0),this.max=new Ot(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||s.length===0)return;const[f,v]=[s[0].clone(),s[0].clone()];for(let E=1;E<s.length;++E){const P=s[E];f.x=Math.min(f.x,P.x),f.y=Math.min(f.y,P.y),v.x=Math.max(v.x,P.x),v.y=Math.max(v.y,P.y)}if(y){const E=Math.ceil(Math.max(v.x-f.x,v.y-f.y)/y);d=Math.max(d,E)}if(d===0)return;this.min=f,this.max=v;const B=this.max.sub(this.min);B.x=Math.max(B.x,1),B.y=Math.max(B.y,1);const I=Math.max(B.x,B.y)/d;this.cellsX=Math.max(1,Math.ceil(B.x/I)),this.cellsY=Math.max(1,Math.ceil(B.y/I)),this.xScale=1/I,this.yScale=1/I;const R=[];for(let E=0;E<this.triangleCount;E++){const P=s[c[3*E+0]].sub(this.min),T=s[c[3*E+1]].sub(this.min),F=s[c[3*E+2]].sub(this.min),D=Ih(Math.floor(Math.min(P.x,T.x,F.x)),this.xScale,this.cellsX),V=Ih(Math.floor(Math.max(P.x,T.x,F.x)),this.xScale,this.cellsX),H=Ih(Math.floor(Math.min(P.y,T.y,F.y)),this.yScale,this.cellsY),Z=Ih(Math.floor(Math.max(P.y,T.y,F.y)),this.yScale,this.cellsY),J=new Ot(0,0),G=new Ot(0,0),te=new Ot(0,0),oe=new Ot(0,0);for(let pe=H;pe<=Z;++pe){J.y=G.y=pe*I,te.y=oe.y=(pe+1)*I;for(let we=D;we<=V;++we)J.x=te.x=we*I,G.x=oe.x=(we+1)*I,(Nn(P,T,F,J,G,oe)||Nn(P,T,F,J,oe,te))&&R.push({cellIdx:pe*this.cellsX+we,triIdx:E})}}if(R.length===0)return;R.sort((E,P)=>E.cellIdx-P.cellIdx||E.triIdx-P.triIdx);let b=0;for(;b<R.length;){const E=R[b].cellIdx,P={start:this.payload.length,len:0};for(;b<R.length&&R[b].cellIdx===E;)++P.len,this.payload.push(R[b++].triIdx);this.cells[E]=P}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(s,c){if(this.triangleCount===0||this.cells.length===0||s.x>this.max.x||this.min.x>s.x||s.y>this.max.y||this.min.y>s.y)return;const d=Ih(s.x-this.min.x,this.xScale,this.cellsX),y=Ih(s.y-this.min.y,this.yScale,this.cellsY),f=this.cells[y*this.cellsX+d];if(f){this._lazyInitLookup();for(let v=0;v<f.len;v++){const B=this.payload[f.start+v],I=Math.floor(B/8),R=1<<B%8;if(!(this.lookup[I]&R)&&(this.lookup[I]|=R,c.push(B),c.length===this.triangleCount))return}}}query(s,c,d){if(this.triangleCount===0||this.cells.length===0||s.x>this.max.x||this.min.x>c.x||s.y>this.max.y||this.min.y>c.y)return;this._lazyInitLookup();const y=Ih(s.x-this.min.x,this.xScale,this.cellsX),f=Ih(c.x-this.min.x,this.xScale,this.cellsX),v=Ih(s.y-this.min.y,this.yScale,this.cellsY),B=Ih(c.y-this.min.y,this.yScale,this.cellsY);for(let I=v;I<=B;I++)for(let R=y;R<=f;R++){const b=this.cells[I*this.cellsX+R];if(b)for(let E=0;E<b.len;E++){const P=this.payload[b.start+E],T=Math.floor(P/8),F=1<<P%8;if(!(this.lookup[T]&F)&&(this.lookup[T]|=F,d.push(P),d.length===this.triangleCount))return}}}}function Ih(A,s,c){return Math.max(0,Math.min(c-1,Math.floor(A*s)))}rr(TP,"TriangleGridIndex");class b5{constructor(s){this.zoom=s.zoom,this.layers=s.layers,this.layerIds=this.layers.map(c=>c.fqid),this.index=s.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id),this.footprints=[]}updateFootprints(s,c){for(const d of this.footprints)c.push({footprint:d,id:s})}populate(s,c,d,y){const f=[];for(const{feature:v,id:B,index:I,sourceLayerIndex:R}of s){const b=this.layers[0]._featureFilter.needGeometry,E=Ut(v,b);if(!this.layers[0]._featureFilter.filter(new Gi(this.zoom),E,d))continue;const P={id:B,properties:v.properties,type:v.type,sourceLayerIndex:R,index:I,geometry:b?E.geometry:Dt(v,d,y),patterns:{}};f.push(P)}for(const v of f){const{geometry:B,index:I,sourceLayerIndex:R}=v;this.addFeature(v,B,I,d,{},c.availableImages,c.brightness),c.featureIndex.insert(s[I].feature,B,I,R,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(s){}update(s,c,d,y,f){}destroy(){}addFeature(s,c,d,y,f,v=[],B){for(const I of xB(c,2)){const R=[],b=[],E=[],P=new Ot(1/0,1/0),T=new Ot(-1/0,-1/0);for(const V of I)if(V.length!==0){V!==I[0]&&E.push(b.length/2);for(let H=0;H<V.length;H++)b.push(V[H].x),b.push(V[H].y),R.push(V[H]),P.x=Math.min(P.x,V[H].x),P.y=Math.min(P.y,V[H].y),T.x=Math.max(T.x,V[H].x),T.y=Math.max(T.y,V[H].y)}const F=A_(b,E),D=new TP(R,F,8,256);this.footprints.push({vertices:R,indices:F,grid:D,min:P,max:T})}}}rr(b5,"ClipBucket",{omit:["layers"]});const Vee=Bn([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Nee=Bn([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),Qee=Bn([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Hee=Bn([{name:"a_join_normal_inside",components:3,type:"Int16"}]),jee=Bn([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),Gee=Bn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Kee}=Vee;var IP,w5,FP,B5,PP,C5,S5,bB={};function E5(){if(w5)return IP;w5=1;var A=ms();function s(y,f,v,B,I){this.properties={},this.extent=v,this.type=0,this._pbf=y,this._geometry=-1,this._keys=B,this._values=I,y.readFields(c,this,f)}function c(y,f,v){y==1?f.id=v.readVarint():y==2?function(B,I){for(var R=B.readVarint()+B.pos;B.pos<R;){var b=I._keys[B.readVarint()],E=I._values[B.readVarint()];I.properties[b]=E}}(v,f):y==3?f.type=v.readVarint():y==4&&(f._geometry=v.pos)}function d(y){for(var f,v,B=0,I=0,R=y.length,b=R-1;I<R;b=I++)B+=((v=y[b]).x-(f=y[I]).x)*(f.y+v.y);return B}return IP=s,s.types=["Unknown","Point","LineString","Polygon"],s.prototype.loadGeometry=function(){var y=this._pbf;y.pos=this._geometry;for(var f,v=y.readVarint()+y.pos,B=1,I=0,R=0,b=0,E=[];y.pos<v;){if(I<=0){var P=y.readVarint();B=7&P,I=P>>3}if(I--,B===1||B===2)R+=y.readSVarint(),b+=y.readSVarint(),B===1&&(f&&E.push(f),f=[]),f.push(new A(R,b));else{if(B!==7)throw new Error("unknown command "+B);f&&f.push(f[0].clone())}}return f&&E.push(f),E},s.prototype.bbox=function(){var y=this._pbf;y.pos=this._geometry;for(var f=y.readVarint()+y.pos,v=1,B=0,I=0,R=0,b=1/0,E=-1/0,P=1/0,T=-1/0;y.pos<f;){if(B<=0){var F=y.readVarint();v=7&F,B=F>>3}if(B--,v===1||v===2)(I+=y.readSVarint())<b&&(b=I),I>E&&(E=I),(R+=y.readSVarint())<P&&(P=R),R>T&&(T=R);else if(v!==7)throw new Error("unknown command "+v)}return[b,P,E,T]},s.prototype.toGeoJSON=function(y,f,v){var B,I,R=this.extent*Math.pow(2,v),b=this.extent*y,E=this.extent*f,P=this.loadGeometry(),T=s.types[this.type];function F(H){for(var Z=0;Z<H.length;Z++){var J=H[Z];H[Z]=[360*(J.x+b)/R-180,360/Math.PI*Math.atan(Math.exp((180-360*(J.y+E)/R)*Math.PI/180))-90]}}switch(this.type){case 1:var D=[];for(B=0;B<P.length;B++)D[B]=P[B][0];F(P=D);break;case 2:for(B=0;B<P.length;B++)F(P[B]);break;case 3:for(P=function(H){var Z=H.length;if(Z<=1)return[H];for(var J,G,te=[],oe=0;oe<Z;oe++){var pe=d(H[oe]);pe!==0&&(G===void 0&&(G=pe<0),G===pe<0?(J&&te.push(J),J=[H[oe]]):J.push(H[oe]))}return J&&te.push(J),te}(P),B=0;B<P.length;B++)for(I=0;I<P[B].length;I++)F(P[B][I])}P.length===1?P=P[0]:T="Multi"+T;var V={type:"Feature",geometry:{type:T,coordinates:P},properties:this.properties};return"id"in this&&(V.id=this.id),V},IP}function T5(){if(B5)return FP;B5=1;var A=E5();function s(d,y){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=d,this._keys=[],this._values=[],this._features=[],d.readFields(c,this,y),this.length=this._features.length}function c(d,y,f){d===15?y.version=f.readVarint():d===1?y.name=f.readString():d===5?y.extent=f.readVarint():d===2?y._features.push(f.pos):d===3?y._keys.push(f.readString()):d===4&&y._values.push(function(v){for(var B=null,I=v.readVarint()+v.pos;v.pos<I;){var R=v.readVarint()>>3;B=R===1?v.readString():R===2?v.readFloat():R===3?v.readDouble():R===4?v.readVarint64():R===5?v.readVarint():R===6?v.readSVarint():R===7?v.readBoolean():null}return B}(f))}return FP=s,s.prototype.feature=function(d){if(d<0||d>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[d];var y=this._pbf.readVarint()+this._pbf.pos;return new A(this._pbf,y,this.extent,this._keys,this._values)},FP}function I5(){return S5||(S5=1,bB.VectorTile=function(){if(C5)return PP;C5=1;var A=T5();function s(c,d,y){if(c===3){var f=new A(y,y.readVarint()+y.pos);f.length&&(d[f.name]=f)}}return PP=function(c,d){this.layers=c.readFields(s,{},d)},PP}(),bB.VectorTileFeature=E5(),bB.VectorTileLayer=T5()),bB}var e0=I5();class Hp extends Ot{constructor(s,c,d){super(s,c),this.z=d}}class F5 extends Hp{constructor(s,c,d,y){super(s,c,d),this.w=y}}function wB(A,s,c,d){const y=[],f=d===0?(v,B,I,R,b,E)=>{v.push(new Ot(E,I+(E-B)/(R-B)*(b-I)))}:(v,B,I,R,b,E)=>{v.push(new Ot(B+(E-I)/(b-I)*(R-B),E))};for(const v of A){const B=[];for(const I of v){if(I.length<=2)continue;const R=[];for(let P=0;P<I.length-1;P++){const T=I[P].x,F=I[P].y,D=I[P+1].x,V=I[P+1].y,H=d===0?T:F,Z=d===0?D:V;H<s?Z>s&&f(R,T,F,D,V,s):H>c?Z<c&&f(R,T,F,D,V,c):R.push(I[P]),Z<s&&H>=s&&f(R,T,F,D,V,s),Z>c&&H<=c&&f(R,T,F,D,V,c)}let b=I[I.length-1];const E=d===0?b.x:b.y;E>=s&&E<=c&&R.push(b),R.length&&(b=R[R.length-1],R[0].x===b.x&&R[0].y===b.y||R.push(R[0]),B.push(R))}B.length&&y.push(B)}return y}function P5(A,s,c,d){const y=c==="x"?"y":"x",f=(d-A[c])/(s[c]-A[c]);A[y]=A[y]+(s[y]-A[y])*f,A[c]=d,A.hasOwnProperty("z")&&(A.z=_r(A.z,s.z,f)),A.hasOwnProperty("w")&&(A.w=_r(A.w,s.w,f))}function M5(A,s,c,d){const y=c,f=d;for(const v of["x","y"]){let B=A,I=s;B[v]>=I[v]&&(B=s,I=A),B[v]<y&&I[v]>y&&P5(B,I,v,y),B[v]<f&&I[v]>f&&P5(I,B,v,f)}}const BB=Number.MAX_SAFE_INTEGER;function R5(A,s,c,d){return A.order<s||A.order===BB||!(A.clipMask&c)||function(y,f){return f.length!==0&&f.find(v=>v===y)===void 0}(d,A.clipScope)}function CB(A,s){return A.x-s.x||A.y-s.y}function k5(A,s){return CB(A.min,s.min)===0&&CB(A.max,s.max)===0}function MP(A,s){return!(A.min.x>s.max.x||A.max.x<s.min.x||A.min.y>s.max.y||A.max.y<s.min.y)}function RP(A,s){if(A.length!==s.length)return!1;for(let c=0;c<A.length;c++)if(A[c].sourceId!==s[c].sourceId||!k5(A[c],s[c])||A[c].order!==s[c].order||A[c].clipMask!==s[c].clipMask||!Bs(A[c].clipScope,s[c].clipScope))return!1;return!0}function D5(A,s,c){const d=1/Gt,y=1/(1<<c.canonical.z),f=(s.x*d+c.canonical.x)*y+c.wrap,v=(s.y*d+c.canonical.y)*y;return{min:new Ot((A.x*d+c.canonical.x)*y+c.wrap,(A.y*d+c.canonical.y)*y),max:new Ot(f,v)}}function Wee(A,s,c){const d=1<<c.canonical.z,y=((s.x-c.wrap)*d-c.canonical.x)*Gt,f=(s.y*d-c.canonical.y)*Gt;return{min:new Ot(((A.x-c.wrap)*d-c.canonical.x)*Gt,(A.y*d-c.canonical.y)*Gt),max:new Ot(y,f)}}function L5(A,s,c,d,y,f,v){const B=A.indices,I=A.vertices,R=[];for(let b=d;b<d+y;b+=3){const E=s[c[b+0]+f],P=s[c[b+1]+f],T=s[c[b+2]+f],F=Math.min(E.x,P.x,T.x),D=Math.max(E.x,P.x,T.x),V=Math.min(E.y,P.y,T.y),H=Math.max(E.y,P.y,T.y);R.length=0,A.grid.query(new Ot(F,V),new Ot(D,H),R);for(let Z=0;Z<R.length;Z++){const J=R[Z];if(Nn(I[B[3*J+0]],I[B[3*J+1]],I[B[3*J+2]],E,P,T,v))return!0}}return!1}function O5(A,s,c,d){if(!A||!c)return!1;let y=A.vertices;if(!s.canonical.equals(d.canonical)||s.wrap!==d.wrap){if(c.vertices.length<A.vertices.length)return O5(c,d,A,s);const f=s.canonical,v=d.canonical,B=Math.pow(2,v.z-f.z);y=A.vertices.map(I=>new Ot((I.x+f.x*Gt)*B-v.x*Gt,(I.y+f.y*Gt)*B-v.y*Gt))}return L5(c,y,A.indices,0,A.indices.length,0,0)}function U5(A,s,c,d){const y=Math.pow(2,d.z-c.z);return new Ot((A+c.x*Gt)*y-d.x*Gt,(s+c.y*Gt)*y-d.y*Gt)}function z5(A,s){const c=[];s.grid.queryPoint(A,c);const d=s.indices,y=s.vertices;for(let f=0;f<c.length;f++){const v=c[f];if(hi([y[d[3*v+0]],y[d[3*v+1]],y[d[3*v+2]]],A))return!0}return!1}const kP=[new Ot(0,0),new Ot(Gt,0),new Ot(Gt,Gt),new Ot(0,Gt)];function V5(A,s){const c=[];let d=[];if(!s||A.length<2)return[A];if(A.length===2)return so(A[0],A[1],kP)?[A]:[];for(let y=0;y<A.length+2;y++){const f=A[y%A.length],v=A[(y+1)%A.length],B=so(y===0?A[A.length-1]:A[(y-1)%A.length],f,kP),I=so(f,v,kP),R=B||I;R&&d.push(f),R&&I||d.length>0&&(d.length>1&&c.push(d),d=[])}return d.length>1&&c.push(d),c}const DP=e0.VectorTileFeature.types,qee=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],Xee=["fill-extrusion-flood-light-ground-radius"],Zee=Math.pow(2,13),Yee=Math.pow(2,15)-1,N5=new Ot(0,1),Hd=2147483648;function m_(A,s,c,d,y,f,v,B){A.emplaceBack((s<<1)+v,(c<<1)+f,(Math.floor(d*Zee)<<1)+y,Math.round(B))}function g_(A,s,c){A.emplaceBack(s.x*Gt,s.y*Gt,c?1:0)}function SB(A,s,c,d,y,f){A.emplaceBack(s.x,s.y,(c.x<<1)+d,(c.y<<1)+y,f)}function y_(A,s,c){A.emplaceBack(s.x,s.y,s.z,c[0]*16384,c[1]*16384,c[2]*16384)}class Q5{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class H5{constructor(){this.centroidXY=new Ot(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new Ot(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new Ot(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new Ot(this.max.x-this.min.x,this.max.y-this.min.y)}}class j5{constructor(){this.acc=new Ot(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(s,c){s.min.x===Number.MAX_VALUE&&(s.min.x=s.max.x=c.x,s.min.y=s.max.y=c.y)}appendEdge(s,c,d){this.accCount++,this.acc._add(c);let y=!!this.borders;c.x<s.min.x?(s.min.x=c.x,y=!0):c.x>s.max.x&&(s.max.x=c.x,y=!0),c.y<s.min.y?(s.min.y=c.y,y=!0):c.y>s.max.y&&(s.max.y=c.y,y=!0),((c.x===0||c.x===Gt)&&c.x===d.x)!=((c.y===0||c.y===Gt)&&c.y===d.y)&&this.processBorderOverlap(c,d),y&&this.checkBorderIntersection(c,d)}checkBorderIntersection(s,c){c.x<0!=s.x<0&&this.addBorderIntersection(0,_r(c.y,s.y,(0-c.x)/(s.x-c.x))),c.x>Gt!=s.x>Gt&&this.addBorderIntersection(1,_r(c.y,s.y,(Gt-c.x)/(s.x-c.x))),c.y<0!=s.y<0&&this.addBorderIntersection(2,_r(c.x,s.x,(0-c.y)/(s.y-c.y))),c.y>Gt!=s.y>Gt&&this.addBorderIntersection(3,_r(c.x,s.x,(Gt-c.y)/(s.y-c.y)))}addBorderIntersection(s,c){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const d=this.borders[s];c<d[0]&&(d[0]=c),c>d[1]&&(d[1]=c)}processBorderOverlap(s,c){if(s.x===c.x){if(s.y===c.y)return;const d=s.x===0?0:1;this.addBorderIntersection(d,c.y),this.addBorderIntersection(d,s.y)}else{const d=s.y===0?2:3;this.addBorderIntersection(d,c.x),this.addBorderIntersection(d,s.x)}}centroid(){return this.accCount===0?new Ot(0,0):new Ot(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((s,c)=>s+ +(c[0]!==Number.MAX_VALUE),0):0}}function G5(A,s){const c=A.add(s)._unit(),d=Er(A.x*c.x+A.y*c.y,-1,1);var y,f,v;return v=Math.acos(d),Math.min(4,Math.max(-4,Math.tan(v)))/4*Yee*((y=A).x*(f=s).y-y.y*f.x<0?-1:1)}const Jee=[A=>A.x<0,A=>A.x>Gt,A=>A.y<0,A=>A.y>Gt];function $ee(A,s,c,d){const y=[4];if(d===0)return y;c._mult(d);const f=A.sub(c),v=s.sub(c),B=[A,s,f,v];for(let I=0;I<4;I++)for(const R of B)if(Jee[I](R)){y.push(I);break}return y}class K5{constructor(s){this.vertexArray=new Hg,this.indexArray=new gs,this.programConfigurations=new Sh(s.layers,{zoom:s.zoom,lut:s.lut},c=>Xee.includes(c)),this._segments=new Ki,this.hiddenByLandmarkVertexArray=new Wg,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new Ki}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(s,c,d,y=!1){const f=s.length;if(f>2){let v=Math.max(0,this._segments.get().length-1);const B=this._segments._prepareSegment(4*f,this.vertexArray.length,2*this._segmentToGroundQuads[v].length);let I;v!==this._segments.get().length-1&&(v++,this._segmentToGroundQuads[v]=[],this._segmentToRegionTriCounts[v]=[0,0,0,0,0]);{const R=s[0],b=s[1];I=G5(R.sub(s[f-1])._perp()._unit(),b.sub(R)._perp()._unit())}for(let R=0;R<f;R++){const b=R===f-1?0:R+1,E=s[R],P=s[b],T=s[b===f-1?0:b+1],F=P.sub(E)._perp()._unit(),D=G5(F,T.sub(P)._perp()._unit()),V=I,H=D;if(LP(E,P,c)||y&&X5(E,c)&&X5(P,c)){I=D;continue}const Z=B.vertexLength;SB(this.vertexArray,E,P,1,1,V),SB(this.vertexArray,E,P,1,0,V),SB(this.vertexArray,E,P,0,1,H),SB(this.vertexArray,E,P,0,0,H),B.vertexLength+=4;const J=$ee(E,P,F,d);for(const G of J)this._segmentToGroundQuads[v].push({id:Z,region:G}),this._segmentToRegionTriCounts[v][G]+=2,B.primitiveLength+=2;I=D}}}prepareBorderSegments(){if(!this.hasData())return;const s=this._segments.get(),c=s.length;for(let d=0;d<c;d++)this._segmentToGroundQuads[d].sort((y,f)=>y.region-f.region);for(let d=0;d<c;d++){const y=this._segmentToGroundQuads[d],f=s[d],v=this._segmentToRegionTriCounts[d];v.reduce((I,R)=>I+R,0);let B=0;for(let I=0;I<=4;I++){const R=v[I];if(R!==0){let b=this.regionSegments[I];b||(b=this.regionSegments[I]=new Ki);const E={vertexOffset:f.vertexOffset,primitiveOffset:f.primitiveOffset+B,vertexLength:f.vertexLength,primitiveLength:R};b.get().push(E)}B+=R}for(let I=0;I<y.length;I++){const R=y[I].id;this.indexArray.emplaceBack(R,R+1,R+3),this.indexArray.emplaceBack(R,R+3,R+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(s,c,d,y,f,v){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,s,c,d,y,f,v)}upload(s){this.hasData()&&(this.vertexBuffer=s.createVertexBuffer(this.vertexArray,Nee.members),this.indexBuffer=s.createIndexBuffer(this.indexArray))}uploadPaintProperties(s){this.hasData()&&this.programConfigurations.upload(s)}update(s,c,d,y,f,v){this.hasData()&&this.programConfigurations.updatePaintArrays(s,c,d,y,f,v)}updateHiddenByLandmark(s){if(!this.hasData())return;const c=s.groundVertexCount+s.groundVertexArrayOffset;if(s.groundVertexCount===0)return;const d=s.flags&Hd?1:0;for(let y=s.groundVertexArrayOffset;y<c;++y)this.hiddenByLandmarkVertexArray.emplace(y,d);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(s){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=s.createVertexBuffer(this.hiddenByLandmarkVertexArray,jee.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let s=0;s<=4;s++){const c=this.regionSegments[s];c&&c.destroy()}}}}class EB{constructor(s){this.zoom=s.zoom,this.canonical=s.canonical,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(c=>c.fqid),this.index=s.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=s.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new gs,this.footprintVertices=new bh,this.footprintSegments=[],this.layoutVertexArray=new wh,this.centroidVertexArray=new lB,this.wallVertexArray=new o_,this.indexArray=new gs,this.programConfigurations=new Sh(s.layers,{zoom:s.zoom,lut:s.lut},c=>qee.includes(c)),this.segments=new Ki,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id),this.groundEffect=new K5(s),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}updateFootprints(s,c){}populate(s,c,d,y){this.features=[],this.hasPattern=CP("fill-extrusion",this.layers,c),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=He(d),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:f,id:v,index:B,sourceLayerIndex:I}of s){const R=this.layers[0]._featureFilter.needGeometry,b=Ut(f,R);if(!this.layers[0]._featureFilter.filter(new Gi(this.zoom),b,d))continue;const E={id:v,sourceLayerIndex:I,index:B,geometry:R?b.geometry:Dt(f,d,y),properties:f.properties,type:f.type,patterns:{}},P=this.layoutVertexArray.length,T=DP[E.type]==="Polygon";if(this.hasPattern)this.features.push(SP("fill-extrusion",this.layers,E,this.zoom,c));else if(this.wallMode)for(const F of E.geometry)for(const D of V5(F,T))this.addFeature(E,[D],B,d,{},c.availableImages,y,c.brightness);else this.addFeature(E,E.geometry,B,d,{},c.availableImages,y,c.brightness);c.featureIndex.insert(f,E.geometry,B,I,this.index,P)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(s,c,d,y,f,v){for(const B of this.features){const I=DP[B.type]==="Polygon",{geometry:R}=B;if(this.wallMode)for(const b of R)for(const E of V5(b,I))this.addFeature(B,[E],B.index,c,d,y,f,v);else this.addFeature(B,R,B.index,c,d,y,f,v)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(s,c,d,y,f){const v=Object.keys(s).length!==0;if(v&&!this.stateDependentLayers.length)return;const B=v?this.stateDependentLayers:this.layers;this.programConfigurations.updatePaintArrays(s,c,B,d,y,f),this.groundEffect.update(s,c,B,d,y,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Kee),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.wallVertexBuffer=s.createVertexBuffer(this.wallVertexArray,Hee.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=s.createVertexBuffer(this.layoutVertexExtArray,Gee.members,!0)),this.groundEffect.upload(s)),this.groundEffect.uploadPaintProperties(s),this.programConfigurations.upload(s),this.uploaded=!0}uploadCentroid(s){this.groundEffect.uploadHiddenByLandmark(s),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,Qee.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,c,d,y,f,v,B,I){const R=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(s,{})/this.tileToMeter,b=[new Ot(0,0),new Ot(Gt,Gt)],E=B.projection,P=E.name==="globe",T=this.wallMode||DP[s.type]==="Polygon",F=new j5;F.centroidDataIndex=this.centroidData.length;const D=new H5,V=this.layers[0].paint.get("fill-extrusion-base").evaluate(s,{},y)<=0,H=this.layers[0].paint.get("fill-extrusion-height").evaluate(s,{},y);let Z;if(D.height=H,D.vertexArrayOffset=this.layoutVertexArray.length,D.groundVertexArrayOffset=this.groundEffect.vertexArray.length,P&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new jg),this.wallMode){if(P)return void an("Non zero fill-extrusion-line-width is not yet supported on globe.");if(c.length!==1)return;Z=function(xe){const De=xe[0].x===xe[xe.length-1].x&&xe[0].y===xe[xe.length-1].y;(function(Lt){let Pt=0;const yr=Lt.length;for(let qt=0;qt<yr;qt++)Pt+=(Lt[(qt+1)%yr].x-Lt[qt].x)*(Lt[(qt+1)%yr].y+Lt[qt].y);return Pt>=0})(xe)||(xe=xe.reverse());const Oe={geometry:[],joinNormals:[],indices:[]},Ke=[],Ze=[],Ye=[];let et=xe.length;if(et<(De?3:2))return Oe;for(;et>=2&&xe[et-1].equals(xe[et-2]);)et--;let at,rt,_t,Tt,dt,Zt=0;for(;Zt<et-1&&xe[Zt].equals(xe[Zt+1]);)Zt++;De&&(at=xe[et-2],dt=xe[Zt].sub(at)._unit()._perp());for(let Lt=Zt;Lt<et;Lt++){if(_t=Lt===et-1?De?xe[Zt+1]:void 0:xe[Lt+1],_t&&xe[Lt].equals(_t))continue;dt&&(Tt=dt),at&&(rt=at),at=xe[Lt],dt=_t?_t.sub(at)._unit()._perp():Tt,Tt=Tt||dt;let Pt=Tt.add(dt);Pt.x===0&&Pt.y===0||Pt._unit();const yr=Pt.x*dt.x+Pt.y*dt.y,qt=yr!==0?1/yr:1/0,tr=Tt.x*dt.y-Tt.y*dt.x>0;let Tr="miter";const Nr=2;Tr==="miter"&&qt>Nr&&(Tr="bevel"),Tr==="bevel"&&(qt>100&&(Tr="flipbevel"),qt<Nr&&(Tr="miter"));const Or=(Ur,Xr,Jr,Gn)=>{const kn=new Ot(Ur.x,Ur.y),Fr=new Ot(Ur.x,Ur.y);kn.x+=Xr.x*Gn,kn.y+=Xr.y*Gn,Fr.x-=Xr.x*Math.max(Jr,1),Fr.y-=Xr.y*Math.max(Jr,1),Ye.push(Xr),Ke.push(kn),Ze.push(Fr)};if(Tr==="miter")Pt._mult(qt),Or(at,Pt,0,0);else if(Tr==="flipbevel")Pt=dt.mult(-1),Or(at,Pt,0,0),Or(at,Pt.mult(-1),0,0);else{const Ur=-Math.sqrt(qt*qt-1),Xr=tr?Ur:0,Jr=tr?0:Ur;rt&&Or(at,Tt,Xr,Jr),_t&&Or(at,dt,Xr,Jr)}}Oe.geometry=[...Ke,...Ze.reverse(),Ke[0]],Oe.joinNormals=[...Ye,...Ye.reverse(),Ye[Ye.length-1]];const Qt=Oe.geometry.length-1;for(let Lt=0;Lt<Qt/2;Lt++)if(Lt+1<Qt/2){let Pt=Lt,yr=Lt+1,qt=Qt-1-Lt,tr=Qt-2-Lt;Pt=Pt===0?Qt-1:Pt-1,yr=yr===0?Qt-1:yr-1,qt=qt===0?Qt-1:qt-1,tr=tr===0?Qt-1:tr-1,Oe.indices.push(qt),Oe.indices.push(yr),Oe.indices.push(Pt),Oe.indices.push(qt),Oe.indices.push(tr),Oe.indices.push(yr)}return Oe}(c[0]),c=[Z.geometry]}const J=(xe,De)=>xe<(De.length-1)/2||xe===De.length-1,G=this.wallMode?[c]:xB(c,500);for(let xe=G.length-1;xe>=0;xe--){const De=G[xe];(De.length===0||(te=De[0]).every(Ie=>Ie.x<=0)||te.every(Ie=>Ie.x>=Gt)||te.every(Ie=>Ie.y<=0)||te.every(Ie=>Ie.y>=Gt))&&G.splice(xe,1)}var te;let oe;if(P)oe=$5(G,b,y);else{oe=[];for(const xe of G)oe.push({polygon:xe,bounds:b})}const pe=T?this.edgeRadius:0,we=pe>0&&this.zoom<17,Ce=(xe,De)=>{if(xe.length===0)return!1;const Ie=xe[xe.length-1];return De.x===Ie.x&&De.y===Ie.y};for(const{polygon:xe,bounds:De}of oe){let Ie=0,Oe=0;for(const et of xe)T&&!et[0].equals(et[et.length-1])&&et.push(et[0]),Oe+=T?et.length-1:et.length;const Ke=this.segments.prepareSegment((T?5:4)*Oe,this.layoutVertexArray,this.indexArray);D.footprintSegIdx<0&&(D.footprintSegIdx=this.footprintSegments.length),D.polygonSegIdx<0&&(D.polygonSegIdx=this.polygonSegments.length);const Ze={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},Ye=new Q5;if(Ye.vertexOffset=this.footprintVertices.length,Ye.indexOffset=3*this.footprintIndices.length,Ye.ringIndices=[],T){const et=[],at=[];Ie=Ke.vertexLength;for(let _t=0;_t<xe.length;_t++){const Tt=xe[_t];Tt.length&&_t!==0&&at.push(et.length/2);const dt=[];let Zt,Qt;Zt=Tt[1].sub(Tt[0])._perp()._unit(),Ye.ringIndices.push(Tt.length-1);for(let Lt=1;Lt<Tt.length;Lt++){const Pt=Tt[Lt],yr=Tt[Lt===Tt.length-1?1:Lt+1],qt=Pt.clone();if(pe){Qt=yr.sub(Pt)._perp()._unit();const tr=Zt.add(Qt)._unit(),Tr=pe*Math.min(4,1/(Zt.x*tr.x+Zt.y*tr.y));qt.x+=Tr*tr.x,qt.y+=Tr*tr.y,qt.x=Math.round(qt.x),qt.y=Math.round(qt.y),Zt=Qt}if(!V||pe!==0&&!we||Ce(dt,qt)||dt.push(qt),m_(this.layoutVertexArray,qt.x,qt.y,0,0,1,1,0),this.wallMode){const tr=J(Lt,Tt);g_(this.wallVertexArray,Z.joinNormals[Lt],!tr)}Ke.vertexLength++,this.footprintVertices.emplaceBack(Pt.x,Pt.y),et.push(Pt.x,Pt.y),P&&y_(this.layoutVertexExtArray,E.projectTilePoint(qt.x,qt.y,y),E.upVector(y,qt.x,qt.y))}V&&(pe===0||we)&&(dt.length!==0&&Ce(dt,dt[0])&&dt.pop(),this.groundEffect.addData(dt,De,R))}const rt=this.wallMode?Z.indices:A_(et,at);for(let _t=0;_t<rt.length;_t+=3)this.footprintIndices.emplaceBack(Ye.vertexOffset+rt[_t+0],Ye.vertexOffset+rt[_t+1],Ye.vertexOffset+rt[_t+2]),this.indexArray.emplaceBack(Ie+rt[_t],Ie+rt[_t+2],Ie+rt[_t+1]),Ke.primitiveLength++;Ye.indexCount+=rt.length,Ye.vertexCount+=this.footprintVertices.length-Ye.vertexOffset}for(let et=0;et<xe.length;et++){const at=xe[et];F.startRing(D,at[0]);let rt=at.length>4&&Z5(at[at.length-2],at[0],at[1]),_t=pe?ete(at[at.length-2],at[0],at[1],pe):0;const Tt=[];let dt,Zt,Qt;Zt=at[1].sub(at[0])._perp()._unit();let Lt=!0;for(let Pt=1,yr=0;Pt<at.length;Pt++){let qt=at[Pt-1],tr=at[Pt];const Tr=at[Pt===at.length-1?1:Pt+1];if(F.appendEdge(D,tr,qt),LP(tr,qt,De)){pe&&(Zt=Tr.sub(tr)._perp()._unit(),Lt=!Lt);continue}const Nr=tr.sub(qt)._perp(),Or=Nr.x/(Math.abs(Nr.x)+Math.abs(Nr.y)),Ur=Nr.y>0?1:0,Xr=qt.dist(tr);if(yr+Xr>32768&&(yr=0),pe){Qt=Tr.sub(tr)._perp()._unit();let Fr=q5(qt,tr,Tr,W5(Zt,Qt),pe);isNaN(Fr)&&(Fr=0);const En=tr.sub(qt)._unit();qt=qt.add(En.mult(_t))._round(),tr=tr.add(En.mult(-Fr))._round(),_t=Fr,Zt=Qt,V&&this.zoom>=17&&(Ce(Tt,qt)||Tt.push(qt),Ce(Tt,tr)||Tt.push(tr))}const Jr=Ke.vertexLength,Gn=at.length>4&&Z5(qt,tr,Tr);let kn=Y5(yr,rt,Lt);if(m_(this.layoutVertexArray,qt.x,qt.y,Or,Ur,0,0,kn),m_(this.layoutVertexArray,qt.x,qt.y,Or,Ur,0,1,kn),this.wallMode){const Fr=J(Pt-1,at),En=Z.joinNormals[Pt-1];g_(this.wallVertexArray,En,Fr),g_(this.wallVertexArray,En,Fr)}if(yr+=Xr,kn=Y5(yr,Gn,!Lt),rt=Gn,m_(this.layoutVertexArray,tr.x,tr.y,Or,Ur,0,0,kn),m_(this.layoutVertexArray,tr.x,tr.y,Or,Ur,0,1,kn),this.wallMode){const Fr=J(Pt,at),En=Z.joinNormals[Pt];g_(this.wallVertexArray,En,Fr),g_(this.wallVertexArray,En,Fr)}if(Ke.vertexLength+=4,this.indexArray.emplaceBack(Jr+0,Jr+1,Jr+2),this.indexArray.emplaceBack(Jr+1,Jr+3,Jr+2),Ke.primitiveLength+=2,pe){const Fr=Ie+(Pt===1?at.length-2:Pt-2),En=Pt===1?Ie:Fr+1;if(this.indexArray.emplaceBack(Jr+1,Fr,Jr+3),this.indexArray.emplaceBack(Fr,En,Jr+3),Ke.primitiveLength+=2,dt===void 0&&(dt=Jr),!LP(Tr,at[Pt],De)){const Mn=Pt===at.length-1?dt:Ke.vertexLength;this.indexArray.emplaceBack(Jr+2,Jr+3,Mn),this.indexArray.emplaceBack(Jr+3,Mn+1,Mn),this.indexArray.emplaceBack(Jr+3,En,Mn+1),Ke.primitiveLength+=3}Lt=!Lt}if(P){const Fr=this.layoutVertexExtArray,En=E.projectTilePoint(qt.x,qt.y,y),Mn=E.projectTilePoint(tr.x,tr.y,y),Ai=E.upVector(y,qt.x,qt.y),eo=E.upVector(y,tr.x,tr.y);y_(Fr,En,Ai),y_(Fr,En,Ai),y_(Fr,Mn,eo),y_(Fr,Mn,eo)}}T&&(Ie+=at.length-1),V&&pe&&this.zoom>=17&&(Tt.length!==0&&Ce(Tt,Tt[0])&&Tt.pop(),this.groundEffect.addData(Tt,De,R,pe>0))}this.footprintSegments.push(Ye),Ze.triangleCount=this.indexArray.length-Ze.triangleArrayOffset,this.polygonSegments.push(Ze),++D.footprintSegLen,++D.polygonSegLen}if(D.vertexCount=this.layoutVertexArray.length-D.vertexArrayOffset,D.groundVertexCount=this.groundEffect.vertexArray.length-D.groundVertexArrayOffset,D.vertexCount!==0){if(D.centroidXY=F.borders?N5:this.encodeCentroid(F,D),this.centroidData.push(D),F.borders){this.featuresOnBorder.push(F);const xe=this.featuresOnBorder.length-1;for(let De=0;De<F.borders.length;De++)F.borders[De][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[De].push(xe)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,d,f,v,y,I),this.groundEffect.addPaintPropertiesData(s,d,f,v,y,I),this.maxHeight=Math.max(this.maxHeight,H)}}sortBorders(){for(let s=0;s<this.borderFeatureIndices.length;s++)this.borderFeatureIndices[s].sort((c,d)=>this.featuresOnBorder[c].borders[s][0]-this.featuresOnBorder[d].borders[s][0])}splitToSubtiles(){const s=[];for(let B=0;B<this.centroidData.length;B++){const I=this.centroidData[B],R=+(I.min.y+I.max.y>Gt),b=2*R+(+(I.min.x+I.max.x>Gt)^R);for(let E=0;E<I.polygonSegLen;E++){const P=I.polygonSegIdx+E;s.push({centroidIdx:B,subtile:b,polygonSegmentIdx:P,triangleSegmentIdx:this.polygonSegments[P].triangleSegIdx})}}const c=new gs;s.sort((B,I)=>B.triangleSegmentIdx===I.triangleSegmentIdx?B.subtile-I.subtile:B.triangleSegmentIdx-I.triangleSegmentIdx);let d=0,y=0,f=0;for(const B of s){if(B.triangleSegmentIdx!==d)break;f++}const v=s.length;for(;y!==s.length;){d=s[y].triangleSegmentIdx;let B=0,I=y,R=y;for(let b=I;b<f&&s[b].subtile===B;b++)R++;for(;I!==f;){const b=s[I];B=b.subtile;const E=this.centroidData[b.centroidIdx].min.clone(),P=this.centroidData[b.centroidIdx].max.clone(),T={vertexOffset:this.segments.segments[d].vertexOffset,primitiveOffset:c.length,vertexLength:this.segments.segments[d].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let F=I;F<R;F++){const D=s[F],V=this.polygonSegments[D.polygonSegmentIdx],H=this.centroidData[D.centroidIdx].min,Z=this.centroidData[D.centroidIdx].max,J=this.indexArray.uint16;for(let G=V.triangleArrayOffset;G<V.triangleArrayOffset+V.triangleCount;G++)c.emplaceBack(J[3*G],J[3*G+1],J[3*G+2]);T.primitiveLength+=V.triangleCount,E.x=Math.min(E.x,H.x),E.y=Math.min(E.y,H.y),P.x=Math.max(P.x,Z.x),P.y=Math.max(P.y,Z.y)}T.primitiveLength>0&&this.triangleSubSegments.push({segment:T,min:E,max:P}),I=R;for(let F=I;F<f&&s[F].subtile===s[I].subtile;F++)R++}y=f;for(let b=y;b<v&&s[b].triangleSegmentIdx===s[y].triangleSegmentIdx;b++)f++}c._trim(),this.indexArray=c}getVisibleSegments(s,c,d){const y=new Ki;if(this.wallMode){for(const D of this.triangleSubSegments)y.segments.push(D.segment);return y}let f=0,v=0;const B=1<<s.canonical.z;if(c){const D=c.getMinMaxForTile(s);D&&(f=D.min,v=D.max)}v+=this.maxHeight;const I=s.toUnwrapped();let R;const b=[I.canonical.x/B+I.wrap,I.canonical.y/B],E=[(I.canonical.x+1)/B+I.wrap,(I.canonical.y+1)/B],P=(D,V,H)=>[D[0]*(1-H[0])+V[0]*H[0],D[1]*(1-H[1])+V[1]*H[1]],T=[],F=[];for(const D of this.triangleSubSegments){T[0]=D.min.x/Gt,T[1]=D.min.y/Gt,F[0]=D.max.x/Gt,F[1]=D.max.y/Gt;const V=P(b,E,T),H=P(b,E,F);if(new ti([V[0],V[1],f],[H[0],H[1],v]).intersectsPrecise(d)===0){R&&(y.segments.push(R),R=void 0);continue}const Z=D.segment;R&&R.vertexOffset!==Z.vertexOffset&&(y.segments.push(R),R=void 0),R?(R.vertexLength+=Z.vertexLength,R.primitiveLength+=Z.primitiveLength):R={vertexOffset:Z.vertexOffset,primitiveLength:Z.primitiveLength,vertexLength:Z.vertexLength,primitiveOffset:Z.primitiveOffset,sortKey:void 0,vaos:{}}}return R&&y.segments.push(R),y}encodeCentroid(s,c){const d=s.centroid(),y=c.span(),f=Math.min(7,Math.round(y.x*this.tileToMeter/10)),v=Math.min(7,Math.round(y.y*this.tileToMeter/10));return new Ot(Er(d.x,1,Gt-1)<<3|f,Er(d.y,1,Gt-1)<<3|v)}encodeBorderCentroid(s){if(!s.borders)return new Ot(0,0);const c=s.borders,d=Number.MAX_VALUE;if(c[0][0]!==d||c[1][0]!==d){const y=c[0][0]!==d?0:1;return new Ot(6|(c[0][0]!==d?0:65528),(c[y][0]+c[y][1])/2<<3|6)}{const y=c[2][0]!==d?2:3;return new Ot((c[y][0]+c[y][1])/2<<3|6,6|(c[2][0]!==d?0:65528))}}showCentroid(s){const c=this.centroidData[s.centroidDataIndex];c.flags&=Hd,c.centroidXY.x=0,c.centroidXY.y=0,this.writeCentroidToBuffer(c)}writeCentroidToBuffer(s){this.groundEffect.updateHiddenByLandmark(s);const c=s.vertexArrayOffset,d=s.vertexCount+s.vertexArrayOffset,y=s.flags&Hd?N5:s.centroidXY,f=this.centroidVertexArray.geta_centroid_pos0(c);if(this.centroidVertexArray.geta_centroid_pos1(c)!==y.y||f!==y.x){for(let v=c;v<d;++v)this.centroidVertexArray.emplace(v,y.x,y.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const s of this.centroidData)this.writeCentroidToBuffer(s)}updateReplacement(s,c,d){if(c.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=c.updateTime;const y=c.getReplacementRegionsForTile(s.toUnwrapped());if(RP(this.activeReplacements,y))return;if(this.activeReplacements=y,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const v of this.centroidData)v.flags&=2147483647;const f=[];for(const v of this.activeReplacements){if(v.order<d)continue;const B=Math.pow(2,v.footprintTileId.canonical.z-s.canonical.z);for(const I of this.centroidData)if(!(I.flags&Hd||v.min.x>I.max.x||I.min.x>v.max.x||v.min.y>I.max.y||I.min.y>v.max.y))for(let R=0;R<I.footprintSegLen;R++){const b=this.footprintSegments[I.footprintSegIdx+R];if(f.length=0,tte(this.footprintVertices,b.vertexOffset,b.vertexCount,v.footprintTileId.canonical,s.canonical,f),L5(v.footprint,f,this.footprintIndices.uint16,b.indexOffset,b.indexCount,-b.vertexOffset,-B)){I.flags|=Hd;break}}}for(const v of this.centroidData)this.writeCentroidToBuffer(v);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(s,c,d){let y=!1;for(let f=0;f<d.footprintSegLen;f++){const v=this.footprintSegments[d.footprintSegIdx+f];let B=0;for(const I of v.ringIndices){for(let R=B,b=I+B-1;R<I+B;b=R++){const E=this.footprintVertices.int16[2*(R+v.vertexOffset)+0],P=this.footprintVertices.int16[2*(R+v.vertexOffset)+1],T=this.footprintVertices.int16[2*(b+v.vertexOffset)+1];P>c!=T>c&&s<(this.footprintVertices.int16[2*(b+v.vertexOffset)+0]-E)*(c-P)/(T-P)+E&&(y=!y)}B=I}}return y}getHeightAtTileCoord(s,c){let d=Number.NEGATIVE_INFINITY,y=!0;const f=4*(s+Gt)*Gt+(c+Gt);if(this.partLookup.hasOwnProperty(f)){const v=this.partLookup[f];return v?{height:v.height,hidden:!!(v.flags&Hd)}:void 0}for(const v of this.centroidData)s>v.max.x||v.min.x>s||c>v.max.y||v.min.y>c||this.footprintContainsPoint(s,c,v)&&v&&v.height>d&&(d=v.height,this.partLookup[f]=v,y=!!(v.flags&Hd));if(d!==Number.NEGATIVE_INFINITY)return{height:d,hidden:y};this.partLookup[f]=void 0}}function W5(A,s){const c=A.add(s)._unit();return A.x*c.x+A.y*c.y}function ete(A,s,c,d){const y=s.sub(A)._perp()._unit(),f=c.sub(s)._perp()._unit();return q5(A,s,c,W5(y,f),d)}function q5(A,s,c,d,y){const f=Math.sqrt(1-d*d);return Math.min(A.dist(s)/3,s.dist(c)/3,y*f/d)}function LP(A,s,c){return A.x<c[0].x&&s.x<c[0].x||A.x>c[1].x&&s.x>c[1].x||A.y<c[0].y&&s.y<c[0].y||A.y>c[1].y&&s.y>c[1].y}function X5(A,s){return A.x<s[0].x||A.x>s[1].x||A.y<s[0].y||A.y>s[1].y}function Z5(A,s,c){if(A.x<0||A.x>=Gt||s.x<0||s.x>=Gt||c.x<0||c.x>=Gt)return!1;const d=c.sub(s),y=d.perp(),f=A.sub(s);return(d.x*f.x+d.y*f.y)/Math.sqrt((d.x*d.x+d.y*d.y)*(f.x*f.x+f.y*f.y))>-.866&&y.x*f.x+y.y*f.y<0}function Y5(A,s,c){const d=s?2|A:-3&A;return c?1|d:-2&d}function J5(){const A=Math.PI/32,s=Math.tan(A),c=W;return c*Math.sqrt(1+2*s*s)-c}function $5(A,s,c){const d=1<<c.z,y=Me(c.x/d),f=Me((c.x+1)/d),v=Fe(c.y/d),B=Fe((c.y+1)/d);return function(I,R,b,E,P=0,T){const F=[];if(!I.length||!b||!E)return F;const D=(oe,pe)=>{for(const we of oe)F.push({polygon:we,bounds:pe})},V=Math.ceil(Math.log2(b)),H=Math.ceil(Math.log2(E)),Z=V-H,J=[];for(let oe=0;oe<Math.abs(Z);oe++)J.push(Z>0?0:1);for(let oe=0;oe<Math.min(V,H);oe++)J.push(0),J.push(1);let G=I;if(G=wB(G,R[0].y-P,R[1].y+P,1),G=wB(G,R[0].x-P,R[1].x+P,0),!G.length)return F;const te=[];for(J.length?te.push({polygons:G,bounds:R,depth:0}):D(G,R);te.length;){const oe=te.pop(),pe=oe.depth,we=J[pe],Ce=oe.bounds[0],xe=oe.bounds[1],De=we===0?Ce.x:Ce.y,Ie=we===0?xe.x:xe.y,Oe=T?T(we,De,Ie):.5*(De+Ie),Ke=wB(oe.polygons,De-P,Oe+P,we),Ze=wB(oe.polygons,Oe-P,Ie+P,we);if(Ke.length){const Ye=[Ce,new Ot(we===0?Oe:xe.x,we===1?Oe:xe.y)];J.length>pe+1?te.push({polygons:Ke,bounds:Ye,depth:pe+1}):D(Ke,Ye)}if(Ze.length){const Ye=[new Ot(we===0?Oe:Ce.x,we===1?Oe:Ce.y),xe];J.length>pe+1?te.push({polygons:Ze,bounds:Ye,depth:pe+1}):D(Ze,Ye)}}return F}(A,s,Math.ceil((f-y)/11.25),Math.ceil((v-B)/11.25),1,(I,R,b)=>{if(I===0)return .5*(R+b);{const E=Fe((c.y+R/Gt)/d);return(Te(.5*(Fe((c.y+b/Gt)/d)+E))*d-c.y)*Gt}})}function tte(A,s,c,d,y,f){const v=Math.pow(2,d.z-y.z);for(let B=0;B<c;B++){let I=A.int16[2*(B+s)+0],R=A.int16[2*(B+s)+1];I=(I+y.x*Gt)*v-d.x*Gt,R=(R+y.y*Gt)*v-d.y*Gt,f.push(new Ot(I,R))}}let ez,tz;function v_(A,s){return A.x*s.x+A.y*s.y}function rz(A,s){if(A.length===1){let c=0;const d=s[c++];let y;for(;!y||d.equals(y);)if(y=s[c++],!y)return 1/0;for(;c<s.length;c++){const f=s[c],v=A[0],B=y.sub(d),I=f.sub(d),R=v.sub(d),b=v_(B,B),E=v_(B,I),P=v_(I,I),T=v_(R,B),F=v_(R,I),D=b*P-E*E,V=(P*T-E*F)/D,H=(b*F-E*T)/D,Z=d.z*(1-V-H)+y.z*V+f.z*H;if(isFinite(Z))return Z}return 1/0}{let c=1/0;for(const d of s)c=Math.min(c,d.z);return c}}function nz(A,s,c,d,y,f,v,B){const I=v*y.getElevationAt(A,s,!0,!0),R=f[0]!==0,b=R?f[1]===0?v*(f[0]/7-450):v*function(E,P,T){const F=Math.floor(P[0]/8),D=Math.floor(P[1]/8),V=10*(P[0]-8*F),H=10*(P[1]-8*D),Z=E.getElevationAt(F,D,!0,!0),J=E.getMeterToDEM(T),G=Math.floor(.5*(V*J-1)),te=Math.floor(.5*(H*J-1)),oe=E.tileCoordToPixel(F,D),pe=2*G+1,we=2*te+1,Ce=function(Ze,Ye,et,at,rt){return[Ze.getElevationAtPixel(Ye,et,!0),Ze.getElevationAtPixel(Ye+rt,et,!0),Ze.getElevationAtPixel(Ye,et+rt,!0),Ze.getElevationAtPixel(Ye+at,et+rt,!0)]}(E,oe.x-G,oe.y-te,pe,we),xe=Math.abs(Ce[0]-Ce[1]),De=Math.abs(Ce[2]-Ce[3]),Ie=Math.abs(Ce[0]-Ce[2])+Math.abs(Ce[1]-Ce[3]),Oe=Math.min(.25,.5*J*(xe+De)/pe),Ke=Math.min(.25,.5*J*Ie/we);return Z+Math.max(Oe*V,Ke*H)}(y,f,B):I;return{base:I+(c===0)?-1:c,top:R?Math.max(b+d,I+c+2):I+d}}rr(EB,"FillExtrusionBucket",{omit:["layers","features"]}),rr(H5,"PartData"),rr(Q5,"FootprintSegment"),rr(j5,"BorderCentroidData"),rr(K5,"GroundEffect");const rte=Bn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),nte=Bn([{name:"a_z_offset",components:1,type:"Float32"}],4),{members:ite}=rte,ote=Bn([{name:"a_packed",components:4,type:"Float32"}]),{members:ste}=ote,ate=Bn([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:lte}=ate;class iz{constructor(s,c){this.width=s,this.height=c,this.nextRow=0,this.image=new Qd({width:s,height:c}),this.positions={},this.uploaded=!1}getDash(s,c){const d=this.getKey(s,c);return this.positions[d]}trim(){const s=this.width,c=this.height=Ra(this.nextRow);this.image.resize({width:s,height:c})}getKey(s,c){return s.join(",")+c}getDashRanges(s,c,d){const y=[];let f=s.length%2==1?-s[s.length-1]*d:0,v=s[0]*d,B=!0;y.push({left:f,right:v,isDash:B,zeroLength:s[0]===0});let I=s[0];for(let R=1;R<s.length;R++){B=!B;const b=s[R];f=I*d,I+=b,v=I*d,y.push({left:f,right:v,isDash:B,zeroLength:b===0})}return y}addRoundDash(s,c,d){const y=c/2;for(let f=-d;f<=d;f++){const v=this.width*(this.nextRow+d+f);let B=0,I=s[B];for(let R=0;R<this.width;R++){R/I.right>1&&(I=s[++B]);const b=Math.abs(R-I.left),E=Math.abs(R-I.right),P=Math.min(b,E);let T;const F=f/d*(y+1);if(I.isDash){const D=y-Math.abs(F);T=Math.sqrt(P*P+D*D)}else T=y-Math.sqrt(P*P+F*F);this.image.data[v+R]=Math.max(0,Math.min(255,T+128))}}}addRegularDash(s,c){for(let I=s.length-1;I>=0;--I){const R=s[I],b=s[I+1];R.zeroLength?s.splice(I,1):b&&b.isDash===R.isDash&&(b.left=R.left,s.splice(I,1))}const d=s[0],y=s[s.length-1];d.isDash===y.isDash&&(d.left=y.left-this.width,y.right=d.right+this.width);const f=this.width*this.nextRow;let v=0,B=s[v];for(let I=0;I<this.width;I++){I/B.right>1&&(B=s[++v]);const R=Math.abs(I-B.left),b=Math.abs(I-B.right),E=Math.min(R,b);this.image.data[f+I]=Math.max(0,Math.min(255,(B.isDash?E:-E)+c+128))}}addDash(s,c){const d=this.getKey(s,c);if(this.positions[d])return this.positions[d];const y=c==="round",f=y?7:0,v=2*f+1;if(this.nextRow+v>this.height)return an("LineAtlas out of space"),null;s.length===0&&s.push(1);let B=0;for(let b=0;b<s.length;b++)s[b]<0&&(an("Negative value is found in line dasharray, replacing values with 0"),s[b]=0),B+=s[b];if(B!==0){const b=this.width/B,E=this.getDashRanges(s,this.width,b);y?this.addRoundDash(E,b,f):this.addRegularDash(E,c==="square"?.5*b:0)}const I=this.nextRow+f;this.nextRow+=v;const R={tl:[I,f],br:[B,0]};return this.positions[d]=R,R}}rr(iz,"LineAtlas");const cte=e0.VectorTileFeature.types,ute=Math.cos(Math.PI/180*37.5),hte=Math.cos(Math.PI/180*5);class OP{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(c=>c.fqid),this.index=s.index,this.projection=s.projection,this.hasPattern=!1,this.hasZOffset=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(c=>{this.gradients[c.id]={}}),this.layoutVertexArray=new Xv,this.layoutVertexArray2=new Ru,this.patternVertexArray=new Bh,this.indexArray=new gs,this.programConfigurations=new Sh(s.layers,{zoom:s.zoom,lut:s.lut}),this.segments=new Ki,this.maxLineLength=0,this.zOffsetVertexArray=new Dd,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id),this.tessellationStep=s.tessellationStep?s.tessellationStep:Gt/64}updateFootprints(s,c){}populate(s,c,d,y){this.hasPattern=CP("line",this.layers,c);const f=this.layers[0].layout.get("line-sort-key"),v=this.layers[0].layout.get("line-z-offset");this.hasZOffset=!v.isConstant()||!!v.constantOr(0);const B=[];for(const{feature:E,id:P,index:T,sourceLayerIndex:F}of s){const D=this.layers[0]._featureFilter.needGeometry,V=Ut(E,D);if(!this.layers[0]._featureFilter.filter(new Gi(this.zoom),V,d))continue;const H=f?f.evaluate(V,{},d):void 0,Z={id:P,properties:E.properties,type:E.type,sourceLayerIndex:F,index:T,geometry:D?V.geometry:Dt(E,d,y),patterns:{},sortKey:H};B.push(Z)}f&&B.sort((E,P)=>E.sortKey-P.sortKey);const{lineAtlas:I,featureIndex:R}=c,b=this.addConstantDashes(I);for(const E of B){const{geometry:P,index:T,sourceLayerIndex:F}=E;if(b&&this.addFeatureDashes(E,I),this.hasPattern){const D=SP("line",this.layers,E,this.zoom,c);this.patternFeatures.push(D)}else this.addFeature(E,P,T,d,I.positions,c.availableImages,c.brightness);R.insert(s[T].feature,P,T,F,this.index)}}addConstantDashes(s){let c=!1;for(const d of this.layers){const y=d.paint.get("line-dasharray").value,f=d.layout.get("line-cap").value;if(y.kind!=="constant"||f.kind!=="constant")c=!0;else{const v=f.value,B=y.value;if(!B)continue;s.addDash(B,v)}}return c}addFeatureDashes(s,c){const d=this.zoom;for(const y of this.layers){const f=y.paint.get("line-dasharray").value,v=y.layout.get("line-cap").value;if(f.kind==="constant"&&v.kind==="constant")continue;let B,I;if(f.kind==="constant"){if(B=f.value,!B)continue}else B=f.evaluate({zoom:d},s);I=v.kind==="constant"?v.value:v.evaluate({zoom:d},s),c.addDash(B,I),s.patterns[y.id]=c.getKey(B,I)}}update(s,c,d,y,f){const v=Object.keys(s).length!==0;v&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(s,c,v?this.stateDependentLayers:this.layers,d,y,f)}addFeatures(s,c,d,y,f,v){for(const B of this.patternFeatures)this.addFeature(B,B.geometry,B.index,c,d,y,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,ste)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=s.createVertexBuffer(this.patternVertexArray,lte)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=s.createVertexBuffer(this.zOffsetVertexArray,nte.members,!0)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,ite),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&s.properties.hasOwnProperty("mapbox_clip_start")&&s.properties.hasOwnProperty("mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,c,d,y,f,v,B){const I=this.layers[0].layout,R=I.get("line-join").evaluate(s,{}),b=I.get("line-cap").evaluate(s,{}),E=I.get("line-miter-limit"),P=I.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(const T of c)this.addLine(T,s,y,R,b,E,P);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,d,f,v,y,B)}addLine(s,c,d,y,f,v,B){this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.currentVertex=void 0;const I={zoom:this.zoom,lineProgress:void 0},R=this.layers[0].layout,b=y==="none";if(this.patternJoinNone=this.hasPattern&&b,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[],this.lineClips){this.lineClipsArray.push(this.lineClips);for(let oe=0;oe<s.length-1;oe++)this.totalDistance+=s[oe].dist(s[oe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const E=cte[c.type]==="Polygon";let P=s.length;for(;P>=2&&s[P-1].equals(s[P-2]);)P--;let T=0;for(;T<P-1&&s[T].equals(s[T+1]);)T++;if(P<(E?3:2))return;y==="bevel"&&(v=1.05);const F=this.overscaling<=16?15*Gt/(512*this.overscaling):0,D=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let V,H,Z,J,G,te;this.e1=this.e2=-1,E&&(V=s[P-2],G=s[T].sub(V)._unit()._perp());for(let oe=T;oe<P;oe++){if(Z=oe===P-1?E?s[T+1]:void 0:s[oe+1],Z&&s[oe].equals(Z))continue;if(G&&(J=G),V&&(H=V),V=s[oe],this.hasZOffset){const Ye=R.get("line-z-offset").value;if(Ye.kind==="constant")te=Ye.value;else{if(this.lineClips){const et=this.totalDistance/(this.lineClips.end-this.lineClips.start);I.lineProgress=(et*this.lineClips.start+this.distance+(H?H.dist(V):0))/et}else an(`line-z-offset evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`),I.lineProgress=0;te=Ye.evaluate(I,c)}te=te||0}G=Z?Z.sub(V)._unit()._perp():J,J=J||G;const pe=H&&Z;let we=pe?y:E||b?"butt":f;const Ce=J.x*G.x+J.y*G.y;if(b){const Ye=function(et){if(et.patternJoinNone){const at=et.segmentPoints.length/2,rt=et.lineSoFar-et.segmentStart;for(let _t=0;_t<at;++_t){const Tt=et.segmentPoints[2*_t+1],dt=Math.round(et.segmentPoints[2*_t])+.5+.25*Tt;et.patternVertexArray.emplaceBack(dt,rt,et.segmentStart),et.patternVertexArray.emplaceBack(dt,rt,et.segmentStart)}et.segmentPoints.length=0}et.e1=et.e2=-1};if(pe&&Ce<hte){this.updateDistance(H,V),this.addCurrentVertex(V,J,1,1,D,te),Ye(this),this.addCurrentVertex(V,G,-1,-1,D,te);continue}if(H){if(!Z){this.updateDistance(H,V),this.addCurrentVertex(V,J,1,1,D,te),Ye(this);continue}we="miter"}}let xe=J.add(G);xe.x===0&&xe.y===0||xe._unit();const De=xe.x*G.x+xe.y*G.y,Ie=De!==0?1/De:1/0,Oe=2*Math.sqrt(2-2*De),Ke=De<ute&&H&&Z,Ze=J.x*G.y-J.y*G.x>0;if(Ke&&oe>T){const Ye=V.dist(H);if(Ye>2*F){const et=V.sub(V.sub(H)._mult(F/Ye)._round());this.updateDistance(H,et),this.addCurrentVertex(et,J,0,0,D,te),H=et}}if(pe&&we==="round"&&(Ie<B?we="miter":Ie<=2&&(we="fakeround")),we==="miter"&&Ie>v&&(we="bevel"),we==="bevel"&&(Ie>2&&(we="flipbevel"),Ie<v&&(we="miter")),H&&this.updateDistance(H,V),we==="miter")xe._mult(Ie),this.addCurrentVertex(V,xe,0,0,D,te);else if(we==="flipbevel"){if(Ie>100)xe=G.mult(-1);else{const Ye=Ie*J.add(G).mag()/J.sub(G).mag();xe._perp()._mult(Ye*(Ze?-1:1))}this.addCurrentVertex(V,xe,0,0,D,te),this.addCurrentVertex(V,xe.mult(-1),0,0,D,te)}else if(we==="bevel"||we==="fakeround"){const Ye=-Math.sqrt(Ie*Ie-1),et=Ze?Ye:0,at=Ze?0:Ye;if(H&&this.addCurrentVertex(V,J,et,at,D,te),we==="fakeround"){const rt=Math.round(180*Oe/Math.PI/20);for(let _t=1;_t<rt;_t++){let Tt=_t/rt;if(Tt!==.5){const Zt=Tt-.5;Tt+=Tt*Zt*(Tt-1)*((1.0904+Ce*(Ce*(3.55645-1.43519*Ce)-3.2452))*Zt*Zt+(.848013+Ce*(.215638*Ce-1.06021)))}const dt=G.sub(J)._mult(Tt)._add(J)._unit()._mult(Ze?-1:1);this.addHalfVertex(V,dt.x,dt.y,!1,Ze,0,D,te)}}Z&&this.addCurrentVertex(V,G,-et,-at,D,te)}else we==="butt"?this.addCurrentVertex(V,xe,0,0,D,te):we==="square"?(H||this.addCurrentVertex(V,xe,-1,-1,D,te),this.addCurrentVertex(V,xe,0,0,D,te),H&&this.addCurrentVertex(V,xe,1,1,D,te)):we==="round"&&(H&&(this.addCurrentVertex(V,J,0,0,D,te),this.addCurrentVertex(V,J,1,1,D,te,!0)),Z&&(this.addCurrentVertex(V,G,-1,-1,D,te,!0),this.addCurrentVertex(V,G,0,0,D,te)));if(Ke&&oe<P-1){const Ye=V.dist(Z);if(Ye>2*F){const et=V.add(Z.sub(V)._mult(F/Ye)._round());this.updateDistance(V,et),this.addCurrentVertex(et,G,0,0,D,te),V=et}}}}addVerticesTo(s,c,d,y,f,v,B,I,R,b){const E=(c.w-s.w)/this.tessellationStep|0;if(E>1){this.lineSoFar=s.w;const P=(c.x-s.x)/E,T=(c.y-s.y)/E,F=(c.z-s.z)/E,D=(c.w-s.w)/E;for(let V=1;V<E;++V)s.x+=P,s.y+=T,s.z+=F,this.lineSoFar+=D,this.addHalfVertex(s,d,y,b,!1,B,R,s.z),this.addHalfVertex(s,f,v,b,!0,-I,R,s.z)}this.lineSoFar=c.w,this.addHalfVertex(c,d,y,b,!1,B,R,c.z),this.addHalfVertex(c,f,v,b,!0,-I,R,c.z)}addCurrentVertex(s,c,d,y,f,v,B=!1){const I=c.x+c.y*d,R=c.y-c.x*d,b=c.y*y-c.x,E=-c.y-c.x*y;if(v!=null){const T=Gt+10,F=v,D=new F5(s.x,s.y,F,this.lineSoFar),V=oz(s,-10,T),H=this.lineSoFar;if(this.currentVertex)if(V){const Z=this.currentVertexIsOutside,J=this.currentVertex,G=new F5(s.x,s.y,F,this.lineSoFar);M5(J,G,-10,T),oz(G,-10,T)||(Z&&(this.e1=this.e2=-1,this.lineSoFar=J.w,this.addHalfVertex(J,I,R,B,!1,d,f,J.z),this.addHalfVertex(J,b,E,B,!0,-y,f,J.z)),this.addVerticesTo(J,G,I,R,b,E,d,y,f,B))}else{const Z=this.currentVertex;this.currentVertexIsOutside&&(M5(Z,D,-10,T),this.e1=this.e2=-1,this.lineSoFar=Z.w,this.addHalfVertex(Z,I,R,B,!1,d,f,Z.z),this.addHalfVertex(Z,b,E,B,!0,-y,f,Z.z)),this.addVerticesTo(Z,D,I,R,b,E,d,y,f,B)}else V||(this.addHalfVertex(s,I,R,B,!1,d,f,v),this.addHalfVertex(s,b,E,B,!0,-y,f,v));this.currentVertex=D,this.currentVertexIsOutside=V,this.lineSoFar=H}else this.addHalfVertex(s,I,R,B,!1,d,f,v),this.addHalfVertex(s,b,E,B,!0,-y,f,v)}addHalfVertex({x:s,y:c},d,y,f,v,B,I,R){this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),v||this.segmentPoints.push(this.lineSoFar-this.segmentStart,B)),this.layoutVertexArray.emplaceBack((s<<1)+(f?1:0),(c<<1)+(v?1:0),Math.round(63*d)+128,Math.round(63*y)+128,1+(B===0?0:B<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const b=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,b),I.primitiveLength++),v?this.e2=b:this.e1=b,R!=null&&this.zOffsetVertexArray.emplaceBack(R)}updateScaledDistance(){if(this.lineClips){const s=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=s*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(s,c){this.distance+=s.dist(c),this.updateScaledDistance()}}function oz(A,s,c){return A.x<s||A.x>c||A.y<s||A.y>c}let sz,az;function lz(A,s,c){return s*(Gt/(A.tileSize*Math.pow(2,c-A.tileID.overscaledZ)))}function cz(A,s){return 1/lz(A,1,s.tileZoom)}function uz(A,s,c,d){return A.translatePosMatrix(d||s.tileID.projMatrix,s,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}rr(OP,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const hz=A=>{const s=[];Az(A)&&s.push("RENDER_LINE_DASH"),A.paint.get("line-gradient")&&s.push("RENDER_LINE_GRADIENT");const c=A.paint.get("line-trim-offset");c[0]===0&&c[1]===0||s.push("RENDER_LINE_TRIM_OFFSET"),A.paint.get("line-border-width").constantOr(1)!==0&&s.push("RENDER_LINE_BORDER");const d=A.layout.get("line-join").constantOr("miter")==="none",y=!!A.paint.get("line-pattern").constantOr(1);return d&&y&&s.push("LINE_JOIN_NONE"),s};function Az(A){const s=A.paint.get("line-dasharray").value;return s.value||s.kind!=="constant"}let UP;const dz=()=>UP||(UP={layout:sz||(sz=new wi({"line-cap":new mr(ot.layout_line["line-cap"]),"line-join":new mr(ot.layout_line["line-join"]),"line-miter-limit":new zt(ot.layout_line["line-miter-limit"]),"line-round-limit":new zt(ot.layout_line["line-round-limit"]),"line-sort-key":new mr(ot.layout_line["line-sort-key"]),"line-z-offset":new mr(ot.layout_line["line-z-offset"]),visibility:new zt(ot.layout_line.visibility)})),paint:az||(az=new wi({"line-opacity":new mr(ot.paint_line["line-opacity"]),"line-color":new mr(ot.paint_line["line-color"]),"line-translate":new zt(ot.paint_line["line-translate"]),"line-translate-anchor":new zt(ot.paint_line["line-translate-anchor"]),"line-width":new mr(ot.paint_line["line-width"]),"line-gap-width":new mr(ot.paint_line["line-gap-width"]),"line-offset":new mr(ot.paint_line["line-offset"]),"line-blur":new mr(ot.paint_line["line-blur"]),"line-dasharray":new mr(ot.paint_line["line-dasharray"]),"line-pattern":new mr(ot.paint_line["line-pattern"]),"line-gradient":new $l(ot.paint_line["line-gradient"]),"line-trim-offset":new zt(ot.paint_line["line-trim-offset"]),"line-trim-fade-range":new zt(ot.paint_line["line-trim-fade-range"]),"line-trim-color":new zt(ot.paint_line["line-trim-color"]),"line-emissive-strength":new zt(ot.paint_line["line-emissive-strength"]),"line-border-width":new mr(ot.paint_line["line-border-width"]),"line-border-color":new mr(ot.paint_line["line-border-color"]),"line-occlusion-opacity":new zt(ot.paint_line["line-occlusion-opacity"])}))},UP);class Ate extends mr{possiblyEvaluate(s,c){return c=new Gi(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,transition:c.transition}),super.possiblyEvaluate(s,c)}evaluate(s,c,d,y){return c=xo({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(s,c,d,y)}}let __;function fz(A,s){return s>0?s+2*A:A}const dte=Bn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),fte=Bn([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),pte=Bn([{name:"a_projected_pos",components:4,type:"Float32"}],4);Bn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const mte=Bn([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),gte=Bn([{name:"a_texb",components:2,type:"Uint16"}]),yte=Bn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),vte=Bn([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);Bn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const pz=Bn([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),_te=Bn([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Bn([{name:"triangle",components:3,type:"Uint16"}]),Bn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Bn([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"}]),Bn([{type:"Float32",name:"offsetX"}]),Bn([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Ts=24;const Uu=128;function zP(A,s){const{expression:c}=s;if(c.kind==="constant")return{kind:"constant",layoutSize:c.evaluate(new Gi(A+1))};if(c.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:y}=c;let f=0;for(;f<d.length&&d[f]<=A;)f++;f=Math.max(0,f-1);let v=f;for(;v<d.length&&d[v]<A+1;)v++;v=Math.min(d.length-1,v);const B=d[f],I=d[v];return c.kind==="composite"?{kind:"composite",minZoom:B,maxZoom:I,interpolationType:y}:{kind:"camera",minZoom:B,maxZoom:I,minSize:c.evaluate(new Gi(B)),maxSize:c.evaluate(new Gi(I)),interpolationType:y}}}function TB(A,{uSize:s,uSizeT:c},{lowerSize:d,upperSize:y}){return A.kind==="source"?d/Uu:A.kind==="composite"?_r(d/Uu,y/Uu,c):s}function t0(A,s){let c=0,d=0;if(A.kind==="constant")d=A.layoutSize;else if(A.kind!=="source"){const{interpolationType:y,minZoom:f,maxZoom:v}=A,B=y?Er(sl.interpolationFactor(y,s,f,v),0,1):0;A.kind==="camera"?d=_r(A.minSize,A.maxSize,B):c=B}return{uSizeT:c,uSize:d}}var xte=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Uu,evaluateSizeForFeature:TB,evaluateSizeForZoom:t0,getSizeData:zP});function bte(A,s,c){return A.sections.forEach(d=>{d.text=function(y,f,v){const B=f.layout.get("text-transform").evaluate(v,{});return B==="uppercase"?y=y.toLocaleUpperCase():B==="lowercase"&&(y=y.toLocaleLowerCase()),Ua.applyArabicShaping&&(y=Ua.applyArabicShaping(y)),y}(d.text,s,c)}),A}const x_={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function wte(A){return A===""||A===""||A===""||A===""||A===""||A===""||A===""||A===""||A===""||A===""||A===""||A===""||A===""||A===""||A===""||A===""||A===""}function Bte(A){return A===""||A===""||A===""||A===""||A===""||A===""||A===""||A===""||A===""||A===""}var mz,VP,gz,NP={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Cte(){return mz||(mz=1,NP.read=function(A,s,c,d,y){var f,v,B=8*y-d-1,I=(1<<B)-1,R=I>>1,b=-7,E=c?y-1:0,P=c?-1:1,T=A[s+E];for(E+=P,f=T&(1<<-b)-1,T>>=-b,b+=B;b>0;f=256*f+A[s+E],E+=P,b-=8);for(v=f&(1<<-b)-1,f>>=-b,b+=d;b>0;v=256*v+A[s+E],E+=P,b-=8);if(f===0)f=1-R;else{if(f===I)return v?NaN:1/0*(T?-1:1);v+=Math.pow(2,d),f-=R}return(T?-1:1)*v*Math.pow(2,f-d)},NP.write=function(A,s,c,d,y,f){var v,B,I,R=8*f-y-1,b=(1<<R)-1,E=b>>1,P=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=d?0:f-1,F=d?1:-1,D=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(B=isNaN(s)?1:0,v=b):(v=Math.floor(Math.log(s)/Math.LN2),s*(I=Math.pow(2,-v))<1&&(v--,I*=2),(s+=v+E>=1?P/I:P*Math.pow(2,1-E))*I>=2&&(v++,I/=2),v+E>=b?(B=0,v=b):v+E>=1?(B=(s*I-1)*Math.pow(2,y),v+=E):(B=s*Math.pow(2,E-1)*Math.pow(2,y),v=0));y>=8;A[c+T]=255&B,T+=F,B/=256,y-=8);for(v=v<<y|B,R+=y;R>0;A[c+T]=255&v,T+=F,v/=256,R-=8);A[c+T-F]|=128*D}),NP}function yz(){if(gz)return VP;gz=1,VP=s;var A=Cte();function s(G){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(G)?G:new Uint8Array(G||0),this.pos=0,this.type=0,this.length=this.buf.length}s.Varint=0,s.Fixed64=1,s.Bytes=2,s.Fixed32=5;var c=4294967296,d=1/c,y=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function f(G){return G.type===s.Bytes?G.readVarint()+G.pos:G.pos+1}function v(G,te,oe){return oe?4294967296*te+(G>>>0):4294967296*(te>>>0)+(G>>>0)}function B(G,te,oe){var pe=te<=16383?1:te<=2097151?2:te<=268435455?3:Math.floor(Math.log(te)/(7*Math.LN2));oe.realloc(pe);for(var we=oe.pos-1;we>=G;we--)oe.buf[we+pe]=oe.buf[we]}function I(G,te){for(var oe=0;oe<G.length;oe++)te.writeVarint(G[oe])}function R(G,te){for(var oe=0;oe<G.length;oe++)te.writeSVarint(G[oe])}function b(G,te){for(var oe=0;oe<G.length;oe++)te.writeFloat(G[oe])}function E(G,te){for(var oe=0;oe<G.length;oe++)te.writeDouble(G[oe])}function P(G,te){for(var oe=0;oe<G.length;oe++)te.writeBoolean(G[oe])}function T(G,te){for(var oe=0;oe<G.length;oe++)te.writeFixed32(G[oe])}function F(G,te){for(var oe=0;oe<G.length;oe++)te.writeSFixed32(G[oe])}function D(G,te){for(var oe=0;oe<G.length;oe++)te.writeFixed64(G[oe])}function V(G,te){for(var oe=0;oe<G.length;oe++)te.writeSFixed64(G[oe])}function H(G,te){return(G[te]|G[te+1]<<8|G[te+2]<<16)+16777216*G[te+3]}function Z(G,te,oe){G[oe]=te,G[oe+1]=te>>>8,G[oe+2]=te>>>16,G[oe+3]=te>>>24}function J(G,te){return(G[te]|G[te+1]<<8|G[te+2]<<16)+(G[te+3]<<24)}return s.prototype={destroy:function(){this.buf=null},readFields:function(G,te,oe){for(oe=oe||this.length;this.pos<oe;){var pe=this.readVarint(),we=pe>>3,Ce=this.pos;this.type=7&pe,G(we,te,this),this.pos===Ce&&this.skip(pe)}return te},readMessage:function(G,te){return this.readFields(G,te,this.readVarint()+this.pos)},readFixed32:function(){var G=H(this.buf,this.pos);return this.pos+=4,G},readSFixed32:function(){var G=J(this.buf,this.pos);return this.pos+=4,G},readFixed64:function(){var G=H(this.buf,this.pos)+H(this.buf,this.pos+4)*c;return this.pos+=8,G},readSFixed64:function(){var G=H(this.buf,this.pos)+J(this.buf,this.pos+4)*c;return this.pos+=8,G},readFloat:function(){var G=A.read(this.buf,this.pos,!0,23,4);return this.pos+=4,G},readDouble:function(){var G=A.read(this.buf,this.pos,!0,52,8);return this.pos+=8,G},readVarint:function(G){var te,oe,pe=this.buf;return te=127&(oe=pe[this.pos++]),oe<128?te:(te|=(127&(oe=pe[this.pos++]))<<7,oe<128?te:(te|=(127&(oe=pe[this.pos++]))<<14,oe<128?te:(te|=(127&(oe=pe[this.pos++]))<<21,oe<128?te:function(we,Ce,xe){var De,Ie,Oe=xe.buf;if(De=(112&(Ie=Oe[xe.pos++]))>>4,Ie<128||(De|=(127&(Ie=Oe[xe.pos++]))<<3,Ie<128)||(De|=(127&(Ie=Oe[xe.pos++]))<<10,Ie<128)||(De|=(127&(Ie=Oe[xe.pos++]))<<17,Ie<128)||(De|=(127&(Ie=Oe[xe.pos++]))<<24,Ie<128)||(De|=(1&(Ie=Oe[xe.pos++]))<<31,Ie<128))return v(we,De,Ce);throw new Error("Expected varint not more than 10 bytes")}(te|=(15&(oe=pe[this.pos]))<<28,G,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var G=this.readVarint();return G%2==1?(G+1)/-2:G/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var G=this.readVarint()+this.pos,te=this.pos;return this.pos=G,G-te>=12&&y?function(oe,pe,we){return y.decode(oe.subarray(pe,we))}(this.buf,te,G):function(oe,pe,we){for(var Ce="",xe=pe;xe<we;){var De,Ie,Oe,Ke=oe[xe],Ze=null,Ye=Ke>239?4:Ke>223?3:Ke>191?2:1;if(xe+Ye>we)break;Ye===1?Ke<128&&(Ze=Ke):Ye===2?(192&(De=oe[xe+1]))==128&&(Ze=(31&Ke)<<6|63&De)<=127&&(Ze=null):Ye===3?(Ie=oe[xe+2],(192&(De=oe[xe+1]))==128&&(192&Ie)==128&&((Ze=(15&Ke)<<12|(63&De)<<6|63&Ie)<=2047||Ze>=55296&&Ze<=57343)&&(Ze=null)):Ye===4&&(Ie=oe[xe+2],Oe=oe[xe+3],(192&(De=oe[xe+1]))==128&&(192&Ie)==128&&(192&Oe)==128&&((Ze=(15&Ke)<<18|(63&De)<<12|(63&Ie)<<6|63&Oe)<=65535||Ze>=1114112)&&(Ze=null)),Ze===null?(Ze=65533,Ye=1):Ze>65535&&(Ze-=65536,Ce+=String.fromCharCode(Ze>>>10&1023|55296),Ze=56320|1023&Ze),Ce+=String.fromCharCode(Ze),xe+=Ye}return Ce}(this.buf,te,G)},readBytes:function(){var G=this.readVarint()+this.pos,te=this.buf.subarray(this.pos,G);return this.pos=G,te},readPackedVarint:function(G,te){if(this.type!==s.Bytes)return G.push(this.readVarint(te));var oe=f(this);for(G=G||[];this.pos<oe;)G.push(this.readVarint(te));return G},readPackedSVarint:function(G){if(this.type!==s.Bytes)return G.push(this.readSVarint());var te=f(this);for(G=G||[];this.pos<te;)G.push(this.readSVarint());return G},readPackedBoolean:function(G){if(this.type!==s.Bytes)return G.push(this.readBoolean());var te=f(this);for(G=G||[];this.pos<te;)G.push(this.readBoolean());return G},readPackedFloat:function(G){if(this.type!==s.Bytes)return G.push(this.readFloat());var te=f(this);for(G=G||[];this.pos<te;)G.push(this.readFloat());return G},readPackedDouble:function(G){if(this.type!==s.Bytes)return G.push(this.readDouble());var te=f(this);for(G=G||[];this.pos<te;)G.push(this.readDouble());return G},readPackedFixed32:function(G){if(this.type!==s.Bytes)return G.push(this.readFixed32());var te=f(this);for(G=G||[];this.pos<te;)G.push(this.readFixed32());return G},readPackedSFixed32:function(G){if(this.type!==s.Bytes)return G.push(this.readSFixed32());var te=f(this);for(G=G||[];this.pos<te;)G.push(this.readSFixed32());return G},readPackedFixed64:function(G){if(this.type!==s.Bytes)return G.push(this.readFixed64());var te=f(this);for(G=G||[];this.pos<te;)G.push(this.readFixed64());return G},readPackedSFixed64:function(G){if(this.type!==s.Bytes)return G.push(this.readSFixed64());var te=f(this);for(G=G||[];this.pos<te;)G.push(this.readSFixed64());return G},skip:function(G){var te=7&G;if(te===s.Varint)for(;this.buf[this.pos++]>127;);else if(te===s.Bytes)this.pos=this.readVarint()+this.pos;else if(te===s.Fixed32)this.pos+=4;else{if(te!==s.Fixed64)throw new Error("Unimplemented type: "+te);this.pos+=8}},writeTag:function(G,te){this.writeVarint(G<<3|te)},realloc:function(G){for(var te=this.length||16;te<this.pos+G;)te*=2;if(te!==this.length){var oe=new Uint8Array(te);oe.set(this.buf),this.buf=oe,this.length=te}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(G){this.realloc(4),Z(this.buf,G,this.pos),this.pos+=4},writeSFixed32:function(G){this.realloc(4),Z(this.buf,G,this.pos),this.pos+=4},writeFixed64:function(G){this.realloc(8),Z(this.buf,-1&G,this.pos),Z(this.buf,Math.floor(G*d),this.pos+4),this.pos+=8},writeSFixed64:function(G){this.realloc(8),Z(this.buf,-1&G,this.pos),Z(this.buf,Math.floor(G*d),this.pos+4),this.pos+=8},writeVarint:function(G){(G=+G||0)>268435455||G<0?function(te,oe){var pe,we;if(te>=0?(pe=te%4294967296|0,we=te/4294967296|0):(we=~(-te/4294967296),4294967295^(pe=~(-te%4294967296))?pe=pe+1|0:(pe=0,we=we+1|0)),te>=18446744073709552e3||te<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");oe.realloc(10),function(Ce,xe,De){De.buf[De.pos++]=127&Ce|128,Ce>>>=7,De.buf[De.pos++]=127&Ce|128,Ce>>>=7,De.buf[De.pos++]=127&Ce|128,Ce>>>=7,De.buf[De.pos++]=127&Ce|128,De.buf[De.pos]=127&(Ce>>>=7)}(pe,0,oe),function(Ce,xe){var De=(7&Ce)<<4;xe.buf[xe.pos++]|=De|((Ce>>>=3)?128:0),Ce&&(xe.buf[xe.pos++]=127&Ce|((Ce>>>=7)?128:0),Ce&&(xe.buf[xe.pos++]=127&Ce|((Ce>>>=7)?128:0),Ce&&(xe.buf[xe.pos++]=127&Ce|((Ce>>>=7)?128:0),Ce&&(xe.buf[xe.pos++]=127&Ce|((Ce>>>=7)?128:0),Ce&&(xe.buf[xe.pos++]=127&Ce)))))}(we,oe)}(G,this):(this.realloc(4),this.buf[this.pos++]=127&G|(G>127?128:0),G<=127||(this.buf[this.pos++]=127&(G>>>=7)|(G>127?128:0),G<=127||(this.buf[this.pos++]=127&(G>>>=7)|(G>127?128:0),G<=127||(this.buf[this.pos++]=G>>>7&127))))},writeSVarint:function(G){this.writeVarint(G<0?2*-G-1:2*G)},writeBoolean:function(G){this.writeVarint(!!G)},writeString:function(G){G=String(G),this.realloc(4*G.length),this.pos++;var te=this.pos;this.pos=function(pe,we,Ce){for(var xe,De,Ie=0;Ie<we.length;Ie++){if((xe=we.charCodeAt(Ie))>55295&&xe<57344){if(!De){xe>56319||Ie+1===we.length?(pe[Ce++]=239,pe[Ce++]=191,pe[Ce++]=189):De=xe;continue}if(xe<56320){pe[Ce++]=239,pe[Ce++]=191,pe[Ce++]=189,De=xe;continue}xe=De-55296<<10|xe-56320|65536,De=null}else De&&(pe[Ce++]=239,pe[Ce++]=191,pe[Ce++]=189,De=null);xe<128?pe[Ce++]=xe:(xe<2048?pe[Ce++]=xe>>6|192:(xe<65536?pe[Ce++]=xe>>12|224:(pe[Ce++]=xe>>18|240,pe[Ce++]=xe>>12&63|128),pe[Ce++]=xe>>6&63|128),pe[Ce++]=63&xe|128)}return Ce}(this.buf,G,this.pos);var oe=this.pos-te;oe>=128&&B(te,oe,this),this.pos=te-1,this.writeVarint(oe),this.pos+=oe},writeFloat:function(G){this.realloc(4),A.write(this.buf,G,this.pos,!0,23,4),this.pos+=4},writeDouble:function(G){this.realloc(8),A.write(this.buf,G,this.pos,!0,52,8),this.pos+=8},writeBytes:function(G){var te=G.length;this.writeVarint(te),this.realloc(te);for(var oe=0;oe<te;oe++)this.buf[this.pos++]=G[oe]},writeRawMessage:function(G,te){this.pos++;var oe=this.pos;G(te,this);var pe=this.pos-oe;pe>=128&&B(oe,pe,this),this.pos=oe-1,this.writeVarint(pe),this.pos+=pe},writeMessage:function(G,te,oe){this.writeTag(G,s.Bytes),this.writeRawMessage(te,oe)},writePackedVarint:function(G,te){te.length&&this.writeMessage(G,I,te)},writePackedSVarint:function(G,te){te.length&&this.writeMessage(G,R,te)},writePackedBoolean:function(G,te){te.length&&this.writeMessage(G,P,te)},writePackedFloat:function(G,te){te.length&&this.writeMessage(G,b,te)},writePackedDouble:function(G,te){te.length&&this.writeMessage(G,E,te)},writePackedFixed32:function(G,te){te.length&&this.writeMessage(G,T,te)},writePackedSFixed32:function(G,te){te.length&&this.writeMessage(G,F,te)},writePackedFixed64:function(G,te){te.length&&this.writeMessage(G,D,te)},writePackedSFixed64:function(G,te){te.length&&this.writeMessage(G,V,te)},writeBytesField:function(G,te){this.writeTag(G,s.Bytes),this.writeBytes(te)},writeFixed32Field:function(G,te){this.writeTag(G,s.Fixed32),this.writeFixed32(te)},writeSFixed32Field:function(G,te){this.writeTag(G,s.Fixed32),this.writeSFixed32(te)},writeFixed64Field:function(G,te){this.writeTag(G,s.Fixed64),this.writeFixed64(te)},writeSFixed64Field:function(G,te){this.writeTag(G,s.Fixed64),this.writeSFixed64(te)},writeVarintField:function(G,te){this.writeTag(G,s.Varint),this.writeVarint(te)},writeSVarintField:function(G,te){this.writeTag(G,s.Varint),this.writeSVarint(te)},writeStringField:function(G,te){this.writeTag(G,s.Bytes),this.writeString(te)},writeFloatField:function(G,te){this.writeTag(G,s.Fixed32),this.writeFloat(te)},writeDoubleField:function(G,te){this.writeTag(G,s.Fixed64),this.writeDouble(te)},writeBooleanField:function(G,te){this.writeVarintField(G,!!te)}},VP}var IB=_(yz());const QP=3;function Ste(A,s,c){s.glyphs=[],A===1&&c.readMessage(Ete,s)}function Ete(A,s,c){if(A===3){const{id:d,bitmap:y,width:f,height:v,left:B,top:I,advance:R}=c.readMessage(Tte,{});s.glyphs.push({id:d,bitmap:new Qd({width:f+2*QP,height:v+2*QP},y),metrics:{width:f,height:v,left:B,top:I,advance:R}})}else A===4?s.ascender=c.readSVarint():A===5&&(s.descender=c.readSVarint())}function Tte(A,s,c){A===1?s.id=c.readVarint():A===2?s.bitmap=c.readBytes():A===3?s.width=c.readVarint():A===4?s.height=c.readVarint():A===5?s.left=c.readSVarint():A===6?s.top=c.readSVarint():A===7&&(s.advance=c.readVarint())}const vz=QP,rc={horizontal:1,vertical:2,horizontalOnly:3};class b_{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(s,c){const d=new b_;return d.scale=s||1,d.fontStack=c,d}static forImage(s){const c=new b_;return c.imageName=s,c}}class r0{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,c){const d=new r0;for(let y=0;y<s.sections.length;y++){const f=s.sections[y];f.image?d.addImageSection(f):d.addTextSection(f,c)}return d}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSections(){return this.sections}getSectionIndex(s){return this.sectionIndex[s]}getCodePoint(s){return this.text.codePointAt(s)}verticalizePunctuation(s){this.text=function(c,d){let y="";for(let f=0;f<c.length;f++){const v=c.charCodeAt(f+1)||null,B=c.charCodeAt(f-1)||null;y+=!d&&(v&&Tp(v)&&!x_[c[f+1]]||B&&Tp(B)&&!x_[c[f-1]])||!x_[c[f]]?c[f]:x_[c[f]]}return y}(this.text,s)}trim(){let s=0;for(let d=0;d<this.text.length&&FB[this.text.charCodeAt(d)];d++)s++;let c=this.text.length;for(let d=this.text.length-1;d>=0&&d>=s&&FB[this.text.charCodeAt(d)];d--)c--;this.text=this.text.substring(s,c),this.sectionIndex=this.sectionIndex.slice(s,c)}substring(s,c){const d=new r0;return d.text=this.text.substring(s,c),d.sectionIndex=this.sectionIndex.slice(s,c),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,c)=>Math.max(s,this.sections[c].scale),0)}addTextSection(s,c){this.text+=s.text,this.sections.push(b_.forText(s.scale,s.fontStack||c));const d=this.sections.length-1;for(let y=0;y<s.text.length;++y)this.sectionIndex.push(d)}addImageSection(s){const c=s.image?s.image.namePrimary:"";if(c.length===0)return void an("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCodePoint(d),this.sections.push(b_.forImage(c)),this.sectionIndex.push(this.sections.length-1)):an("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function HP(A,s,c,d,y,f,v,B,I,R,b,E,P,T,F){const D=r0.fromFeature(A,y);E===rc.vertical&&D.verticalizePunctuation(P);let V=[];const H=function(oe,pe,we,Ce,xe,De){if(!oe)return[];const Ie=[],Oe=function(et,at,rt,_t,Tt,dt){let Zt=0;for(let Qt=0;Qt<et.length();Qt++){const Lt=et.getSection(Qt);Zt+=_z(et.getCodePoint(Qt),Lt,_t,Tt,at,dt)}return Zt/Math.max(1,Math.ceil(Zt/rt))}(oe,pe,we,Ce,xe,De),Ke=oe.text.indexOf("")>=0;let Ze=0;for(let et=0;et<oe.length();et++){const at=oe.getSection(et),rt=oe.getCodePoint(et);if(FB[rt]||(Ze+=_z(rt,at,Ce,xe,pe,De)),et<oe.length()-1){const _t=!((Ye=rt)<11904||!(dr["Bopomofo Extended"](Ye)||dr.Bopomofo(Ye)||dr["CJK Compatibility Forms"](Ye)||dr["CJK Compatibility Ideographs"](Ye)||dr["CJK Compatibility"](Ye)||dr["CJK Radicals Supplement"](Ye)||dr["CJK Strokes"](Ye)||dr["CJK Symbols and Punctuation"](Ye)||dr["CJK Unified Ideographs Extension A"](Ye)||dr["CJK Unified Ideographs"](Ye)||dr["Enclosed CJK Letters and Months"](Ye)||dr["Halfwidth and Fullwidth Forms"](Ye)||dr.Hiragana(Ye)||dr["Ideographic Description Characters"](Ye)||dr["Kangxi Radicals"](Ye)||dr["Katakana Phonetic Extensions"](Ye)||dr.Katakana(Ye)||dr["Vertical Forms"](Ye)||dr["Yi Radicals"](Ye)||dr["Yi Syllables"](Ye)));(Ite[rt]||_t||at.imageName)&&Ie.push(bz(et+1,Ze,Oe,Ie,Fte(rt,oe.getCodePoint(et+1),_t&&Ke),!1))}}var Ye;return wz(bz(oe.length(),Ze,Oe,Ie,0,!0))}(D,R,f,s,d,T),{processBidirectionalText:Z,processStyledBidirectionalText:J}=Ua;if(Z&&D.sections.length===1){const oe=Z(D.toString(),H);for(const pe of oe){const we=new r0;we.text=pe,we.sections=D.sections;for(let Ce=0;Ce<pe.length;Ce++)we.sectionIndex.push(0);V.push(we)}}else if(J){const oe=J(D.text,D.sectionIndex,H);for(const pe of oe){const we=new r0;we.text=pe[0],we.sectionIndex=pe[1],we.sections=D.sections,V.push(we)}}else V=function(oe,pe){const we=[],Ce=oe.text;let xe=0;for(const De of pe)we.push(oe.substring(xe,De)),xe=De;return xe<Ce.length&&we.push(oe.substring(xe,Ce.length)),we}(D,H);const G=[],te={positionedLines:G,text:D.toString(),top:b[1],bottom:b[1],left:b[0],right:b[0],writingMode:E,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(oe,pe,we,Ce,xe,De,Ie,Oe,Ke,Ze,Ye,et){let at=0,rt=0,_t=0;const Tt=Oe==="right"?1:Oe==="left"?0:.5;let dt=!1;for(const qt of xe){const tr=qt.getSections();for(const Tr of tr){if(Tr.imageName)continue;const Nr=pe[Tr.fontStack];if(Nr&&(dt=Nr.ascender!==void 0&&Nr.descender!==void 0,!dt))break}if(!dt)break}let Zt=0;for(const qt of xe){qt.trim();const tr=qt.getMaxScale(),Tr=(tr-1)*Ts,Nr={positionedGlyphs:[],lineOffset:0};oe.positionedLines[Zt]=Nr;const Or=Nr.positionedGlyphs;let Ur=0;if(!qt.length()){rt+=De,++Zt;continue}let Xr=0,Jr=0;for(let kn=0;kn<qt.length();kn++){const Fr=qt.getSection(kn),En=qt.getSectionIndex(kn),Mn=qt.getCodePoint(kn);let Ai=Fr.scale,eo=null,mo=null,to=null,Ni=Ts,ls=0;const Co=!(Ke===rc.horizontal||!Ye&&!Dg(Mn)||Ye&&(FB[Mn]||(Qt=Mn,dr.Arabic(Qt)||dr["Arabic Supplement"](Qt)||dr["Arabic Extended-A"](Qt)||dr["Arabic Presentation Forms-A"](Qt)||dr["Arabic Presentation Forms-B"](Qt))));if(Fr.imageName){const Is=Ce[Fr.imageName];if(!Is)continue;to=Fr.imageName,oe.iconsInText=oe.iconsInText||!0,mo=Is.paddedRect;const ri=Is.displaySize;Ai=Ai*Ts/et,eo={width:ri[0],height:ri[1],left:0,top:-vz,advance:Co?ri[1]:ri[0],localGlyph:!1},ls=dt?-eo.height*Ai:tr*Ts-17-ri[1]*Ai,Ni=eo.advance;const cl=(Co?ri[0]:ri[1])*Ai-Ts*tr;cl>0&&cl>Ur&&(Ur=cl)}else{const Is=we[Fr.fontStack];if(!Is)continue;Is[Mn]&&(mo=Is[Mn]);const ri=pe[Fr.fontStack];if(!ri)continue;const cl=ri.glyphs[Mn];if(!cl)continue;if(eo=cl.metrics,Ni=Mn!==8203?Ts:0,dt){const Hu=ri.ascender!==void 0?Math.abs(ri.ascender):0,zc=ri.descender!==void 0?Math.abs(ri.descender):0,Vc=(Hu+zc)*Ai;Xr<Vc&&(Xr=Vc,Jr=(Hu-zc)/2*Ai),ls=-Hu*Ai}else ls=(tr-Ai)*Ts-17}Co?(oe.verticalizable=!0,Or.push({glyph:Mn,imageName:to,x:at,y:rt+ls,vertical:Co,scale:Ai,localGlyph:eo.localGlyph,fontStack:Fr.fontStack,sectionIndex:En,metrics:eo,rect:mo}),at+=Ni*Ai+Ze):(Or.push({glyph:Mn,imageName:to,x:at,y:rt+ls,vertical:Co,scale:Ai,localGlyph:eo.localGlyph,fontStack:Fr.fontStack,sectionIndex:En,metrics:eo,rect:mo}),at+=eo.advance*Ai+Ze)}Or.length!==0&&(_t=Math.max(at-Ze,_t),dt?Bz(Or,Tt,Ur,Jr,De*tr/2):Bz(Or,Tt,Ur,0,De/2)),at=0;const Gn=De*tr+Ur;Nr.lineOffset=Math.max(Ur,Tr),rt+=Gn,++Zt}var Qt;const Lt=rt,{horizontalAlign:Pt,verticalAlign:yr}=jP(Ie);(function(qt,tr,Tr,Nr,Or,Ur){const Xr=(tr-Tr)*Or,Jr=-Ur*Nr;for(const Gn of qt)for(const kn of Gn.positionedGlyphs)kn.x+=Xr,kn.y+=Jr})(oe.positionedLines,Tt,Pt,yr,_t,Lt),oe.top+=-yr*Lt,oe.bottom=oe.top+Lt,oe.left+=-Pt*_t,oe.right=oe.left+_t,oe.hasBaseline=dt}(te,s,c,d,V,v,B,I,E,R,P,F),!function(oe){for(const pe of oe)if(pe.positionedGlyphs.length!==0)return!1;return!0}(G)&&te}const FB={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ite={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function _z(A,s,c,d,y,f){if(s.imageName){const v=d[s.imageName];return v?v.displaySize[0]*s.scale*Ts/f+y:0}{const v=c[s.fontStack],B=v&&v.glyphs[A];return B?B.metrics.advance*s.scale+y:0}}function xz(A,s,c,d){const y=Math.pow(A-s,2);return d?A<s?y/2:2*y:y+Math.abs(c)*c}function Fte(A,s,c){let d=0;return A===10&&(d-=1e4),c&&(d+=150),A!==40&&A!==65288||(d+=50),s!==41&&s!==65289||(d+=50),d}function bz(A,s,c,d,y,f){let v=null,B=xz(s,c,y,f);for(const I of d){const R=xz(s-I.x,c,y,f)+I.badness;R<=B&&(v=I,B=R)}return{index:A,x:s,priorBreak:v,badness:B}}function wz(A){return A?wz(A.priorBreak).concat(A.index):[]}function jP(A){let s=.5,c=.5;switch(A){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(A){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:s,verticalAlign:c}}function Bz(A,s,c,d,y){if(!(s||c||d||y))return;const f=A.length-1,v=A[f],B=(v.x+v.metrics.advance*v.scale)*s;for(let I=0;I<=f;I++)A[I].x-=B,A[I].y+=c+d+y}function Pte(A,s,c,d){const{horizontalAlign:y,verticalAlign:f}=jP(d),v=c[0]-A.displaySize[0]*y,B=c[1]-A.displaySize[1]*f;return{imagePrimary:A,imageSecondary:s,top:B,bottom:B+A.displaySize[1],left:v,right:v+A.displaySize[0]}}function Cz(A,s,c,d,y,f){const v=A.imagePrimary;let B;if(v.content){const V=v.content,H=v.pixelRatio||1;B=[V[0]/H,V[1]/H,v.displaySize[0]-V[2]/H,v.displaySize[1]-V[3]/H]}const I=s.left*f,R=s.right*f;let b,E,P,T;c==="width"||c==="both"?(T=y[0]+I-d[3],E=y[0]+R+d[1]):(T=y[0]+(I+R-v.displaySize[0])/2,E=T+v.displaySize[0]);const F=s.top*f,D=s.bottom*f;return c==="height"||c==="both"?(b=y[1]+F-d[0],P=y[1]+D+d[2]):(b=y[1]+(F+D-v.displaySize[1])/2,P=b+v.displaySize[1]),{imagePrimary:v,imageSecondary:void 0,top:b,right:E,bottom:P,left:T,collisionPadding:B}}class EA extends Ot{constructor(s,c,d,y,f){super(s,c),this.angle=y,this.z=d,f!==void 0&&(this.segment=f)}clone(){return new EA(this.x,this.y,this.z,this.angle,this.segment)}}function Sz(A,s,c,d,y){if(s.segment===void 0)return!0;let f=s,v=s.segment+1,B=0;for(;B>-c/2;){if(v--,v<0)return!1;B-=A[v].dist(f),f=A[v]}B+=A[v].dist(A[v+1]),v++;const I=[];let R=0;for(;B<c/2;){const b=A[v],E=A[v+1];if(!E)return!1;let P=A[v-1].angleTo(b)-b.angleTo(E);for(P=Math.abs((P+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:B,angleDelta:P}),R+=P;B-I[0].distance>d;)R-=I.shift().angleDelta;if(R>y)return!1;v++,B+=b.dist(E)}return!0}function Ez(A){let s=0;for(let c=0;c<A.length-1;c++)s+=A[c].dist(A[c+1]);return s}function Tz(A,s,c){return A?.6*s*c:0}function Iz(A,s){return Math.max(A?A.right-A.left:0,s?s.right-s.left:0)}function Mte(A,s,c,d,y,f){const v=Tz(c,y,f),B=Iz(c,d)*f;let I=0;const R=Ez(A)/2;for(let b=0;b<A.length-1;b++){const E=A[b],P=A[b+1],T=E.dist(P);if(I+T>R){const F=(R-I)/T,D=_r(E.x,P.x,F),V=_r(E.y,P.y,F),H=new EA(D,V,0,P.angleTo(E),b);return!v||Sz(A,H,B,v,s)?H:void 0}I+=T}}function Rte(A,s,c,d,y,f,v,B,I){const R=Tz(d,f,v),b=Iz(d,y),E=b*v,P=A[0].x===0||A[0].x===I||A[0].y===0||A[0].y===I;return s-E<s/4&&(s=E+s/4),Fz(A,P?s/2*B%s:(b/2+2*f)*v*B%s,s,R,c,E,P,!1,I)}function Fz(A,s,c,d,y,f,v,B,I){const R=f/2,b=Ez(A);let E=0,P=s-c,T=[];for(let F=0;F<A.length-1;F++){const D=A[F],V=A[F+1],H=D.dist(V),Z=V.angleTo(D);for(;P+c<E+H;){P+=c;const J=(P-E)/H,G=_r(D.x,V.x,J),te=_r(D.y,V.y,J);if(G>=0&&G<I&&te>=0&&te<I&&P-R>=0&&P+R<=b){const oe=new EA(G,te,0,Z,F);d&&!Sz(A,oe,f,d,y)||T.push(oe)}}E+=H}return B||T.length||v||(T=Fz(A,E/2,c,d,y,f,v,!0,I)),T}function Pz(A,s,c,d,y){const f=[];for(let v=0;v<A.length;v++){const B=A[v];let I;for(let R=0;R<B.length-1;R++){let b=B[R],E=B[R+1];b.x<s&&E.x<s||(b.x<s?b=new Ot(s,b.y+(s-b.x)/(E.x-b.x)*(E.y-b.y))._round():E.x<s&&(E=new Ot(s,b.y+(s-b.x)/(E.x-b.x)*(E.y-b.y))._round()),b.y<c&&E.y<c||(b.y<c?b=new Ot(b.x+(c-b.y)/(E.y-b.y)*(E.x-b.x),c)._round():E.y<c&&(E=new Ot(b.x+(c-b.y)/(E.y-b.y)*(E.x-b.x),c)._round()),b.x>=d&&E.x>=d||(b.x>=d?b=new Ot(d,b.y+(d-b.x)/(E.x-b.x)*(E.y-b.y))._round():E.x>=d&&(E=new Ot(d,b.y+(d-b.x)/(E.x-b.x)*(E.y-b.y))._round()),b.y>=y&&E.y>=y||(b.y>=y?b=new Ot(b.x+(y-b.y)/(E.y-b.y)*(E.x-b.x),y)._round():E.y>=y&&(E=new Ot(b.x+(y-b.y)/(E.y-b.y)*(E.x-b.x),y)._round()),I&&b.equals(I[I.length-1])||(I=[b],f.push(I)),I.push(E)))))}}return f}function Mz(A){let s=0,c=0;for(const v of A)s+=v.w*v.h,c=Math.max(c,v.w);A.sort((v,B)=>B.h-v.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),c),h:1/0}];let y=0,f=0;for(const v of A)for(let B=d.length-1;B>=0;B--){const I=d[B];if(!(v.w>I.w||v.h>I.h)){if(v.x=I.x,v.y=I.y,f=Math.max(f,v.y+v.h),y=Math.max(y,v.x+v.w),v.w===I.w&&v.h===I.h){const R=d.pop();B<d.length&&(d[B]=R)}else v.h===I.h?(I.x+=v.w,I.w-=v.w):v.w===I.w?(I.y+=v.h,I.h-=v.h):(d.push({x:I.x+v.w,y:I.y,w:I.w-v.w,h:v.h}),I.y+=v.h,I.h-=v.h);break}}return{w:y,h:f,fill:s/(y*f)||0}}rr(EA,"Anchor");const w_=1;class GP{constructor(s,{pixelRatio:c,version:d,stretchX:y,stretchY:f,content:v},B){this.paddedRect=s,this.pixelRatio=c,this.stretchX=y,this.stretchY=f,this.content=v,this.version=d,this.padding=B}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.pixelRatio,(this.paddedRect.h-2*this.padding)/this.pixelRatio]}}class Rz{constructor(s,c,d){const y={},f={};this.haveRenderCallbacks=[];const v=[];this.addImages(s,y,w_,v),this.addImages(c,f,2,v);const{w:B,h:I}=Mz(v),R=new ma({width:B||1,height:I||1});for(const b in s){const E=s[b],P=y[b].paddedRect;ma.copy(E.data,R,{x:0,y:0},{x:P.x+w_,y:P.y+w_},E.data,d,E.sdf)}for(const b in c){const E=c[b],P=f[b].paddedRect;let T=f[b].padding;const F=P.x+T,D=P.y+T,V=E.data.width,H=E.data.height;T=T>1?T-1:T,ma.copy(E.data,R,{x:0,y:0},{x:F,y:D},E.data,d),ma.copy(E.data,R,{x:0,y:H-T},{x:F,y:D-T},{width:V,height:T},d),ma.copy(E.data,R,{x:0,y:0},{x:F,y:D+H},{width:V,height:T},d),ma.copy(E.data,R,{x:V-T,y:0},{x:F-T,y:D},{width:T,height:H},d),ma.copy(E.data,R,{x:0,y:0},{x:F+V,y:D},{width:T,height:H},d),ma.copy(E.data,R,{x:V-T,y:H-T},{x:F-T,y:D-T},{width:T,height:T},d),ma.copy(E.data,R,{x:0,y:H-T},{x:F+V,y:D-T},{width:T,height:T},d),ma.copy(E.data,R,{x:0,y:0},{x:F+V,y:D+H},{width:T,height:T},d),ma.copy(E.data,R,{x:V-T,y:0},{x:F-T,y:D+H},{width:T,height:T},d)}this.image=R,this.iconPositions=y,this.patternPositions=f}addImages(s,c,d,y){for(const f in s){const v=s[f],B={x:0,y:0,w:v.data.width+2*d,h:v.data.height+2*d};y.push(B),c[f]=new GP(B,v,d),v.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(s,c,d){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(y=>s.hasImage(y,d)),s.dispatchRenderCallbacks(this.haveRenderCallbacks,d);for(const y in s.getUpdatedImages(d))this.patchUpdatedImage(this.iconPositions[y],s.getImage(y,d),c),this.patchUpdatedImage(this.patternPositions[y],s.getImage(y,d),c)}patchUpdatedImage(s,c,d){if(!s||!c||s.version===c.version)return;s.version=c.version;const[y,f]=s.tl;d.update(c.data,{position:{x:y,y:f}})}}rr(GP,"ImagePosition"),rr(Rz,"ImageAtlas");const B_=1e20;function kz(A,s,c,d,y,f,v,B,I){for(let R=s;R<s+d;R++)Dz(A,c*f+R,f,y,v,B,I);for(let R=c;R<c+y;R++)Dz(A,R*f+s,1,d,v,B,I)}function Dz(A,s,c,d,y,f,v){f[0]=0,v[0]=-B_,v[1]=B_,y[0]=A[s];for(let B=1,I=0,R=0;B<d;B++){y[B]=A[s+B*c];const b=B*B;do{const E=f[I];R=(y[B]-y[E]+b-E*E)/(B-E)/2}while(R<=v[I]&&--I>-1);I++,f[I]=B,v[I]=R,v[I+1]=B_}for(let B=0,I=0;B<d;B++){for(;v[I+1]<B;)I++;const R=f[I],b=B-R;A[s+B*c]=y[R]+b*b}}const zu=2,KP={none:0,ideographs:1,all:2};class n0{constructor(s,c,d){this.requestManager=s,this.localGlyphMode=c,this.localFontFamily=d,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(s,c){this.urls[c]=s}getGlyphs(s,c,d){const y=[],f=this.urls[c]||Ne.GLYPHS_URL;for(const v in s)for(const B of s[v])y.push({stack:v,id:B});Go(y,({stack:v,id:B},I)=>{let R=this.entries[v];R||(R=this.entries[v]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let b=R.glyphs[B];if(b!==void 0)return void I(null,{stack:v,id:B,glyph:b});if(b=this._tinySDF(R,v,B),b)return R.glyphs[B]=b,void I(null,{stack:v,id:B,glyph:b});const E=Math.floor(B/256);if(256*E>65535)return void I(new Error("glyphs > 65535 not supported"));if(R.ranges[E])return void I(null,{stack:v,id:B,glyph:b});let P=R.requests[E];P||(P=R.requests[E]=[],n0.loadGlyphRange(v,E,f,this.requestManager,(T,F)=>{if(F){R.ascender=F.ascender,R.descender=F.descender;for(const D in F.glyphs)this._doesCharSupportLocalGlyph(+D)||(R.glyphs[+D]=F.glyphs[+D]);R.ranges[E]=!0}for(const D of P)D(T,F);delete R.requests[E]})),P.push((T,F)=>{T?I(T):F&&I(null,{stack:v,id:B,glyph:F.glyphs[B]||null})})},(v,B)=>{if(v)d(v);else if(B){const I={};for(const{stack:R,id:b,glyph:E}of B)I[R]===void 0&&(I[R]={}),I[R].glyphs===void 0&&(I[R].glyphs={}),I[R].glyphs[b]=E&&{id:E.id,bitmap:E.bitmap.clone(),metrics:E.metrics},I[R].ascender=this.entries[R].ascender,I[R].descender=this.entries[R].descender;d(null,I)}})}_doesCharSupportLocalGlyph(s){return this.localGlyphMode!==KP.none&&(this.localGlyphMode===KP.all?!!this.localFontFamily:!!this.localFontFamily&&(dr["CJK Unified Ideographs"](s)||dr["Hangul Syllables"](s)||dr.Hiragana(s)||dr.Katakana(s)||dr["CJK Symbols and Punctuation"](s)||dr["CJK Unified Ideographs Extension A"](s)||dr["CJK Unified Ideographs Extension B"](s)))}_tinySDF(s,c,d){const y=this.localFontFamily;if(!y||!this._doesCharSupportLocalGlyph(d))return;let f=s.tinySDF;if(!f){let D="400";/bold/i.test(c)?D="900":/medium/i.test(c)?D="500":/light/i.test(c)&&(D="200"),f=s.tinySDF=new n0.TinySDF({fontFamily:y,fontWeight:D,fontSize:24*zu,buffer:3*zu,radius:8*zu}),f.fontWeight=D}if(this.localGlyphs[f.fontWeight][d])return this.localGlyphs[f.fontWeight][d];const v=String.fromCodePoint(d),{data:B,width:I,height:R,glyphWidth:b,glyphHeight:E,glyphLeft:P,glyphTop:T,glyphAdvance:F}=f.draw(v);return this.localGlyphs[f.fontWeight][d]={id:d,bitmap:new Qd({width:I,height:R},B),metrics:{width:b/zu,height:E/zu,left:P/zu,top:T/zu-27,advance:F/zu,localGlyph:!0}}}}n0.loadGlyphRange=function(A,s,c,d,y){const f=256*s,v=f+255,B=d.transformRequest(d.normalizeGlyphsURL(c).replace("{fontstack}",A).replace("{range}",`${f}-${v}`),wl.Glyphs);Cc(B,(I,R)=>{if(I)y(I);else if(R){const b={},E=function(P){return new IB(P).readFields(Ste,{})}(R);for(const P of E.glyphs)b[P.id]=P;y(null,{glyphs:b,ascender:E.ascender,descender:E.descender})}})},n0.TinySDF=class{constructor({fontSize:A=24,buffer:s=3,radius:c=8,cutoff:d=.25,fontFamily:y="sans-serif",fontWeight:f="normal",fontStyle:v="normal"}={}){this.buffer=s,this.cutoff=d,this.radius=c;const B=this.size=A+4*s,I=this._createCanvas(B),R=this.ctx=I.getContext("2d",{willReadFrequently:!0});R.font=`${v} ${f} ${A}px ${y}`,R.textBaseline="alphabetic",R.textAlign="left",R.fillStyle="black",this.gridOuter=new Float64Array(B*B),this.gridInner=new Float64Array(B*B),this.f=new Float64Array(B),this.z=new Float64Array(B+1),this.v=new Uint16Array(B)}_createCanvas(A){const s=document.createElement("canvas");return s.width=s.height=A,s}draw(A){const{width:s,actualBoundingBoxAscent:c,actualBoundingBoxDescent:d,actualBoundingBoxLeft:y,actualBoundingBoxRight:f}=this.ctx.measureText(A),v=Math.ceil(c),B=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(f-y))),I=Math.min(this.size-this.buffer,v+Math.ceil(d)),R=B+2*this.buffer,b=I+2*this.buffer,E=Math.max(R*b,0),P=new Uint8ClampedArray(E),T={data:P,width:R,height:b,glyphWidth:B,glyphHeight:I,glyphTop:v,glyphLeft:0,glyphAdvance:s};if(B===0||I===0)return T;const{ctx:F,buffer:D,gridInner:V,gridOuter:H}=this;F.clearRect(D,D,B,I),F.fillText(A,D,D+v);const Z=F.getImageData(D,D,B,I);H.fill(B_,0,E),V.fill(0,0,E);for(let J=0;J<I;J++)for(let G=0;G<B;G++){const te=Z.data[4*(J*B+G)+3]/255;if(te===0)continue;const oe=(J+D)*R+G+D;if(te===1)H[oe]=0,V[oe]=B_;else{const pe=.5-te;H[oe]=pe>0?pe*pe:0,V[oe]=pe<0?pe*pe:0}}kz(H,0,0,R,b,R,this.f,this.v,this.z),kz(V,D,D,B,I,R,this.f,this.v,this.z);for(let J=0;J<E;J++){const G=Math.sqrt(H[J])-Math.sqrt(V[J]);P[J]=Math.round(255-255*(G/this.radius+this.cutoff))}return T}};const jd=w_;function Lz(A,s,c,d){const y=[],f=A.imagePrimary,v=f.pixelRatio,B=f.paddedRect.w-2*jd,I=f.paddedRect.h-2*jd,R=A.right-A.left,b=A.bottom-A.top,E=f.stretchX||[[0,B]],P=f.stretchY||[[0,I]],T=(De,Ie)=>De+Ie[1]-Ie[0],F=E.reduce(T,0),D=P.reduce(T,0),V=B-F,H=I-D;let Z=0,J=F,G=0,te=D,oe=0,pe=V,we=0,Ce=H;if(f.content&&d){const De=f.content;Z=PB(E,0,De[0]),G=PB(P,0,De[1]),J=PB(E,De[0],De[2]),te=PB(P,De[1],De[3]),oe=De[0]-Z,we=De[1]-G,pe=De[2]-De[0]-J,Ce=De[3]-De[1]-te}const xe=(De,Ie,Oe,Ke)=>{const Ze=MB(De.stretch-Z,J,R,A.left),Ye=RB(De.fixed-oe,pe,De.stretch,F),et=MB(Ie.stretch-G,te,b,A.top),at=RB(Ie.fixed-we,Ce,Ie.stretch,D),rt=MB(Oe.stretch-Z,J,R,A.left),_t=RB(Oe.fixed-oe,pe,Oe.stretch,F),Tt=MB(Ke.stretch-G,te,b,A.top),dt=RB(Ke.fixed-we,Ce,Ke.stretch,D),Zt=new Ot(Ze,et),Qt=new Ot(rt,et),Lt=new Ot(rt,Tt),Pt=new Ot(Ze,Tt),yr=new Ot(Ye/v,at/v),qt=new Ot(_t/v,dt/v),tr=s*Math.PI/180;if(tr){const Jr=Math.sin(tr),Gn=Math.cos(tr),kn=[Gn,-Jr,Jr,Gn];Zt._matMult(kn),Qt._matMult(kn),Pt._matMult(kn),Lt._matMult(kn)}const Tr=De.stretch+De.fixed,Nr=Oe.stretch+Oe.fixed,Or=Ie.stretch+Ie.fixed,Ur=Ke.stretch+Ke.fixed,Xr=A.imageSecondary;return{tl:Zt,tr:Qt,bl:Pt,br:Lt,texPrimary:{x:f.paddedRect.x+jd+Tr,y:f.paddedRect.y+jd+Or,w:Nr-Tr,h:Ur-Or},texSecondary:Xr?{x:Xr.paddedRect.x+jd+Tr,y:Xr.paddedRect.y+jd+Or,w:Nr-Tr,h:Ur-Or}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:yr,pixelOffsetBR:qt,minFontScaleX:pe/v/R,minFontScaleY:Ce/v/b,isSDF:c}};if(d&&(f.stretchX||f.stretchY)){const De=Oz(E,V,F),Ie=Oz(P,H,D);for(let Oe=0;Oe<De.length-1;Oe++){const Ke=De[Oe],Ze=De[Oe+1];for(let Ye=0;Ye<Ie.length-1;Ye++)y.push(xe(Ke,Ie[Ye],Ze,Ie[Ye+1]))}}else y.push(xe({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:B+1},{fixed:0,stretch:I+1}));return y}function PB(A,s,c){let d=0;for(const y of A)d+=Math.max(s,Math.min(c,y[1]))-Math.max(s,Math.min(c,y[0]));return d}function Oz(A,s,c){const d=[{fixed:-jd,stretch:0}];for(const[y,f]of A){const v=d[d.length-1];d.push({fixed:y-v.stretch,stretch:v.stretch}),d.push({fixed:y-v.stretch,stretch:v.stretch+(f-y)})}return d.push({fixed:s+jd,stretch:c}),d}function MB(A,s,c,d){return A/s*c+d}function RB(A,s,c,d){return A-s*c/d}function kte(A,s,c,d){const y=s+A.positionedLines[d].lineOffset;return d===0?c+y/2:c+(y+(s+A.positionedLines[d-1].lineOffset))/2}function Dte(A,s=1,c=!1){let d=1/0,y=1/0,f=-1/0,v=-1/0;const B=A[0];for(let T=0;T<B.length;T++){const F=B[T];(!T||F.x<d)&&(d=F.x),(!T||F.y<y)&&(y=F.y),(!T||F.x>f)&&(f=F.x),(!T||F.y>v)&&(v=F.y)}const I=Math.min(f-d,v-y);let R=I/2;const b=new pv([],Lte);if(I===0)return new Ot(d,y);for(let T=d;T<f;T+=I)for(let F=y;F<v;F+=I)b.push(new i0(T+R,F+R,R,A));let E=function(T){let F=0,D=0,V=0;const H=T[0];for(let Z=0,J=H.length,G=J-1;Z<J;G=Z++){const te=H[Z],oe=H[G],pe=te.x*oe.y-oe.x*te.y;D+=(te.x+oe.x)*pe,V+=(te.y+oe.y)*pe,F+=3*pe}return new i0(D/F,V/F,0,T)}(A),P=b.length;for(;b.length;){const T=b.pop();(T.d>E.d||!E.d)&&(E=T,c&&console.log("found best %d after %d probes",Math.round(1e4*T.d)/1e4,P)),T.max-E.d<=s||(R=T.h/2,b.push(new i0(T.p.x-R,T.p.y-R,R,A)),b.push(new i0(T.p.x+R,T.p.y-R,R,A)),b.push(new i0(T.p.x-R,T.p.y+R,R,A)),b.push(new i0(T.p.x+R,T.p.y+R,R,A)),P+=4)}return c&&(console.log(`num probes: ${P}`),console.log(`best distance: ${E.d}`)),E.p}function Lte(A,s){return s.max-A.max}class i0{constructor(s,c,d,y){this.p=new Ot(s,c),this.h=d,this.d=function(f,v){let B=!1,I=1/0;for(let R=0;R<v.length;R++){const b=v[R];for(let E=0,P=b.length,T=P-1;E<P;T=E++){const F=b[E],D=b[T];F.y>f.y!=D.y>f.y&&f.x<(D.x-F.x)*(f.y-F.y)/(D.y-F.y)+F.x&&(B=!B),I=Math.min(I,Dn(f,F,D))}}return(B?1:-1)*Math.sqrt(I)}(this.p,y),this.max=this.d+this.h*Math.SQRT2}}const WP=Number.POSITIVE_INFINITY,Ote=Math.sqrt(2);function Uz(A,[s,c]){let d=0,y=0;if(c===WP){s<0&&(s=0);const f=s/Ote;switch(A){case"top-right":case"top-left":y=f-7;break;case"bottom-right":case"bottom-left":y=7-f;break;case"bottom":y=7-s;break;case"top":y=s-7}switch(A){case"top-right":case"bottom-right":d=-f;break;case"top-left":case"bottom-left":d=f;break;case"left":d=s;break;case"right":d=-s}}else{switch(s=Math.abs(s),c=Math.abs(c),A){case"top-right":case"top-left":case"top":y=c-7;break;case"bottom-right":case"bottom-left":case"bottom":y=7-c}switch(A){case"top-right":case"bottom-right":case"right":d=-s;break;case"top-left":case"bottom-left":case"left":d=s}}return[d,y]}function qP(A){switch(A){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ute(A,s,c,d,y,f,v,B,I,R,b,E,P,T,F){let D=f.textMaxSize.evaluate(s,{},E);D===void 0&&(D=v);const V=A.layers[0].layout,H=V.get("icon-offset").evaluate(s,{},E),Z=Vz(c.horizontal)||c.vertical,J=P.name==="globe",G=Ts,te=v/G,oe=A.tilePixelRatio*D/G,pe=(Ze=A.overscaling,A.zoom>18&&Ze>2&&(Ze>>=1),Math.max(Gt/(512*Ze),1)*V.get("symbol-spacing")),we=V.get("text-padding")*A.tilePixelRatio,Ce=V.get("icon-padding")*A.tilePixelRatio,xe=Pr(V.get("text-max-angle")),De=V.get("text-rotation-alignment")==="map"&&V.get("symbol-placement")!=="point",Ie=V.get("icon-rotation-alignment")==="map"&&V.get("symbol-placement")!=="point",Oe=V.get("symbol-placement"),Ke=pe/2;var Ze;const Ye=V.get("icon-text-fit").evaluate(s,{},E),et=V.get("icon-text-fit-padding").evaluate(s,{},E),at=Ye!=="none";let rt;A.hasAnyIconTextFit===!1&&at&&(A.hasAnyIconTextFit=!0),d&&at&&(A.allowVerticalPlacement&&c.vertical&&(rt=Cz(d,c.vertical,Ye,et,H,te)),Z&&(d=Cz(d,Z,Ye,et,H,te)));const _t=(Tt,dt,Zt)=>{if(dt.x<0||dt.x>=Gt||dt.y<0||dt.y>=Gt)return;let Qt=null;if(J){const{x:Lt,y:Pt,z:yr}=P.projectTilePoint(dt.x,dt.y,Zt);Qt={anchor:new EA(Lt,Pt,yr,0,void 0),up:P.upVector(Zt,dt.x,dt.y)}}(function(Lt,Pt,yr,qt,tr,Tr,Nr,Or,Ur,Xr,Jr,Gn,kn,Fr,En,Mn,Ai,eo,mo,to,Ni,ls,Co,Is,ri,cl,Hu){const zc=Lt.addToLineVertexArray(Pt,qt);let Vc,Wp,Xd,qp,Q_,aV,lV,cV=0,uV=0,hV=0,AV=0,wM=-1,BM=-1;const Fh={};let dV=wo("");const Xp=yr?yr.anchor:Pt,CM=Ur.layout.get("icon-text-fit").evaluate(Ni,{},ri)!=="none";let SM=0,EM=0;if(Ur._unevaluatedLayout.getValue("text-radial-offset")===void 0?[SM,EM]=Ur.layout.get("text-offset").evaluate(Ni,{},ri).map(Ml=>Ml*Ts):(SM=Ur.layout.get("text-radial-offset").evaluate(Ni,{},ri)*Ts,EM=WP),Lt.allowVerticalPlacement&&tr.vertical){const Ml=tr.vertical;if(En)aV=XP(Ml),Or&&(lV=XP(Or));else{const Rl=Ur.layout.get("text-rotate").evaluate(Ni,{},ri)+90;Xd=kB(Xr,Xp,Pt,Jr,Gn,kn,Ml,Fr,Rl,Mn),Or&&(qp=kB(Xr,Xp,Pt,Jr,Gn,kn,Or,eo,Rl))}}if(Tr){const Ml=Ur.layout.get("icon-rotate").evaluate(Ni,{},ri),Rl=Lz(Tr,Ml,Co,CM),A0=Or?Lz(Or,Ml,Co,CM):void 0;Wp=kB(Xr,Xp,Pt,Jr,Gn,kn,Tr,eo,Ml),cV=4*Rl.length;const fV=Lt.iconSizeData;let Zp=null;fV.kind==="source"?(Zp=[Uu*Ur.layout.get("icon-size").evaluate(Ni,{},ri)],Zp[0]>Gd&&an(`${Lt.layerIds[0]}: Value for "icon-size" is >= ${C_}. Reduce your "icon-size".`)):fV.kind==="composite"&&(Zp=[Uu*ls.compositeIconSizes[0].evaluate(Ni,{},ri),Uu*ls.compositeIconSizes[1].evaluate(Ni,{},ri)],(Zp[0]>Gd||Zp[1]>Gd)&&an(`${Lt.layerIds[0]}: Value for "icon-size" is >= ${C_}. Reduce your "icon-size".`)),Lt.addSymbols(Lt.icon,Rl,Zp,to,mo,Ni,!1,yr,Pt,zc.lineStartIndex,zc.lineLength,-1,Is,ri,cl,Hu),wM=Lt.icon.placedSymbolArray.length-1,A0&&(uV=4*A0.length,Lt.addSymbols(Lt.icon,A0,Zp,to,mo,Ni,rc.vertical,yr,Pt,zc.lineStartIndex,zc.lineLength,-1,Is,ri,cl,Hu),BM=Lt.icon.placedSymbolArray.length-1)}for(const Ml in tr.horizontal){const Rl=tr.horizontal[Ml];Vc||(dV=wo(Rl.text),En?Q_=XP(Rl):Vc=kB(Xr,Xp,Pt,Jr,Gn,kn,Rl,Fr,Ur.layout.get("text-rotate").evaluate(Ni,{},ri),Mn));const A0=Rl.positionedLines.length===1;if(hV+=zz(Lt,yr,Pt,Rl,Nr,Ur,En,Ni,Mn,zc,tr.vertical?rc.horizontal:rc.horizontalOnly,A0?Object.keys(tr.horizontal):[Ml],Fh,wM,ls,Is,ri,cl),A0)break}tr.vertical&&(AV+=zz(Lt,yr,Pt,tr.vertical,Nr,Ur,En,Ni,Mn,zc,rc.vertical,["vertical"],Fh,BM,ls,Is,ri,cl));let Zd=-1;const TM=(Ml,Rl)=>Ml?Math.max(Ml,Rl):Rl;Zd=TM(Q_,Zd),Zd=TM(aV,Zd),Zd=TM(lV,Zd);const $re=Zd>-1?1:0;Lt.glyphOffsetArray.length>=65535&&an("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ni.sortKey!==void 0&&Lt.addToSortKeyRanges(Lt.symbolInstances.length,Ni.sortKey),Lt.symbolInstances.emplaceBack(Pt.x,Pt.y,Xp.x,Xp.y,Xp.z,Fh.right>=0?Fh.right:-1,Fh.center>=0?Fh.center:-1,Fh.left>=0?Fh.left:-1,Fh.vertical>=0?Fh.vertical:-1,wM,BM,dV,Vc!==void 0?Vc:Lt.collisionBoxArray.length,Vc!==void 0?Vc+1:Lt.collisionBoxArray.length,Xd!==void 0?Xd:Lt.collisionBoxArray.length,Xd!==void 0?Xd+1:Lt.collisionBoxArray.length,Wp!==void 0?Wp:Lt.collisionBoxArray.length,Wp!==void 0?Wp+1:Lt.collisionBoxArray.length,qp||Lt.collisionBoxArray.length,qp?qp+1:Lt.collisionBoxArray.length,Jr,hV,AV,cV,uV,$re,0,SM,EM,Zd,0,CM?1:0)})(A,dt,Qt,Tt,c,d,y,rt,A.layers[0],A.collisionBoxArray,s.index,s.sourceLayerIndex,A.index,we,De,I,0,Ce,Ie,H,s,f,R,b,E,T,F)};if(Oe==="line")for(const Tt of Pz(s.geometry,0,0,Gt,Gt)){const dt=Rte(Tt,pe,xe,c.vertical||Z,d,G,oe,A.overscaling,Gt);for(const Zt of dt)Z&&zte(A,Z.text,Ke,Zt)||_t(Tt,Zt,E)}else if(Oe==="line-center"){for(const Tt of s.geometry)if(Tt.length>1){const dt=Mte(Tt,xe,c.vertical||Z,d,G,oe);dt&&_t(Tt,dt,E)}}else if(s.type==="Polygon")for(const Tt of xB(s.geometry,0)){const dt=Dte(Tt,16);_t(Tt[0],new EA(dt.x,dt.y,0,0,void 0),E)}else if(s.type==="LineString")for(const Tt of s.geometry)_t(Tt,new EA(Tt[0].x,Tt[0].y,0,0,void 0),E);else if(s.type==="Point")for(const Tt of s.geometry)for(const dt of Tt)_t([dt],new EA(dt.x,dt.y,0,0,void 0),E)}const C_=255,Gd=C_*Uu;function zz(A,s,c,d,y,f,v,B,I,R,b,E,P,T,F,D,V,H){const Z=function(te,oe,pe,we,Ce,xe,De,Ie){const Oe=[];if(oe.positionedLines.length===0)return Oe;const Ke=we.layout.get("text-rotate").evaluate(xe,{})*Math.PI/180,Ze=function(_t){const Tt=_t[0],dt=_t[1],Zt=Tt*dt;return Zt>0?[Tt,-dt]:Zt<0?[-Tt,dt]:Tt===0?[dt,Tt]:[dt,-Tt]}(pe);let Ye=Math.abs(oe.top-oe.bottom);for(const _t of oe.positionedLines)Ye-=_t.lineOffset;const et=oe.positionedLines.length,at=Ye/et;let rt=oe.top-pe[1];for(let _t=0;_t<et;++_t){const Tt=oe.positionedLines[_t];rt=kte(oe,at,rt,_t);for(const dt of Tt.positionedGlyphs){if(!dt.rect)continue;const Zt=dt.rect||{};let Qt=vz+1,Lt=!0,Pt=1,yr=0;if(dt.imageName){const to=De[dt.imageName];if(!to)continue;if(to.sdf){an("SDF images are not supported in formatted text and will be ignored.");continue}Lt=!1,Pt=to.pixelRatio,Qt=w_/Pt}const qt=(Ce||Ie)&&dt.vertical,tr=dt.metrics.advance*dt.scale/2,Tr=dt.metrics,Nr=dt.rect;if(Nr===null)continue;Ie&&oe.verticalizable&&(yr=dt.imageName?tr-dt.metrics.width*dt.scale/2:0);const Or=Ce?[dt.x+tr,dt.y]:[0,0];let Ur=[0,0],Xr=[0,0],Jr=!1;Ce||(qt?(Xr=[dt.x+tr+Ze[0],dt.y+Ze[1]-yr],Jr=!0):Ur=[dt.x+tr+pe[0],dt.y+pe[1]-yr]);const Gn=Nr.w*dt.scale/(Pt*(dt.localGlyph?zu:1)),kn=Nr.h*dt.scale/(Pt*(dt.localGlyph?zu:1));let Fr,En,Mn,Ai;if(qt){const to=dt.y-rt,Ni=new Ot(-tr,tr-to),ls=-Math.PI/2,Co=new Ot(...Xr);Fr=new Ot(-tr+Ur[0],Ur[1]),Fr._rotateAround(ls,Ni)._add(Co),Fr.x+=-to+tr,Fr.y-=(Tr.left-Qt)*dt.scale;const Is=dt.imageName?Tr.advance*dt.scale:Ts*dt.scale,ri=String.fromCodePoint(dt.glyph);wte(ri)?Fr.x+=(1-Qt)*dt.scale:Bte(ri)?Fr.x+=Is-Tr.height*dt.scale+(-Qt-1)*dt.scale:Fr.x+=dt.imageName||Tr.width+2*Qt===Nr.w&&Tr.height+2*Qt===Nr.h?(Is-kn)/2:(Is-(Tr.height+2*Qt)*dt.scale)/2,En=new Ot(Fr.x,Fr.y-Gn),Mn=new Ot(Fr.x+kn,Fr.y),Ai=new Ot(Fr.x+kn,Fr.y-Gn)}else{const to=(Tr.left-Qt)*dt.scale-tr+Ur[0],Ni=(-Tr.top-Qt)*dt.scale+Ur[1],ls=to+Gn,Co=Ni+kn;Fr=new Ot(to,Ni),En=new Ot(ls,Ni),Mn=new Ot(to,Co),Ai=new Ot(ls,Co)}if(Ke){let to;to=Ce?new Ot(0,0):Jr?new Ot(Ze[0],Ze[1]):new Ot(pe[0],pe[1]),Fr._rotateAround(Ke,to),En._rotateAround(Ke,to),Mn._rotateAround(Ke,to),Ai._rotateAround(Ke,to)}const eo=new Ot(0,0),mo=new Ot(0,0);Oe.push({tl:Fr,tr:En,bl:Mn,br:Ai,texPrimary:Zt,texSecondary:void 0,writingMode:oe.writingMode,glyphOffset:Or,sectionIndex:dt.sectionIndex,isSDF:Lt,pixelOffsetTL:eo,pixelOffsetBR:mo,minFontScaleX:0,minFontScaleY:0})}}return Oe}(0,d,I,f,v,B,y,A.allowVerticalPlacement),J=A.textSizeData;let G=null;J.kind==="source"?(G=[Uu*f.layout.get("text-size").evaluate(B,{},V)],G[0]>Gd&&an(`${A.layerIds[0]}: Value for "text-size" is >= ${C_}. Reduce your "text-size".`)):J.kind==="composite"&&(G=[Uu*F.compositeTextSizes[0].evaluate(B,{},V),Uu*F.compositeTextSizes[1].evaluate(B,{},V)],(G[0]>Gd||G[1]>Gd)&&an(`${A.layerIds[0]}: Value for "text-size" is >= ${C_}. Reduce your "text-size".`)),A.addSymbols(A.text,Z,G,I,v,B,b,s,c,R.lineStartIndex,R.lineLength,T,D,V,H,!1);for(const te of E)P[te]=A.text.placedSymbolArray.length-1;return 4*Z.length}function Vz(A){for(const s in A)return A[s];return null}function kB(A,s,c,d,y,f,v,B,I,R){let b=v.top,E=v.bottom,P=v.left,T=v.right;const F=v.collisionPadding;if(F&&(P-=F[0],b-=F[1],T+=F[2],E+=F[3]),I){const D=new Ot(P,b),V=new Ot(T,b),H=new Ot(P,E),Z=new Ot(T,E),J=Pr(I);let G=new Ot(0,0);R&&(G=new Ot(R[0],R[1])),D._rotateAround(J,G),V._rotateAround(J,G),H._rotateAround(J,G),Z._rotateAround(J,G),P=Math.min(D.x,V.x,H.x,Z.x),T=Math.max(D.x,V.x,H.x,Z.x),b=Math.min(D.y,V.y,H.y,Z.y),E=Math.max(D.y,V.y,H.y,Z.y)}return A.emplaceBack(s.x,s.y,s.z,c.x,c.y,P,b,T,E,B,d,y,f),A.length-1}function XP(A){A.collisionPadding&&(A.top-=A.collisionPadding[1],A.bottom+=A.collisionPadding[3]);const s=A.bottom-A.top;return s>0?Math.max(10,s):null}function zte(A,s,c,d){const y=A.compareText;if(s in y){const f=y[s];for(let v=f.length-1;v>=0;v--)if(d.dist(f[v])<c)return!0}else y[s]=[];return y[s].push(d),!1}function Nz(A,s){const c=A.fovAboveCenter,d=A.elevation?A.elevation.getMinElevationBelowMSL()*s:0,y=(A._camera.position[2]*A.worldSize-d)/Math.cos(A._pitch),f=Math.sin(c)*y/Math.sin(Math.max(Math.PI/2-A._pitch-c,.01));let v=Math.sin(A._pitch)*f+y;const B=y*(1/A._horizonShift);return A.elevation&&A.elevation.exaggeration()!==0||(v*=1+Math.max(A.zoom-17,0)),Math.min(1.01*v,B)}function S_(A,s){if(!s.isReprojectedInTileSpace)return{scale:1<<A.z,x:A.x,y:A.y,x2:A.x+1,y2:A.y+1,projection:s};const c=Math.pow(2,-A.z),d=A.x*c,y=(A.x+1)*c,f=A.y*c,v=(A.y+1)*c,B=Me(d),I=Me(y),R=Fe(f),b=Fe(v),E=s.project(B,R),P=s.project(I,R),T=s.project(I,b),F=s.project(B,b);let D=Math.min(E.x,P.x,T.x,F.x),V=Math.min(E.y,P.y,T.y,F.y),H=Math.max(E.x,P.x,T.x,F.x),Z=Math.max(E.y,P.y,T.y,F.y);const J=c/16;function G(oe,pe,we,Ce,xe,De){const Ie=(we+xe)/2,Oe=(Ce+De)/2,Ke=s.project(Me(Ie),Fe(Oe)),Ze=Math.max(0,D-Ke.x,V-Ke.y,Ke.x-H,Ke.y-Z);D=Math.min(D,Ke.x),H=Math.max(H,Ke.x),V=Math.min(V,Ke.y),Z=Math.max(Z,Ke.y),Ze>J&&(G(oe,Ke,we,Ce,Ie,Oe),G(Ke,pe,Ie,Oe,xe,De))}G(E,P,d,f,y,f),G(P,T,y,f,y,v),G(T,F,y,v,d,v),G(F,E,d,v,d,f),D-=J,V-=J,H+=J,Z+=J;const te=1/Math.max(H-D,Z-V);return{scale:te,x:D*te,y:V*te,x2:H*te,y2:Z*te,projection:s}}function Qz(A,{x:s,y:c},d=0){return new Ot(((s-d)*A.scale-A.x)*Gt,(c*A.scale-A.y)*Gt)}const Vte=Qe.mat4.identity(new Float32Array(16));class Kd{constructor(s){this.spec=s,this.name=s.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(s,c){return{x:0,y:0,z:0}}unproject(s,c){return new Y(0,0)}projectTilePoint(s,c,d){return{x:s,y:c,z:0}}locationPoint(s,c,d=!0){return s._coordinatePoint(s.locationCoordinate(c),d)}pixelsPerMeter(s,c){return be(1,s)*c}pixelSpaceConversion(s,c,d){return 1}farthestPixelDistance(s){return Nz(s,s.pixelsPerMeter)}pointCoordinate(s,c,d,y){const f=s.horizonLineFromTop(!1),v=new Ot(c,Math.max(f,d));return s.rayIntersectionCoordinate(s.pointRayIntersection(v,y))}pointCoordinate3D(s,c,d){const y=new Ot(c,d);if(s.elevation)return s.elevation.pointCoordinate(y);{const f=this.pointCoordinate(s,y.x,y.y,0);return[f.x,f.y,f.z]}}isPointAboveHorizon(s,c){if(s.elevation&&s.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(s,c.x,c.y);const d=s.horizonLineFromTop();return c.y<d}createInversionMatrix(s,c){return Vte}createTileMatrix(s,c,d){let y,f,v;const B=d.canonical,I=Qe.mat4.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const R=S_(B,this);y=1,f=R.x+d.wrap*R.scale,v=R.y,Qe.mat4.scale(I,I,[y/R.scale,y/R.scale,s.pixelsPerMeter/c])}else y=c/s.zoomScale(B.z),f=(B.x+Math.pow(2,B.z)*d.wrap)*y,v=B.y*y;return Qe.mat4.translate(I,I,[f,v,0]),Qe.mat4.scale(I,I,[y/Gt,y/Gt,1]),I}upVector(s,c,d){return[0,0,1]}upVectorScale(s,c,d){return{metersToTile:1}}}class Nte extends Kd{constructor(s){super(s),this.range=[4,7],this.center=s.center||[-96,37.5];const[c,d]=this.parallels=s.parallels||[29.5,45.5],y=Math.sin(Pr(c));this.n=(y+Math.sin(Pr(d)))/2,this.c=1+y*(2*this.n-y),this.r0=Math.sqrt(this.c)/this.n}project(s,c){const{n:d,c:y,r0:f}=this,v=Pr(s-this.center[0]),B=Pr(c),I=Math.sqrt(y-2*d*Math.sin(B))/d;return{x:I*Math.sin(v*d),y:I*Math.cos(v*d)-f,z:0}}unproject(s,c){const{n:d,c:y,r0:f}=this,v=f+c;let B=Math.atan2(s,Math.abs(v))*Math.sign(v);v*d<0&&(B-=Math.PI*Math.sign(s)*Math.sign(v));const I=Pr(this.center[0])*d;B=yi(B,-Math.PI-I,Math.PI-I);const R=Er(nn(B/d)+this.center[0],-180,180),b=Math.asin(Er((y-(s*s+v*v)*d*d)/(2*d),-1,1)),E=Er(nn(b),-Le,Le);return new Y(R,E)}}const E_=1.340264,T_=-.081106,I_=893e-6,F_=.003796,DB=Math.sqrt(3)/2;class Qte extends Kd{project(s,c){c=c/180*Math.PI,s=s/180*Math.PI;const d=Math.asin(DB*Math.sin(c)),y=d*d,f=y*y*y;return{x:.5*(s*Math.cos(d)/(DB*(E_+3*T_*y+f*(7*I_+9*F_*y)))/Math.PI+.5),y:1-.5*(d*(E_+T_*y+f*(I_+F_*y))/Math.PI+1),z:0}}unproject(s,c){s=(2*s-.5)*Math.PI;let d=c=(2*(1-c)-1)*Math.PI,y=d*d,f=y*y*y;for(let b,E,P,T=0;T<12&&(E=d*(E_+T_*y+f*(I_+F_*y))-c,P=E_+3*T_*y+f*(7*I_+9*F_*y),b=E/P,d=Er(d-b,-Math.PI/3,Math.PI/3),y=d*d,f=y*y*y,!(Math.abs(b)<1e-12));++T);const v=DB*s*(E_+3*T_*y+f*(7*I_+9*F_*y))/Math.cos(d),B=Math.asin(Math.sin(d)/DB),I=Er(180*v/Math.PI,-180,180),R=Er(180*B/Math.PI,-Le,Le);return new Y(I,R)}}class Hte extends Kd{constructor(s){super(s),this.wrap=!0,this.supportsWorldCopies=!0}project(s,c){return{x:.5+s/360,y:.5-c/360,z:0}}unproject(s,c){const d=360*(s-.5),y=Er(360*(.5-c),-Le,Le);return new Y(d,y)}}const o0=Math.PI/2;function LB(A){return Math.tan((o0+A)/2)}class jte extends Kd{constructor(s){super(s),this.center=s.center||[0,30];const[c,d]=this.parallels=s.parallels||[30,30];let y=Pr(c),f=Pr(d);this.southernCenter=y+f<0,this.southernCenter&&(y=-y,f=-f);const v=Math.cos(y),B=LB(y);this.n=y===f?Math.sin(y):Math.log(v/Math.cos(f))/Math.log(LB(f)/B),this.f=v*Math.pow(LB(y),this.n)/this.n}project(s,c){c=Pr(c),this.southernCenter&&(c=-c),s=Pr(s-this.center[0]);const d=1e-6,{n:y,f}=this;f>0?c<-o0+d&&(c=-o0+d):c>o0-d&&(c=o0-d);const v=f/Math.pow(LB(c),y);let B=v*Math.sin(y*s),I=f-v*Math.cos(y*s);return B=.5*(B/Math.PI+.5),I=.5*(I/Math.PI+.5),{x:B,y:this.southernCenter?I:1-I,z:0}}unproject(s,c){s=(2*s-.5)*Math.PI,this.southernCenter&&(c=1-c),c=(2*(1-c)-.5)*Math.PI;const{n:d,f:y}=this,f=y-c,v=Math.sign(f),B=Math.sign(d)*Math.sqrt(s*s+f*f);let I=Math.atan2(s,Math.abs(f))*v;f*d<0&&(I-=Math.PI*Math.sign(s)*v);const R=Er(nn(I/d)+this.center[0],-180,180),b=Er(nn(2*Math.atan(Math.pow(y/B,1/d))-o0),-Le,Le);return new Y(R,this.southernCenter?-b:b)}}class Hz extends Kd{constructor(s){super(s),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(s,c){return{x:Be(s),y:Te(c),z:0}}unproject(s,c){const d=Me(s),y=Fe(c);return new Y(d,y)}}const jz=Pr(Le);class Gte extends Kd{project(s,c){const d=(c=Pr(c))*c,y=d*d;return{x:.5*((s=Pr(s))*(.8707-.131979*d+y*(y*(.003971*d-.001529*y)-.013791))/Math.PI+.5),y:1-.5*(c*(1.007226+d*(.015085+y*(.028874*d-.044475-.005916*y)))/Math.PI+1),z:0}}unproject(s,c){s=(2*s-.5)*Math.PI;let d=c=(2*(1-c)-1)*Math.PI,y=25,f=0,v=d*d;do{v=d*d;const R=v*v;f=(d*(1.007226+v*(.015085+R*(.028874*v-.044475-.005916*R)))-c)/(1.007226+v*(.045255+R*(.259866*v-.311325-.005916*11*R))),d=Er(d-f,-jz,jz)}while(Math.abs(f)>1e-6&&--y>0);v=d*d;const B=Er(nn(s/(.8707+v*(v*(v*v*v*(.003971-.001529*v)-.013791)-.131979))),-180,180),I=nn(d);return new Y(B,I)}}const Gz=Pr(Le);class Kte extends Kd{project(s,c){c=Pr(c),s=Pr(s);const d=Math.cos(c),y=2/Math.PI,f=Math.acos(d*Math.cos(s/2)),v=Math.sin(f)/f,B=.5*(s*y+2*d*Math.sin(s/2)/v)||0,I=.5*(c+Math.sin(c)/v)||0;return{x:.5*(B/Math.PI+.5),y:1-.5*(I/Math.PI+1),z:0}}unproject(s,c){let d=s=(2*s-.5)*Math.PI,y=c=(2*(1-c)-1)*Math.PI,f=25;const v=1e-6;let B=0,I=0;do{const R=Math.cos(y),b=Math.sin(y),E=2*b*R,P=b*b,T=R*R,F=Math.cos(d/2),D=Math.sin(d/2),V=2*F*D,H=D*D,Z=1-T*F*F,J=Z?1/Z:0,G=Z?Math.acos(R*F)*Math.sqrt(1/Z):0,te=.5*(2*G*R*D+2*d/Math.PI)-s,oe=.5*(G*b+y)-c,pe=.5*J*(T*H+G*R*F*P)+1/Math.PI,we=J*(V*E/4-G*b*D),Ce=.125*J*(E*D-G*b*T*V),xe=.5*J*(P*F+G*H*R)+.5,De=we*Ce-xe*pe;B=(oe*we-te*xe)/De,I=(te*Ce-oe*pe)/De,d=Er(d-B,-Math.PI,Math.PI),y=Er(y-I,-Gz,Gz)}while((Math.abs(B)>v||Math.abs(I)>v)&&--f>0);return new Y(nn(d),nn(y))}}class Kz extends Kd{constructor(s){super(s),this.center=s.center||[0,0],this.parallels=s.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Pr(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(s,c){const{scale:d,cosPhi:y}=this;return{x:Pr(s)*y*d+.5,y:-Math.sin(Pr(c))/y*d+.5,z:0}}unproject(s,c){const{scale:d,cosPhi:y}=this,f=-(c-.5)/d,v=Er(nn((s-.5)/d)/y,-180,180),B=Math.asin(Er(f*y,-1,1)),I=Er(nn(B),-Le,Le);return new Y(v,I)}}class Wte extends Hz{constructor(s){super(s),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(s,c,d){const y=u_(s,c,d),f=gB(Th(d));return Qe.vec3.transformMat4(y,y,f),{x:y[0],y:y[1],z:y[2]}}locationPoint(s,c){const d=Q(c.lat,c.lng),y=Qe.vec3.normalize([],d),f=s.elevation?s.elevation.getAtPointOrZero(s.locationCoordinate(c),s._centerAltitude):s._centerAltitude,v=be(1,0)*Gt*f;Qe.vec3.scaleAndAdd(d,d,y,v);const B=Qe.mat4.identity(new Float64Array(16));return Qe.mat4.multiply(B,s.pixelMatrix,s.globeMatrix),Qe.vec3.transformMat4(d,d,B),new Ot(d[0],d[1])}pixelsPerMeter(s,c){return be(1,0)*c}pixelSpaceConversion(s,c,d){const y=be(1,s)*c,f=_r(be(1,45)*c,y,d);return this.pixelsPerMeter(s,c)/f}createTileMatrix(s,c,d){const y=vP(Th(d.canonical));return Qe.mat4.multiply(new Float64Array(16),s.globeMatrix,y)}createInversionMatrix(s,c){const{center:d}=s,y=gB(Th(c));return Qe.mat4.rotateY(y,y,Pr(d.lng)),Qe.mat4.rotateX(y,y,Pr(d.lat)),Qe.mat4.scale(y,y,[s._pixelsPerMercatorPixel,s._pixelsPerMercatorPixel,1]),Float32Array.from(y)}pointCoordinate(s,c,d,y){return fB(s,c,d,!0)||new nt(0,0)}pointCoordinate3D(s,c,d){const y=this.pointCoordinate(s,c,d,0);return[y.x,y.y,y.z]}isPointAboveHorizon(s,c){return!fB(s,c.x,c.y,!1)}farthestPixelDistance(s){const c=function(y,f){const v=y.cameraToCenterDistance,B=y._centerAltitude*f,I=y._camera,R=y._camera.forward(),b=Qe.vec3.add([],Qe.vec3.scale([],R,-v),[0,0,B]),E=y.worldSize/(2*Math.PI),P=[0,0,-E],T=y.width/y.height,F=Math.tan(y.fovAboveCenter),D=Qe.vec3.scale([],I.up(),F),V=Qe.vec3.scale([],I.right(),F*T),H=Qe.vec3.normalize([],Qe.vec3.add([],Qe.vec3.add([],R,D),V)),Z=[];let J;if(new Ou(b,H).closestPointOnSphere(P,E,Z)){const G=Qe.vec3.add([],Z,P),te=Qe.vec3.sub([],G,b);J=Math.cos(y.fovAboveCenter)*Qe.vec3.length(te)}else{const G=Qe.vec3.sub([],b,P),te=Qe.vec3.sub([],P,b);Qe.vec3.normalize(te,te);const oe=Qe.vec3.length(G)-E;J=Math.sqrt(oe*(oe+2*E));const pe=Math.acos(J/(E+oe))-Math.acos(Qe.vec3.dot(R,te));J*=Math.cos(pe)}return 1.01*J}(s,this.pixelsPerMeter(s.center.lat,s.worldSize)),d=Nd(s.zoom);if(d>0){const y=Nz(s,be(1,s.center.lat)*s.worldSize),f=s.worldSize/(2*Math.PI),v=Math.max(s.width,s.height)/s.worldSize*Math.PI;return _r(c,y+f*(1-Math.cos(v)),Math.pow(d,10))}return c}upVector(s,c,d){return u_(c,d,s,1)}upVectorScale(s){return{metersToTile:CA(mB(Th(s)))}}}function Wz(A){const s=A.parallels,c=!!s&&Math.abs(s[0]+s[1])<.01;switch(A.name){case"mercator":return new Hz(A);case"equirectangular":return new Hte(A);case"naturalEarth":return new Gte(A);case"equalEarth":return new Qte(A);case"winkelTripel":return new Kte(A);case"albers":return c?new Kz(A):new Nte(A);case"lambertConformalConic":return c?new Kz(A):new jte(A);case"globe":return new Wte(A)}throw new Error(`Invalid projection name: ${A.name}`)}const qte=e0.VectorTileFeature.types,Xte=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function OB(A,s,c,d,y,f,v,B,I,R,b,E,P){const T=B?Math.min(Gd,Math.round(B[0])):0,F=B?Math.min(Gd,Math.round(B[1])):0;A.emplaceBack(s,c,Math.round(32*d),Math.round(32*y),f,v,(T<<1)+(I?1:0),F,16*R,16*b,256*E,256*P)}function UB(A,s,c){A.emplaceBack(s,c)}function zB(A,s,c,d,y,f,v){A.emplaceBack(s,c,d,y,f,v)}function VB(A,s,c,d,y){A.emplaceBack(s,c,d,y),A.emplaceBack(s,c,d,y),A.emplaceBack(s,c,d,y),A.emplaceBack(s,c,d,y)}function Zte(A){for(const s of A.sections)if(tP(s.text))return!0;return!1}class ZP{constructor(s){this.layoutVertexArray=new Zv,this.indexArray=new gs,this.programConfigurations=s,this.segments=new Ki,this.dynamicLayoutVertexArray=new Ru,this.opacityVertexArray=new Jv,this.placedSymbolArray=new n_,this.iconTransitioningVertexArray=new Ch,this.globeExtVertexArray=new Yv,this.zOffsetVertexArray=new Dd}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(s,c,d,y,f){this.isEmpty()||(d&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,dte.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,pte.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,Xte,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=s.createVertexBuffer(this.iconTransitioningVertexArray,gte.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=s.createVertexBuffer(this.globeExtVertexArray,fte.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||f)&&(this.zOffsetVertexBuffer=s.createVertexBuffer(this.zOffsetVertexArray,mte.members,!0)),this.opacityVertexBuffer.itemSize=1),(d||y)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}rr(ZP,"SymbolBuffers");class YP{constructor(s,c,d){this.layoutVertexArray=new s,this.layoutAttributes=c,this.indexArray=new d,this.segments=new Ki,this.collisionVertexArray=new kd,this.collisionVertexArrayExt=new Ru}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,yte.members,!0),this.collisionVertexBufferExt=s.createVertexBuffer(this.collisionVertexArrayExt,vte.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}rr(YP,"CollisionBuffers");class NB{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.lut=s.lut,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(v=>v.fqid),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Qe.mat4.identity([]),this.placementViewportMatrix=Qe.mat4.identity([]);const c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=zP(this.zoom,c["text-size"]),this.iconSizeData=zP(this.zoom,c["icon-size"]);const d=this.layers[0].layout,y=d.get("symbol-sort-key"),f=d.get("symbol-z-order");this.canOverlap=d.get("text-allow-overlap")||d.get("icon-allow-overlap")||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=f!=="viewport-y"&&y.constantOr(1)!==void 0,this.sortFeaturesByY=(f==="viewport-y"||f==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=d.get("text-writing-mode").map(v=>rc[v]),this.stateDependentLayerIds=this.layers.filter(v=>v.isStateDependent()).map(v=>v.id),this.sourceID=s.sourceID,this.projection=s.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=d.get("symbol-z-elevate"),this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new ZP(new Sh(this.layers,{zoom:this.zoom,lut:this.lut},s=>s.startsWith("text")||s.startsWith("symbol"))),this.icon=new ZP(new Sh(this.layers,{zoom:this.zoom,lut:this.lut},s=>s.startsWith("icon")||s.startsWith("symbol"))),this.glyphOffsetArray=new oB,this.lineVertexArray=new Xg,this.symbolInstances=new i_}calculateGlyphDependencies(s,c,d,y,f){for(let v=0;v<s.length;v++){const B=s.codePointAt(v);if(B===void 0)break;if(c[B]=!0,y&&f&&B<=65535){const I=x_[s.charAt(v)];I&&(c[I.charCodeAt(0)]=!0)}}}updateFootprints(s,c){}updateReplacement(s,c){if(c.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=c.updateTime;const d=c.getReplacementRegionsForTile(s.toUnwrapped(),!0);return!RP(this.activeReplacements,d)&&(this.activeReplacements=d,!0)}populate(s,c,d,y){const f=this.layers[0],v=f.layout,B=this.projection.name==="globe",I=v.get("text-font"),R=v.get("text-field"),b=v.get("icon-image"),E=(R.value.kind!=="constant"||R.value.value instanceof Jn&&!R.value.value.isEmpty()||R.value.value.toString().length>0)&&(I.value.kind!=="constant"||I.value.value.length>0),P=b.value.kind!=="constant"||!!b.value.value||Object.keys(b.parameters).length>0,T=v.get("symbol-sort-key");if(this.features=[],!E&&!P)return;const F=c.iconDependencies,D=c.glyphDependencies,V=c.availableImages,H=new Gi(this.zoom);for(const{feature:Z,id:J,index:G,sourceLayerIndex:te}of s){const oe=f._featureFilter.needGeometry,pe=Ut(Z,oe);if(!f._featureFilter.filter(H,pe,d))continue;if(oe||(pe.geometry=Dt(Z,d,y)),B&&Z.type!==1&&d.z<=5){const De=pe.geometry,Ie=.98078528056,Oe=(Ke,Ze)=>{const Ye=u_(Ke.x,Ke.y,d,1),et=u_(Ze.x,Ze.y,d,1);return Qe.vec3.dot(Ye,et)<Ie};for(let Ke=0;Ke<De.length;Ke++)De[Ke]=kt(De[Ke],Oe)}let we,Ce;if(E){const De=f.getValueAndResolveTokens("text-field",pe,d,V),Ie=Jn.factory(De);Zte(Ie)&&(this.hasRTLText=!0),(!this.hasRTLText||jv()==="unavailable"||this.hasRTLText&&Ua.isParsed())&&(we=bte(Ie,f,pe))}if(P){const De=f.getValueAndResolveTokens("icon-image",pe,d,V);Ce=De instanceof fo?De:fo.fromString(De)}if(!we&&!Ce)continue;const xe=this.sortFeaturesByKey?T.evaluate(pe,{},d):void 0;if(this.features.push({id:J,text:we,icon:Ce,index:G,sourceLayerIndex:te,geometry:pe.geometry,properties:Z.properties,type:qte[Z.type],sortKey:xe}),Ce&&(F[Ce.namePrimary]=!0,Ce.nameSecondary&&(F[Ce.nameSecondary]=!0)),we){const De=I.evaluate(pe,{},d).join(","),Ie=v.get("text-rotation-alignment")==="map"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(rc.vertical)>=0;for(const Oe of we.sections)if(Oe.image)F[Oe.image.namePrimary]=!0;else{const Ke=Rg(we.toString()),Ze=Oe.fontStack||De,Ye=D[Ze]=D[Ze]||{};this.calculateGlyphDependencies(Oe.text,Ye,Ie,this.allowVerticalPlacement,Ke)}}}v.get("symbol-placement")==="line"&&(this.features=function(Z){const J={},G={},te=[];let oe=0;function pe(De){te.push(Z[De]),oe++}function we(De,Ie,Oe){const Ke=G[De];return delete G[De],G[Ie]=Ke,te[Ke].geometry[0].pop(),te[Ke].geometry[0]=te[Ke].geometry[0].concat(Oe[0]),Ke}function Ce(De,Ie,Oe){const Ke=J[Ie];return delete J[Ie],J[De]=Ke,te[Ke].geometry[0].shift(),te[Ke].geometry[0]=Oe[0].concat(te[Ke].geometry[0]),Ke}function xe(De,Ie,Oe){const Ke=Oe?Ie[0][Ie[0].length-1]:Ie[0][0];return`${De}:${Ke.x}:${Ke.y}`}for(let De=0;De<Z.length;De++){const Ie=Z[De],Oe=Ie.geometry,Ke=Ie.text?Ie.text.toString():null;if(!Ke){pe(De);continue}const Ze=xe(Ke,Oe),Ye=xe(Ke,Oe,!0);if(Ze in G&&Ye in J&&G[Ze]!==J[Ye]){const et=Ce(Ze,Ye,Oe),at=we(Ze,Ye,te[et].geometry);delete J[Ze],delete G[Ye],G[xe(Ke,te[at].geometry,!0)]=at,te[et].geometry=null}else Ze in G?we(Ze,Ye,Oe):Ye in J?Ce(Ze,Ye,Oe):(pe(De),J[Ze]=oe-1,G[Ye]=oe-1)}return te.filter(De=>De.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Z,J)=>Z.sortKey-J.sortKey)}update(s,c,d,y,f){const v=Object.keys(s).length!==0;if(v&&!this.stateDependentLayers.length)return;const B=v?this.stateDependentLayers:this.layers;this.text.programConfigurations.updatePaintArrays(s,c,B,d,y,f),this.icon.programConfigurations.updatePaintArrays(s,c,B,d,y,f)}updateZOffset(){const s=(f,v,B)=>{d+=v,d>f.length&&f.resize(d);for(let I=-v;I<0;I++)f.emplace(I+d,B)},c=(f,v,B)=>{y+=v,y>f.length&&f.resize(y);for(let I=-v;I<0;I++)f.emplace(I+y,B)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let d=0,y=0;for(let f=0;f<this.symbolInstances.length;f++){const v=this.symbolInstances.get(f),{numHorizontalGlyphVertices:B,numVerticalGlyphVertices:I,numIconVertices:R}=v,b=v.zOffset,E=R>0;if((B>0||I>0)&&(s(this.text.zOffsetVertexArray,B,b),s(this.text.zOffsetVertexArray,I,b)),E){const{placedIconSymbolIndex:P,verticalPlacedIconSymbolIndex:T}=v;P>=0&&c(this.icon.zOffsetVertexArray,R,b),T>=0&&c(this.icon.zOffsetVertexArray,v.numVerticalIconVertices,b)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=Wz(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,c){const d=this.lineVertexArray.length;if(s.segment!==void 0)for(const{x:y,y:f}of c)this.lineVertexArray.emplaceBack(y,f);return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(s,c,d,y,f,v,B,I,R,b,E,P,T,F,D,V){const H=s.indexArray,Z=s.layoutVertexArray,J=s.globeExtVertexArray,G=s.segments.prepareSegment(4*c.length,Z,H,this.canOverlap?v.sortKey:void 0),te=this.glyphOffsetArray.length,oe=G.vertexLength,pe=this.allowVerticalPlacement&&B===rc.vertical?Math.PI/2:0,we=v.text&&v.text.sections;for(let xe=0;xe<c.length;xe++){const{tl:De,tr:Ie,bl:Oe,br:Ke,texPrimary:Ze,texSecondary:Ye,pixelOffsetTL:et,pixelOffsetBR:at,minFontScaleX:rt,minFontScaleY:_t,glyphOffset:Tt,isSDF:dt,sectionIndex:Zt}=c[xe],Qt=G.vertexLength,Lt=Tt[1];if(OB(Z,R.x,R.y,De.x,Lt+De.y,Ze.x,Ze.y,d,dt,et.x,et.y,rt,_t),OB(Z,R.x,R.y,Ie.x,Lt+Ie.y,Ze.x+Ze.w,Ze.y,d,dt,at.x,et.y,rt,_t),OB(Z,R.x,R.y,Oe.x,Lt+Oe.y,Ze.x,Ze.y+Ze.h,d,dt,et.x,at.y,rt,_t),OB(Z,R.x,R.y,Ke.x,Lt+Ke.y,Ze.x+Ze.w,Ze.y+Ze.h,d,dt,at.x,at.y,rt,_t),I){const{x:Pt,y:yr,z:qt}=I.anchor,[tr,Tr,Nr]=I.up;zB(J,Pt,yr,qt,tr,Tr,Nr),zB(J,Pt,yr,qt,tr,Tr,Nr),zB(J,Pt,yr,qt,tr,Tr,Nr),zB(J,Pt,yr,qt,tr,Tr,Nr),VB(s.dynamicLayoutVertexArray,Pt,yr,qt,pe)}else VB(s.dynamicLayoutVertexArray,R.x,R.y,R.z,pe);if(V){const Pt=Ye||Ze;UB(s.iconTransitioningVertexArray,Pt.x,Pt.y),UB(s.iconTransitioningVertexArray,Pt.x+Pt.w,Pt.y),UB(s.iconTransitioningVertexArray,Pt.x,Pt.y+Pt.h),UB(s.iconTransitioningVertexArray,Pt.x+Pt.w,Pt.y+Pt.h)}H.emplaceBack(Qt,Qt+1,Qt+2),H.emplaceBack(Qt+1,Qt+2,Qt+3),G.vertexLength+=4,G.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Tt[0]),xe!==c.length-1&&Zt===c[xe+1].sectionIndex||s.programConfigurations.populatePaintArrays(Z.length,v,v.index,{},T,F,D,we&&we[Zt])}const Ce=I?I.anchor:R;s.placedSymbolArray.emplaceBack(Ce.x,Ce.y,Ce.z,R.x,R.y,te,this.glyphOffsetArray.length-te,oe,b,E,R.segment,d?d[0]:0,d?d[1]:0,y[0],y[1],B,0,!1,0,P,0)}_commitLayoutVertex(s,c,d,y,f,v,B){s.emplaceBack(c,d,y,f,v,Math.round(B.x),Math.round(B.y))}_addCollisionDebugVertices(s,c,d,y,f,v,B){const I=d.segments.prepareSegment(4,d.layoutVertexArray,d.indexArray),R=I.vertexLength,b=B.tileAnchorX,E=B.tileAnchorY;for(let T=0;T<4;T++)d.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(d.collisionVertexArrayExt,c,s.padding,B.zOffset),this._commitLayoutVertex(d.layoutVertexArray,y,f,v,b,E,new Ot(s.x1,s.y1)),this._commitLayoutVertex(d.layoutVertexArray,y,f,v,b,E,new Ot(s.x2,s.y1)),this._commitLayoutVertex(d.layoutVertexArray,y,f,v,b,E,new Ot(s.x2,s.y2)),this._commitLayoutVertex(d.layoutVertexArray,y,f,v,b,E,new Ot(s.x1,s.y2)),I.vertexLength+=4;const P=d.indexArray;P.emplaceBack(R,R+1),P.emplaceBack(R+1,R+2),P.emplaceBack(R+2,R+3),P.emplaceBack(R+3,R),I.primitiveLength+=4}_addTextDebugCollisionBoxes(s,c,d,y,f,v){for(let B=y;B<f;B++){const I=d.get(B),R=this.getSymbolInstanceTextSize(s,v,c,B);this._addCollisionDebugVertices(I,R,this.textCollisionBox,I.projectedAnchorX,I.projectedAnchorY,I.projectedAnchorZ,v)}}_addIconDebugCollisionBoxes(s,c,d,y,f,v){for(let B=y;B<f;B++){const I=d.get(B),R=this.getSymbolInstanceIconSize(s,c,v.placedIconSymbolIndex);this._addCollisionDebugVertices(I,R,this.iconCollisionBox,I.projectedAnchorX,I.projectedAnchorY,I.projectedAnchorZ,v)}}generateCollisionDebugBuffers(s,c){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new YP(bA,pz.members,Ch),this.iconCollisionBox=new YP(bA,pz.members,Ch);const d=t0(this.iconSizeData,s),y=t0(this.textSizeData,s);for(let f=0;f<this.symbolInstances.length;f++){const v=this.symbolInstances.get(f);this._addTextDebugCollisionBoxes(y,s,c,v.textBoxStartIndex,v.textBoxEndIndex,v),this._addTextDebugCollisionBoxes(y,s,c,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v),this._addIconDebugCollisionBoxes(d,s,c,v.iconBoxStartIndex,v.iconBoxEndIndex,v),this._addIconDebugCollisionBoxes(d,s,c,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v)}}getSymbolInstanceTextSize(s,c,d,y){const f=this.text.placedSymbolArray.get(c.rightJustifiedTextSymbolIndex>=0?c.rightJustifiedTextSymbolIndex:c.centerJustifiedTextSymbolIndex>=0?c.centerJustifiedTextSymbolIndex:c.leftJustifiedTextSymbolIndex>=0?c.leftJustifiedTextSymbolIndex:c.verticalPlacedTextSymbolIndex>=0?c.verticalPlacedTextSymbolIndex:y),v=TB(this.textSizeData,s,f)/Ts;return this.tilePixelRatio*v}getSymbolInstanceIconSize(s,c,d){const y=this.icon.placedSymbolArray.get(d),f=TB(this.iconSizeData,s,y);return this.tilePixelRatio*f}_commitDebugCollisionVertexUpdate(s,c,d,y){s.emplaceBack(c,-d,-d,y),s.emplaceBack(c,d,-d,y),s.emplaceBack(c,d,d,y),s.emplaceBack(c,-d,d,y)}_updateTextDebugCollisionBoxes(s,c,d,y,f,v){for(let B=y;B<f;B++){const I=d.get(B),R=this.getSymbolInstanceTextSize(s,v,c,B);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,R,I.padding,v.zOffset)}}_updateIconDebugCollisionBoxes(s,c,d,y,f,v){for(let B=y;B<f;B++){const I=d.get(B),R=this.getSymbolInstanceIconSize(s,c,v.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,R,I.padding,v.zOffset)}}updateCollisionDebugBuffers(s,c){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const d=t0(this.iconSizeData,s),y=t0(this.textSizeData,s);for(let f=0;f<this.symbolInstances.length;f++){const v=this.symbolInstances.get(f);this._updateTextDebugCollisionBoxes(y,s,c,v.textBoxStartIndex,v.textBoxEndIndex,v),this._updateTextDebugCollisionBoxes(y,s,c,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v),this._updateIconDebugCollisionBoxes(d,s,c,v.iconBoxStartIndex,v.iconBoxEndIndex,v),this._updateIconDebugCollisionBoxes(d,s,c,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(s,c,d,y,f,v,B,I,R){const b={};if(c<d){const{x1:E,y1:P,x2:T,y2:F,padding:D,projectedAnchorX:V,projectedAnchorY:H,projectedAnchorZ:Z,tileAnchorX:J,tileAnchorY:G,featureIndex:te}=s.get(c);b.textBox={x1:E,y1:P,x2:T,y2:F,padding:D,projectedAnchorX:V,projectedAnchorY:H,projectedAnchorZ:Z,tileAnchorX:J,tileAnchorY:G},b.textFeatureIndex=te}if(y<f){const{x1:E,y1:P,x2:T,y2:F,padding:D,projectedAnchorX:V,projectedAnchorY:H,projectedAnchorZ:Z,tileAnchorX:J,tileAnchorY:G,featureIndex:te}=s.get(y);b.verticalTextBox={x1:E,y1:P,x2:T,y2:F,padding:D,projectedAnchorX:V,projectedAnchorY:H,projectedAnchorZ:Z,tileAnchorX:J,tileAnchorY:G},b.verticalTextFeatureIndex=te}if(v<B){const{x1:E,y1:P,x2:T,y2:F,padding:D,projectedAnchorX:V,projectedAnchorY:H,projectedAnchorZ:Z,tileAnchorX:J,tileAnchorY:G,featureIndex:te}=s.get(v);b.iconBox={x1:E,y1:P,x2:T,y2:F,padding:D,projectedAnchorX:V,projectedAnchorY:H,projectedAnchorZ:Z,tileAnchorX:J,tileAnchorY:G},b.iconFeatureIndex=te}if(I<R){const{x1:E,y1:P,x2:T,y2:F,padding:D,projectedAnchorX:V,projectedAnchorY:H,projectedAnchorZ:Z,tileAnchorX:J,tileAnchorY:G,featureIndex:te}=s.get(I);b.verticalIconBox={x1:E,y1:P,x2:T,y2:F,padding:D,projectedAnchorX:V,projectedAnchorY:H,projectedAnchorZ:Z,tileAnchorX:J,tileAnchorY:G},b.verticalIconFeatureIndex=te}return b}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){const d=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(s,c){const d=s.placedSymbolArray.get(c),y=d.vertexStartIndex+4*d.numGlyphs;for(let f=d.vertexStartIndex;f<y;f+=4)s.indexArray.emplaceBack(f,f+1,f+2),s.indexArray.emplaceBack(f+1,f+2,f+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const c=Math.sin(s),d=Math.cos(s),y=[],f=[],v=[];for(let B=0;B<this.symbolInstances.length;++B){v.push(B);const I=this.symbolInstances.get(B);y.push(0|Math.round(c*I.tileAnchorX+d*I.tileAnchorY)),f.push(I.featureIndex)}return v.sort((B,I)=>y[B]-y[I]||f[I]-f[B]),v}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let s=0;s<this.symbolInstances.length;++s)this.symbolInstanceIndexesSortedZOffset.push(s)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((s,c)=>this.symbolInstances.get(c).zOffset-this.symbolInstances.get(s).zOffset)}addToSortKeyRanges(s,c){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===c?d.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const c of this.symbolInstanceIndexes){const d=this.symbolInstances.get(c);this.featureSortOrder.push(d.featureIndex);const{rightJustifiedTextSymbolIndex:y,centerJustifiedTextSymbolIndex:f,leftJustifiedTextSymbolIndex:v,verticalPlacedTextSymbolIndex:B,placedIconSymbolIndex:I,verticalPlacedIconSymbolIndex:R}=d;y>=0&&this.addIndicesForPlacedSymbol(this.text,y),f>=0&&f!==y&&this.addIndicesForPlacedSymbol(this.text,f),v>=0&&v!==f&&v!==y&&this.addIndicesForPlacedSymbol(this.text,v),B>=0&&this.addIndicesForPlacedSymbol(this.text,B),I>=0&&this.addIndicesForPlacedSymbol(this.icon,I),R>=0&&this.addIndicesForPlacedSymbol(this.icon,R)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let qz,Xz,JP;rr(NB,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),NB.addDynamicAttributes=VB;class Zz{constructor(s){this.type=s.property.overrides?s.property.overrides.runtimeType:ua,this.defaultValue=s}evaluate(s){if(s.formattedSection){const c=this.defaultValue.property.overrides;if(c&&c.hasOverride(s.formattedSection))return c.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}rr(Zz,"FormatSectionOverride",{omit:["defaultValue"]});const $P=()=>JP||(JP={layout:qz||(qz=new wi({"symbol-placement":new zt(ot.layout_symbol["symbol-placement"]),"symbol-spacing":new zt(ot.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new zt(ot.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new mr(ot.layout_symbol["symbol-sort-key"]),"symbol-z-order":new zt(ot.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new zt(ot.layout_symbol["symbol-z-elevate"]),"icon-allow-overlap":new zt(ot.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new zt(ot.layout_symbol["icon-ignore-placement"]),"icon-optional":new zt(ot.layout_symbol["icon-optional"]),"icon-rotation-alignment":new zt(ot.layout_symbol["icon-rotation-alignment"]),"icon-size":new mr(ot.layout_symbol["icon-size"]),"icon-text-fit":new mr(ot.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new mr(ot.layout_symbol["icon-text-fit-padding"]),"icon-image":new mr(ot.layout_symbol["icon-image"]),"icon-rotate":new mr(ot.layout_symbol["icon-rotate"]),"icon-padding":new zt(ot.layout_symbol["icon-padding"]),"icon-keep-upright":new zt(ot.layout_symbol["icon-keep-upright"]),"icon-offset":new mr(ot.layout_symbol["icon-offset"]),"icon-anchor":new mr(ot.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new zt(ot.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new zt(ot.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new zt(ot.layout_symbol["text-rotation-alignment"]),"text-field":new mr(ot.layout_symbol["text-field"]),"text-font":new mr(ot.layout_symbol["text-font"]),"text-size":new mr(ot.layout_symbol["text-size"]),"text-max-width":new mr(ot.layout_symbol["text-max-width"]),"text-line-height":new mr(ot.layout_symbol["text-line-height"]),"text-letter-spacing":new mr(ot.layout_symbol["text-letter-spacing"]),"text-justify":new mr(ot.layout_symbol["text-justify"]),"text-radial-offset":new mr(ot.layout_symbol["text-radial-offset"]),"text-variable-anchor":new zt(ot.layout_symbol["text-variable-anchor"]),"text-anchor":new mr(ot.layout_symbol["text-anchor"]),"text-max-angle":new zt(ot.layout_symbol["text-max-angle"]),"text-writing-mode":new zt(ot.layout_symbol["text-writing-mode"]),"text-rotate":new mr(ot.layout_symbol["text-rotate"]),"text-padding":new zt(ot.layout_symbol["text-padding"]),"text-keep-upright":new zt(ot.layout_symbol["text-keep-upright"]),"text-transform":new mr(ot.layout_symbol["text-transform"]),"text-offset":new mr(ot.layout_symbol["text-offset"]),"text-allow-overlap":new zt(ot.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new zt(ot.layout_symbol["text-ignore-placement"]),"text-optional":new zt(ot.layout_symbol["text-optional"]),visibility:new zt(ot.layout_symbol.visibility)})),paint:Xz||(Xz=new wi({"icon-opacity":new mr(ot.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new mr(ot.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new mr(ot.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new mr(ot.paint_symbol["text-emissive-strength"]),"icon-color":new mr(ot.paint_symbol["icon-color"]),"icon-halo-color":new mr(ot.paint_symbol["icon-halo-color"]),"icon-halo-width":new mr(ot.paint_symbol["icon-halo-width"]),"icon-halo-blur":new mr(ot.paint_symbol["icon-halo-blur"]),"icon-translate":new zt(ot.paint_symbol["icon-translate"]),"icon-translate-anchor":new zt(ot.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new mr(ot.paint_symbol["icon-image-cross-fade"]),"text-opacity":new mr(ot.paint_symbol["text-opacity"]),"text-occlusion-opacity":new mr(ot.paint_symbol["text-occlusion-opacity"]),"text-color":new mr(ot.paint_symbol["text-color"],{runtimeType:os,getOverride:A=>A.textColor,hasOverride:A=>!!A.textColor}),"text-halo-color":new mr(ot.paint_symbol["text-halo-color"]),"text-halo-width":new mr(ot.paint_symbol["text-halo-width"]),"text-halo-blur":new mr(ot.paint_symbol["text-halo-blur"]),"text-translate":new zt(ot.paint_symbol["text-translate"]),"text-translate-anchor":new zt(ot.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new zt(ot.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new zt(ot.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new zt(ot.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new zt(ot.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new mr(ot.paint_symbol["symbol-z-offset"]),"symbol-elevation-reference":new zt(ot.paint_symbol["symbol-elevation-reference"])}))},JP);class QB extends Xs{constructor(s,c,d,y){super(s,$P(),c,d,y),this._colorAdjustmentMatrix=Qe.mat4.identity([]),this.hasInitialOcclusionOpacityProperties=s.paint!==void 0&&("icon-occlusion-opacity"in s.paint||"text-occlusion-opacity"in s.paint)}recalculate(s,c){super.recalculate(s,c),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const d=this.layout.get("text-writing-mode");if(d){const y=[];for(const f of d)y.indexOf(f)<0&&y.push(f);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(s,c,d,y){return this._saturation===s&&this._contrast===c&&this._brightnessMin===d&&this._brightnessMax===y||(this._colorAdjustmentMatrix=function(f,v,B,I){f=ke(f),v=ge(v);const R=Qe.mat4.create(),b=f/3,E=1-2*b,P=[E,b,b,0,b,E,b,0,b,b,E,0,0,0,0,1],T=.5-.5*v,F=I-B;return Qe.mat4.multiply(R,[F,0,0,0,0,F,0,0,0,0,F,0,B,B,B,1],[v,0,0,0,0,v,0,0,0,0,v,0,T,T,T,1]),Qe.mat4.multiply(R,R,P),R}(s,c,d,y),this._saturation=s,this._contrast=c,this._brightnessMin=d,this._brightnessMax=y),this._colorAdjustmentMatrix}getValueAndResolveTokens(s,c,d,y){const f=this.layout.get(s).evaluate(c,{},d,y),v=this._unevaluatedLayout._values[s];return v.isDataDriven()||Ig(v.value)||!f?f:function(B,I){return I.replace(/{([^{}]+)}/g,(R,b)=>b in B?String(B[b]):"")}(c.properties,f)}createBucket(s){return new NB(s)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const s of $P().paint.overridableProperties){if(!QB.hasPaintOverride(this.layout,s))continue;const c=this.paint.get(s),d=new Zz(c),y=new Tg(d,c.property.specification,this.scope,this.options);let f=null;f=c.value.kind==="constant"||c.value.kind==="source"?new Uv("source",y):new Rc("composite",y,c.value.zoomStops,c.value._interpolationType),this.paint._values[s]=new Id(c.property,f,c.parameters)}}_handleOverridablePaintPropertyUpdate(s,c,d){return!(!this.layout||c.isDataDriven()||d.isDataDriven())&&QB.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,c){const d=s.get("text-field"),y=$P().paint.properties[c];let f=!1;const v=B=>{for(const I of B)if(y.overrides&&y.overrides.hasOverride(I))return void(f=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Jn)v(d.value.value.sections);else if(d.value.kind==="source"){const B=R=>{f||(R instanceof Da&&_i(R.value)===qe?v(R.value.sections):R instanceof El?v(R.sections):R.eachChild(B))},I=d.value;I._styleExpression&&B(I._styleExpression.expression)}return f}getProgramIds(){return["symbol"]}getDefaultProgramParams(s,c,d){return{config:new BA(this,{zoom:c,lut:d}),overrideFog:!1}}}let Yz,Jz,$z,e6;var eM=Bn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function tM(A){switch(A){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function rM(A){switch(A){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class nM{constructor(s,c,d,y){this.context=s,this.format=d,this.useMipmap=y&&y.useMipmap,this.texture=s.gl.createTexture(),this.update(c,{premultiply:y&&y.premultiply})}update(s,c){const d=s&&s instanceof HTMLVideoElement&&s.width===0?s.videoWidth:s.width,y=s&&s instanceof HTMLVideoElement&&s.height===0?s.videoHeight:s.height,{context:f}=this,{gl:v}=f,{x:B,y:I}=c&&c.position?c.position:{x:0,y:0},R=Math.max(B+d,this.size?this.size[0]:0),b=Math.max(I+y,this.size?this.size[1]:0);!this.size||this.size[0]===R&&this.size[1]===b||(v.bindTexture(v.TEXTURE_2D,null),v.deleteTexture(this.texture),this.texture=v.createTexture(),this.size=null),v.bindTexture(v.TEXTURE_2D,this.texture),f.pixelStoreUnpackFlipY.set(!1),f.pixelStoreUnpack.set(1),f.pixelStoreUnpackPremultiplyAlpha.set(this.format===v.RGBA8&&(!c||c.premultiply!==!1));const E=s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||ImageBitmap&&s instanceof ImageBitmap;if(!this.size&&R>0&&b>0){const P=this.useMipmap?Math.floor(Math.log2(Math.max(R,b)))+1:1;v.texStorage2D(v.TEXTURE_2D,P,this.format,R,b),this.size=[R,b]}if(this.size)if(E)v.texSubImage2D(v.TEXTURE_2D,0,B,I,tM(this.format),rM(this.format),s);else{const P=s.data;P&&v.texSubImage2D(v.TEXTURE_2D,0,B,I,d,y,tM(this.format),rM(this.format),P)}this.useMipmap&&v.generateMipmap(v.TEXTURE_2D)}bind(s,c,d=!1){const{context:y}=this,{gl:f}=y;f.bindTexture(f.TEXTURE_2D,this.texture),s!==this.minFilter&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,s),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,this.useMipmap&&!d?s===f.NEAREST?f.NEAREST_MIPMAP_NEAREST:f.LINEAR_MIPMAP_LINEAR:s),this.minFilter=s),c!==this.wrapS&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,c),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,c),this.wrapS=c)}bindExtraParam(s,c,d,y){const{context:f}=this,{gl:v}=f;v.bindTexture(v.TEXTURE_2D,this.texture),c!==this.magFilter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,c),this.magFilter=c),s!==this.minFilter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,this.useMipmap?s===v.NEAREST?v.NEAREST_MIPMAP_NEAREST:v.LINEAR_MIPMAP_LINEAR:s),this.minFilter=s),d!==this.wrapS&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,d),this.wrapS=d),y!==this.wrapT&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,y),this.wrapT=y)}destroy(){const{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}class HB{constructor(s,c){this.context=s,this.texture=c}bind(s,c){const{context:d}=this,{gl:y}=d;y.bindTexture(y.TEXTURE_2D,this.texture),s!==this.minFilter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,s),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,s),this.minFilter=s),c!==this.wrapS&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,c),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,c),this.wrapS=c)}}function jB(A,s,c,d,y,f,v,B){const I=[A,s,1,c,d,1,y,f,1],R=[v,B,1],b=Qe.mat3.adjoint([],I),[E,P,T]=Qe.vec3.transformMat3(R,R,b);return Qe.mat3.multiply(I,I,[E,0,0,0,P,0,0,0,T])}function t6(A,s,c,d,y,f,v,B){const I=function(R,b,E,P,T,F,D,V){const H=jB(0,0,1,0,1,1,0,1),Z=jB(R,b,E,P,T,F,D,V),J=Qe.mat3.adjoint([],H);return Qe.mat3.multiply(Z,Z,J)}(A,s,c,d,y,f,v,B);return[I[2]/I[8]/Gt,I[5]/I[8]/Gt]}function GB(A){return[A[0],Math.min(Math.max(A[1],-Le),Le)]}class r6 extends Ic{constructor(s,c,d,y){super(),this.id=s,this.dispatcher=d,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(y),this.options=c,this._dirty=!1}load(s,c){if(this._loaded=c||!1,this.fire(new Bl("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return s&&(this.coordinates=s),this._loaded=!0,void this._finishLoading();this._imageRequest=bo(this.map._requestManager.transformRequest(this.url,wl.Image),(d,y)=>{this._imageRequest=null,this._loaded=!0,d?this.fire(new Tc(d)):y&&(this.image=y instanceof HTMLImageElement?Wt.getImageData(y):y,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,s&&(this.coordinates=s),this._finishLoading())})}loaded(){return this._loaded}updateImage(s){return s.url?(this._imageRequest&&s.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=s.url,this.load(s.coordinates,this._loaded),this):this}setTexture(s){if(!(s.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new HB(this.map.painter.context,s.handle),this.width=s.dimensions[0],this.height=s.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new Bl("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(s){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof HB||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(s){if(this.coordinates=s,this._boundsArray=void 0,this._unsupportedCoords=!1,!s.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let c=s[0][1],d=s[0][1];for(const f of s)f[1]>d&&(d=f[1]),f[1]<c&&(c=f[1]);const y=(d+c)/2;if(y>Le?this.onNorthPole=!0:y<-Le&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const f=s.map(nt.fromLngLat);this.tileID=function(v){let B=1/0,I=1/0,R=-1/0,b=-1/0;for(const D of v)B=Math.min(B,D.x),I=Math.min(I,D.y),R=Math.max(R,D.x),b=Math.max(b,D.y);const E=Math.max(R-B,b-I),P=Math.max(0,Math.floor(-Math.log(E)/Math.LN2)),T=Math.pow(2,P);let F=Math.floor((B+R)/2*T);return F>1&&(F-=1),new Xo(P,F,Math.floor((I+b)/2*T))}(f),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new Bl("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(s){for(const H in this.tiles){const Z=this.tiles[H];Z.state!=="loaded"&&(Z.state="loaded",Z.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const c=S_(new Xo(0,0,0),this.map.transform.projection),d=[c.projection.project(this.coordinates[0][0],this.coordinates[0][1]),c.projection.project(this.coordinates[1][0],this.coordinates[1][1]),c.projection.project(this.coordinates[2][0],this.coordinates[2][1]),c.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(H){const Z=H[1].x-H[0].x,J=H[1].y-H[0].y,G=H[2].x-H[1].x,te=H[2].y-H[1].y,oe=H[3].x-H[2].x,pe=H[3].y-H[2].y,we=H[0].x-H[3].x,Ce=H[0].y-H[3].y,xe=Z*te-G*J,De=G*pe-oe*te,Ie=oe*Ce-we*pe,Oe=we*J-Z*Ce;return xe>0&&De>0&&Ie>0&&Oe>0||xe<0&&De<0&&Ie<0&&Oe<0}(d))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const y=S_(this.tileID,this.map.transform.projection),[f,v,B,I]=this.coordinates.map(H=>{const Z=y.projection.project(H[0],H[1]);return Qz(y,Z)._round()});this.perspectiveTransform=t6(f.x,f.y,v.x,v.y,B.x,B.y,I.x,I.y);const R=this._boundsArray=new wh;R.emplaceBack(f.x,f.y,0,0),R.emplaceBack(v.x,v.y,Gt,0),R.emplaceBack(I.x,I.y,0,Gt),R.emplaceBack(B.x,B.y,Gt,Gt),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=s.createVertexBuffer(R,eM.members),this.boundsSegments=Ki.simpleSegment(0,0,4,2);const b=[],E=[GB((P=this.coordinates)[0]),GB(P[1]),GB(P[2]),GB(P[3])];var P;const[T,F,D,V]=function(H){let Z=H[0][0],J=Z,G=H[0][1],te=G;for(let oe=1;oe<H.length;oe++)H[oe][0]<Z?Z=H[oe][0]:H[oe][0]>J&&(J=H[oe][0]),H[oe][1]<G?G=H[oe][1]:H[oe][1]>te&&(te=H[oe][1]);return[Z,G,J-Z,te-G]}(E);{const H=new wh,[Z,J,G,te]=function(et){let at=et[0].x,rt=at,_t=et[0].y,Tt=_t;for(let dt=1;dt<et.length;dt++)et[dt].x<at?at=et[dt].x:et[dt].x>rt&&(rt=et[dt].x),et[dt].y<_t?_t=et[dt].y:et[dt].y>Tt&&(Tt=et[dt].y);return[at,_t,rt-at,Tt-_t]}(d),oe=et=>[(et.x-Z)/G,(et.y-J)/te],[pe,we,Ce,xe]=d.map(oe),De=function(et,at,rt,_t,Tt,dt,Zt,Qt){const Lt=jB(0,0,1,0,1,1,0,1),Pt=jB(et,at,rt,_t,Tt,dt,Zt,Qt),yr=Qe.mat3.adjoint([],Pt);return Qe.mat3.multiply(Lt,Lt,yr)}(pe[0],pe[1],we[0],we[1],Ce[0],Ce[1],xe[0],xe[1]);this.elevatedGlobePerspectiveTransform=t6(pe[0],pe[1],we[0],we[1],Ce[0],Ce[1],xe[0],xe[1]);const Ie=(et,at)=>{b.push(et.lng);const rt=Math.round((et.lng-T)/D*Gt),_t=Math.round((et.lat-F)/V*Gt),Tt=oe(at),dt=Qe.vec3.transformMat3([],[Tt[0],Tt[1],1],De),Zt=Math.round(dt[0]/dt[2]*Gt),Qt=Math.round(dt[1]/dt[2]*Gt);H.emplaceBack(rt,_t,Zt,Qt)},Oe=d[3].x-d[0].x,Ke=d[3].y-d[0].y,Ze=d[2].x-d[1].x,Ye=d[2].y-d[1].y;for(let et=0;et<65;et++){const at=et/64,rt=[d[0].x+at*Oe,d[0].y+at*Ke],_t=[d[1].x+at*Ze,d[1].y+at*Ye],Tt=_t[0]-rt[0],dt=_t[1]-rt[1];for(let Zt=0;Zt<65;Zt++){const Qt=Zt/64,Lt={x:rt[0]+Tt*Qt,y:rt[1]+dt*Qt,z:0};Ie(c.projection.unproject(Lt.x,Lt.y),Lt)}}this.elevatedGlobeVertexBuffer=s.createVertexBuffer(H,eM.members)}{this.maxLongitudeTriangleSize=0;let H=[],Z=new gs;const J=(G,te,oe)=>{Z.emplaceBack(G,te,oe);const pe=b[G],we=b[te],Ce=b[oe],xe=Math.min(Math.min(pe,we),Ce),De=Math.max(Math.max(pe,we),Ce)-xe;De>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=De),H.push(xe+De/2)};for(let G=0;G<64;G++)for(let te=0;te<64;te++){const oe=65*G+te,pe=oe+1,we=oe+65,Ce=we+1;J(oe,we,pe),J(pe,we,Ce)}[H,Z]=function(G,te){const oe=Array.from({length:G.length},(Ce,xe)=>xe);oe.sort((Ce,xe)=>G[Ce]-G[xe]);const pe=[],we=new gs;for(let Ce=0;Ce<oe.length;Ce++){const xe=oe[Ce];pe.push(G[xe]);const De=3*xe,Ie=De+1;we.emplaceBack(te.uint16[De],te.uint16[Ie],te.uint16[Ie+1])}return[pe,we]}(H,Z),this.elevatedGlobeTrianglesCenterLongitudes=H,this.elevatedGlobeIndexBuffer=s.createIndexBuffer(Z)}this.elevatedGlobeSegments=Ki.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,D/Gt,0,V/Gt,0,0,F,T,0])}prepare(){const s=Object.keys(this.tiles).length!==0;if(this.tileID&&!s)return;const c=this.map.painter.context,d=c.gl;!this._dirty||this.texture instanceof HB||(this.texture?this.texture.update(this.image):(this.texture=new nM(c,this.image,d.RGBA8),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE)),this._dirty=!1),s&&this._prepareData(c)}loadTile(s,c){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={},c(null)):(s.state="errored",c(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(s){const c=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!c)return null;const d=this.elevatedGlobeTrianglesCenterLongitudes;let y=(f=s+180)+360*Math.round((d[0]-f)/360);var f;const v=new Ki,B=(E,P)=>{v.segments.push({vertexOffset:0,primitiveOffset:E,vertexLength:c.segments[0].vertexLength,primitiveLength:P,sortKey:void 0,vaos:{}})},I=.51*this.maxLongitudeTriangleSize;if(Math.abs(d[0]-y)<=I){const E=he(d,0,d.length,y+I);return E===d.length||B(E,ct(d,E+1,d.length,y+360-I)-E),v}y<d[0]&&(y+=360);const R=ct(d,0,d.length,y-I);if(R===d.length)return B(0,d.length),v;B(0,R-0);const b=he(d,R+1,d.length,y+I);return b!==d.length&&B(b,d.length-b),v}}const Yte=(Math.pow(256,2)-1)/16907520;class n6 extends Xs{constructor(s,c,d,y){super(s,{layout:$z||($z=new wi({visibility:new zt(ot.layout_raster.visibility)})),paint:e6||(e6=new wi({"raster-opacity":new zt(ot.paint_raster["raster-opacity"]),"raster-color":new $l(ot.paint_raster["raster-color"]),"raster-color-mix":new zt(ot.paint_raster["raster-color-mix"]),"raster-color-range":new zt(ot.paint_raster["raster-color-range"]),"raster-hue-rotate":new zt(ot.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new zt(ot.paint_raster["raster-brightness-min"]),"raster-brightness-max":new zt(ot.paint_raster["raster-brightness-max"]),"raster-saturation":new zt(ot.paint_raster["raster-saturation"]),"raster-contrast":new zt(ot.paint_raster["raster-contrast"]),"raster-resampling":new zt(ot.paint_raster["raster-resampling"]),"raster-fade-duration":new zt(ot.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new zt(ot.paint_raster["raster-emissive-strength"]),"raster-array-band":new zt(ot.paint_raster["raster-array-band"]),"raster-elevation":new zt(ot.paint_raster["raster-elevation"])}))},c,d,y),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(s){return!(s&&s._source instanceof r6&&(s._source.onNorthPole||s._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(s){s!=="raster-color"&&s!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(s){if(!this.hasColorMap()||!this._curRampRange)return;const c=this._transitionablePaint._values["raster-color"].value.expression,[d,y]=s||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(d)&&isNaN(y)||d===this._curRampRange[0]&&y===this._curRampRange[1]||(this.colorRamp=h_({expression:c,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:d,end:y}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[d,y])}}let i6,o6,s6,a6,l6;class c6 extends Xs{constructor(s,c,d,y){super(s,{layout:i6||(i6=new wi({visibility:new zt(ot["layout_raster-particle"].visibility)})),paint:o6||(o6=new wi({"raster-particle-array-band":new zt(ot["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new zt(ot["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new $l(ot["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new zt(ot["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new zt(ot["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new zt(ot["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new zt(ot["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new zt(ot["paint_raster-particle"]["raster-particle-elevation"])}))},c,d,y),this._updateColorRamp(),this.lastInvalidatedAt=Wt.now()}onRemove(s){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(s){return!1}_handleSpecialPaintPropertyUpdate(s){s!=="raster-particle-color"&&s!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),s==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const s=this._transitionablePaint._values["raster-particle-color"].value.expression,c=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=h_({expression:s,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:c}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=Wt.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class Jte extends Xs{constructor(s,c){super(s,{},c,null),this.implementation=s,s.slot&&(this.slot=s.slot)}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(s){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(s){this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)}onRemove(s){this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)}}function iM(A,s,c){const d=[0,0,1],y=Qe.quat.identity([]);return Qe.quat.rotateY(y,y,c?-Pr(A)+Math.PI:Pr(A)),Qe.quat.rotateX(y,y,-Pr(s)),Qe.vec3.transformQuat(d,d,y),Qe.vec3.normalize(d,d)}function u6(A,s){const c=KB(A.projection,A.zoom,A.width,A.height),d=function(f,v,B,I,R){const b=new Y(B.lng-180*Wd,B.lat),E=new Y(B.lng+180*Wd,B.lat),P=f.project(b.lng,b.lat),T=f.project(E.lng,E.lat),F=-Math.atan2(T.y-P.y,T.x-P.x),D=nt.fromLngLat(B);D.y=Er(D.y,-1+Wd,1-Wd);const V=D.toLngLat(),H=f.project(V.lng,V.lat),Z=nt.fromLngLat(V);Z.x+=Wd;const J=Z.toLngLat(),G=f.project(J.lng,J.lat),te=A6(G.x-H.x,G.y-H.y,F),oe=nt.fromLngLat(V);oe.y+=Wd;const pe=oe.toLngLat(),we=f.project(pe.lng,pe.lat),Ce=A6(we.x-H.x,we.y-H.y,F),xe=Math.abs(te.x)/Math.abs(Ce.y),De=Qe.mat4.identity([]);Qe.mat4.rotateZ(De,De,-F*(1-(R?0:I)));const Ie=Qe.mat4.identity([]);return Qe.mat4.scale(Ie,Ie,[1,1-(1-xe)*I,1]),Ie[4]=-Ce.x/Ce.y*I,Qe.mat4.rotateZ(Ie,Ie,F),Qe.mat4.multiply(Ie,De,Ie),Ie}(A.projection,0,A.center,c,s),y=h6(A);return Qe.mat4.scale(d,d,[y,y,1]),d}function h6(A){const s=A.projection,c=KB(A.projection,A.zoom,A.width,A.height),d=oM(s,A.center),y=oM(s,Y.convert(s.center));return Math.pow(2,d*c+(1-c)*y)}function KB(A,s,c,d,y=1/0){const f=A.range;if(!f)return 0;const v=Math.min(y,Math.max(c,d)),B=Math.log(v/1024)/Math.LN2;return Di(f[0]+B,f[1]+B,s)}const Wd=1/4e4;function oM(A,s){const c=Er(s.lat,-Le,Le),d=new Y(s.lng-180*Wd,c),y=new Y(s.lng+180*Wd,c),f=A.project(d.lng,c),v=A.project(y.lng,c),B=nt.fromLngLat(d),I=nt.fromLngLat(y),R=v.x-f.x,b=v.y-f.y,E=I.x-B.x,P=I.y-B.y,T=Math.sqrt((E*E+P*P)/(R*R+b*b));return Math.log(T)/Math.LN2}function A6(A,s,c){const d=Math.cos(c),y=Math.sin(c);return{x:A*d-s*y,y:A*y+s*d}}function d6(A,s,c){Qe.mat4.identity(A),Qe.mat4.rotateZ(A,A,Pr(s[2])),Qe.mat4.rotateX(A,A,Pr(s[0])),Qe.mat4.rotateY(A,A,Pr(s[1])),Qe.mat4.scale(A,A,c),Qe.mat4.multiply(A,A,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function WB(A,s,c,d,y,f,v,B){const I=[c[0]-s[0],c[1]-s[1],0],R=[d[0]-s[0],d[1]-s[1],0];if(Qe.vec3.length(I)<1e-12||Qe.vec3.length(R)<1e-12)return Qe.quat.identity(A);const b=Qe.vec3.cross([],I,R);Qe.vec3.normalize(b,b),Qe.vec3.subtract(R,d,s),I[2]=(f-y)*B,R[2]=(v-y)*B;const E=I;return Qe.vec3.cross(E,I,R),Qe.vec3.normalize(E,E),Qe.quat.rotationTo(A,b,E)}function sM(A,s,c=!1){const d=Nd(s.zoom),y=function(f,v,B){const I=v.worldSize,R=[f[12],f[13],f[14]],b=Fe(R[1]/I),E=Me(R[0]/I),P=Qe.mat4.identity([]),T=be(1,b)*I,F=be(1,0)*I*Xe(b,v.zoom),D=1/_P(I);let V=F*D;if(B){const G=KB(v.projection,v.zoom,v.width,v.height,1024);V=D*v.projection.pixelSpaceConversion(v.center.lat,I,G)}const H=Q(b,E);Qe.vec3.add(H,H,Qe.vec3.scale([],Qe.vec3.normalize([],H),T*V*R[2]));const Z=function(G){const te=[G[0],G[1],G[2]];let oe=[0,1,0];const pe=Qe.vec3.cross([],oe,te);return Qe.vec3.cross(oe,te,pe),Qe.vec3.squaredLength(oe)===0&&(oe=[0,1,0],Qe.vec3.cross(pe,te,oe)),Qe.vec3.normalize(pe,pe),Qe.vec3.normalize(oe,oe),Qe.vec3.normalize(te,te),[pe[0],pe[1],pe[2],0,oe[0],oe[1],oe[2],0,te[0],te[1],te[2],0,G[0],G[1],G[2],1]}(H);Qe.mat4.scale(P,P,[V,V,V*T]),Qe.mat4.translate(P,P,[-R[0],-R[1],-R[2]]);const J=Qe.mat4.multiply([],v.globeMatrix,Z);return Qe.mat4.multiply(J,J,P),Qe.mat4.multiply(J,J,f),J}(A,s,c);if(d>0){const f=function(v,B){const I=B.worldSize,R=be(1,0)*I*Xe(B.center.lat,B.zoom)/_P(I),b=be(1,B.center.lat)*I,E=Qe.mat4.identity([]);return Qe.mat4.rotateY(E,E,Pr(B.center.lng)),Qe.mat4.rotateX(E,E,Pr(B.center.lat)),Qe.mat4.translate(E,E,[0,0,a]),Qe.mat4.scale(E,E,[R,R,R*b]),Qe.mat4.translate(E,E,[B.point.x-.5*I,B.point.y-.5*I,0]),Qe.mat4.multiply(E,E,v),Qe.mat4.multiply(E,B.globeMatrix,E)}(A,s);return function(v,B,I){const R=(F,D,V)=>{const H=Qe.vec3.length(F),Z=Qe.vec3.length(D),J=SA(F,D,V);return Qe.vec3.scale(J,J,1/Qe.vec3.length(J)*_r(H,Z,V))},b=R([v[0],v[1],v[2]],[B[0],B[1],B[2]],I),E=R([v[4],v[5],v[6]],[B[4],B[5],B[6]],I),P=R([v[8],v[9],v[10]],[B[8],B[9],B[10]],I),T=SA([v[12],v[13],v[14]],[B[12],B[13],B[14]],I);return[b[0],b[1],b[2],0,E[0],E[1],E[2],0,P[0],P[1],P[2],0,T[0],T[1],T[2],1]}(y,f,d)}return y}function f6(A,s,c,d){const y=ti.projectAabbCorners(d,c);let f=Number.MAX_VALUE,v=-1;for(let R=0;R<y.length;++R){const b=y[R];b[0]=(.5*b[0]+.5)*s.width,b[1]=(.5-.5*b[1])*s.height,b[2]<f&&(v=R,f=b[2])}const B=R=>new Ot(y[R][0],y[R][1]);let I;switch(v){case 0:case 6:I=[B(1),B(5),B(4),B(7),B(3),B(2),B(1)];break;case 1:case 7:I=[B(0),B(4),B(5),B(6),B(2),B(3),B(0)];break;case 3:case 5:I=[B(1),B(0),B(4),B(7),B(6),B(2),B(1)];break;default:I=[B(1),B(5),B(6),B(7),B(3),B(0),B(1)]}if(Nt(A,I))return f}const $te=Bn([{name:"a_pos_3f",components:3,type:"Float32"}]),ere=Bn([{name:"a_color_3f",components:3,type:"Float32"}]),tre=Bn([{name:"a_color_4f",components:4,type:"Float32"}]),rre=Bn([{name:"a_uv_2f",components:2,type:"Float32"}]),nre=Bn([{name:"a_normal_3f",components:3,type:"Float32"}]),ire=Bn([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),ore=Bn([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]),p6={None:0,Model:1,Symbol:2,FillExtrusion:4,All:7};class qB{constructor(s,c,d,y){this.message=(s?`${s}: `:"")+d,y&&(this.identifier=y),c!=null&&c.__line__&&(this.line=c.__line__)}}function m6(A,s){const c=A.indexOf("://")===-1;try{return new URL(A,c&&s?"http://example.com":void 0),!0}catch{return!1}}class g6{constructor(s,c){this.feature=s,this.instancedDataOffset=c,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class y6{constructor(){this.instancedDataArray=new Op,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class aM{constructor(s){this.zoom=s.zoom,this.canonical=s.canonical,this.layers=s.layers,this.layerIds=this.layers.map(c=>c.fqid),this.projection=s.projection,this.index=s.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0}updateFootprints(s,c){}populate(s,c,d,y){this.tileToMeter=He(d);const f=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:v,id:B,index:I,sourceLayerIndex:R}of s){const b=B??(v.properties&&v.properties.hasOwnProperty("id")?v.properties.id:void 0),E=Ut(v,f);if(!this.layers[0]._featureFilter.filter(new Gi(this.zoom),E,d))continue;const P={id:b,sourceLayerIndex:R,index:I,geometry:f?E.geometry:Dt(v,d,y),properties:v.properties,type:v.type,patterns:{}},T=this.addFeature(P,P.geometry,E);T&&c.featureIndex.insert(v,P.geometry,I,R,this.index,this.instancesPerModel[T].instancedDataArray.length,Gt/32)}this.lookup=null}update(s,c,d,y){for(const f in this.instancesPerModel){const v=this.instancesPerModel[f];for(const B in s)v.idToFeaturesIndex.hasOwnProperty(B)&&(this.evaluate(v.features[v.idToFeaturesIndex[B]],s[B],v,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let s=!1;for(const c in this.instancesPerModel){const d=this.instancesPerModel[c];for(const y of d.features){const f=this.layers[0],v=y.feature,B=this.canonical,I=f.paint.get("model-rotation").evaluate(v,{},B),R=f.paint.get("model-scale").evaluate(v,{},B),b=f.paint.get("model-translation").evaluate(v,{},B);Qe.vec3.exactEquals(y.rotation,I)&&Qe.vec3.exactEquals(y.scale,R)&&Qe.vec3.exactEquals(y.translation,b)||(this.evaluate(y,y.featureStates,d,!0),s=!0)}}return s}updateReplacement(s,c,d,y){if(c.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=c.updateTime;const f=c.getReplacementRegionsForTile(s.toUnwrapped(),!0);if(RP(this.activeReplacements,f))return!1;this.activeReplacements=f;let v=!1;for(const B in this.instancesPerModel){const I=this.instancesPerModel[B],R=I.instancedDataArray;for(const b of I.features){const E=b.instancedDataOffset,P=b.instancedDataCount;for(let T=0;T<P;T++){const F=16*(T+E);let D=R.float32[F+0];const V=D>Gt;D=V?D-Gt:D;const H=Math.floor(D),Z=R.float32[F+1];let J=!1;for(const G of this.activeReplacements)if(!R5(G,d,p6.Model,y)&&!(G.min.x>H||H>G.max.x||G.min.y>Z||Z>G.max.y)&&(J=z5(U5(H,Z,s.canonical,G.footprintTileId.canonical),G.footprint),J))break;R.float32[F]=J?D+Gt:D,v=v||J!==V}}}return v}isEmpty(){for(const s in this.instancesPerModel)if(this.instancesPerModel[s].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(s){if(!this.uploaded)for(const c in this.instancesPerModel){const d=this.instancesPerModel[c];d.instancedDataArray.length<0||d.instancedDataArray.length===0||(d.instancedDataBuffer?d.instancedDataBuffer.updateData(d.instancedDataArray):d.instancedDataBuffer=s.createVertexBuffer(d.instancedDataArray,ire.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const c in this.instancesPerModel){const d=this.instancesPerModel[c];d.instancedDataArray.length!==0&&d.instancedDataBuffer&&d.instancedDataBuffer.destroy()}const s=this.layers[0].modelManager;if(s&&this.modelUris)for(const c of this.modelUris)s.removeModel(c,"")}addFeature(s,c,d){const y=this.layers[0],f=y.layout.get("model-id").evaluate(d,{},this.canonical);if(!f)return an(`modelId is not evaluated for layer ${y.id} and it is not going to get rendered.`),f;m6(f,!1)&&(this.modelUris.includes(f)||this.modelUris.push(f)),this.instancesPerModel[f]||(this.instancesPerModel[f]=new y6);const v=this.instancesPerModel[f],B=v.instancedDataArray,I=new g6(d,B.length);for(const R of c)for(const b of R){if(b.x<0||b.x>=Gt||b.y<0||b.y>=Gt)continue;const E=(this.lookupDim-1)/Gt,P=this.lookupDim*(b.y*E|0)+b.x*E|0;if(this.lookup){if(this.lookup[P]!==0)continue;this.lookup[P]=1}this.instanceCount++;const T=B.length;B.resize(T+1),v.instancesEvaluatedElevation.push(0),B.float32[16*T]=b.x,B.float32[16*T+1]=b.y}return I.instancedDataCount=v.instancedDataArray.length-I.instancedDataOffset,I.instancedDataCount>0&&(s.id&&(v.idToFeaturesIndex[s.id]=v.features.length),v.features.push(I),this.evaluate(I,{},v,!1)),f}getModelUris(){return this.modelUris}evaluate(s,c,d,y){const f=this.layers[0],v=s.feature,B=this.canonical,I=s.rotation=f.paint.get("model-rotation").evaluate(v,c,B),R=s.scale=f.paint.get("model-scale").evaluate(v,c,B),b=s.translation=f.paint.get("model-translation").evaluate(v,c,B),E=f.paint.get("model-color").evaluate(v,c,B);E.a=f.paint.get("model-color-mix-intensity").evaluate(v,c,B);const P=[];this.maxVerticalOffset<b[2]&&(this.maxVerticalOffset=b[2]),this.maxScale=Math.max(Math.max(this.maxScale,R[0]),Math.max(R[1],R[2])),d6(P,I,R);const T=Math.round(100*E.a)+E.b/1.05;for(let F=0;F<s.instancedDataCount;++F){const D=s.instancedDataOffset+F,V=16*D,H=d.instancedDataArray.float32;let Z=0;y&&(Z=H[V+6]-d.instancesEvaluatedElevation[D]);const J=0|H[V+1];H[V]=(0|H[V])+E.r/1.05,H[V+1]=J+E.g/1.05,H[V+2]=T,H[V+3]=1/(B.z>10?this.tileToMeter:He(B,J)),H[V+4]=b[0],H[V+5]=b[1],H[V+6]=b[2]+Z,H[V+7]=P[0],H[V+8]=P[1],H[V+9]=P[2],H[V+10]=P[4],H[V+11]=P[5],H[V+12]=P[6],H[V+13]=P[8],H[V+14]=P[9],H[V+15]=P[10],d.instancesEvaluatedElevation[D]=b[2]}}}let v6,_6;rr(aM,"ModelBucket",{omit:["layers"]}),rr(y6,"PerModelAttributes"),rr(g6,"ModelFeature");const jp=64,s0={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function x6(A,s,c,d,y,f,v,B,I,R=!1){const b=c.zoom,E=c.project(d),P=Xe(d.lat,b),T=1/P;Qe.mat4.identity(A),Qe.mat4.translate(A,A,[E.x+v[0]*T,E.y+v[1]*T,v[2]]);let F=1,D=1;const V=c.worldSize;if(R){if(c.projection.name==="mercator"){let G=0;c.elevation&&(G=c.elevation.getAtPointOrZero(new nt(E.x/V,E.y/V),0));const te=Qe.vec4.transformMat4([],[E.x,E.y,G,1],c.projMatrix)[3]/c.cameraToCenterDistance;F=te,D=te*Xe(c.center.lat,b)}else if(c.projection.name==="globe"){const G=sM(A,c),te=Qe.mat4.multiply([],c.projMatrix,G),oe=[0,0,0,1];Qe.vec4.transformMat4(oe,oe,te);const pe=oe[3]/c.cameraToCenterDistance,we=Nd(b),Ce=c.projection.pixelsPerMeter(d.lat,V)*Xe(d.lat,b),xe=c.projection.pixelsPerMeter(c.center.lat,V)*Xe(c.center.lat,b);F=pe/_r(Ce,Ve(c.center.lat),we),D=pe*P/Ce,F*=xe,D*=xe}}else F=T;Qe.mat4.scale(A,A,[F,F,D]);const H=[...A],Z=s.orientation,J=[];if(d6(J,[Z[0]+y[0],Z[1]+y[1],Z[2]+y[2]],f),Qe.mat4.multiply(A,H,J),B&&c.elevation){let G=0;const te=[];if(I&&c.elevation){G=function(we,Ce,xe,De,Ie){const Oe=Ce.elevation;if(!Oe)return 0;const Ke=ti.projectAabbCorners(xe,De),Ze=be(1,Ie.lat)*Ce.worldSize,Ye=function(yr,qt){const tr=[0,0,1],Tr=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const Nr of Tr){const Or=yr[Nr.corners[0]],Ur=yr[Nr.corners[1]],Xr=yr[Nr.corners[2]],Jr=[Ur[0]-Or[0],Ur[1]-Or[1],qt*(Ur[2]-Or[2])],Gn=Qe.vec3.cross(Jr,Jr,[Xr[0]-Or[0],Xr[1]-Or[1],qt*(Xr[2]-Or[2])]);Qe.vec3.normalize(Gn,Gn),Nr.dotProductWithUp=Qe.vec3.dot(Gn,tr)}return Tr.sort((Nr,Or)=>Nr.dotProductWithUp-Or.dotProductWithUp),Tr[0].corners}(Ke,Ze),et=Ke[Ye[0]],at=Ke[Ye[1]],rt=Ke[Ye[2]],_t=Ke[Ye[3]],Tt=Oe.getAtPointOrZero(new nt(et[0]/Ce.worldSize,et[1]/Ce.worldSize),0),dt=Oe.getAtPointOrZero(new nt(at[0]/Ce.worldSize,at[1]/Ce.worldSize),0),Zt=Oe.getAtPointOrZero(new nt(rt[0]/Ce.worldSize,rt[1]/Ce.worldSize),0),Qt=Oe.getAtPointOrZero(new nt(_t[0]/Ce.worldSize,_t[1]/Ce.worldSize),0),Lt=(Tt+Qt)/2,Pt=(dt+Zt)/2;return Lt>Pt?dt<Zt?WB(we,at,_t,et,dt,Qt,Tt,Ze):WB(we,rt,et,_t,Zt,Tt,Qt,Ze):Tt<Qt?WB(we,et,at,rt,Tt,dt,Zt,Ze):WB(we,_t,rt,at,Qt,Zt,dt,Ze),Math.max(Lt,Pt)}(te,c,s.aabb,A,d);const oe=Qe.mat4.fromQuat([],te),pe=Qe.mat4.multiply([],oe,J);Qe.mat4.multiply(A,H,pe)}else G=c.elevation.getAtPointOrZero(new nt(E.x/V,E.y/V),0);G!==0&&(A[14]+=G)}}function P_(A,s,c=!1){A.uploaded||(A.gfxTexture=new nM(s,A.image,c?s.gl.R8:s.gl.RGBA8,{useMipmap:A.sampler.minFilter>=s.gl.NEAREST_MIPMAP_NEAREST}),A.uploaded=!0,A.image=null)}function sre(A,s,c){A.indexBuffer=s.createIndexBuffer(A.indexArray,!1,!0),A.vertexBuffer=s.createVertexBuffer(A.vertexArray,$te.members,!1,!0),A.normalArray&&(A.normalBuffer=s.createVertexBuffer(A.normalArray,nre.members,!1,!0)),A.texcoordArray&&(A.texcoordBuffer=s.createVertexBuffer(A.texcoordArray,rre.members,!1,!0)),A.colorArray&&(A.colorBuffer=s.createVertexBuffer(A.colorArray,(A.colorArray.bytesPerElement===12?ere:tre).members,!1,!0)),A.featureArray&&(A.pbrBuffer=s.createVertexBuffer(A.featureArray,ore.members,!0)),A.segments=Ki.simpleSegment(0,0,A.vertexArray.length,A.indexArray.length);const d=A.material;d.pbrMetallicRoughness.baseColorTexture&&P_(d.pbrMetallicRoughness.baseColorTexture,s),d.pbrMetallicRoughness.metallicRoughnessTexture&&P_(d.pbrMetallicRoughness.metallicRoughnessTexture,s),d.normalTexture&&P_(d.normalTexture,s),d.occlusionTexture&&P_(d.occlusionTexture,s,c),d.emissionTexture&&P_(d.emissionTexture,s)}function lM(A,s,c){if(A.meshes)for(const d of A.meshes)sre(d,s,c);if(A.children)for(const d of A.children)lM(d,s,c)}function XB(A){if(A.meshes)for(const s of A.meshes)s.indexArray.destroy(),s.vertexArray.destroy(),s.colorArray&&s.colorArray.destroy(),s.normalArray&&s.normalArray.destroy(),s.texcoordArray&&s.texcoordArray.destroy(),s.featureArray&&s.featureArray.destroy();if(A.children)for(const s of A.children)XB(s)}function cM(A){if(A.meshes)for(const c of A.meshes)c.vertexBuffer&&(c.vertexBuffer.destroy(),c.indexBuffer.destroy(),c.normalBuffer&&c.normalBuffer.destroy(),c.texcoordBuffer&&c.texcoordBuffer.destroy(),c.colorBuffer&&c.colorBuffer.destroy(),c.pbrBuffer&&c.pbrBuffer.destroy(),c.segments.destroy(),c.material&&((s=c.material).pbrMetallicRoughness.baseColorTexture&&s.pbrMetallicRoughness.baseColorTexture.gfxTexture&&s.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),s.pbrMetallicRoughness.metallicRoughnessTexture&&s.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&s.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),s.normalTexture&&s.normalTexture.gfxTexture&&s.normalTexture.gfxTexture.destroy(),s.emissionTexture&&s.emissionTexture.gfxTexture&&s.emissionTexture.gfxTexture.destroy(),s.occlusionTexture&&s.occlusionTexture.gfxTexture&&s.occlusionTexture.gfxTexture.destroy()));var s;if(A.children)for(const c of A.children)cM(c)}class a0{constructor(s,c,d){this._demTile=s,this._dem=this._demTile.dem,this._scale=c,this._offset=d}static create(s,c,d){const y=d||s.findDEMTileFor(c);if(!y||!y.dem)return;const f=y.dem,v=y.tileID,B=1<<c.canonical.z-v.canonical.z;return new a0(y,f.dim/Gt/B,[(c.canonical.x/B-v.canonical.x)*f.dim,(c.canonical.y/B-v.canonical.y)*f.dim])}tileCoordToPixel(s,c){const d=c*this._scale+this._offset[1],y=Math.floor(s*this._scale+this._offset[0]),f=Math.floor(d);return new Ot(y,f)}getElevationAt(s,c,d,y){const f=s*this._scale+this._offset[0],v=c*this._scale+this._offset[1],B=Math.floor(f),I=Math.floor(v),R=this._dem;return y=!!y,d?_r(_r(R.get(B,I,y),R.get(B,I+1,y),v-I),_r(R.get(B+1,I,y),R.get(B+1,I+1,y),v-I),f-B):R.get(B,I,y)}getElevationAtPixel(s,c,d){return this._dem.get(s,c,!!d)}getMeterToDEM(s){return(1<<this._demTile.tileID.canonical.z)*be(1,s)*this._dem.stride}}const uM=new Float32Array(262144),Gp=new Uint8Array(262144);function b6(A){let s=0;if(A.meshes)for(const c of A.meshes)s=Math.max(s,c.aabb.max[2]);if(A.children)for(const c of A.children)s=Math.max(s,b6(c));return s}function w6(A,s,c){if(A.meshes)for(const d of A.meshes)d.aabb.min[0]!==1/0&&c.insert(s,d.aabb.min[0],d.aabb.min[1],d.aabb.max[0],d.aabb.max[1]);if(A.children)for(const d of A.children)w6(d,s,c)}const B6=["","wall","door","roof","window","lamp","logo"];class C6{constructor(s){this.node=s,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:s.id,geometry:[],properties:{height:b6(s)}},this.aabb=this._getLocalBounds()}_getLocalBounds(){if(!this.node.meshes)return new ti([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let s=0;const c=new ti([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const d of this.node.meshes)this.node.lightMeshIndex!==s&&(d.transformedAabb=ti.applyTransformFast(d.aabb,this.node.matrix),c.encapsulate(d.transformedAabb)),s++;this.aabb=c}return this.aabb}}class ZB{constructor(s,c,d,y,f,v){this.id=c,this.modelTraits|=s0.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,d&&(this.modelTraits|=s0.HasMapboxMeshFeatures),y&&(this.modelTraits|=s0.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=f,this.dirty=!0,this.needsUpload=!1,this.nodesInfo=[];for(const B of s)this.nodesInfo.push(new C6(B)),w6(B,v.featureIndexArray.length,v.grid),v.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,v.bucketLayerIDs.length-1,0)}updateFootprints(s,c){for(const d of this.getNodesInfo()){const y=d.node;y.footprint&&c.push({footprint:y.footprint,id:s})}}update(){console.log("Update 3D model bucket")}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(s){if(!this.needsUpload)return;const c=this.getNodesInfo();for(const d of c){const y=d.node;this.uploaded?this.updatePbrBuffer(y):lM(y,s,!0)}for(const d of c)XB(d.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(s){let c=!1;if(!s.meshes)return c;for(const d of s.meshes)d.pbrBuffer&&(d.pbrBuffer.updateData(d.featureArray),c=!0);return c}needsReEvaluation(s,c,d){const y=s.transform.projectionOptions,f=s.style.getBrightness(),v=this.brightness!==f;return!!(!this.uploaded||this.dirty||y.name!==this.projection.name||M_(d.paint.get("model-color").value,v)||M_(d.paint.get("model-color-mix-intensity").value,v)||M_(d.paint.get("model-roughness").value,v)||M_(d.paint.get("model-emissive-strength").value,v)||M_(d.paint.get("model-height-based-emissive-strength-multiplier").value,v))&&(this.projection=y,this.brightness=f,!0)}evaluateScale(s,c){if(s.transform.zoom===this.zoom)return;this.zoom=s.transform.zoom;const d=this.getNodesInfo(),y=this.id.canonical;for(const f of d){const v=f.feature;f.evaluatedScale=c.paint.get("model-scale").evaluate(v,{},y)}}evaluate(s){const c=this.getNodesInfo();for(const d of c){if(!d.node.meshes)continue;const y=d.feature,f=d.node.meshes&&d.node.meshes[0].featureData,v=d.evaluatedColor[2],B=d.evaluatedRMEA[2],I=this.id.canonical;if(d.hasTranslucentParts=!1,f){for(let R=0;R<B6.length;R++){const b=B6[R];b.length&&(y.properties.part=b);const E=s.paint.get("model-color").evaluate(y,{},I).toRenderColor(null),P=s.paint.get("model-color-mix-intensity").evaluate(y,{},I);d.evaluatedColor[R]=[E.r,E.g,E.b,P],d.evaluatedRMEA[R][0]=s.paint.get("model-roughness").evaluate(y,{},I),d.evaluatedRMEA[R][2]=s.paint.get("model-emissive-strength").evaluate(y,{},I),d.evaluatedRMEA[R][3]=E.a,d.emissionHeightBasedParams[R]=s.paint.get("model-height-based-emissive-strength-multiplier").evaluate(y,{},I),!d.hasTranslucentParts&&E.a<1&&(d.hasTranslucentParts=!0)}delete y.properties.part,lre(d,v!==d.evaluatedColor[2]||B!==d.evaluatedRMEA[2],this.modelTraits)}else d.evaluatedRMEA[0][2]=s.paint.get("model-emissive-strength").evaluate(y,{},I);d.evaluatedScale=s.paint.get("model-scale").evaluate(y,{},I),this.updatePbrBuffer(d.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(s,c,d,y){const f=s.findDEMTileFor(d);if(f&&(f.tileID.canonical!==this.terrainTile||c!==this.terrainExaggeration)){if(f.dem&&f.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=f.tileID.overscaledZ;const v=a0.create(s,d,f);if(!v)return;this.modelTraits&s0.HasMapboxMeshFeatures&&this.updateDEM(s,v,d,y);for(const B of this.getNodesInfo()){const I=B.node;if(!I.footprint||!I.footprint.vertices||!I.footprint.vertices.length)continue;const R=I.footprint.vertices;let b=v.getElevationAt(R[0].x,R[0].y,!0,!0);for(let E=1;E<R.length;E++)b=Math.min(b,v.getElevationAt(R[E].x,R[E].y,!0,!0));I.elevation=b}}this.terrainTile=f.tileID.canonical,this.terrainExaggeration=c}}updateDEM(s,c,d,y){let f=c._dem._modifiedForSources[y];if(f===void 0&&(c._dem._modifiedForSources[y]=[],f=c._dem._modifiedForSources[y]),f.includes(d.canonical))return;const v=c._dem.dim;f.push(d.canonical);let B=!1;for(const I of this.getNodesInfo()){const R=I.node;if(!R.footprint||!R.footprint.grid)continue;const b=R.footprint.grid,E=c.tileCoordToPixel(b.min.x,b.min.y),P=c.tileCoordToPixel(b.max.x,b.max.y),T=Math.min(Math.min(v-P.y,E.x),Math.min(E.y,v-P.x));if(T<0)continue;const F=Er(T,2,5);let D=Math.max(0,E.x-F),V=Math.max(0,E.y-F),H=Math.min(P.x+F,v-1),Z=Math.min(P.y+F,v-1);for(let oe=V;oe<=Z;++oe)for(let pe=D;pe<=H;++pe)Gp[oe*v+pe]=255;let J=0,G=0;for(let oe=0;oe<b.cellsY;++oe)for(let pe=0;pe<b.cellsX;++pe){if(!b.cells[oe*b.cellsX+pe])continue;const we=c.tileCoordToPixel(b.min.x+pe/b.xScale,b.min.y+oe/b.yScale),Ce=c.tileCoordToPixel(b.min.x+(pe+1)/b.xScale,b.min.y+(oe+1)/b.yScale);for(let xe=we.y;xe<=Math.min(Ce.y+1,v-1);++xe)for(let De=we.x;De<=Math.min(Ce.x+1,v-1);++De)Gp[xe*v+De]===255&&(Gp[xe*v+De]=0,J+=c.getElevationAtPixel(De,xe),G++)}const te=J/G;D=Math.max(1,E.x-F),V=Math.max(1,E.y-F),H=Math.min(P.x+F,v-2),Z=Math.min(P.y+F,v-2),B=!0;for(let oe=V;oe<=Z;++oe)for(let pe=D;pe<=H;++pe)Gp[oe*v+pe]===0&&(uM[oe*v+pe]=c._dem.set(pe,oe,te));for(let oe=1;oe<F;++oe){D=Math.max(1,E.x-oe),V=Math.max(1,E.y-oe),H=Math.min(P.x+oe,v-2),Z=Math.min(P.y+oe,v-2);for(let pe=V;pe<=Z;++pe)for(let we=D;we<=H;++we){const Ce=pe*v+we;if(Gp[Ce]===255){let xe=0,De=0,Ie=-1,Oe=-1;for(let Ke=-1;Ke<=1;++Ke)for(let Ze=-1;Ze<=1;++Ze){const Ye=(pe+Ke)*v+we+Ze;if(Gp[Ye]>=oe)continue;const et=uM[Ye],at=Math.abs(et);at>De&&(xe=et,De=at,Ie=Ze,Oe=Ke)}if(De>.1){const Ke=1-(oe+.5*Math.abs(Ie*Oe))/F;let Ze=c._dem.get(we,pe)+xe*Ke;const Ye=c._dem.get(we+Ie,pe+Oe),et=c._dem.get(we-Ie,pe-Oe,!0);(Ze-Ye)*(Ze-et)>0&&(Ze=(Ye+et)/2),uM[Ce]=c._dem.set(we,pe,Ze),Gp[Ce]=oe}}}}}B&&(c._demTile.needsDEMTextureUpload=!0,c._dem._timestamp=Wt.now())}getNodesInfo(){return this.nodesInfo}destroy(){const s=this.getNodesInfo();for(const c of s)XB(c.node),cM(c.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(s,c){if(c.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=c.updateTime;const d=c.getReplacementRegionsForTile(s.toUnwrapped()),y=this.getNodesInfo();for(let f=0;f<this.nodesInfo.length;f++){const v=y[f].node;y[f].hiddenByReplacement=!!v.footprint&&!d.find(B=>B.footprint===v.footprint)}}getHeightAtTileCoord(s,c){const d=this.getNodesInfo(),y=[],f=[0,0,0],v=Qe.mat4.identity([]);for(let B=0;B<this.nodesInfo.length;B++){const I=d[B],R=I.node.meshes[0],b=R.transformedAabb;if(s<b.min[0]||c<b.min[1]||s>b.max[0]||c>b.max[1])continue;if(I.node.hidden===!0)return{height:1/0,maxHeight:I.feature.properties.height,hidden:!1,verticalScale:I.evaluatedScale[2]};Qe.mat4.invert(v,I.node.matrix),f[0]=s,f[1]=c,Qe.vec3.transformMat4(f,f,v);const E=(f[0]-R.aabb.min[0])/(R.aabb.max[0]-R.aabb.min[0])*jp|0,P=Math.min(63,(f[1]-R.aabb.min[1])/(R.aabb.max[1]-R.aabb.min[1])*jp|0)*jp+Math.min(63,E),T=R.heightmap[P];if(!(T<0&&I.node.footprint))return I.hiddenByReplacement?void 0:{height:T,maxHeight:I.feature.properties.height,hidden:!1,verticalScale:I.evaluatedScale[2]};if(I.node.footprint.grid.query(new Ot(s,c),new Ot(s,c),y),y.length>0)return{height:void 0,maxHeight:I.feature.properties.height,hidden:I.hiddenByReplacement,verticalScale:I.evaluatedScale[2]}}}}function M_(A,s){return!A.isLightConstant&&s}function are(A,s,c,d,y,f,v,B){let I=(61440&s|(61440&s)>>4)>>8,R=(3840&s|(3840&s)>>4)>>4,b=240&s|(240&s)>>4;c[3]>0&&(I=_r(I,255*c[0],c[3]),R=_r(R,255*c[1],c[3]),b=_r(b,255*c[2],c[3]));const E=I<<8|R,P=b<<8|Math.floor(255*d[3]),T=function(oe){const pe=Er(oe,0,2);return Math.min(Math.round(.5*pe*255),255)}(d[2])<<8|15*d[0]<<4|15*d[1],F=Er(y[0],0,1),D=Er(y[1],0,1),V=Er(y[2],0,1),H=Er(y[3],0,1);let Z,J,G,te;if(F!==D&&v!==f&&D!==F){const oe=v-f;J=1/(oe*(D-F)),G=-(f+oe*F)/(oe*(D-F));const pe=Er(y[4],-1,1);te=Math.pow(10,pe),Z=255*V<<8|255*H}else Z=65535,J=0,G=1,te=1;if(A.emplaceBack(E,P,T,Z,J,G,te),B){const oe=B.length;B.clear();for(let pe=0;pe<oe;pe++)B.emplaceBack(E,P,T,Z,J,G,te)}}function lre(A,s,c){const d=A.node;let y=0;const f=c&s0.HasMeshoptCompression;for(const v of d.meshes){if(d.lights&&d.lightMeshIndex===y||!v.featureData)continue;v.featureArray=new Gg,v.featureArray.reserve(v.featureData.length);let B=s;for(const I of v.featureData){const R=f?65535&I:I>>16&65535,b=f?I>>16&65535:65535&I,E=(15&b)<8?15&b:0,P=A.evaluatedRMEA[E],T=A.evaluatedColor[E],F=A.emissionHeightBasedParams[E];let D;if(B&&E===2&&d.lights&&(D=new Gg,D.resize(10*d.lights.length)),are(v.featureArray,R,T,P,F,v.aabb.min[2],v.aabb.max[2],D),D&&B){B=!1;const V=d.meshes[d.lightMeshIndex];V.featureArray=D,V.featureArray._trim()}}v.featureArray._trim(),y++}}function S6(A,s,c,d){const y=1<<A.z;s.lat=Fe((d/Gt+A.y)/y),s.lng=Me((c/Gt+A.x)/y)}rr(ZB,"Tiled3dModelBucket",{omit:["layers"]}),rr(C6,"Tiled3dModelFeature");const cre={circle:class extends Xs{constructor(A,s,c,d){super(A,{layout:Rn||(Rn=new wi({"circle-sort-key":new mr(ot.layout_circle["circle-sort-key"]),visibility:new zt(ot.layout_circle.visibility)})),paint:Wi||(Wi=new wi({"circle-radius":new mr(ot.paint_circle["circle-radius"]),"circle-color":new mr(ot.paint_circle["circle-color"]),"circle-blur":new mr(ot.paint_circle["circle-blur"]),"circle-opacity":new mr(ot.paint_circle["circle-opacity"]),"circle-translate":new zt(ot.paint_circle["circle-translate"]),"circle-translate-anchor":new zt(ot.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new zt(ot.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new zt(ot.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new mr(ot.paint_circle["circle-stroke-width"]),"circle-stroke-color":new mr(ot.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new mr(ot.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new zt(ot.paint_circle["circle-emissive-strength"])}))},s,c,d)}createBucket(A){return new gr(A)}queryRadius(A){const s=A;return Bi("circle-radius",this,s)+Bi("circle-stroke-width",this,s)+zn(this.paint.get("circle-translate"))}queryIntersectsFeature(A,s,c,d,y,f,v,B){const I=Cn(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),f.angle,A.pixelToTileUnitsFactor),R=this.paint.get("circle-radius").evaluate(s,c)+this.paint.get("circle-stroke-width").evaluate(s,c);return i5(A,d,f,v,B,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",I,R)}getProgramIds(){return["circle"]}getDefaultProgramParams(A,s,c){const d=n5(this);return{config:new BA(this,{zoom:s,lut:c}),defines:d,overrideFog:!1}}},heatmap:class extends Xs{createBucket(A){return new s5(A)}constructor(A,s,c,d){super(A,{layout:a5||(a5=new wi({visibility:new zt(ot.layout_heatmap.visibility)})),paint:l5||(l5=new wi({"heatmap-radius":new mr(ot.paint_heatmap["heatmap-radius"]),"heatmap-weight":new mr(ot.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new zt(ot.paint_heatmap["heatmap-intensity"]),"heatmap-color":new $l(ot.paint_heatmap["heatmap-color"]),"heatmap-opacity":new zt(ot.paint_heatmap["heatmap-opacity"])}))},s,c,d),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(A){A==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=h_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(A){return Bi("heatmap-radius",this,A)}queryIntersectsFeature(A,s,c,d,y,f,v,B){const I=this.paint.get("heatmap-radius").evaluate(s,c);return i5(A,d,f,v,B,!0,!0,new Ot(0,0),I)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(A,s,c){return A==="heatmap"?{config:new BA(this,{zoom:s,lut:c}),overrideFog:!1}:{}}},hillshade:class extends Xs{constructor(A,s,c,d){super(A,{layout:c5||(c5=new wi({visibility:new zt(ot.layout_hillshade.visibility)})),paint:u5||(u5=new wi({"hillshade-illumination-direction":new zt(ot.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new zt(ot.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new zt(ot.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new zt(ot.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new zt(ot.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new zt(ot.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new zt(ot.paint_hillshade["hillshade-emissive-strength"])}))},s,c,d)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(A,s,c){return{overrideFog:!1}}},fill:class extends Xs{constructor(A,s,c,d){super(A,{layout:y5||(y5=new wi({"fill-sort-key":new mr(ot.layout_fill["fill-sort-key"]),visibility:new zt(ot.layout_fill.visibility)})),paint:v5||(v5=new wi({"fill-antialias":new zt(ot.paint_fill["fill-antialias"]),"fill-opacity":new mr(ot.paint_fill["fill-opacity"]),"fill-color":new mr(ot.paint_fill["fill-color"]),"fill-outline-color":new mr(ot.paint_fill["fill-outline-color"]),"fill-translate":new zt(ot.paint_fill["fill-translate"]),"fill-translate-anchor":new zt(ot.paint_fill["fill-translate-anchor"]),"fill-pattern":new mr(ot.paint_fill["fill-pattern"]),"fill-emissive-strength":new zt(ot.paint_fill["fill-emissive-strength"]),"fill-z-offset":new mr(ot.paint_fill["fill-z-offset"])}))},s,c,d)}getProgramIds(){const A=this.paint.get("fill-pattern"),s=A&&A.constantOr(1),c=[s?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&c.push(s&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),c}getDefaultProgramParams(A,s,c){return{config:new BA(this,{zoom:s,lut:c}),overrideFog:!1}}recalculate(A,s){super.recalculate(A,s);const c=this.paint._values["fill-outline-color"];c.value.kind==="constant"&&c.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(A){return new EP(A)}queryRadius(){return zn(this.paint.get("fill-translate"))}queryIntersectsFeature(A,s,c,d,y,f){return!A.queryGeometry.isAboveHorizon&&Br(Vr(A.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),f.angle,A.pixelToTileUnitsFactor),d)}isTileClipped(){return!0}is3D(){return this.paint.get("fill-z-offset").constantOr(1)!==0}},"fill-extrusion":class extends Xs{constructor(A,s,c,d){super(A,{layout:ez||(ez=new wi({visibility:new zt(ot["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new zt(ot["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:tz||(tz=new wi({"fill-extrusion-opacity":new zt(ot["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new mr(ot["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new zt(ot["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new zt(ot["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new mr(ot["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new mr(ot["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new mr(ot["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new zt(ot["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new zt(ot["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new zt(ot["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new zt(ot["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new zt(ot["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new zt(ot["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new zt(ot["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new zt(ot["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new mr(ot["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new mr(ot["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new zt(ot["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new zt(ot["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new zt(ot["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new zt(ot["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new mr(ot["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new mr(ot["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new zt(ot["paint_fill-extrusion"]["fill-extrusion-cast-shadows"])}))},s,c,d),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(A){return new EB(A)}queryRadius(){return zn(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(A,s,c,d,y,f,v,B,I){const R=Cn(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),f.angle,A.pixelToTileUnitsFactor),b=this.paint.get("fill-extrusion-height").evaluate(s,c),E=this.paint.get("fill-extrusion-base").evaluate(s,c),P=[0,0],T=B&&f.elevation,F=f.elevation?f.elevation.exaggeration():1,D=A.tile.getBucket(this);if(T&&D instanceof EB){const G=D.centroidVertexArray,te=I+1;te<G.length&&(P[0]=G.geta_centroid_pos0(te),P[1]=G.geta_centroid_pos1(te))}if(P[0]===0&&P[1]===1)return!1;f.projection.name==="globe"&&(d=$5([d],[new Ot(0,0),new Ot(Gt,Gt)],A.tileID.canonical).map(G=>G.polygon).flat());const V=T?B:null,[H,Z]=function(G,te,oe,pe,we,Ce,xe,De,Ie,Oe,Ke){return G.projection.name==="globe"?function(Ze,Ye,et,at,rt,_t,Tt,dt,Zt,Qt,Lt){const Pt=[],yr=[],qt=Ze.projection.upVectorScale(Lt,Ze.center.lat,Ze.worldSize).metersToTile,tr=[0,0,0,1],Tr=[0,0,0,1],Nr=(Ur,Xr,Jr,Gn)=>{Ur[0]=Xr,Ur[1]=Jr,Ur[2]=Gn,Ur[3]=1},Or=J5();et>0&&(et+=Or),at+=Or;for(const Ur of Ye){const Xr=[],Jr=[];for(const Gn of Ur){const kn=Gn.x+rt.x,Fr=Gn.y+rt.y,En=Ze.projection.projectTilePoint(kn,Fr,Lt),Mn=Ze.projection.upVector(Lt,Gn.x,Gn.y);let Ai=et,eo=at;if(Tt){const mo=nz(kn,Fr,et,at,Tt,dt,Zt,Qt);Ai+=mo.base,eo+=mo.top}et!==0?Nr(tr,En.x+Mn[0]*qt*Ai,En.y+Mn[1]*qt*Ai,En.z+Mn[2]*qt*Ai):Nr(tr,En.x,En.y,En.z),Nr(Tr,En.x+Mn[0]*qt*eo,En.y+Mn[1]*qt*eo,En.z+Mn[2]*qt*eo),Qe.vec3.transformMat4(tr,tr,_t),Qe.vec3.transformMat4(Tr,Tr,_t),Xr.push(new Hp(tr[0],tr[1],tr[2])),Jr.push(new Hp(Tr[0],Tr[1],Tr[2]))}Pt.push(Xr),yr.push(Jr)}return[Pt,yr]}(G,te,oe,pe,we,Ce,xe,De,Ie,Oe,Ke):xe?function(Ze,Ye,et,at,rt,_t,Tt,dt,Zt){const Qt=[],Lt=[],Pt=[0,0,0,1];for(const yr of Ze){const qt=[],tr=[];for(const Tr of yr){const Nr=Tr.x+at.x,Or=Tr.y+at.y,Ur=nz(Nr,Or,Ye,et,_t,Tt,dt,Zt);Pt[0]=Nr,Pt[1]=Or,Pt[2]=Ur.base,Pt[3]=1,Qe.vec4.transformMat4(Pt,Pt,rt),Pt[3]=Math.max(Pt[3],1e-5);const Xr=new Hp(Pt[0]/Pt[3],Pt[1]/Pt[3],Pt[2]/Pt[3]);Pt[0]=Nr,Pt[1]=Or,Pt[2]=Ur.top,Pt[3]=1,Qe.vec4.transformMat4(Pt,Pt,rt),Pt[3]=Math.max(Pt[3],1e-5);const Jr=new Hp(Pt[0]/Pt[3],Pt[1]/Pt[3],Pt[2]/Pt[3]);qt.push(Xr),tr.push(Jr)}Qt.push(qt),Lt.push(tr)}return[Qt,Lt]}(te,oe,pe,we,Ce,xe,De,Ie,Oe):function(Ze,Ye,et,at,rt){const _t=[],Tt=[],dt=rt[8]*Ye,Zt=rt[9]*Ye,Qt=rt[10]*Ye,Lt=rt[11]*Ye,Pt=rt[8]*et,yr=rt[9]*et,qt=rt[10]*et,tr=rt[11]*et;for(const Tr of Ze){const Nr=[],Or=[];for(const Ur of Tr){const Xr=Ur.x+at.x,Jr=Ur.y+at.y,Gn=rt[0]*Xr+rt[4]*Jr+rt[12],kn=rt[1]*Xr+rt[5]*Jr+rt[13],Fr=rt[2]*Xr+rt[6]*Jr+rt[14],En=rt[3]*Xr+rt[7]*Jr+rt[15],Mn=Gn+dt,Ai=kn+Zt,eo=Fr+Qt,mo=Math.max(En+Lt,1e-5),to=Gn+Pt,Ni=kn+yr,ls=Fr+qt,Co=Math.max(En+tr,1e-5);Nr.push(new Hp(Mn/mo,Ai/mo,eo/mo)),Or.push(new Hp(to/Co,Ni/Co,ls/Co))}_t.push(Nr),Tt.push(Or)}return[_t,Tt]}(te,oe,pe,we,Ce)}(f,d,E,b,R,v,V,P,F,f.center.lat,A.tileID.canonical),J=A.queryGeometry;return function(G,te,oe){let pe=1/0;Br(oe,te)&&(pe=rz(oe,te[0]));for(let we=0;we<te.length;we++){const Ce=te[we],xe=G[we];for(let De=0;De<Ce.length-1;De++){const Ie=Ce[De],Oe=[Ie,Ce[De+1],xe[De+1],xe[De],Ie];Nt(oe,Oe)&&(pe=Math.min(pe,rz(oe,Oe)))}}return pe!==1/0&&pe}(H,Z,J.isPointQuery()?J.screenBounds:J.screenGeometry)}},line:class extends Xs{constructor(A,s,c,d){const y=dz();super(A,y,s,c,d),y.layout&&(this.layout=new Fd(y.layout)),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(A){if(A==="line-gradient"){const s=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=s._styleExpression&&s._styleExpression.expression instanceof xp,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(A,s){super.recalculate(A,s),this.paint._values["line-floorwidth"]=(()=>{if(__)return __;const c=dz();return __=new Ate(c.paint.properties["line-width"].specification),__.useIntegerZoom=!0,__})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,A)}createBucket(A){return new OP(A)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(A,s,c){const d=hz(this);return{config:new BA(this,{zoom:s,lut:c}),defines:d,overrideFog:!1}}queryRadius(A){const s=A,c=fz(Bi("line-width",this,s),Bi("line-gap-width",this,s)),d=Bi("line-offset",this,s);return c/2+Math.abs(d)+zn(this.paint.get("line-translate"))}queryIntersectsFeature(A,s,c,d,y,f){if(A.queryGeometry.isAboveHorizon)return!1;const v=Vr(A.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),f.angle,A.pixelToTileUnitsFactor),B=A.pixelToTileUnitsFactor/2*fz(this.paint.get("line-width").evaluate(s,c),this.paint.get("line-gap-width").evaluate(s,c)),I=this.paint.get("line-offset").evaluate(s,c);return I&&(d=function(R,b){const E=[],P=new Ot(0,0);for(let T=0;T<R.length;T++){const F=R[T],D=[];for(let V=0;V<F.length;V++){const H=F[V],Z=F[V+1],J=V===0?P:H.sub(F[V-1])._unit()._perp(),G=V===F.length-1?P:Z.sub(H)._unit()._perp(),te=J._add(G)._unit();te._mult(1/(te.x*G.x+te.y*G.y)),D.push(te._mult(b)._add(H))}E.push(D)}return E}(d,I*A.pixelToTileUnitsFactor)),function(R,b,E){for(let P=0;P<b.length;P++){const T=b[P];if(R.length>=3){for(let F=0;F<T.length;F++)if(hi(R,T[F]))return!0}if(sr(R,T,E))return!0}return!1}(v,d,B)}isTileClipped(){return!0}isDraped(A){const s=this.layout.get("line-z-offset");return s.isConstant()&&!s.constantOr(0)}},symbol:QB,background:class extends Xs{constructor(A,s,c,d){super(A,{layout:Yz||(Yz=new wi({visibility:new zt(ot.layout_background.visibility)})),paint:Jz||(Jz=new wi({"background-pitch-alignment":new zt(ot.paint_background["background-pitch-alignment"]),"background-color":new zt(ot.paint_background["background-color"]),"background-pattern":new zt(ot.paint_background["background-pattern"]),"background-opacity":new zt(ot.paint_background["background-opacity"]),"background-emissive-strength":new zt(ot.paint_background["background-emissive-strength"])}))},s,c,d)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(A,s,c){return{overrideFog:!1}}is3D(){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:n6,"raster-particle":c6,sky:class extends Xs{constructor(A,s,c,d){super(A,{layout:s6||(s6=new wi({visibility:new zt(ot.layout_sky.visibility)})),paint:a6||(a6=new wi({"sky-type":new zt(ot.paint_sky["sky-type"]),"sky-atmosphere-sun":new zt(ot.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new zt(ot.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new zt(ot.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new zt(ot.paint_sky["sky-gradient-radius"]),"sky-gradient":new $l(ot.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new zt(ot.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new zt(ot.paint_sky["sky-atmosphere-color"]),"sky-opacity":new zt(ot.paint_sky["sky-opacity"])}))},s,c,d),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(A){A==="sky-gradient"?this._updateColorRamp():A!=="sky-atmosphere-sun"&&A!=="sky-atmosphere-halo-color"&&A!=="sky-atmosphere-color"&&A!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=h_({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(A){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const s=A.style.light.properties.get("position");return this._lightPosition.azimuthal!==s.azimuthal||this._lightPosition.polar!==s.polar}return!1}getCenter(A,s){if(this.paint.get("sky-type")==="atmosphere"){const d=this.paint.get("sky-atmosphere-sun"),y=!d,f=A.style.light,v=f.properties.get("position");return y&&f.properties.get("anchor")==="viewport"&&an("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),y?iM(v.azimuthal,90-v.polar,s):iM(d[0],90-d[1],s)}const c=this.paint.get("sky-gradient-center");return iM(c[0],90-c[1],s)}isSky(){return!0}markSkyboxValid(A){this._skyboxInvalidated=!1,this._lightPosition=A.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const A=this.paint.get("sky-type");return A==="atmosphere"?["skyboxCapture","skybox"]:A==="gradient"?["skyboxGradient"]:null}},slot:class extends Xs{constructor(A,s,c,d){super(A,{paint:l6||(l6=new wi({}))},s,null)}},model:class extends Xs{constructor(A,s,c,d){super(A,{layout:v6||(v6=new wi({visibility:new zt(ot.layout_model.visibility),"model-id":new mr(ot.layout_model["model-id"])})),paint:_6||(_6=new wi({"model-opacity":new zt(ot.paint_model["model-opacity"]),"model-rotation":new mr(ot.paint_model["model-rotation"]),"model-scale":new mr(ot.paint_model["model-scale"]),"model-translation":new mr(ot.paint_model["model-translation"]),"model-color":new mr(ot.paint_model["model-color"]),"model-color-mix-intensity":new mr(ot.paint_model["model-color-mix-intensity"]),"model-type":new zt(ot.paint_model["model-type"]),"model-cast-shadows":new zt(ot.paint_model["model-cast-shadows"]),"model-receive-shadows":new zt(ot.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new zt(ot.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new mr(ot.paint_model["model-emissive-strength"]),"model-roughness":new mr(ot.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new mr(ot.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new zt(ot.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new zt(ot.paint_model["model-front-cutoff"])}))},s,c,d),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(A){return new aM(A)}getProgramIds(){return["model"]}is3D(){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(A){return A instanceof ZB?Gt-1:0}queryIntersectsFeature(A,s,c,d,y,f){if(!this.modelManager)return!1;const v=this.modelManager,B=A.tile.getBucket(this);if(!(B&&B instanceof aM))return!1;const I=B;for(const R in I.instancesPerModel){const b=I.instancesPerModel[R],E=s.id!==void 0?s.id:s.properties&&s.properties.hasOwnProperty("id")?s.properties.id:void 0;if(b.idToFeaturesIndex.hasOwnProperty(E)){const P=b.features[b.idToFeaturesIndex[E]],T=v.getModel(R,this.scope);if(!T)return!1;let F=Qe.mat4.create();const D=new Y(0,0),V=I.canonical;let H=Number.MAX_VALUE;for(let Z=0;Z<P.instancedDataCount;++Z){const J=16*(P.instancedDataOffset+Z),G=b.instancedDataArray.float32,te=[G[J+4],G[J+5],G[J+6]];S6(V,D,G[J],0|G[J+1]),x6(F,T,f,D,P.rotation,P.scale,te,!1,!1,!1),f.projection.name==="globe"&&(F=sM(F,f));const oe=Qe.mat4.multiply([],f.projMatrix,F),pe=A.queryGeometry,we=f6(pe.isPointQuery()?pe.screenBounds:pe.screenGeometry,f,oe,T.aabb);we!=null&&(H=Math.min(we,H))}return H!==Number.MAX_VALUE&&H}}return!1}_handleOverridablePaintPropertyUpdate(A,s,c){return!(!this.layout||s.isDataDriven()||c.isDataDriven()||A!=="model-color"&&A!=="model-color-mix-intensity"&&A!=="model-rotation"&&A!=="model-scale"&&A!=="model-translation"&&A!=="model-emissive-strength")}_isPropertyZoomDependent(A){const s=this._transitionablePaint._values[A];return s!=null&&s.value!=null&&s.value.expression!=null&&s.value.expression instanceof Rc}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}queryIntersectsMatchingFeature(A,s,c,d){const y=A.tile,f=y.getBucket(this);let v=null,B=Number.MAX_VALUE;if(!(f&&f instanceof ZB))return{queryFeature:v,intersectionZ:B};const I=f.getNodesInfo()[s];if(I.hiddenByReplacement||!I.node.meshes||!c.filter(new Gi(y.tileID.overscaledZ),I.feature,y.tileID.canonical))return{queryFeature:v,intersectionZ:B};const R=I.node,b=d.calculatePosMatrix(y.tileID.toUnwrapped(),d.worldSize),E=I.evaluatedScale;let P=0;d.elevation&&R.elevation&&(P=R.elevation*d.elevation.exaggeration()),Qe.mat4.translate(b,b,[(R.anchor?R.anchor[0]:0)*(E[0]-1),(R.anchor?R.anchor[1]:0)*(E[1]-1),P]),Qe.mat4.scale(b,b,E),Qe.mat4.multiply(b,b,R.matrix);const T=A.queryGeometry,F=T.isPointQuery()?T.screenBounds:T.screenGeometry,D=function(H){const Z=Qe.mat4.multiply([],b,H.matrix),J=Qe.mat4.multiply(Z,d.expandedFarZProjMatrix,Z);for(let G=0;G<H.meshes.length;++G){const te=H.meshes[G];if(G===H.lightMeshIndex)continue;const oe=f6(F,d,J,te.aabb);oe!=null&&(B=Math.min(oe,B))}if(H.children)for(const G of H.children)D(G)};if(D(R),B===Number.MAX_VALUE)return{queryFeature:v,intersectionZ:B};const V=new Y(0,0);return S6(y.tileID.canonical,V,I.node.anchor[0],I.node.anchor[1]),v={type:"Feature",geometry:{type:"Point",coordinates:[V.lng,V.lat]},properties:I.feature.properties,id:I.feature.id,state:{},layer:this.serialize()},{queryFeature:v,intersectionZ:B}}},clip:class extends Xs{constructor(A,s,c,d){super(A,{layout:_5||(_5=new wi({"clip-layer-types":new zt(ot.layout_clip["clip-layer-types"]),"clip-layer-scope":new zt(ot.layout_clip["clip-layer-scope"])})),paint:x5||(x5=new wi({}))},s,c,d)}recalculate(A,s){super.recalculate(A,s)}createBucket(A){return new b5(A)}isTileClipped(){return!0}is3D(){return!0}}};class ure{constructor(s){this._callback=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class hre{constructor(){this.tasks={},this.taskQueue=[],Wl(["process"],this),this.invoker=new ure(this.process),this.nextId=0}add(s,c){const d=this.nextId++,y=function({type:f,isSymbolTile:v,zoom:B}){return B=B||0,f==="message"?0:f!=="maybePrepare"||v?f!=="parseTile"||v?f==="parseTile"&&v?300-B:f==="maybePrepare"&&v?400-B:500:200-B:100-B}(c);if(y===0){try{s()}finally{}return null}return this.tasks[d]={fn:s,metadata:c,priority:y,id:d},this.taskQueue.push(d),this.invoker.trigger(),{cancel:()=>{delete this.tasks[d]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(d=>!!this.tasks[d]),!this.taskQueue.length)return;const s=this.pick();if(s===null)return;const c=this.tasks[s];if(delete this.tasks[s],this.taskQueue.length&&this.invoker.trigger(),!c)return;c.fn()}finally{}}pick(){let s=null,c=1/0;for(let y=0;y<this.taskQueue.length;y++){const f=this.tasks[this.taskQueue[y]];f.priority<c&&(c=f.priority,s=y)}if(s===null)return null;const d=this.taskQueue[s];return this.taskQueue.splice(s,1),d}remove(){this.invoker.remove()}}class E6{constructor(s,c,d){this.target=s,this.parent=c,this.mapId=d,this.callbacks={},this.cancelCallbacks={},Wl(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new hre}send(s,c,d,y,f=!1,v){const B=Math.round(1e18*Math.random()).toString(36).substring(0,10);d&&(d.metadata=v,this.callbacks[B]=d);const I=new Set;return this.target.postMessage({id:B,type:s,hasCallback:!!d,targetMapId:y,mustQueue:f,sourceMapId:this.mapId,data:Oa(c,I)},I),{cancel:()=>{d&&delete this.callbacks[B],this.target.postMessage({id:B,type:"<cancel>",targetMapId:y,sourceMapId:this.mapId})}}}receive(s){const c=s.data,d=c.id;if(d&&(!c.targetMapId||this.mapId===c.targetMapId))if(c.type==="<cancel>"){const y=this.cancelCallbacks[d];delete this.cancelCallbacks[d],y&&y.cancel()}else if(c.mustQueue||ns()){const y=this.callbacks[d],f=this.scheduler.add(()=>this.processTask(d,c),y&&y.metadata||{type:"message"});f&&(this.cancelCallbacks[d]=f)}else this.processTask(d,c)}processTask(s,c){if(delete this.cancelCallbacks[s],c.type==="<response>"){const d=this.callbacks[s];delete this.callbacks[s],d&&(c.error?d(vA(c.error)):d(null,vA(c.data)))}else{const d=new Set,y=c.hasCallback?(v,B)=>{this.target.postMessage({id:s,type:"<response>",sourceMapId:this.mapId,error:v?Oa(v):null,data:Oa(B,d)},d)}:v=>{},f=vA(c.data);if(this.parent[c.type])this.parent[c.type](c.sourceMapId,f,y);else if(this.parent.getWorkerSource){const v=c.type.split(".");this.parent.getWorkerSource(c.sourceMapId,v[0],f.source,f.scope)[v[1]](f,y)}else y(new Error(`Could not find function ${c.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}class l0{constructor(s,c){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=wc();const d=this.workerPool.acquire(this.id);for(let y=0;y<d.length;y++){const f=new l0.Actor(d[y],c,this.id);f.name=`Worker ${y}`,this.actors.push(f)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(s,c,d){Go(this.actors,(y,f)=>{y.send(s,c,f)},d=d||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(s=>{s.remove()}),this.actors=[],this.workerPool.release(this.id)}}l0.Actor=E6;class T6{constructor(s){this.size=s,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(s,c){const d=this.toIdx(s,c);return{min:this.minimums[d],max:this.maximums[d]}}isLeaf(s,c){return this.leaves[this.toIdx(s,c)]}toIdx(s,c){return c*this.size+s}}function I6(A,s,c,d){let y=0,f=Number.MAX_VALUE;for(let v=0;v<3;v++)if(Math.abs(d[v])<1e-15){if(c[v]<A[v]||c[v]>s[v])return null}else{const B=1/d[v];let I=(A[v]-c[v])*B,R=(s[v]-c[v])*B;if(I>R){const b=I;I=R,R=b}if(I>y&&(y=I),R<f&&(f=R),y>f)return null}return y}function F6(A,s,c,d,y,f,v,B,I,R,b){const E=d-A,P=y-s,T=f-c,F=v-A,D=B-s,V=I-c,H=b[1]*V-b[2]*D,Z=b[2]*F-b[0]*V,J=b[0]*D-b[1]*F,G=E*H+P*Z+T*J;if(Math.abs(G)<1e-15)return null;const te=1/G,oe=R[0]-A,pe=R[1]-s,we=R[2]-c,Ce=(oe*H+pe*Z+we*J)*te;if(Ce<0||Ce>1)return null;const xe=pe*T-we*P,De=we*E-oe*T,Ie=oe*P-pe*E,Oe=(b[0]*xe+b[1]*De+b[2]*Ie)*te;return Oe<0||Ce+Oe>1?null:(F*xe+D*De+V*Ie)*te}function P6(A,s,c){return(A-s)/(c-s)}function M6(A,s,c,d,y,f,v,B,I){const R=1<<c,b=f-d,E=v-y,P=(A+1)/R*b+d,T=(s+0)/R*E+y,F=(s+1)/R*E+y;B[0]=(A+0)/R*b+d,B[1]=T,I[0]=P,I[1]=F}class R6{constructor(s){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=s,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const c=function(f){const v=Math.ceil(Math.log2(f.dim/8)),B=[];let I=Math.ceil(Math.pow(2,v));const R=1/I,b=(T,F,D,V,H)=>{const Z=V?1:0,J=(T+1)*D-Z,G=F*D,te=(F+1)*D-Z;H[0]=T*D,H[1]=G,H[2]=J,H[3]=te};let E=new T6(I);const P=[];for(let T=0;T<I*I;T++){b(T%I,Math.floor(T/I),R,!1,P);const F=qd(P[0],P[1],f),D=qd(P[2],P[1],f),V=qd(P[2],P[3],f),H=qd(P[0],P[3],f);E.minimums.push(Math.min(F,D,V,H)),E.maximums.push(Math.max(F,D,V,H)),E.leaves.push(1)}for(B.push(E),I/=2;I>=1;I/=2){const T=B[B.length-1];E=new T6(I);for(let F=0;F<I*I;F++){b(F%I,Math.floor(F/I),2,!0,P);const D=T.getElevation(P[0],P[1]),V=T.getElevation(P[2],P[1]),H=T.getElevation(P[2],P[3]),Z=T.getElevation(P[0],P[3]),J=T.isLeaf(P[0],P[1]),G=T.isLeaf(P[2],P[1]),te=T.isLeaf(P[2],P[3]),oe=T.isLeaf(P[0],P[3]),pe=Math.min(D.min,V.min,H.min,Z.min),we=Math.max(D.max,V.max,H.max,Z.max),Ce=J&&G&&te&&oe;E.maximums.push(we),E.minimums.push(pe),E.leaves.push(we-pe<=5&&Ce?1:0)}B.push(E)}return B}(this.dem),d=c.length-1,y=c[d];this._addNode(y.minimums[0],y.maximums[0],y.leaves[0]),this._construct(c,0,0,d,0)}raycastRoot(s,c,d,y,f,v,B=1){return I6([s,c,-100],[d,y,this.maximums[0]*B],f,v)}raycast(s,c,d,y,f,v,B=1){if(!this.nodeCount)return null;const I=this.raycastRoot(s,c,d,y,f,v,B);if(I==null)return null;const R=[],b=[],E=[],P=[],T=[{idx:0,t:I,nodex:0,nodey:0,depth:0}];for(;T.length>0;){const{idx:F,t:D,nodex:V,nodey:H,depth:Z}=T.pop();if(this.leaves[F]){M6(V,H,Z,s,c,d,y,E,P);const G=1<<Z,te=(V+0)/G,oe=(V+1)/G,pe=(H+0)/G,we=(H+1)/G,Ce=qd(te,pe,this.dem)*B,xe=qd(oe,pe,this.dem)*B,De=qd(oe,we,this.dem)*B,Ie=qd(te,we,this.dem)*B,Oe=F6(E[0],E[1],Ce,P[0],E[1],xe,P[0],P[1],De,f,v),Ke=F6(P[0],P[1],De,E[0],P[1],Ie,E[0],E[1],Ce,f,v),Ze=Math.min(Oe!==null?Oe:Number.MAX_VALUE,Ke!==null?Ke:Number.MAX_VALUE);if(Ze!==Number.MAX_VALUE)return Ze;{const Ye=Qe.vec3.scaleAndAdd([],f,v,D);if(k6(Ce,xe,Ie,De,P6(Ye[0],E[0],P[0]),P6(Ye[1],E[1],P[1]))>=Ye[2])return D}continue}let J=0;for(let G=0;G<this._siblingOffset.length;G++){M6((V<<1)+this._siblingOffset[G][0],(H<<1)+this._siblingOffset[G][1],Z+1,s,c,d,y,E,P),E[2]=-100,P[2]=this.maximums[this.childOffsets[F]+G]*B;const te=I6(E,P,f,v);if(te!=null){const oe=te;R[G]=oe;let pe=!1;for(let we=0;we<J&&!pe;we++)oe>=R[b[we]]&&(b.splice(we,0,G),pe=!0);pe||(b[J]=G),J++}}for(let G=0;G<J;G++){const te=b[G];T.push({idx:this.childOffsets[F]+te,t:R[te],nodex:(V<<1)+this._siblingOffset[te][0],nodey:(H<<1)+this._siblingOffset[te][1],depth:Z+1})}}return null}_addNode(s,c,d){return this.minimums.push(s),this.maximums.push(c),this.leaves.push(d),this.childOffsets.push(0),this.nodeCount++}_construct(s,c,d,y,f){if(s[y].isLeaf(c,d)===1)return;this.childOffsets[f]||(this.childOffsets[f]=this.nodeCount);const v=y-1,B=s[v];let I=0,R=0;for(let b=0;b<this._siblingOffset.length;b++){const E=2*c+this._siblingOffset[b][0],P=2*d+this._siblingOffset[b][1],T=B.getElevation(E,P),F=B.isLeaf(E,P),D=this._addNode(T.min,T.max,F);F&&(I|=1<<b),R||(R=D)}for(let b=0;b<this._siblingOffset.length;b++)I&1<<b||this._construct(s,2*c+this._siblingOffset[b][0],2*d+this._siblingOffset[b][1],v,R+b)}}function k6(A,s,c,d,y,f){return _r(_r(A,c,f),_r(s,d,f),y)}function qd(A,s,c){const d=c.dim,y=Er(A*d-.5,0,d-1),f=Er(s*d-.5,0,d-1),v=Math.floor(y),B=Math.floor(f),I=Math.min(v+1,d-1),R=Math.min(B+1,d-1);return k6(c.get(v,B),c.get(I,B),c.get(v,R),c.get(I,R),y-v,f-B)}const Are={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function dre(A,s,c){return(256*A*256+256*s+c)/10-1e4}function fre(A,s,c){return 256*A+s+c/256-32768}class YB{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(s,c,d,y=!1){if(this.uid=s,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(d&&d!=="mapbox"&&d!=="terrarium")return void an(`"${d}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=c.height;const f=this.dim=c.height-2,v=new Uint32Array(c.data.buffer);if(this.pixels=new Uint8Array(c.data.buffer),this.floatView=new Float32Array(c.data.buffer),this.borderReady=y,this._modifiedForSources={},!y){for(let I=0;I<f;I++)v[this._idx(-1,I)]=v[this._idx(0,I)],v[this._idx(f,I)]=v[this._idx(f-1,I)],v[this._idx(I,-1)]=v[this._idx(I,0)],v[this._idx(I,f)]=v[this._idx(I,f-1)];v[this._idx(-1,-1)]=v[this._idx(0,0)],v[this._idx(f,-1)]=v[this._idx(f-1,0)],v[this._idx(-1,f)]=v[this._idx(0,f-1)],v[this._idx(f,f)]=v[this._idx(f-1,f-1)]}const B=d==="terrarium"?fre:dre;for(let I=0;I<v.length;++I){const R=4*I;this.floatView[I]=B(this.pixels[R],this.pixels[R+1],this.pixels[R+2])}this._timestamp=Wt.now()}_buildQuadTree(){this._tree=new R6(this)}get(s,c,d=!1){d&&(s=Er(s,-1,this.dim),c=Er(c,-1,this.dim));const y=this._idx(s,c);return this.floatView[y]}set(s,c,d){const y=this._idx(s,c),f=this.floatView[y];return this.floatView[y]=d,d-f}static getUnpackVector(s){return Are[s]}_idx(s,c){if(s<-1||s>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(s+1)}static pack(s,c){const d=[0,0,0,0],y=YB.getUnpackVector(c);let f=Math.floor((s+y[3])/y[2]);return d[2]=f%256,f=Math.floor(f/256),d[1]=f%256,f=Math.floor(f/256),d[0]=f,d}getPixels(){return new d5({width:this.stride,height:this.stride},this.pixels)}backfillBorder(s,c,d){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let y=c*this.dim,f=c*this.dim+this.dim,v=d*this.dim,B=d*this.dim+this.dim;switch(c){case-1:y=f-1;break;case 1:f=y+1}switch(d){case-1:v=B-1;break;case 1:B=v+1}const I=-c*this.dim,R=-d*this.dim;for(let b=v;b<B;b++)for(let E=y;E<f;E++){const P=4*this._idx(E,b),T=4*this._idx(E+I,b+R);this.pixels[P+0]=s.pixels[T+0],this.pixels[P+1]=s.pixels[T+1],this.pixels[P+2]=s.pixels[T+2],this.pixels[P+3]=s.pixels[T+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function pre(A,s,c){A===1?s.header_length=c.readFixed32():A===2?s.x=c.readVarint():A===3?s.y=c.readVarint():A===4?s.z=c.readVarint():A===5&&s.layers.push(function(d,y){return d.readFields(_re,{version:0,name:"",units:"",tilesize:0,buffer:0,pixel_format:0,data_index:[]},y)}(c,c.readVarint()+c.pos))}function mre(A,s,c){A===1?(s.delta_filter=function(d,y){return d.readFields(gre,{block_size:0},y)}(c,c.readVarint()+c.pos),s.filter="delta_filter"):A===2?(c.readVarint(),s.filter="zigzag_filter"):A===3?(c.readVarint(),s.filter="bitshuffle_filter"):A===4&&(c.readVarint(),s.filter="byteshuffle_filter")}function gre(A,s,c){A===1&&(s.block_size=c.readVarint())}function yre(A,s,c){A===1?(c.readVarint(),s.codec="gzip_data"):A===2?(c.readVarint(),s.codec="jpeg_image"):A===3?(c.readVarint(),s.codec="webp_image"):A===4&&(c.readVarint(),s.codec="png_image")}function vre(A,s,c){A===1?s.first_byte=c.readFixed64():A===2?s.last_byte=c.readFixed64():A===3?s.filters.push(function(d,y){return d.readFields(mre,{},y)}(c,c.readVarint()+c.pos)):A===4?s.codec=function(d,y){return d.readFields(yre,{},y)}(c,c.readVarint()+c.pos):A===5?s.deprecated_offset=c.readFloat():A===6?s.deprecated_scale=c.readFloat():A===7?s.bands.push(c.readString()):A===8?s.offset=c.readDouble():A===9&&(s.scale=c.readDouble())}function _re(A,s,c){A===1?s.version=c.readVarint():A===2?s.name=c.readString():A===3?s.units=c.readString():A===4?s.tilesize=c.readVarint():A===5?s.buffer=c.readVarint():A===6?s.pixel_format=c.readVarint():A===7&&s.data_index.push(function(d,y){return d.readFields(vre,{first_byte:0,last_byte:0,filters:[],codec:null,offset:0,scale:0,deprecated_offset:0,deprecated_scale:0,bands:[]},y)}(c,c.readVarint()+c.pos))}function xre(A,s,c){if(A===2)(function(d,y,f){d.readFields(bre,f,y)})(c,c.readVarint()+c.pos,s);else if(A===3)throw new Error("Not implemented")}function bre(A,s,c){if(A===1){let d=0;const y=c.readVarint()+c.pos;for(;c.pos<y;)s[d++]=c.readVarint()}}rr(YB,"DEMData"),rr(R6,"DemMinMaxQuadTree",{omit:["dem"]});class wre{constructor(s){this.capacity=s,this.cache=new Map}get(s){if(!this.cache.has(s))return;const c=this.cache.get(s);return this.cache.delete(s),this.cache.set(s,c),c}put(s,c){this.cache.has(s)?this.cache.delete(s):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(s,c)}}function Bre(A,s){if(s.length!==4)throw new Error(`Expected data of dimension 4 but got ${s.length}.`);let c=s[3];for(let d=2;d>=1;d--){const y=d===1?1:0,f=d===2?1:0;for(let v=0;v<s[0];v++){const B=s[1]*v;for(let I=y;I<s[1];I++){const R=s[2]*(I+B);for(let b=f;b<s[2];b++){const E=s[3]*(b+R);for(let P=0;P<s[3];P++){const T=E+P;A[T]+=A[T-c]}}}}c*=s[d]}return A}function Cre(A){for(let s=0,c=A.length;s<c;s++)A[s]=A[s]>>>1^-(1&A[s]);return A}function Sre(A,s){switch(s){case"uint32":return A;case"uint16":for(let c=0;c<A.length;c+=2){const d=A[c],y=A[c+1];A[c]=(240&d)>>4|(61440&d)>>8|(240&y)<<4|61440&y,A[c+1]=15&d|(3840&d)>>4|(15&y)<<8|(3840&y)<<4}return A;case"uint8":for(let c=0;c<A.length;c+=4){const d=A[c],y=A[c+1],f=A[c+2],v=A[c+3];A[c+0]=(192&d)>>6|(192&y)>>4|(192&f)>>2|192&v,A[c+1]=(48&d)>>4|(48&y)>>2|48&f|(48&v)<<2,A[c+2]=(12&d)>>2|12&y|(12&f)<<2|(12&v)<<4,A[c+3]=3&d|(3&y)<<2|(3&f)<<4|(3&v)<<6}return A;default:throw new Error(`Invalid pixel format, "${s}"`)}}var nc=Uint8Array,R_=Uint16Array,Ere=Int32Array,D6=new nc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),L6=new nc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Tre=new nc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),O6=function(A,s){for(var c=new R_(31),d=0;d<31;++d)c[d]=s+=1<<A[d-1];var y=new Ere(c[30]);for(d=1;d<30;++d)for(var f=c[d];f<c[d+1];++f)y[f]=f-c[d]<<5|d;return{b:c,r:y}},U6=O6(D6,2),z6=U6.b,Ire=U6.r;z6[28]=258,Ire[258]=28;for(var Fre=O6(L6,0).b,V6=new R_(32768),po=0;po<32768;++po){var c0=(43690&po)>>1|(21845&po)<<1;V6[po]=((65280&(c0=(61680&(c0=(52428&c0)>>2|(13107&c0)<<2))>>4|(3855&c0)<<4))>>8|(255&c0)<<8)>>1}var k_=function(A,s,c){for(var d=A.length,y=0,f=new R_(s);y<d;++y)A[y]&&++f[A[y]-1];var v,B=new R_(s);for(y=1;y<s;++y)B[y]=B[y-1]+f[y-1]<<1;v=new R_(1<<s);var I=15-s;for(y=0;y<d;++y)if(A[y])for(var R=y<<4|A[y],b=s-A[y],E=B[A[y]-1]++<<b,P=E|(1<<b)-1;E<=P;++E)v[V6[E]>>I]=R;return v},D_=new nc(288);for(po=0;po<144;++po)D_[po]=8;for(po=144;po<256;++po)D_[po]=9;for(po=256;po<280;++po)D_[po]=7;for(po=280;po<288;++po)D_[po]=8;var N6=new nc(32);for(po=0;po<32;++po)N6[po]=5;var Pre=k_(D_,9),Mre=k_(N6,5),hM=function(A){for(var s=A[0],c=1;c<A.length;++c)A[c]>s&&(s=A[c]);return s},Vu=function(A,s,c){var d=s/8|0;return(A[d]|A[d+1]<<8)>>(7&s)&c},AM=function(A,s){var c=s/8|0;return(A[c]|A[c+1]<<8|A[c+2]<<16)>>(7&s)},Rre=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Nu=function(A,s,c){var d=new Error(s||Rre[A]);if(d.code=A,Error.captureStackTrace&&Error.captureStackTrace(d,Nu),!c)throw d;return d},kre=new nc(0),Dre=typeof TextDecoder<"u"&&new TextDecoder;try{Dre.decode(kre,{stream:!0})}catch{}const Lre={gzip_data:"gzip"};class Uc extends Error{constructor(s){super(s),this.name="MRTError"}}const Ore={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},Q6={uint32:1,uint16:2,uint8:4},Ure={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let dM;class fM{constructor(s=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=s}getLayer(s){const c=this.layers[s];if(!c)throw new Uc(`Layer '${s}' not found`);return c}getHeaderLength(s){const c=new Uint8Array(s),d=new DataView(s);if(c[0]!==13)throw new Uc("File is not a valid MRT.");return d.getUint32(1,!0)}parseHeader(s){const c=new Uint8Array(s),d=this.getHeaderLength(s);if(c.length<d)throw new Uc(`Expected header with length >= ${d} but got buffer of length ${c.length}`);const y=function(f,v){return f.readFields(pre,{header_length:0,x:0,y:0,z:0,layers:[]},void 0)}(new dM(c.subarray(0,d)));if(!isNaN(this.x)&&(this.x!==y.x||this.y!==y.y||this.z!==y.z))throw new Uc(`Invalid attempt to parse header ${y.z}/${y.x}/${y.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=y.x,this.y=y.y,this.z=y.z;for(const f of y.layers)this.layers[f.name]=new zre(f,{cacheSize:this._cacheSize});return this}createDecodingTask(s){const c=[],d=this.getLayer(s.layerName);for(let y of s.blockIndices){const f=d.dataIndex[y],v=f.first_byte-s.firstByte,B=f.last_byte-s.firstByte;if(d._blocksInProgress.has(y))continue;const I={layerName:d.name,firstByte:v,lastByte:B,pixelFormat:d.pixelFormat,blockIndex:y,blockShape:[f.bands.length].concat(d.bandShape),buffer:d.buffer,codec:f.codec.codec,filters:f.filters.map(R=>R.filter)};d._blocksInProgress.add(y),c.push(I)}return new H6(c,()=>{c.forEach(y=>d._blocksInProgress.delete(y.blockIndex))},(y,f)=>{if(c.forEach(v=>d._blocksInProgress.delete(v.blockIndex)),y)throw y;f.forEach(v=>{this.getLayer(v.layerName).processDecodedData(v)})})}}class zre{constructor({version:s,name:c,units:d,tilesize:y,pixel_format:f,buffer:v,data_index:B},I){if(this.version=s,this.version!==1)throw new Uc(`Cannot parse raster layer encoded with MRT version ${s}`);this.name=c,this.units=d,this.tileSize=y,this.buffer=v,this.pixelFormat=Ore[f],this.dataIndex=B,this.bandShape=[y+2*v,y+2*v,Q6[this.pixelFormat]],this._decodedBlocks=new wre(I?I.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return Q6[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:s})=>s).flat()}processDecodedData(s){const c=s.blockIndex.toString();this._decodedBlocks.get(c)||this._decodedBlocks.put(c,s.data)}getBlockForBand(s){let c=0;switch(typeof s){case"string":for(const[d,y]of this.dataIndex.entries()){for(const[f,v]of y.bands.entries())if(v===s)return{bandIndex:c+f,blockIndex:d,blockBandIndex:f};c+=y.bands.length}break;case"number":for(const[d,y]of this.dataIndex.entries()){if(s>=c&&s<c+y.bands.length)return{bandIndex:s,blockIndex:d,blockBandIndex:s-c};c+=y.bands.length}break;default:throw new Uc(`Invalid band \`${JSON.stringify(s)}\`. Expected string or integer.`)}throw new Uc(`Band not found: ${JSON.stringify(s)}`)}getDataRange(s){let c=1/0,d=-1/0;const y=[],f=new Set;for(const v of s){const{blockIndex:B}=this.getBlockForBand(v);if(B<0)throw new Uc(`Invalid band: ${JSON.stringify(v)}`);const I=this.dataIndex[B];y.includes(B)||y.push(B),f.add(B),c=Math.min(c,I.first_byte),d=Math.max(d,I.last_byte)}if(f.size>this.cacheSize)throw new Uc(`Number of blocks to decode (${f.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:c,lastByte:d,blockIndices:y}}hasBand(s){const{blockIndex:c}=this.getBlockForBand(s);return c>=0}hasDataForBand(s){const{blockIndex:c}=this.getBlockForBand(s);return c>=0&&!!this._decodedBlocks.get(c.toString())}getBandView(s){const{blockIndex:c,blockBandIndex:d}=this.getBlockForBand(s),y=this._decodedBlocks.get(c.toString());if(!y)throw new Uc(`Data for band ${JSON.stringify(s)} of layer "${this.name}" not decoded.`);const f=this.dataIndex[c],v=this.bandShape.reduce((R,b)=>R*b,1),B=d*v,I=y.subarray(B,B+v);return{data:I,bytes:new Uint8Array(I.buffer).subarray(I.byteOffset,I.byteOffset+I.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:f.offset!==0?f.offset:f.deprecated_offset,scale:f.scale!==0?f.scale:f.deprecated_scale}}}fM.setPbf=function(A){dM=A};class H6{constructor(s,c,d){this.tasks=s,this._onCancel=c,this._onComplete=d,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(s,c){this._finalized||(this._onComplete(s,c),this._finalized=!0)}}fM.performDecoding=function(A,s){const c=new Uint8Array(A);return Promise.all(s.tasks.map(d=>{const{layerName:y,firstByte:f,lastByte:v,pixelFormat:B,blockShape:I,blockIndex:R,filters:b,codec:E}=d,P=c.subarray(f,v+1),T=new Uint32Array(I[0]*I[1]*I[2]);let F;if(E!=="gzip_data")throw new Uc(`Unhandled codec: ${E}`);return F=function(D,V){if(!globalThis.DecompressionStream&&V==="gzip_data")return Promise.resolve(((G=function(pe){pe[0]==31&&pe[1]==139&&pe[2]==8||Nu(6,"invalid gzip data");var we=pe[3],Ce=10;4&we&&(Ce+=2+(pe[10]|pe[11]<<8));for(var xe=(we>>3&1)+(we>>4&1);xe>0;xe-=!pe[Ce++]);return Ce+(2&we)}(J=D))+8>J.length&&Nu(6,"invalid gzip data"),function(pe,we,Ce,xe){var De=pe.length;if(!De||we.f&&!we.l)return Ce||new nc(0);var Ie=!Ce,Oe=Ie||we.i!=2,Ke=we.i;Ie&&(Ce=new nc(3*De));var Ze,Ye,et=function(Xd){var qp=Ce.length;if(Xd>qp){var Q_=new nc(Math.max(2*qp,Xd));Q_.set(Ce),Ce=Q_}},at=we.f||0,rt=we.p||0,_t=we.b||0,Tt=we.l,dt=we.d,Zt=we.m,Qt=we.n,Lt=8*De;do{if(!Tt){at=Vu(pe,rt,1);var Pt=Vu(pe,rt+1,3);if(rt+=3,!Pt){var yr=pe[(Fr=4+((rt+7)/8|0))-4]|pe[Fr-3]<<8,qt=Fr+yr;if(qt>De){Ke&&Nu(0);break}Oe&&et(_t+yr),Ce.set(pe.subarray(Fr,qt),_t),we.b=_t+=yr,we.p=rt=8*qt,we.f=at;continue}if(Pt==1)Tt=Pre,dt=Mre,Zt=9,Qt=5;else if(Pt==2){var tr=Vu(pe,rt,31)+257,Tr=Vu(pe,rt+10,15)+4,Nr=tr+Vu(pe,rt+5,31)+1;rt+=14;for(var Or=new nc(Nr),Ur=new nc(19),Xr=0;Xr<Tr;++Xr)Ur[Tre[Xr]]=Vu(pe,rt+3*Xr,7);rt+=3*Tr;var Jr=hM(Ur),Gn=(1<<Jr)-1,kn=k_(Ur,Jr);for(Xr=0;Xr<Nr;){var Fr,En=kn[Vu(pe,rt,Gn)];if(rt+=15&En,(Fr=En>>4)<16)Or[Xr++]=Fr;else{var Mn=0,Ai=0;for(Fr==16?(Ai=3+Vu(pe,rt,3),rt+=2,Mn=Or[Xr-1]):Fr==17?(Ai=3+Vu(pe,rt,7),rt+=3):Fr==18&&(Ai=11+Vu(pe,rt,127),rt+=7);Ai--;)Or[Xr++]=Mn}}var eo=Or.subarray(0,tr),mo=Or.subarray(tr);Zt=hM(eo),Qt=hM(mo),Tt=k_(eo,Zt),dt=k_(mo,Qt)}else Nu(1);if(rt>Lt){Ke&&Nu(0);break}}Oe&&et(_t+131072);for(var to=(1<<Zt)-1,Ni=(1<<Qt)-1,ls=rt;;ls=rt){var Co=(Mn=Tt[AM(pe,rt)&to])>>4;if((rt+=15&Mn)>Lt){Ke&&Nu(0);break}if(Mn||Nu(2),Co<256)Ce[_t++]=Co;else{if(Co==256){ls=rt,Tt=null;break}var Is=Co-254;Co>264&&(Is=Vu(pe,rt,(1<<(Hu=D6[Xr=Co-257]))-1)+z6[Xr],rt+=Hu);var ri=dt[AM(pe,rt)&Ni],cl=ri>>4;if(ri||Nu(3),rt+=15&ri,mo=Fre[cl],cl>3){var Hu=L6[cl];mo+=AM(pe,rt)&(1<<Hu)-1,rt+=Hu}if(rt>Lt){Ke&&Nu(0);break}Oe&&et(_t+131072);var zc=_t+Is;if(_t<mo){var Vc=0-mo,Wp=Math.min(mo,zc);for(Vc+_t<0&&Nu(3);_t<Wp;++_t)Ce[_t]=(void 0)[Vc+_t]}for(;_t<zc;++_t)Ce[_t]=Ce[_t-mo]}}we.l=Tt,we.p=ls,we.b=_t,we.f=at,Tt&&(at=1,we.m=Zt,we.d=dt,we.n=Qt)}while(!at);return _t!=Ce.length&&Ie?(Ze=Ce,((Ye=_t)==null||Ye>Ze.length)&&(Ye=Ze.length),new nc(Ze.subarray(0,Ye))):Ce.subarray(0,_t)}(J.subarray(G,-8),{i:2},new nc(((H=J)[(Z=H.length)-4]|H[Z-3]<<8|H[Z-2]<<16|H[Z-1]<<24)>>>0))));var H,Z,J,G;const te=Lre[V];if(!te)throw new Error(`Unhandled codec: ${V}`);const oe=new globalThis.DecompressionStream(te);return new Response(new Blob([D]).stream().pipeThrough(oe)).arrayBuffer().then(pe=>new Uint8Array(pe))}(P,E).then(D=>(function(V,H){V.readFields(xre,H)}(new dM(D),T),new Ure[B](T.buffer))),F.then(D=>{for(let V=b.length-1;V>=0;V--)switch(b[V]){case"delta_filter":Bre(D,I);break;case"zigzag_filter":Cre(D);break;case"bitshuffle_filter":Sre(D,B);break;default:throw new Uc(`Unhandled filter "${b[V]}"`)}return{layerName:y,blockIndex:R,data:D}}).catch(D=>{throw D})}))},rr(H6,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]});var L_={workerUrl:"",workerClass:null,workerParams:void 0};const pM="mapboxgl_preloaded_worker_pool";class O_{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<O_.workerCount;)this.workers.push(L_.workerClass!=null?new L_.workerClass:new self.Worker(L_.workerUrl,L_.workerParams));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.workers&&this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[pM]}numActive(){return Object.keys(this.active).length}}let U_;function JB(){return U_||(U_=new O_),U_}O_.workerCount=2;let z_,mM,Qu,u0,gM,h0=null;function j6(){return ns()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:mM||Ne.DRACO_URL}function G6(){if(ns()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(u0)return u0;const A=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return u0=WebAssembly.validate(A)?Ne.MESHOPT_SIMD_URL:Ne.MESHOPT_URL,u0}const $B={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Vre={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},V_={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function K6(A,s,c){const d=c.json.bufferViews.length,y=c.buffers.length;s.bufferView=d,c.json.bufferViews[d]={buffer:y,byteLength:A.byteLength},c.buffers[y]=A}const yM="KHR_draco_mesh_compression";function Nre(A,s){const c=A.extensions&&A.extensions[yM];if(!c)return;const d=new Qu.Decoder,y=Z6(s,c.bufferView),f=new Qu.Mesh;if(!d.DecodeArrayToMesh(y,y.byteLength,f))throw new Error("Failed to decode Draco mesh");const v=s.json.accessors[A.indices],B=$B[v.componentType],I=v.count*B.BYTES_PER_ELEMENT,R=Qu._malloc(I);B===Uint16Array?d.GetTrianglesUInt16Array(f,I,R):d.GetTrianglesUInt32Array(f,I,R),K6(Qu.memory.buffer.slice(R,R+I),v,s),Qu._free(R);for(const b of Object.keys(c.attributes)){const E=d.GetAttributeByUniqueId(f,c.attributes[b]),P=s.json.accessors[A.attributes[b]],T=Vre[P.componentType],F=P.count*V_[P.type]*$B[P.componentType].BYTES_PER_ELEMENT,D=Qu._malloc(F);d.GetAttributeDataArrayForAllPoints(f,E,Qu[T],F,D),K6(Qu.memory.buffer.slice(D,D+F),P,s),Qu._free(D)}d.destroy(),f.destroy(),delete A.extensions[yM]}const eC="EXT_meshopt_compression";function Qre(A,s){if(!A.extensions||!A.extensions[eC])return;const c=A.extensions[eC],d=new Uint8Array(s.buffers[c.buffer],c.byteOffset||0,c.byteLength||0),y=new Uint8Array(c.count*c.byteStride);gM.decodeGltfBuffer(y,c.count,c.byteStride,d,c.mode,c.filter),A.buffer=s.buffers.length,A.byteOffset=0,s.buffers[A.buffer]=y.buffer,delete A.extensions[eC]}const W6=1179937895,q6=new TextDecoder("utf8");function X6(A,s){return new URL(A,s).href}function Hre(A,s,c,d){return fetch(X6(A.uri,d)).then(y=>y.arrayBuffer()).then(y=>{s.buffers[c]=y})}function Z6(A,s){const c=A.json.bufferViews[s];return new Uint8Array(A.buffers[c.buffer],c.byteOffset||0,c.byteLength)}function jre(A,s,c,d){if(A.uri){const y=X6(A.uri,d);return fetch(y).then(f=>f.blob()).then(f=>createImageBitmap(f)).then(f=>{s.images[c]=f})}if(A.bufferView!==void 0){const y=Z6(s,A.bufferView),f=new Blob([y],{type:A.mimeType});return createImageBitmap(f).then(v=>{s.images[c]=v})}}function Y6(A,s=0,c){const d={json:null,images:[],buffers:[]};if(new Uint32Array(A,s,1)[0]===W6){const b=new Uint32Array(A,s);let E=2;const P=(b[E++]>>2)-3,T=b[E++]>>2;if(E++,d.json=JSON.parse(q6.decode(b.subarray(E,E+T))),E+=T,E<P){const F=b[E++];E++;const D=s+(E<<2);d.buffers[0]=A.slice(D,D+F)}}else d.json=JSON.parse(q6.decode(new Uint8Array(A,s)));const{buffers:y,images:f,meshes:v,extensionsUsed:B,bufferViews:I}=d.json;let R=Promise.resolve();if(y){const b=[];for(let E=0;E<y.length;E++){const P=y[E];P.uri?b.push(Hre(P,d,E,c)):d.buffers[E]||(d.buffers[E]=null)}R=Promise.all(b)}return R.then(()=>{const b=[],E=B&&B.includes(yM),P=B&&B.includes(eC);if(E&&b.push(function(){if(!Qu)return z_??(z_=function(T){let F,D=null;function V(){F=new Uint8Array(D.buffer)}function H(){throw new Error("Unexpected Draco error.")}const Z={a:{a:H,d:function(J,G,te){return F.copyWithin(J,G,G+te)},c:function(J){const G=F.length,te=Math.max(J>>>0,Math.ceil(1.2*G)),oe=Math.ceil((te-G)/65536);try{return D.grow(oe),V(),!0}catch{return!1}},b:H}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(T,Z):T.then(J=>J.arrayBuffer()).then(J=>WebAssembly.instantiate(J,Z))).then(J=>{const{Rb:G,Qb:te,P:oe,T:pe,X:we,Ja:Ce,La:xe,Qa:De,Va:Ie,Wa:Oe,eb:Ke,jb:Ze,f:Ye,e:et,yb:at,zb:rt,Ab:_t,Bb:Tt,Db:dt,Gb:Zt}=J.instance.exports;D=et;const Qt=(()=>{let Lt=0,Pt=0,yr=0,qt=0;return tr=>{yr&&(G(qt),G(Lt),Pt+=yr,yr=Lt=0),Lt||(Pt+=128,Lt=te(Pt));const Tr=tr.length+7&-8;let Nr=Lt;Tr>=Pt&&(yr=Tr,Nr=qt=te(Tr));for(let Or=0;Or<tr.length;Or++)F[Nr+Or]=tr[Or];return Nr}})();return V(),Ye(),{memory:et,_free:G,_malloc:te,Mesh:class{constructor(){this.ptr=oe()}destroy(){pe(this.ptr)}},Decoder:class{constructor(){this.ptr=Ce()}destroy(){Ze(this.ptr)}DecodeArrayToMesh(Lt,Pt,yr){const qt=Qt(Lt),tr=xe(this.ptr,qt,Pt,yr.ptr);return!!we(tr)}GetAttributeByUniqueId(Lt,Pt){return{ptr:De(this.ptr,Lt.ptr,Pt)}}GetTrianglesUInt16Array(Lt,Pt,yr){Ie(this.ptr,Lt.ptr,Pt,yr)}GetTrianglesUInt32Array(Lt,Pt,yr){Oe(this.ptr,Lt.ptr,Pt,yr)}GetAttributeDataArrayForAllPoints(Lt,Pt,yr,qt,tr){Ke(this.ptr,Lt.ptr,Pt.ptr,yr,qt,tr)}},DT_INT8:at(),DT_UINT8:rt(),DT_INT16:_t(),DT_UINT16:Tt(),DT_UINT32:dt(),DT_FLOAT32:Zt()}})}(fetch(j6())),z_.then(T=>{Qu=T,z_=void 0}))}()),P&&b.push(function(){if(gM)return;const T=function(F){let D;const V=WebAssembly.instantiateStreaming(F,{}).then(J=>{D=J.instance,D.exports.__wasm_call_ctors()}),H={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Z={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:V,supported:!0,decodeGltfBuffer(J,G,te,oe,pe,we){(function(Ce,xe,De,Ie,Oe,Ke,Ze){const Ye=Ce.exports.sbrk,et=Ie+3&-4,at=Ye(et*Oe),rt=Ye(Ke.length),_t=new Uint8Array(Ce.exports.memory.buffer);_t.set(Ke,rt);const Tt=xe(at,Ie,Oe,rt,Ke.length);if(Tt===0&&Ze&&Ze(at,et,Oe),De.set(_t.subarray(at,at+Ie*Oe)),Ye(at-Ye(0)),Tt!==0)throw new Error(`Malformed buffer data: ${Tt}`)})(D,D.exports[Z[pe]],J,G,te,oe,D.exports[H[we]])}}}(fetch(G6()));return T.ready.then(()=>{gM=T})}()),f)for(let T=0;T<f.length;T++)b.push(jre(f[T],d,T,c));return(b.length?Promise.all(b):Promise.resolve()).then(()=>{if(E&&v)for(const{primitives:T}of v)for(const F of T)Nre(F,d);if(P&&v&&I)for(const T of I)Qre(T,d);return d})})}function Kp(A,s){const c=A.json.bufferViews[s.bufferView],d=$B[s.componentType];return new d(A.buffers[c.buffer],(s.byteOffset||0)+(c.byteOffset||0),s.count*(c.byteStride&&c.byteStride!==V_[s.type]*d.BYTES_PER_ELEMENT?c.byteStride/d.BYTES_PER_ELEMENT:V_[s.type]))}function vM(A,s,c,d){const y=$B[s.componentType],f=function(b){switch(b){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(y),v=A.json.bufferViews[s.bufferView],B=v.byteStride?v.byteStride/y.BYTES_PER_ELEMENT:V_[s.type],I=c.float32,R=I.length/c.capacity;for(let b=0,E=0;b<s.count*B;b+=B,E+=R)for(let P=0;P<R;P++)I[E+P]=d[b+P]*f;c._trim()}function Gre(A,s,c){const d=A.indices,y=A.attributes,f={};f.indexArray=new gs;const v=s.json.accessors[d],B=v.count/3;f.indexArray.reserve(B);const I=Kp(s,v);for(let P=0;P<B;P++)f.indexArray.emplaceBack(I[3*P],I[3*P+1],I[3*P+2]);f.indexArray._trim(),f.vertexArray=new Bh;const R=s.json.accessors[y.POSITION];f.vertexArray.reserve(R.count);const b=Kp(s,R);for(let P=0;P<R.count;P++)f.vertexArray.emplaceBack(b[3*P],b[3*P+1],b[3*P+2]);if(f.vertexArray._trim(),f.aabb=new ti(R.min,R.max),f.centroid=function(P,T){const F=[0,0,0],D=P.length;if(D>0){for(let V=0;V<D;V++){const H=3*P[V];F[0]+=T[H],F[1]+=T[H+1],F[2]+=T[H+2]}F[0]/=D,F[1]/=D,F[2]/=D}return F}(I,b),y.COLOR_0!==void 0){const P=s.json.accessors[y.COLOR_0],T=V_[P.type],F=Kp(s,P);f.colorArray=T===3?new Bh:new Ru,f.colorArray.resize(P.count),vM(s,P,f.colorArray,F)}if(y.NORMAL!==void 0){f.normalArray=new Bh;const P=s.json.accessors[y.NORMAL];f.normalArray.resize(P.count);const T=Kp(s,P);vM(s,P,f.normalArray,T)}if(y.TEXCOORD_0!==void 0&&c.length>0){f.texcoordArray=new Lp;const P=s.json.accessors[y.TEXCOORD_0];f.texcoordArray.resize(P.count);const T=Kp(s,P);vM(s,P,f.texcoordArray,T)}if(y._FEATURE_ID_RGBA4444!==void 0){const P=s.json.accessors[y._FEATURE_ID_RGBA4444];s.json.extensionsUsed&&s.json.extensionsUsed.includes("EXT_meshopt_compression")&&(f.featureData=Kp(s,P))}y._FEATURE_RGBA4444!==void 0&&(f.featureData=new Uint32Array(Kp(s,s.json.accessors[y._FEATURE_RGBA4444]).buffer));const E=A.material;return f.material=function(P,T){const{emissiveFactor:F=[0,0,0],alphaMode:D="OPAQUE",alphaCutoff:V=.5,normalTexture:H,occlusionTexture:Z,emissiveTexture:J,doubleSided:G}=P,{baseColorFactor:te=[1,1,1,1],metallicFactor:oe=1,roughnessFactor:pe=1,baseColorTexture:we,metallicRoughnessTexture:Ce}=P.pbrMetallicRoughness||{},xe=Z?T[Z.index]:void 0;if(Z&&Z.extensions&&Z.extensions.KHR_texture_transform&&xe){const De=Z.extensions.KHR_texture_transform;xe.offsetScale=[De.offset[0],De.offset[1],De.scale[0],De.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new An(...te),metallicFactor:oe,roughnessFactor:pe,baseColorTexture:we?T[we.index]:void 0,metallicRoughnessTexture:Ce?T[Ce.index]:void 0},doubleSided:G,emissiveFactor:F,alphaMode:D,alphaCutoff:V,normalTexture:H?T[H.index]:void 0,occlusionTexture:xe,emissionTexture:J?T[J.index]:void 0,defined:P.defined===void 0}}(E!==void 0?s.json.materials[E]:{defined:!1},c),f}function J6(A,s,c){const{matrix:d,rotation:y,translation:f,scale:v,mesh:B,extras:I,children:R}=A,b={};if(b.matrix=d||Qe.mat4.fromRotationTranslationScale([],y||[0,0,0,1],f||[0,0,0],v||[1,1,1]),B!==void 0){b.meshes=c[B];const E=b.anchor=[0,0];for(const P of b.meshes){const{min:T,max:F}=P.aabb;E[0]+=T[0]+F[0],E[1]+=T[1]+F[1]}E[0]=Math.floor(E[0]/b.meshes.length/2),E[1]=Math.floor(E[1]/b.meshes.length/2)}if(I&&(I.id&&(b.id=I.id),I.lights&&(b.lights=function(E){if(!E.length)return[];const P=function(H){const Z=atob(H),J=new Uint8Array(Z.length);for(let G=0;G<Z.length;G++)J[G]=Z.codePointAt(G);return J}(E),T=[],F=P.length/24,D=new Uint16Array(P.buffer),V=new Float32Array(P.buffer);for(let H=0;H<F;H++){const Z=D[2*H*6]/30,J=D[2*H*6+1]/30,G=D[2*H*6+10]/100,te=V[6*H+1],oe=V[6*H+2],pe=V[6*H+3],we=V[6*H+4],Ce=pe-te,xe=we-oe,De=Math.hypot(Ce,xe);T.push({pos:[te+.5*Ce,oe+.5*xe,J],normal:[xe/De,-Ce/De,0],width:De,height:Z,depth:G,points:[te,oe,pe,we]})}return T}(I.lights))),R){const E=[];for(const P of R)E.push(J6(s.json.nodes[P],s,c));b.children=E}return b}function Kre(A){if(A.vertices.length===0||A.indices.length===0)return null;const s=new TP(A.vertices,A.indices,8,256),[c,d]=[s.min.clone(),s.max.clone()];return{vertices:A.vertices,indices:A.indices,grid:s,min:c,max:d}}function Wre(A){if(!A.extras||!A.extras.ground)return null;const s=A.extras.ground;if(!s||!Array.isArray(s)||s.length===0)return null;const c=s[0];if(!c||!Array.isArray(c)||c.length===0)return null;const d=[];for(const v of c){if(!Array.isArray(v)||v.length!==2)continue;const B=v[0],I=v[1];typeof B=="number"&&typeof I=="number"&&d.push(new Ot(B,I))}if(d.length<3)return null;d.length>1&&d[d.length-1].equals(d[0])&&d.pop();let y=0;for(let v=0;v<d.length;v++){const B=d[v],I=d[(v+1)%d.length],R=d[(v+2)%d.length];y+=(B.x-I.x)*(R.y-I.y)-(R.x-I.x)*(B.y-I.y)}y>0&&d.reverse();const f=A_(d.flatMap(v=>[v.x,v.y]),[]);return f.length===0?null:{vertices:d,indices:f}}function qre(A,s){const c=[],d=[];let y=0;const f=[];for(const v of A){y=c.length;const B=v.vertexArray.float32,I=v.indexArray.uint16;for(let R=0;R<v.vertexArray.length;R++)f[0]=B[3*R+0],f[1]=B[3*R+1],f[2]=B[3*R+2],Qe.vec3.transformMat4(f,f,s),c.push(new Ot(f[0],f[1]));for(let R=0;R<3*v.indexArray.length;R++)d.push(I[R]+y)}if(d.length%3!=0)return null;for(let v=0;v<d.length;v+=3){const B=c[d[v+0]],I=c[d[v+1]],R=c[d[v+2]];(B.x-I.x)*(R.y-I.y)-(R.x-I.x)*(B.y-I.y)>0&&([d[v+1],d[v+2]]=[d[v+2],d[v+1]])}return{vertices:c,indices:d}}function $6(A){const s=function(I,R){const b=[],E=WebGL2RenderingContext;if(I.json.textures)for(const P of I.json.textures){const T={magFilter:E.LINEAR,minFilter:E.NEAREST,wrapS:E.REPEAT,wrapT:E.REPEAT};P.sampler!==void 0&&Object.assign(T,I.json.samplers[P.sampler]),b.push({image:R[P.source],sampler:T,uploaded:!1})}return b}(A,A.images),c=function(I,R){const b=[];for(const E of I.json.meshes){const P=[];for(const T of E.primitives)P.push(Gre(T,I,R));b.push(P)}return b}(A,s),{scenes:d,scene:y,nodes:f}=A.json,v=d?d[y||0].nodes:f,B=[];for(const I of v)B.push(J6(f[I],A,c));return function(I,R,b){const E={},P=new Set;for(let T=0;T<I.length;T++){const F=b[R[T]];if(!F.extras)continue;const D=F.extras["mapbox:footprint:version"],V=F.extras["mapbox:footprint:id"];(D||V)&&P.add(T),D==="1.0.0"&&V&&(E[V]=T)}for(let T=0;T<I.length;T++){if(P.has(T))continue;const F=I[T],D=b[R[T]];if(!D.extras)continue;let V=null;F.id in E&&(V=qre(I[E[F.id]].meshes,F.matrix)),V||(V=Wre(D)),V&&(F.footprint=Kre(V))}if(P.size>0){const T=Array.from(P.values()).sort((F,D)=>F-D);for(let F=T.length-1;F>=0;F--)I.splice(T[F],1)}}(B,v,A.json.nodes),B}function Xre(A){A.heightmap=new Float32Array(4096),A.heightmap.fill(-1);const s=A.vertexArray.float32,c=A.aabb.min[0]-1,d=A.aabb.min[1]-1,y=jp/(A.aabb.max[0]-c+2),f=jp/(A.aabb.max[1]-d+2);for(let v=0;v<s.length;v+=3){const B=s[v+2],I=(s[v+0]-c)*y|0,R=(s[v+1]-d)*f|0;B>A.heightmap[R*jp+I]&&(A.heightmap[R*jp+I]=B)}}function Zre(A,s){const c={};c.indexArray=new gs,c.indexArray.reserve(4*A.length),c.vertexArray=new Bh,c.vertexArray.reserve(10*A.length),c.colorArray=new Ru,c.vertexArray.reserve(10*A.length);let d=0;for(const v of A){const B=Math.min(10,Math.max(4,1.3*v.height))*s,I=[-v.normal[1],v.normal[0],0],R=Math.min(.29,.1*v.width/v.depth),b=v.width-2*v.depth*s*(R+.01),E=Qe.vec3.scaleAndAdd([],v.pos,I,b/2),P=Qe.vec3.scaleAndAdd([],v.pos,I,-b/2),T=[E[0],E[1],E[2]+v.height],F=[P[0],P[1],P[2]+v.height],D=Qe.vec3.scaleAndAdd([],v.normal,I,R);Qe.vec3.scale(D,D,B);const V=Qe.vec3.scaleAndAdd([],v.normal,I,-R);Qe.vec3.scale(V,V,B),Qe.vec3.add(D,E,D),Qe.vec3.add(V,P,V),E[2]+=.1,P[2]+=.1,c.vertexArray.emplaceBack(D[0],D[1],D[2]),c.vertexArray.emplaceBack(V[0],V[1],V[2]),c.vertexArray.emplaceBack(E[0],E[1],E[2]),c.vertexArray.emplaceBack(P[0],P[1],P[2]),c.vertexArray.emplaceBack(T[0],T[1],T[2]),c.vertexArray.emplaceBack(F[0],F[1],F[2]),c.vertexArray.emplaceBack(E[0],E[1],E[2]),c.vertexArray.emplaceBack(P[0],P[1],P[2]),c.vertexArray.emplaceBack(D[0],D[1],D[2]),c.vertexArray.emplaceBack(V[0],V[1],V[2]);const H=b/B/2;c.colorArray.emplaceBack(-H-R,-1,H,.8),c.colorArray.emplaceBack(H+R,-1,H,.8),c.colorArray.emplaceBack(-H,0,H,1.3),c.colorArray.emplaceBack(H,0,H,1.3),c.colorArray.emplaceBack(H+R,-.8,H,.7),c.colorArray.emplaceBack(H+R,-.8,H,.7),c.colorArray.emplaceBack(0,0,H,1.3),c.colorArray.emplaceBack(0,0,H,1.3),c.colorArray.emplaceBack(H+R,-1.2,H,.8),c.colorArray.emplaceBack(H+R,-1.2,H,.8),c.indexArray.emplaceBack(6+d,4+d,8+d),c.indexArray.emplaceBack(7+d,9+d,5+d),c.indexArray.emplaceBack(0+d,1+d,2+d),c.indexArray.emplaceBack(1+d,3+d,2+d),d+=10}const y={defined:!0,emissiveFactor:[0,0,0]},f={};return f.baseColorFactor=An.white,y.pbrMetallicRoughness=f,c.material=y,c.aabb=new ti([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),c}class eV{constructor(s){this._stringToNumber={},this._numberToString=[];for(let c=0;c<s.length;c++){const d=s[c];this._stringToNumber[d]=c,this._numberToString[c]=d}}encode(s){return this._stringToNumber[s]}decode(s){return this._numberToString[s]}}const Yre=["id","tile","layer","source","sourceLayer","state"];class tV{constructor(s,c,d,y,f){this.type="Feature",this._vectorTileFeature=s,this._z=c,this._x=d,this._y=y,this.properties=s.properties,this.id=f}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const c of Yre)this[c]!==void 0&&(s[c]=this[c]);return s}}class rV{constructor(s,c){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new yA(Gt,16,0),this.featureIndexArray=new aB,this.promoteId=c,this.is3DTile=!1}insert(s,c,d,y,f,v=0,B=0){const I=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,y,f,v);const R=this.grid;for(let b=0;b<c.length;b++){const E=c[b],P=[1/0,1/0,-1/0,-1/0];for(let T=0;T<E.length;T++){const F=E[T];P[0]=Math.min(P[0],F.x),P[1]=Math.min(P[1],F.y),P[2]=Math.max(P[2],F.x),P[3]=Math.max(P[3],F.y)}B!==0&&(P[0]-=B,P[1]-=B,P[2]+=B,P[3]+=B),P[0]<Gt&&P[1]<Gt&&P[2]>=0&&P[3]>=0&&R.insert(I,P[0],P[1],P[2],P[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new e0.VectorTile(new IB(this.rawTileData)).layers,this.sourceLayerCoder=new eV(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const s in this.vtLayers)this.vtFeatures[s]=[]}return this.vtLayers}query(s,c,d,y){this.loadVTLayers();const f=s.params||{},v=ec(f.filter),B=s.tileResult,I=s.transform,R=B.bufferedTilespaceBounds,b=this.grid.query(R.min.x,R.min.y,R.max.x,R.max.y,(F,D,V,H)=>Il(B.bufferedTilespaceGeometry,F,D,V,H));b.sort(Jre);let E=null;I.elevation&&b.length>0&&(E=a0.create(I.elevation,this.tileID));const P={};let T;for(let F=0;F<b.length;F++){const D=b[F];if(D===T)continue;T=D;const V=this.featureIndexArray.get(D);let H=null;if(this.is3DTile){const Z=this.bucketLayerIDs[0][0],J=c[Z];if(J.type!=="model")continue;const{queryFeature:G,intersectionZ:te}=J.queryIntersectsMatchingFeature(B,V.featureIndex,v,I);G&&this.appendToResult(P,Z,V.featureIndex,G,te)}else this.loadMatchingFeature(P,V,v,f.layers,f.availableImages,c,d,y,(Z,J,G,te=0)=>(H||(H=Dt(Z,this.tileID.canonical,s.tileTransform)),J.queryIntersectsFeature(B,Z,G,H,this.z,s.transform,s.pixelPosMatrix,E,te)))}return P}loadMatchingFeature(s,c,d,y,f,v,B,I,R){const{featureIndex:b,bucketIndex:E,sourceLayerIndex:P,layoutVertexArrayOffset:T}=c,F=this.bucketLayerIDs[E];if(y&&!function(Z,J){for(let G=0;G<Z.length;G++)if(J.indexOf(Z[G])>=0)return!0;return!1}(y,F))return;const D=this.sourceLayerCoder.decode(P),V=this.vtLayers[D].feature(b);if(d.needGeometry){const Z=Ut(V,!0);if(!d.filter(new Gi(this.tileID.overscaledZ),Z,this.tileID.canonical))return}else if(!d.filter(new Gi(this.tileID.overscaledZ),V))return;const H=this.getId(V,D);for(let Z=0;Z<F.length;Z++){const J=F[Z];if(y&&y.indexOf(J)<0)continue;const G=v[J];if(!G)continue;let te={};H!==void 0&&I&&(te=I.getState(G.sourceLayer||"_geojsonTileLayer",H));const oe=!R||R(V,G,te,T);if(!oe)continue;const pe=new tV(V,this.z,this.x,this.y,H),we=xo({},B[J]);we.paint=nV(we.paint,G.paint,V,te,f),we.layout=nV(we.layout,G.layout,V,te,f),pe.layer=we,this.appendToResult(s,J,b,pe,oe)}}appendToResult(s,c,d,y,f){let v=s[c];v===void 0&&(v=s[c]=[]),v.push({featureIndex:d,feature:y,intersectionZ:f})}lookupSymbolFeatures(s,c,d,y,f,v,B,I){const R={};this.loadVTLayers();const b=ec(f);for(const E of s)this.loadMatchingFeature(R,{bucketIndex:d,sourceLayerIndex:y,featureIndex:E,layoutVertexArrayOffset:0},b,v,B,I,c);return R}loadFeature(s){const{featureIndex:c,sourceLayerIndex:d}=s;this.loadVTLayers();const y=this.sourceLayerCoder.decode(d),f=this.vtFeatures[y];if(f[c])return f[c];const v=this.vtLayers[y].feature(c);return f[c]=v,v}hasLayer(s){for(const c of this.bucketLayerIDs)for(const d of c)if(s===d)return!0;return!1}getId(s,c){let d=s.id;if(this.promoteId){const y=typeof this.promoteId=="string"?this.promoteId:this.promoteId[c];y!=null&&(d=s.properties[y]),typeof d=="boolean"&&(d=Number(d))}return d}}function nV(A,s,c,d,y){return ts(A,(f,v)=>{const B=s instanceof Fd?s.get(v):null;return B&&B.evaluate?B.evaluate(c,d,y):B})}function Jre(A,s){return s-A}rr(rV,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const iV=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class _M{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[c,d]=new Uint8Array(s,0,2);if(c!==219)throw new Error("Data does not appear to be in a KDBush format.");const y=d>>4;if(y!==1)throw new Error(`Got v${y} data when expected v1.`);const f=iV[15&d];if(!f)throw new Error("Unrecognized array type.");const[v]=new Uint16Array(s,2,1),[B]=new Uint32Array(s,4,1);return new _M(B,v,f,s)}constructor(s,c=64,d=Float64Array,y){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+c,2),65535),this.ArrayType=d,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;const f=iV.indexOf(this.ArrayType),v=2*s*this.ArrayType.BYTES_PER_ELEMENT,B=s*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-B%8)%8;if(f<0)throw new Error(`Unexpected typed array class: ${d}.`);y&&y instanceof ArrayBuffer?(this.data=y,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+B+I,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+v+B+I),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+B+I,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+f]),new Uint16Array(this.data,2,1)[0]=c,new Uint32Array(this.data,4,1)[0]=s)}add(s,c){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=s,this.coords[this._pos++]=c,d}finish(){const s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return xM(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,c,d,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:v,nodeSize:B}=this,I=[0,f.length-1,0],R=[];for(;I.length;){const b=I.pop()||0,E=I.pop()||0,P=I.pop()||0;if(E-P<=B){for(let V=P;V<=E;V++){const H=v[2*V],Z=v[2*V+1];H>=s&&H<=d&&Z>=c&&Z<=y&&R.push(f[V])}continue}const T=P+E>>1,F=v[2*T],D=v[2*T+1];F>=s&&F<=d&&D>=c&&D<=y&&R.push(f[T]),(b===0?s<=F:c<=D)&&(I.push(P),I.push(T-1),I.push(1-b)),(b===0?d>=F:y>=D)&&(I.push(T+1),I.push(E),I.push(1-b))}return R}within(s,c,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:f,nodeSize:v}=this,B=[0,y.length-1,0],I=[],R=d*d;for(;B.length;){const b=B.pop()||0,E=B.pop()||0,P=B.pop()||0;if(E-P<=v){for(let V=P;V<=E;V++)sV(f[2*V],f[2*V+1],s,c)<=R&&I.push(y[V]);continue}const T=P+E>>1,F=f[2*T],D=f[2*T+1];sV(F,D,s,c)<=R&&I.push(y[T]),(b===0?s-d<=F:c-d<=D)&&(B.push(P),B.push(T-1),B.push(1-b)),(b===0?s+d>=F:c+d>=D)&&(B.push(T+1),B.push(E),B.push(1-b))}return I}}function xM(A,s,c,d,y,f){if(y-d<=c)return;const v=d+y>>1;oV(A,s,v,d,y,f),xM(A,s,c,d,v-1,1-f),xM(A,s,c,v+1,y,1-f)}function oV(A,s,c,d,y,f){for(;y>d;){if(y-d>600){const R=y-d+1,b=c-d+1,E=Math.log(R),P=.5*Math.exp(2*E/3),T=.5*Math.sqrt(E*P*(R-P)/R)*(b-R/2<0?-1:1);oV(A,s,c,Math.max(d,Math.floor(c-b*P/R+T)),Math.min(y,Math.floor(c+(R-b)*P/R+T)),f)}const v=s[2*c+f];let B=d,I=y;for(N_(A,s,d,c),s[2*y+f]>v&&N_(A,s,d,y);B<I;){for(N_(A,s,B,I),B++,I--;s[2*B+f]<v;)B++;for(;s[2*I+f]>v;)I--}s[2*d+f]===v?N_(A,s,d,I):(I++,N_(A,s,I,y)),I<=c&&(d=I+1),c<=I&&(y=I-1)}}function N_(A,s,c,d){bM(A,c,d),bM(s,2*c,2*d),bM(s,2*c+1,2*d+1)}function bM(A,s,c){const d=A[s];A[s]=A[c],A[c]=d}function sV(A,s,c,d){const y=A-c,f=s-d;return y*y+f*f}o.$=Yw,o.A=class extends qB{},o.B=Pc,o.C=Jl,o.D=Pp,o.E=Ic,o.F=Ov,o.G=Sg,o.H=Qw,o.I=GP,o.J=Ig,o.K=Ug,o.L=Ww,o.M=Ep,o.N=yg,o.O=_p,o.P=Ot,o.Q=vp,o.R=wl,o.S=Es,o.T=nM,o.U=qs,o.V=qB,o.W=Wv,o.X=Eg,o.Y=Lv,o.Z=function(A){const s=A.value;let c=[];if(!s)return c;const d=Pc(s);return d!=="string"?(c=c.concat([new qB(A.key,s,`string expected, "${d}" found`)]),c):(m6(s,!0)||(c=c.concat([new qB(A.key,s,`invalid url "${s}"`)])),c)},o._=ot,o.a=function(A){return Ne.API_CDN_URL_REGEX.test(A)},o.a$=r_,o.a0=wi,o.a1=zt,o.a2=class{constructor(A){this.specification=A}possiblyEvaluate(A,s){return rs(A.expression.evaluate(s))}interpolate(A,s,c){return{x:_r(A.x,s.x,c),y:_r(A.y,s.y,c),z:_r(A.z,s.z,c),azimuthal:_r(A.azimuthal,s.azimuthal,c),polar:_r(A.polar,s.polar,c)}}},o.a3=Gi,o.a4=Rc,o.a5=nt,o.a6=Qe,o.a7=Di,o.a8=Fd,o.a9=Nd,o.aA=ei,o.aB=n6,o.aC=c6,o.aD=r6,o.aE=function(A,s){const c=document.createElement("video");c.muted=!0,c.onloadstart=function(){s(null,c)};for(let d=0;d<A.length;d++){const y=document.createElement("source");Gs(A[d])||(c.crossOrigin="Anonymous"),y.src=A[d],c.appendChild(y)}return{cancel:()=>{}}},o.aF=HB,o.aG=function(A){return fetch(A).then(s=>s.arrayBuffer()).then(s=>Y6(s,0,A))},o.aH=$6,o.aI=class{constructor(A,s,c,d){this.id=A,this.position=s!=null?new Y(s[0],s[1]):new Y(0,0),this.orientation=c??[0,0,0],this.nodes=d,this.uploaded=!1,this.aabb=new ti([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(A,s){if(Qe.mat4.multiply(A.matrix,s,A.matrix),A.meshes)for(const c of A.meshes){const d=ti.applyTransformFast(c.aabb,A.matrix);this.aabb.encapsulate(d)}if(A.children)for(const c of A.children)this._applyTransformations(c,A.matrix)}computeBoundsAndApplyParent(){const A=Qe.mat4.identity([]);for(const s of this.nodes)this._applyTransformations(s,A)}computeModelMatrix(A,s,c,d,y,f,v=!1){x6(this.matrix,this,A.transform,this.position,s,c,d,y,f,v)}upload(A){if(!this.uploaded){for(const s of this.nodes)lM(s,A);for(const s of this.nodes)XB(s);this.uploaded=!0}}destroy(){for(const A of this.nodes)cM(A)}},o.aJ=Wl,o.aK=S_,o.aL=Me,o.aM=Fe,o.aN=wh,o.aO=gs,o.aP=wc,o.aQ=qg,o.aR=NB,o.aS=function(){Ua.isLoading()||Ua.isLoaded()||jv()!=="deferred"||Gv()},o.aT=ec,o.aU=Ut,o.aV=tV,o.aW=sa,o.aX=OP,o.aY=EP,o.aZ=Dt,o.a_=bh,o.aa=_r,o.ab=Gt,o.ac=ca,o.ad=class{constructor(A){this.specification=A}possiblyEvaluate(A,s){return function([c,d]){const y=rs([1,c,d]);return{x:y.x,y:y.y,z:y.z}}(A.expression.evaluate(s))}interpolate(A,s,c){return{x:_r(A.x,s.x,c),y:_r(A.y,s.y,c),z:_r(A.z,s.z,c)}}},o.ae=function(A,s,c=0,d=!0){const y=new Ot(c,c),f=A.sub(y),v=s.add(y),B=[f,new Ot(v.x,f.y),v,new Ot(f.x,v.y)];return d&&B.push(f.clone()),B},o.af=function(A,s){const c=[];for(let d=0;d<A.length;d++){const y=yi(d-1,-1,A.length-1),f=yi(d+1,-1,A.length-1),v=A[d],B=A[f],I=A[y].sub(v).unit(),R=B.sub(v).unit(),b=R.angleWithSep(I.x,I.y),E=I.add(R).unit().mult(-1*s/Math.sin(b/2));c.push(v.add(E))}return c},o.ag=Qz,o.ah=Il,o.ai=function(A,s,c=0){return Qe.vec3.fromValues(((s.x-c)*A.scale-A.x)*Gt,(s.y*A.scale-A.y)*Gt,ze(s.z,s.y))},o.aj=Ou,o.ak=lz,o.al=function(A){let s=1/0,c=1/0,d=-1/0,y=-1/0;for(const f of A)s=Math.min(s,f.x),c=Math.min(c,f.y),d=Math.max(d,f.x),y=Math.max(y,f.y);return{min:new Ot(s,c),max:new Ot(d,y)}},o.am=Be,o.an=hi,o.ao=Et,o.ap=Er,o.aq=a,o.ar=function(A,s){const c={};for(let d=0;d<s.length;d++){const y=s[d];y in A&&(c[y]=A[y])}return c},o.as=ae,o.at=Te,o.au=class{constructor(A){this.entries={},this.scheduler=A}request(A,s,c,d){const y=this.entries[A]=this.entries[A]||{callbacks:[]};if(y.result){const[f,v]=y.result;return this.scheduler?this.scheduler.add(()=>{d(f,v)},s):d(f,v),()=>{}}return y.callbacks.push(d),y.cancel||(y.cancel=c((f,v)=>{y.result=[f,v];for(const B of y.callbacks)this.scheduler?this.scheduler.add(()=>{B(f,v)},s):B(f,v);setTimeout(()=>delete this.entries[A],3e3)})),()=>{y.result||(y.callbacks=y.callbacks.filter(f=>f!==d),y.callbacks.length||(y.cancel(),delete this.entries[A]))}}},o.av=tB,o.aw=function(A,s,c){const d=JSON.stringify(A.request);return A.data&&(this.deduped.entries[d]={result:[null,A.data]}),this.deduped.request(d,{type:"parseTile",isSymbolTile:A.isSymbolTile,zoom:A.tileZoom},y=>{const f=Cc(A.request,(v,B,I,R)=>{v?y(v):B&&y(null,{vectorTile:c?void 0:new e0.VectorTile(new IB(B)),rawData:B,cacheControl:I,expires:R})});return()=>{f.cancel(),y()}},s)},o.ax=function(A){vi++,vi>yn&&(A.getActor().send("enforceCacheSizeLimit",br),vi=0)},o.ay=Kt,o.az=function(A){return A<=1?1:Math.pow(2,Math.floor(Math.log(A)/Math.LN2))},o.b=function(A){return Ne.API_FONTS_REGEX.test(A)},o.b$=function(A){const{x:s,y:c}=A.point,{lng:d,lat:y}=A._center;return e5(s,c,A.worldSize,d,y)},o.b0=Pl,o.b1=Ki,o.b2=A_,o.b3=eM,o.b4=function(A,s){const c=Nd(s.zoom);if(c===0)return Th(A);const d=pB(A),y=yP(d),f=Be(d.getWest())*s.worldSize,v=Be(d.getEast())*s.worldSize,B=Te(d.getNorth())*s.worldSize,I=Te(d.getSouth())*s.worldSize,R=[f,B,0],b=[v,B,0],E=[f,I,0],P=[v,I,0],T=Qe.mat4.invert([],s.globeMatrix);return Qe.vec3.transformMat4(R,R,T),Qe.vec3.transformMat4(b,b,T),Qe.vec3.transformMat4(E,E,T),Qe.vec3.transformMat4(P,P,T),y[0]=SA(y[0],E,c),y[1]=SA(y[1],P,c),y[2]=SA(y[2],b,c),y[3]=SA(y[3],R,c),ti.fromPoints(y)},o.b5=gB,o.b6=u_,o.b7=SA,o.b8=Qg,o.b9=za,o.bA=yi,o.bB=Pr,o.bC=bl,o.bD=be,o.bE=function(A,s,c){A[4*s+0]=c[0],A[4*s+1]=c[1],A[4*s+2]=c[2],A[4*s+3]=c[3]},o.bF=Vp,o.bG=kc,o.bH=s_,o.bI=Zs,o.bJ=wA,o.bK=Y,o.bL=Wz,o.bM=Oo,o.bN=Vd,o.bO=h6,o.bP=Xo,o.bQ=YU,o.bR=function(A,s,c,d,y,f,v,B,I){if(I.name==="globe")return YU(A,s,new Xo(c,d,y),!1);const R=S_({z:c,x:d,y},I);return new ti([(f+R.x/R.scale)*s,s*(R.y/R.scale),v],[(f+R.x2/R.scale)*s,s*(R.y2/R.scale),B])},o.bS=function(A,s,c){let d=0;for(let y=0;y<2;++y)A[y]>0&&(d+=(A[y]-0)*(A[y]-0)),s[y]<0&&(d+=(0-s[y])*(0-s[y]));return d},o.bT=Le,o.bU=g,o.bV=function(A){const s=Qe.mat4.identity(new Float64Array(16));Qe.mat4.multiply(s,A.pixelMatrix,A.globeMatrix);const c=[0,k,0],d=[0,O,0];return Qe.vec3.transformMat4(c,c,s),Qe.vec3.transformMat4(d,d,s),[c[0]>0&&c[0]<=A.width&&c[1]>0&&c[1]<=A.height&&!xP(A,new Y(A.center.lat,90)),d[0]>0&&d[0]<=A.width&&d[1]>0&&d[1]<=A.height&&!xP(A,new Y(A.center.lat,-90))]},o.bW=function(A,s){const{scale:c}=A.tileTransform,d=c*Gt/(A.tileSize*Math.pow(2,s.zoom-A.tileID.overscaledZ+A.tileID.canonical.z));return Qe.mat2.scale(new Float32Array(4),s.inverseAdjustmentMatrix,[d,d])},o.bX=KB,o.bY=u6,o.bZ=function(A){const s=u6(A,!0);return Qe.mat2.invert([],[s[0],s[1],s[4],s[5]])},o.b_=Eh,o.ba=fM,o.bb=IB,o.bc=Cc,o.bd=function(A){const s=[];for(const c in A)s.push(A[c]);return s},o.be=function(A,s){const c=[];for(const d in A)d in s||c.push(d);return c},o.bf=Go,o.bg=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.bh=Bs,o.bi=function(A,s){const{x:c,y:d}=A.point,y=e5(c,d,A.worldSize/A._pixelsPerMercatorPixel,0,0);return Qe.mat4.multiply(y,y,vP(Th(s)))},o.bj=t0,o.bk=rc,o.bl=TB,o.bm=function(A,s,c,d,y){const f=5*s+2;A.float32[f+0]=c,A.float32[f+1]=d,A.float32[f+2]=y},o.bn=VB,o.bo=Pz,o.bp=Nt,o.bq=Ts,o.br=R5,o.bs=p6,o.bt=U5,o.bu=z5,o.bv=qP,o.bw=Uz,o.bx=jP,o.by=_M,o.bz=An,o.c=Je,o.c$=pa,o.c0=nn,o.c1=fa,o.c2=u,o.c3=function(A){const s=Math.round((A+45+360)%360/90)%4;return Ji[s]},o.c4=45,o.c5=Ae,o.c6=Yg,o.c7=function(A,s,c){const d=Math.sqrt(A*A+s*s+c*c),y=d>0?Math.acos(c/d)*Fo:0;let f=A!==0||s!==0?Math.atan2(-s,-A)*Fo+90:0;return f<0&&(f+=360),[d,f,y]},o.c8=He,o.c9=ti,o.cA=function(A){const s=Le-5;A=Er(A,-s,s)/s*90;const c=Math.pow(Math.abs(Math.sin(Pr(A))),3);return Math.round(c*(S.length-1))},o.cB=function(A,s,c,d){const y=s.getNorth(),f=s.getSouth(),v=s.getWest(),B=s.getEast(),I=1<<A.z,R=B-v,b=y-f,E=R/w,P=-b/S[c],T=[0,E,0,P,0,0,y,v,0];if(A.z>0){const F=180/d;Qe.mat3.multiply(T,T,[F/R+1,0,0,0,F/b+1,0,-.5*F/E,.5*F/P,1])}return T[2]=I,T[5]=A.x,T[8]=A.y,T},o.cC=Th,o.cD=function(A,s,c){const d=Qe.mat4.identity(new Float64Array(16)),y=(s/(1<<A)-.5)*Math.PI*2;return Qe.mat4.rotateY(d,c.globeMatrix,y),Float32Array.from(d)},o.cE=class{isDataAvailableAtPoint(A){const s=this._source();if(this.isUsingMockSource()||!s||A.y<0||A.y>1)return!1;const c=s.getSource().maxzoom,d=1<<c,y=Math.floor(A.x),f=Math.floor((A.x-y)*d),v=Math.floor(A.y*d),B=this.findDEMTileFor(new ei(c,y,c,f,v));return!(!B||!B.dem)}getAtPointOrZero(A,s=0){return this.getAtPoint(A,s)||0}getAtPoint(A,s,c=!0){if(this.isUsingMockSource())return null;s==null&&(s=null);const d=this._source();if(!d||A.y<0||A.y>1)return s;const y=d.getSource().maxzoom,f=1<<y,v=Math.floor(A.x),B=A.x-v,I=new ei(y,v,y,Math.floor(B*f),Math.floor(A.y*f)),R=this.findDEMTileFor(I);if(!R||!R.dem)return s;const b=R.dem,E=1<<R.tileID.canonical.z,P=(B*E-R.tileID.canonical.x)*b.dim,T=(A.y*E-R.tileID.canonical.y)*b.dim,F=Math.floor(P),D=Math.floor(T);return(c?this.exaggeration():1)*_r(_r(b.get(F,D),b.get(F,D+1),T-D),_r(b.get(F+1,D),b.get(F+1,D+1),T-D),P-F)}getAtTileOffset(A,s,c){const d=1<<A.canonical.z;return this.getAtPointOrZero(new nt(A.wrap+(A.canonical.x+s/Gt)/d,(A.canonical.y+c/Gt)/d))}getAtTileOffsetFunc(A,s,c,d){return y=>{const f=this.getAtTileOffset(A,y.x,y.y),v=d.upVector(A.canonical,y.x,y.y),B=d.upVectorScale(A.canonical,s,c).metersToTile;return Qe.vec3.scale(v,v,f*B),v}}getForTilePoints(A,s,c,d){if(this.isUsingMockSource())return!1;const y=a0.create(this,A,d);return!!y&&(s.forEach(f=>{f[2]=this.exaggeration()*y.getElevationAt(f[0],f[1],c)}),!0)}getMinMaxForTile(A){if(this.isUsingMockSource())return null;const s=this.findDEMTileFor(A);if(!s||!s.dem)return null;const c=s.dem.tree,d=s.tileID,y=1<<A.canonical.z-d.canonical.z;let f=A.canonical.x/y-d.canonical.x,v=A.canonical.y/y-d.canonical.y,B=0;for(let I=0;I<A.canonical.z-d.canonical.z&&!c.leaves[B];I++){f*=2,v*=2;const R=2*Math.floor(v)+Math.floor(f);B=c.childOffsets[B]+R,f%=1,v%=1}return{min:this.exaggeration()*c.minimums[B],max:this.exaggeration()*c.maximums[B]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(A,s,c){throw new Error("Pure virtual method called.")}pointCoordinate(A){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(A){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const A=this.visibleDemTiles;if(A.length===0)return null;let s=!1,c=Number.MAX_VALUE,d=Number.MIN_VALUE;for(const y of A){const f=this.getMinMaxForTile(y.tileID);f&&(c=Math.min(c,f.min),d=Math.max(d,f.max),s=!0)}return s?{min:c,max:d}:null}},o.cF=d5,o.cG=CA,o.cH=function(A,s){return[Math.pow(A[0],2.2)*s,Math.pow(A[1],2.2)*s,Math.pow(A[2],2.2)*s]},o.cI=$U,o.cJ=ke,o.cK=ge,o.cL=256,o.cM=function(A,s){const c=[0,0,0],d=gB(Th(s.canonical));return Qe.vec3.transformMat4(c,c,d),Qe.vec3.transformMat4(c,c,A),c},o.cN=A=>({u_camera_to_center_distance:new Zs(A),u_extrude_scale:new l_(A),u_device_pixel_ratio:new Zs(A),u_matrix:new Vp(A),u_inv_rot_matrix:new Vp(A),u_merc_center:new kc(A),u_tile_id:new s_(A),u_zoom_transition:new Zs(A),u_up_dir:new s_(A),u_emissive_strength:new Zs(A)}),o.cO=A=>({u_matrix:new Vp(A),u_pixels_to_tile_units:new l_(A),u_device_pixel_ratio:new Zs(A),u_units_to_pixels:new kc(A),u_dash_image:new wA(A),u_gradient_image:new wA(A),u_image_height:new Zs(A),u_texsize:new kc(A),u_tile_units_to_pixels:new Zs(A),u_alpha_discard_threshold:new Zs(A),u_trim_offset:new kc(A),u_trim_fade_range:new kc(A),u_trim_color:new Yg(A),u_emissive_strength:new Zs(A)}),o.cP=A=>({u_matrix:new Vp(A),u_texsize:new kc(A),u_pixels_to_tile_units:new l_(A),u_device_pixel_ratio:new Zs(A),u_image:new wA(A),u_units_to_pixels:new kc(A),u_tile_units_to_pixels:new Zs(A),u_alpha_discard_threshold:new Zs(A),u_trim_offset:new kc(A)}),o.cQ=da,o.cR=_te,o.cS=xte,o.cT=n5,o.cU=(A,s,c,d,y,f)=>{const v=A.transform,B=v.projection.name==="globe";let I;if(f.paint.get("circle-pitch-alignment")==="map")if(B){const b=$U(v.zoom,s.canonical)*v._pixelsPerMercatorPixel;I=Float32Array.from([b,0,0,b])}else I=v.calculatePixelsToTileUnitsMatrix(c);else I=new Float32Array([v.pixelsToGLUnits[0],0,0,v.pixelsToGLUnits[1]]);const R={u_camera_to_center_distance:A.transform.getCameraToCenterDistance(v.projection),u_matrix:A.translatePosMatrix(s.projMatrix,c,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_device_pixel_ratio:Wt.devicePixelRatio,u_extrude_scale:I,u_inv_rot_matrix:Bee,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:f.paint.get("circle-emissive-strength")};if(B){R.u_inv_rot_matrix=d,R.u_merc_center=y,R.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],R.u_zoom_transition=Nd(v.zoom);const b=y[0]*Gt,E=y[1]*Gt;R.u_up_dir=v.projection.upVector(new Xo(0,0,0),b,E)}return R},o.cV=hz,o.cW=(A,s,c,d,y,f)=>{const v=A.transform;return{u_matrix:uz(A,s,c,d),u_texsize:s.imageAtlasTexture?s.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:v.calculatePixelsToTileUnitsMatrix(s),u_device_pixel_ratio:y,u_image:0,u_tile_units_to_pixels:cz(s,v),u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:f}},o.cX=(A,s,c,d,y,f,v)=>{const B=A.transform,I=B.calculatePixelsToTileUnitsMatrix(s);return{u_matrix:uz(A,s,c,d),u_pixels_to_tile_units:I,u_device_pixel_ratio:f,u_units_to_pixels:[1/B.pixelsToGLUnits[0],1/B.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:y,u_texsize:Az(c)&&s.lineAtlasTexture?s.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:cz(s,A.transform),u_alpha_discard_threshold:0,u_trim_offset:v,u_trim_fade_range:c.paint.get("line-trim-fade-range"),u_trim_color:c.paint.get("line-trim-color").toRenderColor(c.lut).toArray01(),u_emissive_strength:c.paint.get("line-emissive-strength")}},o.cY=Ra,o.cZ=h_,o.c_=J5,o.ca=rs,o.cb=function(A){return[Math.pow(A[0],1/2.2),Math.pow(A[1],1/2.2),Math.pow(A[2],1/2.2)]},o.cc=function(A){return A({pluginStatus:as,pluginURL:xh}),Hv.on("pluginStateChange",A),A},o.cd=l0,o.ce=JB,o.cf=n0,o.cg=KP,o.ch=fh,o.ci=Zw,o.cj=wr,o.ck=wo,o.cl=Qs,o.cm=function(A){const s=A.indexOf(Md);return s>=0?A.slice(0,s):A},o.cn=function(A){return A.indexOf(Md)>=0},o.co=function(A){const s=A.indexOf(Md);return s>=0?A.slice(s+1):""},o.cp=function(A){const s=[],c=A.id;return c===void 0&&s.push({message:`layers.${c}: missing required property "id"`}),A.render===void 0&&s.push({message:`layers.${c}: missing required method "render"`}),A.renderingMode&&A.renderingMode!=="2d"&&A.renderingMode!=="3d"&&s.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),s},o.cq=function(A,s,c,d){return A.type==="custom"?new Jte(A,s):new cre[A.type](A,s,c,d)},o.cr=tl,o.cs=Hv,o.ct=Bc,o.cu=a_,o.cv=class extends Lu{constructor(A){super(A),this.current=hP}set(A,s,c){if(this.fetchUniformLocation(A,s)){for(let d=0;d<9;d++)if(c[d]!==this.current[d]){this.current=c,this.gl.uniformMatrix3fv(this.location,!1,c);break}}}},o.cw=Po,o.cx=function(A,s,c){const d=Nd(c.zoom),y=A.style.map._antialias,f=s.options.extStandardDerivativesForceOff||A.terrain&&A.terrain.exaggeration()>0;return d===0&&!y&&!f},o.cy=function(A){const s=A.pixelsPerMeter,c=s/be(1,A.center.lat),d=Qe.mat4.identity(new Float64Array(16));return Qe.mat4.translate(d,d,[A.point.x,A.point.y,0]),Qe.mat4.scale(d,d,[c,c,s]),Float32Array.from(d)},o.cz=pB,o.d=function(A){return Ne.API_TILEJSON_REGEX.test(A)},o.d$=_,o.d0=EB,o.d1=Hd,o.d2=450,o.d3=7,o.d4=Yte,o.d5=Bn,o.d6=Kg,o.d7=256,o.d8=vP,o.d9=Bh,o.dA=t5,o.dB=function(A){const s=[0,0,0],c=Qe.mat4.identity(new Float64Array(16));return Qe.mat4.multiply(c,A.pixelMatrix,A.globeMatrix),Qe.vec3.transformMat4(s,s,c),new Ot(s[0],s[1])},o.dC=function(A,s,c=!1){if(as===Ip||as===Fp||as===Lg)throw new Error("setRTLTextPlugin cannot be called multiple times.");xh=Wt.resolveURL(A),as=Ip,Td=s,Qv(),c||Gv()},o.dD=jv,o.dE=function(){JB().acquire(pM)},o.dF=function(){const A=U_;A&&(A.isPreloaded()&&A.numActive()===1?(A.release(pM),U_=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},o.dG=O_,o.dH=function(A){const s=On();if(!s)return;const c=s.delete(Sr);A&&c.catch(A).then(()=>A())},o.dI=L_,o.dJ=j6,o.dK=function(A){mM=Wt.resolveURL(A),h0||(h0=new l0(JB(),new Ic)),h0.broadcast("setDracoUrl",mM)},o.dL=G6,o.dM=function(A){u0=Wt.resolveURL(A),h0||(h0=new l0(JB(),new Ic)),h0.broadcast("setMeshoptUrl",u0)},o.dN=rr,o.dO=Qd,o.dP=zu,o.dQ=eV,o.dR=rV,o.dS=iz,o.dT=ts,o.dU=Rz,o.dV=function(A,s,c,d,y,f,v,B,I,R,b){A.createArrays(),A.tilePixelRatio=Gt/(512*A.overscaling),A.compareText={},A.iconsNeedLinear=!1;const E=A.layers[0].layout,P=A.layers[0]._unevaluatedLayout._values,T={};if(A.textSizeData.kind==="composite"){const{minZoom:H,maxZoom:Z}=A.textSizeData;T.compositeTextSizes=[P["text-size"].possiblyEvaluate(new Gi(H),B),P["text-size"].possiblyEvaluate(new Gi(Z),B)]}if(A.iconSizeData.kind==="composite"){const{minZoom:H,maxZoom:Z}=A.iconSizeData;T.compositeIconSizes=[P["icon-size"].possiblyEvaluate(new Gi(H),B),P["icon-size"].possiblyEvaluate(new Gi(Z),B)]}T.layoutTextSize=P["text-size"].possiblyEvaluate(new Gi(I+1),B),T.layoutIconSize=P["icon-size"].possiblyEvaluate(new Gi(I+1),B),T.textMaxSize=P["text-size"].possiblyEvaluate(new Gi(18),B);const F=E.get("text-rotation-alignment")==="map"&&E.get("symbol-placement")!=="point",D=E.get("text-size");let V=!1;for(const H of A.features)if(H.icon&&H.icon.nameSecondary){V=!0;break}for(const H of A.features){const Z=E.get("text-font").evaluate(H,{},B).join(","),J=D.evaluate(H,{},B),G=T.layoutTextSize.evaluate(H,{},B),te=(T.layoutIconSize.evaluate(H,{},B),{horizontal:{},vertical:void 0}),oe=H.text;let pe,we=[0,0];if(oe){const De=oe.toString(),Ie=E.get("text-letter-spacing").evaluate(H,{},B)*Ts,Oe=E.get("text-line-height").evaluate(H,{},B)*Ts,Ke=$F(De)?Ie:0,Ze=E.get("text-anchor").evaluate(H,{},B),Ye=E.get("text-variable-anchor");if(!Ye){const Tt=E.get("text-radial-offset").evaluate(H,{},B);we=Tt?Uz(Ze,[Tt*Ts,WP]):E.get("text-offset").evaluate(H,{},B).map(dt=>dt*Ts)}let et=F?"center":E.get("text-justify").evaluate(H,{},B);const at=E.get("symbol-placement")==="point",rt=at?E.get("text-max-width").evaluate(H,{},B)*Ts:1/0,_t=Tt=>{A.allowVerticalPlacement&&Rg(De)&&(te.vertical=HP(oe,s,c,y,Z,rt,Oe,Ze,Tt,Ke,we,rc.vertical,!0,G,J))};if(!F&&Ye){const Tt=et==="auto"?Ye.map(Zt=>qP(Zt)):[et];let dt=!1;for(let Zt=0;Zt<Tt.length;Zt++){const Qt=Tt[Zt];if(!te.horizontal[Qt])if(dt)te.horizontal[Qt]=te.horizontal[0];else{const Lt=HP(oe,s,c,y,Z,rt,Oe,"center",Qt,Ke,we,rc.horizontal,!1,G,J);Lt&&(te.horizontal[Qt]=Lt,dt=Lt.positionedLines.length===1)}}_t("left")}else{if(et==="auto"&&(et=qP(Ze)),at||E.get("text-writing-mode").indexOf("horizontal")>=0||!Rg(De)){const Tt=HP(oe,s,c,y,Z,rt,Oe,Ze,et,Ke,we,rc.horizontal,!1,G,J);Tt&&(te.horizontal[et]=Tt)}_t(at?"left":et)}}let Ce=!1;if(H.icon&&H.icon.namePrimary){const De=d[H.icon.namePrimary];De&&(pe=Pte(y[H.icon.namePrimary],H.icon.nameSecondary?y[H.icon.nameSecondary]:void 0,E.get("icon-offset").evaluate(H,{},B),E.get("icon-anchor").evaluate(H,{},B)),Ce=De.sdf,A.sdfIcons===void 0?A.sdfIcons=De.sdf:A.sdfIcons!==De.sdf&&an("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(De.pixelRatio!==A.pixelRatio||E.get("icon-rotate").constantOr(1)!==0)&&(A.iconsNeedLinear=!0))}const xe=Vz(te.horizontal)||te.vertical;A.iconsInText||(A.iconsInText=!!xe&&xe.iconsInText),(xe||pe)&&Ute(A,H,te,pe,d,T,G,0,we,Ce,v,B,R,b,V)}f&&A.generateCollisionDebugBuffers(I,A.collisionBoxArray)},o.dW=e0,o.dX=YB,o.dY=ms,o.dZ=I5,o.d_=yz,o.da=Du,o.db=t_,o.dc=function(A,s,c,d,y){return Er((A-s)/(c-s)*(y-d)+d,d,y)},o.dd=Cg,o.de=Xe,o.df=class{constructor(A,s,c,d){this.context=A,this.format=d,this.size=c,this.texture=A.gl.createTexture();const[y,f,v]=this.size,{gl:B}=A;B.bindTexture(B.TEXTURE_3D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(!1),B.texImage3D(B.TEXTURE_3D,0,this.format,y,f,v,0,tM(this.format),rM(this.format),s.data)}bind(A,s){const{context:c}=this,{gl:d}=c;d.bindTexture(d.TEXTURE_3D,this.texture),A!==this.minFilter&&(d.texParameteri(d.TEXTURE_3D,d.TEXTURE_MAG_FILTER,A),d.texParameteri(d.TEXTURE_3D,d.TEXTURE_MIN_FILTER,A),this.minFilter=A),s!==this.wrapS&&(d.texParameteri(d.TEXTURE_3D,d.TEXTURE_WRAP_S,s),d.texParameteri(d.TEXTURE_3D,d.TEXTURE_WRAP_T,s),this.wrapS=s)}destroy(){const{gl:A}=this.context;A.deleteTexture(this.texture),this.texture=null}},o.dg=sM,o.dh=[1,1,1],o.di=a0,o.dj=s0,o.dk=Ch,o.dl=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new Ot(1/0,1/0),max:new Ot(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(A,s=!1){const c=D5(new Ot(0,0),new Ot(Gt,Gt),A),d=[];if(s&&!MP(c,this._globalClipBounds))return d;for(const y of this._activeRegions){if(y.hiddenByOverlap||!MP(c,y))continue;const f=Wee(y.min,y.max,A);d.push({min:f.min,max:f.max,sourceId:this._sourceIds[y.priority],footprint:y.footprint,footprintTileId:y.tileId,order:y.order,clipMask:y.clipMask,clipScope:y.clipScope})}return d}setSources(A){this._setSources(A.map(s=>({getSourceId:()=>s.cache.id,getFootprints:()=>{const c=[];for(const d of s.cache.getVisibleCoordinates()){const y=s.cache.getTile(d).buckets[s.layer];y&&y.updateFootprints(d.toUnwrapped(),c)}return c},getOrder:()=>s.order,getClipMask:()=>s.clipMask,getClipScope:()=>s.clipScope})))}_addSource(A){const s=A.getFootprints();if(s.length===0)return;const c=A.getOrder(),d=A.getClipMask(),y=A.getClipScope();for(const f of s){if(!f.footprint)continue;const v=D5(f.footprint.min,f.footprint.max,f.id);this._activeRegions.push({min:v.min,max:v.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:f.id,footprint:f.footprint,order:c,clipMask:d,clipScope:y})}this._sourceIds.push(A.getSourceId())}_computeReplacement(){this._activeRegions.sort((s,c)=>s.priority-c.priority||CB(s.min,c.min)||CB(s.max,c.max)||s.order-c.order||s.clipMask-c.clipMask||function(d,y){const f=(v,B)=>v+B;return d.length-y.length||d.reduce(f,"").localeCompare(y.reduce(f,""))}(s.clipScope,c.clipScope));let A=this._activeRegions.length!==this._prevRegions.length;if(!A){let s=0;for(;!A&&s!==this._activeRegions.length;){const c=this._activeRegions[s],d=this._prevRegions[s];A=c.priority!==d.priority||!k5(c,d)||c.order!==d.order||c.clipMask!==d.clipMask||!Bs(c.clipScope,d.clipScope),++s}}if(A){++this._updateTime;for(const c of this._activeRegions)c.order!==BB&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,c.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,c.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,c.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,c.max.y));const s=c=>{const d=this._activeRegions;if(c>=d.length)return c;const y=d[c].priority;for(;c<d.length&&d[c].priority===y;)++c;return c};if(this._sourceIds.length>1){let c=0,d=s(c);for(;c!==d;){let y=c;const f=c;for(;y!==d;){const v=this._activeRegions[y];v.hiddenByOverlap=!1;for(let B=0;B<f;B++){const I=this._activeRegions[B];if(!I.hiddenByOverlap&&v.order===BB&&MP(v,I)&&(v.hiddenByOverlap=O5(v.footprint,v.tileId,I.footprint,I.tileId),v.hiddenByOverlap))break}++y}c=d,d=s(c)}}}}_setSources(A){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let s=A.length-1;s>=0;s--)this._addSource(A[s]);this._computeReplacement()}},o.dm=class{constructor(A){this._createGrid(A),this._createPoles(A)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const A of this._poleSegments)A.destroy();for(const A of this._gridSegments)A.withSkirts.destroy(),A.withoutSkirts.destroy()}_fillGridMeshWithLods(A,s){const c=new bh,d=new gs,y=[],f=A+1+2,v=s[0]+1,B=s[0]+1+(1+s.length),I=(R,b,E)=>{let P=R===f-1?R-2:R===0?R:R-1;return P+=E?24575:0,[P,b]};for(let R=0;R<f;++R)c.emplaceBack(...I(R,0,!0));for(let R=0;R<v;++R)for(let b=0;b<f;++b)c.emplaceBack(...I(b,R,(b===0||b===f-1)&&!0));for(let R=0;R<s.length;++R){const b=s[R];for(let E=0;E<f;++E)c.emplaceBack(...I(E,b,!0))}for(let R=0;R<s.length;++R){const b=d.length,E=s[R]+1+2,P=new gs;for(let D=0;D<E-1;D++){const V=D===E-2,H=V?f*(B-s.length+R-D):f;for(let Z=0;Z<f-1;Z++){const J=D*f+Z;D===0||V||Z===0||Z===f-2?(P.emplaceBack(J+1,J,J+H),P.emplaceBack(J+H,J+H+1,J+1)):(d.emplaceBack(J+1,J,J+H),d.emplaceBack(J+H,J+H+1,J+1))}}const T=Ki.simpleSegment(0,b,c.length,d.length-b);for(let D=0;D<P.uint16.length;D+=3)d.emplaceBack(P.uint16[D],P.uint16[D+1],P.uint16[D+2]);const F=Ki.simpleSegment(0,b,c.length,d.length-b);y.push({withoutSkirts:T,withSkirts:F})}return{vertices:c,indices:d,segments:y}}_createGrid(A){const s=this._fillGridMeshWithLods(w,S);this._gridSegments=s.segments,this._gridBuffer=A.createVertexBuffer(s.vertices,Pl.members),this._gridIndexBuffer=A.createIndexBuffer(s.indices,!0)}_createPoles(A){const s=new gs;for(let v=0;v<=w;v++)s.emplaceBack(0,v+1,v+2);this._poleIndexBuffer=A.createIndexBuffer(s,!0);const c=new Du,d=new Du,y=new Du,f=new Du;this._poleSegments=[];for(let v=0,B=0;v<u;v++){const I=360/(1<<v);c.emplaceBack(0,-a,0,.5,0),d.emplaceBack(0,-a,0,.5,1),y.emplaceBack(0,-a,0,.5,.5),f.emplaceBack(0,-a,0,.5,.5);for(let R=0;R<=w;R++){let b=R/w,E=0;const P=_r(0,I,b),[T,F,D]=N(bee,wee,P,a);c.emplaceBack(T,F,D,b,E),d.emplaceBack(T,F,D,b,1-E);const V=Pr(P);b=.5+.5*Math.sin(V),E=.5+.5*Math.cos(V),y.emplaceBack(T,F,D,b,E),f.emplaceBack(T,F,D,b,1-E)}this._poleSegments.push(Ki.simpleSegment(B,0,66,64)),B+=66}this._poleNorthVertexBuffer=A.createVertexBuffer(c,ll,!1),this._poleSouthVertexBuffer=A.createVertexBuffer(d,ll,!1),this._texturedPoleNorthVertexBuffer=A.createVertexBuffer(y,ll,!1),this._texturedPoleSouthVertexBuffer=A.createVertexBuffer(f,ll,!1)}getGridBuffers(A,s){return[this._gridBuffer,this._gridIndexBuffer,s?this._gridSegments[A].withSkirts:this._gridSegments[A].withoutSkirts]}getPoleBuffers(A,s){return[s?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,s?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[A]]}},o.dn=BB,o.dp=io,o.dq=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},o.dr=Cs,o.ds=je,o.dt=Q,o.du=function([A,s,c]){const d=Math.hypot(A,s,c),y=Math.atan2(A,c),f=.5*Math.PI-Math.acos(-s/d);return new Y(nn(y),nn(f))},o.dv=oM,o.dw=W,o.dx=function(A){const s=A.navigator?A.navigator.userAgent:null;return!!function(c){if(xl==null){const d=c.navigator?c.navigator.userAgent:null;xl=!!c.safari||!(!d||!(/\b(iPad|iPhone|iPod)\b/.test(d)||d.match("Safari")&&!d.match("Chrome")))}return xl}(A)&&s&&(s.match("Version/15.4")||s.match("Version/15.5")||s.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},o.dy=function(A,s){br=A,yn=s},o.dz=xP,o.e=Ne,o.e0=function(A){let s=0;if(new Uint32Array(A,0,1)[0]!==W6){const c=new Uint32Array(A,0,7),[,,d,y,f,v]=c;s=c.byteLength+y+f+v+f,(d!==A.byteLength||s>=A.byteLength)&&an("Invalid b3dm header information.")}return Y6(A,s)},o.e1=function(A,s){const c=$6(A);for(const d of c){for(const y of d.meshes)Xre(y);d.lights&&(d.lightMeshIndex=d.meshes.length,d.meshes.push(Zre(d.lights,s)))}return c},o.e2=ZB,o.e3=E6,o.e4=Ua,o.e5=function(A){Ui(),Rr!=null&&Rr.then(s=>{s.keys().then(c=>{for(let d=0;d<c.length-A;d++)s.delete(c[d])})})},o.f=function(A){return A.indexOf("mapbox:")===0},o.g=function(A,s){return Bc(xo(A,{method:"GET"}),s)},o.h=Ue,o.i=function(A){return Ne.API_STYLE_REGEX.test(A)&&!Je(A)},o.j=function(A){return decodeURIComponent(atob(A).split("").map(s=>"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)).join(""))},o.k=function(A){return btoa(encodeURIComponent(A).replace(/%([0-9A-F]{2})/g,(s,c)=>String.fromCharCode(+("0x"+c))))},o.l=xo,o.m=zi,o.n=function(A,s){return Bc(xo(A,{type:"json"}),s)},o.o=bo,o.p=function(A,s){return Bc(xo(A,{method:"POST"}),s)},o.q=Wt,o.r=ma,o.s=function(A){try{const s=self[A];return s.setItem("_mapbox_test_",1),s.removeItem("_mapbox_test_"),!0}catch{return!1}},o.t=Tc,o.u=function(){return function A(s){return s?(s^Math.random()*(16>>s/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,A)}()},o.v=function(A){return!!A&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(A)},o.w=an,o.x=Bl,o.y=2,o.z=Mz}),h(["./shared"],function(o){function _(ct){const he=ct?ct.url.toString():void 0;return he?performance.getEntriesByName(he):[]}function C(ct){if(typeof ct=="number"||typeof ct=="boolean"||typeof ct=="string"||ct==null)return JSON.stringify(ct);if(Array.isArray(ct)){let ge="[";for(const ke of ct)ge+=`${C(ke)},`;return`${ge}]`}let he="{";for(const ge of Object.keys(ct).sort())he+=`${ge}:${C(ct[ge])},`;return`${he}}`}function M(ct){let he="";for(const ge of o.bg)he+=`/${C(ct[ge])}`;return he}class L{constructor(he){this.keyCache={},this._layers={},this._layerConfigs={},he&&this.replace(he)}replace(he,ge){this._layerConfigs={},this._layers={},this.update(he,[],ge)}update(he,ge,ke){this._options=ke;for(const Ue of he)this._layerConfigs[Ue.id]=Ue,(this._layers[Ue.id]=o.cq(Ue,this.scope,null,this._options)).compileFilter(ke),this.keyCache[Ue.id]&&delete this.keyCache[Ue.id];for(const Ue of ge)delete this.keyCache[Ue],delete this._layerConfigs[Ue],delete this._layers[Ue];this.familiesBySource={};const Ne=function(Ue,Je){const lt={};for(let ut=0;ut<Ue.length;ut++){const vt=Je&&Je[Ue[ut].id]||M(Ue[ut]);Je&&(Je[Ue[ut].id]=vt);let ft=lt[vt];ft||(ft=lt[vt]=[]),ft.push(Ue[ut])}const tt=[];for(const ut in lt)tt.push(lt[ut]);return tt}(o.bd(this._layerConfigs),this.keyCache);for(const Ue of Ne){const Je=Ue.map(Rt=>this._layers[Rt.id]),lt=Je[0];if(lt.visibility==="none")continue;const tt=lt.source||"";let ut=this.familiesBySource[tt];ut||(ut=this.familiesBySource[tt]={});const vt=lt.sourceLayer||"_geojsonTileLayer";let ft=ut[vt];ft||(ft=ut[vt]=[]),ft.push(Je)}}}const z=1*o.dP;class j{constructor(he){const ge={},ke=[];for(const lt in he){const tt=he[lt],ut=ge[lt]={};for(const vt in tt.glyphs){const ft=tt.glyphs[+vt];if(!ft||ft.bitmap.width===0||ft.bitmap.height===0)continue;const Rt=ft.metrics.localGlyph?z:1,Kt={x:0,y:0,w:ft.bitmap.width+2*Rt,h:ft.bitmap.height+2*Rt};ke.push(Kt),ut[vt]=Kt}}const{w:Ne,h:Ue}=o.z(ke),Je=new o.dO({width:Ne||1,height:Ue||1});for(const lt in he){const tt=he[lt];for(const ut in tt.glyphs){const vt=tt.glyphs[+ut];if(!vt||vt.bitmap.width===0||vt.bitmap.height===0)continue;const ft=ge[lt][ut],Rt=vt.metrics.localGlyph?z:1;o.dO.copy(vt.bitmap,Je,{x:0,y:0},{x:ft.x+Rt,y:ft.y+Rt},vt.bitmap)}}this.image=Je,this.positions=ge}}o.dN(j,"GlyphAtlas");class K{constructor(he){this.tileID=new o.aA(he.tileID.overscaledZ,he.tileID.wrap,he.tileID.canonical.z,he.tileID.canonical.x,he.tileID.canonical.y),this.tileZoom=he.tileZoom,this.uid=he.uid,this.zoom=he.zoom,this.lut=he.lut,this.canonical=he.tileID.canonical,this.pixelRatio=he.pixelRatio,this.tileSize=he.tileSize,this.source=he.source,this.scope=he.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=he.showCollisionBoxes,this.collectResourceTiming=!!he.collectResourceTiming,this.promoteId=he.promoteId,this.isSymbolTile=he.isSymbolTile,this.tileTransform=o.aK(he.tileID.canonical,he.projection),this.projection=he.projection,this.brightness=he.brightness,this.extraShadowCaster=!!he.extraShadowCaster,this.tessellationStep=he.tessellationStep}parse(he,ge,ke,Ne,Ue){this.status="parsing",this.data=he,this.collisionBoxArray=new o.aQ;const Je=new o.dQ(Object.keys(he.layers).sort()),lt=new o.dR(this.tileID,this.promoteId);lt.bucketLayerIDs=[];const tt={},ut=new o.dS(256,256),vt={featureIndex:lt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:ut,availableImages:ke,brightness:this.brightness},ft=ge.familiesBySource[this.source];for(const br in ft){const yn=he.layers[br];if(!yn)continue;let xn=!1,Rr=!1,vn=!1;for(const vi of ft[br])vi[0].type==="symbol"?xn=!0:Rr=!0,vi[0].is3D()&&vi[0].type!=="model"&&(vn=!0);if(this.extraShadowCaster&&!vn||this.isSymbolTile===!0&&!xn||this.isSymbolTile===!1&&!Rr)continue;yn.version===1&&o.w(`Vector tile source "${this.source}" layer "${br}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const On=Je.encode(br),Ui=[];for(let vi=0;vi<yn.length;vi++){const zi=yn.feature(vi),Mo=lt.getId(zi,br);Ui.push({feature:zi,id:Mo,index:vi,sourceLayerIndex:On})}for(const vi of ft[br]){const zi=vi[0];(!this.extraShadowCaster||zi.is3D()&&zi.type!=="model")&&(this.isSymbolTile!==void 0&&zi.type==="symbol"!==this.isSymbolTile||zi.minzoom&&this.zoom<Math.floor(zi.minzoom)||zi.maxzoom&&this.zoom>=zi.maxzoom||zi.visibility!=="none"&&($(vi,this.zoom,vt.brightness,ke),(tt[zi.id]=zi.createBucket({index:lt.bucketLayerIDs.length,layers:vi,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:On,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep})).populate(Ui,vt,this.tileID.canonical,this.tileTransform),lt.bucketLayerIDs.push(vi.map(Mo=>Mo.id))))}}let Rt,Kt,Wt,vr;ut.trim();const wr={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Sr=()=>{if(Rt)return this.status="done",Ue(Rt);if(this.extraShadowCaster)this.status="done",Ue(null,{buckets:o.bd(tt).filter(br=>!br.isEmpty()),featureIndex:lt,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:vt.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(Kt&&Wt&&vr){const br=new j(Kt),yn=new o.dU(Wt,vr,this.lut);for(const xn in tt){const Rr=tt[xn];Rr instanceof o.aR?($(Rr.layers,this.zoom,vt.brightness,ke),o.dV(Rr,Kt,br.positions,Wt,yn.iconPositions,this.showCollisionBoxes,ke,this.tileID.canonical,this.tileZoom,this.projection,this.brightness)):Rr.hasPattern&&(Rr instanceof o.aX||Rr instanceof o.aY||Rr instanceof o.d0)&&($(Rr.layers,this.zoom,vt.brightness,ke),Rr.addFeatures(vt,this.tileID.canonical,yn.patternPositions,ke,this.tileTransform,this.brightness))}this.status="done",Ue(null,{buckets:o.bd(tt).filter(xn=>!xn.isEmpty()),featureIndex:lt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:br.image,lineAtlas:ut,imageAtlas:yn,brightness:vt.brightness})}};if(!this.extraShadowCaster){const br=o.dT(vt.glyphDependencies,Rr=>Object.keys(Rr).map(Number));Object.keys(br).length?Ne.send("getGlyphs",{uid:this.uid,stacks:br,scope:this.scope},(Rr,vn)=>{Rt||(Rt=Rr,Kt=vn,Sr())},void 0,!1,wr):Kt={};const yn=Object.keys(vt.iconDependencies);yn.length?Ne.send("getImages",{icons:yn,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(Rr,vn)=>{Rt||(Rt=Rr,Wt=vn,Sr())},void 0,!1,wr):Wt={};const xn=Object.keys(vt.patternDependencies);xn.length?Ne.send("getImages",{icons:xn,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(Rr,vn)=>{Rt||(Rt=Rr,vr=vn,Sr())},void 0,!1,wr):vr={}}Sr()}}function $(ct,he,ge,ke){const Ne=new o.a3(he,{brightness:ge});for(const Ue of ct)Ue.recalculate(Ne,ke)}class q extends o.E{constructor(he,ge,ke,Ne,Ue,Je){super(),this.actor=he,this.layerIndex=ge,this.availableImages=ke,this.loadVectorData=Ue||o.aw,this.loading={},this.loaded={},this.deduped=new o.au(he.scheduler),this.isSpriteLoaded=Ne,this.scheduler=he.scheduler,this.brightness=Je}loadTile(he,ge){const ke=he.uid,Ne=he&&he.request,Ue=Ne&&Ne.collectResourceTiming,Je=this.loading[ke]=new K(he);Je.abort=this.loadVectorData(he,(lt,tt)=>{const ut=!this.loading[ke];if(delete this.loading[ke],ut||lt||!tt)return Je.status="done",ut||(this.loaded[ke]=Je),ge(lt);const vt=tt.rawData,ft={};tt.expires&&(ft.expires=tt.expires),tt.cacheControl&&(ft.cacheControl=tt.cacheControl),Je.vectorTile=tt.vectorTile||new o.dW.VectorTile(new o.bb(vt));const Rt=()=>{Je.parse(Je.vectorTile,this.layerIndex,this.availableImages,this.actor,(Kt,Wt)=>{if(Kt||!Wt)return ge(Kt);const vr={};if(Ue){const wr=_(Ne);wr.length>0&&(vr.resourceTiming=JSON.parse(JSON.stringify(wr)))}ge(null,o.l({rawTileData:vt.slice(0)},Wt,ft,vr))})};this.isSpriteLoaded?Rt():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Rt,{type:"parseTile",isSymbolTile:he.isSymbolTile,zoom:he.tileZoom}):Rt()}),this.loaded=this.loaded||{},this.loaded[ke]=Je})}reloadTile(he,ge){const ke=this.loaded,Ne=he.uid;if(ke&&ke[Ne]){const Ue=ke[Ne];Ue.showCollisionBoxes=he.showCollisionBoxes,Ue.projection=he.projection,Ue.brightness=he.brightness,Ue.tileTransform=o.aK(he.tileID.canonical,he.projection),Ue.extraShadowCaster=he.extraShadowCaster,Ue.lut=he.lut;const Je=(lt,tt)=>{const ut=Ue.reloadCallback;ut&&(delete Ue.reloadCallback,Ue.parse(Ue.vectorTile,this.layerIndex,this.availableImages,this.actor,ut)),ge(lt,tt)};Ue.status==="parsing"?Ue.reloadCallback=Je:Ue.status==="done"&&(Ue.vectorTile?Ue.parse(Ue.vectorTile,this.layerIndex,this.availableImages,this.actor,Je):Je())}else ge(null,void 0)}abortTile(he,ge){const ke=he.uid,Ne=this.loading[ke];Ne&&(Ne.abort&&Ne.abort(),delete this.loading[ke]),ge()}removeTile(he,ge){const ke=this.loaded,Ne=he.uid;ke&&ke[Ne]&&delete ke[Ne],ge()}}class ee{loadTile(he,ge){const{uid:ke,encoding:Ne,rawImageData:Ue,padding:Je}=he,lt=ImageBitmap&&Ue instanceof ImageBitmap?this.getImageData(Ue,Je):Ue;ge(null,new o.dX(ke,lt,Ne,Je<1))}getImageData(he,ge){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(he.width,he.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=he.width,this.offscreenCanvas.height=he.height,this.offscreenCanvasContext.drawImage(he,0,0,he.width,he.height);const ke=this.offscreenCanvasContext.getImageData(-ge,-ge,he.width+2*ge,he.height+2*ge);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ke}}o.ba.setPbf(o.bb);class ie{decodeRasterArray({task:he,buffer:ge},ke){o.ba.performDecoding(ge,he).then(Ne=>{ke(null,Ne)},Ne=>{ke(Ne)})}}const fe=o.dW.VectorTileFeature.prototype.toGeoJSON;class me{constructor(he){this._feature=he,this.extent=o.ab,this.type=he.type,this.properties=he.tags,"id"in he&&!isNaN(he.id)&&(this.id=parseInt(he.id,10))}loadGeometry(){if(this._feature.type===1){const he=[];for(const ge of this._feature.geometry)he.push([new o.P(ge[0],ge[1])]);return he}{const he=[];for(const ge of this._feature.geometry){const ke=[];for(const Ne of ge)ke.push(new o.P(Ne[0],Ne[1]));he.push(ke)}return he}}toGeoJSON(he,ge,ke){return fe.call(this,he,ge,ke)}}class ye{constructor(he){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.ab,this.length=he.length,this._features=he}feature(he){return new me(this._features[he])}}const se=64/4096,re=128;class de{constructor(){this.features=new Map}clear(){this.features.clear()}load(he=[],ge){for(const ke of he){const Ne=ke.id;if(Ne==null)continue;let Ue=this.features.get(Ne);Ue&&this.updateCache(Ue,ge),ke.geometry?(Ue=ve(ke),this.updateCache(Ue,ge),this.features.set(Ne,Ue)):this.features.delete(Ne),this.updateCache(Ue,ge)}}updateCache(he,ge){for(const{canonical:ke,uid:Ne}of Object.values(ge)){const{z:Ue,x:Je,y:lt}=ke;_e(he,Math.pow(2,Ue),Je,lt)&&delete ge[Ne]}}getTile(he,ge,ke){const Ne=Math.pow(2,he),Ue=[];for(const Je of this.features.values())_e(Je,Ne,ge,ke)&&Ue.push(Xt(Je,Ne,ge,ke));return{features:Ue}}getFeatures(){return[...this.features.values()]}}function _e({minX:ct,minY:he,maxX:ge,maxY:ke},Ne,Ue,Je){return ct<(Ue+1+se)/Ne&&he<(Je+1+se)/Ne&&ge>(Ue-se)/Ne&&ke>(Je-se)/Ne}function ve(ct){const{id:he,geometry:ge,properties:ke}=ct;if(!ge)return;if(ge.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:Ne,coordinates:Ue}=ge,Je={id:he,type:1,geometry:[],tags:ke,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},lt=Je.geometry;if(Ne==="Point")Pe(Ue,lt,Je);else if(Ne==="MultiPoint")for(const tt of Ue)Pe(tt,lt,Je);else if(Ne==="LineString")Je.type=2,Ee(Ue,lt,Je);else if(Ne==="MultiLineString")Je.type=2,Ht(Ue,lt,Je);else if(Ne==="Polygon")Je.type=3,Ht(Ue,lt,Je,!0);else{if(Ne!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");Je.type=3;for(const tt of Ue)Ht(tt,lt,Je,!0)}return Je}function Pe([ct,he],ge,ke){const Ne=o.am(ct);let Ue=o.at(he);Ue=Ue<0?0:Ue>1?1:Ue,ge.push(Ne,Ue),ke.minX=Math.min(ke.minX,Ne),ke.minY=Math.min(ke.minY,Ue),ke.maxX=Math.max(ke.maxX,Ne),ke.maxY=Math.max(ke.maxY,Ue)}function Ee(ct,he,ge,ke=!1,Ne=!1){const Ue=[];for(const Je of ct)Pe(Je,Ue,ge);he.push(Ue),ke&&function(Je,lt){let tt=0;for(let ut=0,vt=Je.length,ft=vt-2;ut<vt;ft=ut,ut+=2)tt+=(Je[ut]-Je[ft])*(Je[ut+1]+Je[ft+1]);if(tt>0===lt)for(let ut=0,vt=Je.length;ut<vt/2;ut+=2){const ft=Je[ut],Rt=Je[ut+1];Je[ut]=Je[vt-2-ut],Je[ut+1]=Je[vt-1-ut],Je[vt-2-ut]=ft,Je[vt-1-ut]=Rt}}(Ue,Ne)}function Ht(ct,he,ge,ke=!1){for(let Ne=0;Ne<ct.length;Ne++)Ee(ct[Ne],he,ge,ke,Ne===0)}function Xt(ct,he,ge,ke){const{id:Ne,type:Ue,geometry:Je,tags:lt}=ct,tt=[];if(Ue===1)(function(ut,vt,ft,Rt,Kt){for(let Wt=0;Wt<ut.length;Wt+=2){const vr=Math.round(o.ab*(ut[Wt+0]*vt-ft)),wr=Math.round(o.ab*(ut[Wt+1]*vt-Rt));Kt.push([vr,wr])}})(Je,he,ge,ke,tt);else for(const ut of Je)gt(ut,he,ge,ke,tt);return{id:Ne,type:Ue,geometry:tt,tags:lt}}function gt(ct,he,ge,ke,Ne){const Ue=-re,Je=o.ab+re;let lt;for(let tt=0;tt<ct.length-2;tt+=2){let ut=Math.round(o.ab*(ct[tt+0]*he-ge)),vt=Math.round(o.ab*(ct[tt+1]*he-ke)),ft=Math.round(o.ab*(ct[tt+2]*he-ge)),Rt=Math.round(o.ab*(ct[tt+3]*he-ke));const Kt=ft-ut,Wt=Rt-vt;ut<Ue&&ft<Ue||(ut<Ue?(vt+=Math.round(Wt*((Ue-ut)/Kt)),ut=Ue):ft<Ue&&(Rt=vt+Math.round(Wt*((Ue-ut)/Kt)),ft=Ue),vt<Ue&&Rt<Ue||(vt<Ue?(ut+=Math.round(Kt*((Ue-vt)/Wt)),vt=Ue):Rt<Ue&&(ft=ut+Math.round(Kt*((Ue-vt)/Wt)),Rt=Ue),ut>=Je&&ft>=Je||(ut>=Je?(vt+=Math.round(Wt*((Je-ut)/Kt)),ut=Je):ft>=Je&&(Rt=vt+Math.round(Wt*((Je-ut)/Kt)),ft=Je),vt>=Je&&Rt>=Je||(vt>=Je?(ut+=Math.round(Kt*((Je-vt)/Wt)),vt=Je):Rt>=Je&&(ft=ut+Math.round(Kt*((Je-vt)/Wt)),Rt=Je),lt&&ut===lt[lt.length-1][0]&&vt===lt[lt.length-1][1]||(lt=[[ut,vt]],Ne.push(lt)),lt.push([ft,Rt])))))}}var jt,Mt,Yt,ht={exports:{}},lr=function(){if(Yt)return ht.exports;Yt=1;var ct=o.d_(),he=function(){if(Mt)return jt;Mt=1;var vt=o.dY(),ft=o.dZ().VectorTileFeature;function Rt(Wt,vr){this.options=vr||{},this.features=Wt,this.length=Wt.length}function Kt(Wt,vr){this.id=typeof Wt.id=="number"?Wt.id:void 0,this.type=Wt.type,this.rawGeometry=Wt.type===1?[Wt.geometry]:Wt.geometry,this.properties=Wt.tags,this.extent=vr||4096}return jt=Rt,Rt.prototype.feature=function(Wt){return new Kt(this.features[Wt],this.options.extent)},Kt.prototype.loadGeometry=function(){var Wt=this.rawGeometry;this.geometry=[];for(var vr=0;vr<Wt.length;vr++){for(var wr=Wt[vr],Sr=[],br=0;br<wr.length;br++)Sr.push(new vt(wr[br][0],wr[br][1]));this.geometry.push(Sr)}return this.geometry},Kt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Wt=this.geometry,vr=1/0,wr=-1/0,Sr=1/0,br=-1/0,yn=0;yn<Wt.length;yn++)for(var xn=Wt[yn],Rr=0;Rr<xn.length;Rr++){var vn=xn[Rr];vr=Math.min(vr,vn.x),wr=Math.max(wr,vn.x),Sr=Math.min(Sr,vn.y),br=Math.max(br,vn.y)}return[vr,Sr,wr,br]},Kt.prototype.toGeoJSON=ft.prototype.toGeoJSON,jt}();function ge(vt){var ft=new ct;return function(Rt,Kt){for(var Wt in Rt.layers)Kt.writeMessage(3,ke,Rt.layers[Wt])}(vt,ft),ft.finish()}function ke(vt,ft){var Rt;ft.writeVarintField(15,vt.version||1),ft.writeStringField(1,vt.name||""),ft.writeVarintField(5,vt.extent||4096);var Kt={keys:[],values:[],keycache:{},valuecache:{}};for(Rt=0;Rt<vt.length;Rt++)Kt.feature=vt.feature(Rt),ft.writeMessage(2,Ne,Kt);var Wt=Kt.keys;for(Rt=0;Rt<Wt.length;Rt++)ft.writeStringField(3,Wt[Rt]);var vr=Kt.values;for(Rt=0;Rt<vr.length;Rt++)ft.writeMessage(4,ut,vr[Rt])}function Ne(vt,ft){var Rt=vt.feature;Rt.id!==void 0&&ft.writeVarintField(1,Rt.id),ft.writeMessage(2,Ue,vt),ft.writeVarintField(3,Rt.type),ft.writeMessage(4,tt,Rt)}function Ue(vt,ft){var Rt=vt.feature,Kt=vt.keys,Wt=vt.values,vr=vt.keycache,wr=vt.valuecache;for(var Sr in Rt.properties){var br=Rt.properties[Sr],yn=vr[Sr];if(br!==null){yn===void 0&&(Kt.push(Sr),vr[Sr]=yn=Kt.length-1),ft.writeVarint(yn);var xn=typeof br;xn!=="string"&&xn!=="boolean"&&xn!=="number"&&(br=JSON.stringify(br));var Rr=xn+":"+br,vn=wr[Rr];vn===void 0&&(Wt.push(br),wr[Rr]=vn=Wt.length-1),ft.writeVarint(vn)}}}function Je(vt,ft){return(ft<<3)+(7&vt)}function lt(vt){return vt<<1^vt>>31}function tt(vt,ft){for(var Rt=vt.loadGeometry(),Kt=vt.type,Wt=0,vr=0,wr=Rt.length,Sr=0;Sr<wr;Sr++){var br=Rt[Sr],yn=1;Kt===1&&(yn=br.length),ft.writeVarint(Je(1,yn));for(var xn=Kt===3?br.length-1:br.length,Rr=0;Rr<xn;Rr++){Rr===1&&Kt!==1&&ft.writeVarint(Je(2,xn-1));var vn=br[Rr].x-Wt,On=br[Rr].y-vr;ft.writeVarint(lt(vn)),ft.writeVarint(lt(On)),Wt+=vn,vr+=On}Kt===3&&ft.writeVarint(Je(7,1))}}function ut(vt,ft){var Rt=typeof vt;Rt==="string"?ft.writeStringField(1,vt):Rt==="boolean"?ft.writeBooleanField(7,vt):Rt==="number"&&(vt%1!=0?ft.writeDoubleField(3,vt):vt<0?ft.writeSVarintField(6,vt):ft.writeVarintField(5,vt))}return ht.exports=ge,ht.exports.fromVectorTileJs=ge,ht.exports.fromGeojsonVt=function(vt,ft){ft=ft||{};var Rt={};for(var Kt in vt)Rt[Kt]=new he(vt[Kt].features,ft),Rt[Kt].name=Kt,Rt[Kt].version=ft.version,Rt[Kt].extent=ft.extent;return ge({layers:Rt})},ht.exports.GeoJSONWrapper=he,ht.exports}(),ir=o.d$(lr);const $t={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ct=>ct},Vt=Math.fround||(Dr=new Float32Array(1),ct=>(Dr[0]=+ct,Dr[0]));var Dr;const kr=3,Zr=5,Lr=6;class Ao{constructor(he){this.options=Object.assign(Object.create($t),he),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(he){const{log:ge,minZoom:ke,maxZoom:Ne}=this.options;ge&&console.time("total time");const Ue=`prepare ${he.length} points`;ge&&console.time(Ue),this.points=he;const Je=[];for(let tt=0;tt<he.length;tt++){const ut=he[tt];if(!ut.geometry)continue;const[vt,ft]=ut.geometry.coordinates,Rt=Vt(no(vt)),Kt=Vt(Io(ft));Je.push(Rt,Kt,1/0,tt,-1,1),this.options.reduce&&Je.push(0)}let lt=this.trees[Ne+1]=this._createTree(Je);ge&&console.timeEnd(Ue);for(let tt=Ne;tt>=ke;tt--){const ut=+Date.now();lt=this.trees[tt]=this._createTree(this._cluster(lt,tt)),ge&&console.log("z%d: %d clusters in %dms",tt,lt.numItems,+Date.now()-ut)}return ge&&console.timeEnd("total time"),this}getClusters(he,ge){let ke=((he[0]+180)%360+360)%360-180;const Ne=Math.max(-90,Math.min(90,he[1]));let Ue=he[2]===180?180:((he[2]+180)%360+360)%360-180;const Je=Math.max(-90,Math.min(90,he[3]));if(he[2]-he[0]>=360)ke=-180,Ue=180;else if(ke>Ue){const ft=this.getClusters([ke,Ne,180,Je],ge),Rt=this.getClusters([-180,Ne,Ue,Je],ge);return ft.concat(Rt)}const lt=this.trees[this._limitZoom(ge)],tt=lt.range(no(ke),Io(Je),no(Ue),Io(Ne)),ut=lt.data,vt=[];for(const ft of tt){const Rt=this.stride*ft;vt.push(ut[Rt+Zr]>1?ji(ut,Rt,this.clusterProps):this.points[ut[Rt+kr]])}return vt}getChildren(he){const ge=this._getOriginId(he),ke=this._getOriginZoom(he),Ne="No cluster with the specified id.",Ue=this.trees[ke];if(!Ue)throw new Error(Ne);const Je=Ue.data;if(ge*this.stride>=Je.length)throw new Error(Ne);const lt=this.options.radius/(this.options.extent*Math.pow(2,ke-1)),tt=Ue.within(Je[ge*this.stride],Je[ge*this.stride+1],lt),ut=[];for(const vt of tt){const ft=vt*this.stride;Je[ft+4]===he&&ut.push(Je[ft+Zr]>1?ji(Je,ft,this.clusterProps):this.points[Je[ft+kr]])}if(ut.length===0)throw new Error(Ne);return ut}getLeaves(he,ge,ke){const Ne=[];return this._appendLeaves(Ne,he,ge=ge||10,ke=ke||0,0),Ne}getTile(he,ge,ke){const Ne=this.trees[this._limitZoom(he)],Ue=Math.pow(2,he),{extent:Je,radius:lt}=this.options,tt=lt/Je,ut=(ke-tt)/Ue,vt=(ke+1+tt)/Ue,ft={features:[]};return this._addTileFeatures(Ne.range((ge-tt)/Ue,ut,(ge+1+tt)/Ue,vt),Ne.data,ge,ke,Ue,ft),ge===0&&this._addTileFeatures(Ne.range(1-tt/Ue,ut,1,vt),Ne.data,Ue,ke,Ue,ft),ge===Ue-1&&this._addTileFeatures(Ne.range(0,ut,tt/Ue,vt),Ne.data,-1,ke,Ue,ft),ft.features.length?ft:null}getClusterExpansionZoom(he){let ge=this._getOriginZoom(he)-1;for(;ge<=this.options.maxZoom;){const ke=this.getChildren(he);if(ge++,ke.length!==1)break;he=ke[0].properties.cluster_id}return ge}_appendLeaves(he,ge,ke,Ne,Ue){const Je=this.getChildren(ge);for(const lt of Je){const tt=lt.properties;if(tt&&tt.cluster?Ue+tt.point_count<=Ne?Ue+=tt.point_count:Ue=this._appendLeaves(he,tt.cluster_id,ke,Ne,Ue):Ue<Ne?Ue++:he.push(lt),he.length===ke)break}return Ue}_createTree(he){const ge=new o.by(he.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ke=0;ke<he.length;ke+=this.stride)ge.add(he[ke],he[ke+1]);return ge.finish(),ge.data=he,ge}_addTileFeatures(he,ge,ke,Ne,Ue,Je){for(const lt of he){const tt=lt*this.stride,ut=ge[tt+Zr]>1;let vt,ft,Rt;if(ut)vt=Qe(ge,tt,this.clusterProps),ft=ge[tt],Rt=ge[tt+1];else{const vr=this.points[ge[tt+kr]];vt=vr.properties;const[wr,Sr]=vr.geometry.coordinates;ft=no(wr),Rt=Io(Sr)}const Kt={type:1,geometry:[[Math.round(this.options.extent*(ft*Ue-ke)),Math.round(this.options.extent*(Rt*Ue-Ne))]],tags:vt};let Wt;Wt=ut||this.options.generateId?ge[tt+kr]:this.points[ge[tt+kr]].id,Wt!==void 0&&(Kt.id=Wt),Je.features.push(Kt)}}_limitZoom(he){return Math.max(this.options.minZoom,Math.min(Math.floor(+he),this.options.maxZoom+1))}_cluster(he,ge){const{radius:ke,extent:Ne,reduce:Ue,minPoints:Je}=this.options,lt=ke/(Ne*Math.pow(2,ge)),tt=he.data,ut=[],vt=this.stride;for(let ft=0;ft<tt.length;ft+=vt){if(tt[ft+2]<=ge)continue;tt[ft+2]=ge;const Rt=tt[ft],Kt=tt[ft+1],Wt=he.within(tt[ft],tt[ft+1],lt),vr=tt[ft+Zr];let wr=vr;for(const Sr of Wt){const br=Sr*vt;tt[br+2]>ge&&(wr+=tt[br+Zr])}if(wr>vr&&wr>=Je){let Sr,br=Rt*vr,yn=Kt*vr,xn=-1;const Rr=(ft/vt<<5)+(ge+1)+this.points.length;for(const vn of Wt){const On=vn*vt;if(tt[On+2]<=ge)continue;tt[On+2]=ge;const Ui=tt[On+Zr];br+=tt[On]*Ui,yn+=tt[On+1]*Ui,tt[On+4]=Rr,Ue&&(Sr||(Sr=this._map(tt,ft,!0),xn=this.clusterProps.length,this.clusterProps.push(Sr)),Ue(Sr,this._map(tt,On)))}tt[ft+4]=Rr,ut.push(br/wr,yn/wr,1/0,Rr,-1,wr),Ue&&ut.push(xn)}else{for(let Sr=0;Sr<vt;Sr++)ut.push(tt[ft+Sr]);if(wr>1)for(const Sr of Wt){const br=Sr*vt;if(!(tt[br+2]<=ge)){tt[br+2]=ge;for(let yn=0;yn<vt;yn++)ut.push(tt[br+yn])}}}}return ut}_getOriginId(he){return he-this.points.length>>5}_getOriginZoom(he){return(he-this.points.length)%32}_map(he,ge,ke){if(he[ge+Zr]>1){const Je=this.clusterProps[he[ge+Lr]];return ke?Object.assign({},Je):Je}const Ne=this.points[he[ge+kr]].properties,Ue=this.options.map(Ne);return ke&&Ue===Ne?Object.assign({},Ue):Ue}}function ji(ct,he,ge){return{type:"Feature",id:ct[he+kr],properties:Qe(ct,he,ge),geometry:{type:"Point",coordinates:[(ke=ct[he],360*(ke-.5)),ms(ct[he+1])]}};var ke}function Qe(ct,he,ge){const ke=ct[he+Zr],Ne=ke>=1e4?`${Math.round(ke/1e3)}k`:ke>=1e3?Math.round(ke/100)/10+"k":ke,Ue=ct[he+Lr],Je=Ue===-1?{}:Object.assign({},ge[Ue]);return Object.assign(Je,{cluster:!0,cluster_id:ct[he+kr],point_count:ke,point_count_abbreviated:Ne})}function no(ct){return ct/360+.5}function Io(ct){const he=Math.sin(ct*Math.PI/180),ge=.5-.25*Math.log((1+he)/(1-he))/Math.PI;return ge<0?0:ge>1?1:ge}function ms(ct){const he=(180-360*ct)*Math.PI/180;return 360*Math.atan(Math.exp(he))/Math.PI-90}function Ot(ct,he,ge,ke){let Ne=ke;const Ue=he+(ge-he>>1);let Je,lt=ge-he;const tt=ct[he],ut=ct[he+1],vt=ct[ge],ft=ct[ge+1];for(let Rt=he+3;Rt<ge;Rt+=3){const Kt=Bs(ct[Rt],ct[Rt+1],tt,ut,vt,ft);if(Kt>Ne)Je=Rt,Ne=Kt;else if(Kt===Ne){const Wt=Math.abs(Rt-Ue);Wt<lt&&(Je=Rt,lt=Wt)}}Ne>ke&&(Je-he>3&&Ot(ct,he,Je,ke),ct[Je+2]=Ne,ge-Je>3&&Ot(ct,Je,ge,ke))}function Bs(ct,he,ge,ke,Ne,Ue){let Je=Ne-ge,lt=Ue-ke;if(Je!==0||lt!==0){const tt=((ct-ge)*Je+(he-ke)*lt)/(Je*Je+lt*lt);tt>1?(ge=Ne,ke=Ue):tt>0&&(ge+=Je*tt,ke+=lt*tt)}return Je=ct-ge,lt=he-ke,Je*Je+lt*lt}function Oi(ct,he,ge,ke){const Ne={id:ct??null,type:he,geometry:ge,tags:ke,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(he==="Point"||he==="MultiPoint"||he==="LineString")Fo(Ne,ge);else if(he==="Polygon")Fo(Ne,ge[0]);else if(he==="MultiLineString")for(const Ue of ge)Fo(Ne,Ue);else if(he==="MultiPolygon")for(const Ue of ge)Fo(Ne,Ue[0]);return Ne}function Fo(ct,he){for(let ge=0;ge<he.length;ge+=3)ct.minX=Math.min(ct.minX,he[ge]),ct.minY=Math.min(ct.minY,he[ge+1]),ct.maxX=Math.max(ct.maxX,he[ge]),ct.maxY=Math.max(ct.maxY,he[ge+1])}function Pr(ct,he,ge,ke){if(!he.geometry)return;const Ne=he.geometry.coordinates;if(Ne&&Ne.length===0)return;const Ue=he.geometry.type,Je=Math.pow(ge.tolerance/((1<<ge.maxZoom)*ge.extent),2);let lt=[],tt=he.id;if(ge.promoteId?tt=he.properties[ge.promoteId]:ge.generateId&&(tt=ke||0),Ue==="Point")nn(Ne,lt);else if(Ue==="MultiPoint")for(const ut of Ne)nn(ut,lt);else if(Ue==="LineString")Ji(Ne,lt,Je,!1);else if(Ue==="MultiLineString"){if(ge.lineMetrics){for(const ut of Ne)lt=[],Ji(ut,lt,Je,!1),ct.push(Oi(tt,"LineString",lt,he.properties));return}Po(Ne,lt,Je,!1)}else if(Ue==="Polygon")Po(Ne,lt,Je,!0);else{if(Ue!=="MultiPolygon"){if(Ue==="GeometryCollection"){for(const ut of he.geometry.geometries)Pr(ct,{id:tt,geometry:ut,properties:he.properties},ge,ke);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const ut of Ne){const vt=[];Po(ut,vt,Je,!0),lt.push(vt)}}ct.push(Oi(tt,Ue,lt,he.properties))}function nn(ct,he){he.push(io(ct[0]),Cs(ct[1]),0)}function Ji(ct,he,ge,ke){let Ne,Ue,Je=0;for(let tt=0;tt<ct.length;tt++){const ut=io(ct[tt][0]),vt=Cs(ct[tt][1]);he.push(ut,vt,0),tt>0&&(Je+=ke?(Ne*vt-ut*Ue)/2:Math.sqrt(Math.pow(ut-Ne,2)+Math.pow(vt-Ue,2))),Ne=ut,Ue=vt}const lt=he.length-3;he[2]=1,Ot(he,0,lt,ge),he[lt+2]=1,he.size=Math.abs(Je),he.start=0,he.end=he.size}function Po(ct,he,ge,ke){for(let Ne=0;Ne<ct.length;Ne++){const Ue=[];Ji(ct[Ne],Ue,ge,ke),he.push(Ue)}}function io(ct){return ct/360+.5}function Cs(ct){const he=Math.sin(ct*Math.PI/180),ge=.5-.25*Math.log((1+he)/(1-he))/Math.PI;return ge<0?0:ge>1?1:ge}function Er(ct,he,ge,ke,Ne,Ue,Je,lt){if(ke/=he,Ue>=(ge/=he)&&Je<ke)return ct;if(Je<ge||Ue>=ke)return null;const tt=[];for(const ut of ct){const vt=ut.geometry;let ft=ut.type;const Rt=Ne===0?ut.minX:ut.minY,Kt=Ne===0?ut.maxX:ut.maxY;if(Rt>=ge&&Kt<ke){tt.push(ut);continue}if(Kt<ge||Rt>=ke)continue;let Wt=[];if(ft==="Point"||ft==="MultiPoint")Di(vt,Wt,ge,ke,Ne);else if(ft==="LineString")yi(vt,Wt,ge,ke,Ne,!1,lt.lineMetrics);else if(ft==="MultiLineString")xo(vt,Wt,ge,ke,Ne,!1);else if(ft==="Polygon")xo(vt,Wt,ge,ke,Ne,!0);else if(ft==="MultiPolygon")for(const vr of vt){const wr=[];xo(vr,wr,ge,ke,Ne,!0),wr.length&&Wt.push(wr)}if(Wt.length){if(lt.lineMetrics&&ft==="LineString"){for(const vr of Wt)tt.push(Oi(ut.id,ft,vr,ut.tags));continue}ft!=="LineString"&&ft!=="MultiLineString"||(Wt.length===1?(ft="LineString",Wt=Wt[0]):ft="MultiLineString"),ft!=="Point"&&ft!=="MultiPoint"||(ft=Wt.length===3?"Point":"MultiPoint"),tt.push(Oi(ut.id,ft,Wt,ut.tags))}}return tt.length?tt:null}function Di(ct,he,ge,ke,Ne){for(let Ue=0;Ue<ct.length;Ue+=3){const Je=ct[Ue+Ne];Je>=ge&&Je<=ke&&es(he,ct[Ue],ct[Ue+1],ct[Ue+2])}}function yi(ct,he,ge,ke,Ne,Ue,Je){let lt=Go(ct);const tt=Ne===0?wc:Ra;let ut,vt,ft=ct.start;for(let wr=0;wr<ct.length-3;wr+=3){const Sr=ct[wr],br=ct[wr+1],yn=ct[wr+2],xn=ct[wr+3],Rr=ct[wr+4],vn=Ne===0?Sr:br,On=Ne===0?xn:Rr;let Ui=!1;Je&&(ut=Math.sqrt(Math.pow(Sr-xn,2)+Math.pow(br-Rr,2))),vn<ge?On>ge&&(vt=tt(lt,Sr,br,xn,Rr,ge),Je&&(lt.start=ft+ut*vt)):vn>ke?On<ke&&(vt=tt(lt,Sr,br,xn,Rr,ke),Je&&(lt.start=ft+ut*vt)):es(lt,Sr,br,yn),On<ge&&vn>=ge&&(vt=tt(lt,Sr,br,xn,Rr,ge),Ui=!0),On>ke&&vn<=ke&&(vt=tt(lt,Sr,br,xn,Rr,ke),Ui=!0),!Ue&&Ui&&(Je&&(lt.end=ft+ut*vt),he.push(lt),lt=Go(ct)),Je&&(ft+=ut)}let Rt=ct.length-3;const Kt=ct[Rt],Wt=ct[Rt+1],vr=Ne===0?Kt:Wt;vr>=ge&&vr<=ke&&es(lt,Kt,Wt,ct[Rt+2]),Rt=lt.length-3,Ue&&Rt>=3&&(lt[Rt]!==lt[0]||lt[Rt+1]!==lt[1])&&es(lt,lt[0],lt[1],lt[2]),lt.length&&he.push(lt)}function Go(ct){const he=[];return he.size=ct.size,he.start=ct.start,he.end=ct.end,he}function xo(ct,he,ge,ke,Ne,Ue){for(const Je of ct)yi(Je,he,ge,ke,Ne,Ue,!1)}function es(ct,he,ge,ke){ct.push(he,ge,ke)}function wc(ct,he,ge,ke,Ne,Ue){const Je=(Ue-he)/(ke-he);return es(ct,Ue,ge+(Ne-ge)*Je,1),Je}function Ra(ct,he,ge,ke,Ne,Ue){const Je=(Ue-ge)/(Ne-ge);return es(ct,he+(ke-he)*Je,Ue,1),Je}function Wl(ct,he){const ge=[];for(let ke=0;ke<ct.length;ke++){const Ne=ct[ke],Ue=Ne.type;let Je;if(Ue==="Point"||Ue==="MultiPoint"||Ue==="LineString")Je=ka(Ne.geometry,he);else if(Ue==="MultiLineString"||Ue==="Polygon"){Je=[];for(const lt of Ne.geometry)Je.push(ka(lt,he))}else if(Ue==="MultiPolygon"){Je=[];for(const lt of Ne.geometry){const tt=[];for(const ut of lt)tt.push(ka(ut,he));Je.push(tt)}}ge.push(Oi(Ne.id,Ue,Je,Ne.tags))}return ge}function ka(ct,he){const ge=[];ge.size=ct.size,ct.start!==void 0&&(ge.start=ct.start,ge.end=ct.end);for(let ke=0;ke<ct.length;ke+=3)ge.push(ct[ke]+he,ct[ke+1],ct[ke+2]);return ge}function ts(ct,he){if(ct.transformed)return ct;const ge=1<<ct.z,ke=ct.x,Ne=ct.y;for(const Ue of ct.features){const Je=Ue.geometry,lt=Ue.type;if(Ue.geometry=[],lt===1)for(let tt=0;tt<Je.length;tt+=2)Ue.geometry.push(tl(Je[tt],Je[tt+1],he,ge,ke,Ne));else for(let tt=0;tt<Je.length;tt++){const ut=[];for(let vt=0;vt<Je[tt].length;vt+=2)ut.push(tl(Je[tt][vt],Je[tt][vt+1],he,ge,ke,Ne));Ue.geometry.push(ut)}}return ct.transformed=!0,ct}function tl(ct,he,ge,ke,Ne,Ue){return[Math.round(ge*(ct*ke-Ne)),Math.round(ge*(he*ke-Ue))]}function Qs(ct,he,ge,ke,Ne){const Ue=he===Ne.maxZoom?0:Ne.tolerance/((1<<he)*Ne.extent),Je={features:[],numPoints:0,numSimplified:0,numFeatures:ct.length,source:null,x:ge,y:ke,z:he,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const lt of ct)_l(Je,lt,Ue,Ne);return Je}function _l(ct,he,ge,ke){const Ne=he.geometry,Ue=he.type,Je=[];if(ct.minX=Math.min(ct.minX,he.minX),ct.minY=Math.min(ct.minY,he.minY),ct.maxX=Math.max(ct.maxX,he.maxX),ct.maxY=Math.max(ct.maxY,he.maxY),Ue==="Point"||Ue==="MultiPoint")for(let lt=0;lt<Ne.length;lt+=3)Je.push(Ne[lt],Ne[lt+1]),ct.numPoints++,ct.numSimplified++;else if(Ue==="LineString")an(Je,Ne,ct,ge,!1,!1);else if(Ue==="MultiLineString"||Ue==="Polygon")for(let lt=0;lt<Ne.length;lt++)an(Je,Ne[lt],ct,ge,Ue==="Polygon",lt===0);else if(Ue==="MultiPolygon")for(let lt=0;lt<Ne.length;lt++){const tt=Ne[lt];for(let ut=0;ut<tt.length;ut++)an(Je,tt[ut],ct,ge,!0,ut===0)}if(Je.length){let lt=he.tags||null;if(Ue==="LineString"&&ke.lineMetrics){lt={};for(const ut in he.tags)lt[ut]=he.tags[ut];lt.mapbox_clip_start=Ne.start/Ne.size,lt.mapbox_clip_end=Ne.end/Ne.size}const tt={geometry:Je,type:Ue==="Polygon"||Ue==="MultiPolygon"?3:Ue==="LineString"||Ue==="MultiLineString"?2:1,tags:lt};he.id!==null&&(tt.id=he.id),ct.features.push(tt)}}function an(ct,he,ge,ke,Ne,Ue){const Je=ke*ke;if(ke>0&&he.size<(Ne?Je:ke))return void(ge.numPoints+=he.length/3);const lt=[];for(let tt=0;tt<he.length;tt+=3)(ke===0||he[tt+2]>Je)&&(ge.numSimplified++,lt.push(he[tt],he[tt+1])),ge.numPoints++;Ne&&function(tt,ut){let vt=0;for(let ft=0,Rt=tt.length,Kt=Rt-2;ft<Rt;Kt=ft,ft+=2)vt+=(tt[ft]-tt[Kt])*(tt[ft+1]+tt[Kt+1]);if(vt>0===ut)for(let ft=0,Rt=tt.length;ft<Rt/2;ft+=2){const Kt=tt[ft],Wt=tt[ft+1];tt[ft]=tt[Rt-2-ft],tt[ft+1]=tt[Rt-1-ft],tt[Rt-2-ft]=Kt,tt[Rt-1-ft]=Wt}}(lt,Ue),ct.push(lt)}const Hs={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class js{constructor(he,ge){const ke=(ge=this.options=function(Ue,Je){for(const lt in Je)Ue[lt]=Je[lt];return Ue}(Object.create(Hs),ge)).debug;if(ke&&console.time("preprocess data"),ge.maxZoom<0||ge.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ge.promoteId&&ge.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ne=function(Ue,Je){const lt=[];if(Ue.type==="FeatureCollection")for(let tt=0;tt<Ue.features.length;tt++)Pr(lt,Ue.features[tt],Je,tt);else Pr(lt,Ue.type==="Feature"?Ue:{geometry:Ue},Je);return lt}(he,ge);this.tiles={},this.tileCoords=[],ke&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ge.indexMaxZoom,ge.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ne=function(Ue,Je){const lt=Je.buffer/Je.extent;let tt=Ue;const ut=Er(Ue,1,-1-lt,lt,0,-1,2,Je),vt=Er(Ue,1,1-lt,2+lt,0,-1,2,Je);return(ut||vt)&&(tt=Er(Ue,1,-lt,1+lt,0,-1,2,Je)||[],ut&&(tt=Wl(ut,1).concat(tt)),vt&&(tt=tt.concat(Wl(vt,-1)))),tt}(Ne,ge),Ne.length&&this.splitTile(Ne,0,0,0),ke&&(Ne.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(he,ge,ke,Ne,Ue,Je,lt){const tt=[he,ge,ke,Ne],ut=this.options,vt=ut.debug;for(;tt.length;){Ne=tt.pop(),ke=tt.pop(),ge=tt.pop(),he=tt.pop();const ft=1<<ge,Rt=rs(ge,ke,Ne);let Kt=this.tiles[Rt];if(!Kt&&(vt>1&&console.time("creation"),Kt=this.tiles[Rt]=Qs(he,ge,ke,Ne,ut),this.tileCoords.push({z:ge,x:ke,y:Ne}),vt)){vt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ge,ke,Ne,Kt.numFeatures,Kt.numPoints,Kt.numSimplified),console.timeEnd("creation"));const Ui=`z${ge}`;this.stats[Ui]=(this.stats[Ui]||0)+1,this.total++}if(Kt.source=he,Ue==null){if(ge===ut.indexMaxZoom||Kt.numPoints<=ut.indexMaxPoints)continue}else{if(ge===ut.maxZoom||ge===Ue)continue;if(Ue!=null){const Ui=Ue-ge;if(ke!==Je>>Ui||Ne!==lt>>Ui)continue}}if(Kt.source=null,he.length===0)continue;vt>1&&console.time("clipping");const Wt=.5*ut.buffer/ut.extent,vr=.5-Wt,wr=.5+Wt,Sr=1+Wt;let br=null,yn=null,xn=null,Rr=null,vn=Er(he,ft,ke-Wt,ke+wr,0,Kt.minX,Kt.maxX,ut),On=Er(he,ft,ke+vr,ke+Sr,0,Kt.minX,Kt.maxX,ut);he=null,vn&&(br=Er(vn,ft,Ne-Wt,Ne+wr,1,Kt.minY,Kt.maxY,ut),yn=Er(vn,ft,Ne+vr,Ne+Sr,1,Kt.minY,Kt.maxY,ut),vn=null),On&&(xn=Er(On,ft,Ne-Wt,Ne+wr,1,Kt.minY,Kt.maxY,ut),Rr=Er(On,ft,Ne+vr,Ne+Sr,1,Kt.minY,Kt.maxY,ut),On=null),vt>1&&console.timeEnd("clipping"),tt.push(br||[],ge+1,2*ke,2*Ne),tt.push(yn||[],ge+1,2*ke,2*Ne+1),tt.push(xn||[],ge+1,2*ke+1,2*Ne),tt.push(Rr||[],ge+1,2*ke+1,2*Ne+1)}}getTile(he,ge,ke){he=+he,ge=+ge,ke=+ke;const Ne=this.options,{extent:Ue,debug:Je}=Ne;if(he<0||he>24)return null;const lt=1<<he,tt=rs(he,ge=ge+lt&lt-1,ke);if(this.tiles[tt])return ts(this.tiles[tt],Ue);Je>1&&console.log("drilling down to z%d-%d-%d",he,ge,ke);let ut,vt=he,ft=ge,Rt=ke;for(;!ut&&vt>0;)vt--,ft>>=1,Rt>>=1,ut=this.tiles[rs(vt,ft,Rt)];return ut&&ut.source?(Je>1&&(console.log("found parent tile z%d-%d-%d",vt,ft,Rt),console.time("drilling down")),this.splitTile(ut.source,vt,ft,Rt,he,ge,ke),Je>1&&console.timeEnd("drilling down"),this.tiles[tt]?ts(this.tiles[tt],Ue):null):null}}function rs(ct,he,ge){return 32*((1<<ct)*ge+he)+ct}function ns(ct,he){const ge=ct.tileID.canonical;if(!this._geoJSONIndex)return void he(null,null);const ke=this._geoJSONIndex.getTile(ge.z,ge.x,ge.y);if(!ke)return void he(null,null);const Ne=new ye(ke.features);let Ue=ir(Ne);Ue.byteOffset===0&&Ue.byteLength===Ue.buffer.byteLength||(Ue=new Uint8Array(Ue)),he(null,{vectorTile:Ne,rawData:Ue.buffer})}class sa extends q{constructor(he,ge,ke,Ne,Ue,Je){super(he,ge,ke,Ne,ns,Je),Ue&&(this.loadGeoJSON=Ue),this._dynamicIndex=new de}loadData(he,ge){const ke=he&&he.request,Ne=ke&&ke.collectResourceTiming;this.loadGeoJSON(he,(Ue,Je)=>{if(Ue||!Je)return ge(Ue);if(typeof Je!="object")return ge(new Error(`Input data given to '${he.source}' is not a valid GeoJSON object.`));{try{if(he.filter){const tt=o.M(he.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(tt.result==="error")throw new Error(tt.value.map(ut=>`${ut.key}: ${ut.message}`).join(", "));Je.features=Je.features.filter(ut=>tt.value.evaluate({zoom:0},ut))}he.dynamic?(Je.type==="Feature"&&(Je={type:"FeatureCollection",features:[Je]}),he.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(Je.features,this.loaded),he.cluster&&(Je.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=he.cluster?new Ao(function({superclusterOptions:tt,clusterProperties:ut}){if(!ut||!tt)return tt;const vt={},ft={},Rt={accumulated:null,zoom:0},Kt={properties:null},Wt=Object.keys(ut);for(const vr of Wt){const[wr,Sr]=ut[vr],br=o.M(Sr),yn=o.M(typeof wr=="string"?[wr,["accumulated"],["get",vr]]:wr);vt[vr]=br.value,ft[vr]=yn.value}return tt.map=vr=>{Kt.properties=vr;const wr={};for(const Sr of Wt)wr[Sr]=vt[Sr].evaluate(Rt,Kt);return wr},tt.reduce=(vr,wr)=>{Kt.properties=wr;for(const Sr of Wt)Rt.accumulated=vr[Sr],vr[Sr]=ft[Sr].evaluate(Rt,Kt)},tt}(he)).load(Je.features):he.dynamic?this._dynamicIndex:function(tt,ut){return new js(tt,ut)}(Je,he.geojsonVtOptions)}catch(tt){return ge(tt)}const lt={};if(Ne){const tt=_(ke);tt&&(lt.resourceTiming={},lt.resourceTiming[he.source]=JSON.parse(JSON.stringify(tt)))}ge(null,lt)}})}reloadTile(he,ge){const ke=this.loaded;return ke&&ke[he.uid]?he.partial?ge(null,void 0):super.reloadTile(he,ge):this.loadTile(he,ge)}loadGeoJSON(he,ge){if(he.request)o.n(he.request,ge);else{if(typeof he.data!="string")return ge(new Error(`Input data given to '${he.source}' is not a valid GeoJSON object.`));try{return ge(null,JSON.parse(he.data))}catch{return ge(new Error(`Input data given to '${he.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(he,ge){try{ge(null,this._geoJSONIndex.getClusterExpansionZoom(he.clusterId))}catch(ke){ge(ke)}}getClusterChildren(he,ge){try{ge(null,this._geoJSONIndex.getChildren(he.clusterId))}catch(ke){ge(ke)}}getClusterLeaves(he,ge){try{ge(null,this._geoJSONIndex.getLeaves(he.clusterId,he.limit,he.offset))}catch(ke){ge(ke)}}}class ql{constructor(he,ge){this.tileID=new o.aA(he.tileID.overscaledZ,he.tileID.wrap,he.tileID.canonical.z,he.tileID.canonical.x,he.tileID.canonical.y),this.tileZoom=he.tileZoom,this.uid=he.uid,this.zoom=he.zoom,this.canonical=he.tileID.canonical,this.pixelRatio=he.pixelRatio,this.tileSize=he.tileSize,this.source=he.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=he.projection,this.brightness=ge}parse(he,ge,ke,Ne){this.status="parsing";const Ue=new o.aA(ke.tileID.overscaledZ,ke.tileID.wrap,ke.tileID.canonical.z,ke.tileID.canonical.x,ke.tileID.canonical.y),Je={},lt=ge.familiesBySource[ke.source],tt=new o.dR(Ue,ke.promoteId);return tt.bucketLayerIDs=[],tt.is3DTile=!0,o.e0(he).then(ut=>{if(!ut)return Ne(new Error("Could not parse tile"));const vt=o.e1(ut,1/o.c8(ke.tileID.canonical)),ft=ut.json.extensionsUsed&&ut.json.extensionsUsed.includes("MAPBOX_mesh_features")||ut.json.asset.extras&&ut.json.asset.extras.MAPBOX_mesh_features,Rt=ut.json.extensionsUsed&&ut.json.extensionsUsed.includes("EXT_meshopt_compression"),Kt=new o.a3(this.zoom,{brightness:this.brightness});for(const Wt in lt)for(const vr of lt[Wt]){const wr=vr[0];tt.bucketLayerIDs.push(vr.map(br=>br.id)),wr.recalculate(Kt,[]);const Sr=new o.e2(vt,Ue,ft,Rt,this.brightness,tt);ft||(Sr.needsUpload=!0),Je[wr.fqid]=Sr,Sr.evaluate(wr)}this.status="done",Ne(null,{buckets:Je,featureIndex:tt})}).catch(ut=>Ne(new Error(ut.message)))}}class xl{constructor(he,ge,ke,Ne,Ue,Je){this.actor=he,this.layerIndex=ge,this.brightness=Je,this.loading={},this.loaded={}}loadTile(he,ge){const ke=he.uid,Ne=this.loading[ke]=new ql(he,this.brightness);o.bc(he.request,(Ue,Je)=>{const lt=!this.loading[ke];return delete this.loading[ke],lt||Ue?(Ne.status="done",lt||(this.loaded[ke]=Ne),ge(Ue)):Je&&Je.byteLength!==0?void Ne.parse(Je,this.layerIndex,he,(tt,ut)=>{Ne.status="done",this.loaded=this.loaded||{},this.loaded[ke]=Ne,tt||!ut?ge(tt):ge(null,ut)}):(Ne.status="done",this.loaded[ke]=Ne,ge())})}reloadTile(he,ge){const ke=this.loaded,Ne=he.uid;if(ke&&ke[Ne]){const Ue=ke[Ne];Ue.projection=he.projection,Ue.brightness=he.brightness;const Je=(lt,tt)=>{Ue.reloadCallback&&(delete Ue.reloadCallback,this.loadTile(he,ge)),ge(lt,tt)};Ue.status==="parsing"?Ue.reloadCallback=Je:Ue.status==="done"&&this.loadTile(he,ge)}}abortTile(he,ge){const ke=he.uid;this.loading[ke]&&delete this.loading[ke],ge()}removeTile(he,ge){const ke=this.loaded,Ne=he.uid;ke&&ke[Ne]&&delete ke[Ne],ge()}}class bl{constructor(he){this.self=he,this.actor=new o.e3(he,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=o.bL({name:"mercator"}),this.workerSourceTypes={vector:q,geojson:sa,"batched-model":xl},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ge,ke)=>{if(this.workerSourceTypes[ge])throw new Error(`Worker source with name "${ge}" already registered.`);this.workerSourceTypes[ge]=ke},this.self.registerRTLTextPlugin=ge=>{if(o.e4.isParsed())throw new Error("RTL text plugin already registered.");o.e4.applyArabicShaping=ge.applyArabicShaping,o.e4.processBidirectionalText=ge.processBidirectionalText,o.e4.processStyledBidirectionalText=ge.processStyledBidirectionalText}}clearCaches(he,ge,ke){delete this.layerIndexes[he],delete this.availableImages[he],delete this.workerSources[he],delete this.demWorkerSources[he],delete this.rasterArrayWorkerSource,ke()}checkIfReady(he,ge,ke){ke()}setReferrer(he,ge){this.referrer=ge}spriteLoaded(he,{scope:ge,isLoaded:ke}){if(this.isSpriteLoaded[he]||(this.isSpriteLoaded[he]={}),this.isSpriteLoaded[he][ge]=ke,this.workerSources[he]&&this.workerSources[he][ge])for(const Ne in this.workerSources[he][ge]){const Ue=this.workerSources[he][ge][Ne];for(const Je in Ue){const lt=Ue[Je];lt instanceof q&&(lt.isSpriteLoaded=ke,lt.fire(new o.x("isSpriteLoaded")))}}}setImages(he,{scope:ge,images:ke},Ne){if(this.availableImages[he]||(this.availableImages[he]={}),this.availableImages[he][ge]=ke,this.workerSources[he]&&this.workerSources[he][ge]){for(const Ue in this.workerSources[he][ge]){const Je=this.workerSources[he][ge][Ue];for(const lt in Je)Je[lt].availableImages=ke}Ne()}else Ne()}setProjection(he,ge){this.projections[he]=o.bL(ge)}setBrightness(he,ge,ke){this.brightness=ge,ke()}setLayers(he,ge,ke){this.getLayerIndex(he,ge.scope).replace(ge.layers,ge.options),ke()}updateLayers(he,ge,ke){this.getLayerIndex(he,ge.scope).update(ge.layers,ge.removedIds,ge.options),ke()}loadTile(he,ge,ke){ge.projection=this.projections[he]||this.defaultProjection,this.getWorkerSource(he,ge.type,ge.source,ge.scope).loadTile(ge,ke)}loadDEMTile(he,ge,ke){this.getDEMWorkerSource(he,ge.source,ge.scope).loadTile(ge,ke)}decodeRasterArray(he,ge,ke){this.getRasterArrayWorkerSource().decodeRasterArray(ge,ke)}reloadTile(he,ge,ke){ge.projection=this.projections[he]||this.defaultProjection,this.getWorkerSource(he,ge.type,ge.source,ge.scope).reloadTile(ge,ke)}abortTile(he,ge,ke){this.getWorkerSource(he,ge.type,ge.source,ge.scope).abortTile(ge,ke)}removeTile(he,ge,ke){this.getWorkerSource(he,ge.type,ge.source,ge.scope).removeTile(ge,ke)}removeSource(he,ge,ke){if(!(this.workerSources[he]&&this.workerSources[he][ge.scope]&&this.workerSources[he][ge.scope][ge.type]&&this.workerSources[he][ge.scope][ge.type][ge.source]))return;const Ne=this.workerSources[he][ge.scope][ge.type][ge.source];delete this.workerSources[he][ge.scope][ge.type][ge.source],Ne.removeSource!==void 0?Ne.removeSource(ge,ke):ke()}loadWorkerSource(he,ge,ke){try{this.self.importScripts(ge.url),ke()}catch(Ne){ke(Ne.toString())}}syncRTLPluginState(he,ge,ke){try{o.e4.setState(ge);const Ne=o.e4.getPluginURL();if(o.e4.isLoaded()&&!o.e4.isParsed()&&Ne!=null){this.self.importScripts(Ne);const Ue=o.e4.isParsed();ke(Ue?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ne}`),Ue)}}catch(Ne){ke(Ne.toString())}}setDracoUrl(he,ge){this.dracoUrl=ge}getAvailableImages(he,ge){this.availableImages[he]||(this.availableImages[he]={});let ke=this.availableImages[he][ge];return ke||(ke=[]),ke}getLayerIndex(he,ge){this.layerIndexes[he]||(this.layerIndexes[he]={});let ke=this.layerIndexes[he][ge];return ke||(ke=this.layerIndexes[he][ge]=new L,ke.scope=ge),ke}getWorkerSource(he,ge,ke,Ne){return this.workerSources[he]||(this.workerSources[he]={}),this.workerSources[he][Ne]||(this.workerSources[he][Ne]={}),this.workerSources[he][Ne][ge]||(this.workerSources[he][Ne][ge]={}),this.isSpriteLoaded[he]||(this.isSpriteLoaded[he]={}),this.workerSources[he][Ne][ge][ke]||(this.workerSources[he][Ne][ge][ke]=new this.workerSourceTypes[ge]({send:(Ue,Je,lt,tt,ut,vt)=>{this.actor.send(Ue,Je,lt,he,ut,vt)},scheduler:this.actor.scheduler},this.getLayerIndex(he,Ne),this.getAvailableImages(he,Ne),this.isSpriteLoaded[he][Ne],void 0,this.brightness)),this.workerSources[he][Ne][ge][ke]}getDEMWorkerSource(he,ge,ke){return this.demWorkerSources[he]||(this.demWorkerSources[he]={}),this.demWorkerSources[he][ke]||(this.demWorkerSources[he][ke]={}),this.demWorkerSources[he][ke][ge]||(this.demWorkerSources[he][ke][ge]=new ee),this.demWorkerSources[he][ke][ge]}getRasterArrayWorkerSource(){return this.rasterArrayWorkerSource||(this.rasterArrayWorkerSource=new ie),this.rasterArrayWorkerSource}enforceCacheSizeLimit(he,ge){o.e5(ge)}getWorkerPerformanceMetrics(he,ge,ke){ke(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new bl(self)),bl}),h(["./shared"],function(o){var _="3.7.0";const C={create:"create",load:"load",fullLoad:"fullLoad"},M={mark(m){performance.mark(m)},measure(m,a,u){performance.measure(m,a,u)}};function L(m){const a=m.name.split("?")[0];return o.a(a)&&a.includes("mapbox-gl.js")?"javascript":o.a(a)&&a.includes("mapbox-gl.css")?"css":o.b(a)?"fontRange":o.c(a)?"sprite":o.i(a)?"style":o.d(a)?"tilejson":"other"}var z,j={},K=function(){if(z)return j;function m(g){return!a(g)}function a(g){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var w,S,k=new Blob([""],{type:"text/javascript"}),O=URL.createObjectURL(k);try{S=new Worker(O),w=!0}catch{w=!1}return S&&S.terminate(),URL.revokeObjectURL(O),w}()?function(){var w=document.createElement("canvas");w.width=w.height=1;var S=w.getContext("2d");if(!S)return!1;var k=S.getImageData(0,0,1,1);return k&&k.width===w.width}()?(u[x=g&&g.failIfMajorPerformanceCaveat]===void 0&&(u[x]=function(w){var S,k=function(O){var N=document.createElement("canvas"),Q=Object.create(m.webGLContextAttributes);return Q.failIfMajorPerformanceCaveat=O,N.getContext("webgl2",Q)}(w);if(!k)return!1;try{S=k.createShader(k.VERTEX_SHADER)}catch{return!1}return!(!S||k.isContextLost())&&(k.shaderSource(S,"void main() {}"),k.compileShader(S),k.getShaderParameter(S,k.COMPILE_STATUS)===!0)}(x)),u[x]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var x}z=1,j.supported=m,j.notSupportedReason=a;var u={};return m.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},j}();function $(m,a,u){const g=document.createElement(m);return a!=null&&(g.className=a),u&&u.appendChild(g),g}function q(m,a,u){const g=document.createElementNS("http://www.w3.org/2000/svg",m);for(const x of Object.keys(a))g.setAttributeNS(null,x,String(a[x]));return u&&u.appendChild(g),g}const ee=typeof document<"u"?document.documentElement&&document.documentElement.style:null,ie=ee&&ee.userSelect!==void 0?"userSelect":"WebkitUserSelect";let fe;function me(){ee&&ie&&(fe=ee[ie],ee[ie]="none")}function ye(){ee&&ie&&(ee[ie]=fe)}function se(m){m.preventDefault(),m.stopPropagation(),window.removeEventListener("click",se,!0)}function re(){window.addEventListener("click",se,!0),window.setTimeout(()=>{window.removeEventListener("click",se,!0)},0)}function de(m,a){const u=m.getBoundingClientRect();return Pe(m,u,a)}function _e(m,a){const u=m.getBoundingClientRect(),g=[];for(let x=0;x<a.length;x++)g.push(Pe(m,u,a[x]));return g}function ve(m){return window.InstallTrigger!==void 0&&m.button===2&&m.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:m.button}function Pe(m,a,u){const g=m.offsetWidth===a.width?1:m.offsetWidth/a.width;return new o.P((u.clientX-a.left)*g,(u.clientY-a.top)*g)}const Ee="01",Ht="NO_ACCESS_TOKEN";class Xt{constructor(a,u,g){this._transformRequestFn=a,this._customAccessToken=u,this._silenceAuthErrors=!!g,this._createSkuToken()}_createSkuToken(){const a=function(){let u="";for(let g=0;g<10;g++)u+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Ee,u].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=a.token,this._skuTokenExpiresAt=a.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(a,u){return this._transformRequestFn&&this._transformRequestFn(a,u)||{url:a}}normalizeStyleURL(a,u){if(!o.f(a))return a;const g=jt(a);return g.params.push(`sdk=js-${_}`),g.path=`/styles/v1${g.path}`,this._makeAPIURL(g,this._customAccessToken||u)}normalizeGlyphsURL(a,u){if(!o.f(a))return a;const g=jt(a);return g.path=`/fonts/v1${g.path}`,this._makeAPIURL(g,this._customAccessToken||u)}normalizeModelURL(a,u){if(!o.f(a))return a;const g=jt(a);return g.path=`/models/v1${g.path}`,this._makeAPIURL(g,this._customAccessToken||u)}normalizeSourceURL(a,u,g,x){if(!o.f(a))return a;const w=jt(a);return w.path=`/v4/${w.authority}.json`,w.params.push("secure"),g&&w.params.push(`language=${g}`),x&&w.params.push(`worldview=${x}`),this._makeAPIURL(w,this._customAccessToken||u)}normalizeSpriteURL(a,u,g,x){const w=jt(a);return o.f(a)?(w.path=`/styles/v1${w.path}/sprite${u}${g}`,this._makeAPIURL(w,this._customAccessToken||x)):(w.path+=`${u}${g}`,Mt(w))}normalizeTileURL(a,u,g){if(this._isSkuTokenExpired()&&this._createSkuToken(),a&&!o.f(a))return a;const x=jt(a);x.path=x.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${u||g&&x.authority!=="raster"&&g===512?"@2x":""}${o.m.supported?".webp":"$1"}`),x.authority==="raster"?x.path=`/${o.e.RASTER_URL_PREFIX}${x.path}`:x.authority==="rasterarrays"?x.path=`/${o.e.RASTERARRAYS_URL_PREFIX}${x.path}`:x.authority==="3dtiles"?x.path=`/${o.e.TILES3D_URL_PREFIX}${x.path}`:(x.path=x.path.replace(/^.+\/v4\//,"/"),x.path=`/${o.e.TILE_URL_VERSION}${x.path}`);const w=this._customAccessToken||function(S){for(const k of S){const O=k.match(/^access_token=(.*)$/);if(O)return O[1]}return null}(x.params)||o.e.ACCESS_TOKEN;return o.e.REQUIRE_ACCESS_TOKEN&&w&&this._skuToken&&x.params.push(`sku=${this._skuToken}`),this._makeAPIURL(x,w)}canonicalizeTileURL(a,u){const g=jt(a);if(!g.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!g.path.match(/\.[\w]+$/))return a;let x="mapbox://";g.path.match(/^\/raster\/v1\//)?x+=`raster/${g.path.replace(`/${o.e.RASTER_URL_PREFIX}/`,"")}`:g.path.match(/^\/rasterarrays\/v1\//)?x+=`rasterarrays/${g.path.replace(`/${o.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:x+=`tiles/${g.path.replace(`/${o.e.TILE_URL_VERSION}/`,"")}`;let w=g.params;return u&&(w=w.filter(S=>!S.match(/^access_token=/))),w.length&&(x+=`?${w.join("&")}`),x}canonicalizeTileset(a,u){const g=!!u&&o.f(u),x=[];for(const w of a.tiles||[])o.h(w)?x.push(this.canonicalizeTileURL(w,g)):x.push(w);return x}_makeAPIURL(a,u){const g="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",x=jt(o.e.API_URL);if(a.protocol=x.protocol,a.authority=x.authority,a.protocol==="http"){const w=a.params.indexOf("secure");w>=0&&a.params.splice(w,1)}if(x.path!=="/"&&(a.path=`${x.path}${a.path}`),!o.e.REQUIRE_ACCESS_TOKEN)return Mt(a);if(u=u||o.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!u)throw new Error(`An API access token is required to use Mapbox GL. ${g}`);if(u[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${g}`)}return a.params=a.params.filter(w=>w.indexOf("access_token")===-1),a.params.push(`access_token=${u||""}`),Mt(a)}}const gt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function jt(m){const a=m.match(gt);if(!a)throw new Error("Unable to parse URL object");return{protocol:a[1],authority:a[2],path:a[3]||"/",params:a[4]?a[4].split("&"):[]}}function Mt(m){const a=m.params.length?`?${m.params.join("&")}`:"";return`${m.protocol}://${m.authority}${m.path}${a}`}const Yt="mapbox.eventData";function ht(m){if(!m)return null;const a=m.split(".");if(!a||a.length!==3)return null;try{return JSON.parse(o.j(a[1]))}catch{return null}}class lr{constructor(a){this.type=a,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(a){const u=ht(o.e.ACCESS_TOKEN);let g="";return g=u&&u.u?o.k(u.u):o.e.ACCESS_TOKEN||"",a?`${Yt}.${a}:${g}`:`${Yt}:${g}`}fetchEventData(){const a=o.s("localStorage"),u=this.getStorageKey(),g=this.getStorageKey("uuid");if(a)try{const x=localStorage.getItem(u);x&&(this.eventData=JSON.parse(x));const w=localStorage.getItem(g);w&&(this.anonId=w)}catch{o.w("Unable to read from LocalStorage")}}saveEventData(){const a=o.s("localStorage"),u=this.getStorageKey(),g=this.getStorageKey("uuid"),x=this.anonId;if(a&&x)try{localStorage.setItem(g,x),Object.keys(this.eventData).length>=1&&localStorage.setItem(u,JSON.stringify(this.eventData))}catch{o.w("Unable to write to LocalStorage")}}processRequests(a){}postEvent(a,u,g,x){if(!o.e.EVENTS_URL)return;const w=jt(o.e.EVENTS_URL);w.params.push(`access_token=${x||o.e.ACCESS_TOKEN||""}`);const S={event:this.type,created:new Date(a).toISOString()},k=u?o.l(S,u):S,O={url:Mt(w),headers:{"Content-Type":"text/plain"},body:JSON.stringify([k])};this.pendingRequest=o.p(O,N=>{this.pendingRequest=null,g(N),this.saveEventData(),this.processRequests(x)})}queueRequest(a,u){this.queue.push(a),this.processRequests(u)}}const ir=new class extends lr{constructor(m){super("appUserTurnstile"),this._customAccessToken=m}postTurnstileEvent(m,a){o.e.EVENTS_URL&&o.e.ACCESS_TOKEN&&Array.isArray(m)&&m.some(u=>o.f(u)||o.h(u))&&this.queueRequest(Date.now(),a)}processRequests(m){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const a=ht(o.e.ACCESS_TOKEN),u=a?a.u:o.e.ACCESS_TOKEN;let g=u!==this.eventData.tokenU;o.v(this.anonId)||(this.anonId=o.u(),g=!0);const x=this.queue.shift();if(this.eventData.lastSuccess){const w=new Date(this.eventData.lastSuccess),S=new Date(x),k=(x-this.eventData.lastSuccess)/864e5;g=g||k>=1||k<-1||w.getDate()!==S.getDate()}else g=!0;g?this.postEvent(x,{sdkIdentifier:"mapbox-gl-js",sdkVersion:_,skuId:Ee,"enabled.telemetry":!1,userId:this.anonId},w=>{w||(this.eventData.lastSuccess=x,this.eventData.tokenU=u)},m):this.processRequests()}},$t=ir.postTurnstileEvent.bind(ir),Vt=new class extends lr{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(m,a,u,g){this.skuToken=a,this.errorCb=g,o.e.EVENTS_URL&&(u||o.e.ACCESS_TOKEN?this.queueRequest({id:m,timestamp:Date.now()},u):this.errorCb(new Error(Ht)))}processRequests(m){if(this.pendingRequest||this.queue.length===0)return;const{id:a,timestamp:u}=this.queue.shift();a&&this.success[a]||(this.anonId||this.fetchEventData(),o.v(this.anonId)||(this.anonId=o.u()),this.postEvent(u,{sdkIdentifier:"mapbox-gl-js",sdkVersion:_,skuId:Ee,skuToken:this.skuToken,userId:this.anonId},g=>{g?this.errorCb(g):a&&(this.success[a]=!0)},m))}remove(){this.errorCb=null}},Dr=Vt.postMapLoadEvent.bind(Vt),kr=new class extends lr{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(m){let a=this.mapInstanceIdMap.get(m);return a||(a=o.u(),this.mapInstanceIdMap.set(m,a)),a}getEventId(m){const a=this.eventIdPerMapInstanceMap.get(m)||0;return this.eventIdPerMapInstanceMap.set(m,a+1),a}postStyleLoadEvent(m,a){const{map:u,style:g,importedStyles:x}=a;if(!o.e.EVENTS_URL||!m&&!o.e.ACCESS_TOKEN)return;const w=this.getMapInstanceId(u),S={mapInstanceId:w,eventId:this.getEventId(w),style:g};x.length&&(S.importedStyles=x),this.queueRequest({timestamp:Date.now(),payload:S},m)}processRequests(m){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:a,payload:u}=this.queue.shift();this.postEvent(a,u,()=>{},m)}},Zr=kr.postStyleLoadEvent.bind(kr),Lr=new class extends lr{constructor(){super("gljs.performance")}postPerformanceEvent(m,a){o.e.EVENTS_URL&&(m||o.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:a},m)}processRequests(m){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:a,performanceData:u}=this.queue.shift(),g=function(x){const w=performance.getEntriesByType("resource"),S=performance.getEntriesByType("mark"),k=function(Y){const ae={};if(Y){for(const le in Y)if(le!=="other")for(const ce of Y[le]){const Ae=`${le}ResolveRangeMin`,Be=`${le}ResolveRangeMax`,Te=`${le}RequestCount`,be=`${le}RequestCachedCount`;ae[Ae]=Math.min(ae[Ae]||1/0,ce.startTime),ae[Be]=Math.max(ae[Be]||-1/0,ce.responseEnd);const Me=Fe=>{ae[Fe]===void 0&&(ae[Fe]=0),++ae[Fe]};ce.transferSize!==void 0&&ce.transferSize===0&&Me(be),Me(Te)}}return ae}(function(Y,ae){const le={};if(Y)for(const ce of Y){const Ae=ae(ce);le[Ae]===void 0&&(le[Ae]=[]),le[Ae].push(ce)}return le}(w,L)),O=window.devicePixelRatio,N=navigator.connection||navigator.mozConnection||navigator.webkitConnection,Q=N?N.effectiveType:void 0,W={counters:[],metadata:[],attributes:[]},X=(Y,ae,le)=>{le!=null&&Y.push({name:ae,value:le.toString()})};for(const Y in k)X(W.counters,Y,k[Y]);if(x.interactionRange[0]!==1/0&&x.interactionRange[1]!==-1/0&&(X(W.counters,"interactionRangeMin",x.interactionRange[0]),X(W.counters,"interactionRangeMax",x.interactionRange[1])),S)for(const Y of Object.keys(C)){const ae=C[Y],le=S.find(ce=>ce.name===ae);le&&X(W.counters,ae,le.startTime)}return X(W.counters,"visibilityHidden",x.visibilityHidden),X(W.attributes,"style",function(Y){if(Y)for(const ae of Y){const le=ae.name.split("?")[0];if(o.i(le)){const ce=le.split("/").slice(-2);if(ce.length===2)return`mapbox://styles/${ce[0]}/${ce[1]}`}}}(w)),X(W.attributes,"terrainEnabled",x.terrainEnabled?"true":"false"),X(W.attributes,"fogEnabled",x.fogEnabled?"true":"false"),X(W.attributes,"projection",x.projection),X(W.attributes,"zoom",x.zoom),X(W.metadata,"devicePixelRatio",O),X(W.metadata,"connectionEffectiveType",Q),X(W.metadata,"navigatorUserAgent",navigator.userAgent),X(W.metadata,"screenWidth",window.screen.width),X(W.metadata,"screenHeight",window.screen.height),X(W.metadata,"windowWidth",window.innerWidth),X(W.metadata,"windowHeight",window.innerHeight),X(W.metadata,"mapWidth",x.width/O),X(W.metadata,"mapHeight",x.height/O),X(W.metadata,"webglRenderer",x.renderer),X(W.metadata,"webglVendor",x.vendor),X(W.metadata,"sdkVersion",_),X(W.metadata,"sdkIdentifier","mapbox-gl-js"),W}(u);for(const x of g.metadata);for(const x of g.counters);for(const x of g.attributes);this.postEvent(a,g,()=>{},m)}},Ao=Lr.postPerformanceEvent.bind(Lr),ji=new class extends lr{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(m,a,u,g){if(!o.e.API_URL||!o.e.SESSION_PATH)return;const x=jt(o.e.API_URL+o.e.SESSION_PATH);x.params.push(`sku=${a||""}`),x.params.push(`access_token=${g||o.e.ACCESS_TOKEN||""}`);const w={url:Mt(x),headers:{"Content-Type":"text/plain"}};this.pendingRequest=o.g(w,S=>{this.pendingRequest=null,u(S),this.saveEventData(),this.processRequests(g)})}getSessionAPI(m,a,u,g){this.skuToken=a,this.errorCb=g,o.e.SESSION_PATH&&o.e.API_URL&&(u||o.e.ACCESS_TOKEN?this.queueRequest({id:m,timestamp:Date.now()},u):this.errorCb(new Error(Ht)))}processRequests(m){if(this.pendingRequest||this.queue.length===0)return;const{id:a,timestamp:u}=this.queue.shift();a&&this.success[a]||this.getSession(u,this.skuToken,g=>{g?this.errorCb(g):a&&(this.success[a]=!0)},m)}remove(){this.errorCb=null}},Qe=ji.getSessionAPI.bind(ji),no=new Set;function Io(m,a){a?no.add(m):no.delete(m)}class ms{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(a,u){this._updatedSourceCaches[a]=u,this.setDirty()}discardSourceCacheUpdate(a){delete this._updatedSourceCaches[a]}updateLayer(a){const u=a.scope;this._updatedLayers[u]=this._updatedLayers[u]||new Set,this._updatedLayers[u].add(a.id),this.setDirty()}removeLayer(a){const u=a.scope;this._removedLayers[u]=this._removedLayers[u]||{},this._updatedLayers[u]=this._updatedLayers[u]||new Set,this._removedLayers[u][a.id]=a,this._updatedLayers[u].delete(a.id),this._updatedPaintProps.delete(a.fqid),this.setDirty()}getRemovedLayer(a){return this._removedLayers[a.scope]?this._removedLayers[a.scope][a.id]:null}discardLayerRemoval(a){this._removedLayers[a.scope]&&delete this._removedLayers[a.scope][a.id]}getLayerUpdatesByScope(){const a={};for(const u in this._updatedLayers)a[u]=a[u]||{},a[u].updatedIds=Array.from(this._updatedLayers[u].values());for(const u in this._removedLayers)a[u]=a[u]||{},a[u].removedIds=Object.keys(this._removedLayers[u]);return a}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(a){this._updatedPaintProps.add(a.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(a){this._updatedImages.add(a),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}function Ot(m){const{userImage:a}=m;return!!(a&&a.render&&a.render())&&(m.data.replace(new Uint8Array(a.data.buffer)),!0)}class Bs extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.atlasImage={},this.atlasTexture={},this.dirty=!0}createScope(a){this.images[a]={},this.loaded[a]=!1,this.updatedImages[a]={},this.patterns[a]={},this.callbackDispatchedThisFrame[a]={},this.atlasImage[a]=new o.r({width:1,height:1})}isLoaded(){for(const a in this.loaded)if(!this.loaded[a])return!1;return!0}setLoaded(a,u){if(this.loaded[u]!==a&&(this.loaded[u]=a,a)){for(const{ids:g,callback:x}of this.requestors)this._notify(g,u,x);this.requestors=[]}}hasImage(a,u){return!!this.getImage(a,u)}getImage(a,u){return this.images[u][a]}addImage(a,u,g){this._validate(a,g)&&(this.images[u][a]=g)}_validate(a,u){let g=!0;return this._validateStretch(u.stretchX,u.data&&u.data.width)||(this.fire(new o.t(new Error(`Image "${a}" has invalid "stretchX" value`))),g=!1),this._validateStretch(u.stretchY,u.data&&u.data.height)||(this.fire(new o.t(new Error(`Image "${a}" has invalid "stretchY" value`))),g=!1),this._validateContent(u.content,u)||(this.fire(new o.t(new Error(`Image "${a}" has invalid "content" value`))),g=!1),g}_validateStretch(a,u){if(!a)return!0;let g=0;for(const x of a){if(x[0]<g||x[1]<x[0]||u<x[1])return!1;g=x[1]}return!0}_validateContent(a,u){return!(a&&(a.length!==4||a[0]<0||u.data.width<a[0]||a[1]<0||u.data.height<a[1]||a[2]<0||u.data.width<a[2]||a[3]<0||u.data.height<a[3]||a[2]<a[0]||a[3]<a[1]))}updateImage(a,u,g){g.version=this.images[u][a].version+1,this.images[u][a]=g,this.updatedImages[u][a]=!0}removeImage(a,u){const g=this.images[u][a];delete this.images[u][a],delete this.patterns[u][a],g.userImage&&g.userImage.onRemove&&g.userImage.onRemove()}listImages(a){return Object.keys(this.images[a])}getImages(a,u,g){let x=!0;const w=!!this.loaded[u];if(!w)for(const S of a)this.images[u][S]||(x=!1);w||x?this._notify(a,u,g):this.requestors.push({ids:a,scope:u,callback:g})}getUpdatedImages(a){return this.updatedImages[a]}_notify(a,u,g){const x={};for(const w of a){this.images[u][w]||this.fire(new o.x("styleimagemissing",{id:w}));const S=this.images[u][w];S?x[w]={data:S.data.clone(),pixelRatio:S.pixelRatio,sdf:S.sdf,version:S.version,stretchX:S.stretchX,stretchY:S.stretchY,content:S.content,hasRenderCallback:!!(S.userImage&&S.userImage.render)}:o.w(`Image "${w}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}g(null,x)}getPixelSize(a){const{width:u,height:g}=this.atlasImage[a];return{width:u,height:g}}getPattern(a,u,g){const x=this.patterns[u][a],w=this.getImage(a,u);if(!w)return null;if(x&&x.position.version===w.version)return x.position;if(x)x.position.version=w.version;else{const S={w:w.data.width+2*o.y,h:w.data.height+2*o.y,x:0,y:0},k=new o.I(S,w,o.y);this.patterns[u][a]={bin:S,position:k}}return this._updatePatternAtlas(u,g),this.patterns[u][a].position}bind(a,u){const g=a.gl;let x=this.atlasTexture[u];x?this.dirty&&(x.update(this.atlasImage[u]),this.dirty=!1):(x=new o.T(a,this.atlasImage[u],g.RGBA8),this.atlasTexture[u]=x),x.bind(g.LINEAR,g.CLAMP_TO_EDGE)}_updatePatternAtlas(a,u){const g=[];for(const k in this.patterns[a])g.push(this.patterns[a][k].bin);const{w:x,h:w}=o.z(g),S=this.atlasImage[a];S.resize({width:x||1,height:w||1});for(const k in this.patterns[a]){const{bin:O,position:N}=this.patterns[a][k];let Q=N.padding;const W=O.x+Q,X=O.y+Q,Y=this.images[a][k].data,ae=Y.width,le=Y.height;Q=Q>1?Q-1:Q,o.r.copy(Y,S,{x:0,y:0},{x:W,y:X},{width:ae,height:le},u),o.r.copy(Y,S,{x:0,y:le-Q},{x:W,y:X-Q},{width:ae,height:Q},u),o.r.copy(Y,S,{x:0,y:0},{x:W,y:X+le},{width:ae,height:Q},u),o.r.copy(Y,S,{x:ae-Q,y:0},{x:W-Q,y:X},{width:Q,height:le},u),o.r.copy(Y,S,{x:0,y:0},{x:W+ae,y:X},{width:Q,height:le},u),o.r.copy(Y,S,{x:ae-Q,y:le-Q},{x:W-Q,y:X-Q},{width:Q,height:Q},u),o.r.copy(Y,S,{x:0,y:le-Q},{x:W+ae,y:X-Q},{width:Q,height:Q},u),o.r.copy(Y,S,{x:0,y:0},{x:W+ae,y:X+le},{width:Q,height:Q},u),o.r.copy(Y,S,{x:ae-Q,y:0},{x:W-Q,y:X+le},{width:Q,height:Q},u)}this.dirty=!0}beginFrame(){for(const a in this.images)this.callbackDispatchedThisFrame[a]={}}dispatchRenderCallbacks(a,u){for(const g of a){if(this.callbackDispatchedThisFrame[u][g])continue;this.callbackDispatchedThisFrame[u][g]=!0;const x=this.images[u][g];Ot(x)&&this.updateImage(g,u,x)}}}function Oi(m){const a=m.key,u=m.value,g=m.valueSpec||{},x=m.objectElementValidators||{},w=m.style,S=m.styleSpec;let k=[];const O=o.B(u);if(O!=="object")return[new o.V(a,u,`object expected, ${O} found`)];for(const N in u){const Q=N.split(".")[0];let W;x[Q]?W=x[Q]:g[Q]?W=an:x["*"]?W=x["*"]:g["*"]&&(W=an),W?k=k.concat(W({key:(a&&`${a}.`)+N,value:u[N],valueSpec:g[Q]||g["*"],style:w,styleSpec:S,object:u,objectKey:N},u)):k.push(new o.A(a,u[N],`unknown property "${N}"`))}for(const N in g)x[N]||g[N].required&&g[N].default===void 0&&u[N]===void 0&&k.push(new o.V(a,u,`missing required property "${N}"`));return k}function Fo(m){const a=m.value,u=m.valueSpec,g=m.style,x=m.styleSpec,w=m.key,S=m.arrayElementValidator||an;if(o.B(a)!=="array")return[new o.V(w,a,`array expected, ${o.B(a)} found`)];if(u.length&&a.length!==u.length)return[new o.V(w,a,`array length ${u.length} expected, length ${a.length} found`)];if(u["min-length"]&&a.length<u["min-length"])return[new o.V(w,a,`array length at least ${u["min-length"]} expected, length ${a.length} found`)];let k={type:u.value,values:u.values,minimum:u.minimum,maximum:u.maximum,function:void 0};x.$version<7&&(k.function=u.function),o.B(u.value)==="object"&&(k=u.value);let O=[];for(let N=0;N<a.length;N++)O=O.concat(S({array:a,arrayIndex:N,value:a[N],valueSpec:k,style:g,styleSpec:x,key:`${w}[${N}]`},!0));return O}function Pr(m){const a=m.key,u=m.value,g=m.valueSpec;let x=o.B(u);if(x==="number"&&u!=u&&(x="NaN"),x!=="number")return[new o.V(a,u,`number expected, ${x} found`)];if("minimum"in g){let w=g.minimum;if(o.B(g.minimum)==="array"&&(w=g.minimum[m.arrayIndex]),u<w)return[new o.V(a,u,`${u} is less than the minimum value ${w}`)]}if("maximum"in g){let w=g.maximum;if(o.B(g.maximum)==="array"&&(w=g.maximum[m.arrayIndex]),u>w)return[new o.V(a,u,`${u} is greater than the maximum value ${w}`)]}return[]}function nn(m){const a=m.valueSpec,u=o.D(m.value.type);let g,x,w,S={};const k=u!=="categorical"&&m.value.property===void 0,O=!k,N=o.B(m.value.stops)==="array"&&o.B(m.value.stops[0])==="array"&&o.B(m.value.stops[0][0])==="object",Q=Oi({key:m.key,value:m.value,valueSpec:m.styleSpec.function,style:m.style,styleSpec:m.styleSpec,objectElementValidators:{stops:function(Y){if(u==="identity")return[new o.V(Y.key,Y.value,'identity function may not have a "stops" property')];let ae=[];const le=Y.value;return ae=ae.concat(Fo({key:Y.key,value:le,valueSpec:Y.valueSpec,style:Y.style,styleSpec:Y.styleSpec,arrayElementValidator:W})),o.B(le)==="array"&&le.length===0&&ae.push(new o.V(Y.key,le,"array must have at least one stop")),ae},default:function(Y){return an({key:Y.key,value:Y.value,valueSpec:a,style:Y.style,styleSpec:Y.styleSpec})}}});return u==="identity"&&k&&Q.push(new o.V(m.key,m.value,'missing required property "property"')),u==="identity"||m.value.stops||Q.push(new o.V(m.key,m.value,'missing required property "stops"')),u==="exponential"&&m.valueSpec.expression&&!o.F(m.valueSpec)&&Q.push(new o.V(m.key,m.value,"exponential functions not supported")),m.styleSpec.$version>=8&&(O&&!o.G(m.valueSpec)?Q.push(new o.V(m.key,m.value,"property functions not supported")):k&&!o.H(m.valueSpec)&&Q.push(new o.V(m.key,m.value,"zoom functions not supported"))),u!=="categorical"&&!N||m.value.property!==void 0||Q.push(new o.V(m.key,m.value,'"property" property is required')),Q;function W(Y){let ae=[];const le=Y.value,ce=Y.key;if(o.B(le)!=="array")return[new o.V(ce,le,`array expected, ${o.B(le)} found`)];if(le.length!==2)return[new o.V(ce,le,`array length 2 expected, length ${le.length} found`)];if(N){if(o.B(le[0])!=="object")return[new o.V(ce,le,`object expected, ${o.B(le[0])} found`)];if(le[0].zoom===void 0)return[new o.V(ce,le,"object stop key must have zoom")];if(le[0].value===void 0)return[new o.V(ce,le,"object stop key must have value")];const Ae=o.D(le[0].zoom);if(typeof Ae!="number")return[new o.V(ce,le[0].zoom,"stop zoom values must be numbers")];if(w&&w>Ae)return[new o.V(ce,le[0].zoom,"stop zoom values must appear in ascending order")];Ae!==w&&(w=Ae,x=void 0,S={}),ae=ae.concat(Oi({key:`${ce}[0]`,value:le[0],valueSpec:{zoom:{}},style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{zoom:Pr,value:X}}))}else ae=ae.concat(X({key:`${ce}[0]`,value:le[0],valueSpec:{},style:Y.style,styleSpec:Y.styleSpec},le));return o.J(o.K(le[1]))?ae.concat([new o.V(`${ce}[1]`,le[1],"expressions are not allowed in function stops.")]):ae.concat(an({key:`${ce}[1]`,value:le[1],valueSpec:a,style:Y.style,styleSpec:Y.styleSpec}))}function X(Y,ae){const le=o.B(Y.value),ce=o.D(Y.value),Ae=Y.value!==null?Y.value:ae;if(g){if(le!==g)return[new o.V(Y.key,Ae,`${le} stop domain type must match previous stop domain type ${g}`)]}else g=le;if(le!=="number"&&le!=="string"&&le!=="boolean"&&typeof ce!="number"&&typeof ce!="string"&&typeof ce!="boolean")return[new o.V(Y.key,Ae,"stop domain value must be a number, string, or boolean")];if(le!=="number"&&u!=="categorical"){let Be=`number expected, ${le} found`;return o.G(a)&&u===void 0&&(Be+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new o.V(Y.key,Ae,Be)]}return u!=="categorical"||le!=="number"||typeof ce=="number"&&isFinite(ce)&&Math.floor(ce)===ce?u!=="categorical"&&le==="number"&&typeof ce=="number"&&typeof x=="number"&&x!==void 0&&ce<x?[new o.V(Y.key,Ae,"stop domain values must appear in ascending order")]:(x=ce,u==="categorical"&&ce in S?[new o.V(Y.key,Ae,"stop domain values must be unique")]:(S[ce]=!0,[])):[new o.V(Y.key,Ae,`integer expected, found ${String(ce)}`)]}}function Ji(m){const a=(m.expressionContext==="property"?o.L:o.M)(o.K(m.value),m.valueSpec);if(a.result==="error")return a.value.map(g=>new o.V(`${m.key}${g.key}`,m.value,g.message));const u=a.value.expression||a.value._styleExpression.expression;if(m.expressionContext==="property"&&m.propertyKey==="text-font"&&!u.outputDefined())return[new o.V(m.key,m.value,`Invalid data expression for "${m.propertyKey}". Output values must be contained as literals within the expression.`)];if(m.expressionContext==="property"&&m.propertyType==="layout"&&!o.N(u))return[new o.V(m.key,m.value,'"feature-state" data expressions are not supported with layout properties.')];if(m.expressionContext==="filter")return Po(u,m);if(m.expressionContext&&m.expressionContext.indexOf("cluster")===0){if(!o.O(u,["zoom","feature-state"]))return[new o.V(m.key,m.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(m.expressionContext==="cluster-initial"&&!o.Q(u))return[new o.V(m.key,m.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Po(m,a){const u=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(a.valueSpec&&a.valueSpec.expression)for(const x of a.valueSpec.expression.parameters)u.delete(x);if(u.size===0)return[];const g=[];return m instanceof o.S&&u.has(m.name)?[new o.V(a.key,a.value,`["${m.name}"] expression is not supported in a filter for a ${a.object.type} layer with id: ${a.object.id}`)]:(m.eachChild(x=>{g.push(...Po(x,a))}),g)}function io(m){const a=m.key,u=m.value,g=m.valueSpec,x=[];return Array.isArray(g.values)?g.values.indexOf(o.D(u))===-1&&x.push(new o.V(a,u,`expected one of [${g.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(g.values).indexOf(o.D(u))===-1&&x.push(new o.V(a,u,`expected one of [${Object.keys(g.values).join(", ")}], ${JSON.stringify(u)} found`)),x}function Cs(m){return o.W(o.K(m.value))?Ji(o.C({},m,{expressionContext:"filter",valueSpec:m.styleSpec[`filter_${m.layerType||"fill"}`]})):Er(m)}function Er(m){const a=m.value,u=m.key;if(o.B(a)!=="array")return[new o.V(u,a,`array expected, ${o.B(a)} found`)];const g=m.styleSpec;let x,w=[];if(a.length<1)return[new o.V(u,a,"filter array must have at least 1 element")];switch(w=w.concat(io({key:`${u}[0]`,value:a[0],valueSpec:g.filter_operator,style:m.style,styleSpec:m.styleSpec})),o.D(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&o.D(a[1])==="$type"&&w.push(new o.V(u,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":a.length!==3&&w.push(new o.V(u,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(x=o.B(a[1]),x!=="string"&&w.push(new o.V(`${u}[1]`,a[1],`string expected, ${x} found`)));for(let S=2;S<a.length;S++)x=o.B(a[S]),o.D(a[1])==="$type"?w=w.concat(io({key:`${u}[${S}]`,value:a[S],valueSpec:g.geometry_type,style:m.style,styleSpec:m.styleSpec})):x!=="string"&&x!=="number"&&x!=="boolean"&&w.push(new o.V(`${u}[${S}]`,a[S],`string, number, or boolean expected, ${x} found`));break;case"any":case"all":case"none":for(let S=1;S<a.length;S++)w=w.concat(Er({key:`${u}[${S}]`,value:a[S],style:m.style,styleSpec:m.styleSpec}));break;case"has":case"!has":x=o.B(a[1]),a.length!==2?w.push(new o.V(u,a,`filter array for "${a[0]}" operator must have 2 elements`)):x!=="string"&&w.push(new o.V(`${u}[1]`,a[1],`string expected, ${x} found`))}return w}function Di(m,a){const u=m.key,g=m.style,x=m.layer,w=m.styleSpec,S=m.value,k=m.objectKey,O=w[`${a}_${m.layerType}`];if(!O)return[];const N=k.match(/^(.*)-transition$/);if(a==="paint"&&N&&O[N[1]]&&O[N[1]].transition)return an({key:u,value:S,valueSpec:w.transition,style:g,styleSpec:w});const Q=m.valueSpec||O[k];if(!Q)return[new o.A(u,S,`unknown property "${k}"`)];let W;if(o.B(S)==="string"&&o.G(Q)&&!Q.tokens&&(W=/^{([^}]+)}$/.exec(S))){const Y=`\`{ "type": "identity", "property": ${W?JSON.stringify(W[1]):'"_"'} }\``;return[new o.V(u,S,`"${k}" does not support interpolation syntax
Use an identity property function instead: ${Y}.`)]}const X=[];if(m.layerType==="symbol")k!=="text-field"||!g||g.glyphs||g.imports||X.push(new o.V(u,S,'use of "text-field" requires a style "glyphs" property')),k==="text-font"&&o.X(o.K(S))&&o.D(S.type)==="identity"&&X.push(new o.V(u,S,'"text-font" does not support identity functions'));else if(m.layerType==="model"&&a==="paint"&&x&&x.layout&&x.layout.hasOwnProperty("model-id")&&o.G(Q)&&(o.Y(Q)||o.H(Q))){const Y=o.L(o.K(S),Q),ae=Y.value.expression||Y.value._styleExpression.expression;ae&&!o.O(ae,["measure-light"])&&(k==="model-emissive-strength"&&o.Q(ae)&&o.N(ae)||X.push(new o.V(u,S,`${k} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return X.concat(an({key:m.key,value:S,valueSpec:Q,style:g,styleSpec:w,expressionContext:"property",propertyType:a,propertyKey:k}))}function yi(m){return Di(m,"paint")}function Go(m){return Di(m,"layout")}function xo(m){let a=[];const u=m.value,g=m.key,x=m.style,w=m.styleSpec;u.type||u.ref||a.push(new o.V(g,u,'either "type" or "ref" is required'));let S=o.D(u.type);const k=o.D(u.ref);if(u.id){const O=o.D(u.id);for(let N=0;N<m.arrayIndex;N++){const Q=x.layers[N];o.D(Q.id)===O&&a.push(new o.V(g,u.id,`duplicate layer id "${u.id}", previously used at line ${Q.id.__line__}`))}}if("ref"in u){let O;["type","source","source-layer","filter","layout"].forEach(N=>{N in u&&a.push(new o.V(g,u[N],`"${N}" is prohibited for ref layers`))}),x.layers.forEach(N=>{o.D(N.id)===k&&(O=N)}),O?O.ref?a.push(new o.V(g,u.ref,"ref cannot reference another ref layer")):S=o.D(O.type):typeof k=="string"&&a.push(new o.V(g,u.ref,`ref layer "${k}" not found`))}else if(S!=="background"&&S!=="sky"&&S!=="slot")if(u.source){const O=x.sources&&x.sources[u.source],N=O&&o.D(O.type);O?N==="vector"&&S==="raster"?a.push(new o.V(g,u.source,`layer "${u.id}" requires a raster source`)):N==="raster"&&S!=="raster"?a.push(new o.V(g,u.source,`layer "${u.id}" requires a vector source`)):N!=="vector"||u["source-layer"]?N==="raster-dem"&&S!=="hillshade"?a.push(new o.V(g,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):N!=="raster-array"||["raster","raster-particle"].includes(S)?S!=="line"||!u.paint||!u.paint["line-gradient"]&&!u.paint["line-trim-offset"]||N==="geojson"&&O.lineMetrics?S==="raster-particle"&&N!=="raster-array"&&a.push(new o.V(g,u.source,`layer "${u.id}" requires a 'raster-array' source.`)):a.push(new o.V(g,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new o.V(g,u.source,"raster-array source can only be used with layer type 'raster'.")):a.push(new o.V(g,u,`layer "${u.id}" must specify a "source-layer"`)):a.push(new o.V(g,u.source,`source "${u.source}" not found`))}else a.push(new o.V(g,u,'missing required property "source"'));return a=a.concat(Oi({key:g,value:u,valueSpec:w.layer,style:m.style,styleSpec:m.styleSpec,objectElementValidators:{"*":()=>[],type:()=>an({key:`${g}.type`,value:u.type,valueSpec:w.layer.type,style:m.style,styleSpec:m.styleSpec,object:u,objectKey:"type"}),filter:O=>Cs(o.C({layerType:S},O)),layout:O=>Oi({layer:u,key:O.key,value:O.value,valueSpec:{},style:O.style,styleSpec:O.styleSpec,objectElementValidators:{"*":N=>Go(o.C({layerType:S},N))}}),paint:O=>Oi({layer:u,key:O.key,value:O.value,valueSpec:{},style:O.style,styleSpec:O.styleSpec,objectElementValidators:{"*":N=>yi(o.C({layerType:S,layer:u},N))}})}})),a}function es(m){const a=m.value,u=m.key,g=o.B(a);return g!=="string"?[new o.V(u,a,`string expected, ${g} found`)]:[]}const wc={promoteId:function({key:m,value:a}){if(o.B(a)==="string")return es({key:m,value:a});{const u=[];for(const g in a)u.push(...es({key:`${m}.${g}`,value:a[g]}));return u}}};function Ra(m){const a=m.value,u=m.key,g=m.styleSpec,x=m.style;if(!a.type)return[new o.V(u,a,'"type" is required')];const w=o.D(a.type);let S=[];switch(["vector","raster","raster-dem","raster-array"].includes(w)&&(a.url||a.tiles||S.push(new o.A(u,a,'Either "url" or "tiles" is required.'))),w){case"vector":case"raster":case"raster-dem":case"raster-array":return S=S.concat(Oi({key:u,value:a,valueSpec:g[`source_${w.replace("-","_")}`],style:m.style,styleSpec:g,objectElementValidators:wc})),S;case"geojson":if(S=Oi({key:u,value:a,valueSpec:g.source_geojson,style:x,styleSpec:g,objectElementValidators:wc}),a.cluster)for(const k in a.clusterProperties){const[O,N]=a.clusterProperties[k],Q=typeof O=="string"?[O,["accumulated"],["get",k]]:O;S.push(...Ji({key:`${u}.${k}.map`,value:N,expressionContext:"cluster-map"})),S.push(...Ji({key:`${u}.${k}.reduce`,value:Q,expressionContext:"cluster-reduce"}))}return S;case"video":return Oi({key:u,value:a,valueSpec:g.source_video,style:x,styleSpec:g});case"image":return Oi({key:u,value:a,valueSpec:g.source_image,style:x,styleSpec:g});case"canvas":return[new o.V(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return io({key:`${u}.type`,value:a.type,valueSpec:{values:Wl(g)},style:x,styleSpec:g})}}function Wl(m){return m.source.reduce((a,u)=>{const g=m[u];return g.type.type==="enum"&&(a=a.concat(Object.keys(g.type.values))),a},[])}function ka(m){const a=m.value,u=m.styleSpec,g=u.light,x=m.style;let w=[];const S=o.B(a);if(a===void 0)return w;if(S!=="object")return w=w.concat([new o.V("light",a,`object expected, ${S} found`)]),w;for(const k in a){const O=k.match(/^(.*)-transition$/);w=w.concat(O&&g[O[1]]&&g[O[1]].transition?an({key:k,value:a[k],valueSpec:u.transition,style:x,styleSpec:u}):g[k]?an({key:k,value:a[k],valueSpec:g[k],style:x,styleSpec:u}):[new o.V(k,a[k],`unknown property "${k}"`)])}return w}function ts(m){const a=m.value;let u=[];if(!a)return u;const g=o.B(a);if(g!=="object")return u=u.concat([new o.V("light-3d",a,`object expected, ${g} found`)]),u;const x=m.styleSpec,w=x["light-3d"],S=m.key,k=m.style,O=m.style.lights;for(const W of["type","id"])if(!(W in a))return u=u.concat([new o.V("light-3d",a,`missing property ${W} on light`)]),u;if(a.type&&O)for(let W=0;W<m.arrayIndex;W++){const X=o.D(a.type),Y=O[W];o.D(Y.type)===X&&u.push(new o.V(S,a.id,`duplicate light type "${a.type}", previously defined at line ${Y.id.__line__}`))}const N=`properties_light_${a.type}`;if(!(N in x))return u=u.concat([new o.V("light-3d",a,`Invalid light type ${a.type}`)]),u;const Q=x[N];for(const W in a)if(W==="properties"){const X=a[W],Y=o.B(X);if(Y!=="object")return u=u.concat([new o.V("properties",X,`object expected, ${Y} found`)]),u;for(const ae in X)u=u.concat(Q[ae]?an({key:ae,value:X[ae],valueSpec:Q[ae],style:k,styleSpec:x}):[new o.A(m.key,X[ae],`unknown property "${ae}"`)])}else{const X=W.match(/^(.*)-transition$/);u=u.concat(X&&w[X[1]]&&w[X[1]].transition?an({key:W,value:a[W],valueSpec:x.transition,style:k,styleSpec:x}):w[W]?an({key:W,value:a[W],valueSpec:w[W],style:k,styleSpec:x}):[new o.A(W,a[W],`unknown property "${W}"`)])}return u}function tl(m){const a=m.value,u=m.key,g=m.style,x=m.styleSpec,w=x.terrain;let S=[];const k=o.B(a);if(a===void 0||k==="null")return S;if(k!=="object")return S=S.concat([new o.V("terrain",a,`object expected, ${k} found`)]),S;for(const O in a){const N=O.match(/^(.*)-transition$/);S=S.concat(N&&w[N[1]]&&w[N[1]].transition?an({key:O,value:a[O],valueSpec:x.transition,style:g,styleSpec:x}):w[O]?an({key:O,value:a[O],valueSpec:w[O],style:g,styleSpec:x}):[new o.A(O,a[O],`unknown property "${O}"`)])}if(a.source){const O=g.sources&&g.sources[a.source],N=O&&o.D(O.type);O?N!=="raster-dem"&&S.push(new o.V(u,a.source,`terrain cannot be used with a source of type ${String(N)}, it only be used with a "raster-dem" source type`)):S.push(new o.V(u,a.source,`source "${a.source}" not found`))}else S.push(new o.V(u,a,'terrain is missing required property "source"'));return S}function Qs(m){const a=m.value,u=m.style,g=m.styleSpec,x=g.fog;let w=[];const S=o.B(a);if(a===void 0)return w;if(S!=="object")return w=w.concat([new o.V("fog",a,`object expected, ${S} found`)]),w;for(const k in a){const O=k.match(/^(.*)-transition$/);w=w.concat(O&&x[O[1]]&&x[O[1]].transition?an({key:k,value:a[k],valueSpec:g.transition,style:u,styleSpec:g}):x[k]?an({key:k,value:a[k],valueSpec:x[k],style:u,styleSpec:g}):[new o.A(k,a[k],`unknown property "${k}"`)])}return w}const _l={"*":()=>[],array:Fo,boolean:function(m){const a=m.value,u=m.key,g=o.B(a);return g!=="boolean"?[new o.V(u,a,`boolean expected, ${g} found`)]:[]},number:Pr,color:function(m){const a=m.key,u=m.value,g=o.B(u);return g!=="string"?[new o.V(a,u,`color expected, ${g} found`)]:o.U.parseCSSColor(u)===null?[new o.V(a,u,`color expected, "${u}" found`)]:[]},enum:io,filter:Cs,function:nn,layer:xo,object:Oi,source:Ra,model:o.Z,light:ka,"light-3d":ts,terrain:tl,fog:Qs,string:es,formatted:function(m){return es(m).length===0?[]:Ji(m)},resolvedImage:function(m){return es(m).length===0?[]:Ji(m)},projection:function(m){const a=m.value,u=m.styleSpec,g=u.projection,x=m.style;let w=[];const S=o.B(a);if(S==="object")for(const k in a)w=w.concat(an({key:k,value:a[k],valueSpec:g[k],style:x,styleSpec:u}));else S!=="string"&&(w=w.concat([new o.V("projection",a,`object or string expected, ${S} found`)]));return w},import:function(m){const{value:a,styleSpec:u}=m,{data:g,...x}=a;Object.defineProperty(x,"__line__",{value:a.__line__,enumerable:!1});let w=Oi(o.C({},m,{value:x,valueSpec:u.import}));return o.D(x.id)===""&&w.push(new o.V(`${m.key}.id`,x,"import id can't be an empty string")),g&&(w=w.concat(js(g,u,{key:`${m.key}.data`}))),w}};function an(m,a=!1){const u=m.value,g=m.valueSpec,x=m.styleSpec;if(g.expression&&o.X(o.D(u)))return nn(m);if(g.expression&&o.J(o.K(u)))return Ji(m);if(g.type&&_l[g.type]){const w=_l[g.type](m);return a===!0&&w.length>0&&o.B(m.value)==="array"?Ji(m):w}return Oi(o.C({},m,{valueSpec:g.type?x[g.type]:g}))}function Hs(m){const a=m.value,u=m.key,g=es(m);return g.length||(a.indexOf("{fontstack}")===-1&&g.push(new o.V(u,a,'"glyphs" url must include a "{fontstack}" token')),a.indexOf("{range}")===-1&&g.push(new o.V(u,a,'"glyphs" url must include a "{range}" token'))),g}function js(m,a=o._,u={}){return an({key:u.key||"",value:m,valueSpec:a.$root,styleSpec:a,style:m,objectElementValidators:{glyphs:Hs,"*":()=>[]}})}function rs(m,a=o._){return Ue(js(m,a))}const ns=m=>Ue(Ra(m)),sa=m=>Ue(ka(m)),ql=m=>Ue(ts(m)),xl=m=>Ue(tl(m)),bl=m=>Ue(Qs(m)),ct=m=>Ue(xo(m)),he=m=>Ue(Cs(m)),ge=m=>Ue(yi(m)),ke=m=>Ue(Go(m)),Ne=m=>Ue(o.Z(m));function Ue(m){return m.slice().sort((a,u)=>a.line&&u.line?a.line-u.line:0)}function Je(m,a){let u=!1;if(a&&a.length)for(const g of a)g instanceof o.A?o.w(g.message):(m.fire(new o.t(new Error(g.message))),u=!0);return u}let lt;class tt extends o.E{constructor(a,u="flat"){super(),this._transitionable=new o.$(lt||(lt=new o.a0({anchor:new o.a1(o._.light.anchor),position:new o.a2(o._.light.position),color:new o.a1(o._.light.color),intensity:new o.a1(o._.light.intensity)}))),this.setLight(a,u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,u,g={}){this._validate(sa,a,g)||(this._transitionable.setTransitionOrValue(a),this.id=u)}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,u,g){return(!g||g.validate!==!1)&&Je(this,a.call(rs,o.l({value:u,style:{glyphs:!0,sprite:!0},styleSpec:o._})))}}const ut=new o.a0({source:new o.a1(o._.terrain.source),exaggeration:new o.a1(o._.terrain.exaggeration)});let vt=class extends o.E{constructor(m,a,u,g){super(),this.scope=u,this._transitionable=new o.$(ut,u,g),this._transitionable.setTransitionOrValue(m,g),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=a}get(){return this._transitionable.serialize()}set(m,a){this._transitionable.setTransitionOrValue(m,a)}updateTransitions(m){this._transitioning=this._transitionable.transitioned(m,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(m){this.properties=this._transitioning.possiblyEvaluate(m)}getExaggeration(m){return this._transitioning.possiblyEvaluate(new o.a3(m)).get("exaggeration")}isZoomDependent(){const m=this._transitionable._values.exaggeration;return m!=null&&m.value!=null&&m.value.expression!=null&&m.value.expression instanceof o.a4}};const ft=45,Rt=65,Kt=.05;function Wt(m,a,u,g){const x=o.a7(ft,Rt,u),[w,S]=vr(m,g);let k=1-Math.min(1,Math.exp((a-w)/(S-w)*-6));return k*=k*k,k=Math.min(1,1.00747*k),k*x*m.alpha}function vr(m,a){const u=.5/Math.tan(.5*a);return[m.range[0]+u,m.range[1]+u]}function wr(m,a,u,g,x){const w=o.a6.vec3.transformMat4([],[a,u,g],x.mercatorFogMatrix);return Wt(m,o.a6.vec3.length(w),x.pitch,x._fov)}function Sr(m,a,u,g,x,w,S){const k=[[u,g,0],[x,g,0],[x,w,0],[u,w,0]];let O=Number.MAX_VALUE,N=-Number.MAX_VALUE;for(const Q of k){const W=o.a6.vec3.transformMat4([],Q,a),X=o.a6.vec3.length(W);O=Math.min(O,X),N=Math.max(N,X)}return[Wt(m,O,S.pitch,S._fov),Wt(m,N,S.pitch,S._fov)]}const br=new o.a0({range:new o.a1(o._.fog.range),color:new o.a1(o._.fog.color),"high-color":new o.a1(o._.fog["high-color"]),"space-color":new o.a1(o._.fog["space-color"]),"horizon-blend":new o.a1(o._.fog["horizon-blend"]),"star-intensity":new o.a1(o._.fog["star-intensity"]),"vertical-range":new o.a1(o._.fog["vertical-range"])});class yn extends o.E{constructor(a,u,g,x){super(),this._transitionable=new o.$(br,g,new Map(x)),this.set(a,x),this._transitioning=this._transitionable.untransitioned(),this._transform=u,this.properties=new o.a8(br),this.scope=g}get state(){const a=this._transform,u=a.projection.name==="globe",g=o.a9(a.zoom),x=this.properties.get("range"),w=[.5,3];return{range:u?[o.aa(w[0],x[0],g),o.aa(w[1],x[1],g)]:x,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(a,u,g={}){if(this._validate(bl,a,g))return;const x=o.l({},a);for(const w of Object.keys(o._.fog))x[w]===void 0&&(x[w]=o._.fog[w].default);this._options=x,this._transitionable.setTransitionOrValue(this._options,u)}getOpacity(a){if(!this._transform.projection.supportsFog)return 0;const u=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:o.a7(ft,Rt,a))*u.a}getOpacityAtLatLng(a,u){return this._transform.projection.supportsFog?function(g,x,w){const S=o.a5.fromLngLat(x),k=w.elevation?w.elevation.getAtPointOrZero(S):0;return wr(g,S.x,S.y,k,w)}(this.state,a,u):0}getOpacityForTile(a){if(!this._transform.projection.supportsFog)return[1,1];const u=this._transform.calculateFogTileMatrix(a.toUnwrapped());return Sr(this.state,u,0,0,o.ab,o.ab,this._transform)}getOpacityForBounds(a,u,g,x,w){return this._transform.projection.supportsFog?Sr(this.state,a,u,g,x,w,this._transform):[1,1]}getFovAdjustedRange(a){return this._transform.projection.supportsFog?vr(this.state,a):[0,1]}isVisibleOnFrustum(a){if(!this._transform.projection.supportsFog)return!1;const u=[4,5,6,7];for(const g of u){const x=a.points[g];let w;if(x[2]>=0)w=x;else{const S=a.points[g-4];w=o.ac(S,x,S[2]/(S[2]-x[2]))}if(wr(this.state,w[0],w[1],0,this._transform)>=Kt)return!0}return!1}updateConfig(a){this._transitionable.setTransitionOrValue(this._options,new Map(a))}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,u,g){return(!g||g.validate!==!1)&&Je(this,a.call(rs,o.l({value:u,style:{glyphs:!0,sprite:!0},styleSpec:o._})))}}class xn extends o.E{constructor(a,u,g,x){super(),this.scope=g,this._options=a,this.properties=new o.a8(u),this._transitionable=new o.$(u,g,new Map(x)),this._transitionable.setTransitionOrValue(a.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(a){this._transitionable.setTransitionOrValue(this._options.properties,new Map(a))}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(a,u){this._options=a,this._transitionable.setTransitionOrValue(a.properties,u)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}let Rr,vn;class On{constructor(a,u,g,x){this.screenBounds=a,this.cameraPoint=u,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=g,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,x)}static createFromScreenPoints(a,u){let g,x;if(a instanceof o.P||typeof a[0]=="number"){const w=o.P.convert(a);g=[w],x=u.isPointAboveHorizon(w)}else{const w=o.P.convert(a[0]),S=o.P.convert(a[1]);g=[w,S],x=o.ae(w,S).every(k=>u.isPointAboveHorizon(k))}return new On(g,u.getCameraPoint(),x,u)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(a){return o.ae(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],a)}bufferedCameraGeometry(a){const u=this.screenBounds[0],g=this.screenBounds.length===1?this.screenBounds[0].add(new o.P(1,1)):this.screenBounds[1],x=o.ae(u,g,0,!1);return this.cameraPoint.y>g.y&&(this.cameraPoint.x>u.x&&this.cameraPoint.x<g.x?x.splice(3,0,this.cameraPoint):this.cameraPoint.x>=g.x?x[2]=this.cameraPoint:this.cameraPoint.x<=u.x&&(x[3]=this.cameraPoint)),o.af(x,a)}bufferedCameraGeometryGlobe(a){const u=this.screenBounds[0],g=this.screenBounds.length===1?this.screenBounds[0].add(new o.P(1,1)):this.screenBounds[1],x=o.ae(u,g,a),w=this.cameraPoint.clone();switch(3*((w.y>u.y)+(w.y>g.y))+((w.x>u.x)+(w.x>g.x))){case 0:x[0]=w,x[4]=w.clone();break;case 1:x.splice(1,0,w);break;case 2:x[1]=w;break;case 3:x.splice(4,0,w);break;case 5:x.splice(2,0,w);break;case 6:x[3]=w;break;case 7:x.splice(3,0,w);break;case 8:x[2]=w}return x}containsTile(a,u,g,x=0){const w=a.queryPadding/u._pixelsPerMercatorPixel+1,S=g?this._bufferedCameraMercator(w,u):this._bufferedScreenMercator(w,u);let k=a.tileID.wrap+(S.unwrapped?x:0);const O=S.polygon.map(ce=>o.ag(a.tileTransform,ce,k));if(!o.ah(O,0,0,o.ab,o.ab))return;k=a.tileID.wrap+(this.screenGeometryMercator.unwrapped?x:0);const N=this.screenGeometryMercator.polygon.map(ce=>o.ai(a.tileTransform,ce,k)),Q=N.map(ce=>new o.P(ce[0],ce[1])),W=u.getFreeCameraOptions().position||new o.a5(0,0,0),X=o.ai(a.tileTransform,W,k),Y=N.map(ce=>{const Ae=o.a6.vec3.sub(ce,ce,X);return o.a6.vec3.normalize(Ae,Ae),new o.aj(X,Ae)}),ae=o.ak(a,1,u.zoom)*u._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:Q,tilespaceRays:Y,bufferedTilespaceGeometry:O,bufferedTilespaceBounds:(le=o.al(O),le.min.x=o.ap(le.min.x,0,o.ab),le.min.y=o.ap(le.min.y,0,o.ab),le.max.x=o.ap(le.max.x,0,o.ab),le.max.y=o.ap(le.max.y,0,o.ab),le),tile:a,tileID:a.tileID,pixelToTileUnitsFactor:ae};var le}_bufferedScreenMercator(a,u){const g=zi(a);if(this._screenRaycastCache[g])return this._screenRaycastCache[g];{let x;return x=u.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(a),u):{polygon:this.bufferedScreenGeometry(a).map(w=>u.pointCoordinate3D(w)),unwrapped:!0},this._screenRaycastCache[g]=x,x}}_bufferedCameraMercator(a,u){const g=zi(a);if(this._cameraRaycastCache[g])return this._cameraRaycastCache[g];{let x;return x=u.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(a),u):{polygon:this.bufferedCameraGeometry(a).map(w=>u.pointCoordinate3D(w)),unwrapped:!0},this._cameraRaycastCache[g]=x,x}}_projectAndResample(a,u){const g=function(w,S){const k=o.a6.mat4.multiply([],S.pixelMatrix,S.globeMatrix),O=[0,-o.aq,0,1],N=[0,o.aq,0,1],Q=[0,0,0,1];o.a6.vec4.transformMat4(O,O,k),o.a6.vec4.transformMat4(N,N,k),o.a6.vec4.transformMat4(Q,Q,k);const W=new o.P(O[0]/O[3],O[1]/O[3]),X=new o.P(N[0]/N[3],N[1]/N[3]),Y=o.an(w,W)&&O[3]<Q[3],ae=o.an(w,X)&&N[3]<Q[3];if(!Y&&!ae)return null;const le=function(ze,Le,Ve){for(let Xe=1;Xe<ze.length;Xe++){const je=vi(Le.pointCoordinate3D(ze[Xe-1]).x),He=vi(Le.pointCoordinate3D(ze[Xe]).x);if(Ve<0){if(je<He)return{idx:Xe,t:-je/(He-1-je)}}else if(He<je)return{idx:Xe,t:(1-je)/(He+1-je)}}return null}(w,S,Y?-1:1);if(!le)return null;const{idx:ce,t:Ae}=le;let Be=ce>1?Ui(w.slice(0,ce),S):[],Te=ce<w.length?Ui(w.slice(ce),S):[];Be=Be.map(ze=>new o.P(vi(ze.x),ze.y)),Te=Te.map(ze=>new o.P(vi(ze.x),ze.y));const be=[...Be];be.length===0&&be.push(Te[Te.length-1]);const Me=o.aa(be[be.length-1].y,(Te.length===0?Be[0]:Te[0]).y,Ae);let Fe;return Fe=Y?[new o.P(0,Me),new o.P(0,0),new o.P(1,0),new o.P(1,Me)]:[new o.P(1,Me),new o.P(1,1),new o.P(0,1),new o.P(0,Me)],be.push(...Fe),Te.length===0?be.push(Be[0]):be.push(...Te),{polygon:be.map(ze=>new o.a5(ze.x,ze.y)),unwrapped:!1}}(a,u);if(g)return g;const x=function(w,S){let k=!1,O=-1/0,N=0;for(let W=0;W<w.length-1;W++)w[W].x>O&&(O=w[W].x,N=W);for(let W=0;W<w.length-1;W++){const X=(N+W)%(w.length-1),Y=w[X],ae=w[X+1];Math.abs(Y.x-ae.x)>.5&&(Y.x<ae.x?(Y.x+=1,X===0&&(w[w.length-1].x+=1)):(ae.x+=1,X+1===w.length-1&&(w[0].x+=1)),k=!0)}const Q=o.am(S.center.lng);return k&&Q<Math.abs(Q-1)&&w.forEach(W=>{W.x-=1}),{polygon:w,unwrapped:k}}(Ui(a,u).map(w=>new o.P(vi(w.x),w.y)),u);return{polygon:x.polygon.map(w=>new o.a5(w.x,w.y)),unwrapped:x.unwrapped}}}function Ui(m,a){return o.ao(m,u=>{const g=a.pointCoordinate3D(u);u.x=g.x,u.y=g.y},1/256)}function vi(m){return m<0?1+m%1:m%1}function zi(m){return 100*m|0}function Mo(m,a,u,g,x){const w=function(k,O){if(k)return x(k);if(O){if(m.url&&O.tiles&&m.tiles&&delete m.tiles,O.variants){if(!Array.isArray(O.variants))return x(new Error("variants must be an array"));for(const Q of O.variants){if(Q==null||typeof Q!="object"||Q.constructor!==Object)return x(new Error("variant must be an object"));if(!Array.isArray(Q.capabilities))return x(new Error("capabilities must be an array"));if(Q.capabilities.length===1&&Q.capabilities[0]==="meshopt"){O=o.l(O,Q);break}}}const N=o.ar(o.l(O,m),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);O.vector_layers&&(N.vectorLayers=O.vector_layers,N.vectorLayerIds=N.vectorLayers.map(Q=>Q.id)),O.raster_layers&&(N.rasterLayers=O.raster_layers,N.rasterLayerIds=N.rasterLayers.map(Q=>Q.id)),N.tiles=a.canonicalizeTileset(N,m.url),x(null,N)}},S=function(k,O,N){if(!k)return null;if(!O&&!N)return k;N=N||k.worldview_default;const Q=Object.values(k.language||{});if(Q.length===0)return null;const W=Object.values(k.worldview||{});if(W.length===0)return null;const X=Q.every(ae=>ae===O),Y=W.every(ae=>ae===N);return X&&Y?k:O in(k.language_options||{})||N in(k.worldview_options||{})?null:k.language_options&&k.worldview_options?k:null}(m.data,u,g);return S?o.q.frame(()=>w(null,S)):m.url?o.n(a.transformRequest(a.normalizeSourceURL(m.url,null,u,g),o.R.Source),w):o.q.frame(()=>{const{data:k,...O}=m;w(null,O)})}class aa{constructor(a,u,g){this.bounds=o.as.convert(this.validateBounds(a)),this.minzoom=u||0,this.maxzoom=g||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){const u=Math.pow(2,a.z),g=Math.floor(o.am(this.bounds.getWest())*u),x=Math.floor(o.at(this.bounds.getNorth())*u),w=Math.ceil(o.am(this.bounds.getEast())*u),S=Math.ceil(o.at(this.bounds.getSouth())*u);return a.x>=g&&a.x<w&&a.y>=x&&a.y<S}}class dh extends o.E{constructor(a,u,g,x){if(super(),this.id=a,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.l(this,o.ar(u,["url","scheme","tileSize","promoteId"])),this._options=o.l({type:"vector"},u),this._collectResourceTiming=!!u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(x),this._tileWorkers={},this._deduped=new o.au}load(a){this._loaded=!1,this.fire(new o.x("dataloading",{dataType:"source"}));const u=Array.isArray(this.map._language)?this.map._language.join():this.map._language,g=this.map._worldview;this._tileJSONRequest=Mo(this._options,this.map._requestManager,u,g,(x,w)=>{this._tileJSONRequest=null,this._loaded=!0,x?(u&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${u}`),g&&g.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${g}`),this.fire(new o.t(x))):w&&(o.l(this,w),w.bounds&&(this.tileBounds=new aa(w.bounds,this.minzoom,this.maxzoom)),$t(w.tiles,this.map._requestManager._customAccessToken),this.fire(new o.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.x("data",{dataType:"source",sourceDataType:"content"}))),a&&a(x)})}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}reload(){this.cancelTileJSONRequest();const a=o.av(this.id,this.scope);this.load(()=>this.map.style.clearSource(a))}setTiles(a){return this._options.tiles=a,this.reload(),this}setUrl(a){return this.url=a,this._options.url=a,this.reload(),this}onRemove(a){this.cancelTileJSONRequest()}serialize(){return o.l({},this._options)}loadTile(a,u){const g=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme)),x=this.map._requestManager.transformRequest(g,o.R.Tile),w=this.map.style?this.map.style.getLut(this.scope):null,S={request:x,data:void 0,uid:a.uid,tileID:a.tileID,tileZoom:a.tileZoom,zoom:a.tileID.overscaledZ,lut:w?{image:w.image.clone()}:null,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:o.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:a.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:a.isExtraShadowCaster,tessellationStep:this.map._tessellationStep};if(S.request.collectResourceTiming=this._collectResourceTiming,a.actor&&a.state!=="expired")a.state==="loading"?a.reloadCallback=u:a.request=a.actor.send("reloadTile",S,k.bind(this));else if(a.actor=this._tileWorkers[g]=this._tileWorkers[g]||this.dispatcher.getActor(),this.dispatcher.ready)a.request=a.actor.send("loadTile",S,k.bind(this),void 0,!0);else{const O=o.aw.call({deduped:this._deduped},S,(N,Q)=>{N||!Q?k.call(this,N):(S.data={cacheControl:Q.cacheControl,expires:Q.expires,rawData:Q.rawData.slice(0)},a.actor&&a.actor.send("loadTile",S,k.bind(this),void 0,!0))},!0);a.request={cancel:O}}function k(O,N){return delete a.request,a.aborted?u(null):O&&O.status!==404?u(O):(N&&N.resourceTiming&&(a.resourceTiming=N.resourceTiming),this.map._refreshExpiredTiles&&N&&a.setExpiryData(N),a.loadVectorData(N,this.map.painter),o.ax(this.dispatcher),u(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}}abortTile(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(a,u){a.actor&&a.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id,scope:this.scope}),a.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Xl extends o.E{constructor(a,u,g,x){super(),this.id=a,this.dispatcher=g,this.setEventedParent(x),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.l({type:"raster"},u),o.l(this,o.ar(u,["url","scheme","tileSize"]))}load(a){this._loaded=!1,this.fire(new o.x("dataloading",{dataType:"source"})),this._tileJSONRequest=Mo(this._options,this.map._requestManager,null,null,(u,g)=>{this._tileJSONRequest=null,this._loaded=!0,u?this.fire(new o.t(u)):g&&(o.l(this,g),g.bounds&&(this.tileBounds=new aa(g.bounds,this.minzoom,this.maxzoom)),$t(g.tiles),this.fire(new o.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.x("data",{dataType:"source",sourceDataType:"content"}))),a&&a(u)})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}reload(){this.cancelTileJSONRequest();const a=o.av(this.id,this.scope);this.load(()=>this.map.style.clearSource(a))}setTiles(a){return this._options.tiles=a,this.reload(),this}setUrl(a){return this.url=a,this._options.url=a,this.reload(),this}onRemove(a){this.cancelTileJSONRequest()}serialize(){return o.l({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a,u){const g=o.q.devicePixelRatio>=2,x=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),g,this.tileSize);a.request=o.o(this.map._requestManager.transformRequest(x,o.R.Tile),(w,S,k,O)=>(delete a.request,a.aborted?(a.state="unloaded",u(null)):w?(a.state="errored",u(w)):S?(this.map._refreshExpiredTiles&&a.setExpiryData({cacheControl:k,expires:O}),a.setTexture(S,this.map.painter),a.state="loaded",o.ax(this.dispatcher),void u(null)):u(null)))}abortTile(a,u){a.request&&(a.request.cancel(),delete a.request),u&&u()}unloadTile(a,u){a.texture&&a.texture instanceof o.T?(a.destroy(!0),a.texture&&a.texture instanceof o.T&&this.map.painter.saveTileTexture(a.texture)):a.destroy(),u&&u()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Zl extends Xl{constructor(a,u,g,x){super(a,u,g,x),this.type="raster-array",this.maxzoom=22,this._options=o.l({type:"raster-array"},u)}triggerRepaint(a){const u=this.map.painter._terrain,g=this.map.style.getSourceCache(this.id);u&&u.enabled&&g&&u._clearRenderCacheForTile(g.id,a.tileID),this.map.triggerRepaint()}loadTile(a,u){const g=this.map._requestManager.normalizeTileURL(a.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),x=this.map._requestManager.transformRequest(g,o.R.Tile);a.requestParams=x,a.actor||(a.actor=this.dispatcher.getActor()),a.request=a.fetchHeader(void 0,(w,S,k,O)=>{if(delete a.request,a.aborted)return a.state="unloaded",u(null);if(w)return w.code===20?void 0:(a.state="errored",u(w));this.map._refreshExpiredTiles&&a.setExpiryData({cacheControl:k,expires:O}),a.state="empty",u(null)})}unloadTile(a,u){const g=a.texture;g&&g instanceof o.T?(a.destroy(!0),this.map.painter.saveTileTexture(g)):(a.destroy(),a.flushQueues(),a._isHeaderLoaded=!1,delete a._mrt,delete a.textureDescriptor),a.fbo&&(a.fbo.destroy(),delete a.fbo),delete a.request,delete a.requestParams,delete a.neighboringTiles,a.state="unloaded"}prepareTile(a,u,g){a._isHeaderLoaded&&(a.state!=="empty"&&(a.state="reloading"),a.fetchBand(u,g,(x,w)=>{if(x)return a.state="errored",this.fire(new o.t(x)),void this.triggerRepaint(a);w&&(a.setTexture(w,this.map.painter),a.state="loaded",this.triggerRepaint(a))}))}getInitialBand(a){if(!this.rasterLayers)return 0;const u=this.rasterLayers.find(({id:w})=>w===a),g=u&&u.fields,x=g&&g.bands&&g.bands;return x?x[0]:0}getTextureDescriptor(a,u,g){if(!a)return;const x=u.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!x)return;let w=null;u instanceof o.aB?w=u.paint.get("raster-array-band"):u instanceof o.aC&&(w=u.paint.get("raster-particle-array-band"));const S=w||this.getInitialBand(x);if(S!=null)if(a.textureDescriptor){if(!a.updateNeeded(x,S)||g)return Object.assign({},a.textureDescriptor,{texture:a.texture})}else this.prepareTile(a,x,S)}}const wu={vector:dh,raster:Xl,"raster-dem":class extends Xl{constructor(m,a,u,g){super(m,a,u,g),this.type="raster-dem",this.maxzoom=22,this._options=o.l({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox"}loadTile(m,a){const u=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function g(x,w){x&&(m.state="errored",a(x)),w&&(m.dem=w,m.dem.onDeserialize(),m.needsHillshadePrepare=!0,m.needsDEMTextureUpload=!0,m.state="loaded",a(null))}m.request=o.o(this.map._requestManager.transformRequest(u,o.R.Tile),(function(x,w,S,k){if(delete m.request,m.aborted)m.state="unloaded",a(null);else if(x)m.state="errored",a(x);else if(w){this.map._refreshExpiredTiles&&m.setExpiryData({cacheControl:S,expires:k});const O=ImageBitmap&&w instanceof ImageBitmap&&o.ay(),N=1-(w.width-o.az(w.width))/2;N<1||m.neighboringTiles||(m.neighboringTiles=this._getNeighboringTiles(m.tileID));const Q=O?w:o.q.getImageData(w,N),W={uid:m.uid,coord:m.tileID,source:this.id,scope:this.scope,rawImageData:Q,encoding:this.encoding,padding:N};m.actor&&m.state!=="expired"||(m.actor=this.dispatcher.getActor(),m.actor.send("loadDEMTile",W,g.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(m){const a=m.canonical,u=Math.pow(2,a.z),g=(a.x-1+u)%u,x=a.x===0?m.wrap-1:m.wrap,w=(a.x+1+u)%u,S=a.x+1===u?m.wrap+1:m.wrap,k={};return k[new o.aA(m.overscaledZ,x,a.z,g,a.y).key]={backfilled:!1},k[new o.aA(m.overscaledZ,S,a.z,w,a.y).key]={backfilled:!1},a.y>0&&(k[new o.aA(m.overscaledZ,x,a.z,g,a.y-1).key]={backfilled:!1},k[new o.aA(m.overscaledZ,m.wrap,a.z,a.x,a.y-1).key]={backfilled:!1},k[new o.aA(m.overscaledZ,S,a.z,w,a.y-1).key]={backfilled:!1}),a.y+1<u&&(k[new o.aA(m.overscaledZ,x,a.z,g,a.y+1).key]={backfilled:!1},k[new o.aA(m.overscaledZ,m.wrap,a.z,a.x,a.y+1).key]={backfilled:!1},k[new o.aA(m.overscaledZ,S,a.z,w,a.y+1).key]={backfilled:!1}),k}},"raster-array":Zl,geojson:class extends o.E{constructor(m,a,u,g){super(),this.id=m,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=u.getActor(),this.setEventedParent(g),this._data=a.data,this._options=o.l({},a),this._collectResourceTiming=a.collectResourceTiming,a.maxzoom!==void 0&&(this.maxzoom=a.maxzoom),a.minzoom!==void 0&&(this.minzoom=a.minzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId;const x=o.ab/this.tileSize;this.workerOptions=o.l({source:this.id,scope:this.scope,cluster:a.cluster||!1,geojsonVtOptions:{buffer:(a.buffer!==void 0?a.buffer:128)*x,tolerance:(a.tolerance!==void 0?a.tolerance:.375)*x,extent:o.ab,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:a.clusterMaxZoom!==void 0?a.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:o.ab,radius:(a.clusterRadius!==void 0?a.clusterRadius:50)*x,log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter,dynamic:a.dynamic},a.workerOptions)}onAdd(m){this.map=m,this.setData(this._data)}setData(m){return this._data=m,this._updateWorkerData(),this}updateData(m){if(!this._options.dynamic)return this.fire(new o.t(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof m!="string"&&(m.type==="Feature"&&(m={type:"FeatureCollection",features:[m]}),m.type!=="FeatureCollection"))return this.fire(new o.t(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof m!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const a=new Map;for(const u of this._data.features)a.set(u.id,u);for(const u of m.features)a.set(u.id,u);this._data.features=[...a.values()]}else this._data=m;return this._updateWorkerData(!0),this}getClusterExpansionZoom(m,a){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:m,source:this.id,scope:this.scope},a),this}getClusterChildren(m,a){return this.actor.send("geojson.getClusterChildren",{clusterId:m,source:this.id,scope:this.scope},a),this}getClusterLeaves(m,a,u,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:m,limit:a,offset:u},g),this}_updateWorkerData(m=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new o.x("dataloading",{dataType:"source"})),this._loaded=!1;const a=o.l({append:m},this.workerOptions);a.scope=this.scope;const u=this._data;typeof u=="string"?(a.request=this.map._requestManager.transformRequest(o.q.resolveURL(u),o.R.Source),a.request.collectResourceTiming=this._collectResourceTiming):a.data=JSON.stringify(u),this._pendingLoad=this.actor.send(`${this.type}.loadData`,a,(g,x)=>{if(this._loaded=!0,this._pendingLoad=null,g)this.fire(new o.t(g));else{const w={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&x&&x.resourceTiming&&x.resourceTiming[this.id]&&(w.resourceTiming=x.resourceTiming[this.id]),m&&(this._partialReload=!0),this.fire(new o.x("data",w)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(m),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(m,a){const u=m.actor?"reloadTile":"loadTile";m.actor=this.actor;const g=this.map.style?this.map.style.getLut(this.scope):null,x=this._partialReload,w={type:this.type,uid:m.uid,tileID:m.tileID,tileZoom:m.tileZoom,zoom:m.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:g?{image:g.image.clone()}:null,scope:this.scope,pixelRatio:o.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,partial:x};m.request=this.actor.send(u,w,(S,k)=>x&&!k?(m.state="loaded",a(null)):(delete m.request,m.destroy(),m.aborted?a(null):S?a(S):(m.loadVectorData(k,this.map.painter,u==="reloadTile"),a(null))),void 0,u==="loadTile")}abortTile(m){m.request&&(m.request.cancel(),delete m.request),m.aborted=!0}unloadTile(m,a){this.actor.send("removeTile",{uid:m.uid,type:this.type,source:this.id,scope:this.scope}),m.destroy()}onRemove(m){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return o.l({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends o.aD{constructor(m,a,u,g){super(m,a,u,g),this.roundZoom=!0,this.type="video",this.options=a}load(){this._loaded=!1;const m=this.options;this.urls=[];for(const a of m.urls)this.urls.push(this.map._requestManager.transformRequest(a,o.R.Source).url);o.aE(this.urls,(a,u)=>{this._loaded=!0,a?this.fire(new o.t(a)):u&&(this.video=u,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(m){if(this.video){const a=this.video.seekable;m<a.start(0)||m>a.end(0)?this.fire(new o.t(new o.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${a.start(0)} and ${a.end(0)}-second mark.`))):this.video.currentTime=m}}getVideo(){return this.video}onAdd(m){this.map||(this.map=m,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const m=this.map.painter.context,a=m.gl;this.texture?this.video.paused||(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new o.T(m,this.video,a.RGBA8),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(m)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:o.aD,model:class extends o.E{constructor(m,a,u,g){super(),this.id=m,this.type="model",this.models=[],this._loaded=!1,this._options=a}load(){const m=[];for(const a in this._options.models){const u=this._options.models[a],g=o.aG(this.map._requestManager.transformRequest(u.uri,o.R.Model).url).then(x=>{if(!x)return;const w=o.aH(x),S=new o.aI(a,u.position,u.orientation,w);S.computeBoundsAndApplyParent(),this.models.push(S)}).catch(x=>{this.fire(new o.t(new Error(`Could not load model ${a} from ${u.uri}: ${x.message}`)))});m.push(g)}return Promise.allSettled(m).then(()=>{this._loaded=!0,this.fire(new o.x("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(a=>{this.fire(new o.t(new Error(`Could not load models: ${a.message}`)))})}onAdd(m){this.map=m,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(m,a){}serialize(){return{type:"model"}}},"batched-model":class extends o.E{constructor(m,a,u,g){super(),this.type="batched-model",this.id=m,this.tileSize=512,this._options=a,this.tiles=this._options.tiles,this.maxzoom=a.maxzoom||19,this.minzoom=a.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=u,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(g)}onAdd(m){this.map=m,this.load()}load(m){this._loaded=!1,this.fire(new o.x("dataloading",{dataType:"source"}));const a=Array.isArray(this.map._language)?this.map._language.join():this.map._language,u=this.map._worldview;this._tileJSONRequest=Mo(this._options,this.map._requestManager,a,u,(g,x)=>{this._tileJSONRequest=null,this._loaded=!0,g?(a&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${a}`),u&&u.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${u}`),this.fire(new o.t(g))):x&&(o.l(this,x),x.bounds&&(this.tileBounds=new aa(x.bounds,this.minzoom,this.maxzoom)),$t(x.tiles,this.map._requestManager._customAccessToken),this.fire(new o.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.x("data",{dataType:"source",sourceDataType:"content"}))),m&&m(g)})}hasTransition(){return!1}hasTile(m){return!this.tileBounds||this.tileBounds.contains(m.canonical)}loaded(){return this._loaded}loadTile(m,a){const u=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme)),g={request:this.map._requestManager.transformRequest(u,o.R.Tile),data:void 0,uid:m.uid,tileID:m.tileID,tileZoom:m.tileZoom,zoom:m.tileID.overscaledZ,tileSize:this.tileSize*m.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:m.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0};if(m.actor&&m.state!=="expired")if(m.state==="loading")m.reloadCallback=a;else{if(m.buckets){const w=Object.values(m.buckets);for(const S of w)S.dirty=!0;return void(m.state="loaded")}m.request=m.actor.send("reloadTile",g,x.bind(this))}else m.actor=this.dispatcher.getActor(),m.request=m.actor.send("loadTile",g,x.bind(this),void 0,!0);function x(w,S){return m.aborted?a(null):w&&w.status!==404?a(w):(S&&(S.resourceTiming&&(m.resourceTiming=S.resourceTiming),this.map._refreshExpiredTiles&&m.setExpiryData(S),m.buckets={...m.buckets,...S.buckets},S.featureIndex&&(m.latestFeatureIndex=S.featureIndex)),m.state="loaded",void a(null))}}serialize(){return o.l({},this._options)}},canvas:class extends o.aD{constructor(m,a,u,g){super(m,a,u,g),a.coordinates?Array.isArray(a.coordinates)&&a.coordinates.length===4&&!a.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(w=>typeof w!="number"))||this.fire(new o.t(new o.V(`sources.${m}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.t(new o.V(`sources.${m}`,null,'missing required property "coordinates"'))),a.animate&&typeof a.animate!="boolean"&&this.fire(new o.t(new o.V(`sources.${m}`,null,'optional "animate" property must be a boolean value'))),a.canvas?typeof a.canvas=="string"||a.canvas instanceof HTMLCanvasElement||this.fire(new o.t(new o.V(`sources.${m}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.t(new o.V(`sources.${m}`,null,'missing required property "canvas"'))),this.options=a,this.animate=a.animate===void 0||a.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.t(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(m){this.map=m,this.load(),this.canvas&&this.animate&&this.play()}onRemove(m){this.pause()}prepare(){let m=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,m=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,m=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const a=this.map.painter.context;this.texture?!m&&!this._playing||this.texture instanceof o.aF||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.T(a,this.canvas,a.gl.RGBA8,{premultiply:!0}),this._prepareData(a)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const m of[this.canvas.width,this.canvas.height])if(isNaN(m)||m<=0)return!0;return!1}},custom:class extends o.E{constructor(m,a,u,g){super(),this.id=m,this.type="custom",this._dataType="raster",this._dispatcher=u,this._implementation=a,this.setEventedParent(g),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new o.t(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new o.t(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new aa(this._implementation.bounds,this.minzoom,this.maxzoom)),a.update=this._update.bind(this),a.clearTiles=this._clearTiles.bind(this),a.coveringTiles=this._coveringTiles.bind(this),o.l(this,o.ar(a,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return o.ar(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new o.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.x("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(m){this.map=m,this._loaded=!1,this.fire(new o.x("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(m),this.load()}onRemove(m){this._implementation.onRemove&&this._implementation.onRemove(m)}hasTile(m){if(this._implementation.hasTile){const{x:a,y:u,z:g}=m.canonical;return this._implementation.hasTile({x:a,y:u,z:g})}return!this.tileBounds||this.tileBounds.contains(m.canonical)}loadTile(m,a){const{x:u,y:g,z:x}=m.tileID.canonical,w=new AbortController;m.request=Promise.resolve(this._implementation.loadTile({x:u,y:g,z:x},{signal:w.signal})).then((function(S){return delete m.request,m.aborted?(m.state="unloaded",a(null)):S===void 0?(m.state="errored",a(null)):S===null?(this.loadTileData(m,{width:this.tileSize,height:this.tileSize,data:null}),m.state="loaded",a(null)):function(k){return k instanceof ImageData||k instanceof HTMLCanvasElement||k instanceof ImageBitmap||k instanceof HTMLImageElement}(S)?(this.loadTileData(m,S),m.state="loaded",void a(null)):(m.state="errored",a(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(S=>{S.code!==20&&(m.state="errored",a(S))}),m.request.cancel=()=>w.abort()}loadTileData(m,a){m.setTexture(a,this.map.painter)}unloadTile(m,a){if(m.texture&&m.texture instanceof o.T?(m.destroy(!0),m.texture&&m.texture instanceof o.T&&this.map.painter.saveTileTexture(m.texture)):m.destroy(),this._implementation.unloadTile){const{x:u,y:g,z:x}=m.tileID.canonical;this._implementation.unloadTile({x:u,y:g,z:x})}a&&a()}abortTile(m,a){m.request&&m.request.cancel&&(m.request.cancel(),delete m.request),a&&a()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(m=>({x:m.canonical.x,y:m.canonical.y,z:m.canonical.z}))}_clearTiles(){const m=o.av(this.id,this.scope);this.map.style.clearSource(m)}_update(){this.fire(new o.x("data",{dataType:"source",sourceDataType:"content"}))}}},wl=function(m,a,u,g){const x=new wu[a.type](m,a,u,g);if(x.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${x.id}`);return o.aJ(["load","abort","unload","serialize","prepare"],x),x};function Bu(m,a){const u=o.a6.mat4.identity([]);return o.a6.mat4.scale(u,u,[.5*m.width,.5*-m.height,1]),o.a6.mat4.translate(u,u,[1,-1,0]),o.a6.mat4.multiply(u,u,m.calculateProjMatrix(a.toUnwrapped())),Float32Array.from(u)}function fh(m,a,u,g,x,w,S,k=!1){const O=m.tilesIn(g,S,k);O.sort(Cc);const N=[];for(const W of O)N.push({wrappedTileID:W.tile.tileID.wrapped().key,queryResults:W.tile.queryRenderedFeatures(a,u,m._state,W,x,w,Bu(m.transform,W.tile.tileID),k)});const Q=function(W){const X={},Y={};for(const ae of W){const le=ae.queryResults,ce=ae.wrappedTileID,Ae=Y[ce]=Y[ce]||{};for(const Be in le){const Te=le[Be],be=Ae[Be]=Ae[Be]||{},Me=X[Be]=X[Be]||[];for(const Fe of Te)be[Fe.featureIndex]||(be[Fe.featureIndex]=!0,Me.push(Fe))}}return X}(N);for(const W in Q)Q[W].forEach(X=>{const Y=X.feature,ae=Y.layer;ae&&ae.type!=="background"&&ae.type!=="sky"&&ae.type!=="slot"&&(Y.source=ae.source,ae["source-layer"]&&(Y.sourceLayer=ae["source-layer"]),Y.state=Y.id!==void 0?m.getFeatureState(ae["source-layer"],Y.id):{})});return Q}function Bc(m,a){const u=m.getRenderableIds().map(w=>m.getTileByID(w)),g=[],x={};for(let w=0;w<u.length;w++){const S=u[w],k=S.tileID.canonical.key;x[k]||(x[k]=!0,S.querySourceFeatures(g,a))}return g}function Cc(m,a){const u=m.tileID,g=a.tileID;return u.overscaledZ-g.overscaledZ||u.canonical.y-g.canonical.y||u.wrap-g.wrap||u.canonical.x-g.canonical.x}const Gs=32,Ks=33,Ws=new Uint16Array(8184);for(let m=0;m<2046;m++){let a=m+2,u=0,g=0,x=0,w=0,S=0,k=0;for(1&a?x=w=S=Gs:u=g=k=Gs;(a>>=1)>1;){const N=u+x>>1,Q=g+w>>1;1&a?(x=u,w=g,u=S,g=k):(u=x,g=w,x=S,w=k),S=N,k=Q}const O=4*m;Ws[O+0]=u,Ws[O+1]=g,Ws[O+2]=x,Ws[O+3]=w}const Ro=new Uint16Array(2178),bo=new Uint8Array(1089),Ss=new Uint16Array(1089);function Sc(m){return m===0?-.03125:m===32?.03125:0}const Yl={type:2,extent:o.ab,loadGeometry:()=>[[new o.P(0,0),new o.P(o.ab+1,0),new o.P(o.ab+1,o.ab+1),new o.P(0,o.ab+1),new o.P(0,0)]]};class la{constructor(a,u,g,x,w){this.tileID=a,this.uid=o.aP(),this.uses=0,this.tileSize=u,this.tileZoom=g,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=w,x&&x.style&&(this._lastUpdatedBrightness=x.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",x&&x.transform&&(this.projection=x.transform.projection)}registerFadeDuration(a){const u=a+this.timeAdded;u<o.q.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=o.aK(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(a,u,g){if(this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(x,w){const S={};if(!w)return S;for(const k of x){const O=k.layerIds.map(N=>w.getLayer(N)).filter(Boolean);if(O.length!==0){k.layers=O,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map(N=>O.filter(Q=>Q.id===N)[0]));for(const N of O)S[N.fqid]=k}}return S}(a.buckets,u.style),this.hasSymbolBuckets=!1;for(const x in this.buckets){const w=this.buckets[x];if(w instanceof o.aR){if(this.hasSymbolBuckets=!0,!g)break;w.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const x in this.buckets){const w=this.buckets[x];if(w instanceof o.aR&&w.hasRTLText){this.hasRTLText=!0,o.aS();break}}this.queryPadding=0;for(const x in this.buckets){const w=this.buckets[x],S=u.style.getOwnLayer(x);if(!S)continue;const k=S.queryRadius(w);this.queryPadding=Math.max(this.queryPadding,k)}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage),a.lineAtlas&&(this.lineAtlas=a.lineAtlas),this._lastUpdatedBrightness=a.brightness}else this.collisionBoxArray=new o.aQ}unloadVectorData(){if(this.hasData()){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(a){return this.buckets[a.fqid]}upload(a){for(const x in this.buckets){const w=this.buckets[x];w.uploadPending()&&w.upload(a)}const u=a.gl,g=this.imageAtlas;if(g&&!g.uploaded){const x=!!Object.keys(g.patternPositions).length;this.imageAtlasTexture=new o.T(a,g.image,u.RGBA8,{useMipmap:x}),this.imageAtlas.uploaded=!0}this.glyphAtlasImage&&(this.glyphAtlasTexture=new o.T(a,this.glyphAtlasImage,u.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new o.T(a,this.lineAtlas.image,u.R8),this.lineAtlas.uploaded=!0)}prepare(a,u,g){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture,g),!u||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const x=u.style.getBrightness();(this._lastUpdatedBrightness||x)&&(this._lastUpdatedBrightness&&x&&Math.abs(this._lastUpdatedBrightness-x)<.001||(this._lastUpdatedBrightness=x,this.updateBuckets(u)))}queryRenderedFeatures(a,u,g,x,w,S,k,O){return this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)?this.latestFeatureIndex.query({tileResult:x,pixelPosMatrix:k,transform:S,params:w,tileTransform:this.tileTransform},a,u,g):{}}querySourceFeatures(a,u){const g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;const x=g.loadVTLayers(),w=u?u.sourceLayer:"",S=x._geojsonTileLayer||x[w];if(!S)return;const k=o.aT(u&&u.filter),{z:O,x:N,y:Q}=this.tileID.canonical,W={z:O,x:N,y:Q};for(let X=0;X<S.length;X++){const Y=S.feature(X);if(k.needGeometry){const ce=o.aU(Y,!0);if(!k.filter(new o.a3(this.tileID.overscaledZ),ce,this.tileID.canonical))continue}else if(!k.filter(new o.a3(this.tileID.overscaledZ),Y))continue;const ae=g.getId(Y,w),le=new o.aV(Y,O,N,Q,ae);le.tile=W,a.push(le)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const u=this.expirationTime;if(a.cacheControl){const g=o.aW(a.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const g=Date.now();let x=!1;if(this.expirationTime>g)x=!1;else if(u)if(this.expirationTime<u)x=!0;else{const w=this.expirationTime-u;w?this.expirationTime=g+Math.max(w,3e4):x=!0}else x=!0;x?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(a,u){this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(a).length!==0&&u&&this.updateBuckets(u)}updateBuckets(a){if(!this.latestFeatureIndex)return;const u=this.latestFeatureIndex.loadVTLayers(),g=a.style.listImages(),x=a.style.getBrightness();for(const w in this.buckets){if(!a.style.hasLayer(w))continue;const S=this.buckets[w],k=S.layers[0].sourceLayer||"_geojsonTileLayer",O=u[k],N=a.style.getOwnSourceCache(S.layers[0].source);let Q={};N&&(Q=N._state.getState(k,void 0)),S.update(Q,O,g,this.imageAtlas&&this.imageAtlas.patternPositions||{},x),(S instanceof o.aX||S instanceof o.aY)&&a._terrain&&a._terrain.enabled&&N&&S.programConfigurations.needsUpload&&a._terrain._clearRenderCacheForTile(N.id,this.tileID);const W=a&&a.style&&a.style.getOwnLayer(w);W&&(this.queryPadding=Math.max(this.queryPadding,W.queryRadius(S)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<o.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=o.q.now()+a}setTexture(a,u){const g=u.context,x=g.gl;this.texture=this.texture||u.getTileTexture(a.width),this.texture&&this.texture instanceof o.T?this.texture.update(a):(this.texture=new o.T(g,a,x.RGBA8,{useMipmap:!0}),this.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE))}setDependencies(a,u){const g={};for(const x of u)g[x]=!0;this.dependencies[a]=g}hasDependency(a,u){for(const g of a){const x=this.dependencies[g];if(x){for(const w of u)if(x[w])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(a,u){if(!u||u.name==="mercator"||this._tileDebugBuffer)return;const g=o.aZ(Yl,this.tileID.canonical,this.tileTransform)[0],x=new o.a_,w=new o.a$;for(let S=0;S<g.length;S++){const{x:k,y:O}=g[S];x.emplaceBack(k,O),w.emplaceBack(S)}w.emplaceBack(0),this._tileDebugIndexBuffer=a.createIndexBuffer(w),this._tileDebugBuffer=a.createVertexBuffer(x,o.b0.members),this._tileDebugSegments=o.b1.simpleSegment(0,0,x.length,w.length)}_makeTileBoundsBuffers(a,u){if(this._tileBoundsBuffer||!u||u.name==="mercator")return;const g=o.aZ(Yl,this.tileID.canonical,this.tileTransform)[0];let x,w;if(this.isRaster){const S=function(k,O){const N=o.aK(k,O),Q=Math.pow(2,k.z);for(let ce=0;ce<Ks;ce++)for(let Ae=0;Ae<Ks;Ae++){const Be=o.aL((k.x+(Ae+Sc(Ae))/Gs)/Q),Te=o.aM((k.y+(ce+Sc(ce))/Gs)/Q),be=O.project(Be,Te),Me=ce*Ks+Ae;Ro[2*Me+0]=Math.round((be.x*N.scale-N.x)*o.ab),Ro[2*Me+1]=Math.round((be.y*N.scale-N.y)*o.ab)}bo.fill(0),Ss.fill(0);for(let ce=2045;ce>=0;ce--){const Ae=4*ce,Be=Ws[Ae+0],Te=Ws[Ae+1],be=Ws[Ae+2],Me=Ws[Ae+3],Fe=Be+be>>1,ze=Te+Me>>1,Le=Fe+ze-Te,Ve=ze+Be-Fe,Xe=Te*Ks+Be,je=Me*Ks+be,He=ze*Ks+Fe,nt=Math.hypot((Ro[2*Xe+0]+Ro[2*je+0])/2-Ro[2*He+0],(Ro[2*Xe+1]+Ro[2*je+1])/2-Ro[2*He+1])>=16;bo[He]=bo[He]||(nt?1:0),ce<1022&&(bo[He]=bo[He]||bo[(Te+Ve>>1)*Ks+(Be+Le>>1)]||bo[(Me+Ve>>1)*Ks+(be+Le>>1)])}const W=new o.aN,X=new o.aO;let Y=0;function ae(ce,Ae){const Be=Ae*Ks+ce;return Ss[Be]===0&&(W.emplaceBack(Ro[2*Be+0],Ro[2*Be+1],ce*o.ab/Gs,Ae*o.ab/Gs),Ss[Be]=++Y),Ss[Be]-1}function le(ce,Ae,Be,Te,be,Me){const Fe=ce+Be>>1,ze=Ae+Te>>1;if(Math.abs(ce-be)+Math.abs(Ae-Me)>1&&bo[ze*Ks+Fe])le(be,Me,ce,Ae,Fe,ze),le(Be,Te,be,Me,Fe,ze);else{const Le=ae(ce,Ae),Ve=ae(Be,Te),Xe=ae(be,Me);X.emplaceBack(Le,Ve,Xe)}}return le(0,0,Gs,Gs,Gs,0),le(Gs,Gs,0,0,0,Gs),{vertices:W,indices:X}}(this.tileID.canonical,u);x=S.vertices,w=S.indices}else{x=new o.aN,w=new o.aO;for(const{x:k,y:O}of g)x.emplaceBack(k,O,0,0);const S=o.b2(x.int16,void 0,4);for(let k=0;k<S.length;k+=3)w.emplaceBack(S[k],S[k+1],S[k+2])}this._tileBoundsBuffer=a.createVertexBuffer(x,o.b3.members),this._tileBoundsIndexBuffer=a.createIndexBuffer(w),this._tileBoundsSegments=o.b1.simpleSegment(0,0,x.length,w.length)}_makeGlobeTileDebugBuffers(a,u){const g=u.projection;if(!g||g.name!=="globe"||u.freezeTileCoverage)return;const x=this.tileID.canonical,w=o.b4(x,u),S=o.b5(w),k=o.a9(u.zoom);let O;k>0&&(O=o.a6.mat4.invert(new Float64Array(16),u.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(a,x,u,S,O,k),this._makeGlobeTileDebugTextBuffer(a,x,u,S,O,k)}_globePoint(a,u,g,x,w,S,k){let O=o.b6(a,u,g);if(S){const N=1<<g.z,Q=o.am(x.center.lng),W=o.at(x.center.lat),X=(g.x+.5)/N-Q;let Y=0;X>.5?Y=-1:X<-.5&&(Y=1);let ae=(a/o.ab+g.x)/N+Y,le=(u/o.ab+g.y)/N;ae=(ae-Q)*x._pixelsPerMercatorPixel+Q,le=(le-W)*x._pixelsPerMercatorPixel+W;const ce=[ae*x.worldSize,le*x.worldSize,0];o.a6.vec3.transformMat4(ce,ce,S),O=o.b7(O,ce,k)}return o.a6.vec3.transformMat4(O,O,w)}_makeGlobeTileDebugBorderBuffer(a,u,g,x,w,S){const k=new o.a_,O=new o.a$,N=new o.b8,Q=(X,Y,ae,le,ce)=>{const Ae=(ae-X)/(ce-1),Be=(le-Y)/(ce-1),Te=k.length;for(let be=0;be<ce;be++){const Me=X+be*Ae,Fe=Y+be*Be;k.emplaceBack(Me,Fe);const ze=this._globePoint(Me,Fe,u,g,x,w,S);N.emplaceBack(ze[0],ze[1],ze[2]),O.emplaceBack(Te+be)}},W=o.ab;Q(0,0,W,0,16),Q(W,0,W,W,16),Q(W,W,0,W,16),Q(0,W,0,0,16),this._tileDebugIndexBuffer=a.createIndexBuffer(O),this._tileDebugBuffer=a.createVertexBuffer(k,o.b0.members),this._globeTileDebugBorderBuffer=a.createVertexBuffer(N,o.b9.members),this._tileDebugSegments=o.b1.simpleSegment(0,0,k.length,O.length)}_makeGlobeTileDebugTextBuffer(a,u,g,x,w,S){const k=o.ab/4,O=new o.a_,N=new o.aO,Q=new o.b8,W=25;N.reserve(32),O.reserve(W),Q.reserve(W);const X=(Y,ae)=>W*Y+ae;for(let Y=0;Y<W;Y++){const ae=Y*k;for(let le=0;le<W;le++){const ce=le*k;O.emplaceBack(ce,ae);const Ae=this._globePoint(ce,ae,u,g,x,w,S);Q.emplaceBack(Ae[0],Ae[1],Ae[2])}}for(let Y=0;Y<4;Y++)for(let ae=0;ae<4;ae++){const le=X(Y,ae),ce=X(Y,ae+1),Ae=X(Y+1,ae),Be=X(Y+1,ae+1);N.emplaceBack(le,ce,Ae),N.emplaceBack(Ae,ce,Be)}this._tileDebugTextIndexBuffer=a.createIndexBuffer(N),this._tileDebugTextBuffer=a.createVertexBuffer(O,o.b0.members),this._globeTileDebugTextBuffer=a.createVertexBuffer(Q,o.b9.members),this._tileDebugTextSegments=o.b1.simpleSegment(0,0,W,32)}destroy(a=!1){for(const u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!a&&this.texture&&this.texture instanceof o.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}o.ba.setPbf(o.bb);class ci extends la{constructor(a,u,g,x,w){super(a,u,g,x,w),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}setTexture(a,u){const g=u.context,x=g.gl;this.texture=this.texture||u.getTileTexture(a.width),this.texture&&this.texture instanceof o.T?this.texture.update(a,{premultiply:!1}):this.texture=new o.T(g,a,x.RGBA8,{premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(a=16384,u){const g=this._mrt=new o.ba(30),x=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(a-1)}});return this.entireBuffer=null,this.request=o.bc(x,(w,S,k,O)=>{if(w)u(w);else try{const N=g.getHeaderLength(S);if(N>a)return void(this.request=this.fetchHeader(N,u));g.parseHeader(S),this._isHeaderLoaded=!0;let Q=0;for(const W of Object.values(g.layers))Q=Math.max(Q,W.dataIndex[W.dataIndex.length-1].last_byte);S.byteLength>=Q&&(this.entireBuffer=S),u(null,this.entireBuffer||S,k,O)}catch(N){u(N)}}),this.request}fetchBand(a,u,g){const x=this._mrt;if(!this._isHeaderLoaded||!x)return void g(new Error("Tile header is not ready"));const w=this.actor;if(!w)return void g(new Error("Can't fetch tile band without an actor"));let S;const k=(W,X)=>{S.complete(W,X),W?g(W):(this.updateTextureDescriptor(a,u),g(null,this.textureDescriptor&&this.textureDescriptor.img))},O=(W,X)=>{if(W)return g(W);const Y=w.send("decodeRasterArray",{buffer:X,task:S},k,void 0,!0);this._workQueue.push(()=>{Y&&Y.cancel(),S.cancel()})},N=x.getLayer(a);if(!N)return void g(new Error(`Unknown sourceLayer "${a}"`));if(N.hasDataForBand(u))return this.updateTextureDescriptor(a,u),void g(null,this.textureDescriptor?this.textureDescriptor.img:null);const Q=N.getDataRange([u]);if(S=x.createDecodingTask(Q),!S||S.tasks.length)if(this.flushQueues(),this.entireBuffer)O(null,this.entireBuffer.slice(Q.firstByte,Q.lastByte+1));else{const W=Object.assign({},this.requestParams,{headers:{Range:`bytes=${Q.firstByte}-${Q.lastByte}`}}),X=o.bc(W,O);this._fetchQueue.push(()=>{X.cancel(),S.cancel()})}else g(null)}updateNeeded(a,u){return(!this.textureDescriptor||this.textureDescriptor.band!==u||this.textureDescriptor.layer!==a)&&this.state!=="errored"}updateTextureDescriptor(a,u){if(!this._mrt)return;const g=this._mrt.getLayer(a);if(!g||!g.hasBand(u)||!g.hasDataForBand(u))return;const{bytes:x,tileSize:w,buffer:S,offset:k,scale:O}=g.getBandView(u),N=w+2*S,Q={data:x,width:N,height:N},W=this.texture;W&&W instanceof o.T&&W.update(Q,{premultiply:!1}),this.textureDescriptor={layer:a,band:u,img:Q,buffer:S,offset:k,tileSize:w,format:g.pixelFormat,mix:[O,256*O,65536*O,16777216*O]}}}class Cu{constructor(a,u){this.max=a,this.onRemove=u,this.reset()}reset(){for(const a in this.data)for(const u of this.data[a])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(a,u,g){const x=a.wrapped().key;this.data[x]===void 0&&(this.data[x]=[]);const w={value:u,timeout:void 0};if(g!==void 0&&(w.timeout=setTimeout(()=>{this.remove(a,w)},g)),this.data[x].push(w),this.order.push(x),this.order.length>this.max){const S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const u=this.data[a].shift();return u.timeout&&clearTimeout(u.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),u.value}getByKey(a){const u=this.data[a];return u?u[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,u){if(!this.has(a))return this;const g=a.wrapped().key,x=u===void 0?0:this.data[g].indexOf(u),w=this.data[g][x];return this.data[g].splice(x,1),w.timeout&&clearTimeout(w.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(w.value),this.order.splice(this.order.indexOf(g),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(a){const u=[];for(const g in this.data)for(const x of this.data[g])a(x.value)||u.push(x);for(const g of u)this.remove(g.value.tileID,g)}}class Ec{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,u,g){const x=String(u);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][x]=this.stateChanges[a][x]||{},o.l(this.stateChanges[a][x],g),this.deletedStates[a]===null){this.deletedStates[a]={};for(const w in this.state[a])w!==x&&(this.deletedStates[a][w]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][x]===null){this.deletedStates[a][x]={};for(const w in this.state[a][x])g[w]||(this.deletedStates[a][x][w]=null)}else for(const w in g)this.deletedStates[a]&&this.deletedStates[a][x]&&this.deletedStates[a][x][w]===null&&delete this.deletedStates[a][x][w]}removeFeatureState(a,u,g){if(this.deletedStates[a]===null)return;const x=String(u);if(this.deletedStates[a]=this.deletedStates[a]||{},g&&u!==void 0)this.deletedStates[a][x]!==null&&(this.deletedStates[a][x]=this.deletedStates[a][x]||{},this.deletedStates[a][x][g]=null);else if(u!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][x])for(g in this.deletedStates[a][x]={},this.stateChanges[a][x])this.deletedStates[a][x][g]=null;else this.deletedStates[a][x]=null;else this.deletedStates[a]=null}getState(a,u){const g=this.state[a]||{},x=this.stateChanges[a]||{},w=this.deletedStates[a];if(w===null)return{};if(u!==void 0){const k=String(u),O=o.l({},g[k],x[k]);if(w){const N=w[u];if(N===null)return{};for(const Q in N)delete O[Q]}return O}const S=o.l({},g,x);if(w)for(const k in w)delete S[k];return S}initializeTileState(a,u){a.setFeatureState(this.state,u)}coalesceChanges(a,u){const g={};for(const x in this.stateChanges){this.state[x]=this.state[x]||{};const w={};for(const S in this.stateChanges[x])this.state[x][S]||(this.state[x][S]={}),o.l(this.state[x][S],this.stateChanges[x][S]),w[S]=this.state[x][S];g[x]=w}for(const x in this.deletedStates){this.state[x]=this.state[x]||{};const w={};if(this.deletedStates[x]===null)for(const S in this.state[x])w[S]={},this.state[x][S]={};else for(const S in this.deletedStates[x]){if(this.deletedStates[x][S]===null)this.state[x][S]={};else if(this.state[x][S])for(const k of Object.keys(this.deletedStates[x][S]))delete this.state[x][S][k];w[S]=this.state[x][S]}g[x]=g[x]||{},o.l(g[x],w)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(const x in a)a[x].setFeatureState(g,u)}}class wo extends o.E{constructor(a,u,g){super(),this.id=a,this._onlySymbols=g,u.on("data",x=>{x.dataType==="source"&&x.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&x.dataType==="source"&&x.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),u.on("error",()=>{this._sourceErrored=!0}),this._source=u,this._tiles={},this._cache=new Cu(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=u.minTileCacheSize,this._maxTileCacheSize=u.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new Ec,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(a){this.map=a,this._minTileCacheSize=this._minTileCacheSize===void 0&&a?a._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&a?a._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const a in this._tiles){const u=this._tiles[a];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(a,u){return a.isSymbolTile=this._onlySymbols,a.isExtraShadowCaster=this._shadowCasterTiles[a.tileID.key],this._source.loadTile(a,u)}_unloadTile(a){if(this._source.unloadTile)return this._source.unloadTile(a)}_abortTile(a){if(this._source.abortTile)return this._source.abortTile(a)}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const g=this._tiles[u];g.upload(a),g.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return o.bd(this._tiles).map(a=>a.tileID).sort(Bl).map(a=>a.key)}getRenderableIds(a,u){const g=[];for(const x in this._tiles)this._isIdRenderable(+x,a,u)&&g.push(this._tiles[x]);return a?g.sort((x,w)=>{const S=x.tileID,k=w.tileID,O=new o.P(S.canonical.x,S.canonical.y)._rotate(this.transform.angle),N=new o.P(k.canonical.x,k.canonical.y)._rotate(this.transform.angle);return S.overscaledZ-k.overscaledZ||N.y-O.y||N.x-O.x}).map(x=>x.tileID.key):g.map(x=>x.tileID).sort(Bl).map(x=>x.key)}hasRenderableParent(a){const u=this.findLoadedParent(a,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(a,u,g){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(u||!this._tiles[a].holdingForFade())&&(g||!this._shadowCasterTiles[a])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(+a,"reloading")}}_reloadTile(a,u){const g=this._tiles[a];g&&(g.state!=="loading"&&(g.state=u),this._loadTile(g,this._tileLoaded.bind(this,g,a,u)))}_tileLoaded(a,u,g,x){if(x)if(a.state="errored",x.status!==404)this._source.fire(new o.t(x,{tile:a}));else{if(this._source.fire(new o.x("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:a})),!(a.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const w=this.map.painter.terrain;this.update(this.transform,w.getScaledDemTileSize(),!0),w.resetTileLookupCache(this.id)}else this.update(this.transform)}else a.timeAdded=o.q.now(),g==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(u,a),this._source.type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),this._source.fire(new o.x("data",{dataType:"source",tile:a,coord:a.tileID,sourceCacheId:this.id}))}_backfillDEM(a){const u=this.getRenderableIds();for(let x=0;x<u.length;x++){const w=u[x];if(a.neighboringTiles&&a.neighboringTiles[w]){const S=this.getTileByID(w);g(a,S),g(S,a)}}function g(x,w){if(!x.dem||x.dem.borderReady)return;x.needsHillshadePrepare=!0,x.needsDEMTextureUpload=!0;let S=w.tileID.canonical.x-x.tileID.canonical.x;const k=w.tileID.canonical.y-x.tileID.canonical.y,O=Math.pow(2,x.tileID.canonical.z),N=w.tileID.key;S===0&&k===0||Math.abs(k)>1||(Math.abs(S)>1&&(Math.abs(S+O)===1?S+=O:Math.abs(S-O)===1&&(S-=O)),w.dem&&x.dem&&(x.dem.backfillBorder(w.dem,S,k),x.neighboringTiles&&x.neighboringTiles[N]&&(x.neighboringTiles[N].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,u,g,x){for(const w in this._tiles){let S=this._tiles[w];if(x[w]||!S.hasData()||S.tileID.overscaledZ<=u||S.tileID.overscaledZ>g)continue;let k=S.tileID;for(;S&&S.tileID.overscaledZ>u+1;){const N=S.tileID.scaledTo(S.tileID.overscaledZ-1);S=this._tiles[N.key],S&&S.hasData()&&(k=N)}let O=k;for(;O.overscaledZ>u;)if(O=O.scaledTo(O.overscaledZ-1),a[O.key]){x[k.key]=k;break}}}findLoadedParent(a,u){if(a.key in this._loadedParentTiles){const g=this._loadedParentTiles[a.key];return g&&g.tileID.overscaledZ>=u?g:null}for(let g=a.overscaledZ-1;g>=u;g--){const x=a.scaledTo(g),w=this._getLoadedTile(x);if(w)return w}}_getLoadedTile(a){const u=this._tiles[a.key];return u&&u.hasData()?u:this._cache.getByKey(this._source.reparseOverscaled?a.wrapped().key:a.canonical.key)}updateCacheSize(a,u){u=u||this._source.tileSize;const g=Math.ceil(a.width/u)+1,x=Math.ceil(a.height/u)+1,w=Math.floor(g*x*5),S=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,w):w,k=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,S):S;this._cache.setMaxSize(k)}handleWrapJump(a){const u=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,u){const g={};for(const x in this._tiles){const w=this._tiles[x];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+u),g[w.tileID.key]=w}this._tiles=g;for(const x in this._timers)clearTimeout(this._timers[x]),delete this._timers[x];for(const x in this._tiles)this._setTileReloadTimer(+x,this._tiles[x])}}update(a,u,g,x){if(this.transform=a,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!g)return;this.updateCacheSize(a,u),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const w=this._source.type==="batched-model";let S;if(this.used||this.usedForTerrain){if(this._source.tileID)S=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(N=>new o.aA(N.canonical.z,N.wrap,N.canonical.z,N.canonical.x,N.canonical.y));else if(this.tileCoverLift!==0){const N=a.clone();N.tileCoverLift=this.tileCoverLift,S=N.coveringTiles({tileSize:u||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!g,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:w}),this._source.minzoom<=1&&a.projection.name==="globe"&&(S.push(new o.aA(1,0,1,0,0)),S.push(new o.aA(1,0,1,1,0)),S.push(new o.aA(1,0,1,0,1)),S.push(new o.aA(1,0,1,1,1)))}else if(S=a.coveringTiles({tileSize:u||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!g,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:w}),this._source.hasTile){const N=this._source.hasTile.bind(this._source);S=S.filter(Q=>N(Q))}}else S=[];if(S.length>0&&this.castsShadows&&x&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!Tc(this._source.type)){const N=a.coveringZoomLevel({tileSize:u||this._source.tileSize,roundZoom:this._source.roundZoom&&!g}),Q=Math.min(N,this._source.maxzoom);if(w){const W=a.extendTileCover(S,Q);for(const X of W)S.push(X)}else{const W=a.extendTileCover(S,Q,x);for(const X of W)this._shadowCasterTiles[X.key]=!0,S.push(X)}}const k=this._updateRetainedTiles(S);if(Tc(this._source.type)&&S.length!==0){const N={},Q={},W=Object.keys(k);for(const Y of W){const ae=k[Y],le=this._tiles[Y];if(!le||le.fadeEndTime&&le.fadeEndTime<=o.q.now())continue;const ce=this.findLoadedParent(ae,Math.max(ae.overscaledZ-wo.maxOverzooming,this._source.minzoom));ce&&(this._addTile(ce.tileID),N[ce.tileID.key]=ce.tileID),Q[Y]=ae}const X=S[S.length-1].overscaledZ;for(const Y in this._tiles){const ae=this._tiles[Y];if(k[Y]||!ae.hasData())continue;let le=ae.tileID;for(;le.overscaledZ>X;){le=le.scaledTo(le.overscaledZ-1);const ce=this._tiles[le.key];if(ce&&ce.hasData()&&Q[le.key]){k[Y]=ae.tileID;break}}}for(const Y in N)k[Y]||(this._coveredTiles[Y]=!0,k[Y]=N[Y])}for(const N in k)this._tiles[N].clearFadeHold();const O=o.be(this._tiles,k);for(const N of O){const Q=this._tiles[N];Q.hasSymbolBuckets&&!Q.holdingForFade()?Q.setHoldDuration(this.map._fadeDuration):Q.hasSymbolBuckets&&!Q.symbolFadeFinished()||this._removeTile(+N)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(+a)}_updateRetainedTiles(a){const u={};if(a.length===0)return u;const g={},x=a.reduce((N,Q)=>Math.min(N,Q.overscaledZ),1/0),w=a[0].overscaledZ,S=Math.max(w-wo.maxOverzooming,this._source.minzoom),k=Math.max(w+wo.maxUnderzooming,this._source.minzoom),O={};for(const N of a){const Q=this._addTile(N);u[N.key]=N,Q.hasData()||x<this._source.maxzoom&&(O[N.key]=N)}this._retainLoadedChildren(O,x,k,u);for(const N of a){let Q=this._tiles[N.key];if(Q.hasData())continue;if(N.canonical.z>=this._source.maxzoom){const X=N.children(this._source.maxzoom)[0],Y=this.getTile(X);if(Y&&Y.hasData()){u[X.key]=X;continue}}else{const X=N.children(this._source.maxzoom);if(u[X[0].key]&&u[X[1].key]&&u[X[2].key]&&u[X[3].key])continue}let W=Q.wasRequested();for(let X=N.overscaledZ-1;X>=S;--X){const Y=N.scaledTo(X);if(g[Y.key]||(g[Y.key]=!0,Q=this.getTile(Y),!Q&&W&&(Q=this._addTile(Y)),Q&&(u[Y.key]=Y,W=Q.wasRequested(),Q.hasData())))break}}return u}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const u=[];let g,x=this._tiles[a].tileID;for(;x.overscaledZ>0;){if(x.key in this._loadedParentTiles){g=this._loadedParentTiles[x.key];break}u.push(x.key);const w=x.scaledTo(x.overscaledZ-1);if(g=this._getLoadedTile(w),g)break;x=w}for(const w of u)this._loadedParentTiles[w]=g}}_addTile(a){let u=this._tiles[a.key];if(u)return u.isExtraShadowCaster!==!0||this._shadowCasterTiles[a.key]||this._reloadTile(a.key,"reloading"),u;u=this._cache.getAndRemove(a),u&&(this._setTileReloadTimer(a.key,u),u.tileID=a,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,u)));const g=!!u;if(!g){const x=this.map?this.map.painter:null,w=this._source.tileSize*a.overscaleFactor();u=this._source.type==="raster-array"?new ci(a,w,this.transform.tileZoom,x,this._isRaster):new la(a,w,this.transform.tileZoom,x,this._isRaster),this._loadTile(u,this._tileLoaded.bind(this,u,a.key,u.state))}return u?(u.uses++,this._tiles[a.key]=u,g||this._source.fire(new o.x("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u):null}_setTileReloadTimer(a,u){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const g=u.getExpiryTimeout();g&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},g))}_removeTile(a){const u=this._tiles[a];u&&(u.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),u.uses>0||(u.hasData()&&u.state!=="reloading"||u.state==="empty"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(+a);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(a,u,g){const x=[],w=this.transform;if(!w)return x;const S=w.projection.name==="globe",k=o.am(w.center.lng);for(const O in this._tiles){const N=this._tiles[O];if(g&&N.clearQueryDebugViz(),N.holdingForFade())continue;let Q;if(S){const W=N.tileID.canonical;if(W.z===0){const X=[Math.abs(o.ap(k,...Cl(W,-1))-k),Math.abs(o.ap(k,...Cl(W,1))-k)];Q=[0,2*X.indexOf(Math.min(...X))-1]}else{const X=[Math.abs(o.ap(k,...Cl(W,-1))-k),Math.abs(o.ap(k,...Cl(W,0))-k),Math.abs(o.ap(k,...Cl(W,1))-k)];Q=[X.indexOf(Math.min(...X))-1]}}else Q=[0];for(const W of Q){const X=a.containsTile(N,w,u,W);X&&x.push(X)}}return x}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(a){return this._getRenderableCoordinates(a)}_getRenderableCoordinates(a,u){const g=this.getRenderableIds(a,u).map(w=>this._tiles[w].tileID),x=this.transform.projection.name==="globe";for(const w of g)w.projMatrix=this.transform.calculateProjMatrix(w.toUnwrapped()),w.expandedProjMatrix=x?this.transform.calculateProjMatrix(w.toUnwrapped(),!1,!0):w.projMatrix;return g}sortCoordinatesByDistance(a){const u=a.slice(),g=this.transform._camera.position,x=this.transform._camera.forward(),w={};for(const S of u){const k=1/(1<<S.canonical.z);w[S.key]=((S.canonical.x+.5)*k+S.wrap-g[0])*x[0]+((S.canonical.y+.5)*k-g[1])*x[1]-g[2]*x[2]}return u.sort((S,k)=>w[S.key]-w[k.key]),u}hasTransition(){if(this._source.hasTransition())return!0;if(Tc(this._source.type))for(const a in this._tiles){const u=this._tiles[a];if(u.fadeEndTime!==void 0&&u.fadeEndTime>=o.q.now())return!0}return!1}setFeatureState(a,u,g){this._state.updateState(a=a||"_geojsonTileLayer",u,g)}removeFeatureState(a,u,g){this._state.removeFeatureState(a=a||"_geojsonTileLayer",u,g)}getFeatureState(a,u){return this._state.getState(a=a||"_geojsonTileLayer",u)}setDependencies(a,u,g){const x=this._tiles[a];x&&x.setDependencies(u,g)}reloadTilesForDependencies(a,u){for(const g in this._tiles)this._tiles[g].hasDependency(a,u)&&this._reloadTile(+g,"reloading");this._cache.filter(g=>!g.hasDependency(a,u))}_preloadTiles(a,u){if(!this._sourceLoaded){const O=()=>{this._sourceLoaded&&(this._source.off("data",O),this._preloadTiles(a,u))};return void this._source.on("data",O)}const g=new Map,x=Array.isArray(a)?a:[a],w=this.map.painter.terrain,S=this.usedForTerrain&&w?w.getScaledDemTileSize():this._source.tileSize;for(const O of x){const N=O.coveringTiles({tileSize:S,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const Q of N)g.set(Q.key,Q);this.usedForTerrain&&O.updateElevation(!1)}const k=Array.from(g.values());o.bf(k,(O,N)=>{const Q=new la(O,this._source.tileSize*O.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(Q,W=>{this._source.type==="raster-dem"&&Q.dem&&this._backfillDEM(Q),N(W,Q)})},u)}}function Bl(m,a){const u=Math.abs(2*m.wrap)-+(m.wrap<0),g=Math.abs(2*a.wrap)-+(a.wrap<0);return m.overscaledZ-a.overscaledZ||g-u||a.canonical.y-m.canonical.y||a.canonical.x-m.canonical.x}function Tc(m){return m==="raster"||m==="image"||m==="video"||m==="custom"}function Cl(m,a){const u=1<<m.z;return[m.x/u+a,(m.x+1)/u+a]}wo.maxOverzooming=10,wo.maxUnderzooming=3;class fA{constructor(a){this.style=a,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const a=!1,u=!1;for(const g in this.style._mergedLayers){const x=this.style._mergedLayers[g];if(x.type==="fill-extrusion")this.layers.push({layer:x,visible:a,visibilityChanged:u});else if(x.type==="model"){const w=this.style.getLayerSource(x);w&&w.type==="batched-model"&&this.layers.push({layer:x,visible:a,visibilityChanged:u})}}}onNewFrame(a){this.layersGotHidden=!1;for(const u of this.layers){const g=u.layer;let x=!1;g.type==="fill-extrusion"?x=!g.isHidden(a)&&g.paint.get("fill-extrusion-opacity")>0:g.type==="model"&&(x=!g.isHidden(a)&&g.paint.get("model-opacity")>0),this.layersGotHidden=this.layersGotHidden||!x&&u.visible,u.visible=x}}updateZOffset(a,u){this.currentBuildingBuckets=[];for(const x of this.layers){const w=x.layer,S=this.style.getLayerSourceCache(w);let k=1;w.type==="fill-extrusion"&&(k=x.visible?w.paint.get("fill-extrusion-vertical-scale"):0);let O=S?S.getTile(u):null;if(!O&&S&&u.canonical.z>S.getSource().minzoom){let N=u.scaledTo(Math.min(S.getSource().maxzoom,u.overscaledZ-1));for(;N.overscaledZ>=S.getSource().minzoom&&(O=S.getTile(N),!O&&N.overscaledZ!==0);)N=N.scaledTo(N.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:O?O.getBucket(w):null,tileID:O?O.tileID:u,verticalScale:k})}a.hasAnyZOffset=!1;let g=!1;for(let x=0;x<a.symbolInstances.length;x++){const w=a.symbolInstances.get(x),S=w.zOffset,k=this._getHeightAtTileOffset(u,w.tileAnchorX,w.tileAnchorY);w.zOffset=k!==Number.NEGATIVE_INFINITY?k:S,g||S===w.zOffset||(g=!0),a.hasAnyZOffset||w.zOffset===0||(a.hasAnyZOffset=!0)}g&&(a.zOffsetBuffersNeedUpload=!0,a.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(a,u,g,x){let w=u,S=g;if(a.canonical.z!==x.canonical.z){const k=x.canonical,O=1/(1<<a.canonical.z-k.z);w=(u+a.canonical.x*o.ab)*O-k.x*o.ab|0,S=(g+a.canonical.y*o.ab)*O-k.y*o.ab|0}return{tileX:w,tileY:S}}_getHeightAtTileOffset(a,u,g){let x,w;for(let S=0;S<this.layers.length;++S){if(this.layers[S].layer.type!=="fill-extrusion")continue;const{bucket:k,tileID:O,verticalScale:N}=this.currentBuildingBuckets[S];if(!k)continue;const{tileX:Q,tileY:W}=this._mapCoordToOverlappingTile(a,u,g,O),X=k.getHeightAtTileCoord(Q,W);X&&X.height!==void 0&&(X.hidden?x=X.height:w=Math.max(X.height*N,w||0))}if(w!==void 0)return w;for(let S=0;S<this.layers.length;++S){const k=this.layers[S];if(k.layer.type!=="model"||!k.visible)continue;const{bucket:O,tileID:N}=this.currentBuildingBuckets[S];if(!O)continue;const{tileX:Q,tileY:W}=this._mapCoordToOverlappingTile(a,u,g,N),X=O.getHeightAtTileCoord(Q,W);if(X&&!X.hidden)return X.height===void 0&&x!==void 0?Math.min(X.maxHeight,x)*X.verticalScale:X.height?X.height*X.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function Ic(m,a){const u={};for(const g in m)g!=="ref"&&(u[g]=m[g]);return o.bg.forEach(g=>{g in a&&(u[g]=a[g])}),u}function pA(m){m=m.slice();const a=Object.create(null);for(let u=0;u<m.length;u++)a[m[u].id]=m[u];for(let u=0;u<m.length;u++)"ref"in m[u]&&(m[u]=Ic(m[u],a[m[u].ref]));return m}const Kr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function qs(m,a,u){u.push({command:Kr.addSource,args:[m,a[m]]})}function An(m,a,u){a.push({command:Kr.removeSource,args:[m]}),u[m]=!0}function ph(m,a,u,g){An(m,u,g),qs(m,a,u)}function _r(m,a,u){let g;for(g in m[u])if(m[u].hasOwnProperty(g)&&g!=="data"&&!o.bh(m[u][g],a[u][g]))return!1;for(g in a[u])if(a[u].hasOwnProperty(g)&&g!=="data"&&!o.bh(m[u][g],a[u][g]))return!1;return!0}function ca(m,a,u,g,x,w){let S;for(S in a=a||{},m=m||{})m.hasOwnProperty(S)&&(o.bh(m[S],a[S])||u.push({command:w,args:[g,S,a[S],x]}));for(S in a)a.hasOwnProperty(S)&&!m.hasOwnProperty(S)&&(o.bh(m[S],a[S])||u.push({command:w,args:[g,S,a[S],x]}))}function rl(m){return m.id}function Jl(m,a){return m[a.id]=a,m}class Ko{constructor(a,u){this.reset(a,u)}reset(a,u){this.points=a||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=o.ap(a,0,1);let u=1,g=this._distances[u];const x=a*this.paddedLength+this.padding;for(;g<x&&u<this._distances.length;)g=this._distances[++u];const w=u-1,S=this._distances[w],k=g-S,O=k>0?(x-S)/k:0;return this.points[w].mult(1-O).add(this.points[u].mult(O))}}class is{constructor(a,u,g){const x=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(a/g),this.yCellCount=Math.ceil(u/g);for(let S=0;S<this.xCellCount*this.yCellCount;S++)x.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=u,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,u,g,x,w){this._forEachCell(u,g,x,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(u),this.bboxes.push(g),this.bboxes.push(x),this.bboxes.push(w)}insertCircle(a,u,g,x){this._forEachCell(u-x,g-x,u+x,g+x,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(u),this.circles.push(g),this.circles.push(x)}_insertBoxCell(a,u,g,x,w,S){this.boxCells[w].push(S)}_insertCircleCell(a,u,g,x,w,S){this.circleCells[w].push(S)}_query(a,u,g,x,w,S){if(g<0||a>this.width||x<0||u>this.height)return!w&&[];const k=[];if(a<=0&&u<=0&&this.width<=g&&this.height<=x){if(w)return!0;for(let O=0;O<this.boxKeys.length;O++)k.push({key:this.boxKeys[O],x1:this.bboxes[4*O],y1:this.bboxes[4*O+1],x2:this.bboxes[4*O+2],y2:this.bboxes[4*O+3]});for(let O=0;O<this.circleKeys.length;O++){const N=this.circles[3*O],Q=this.circles[3*O+1],W=this.circles[3*O+2];k.push({key:this.circleKeys[O],x1:N-W,y1:Q-W,x2:N+W,y2:Q+W})}return S?k.filter(S):k}return this._forEachCell(a,u,g,x,this._queryCell,k,{hitTest:w,seenUids:{box:{},circle:{}}},S),w?k.length>0:k}_queryCircle(a,u,g,x,w){const S=a-g,k=a+g,O=u-g,N=u+g;if(k<0||S>this.width||N<0||O>this.height)return!x&&[];const Q=[];return this._forEachCell(S,O,k,N,this._queryCellCircle,Q,{hitTest:x,circle:{x:a,y:u,radius:g},seenUids:{box:{},circle:{}}},w),x?Q.length>0:Q}query(a,u,g,x,w){return this._query(a,u,g,x,!1,w)}hitTest(a,u,g,x,w){return this._query(a,u,g,x,!0,w)}hitTestCircle(a,u,g,x){return this._queryCircle(a,u,g,!0,x)}_queryCell(a,u,g,x,w,S,k,O){const N=k.seenUids,Q=this.boxCells[w];if(Q!==null){const X=this.bboxes;for(const Y of Q)if(!N.box[Y]){N.box[Y]=!0;const ae=4*Y;if(a<=X[ae+2]&&u<=X[ae+3]&&g>=X[ae+0]&&x>=X[ae+1]&&(!O||O(this.boxKeys[Y]))){if(k.hitTest)return S.push(!0),!0;S.push({key:this.boxKeys[Y],x1:X[ae],y1:X[ae+1],x2:X[ae+2],y2:X[ae+3]})}}}const W=this.circleCells[w];if(W!==null){const X=this.circles;for(const Y of W)if(!N.circle[Y]){N.circle[Y]=!0;const ae=3*Y;if(this._circleAndRectCollide(X[ae],X[ae+1],X[ae+2],a,u,g,x)&&(!O||O(this.circleKeys[Y]))){if(k.hitTest)return S.push(!0),!0;{const le=X[ae],ce=X[ae+1],Ae=X[ae+2];S.push({key:this.circleKeys[Y],x1:le-Ae,y1:ce-Ae,x2:le+Ae,y2:ce+Ae})}}}}}_queryCellCircle(a,u,g,x,w,S,k,O){const N=k.circle,Q=k.seenUids,W=this.boxCells[w];if(W!==null){const Y=this.bboxes;for(const ae of W)if(!Q.box[ae]){Q.box[ae]=!0;const le=4*ae;if(this._circleAndRectCollide(N.x,N.y,N.radius,Y[le+0],Y[le+1],Y[le+2],Y[le+3])&&(!O||O(this.boxKeys[ae])))return S.push(!0),!0}}const X=this.circleCells[w];if(X!==null){const Y=this.circles;for(const ae of X)if(!Q.circle[ae]){Q.circle[ae]=!0;const le=3*ae;if(this._circlesCollide(Y[le],Y[le+1],Y[le+2],N.x,N.y,N.radius)&&(!O||O(this.circleKeys[ae])))return S.push(!0),!0}}}_forEachCell(a,u,g,x,w,S,k,O){const N=this._convertToXCellCoord(a),Q=this._convertToYCellCoord(u),W=this._convertToXCellCoord(g),X=this._convertToYCellCoord(x);for(let Y=N;Y<=W;Y++)for(let ae=Q;ae<=X;ae++)if(w.call(this,a,u,g,x,this.xCellCount*ae+Y,S,k,O))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,u,g,x,w,S){const k=x-a,O=w-u,N=g+S;return N*N>k*k+O*O}_circleAndRectCollide(a,u,g,x,w,S,k){const O=(S-x)/2,N=Math.abs(a-(x+O));if(N>O+g)return!1;const Q=(k-w)/2,W=Math.abs(u-(w+Q));if(W>Q+g)return!1;if(N<=O||W<=Q)return!0;const X=N-O,Y=W-Q;return X*X+Y*Y<=g*g}}const ua={unknown:0,flipRequired:1,flipNotRequired:2},er=Math.tan(85*Math.PI/180);function Yr(m,a,u,g,x,w,S){const k=o.a6.mat4.create();if(u)if(w.name==="globe"){const O=o.bi(x,a);o.a6.mat4.multiply(k,k,O)}else{const O=o.a6.mat2.invert([],S);k[0]=O[0],k[1]=O[1],k[4]=O[2],k[5]=O[3],g||o.a6.mat4.rotateZ(k,k,x.angle)}else o.a6.mat4.multiply(k,x.labelPlaneMatrix,m);return k}function Wr(m,a,u,g,x,w,S){const k=Yr(m,a,u,g,x,w,S);return w.name==="globe"&&u||(k[2]=k[6]=k[10]=k[14]=0),k}function os(m,a,u,g,x,w,S){if(u){if(w.name==="globe"){const k=Yr(m,a,u,g,x,w,S);return o.a6.mat4.invert(k,k),o.a6.mat4.multiply(k,m,k),k}{const k=o.a6.mat4.clone(m),O=o.a6.mat4.identity([]);return O[0]=S[0],O[1]=S[1],O[4]=S[2],O[5]=S[3],o.a6.mat4.multiply(k,k,O),g||o.a6.mat4.rotateZ(k,k,-x.angle),k}}return x.glCoordMatrix}function oo(m,a,u,g){const x=[m,a,u,1];u?o.a6.vec4.transformMat4(x,x,g):ui(x,x,g);const w=x[3];return x[0]/=w,x[1]/=w,x[2]/=w,x}function qr(m,a){return Math.min(.5+m/a*.5,1.5)}function Su(m,a){const u=m[0]/m[3],g=m[1]/m[3];return u>=-a[0]&&u<=a[0]&&g>=-a[1]&&g<=a[1]}function qe(m,a,u,g,x,w,S,k,O,N){const Q=u.transform,W=g?m.textSizeData:m.iconSizeData,X=o.bj(W,u.transform.zoom),Y=Q.projection.name==="globe",ae=[256/u.width*2+1,256/u.height*2+1],le=g?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;le.clear();let ce=null;Y&&(ce=g?m.text.globeExtVertexArray:m.icon.globeExtVertexArray);const Ae=m.lineVertexArray,Be=g?m.text.placedSymbolArray:m.icon.placedSymbolArray,Te=u.transform.width/u.transform.height;let be,Me=!1;for(let Fe=0;Fe<Be.length;Fe++){const ze=Be.get(Fe),{numGlyphs:Le,writingMode:Ve}=ze;if(Ve!==o.bk.vertical||Me||be===o.bk.horizontal||(Me=!0),be=Ve,(ze.hidden||Ve===o.bk.vertical)&&!Me){un(Le,le);continue}Me=!1;const Xe=new o.P(ze.tileAnchorX,ze.tileAnchorY);let{x:je,y:He,z:nt}=Q.projection.projectTilePoint(Xe.x,Xe.y,N.canonical);if(O){const[St,Ft,gr]=O(Xe);je+=St,He+=Ft,nt+=gr}const mt=[je,He,nt,1];if(o.a6.vec4.transformMat4(mt,mt,a),!Su(mt,ae)){un(Le,le);continue}const Et=mt[3],pt=qr(u.transform.getCameraToCenterDistance(Q.projection),Et),kt=o.bl(W,X,ze),it=S?kt/pt:kt*pt,wt=oo(je,He,nt,x);if(wt[3]<=0){un(Le,le);continue}let bt={};const Dt=S?null:O,Ut=cr(ze,it,!1,k,a,x,w,m.glyphOffsetArray,Ae,le,ce,wt,Xe,bt,Te,Dt,Q.projection,N,S);Me=Ut.useVertical,Dt&&Ut.needsFlipping&&(bt={}),(Ut.notEnoughRoom||Me||Ut.needsFlipping&&cr(ze,it,!0,k,a,x,w,m.glyphOffsetArray,Ae,le,ce,wt,Xe,bt,Te,Dt,Q.projection,N,S).notEnoughRoom)&&un(Le,le)}g?(m.text.dynamicLayoutVertexBuffer.updateData(le),ce&&m.text.globeExtVertexBuffer&&m.text.globeExtVertexBuffer.updateData(ce)):(m.icon.dynamicLayoutVertexBuffer.updateData(le),ce&&m.icon.globeExtVertexBuffer&&m.icon.globeExtVertexBuffer.updateData(ce))}function st(m,a,u,g,x,w,S,k,O,N,Q,W,X,Y,ae,le){const{lineStartIndex:ce,glyphStartIndex:Ae,segment:Be}=k,Te=Ae+k.numGlyphs,be=ce+k.lineLength,Me=a.getoffsetX(Ae),Fe=a.getoffsetX(Te-1),ze=Wn(m*Me,u,g,x,w,S,Be,ce,be,O,N,Q,W,X,!0,Y,ae,le);if(!ze)return null;const Le=Wn(m*Fe,u,g,x,w,S,Be,ce,be,O,N,Q,W,X,!0,Y,ae,le);return Le?{first:ze,last:Le}:null}function It(m,a,u,g){return m===o.bk.horizontal&&Math.abs(g)>Math.abs(u)?{useVertical:!0}:m===o.bk.vertical?g>0?{needsFlipping:!0}:null:a!==ua.unknown&&function(x,w){return x===0||Math.abs(w/x)>er}(u,g)?a===ua.flipRequired?{needsFlipping:!0}:null:u<0?{needsFlipping:!0}:null}function cr(m,a,u,g,x,w,S,k,O,N,Q,W,X,Y,ae,le,ce,Ae,Be){const Te=a/24,be=m.lineOffsetX*Te,Me=m.lineOffsetY*Te,{lineStartIndex:Fe,glyphStartIndex:ze,numGlyphs:Le,segment:Ve,writingMode:Xe,flipState:je}=m,He=Fe+m.lineLength,nt=mt=>{if(Q){const[it,wt,bt]=mt.up,Dt=N.length;o.bm(Q,Dt+0,it,wt,bt),o.bm(Q,Dt+1,it,wt,bt),o.bm(Q,Dt+2,it,wt,bt),o.bm(Q,Dt+3,it,wt,bt)}const[Et,pt,kt]=mt.point;o.bn(N,Et,pt,kt,mt.angle)};if(Le>1){const mt=st(Te,k,be,Me,u,W,X,m,O,w,Y,le,!1,ce,Ae,Be);if(!mt)return{notEnoughRoom:!0};if(g&&!u){let[Et,pt,kt]=mt.first.point,[it,wt,bt]=mt.last.point;[Et,pt]=oo(Et,pt,kt,S),[it,wt]=oo(it,wt,bt,S);const Dt=It(Xe,je,(it-Et)*ae,wt-pt);if(m.flipState=Dt&&Dt.needsFlipping?ua.flipRequired:ua.flipNotRequired,Dt)return Dt}nt(mt.first);for(let Et=ze+1;Et<ze+Le-1;Et++){const pt=Wn(Te*k.getoffsetX(Et),be,Me,u,W,X,Ve,Fe,He,O,w,Y,le,!1,!1,ce,Ae,Be);if(!pt)return N.length-=4*(Et-ze),{notEnoughRoom:!0};nt(pt)}nt(mt.last)}else{if(g&&!u){const Et=oo(X.x,X.y,0,x),pt=Fe+Ve+1,kt=new o.P(O.getx(pt),O.gety(pt)),it=oo(kt.x,kt.y,0,x),wt=it[3]>0?it:Un(X,kt,Et,1,x,void 0,ce,Ae.canonical),bt=It(Xe,je,(wt[0]-Et[0])*ae,wt[1]-Et[1]);if(m.flipState=bt&&bt.needsFlipping?ua.flipRequired:ua.flipNotRequired,bt)return bt}const mt=Wn(Te*k.getoffsetX(ze),be,Me,u,W,X,Ve,Fe,He,O,w,Y,le,!1,!1,ce,Ae,Be);if(!mt)return{notEnoughRoom:!0};nt(mt)}return{}}function Pn(m,a,u,g,x){const{x:w,y:S,z:k}=g.projectTilePoint(m.x,m.y,a);if(!x)return oo(w,S,k,u);const[O,N,Q]=x(m);return oo(w+O,S+N,k+Q,u)}function Un(m,a,u,g,x,w,S,k){const O=Pn(m.sub(a)._unit()._add(m),k,x,S,w);return o.a6.vec3.sub(O,u,O),o.a6.vec3.normalize(O,O),o.a6.vec3.scaleAndAdd(O,u,O,g)}function Wn(m,a,u,g,x,w,S,k,O,N,Q,W,X,Y,ae,le,ce,Ae){const Be=g?m-a:m+a;let Te=Be>0?1:-1,be=0;g&&(Te*=-1,be=Math.PI),Te<0&&(be+=Math.PI);let Me=k+S+(Te>0?0:1)|0,Fe=x,ze=x,Le=0,Ve=0;const Xe=Math.abs(Be),je=[],He=[];let nt=w,mt=nt;const Et=()=>Un(mt,nt,ze,Xe-Le+1,Q,X,le,ce.canonical);for(;Le+Ve<=Xe;){if(Me+=Te,Me<k||Me>=O)return null;if(ze=Fe,mt=nt,je.push(ze),Y&&He.push(mt),nt=new o.P(N.getx(Me),N.gety(Me)),Fe=W[Me],!Fe){const Ft=Pn(nt,ce.canonical,Q,le,X);Fe=Ft[3]>0?W[Me]=Ft:Et()}Le+=Ve,Ve=o.a6.vec3.distance(ze,Fe)}ae&&X&&(W[Me]&&(Fe=Et(),Ve=o.a6.vec3.distance(ze,Fe)),W[Me]=Fe);const pt=(Xe-Le)/Ve,kt=nt.sub(mt)._mult(pt)._add(mt),it=o.a6.vec3.sub([],Fe,ze),wt=o.a6.vec3.scaleAndAdd([],ze,it,pt);let bt=[0,0,1],Dt=it[0],Ut=it[1];if(Ae&&(bt=le.upVector(ce.canonical,kt.x,kt.y),bt[0]!==0||bt[1]!==0||bt[2]!==1)){const Ft=[bt[2],0,-bt[0]],gr=o.a6.vec3.cross([],bt,Ft);o.a6.vec3.normalize(Ft,Ft),o.a6.vec3.normalize(gr,gr),Dt=o.a6.vec3.dot(it,Ft),Ut=o.a6.vec3.dot(it,gr)}if(u){const Ft=o.a6.vec3.cross([],bt,it);o.a6.vec3.normalize(Ft,Ft),o.a6.vec3.scaleAndAdd(wt,wt,Ft,u*Te)}const St=be+Math.atan2(Ut,Dt);return je.push(wt),Y&&He.push(kt),{point:wt,angle:St,path:je,tilePath:He,up:bt}}function un(m,a){const u=a.length,g=u+4*m;a.resize(g),a.float32.fill(-1/0,4*u,4*g)}function ui(m,a,u){const g=a[0],x=a[1];return m[0]=u[0]*g+u[4]*x+u[12],m[1]=u[1]*g+u[5]*x+u[13],m[3]=u[3]*g+u[7]*x+u[15],m}const Qn=100;class Jn{constructor(a,u,g=new is(a.width+200,a.height+200,25),x=new is(a.width+200,a.height+200,25)){this.transform=a,this.grid=g,this.ignoredGrid=x,this.pitchfactor=Math.cos(a._pitch)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+Qn,this.screenBottomBoundary=a.height+Qn,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.fogState=u}placeCollisionBox(a,u,g,x,w,S,k,O){let N=g.projectedAnchorX,Q=g.projectedAnchorY,W=g.projectedAnchorZ;const X=g.elevation,Y=g.tileID,ae=a.getProjection();if(X&&Y){const[Fe,ze,Le]=ae.upVector(Y.canonical,g.tileAnchorX,g.tileAnchorY),Ve=ae.upVectorScale(Y.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;N+=Fe*X*Ve,Q+=ze*X*Ve,W+=Le*X*Ve}const le=this.projectAndGetPerspectiveRatio(k,N,Q,W,g.tileID,ae.name==="globe"||!!X||this.transform.pitch>0,ae),ce=S*le.perspectiveRatio,Ae=(g.x1*u+x.x-g.padding)*ce+le.point.x,Be=(g.y1*u+x.y-g.padding)*ce+le.point.y,Te=(g.x2*u+x.x+g.padding)*ce+le.point.x,be=(g.y2*u+x.y+g.padding)*ce+le.point.y,Me=le.perspectiveRatio<=.55||le.occluded;return!this.isInsideGrid(Ae,Be,Te,be)||!w&&this.grid.hitTest(Ae,Be,Te,be,O)||Me?{box:[],offscreen:!1,occluded:le.occluded}:{box:[Ae,Be,Te,be],offscreen:this.isOffscreen(Ae,Be,Te,be),occluded:!1}}placeCollisionCircles(a,u,g,x,w,S,k,O,N,Q,W,X,Y,ae,le){const ce=[],Ae=this.transform.elevation,Be=a.getProjection(),Te=Ae?Ae.getAtTileOffsetFunc(le,this.transform.center.lat,this.transform.worldSize,Be):null,be=new o.P(g.tileAnchorX,g.tileAnchorY);let{x:Me,y:Fe,z:ze}=Be.projectTilePoint(be.x,be.y,le.canonical);if(Te){const[kt,it,wt]=Te(be);Me+=kt,Fe+=it,ze+=wt}const Le=Be.name==="globe",Ve=this.projectAndGetPerspectiveRatio(k,Me,Fe,ze,le,Le||!!Ae||this.transform.pitch>0,Be),{perspectiveRatio:Xe}=Ve,je=(W?S/Xe:S*Xe)/o.bq,He=oo(Me,Fe,ze,O),nt=Ve.signedDistanceFromCamera>0?st(je,w,g.lineOffsetX*je,g.lineOffsetY*je,!1,He,be,g,x,O,{},Ae&&!W?Te:null,W&&!!Ae,Be,le,W):null;let mt=!1,Et=!1,pt=!0;if(nt&&!Ve.occluded){const kt=.5*Y*Xe+ae,it=new o.P(-100,-100),wt=new o.P(this.screenRightBoundary,this.screenBottomBoundary),bt=new Ko,{first:Dt,last:Ut}=nt,St=Dt.path.length;let Ft=[];for(let Jt=St-1;Jt>=1;Jt--)Ft.push(Dt.path[Jt]);for(let Jt=1;Jt<Ut.path.length;Jt++)Ft.push(Ut.path[Jt]);const gr=2.5*kt;N&&(Ft=Ft.map(([Jt,Br,sr],xr)=>(Te&&!Le&&(sr=Te(xr<St-1?Dt.tilePath[St-1-xr]:Ut.tilePath[xr-St+2])[2]),oo(Jt,Br,sr,N))),Ft.some(Jt=>Jt[3]<=0)&&(Ft=[]));let Nt=[];if(Ft.length>0){let Jt=1/0,Br=-1/0,sr=1/0,xr=-1/0;for(const Qr of Ft)Jt=Math.min(Jt,Qr[0]),sr=Math.min(sr,Qr[1]),Br=Math.max(Br,Qr[0]),xr=Math.max(xr,Qr[1]);Br>=it.x&&Jt<=wt.x&&xr>=it.y&&sr<=wt.y&&(Nt=[Ft.map(Qr=>new o.P(Qr[0],Qr[1]))],(Jt<it.x||Br>wt.x||sr<it.y||xr>wt.y)&&(Nt=o.bo(Nt,it.x,it.y,wt.x,wt.y)))}for(const Jt of Nt){bt.reset(Jt,.25*kt);let Br=0;Br=bt.length<=.5*kt?1:Math.ceil(bt.paddedLength/gr)+1;for(let sr=0;sr<Br;sr++){const xr=sr/Math.max(Br-1,1),Qr=bt.lerp(xr),zr=Qr.x+Qn,Dn=Qr.y+Qn;ce.push(zr,Dn,kt,0);const jn=zr-kt,hi=Dn-kt,Il=zr+kt,so=Dn+kt;if(pt=pt&&this.isOffscreen(jn,hi,Il,so),Et=Et||this.isInsideGrid(jn,hi,Il,so),!u&&this.grid.hitTestCircle(zr,Dn,kt,X)&&(mt=!0,!Q))return{circles:[],offscreen:!1,collisionDetected:mt,occluded:!1}}}}return{circles:!Q&&mt||!Et?[]:ce,offscreen:pt,collisionDetected:mt,occluded:Ve.occluded}}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let g=1/0,x=1/0,w=-1/0,S=-1/0;for(const Q of a){const W=new o.P(Q.x+Qn,Q.y+Qn);g=Math.min(g,W.x),x=Math.min(x,W.y),w=Math.max(w,W.x),S=Math.max(S,W.y),u.push(W)}const k=this.grid.query(g,x,w,S).concat(this.ignoredGrid.query(g,x,w,S)),O={},N={};for(const Q of k){const W=Q.key;if(O[W.bucketInstanceId]===void 0&&(O[W.bucketInstanceId]={}),O[W.bucketInstanceId][W.featureIndex])continue;const X=[new o.P(Q.x1,Q.y1),new o.P(Q.x2,Q.y1),new o.P(Q.x2,Q.y2),new o.P(Q.x1,Q.y2)];o.bp(u,X)&&(O[W.bucketInstanceId][W.featureIndex]=!0,N[W.bucketInstanceId]===void 0&&(N[W.bucketInstanceId]=[]),N[W.bucketInstanceId].push(W.featureIndex))}return N}insertCollisionBox(a,u,g,x,w){(u?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:x,collisionGroupID:w},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,u,g,x,w){const S=u?this.ignoredGrid:this.grid,k={bucketInstanceId:g,featureIndex:x,collisionGroupID:w};for(let O=0;O<a.length;O+=4)S.insertCircle(k,a[O],a[O+1],a[O+2])}projectAndGetPerspectiveRatio(a,u,g,x,w,S,k){const O=[u,g,x,1];let N=!1;x||this.transform.pitch>0?(o.a6.vec4.transformMat4(O,O,a),this.fogState&&w&&k.name!=="globe"&&(N=function(X,Y,ae,le,ce,Ae){const Be=Ae.calculateFogTileMatrix(ce),Te=[Y,ae,le];return o.a6.vec3.transformMat4(Te,Te,Be),Wt(X,o.a6.vec3.length(Te),Ae.pitch,Ae._fov)}(this.fogState,u,g,x,w.toUnwrapped(),this.transform)>.9)):ui(O,O,a);const Q=O[3];return{point:new o.P((O[0]/Q+1)/2*this.transform.width+Qn,(-O[1]/Q+1)/2*this.transform.height+Qn),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(k)/Q*.5,1.5),signedDistanceFromCamera:Q,occluded:S&&O[2]>Q||N}}isOffscreen(a,u,g,x){return g<Qn||a>=this.screenRightBoundary||x<Qn||u>this.screenBottomBoundary}isInsideGrid(a,u,g,x){return g>=0&&a<this.gridRightBoundary&&x>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const a=o.a6.mat4.identity([]);return o.a6.mat4.translate(a,a,[-100,-100,0]),a}}function fo(m,a,u){const g=a.createTileMatrix(m,m.worldSize,u.toUnwrapped());return o.a6.mat4.multiply(new Float32Array(16),m.projMatrix,g)}function Sl(m,a,u){if(a.projection.name===u.projection.name)return m.projMatrix;const g=u.clone();return g.setProjection(a.projection),fo(g,a.getProjection(),m)}function ha(m,a,u){return a.name===u.projection.name?m.projMatrix:fo(u,a,m)}class _i{constructor(a,u,g,x){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?u:-u))):x&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class Wo{constructor(a,u,g,x,w,S=!1){this.text=new _i(a?a.text:null,u,g,w),this.icon=new _i(a?a.icon:null,u,x,w),this.clipped=S}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Da{constructor(a,u,g,x=!1){this.text=a,this.icon=u,this.skipFade=g,this.clipped=x}}class $i{constructor(){this.invProjMatrix=o.a6.mat4.create(),this.viewportMatrix=o.a6.mat4.create(),this.circles=[]}}class fp{constructor(a,u,g,x,w){this.bucketInstanceId=a,this.featureIndex=u,this.sourceLayerIndex=g,this.bucketIndex=x,this.tileID=w}}class La{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const u=++this.maxGroupID;this.collisionGroups[a]={ID:u,predicate:g=>g.collisionGroupID===u}}return this.collisionGroups[a]}}function El(m,a,u,g,x){const{horizontalAlign:w,verticalAlign:S}=o.bx(m),k=-(w-.5)*a,O=-(S-.5)*u,N=o.bw(m,g);return new o.P(k+N[0]*x,O+N[1]*x)}function Fc(m,a,u,g,x){const w=new o.P(m,a);return u&&w._rotate(g?x:-x),w}class Pc{constructor(a,u,g,x,w,S){this.transform=a.clone(),this.projection=a.projection.name,this.collisionIndex=new Jn(this.transform,w),this.buildingIndex=S,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=u,this.retainedQueryData={},this.collisionGroups=new La(g),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(a,u,g,x){const w=g.getBucket(u),S=g.latestFeatureIndex;if(!w||!S||u.fqid!==w.layerIds[0])return;const k=w.layers[0].layout,O=w.layers[0].paint,N=g.collisionBoxArray,Q=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),W=g.tileSize/o.ab,X=g.tileID.toUnwrapped();this.transform.setProjection(w.projection);const Y=(ae=g.tileID,le=w.getProjection(),ce=this.transform,le.name===this.projection?ce.calculateProjMatrix(ae.toUnwrapped()):fo(ce,le,ae));var ae,le,ce;const Ae=k.get("text-pitch-alignment")==="map",Be=k.get("text-rotation-alignment")==="map";u.compileFilter();const Te=u.dynamicFilter(),be=u.dynamicFilterNeedsFeature(),Me=this.transform.calculatePixelsToTileUnitsMatrix(g),Fe=Wr(Y,g.tileID.canonical,Ae,Be,this.transform,w.getProjection(),Me);let ze=null;if(Ae){const Xe=os(Y,g.tileID.canonical,Ae,Be,this.transform,w.getProjection(),Me);ze=o.a6.mat4.multiply([],this.transform.labelPlaneMatrix,Xe)}let Le=null;Te&&g.latestFeatureIndex&&(Le={unwrappedTileID:X,dynamicFilter:Te,dynamicFilterNeedsFeature:be}),this.retainedQueryData[w.bucketInstanceId]=new fp(w.bucketInstanceId,S,w.sourceLayerIndex,w.index,g.tileID);const Ve={bucket:w,layout:k,paint:O,posMatrix:Y,textLabelPlaneMatrix:Fe,labelToScreenMatrix:ze,clippingData:Le,scale:Q,textPixelRatio:W,holdingForFade:g.holdingForFade(),collisionBoxArray:N,partiallyEvaluatedTextSize:o.bj(w.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:o.bj(w.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID),latestFeatureIndex:g.latestFeatureIndex};if(x)for(const Xe of w.sortKeyRanges){const{sortKey:je,symbolInstanceStart:He,symbolInstanceEnd:nt}=Xe;a.push({sortKey:je,symbolInstanceStart:He,symbolInstanceEnd:nt,parameters:Ve})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:Ve})}attemptAnchorPlacement(a,u,g,x,w,S,k,O,N,Q,W,X,Y,ae,le,ce,Ae,Be){const{textOffset0:Te,textOffset1:be,crossTileID:Me}=X,Fe=[Te,be],ze=El(a,g,x,Fe,w),Le=this.collisionIndex.placeCollisionBox(ae,w,u,Fc(ze.x,ze.y,S,k,this.transform.angle),W,O,N,Q.predicate);if(ce){const Ve=ae.getSymbolInstanceIconSize(Be,this.transform.zoom,X.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(ae,Ve,ce,Fc(ze.x,ze.y,S,k,this.transform.angle),W,O,N,Q.predicate).box.length===0)return}if(Le.box.length>0){let Ve;return this.prevPlacement&&this.prevPlacement.variableOffsets[Me]&&this.prevPlacement.placements[Me]&&this.prevPlacement.placements[Me].text&&(Ve=this.prevPlacement.variableOffsets[Me].anchor),this.variableOffsets[Me]={textOffset:Fe,width:g,height:x,anchor:a,textScale:w,prevAnchor:Ve},this.markUsedJustification(ae,a,X,le),ae.allowVerticalPlacement&&(this.markUsedOrientation(ae,le,X),this.placedOrientations[Me]=le),{shift:ze,placedGlyphBoxes:Le}}}placeLayerBucketPart(a,u,g,x){const{bucket:w,layout:S,paint:k,posMatrix:O,textLabelPlaneMatrix:N,labelToScreenMatrix:Q,clippingData:W,textPixelRatio:X,holdingForFade:Y,collisionBoxArray:ae,partiallyEvaluatedTextSize:le,partiallyEvaluatedIconSize:ce,collisionGroup:Ae,latestFeatureIndex:Be}=a.parameters,Te=S.get("text-optional"),be=S.get("icon-optional"),Me=S.get("text-allow-overlap"),Fe=S.get("icon-allow-overlap"),ze=S.get("text-rotation-alignment")==="map",Le=S.get("text-pitch-alignment")==="map",Ve=S.get("symbol-z-elevate"),Xe=k.get("symbol-z-offset"),je=k.get("symbol-elevation-reference")==="sea";this.transform.setProjection(w.projection);let He=Me&&(Fe||!w.hasIconData()||be),nt=Fe&&(Me||!w.hasTextData()||Te);const mt=!Xe.isConstant();!w.collisionArrays&&ae&&w.deserializeCollisionBoxes(ae),g&&x&&w.updateCollisionDebugBuffers(this.transform.zoom,ae);const Et=(pt,kt,it)=>{const{crossTileID:wt,numVerticalGlyphVertices:bt}=pt;let Dt=null;if(W&&W.dynamicFilterNeedsFeature||mt){const Vr=this.retainedQueryData[w.bucketInstanceId];Dt=Be.loadFeature({featureIndex:pt.featureIndex,bucketIndex:Vr.bucketIndex,sourceLayerIndex:Vr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(W&&!(0,W.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},Dt,this.retainedQueryData[w.bucketInstanceId].tileID.canonical,new o.P(pt.tileAnchorX,pt.tileAnchorY),this.transform.calculateDistanceTileData(W.unwrappedTileID)))return this.placements[wt]=new Da(!1,!1,!1,!0),void u.add(wt);const Ut=Xe.evaluate(Dt,{});if(u.has(wt))return;if(Y)return void(this.placements[wt]=new Da(!1,!1,!1));let St=!1,Ft=!1,gr=!0,Nt=!1,Jt=!1,Br=null,sr={box:null,offscreen:null,occluded:null},xr={box:null,offscreen:null,occluded:null},Qr=null,zr=null,Dn=null,jn=0,hi=0,Il=0;it.textFeatureIndex?jn=it.textFeatureIndex:pt.useRuntimeCollisionCircles&&(jn=pt.featureIndex),it.verticalTextFeatureIndex&&(hi=it.verticalTextFeatureIndex);const so=Vr=>{Vr.tileID=this.retainedQueryData[w.bucketInstanceId].tileID;const Cn=this.transform.elevation;Vr.elevation=je?Ut:Ut+(Cn?Cn.getAtTileOffset(Vr.tileID,Vr.tileAnchorX,Vr.tileAnchorY):0),Vr.elevation+=pt.zOffset},tn=it.textBox;if(tn){so(tn);const Vr=Rn=>{let Wi=o.bk.horizontal;if(w.allowVerticalPlacement&&!Rn&&this.prevPlacement){const ao=this.prevPlacement.placedOrientations[wt];ao&&(this.placedOrientations[wt]=ao,Wi=ao,this.markUsedOrientation(w,Wi,pt))}return Wi},Cn=(Rn,Wi)=>{if(w.allowVerticalPlacement&&bt>0&&it.verticalTextBox){for(const ao of w.writingModes)if(ao===o.bk.vertical?(sr=Wi(),xr=sr):sr=Rn(),sr&&sr.box&&sr.box.length)break}else sr=Rn()};if(S.get("text-variable-anchor")){let Rn=S.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[wt]){const fn=this.prevPlacement.variableOffsets[wt];Rn.indexOf(fn.anchor)>0&&(Rn=Rn.filter(Lo=>Lo!==fn.anchor),Rn.unshift(fn.anchor))}const Wi=(fn,Lo,Xo)=>{const Oo=w.getSymbolInstanceTextSize(le,pt,this.transform.zoom,kt),ei=(fn.x2-fn.x1)*Oo+2*fn.padding,fa=(fn.y2-fn.y1)*Oo+2*fn.padding,pa=pt.hasIconTextFit&&!Fe?Lo:null;pa&&so(pa);let Fl={box:[],offscreen:!1,occluded:!1};const ll=Me?2*Rn.length:Rn.length;for(let za=0;za<ll;++za){const Pl=this.attemptAnchorPlacement(Rn[za%Rn.length],fn,ei,fa,Oo,ze,Le,X,O,Ae,za>=Rn.length,pt,kt,w,Xo,pa,le,ce);if(Pl&&(Fl=Pl.placedGlyphBoxes,Fl&&Fl.box&&Fl.box.length)){St=!0,Br=Pl.shift;break}}return Fl};Cn(()=>Wi(tn,it.iconBox,o.bk.horizontal),()=>{const fn=it.verticalTextBox;return fn&&so(fn),w.allowVerticalPlacement&&!(sr&&sr.box&&sr.box.length)&&bt>0&&fn?Wi(fn,it.verticalIconBox,o.bk.vertical):{box:null,offscreen:null,occluded:null}}),sr&&(St=sr.box,gr=sr.offscreen,Nt=sr.occluded);const ao=Vr(!(!sr||!sr.box));if(!St&&this.prevPlacement){const fn=this.prevPlacement.variableOffsets[wt];fn&&(this.variableOffsets[wt]=fn,this.markUsedJustification(w,fn.anchor,pt,ao))}}else{const Rn=(Wi,ao)=>{const fn=w.getSymbolInstanceTextSize(le,pt,this.transform.zoom,kt),Lo=this.collisionIndex.placeCollisionBox(w,fn,Wi,new o.P(0,0),Me,X,O,Ae.predicate);return Lo&&Lo.box&&Lo.box.length&&(this.markUsedOrientation(w,ao,pt),this.placedOrientations[wt]=ao),Lo};Cn(()=>Rn(tn,o.bk.horizontal),()=>{const Wi=it.verticalTextBox;return w.allowVerticalPlacement&&bt>0&&Wi?(so(Wi),Rn(Wi,o.bk.vertical)):{box:null,offscreen:null,occluded:null}}),Vr(!!(sr&&sr.box&&sr.box.length))}}if(Qr=sr,St=Qr&&Qr.box&&Qr.box.length>0,gr=Qr&&Qr.offscreen,Nt=Qr&&Qr.occluded,pt.useRuntimeCollisionCircles){const Vr=w.text.placedSymbolArray.get(pt.centerJustifiedTextSymbolIndex>=0?pt.centerJustifiedTextSymbolIndex:pt.verticalPlacedTextSymbolIndex),Cn=o.bl(w.textSizeData,le,Vr),Rn=S.get("text-padding");zr=this.collisionIndex.placeCollisionCircles(w,Me,Vr,w.lineVertexArray,w.glyphOffsetArray,Cn,O,N,Q,g,Le,Ae.predicate,pt.collisionCircleDiameter*Cn/o.bq,Rn,this.retainedQueryData[w.bucketInstanceId].tileID),St=Me||zr.circles.length>0&&!zr.collisionDetected,gr=gr&&zr.offscreen,Nt=zr.occluded}if(it.iconFeatureIndex&&(Il=it.iconFeatureIndex),it.iconBox){const Vr=Cn=>{so(Cn);const Rn=pt.hasIconTextFit&&Br?Fc(Br.x,Br.y,ze,Le,this.transform.angle):new o.P(0,0),Wi=w.getSymbolInstanceIconSize(ce,this.transform.zoom,pt.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(w,Wi,Cn,Rn,Fe,X,O,Ae.predicate)};xr&&xr.box&&xr.box.length&&it.verticalIconBox?(Dn=Vr(it.verticalIconBox),Ft=Dn.box.length>0):(Dn=Vr(it.iconBox),Ft=Dn.box.length>0),gr=gr&&Dn.offscreen,Jt=Dn.occluded}const Nn=Te||pt.numHorizontalGlyphVertices===0&&bt===0,Bi=be||pt.numIconVertices===0;if(Nn||Bi?Bi?Nn||(Ft=Ft&&St):St=Ft&&St:Ft=St=Ft&&St,St&&Qr&&Qr.box&&this.collisionIndex.insertCollisionBox(Qr.box,S.get("text-ignore-placement"),w.bucketInstanceId,xr&&xr.box&&hi?hi:jn,Ae.ID),Ft&&Dn&&this.collisionIndex.insertCollisionBox(Dn.box,S.get("icon-ignore-placement"),w.bucketInstanceId,Il,Ae.ID),zr&&(St&&this.collisionIndex.insertCollisionCircles(zr.circles,S.get("text-ignore-placement"),w.bucketInstanceId,jn,Ae.ID),g)){const Vr=w.bucketInstanceId;let Cn=this.collisionCircleArrays[Vr];Cn===void 0&&(Cn=this.collisionCircleArrays[Vr]=new $i);for(let Rn=0;Rn<zr.circles.length;Rn+=4)Cn.circles.push(zr.circles[Rn+0]),Cn.circles.push(zr.circles[Rn+1]),Cn.circles.push(zr.circles[Rn+2]),Cn.circles.push(zr.collisionDetected?1:0)}const zn=w.projection.name!=="globe";He=He&&(zn||!Nt),nt=nt&&(zn||!Jt),this.placements[wt]=new Da(St||He,Ft||nt,gr||w.justReloaded),u.add(wt)};if(Ve&&this.buildingIndex&&(this.buildingIndex.updateZOffset(w,this.retainedQueryData[w.bucketInstanceId].tileID),w.updateZOffset()),w.sortFeaturesByY){const pt=w.getSortedSymbolIndexes(this.transform.angle);for(let kt=pt.length-1;kt>=0;--kt){const it=pt[kt];Et(w.symbolInstances.get(it),it,w.collisionArrays[it])}w.hasAnyZOffset&&o.w(`${w.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(w.hasAnyZOffset){const pt=w.getSortedIndexesByZOffset();for(let kt=0;kt<pt.length;++kt){const it=pt[kt];Et(w.symbolInstances.get(it),it,w.collisionArrays[it])}}else for(let pt=a.symbolInstanceStart;pt<a.symbolInstanceEnd;pt++)Et(w.symbolInstances.get(pt),pt,w.collisionArrays[pt]);if(g&&w.bucketInstanceId in this.collisionCircleArrays){const pt=this.collisionCircleArrays[w.bucketInstanceId];o.a6.mat4.invert(pt.invProjMatrix,O),pt.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1}markUsedJustification(a,u,g,x){const{leftJustifiedTextSymbolIndex:w,centerJustifiedTextSymbolIndex:S,rightJustifiedTextSymbolIndex:k,verticalPlacedTextSymbolIndex:O,crossTileID:N}=g,Q=o.bv(u),W=x===o.bk.vertical?O:Q==="left"?w:Q==="center"?S:Q==="right"?k:-1;w>=0&&(a.text.placedSymbolArray.get(w).crossTileID=W>=0&&w!==W?0:N),S>=0&&(a.text.placedSymbolArray.get(S).crossTileID=W>=0&&S!==W?0:N),k>=0&&(a.text.placedSymbolArray.get(k).crossTileID=W>=0&&k!==W?0:N),O>=0&&(a.text.placedSymbolArray.get(O).crossTileID=W>=0&&O!==W?0:N)}markUsedOrientation(a,u,g){const x=u===o.bk.horizontal||u===o.bk.horizontalOnly?u:0,w=u===o.bk.vertical?u:0,{leftJustifiedTextSymbolIndex:S,centerJustifiedTextSymbolIndex:k,rightJustifiedTextSymbolIndex:O,verticalPlacedTextSymbolIndex:N}=g,Q=a.text.placedSymbolArray;S>=0&&(Q.get(S).placedOrientation=x),k>=0&&(Q.get(k).placedOrientation=x),O>=0&&(Q.get(O).placedOrientation=x),N>=0&&(Q.get(N).placedOrientation=w)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let g=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const x=u?u.symbolFadeChange(a):1,w=u?u.opacities:{},S=u?u.variableOffsets:{},k=u?u.placedOrientations:{};for(const O in this.placements){const N=this.placements[O],Q=w[O];Q?(this.opacities[O]=new Wo(Q,x,N.text,N.icon,null,N.clipped),g=g||N.text!==Q.text.placed||N.icon!==Q.icon.placed):(this.opacities[O]=new Wo(null,x,N.text,N.icon,N.skipFade,N.clipped),g=g||N.text||N.icon)}for(const O in w){const N=w[O];if(!this.opacities[O]){const Q=new Wo(N,x,!1,!1);Q.isHidden()||(this.opacities[O]=Q,g=g||N.text.placed||N.icon.placed)}}for(const O in S)this.variableOffsets[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.variableOffsets[O]=S[O]);for(const O in k)this.placedOrientations[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.placedOrientations[O]=k[O]);g?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:a)}updateLayerOpacities(a,u,g,x){const w=new Set;for(const S of u){const k=S.getBucket(a);k&&S.latestFeatureIndex&&a.fqid===k.layerIds[0]&&(this.updateBucketOpacities(k,w,S,S.collisionBoxArray,g,x,S.tileID,a.scope),k.layers[0].layout.get("symbol-z-elevate")&&this.buildingIndex&&(this.buildingIndex.updateZOffset(k,S.tileID),k.updateZOffset()))}}updateBucketOpacities(a,u,g,x,w,S,k,O){a.hasTextData()&&a.text.opacityVertexArray.clear(),a.hasIconData()&&a.icon.opacityVertexArray.clear(),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const N=a.layers[0].layout,Q=a.layers[0].paint,W=!!a.layers[0].dynamicFilter(),X=new Wo(null,0,!1,!1,!0),Y=N.get("text-allow-overlap"),ae=N.get("icon-allow-overlap"),le=N.get("text-variable-anchor"),ce=N.get("text-rotation-alignment")==="map",Ae=N.get("text-pitch-alignment")==="map",Be=Q.get("symbol-z-offset"),Te=Q.get("symbol-elevation-reference")==="sea",be=!Be.isConstant(),Me=new Wo(null,0,Y&&(ae||!a.hasIconData()||N.get("icon-optional")),ae&&(Y||!a.hasTextData()||N.get("text-optional")),!0);!a.collisionArrays&&x&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(x);const Fe=(Le,Ve,Xe)=>{for(let je=0;je<Ve/4;je++)Le.opacityVertexArray.emplaceBack(Xe)};let ze=0;S&&a.updateReplacement(k,S);for(let Le=0;Le<a.symbolInstances.length;Le++){const Ve=a.symbolInstances.get(Le),{numHorizontalGlyphVertices:Xe,numVerticalGlyphVertices:je,crossTileID:He,numIconVertices:nt,tileAnchorX:mt,tileAnchorY:Et}=Ve;let pt=null;if(Ve&&be){const Nt=this.retainedQueryData[a.bucketInstanceId];pt=g.latestFeatureIndex.loadFeature({featureIndex:Ve.featureIndex,bucketIndex:Nt.bucketIndex,sourceLayerIndex:Nt.sourceLayerIndex,layoutVertexArrayOffset:0})}const kt=Be.evaluate(pt,{}),it=u.has(He);let wt=this.opacities[He];it?wt=X:wt||(wt=Me,this.opacities[He]=wt),u.add(He);const bt=Xe>0||je>0,Dt=nt>0,Ut=this.placedOrientations[He],St=Ut===o.bk.vertical,Ft=Ut===o.bk.horizontal||Ut===o.bk.horizontalOnly;!bt&&!Dt||wt.isHidden()||ze++;let gr=!1;if((bt||Dt)&&S)for(const Nt of a.activeReplacements){if(o.br(Nt,w,o.bs.Symbol,O)||Nt.min.x>mt||mt>Nt.max.x||Nt.min.y>Et||Et>Nt.max.y)continue;const Jt=o.bt(mt,Et,k.canonical,Nt.footprintTileId.canonical);if(gr=o.bu(Jt,Nt.footprint),gr)break}if(bt){const Nt=gr?Tu:Eu(wt.text);Fe(a.text,Xe,St?Tu:Nt),Fe(a.text,je,Ft?Tu:Nt);const Jt=wt.text.isHidden(),{leftJustifiedTextSymbolIndex:Br,centerJustifiedTextSymbolIndex:sr,rightJustifiedTextSymbolIndex:xr,verticalPlacedTextSymbolIndex:Qr}=Ve,zr=a.text.placedSymbolArray,Dn=Jt||St?1:0;Br>=0&&(zr.get(Br).hidden=Dn),sr>=0&&(zr.get(sr).hidden=Dn),xr>=0&&(zr.get(xr).hidden=Dn),Qr>=0&&(zr.get(Qr).hidden=Jt||Ft?1:0);const jn=this.variableOffsets[He];jn&&this.markUsedJustification(a,jn.anchor,Ve,Ut);const hi=this.placedOrientations[He];hi&&(this.markUsedJustification(a,"left",Ve,hi),this.markUsedOrientation(a,hi,Ve))}if(Dt){const Nt=gr?Tu:Eu(wt.icon),{placedIconSymbolIndex:Jt,verticalPlacedIconSymbolIndex:Br}=Ve,sr=a.icon.placedSymbolArray,xr=wt.icon.isHidden()?1:0;Jt>=0&&(Fe(a.icon,nt,St?Tu:Nt),sr.get(Jt).hidden=xr),Br>=0&&(Fe(a.icon,Ve.numVerticalIconVertices,Ft?Tu:Nt),sr.get(Br).hidden=xr)}if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const Nt=a.collisionArrays[Le];if(Nt){let Jt=new o.P(0,0),Br=!0;if(Nt.textBox||Nt.verticalTextBox){if(le){const xr=this.variableOffsets[He];xr?(Jt=El(xr.anchor,xr.width,xr.height,xr.textOffset,xr.textScale),ce&&Jt._rotate(Ae?this.transform.angle:-this.transform.angle)):Br=!1}W&&(Br=!wt.clipped),Nt.textBox&&mh(a.textCollisionBox.collisionVertexArray,wt.text.placed,!Br||St,kt,Te,Jt.x,Jt.y),Nt.verticalTextBox&&mh(a.textCollisionBox.collisionVertexArray,wt.text.placed,!Br||Ft,kt,Te,Jt.x,Jt.y)}const sr=Br&&!!(!Ft&&Nt.verticalIconBox);Nt.iconBox&&mh(a.iconCollisionBox.collisionVertexArray,wt.icon.placed,sr,kt,Te,Ve.hasIconTextFit?Jt.x:0,Ve.hasIconTextFit?Jt.y:0),Nt.verticalIconBox&&mh(a.iconCollisionBox.collisionVertexArray,wt.icon.placed,!sr,kt,Te,Ve.hasIconTextFit?Jt.x:0,Ve.hasIconTextFit?Jt.y:0)}}}if(a.fullyClipped=ze===0,a.sortFeatures(this.transform.angle),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.bucketInstanceId in this.collisionCircleArrays){const Le=this.collisionCircleArrays[a.bucketInstanceId];a.placementInvProjMatrix=Le.invProjMatrix,a.placementViewportMatrix=Le.viewportMatrix,a.collisionCircleArray=Le.circles,delete this.collisionCircleArrays[a.bucketInstanceId]}}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,u){const g=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*g>a}setStale(){this.stale=!0}}function mh(m,a,u,g,x,w,S){m.emplaceBack(a?1:0,u?1:0,w||0,S||0,g,x?1:0),m.emplaceBack(a?1:0,u?1:0,w||0,S||0,g,x?1:0),m.emplaceBack(a?1:0,u?1:0,w||0,S||0,g,x?1:0),m.emplaceBack(a?1:0,u?1:0,w||0,S||0,g,x?1:0)}const nl=Math.pow(2,25),sg=Math.pow(2,24),mA=Math.pow(2,17),Es=Math.pow(2,16),ag=Math.pow(2,9),Tl=Math.pow(2,8),pp=Math.pow(2,1);function Eu(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;const a=m.placed?1:0,u=Math.floor(127*m.opacity);return u*nl+a*sg+u*mA+a*Es+u*ag+a*Tl+u*pp+a}const Tu=0;class lg{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&a.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(a,u,g,x,w){const S=this._bucketParts;for(;this._currentTileIndex<a.length;)if(u.getBucketParts(S,x,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,S.sort((k,O)=>k.sortKey-O.sortKey));this._currentPartIndex<S.length;){const k=S[this._currentPartIndex];if(u.placeLayerBucketPart(k,this._seenCrossTileIDs,g,k.symbolInstanceStart===0),this._currentPartIndex++,w())return!0}return!1}}class Mc{constructor(a,u,g,x,w,S,k,O,N){this.placement=new Pc(a,w,S,k,O,N),this._currentPlacementIndex=u.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(a,u,g,x){const w=o.q.now(),S=()=>{const k=o.q.now()-w;return!this._forceFullPlacement&&k>2};for(;this._currentPlacementIndex>=0;){const k=u[a[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if(k.type==="symbol"&&(!k.minzoom||k.minzoom<=O)&&(!k.maxzoom||k.maxzoom>O)){const N=k,Q=N.layout.get("symbol-z-elevate"),W=N.layout.get("symbol-sort-key").constantOr(1)!==void 0,X=N.layout.get("symbol-z-order"),Y=X==="viewport-y"||X==="auto"&&!(X!=="viewport-y"&&W),ae=N.layout.get("text-allow-overlap")||N.layout.get("icon-allow-overlap")||N.layout.get("text-ignore-placement")||N.layout.get("icon-ignore-placement"),le=Y&&ae,ce=this._inProgressLayer=this._inProgressLayer||new lg(N),Ae=o.av(k.source,k.scope);if(ce.continuePlacement(Q||le?x[Ae]:g[Ae],this.placement,this._showCollisionBoxes,k,S))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const ko=512/o.ab/2;class cg{constructor(a,u,g){this.tileID=a,this.bucketInstanceId=g,this.index=new o.by(u.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const x=a.canonical.x*o.ab,w=a.canonical.y*o.ab;for(let S=0;S<u.length;S++){const{key:k,crossTileID:O,tileAnchorX:N,tileAnchorY:Q}=u.get(S),W=Math.floor((x+N)*ko),X=Math.floor((w+Q)*ko);this.index.add(W,X),this.keys.push(k),this.crossTileIDs.push(O)}this.index.finish()}findMatches(a,u,g){const x=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z),w=ko/Math.pow(2,u.canonical.z-this.tileID.canonical.z),S=u.canonical.x*o.ab,k=u.canonical.y*o.ab;for(let O=0;O<a.length;O++){const N=a.get(O);if(N.crossTileID)continue;const{key:Q,tileAnchorX:W,tileAnchorY:X}=N,Y=Math.floor((S+W)*w),ae=Math.floor((k+X)*w),le=this.index.range(Y-x,ae-x,Y+x,ae+x);for(const ce of le){const Ae=this.crossTileIDs[ce];if(this.keys[ce]===Q&&!g.has(Ae)){g.add(Ae),N.crossTileID=Ae;break}}}}}class Iu{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Fu{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const u=Math.round((a-this.lng)/360);if(u!==0)for(const g in this.indexes){const x=this.indexes[g],w={};for(const S in x){const k=x[S];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+u),w[k.tileID.key]=k}this.indexes[g]=w}this.lng=a}addBucket(a,u,g){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let w=0;w<u.symbolInstances.length;w++)u.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]=new Set);const x=this.usedCrossTileIDs[a.overscaledZ];for(const w in this.indexes){const S=this.indexes[w];if(Number(w)>a.overscaledZ)for(const k in S){const O=S[k];O.tileID.isChildOf(a)&&O.findMatches(u.symbolInstances,a,x)}else{const k=S[a.scaledTo(Number(w)).key];k&&k.findMatches(u.symbolInstances,a,x)}}for(let w=0;w<u.symbolInstances.length;w++){const S=u.symbolInstances.get(w);S.crossTileID||(S.crossTileID=g.generate(),x.add(S.crossTileID))}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new cg(a,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(a,u){for(const g of u.crossTileIDs)this.usedCrossTileIDs[a].delete(g)}removeStaleBuckets(a){let u=!1;for(const g in this.indexes){const x=this.indexes[g];for(const w in x)a[x[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,x[w]),delete x[w],u=!0)}return u}}class U{constructor(){this.layerIndexes={},this.crossTileIDs=new Iu,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,u,g,x){let w=this.layerIndexes[a.fqid];w===void 0&&(w=this.layerIndexes[a.fqid]=new Fu);let S=!1;const k={};x.name!=="globe"&&w.handleWrapJump(g);for(const O of u){const N=O.getBucket(a);N&&a.fqid===N.layerIds[0]&&(N.bucketInstanceId||(N.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(O.tileID,N,this.crossTileIDs)&&(S=!0),k[N.bucketInstanceId]=!0)}return w.removeStaleBuckets(k)&&(S=!0),S}pruneUnusedLayers(a){const u={};a.forEach(g=>{u[g]=!0});for(const g in this.layerIndexes)u[g]||delete this.layerIndexes[g]}}const ne=771;class ue{constructor(a,u,g,x){this.blendFunction=a,this.blendColor=u,this.mask=g,this.blendEquation=x}}ue.Replace=[1,0,1,0],ue.disabled=new ue(ue.Replace,o.bz.transparent,[!1,!1,!1,!1]),ue.unblended=new ue(ue.Replace,o.bz.transparent,[!0,!0,!0,!0]),ue.alphaBlended=new ue([1,ne,1,ne],o.bz.transparent,[!0,!0,!0,!0]),ue.alphaBlendedNonPremultiplied=new ue([770,ne,770,ne],o.bz.transparent,[!0,!0,!0,!0]),ue.multiply=new ue([774,0,774,0],o.bz.transparent,[!0,!0,!0,!0]);class Se{constructor(a,u,g){this.func=a,this.mask=u,this.range=g}}Se.ReadOnly=!1,Se.ReadWrite=!0,Se.disabled=new Se(519,Se.ReadOnly,[0,1]);const Bt=7680;class At{constructor(a,u,g,x,w,S){this.test=a,this.ref=u,this.mask=g,this.fail=x,this.depthFail=w,this.pass=S}}At.disabled=new At({func:519,mask:0},0,0,Bt,Bt,Bt);const fr=1029,$n=2305;class pr{constructor(a,u,g){this.enable=a,this.mode=u,this.frontFace=g}}function Vn(m,a){const u=o.bC(m,3);o.a6.mat4.fromQuat(m,a),o.bE(m,3,u)}function Do(m,a){const u=o.a6.quat.identity([]);return o.a6.quat.rotateZ(u,u,-a),o.a6.quat.rotateX(u,u,-m),u}function qo(m,a){const u=[m[0],m[1],0],g=[a[0],a[1],0];if(o.a6.vec3.length(u)>=1e-15){const S=o.a6.vec3.normalize([],u);o.a6.vec3.scale(g,S,o.a6.vec3.dot(g,S)),a[0]=g[0],a[1]=g[1]}const x=o.a6.vec3.cross([],a,m);if(o.a6.vec3.len(x)<1e-15)return null;const w=Math.atan2(-x[1],x[0]);return Do(Math.atan2(Math.sqrt(m[0]*m[0]+m[1]*m[1]),-m[2]),w)}pr.disabled=new pr(!1,fr,$n),pr.backCCW=new pr(!0,fr,$n),pr.backCW=new pr(!0,fr,2304),pr.frontCW=new pr(!0,1028,2304),pr.frontCCW=new pr(!0,1028,$n);class Aa{constructor(a,u){this.position=a,this.orientation=u}get position(){return this._position}set position(a){if(a){const u=a instanceof o.a5?a:new o.a5(a[0],a[1],a[2]);this._renderWorldCopies&&(u.x=o.bA(u.x,0,1)),this._position=u}else this._position=null}lookAtPoint(a,u){if(this.orientation=null,!this.position)return;const g=this.position,x=this._elevation?this._elevation.getAtPointOrZero(o.a5.fromLngLat(a)):0,w=o.a5.fromLngLat(a,x),S=[w.x-g.x,w.y-g.y,w.z-g.z];u||(u=[0,0,1]),u[2]=Math.abs(u[2]),this.orientation=qo(S,u)}setPitchBearing(a,u){this.orientation=Do(o.bB(a),o.bB(-u))}}class ss{constructor(a,u){this._transform=o.a6.mat4.identity([]),this.orientation=u,this.position=a}get mercatorPosition(){const a=this.position;return new o.a5(a[0],a[1],a[2])}get position(){const a=o.bC(this._transform,3);return[a[0],a[1],a[2]]}set position(a){var u;a&&o.bE(this._transform,3,[(u=a)[0],u[1],u[2],1])}get orientation(){return this._orientation}set orientation(a){this._orientation=a||o.a6.quat.identity([]),a&&Vn(this._transform,this._orientation)}getPitchBearing(){const a=this.forward(),u=this.right();return{bearing:Math.atan2(-u[1],u[0]),pitch:Math.atan2(Math.sqrt(a[0]*a[0]+a[1]*a[1]),-a[2])}}setPitchBearing(a,u){this._orientation=Do(a,u),Vn(this._transform,this._orientation)}forward(){const a=o.bC(this._transform,2);return[-a[0],-a[1],-a[2]]}up(){const a=o.bC(this._transform,1);return[-a[0],-a[1],-a[2]]}right(){const a=o.bC(this._transform,0);return[a[0],a[1],a[2]]}getCameraToWorld(a,u){const g=new Float64Array(16);return o.a6.mat4.invert(g,this.getWorldToCamera(a,u)),g}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(a,u,g){const x=this.position;o.a6.vec3.scale(x,x,-a);const w=new Float64Array(16);return o.a6.mat4.fromScaling(w,[g,g,g]),o.a6.mat4.translate(w,w,x),w[10]*=u,w}getWorldToCamera(a,u){const g=new Float64Array(16),x=new Float64Array(4),w=this.position;return o.a6.quat.conjugate(x,this._orientation),o.a6.vec3.scale(w,w,-a),o.a6.mat4.fromQuat(g,x),o.a6.mat4.translate(g,g,w),g[1]*=-1,g[5]*=-1,g[9]*=-1,g[13]*=-1,g[8]*=u,g[9]*=u,g[10]*=u,g[11]*=u,g}getCameraToClipPerspective(a,u,g,x){const w=new Float64Array(16);return o.a6.mat4.perspective(w,a,u,g,x),w}getCameraToClipOrthographic(a,u,g,x,w,S){const k=new Float64Array(16);return o.a6.mat4.ortho(k,a,u,g,x,w,S),k}getDistanceToElevation(a,u=!1){const g=a===0?0:o.bD(a,u?o.aM(this.position[1]):this.position[1]),x=this.forward();return(g-this.position[2])/x[2]}clone(){return new ss([...this.position],[...this.orientation])}}const Bo={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class gh{constructor(a=0,u=0,g=0,x=0){if(isNaN(a)||a<0||isNaN(u)||u<0||isNaN(g)||g<0||isNaN(x)||x<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=u,this.left=g,this.right=x}interpolate(a,u,g){return u.top!=null&&a.top!=null&&(this.top=o.aa(a.top,u.top,g)),u.bottom!=null&&a.bottom!=null&&(this.bottom=o.aa(a.bottom,u.bottom,g)),u.left!=null&&a.left!=null&&(this.left=o.aa(a.left,u.left,g)),u.right!=null&&a.right!=null&&(this.right=o.aa(a.right,u.right,g)),this}getCenter(a,u){const g=o.ap((this.left+a-this.right)/2,0,a),x=o.ap((this.top+u-this.bottom)/2,0,u);return new o.P(g,x)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new gh(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const gd=(m,a,u)=>(1-u)*m+u*a,yd=m=>m*m*m*m*m;class ug{constructor(a,u,g,x,w,S,k){this.tileSize=512,this._renderWorldCopies=w===void 0||w,this._minZoom=a||0,this._maxZoom=u||22,this._minPitch=g??0,this._maxPitch=x??60,this.setProjection(S),this.setMaxBounds(k),this.width=0,this.height=0,this._center=new o.bK(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new gh,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new ss,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1}clone(){const a=new ug(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return a._elevation=this._elevation,a._centerAltitude=this._centerAltitude,a._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,a.tileSize=this.tileSize,a.mercatorFromTransition=this.mercatorFromTransition,a.width=this.width,a.height=this.height,a.cameraElevationReference=this.cameraElevationReference,a._center=this._center,a._setZoom(this.zoom),a._seaLevelZoom=this._seaLevelZoom,a.angle=this.angle,a._fov=this._fov,a._pitch=this._pitch,a._nearZ=this._nearZ,a._farZ=this._farZ,a._averageElevation=this._averageElevation,a._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,a._unmodified=this._unmodified,a._edgeInsets=this._edgeInsets.clone(),a._camera=this._camera.clone(),a._calcMatrices(),a.freezeTileCoverage=this.freezeTileCoverage,a.frustumCorners=this.frustumCorners,a}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<15}get elevation(){return this._elevation}set elevation(a){this._elevation!==a&&(this._elevation=a,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(a,u=!1){const g=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||g)&&this._updateCameraOnTerrain(),(a||g)&&this._constrainCamera(u),this._calcMatrices()}getProjection(){return o.ar(this.projection,["name","center","parallels"])}setProjection(a){this.projectionOptions=a||{name:"mercator"};const u=this.projection?this.getProjection():void 0;this.projection=o.bL(this.projectionOptions);const g=this.getProjection(),x=!o.bh(u,g);return x&&this._calcMatrices(),this.mercatorFromTransition=!1,x}setOrthographicProjectionAtLowPitch(a){return this._orthographicProjectionAtLowPitch!==a&&(this._orthographicProjectionAtLowPitch=a,this._calcMatrices(),!0)}setMercatorFromTransition(){const a=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=o.bL({name:"mercator"});const u=a!==this.projection.name;return u&&this._calcMatrices(),u}get minZoom(){return this._minZoom}set minZoom(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))}get maxZoom(){return this._maxZoom}set maxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))}get minPitch(){return this._minPitch}set minPitch(a){this._minPitch!==a&&(this._minPitch=a,this.pitch=Math.max(this.pitch,a))}get maxPitch(){return this._maxPitch}set maxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.pitch=Math.min(this.pitch,a))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const a=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(a))}get cameraWorldSize(){const a=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(a))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return o.bD(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this.width,this.height)}get bearing(){return o.bA(this.rotation,-180,180)}set bearing(a){this.rotation=a}get rotation(){return-this.angle/Math.PI*180}set rotation(a){const u=-a*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=o.a6.mat2.create(),o.a6.mat2.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(a){const u=o.ap(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const a=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/a)}set fov(a){a=Math.max(.01,Math.min(60,a)),this._fov!==a&&(this._unmodified=!1,this._fov=o.bB(a),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(a){this._averageElevation=a,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(a){const u=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._setZoom(u),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(a){this._zoom=a,this.scale=this.zoomScale(a),this.tileZoom=Math.floor(a),this.zoomFraction=a-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(a){this._tileCoverLift!==a&&(this._tileCoverLift=a)}_updateCameraOnTerrain(){const a=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,u=this.elevation&&a===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||a===Number.NEGATIVE_INFINITY&&(!u||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const g=this._elevation;u||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&g.exaggeration()&&this._centerAltitudeValidForExaggeration!==g.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*g.exaggeration(),this._centerAltitudeValidForExaggeration=g.exaggeration()):(this._centerAltitude=a||0,this._centerAltitudeValidForExaggeration=g.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const a=this._elevation,u=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],g=this.horizonLineFromTop();let x=0,w=0;for(let S=0;S<u.length;S++){const k=new o.P(u[S][0]*this.width,g+u[S][1]*(this.height-g)),O=a.pointCoordinate(k);if(!O)continue;const N=1/Math.hypot(O[0]-this._camera.position[0],O[1]-this._camera.position[1]);x+=O[3]*N,w+=N}return w===0?NaN:x/w}get center(){return this._center}set center(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const a=this._seaLevelZoom,u=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),g=this.pixelsPerMeter/this.worldSize*u,x=this._mercatorZfromZoom(a),w=this._mercatorZfromZoom(this._maxZoom),S=Math.max(x-g,w);this._setZoom(this._zoomFromMercatorZ(S))}get padding(){return this._edgeInsets.toJSON()}set padding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}computeZoomRelativeTo(a){const u=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,a.toAltitude()));let g;g=a.z<this._camera.position[2]?[u.x,u.y,u.z]:[a.x,a.y,a.z];const x=o.a6.vec3.length(o.a6.vec3.sub([],this._camera.position,g));return o.ap(this._zoomFromMercatorZ(x),this._minZoom,this._maxZoom)}setFreeCameraOptions(a){if(!this.height||!a.position&&!a.orientation)return;this._updateCameraState();let u=!1;if(a.orientation&&!o.a6.quat.exactEquals(a.orientation,this._camera.orientation)&&(u=this._setCameraOrientation(a.orientation)),a.position){const g=[a.position.x,a.position.y,a.position.z];o.a6.vec3.exactEquals(g,this._camera.position)||(this._setCameraPosition(g),u=!0)}u&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const a=this._camera.position,u=new Aa;return u.position=new o.a5(a[0],a[1],a[2]),u.orientation=this._camera.orientation,u._elevation=this.elevation,u._renderWorldCopies=this.renderWorldCopies,u}_setCameraOrientation(a){if(!o.a6.quat.length(a))return!1;o.a6.quat.normalize(a,a);const u=o.a6.vec3.transformQuat([],[0,0,-1],a),g=o.a6.vec3.transformQuat([],[0,-1,0],a);if(g[2]<0)return!1;const x=qo(u,g);return!!x&&(this._camera.orientation=x,!0)}_setCameraPosition(a){const u=this.zoomScale(this.minZoom)*this.tileSize,g=this.zoomScale(this.maxZoom)*this.tileSize,x=this.cameraToCenterDistance;a[2]=o.ap(a[2],x/g,x/u),this._camera.position=a}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,u,g){this._unmodified=!1,this._edgeInsets.interpolate(a,u,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(a){const u=(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(a){const u=[new o.bM(0,a)];if(this.renderWorldCopies){const g=this.pointCoordinate(new o.P(0,0)),x=this.pointCoordinate(new o.P(this.width,0)),w=this.pointCoordinate(new o.P(this.width,this.height)),S=this.pointCoordinate(new o.P(0,this.height)),k=Math.floor(Math.min(g.x,x.x,w.x,S.x)),O=Math.floor(Math.max(g.x,x.x,w.x,S.x)),N=1;for(let Q=k-N;Q<=O+N;Q++)Q!==0&&u.push(new o.bM(Q,a))}return u}isLODDisabled(a){return(!a||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(a,u,g){let x=[];const w=g!==void 0,S=!w;if(S&&this.zoom<u||w&&g[0]===0&&g[1]===0)return x;const k=new Set,O=(Q,W,X,Y,ae)=>{const le=o.c1(W,Q,X,Y,ae);k.has(le)||(x.push(new o.aA(Q,W,X,Y,ae)),k.add(le))};for(let Q=0;Q<a.length;Q++){const W=a[Q];if(S&&W.canonical.z!==u)continue;const X=W.canonical,Y=W.overscaledZ,ae=W.wrap,le=1<<X.z,ce=X.x+1<le,Ae=X.x>0,Be=X.y+1<le,Te=X.y>0,be=W.wrap-(Ae?0:1),Me=W.wrap+(ce?0:1),Fe=Ae?X.x-1:le-1,ze=ce?X.x+1:0;if(w)g[0]<0?(O(Y,Me,X.z,ze,X.y),g[1]<0&&Be&&(O(Y,ae,X.z,X.x,X.y+1),O(Y,Me,X.z,ze,X.y+1)),g[1]>0&&Te&&(O(Y,ae,X.z,X.x,X.y-1),O(Y,Me,X.z,ze,X.y-1))):g[0]>0?(O(Y,be,X.z,Fe,X.y),g[1]<0&&Be&&(O(Y,ae,X.z,X.x,X.y+1),O(Y,be,X.z,Fe,X.y+1)),g[1]>0&&Te&&(O(Y,ae,X.z,X.x,X.y-1),O(Y,be,X.z,Fe,X.y-1))):g[1]<0&&Be?O(Y,ae,X.z,X.x,X.y+1):Te&&O(Y,ae,X.z,X.x,X.y-1);else{const Le=W.visibleQuadrants;1&Le&&(O(Y,be,X.z,Fe,X.y),Te&&(O(Y,ae,X.z,X.x,X.y-1),O(Y,be,X.z,Fe,X.y-1))),2&Le&&(O(Y,Me,X.z,ze,X.y),Te&&(O(Y,ae,X.z,X.x,X.y-1),O(Y,Me,X.z,ze,X.y-1))),4&Le&&(O(Y,be,X.z,Fe,X.y),Be&&(O(Y,ae,X.z,X.x,X.y+1),O(Y,be,X.z,Fe,X.y+1))),8&Le&&(O(Y,Me,X.z,ze,X.y),Be&&(O(Y,ae,X.z,X.x,X.y+1),O(Y,Me,X.z,ze,X.y+1)))}}const N=[];for(const Q of x)x.some(W=>Q.isChildOf(W))||N.push(Q);if(x=N.filter(Q=>!a.some(W=>!!(Q.overscaledZ<u&&W.isChildOf(Q))||Q.equals(W)||Q.isChildOf(W))),S){const Q=1<<u,W=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),X=[Q*W.x,Q*W.y],Y=4,ae=Y*Y;x=x.filter(le=>{const ce=le.canonical.x+.5-X[0],Ae=le.canonical.y+.5-X[1];return ce*ce+Ae*Ae<ae})}return x}coveringTiles(a){let u=this.coveringZoomLevel(a);const g=u,x=this.elevation&&this.elevation.exaggeration(),w=x&&!a.isTerrainDEM,S=this.projection.name==="mercator";if(a.minzoom!==void 0&&u<a.minzoom)return[];a.maxzoom!==void 0&&u>a.maxzoom&&(u=a.maxzoom);const k=this.locationCoordinate(this.center),O=this.center.lat,N=1<<u,Q=[N*k.x,N*k.y,0],W=this.projection.name==="globe",X=!W,Y=o.bN.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,u,X),ae=W?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),le=N*o.bD(1,this.center.lat),ce=this._camera.position[2]/o.bD(1,this.center.lat),Ae=[N*ae.x,N*ae.y,ce*(X?1:le)],Be=W||x,Te=this.cameraToCenterDistance/a.tileSize*(a.roundZoom?1:.502),be=this.isLODDisabled(!0)?u:0;let Me;if(this._elevation&&a.isTerrainDEM)Me=1e4*this._elevation.exaggeration();else if(this._elevation){const it=this._elevation.getMinMaxForVisibleTiles();Me=it?it.max:this._centerAltitude}else Me=this._centerAltitude;const Fe=a.isTerrainDEM?-Me:this._elevation?this._elevation.getMinElevationBelowMSL():0,ze=this.projection.isReprojectedInTileSpace?o.bO(this):1,Le=it=>{const bt=new o.a5(it.x+25e-6,it.y,it.z),Dt=new o.a5(it.x,it.y+25e-6,it.z),Ut=it.toLngLat(),St=bt.toLngLat(),Ft=Dt.toLngLat(),gr=this.locationCoordinate(Ut),Nt=this.locationCoordinate(St),Jt=this.locationCoordinate(Ft),Br=Math.hypot(Nt.x-gr.x,Nt.y-gr.y),sr=Math.hypot(Jt.x-gr.x,Jt.y-gr.y);return Math.sqrt(Br*sr)*ze/25e-6},Ve=it=>{const wt=Me,bt=Fe;return{aabb:o.bR(this,N,0,0,0,it,bt,wt,this.projection),zoom:0,x:0,y:0,minZ:bt,maxZ:wt,wrap:it,fullyVisible:!1}},Xe=[];let je=[];const He=u,nt=a.reparseOverscaled?g:u,mt=(ce-this._centerAltitude)*le,Et=it=>{if(!this._elevation||!it.tileID||!S)return;const wt=this._elevation.getMinMaxForTile(it.tileID),bt=it.aabb;wt?(bt.min[2]=wt.min,bt.max[2]=wt.max,bt.center[2]=(bt.min[2]+bt.max[2])/2):(it.shouldSplit=kt(it),it.shouldSplit||(bt.min[2]=bt.max[2]=bt.center[2]=this._centerAltitude))},pt=(it,wt)=>{if(.707*wt<it)return 1;const bt=wt/it;return bt/(1.4144271570014144+(Math.pow(1.1,bt-1.4144271570014144+1)-1)/(1.1-1)-1)},kt=it=>{if(it.zoom<be)return!0;if(it.zoom===He)return!1;if(it.shouldSplit!=null)return it.shouldSplit;const wt=it.aabb.distanceX(Ae),bt=it.aabb.distanceY(Ae);let Dt=mt,Ut=1;if(W){Dt=it.aabb.distanceZ(Ae);const sr=Math.pow(2,it.zoom),xr=o.aM((it.y+1)/sr),Qr=o.aM(it.y/sr),zr=Math.min(Math.max(O,xr),Qr),Dn=o.c5(zr)/o.c5(O);if(Ut=zr===O?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Dn/this._mercatorScaleRatio),this.zoom<=o.c2&&it.zoom===He-1&&Dn>=.9)return!0}else if(w&&(Dt=it.aabb.distanceZ(Ae)*le),this.projection.isReprojectedInTileSpace&&g<=5){const sr=Math.pow(2,it.zoom),xr=Le(new o.a5((it.x+.5)/sr,(it.y+.5)/sr));Ut=xr>.85?1:xr}if(!S){const sr=Math.sqrt(wt*wt+bt*bt+Dt*Dt);let xr=(1<<He-it.zoom)*Te*Ut;return xr*=pt(Math.max(Dt,mt),sr),sr<xr}let St=Number.MAX_VALUE,Ft=0;const gr=it.aabb.getCorners(),Nt=[];for(const sr of gr){o.a6.vec3.sub(Nt,sr,Ae),W||(w?Nt[2]*=le:Nt[2]=mt);const xr=o.a6.vec3.dot(Nt,this._camera.forward());xr<St&&(St=xr,Ft=Math.abs(Nt[2]))}let Jt=(1<<He-it.zoom)*Te*Ut;if(Jt*=pt(Math.max(Ft,mt),St),St<Jt)return!0;const Br=it.aabb.closestPoint(Q);return Br[0]===Q[0]&&Br[1]===Q[1]};if(this.renderWorldCopies)for(let it=1;it<=3;it++)Xe.push(Ve(-it)),Xe.push(Ve(it));for(Xe.push(Ve(0));Xe.length>0;){const it=Xe.pop(),wt=it.x,bt=it.y;let Dt=it.fullyVisible;const Ut=()=>this.projection.name==="globe"&&(it.y===0||it.y===(1<<it.zoom)-1);if(!Dt){let St=Be?it.aabb.intersects(Y):it.aabb.intersectsFlat(Y);if(St===0&&Ut()){const Ft=new o.bP(it.zoom,wt,bt);St=o.bQ(this,N,Ft,!0).intersects(Y)}if(St===0)continue;Dt=St===2}if(it.zoom!==He&&kt(it))for(let St=0;St<4;St++){const Ft=(wt<<1)+St%2,gr=(bt<<1)+(St>>1),Nt={aabb:S?it.aabb.quadrant(St):o.bR(this,N,it.zoom+1,Ft,gr,it.wrap,it.minZ,it.maxZ,this.projection),zoom:it.zoom+1,x:Ft,y:gr,wrap:it.wrap,fullyVisible:Dt,tileID:void 0,shouldSplit:void 0,minZ:it.minZ,maxZ:it.maxZ};w&&!W&&(Nt.tileID=new o.aA(it.zoom+1===He?nt:it.zoom+1,it.wrap,it.zoom+1,Ft,gr),Et(Nt)),Xe.push(Nt)}else{const St=it.zoom===He?nt:it.zoom;if(a.minzoom&&a.minzoom>St)continue;let Ft=0;if(!Dt){let Br=Be?it.aabb.intersectsPrecise(Y):it.aabb.intersectsPreciseFlat(Y);if(Br===0&&Ut()){const sr=new o.bP(it.zoom,wt,bt);Br=o.bQ(this,N,sr,!0).intersectsPrecise(Y)}if(Br===0)continue;if(a.calculateQuadrantVisibility)if(Y.containsPoint(it.aabb.center))Ft=15;else for(let sr=0;sr<4;sr++)it.aabb.quadrant(sr).intersects(Y)!==0&&(Ft|=1<<sr)}const gr=Q[0]-(.5+wt+(it.wrap<<it.zoom))*(1<<u-it.zoom),Nt=Q[1]-.5-bt,Jt=it.tileID?it.tileID:new o.aA(St,it.wrap,it.zoom,wt,bt);a.calculateQuadrantVisibility&&(Jt.visibleQuadrants=Ft),je.push({tileID:Jt,distanceSq:gr*gr+Nt*Nt})}}if(this.fogCullDistSq){const it=this.fogCullDistSq,wt=this.horizonLineFromTop();je=je.filter(bt=>{const Dt=[0,0,0,1],Ut=[o.ab,o.ab,0,1],St=this.calculateFogTileMatrix(bt.tileID.toUnwrapped());o.a6.vec4.transformMat4(Dt,Dt,St),o.a6.vec4.transformMat4(Ut,Ut,St);const Ft=o.a6.vec4.min([],Dt,Ut),gr=o.a6.vec4.max([],Dt,Ut),Nt=o.bS(Ft,gr);if(Nt===0)return!0;let Jt=!1;const Br=this._elevation;if(Br&&Nt>it&&wt!==0){const sr=this.calculateProjMatrix(bt.tileID.toUnwrapped());let xr;a.isTerrainDEM||(xr=Br.getMinMaxForTile(bt.tileID)),xr||(xr={min:Fe,max:Me});const Qr=o.c3(this.rotation),zr=[Qr[0]*o.ab,Qr[1]*o.ab,xr.max];o.a6.vec3.transformMat4(zr,zr,sr),Jt=(1-zr[1])*this.height*.5<wt}return Nt<it||Jt})}return je.sort((it,wt)=>it.distanceSq-wt.distanceSq).map(it=>it.tileID)}resize(a,u){this.width=a,this.height=u,this.pixelsToGLUnits=[2/a,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(a){return Math.pow(2,a)}scaleZoom(a){return Math.log(a)/Math.LN2}project(a){const u=o.ap(a.lat,-o.bT,o.bT),g=this.projection.project(a.lng,u);return new o.P(g.x*this.worldSize,g.y*this.worldSize)}unproject(a){return this.projection.unproject(a.x/this.worldSize,a.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/o.bD(1,this.center.lat)/this.worldSize}setLocationAtPoint(a,u){let g,x;const w=this.centerPoint;if(this.projection.name==="globe"){const k=this.worldSize;g=(u.x-w.x)/k,x=(u.y-w.y)/k}else{const k=this.pointCoordinate(u),O=this.pointCoordinate(w);g=k.x-O.x,x=k.y-O.y}const S=this.locationCoordinate(a);this.setLocation(new o.a5(S.x-g,S.y-x))}setLocation(a){this.center=this.coordinateLocation(a),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(a){return this.projection.locationPoint(this,a)}locationPoint3D(a){return this.projection.locationPoint(this,a,!0)}pointLocation(a){return this.coordinateLocation(this.pointCoordinate(a))}pointLocation3D(a){return this.coordinateLocation(this.pointCoordinate3D(a))}locationCoordinate(a,u){const g=u?o.bD(u,a.lat):void 0,x=this.projection.project(a.lng,a.lat);return new o.a5(x.x,x.y,g)}coordinateLocation(a){return this.projection.unproject(a.x,a.y)}pointRayIntersection(a,u){const g=u??this._centerAltitude,x=[a.x,a.y,0,1],w=[a.x,a.y,1,1];o.a6.vec4.transformMat4(x,x,this.pixelMatrixInverse),o.a6.vec4.transformMat4(w,w,this.pixelMatrixInverse);const S=w[3];o.a6.vec4.scale(x,x,1/x[3]),o.a6.vec4.scale(w,w,1/S);const k=x[2],O=w[2];return{p0:x,p1:w,t:k===O?0:(g-k)/(O-k)}}screenPointToMercatorRay(a){const u=[a.x,a.y,0,1],g=[a.x,a.y,1,1];return o.a6.vec4.transformMat4(u,u,this.pixelMatrixInverse),o.a6.vec4.transformMat4(g,g,this.pixelMatrixInverse),o.a6.vec4.scale(u,u,1/u[3]),o.a6.vec4.scale(g,g,1/g[3]),u[2]=o.bD(u[2],this._center.lat)*this.worldSize,g[2]=o.bD(g[2],this._center.lat)*this.worldSize,o.a6.vec4.scale(u,u,1/this.worldSize),o.a6.vec4.scale(g,g,1/this.worldSize),new o.aj([u[0],u[1],u[2]],o.a6.vec3.normalize([],o.a6.vec3.sub([],g,u)))}rayIntersectionCoordinate(a){const{p0:u,p1:g,t:x}=a,w=o.bD(u[2],this._center.lat),S=o.bD(g[2],this._center.lat);return new o.a5(o.aa(u[0],g[0],x)/this.worldSize,o.aa(u[1],g[1],x)/this.worldSize,o.aa(w,S,x))}pointCoordinate(a,u=this._centerAltitude){return this.projection.pointCoordinate(this,a.x,a.y,u)}pointCoordinate3D(a){if(!this.elevation)return this.pointCoordinate(a);let u=this.projection.pointCoordinate3D(this,a.x,a.y);if(u)return new o.a5(u[0],u[1],u[2]);let g=0,x=this.horizonLineFromTop();if(a.y>x)return this.pointCoordinate(a);const w=.02*x,S=a.clone();for(let k=0;k<10&&x-g>w;k++){S.y=o.aa(g,x,.66);const O=this.projection.pointCoordinate3D(this,S.x,S.y);O?(x=S.y,u=O):g=S.y}return u?new o.a5(u[0],u[1],u[2]):this.pointCoordinate(a)}isPointAboveHorizon(a){return this.projection.isPointAboveHorizon(this,a)}isPointOnSurface(a){if(a.y<0||a.y>this.height||a.x<0||a.x>this.width)return!1;if(this.elevation||this.zoom>=o.bU)return!this.isPointAboveHorizon(a);const u=this.pointCoordinate(a);return u.y>=0&&u.y<=1}_coordinatePoint(a,u){const g=u&&this.elevation?this.elevation.getAtPointOrZero(a,this._centerAltitude):this._centerAltitude,x=[a.x*this.worldSize,a.y*this.worldSize,g+a.toAltitude(),1];return o.a6.vec4.transformMat4(x,x,this.pixelMatrix),x[3]>0?new o.P(x[0]/x[3],x[1]/x[3]):new o.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:a,left:u}=this._edgeInsets,g=this.height-this._edgeInsets.bottom,x=this.width-this._edgeInsets.right,w=this.pointLocation3D(new o.P(u,a)),S=this.pointLocation3D(new o.P(x,a)),k=this.pointLocation3D(new o.P(x,g)),O=this.pointLocation3D(new o.P(u,g));let N=Math.min(w.lng,S.lng,k.lng,O.lng),Q=Math.max(w.lng,S.lng,k.lng,O.lng),W=Math.min(w.lat,S.lat,k.lat,O.lat),X=Math.max(w.lat,S.lat,k.lat,O.lat);const Y=Math.pow(2,-this.zoom)/16*270,ae=this.projection.name==="globe"?1:4,le=(ce,Ae,Be,Te,be)=>{const Me=(ce+Be)/2,Fe=(Ae+Te)/2,ze=new o.P(Me,Fe),{lng:Le,lat:Ve}=this.pointLocation3D(ze),Xe=Math.max(0,N-Le,W-Ve,Le-Q,Ve-X);N=Math.min(N,Le),Q=Math.max(Q,Le),W=Math.min(W,Ve),X=Math.max(X,Ve),(be<ae||Xe>Y)&&(le(ce,Ae,Me,Fe,be+1),le(Me,Fe,Be,Te,be+1))};if(le(u,a,x,a,1),le(x,a,x,g,1),le(x,g,u,g,1),le(u,g,u,a,1),this.projection.name==="globe"){const[ce,Ae]=o.bV(this);ce?(X=90,Q=180,N=-180):Ae&&(W=-90,Q=180,N=-180)}return new o.as(new o.bK(N,W),new o.bK(Q,X))}_getBoundsRectangular(a,u){const{top:g,left:x}=this._edgeInsets,w=this.height-this._edgeInsets.bottom,S=this.width-this._edgeInsets.right,k=new o.P(x,g),O=new o.P(S,g),N=new o.P(S,w),Q=new o.P(x,w);let W=this.pointCoordinate(k,a),X=this.pointCoordinate(O,a);const Y=this.pointCoordinate(N,u),ae=this.pointCoordinate(Q,u),le=(ce,Ae)=>(Ae.y-ce.y)/(Ae.x-ce.x);return W.y>1&&X.y>=0?W=new o.a5((1-ae.y)/le(ae,W)+ae.x,1):W.y<0&&X.y<=1&&(W=new o.a5(-ae.y/le(ae,W)+ae.x,0)),X.y>1&&W.y>=0?X=new o.a5((1-Y.y)/le(Y,X)+Y.x,1):X.y<0&&W.y<=1&&(X=new o.a5(-Y.y/le(Y,X)+Y.x,0)),new o.as().extend(this.coordinateLocation(W)).extend(this.coordinateLocation(X)).extend(this.coordinateLocation(ae)).extend(this.coordinateLocation(Y))}_getBoundsRectangularTerrain(){const a=this.elevation;if(!a.visibleDemTiles.length||a.isUsingMockSource())return this._getBoundsRectangular(0,0);const u=a.visibleDemTiles.reduce((g,x)=>{if(x.dem){const w=x.dem.tree;g.min=Math.min(g.min,w.minimums[0]),g.max=Math.max(g.max,w.maximums[0])}return g},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(u.min*a.exaggeration(),u.max*a.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(a=!0){const u=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,g=this.height/2-u*(1-this._horizonShift);return a?Math.max(0,g):g}getMaxBounds(){return this.maxBounds}setMaxBounds(a){this.maxBounds=a,this.minLat=-o.bT,this.maxLat=o.bT,this.minLng=-180,this.maxLng=180,a&&(this.minLat=a.getSouth(),this.maxLat=a.getNorth(),this.minLng=a.getWest(),this.maxLng=a.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=o.am(this.minLng)*this.tileSize,this.worldMaxX=o.am(this.maxLng)*this.tileSize,this.worldMinY=o.at(this.maxLat)*this.tileSize,this.worldMaxY=o.at(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(a,u){return this.projection.createTileMatrix(this,u,a)}calculateDistanceTileData(a){const u=a.key,g=this._distanceTileDataCache;if(g[u])return g[u];const x=a.canonical,w=1/this.height,S=this.cameraWorldSize,k=S/this.zoomScale(x.z),O=(x.x+Math.pow(2,x.z)*a.wrap)*k,N=x.y*k,Q=this.point;Q.x*=S/this.worldSize,Q.y*=S/this.worldSize;const W=this.angle,X=Math.sin(-W),Y=-Math.cos(-W);return g[u]={bearing:[X,Y],center:[(Q.x-O)*w,(Q.y-N)*w],scale:k/o.ab*w},g[u]}calculateFogTileMatrix(a){const u=a.key,g=this._fogTileMatrixCache;if(g[u])return g[u];const x=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,a);return o.a6.mat4.multiply(x,this.worldToFogMatrix,x),g[u]=new Float32Array(x),g[u]}calculateProjMatrix(a,u=!1,g=!1){const x=a.key;let w;if(w=g?this._expandedProjMatrixCache:u?this._alignedProjMatrixCache:this._projMatrixCache,w[x])return w[x];const S=this.calculatePosMatrix(a,this.worldSize);let k;return k=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:g?this.expandedFarZProjMatrix:u?this.alignedProjMatrix:this.projMatrix,o.a6.mat4.multiply(S,k,S),w[x]=new Float32Array(S),w[x]}calculatePixelsToTileUnitsMatrix(a){const u=a.tileID.key,g=this._pixelsToTileUnitsCache;if(g[u])return g[u];const x=o.bW(a,this);return g[u]=x,g[u]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const a=1/this.worldSize,u=o.a6.mat4.fromScaling([],[a,a,a]);return o.a6.mat4.multiply(u,u,this.globeMatrix),u}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const a=this._elevation;this._updateCameraState();const u=o.bD(1,this._center.lat)*this.worldSize,g=this._computeCameraPosition(u),x=this._camera.forward(),w=o.bD(1,this._center.lat);g[2]/=w,x[2]/=w,o.a6.vec3.normalize(x,x);const S=a.raycast(g,x,a.exaggeration());if(S){const k=o.a6.vec3.scaleAndAdd([],g,x,S),O=new o.a5(k[0],k[1],o.bD(k[2],o.aM(k[1]))),N=(O.z+o.a6.vec3.length([O.x-g[0],O.y-g[1],O.z-g[2]*w]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(N),this._centerAltitude=O.toAltitude(),this._center=this.coordinateLocation(O),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(a=!1){if(!this._elevation)return;const u=this._elevation,g=o.bD(1,this._center.lat)*this.worldSize,x=this._computeCameraPosition(g),w=u.getAtPointOrZero(new o.a5(...x)),S=this.pixelsPerMeter/this.worldSize*w,k=this._minimumHeightOverTerrain(),O=x[2]-S;if(O<=k)if(O<0||a){const N=this.locationCoordinate(this._center,this._centerAltitude),Q=[x[0],x[1],N.z-x[2]],W=o.a6.vec3.length(Q);Q[2]-=(k-O)/this._pixelsPerMercatorPixel;const X=o.a6.vec3.length(Q);if(X===0)return;o.a6.vec3.scale(Q,Q,W/X*this._pixelsPerMercatorPixel),this._camera.position=[x[0],x[1],N.z*this._pixelsPerMercatorPixel-Q[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const a=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||a){const X=this.center;return X.lat=o.ap(X.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!a)&&(X.lng=o.ap(X.lng,this.minLng,this.maxLng)),this.center=X,void(this._constraining=!1)}const u=this._unmodified,{x:g,y:x}=this.point;let w=0,S=g,k=x;const O=this.width/2,N=this.height/2,Q=this.worldMinY*this.scale,W=this.worldMaxY*this.scale;if(x-N<Q&&(k=Q+N),x+N>W&&(k=W-N),W-Q<this.height&&(w=Math.max(w,this.height/(W-Q)),k=(W+Q)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const X=this.worldMinX*this.scale,Y=this.worldMaxX*this.scale,ae=this.worldSize/2-(X+Y)/2;S=(g+ae+this.worldSize)%this.worldSize-ae,S-O<X&&(S=X+O),S+O>Y&&(S=Y-O),Y-X<this.width&&(w=Math.max(w,this.width/(Y-X)),S=(Y+X)/2)}S===g&&k===x||(this.center=this.unproject(new o.P(S,k))),w&&(this.zoom+=this.scaleZoom(w)),this._constrainCamera(),this._unmodified=u,this._constraining=!1}_minZoomForBounds(){let a=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(a=Math.max(a,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),a}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const a=this.centerOffset,u=this.projection.name==="globe",g=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=o.bD(1,this.center.lat)/o.bD(1,o.c4));const x=o.bX(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,x),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const w=this.projection.zAxisUnit==="meters"?g:1,S=this._camera.getWorldToCamera(this.worldSize,w);let k;const O=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(O[8]=2*-a.x/this.width,O[9]=2*a.y/this.height,this.isOrthographic){let Ve=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),Xe=Ve*this.aspect,je=-Xe,He=-Ve;Xe-=a.x,je-=a.x,Ve+=a.y,He+=a.y,k=this._camera.getCameraToClipOrthographic(je,Xe,He,Ve,this._nearZ,this._farZ),((nt,mt,Et,pt)=>{for(let kt=0;kt<16;kt++)nt[kt]=gd(mt[kt],Et[kt],pt)})(k,k,O,yd(this.pitch>=15?1:this.pitch/15))}else k=O;const N=o.a6.mat4.mul([],O,S);let Q=o.a6.mat4.mul([],k,S);if(this.projection.isReprojectedInTileSpace){const Ve=this.locationCoordinate(this.center),Xe=o.a6.mat4.identity([]);o.a6.mat4.translate(Xe,Xe,[Ve.x*this.worldSize,Ve.y*this.worldSize,0]),o.a6.mat4.multiply(Xe,Xe,o.bY(this)),o.a6.mat4.translate(Xe,Xe,[-Ve.x*this.worldSize,-Ve.y*this.worldSize,0]),o.a6.mat4.multiply(Q,Q,Xe),o.a6.mat4.multiply(N,N,Xe),this.inverseAdjustmentMatrix=o.bZ(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=o.a6.mat4.scale([],Q,[this.worldSize,this.worldSize,this.worldSize/w,1]),this.projMatrix=Q,this.invProjMatrix=o.a6.mat4.invert(new Float64Array(16),this.projMatrix),u){const Ve=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);Ve[8]=2*-a.x/this.width,Ve[9]=2*a.y/this.height,this.expandedFarZProjMatrix=o.a6.mat4.mul([],Ve,S)}else this.expandedFarZProjMatrix=this.projMatrix;const W=o.a6.mat4.invert([],k);this.frustumCorners=o.b_.fromInvProjectionMatrix(W,this.horizonLineFromTop(),this.height),this.cameraFrustum=o.bN.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!u);const X=new Float32Array(16);o.a6.mat4.identity(X),o.a6.mat4.scale(X,X,[1,-1,1]),o.a6.mat4.rotateX(X,X,this._pitch),o.a6.mat4.rotateZ(X,X,this.angle);const Y=o.a6.mat4.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=o.a6.mat4.clone(Y);const ae=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;Y[8]=2*-a.x/this.width,Y[9]=2*(a.y+ae)/this.height,this.skyboxMatrix=o.a6.mat4.multiply(X,Y,X);const le=this.point,ce=le.x,Ae=le.y,Be=this.width%2/2,Te=this.height%2/2,be=Math.cos(this.angle),Me=Math.sin(this.angle),Fe=ce-Math.round(ce)+be*Be+Me*Te,ze=Ae-Math.round(Ae)+be*Te+Me*Be,Le=new Float64Array(Q);if(o.a6.mat4.translate(Le,Le,[Fe>.5?Fe-1:Fe,ze>.5?ze-1:ze,0]),this.alignedProjMatrix=Le,Q=o.a6.mat4.create(),o.a6.mat4.scale(Q,Q,[this.width/2,-this.height/2,1]),o.a6.mat4.translate(Q,Q,[1,-1,0]),this.labelPlaneMatrix=Q,Q=o.a6.mat4.create(),o.a6.mat4.scale(Q,Q,[1,-1,1]),o.a6.mat4.translate(Q,Q,[-1,-1,0]),o.a6.mat4.scale(Q,Q,[2/this.width,2/this.height,1]),this.glCoordMatrix=Q,this.pixelMatrix=o.a6.mat4.multiply(new Float64Array(16),this.labelPlaneMatrix,N),this._calcFogMatrices(),this._distanceTileDataCache={},Q=o.a6.mat4.invert(new Float64Array(16),this.pixelMatrix),!Q)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=Q,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=o.b$(this);const Ve=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=o.a6.vec3.transformMat4(Ve,Ve,S),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=Q;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const a=this.cameraWorldSizeForFog,u=this.cameraPixelsPerMeter,g=this._camera.position,x=1/this.height/this._pixelsPerMercatorPixel,w=[a,a,u];o.a6.vec3.scale(w,w,x),o.a6.vec3.scale(g,g,-1),o.a6.vec3.multiply(g,g,w);const S=o.a6.mat4.create();o.a6.mat4.translate(S,S,g),o.a6.mat4.scale(S,S,w),this.mercatorFogMatrix=S,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(a,u,x)}_computeCameraPosition(a){const u=(a=a||this.pixelsPerMeter)/this.pixelsPerMeter,g=this._camera.forward(),x=this.point,w=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*u-a/this.worldSize*this._centerAltitude;return[x.x/this.worldSize-g[0]*w,x.y/this.worldSize-g[1]*w,a/this.worldSize*this._centerAltitude-g[2]*w]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(a){const u=this._maxCameraBoundsDistance()*Math.cos(this._pitch),g=this._camera.position[2],x=a[2];let w=1;this.projection.wrap&&(this.center=this.center.wrap()),x>0&&(w=Math.min((u-g)/x,1)),this._camera.position=o.a6.vec3.scaleAndAdd([],this._camera.position,a,w),this._updateStateFromCamera()}_updateStateFromCamera(){const a=this._camera.position,u=this._camera.forward(),{pitch:g,bearing:x}=this._camera.getPitchBearing(),w=o.bD(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,S=this._mercatorZfromZoom(this._maxZoom)*Math.cos(o.bB(this._maxPitch)),k=Math.max((a[2]-w)/Math.cos(g),S),O=this._zoomFromMercatorZ(k);o.a6.vec3.scaleAndAdd(a,a,u,k),this._pitch=o.ap(g,o.bB(this.minPitch),o.bB(this.maxPitch)),this.angle=o.bA(x,-Math.PI,Math.PI),this._setZoom(o.ap(O,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new o.a5(a[0],a[1],a[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(a){return Math.pow(2,a)*this.tileSize}_mercatorZfromZoom(a){return this.cameraToCenterDistance/this._worldSizeFromZoom(a)}_minimumHeightOverTerrain(){const a=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(a)}_zoomFromMercatorZ(a){return this.scaleZoom(this.cameraToCenterDistance/(a*this.tileSize))}zoomFromMercatorZAdjusted(a){let u=0,g=o.bU,x=0,w=1/0;for(;g-u>1e-6&&g>u;){const S=u+.5*(g-u),k=this.tileSize*Math.pow(2,S),O=this.getCameraToCenterDistance(this.projection,S,k),N=this.scaleZoom(O/(a*this.tileSize)),Q=Math.abs(S-N);Q<w&&(w=Q,x=S),S<N?u=S:g=S}return x}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(o.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(a,u){const g=Math.min(a.x,u.x),x=Math.max(a.x,u.x),w=Math.min(a.y,u.y),S=Math.max(a.y,u.y);if(w<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const k=[new o.P(g,w),new o.P(x,S),new o.P(g,S),new o.P(x,w)],O=this.renderWorldCopies?-3:0,N=this.renderWorldCopies?4:1;for(const Q of k){const W=this.pointRayIntersection(Q);if(W.t<0)return!0;const X=this.rayIntersectionCoordinate(W);if(X.x<O||X.y<0||X.x>N||X.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+o.c0(this.fovAboveCenter)>88||this.anyCornerOffEdge(new o.P(0,0),new o.P(this.width,this.height))}zoomDeltaToMovement(a,u){const g=o.a6.vec3.length(o.a6.vec3.sub([],this._camera.position,a)),x=this._zoomFromMercatorZ(g)+u;return g-this._mercatorZfromZoom(x)}getCameraPoint(){if(this.projection.name==="globe"){const a=function([u,g,x],w){const S=[u,g,x,1];o.a6.vec4.transformMat4(S,S,w);const k=S[3]=Math.max(S[3],1e-6);return S[0]/=k,S[1]/=k,S[2]/=k,S}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new o.P(a[0],a[1])}{const a=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(0,a))}}getCameraToCenterDistance(a,u=this.zoom,g=this.worldSize){const x=o.bX(a,u,this.width,this.height,1024),w=a.pixelSpaceConversion(this.center.lat,g,x);let S=.5/Math.tan(.5*this._fov)*this.height*w;return this.isOrthographic&&(S=gd(1,S,yd(this.pitch>=15?1:this.pitch/15))),S}getWorldToCameraMatrix(){const a=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&o.a6.mat4.multiply(a,a,this.globeMatrix),a}getFrustum(a){return o.bN.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,a,this.projection.zAxisUnit==="meters")}}const Pu=(m,a)=>{if(a>0&&m.terrain&&o.w("Cutoff is currently disabled on terrain"),a<=0||m.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const u=m.transform,g=Math.max(Math.abs(u._zoom-(m.minCutoffZoom-1)),1),x=u.isLODDisabled(!1)?o.a7(60,45,u.pitch):o.a7(30,15,u.pitch),w=u._farZ-u._nearZ,S=a*u.height,k=((1-(O=x))*u.cameraToCenterDistance+O*(u._farZ+S))*g;var O;return{shouldRenderCutoff:x<1,uniformValues:{u_cutoff_params:[u._nearZ,u._farZ,(k-u._nearZ)/w,(k-S-u._nearZ)/w]}}},Vi={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class pv{constructor(a,u){this.aabb=a,this.lastCascade=u}}class Gt{add(a,u){const g=this.receivers[a.key];g!==void 0?(g.aabb.min[0]=Math.min(g.aabb.min[0],u.min[0]),g.aabb.min[1]=Math.min(g.aabb.min[1],u.min[1]),g.aabb.min[2]=Math.min(g.aabb.min[2],u.min[2]),g.aabb.max[0]=Math.max(g.aabb.max[0],u.max[0]),g.aabb.max[1]=Math.max(g.aabb.max[1],u.max[1]),g.aabb.max[2]=Math.max(g.aabb.max[2],u.max[2])):this.receivers[a.key]=new pv(u,null)}clear(){this.receivers={}}get(a){return this.receivers[a.key]}computeRequiredCascades(a,u,g){const x=o.c9.fromPoints(a.points);let w=0;for(const S in this.receivers){const k=this.receivers[S];if(!k||!x.intersectsAabb(k.aabb))continue;k.aabb.min=x.closestPoint(k.aabb.min),k.aabb.max=x.closestPoint(k.aabb.max);const O=k.aabb.getCorners();for(let N=0;N<g.length;N++){let Q=!0;for(const W of O){const X=[W[0]*u,W[1]*u,W[2]];if(o.a6.vec3.transformMat4(X,X,g[N].matrix),X[0]<-1||X[0]>1||X[1]<-1||X[1]>1){Q=!1;break}}if(k.lastCascade=N,w=Math.max(w,N),Q)break}}return w+1}}class yw{constructor(a){this.painter=a,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new Gt,this._depthMode=new Se(a.context.gl.LEQUAL,Se.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,a.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),a.tp.registerParameter(Vi,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),a.tp.registerParameter(Vi,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),a.tp.registerParameter(Vi,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),a.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const a of this._cascades)a.texture.destroy(),a.framebuffer.destroy();this._cascades=[]}updateShadowParameters(a,u){const g=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!u||!u.properties)return;const x=u.properties.get("shadow-intensity");if(!u.shadowsEnabled()||x<=0||(this._shadowLayerCount=g.style.order.reduce((ae,le)=>{const ce=g.style._mergedLayers[le];return ae+(ce.hasShadowPass()&&!ce.isHidden(a.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const w=g.context,S=Vi.shadowMapResolution,k=Vi.shadowMapResolution;if(this._cascades.length===0||Vi.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let ae=0;ae<Vi.cascadeCount;++ae){const le=g._shadowMapDebug,ce=w.gl,Ae=w.createFramebuffer(S,k,le,"texture"),Be=new o.T(w,{width:S,height:k,data:null},ce.DEPTH_COMPONENT16);if(Ae.depthAttachment.set(Be.texture),le){const Te=new o.T(w,{width:S,height:k,data:null},ce.RGBA8);Ae.colorAttachment.set(Te.texture)}this._cascades.push({framebuffer:Ae,texture:Be,matrix:[],far:0,boundingSphereRadius:0,frustum:new o.bN,scale:0})}}this.shadowDirection=hg(u);let O=0;if(a.elevation){const ae=a.elevation,le=[1e4,-1e4];ae.visibleDemTiles.filter(ce=>ce.dem).forEach(ce=>{const Ae=ce.dem.tree;le[0]=Math.min(le[0],Ae.minimums[0]),le[1]=Math.max(le[1],Ae.maximums[0])}),le[0]!==1e4&&(O=(le[1]-le[0])*ae.exaggeration())}const N=1.5*a.cameraToCenterDistance,Q=3*N,W=new Float64Array(16);for(let ae=0;ae<this._cascades.length;++ae){const le=this._cascades[ae];let ce=a.height/50,Ae=1;Vi.cascadeCount===1?Ae=Q:ae===0?Ae=N:(ce=N,Ae=Q);const[Be,Te]=dg(a,this.shadowDirection,ce,Ae,Vi.shadowMapResolution,O);le.scale=a.scale,le.matrix=Be,le.boundingSphereRadius=Te,o.a6.mat4.invert(W,le.matrix),le.frustum=o.bN.fromInvProjectionMatrix(W,1,0,!0),le.far=Ae}const X=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[X].far,this._cascades[X].far],this._uniformValues.u_shadow_intensity=x,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/Vi.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=Vi.shadowMapResolution,this._uniformValues.u_shadowmap_0=Bo.ShadowMap0,this._uniformValues.u_shadowmap_1=Bo.ShadowMap0+1,this._groundShadowTiles=g.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const Y=g.transform.elevation;for(const ae of this._groundShadowTiles){let le={min:0,max:0};if(Y){const ce=Y.getMinMaxForTile(ae);ce&&(le=ce)}this.addShadowReceiver(ae.toUnwrapped(),le.min,le.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(a){this._enabled=a}drawShadowPass(a,u){if(!this.enabled)return;const g=this.painter,x=g.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(g.transform.getFrustum(0),g.transform.worldSize,this._cascades),x.viewport.set([0,0,Vi.shadowMapResolution,Vi.shadowMapResolution]);for(let w=0;w<this._numCascadesToRender;++w){g.currentShadowCascade=w,x.bindFramebuffer.set(this._cascades[w].framebuffer.framebuffer),x.clear({color:o.bz.white,depth:1});for(const S of a.order){const k=a._mergedLayers[S];if(!k.hasShadowPass()||k.isHidden(g.transform.zoom))continue;const O=a.getLayerSourceCache(k),N=O?u[O.id]:void 0;(k.type==="model"||N&&N.length)&&g.renderLayer(g,O,k,N)}}g.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const a=this.painter,u=a.style,g=a.context,x=u.directionalLight,w=u.ambientLight;if(!x||!w)return;const S=[],k=Pu(a,a.longestCutoffRange);k.shouldRenderCutoff&&S.push("RENDER_CUTOFF");const O=Ag(u,x,w),N=new Se(g.gl.LEQUAL,Se.ReadOnly,a.depthRangeFor3D);for(const Q of this._groundShadowTiles){const W=Q.toUnwrapped(),X=a.isTileAffectedByFog(Q),Y=a.getOrCreateProgram("groundShadow",{defines:S,overrideFog:X});this.setupShadows(W,Y),a.uploadCommonUniforms(g,Y,W,null,k);const ae={u_matrix:a.transform.calculateProjMatrix(W),u_ground_shadow_factor:O};Y.draw(a,g.gl.TRIANGLES,N,At.disabled,ue.multiply,pr.disabled,ae,"ground_shadow",a.tileExtentBuffer,a.quadTriangleIndexBuffer,a.tileExtentSegments,{},a.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?ue.unblended:ue.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(a){const u=this.painter.transform,g=u.calculatePosMatrix(a,u.worldSize);return o.a6.mat4.multiply(g,this._cascades[this.painter.currentShadowCascade].matrix,g),Float32Array.from(g)}calculateShadowPassMatrixFromMatrix(a){return o.a6.mat4.multiply(a,this._cascades[this.painter.currentShadowCascade].matrix,a),Float32Array.from(a)}setupShadows(a,u,g,x=0){if(!this.enabled)return;const w=this.painter.transform,S=this.painter.context,k=S.gl,O=this._uniformValues,N=new Float64Array(16),Q=w.calculatePosMatrix(a,w.worldSize);for(let W=0;W<this._cascades.length;W++)o.a6.mat4.multiply(N,this._cascades[W].matrix,Q),O[W===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(N),S.activeTexture.set(k.TEXTURE0+Bo.ShadowMap0+W),this._cascades[W].texture.bind(k.NEAREST,k.CLAMP_TO_EDGE);if(this.useNormalOffset=!!g,this.useNormalOffset){const W=o.c8(a.canonical),X=2/w.tileSize*o.ab/Vi.shadowMapResolution,Y=X*this._cascades[0].boundingSphereRadius,ae=X*this._cascades[this._cascades.length-1].boundingSphereRadius,le=(g==="vector-tile"?1:3)/Math.pow(2,x-a.canonical.z-(1-w.zoom+Math.floor(w.zoom)));O.u_shadow_normal_offset=[W,Y*le,ae*le],O.u_shadow_bias=[6e-5,.0012,.012]}else O.u_shadow_bias=[36e-5,.0012,.012];u.setShadowUniformValues(S,O)}setupShadowsFromMatrix(a,u,g=!1){if(!this.enabled)return;const x=this.painter.context,w=x.gl,S=this._uniformValues,k=new Float64Array(16);for(let O=0;O<Vi.cascadeCount;O++)o.a6.mat4.multiply(k,this._cascades[O].matrix,a),S[O===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(k),x.activeTexture.set(w.TEXTURE0+Bo.ShadowMap0+O),this._cascades[O].texture.bind(w.NEAREST,w.CLAMP_TO_EDGE);if(this.useNormalOffset=g,g){const O=Vi.normalOffset;S.u_shadow_normal_offset=[1,O,O],S.u_shadow_bias=[6e-5,.0012,.012]}else S.u_shadow_bias=[36e-5,.0012,.012];u.setShadowUniformValues(x,S)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(a,u,g,x){if(x[2]>=0)return{};const w=function(O,N,Q){const W=Q/(1<<O.canonical.z);return new o.c9([O.canonical.x*W+O.wrap*Q,O.canonical.y*W+O.wrap*Q,0],[(O.canonical.x+1)*W+O.wrap*Q,(O.canonical.y+1)*W+O.wrap*Q,N])}(a,u,g).getCorners(),S=u/-x[2];x[0]<0?(o.a6.vec3.add(w[0],w[0],[x[0]*S,0,0]),o.a6.vec3.add(w[3],w[3],[x[0]*S,0,0])):x[0]>0&&(o.a6.vec3.add(w[1],w[1],[x[0]*S,0,0]),o.a6.vec3.add(w[2],w[2],[x[0]*S,0,0])),x[1]<0?(o.a6.vec3.add(w[0],w[0],[0,x[1]*S,0]),o.a6.vec3.add(w[1],w[1],[0,x[1]*S,0])):x[1]>0&&(o.a6.vec3.add(w[2],w[2],[0,x[1]*S,0]),o.a6.vec3.add(w[3],w[3],[0,x[1]*S,0]));const k={};return k.vertices=w,k.planes=[vd(w[1],w[0],w[4]),vd(w[2],w[1],w[5]),vd(w[3],w[2],w[6]),vd(w[0],w[3],w[7])],k}addShadowReceiver(a,u,g){this._receivers.add(a,o.c9.fromTileIdAndHeight(a,u,g))}getMaxCascadeForTile(a){const u=this._receivers.get(a);return u&&u.lastCascade?u.lastCascade:0}}function vd(m,a,u){const g=o.a6.vec3.sub([],u,a),x=o.a6.vec3.sub([],m,a),w=o.a6.vec3.cross([],g,x),S=o.a6.vec3.length(w);return S===0?[0,0,1,0]:(o.a6.vec3.scale(w,w,1/S),[w[0],w[1],w[2],-o.a6.vec3.dot(w,a)])}function hg(m){const a=m.properties.get("direction"),u=o.c7(a.x,a.y,a.z);u[2]=o.ap(u[2],0,75);const g=o.ca([u[0],u[1],u[2]]);return o.a6.vec3.fromValues(g.x,g.y,g.z)}function Ag(m,a,u){const g=a.properties.get("color"),x=a.properties.get("intensity"),w=a.properties.get("direction"),S=[w.x,w.y,w.z],k=u.properties.get("color"),O=u.properties.get("intensity"),N=Math.max(o.a6.vec3.dot([0,0,1],S),0),Q=[0,0,0];o.a6.vec3.scale(Q,k.toRenderColor(m.getLut(a.scope)).toArray01Linear().slice(0,3),O);const W=[0,0,0];return o.a6.vec3.scale(W,g.toRenderColor(m.getLut(u.scope)).toArray01Linear().slice(0,3),N*x),o.cb([Q[0]>0?Q[0]/(Q[0]+W[0]):0,Q[1]>0?Q[1]/(Q[1]+W[1]):0,Q[2]>0?Q[2]/(Q[2]+W[2]):0])}function dg(m,a,u,g,x,w){const S=m.zoom,k=m.scale,O=m.worldSize,N=1/O,Q=m.aspect,W=Math.sqrt(1+Q*Q)*Math.tan(.5*m.fovX),X=W*W,Y=g-u,ae=g+u;let le,ce;X>Y/ae?(le=g,ce=g*W):(le=.5*ae*(1+X),ce=.5*Math.sqrt(Y*Y+2*(g*g+u*u)*X+ae*ae*X*X));const Ae=m.projection.pixelsPerMeter(m.center.lat,O),Be=m._camera.getCameraToWorldMercator(),Te=[0,0,-le*N];o.a6.vec3.transformMat4(Te,Te,Be);let be=ce*N;const Me=m._edgeInsets;if(!(Me.left===0&&Me.top===0&&Me.right===0&&Me.bottom===0||Me.left===Me.right&&Me.top===Me.bottom)){const Dt=m._camera.getWorldToCamera(m.worldSize,m.projection.zAxisUnit==="meters"?Ae:1),Ut=m._camera.getCameraToClipPerspective(m._fov,m.width/m.height,u,g);Ut[8]=2*-m.centerOffset.x/m.width,Ut[9]=2*m.centerOffset.y/m.height;const St=new Float64Array(16);o.a6.mat4.mul(St,Ut,Dt);const Ft=new Float64Array(16);o.a6.mat4.invert(Ft,St);const gr=o.bN.fromInvProjectionMatrix(Ft,O,S,!0);for(const Nt of gr.points){const Jt=((Fe=Nt)[0]/=k,Fe[1]/=k,Fe[2]=o.bD(Fe[2],m._center.lat),Fe);be=Math.max(be,o.a6.vec3.len(o.a6.vec3.subtract([],Te,Jt)))}}var Fe;be*=x/(x-1);const ze=Math.acos(a[2]),Le=Math.atan2(-a[0],-a[1]),Ve=new ss;Ve.position=Te,Ve.setPitchBearing(ze,Le);const Xe=Ve.getWorldToCamera(O,Ae),je=be*O,He=Math.min(m._mercatorZfromZoom(17)*O*-2,-2*je),nt=Ve.getCameraToClipOrthographic(-je,je,-je,je,He,(je+w*Ae)/a[2]),mt=new Float64Array(16);o.a6.mat4.multiply(mt,nt,Xe);const Et=o.a6.vec3.fromValues(Math.floor(1e6*Te[0])/1e6*O,Math.floor(1e6*Te[1])/1e6*O,0),pt=.5*x,kt=[0,0,0];o.a6.vec3.transformMat4(kt,Et,mt),o.a6.vec3.scale(kt,kt,pt);const it=[Math.floor(kt[0]),Math.floor(kt[1]),Math.floor(kt[2])],wt=[0,0,0];o.a6.vec3.sub(wt,kt,it),o.a6.vec3.scale(wt,wt,-1/pt);const bt=new Float64Array(16);return o.a6.mat4.identity(bt),o.a6.mat4.translate(bt,bt,wt),o.a6.mat4.multiply(mt,bt,mt),[mt,je]}class Mu extends o.E{constructor(a){super(),this.requestManager=a,this.models={"":{}},this.numModelsLoading={}}loadModel(a,u){return o.aG(this.requestManager.transformRequest(u,o.R.Model).url).then(g=>{if(!g)return;const x=o.aH(g),w=new o.aI(a,void 0,void 0,x);return w.computeBoundsAndApplyParent(),w}).catch(g=>{if(g&&g.status===404)return null;this.fire(new o.t(new Error(`Could not load model ${a} from ${u}: ${g.message}`)))})}load(a,u){this.models[u]||(this.models[u]={});const g=Object.keys(a);this.numModelsLoading[u]=(this.numModelsLoading[u]||0)+g.length;const x=[];for(const w of g)x.push(this.loadModel(w,a[w]));Promise.allSettled(x).then(w=>{for(let S=0;S<w.length;S++){const{status:k,value:O}=w[S];k==="fulfilled"&&O&&(this.models[u][g[S]]={model:O,numReferences:1})}this.numModelsLoading[u]-=g.length,this.fire(new o.x("data",{dataType:"style"}))}).catch(w=>{this.fire(new o.t(new Error(`Could not load models: ${w.message}`)))})}isLoaded(){for(const a in this.numModelsLoading)if(this.numModelsLoading[a]>0)return!1;return!0}hasModel(a,u){return!!this.getModel(a,u)}getModel(a,u){return this.models[u]||(this.models[u]={}),this.models[u][a]?this.models[u][a].model:void 0}addModel(a,u,g){this.models[g]||(this.models[g]={}),this.hasModel(a,g)&&this.models[g][a].numReferences++,this.load({[a]:this.requestManager.normalizeModelURL(u)},g)}addModels(a,u){this.models[u]||(this.models[u]={});const g={};for(const x in a)this.models[u][x]={},g[x]=this.requestManager.normalizeModelURL(a[x]);this.load(g,u)}addModelsFromBucket(a,u){this.models[u]||(this.models[u]={});const g={};for(const x of a)this.hasModel(x,u)?this.models[u][x].numReferences++:g[x]=this.requestManager.normalizeModelURL(x);this.load(g,u)}removeModel(a,u){if(this.models[u]&&this.models[u][a]&&(this.models[u][a].numReferences--,this.models[u][a].numReferences===0)){const g=this.models[u][a].model;delete this.models[u][a],g.destroy()}}listModels(a){return this.models[a]||(this.models[a]={}),Object.keys(this.models[a])}upload(a,u){this.models[u]||(this.models[u]={});for(const g in this.models[u])this.models[u][g].model&&this.models[u][g].model.upload(a.context)}}const mv=new o.a0({data:new o.a1(o._.colorTheme.data)}),il=(m,a)=>Je(m,a&&a.filter(u=>u.identifier!=="source.canvas")),fg=o.ar(Kr,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection","setCamera","addImport","removeImport","updateImport"]),_d=o.ar(Kr,["setCenter","setZoom","setBearing","setPitch"]),vw={version:8,layers:[],sources:{}},_w={duration:300,delay:0};class ol extends o.E{constructor(a,u={}){super(),this.map=a,this.scope=u.scope||"",this.globalId=null,this.fragments=[],this.importDepth=u.importDepth||0,this.importsCache=u.importsCache||new Map,this.resolvedImports=u.resolvedImports||new Set,this.transition=o.l({},_w),this._buildingIndex=new fA(this),this.crossTileSymbolIndex=new U,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=u.styleChanges||new ms,this.dispatcher=u.dispatcher?u.dispatcher:new o.cd(o.ce(),this),u.imageManager?this.imageManager=u.imageManager:(this.imageManager=new Bs,this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=u.glyphManager?u.glyphManager:new o.cf(a._requestManager,u.localFontFamily?o.cg.all:u.localIdeographFontFamily?o.cg.ideographs:o.cg.none,u.localFontFamily||u.localIdeographFontFamily),u.modelManager?this.modelManager=u.modelManager:(this.modelManager=new Mu(a._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null},this._styleColorThemeForScope={},this.options=u.configOptions?u.configOptions:new Map,this._configDependentLayers=u.configDependentLayers?u.configDependentLayers:new Set,this._config=u.config,this._initialConfig=u.initialConfig,this.dispatcher.broadcast("setReferrer",o.ch());const g=this;this._rtlTextPluginCallback=ol.registerForPluginStateChange(x=>{g.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:x.pluginStatus,pluginURL:x.pluginURL},(w,S)=>{if(o.ci(w),S&&S.every(k=>k))for(const k in g._sourceCaches){const O=g._sourceCaches[k],N=O.getSource().type;N!=="vector"&&N!=="geojson"||O.reload()}})}),this.on("data",x=>{if(x.dataType!=="source"||x.sourceDataType!=="metadata")return;const w=this.getOwnSource(x.sourceId);if(w&&w.vectorLayerIds)for(const S in this._layers){const k=this._layers[S];k.source===w.id&&this._validateLayer(k)}})}load(a){return a?(typeof a=="string"?this.loadURL(a):this.loadJSON(a),this):this}_getGlobalId(a){if(!a)return null;if(typeof a=="string"){if(o.f(a))return a;const u=o.cj(a);if(!u.startsWith("http"))try{return new URL(u,location.href).toString()}catch{return u}return u}return`json://${o.ck(JSON.stringify(a))}`}_diffStyle(a,u,g){this.globalId=this._getGlobalId(a);const x=(w,S)=>{try{S(null,this.setState(w,g))}catch(k){S(k,!1)}};if(typeof a=="string"){const w=this.map._requestManager.normalizeStyleURL(a),S=this.map._requestManager.transformRequest(w,o.R.Style);o.n(S,(k,O)=>{k?this.fire(new o.t(k)):O&&x(O,u)})}else typeof a=="object"&&x(a,u)}loadURL(a,u={}){this.fire(new o.x("dataloading",{dataType:"style"}));const g=typeof u.validate=="boolean"?u.validate:!o.f(a);this.globalId=this._getGlobalId(a),a=this.map._requestManager.normalizeStyleURL(a,u.accessToken),this.resolvedImports.add(a);const x=this.importsCache.get(a);if(x)return this._load(x,g);const w=this.map._requestManager.transformRequest(a,o.R.Style);this._request=o.n(w,(S,k)=>{if(this._request=null,S)this.fire(new o.t(S));else if(k)return this.importsCache.set(a,k),this._load(k,g)})}loadJSON(a,u={}){this.fire(new o.x("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(a),this._request=o.q.frame(()=>{this._request=null,this._load(a,u.validate!==!1)})}loadEmpty(){this.fire(new o.x("dataloading",{dataType:"style"})),this._load(vw,!1)}_loadImports(a,u,g){if(this.importDepth>=4)return o.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const x=[];for(const w of a){const S=this._createFragmentStyle(w),k=new Promise(Q=>{S.once("style.import.load",Q),S.once("error",Q)}).then(()=>this.mergeAll());if(x.push(k),this.resolvedImports.has(w.url)){S.loadEmpty();continue}const O=w.data||this.importsCache.get(w.url);O?(S.loadJSON(O,{validate:u}),this._isInternalStyle(O)&&(S.globalId=null)):w.url?S.loadURL(w.url,{validate:u}):S.loadEmpty();const N={style:S,id:w.id,config:w.config};if(g){const Q=this.fragments.findIndex(({id:W})=>W===g);this.fragments=this.fragments.slice(0,Q).concat(N).concat(this.fragments.slice(Q))}else this.fragments.push(N)}return Promise.allSettled(x)}getImportGlobalIds(a=this,u=new Set){for(const g of a.fragments)g.style.globalId&&u.add(g.style.globalId),this.getImportGlobalIds(g.style,u);return[...u.values()]}_createFragmentStyle(a){const u=this.scope?o.av(a.id,this.scope):a.id;let g;const x=this._initialConfig&&this._initialConfig[u];(a.config||x)&&(g=o.l({},a.config,x));const w=new ol(this.map,{scope:u,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:g,configOptions:this.options,configDependentLayers:this._configDependentLayers});return w.setEventedParent(this.map,{style:w}),w}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(a){return this.isRootStyle()&&(a.fragment||!!a.schema&&a.fragment!==!1)}_load(a,u){const g=a.schema;if(this._isInternalStyle(a)){const S=o.l({},vw,{imports:[{id:"basemap",data:a,url:""}]});return void this._load(S,u)}if(this.updateConfig(this._config,g),u&&il(this,rs(a)))return;this._loaded=!0,this.stylesheet=o.cl(a);const x=()=>{for(const N in a.sources)this.addSource(N,a.sources[N],{validate:!1,isInitialLoad:!0});a.sprite?this._loadSprite(a.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.glyphManager.setURL(a.glyphs,this.scope);const S=pA(this.stylesheet.layers);if(this._order=S.map(N=>N.id),this.stylesheet.light&&o.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const N=this.stylesheet.lights[0];this.light=new tt(N.properties,N.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new tt(this.stylesheet.light)),this._layers={},this._serializedLayers={};for(const N of S){const Q=o.cq(N,this.scope,this._styleColorTheme.lut,this.options);Q.configDependencies.size!==0&&this._configDependentLayers.add(Q.fqid),Q.setEventedParent(this,{layer:{id:Q.id}}),this._layers[Q.id]=Q,this._serializedLayers[Q.id]=Q.serialize();const W=this.getOwnLayerSourceCache(Q),X=!!this.directionalLight&&this.directionalLight.shadowsEnabled();W&&Q.canCastShadows()&&X&&(W.castsShadows=!0)}this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const k=this.stylesheet.terrain;k&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(k,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new o.x("data",{dataType:"style"}));const O=this.isRootStyle();a.imports?this._loadImports(a.imports,u).then(()=>{this._reloadImports(),this.fire(new o.x(O?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new o.x(O?"style.load":"style.import.load")))},w=this.stylesheet["color-theme"];if(this._styleColorTheme.colorTheme=w,w){const S=this._evaluateColorThemeData(w);this._loadColorTheme(S).then(()=>{x()}).catch(k=>{o.w(`Couldn't load color theme from the stylesheet: ${k}`),x()})}else this._styleColorTheme.lut=null,x()}isRootStyle(){return this.importDepth===0}mergeAll(){let a,u,g,x,w,S,k,O;const N={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(Q=>{if(Q.stylesheet){if(Q.light!=null&&(a=Q.light),Q.stylesheet.lights)for(const W of Q.stylesheet.lights)W.type==="ambient"&&Q.ambientLight!=null&&(u=Q.ambientLight),W.type==="directional"&&Q.directionalLight!=null&&(g=Q.directionalLight);x=this._prioritizeTerrain(x,Q.terrain,Q.stylesheet.terrain),Q.stylesheet.fog&&Q.fog!=null&&(w=Q.fog),Q.stylesheet.camera!=null&&(O=Q.stylesheet.camera),Q.stylesheet.projection!=null&&(S=Q.stylesheet.projection),Q.stylesheet.transition!=null&&(k=Q.stylesheet.transition),N[Q.scope]=Q._styleColorTheme}}),this.light=a,this.ambientLight=u,this.directionalLight=g,this.fog=w,this._styleColorThemeForScope=N,x===null?delete this.terrain:this.terrain=x,this.camera=O||{"camera-projection":"perspective"},this.projection=S||{name:"mercator"},this.transition=o.l({},_w,k),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(a){const u=g=>{for(const x of g.fragments)u(x.style);a(g)};u(this)}_prioritizeTerrain(a,u,g){const x=a&&a.drapeRenderMode===0;return g===null?u&&u.drapeRenderMode===0?u:x?a:null:u!=null&&(!a||x||u&&u.drapeRenderMode===1)?u:a}mergeTerrain(){let a;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(u=>{a=this._prioritizeTerrain(a,u.terrain,u.stylesheet.terrain)}),a===null?delete this.terrain:this.terrain=a}mergeProjection(){let a;this.forEachFragmentStyle(u=>{u.stylesheet.projection!=null&&(a=u.stylesheet.projection)}),this.projection=a||{name:"mercator"}}mergeSources(){const a={},u={},g={};this.forEachFragmentStyle(x=>{for(const w in x._sourceCaches){const S=o.av(w,x.scope);a[S]=x._sourceCaches[w]}for(const w in x._otherSourceCaches){const S=o.av(w,x.scope);u[S]=x._otherSourceCaches[w]}for(const w in x._symbolSourceCaches){const S=o.av(w,x.scope);g[S]=x._symbolSourceCaches[w]}}),this._mergedSourceCaches=a,this._mergedOtherSourceCaches=u,this._mergedSymbolSourceCaches=g}mergeLayers(){const a={},u=[],g={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(w=>{for(const S of w._order){const k=w._layers[S];if(k.type==="slot"){const O=o.cm(S);if(a[O])continue;a[O]=[]}k.slot&&a[k.slot]?a[k.slot].push(k):u.push(k)}}),this._mergedOrder=[];const x=(w=[])=>{for(const S of w)if(S.type==="slot"){const k=o.cm(S.id);a[k]&&x(a[k]),this._mergedSlots.push(k)}else{const k=o.av(S.id,S.scope);this._mergedOrder.push(k),g[k]=S,S.is3D()&&(this._has3DLayers=!0),S.type==="circle"&&(this._hasCircleLayers=!0),S.type==="symbol"&&(this._hasSymbolLayers=!0),S.type==="clip"&&(this._clipLayerPresent=!0)}};x(u),this._mergedOrder.sort((w,S)=>{const k=g[w],O=g[S];return k.hasInitialOcclusionOpacityProperties?O.is3D()?1:0:k.is3D()&&O.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=g,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(a){return this.stylesheet.camera=o.l({},this.stylesheet.camera,a),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(a){return a.data?function(u,g,x){const w=o.l({},g);for(const k of Object.keys(o._.colorTheme))w[k]===void 0&&(w[k]=o._.colorTheme[k].default);const S=new o.$(mv,u,new Map(x));return S.setTransitionOrValue(w,x),S.untransitioned().possiblyEvaluate(new o.a3(0))}(this.scope,a,this.options).get("data"):null}_loadColorTheme(a){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const u=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((g,x)=>{const w="data:image/png;base64,";if(!a||a.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void g();let S=a;S.startsWith(w)||(S=w+S);const k="mapbox-reserved-lut",O=new Image;O.src=S,O.onerror=()=>{this._styleColorTheme.lutLoading=!1,x(new Error("Failed to load image data"))},O.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==u)return void g();this._styleColorTheme.lutLoading=!1;const{width:N,height:Q,data:W}=o.q.getImageData(O);if(Q>32)return void x(new Error("The height of the image must be less than or equal to 32 pixels."));if(N!==Q*Q)return void x(new Error("The width of the image must be equal to the height squared."));this.getImage(k)&&this.removeImage(k),this.addImage(k,{data:new o.r({width:N,height:Q},W),pixelRatio:1,sdf:!1,version:0});const X=this.imageManager.getImage(k,this.scope);X?(this._styleColorTheme.lut={image:X.data,data:a},g()):x(new Error("Missing LUT image."))}})}getLut(a){const u=this._styleColorThemeForScope[a];return u?u.lut:null}setProjection(a){a?this.stylesheet.projection=a:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(a){this._spriteRequest=function(u,g,x){let w,S,k;const O=o.q.devicePixelRatio>1?"@2x":"";let N=o.n(g.transformRequest(g.normalizeSpriteURL(u,O,".json"),o.R.SpriteJSON),(X,Y)=>{N=null,k||(k=X,w=Y,W())}),Q=o.o(g.transformRequest(g.normalizeSpriteURL(u,O,".png"),o.R.SpriteImage),(X,Y)=>{Q=null,k||(k=X,S=Y,W())});function W(){if(k)x(k);else if(w&&S){const X=o.q.getImageData(S),Y={};for(const ae in w){const{width:le,height:ce,x:Ae,y:Be,sdf:Te,pixelRatio:be,stretchX:Me,stretchY:Fe,content:ze}=w[ae],Le=new o.r({width:le,height:ce});o.r.copy(X,Le,{x:Ae,y:Be},{x:0,y:0},{width:le,height:ce},null),Y[ae]={data:Le,pixelRatio:be,sdf:Te,stretchX:Me,stretchY:Fe,content:ze}}x(null,Y)}}return{cancel(){N&&(N.cancel(),N=null),Q&&(Q.cancel(),Q=null)}}}(a,this.map._requestManager,(u,g)=>{if(this._spriteRequest=null,u)this.fire(new o.t(u));else if(g)for(const x in g)this.imageManager.addImage(x,this.scope,g[x]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new o.x("data",{dataType:"style"}))})}_validateLayer(a){const u=this.getOwnSource(a.source);if(!u)return;const g=a.sourceLayer;g&&(u.type==="geojson"||u.vectorLayerIds&&u.vectorLayerIds.indexOf(g)===-1)&&this.fire(new o.t(new Error(`Source layer "${g}" does not exist on source "${u.id}" as specified by style layer "${a.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const a in this._sourceCaches)if(!this._sourceCaches[a].loaded())return!1;if(!this.imageManager.isLoaded()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:a}of this.fragments)if(!a.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((a,u)=>{const g=this.fragments[u];return g&&g.style&&(a.data=g.style.serialize()),a})}_serializeSources(){const a={};for(const u in this._sourceCaches){const g=this._sourceCaches[u].getSource();a[g.id]||(a[g.id]=g.serialize())}return a}_serializeLayers(a){const u=[];for(const g of a){const x=this._layers[g];x&&x.type!=="custom"&&u.push(x.serialize())}return u}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition())return!0;for(const a in this._sourceCaches)if(this._sourceCaches[a].hasTransition())return!0;for(const a in this._layers)if(this._layers[a].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}isLayerDraped(a){return!!this.terrain&&a.isDraped(this.getLayerSourceCache(a))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(a){const u=this.getOwnLayer(a);if(u)return u;this.fire(new o.t(new Error(`The layer '${a}' does not exist in the map's style.`)))}_checkSource(a){const u=this.getOwnSource(a);if(u)return u;this.fire(new o.t(new Error(`The source '${a}' does not exist in the map's style.`)))}precompilePrograms(a,u){const g=this.map.painter;if(g)for(let x=a.minzoom||0;x<(a.maxzoom||25.5);x++){const w=a.getProgramIds();if(w)for(const S of w){const k=a.getDefaultProgramParams(S,u.zoom,this._styleColorTheme.lut);k&&(g.style=this,this.fog&&(g._fogVisible=!0,k.overrideFog=!0,g.getOrCreateProgram(S,k)),g._fogVisible=!1,k.overrideFog=!1,g.getOrCreateProgram(S,k),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(k.overrideRtt=!0,g.getOrCreateProgram(S,k)))}}}update(a){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(a),this.directionalLight&&this.directionalLight.recalculate(a);const u=this.calculateLightsBrightness();a.brightness=u||0,u!==this._brightness&&(this._brightness=u,this.dispatcher.broadcast("setBrightness",u));const g=this._changes.isDirty();let x=!1;if(this._changes.isDirty()){const S=this._changes.getLayerUpdatesByScope();for(const k in S){const{updatedIds:O,removedIds:N}=S[k];(O||N)&&(this._updateWorkerLayers(k,O,N),x=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(a),this.light&&this.light.updateTransitions(a),this.ambientLight&&this.ambientLight.updateTransitions(a),this.directionalLight&&this.directionalLight.updateTransitions(a),this.fog&&this.fog.updateTransitions(a),this._changes.reset()}const w={};for(const S in this._mergedSourceCaches){const k=this._mergedSourceCaches[S];w[S]=k.used,k.used=!1,k.tileCoverLift=0}for(const S of this._mergedOrder){const k=this._mergedLayers[S];if(k.recalculate(a,this._availableImages),!k.isHidden(a.zoom)){const O=this.getLayerSourceCache(k);O&&(O.used=!0,O.tileCoverLift=Math.max(O.tileCoverLift,k.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(k,a)}):this.precompilePrograms(k,a))}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&x&&this.mergeLayers();for(const S in w){const k=this._mergedSourceCaches[S];w[S]!==k.used&&k.getSource().fire(new o.x("data",{sourceDataType:"visibility",dataType:"source",sourceId:k.getSource().id}))}this.light&&this.light.recalculate(a),this.terrain&&this.terrain.recalculate(a),this.fog&&this.fog.recalculate(a),this.z=a.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),g&&this.fire(new o.x("data",{dataType:"style"}))}_updateTilesForChangedImages(){const a=this._changes.getUpdatedImages();if(a.length){for(const u in this._sourceCaches)this._sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],a);this._changes.resetUpdatedImages()}}_updateWorkerLayers(a,u,g){const x=this.getFragmentStyle(a);x&&this.dispatcher.broadcast("updateLayers",{layers:u?x._serializeLayers(u):[],scope:a,removedIds:g||[],options:x.options})}setState(a,u){if(this._checkLoaded(),il(this,rs(a)))return!1;(a=o.cl(a)).layers=pA(a.layers);const g=function(S,k){if(!S)return[{command:Kr.setStyle,args:[k]}];let O=[];try{if(!o.bh(S.version,k.version))return[{command:Kr.setStyle,args:[k]}];if(o.bh(S.center,k.center)||O.push({command:Kr.setCenter,args:[k.center]}),o.bh(S.zoom,k.zoom)||O.push({command:Kr.setZoom,args:[k.zoom]}),o.bh(S.bearing,k.bearing)||O.push({command:Kr.setBearing,args:[k.bearing]}),o.bh(S.pitch,k.pitch)||O.push({command:Kr.setPitch,args:[k.pitch]}),o.bh(S.sprite,k.sprite)||O.push({command:Kr.setSprite,args:[k.sprite]}),o.bh(S.glyphs,k.glyphs)||O.push({command:Kr.setGlyphs,args:[k.glyphs]}),o.bh(S.imports,k.imports)||function(Y=[],ae=[],le){ae=ae||[];const ce=(Y=Y||[]).map(rl),Ae=ae.map(rl),Be=Y.reduce(Jl,{}),Te=ae.reduce(Jl,{}),be=ce.slice();let Me,Fe,ze,Le;for(Me=0,Fe=0;Me<ce.length;Me++)ze=ce[Me],Te.hasOwnProperty(ze)?Fe++:(le.push({command:Kr.removeImport,args:[ze]}),be.splice(be.indexOf(ze,Fe),1));for(Me=0,Fe=0;Me<Ae.length;Me++)ze=Ae[Ae.length-1-Me],be[be.length-1-Me]!==ze&&(Be.hasOwnProperty(ze)?(le.push({command:Kr.removeImport,args:[ze]}),be.splice(be.lastIndexOf(ze,be.length-Fe),1)):Fe++,Le=be[be.length-Me],le.push({command:Kr.addImport,args:[Te[ze],Le]}),be.splice(be.length-Me,0,ze));for(const Ve of ae){const Xe=Be[Ve.id];Xe&&!o.bh(Xe,Ve)&&le.push({command:Kr.updateImport,args:[Ve.id,Ve]})}}(S.imports,k.imports,O),o.bh(S.transition,k.transition)||O.push({command:Kr.setTransition,args:[k.transition]}),o.bh(S.light,k.light)||O.push({command:Kr.setLight,args:[k.light]}),o.bh(S.fog,k.fog)||O.push({command:Kr.setFog,args:[k.fog]}),o.bh(S.projection,k.projection)||O.push({command:Kr.setProjection,args:[k.projection]}),o.bh(S.lights,k.lights)||O.push({command:Kr.setLights,args:[k.lights]}),o.bh(S.camera,k.camera)||O.push({command:Kr.setCamera,args:[k.camera]}),!o.bh(S["color-theme"],k["color-theme"]))return[{command:Kr.setStyle,args:[k]}];const N={},Q=[];(function(Y,ae,le,ce){let Ae;for(Ae in ae=ae||{},Y=Y||{})Y.hasOwnProperty(Ae)&&(ae.hasOwnProperty(Ae)||An(Ae,le,ce));for(Ae in ae){if(!ae.hasOwnProperty(Ae))continue;const Be=ae[Ae];Y.hasOwnProperty(Ae)?o.bh(Y[Ae],Be)||(Y[Ae].type==="geojson"&&Be.type==="geojson"&&_r(Y,ae,Ae)?le.push({command:Kr.setGeoJSONSourceData,args:[Ae,Be.data]}):ph(Ae,ae,le,ce)):qs(Ae,ae,le)}})(S.sources,k.sources,Q,N);const W=[];S.layers&&S.layers.forEach(Y=>{Y.source&&N[Y.source]?O.push({command:Kr.removeLayer,args:[Y.id]}):W.push(Y)});let X=S.terrain;X&&N[X.source]&&(O.push({command:Kr.setTerrain,args:[void 0]}),X=void 0),O=O.concat(Q),o.bh(X,k.terrain)||O.push({command:Kr.setTerrain,args:[k.terrain]}),function(Y,ae,le){ae=ae||[];const ce=(Y=Y||[]).map(rl),Ae=ae.map(rl),Be=Y.reduce(Jl,{}),Te=ae.reduce(Jl,{}),be=ce.slice(),Me=Object.create(null);let Fe,ze,Le,Ve,Xe,je,He;for(Fe=0,ze=0;Fe<ce.length;Fe++)Le=ce[Fe],Te.hasOwnProperty(Le)?ze++:(le.push({command:Kr.removeLayer,args:[Le]}),be.splice(be.indexOf(Le,ze),1));for(Fe=0,ze=0;Fe<Ae.length;Fe++)Le=Ae[Ae.length-1-Fe],be[be.length-1-Fe]!==Le&&(Be.hasOwnProperty(Le)?(le.push({command:Kr.removeLayer,args:[Le]}),be.splice(be.lastIndexOf(Le,be.length-ze),1)):ze++,je=be[be.length-Fe],le.push({command:Kr.addLayer,args:[Te[Le],je]}),be.splice(be.length-Fe,0,Le),Me[Le]=!0);for(Fe=0;Fe<Ae.length;Fe++)if(Le=Ae[Fe],Ve=Be[Le],Xe=Te[Le],!Me[Le]&&!o.bh(Ve,Xe))if(o.bh(Ve.source,Xe.source)&&o.bh(Ve["source-layer"],Xe["source-layer"])&&o.bh(Ve.type,Xe.type)){for(He in ca(Ve.layout,Xe.layout,le,Le,null,Kr.setLayoutProperty),ca(Ve.paint,Xe.paint,le,Le,null,Kr.setPaintProperty),o.bh(Ve.slot,Xe.slot)||le.push({command:Kr.setSlot,args:[Le,Xe.slot]}),o.bh(Ve.filter,Xe.filter)||le.push({command:Kr.setFilter,args:[Le,Xe.filter]}),o.bh(Ve.minzoom,Xe.minzoom)&&o.bh(Ve.maxzoom,Xe.maxzoom)||le.push({command:Kr.setLayerZoomRange,args:[Le,Xe.minzoom,Xe.maxzoom]}),Ve)Ve.hasOwnProperty(He)&&He!=="layout"&&He!=="paint"&&He!=="filter"&&He!=="metadata"&&He!=="minzoom"&&He!=="maxzoom"&&He!=="slot"&&(He.indexOf("paint.")===0?ca(Ve[He],Xe[He],le,Le,He.slice(6),Kr.setPaintProperty):o.bh(Ve[He],Xe[He])||le.push({command:Kr.setLayerProperty,args:[Le,He,Xe[He]]}));for(He in Xe)Xe.hasOwnProperty(He)&&!Ve.hasOwnProperty(He)&&He!=="layout"&&He!=="paint"&&He!=="filter"&&He!=="metadata"&&He!=="minzoom"&&He!=="maxzoom"&&He!=="slot"&&(He.indexOf("paint.")===0?ca(Ve[He],Xe[He],le,Le,He.slice(6),Kr.setPaintProperty):o.bh(Ve[He],Xe[He])||le.push({command:Kr.setLayerProperty,args:[Le,He,Xe[He]]}))}else le.push({command:Kr.removeLayer,args:[Le]}),je=be[be.lastIndexOf(Le)+1],le.push({command:Kr.addLayer,args:[Xe,je]})}(W,k.layers,O)}catch(N){console.warn("Unable to compute style diff:",N),O=[{command:Kr.setStyle,args:[k]}]}return O}(this.serialize(),a).filter(S=>!(S.command in _d));if(g.length===0)return!1;const x=g.filter(S=>!(S.command in fg));if(x.length>0)throw new Error(`Unimplemented: ${x.map(S=>S.command).join(", ")}.`);const w=[];return g.forEach(S=>{w.push(this[S.command].apply(this,S.args))}),u&&Promise.all(w).then(u),this.stylesheet=a,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}addImage(a,u){return this.getImage(a)?this.fire(new o.t(new Error("An image with this name already exists."))):(this.imageManager.addImage(a,this.scope,u),this._afterImageUpdated(a),this)}updateImage(a,u){this.imageManager.updateImage(a,this.scope,u)}getImage(a){return this.imageManager.getImage(a,this.scope)}removeImage(a){return this.getImage(a)?(this.imageManager.removeImage(a,this.scope),this._afterImageUpdated(a),this):this.fire(new o.t(new Error("No image with this name exists.")))}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(this.scope),this._changes.updateImage(a),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.fire(new o.x("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(a,u,g={}){return this._checkLoaded(),this._validate(Ne,`models.${a}`,u,null,g)||(this.modelManager.addModel(a,u,this.scope),this._changes.setDirty()),this}hasModel(a){return this.modelManager.hasModel(a,this.scope)}removeModel(a){return this.hasModel(a)?(this.modelManager.removeModel(a,this.scope),this):this.fire(new o.t(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(a,u,g={}){if(this._checkLoaded(),this.getOwnSource(a)!==void 0)throw new Error(`There is already a source with ID "${a}".`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(ns,`sources.${a}`,u,null,g))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const x=wl(a,u,this.dispatcher,this);x.scope=this.scope,x.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(x.id),source:x.serialize(),sourceId:x.id}));const w=S=>{const k=(S?"symbol:":"other:")+x.id,O=o.av(k,this.scope),N=this._sourceCaches[k]=new wo(O,x,S);(S?this._symbolSourceCaches:this._otherSourceCaches)[x.id]=N,N.onAdd(this.map)};w(!1),u.type!=="vector"&&u.type!=="geojson"||w(!0),x.onAdd&&x.onAdd(this.map),g.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(a){this._checkLoaded();const u=this.getOwnSource(a);if(!u)throw new Error("There is no source with this ID");for(const x in this._layers)if(this._layers[x].source===a)return this.fire(new o.t(new Error(`Source "${a}" cannot be removed while layer "${x}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===a)return this.fire(new o.t(new Error(`Source "${a}" cannot be removed while terrain is using it.`)));const g=this.getOwnSourceCaches(a);for(const x of g){const w=o.cm(x.id);delete this._sourceCaches[w],this._changes.discardSourceCacheUpdate(x.id),x.fire(new o.x("data",{sourceDataType:"metadata",dataType:"source",sourceId:x.getSource().id})),x.setEventedParent(null),x.clearTiles()}return delete this._otherSourceCaches[a],delete this._symbolSourceCaches[a],this.mergeSources(),u.setEventedParent(null),u.onRemove&&u.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(a,u){this._checkLoaded(),this.getOwnSource(a).setData(u),this._changes.setDirty()}getOwnSource(a){const u=this.getOwnSourceCache(a);return u&&u.getSource()}getOwnSources(){const a=[];for(const u in this._otherSourceCaches){const g=this.getOwnSourceCache(u);g&&a.push(g.getSource())}return a}areTilesLoaded(){const a=this._mergedSourceCaches;for(const u in a){const g=a[u]._tiles;for(const x in g){const w=g[x];if(w.state!=="loaded"&&w.state!=="errored")return!1}}return!0}setLights(a){if(this._checkLoaded(),!a)return delete this.ambientLight,void delete this.directionalLight;const u=this._getTransitionParameters();for(const x of a){if(this._validate(ql,"lights",x))return;switch(x.type){case"ambient":if(this.ambientLight){const w=this.ambientLight;w.set(x),w.updateTransitions(u)}else this.ambientLight=new xn(x,Rr||(Rr=new o.a0({color:new o.a1(o._.properties_light_ambient.color),intensity:new o.a1(o._.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const w=this.directionalLight;w.set(x),w.updateTransitions(u)}else this.directionalLight=new xn(x,vn||(vn=new o.a0({direction:new o.ad(o._.properties_light_directional.direction),color:new o.a1(o._.properties_light_directional.color),intensity:new o.a1(o._.properties_light_directional.intensity),"cast-shadows":new o.a1(o._.properties_light_directional["cast-shadows"]),"shadow-intensity":new o.a1(o._.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const g=new o.a3(this.z||0,u);this.ambientLight&&this.ambientLight.recalculate(g),this.directionalLight&&this.directionalLight.recalculate(g),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const a=this.directionalLight,u=this.ambientLight;if(!a||!u)return;const g=W=>.2126*(W[0]<=.03928?W[0]/12.92:Math.pow((W[0]+.055)/1.055,2.4))+.7152*(W[1]<=.03928?W[1]/12.92:Math.pow((W[1]+.055)/1.055,2.4))+.0722*(W[2]<=.03928?W[2]/12.92:Math.pow((W[2]+.055)/1.055,2.4)),x=a.properties.get("color").toRenderColor(null).toArray01(),w=a.properties.get("intensity"),S=a.properties.get("direction"),k=1-o.c7(S.x,S.y,S.z)[2]/90,O=g(x)*w*k,N=u.properties.get("color").toRenderColor(null).toArray01(),Q=u.properties.get("intensity");return(O+g(N)*Q)/2}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const a=[];return this.directionalLight&&a.push(this.directionalLight.get()),this.ambientLight&&a.push(this.ambientLight.get()),a}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(a){if(!a)return this;if(o.cn(a)){const u=o.co(a),g=this.fragments.find(({id:w})=>w===u);if(!g)throw new Error(`Style import not found: ${a}`);const x=o.cm(a);return g.style.getFragmentStyle(x)}{const u=this.fragments.find(({id:g})=>g===a);if(!u)throw new Error(`Style import not found: ${a}`);return u.style}}getConfigProperty(a,u){const g=this.getFragmentStyle(a);if(!g)return null;const x=o.av(u,g.scope),w=g.options.get(x),S=w?w.value||w.default:null;return S?S.serialize():null}setConfigProperty(a,u,g){const x=this.getFragmentStyle(a);if(!x)return;const w=x.stylesheet.schema;if(!w||!w[u])return;const S=o.M(g);if(S.result!=="success")return void il(this,S.value);const k=S.value.expression,O=o.av(u,x.scope),N=x.options.get(O);if(!N)return;let Q;const{minValue:W,maxValue:X,stepValue:Y,type:ae,values:le}=w[u],ce=o.M(w[u].default);ce.result==="success"&&(Q=ce.value.expression),Q?(this.options.set(O,{...N,value:k,default:Q,minValue:W,maxValue:X,stepValue:Y,type:ae,values:le}),this.updateConfigDependencies(u)):this.fire(new o.t(new Error(`No schema defined for the config option "${u}" in the "${a}" fragment.`)))}getConfig(a){const u=this.getFragmentStyle(a);if(!u)return null;const g=u.stylesheet.schema;if(!g)return null;const x={};for(const w in g){const S=o.av(w,u.scope),k=u.options.get(S),O=k?k.value||k.default:null;x[w]=O?O.serialize():null}return x}setConfig(a,u){const g=this.getFragmentStyle(a);g&&(g.updateConfig(u,g.stylesheet.schema),this.updateConfigDependencies())}getSchema(a){const u=this.getFragmentStyle(a);return u?u.stylesheet.schema:null}setSchema(a,u){const g=this.getFragmentStyle(a);g&&(g.stylesheet.schema=u,g.updateConfig(g._config,u),this.updateConfigDependencies())}updateConfig(a,u){if(this._config=a,a||u)if(u)for(const g in u){let x,w;const S=o.M(u[g].default);if(S.result==="success"&&(x=S.value.expression),a&&a[g]!==void 0){const X=o.M(a[g]);X.result==="success"&&(w=X.value.expression)}const{minValue:k,maxValue:O,stepValue:N,type:Q,values:W}=u[g];if(x){const X=o.av(g,this.scope);this.options.set(X,{default:x,value:w,minValue:k,maxValue:O,stepValue:N,type:Q,values:W})}else this.fire(new o.t(new Error(`No schema defined for config option "${g}".`)))}else this.fire(new o.t(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(a){for(const u of this._configDependentLayers){const g=this.getLayer(u);if(g){if(a&&!g.configDependencies.has(a))continue;g.possiblyEvaluateVisibility(),this._updateLayer(g)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.forEachFragmentStyle(u=>{if(u._styleColorTheme.colorTheme){const g=u._evaluateColorThemeData(u._styleColorTheme.colorTheme);(!u._styleColorTheme.lut&&g!==""||u._styleColorTheme.lut&&g!==u._styleColorTheme.lut.data)&&u.setColorTheme(u._styleColorTheme.colorTheme)}}),this._changes.setDirty()}addLayer(a,u,g={}){this._checkLoaded();const x=a.id;if(this._layers[x])return void this.fire(new o.t(new Error(`Layer with id "${x}" already exists on this map`)));let w;if(a.type==="custom"){if(il(this,o.cp(a)))return;w=o.cq(a,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof a.source=="object"&&(this.addSource(x,a.source),a=o.cl(a),a=o.l(a,{source:x})),this._validate(ct,`layers.${x}`,a,{arrayIndex:-1},g))return;w=o.cq(a,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(w),w.setEventedParent(this,{layer:{id:x}}),this._serializedLayers[w.id]=w.serialize()}w.configDependencies.size!==0&&this._configDependentLayers.add(w.fqid);let S=this._order.length;if(u){const Q=this._order.indexOf(u);if(Q===-1)return void this.fire(new o.t(new Error(`Layer with id "${u}" does not exist on this map.`)));w.slot===this._layers[u].slot?S=Q:o.w(`Layer with id "${u}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(S,0,x),this._layerOrderChanged=!0,this._layers[x]=w;const k=this.getOwnLayerSourceCache(w),O=!!this.directionalLight&&this.directionalLight.shadowsEnabled();k&&w.canCastShadows()&&O&&(k.castsShadows=!0);const N=this._changes.getRemovedLayer(w);if(N&&w.source&&k&&w.type!=="custom"){this._changes.discardLayerRemoval(w);const Q=o.av(w.source,w.scope);N.type!==w.type?this._changes.updateSourceCache(Q,"clear"):(this._changes.updateSourceCache(Q,"reload"),k.pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map),w.scope=this.scope,this.mergeLayers()}moveLayer(a,u){this._checkLoaded();const g=this._checkLayer(a);if(!g||a===u)return;const x=this._order.indexOf(a);this._order.splice(x,1);let w=this._order.length;if(u){const S=this._order.indexOf(u);if(S===-1)return void this.fire(new o.t(new Error(`Layer with id "${u}" does not exist on this map.`)));g.slot===this._layers[u].slot?w=S:o.w(`Layer with id "${u}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(w,0,a),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(a){this._checkLoaded();const u=this._checkLayer(a);if(!u)return;u.setEventedParent(null);const g=this._order.indexOf(a);this._order.splice(g,1),delete this._layers[a],delete this._serializedLayers[a],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(u.fqid),this._changes.removeLayer(u);const x=this.getOwnLayerSourceCache(u);if(x&&x.castsShadows){let w=!1;for(const S in this._layers)if(this._layers[S].source===u.source&&this._layers[S].canCastShadows()){w=!0;break}x.castsShadows=w}u.onRemove&&u.onRemove(this.map),this.mergeLayers()}getOwnLayer(a){return this._layers[a]}hasLayer(a){return a in this._mergedLayers}hasLayerType(a){for(const u in this._layers)if(this._layers[u].type===a)return!0;return!1}setLayerZoomRange(a,u,g){this._checkLoaded();const x=this._checkLayer(a);x&&(x.minzoom===u&&x.maxzoom===g||(u!=null&&(x.minzoom=u),g!=null&&(x.maxzoom=g),this._updateLayer(x)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(a,u){this._checkLoaded();const g=this._checkLayer(a);g&&g.slot!==u&&(g.slot=u,this._updateLayer(g))}setFilter(a,u,g={}){this._checkLoaded();const x=this._checkLayer(a);if(x&&!o.bh(x.filter,u))return u==null?(x.filter=void 0,void this._updateLayer(x)):void(this._validate(he,`layers.${x.id}.filter`,u,{layerType:x.type},g)||(x.filter=o.cl(u),this._updateLayer(x)))}getFilter(a){const u=this._checkLayer(a);if(u)return o.cl(u.filter)}setLayoutProperty(a,u,g,x={}){this._checkLoaded();const w=this._checkLayer(a);if(w&&!o.bh(w.getLayoutProperty(u),g)){if(g!=null&&(!x||x.validate!==!1)&&il(w,ke.call(rs,{key:`layers.${a}.layout.${u}`,layerType:w.type,objectKey:u,value:g,styleSpec:o._,style:{glyphs:!0,sprite:!0}})))return;w.setLayoutProperty(u,g),w.configDependencies.size!==0&&this._configDependentLayers.add(w.fqid),this._updateLayer(w)}}getLayoutProperty(a,u){const g=this._checkLayer(a);if(g)return g.getLayoutProperty(u)}setPaintProperty(a,u,g,x={}){this._checkLoaded();const w=this._checkLayer(a);if(!w||o.bh(w.getPaintProperty(u),g)||g!=null&&(!x||x.validate!==!1)&&il(w,ge.call(rs,{key:`layers.${a}.paint.${u}`,layerType:w.type,objectKey:u,value:g,styleSpec:o._})))return;const S=w.setPaintProperty(u,g);w.configDependencies.size!==0&&this._configDependentLayers.add(w.fqid),S&&this._updateLayer(w),this._changes.updatePaintProperties(w)}getPaintProperty(a,u){const g=this._checkLayer(a);if(g)return g.getPaintProperty(u)}setFeatureState(a,u){this._checkLoaded();const g=a.source,x=a.sourceLayer,w=this._checkSource(g);if(!w)return;const S=w.type;if(S==="geojson"&&x)return void this.fire(new o.t(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(S==="vector"&&!x)return void this.fire(new o.t(new Error("The sourceLayer parameter must be provided for vector source types.")));a.id===void 0&&this.fire(new o.t(new Error("The feature id parameter must be provided.")));const k=this.getOwnSourceCaches(g);for(const O of k)O.setFeatureState(x,a.id,u)}removeFeatureState(a,u){this._checkLoaded();const g=a.source,x=this._checkSource(g);if(!x)return;const w=x.type,S=w==="vector"?a.sourceLayer:void 0;if(w==="vector"&&!S)return void this.fire(new o.t(new Error("The sourceLayer parameter must be provided for vector source types.")));if(u&&typeof a.id!="string"&&typeof a.id!="number")return void this.fire(new o.t(new Error("A feature id is required to remove its specific state property.")));const k=this.getOwnSourceCaches(g);for(const O of k)O.removeFeatureState(S,a.id,u)}getFeatureState(a){this._checkLoaded();const u=a.source,g=a.sourceLayer,x=this._checkSource(u);if(x){if(x.type!=="vector"||g)return a.id===void 0&&this.fire(new o.t(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(u)[0].getFeatureState(g,a.id);this.fire(new o.t(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(a){return this.stylesheet.transition=o.l({},this.stylesheet.transition,a),this.transition=this.stylesheet.transition,this}getTransition(){return o.l({},this.stylesheet.transition)}serialize(){this._checkLoaded();const a=this.getTerrain(),u=a&&this.terrain&&this.terrain.scope===this.scope?a:this.stylesheet.terrain;return o.cr({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:u,fog:this.stylesheet.fog,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},g=>g!==void 0)}_updateLayer(a){this._changes.updateLayer(a);const u=this.getLayerSourceCache(a),g=o.av(a.source,a.scope),x=this._changes.getUpdatedSourceCaches();a.source&&!x[g]&&u&&u.getSource().type!=="raster"&&(this._changes.updateSourceCache(g,"reload"),u.pause()),a.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(a){const u=k=>this._mergedLayers[k].is3D(),g=this.order,x={},w=[];for(let k=g.length-1;k>=0;k--){const O=g[k];if(u(O)){x[O]=k;for(const N of a){const Q=N[O];if(Q)for(const W of Q)w.push(W)}}}w.sort((k,O)=>O.intersectionZ-k.intersectionZ);const S=[];for(let k=g.length-1;k>=0;k--){const O=g[k];if(u(O))for(let N=w.length-1;N>=0;N--){const Q=w[N].feature;if(Q.layer&&x[Q.layer.id]<k)break;S.push(Q),w.pop()}else for(const N of a){const Q=N[O];if(Q)for(const W of Q)S.push(W.feature)}}return S}queryRenderedFeatures(a,u,g){u&&u.filter&&this._validate(he,"queryRenderedFeatures.filter",u.filter,null,u),u.scope=this.scope,u.availableImages=this._availableImages,u.serializedLayers=this._serializedLayers;const x={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new o.t(new Error("parameters.layers must be an Array."))),[];for(const N of u.layers){const Q=this._mergedLayers[N];if(!Q)return this.fire(new o.t(new Error(`The layer '${N}' does not exist in the map's style and cannot be queried for features.`))),[];x[Q.source]=!0}}const w=[],S=u.serializedLayers||{},k=u&&u.layers?u.layers.some(N=>{const Q=this.getLayer(N);return Q&&Q.is3D()}):this.has3DLayers(),O=On.createFromScreenPoints(a,g);for(const N in this._mergedSourceCaches){const Q=this._mergedSourceCaches[N].getSource();if(!Q||Q.scope!==u.scope)continue;const W=this._mergedSourceCaches[N].getSource().id;u.layers&&!x[W]||w.push(fh(this._mergedSourceCaches[N],this._mergedLayers,S,O,u,g,k,!!this.map._showQueryGeometry))}return this.placement&&w.push(function(N,Q,W,X,Y,ae,le){const ce={},Ae=ae.queryRenderedSymbols(X),Be=[];for(const Te of Object.keys(Ae).map(Number))Be.push(le[Te]);Be.sort(Cc);for(const Te of Be){const be=Te.featureIndex.lookupSymbolFeatures(Ae[Te.bucketInstanceId],Q,Te.bucketIndex,Te.sourceLayerIndex,Y.filter,Y.layers,Y.availableImages,N);for(const Me in be){const Fe=ce[Me]=ce[Me]||[],ze=be[Me];ze.sort((Le,Ve)=>{const Xe=Te.featureSortOrder;if(Xe){const je=Xe.indexOf(Le.featureIndex);return Xe.indexOf(Ve.featureIndex)-je}return Ve.featureIndex-Le.featureIndex});for(const Le of ze)Fe.push(Le)}}for(const Te in ce)ce[Te].forEach(be=>{const Me=be.feature,Fe=W(N[Te]);if(!Fe)return;const ze=Fe.getFeatureState(Me.layer["source-layer"],Me.id);Me.source=Me.layer.source,Me.layer["source-layer"]&&(Me.sourceLayer=Me.layer["source-layer"]),Me.state=ze});return ce}(this._mergedLayers,S,this.getLayerSourceCache.bind(this),O.screenGeometry,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(a,u){u&&u.filter&&this._validate(he,"querySourceFeatures.filter",u.filter,null,u);const g=this.getOwnSourceCaches(a);let x=[];for(const w of g)x=x.concat(Bc(w,u));return x}addSourceType(a,u,g){return ol.getSourceType(a)?g(new Error(`A source type called "${a}" already exists.`)):(ol.setSourceType(a,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:u.workerSourceURL},g):g(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(a,u,g={}){this._checkLoaded();const x=this.light.getLight();let w=!1;for(const k in a)if(!o.bh(a[k],x[k])){w=!0;break}if(!w)return;const S=this._getTransitionParameters();this.light.setLight(a,u,g),this.light.updateTransitions(S)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=o.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&o.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(a,u=1){if(this._checkLoaded(),!a)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),u===0&&delete this.terrain,a===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let g=a;const x=a.source==null;if(u===1){if(this.disableElevatedTerrain)return;if(typeof g.source=="object"){const k="terrain-dem-src";this.addSource(k,g.source),g=o.cl(g),g=o.l(g,{source:k})}const w=o.l({},g),S={};if(this.terrain&&x){w.source=this.terrain.get().source;const k=this.terrain?this.getFragmentStyle(this.terrain.scope):null;k&&(S.style=k.serialize())}if(this._validate(xl,"terrain",w,S))return}if(!this.terrain||this.terrain.scope!==this.scope&&!x||this.terrain&&u!==this.terrain.drapeRenderMode){if(!g)return;this._createTerrain(g,u),this.fire(new o.x("data",{dataType:"style"}))}else{const w=this.terrain,S=w.get();for(const k of Object.keys(o._.terrain))!g.hasOwnProperty(k)&&o._.terrain[k].default&&(g[k]=o._.terrain[k].default);for(const k in a)if(!o.bh(a[k],S[k])){w.set(a,this.options),this.stylesheet.terrain=a;const O=this._getTransitionParameters({duration:0});w.updateTransitions(O),this.fire(new o.x("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(a){const u=this.fog=new yn(a,this.map.transform,this.scope,this.options);this.stylesheet.fog=u.get();const g=this._getTransitionParameters({duration:0});u.updateTransitions(g)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const a of this.map._markers)a._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(a){if(this._checkLoaded(),!a)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const u=this.fog;if(!o.bh(u.get(),a)){u.set(a,this.options),this.stylesheet.fog=u.get();const g=this._getTransitionParameters({duration:0});u.updateTransitions(g)}}else this._createFog(a);this._markersNeedUpdate=!0}setColorTheme(a){this._checkLoaded();const u=()=>{for(const x in this._layers)this._layers[x].lut=this._styleColorTheme.lut;for(const x in this._sourceCaches)this._sourceCaches[x].clearTiles()};if(this._styleColorTheme.colorTheme=a,!a)return this._styleColorTheme.lut=null,void u();const g=this._evaluateColorThemeData(a);this._loadColorTheme(g).then(()=>{this.fire(new o.x("colorthemeset")),u()}).catch(x=>{o.w(`Couldn't set color theme: ${x}`)})}_getTransitionParameters(a){return{now:o.q.now(),transition:o.l(this.transition,a)}}updateDrapeFirstLayers(){if(!this.terrain)return;const a=[],u=[];for(const g of this._mergedOrder)this.isLayerDraped(this._mergedLayers[g])?a.push(g):u.push(g);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...a),this._drapedFirstOrder.push(...u)}_createTerrain(a,u){const g=this.terrain=new vt(a,u,this.scope,this.options);u===1&&(this.stylesheet.terrain=a),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const x=this._getTransitionParameters({duration:0});g.updateTransitions(x)}_force3DLayerUpdate(){for(const a in this._layers){const u=this._layers[a];u.type==="fill-extrusion"&&this._updateLayer(u)}}_forceSymbolLayerUpdate(){for(const a in this._layers){const u=this._layers[a];u.type==="symbol"&&this._updateLayer(u)}}_validate(a,u,g,x,w={}){if(w&&w.validate===!1)return!1;const S=o.l({},this.serialize());return il(this,a.call(rs,o.l({key:u,style:S,value:g,styleSpec:o._},x)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.cs.off("pluginStateChange",this._rtlTextPluginCallback);for(const a in this._mergedLayers)this._mergedLayers[a].setEventedParent(null);for(const a in this._mergedSourceCaches)this._mergedSourceCaches[a].clearTiles(),this._mergedSourceCaches[a].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(a){const u=this.getSourceCaches(a);for(const g of u)g.clearTiles()}clearSources(){for(const a in this._mergedSourceCaches)this._mergedSourceCaches[a].clearTiles()}reloadSource(a){const u=this.getSourceCaches(a);for(const g of u)g.resume(),g.reload()}reloadSources(){for(const a of this.getSources())a.reload&&a.reload()}updateSources(a){let u;this.directionalLight&&(u=hg(this.directionalLight));for(const g in this._mergedSourceCaches)this._mergedSourceCaches[g].update(a,void 0,void 0,u)}_generateCollisionBoxes(){for(const a in this._sourceCaches){const u=this._sourceCaches[a];u.resume(),u.reload()}}_updatePlacement(a,u,g,x,w,S,k=!1){let O=!1,N=!1;const Q={},W={};for(const X of this._mergedOrder){const Y=this._mergedLayers[X];if(Y.type!=="symbol")continue;const ae=o.av(Y.source,Y.scope);let le=Q[ae];if(!le){const Ae=this.getLayerSourceCache(Y);if(!Ae)continue;const Be=Ae.getRenderableIds(!0).map(Te=>Ae.getTileByID(Te));W[ae]=Be.slice(),le=Q[ae]=Be.sort((Te,be)=>be.tileID.overscaledZ-Te.tileID.overscaledZ||(Te.tileID.isLessThan(be.tileID)?-1:1))}const ce=this.crossTileSymbolIndex.addLayer(Y,le,u.center.lng,u.projection);O=O||ce}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),k=k||this._layerOrderChanged||x===0,this._layerOrderChanged&&this.fire(new o.x("neworder")),(k||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.q.now(),u.zoom))&&(this.pauseablePlacement=new Mc(u,this._mergedOrder,k,g,x,w,this.placement,this.fog&&u.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,Q,W),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.q.now()),N=!0),O&&this.pauseablePlacement.placement.setStale()),N||O){this._buildingIndex.onNewFrame(u.zoom);for(let X=0;X<this._mergedOrder.length;X++){const Y=this._mergedLayers[this._mergedOrder[X]];if(Y.type!=="symbol")continue;const ae=this.isLayerClipped(Y);this.placement.updateLayerOpacities(Y,Q[o.av(Y.source,Y.scope)],X,ae?S:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.q.now())}}_releaseSymbolFadeTiles(){for(const a in this._sourceCaches)this._sourceCaches[a].releaseSymbolFadeTiles()}addImport(a,u){this._checkLoaded();const g=this.stylesheet.imports=this.stylesheet.imports||[];if(g.findIndex(({id:w})=>w===a.id)!==-1)return void this.fire(new o.t(new Error(`Import with id '${a.id}' already exists in the map's style.`)));if(!u)return g.push(a),this._loadImports([a],!0);const x=g.findIndex(({id:w})=>w===u);return x===-1&&this.fire(new o.t(new Error(`Import with id "${u}" does not exist on this map.`))),this.stylesheet.imports=g.slice(0,x).concat(a).concat(g.slice(x)),this._loadImports([a],!0,u)}updateImport(a,u){this._checkLoaded();const g=this.stylesheet.imports||[],x=this.getImportIndex(a);return x===-1?this:typeof u=="string"?(this.setImportUrl(a,u),this):(u.url&&u.url!==g[x].url&&this.setImportUrl(a,u.url),o.bh(u.config,g[x].config)||this.setImportConfig(a,u.config),o.bh(u.data,g[x].data)||this.setImportData(a,u.data),this)}moveImport(a,u){this._checkLoaded();let g=this.stylesheet.imports||[];const x=this.getImportIndex(a);if(x===-1)return this;const w=this.getImportIndex(u);if(w===-1)return this;const S=g[x],k=this.fragments[x];return g=g.filter(({id:O})=>O!==a),this.fragments=this.fragments.filter(({id:O})=>O!==a),this.stylesheet.imports=g.slice(0,w).concat(S).concat(g.slice(w)),this.fragments=this.fragments.slice(0,w).concat(k).concat(this.fragments.slice(w)),this.mergeLayers(),this}setImportUrl(a,u){this._checkLoaded();const g=this.stylesheet.imports||[],x=this.getImportIndex(a);if(x===-1)return this;g[x].url=u;const w=this.fragments[x];return w.style=this._createFragmentStyle(g[x]),w.style.on("style.import.load",()=>this.mergeAll()),w.style.loadURL(u),this}setImportData(a,u){this._checkLoaded();const g=this.getImportIndex(a),x=this.stylesheet.imports||[];return g===-1?this:u?(this.fragments[g].style.setState(u),this._reloadImports(),this):(delete x[g].data,this.setImportUrl(a,x[g].url))}setImportConfig(a,u){this._checkLoaded();const g=this.getImportIndex(a),x=this.stylesheet.imports||[];if(g===-1)return this;u?x[g].config=u:delete x[g].config;const w=this.fragments[g],S=w.style.stylesheet&&w.style.stylesheet.schema;return w.config=u,w.style.updateConfig(u,S),this.updateConfigDependencies(),this}removeImport(a){this._checkLoaded();const u=this.stylesheet.imports||[],g=this.getImportIndex(a);g!==-1&&(u.splice(g,1),this.fragments[g].style._remove(),this.fragments.splice(g,1),this._reloadImports())}getImportIndex(a){const u=(this.stylesheet.imports||[]).findIndex(g=>g.id===a);return u===-1&&this.fire(new o.t(new Error(`Import '${a}' does not exist in the map's style and cannot be updated.`))),u}getLayer(a){return this._mergedLayers[a]}getSources(){const a=[];for(const u in this._mergedOtherSourceCaches){const g=this._mergedOtherSourceCaches[u];g&&a.push(g.getSource())}return a}getSource(a,u){const g=this.getSourceCache(a,u);return g&&g.getSource()}getLayerSource(a){const u=this.getLayerSourceCache(a);return u&&u.getSource()}getSourceCache(a,u){const g=o.av(a,u);return this._mergedOtherSourceCaches[g]}getLayerSourceCache(a){const u=o.av(a.source,a.scope);return a.type==="symbol"?this._mergedSymbolSourceCaches[u]:this._mergedOtherSourceCaches[u]}getSourceCaches(a){if(a==null)return Object.values(this._mergedSourceCaches);const u=[];return this._mergedOtherSourceCaches[a]&&u.push(this._mergedOtherSourceCaches[a]),this._mergedSymbolSourceCaches[a]&&u.push(this._mergedSymbolSourceCaches[a]),u}updateSourceCaches(){const a=this._changes.getUpdatedSourceCaches();for(const u in a){const g=a[u];g==="reload"?this.reloadSource(u):g==="clear"&&this.clearSource(u)}}updateLayers(a){const u=this._changes.getUpdatedPaintProperties();for(const g of u){const x=this.getLayer(g);x&&x.updateTransitions(a)}}getImages(a,u,g){this.imageManager.getImages(u.icons,u.scope,g),this._updateTilesForChangedImages();const x=w=>{w&&w.setDependencies(u.tileID.key,u.type,u.icons)};x(this._otherSourceCaches[u.source]),x(this._symbolSourceCaches[u.source])}getGlyphs(a,u,g){this.glyphManager.getGlyphs(u.stacks,u.scope,g)}getResource(a,u,g){return o.ct(u,g)}getOwnSourceCache(a){return this._otherSourceCaches[a]}getOwnLayerSourceCache(a){return a.type==="symbol"?this._symbolSourceCaches[a.source]:this._otherSourceCaches[a.source]}getOwnSourceCaches(a){const u=[];return this._otherSourceCaches[a]&&u.push(this._otherSourceCaches[a]),this._symbolSourceCaches[a]&&u.push(this._symbolSourceCaches[a]),u}_isSourceCacheLoaded(a){const u=this.getOwnSourceCaches(a);return u.length===0?(this.fire(new o.t(new Error(`There is no source with ID '${a}'`))),!1):u.every(g=>g.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(a,u){if(!this._clipLayerPresent&&a.type!=="fill-extrusion")return!1;const g=a.type==="fill-extrusion"&&a.sourceLayer==="building";if(a.is3D()){if(g||u&&u.type==="batched-model"||a.type==="model")return!0}else if(a.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(a=>{a.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}ol.getSourceType=function(m){return wu[m]},ol.setSourceType=function(m,a){wu[m]=a},ol.registerForPluginStateChange=o.cc;var xw=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,gv=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec2 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color) {
#ifdef INDICATOR_CUTOUT
float holeMinOpacity=u_indicator_cutout_params.x;float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,yv=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,pg="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",bw=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,ww=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Bw=`highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}
#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {
#ifdef FOG_DITHERING
vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);
#else
return color;
#endif
}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,Cw=`#ifdef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,vv=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,Sw=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,mp=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef NATIVE
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return mix(lerpx.x,lerpx.y,f.y);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth));
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const mg=[];vh(xw,mg),vh(yv,mg),vh(gv,mg);const gp={"_prelude_fog.vertex.glsl":ww,"_prelude_terrain.vertex.glsl":bw,"_prelude_shadow.vertex.glsl":Sw,"_prelude_fog.fragment.glsl":Bw,"_prelude_shadow.fragment.glsl":mp,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":Cw,"_prelude_raster_particle.glsl":vv},xd={};dn("",bw),dn(Bw,ww),dn(mp,Sw),dn(Cw,""),dn(vv,"");const yp=dn(gv,yv),gg=xw;var yh={background:dn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:dn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:dn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float opacity_t=smoothstep((1.0-blur_positive)*antialiased_blur,blur_positive*antialiased_blur,extrude_length-1.0)-smoothstep(0.0,antialiasblur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:dn("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:dn(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:dn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:dn("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:dn("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:dn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:dn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:dn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:dn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:dn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in highp vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:dn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);v_flat=vec4(linearProduct(color.rgb,vec3(calculate_NdotL(normal))),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:dn(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base);pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:dn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:dn(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0)).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:dn(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:dn(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:dn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:dn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=out_color.a;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=(border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color.rgb=mix(border_color.rgb*border_color.a*trim_alpha,out_color.rgb,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in float a_z_offset;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);
#ifdef ELEVATED_ROADS
gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset+0.01*step(0.01,a_z_offset),1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 halfCellProgress=normal.yx*32.0;float ele0=elevation(pos);float ele_line=max(ele0,max(elevation(pos+halfCellProgress),elevation(pos-halfCellProgress)));float ele1=elevation(pos+offsetTile);float ele2=elevation(pos-offsetTile);float ele_max=max(ele_line,0.5*(ele1+ele2));float ele=ele_max-ele0+ele1+a_z_offset ;gl_Position=u_matrix*vec4(pos+offsetTile,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*0.1*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:dn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 v_uv;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {color=vec4(0,0,0,0);}}
#endif
#ifdef LINE_JOIN_NONE
float pattern_len=pattern_size/aspect;float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_ground(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in float a_z_offset;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec4 v_uv;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);
#ifdef ELEVATED_ROADS
gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset+0.01*step(0.01,a_z_offset),1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 halfCellProgress=normal.yx*32.0;float ele0=elevation(pos);float ele_line=max(ele0,max(elevation(pos+halfCellProgress),elevation(pos-halfCellProgress)));float ele1=elevation(pos+offsetTile);float ele2=elevation(pos-offsetTile);float ele_max=max(ele_line,0.5*(ele1+ele2));float ele=ele_max-ele0+ele1+a_z_offset ;gl_Position=u_matrix*vec4(pos+offsetTile,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*0.1*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
float a_uv_x=a_packed[0];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef LINE_JOIN_NONE
v_width=floorwidth+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:dn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:dn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:dn("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:dn("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:dn(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:dn(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+(u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#else
z+=u_pitch_with_map ? (u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
}`),terrainRaster:dn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:dn("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:dn(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,pg),skyboxGradient:dn(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,pg),skyboxCapture:dn(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:dn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(raster.rgb*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:dn(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;
#ifndef NATIVE
c=dither(c,gl_FragCoord.xy+u_temporal_offset);
#endif
glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:dn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:dn(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:dn(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),occlusion:dn("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function vh(m,a){const u=m.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let g of u)if(g=g.trim(),g[0]==="#"&&g.includes("if")&&!g.includes("endif")){g=g.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const x=g.split(" ");for(const w of x)a.includes(w)||a.push(w)}}function dn(m,a){const u=/#include\s+"([^"]+)"/g,g=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let x=a.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);x&&(x=x.map(N=>{const Q=N.split(" ");return Q[Q.length-1]}),x=[...new Set(x)]);const w={},S=[],k=[];if(m=m.replace(u,(N,Q)=>(k.push(Q),"")),(a=a.replace(u,(N,Q)=>(S.push(Q),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let O=[...mg];vh(m,O),vh(a,O);for(const N of[...S,...k])gp[N]||console.error(`Undefined include: ${N}`),xd[N]||(xd[N]=[],vh(gp[N],xd[N])),O=[...O,...xd[N]];return{fragmentSource:m=m.replace(g,(N,Q,W,X,Y)=>(w[Y]=!0,Q==="define"?`
#ifndef HAS_UNIFORM_u_${Y}
in ${W} ${X} ${Y};
#else
uniform ${W} ${X} u_${Y};
#endif
`:Q==="initialize"?`
#ifdef HAS_UNIFORM_u_${Y}
    ${W} ${X} ${Y} = u_${Y};
#endif
`:Q==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${Y}
    in ${W} ${X} ${Y};
#endif
`:Q==="initialize-attribute"?"":void 0)),vertexSource:a=a.replace(g,(N,Q,W,X,Y)=>{const ae=X==="float"?"vec2":X,le=Y.match(/color/)?"color":ae;return Q==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${Y}
in ${W} ${X} a_${Y};
#endif
`:w[Y]?Q==="define"?`
#ifndef HAS_UNIFORM_u_${Y}
uniform lowp float u_${Y}_t;
in ${W} ${ae} a_${Y};
out ${W} ${X} ${Y};
#else
uniform ${W} ${X} u_${Y};
#endif
`:Q==="initialize"?le==="vec4"?`
#ifndef HAS_UNIFORM_u_${Y}
    ${Y} = a_${Y};
#else
    ${W} ${X} ${Y} = u_${Y};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Y}
    ${Y} = unpack_mix_${le}(a_${Y}, u_${Y}_t);
#else
    ${W} ${X} ${Y} = u_${Y};
#endif
`:Q==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${Y}
    in ${W} ${X} a_${Y};
    out ${W} ${X} ${Y};
#endif
`:Q==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${Y}
    ${Y} = a_${Y};
#endif
`:void 0:Q==="define"?`
#ifndef HAS_UNIFORM_u_${Y}
uniform lowp float u_${Y}_t;
in ${W} ${ae} a_${Y};
#else
uniform ${W} ${X} u_${Y};
#endif
`:Q==="define-instanced"?le==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${Y}0;
in vec4 a_${Y}1;
in vec4 a_${Y}2;
in vec4 a_${Y}3;
#else
uniform ${W} ${X} u_${Y};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${W} ${ae} a_${Y};
#else
uniform ${W} ${X} u_${Y};
#endif
`:Q==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${Y}
    ${W} ${X} ${Y} = a_${Y};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${Y}
    ${W} ${X} ${Y} = a_${Y};
#else
    ${W} ${X} ${Y} = u_${Y};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Y}
    ${W} ${X} ${Y} = unpack_mix_${le}(a_${Y}, u_${Y}_t);
#else
    ${W} ${X} ${Y} = u_${Y};
#endif
`}),staticAttributes:x,usedDefines:O,vertexIncludes:S,fragmentIncludes:k}}class bd{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(a,u,g,x,w,S,k,O){this.context=a;let N=this.boundPaintVertexBuffers.length!==x.length;for(let W=0;!N&&W<x.length;W++)this.boundPaintVertexBuffers[W]!==x[W]&&(N=!0);let Q=this.boundDynamicVertexBuffers.length!==k.length;for(let W=0;!Q&&W<k.length;W++)this.boundDynamicVertexBuffers[W]!==k[W]&&(Q=!0);if(!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==g||N||Q||this.boundIndexBuffer!==w||this.boundVertexOffset!==S)this.freshBind(u,g,x,w,S,k,O);else{a.bindVertexArrayOES.set(this.vao);for(const W of k)W&&(W.bind(),O&&W.instanceCount&&W.setVertexAttribDivisor(a.gl,u,O));w&&w.dynamicDraw&&w.bind()}}freshBind(a,u,g,x,w,S,k){const O=a.numAttributes,N=this.context,Q=N.gl;this.vao&&this.destroy(),this.vao=N.gl.createVertexArray(),N.bindVertexArrayOES.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=x,this.boundVertexOffset=w,this.boundDynamicVertexBuffers=S,u.enableAttributes(Q,a),u.bind(),u.setVertexAttribPointers(Q,a,w);for(const W of g)W.enableAttributes(Q,a),W.bind(),W.setVertexAttribPointers(Q,a,w);for(const W of S)W&&(W.enableAttributes(Q,a),W.bind(),W.setVertexAttribPointers(Q,a,w),k&&W.instanceCount&&W.setVertexAttribDivisor(Q,a,k));x&&x.bind(),N.currentNumAttributes=O}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function vp(m,a){const u=Math.pow(2,a.canonical.z),g=a.canonical.y;return[new o.a5(0,g/u).toLngLat().lat,new o.a5(0,(g+1)/u).toLngLat().lat]}function yg(m,a,u,g,x,w,S){const k=m.context,O=k.gl,N=u.hillshadeFBO;if(!N)return;m.prepareDrawTile();const Q=m.isTileAffectedByFog(a),W=m.getOrCreateProgram("hillshade",{overrideFog:Q});k.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,N.colorAttachment.get());const X=((ce,Ae,Be,Te)=>{const be=Be.paint.get("hillshade-shadow-color"),Me=Be.paint.get("hillshade-highlight-color"),Fe=Be.paint.get("hillshade-accent-color"),ze=Be.paint.get("hillshade-emissive-strength");let Le=o.bB(Be.paint.get("hillshade-illumination-direction"));if(Be.paint.get("hillshade-illumination-anchor")==="viewport")Le-=ce.transform.angle;else if(ce.style&&ce.style.enable3dLights()&&ce.style.directionalLight){const Xe=ce.style.directionalLight.properties.get("direction"),je=o.c7(Xe.x,Xe.y,Xe.z);Le=o.bB(je[1])}const Ve=!ce.options.moving;return{u_matrix:Te||ce.transform.calculateProjMatrix(Ae.tileID.toUnwrapped(),Ve),u_image:0,u_latrange:vp(0,Ae.tileID),u_light:[Be.paint.get("hillshade-exaggeration"),Le],u_shadow:be.toRenderColor(Be.lut),u_highlight:Me.toRenderColor(Be.lut),u_emissive_strength:ze,u_accent:Fe.toRenderColor(Be.lut)}})(m,u,g,m.terrain?a.projMatrix:null);m.uploadCommonUniforms(k,W,a.toUnwrapped());const{tileBoundsBuffer:Y,tileBoundsIndexBuffer:ae,tileBoundsSegments:le}=m.getTileBoundsBuffers(u);W.draw(m,O.TRIANGLES,x,w,S,pr.disabled,X,g.id,Y,ae,le)}function vg(m,a,u){if(!a.needsDEMTextureUpload)return;const g=m.context,x=g.gl;g.pixelStoreUnpackPremultiplyAlpha.set(!1),a.demTexture=a.demTexture||m.getTileTexture(u.stride);const w=u.getPixels();a.demTexture?a.demTexture.update(w,{premultiply:!1}):a.demTexture=new o.T(g,w,x.R32F,{premultiply:!1}),a.needsDEMTextureUpload=!1}function _p(m,a,u){const g=m.context,x=g.gl;if(!a.dem)return;const w=a.dem;if(g.activeTexture.set(x.TEXTURE1),vg(m,a,w),!a.demTexture)return;a.demTexture.bind(x.NEAREST,x.CLAMP_TO_EDGE);const S=w.dim;g.activeTexture.set(x.TEXTURE0);let k=a.hillshadeFBO;if(!k){const X=new o.T(g,{width:S,height:S,data:null},x.RGBA8);X.bind(x.LINEAR,x.CLAMP_TO_EDGE),k=a.hillshadeFBO=g.createFramebuffer(S,S,!0,"renderbuffer"),k.colorAttachment.set(X.texture)}g.bindFramebuffer.set(k.framebuffer),g.viewport.set([0,0,S,S]);const{tileBoundsBuffer:O,tileBoundsIndexBuffer:N,tileBoundsSegments:Q}=m.getMercatorTileBoundsBuffers(),W=[];m.linearFloatFilteringSupported()&&W.push("TERRAIN_DEM_FLOAT_FORMAT"),m.getOrCreateProgram("hillshadePrepare",{defines:W}).draw(m,x.TRIANGLES,Se.disabled,At.disabled,ue.unblended,pr.disabled,((X,Y)=>{const ae=Y.stride,le=o.a6.mat4.create();return o.a6.mat4.ortho(le,0,o.ab,-o.ab,0,0,1),o.a6.mat4.translate(le,le,[0,-o.ab,0]),{u_matrix:le,u_image:1,u_dimension:[ae,ae],u_zoom:X.overscaledZ}})(a.tileID,w),u.id,O,N,Q),a.needsHillshadePrepare=!1}class Hn{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class _v extends Hn{getDefault(){return o.bz.transparent}set(a){const u=this.current;(a.r!==u.r||a.g!==u.g||a.b!==u.b||a.a!==u.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Ew extends Hn{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class xv extends Hn{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class _g extends Hn{getDefault(){return[!0,!0,!0,!0]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||a[3]!==u[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class xp extends Hn{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class Tw extends Hn{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class Iw extends Hn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const u=this.current;(a.func!==u.func||a.ref!==u.ref||a.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class Fw extends Hn{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class wd extends Hn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;a?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=a,this.dirty=!1}}class Pw extends Hn{getDefault(){return[0,1]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class KF extends Hn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;a?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=a,this.dirty=!1}}class WF extends Hn{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class qF extends Hn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;a?u.enable(u.BLEND):u.disable(u.BLEND),this.current=a,this.dirty=!1}}class bv extends Hn{getDefault(){const a=this.gl;return[a.ONE,a.ZERO,a.ONE,a.ZERO]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||a[3]!==u[3]||this.dirty)&&(this.gl.blendFuncSeparate(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class wv extends Hn{getDefault(){return o.bz.transparent}set(a){const u=this.current;(a.r!==u.r||a.g!==u.g||a.b!==u.b||a.a!==u.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Bv extends Hn{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(a,a),this.current=a,this.dirty=!1)}}class Cv extends Hn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;a?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=a,this.dirty=!1}}class Mw extends Hn{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class Rw extends Hn{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}let XF=class extends Hn{getDefault(){return null}set(m){(m!==this.current||this.dirty)&&(this.gl.useProgram(m),this.current=m,this.dirty=!1)}};class bp extends Hn{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class wp extends Hn{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||a[3]!==u[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class kw extends Hn{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class sl extends Hn{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Sv extends Hn{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class xg extends Hn{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class bg extends Hn{getDefault(){return null}set(a){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Ev extends Hn{getDefault(){return null}set(a){this.gl&&(a!==this.current||this.dirty)&&(this.gl.bindVertexArray(a),this.current=a,this.dirty=!1)}}class Tv extends Hn{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class wg extends Hn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class Iv extends Hn{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class Bp extends Hn{constructor(a,u){super(a),this.context=a,this.parent=u}getDefault(){return null}}class Bg extends Bp{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class Fv extends Bp{attachment(){return this.gl.DEPTH_ATTACHMENT}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,this.attachment(),u.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Dw extends Bp{attachment(){return this.gl.DEPTH_ATTACHMENT}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,this.attachment(),u.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class Bd extends Fv{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const ZF=(m,a,u)=>({u_matrix:m,u_image0:0,u_skirt_height:a,u_ground_shadow_factor:u}),Lw=(m,a,u,g,x,w,S,k,O,N,Q,W,X,Y,ae,le)=>({u_proj_matrix:Float32Array.from(m),u_globe_matrix:a,u_normalize_matrix:Float32Array.from(g),u_merc_matrix:u,u_zoom_transition:x,u_merc_center:w,u_image0:0,u_frustum_tl:S,u_frustum_tr:k,u_frustum_br:O,u_frustum_bl:N,u_globe_pos:Q,u_globe_radius:W,u_viewport:X,u_grid_matrix:le?Float32Array.from(le):new Float32Array(9),u_skirt_height:Y,u_far_z_cutoff:ae});function Ow(m,a){return m!=null&&a!=null&&!(!m.hasData()||!a.hasData())&&m.demTexture!=null&&a.demTexture!=null&&m.tileID.key!==a.tileID.key}const Cd=new class{constructor(){this.operations={}}newMorphing(m,a,u,g,x){if(m in this.operations){const w=this.operations[m];w.to.tileID.key!==u.tileID.key&&(w.queued=u)}else this.operations[m]={startTime:g,phase:0,duration:x,from:a,to:u,queued:null}}getMorphValuesForProxy(m){if(!(m in this.operations))return null;const a=this.operations[m];return{from:a.from,to:a.to,phase:a.phase}}update(m){for(const a in this.operations){const u=this.operations[a];for(u.phase=(m-u.startTime)/u.duration;u.phase>=1||!this._validOp(u);)if(!this._nextOp(u,m)){delete this.operations[a];break}}}_nextOp(m,a){return!!m.queued&&(m.from=m.to,m.to=m.queued,m.queued=null,m.phase=0,m.startTime=a,!0)}_validOp(m){return m.from.hasData()&&m.to.hasData()}},Uw={0:null,1:"TERRAIN_VERTEX_MORPHING"};function zw(m,a,u){if(a===0)return 0;const g=a<1&&u===514?.25/a:1;return 6*Math.pow(1.5,22-m)*Math.max(a,1)*g}function Pv(m,a){const u=1<<m.z;return!a&&(m.x===0||m.x===u-1)||m.y===0||m.y===u-1}const Cp=m=>({u_matrix:m});function Cg(m,a,u,g,x){if(x>0){const w=o.q.now(),S=(w-m.timeAdded)/x,k=a?(w-a.timeAdded)/x:-1,O=u.getSource(),N=g.coveringZoomLevel({tileSize:O.tileSize,roundZoom:O.roundZoom}),Q=!a||Math.abs(a.tileID.overscaledZ-N)>Math.abs(m.tileID.overscaledZ-N),W=Q&&m.refreshedUponExpiration?1:o.ap(Q?S:1-k,0,1);return m.refreshedUponExpiration&&S>=1&&(m.refreshedUponExpiration=!1),a?{opacity:1,mix:1-W}:{opacity:W,mix:0}}return{opacity:1,mix:0}}class Sd extends wo{constructor(a){const u={type:"raster-dem",maxzoom:a.transform.maxZoom},g=new o.cd(o.ce(),null),x=wl("mock-dem",u,g,a.style);super("mock-dem",x,!1),x.setEventedParent(this),this._sourceLoaded=!0}_loadTile(a,u){a.state="loaded",u(null)}}class Vw extends wo{constructor(a){const u=wl("proxy",{type:"geojson",maxzoom:a.transform.maxZoom},new o.cd(o.ce(),null),a.style);super("proxy",u,!1),u.setEventedParent(this),this.map=this.getSource().map=a,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(a,u,g){if(a.freezeTileCoverage)return;this.transform=a;const x=a.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((w,S)=>{if(w[S.key]="",!this._tiles[S.key]){const k=new la(S,this._source.tileSize*S.overscaleFactor(),a.tileZoom);k.state="loaded",this._tiles[S.key]=k}return w},{});for(const w in this._tiles)w in x||(this.freeFBO(w),this._tiles[w].unloadVectorData(),delete this._tiles[w])}freeFBO(a){const u=this.proxyCachedFBO[a];if(u!==void 0){const g=Object.values(u);this.renderCachePool.push(...g),delete this.proxyCachedFBO[a]}}deallocRenderCache(){this.renderCache.forEach(a=>a.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Mv extends o.aA{constructor(a,u,g){super(a.overscaledZ,a.wrap,a.canonical.z,a.canonical.x,a.canonical.y),this.proxyTileKey=u,this.projMatrix=g}}class Rv extends o.cE{constructor(a,u){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},a.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),a.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),a.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=a,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[g,x,w]=function(O){const N=new o.a_,Q=new o.aO,W=131;N.reserve(17161),Q.reserve(33800);const X=o.ab/128,Y=o.ab+X/2,ae=Y+X;for(let ce=-X;ce<ae;ce+=X)for(let Ae=-X;Ae<ae;Ae+=X){const Be=Ae<0||Ae>Y||ce<0||ce>Y?24575:0,Te=o.ap(Math.round(Ae),0,o.ab),be=o.ap(Math.round(ce),0,o.ab);N.emplaceBack(Te+Be,be)}const le=(ce,Ae)=>{const Be=Ae*W+ce;Q.emplaceBack(Be+1,Be,Be+W),Q.emplaceBack(Be+W,Be+W+1,Be+1)};for(let ce=1;ce<129;ce++)for(let Ae=1;Ae<129;Ae++)le(Ae,ce);return[0,129].forEach(ce=>{for(let Ae=0;Ae<130;Ae++)le(Ae,ce),le(ce,Ae)}),[N,Q,32768]}(),S=a.context;this.gridBuffer=S.createVertexBuffer(g,o.b0.members),this.gridIndexBuffer=S.createIndexBuffer(x),this.gridSegments=o.b1.simpleSegment(0,0,g.length,x.length),this.gridNoSkirtSegments=o.b1.simpleSegment(0,0,g.length,w),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Vw(u.map),this.orthoMatrix=o.a6.mat4.create(),o.a6.mat4.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,o.ab,0,o.ab,0,1);const k=S.gl;this._overlapStencilMode=new At({func:k.GEQUAL,mask:255},0,255,k.KEEP,k.KEEP,k.REPLACE),this._previousZoom=a.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=u,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Sd(u.map),this._pendingGroundEffectLayers=[]}set style(a){a.on("data",this._onStyleDataEvent.bind(this)),this._style=a,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(a,u,g){if(a&&a.terrain){this._style!==a&&(this.style=a,this._evaluationZoom=void 0);const x=a.terrain.properties,w=a.terrain.drapeRenderMode===0,S=a.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=o.q.now();const k=a.terrain&&a.terrain.scope,O=x.get("source"),N=w?this._mockSourceCache:a.getSourceCache(O,k);if(!N)return void o.w(`Couldn't find terrain source "${O}".`);if(this.sourceCache=N,this._exaggeration=S?this.calculateExaggeration(u):x.get("exaggeration"),!u.projection.requiresDraping&&S&&this._exaggeration===0)return void this._disable();this.enabled=!0;const Q=()=>{this.sourceCache.used&&o.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const W=this.getScaledDemTileSize();this.sourceCache.update(u,W,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,Q(),this._initializing=!0),Q(),u.updateElevation(!0,g),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(u),this._emptyDEMTextureDirty=!0,this._previousZoom=u.zoom}else this._disable()}calculateExaggeration(a){const u=this._previousCameraAltitude,g=a.getFreeCameraOptions().position.z/a.pixelsPerMeter*a.worldSize;this._previousCameraAltitude=g;const x=u!=null?g-u:Number.MAX_VALUE;if(Math.abs(x)<2)return this._exaggeration;const w=a.zoom,S=this._style.terrain;if(!this._previousUpdateTimestamp)return S.getExaggeration(w);let k=w-this._previousZoom;const O=this._previousUpdateTimestamp;let N=w;this._evaluationZoom!=null&&(N=this._evaluationZoom,Math.abs(w-N)>.5&&(k=.5*(w-N+k)),k*x<0&&(N+=k)),this._evaluationZoom=N;const Q=S.getExaggeration(N),W=Q===S.getExaggeration(Math.max(0,N-.1));if(W&&Math.abs(Q-this._exaggeration)<.01)return Q;let X=Math.min(.1,.00375*(this._updateTimestamp-O));return(W||Q<.1||Math.abs(k)<1e-4)&&(X=Math.min(.2,4*X)),o.aa(this._exaggeration,Q,X)}resetTileLookupCache(a){this._findCoveringTileCache[a]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(a){a.coord&&a.dataType==="source"?this._clearRenderCacheForTile(a.sourceCacheId,a.coord):a.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const a in this._style._mergedSourceCaches)this._style._mergedSourceCaches[a].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(a=>a.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const a=2*this.proxySourceCache.getSource().tileSize;return[a,a]}set useVertexMorphing(a){this._useVertexMorphing=a}updateTileBinding(a){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const u=this.proxySourceCache,g=this.painter.transform;this._initializing&&(this._initializing=g._centerAltitude===0&&this.getAtPointOrZero(o.a5.fromLngLat(g.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const x=this.proxyCoords=u.getIds().map(O=>{const N=u.getTileByID(O).tileID;return N.projMatrix=g.calculateProjMatrix(N.toUnwrapped()),N});(function(O,N){const Q=N.transform.pointCoordinate(N.transform.getCameraPoint()),W=new o.P(Q.x,Q.y);O.sort((X,Y)=>{if(Y.overscaledZ-X.overscaledZ)return Y.overscaledZ-X.overscaledZ;const ae=new o.P(X.canonical.x+(1<<X.canonical.z)*X.wrap,X.canonical.y),le=new o.P(Y.canonical.x+(1<<Y.canonical.z)*Y.wrap,Y.canonical.y),ce=W.mult(1<<X.canonical.z);return ce.x-=.5,ce.y-=.5,ce.distSqr(ae)-ce.distSqr(le)})})(x,this.painter);const w=this.proxyToSource||{};this.proxyToSource={},x.forEach(O=>{this.proxyToSource[O.key]={}}),this.terrainTileForTile={};const S=this._style._mergedSourceCaches;for(const O in S){const N=S[O];if(!N.used||(N!==this.sourceCache&&this.resetTileLookupCache(N.id),this._setupProxiedCoordsForOrtho(N,a[O],w),N.usedForTerrain))continue;const Q=a[O];N.getSource().reparseOverscaled&&this._assignTerrainTiles(Q)}this.proxiedCoords[u.id]=x.map(O=>new Mv(O,O.key,this.orthoMatrix)),this._assignTerrainTiles(x),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(w),this.renderingToTexture=!1;const k={};this._visibleDemTiles=[];for(const O of this.proxyCoords){const N=this.terrainTileForTile[O.key];if(!N)continue;const Q=N.tileID.key;Q in k||(this._visibleDemTiles.push(N),k[Q]=Q)}}_assignTerrainTiles(a){this._initializing||a.forEach(u=>{if(this.terrainTileForTile[u.key])return;const g=this._findTileCoveringTileID(u,this.sourceCache);g&&(this.terrainTileForTile[u.key]=g)})}_prepareDEMTextures(){const a=this.painter.context,u=a.gl;for(const g in this.terrainTileForTile){const x=this.terrainTileForTile[g],w=x.dem;!w||x.demTexture&&!x.needsDEMTextureUpload||(a.activeTexture.set(u.TEXTURE1),vg(this.painter,x,w))}}_prepareDemTileUniforms(a,u,g,x){if(!u||u.demTexture==null)return!1;const w=a.tileID.canonical,S=Math.pow(2,u.tileID.canonical.z-w.z),k=x||"";return g[`u_dem_tl${k}`]=[w.x*S%1,w.y*S%1],g[`u_dem_scale${k}`]=S,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let a=0;const u=this._visibleDemTiles.reduce((g,x)=>{if(!x.dem)return g;const w=x.dem.tree.minimums[0];return w>0&&a++,g+w},0);return a?u/a:0}_updateEmptyDEMTexture(){const a=this.painter.context,u=a.gl;a.activeTexture.set(u.TEXTURE2);const g=this._getLoadedAreaMinimum(),x=new o.cF({width:1,height:1},new Float32Array([g]));this._emptyDEMTextureDirty=!1;let w=this._emptyDEMTexture;return w?w.update(x,{premultiply:!1}):w=this._emptyDEMTexture=new o.T(a,x,u.R32F,{premultiply:!1}),w}setupElevationDraw(a,u,g){const x=this.painter.context,w=x.gl,S={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};S.u_exaggeration=this.exaggeration();let k=null,O=null,N=1;if(g&&g.morphing&&this._useVertexMorphing){const Y=g.morphing.srcDemTile,ae=g.morphing.dstDemTile;N=g.morphing.phase,Y&&ae&&(this._prepareDemTileUniforms(a,Y,S,"_prev")&&(O=Y),this._prepareDemTileUniforms(a,ae,S)&&(k=ae))}const Q=Y=>Y&&Y.demTexture&&this.painter.linearFloatFilteringSupported()?w.LINEAR:w.NEAREST;let W=null;var X;if(this.enabled?O&&k?(W=k.demTexture,x.activeTexture.set(w.TEXTURE4),O.demTexture.bind(Q(O),w.CLAMP_TO_EDGE),S.u_dem_lerp=N):(k=this.terrainTileForTile[a.tileID.key],W=this._prepareDemTileUniforms(a,k,S)?k.demTexture:this.emptyDEMTexture):W=this.emptyDEMTexture,x.activeTexture.set(w.TEXTURE2),W&&(S.u_dem_size=(X=W).size[0]===1?1:X.size[0]-2,W.bind(Q(k),w.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(g&&g.useDepthForOcclusion,u,S),g&&g.useMeterToDem&&k){const Y=(1<<k.tileID.canonical.z)*o.bD(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;S.u_meter_to_dem=Y}if(g&&g.labelPlaneMatrixInv&&(S.u_label_plane_matrix_inv=g.labelPlaneMatrixInv),u.setTerrainUniformValues(x,S),this.painter.transform.projection.name==="globe"){const Y=this.globeUniformValues(this.painter.transform,a.tileID.canonical,g&&g.useDenormalizedUpVectorScale);u.setGlobeUniformValues(x,Y)}}globeUniformValues(a,u,g){const x=a.projection;return{u_tile_tl_up:x.upVector(u,0,0),u_tile_tr_up:x.upVector(u,o.ab,0),u_tile_br_up:x.upVector(u,o.ab,o.ab),u_tile_bl_up:x.upVector(u,0,o.ab),u_tile_up_scale:g?o.cG(1):x.upVectorScale(u,a.center.lat,a.worldSize).metersToTile}}renderToBackBuffer(a){const u=this.painter,g=this.painter.context;a.length!==0&&(g.bindFramebuffer.set(null),g.viewport.set([0,0,u.width,u.height]),u.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(x,w,S,k,O){if(x.transform.projection.name==="globe")(function(N,Q,W,X,Y){const ae=N.context,le=ae.gl;let ce,Ae;const Be=N.transform,Te=o.cx(N,ae,Be),be=(nt,mt)=>{if(Ae===mt)return;const Et=[Uw[mt],"PROJECTION_GLOBE_VIEW"];Te&&Et.push("CUSTOM_ANTIALIASING");const pt=N.isTileAffectedByFog(nt);ce=N.getOrCreateProgram("globeRaster",{defines:Et,overrideFog:pt}),Ae=mt},Me=N.colorModeForRenderPass(),Fe=new Se(le.LEQUAL,Se.ReadWrite,N.depthRangeFor3D);Cd.update(Y);const ze=o.cy(Be),Le=[o.am(Be.center.lng),o.at(Be.center.lat)],Ve=N.globeSharedBuffers,Xe=[Be.width*o.q.devicePixelRatio,Be.height*o.q.devicePixelRatio],je=Float32Array.from(Be.globeMatrix),He={useDenormalizedUpVectorScale:!0};{const nt=N.transform,mt=zw(nt.zoom,Q.exaggeration(),Q.sourceCache._source.tileSize);Ae=-1;const Et=le.TRIANGLES;for(const pt of X){const kt=W.getTile(pt),it=At.disabled,wt=Q.prevTerrainTileForTile[pt.key],bt=Q.terrainTileForTile[pt.key];Ow(wt,bt)&&Cd.newMorphing(pt.key,wt,bt,Y,250),ae.activeTexture.set(le.TEXTURE0),kt.texture&&kt.texture.bind(le.LINEAR,le.CLAMP_TO_EDGE);const Dt=Cd.getMorphValuesForProxy(pt.key),Ut=Dt?1:0;Dt&&o.C(He,{morphing:{srcDemTile:Dt.from,dstDemTile:Dt.to,phase:o.cw(Dt.phase)}});const St=o.cz(pt.canonical),Ft=o.cA(St.getCenter().lat),gr=o.cB(pt.canonical,St,Ft,nt.worldSize/nt._pixelsPerMercatorPixel),Nt=o.b5(o.cC(pt.canonical)),Jt=Lw(nt.expandedFarZProjMatrix,je,ze,Nt,o.a9(nt.zoom),Le,nt.frustumCorners.TL,nt.frustumCorners.TR,nt.frustumCorners.BR,nt.frustumCorners.BL,nt.globeCenterInViewSpace,nt.globeRadius,Xe,mt,nt._farZ,gr);if(be(pt,Ut),ce&&(Q.setupElevationDraw(kt,ce,He),N.uploadCommonUniforms(ae,ce,pt.toUnwrapped()),Ve)){const[Br,sr,xr]=Ve.getGridBuffers(Ft,mt!==0);ce.draw(N,Et,Fe,it,Me,pr.backCCW,Jt,"globe_raster",Br,sr,xr)}}}if(Ve&&(N.renderDefaultNorthPole||N.renderDefaultSouthPole)){const nt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Te&&nt.push("CUSTOM_ANTIALIASING"),ce=N.getOrCreateProgram("globeRaster",{defines:nt});for(const mt of X){const{x:Et,y:pt,z:kt}=mt.canonical,it=pt===0,wt=pt===(1<<kt)-1,[bt,Dt,Ut,St]=Ve.getPoleBuffers(kt,!1);if(St&&(it||wt)){const Ft=W.getTile(mt);ae.activeTexture.set(le.TEXTURE0),Ft.texture&&Ft.texture.bind(le.LINEAR,le.CLAMP_TO_EDGE);let gr=o.cD(kt,Et,Be);const Nt=o.b5(o.cC(mt.canonical)),Jt=(Br,sr)=>Br.draw(N,le.TRIANGLES,Fe,At.disabled,Me,pr.disabled,Lw(Be.expandedFarZProjMatrix,gr,gr,Nt,0,Le,Be.frustumCorners.TL,Be.frustumCorners.TR,Be.frustumCorners.BR,Be.frustumCorners.BL,Be.globeCenterInViewSpace,Be.globeRadius,Xe,0,Be._farZ),"globe_pole_raster",sr,Ut,St);Q.setupElevationDraw(Ft,ce,He),N.uploadCommonUniforms(ae,ce,mt.toUnwrapped()),it&&N.renderDefaultNorthPole&&Jt(ce,bt),wt&&N.renderDefaultSouthPole&&(gr=o.a6.mat4.scale(o.a6.mat4.create(),gr,[1,-1,1]),Jt(ce,Dt))}}}})(x,w,S,k,O);else{const N=x.context,Q=N.gl;let W,X;const Y=x.shadowRenderer,ae=Pu(x,x.longestCutoffRange),le=Me=>{if(X===Me)return;const Fe=[];Fe.push(Uw[Me]),ae.shouldRenderCutoff&&Fe.push("RENDER_CUTOFF"),W=x.getOrCreateProgram("terrainRaster",{defines:Fe}),X=Me},ce=x.colorModeForRenderPass(),Ae=new Se(Q.LEQUAL,Se.ReadWrite,x.depthRangeFor3D);Cd.update(O);const Be=x.transform,Te=zw(Be.zoom,w.exaggeration(),w.sourceCache._source.tileSize);let be=[0,0,0];if(Y){const Me=x.style.directionalLight,Fe=x.style.ambientLight;Me&&Fe&&(be=Ag(x.style,Me,Fe))}{X=-1;const Me=Q.TRIANGLES,[Fe,ze]=[w.gridIndexBuffer,w.gridSegments];for(const Le of k){const Ve=S.getTile(Le),Xe=At.disabled,je=w.prevTerrainTileForTile[Le.key],He=w.terrainTileForTile[Le.key];Ow(je,He)&&Cd.newMorphing(Le.key,je,He,O,250),N.activeTexture.set(Q.TEXTURE0),Ve.texture&&Ve.texture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE);const nt=Cd.getMorphValuesForProxy(Le.key),mt=nt?1:0;let Et;nt&&(Et={morphing:{srcDemTile:nt.from,dstDemTile:nt.to,phase:o.cw(nt.phase)}});const pt=ZF(Le.projMatrix,Pv(Le.canonical,Be.renderWorldCopies)?Te/10:Te,be);if(le(mt),!W)continue;w.setupElevationDraw(Ve,W,Et);const kt=Le.toUnwrapped();Y&&Y.setupShadows(kt,W),x.uploadCommonUniforms(N,W,kt,null,ae),W.draw(x,Me,Ae,Xe,ce,pr.backCCW,pt,"terrain_raster",w.gridBuffer,Fe,ze)}}}}(u,this,this.proxySourceCache,a,this._updateTimestamp),this.renderingToTexture=!0,u.gpuTimingDeferredRenderEnd(),a.splice(0,a.length))}renderBatch(a){if(this._drapedRenderBatches.length===0)return a+1;this.renderingToTexture=!0;const u=this.painter,g=this.painter.context,x=this.proxySourceCache,w=this.proxiedCoords[x.id],S=this._drapedRenderBatches.shift(),k=u.style.order,O=[];let N=0;for(const Q of w){const W=x.getTileByID(Q.proxyTileKey),X=x.proxyCachedFBO[Q.key]?x.proxyCachedFBO[Q.key][a]:void 0,Y=X!==void 0?x.renderCache[X]:this.pool[N++],ae=X!==void 0;if(W.texture=Y.tex,ae&&!Y.dirty){O.push(W.tileID);continue}let le;g.bindFramebuffer.set(Y.fb.framebuffer),this.renderedToTile=!1,Y.dirty&&(g.clear({color:o.bz.transparent,stencil:0}),Y.dirty=!1);for(let ce=S.start;ce<=S.end;++ce){const Ae=u.style._mergedLayers[k[ce]];if(Ae.isHidden(u.transform.zoom))continue;const Be=u.style.getLayerSourceCache(Ae),Te=Be?this.proxyToSource[Q.key][Be.id]:[Q];if(!Te)continue;const be=Te;g.viewport.set([0,0,Y.fb.width,Y.fb.height]),le!==(Be?Be.id:null)&&(this._setupStencil(Y,Te,Ae,Be),le=Be?Be.id:null),u.renderLayer(u,Be,Ae,be)}if(this._drapedRenderBatches.length===0)for(const ce of this._pendingGroundEffectLayers){const Ae=u.style._mergedLayers[k[ce]];if(Ae.isHidden(u.transform.zoom))continue;const Be=u.style.getLayerSourceCache(Ae),Te=Be?this.proxyToSource[Q.key][Be.id]:[Q];if(!Te)continue;const be=Te;g.viewport.set([0,0,Y.fb.width,Y.fb.height]),le!==(Be?Be.id:null)&&(this._setupStencil(Y,Te,Ae,Be),le=Be?Be.id:null),u.renderLayer(u,Be,Ae,be)}this.renderedToTile?(Y.dirty=!0,O.push(W.tileID)):ae||--N,N===5&&(N=0,this.renderToBackBuffer(O))}return this.renderToBackBuffer(O),this.renderingToTexture=!1,g.bindFramebuffer.set(null),g.viewport.set([0,0,u.width,u.height]),S.end+1}postRender(){}isLayerOrderingCorrect(a){const u=a.order.length;let g=-1,x=u;for(let w=0;w<u;++w)this._style.isLayerDraped(a._mergedLayers[a.order[w]])?g=Math.max(g,w):x=Math.min(x,w);return x>g}getMinElevationBelowMSL(){let a=0;return this._visibleDemTiles.filter(u=>u.dem).forEach(u=>{a=Math.min(a,u.dem.tree.minimums[0])}),a===0?a:(a-30)*this._exaggeration}raycast(a,u,g){if(!this._visibleDemTiles)return null;const x=this._visibleDemTiles.filter(w=>w.dem).map(w=>{const S=w.tileID,k=1<<S.overscaledZ,{x:O,y:N}=S.canonical,Q=O/k,W=(O+1)/k,X=N/k,Y=(N+1)/k;return{minx:Q,miny:X,maxx:W,maxy:Y,t:w.dem.tree.raycastRoot(Q,X,W,Y,a,u,g),tile:w}});x.sort((w,S)=>(w.t!==null?w.t:Number.MAX_VALUE)-(S.t!==null?S.t:Number.MAX_VALUE));for(const w of x){if(w.t==null)return null;const S=w.tile.dem.tree.raycast(w.minx,w.miny,w.maxx,w.maxy,a,u,g);if(S!=null)return S}return null}_createFBO(){const a=this.painter.context,u=a.gl,g=this.drapeBufferSize;a.activeTexture.set(u.TEXTURE0);const x=new o.T(a,{width:g[0],height:g[1],data:null},u.RGBA8);x.bind(u.LINEAR,u.CLAMP_TO_EDGE);const w=a.createFramebuffer(g[0],g[1],!0,null);return w.colorAttachment.set(x.texture),w.depthAttachment=new Bd(a,w.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=a.createRenderbuffer(a.gl.DEPTH_STENCIL,g[0],g[1]),this._stencilRef=0,w.depthAttachment.set(this._sharedDepthStencil),a.clear({stencil:0})):w.depthAttachment.set(this._sharedDepthStencil),a.extTextureFilterAnisotropic&&u.texParameterf(u.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax),{fb:w,tex:x,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const a in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[a].hasTransition())return!0;return this._style.order.some(a=>{const u=this._style._mergedLayers[a],g=u.isHidden(this.painter.transform.zoom);return u.type==="hillshade"||u.type==="custom"?!g&&u.shouldRedrape():!g&&u.hasTransition()})}_clearLineLayersFromRenderCache(){let a=!1;for(const g of this._style.getSources())if(g instanceof dh){a=!0;break}if(!a)return;const u={};for(let g=0;g<this._style.order.length;++g){const x=this._style._mergedLayers[this._style.order[g]],w=this._style.getLayerSourceCache(x);if(w&&!u[w.id]&&!x.isHidden(this.painter.transform.zoom)&&x.type==="line"&&x.widthExpression()instanceof o.a4){u[w.id]=!0;for(const S of this.proxyCoords){const k=this.proxyToSource[S.key][w.id];if(k)for(const O of k)this._clearRenderCacheForTile(w.id,O)}}}}_clearRasterLayersFromRenderCache(){let a=!1;for(const g in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[g]._source instanceof Xl){a=!0;break}if(!a)return;const u={};for(let g=0;g<this._style.order.length;++g){const x=this._style._mergedLayers[this._style.order[g]],w=this._style.getLayerSourceCache(x);if(!w||u[w.id]||x.isHidden(this.painter.transform.zoom)||x.type!=="raster")continue;const S=x.paint.get("raster-fade-duration");for(const k of this.proxyCoords){const O=this.proxyToSource[k.key][w.id];if(O)for(const N of O){const Q=Cg(w.getTile(N),w.findLoadedParent(N,0),w,this.painter.transform,S);(Q.opacity!==1||Q.mix!==0)&&this._clearRenderCacheForTile(w.id,N)}}}}_setupDrapedRenderBatches(){const a=this._style.order,u=a.length;if(u===0)return;const g=[];this._pendingGroundEffectLayers=[];let x,w=0,S=this._style._mergedLayers[a[w]];for(;!this._style.isLayerDraped(S)&&S.isHidden(this.painter.transform.zoom)&&++w<u;)S=this._style._mergedLayers[a[w]];for(;w<u;++w){const k=this._style._mergedLayers[a[w]];k.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(k)?x===void 0&&(x=w):(k.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(w),x!==void 0&&(g.push({start:x,end:w-1}),x=void 0)))}if(x!==void 0&&g.push({start:x,end:w-1}),g.length!==0){const k=g[g.length-1];this._pendingGroundEffectLayers.every(O=>O>k.end)||o.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=g}_setupRenderCache(a){const u=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,u.renderCache.length>u.renderCachePool.length){const S=Object.values(u.proxyCachedFBO);u.proxyCachedFBO={};for(let k=0;k<S.length;++k){const O=Object.values(S[k]);u.renderCachePool.push(...O)}}return}this._clearRasterLayersFromRenderCache();const g=this.proxyCoords,x=this._tilesDirty;for(let S=g.length-1;S>=0;S--){const k=g[S];if(u.getTileByID(k.key),u.proxyCachedFBO[k.key]!==void 0){const O=a[k.key],N=this.proxyToSource[k.key];let Q=0;for(const W in N){const X=N[W],Y=O[W];if(!Y||Y.length!==X.length||X.some((ae,le)=>ae!==Y[le]||x[W]&&x[W].hasOwnProperty(ae.key))){Q=-1;break}++Q}for(const W in u.proxyCachedFBO[k.key])u.renderCache[u.proxyCachedFBO[k.key][W]].dirty=Q<0||Q!==Object.values(O).length}}const w=[...this._drapedRenderBatches];w.sort((S,k)=>k.end-k.start-(S.end-S.start));for(const S of w)for(const k of g){if(u.proxyCachedFBO[k.key])continue;let O=u.renderCachePool.pop();O===void 0&&u.renderCache.length<50&&(O=u.renderCache.length,u.renderCache.push(this._createFBO())),O!==void 0&&(u.proxyCachedFBO[k.key]={},u.proxyCachedFBO[k.key][S.start]=O,u.renderCache[O].dirty=!0)}this._tilesDirty={}}_setupStencil(a,u,g,x){if(!x||!this._sourceTilesOverlap[x.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const w=this.painter.context,S=w.gl;if(u.length<=1)return void(this._overlapStencilType=!1);let k;if(g.isTileClipped())k=u.length,this._overlapStencilMode.test={func:S.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(u[0].overscaledZ>u[u.length-1].overscaledZ))return void(this._overlapStencilType=!1);k=1,this._overlapStencilMode.test={func:S.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+k>255&&(w.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=k,this._overlapStencilMode.ref=this._stencilRef,g.isTileClipped()&&this._renderTileClippingMasks(u,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(a){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[a.key]),this._overlapStencilMode):At.disabled}_renderTileClippingMasks(a,u){const g=this.painter,x=this.painter.context,w=x.gl;g._tileClippingMaskIDs={},x.setColorMode(ue.disabled),x.setDepthMode(Se.disabled);const S=g.getOrCreateProgram("clippingMask");for(const k of a){const O=g._tileClippingMaskIDs[k.key]=--u;S.draw(g,w.TRIANGLES,Se.disabled,new At({func:w.ALWAYS,mask:0},O,255,w.KEEP,w.KEEP,w.REPLACE),ue.disabled,pr.disabled,Cp(k.projMatrix),"$clipping",g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}}pointCoordinate(a){const u=this.painter.transform;if(a.x<0||a.x>u.width||a.y<0||a.y>u.height)return null;const g=[a.x,a.y,1,1];o.a6.vec4.transformMat4(g,g,u.pixelMatrixInverse),o.a6.vec4.scale(g,g,1/g[3]),g[0]/=u.worldSize,g[1]/=u.worldSize;const x=u._camera.position,w=o.bD(1,u.center.lat),S=[x[0],x[1],x[2]/w,0],k=o.a6.vec3.subtract([],g.slice(0,3),S);o.a6.vec3.normalize(k,k);const O=this.raycast(S,k,this._exaggeration);return O!==null&&O?(o.a6.vec3.scaleAndAdd(S,S,k,O),S[3]=S[2],S[2]*=w,S):null}_setupProxiedCoordsForOrtho(a,u,g){if(a.getSource()instanceof o.aD)return this._setupProxiedCoordsForImageSource(a,u,g);this._findCoveringTileCache[a.id]=this._findCoveringTileCache[a.id]||{};const x=this.proxiedCoords[a.id]=[],w=this.proxyCoords;for(let O=0;O<w.length;O++){const N=w[O],Q=this._findTileCoveringTileID(N,a);if(Q){const W=this._createProxiedId(N,Q,g[N.key]&&g[N.key][a.id]);x.push(W),this.proxyToSource[N.key][a.id]=[W]}}let S=!1;const k=new Set;for(let O=0;O<u.length;O++){const N=a.getTile(u[O]);if(!N||!N.hasData())continue;const Q=this._findTileCoveringTileID(N.tileID,this.proxySourceCache);if(Q&&Q.tileID.canonical.z!==N.tileID.canonical.z){const W=this.proxyToSource[Q.tileID.key][a.id],X=this._createProxiedId(Q.tileID,N,g[Q.tileID.key]&&g[Q.tileID.key][a.id]);W?W.splice(W.length-1,0,X):this.proxyToSource[Q.tileID.key][a.id]=[X];const Y=this.proxyToSource[Q.tileID.key][a.id];k.has(Y)||k.add(Y),x.push(X),S=!0}}if(this._sourceTilesOverlap[a.id]=S,S&&this._debugParams.sortTilesHiZFirst)for(const O of k)O.sort((N,Q)=>Q.overscaledZ-N.overscaledZ)}_setupProxiedCoordsForImageSource(a,u,g){if(!a.getSource().loaded())return;const x=this.proxiedCoords[a.id]=[],w=this.proxyCoords,S=a.getSource(),k=S.tileID;if(!k)return;const O=new o.P(k.x,k.y)._div(1<<k.z),N=S.coordinates.map(o.a5.fromLngLat).reduce((W,X)=>(W.min.x=Math.min(W.min.x,X.x-O.x),W.min.y=Math.min(W.min.y,X.y-O.y),W.max.x=Math.max(W.max.x,X.x-O.x),W.max.y=Math.max(W.max.y,X.y-O.y),W),{min:new o.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new o.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),Q=(W,X)=>{const Y=W.wrap+W.canonical.x/(1<<W.canonical.z),ae=W.canonical.y/(1<<W.canonical.z),le=o.ab/(1<<W.canonical.z),ce=X.wrap+X.canonical.x/(1<<X.canonical.z),Ae=X.canonical.y/(1<<X.canonical.z);return Y+le<ce+N.min.x||Y>ce+N.max.x||ae+le<Ae+N.min.y||ae>Ae+N.max.y};for(let W=0;W<w.length;W++){const X=w[W];for(let Y=0;Y<u.length;Y++){const ae=a.getTile(u[Y]);if(!ae||!ae.hasData()||Q(X,ae.tileID))continue;const le=this._createProxiedId(X,ae,g[X.key]&&g[X.key][a.id]),ce=this.proxyToSource[X.key][a.id];ce?ce.push(le):this.proxyToSource[X.key][a.id]=[le],x.push(le)}}}_createProxiedId(a,u,g){let x=this.orthoMatrix;if(g){const w=g.find(S=>S.key===u.tileID.key);if(w)return w}if(u.tileID.key!==a.key){const w=a.canonical.z-u.tileID.canonical.z;let S,k,O;x=o.a6.mat4.create();const N=u.tileID.wrap-a.wrap<<a.overscaledZ;w>0?(S=o.ab>>w,k=S*((u.tileID.canonical.x<<w)-a.canonical.x+N),O=S*((u.tileID.canonical.y<<w)-a.canonical.y)):(S=o.ab<<-w,k=o.ab*(u.tileID.canonical.x-(a.canonical.x+N<<-w)),O=o.ab*(u.tileID.canonical.y-(a.canonical.y<<-w))),o.a6.mat4.ortho(x,0,S,0,S,0,1),o.a6.mat4.translate(x,x,[k,O,0])}return new Mv(u.tileID,a.key,x)}_findTileCoveringTileID(a,u){let g=u.getTile(a);if(g&&g.hasData())return g;const x=this._findCoveringTileCache[u.id],w=x[a.key];if(g=w?u.getTileByID(w):null,g&&g.hasData()||w===null)return g;let S=g?g.tileID:a,k=S.overscaledZ;const O=u.getSource().minzoom,N=[];if(!w){const W=u.getSource().maxzoom;if(a.canonical.z>=W){const X=a.canonical.z-W;u.getSource().reparseOverscaled?(k=Math.max(a.canonical.z+2,u.transform.tileZoom),S=new o.aA(k,a.wrap,W,a.canonical.x>>X,a.canonical.y>>X)):X!==0&&(k=W,S=new o.aA(k,a.wrap,W,a.canonical.x>>X,a.canonical.y>>X))}S.key!==a.key&&(N.push(S.key),g=u.getTile(S))}const Q=W=>{N.forEach(X=>{x[X]=W}),N.length=0};for(k-=1;k>=O&&(!g||!g.hasData());k--){g&&Q(g.tileID.key);const W=S.calculateScaledKey(k);if(g=u.getTileByID(W),g&&g.hasData())break;const X=x[W];if(X===null)break;X===void 0?N.push(W):g=u.getTileByID(X)}return Q(g?g.tileID.key:null),g&&g.hasData()?g:null}findDEMTileFor(a){return this.enabled?this._findTileCoveringTileID(a,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(a,u){let g=this._tilesDirty[a];g||(g=this._tilesDirty[a]={}),g[u.key]=!0}}function kv(m,a,u){const g=function(k,O,N){const Q=o.a6.vec3.dot(O,k),W=o.a6.vec3.dot(N,[.2126,.7152,.0722]),X=(ae,le,ce)=>(1-ce)*ae+ce*le,Y=X(1-.3*Math.min(W,1),1,Math.min(Q+1,1));return X(.92,1,Math.asin(o.ap(O[2],-1,1))/Math.PI+.5)*Y}(m,[0,0,1],a),x=[0,0,0];o.a6.vec3.scale(x,u.slice(0,3),g);const w=[0,0,0];o.a6.vec3.scale(w,a.slice(0,3),m[2]);const S=[0,0,0];return o.a6.vec3.add(S,x,w),o.cb(S)}const gA=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],Nw=["stars","fillExtrusion","fillExtrusionGroundEffect","model","symbol"];class _h{static cacheKey(a,u,g,x){let w=`${u}${x?x.cacheKey:""}`;for(const S of g)a.usedDefines.includes(S)&&(w+=`/${S}`);return w}constructor(a,u,g,x,w,S){const k=a.gl;this.program=k.createProgram(),this.configuration=x,this.name=u,this.fixedDefines=[...S];const O=x?x.getBinderAttributes():[],N=(g.staticAttributes||[]).concat(O);let Q=x?x.defines():[];Q=Q.concat(S.map(ce=>`#define ${ce}`));const W=`#version 300 es
`;let X=W+Q.concat("precision mediump float;",gg,yp.fragmentSource).join(`
`);for(const ce of g.fragmentIncludes)X+=`
${gp[ce]}`;X+=`
${g.fragmentSource}`;let Y=W+Q.concat("precision highp float;",gg,yp.vertexSource).join(`
`);for(const ce of g.vertexIncludes)Y+=`
${gp[ce]}`;Y+=`
${g.vertexSource}`;const ae=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);k.shaderSource(ae,X),k.compileShader(ae),k.attachShader(this.program,ae);const le=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(le,Y),k.compileShader(le),k.attachShader(this.program,le),this.attributes={},this.numAttributes=N.length;for(let ce=0;ce<this.numAttributes;ce++)if(N[ce]){const Ae=N[ce].startsWith("a_")?N[ce]:`a_${N[ce]}`;k.bindAttribLocation(this.program,ce,Ae),this.attributes[Ae]=ce}k.linkProgram(this.program),k.deleteShader(le),k.deleteShader(ae),this.fixedUniforms=w(a),this.binderUniforms=x?x.getUniforms(a):[],(S.includes("TERRAIN")||u.indexOf("symbol")!==-1||u.indexOf("circle")!==-1)&&(this.terrainUniforms=(ce=>({u_dem:new o.bJ(ce),u_dem_prev:new o.bJ(ce),u_dem_tl:new o.bG(ce),u_dem_scale:new o.bI(ce),u_dem_tl_prev:new o.bG(ce),u_dem_scale_prev:new o.bI(ce),u_dem_size:new o.bI(ce),u_dem_lerp:new o.bI(ce),u_exaggeration:new o.bI(ce),u_depth:new o.bJ(ce),u_depth_size_inv:new o.bG(ce),u_depth_range_unpack:new o.bG(ce),u_occluder_half_size:new o.bI(ce),u_occlusion_depth_offset:new o.bI(ce),u_meter_to_dem:new o.bI(ce),u_label_plane_matrix_inv:new o.bF(ce)}))(a)),S.includes("GLOBE")&&(this.globeUniforms=(ce=>({u_tile_tl_up:new o.bH(ce),u_tile_tr_up:new o.bH(ce),u_tile_br_up:new o.bH(ce),u_tile_bl_up:new o.bH(ce),u_tile_up_scale:new o.bI(ce)}))(a)),S.includes("FOG")&&(this.fogUniforms=(ce=>({u_fog_matrix:new o.bF(ce),u_fog_range:new o.bG(ce),u_fog_color:new o.c6(ce),u_fog_horizon_blend:new o.bI(ce),u_fog_vertical_limit:new o.bG(ce),u_fog_temporal_offset:new o.bI(ce),u_frustum_tl:new o.bH(ce),u_frustum_tr:new o.bH(ce),u_frustum_br:new o.bH(ce),u_frustum_bl:new o.bH(ce),u_globe_pos:new o.bH(ce),u_globe_radius:new o.bI(ce),u_globe_transition:new o.bI(ce),u_is_globe:new o.bJ(ce),u_viewport:new o.bG(ce)}))(a)),S.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(ce=>({u_cutoff_params:new o.c6(ce)}))(a)),S.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(ce=>({u_lighting_ambient_color:new o.bH(ce),u_lighting_directional_dir:new o.bH(ce),u_lighting_directional_color:new o.bH(ce),u_ground_radiance:new o.bH(ce)}))(a)),S.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(ce=>({u_light_matrix_0:new o.bF(ce),u_light_matrix_1:new o.bF(ce),u_fade_range:new o.bG(ce),u_shadow_normal_offset:new o.bH(ce),u_shadow_intensity:new o.bI(ce),u_shadow_texel_size:new o.bI(ce),u_shadow_map_resolution:new o.bI(ce),u_shadow_direction:new o.bH(ce),u_shadow_bias:new o.bH(ce),u_shadowmap_0:new o.bJ(ce),u_shadowmap_1:new o.bJ(ce)}))(a))}}setTerrainUniformValues(a,u){if(!this.terrainUniforms)return;const g=this.terrainUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const x in u)g[x]&&g[x].set(this.program,x,u[x])}}setGlobeUniformValues(a,u){if(!this.globeUniforms)return;const g=this.globeUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const x in u)g[x]&&g[x].set(this.program,x,u[x])}}setFogUniformValues(a,u){if(!this.fogUniforms)return;const g=this.fogUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const x in u)g[x].set(this.program,x,u[x])}}setCutoffUniformValues(a,u){if(!this.cutoffUniforms)return;const g=this.cutoffUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const x in u)g[x].set(this.program,x,u[x])}}setLightsUniformValues(a,u){if(!this.lightsUniforms)return;const g=this.lightsUniforms;if(!this.failedToCreate){a.program.set(this.program);for(const x in u)g[x].set(this.program,x,u[x])}}setShadowUniformValues(a,u){if(this.failedToCreate||!this.shadowUniforms)return;const g=this.shadowUniforms;a.program.set(this.program);for(const x in u)g[x].set(this.program,x,u[x])}_drawDebugWireframe(a,u,g,x,w,S,k,O,N,Q){const W=a.options.wireframe;if(W.terrain===!1&&W.layers2D===!1&&W.layers3D===!1)return;const X=a.context;if(!(!(!W.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!W.layers2D||a._terrain&&a._terrain.renderingToTexture||!gA.includes(this.name))||!(!W.layers3D||!Nw.includes(this.name))))return;const Y=X.gl,ae=a.wireframeDebugCache.getLinesFromTrianglesBuffer(a.frameCounter,w,X);if(!ae)return;const le=[...this.fixedDefines];le.push("DEBUG_WIREFRAME");const ce=a.getOrCreateProgram(this.name,{config:this.configuration,defines:le});X.program.set(ce.program);const Ae=(be,Me,Fe)=>{if(Me[be]&&Fe[be])for(const ze in Me[be])Fe[be][ze]&&Fe[be][ze].set(Fe.program,ze,Me[be][ze].current)};N&&N.setUniforms(ce.program,X,ce.binderUniforms,k,{zoom:O}),Ae("fixedUniforms",this,ce),Ae("terrainUniforms",this,ce),Ae("globeUniforms",this,ce),Ae("fogUniforms",this,ce),Ae("lightsUniforms",this,ce),Ae("shadowUniforms",this,ce),ae.bind(),X.setColorMode(new ue([Y.ONE,Y.ONE_MINUS_SRC_ALPHA,Y.ZERO,Y.ONE],o.bz.transparent,[!0,!0,!0,!1])),X.setDepthMode(new Se(u.func===Y.LESS?Y.LEQUAL:u.func,Se.ReadOnly,u.range)),X.setStencilMode(At.disabled);const Be=3*S.primitiveLength*2,Te=3*S.primitiveOffset*2*2;Q&&Q>1?Y.drawElementsInstanced(Y.LINES,Be,Y.UNSIGNED_SHORT,Te,Q):Y.drawElements(Y.LINES,Be,Y.UNSIGNED_SHORT,Te),w.bind(),X.program.set(this.program),X.setDepthMode(u),X.setStencilMode(g),X.setColorMode(x)}draw(a,u,g,x,w,S,k,O,N,Q,W,X,Y,ae,le,ce){const Ae=a.context,Be=Ae.gl;if(this.failedToCreate)return;Ae.program.set(this.program),Ae.setDepthMode(g),Ae.setStencilMode(x),Ae.setColorMode(w),Ae.setCullFace(S);for(const Me of Object.keys(this.fixedUniforms))this.fixedUniforms[Me].set(this.program,Me,k[Me]);ae&&ae.setUniforms(this.program,Ae,this.binderUniforms,X,{zoom:Y});const Te={[Be.POINTS]:1,[Be.LINES]:2,[Be.TRIANGLES]:3,[Be.LINE_STRIP]:1}[u],be=ce&&ce>0?1:void 0;for(const Me of W.get()){const Fe=Me.vaos||(Me.vaos={});(Fe[O]||(Fe[O]=new bd)).bind(Ae,this,N,ae?ae.getPaintVertexBuffers():[],Q,Me.vertexOffset,le||[],be),ce&&ce>1?Be.drawElementsInstanced(u,Me.primitiveLength*Te,Be.UNSIGNED_SHORT,Me.primitiveOffset*Te*2,ce):Q?Be.drawElements(u,Me.primitiveLength*Te,Be.UNSIGNED_SHORT,Me.primitiveOffset*Te*2):Be.drawArrays(u,Me.vertexOffset,Me.vertexLength),u===Be.TRIANGLES&&Q&&this._drawDebugWireframe(a,g,x,w,Q,Me,X,Y,ae,ce)}}}function Dv(m,a){const u=Math.pow(2,a.tileID.overscaledZ),g=a.tileSize*Math.pow(2,m.transform.tileZoom)/u,x=g*(a.tileID.canonical.x+a.tileID.wrap*u),w=g*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture?a.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/o.ak(a,1,m.transform.tileZoom),u_pixel_coord_upper:[x>>16,w>>16],u_pixel_coord_lower:[65535&x,65535&w]}}const Sg=o.a6.mat4.create(),Lv=(m,a,u,g,x,w,S,k,O,N,Q,W,X,Y,ae,le)=>{const ce=a.style.light,Ae=ce.properties.get("position"),Be=[Ae.x,Ae.y,Ae.z],Te=o.a6.mat3.create();ce.properties.get("anchor")==="viewport"&&(o.a6.mat3.fromRotation(Te,-a.transform.angle),o.a6.vec3.transformMat3(Be,Be,Te));const be=ce.properties.get("color"),Me=a.transform,Fe={u_matrix:m,u_lightpos:Be,u_lightintensity:ce.properties.get("intensity"),u_lightcolor:[be.r,be.g,be.b],u_vertical_gradient:+u,u_opacity:g,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Sg,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:x,u_edge_radius:w,u_width_scale:S,u_flood_light_color:X,u_vertical_scale:Y,u_flood_light_intensity:ae,u_ground_shadow_factor:le};return Me.projection.name==="globe"&&(Fe.u_tile_id=[k.canonical.x,k.canonical.y,1<<k.canonical.z],Fe.u_zoom_transition=N,Fe.u_inv_rot_matrix=W,Fe.u_merc_center=Q,Fe.u_up_dir=Me.projection.upVector(new o.bP(0,0,0),Q[0]*o.ab,Q[1]*o.ab),Fe.u_height_lift=O),Fe},Qw=(m,a,u,g)=>({u_matrix:m,u_edge_radius:a,u_width_scale:u,u_vertical_scale:g}),Ov=(m,a,u,g,x,w,S,k,O,N,Q,W,X,Y,ae)=>{const le=Lv(m,a,u,g,x,w,S,k,N,Q,W,X,Y,ae,1,[0,0,0]),ce={u_height_factor:-Math.pow(2,k.overscaledZ)/O.tileSize/8};return o.l(le,Dv(a,O),ce)},Eg=(m,a)=>({u_matrix:m,u_emissive_strength:a}),Hw=(m,a,u,g)=>o.l(Eg(m,a),Dv(u,g)),jw=(m,a,u)=>({u_matrix:m,u_world:u,u_emissive_strength:a}),Sp=(m,a,u,g,x)=>o.l(Hw(m,a,u,g),{u_world:x}),YF=(m,a,u,g)=>{const x=o.ab/u.tileSize;return{u_matrix:m,u_camera_to_center_distance:a.getCameraToCenterDistance(g),u_extrude_scale:[a.pixelsToGLUnits[0]/x,a.pixelsToGLUnits[1]/x]}},Gw=(m,a,u=1)=>({u_matrix:m,u_color:a.toRenderColor(null),u_overlay:0,u_overlay_scale:u}),Kw=o.a6.mat4.create(),JF=(m,a,u,g,x,w,S)=>{const k=m.transform,O=k.projection.name==="globe",N=O?o.cI(k.zoom,a.canonical)*k._pixelsPerMercatorPixel:o.ak(u,1,w),Q={u_matrix:a.projMatrix,u_extrude_scale:N,u_intensity:S,u_inv_rot_matrix:Kw,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(O){Q.u_inv_rot_matrix=g,Q.u_merc_center=x,Q.u_tile_id=[a.canonical.x,a.canonical.y,1<<a.canonical.z],Q.u_zoom_transition=o.a9(k.zoom);const W=x[0]*o.ab,X=x[1]*o.ab;Q.u_up_dir=k.projection.upVector(new o.bP(0,0,0),W,X)}return Q};function Tg(m,[a,u,g,x],[w,S]){if(w===S)return[0,0,0,0];const k=255*(m-1)/(m*(S-w));return[a*k,u*k,g*k,x*k]}function Ig(m,a,[u,g]){return u===g?0:.5/m+(a-u)*(m-1)/(m*(g-u))}const Ep=(m,a,u,g,x,w,S,k,O,N,Q,W,X,Y,ae,le,ce,Ae,Be,Te,be)=>({u_matrix:m,u_normalize_matrix:a,u_globe_matrix:u,u_merc_matrix:g,u_grid_matrix:x,u_tl_parent:w,u_scale_parent:N,u_fade_t:Q.mix,u_opacity:Q.opacity*W.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:W.paint.get("raster-brightness-min"),u_brightness_high:W.paint.get("raster-brightness-max"),u_saturation_factor:o.cJ(W.paint.get("raster-saturation")),u_contrast_factor:o.cK(W.paint.get("raster-contrast")),u_spin_weights:Uv(W.paint.get("raster-hue-rotate")),u_perspective_transform:X,u_raster_elevation:Y,u_zoom_transition:S,u_merc_center:k,u_cutoff_params:O,u_colorization_mix:Tg(o.cL,le,Ae),u_colorization_offset:Ig(o.cL,ce,Ae),u_color_ramp:ae,u_texture_offset:[Te/(Be+2*Te),Be/(Be+2*Te)],u_texture_res:[Be+2*Te,Be+2*Te],u_emissive_strength:be});function Uv(m){m*=Math.PI/180;const a=Math.sin(m),u=Math.cos(m);return[(2*u+1)/3,(-Math.sqrt(3)*a-u+1)/3,(Math.sqrt(3)*a-u+1)/3]}const Rc=.05,Ww=(m,a,u,g,x,w,S,k,O,N,Q,W)=>({u_matrix:m,u_normalize_matrix:a,u_globe_matrix:u,u_merc_matrix:g,u_grid_matrix:x,u_tl_parent:w,u_scale_parent:N,u_fade_t:Q.mix,u_opacity:Q.opacity,u_image0:0,u_image1:1,u_raster_elevation:W,u_zoom_transition:S,u_merc_center:k,u_cutoff_params:O}),Fg=(m,a,u,g,x,w,S,k,O,N)=>({u_particle_texture:m,u_particle_texture_side_len:a,u_tile_offset:u,u_velocity:g,u_color_ramp:w,u_velocity_res:x,u_max_speed:S,u_uv_offset:k,u_data_scale:[255*O[0],255*O[1]],u_data_offset:N,u_particle_pos_scale:1.1,u_particle_pos_offset:[Rc,Rc]}),Pg=(m,a,u,g,x,w,S,k,O,N)=>({u_particle_texture:m,u_particle_texture_side_len:a,u_velocity:u,u_velocity_res:g,u_max_speed:x,u_speed_factor:w,u_reset_rate:S,u_rand_seed:Math.random(),u_uv_offset:k,u_data_scale:[255*O[0],255*O[1]],u_data_offset:N,u_particle_pos_scale:1.1,u_particle_pos_offset:[Rc,Rc]}),Mg=o.a6.mat4.create(),zv=(m,a,u,g,x,w,S,k,O,N,Q,W,X,Y,ae,le,ce,Ae,Be,Te,be)=>{const Me=x.transform,Fe={u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:Me.getCameraToCenterDistance(Be),u_rotate_symbol:+u,u_aspect_ratio:Me.width/Me.height,u_fade_change:x.options.fadeDuration?x.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:S,u_coord_matrix:k,u_is_text:+N,u_elevation_from_sea:O?1:0,u_pitch_with_map:+g,u_texsize:Q,u_texsize_icon:W,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Mg,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Mg,u_up_vector:[0,-1,0],u_color_adj_mat:Te,u_icon_transition:be||0,u_gamma_scale:g?x.transform.getCameraToCenterDistance(Be)*Math.cos(x.terrain?0:x.transform._pitch):1,u_device_pixel_ratio:o.q.devicePixelRatio,u_is_halo:+X};return Be.name==="globe"&&(Fe.u_tile_id=[Y.canonical.x,Y.canonical.y,1<<Y.canonical.z],Fe.u_zoom_transition=ae,Fe.u_inv_rot_matrix=ce,Fe.u_merc_center=le,Fe.u_camera_forward=Me._camera.forward(),Fe.u_ecef_origin=o.cM(Me.globeMatrix,Y.toUnwrapped()),Fe.u_tile_matrix=Float32Array.from(Me.globeMatrix),Fe.u_up_vector=Ae),Fe},qw=(m,a,u,g)=>({u_matrix:m,u_emissive_strength:a,u_opacity:u,u_color:g}),yA=(m,a,u,g,x,w,S,k,O)=>o.l(function(N,Q,W,X,Y,ae){const{width:le,height:ce}=X.imageManager.getPixelSize(Q),Ae=Math.pow(2,ae.tileID.overscaledZ),Be=ae.tileSize*Math.pow(2,X.transform.tileZoom)/Ae,Te=Be*(ae.tileID.canonical.x+ae.tileID.wrap*Ae),be=Be*ae.tileID.canonical.y;return{u_image:0,u_pattern_tl:W.tl,u_pattern_br:W.br,u_texsize:[le,ce],u_pattern_size:W.displaySize,u_pattern_units_to_pixels:Y?[X.transform.width,-1*X.transform.height]:[1/o.ak(ae,1,X.transform.tileZoom),1/o.ak(ae,1,X.transform.tileZoom)],u_pixel_coord_upper:[Te>>16,be>>16],u_pixel_coord_lower:[65535&Te,65535&be]}}(0,w,S,g,k,O),{u_matrix:m,u_emissive_strength:a,u_opacity:u}),Ed=new Float32Array(o.a6.mat4.identity([])),rr=(m,a,u,g,x,w,S,k,O,N,Q,W,X,Y=[0,0,0],ae)=>{const le=x.style.light,ce=le.properties.get("position"),Ae=[-ce.x,-ce.y,ce.z],Be=o.a6.mat3.create();le.properties.get("anchor")==="viewport"&&(o.a6.mat3.fromRotation(Be,-x.transform.angle),o.a6.vec3.transformMat3(Ae,Ae,Be));const Te=Q.alphaMode==="MASK",be=le.properties.get("color").toRenderColor(null),Me=X.paint.get("model-ambient-occlusion-intensity"),Fe=X.paint.get("model-color").constantOr(o.bz.white).toRenderColor(null),ze=X.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:m,u_lighting_matrix:a,u_normal_matrix:u,u_node_matrix:g||Ed,u_lightpos:Ae,u_lightintensity:le.properties.get("intensity"),u_lightcolor:[be.r,be.g,be.b],u_camera_pos:Y,u_opacity:w,u_baseTextureIsAlpha:0,u_alphaMask:+Te,u_alphaCutoff:Q.alphaCutoff,u_baseColorFactor:[S.r,S.g,S.b,S.a],u_emissiveFactor:[k[0],k[1],k[2],1],u_metallicFactor:O,u_roughnessFactor:N,u_baseColorTexture:Bo.BaseColor,u_metallicRoughnessTexture:Bo.MetallicRoughness,u_normalTexture:Bo.Normal,u_occlusionTexture:Bo.Occlusion,u_emissionTexture:Bo.Emission,u_lutTexture:Bo.LUT,u_color_mix:[Fe.r,Fe.g,Fe.b,ze],u_aoIntensity:Me,u_emissive_strength:W,u_occlusionTextureTransform:ae||[0,0,0,0]}},Vv=(m,a=Ed,u=Ed)=>({u_matrix:m,u_instance:a,u_node_matrix:u}),Xw={fillExtrusion:m=>({u_matrix:new o.bF(m),u_lightpos:new o.bH(m),u_lightintensity:new o.bI(m),u_lightcolor:new o.bH(m),u_vertical_gradient:new o.bI(m),u_opacity:new o.bI(m),u_edge_radius:new o.bI(m),u_width_scale:new o.bI(m),u_ao:new o.bG(m),u_tile_id:new o.bH(m),u_zoom_transition:new o.bI(m),u_inv_rot_matrix:new o.bF(m),u_merc_center:new o.bG(m),u_up_dir:new o.bH(m),u_height_lift:new o.bI(m),u_flood_light_color:new o.bH(m),u_vertical_scale:new o.bI(m),u_flood_light_intensity:new o.bI(m),u_ground_shadow_factor:new o.bH(m)}),fillExtrusionDepth:m=>({u_matrix:new o.bF(m),u_edge_radius:new o.bI(m),u_width_scale:new o.bI(m),u_vertical_scale:new o.bI(m)}),fillExtrusionPattern:m=>({u_matrix:new o.bF(m),u_lightpos:new o.bH(m),u_lightintensity:new o.bI(m),u_lightcolor:new o.bH(m),u_vertical_gradient:new o.bI(m),u_height_factor:new o.bI(m),u_edge_radius:new o.bI(m),u_width_scale:new o.bI(m),u_ao:new o.bG(m),u_tile_id:new o.bH(m),u_zoom_transition:new o.bI(m),u_inv_rot_matrix:new o.bF(m),u_merc_center:new o.bG(m),u_up_dir:new o.bH(m),u_height_lift:new o.bI(m),u_image:new o.bJ(m),u_texsize:new o.bG(m),u_pixel_coord_upper:new o.bG(m),u_pixel_coord_lower:new o.bG(m),u_tile_units_to_pixels:new o.bI(m),u_opacity:new o.bI(m)}),fillExtrusionGroundEffect:m=>({u_matrix:new o.bF(m),u_opacity:new o.bI(m),u_ao_pass:new o.bI(m),u_meter_to_tile:new o.bI(m),u_ao:new o.bG(m),u_flood_light_intensity:new o.bI(m),u_flood_light_color:new o.bH(m),u_attenuation:new o.bI(m),u_edge_radius:new o.bI(m),u_fb:new o.bJ(m),u_fb_size:new o.bI(m),u_dynamic_offset:new o.bI(m)}),fill:m=>({u_matrix:new o.bF(m),u_emissive_strength:new o.bI(m)}),fillPattern:m=>({u_matrix:new o.bF(m),u_emissive_strength:new o.bI(m),u_image:new o.bJ(m),u_texsize:new o.bG(m),u_pixel_coord_upper:new o.bG(m),u_pixel_coord_lower:new o.bG(m),u_tile_units_to_pixels:new o.bI(m)}),fillOutline:m=>({u_matrix:new o.bF(m),u_emissive_strength:new o.bI(m),u_world:new o.bG(m)}),fillOutlinePattern:m=>({u_matrix:new o.bF(m),u_emissive_strength:new o.bI(m),u_world:new o.bG(m),u_image:new o.bJ(m),u_texsize:new o.bG(m),u_pixel_coord_upper:new o.bG(m),u_pixel_coord_lower:new o.bG(m),u_tile_units_to_pixels:new o.bI(m)}),circle:o.cN,collisionBox:m=>({u_matrix:new o.bF(m),u_camera_to_center_distance:new o.bI(m),u_extrude_scale:new o.bG(m)}),collisionCircle:m=>({u_matrix:new o.bF(m),u_inv_matrix:new o.bF(m),u_camera_to_center_distance:new o.bI(m),u_viewport_size:new o.bG(m)}),debug:m=>({u_color:new o.cu(m),u_matrix:new o.bF(m),u_overlay:new o.bJ(m),u_overlay_scale:new o.bI(m)}),clippingMask:m=>({u_matrix:new o.bF(m)}),heatmap:m=>({u_extrude_scale:new o.bI(m),u_intensity:new o.bI(m),u_matrix:new o.bF(m),u_inv_rot_matrix:new o.bF(m),u_merc_center:new o.bG(m),u_tile_id:new o.bH(m),u_zoom_transition:new o.bI(m),u_up_dir:new o.bH(m)}),heatmapTexture:m=>({u_image:new o.bJ(m),u_color_ramp:new o.bJ(m),u_opacity:new o.bI(m)}),hillshade:m=>({u_matrix:new o.bF(m),u_image:new o.bJ(m),u_latrange:new o.bG(m),u_light:new o.bG(m),u_shadow:new o.cu(m),u_highlight:new o.cu(m),u_emissive_strength:new o.bI(m),u_accent:new o.cu(m)}),hillshadePrepare:m=>({u_matrix:new o.bF(m),u_image:new o.bJ(m),u_dimension:new o.bG(m),u_zoom:new o.bI(m)}),line:o.cO,linePattern:o.cP,raster:m=>({u_matrix:new o.bF(m),u_normalize_matrix:new o.bF(m),u_globe_matrix:new o.bF(m),u_merc_matrix:new o.bF(m),u_grid_matrix:new o.cv(m),u_tl_parent:new o.bG(m),u_scale_parent:new o.bI(m),u_fade_t:new o.bI(m),u_opacity:new o.bI(m),u_image0:new o.bJ(m),u_image1:new o.bJ(m),u_brightness_low:new o.bI(m),u_brightness_high:new o.bI(m),u_saturation_factor:new o.bI(m),u_contrast_factor:new o.bI(m),u_spin_weights:new o.bH(m),u_perspective_transform:new o.bG(m),u_raster_elevation:new o.bI(m),u_zoom_transition:new o.bI(m),u_merc_center:new o.bG(m),u_cutoff_params:new o.c6(m),u_colorization_mix:new o.c6(m),u_colorization_offset:new o.bI(m),u_color_ramp:new o.bJ(m),u_texture_offset:new o.bG(m),u_texture_res:new o.bG(m),u_emissive_strength:new o.bI(m)}),rasterParticle:m=>({u_matrix:new o.bF(m),u_normalize_matrix:new o.bF(m),u_globe_matrix:new o.bF(m),u_merc_matrix:new o.bF(m),u_grid_matrix:new o.cv(m),u_tl_parent:new o.bG(m),u_scale_parent:new o.bI(m),u_fade_t:new o.bI(m),u_opacity:new o.bI(m),u_image0:new o.bJ(m),u_image1:new o.bJ(m),u_raster_elevation:new o.bI(m),u_zoom_transition:new o.bI(m),u_merc_center:new o.bG(m),u_cutoff_params:new o.c6(m)}),rasterParticleTexture:m=>({u_texture:new o.bJ(m),u_opacity:new o.bI(m)}),rasterParticleDraw:m=>({u_particle_texture:new o.bJ(m),u_particle_texture_side_len:new o.bI(m),u_tile_offset:new o.bG(m),u_velocity:new o.bJ(m),u_color_ramp:new o.bJ(m),u_velocity_res:new o.bG(m),u_max_speed:new o.bI(m),u_uv_offset:new o.bG(m),u_data_scale:new o.bG(m),u_data_offset:new o.bI(m),u_particle_pos_scale:new o.bI(m),u_particle_pos_offset:new o.bG(m)}),rasterParticleUpdate:m=>({u_particle_texture:new o.bJ(m),u_particle_texture_side_len:new o.bI(m),u_velocity:new o.bJ(m),u_velocity_res:new o.bG(m),u_max_speed:new o.bI(m),u_speed_factor:new o.bI(m),u_reset_rate:new o.bI(m),u_rand_seed:new o.bI(m),u_uv_offset:new o.bG(m),u_data_scale:new o.bG(m),u_data_offset:new o.bI(m),u_particle_pos_scale:new o.bI(m),u_particle_pos_offset:new o.bG(m)}),symbol:m=>({u_is_size_zoom_constant:new o.bJ(m),u_is_size_feature_constant:new o.bJ(m),u_size_t:new o.bI(m),u_size:new o.bI(m),u_camera_to_center_distance:new o.bI(m),u_rotate_symbol:new o.bJ(m),u_aspect_ratio:new o.bI(m),u_fade_change:new o.bI(m),u_matrix:new o.bF(m),u_label_plane_matrix:new o.bF(m),u_coord_matrix:new o.bF(m),u_is_text:new o.bJ(m),u_elevation_from_sea:new o.bJ(m),u_pitch_with_map:new o.bJ(m),u_texsize:new o.bG(m),u_texsize_icon:new o.bG(m),u_texture:new o.bJ(m),u_texture_icon:new o.bJ(m),u_gamma_scale:new o.bI(m),u_device_pixel_ratio:new o.bI(m),u_tile_id:new o.bH(m),u_zoom_transition:new o.bI(m),u_inv_rot_matrix:new o.bF(m),u_merc_center:new o.bG(m),u_camera_forward:new o.bH(m),u_tile_matrix:new o.bF(m),u_up_vector:new o.bH(m),u_ecef_origin:new o.bH(m),u_is_halo:new o.bJ(m),u_icon_transition:new o.bI(m),u_color_adj_mat:new o.bF(m)}),background:m=>({u_matrix:new o.bF(m),u_emissive_strength:new o.bI(m),u_opacity:new o.bI(m),u_color:new o.cu(m)}),backgroundPattern:m=>({u_matrix:new o.bF(m),u_emissive_strength:new o.bI(m),u_opacity:new o.bI(m),u_image:new o.bJ(m),u_pattern_tl:new o.bG(m),u_pattern_br:new o.bG(m),u_texsize:new o.bG(m),u_pattern_size:new o.bG(m),u_pixel_coord_upper:new o.bG(m),u_pixel_coord_lower:new o.bG(m),u_pattern_units_to_pixels:new o.bG(m)}),terrainRaster:m=>({u_matrix:new o.bF(m),u_image0:new o.bJ(m),u_skirt_height:new o.bI(m),u_ground_shadow_factor:new o.bH(m)}),skybox:m=>({u_matrix:new o.bF(m),u_sun_direction:new o.bH(m),u_cubemap:new o.bJ(m),u_opacity:new o.bI(m),u_temporal_offset:new o.bI(m)}),skyboxGradient:m=>({u_matrix:new o.bF(m),u_color_ramp:new o.bJ(m),u_center_direction:new o.bH(m),u_radius:new o.bI(m),u_opacity:new o.bI(m),u_temporal_offset:new o.bI(m)}),skyboxCapture:m=>({u_matrix_3f:new o.cv(m),u_sun_direction:new o.bH(m),u_sun_intensity:new o.bI(m),u_color_tint_r:new o.c6(m),u_color_tint_m:new o.c6(m),u_luminance:new o.bI(m)}),globeRaster:m=>({u_proj_matrix:new o.bF(m),u_globe_matrix:new o.bF(m),u_normalize_matrix:new o.bF(m),u_merc_matrix:new o.bF(m),u_zoom_transition:new o.bI(m),u_merc_center:new o.bG(m),u_image0:new o.bJ(m),u_grid_matrix:new o.cv(m),u_skirt_height:new o.bI(m),u_far_z_cutoff:new o.bI(m),u_frustum_tl:new o.bH(m),u_frustum_tr:new o.bH(m),u_frustum_br:new o.bH(m),u_frustum_bl:new o.bH(m),u_globe_pos:new o.bH(m),u_globe_radius:new o.bI(m),u_viewport:new o.bG(m)}),globeAtmosphere:m=>({u_frustum_tl:new o.bH(m),u_frustum_tr:new o.bH(m),u_frustum_br:new o.bH(m),u_frustum_bl:new o.bH(m),u_horizon:new o.bI(m),u_transition:new o.bI(m),u_fadeout_range:new o.bI(m),u_color:new o.c6(m),u_high_color:new o.c6(m),u_space_color:new o.c6(m),u_temporal_offset:new o.bI(m),u_horizon_angle:new o.bI(m)}),model:m=>({u_matrix:new o.bF(m),u_lighting_matrix:new o.bF(m),u_normal_matrix:new o.bF(m),u_node_matrix:new o.bF(m),u_lightpos:new o.bH(m),u_lightintensity:new o.bI(m),u_lightcolor:new o.bH(m),u_camera_pos:new o.bH(m),u_opacity:new o.bI(m),u_baseColorFactor:new o.c6(m),u_emissiveFactor:new o.c6(m),u_metallicFactor:new o.bI(m),u_roughnessFactor:new o.bI(m),u_baseTextureIsAlpha:new o.bJ(m),u_alphaMask:new o.bJ(m),u_alphaCutoff:new o.bI(m),u_baseColorTexture:new o.bJ(m),u_metallicRoughnessTexture:new o.bJ(m),u_normalTexture:new o.bJ(m),u_occlusionTexture:new o.bJ(m),u_emissionTexture:new o.bJ(m),u_lutTexture:new o.bJ(m),u_color_mix:new o.c6(m),u_aoIntensity:new o.bI(m),u_emissive_strength:new o.bI(m),u_occlusionTextureTransform:new o.c6(m)}),modelDepth:m=>({u_matrix:new o.bF(m),u_instance:new o.bF(m),u_node_matrix:new o.bF(m)}),groundShadow:m=>({u_matrix:new o.bF(m),u_ground_shadow_factor:new o.bH(m)}),stars:m=>({u_matrix:new o.bF(m),u_up:new o.bH(m),u_right:new o.bH(m),u_intensity_multiplier:new o.bI(m)}),occlusion:m=>({u_matrix:new o.bF(m),u_anchorPos:new o.bH(m),u_screenSizePx:new o.bG(m),u_occluderSizePx:new o.bG(m),u_color:new o.c6(m)})};class Oa{constructor(a,u,g,x){this.id=Oa.uniqueIdxCounter,Oa.uniqueIdxCounter++,this.context=a;const w=a.gl;this.buffer=w.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||x||u.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){this.id=Oa.uniqueIdxCounter,Oa.uniqueIdxCounter++;const u=this.context.gl;this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}Oa.uniqueIdxCounter=0;const vA={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class dr{constructor(a,u,g,x,w,S){this.length=u.length,this.attributes=g,this.itemSize=u.bytesPerElement,this.dynamicDraw=x,this.instanceCount=S,this.context=a;const k=a.gl;this.buffer=k.createBuffer(),a.bindVertexBuffer.set(this.buffer),k.bufferData(k.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||w||u.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,u){for(let g=0;g<this.attributes.length;g++){const x=u.attributes[this.attributes[g].name];x!==void 0&&a.enableVertexAttribArray(x)}}setVertexAttribPointers(a,u,g){for(let x=0;x<this.attributes.length;x++){const w=this.attributes[x],S=u.attributes[w.name];S!==void 0&&a.vertexAttribPointer(S,w.components,a[vA[w.type]],!1,this.itemSize,w.offset+this.itemSize*(g||0))}}setVertexAttribDivisor(a,u,g){for(let x=0;x<this.attributes.length;x++){const w=u.attributes[this.attributes[x].name];w!==void 0&&this.instanceCount&&this.instanceCount>0&&a.vertexAttribDivisor(w,g)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Rg{constructor(a,u,g,x,w){this.context=a,this.width=u,this.height=g;const S=this.framebuffer=a.gl.createFramebuffer();x&&(this.colorAttachment=new Bg(a,S)),w&&(this.depthAttachmentType=w,this.depthAttachment=w==="renderbuffer"?new Fv(a,S):new Dw(a,S))}destroy(){const a=this.context.gl;if(this.colorAttachment){const u=this.colorAttachment.get();u&&a.deleteTexture(u)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const u=this.depthAttachment.get();u&&a.deleteRenderbuffer(u)}else{const u=this.depthAttachment.get();u&&a.deleteTexture(u)}a.deleteFramebuffer(this.framebuffer)}}class $F{constructor(a,u){this.gl=a,this.clearColor=new _v(this),this.clearDepth=new Ew(this),this.clearStencil=new xv(this),this.colorMask=new _g(this),this.depthMask=new xp(this),this.stencilMask=new Tw(this),this.stencilFunc=new Iw(this),this.stencilOp=new Fw(this),this.stencilTest=new wd(this),this.depthRange=new Pw(this),this.depthTest=new KF(this),this.depthFunc=new WF(this),this.blend=new qF(this),this.blendFunc=new bv(this),this.blendColor=new wv(this),this.blendEquation=new Bv(this),this.cullFace=new Cv(this),this.cullFaceSide=new Mw(this),this.frontFace=new Rw(this),this.program=new XF(this),this.activeTexture=new bp(this),this.viewport=new wp(this),this.bindFramebuffer=new kw(this),this.bindRenderbuffer=new sl(this),this.bindTexture=new Sv(this),this.bindVertexBuffer=new xg(this),this.bindElementBuffer=new bg(this),this.bindVertexArrayOES=new Ev(this),this.pixelStoreUnpack=new Tv(this),this.pixelStoreUnpackPremultiplyAlpha=new wg(this),this.pixelStoreUnpackFlipY=new Iv(this),this.options=u?{...u}:{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=a.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=a.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=a.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=a.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=a.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=a.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),this.maxPointSize=a.getParameter(a.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,u,g){return new Oa(this,a,u,g)}createVertexBuffer(a,u,g,x,w){return new dr(this,a,u,g,x,w)}createRenderbuffer(a,u,g){const x=this.gl,w=x.createRenderbuffer();return this.bindRenderbuffer.set(w),x.renderbufferStorage(x.RENDERBUFFER,a,u,g),this.bindRenderbuffer.set(null),w}createFramebuffer(a,u,g,x){return new Rg(this,a,u,g,x)}clear({color:a,depth:u,stencil:g,colorMask:x}){const w=this.gl;let S=0;a&&(S|=w.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set(x||[!0,!0,!0,!0])),u!==void 0&&(S|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),g!==void 0&&(S|=w.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),w.clear(S)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){o.bh(a.blendFunction,ue.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor),a.blendEquation?this.blendEquation.set(a.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(a.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let kg;function Dg(m,a,u,g,x,w,S){const k=m.context,O=k.gl,N=m.transform,Q=m.getOrCreateProgram("collisionBox"),W=[];let X=0,Y=0;for(let be=0;be<g.length;be++){const Me=g[be],Fe=a.getTile(Me),ze=Fe.getBucket(u);if(!ze)continue;const Le=Sl(Me,ze,N);let Ve=Le;x[0]===0&&x[1]===0||(Ve=m.translatePosMatrix(Le,Fe,x,w));const Xe=S?ze.textCollisionBox:ze.iconCollisionBox,je=ze.collisionCircleArray;if(je.length>0){const He=o.a6.mat4.create(),nt=Ve;o.a6.mat4.mul(He,ze.placementInvProjMatrix,N.glCoordMatrix),o.a6.mat4.mul(He,He,ze.placementViewportMatrix),W.push({circleArray:je,circleOffset:Y,transform:nt,invTransform:He,projection:ze.getProjection()}),X+=je.length/4,Y=X}Xe&&(m.terrain&&m.terrain.setupElevationDraw(Fe,Q),Q.draw(m,O.LINES,Se.disabled,At.disabled,m.colorModeForRenderPass(),pr.disabled,YF(Ve,N,Fe,ze.getProjection()),u.id,Xe.layoutVertexBuffer,Xe.indexBuffer,Xe.segments,null,N.zoom,null,[Xe.collisionVertexBuffer,Xe.collisionVertexBufferExt]))}if(!S||!W.length)return;const ae=m.getOrCreateProgram("collisionCircle"),le=new o.cQ;le.resize(4*X),le._trim();let ce=0;for(const be of W)for(let Me=0;Me<be.circleArray.length/4;Me++){const Fe=4*Me,ze=be.circleArray[Fe+0],Le=be.circleArray[Fe+1],Ve=be.circleArray[Fe+2],Xe=be.circleArray[Fe+3];le.emplace(ce++,ze,Le,Ve,Xe,0),le.emplace(ce++,ze,Le,Ve,Xe,1),le.emplace(ce++,ze,Le,Ve,Xe,2),le.emplace(ce++,ze,Le,Ve,Xe,3)}(!kg||kg.length<2*X)&&(kg=function(be){const Me=2*be,Fe=new o.aO;Fe.resize(Me),Fe._trim();for(let ze=0;ze<Me;ze++){const Le=6*ze;Fe.uint16[Le+0]=4*ze+0,Fe.uint16[Le+1]=4*ze+1,Fe.uint16[Le+2]=4*ze+2,Fe.uint16[Le+3]=4*ze+2,Fe.uint16[Le+4]=4*ze+3,Fe.uint16[Le+5]=4*ze+0}return Fe}(X));const Ae=k.createIndexBuffer(kg,!0),Be=k.createVertexBuffer(le,o.cR.members,!0);for(const be of W){const Me={u_matrix:be.transform,u_inv_matrix:be.invTransform,u_camera_to_center_distance:(Te=N).getCameraToCenterDistance(be.projection),u_viewport_size:[Te.width,Te.height]};ae.draw(m,O.TRIANGLES,Se.disabled,At.disabled,m.colorModeForRenderPass(),pr.disabled,Me,u.id,Be,Ae,o.b1.simpleSegment(0,2*be.circleOffset,be.circleArray.length,be.circleArray.length/2),null,N.zoom)}var Te;Be.destroy(),Ae.destroy()}const Tp=o.a6.mat4.create();function Nv(m){const a=m._camera.getWorldToCamera(m.worldSize,1),u=o.a6.mat4.multiply([],a,m.globeMatrix);o.a6.mat4.invert(u,u);const g=[0,0,0],x=[0,1,0,0];return o.a6.vec4.transformMat4(x,x,u),g[0]=x[0],g[1]=x[1],g[2]=x[2],o.a6.vec3.normalize(g,g),g}function eP({width:m,height:a,anchor:u,textOffset:g,textScale:x},w){const{horizontalAlign:S,verticalAlign:k}=o.bx(u),O=-(S-.5)*m,N=-(k-.5)*a,Q=o.bw(u,g);return new o.P((O/x+Q[0])*w,(N/x+Q[1])*w)}function tP(m,a,u,g,x,w,S,k,O,N,Q){const W=m.text.placedSymbolArray,X=m.text.dynamicLayoutVertexArray,Y=m.icon.dynamicLayoutVertexArray,ae={},le=m.getProjection(),ce=ha(k,le,w),Ae=w.elevation,Be=le.upVectorScale(k.canonical,w.center.lat,w.worldSize).metersToTile;X.clear();for(let Te=0;Te<W.length;Te++){const be=W.get(Te),{tileAnchorX:Me,tileAnchorY:Fe,numGlyphs:ze}=be,Le=be.hidden||!be.crossTileID||m.allowVerticalPlacement&&!be.placedOrientation?null:g[be.crossTileID];if(Le){let Ve=0,Xe=0,je=0;if(Ae){const bt=Ae?Ae.getAtTileOffset(k,Me,Fe):0,[Dt,Ut,St]=le.upVector(k.canonical,Me,Fe);Ve=bt*Dt*Be,Xe=bt*Ut*Be,je=bt*St*Be}let[He,nt,mt,Et]=oo(be.projectedAnchorX+Ve,be.projectedAnchorY+Xe,be.projectedAnchorZ+je,u?ce:S);const pt=qr(w.getCameraToCenterDistance(le),Et);let kt=x.evaluateSizeForFeature(m.textSizeData,N,be)*pt/o.bq;u&&(kt*=m.tilePixelRatio/O);const it=eP(Le,kt);u?({x:He,y:nt,z:mt}=le.projectTilePoint(Me+it.x,Fe+it.y,k.canonical),[He,nt,mt]=oo(He+Ve,nt+Xe,mt+je,S)):(a&&it._rotate(-w.angle),He+=it.x,nt+=it.y,mt=0);const wt=m.allowVerticalPlacement&&be.placedOrientation===o.bk.vertical?Math.PI/2:0;for(let bt=0;bt<ze;bt++)o.bn(X,He,nt,mt,wt);Q&&be.associatedIconIndex>=0&&(ae[be.associatedIconIndex]={x:He,y:nt,z:mt,angle:wt})}else un(ze,X)}if(Q){Y.clear();const Te=m.icon.placedSymbolArray;for(let be=0;be<Te.length;be++){const Me=Te.get(be),{numGlyphs:Fe}=Me,ze=ae[be];if(Me.hidden||!ze)un(Fe,Y);else{const{x:Le,y:Ve,z:Xe,angle:je}=ze;for(let He=0;He<Fe;He++)o.bn(Y,Le,Ve,Xe,je)}}m.icon.dynamicLayoutVertexBuffer.updateData(Y)}m.text.dynamicLayoutVertexBuffer.updateData(X)}function Ip(m,a,u,g,x,w,S={}){const k=u.paint.get("icon-translate"),O=u.paint.get("text-translate"),N=u.paint.get("icon-translate-anchor"),Q=u.paint.get("text-translate-anchor"),W=u.layout.get("icon-rotation-alignment"),X=u.layout.get("text-rotation-alignment"),Y=u.layout.get("icon-pitch-alignment"),ae=u.layout.get("text-pitch-alignment"),le=u.layout.get("icon-keep-upright"),ce=u.layout.get("text-keep-upright"),Ae=u.paint.get("icon-color-saturation"),Be=u.paint.get("icon-color-contrast"),Te=u.paint.get("icon-color-brightness-min"),be=u.paint.get("icon-color-brightness-max"),Me=u.paint.get("symbol-elevation-reference")==="sea",Fe=u.paint.get("text-occlusion-opacity").constantOr(0),ze=m.context,Le=ze.gl,Ve=m.transform,Xe=W==="map",je=X==="map",He=Y==="map",nt=ae==="map",mt=u.layout.get("symbol-sort-key").constantOr(1)!==void 0;let Et=!1;const pt=m.depthModeForSublayer(0,Se.ReadOnly),kt=[o.am(Ve.center.lng),o.at(Ve.center.lat)],it=u.layout.get("text-variable-anchor"),wt=Ve.projection.name==="globe",bt=[],Dt=[0,-1,0];for(const Ut of g){const St=a.getTile(Ut),Ft=St.getBucket(u);if(!Ft||Ft.projection.name==="mercator"&&wt||Ft.fullyClipped)continue;const gr=Ft.projection.name==="globe",Nt=gr?o.a9(Ve.zoom):0,Jt=ha(Ut,Ft.getProjection(),Ve),Br=Ve.calculatePixelsToTileUnitsMatrix(St),sr=it&&Ft.hasTextData(),xr=Ft.hasIconTextFit()&&sr&&Ft.hasIconData(),Qr=Ft.getProjection().createInversionMatrix(Ve,Ut.canonical),zr=zn=>{Ve.depthOcclusionForSymbolsAndCircles&&(u.hasInitialOcclusionOpacityProperties||m.terrain)&&(zn.push("DEPTH_D24"),zn.push("DEPTH_OCCLUSION"))},Dn=()=>{const zn=Xe&&u.layout.get("symbol-placement")!=="point",Vr=[];zr(Vr);const Cn=zn||xr,Rn=u.paint.get("icon-image-cross-fade").constantOr(0);m.terrainRenderModeElevated()&&He&&Vr.push("PITCH_WITH_MAP_TERRAIN"),gr&&(Vr.push("PROJECTION_GLOBE_VIEW"),Cn&&Vr.push("PROJECTED_POS_ON_VIEWPORT")),Rn>0&&Vr.push("ICON_TRANSITION"),Ft.icon.zOffsetVertexBuffer&&Vr.push("Z_OFFSET"),Ae===0&&Be===0&&Te===0&&be===1||Vr.push("COLOR_ADJUSTMENT"),Ft.sdfIcons&&Vr.push("RENDER_SDF");const Wi=Ft.icon.programConfigurations.get(u.id),ao=m.getOrCreateProgram("symbol",{config:Wi,defines:Vr}),fn=St.imageAtlasTexture?St.imageAtlasTexture.size:[0,0],Lo=Ft.iconSizeData,Xo=o.bj(Lo,Ve.zoom),Oo=He||Ve.pitch!==0,ei=Yr(Jt,St.tileID.canonical,He,Xe,Ve,Ft.getProjection(),Br),fa=os(Jt,St.tileID.canonical,He,Xe,Ve,Ft.getProjection(),Br),pa=m.translatePosMatrix(fa,St,k,N,!0),Fl=m.translatePosMatrix(Jt,St,k,N),ll=Cn?Tp:ei,za=Xe&&!He&&!zn;let Pl=Dt;!wt&&!Ve.mercatorFromTransition||Xe||(Pl=Nv(Ve));const Ou=gr?Pl:Dt,Eh=u.getColorAdjustmentMatrix(Ae,Be,Te,be),Oc=zv(Lo.kind,Xo,za,He,m,Fl,ll,pa,Me,!1,fn,[0,0],!0,Ut,Nt,kt,Qr,Ou,Ft.getProjection(),Eh,Rn),Ud=St.imageAtlasTexture?St.imageAtlasTexture:null,zd=u.layout.get("icon-size").constantOr(0)!==1||Ft.iconsNeedLinear,Jg=Ft.sdfIcons||m.options.rotating||m.options.zooming||zd||Oo?Le.LINEAR:Le.NEAREST,Vd=Ft.sdfIcons&&u.paint.get("icon-halo-width").constantOr(1)!==0,ti=m.terrain&&He&&zn?o.a6.mat4.invert(o.a6.mat4.create(),ei):Tp;if(zn&&Ft.icon){const CA=Ve.elevation,mP=CA?CA.getAtTileOffsetFunc(Ut,Ve.center.lat,Ve.worldSize,Ft.getProjection()):null,fB=Wr(Jt,St.tileID.canonical,He,Xe,Ve,Ft.getProjection(),Br);qe(Ft,Jt,m,!1,fB,fa,He,le,mP,Ut)}return{program:ao,buffers:Ft.icon,uniformValues:Oc,atlasTexture:Ud,atlasTextureIcon:null,atlasInterpolation:Jg,atlasInterpolationIcon:null,isSDF:Ft.sdfIcons,hasHalo:Vd,tile:St,labelPlaneMatrixInv:ti}},jn=()=>{const zn=je&&u.layout.get("symbol-placement")!=="point",Vr=[],Cn=zn||it||xr;m.terrainRenderModeElevated()&&nt&&Vr.push("PITCH_WITH_MAP_TERRAIN"),gr&&(Vr.push("PROJECTION_GLOBE_VIEW"),Cn&&Vr.push("PROJECTED_POS_ON_VIEWPORT")),Ft.text.zOffsetVertexBuffer&&Vr.push("Z_OFFSET"),Ft.iconsInText&&Vr.push("RENDER_TEXT_AND_SYMBOL"),Vr.push("RENDER_SDF"),zr(Vr);const Rn=Ft.text.programConfigurations.get(u.id),Wi=m.getOrCreateProgram("symbol",{config:Rn,defines:Vr});let ao,fn=[0,0],Lo=null;const Xo=Ft.textSizeData;Ft.iconsInText&&(fn=St.imageAtlasTexture?St.imageAtlasTexture.size:[0,0],Lo=St.imageAtlasTexture?St.imageAtlasTexture:null,ao=nt||Ve.pitch!==0||m.options.rotating||m.options.zooming||Xo.kind==="composite"||Xo.kind==="camera"?Le.LINEAR:Le.NEAREST);const Oo=St.glyphAtlasTexture?St.glyphAtlasTexture.size:[0,0],ei=o.bj(Xo,Ve.zoom),fa=Yr(Jt,St.tileID.canonical,nt,je,Ve,Ft.getProjection(),Br),pa=os(Jt,St.tileID.canonical,nt,je,Ve,Ft.getProjection(),Br),Fl=m.translatePosMatrix(pa,St,O,Q,!0),ll=m.translatePosMatrix(Jt,St,O,Q),za=Cn?Tp:fa,Pl=je&&!nt&&!zn;let Ou=Dt;!wt&&!Ve.mercatorFromTransition||je||(Ou=Nv(Ve));const Eh=zv(Xo.kind,ei,Pl,nt,m,ll,za,Fl,Me,!0,Oo,fn,!0,Ut,Nt,kt,Qr,gr?Ou:Dt,Ft.getProjection(),Fe),Oc=St.glyphAtlasTexture?St.glyphAtlasTexture:null,Ud=Le.LINEAR,zd=u.paint.get("text-halo-width").constantOr(1)!==0,Jg=m.terrain&&nt&&zn?o.a6.mat4.invert(o.a6.mat4.create(),fa):Tp;if(zn&&Ft.text){const Vd=Ve.elevation,ti=Vd?Vd.getAtTileOffsetFunc(Ut,Ve.center.lat,Ve.worldSize,Ft.getProjection()):null,CA=Wr(Jt,St.tileID.canonical,nt,je,Ve,Ft.getProjection(),Br);qe(Ft,Jt,m,!0,CA,pa,nt,ce,ti,Ut)}return{program:Wi,buffers:Ft.text,uniformValues:Eh,atlasTexture:Oc,atlasTextureIcon:Lo,atlasInterpolation:Ud,atlasInterpolationIcon:ao,isSDF:!0,hasHalo:zd,tile:St,labelPlaneMatrixInv:Jg}},hi=Ft.icon.segments.get().length,Il=Ft.text.segments.get().length,so=hi&&!S.onlyText?Dn():null,tn=Il&&!S.onlyIcons?jn():null,Nn=u.paint.get("icon-opacity").constantOr(1),Bi=u.paint.get("text-opacity").constantOr(1);if(mt&&Ft.canOverlap){Et=!0;const zn=Nn&&!S.onlyText?Ft.icon.segments.get():[],Vr=Bi&&!S.onlyIcons?Ft.text.segments.get():[];for(const Cn of zn)bt.push({segments:new o.b1([Cn]),sortKey:Cn.sortKey,state:so});for(const Cn of Vr)bt.push({segments:new o.b1([Cn]),sortKey:Cn.sortKey,state:tn})}else S.onlyText||bt.push({segments:Nn?Ft.icon.segments:new o.b1([]),sortKey:0,state:so}),S.onlyIcons||bt.push({segments:Bi?Ft.text.segments:new o.b1([]),sortKey:0,state:tn})}Et&&bt.sort((Ut,St)=>Ut.sortKey-St.sortKey);for(const Ut of bt){const St=Ut.state;if(St)if(m.terrain?m.terrain.setupElevationDraw(St.tile,St.program,{useDepthForOcclusion:Ve.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:St.labelPlaneMatrixInv}):m.setupDepthForOcclusion(Ve.depthOcclusionForSymbolsAndCircles,St.program),ze.activeTexture.set(Le.TEXTURE0),St.atlasTexture&&St.atlasTexture.bind(St.atlasInterpolation,Le.CLAMP_TO_EDGE,!0),St.atlasTextureIcon&&(ze.activeTexture.set(Le.TEXTURE1),St.atlasTextureIcon&&St.atlasTextureIcon.bind(St.atlasInterpolationIcon,Le.CLAMP_TO_EDGE,!0)),m.uploadCommonLightUniforms(m.context,St.program),St.hasHalo){const Ft=St.uniformValues;Ft.u_is_halo=1,Fp(St.buffers,Ut.segments,u,m,St.program,pt,x,w,Ft,2),Ft.u_is_halo=0}else{if(St.isSDF){const Ft=St.uniformValues;St.hasHalo&&(Ft.u_is_halo=1,Fp(St.buffers,Ut.segments,u,m,St.program,pt,x,w,Ft,1)),Ft.u_is_halo=0}Fp(St.buffers,Ut.segments,u,m,St.program,pt,x,w,St.uniformValues,1)}}}function Fp(m,a,u,g,x,w,S,k,O,N){const Q=[m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer,m.iconTransitioningVertexBuffer,m.globeExtVertexBuffer,m.zOffsetVertexBuffer];x.draw(g,g.context.gl.TRIANGLES,w,S,k,pr.disabled,O,u.id,m.layoutVertexBuffer,m.indexBuffer,a,u.paint,g.transform.zoom,m.programConfigurations.get(u.id),Q,N)}function Lg(m,a,u,g,x,w,S){const k=m.context.gl,O=u.paint.get("fill-pattern"),N=u.is3D(),Q=N?m.stencilModeFor3D():At.disabled,W=O&&O.constantOr(1);let X,Y,ae,le,ce;S?(Y=W&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=k.LINES):(Y=W?"fillPattern":"fill",X=k.TRIANGLES);for(const Ae of g){const Be=a.getTile(Ae);if(W&&!Be.patternsLoaded())continue;const Te=Be.getBucket(u);if(!Te)continue;m.prepareDrawTile();const be=Te.programConfigurations.get(u.id),Me=m.isTileAffectedByFog(Ae),Fe=m.getOrCreateProgram(Y,{config:be,overrideFog:Me});W&&(m.context.activeTexture.set(k.TEXTURE0),Be.imageAtlasTexture&&Be.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),be.updatePaintBuffers());const ze=O.constantOr(null);if(ze&&Be.imageAtlas){const Xe=Be.imageAtlas.patternPositions[ze.toString()];Xe&&be.setConstantPatternPositions(Xe)}const Le=m.translatePosMatrix(Ae.projMatrix,Be,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor")),Ve=u.paint.get("fill-emissive-strength");if(S){le=Te.indexBuffer2,ce=Te.segments2;const Xe=m.terrain&&m.terrain.renderingToTexture?m.terrain.drapeBufferSize:[k.drawingBufferWidth,k.drawingBufferHeight];ae=Y==="fillOutlinePattern"&&W?Sp(Le,Ve,m,Be,Xe):jw(Le,Ve,Xe)}else le=Te.indexBuffer,ce=Te.segments,ae=W?Hw(Le,Ve,m,Be):Eg(Le,Ve);m.uploadCommonUniforms(m.context,Fe,Ae.toUnwrapped()),Fe.draw(m,X,x,N?Q:m.stencilModeForClipping(Ae),w,pr.disabled,ae,u.id,Te.layoutVertexBuffer,le,ce,u.paint,m.transform.zoom,be,void 0)}}function Td(m,a,u,g,x,w,S,k){u.resetLayerRenderingStats(m);const O=m.context,N=O.gl,Q=m.transform,W=u.paint.get("fill-extrusion-pattern"),X=W.constantOr(1),Y=u.paint.get("fill-extrusion-opacity"),ae=m.style.enable3dLights(),le=u.paint.get(ae&&!X?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),ce=[u.paint.get("fill-extrusion-ambient-occlusion-intensity"),le],Ae=u.layout.get("fill-extrusion-edge-radius"),Be=Ae>0&&!u.paint.get("fill-extrusion-rounded-roof"),Te=Be?0:Ae,be=Q.projection.name==="globe"?o.c_():0,Me=Q.projection.name==="globe",Fe=Me?o.a9(Q.zoom):0,ze=[o.am(Q.center.lng),o.at(Q.center.lat)],Le=u.paint.get("fill-extrusion-flood-light-color").toRenderColor(u.lut).toArray01().slice(0,3),Ve=u.paint.get("fill-extrusion-flood-light-intensity"),Xe=u.paint.get("fill-extrusion-vertical-scale"),je=u.paint.get("fill-extrusion-line-width").constantOr(1)!==0,He=Pu(m,u.paint.get("fill-extrusion-cutoff-fade-range")),nt=[];let mt;Me&&nt.push("PROJECTION_GLOBE_VIEW"),ce[0]>0&&nt.push("FAUX_AO"),Be&&nt.push("ZERO_ROOF_RADIUS"),k&&nt.push("HAS_CENTROID"),Ve>0&&nt.push("FLOOD_LIGHT"),He.shouldRenderCutoff&&nt.push("RENDER_CUTOFF"),je&&nt.push("RENDER_WALL_MODE");const Et=m.renderPass==="shadow",pt=m.shadowRenderer,kt=Et&&!!pt;m.shadowRenderer&&(m.shadowRenderer.useNormalOffset=!0);let it=[0,0,0];if(pt){const Dt=m.style.directionalLight,Ut=m.style.ambientLight;Dt&&Ut&&(it=Ag(m.style,Dt,Ut)),mt=nt.concat(["SHADOWS_SINGLE_CASCADE"])}const wt=kt?"fillExtrusionDepth":X?"fillExtrusionPattern":"fillExtrusion",bt=u.getLayerRenderingStats();for(const Dt of g){const Ut=a.getTile(Dt),St=Ut.getBucket(u);if(!St||St.projection.name!==Q.projection.name)continue;let Ft=!1;pt&&(Ft=pt.getMaxCascadeForTile(Dt.toUnwrapped())===0);const gr=m.isTileAffectedByFog(Dt),Nt=St.programConfigurations.get(u.id),Jt=m.getOrCreateProgram(wt,{config:Nt,defines:Ft?mt:nt,overrideFog:gr});if(m.terrain&&m.terrain.setupElevationDraw(Ut,Jt,{useMeterToDem:!0}),!St.centroidVertexBuffer){const jn=Jt.attributes.a_centroid_pos;jn!==void 0&&N.vertexAttrib2f(jn,0,0)}!Et&&pt&&pt.setupShadows(Ut.tileID.toUnwrapped(),Jt,"vector-tile",Ut.tileID.overscaledZ),X&&(m.context.activeTexture.set(N.TEXTURE0),Ut.imageAtlasTexture&&Ut.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),Nt.updatePaintBuffers());const Br=W.constantOr(null);if(Br&&Ut.imageAtlas){const jn=Ut.imageAtlas.patternPositions[Br.toString()];jn&&Nt.setConstantPatternPositions(jn)}const sr=u.paint.get("fill-extrusion-vertical-gradient"),xr=1/St.tileToMeter;let Qr;if(Et&&pt){if(jv(Ut.tileID,St,m))continue;const jn=pt.calculateShadowPassMatrixFromTile(Ut.tileID.toUnwrapped());Qr=Qw(jn,Te,xr,Xe)}else{const jn=m.translatePosMatrix(Dt.expandedProjMatrix,Ut,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),hi=Q.projection.createInversionMatrix(Q,Dt.canonical);Qr=X?Ov(jn,m,sr,Y,ce,Te,xr,Dt,Ut,be,Fe,ze,hi,Le,Xe):Lv(jn,m,sr,Y,ce,Te,xr,Dt,be,Fe,ze,hi,Le,Xe,Ve,it)}m.uploadCommonUniforms(O,Jt,Dt.toUnwrapped(),null,He);let zr=St.segments;if(Q.projection.name==="mercator"&&!Et&&(zr=St.getVisibleSegments(Ut.tileID,m.terrain,m.transform.getFrustum(0)),!zr.get().length))continue;if(bt)if(Et)for(const jn of zr.get())bt.numRenderedVerticesInShadowPass+=jn.primitiveLength;else for(const jn of zr.get())bt.numRenderedVerticesInTransparentPass+=jn.primitiveLength;const Dn=[];(m.terrain||k)&&Dn.push(St.centroidVertexBuffer),Me&&Dn.push(St.layoutVertexExtBuffer),je&&Dn.push(St.wallVertexBuffer),Jt.draw(m,O.gl.TRIANGLES,x,w,S,pr.backCCW,Qr,u.id,St.layoutVertexBuffer,St.indexBuffer,zr,u.paint,m.transform.zoom,Nt,Dn)}m.shadowRenderer&&(m.shadowRenderer.useNormalOffset=!1)}function as(m,a,u,g,x,w,S,k,O,N,Q,W,X,Y,ae,le,ce,Ae,Be){const Te=m.context,be=Te.gl,Me=m.transform,Fe=m.transform.zoom,ze=[],Le=Pu(m,u.paint.get("fill-extrusion-cutoff-fade-range"));N==="clear"?(ze.push("CLEAR_SUBPASS"),Be&&(ze.push("CLEAR_FROM_TEXTURE"),Te.activeTexture.set(be.TEXTURE0),Be.bind(be.LINEAR,be.CLAMP_TO_EDGE))):N==="sdf"&&ze.push("SDF_SUBPASS"),ce&&ze.push("HAS_CENTROID"),Le.shouldRenderCutoff&&ze.push("RENDER_CUTOFF");const Ve=u.layout.get("fill-extrusion-edge-radius"),Xe=(je,He,nt,mt,Et)=>{const pt=He.programConfigurations.get(u.id),kt=m.isTileAffectedByFog(je),it=m.getOrCreateProgram("fillExtrusionGroundEffect",{config:pt,defines:ze,overrideFog:kt}),wt=((Dt,Ut,St,Ft,gr,Nt,Jt,Br,sr,xr,Qr)=>({u_matrix:Ut,u_opacity:St,u_ao_pass:Ft?1:0,u_meter_to_tile:gr,u_ao:Nt,u_flood_light_intensity:Jt,u_flood_light_color:Br,u_attenuation:sr,u_edge_radius:xr,u_fb:0,u_fb_size:Qr,u_dynamic_offset:1}))(0,mt,Q,O,Et,[W,X*Et],Y,ae,le,Fe>=17?0:Ve*Et,Be?Be.size[0]:0),bt=[];ce&&bt.push(He.hiddenByLandmarkVertexBuffer),m.uploadCommonUniforms(Te,it,je.toUnwrapped(),null,Le),it.draw(m,Te.gl.TRIANGLES,x,w,S,k,wt,u.id,He.vertexBuffer,He.indexBuffer,nt,u.paint,Fe,pt,bt)};for(const je of g){const He=a.getTile(je),nt=He.getBucket(u);if(!nt||nt.projection.name!==Me.projection.name||!nt.groundEffect||nt.groundEffect&&!nt.groundEffect.hasData())continue;const mt=nt.groundEffect,Et=1/nt.tileToMeter;{const pt=m.translatePosMatrix(je.projMatrix,He,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),kt=mt.getDefaultSegment();Xe(je,mt,kt,pt,Et)}if(Ae)for(let pt=0;pt<4;pt++){const kt=o.c$[pt](je),it=a.getTile(kt);if(!it)continue;const wt=it.getBucket(u);if(!wt||wt.projection.name!==Me.projection.name||!wt.groundEffect||wt.groundEffect&&!wt.groundEffect.hasData())continue;const bt=wt.groundEffect;let Dt,Ut;pt===0?(Dt=[-o.ab,0,0],Ut=1):pt===1?(Dt=[o.ab,0,0],Ut=0):pt===2?(Dt=[0,-o.ab,0],Ut=3):(Dt=[0,o.ab,0],Ut=2);const St=bt.regionSegments[Ut];if(!St)continue;const Ft=new Float32Array(16);o.a6.mat4.translate(Ft,je.projMatrix,Dt),Xe(je,bt,St,m.translatePosMatrix(Ft,He,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Et)}}}function xh(m,a,u,g,x,w,S){g.centroidVertexArray.length===0&&g.createCentroidsBuffer();const k=w?w.findDEMTileFor(u):null;if(!(k&&k.dem||S))return;const O=Ae=>new o.P(Math.ceil((Ae+o.d2)*o.d3),0),N=Ae=>{const Be=a.getSource().minzoom,Te=Me=>{const Fe=a.getTileByID(Me);if(Fe&&Fe.hasData())return Fe.getBucket(x)},be=[0,-1,1];for(const Me of be){if(Ae.overscaledZ+Me<Be)continue;const Fe=Te(Ae.calculateScaledKey(Ae.overscaledZ+Me));if(Fe)return Fe}},Q=[0,0,0],W=(Ae,Be)=>(Q[0]=Math.min(Ae.min.y,Be.min.y),Q[1]=Math.max(Ae.max.y,Be.max.y),Q[2]=o.ab-Be.min.x>Ae.max.x?Be.min.x-o.ab:Ae.max.x,Q),X=(Ae,Be)=>(Q[0]=Math.min(Ae.min.x,Be.min.x),Q[1]=Math.max(Ae.max.x,Be.max.x),Q[2]=o.ab-Be.min.y>Ae.max.y?Be.min.y-o.ab:Ae.max.y,Q),Y=[(Ae,Be)=>W(Ae,Be),(Ae,Be)=>W(Be,Ae),(Ae,Be)=>X(Ae,Be),(Ae,Be)=>X(Be,Ae)],ae=(Ae,Be,Te,be,Me,Fe,ze)=>{if(!w)return 0;const Le=[[Fe?Te:Ae,Fe?Ae:Te,0],[Fe?Te:Be,Fe?Be:Te,0]],Ve=ze<0?o.ab+ze:ze,Xe=[Fe?Ve:(Ae+Be)/2,Fe?(Ae+Be)/2:Ve,0];return Te===0&&ze<0||Te!==0&&ze>0?w.getForTilePoints(Me,[Xe],!0,be):Le.push(Xe),w.getForTilePoints(u,Le,!0,k),Math.max(Le[0][2],Le[1][2],Xe[2])/w.exaggeration()};for(let Ae=0;Ae<4;Ae++){const Be=g.borderFeatureIndices[Ae];if(Be.length===0)continue;const Te=o.c$[Ae](u),be=N(Te);if(!(be&&be instanceof o.d0)||g.borderDoneWithNeighborZ[Ae]===be.canonical.z)continue;be.centroidVertexArray.length===0&&be.createCentroidsBuffer();const Me=w?w.findDEMTileFor(Te):null;if(!(Me&&Me.dem||S))continue;const Fe=(Ae<2?1:5)-Ae,ze=be.borderDoneWithNeighborZ[Fe]!==g.canonical.z,Le=be.borderFeatureIndices[Fe];let Ve=0;if(g.canonical.z!==be.canonical.z){for(const Xe of Be)g.showCentroid(g.featuresOnBorder[Xe]);if(ze)for(const Xe of Le)be.showCentroid(be.featuresOnBorder[Xe]);g.borderDoneWithNeighborZ[Ae]=be.canonical.z,be.borderDoneWithNeighborZ[Fe]=g.canonical.z}for(const Xe of Be){const je=g.featuresOnBorder[Xe],He=g.centroidData[je.centroidDataIndex],nt=je.borders[Ae];let mt;for(;Ve<Le.length;){mt=be.featuresOnBorder[Le[Ve]];const Et=mt.borders[Fe];if(Et[1]>nt[0]+3||Et[0]>nt[0]-3)break;be.showCentroid(mt),Ve++}if(mt&&Ve<Le.length){const Et=Ve;let pt=0;for(;!(mt.borders[Fe][0]>nt[1]-3)&&(pt++,++Ve!==Le.length);)mt=be.featuresOnBorder[Le[Ve]];mt=be.featuresOnBorder[Le[Et]];let kt=!1;if(pt>=1){const bt=mt.borders[Fe];Math.abs(nt[0]-bt[0])<3&&Math.abs(nt[1]-bt[1])<3&&(pt=1,kt=!0,Ve=Et+1)}else if(pt===0){g.showCentroid(je);continue}const it=be.centroidData[mt.centroidDataIndex];S&&kt&&(((le=He).flags|(ce=it).flags)&o.d1?(le.flags|=o.d1,ce.flags|=o.d1):(le.flags&=~o.d1,ce.flags&=~o.d1));const wt=je.intersectsCount()>1||mt.intersectsCount()>1;if(pt>1)Ve=Et,He.centroidXY=it.centroidXY=new o.P(0,0);else if(Me&&Me.dem&&!wt){const bt=Y[Ae](He,it),Dt=Ae%2?o.ab-1:0,Ut=ae(bt[0],Math.min(o.ab-1,bt[1]),Dt,Me,Te,Ae<2,bt[2]);He.centroidXY=it.centroidXY=O(Ut)}else wt?He.centroidXY=it.centroidXY=new o.P(0,0):(He.centroidXY=g.encodeBorderCentroid(je),it.centroidXY=be.encodeBorderCentroid(mt));g.writeCentroidToBuffer(He),be.writeCentroidToBuffer(it)}else g.showCentroid(je)}g.borderDoneWithNeighborZ[Ae]=be.canonical.z,be.borderDoneWithNeighborZ[Fe]=g.canonical.z}var le,ce;(g.needsCentroidUpdate||!g.centroidVertexBuffer&&g.centroidVertexArray.length!==0)&&g.uploadCentroid(m)}const Zw=[1,0,0],Qv=[0,1,0],Hv=[0,0,1];function jv(m,a,u){const g=u.transform,x=u.shadowRenderer;if(!x)return!0;const w=m.toUnwrapped(),S=g.tileSize*x._cascades[u.currentShadowCascade].scale;let k=a.maxHeight;if(g.elevation){const le=g.elevation.getMinMaxForTile(m);le&&(k+=le.max)}const O=[...x.shadowDirection];O[2]=-O[2];const N=x.computeSimplifiedTileShadowVolume(w,k,S,O);if(!N)return!1;const Q=[Zw,Qv,Hv,O,[O[0],0,O[2]],[0,O[1],O[2]]],W=g.projection.name==="globe",X=g.scaleZoom(S),Y=o.bN.fromInvProjectionMatrix(g.invProjMatrix,g.worldSize,X,!W),ae=x.getCurrentCascadeFrustum();return Y.intersectsPrecise(N.vertices,N.planes,Q)===0||ae.intersectsPrecise(N.vertices,N.planes,Q)===0}function Gv(m){return[m[0]*o.d4,m[1]*o.d4,m[2]*o.d4,0]}function Ua(m,a,u,g,x,w,S,k,O){const N=g.getSource(),Q=u.globeSharedBuffers;if(!Q)return;let W,X,Y;if(a&&(W=g.getTile(a)),N instanceof o.aD?(X=N.texture,Y=o.cD(0,0,u.transform)):W&&a&&(X=W.texture,Y=o.cD(a.canonical.z,a.canonical.x,u.transform)),!X||!Y)return;m||(Y=o.a6.mat4.scale(o.a6.mat4.create(),Y,[1,-1,1]));const ae=u.context,le=ae.gl,ce=x.paint.get("raster-resampling")==="nearest"?le.NEAREST:le.LINEAR,Ae=u.colorModeForDrapableLayerRenderPass(w),Be=S.defines;Be.push("GLOBE_POLES");const Te=new Se(le.LEQUAL,Se.ReadWrite,u.depthRangeFor3D),be=Float32Array.from(u.transform.expandedFarZProjMatrix),Me=Float32Array.from(o.b5(o.cC(new o.bP(0,0,0))));u.terrain&&u.terrain.prepareDrawTile(),ae.activeTexture.set(le.TEXTURE0),X.bind(ce,le.CLAMP_TO_EDGE),ae.activeTexture.set(le.TEXTURE1),X.bind(ce,le.CLAMP_TO_EDGE),X.useMipmap&&ae.extTextureFilterAnisotropic&&u.transform.pitch>20&&le.texParameterf(le.TEXTURE_2D,ae.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ae.extTextureFilterAnisotropicMax);const[Fe,ze,Le,Ve]=a?Q.getPoleBuffers(a.canonical.z,!1):Q.getPoleBuffers(0,!0),Xe=x.paint.get("raster-elevation");let je;m?(je=Fe,u.renderDefaultNorthPole=Xe!==0):(je=ze,u.renderDefaultSouthPole=Xe!==0);const He=Gv(S.mix),nt=((Et,pt,kt,it,wt,bt,Dt,Ut,St,Ft,gr,Nt,Jt)=>Ep(Et,pt,kt,new Float32Array(16),new Float32Array(9),[0,0],it,[0,0],[0,0,0,0],1,{opacity:1,mix:0},bt,[0,0],Ut,2,Ft,gr,Nt,1,0,Jt))(be,Me,Y,o.a9(u.transform.zoom),0,x,0,Xe,0,He,S.offset,S.range,w),mt=u.getOrCreateProgram("raster",{defines:Be});u.uploadCommonUniforms(ae,mt,null),mt.draw(u,le.TRIANGLES,Te,O,Ae,k,nt,x.id,je,Le,Ve)}function Gi(m){const a=m._nearZ,u=m.projection.farthestPixelDistance(m),g=u-a,x=.2*m.height,w=a+x;return[a,u,(w-x-a)/g,(w-a)/g]}function Og(m,a,u,g){if(m)return a instanceof Zl&&m instanceof ci?a.getTextureDescriptor(m,u,!0):{texture:m.texture,mix:Gv(g.mix),offset:g.offset,buffer:0,tileSize:1}}var Kv=o.d5([{name:"a_index",type:"Int16",components:1}]);class Yw{constructor(a,u,g,x){const w={width:g[0],height:g[1],data:null},S=a.gl;this.targetColorTexture=new o.T(a,w,S.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new o.T(a,w,S.RGBA8,{useMipmap:!1}),this.context=a,this.updateParticleTexture(u,x),this.lastInvalidatedAt=0}updateParticleTexture(a,u){if(this.particleTextureDimension===u.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const g=this.context.gl,x=u.width*u.height;this.particleTexture0=new o.T(this.context,u,g.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new o.T(this.context,u,g.RGBA8,{premultiply:!1,useMipmap:!1});const w=new o.d6;w.reserve(x);for(let S=0;S<x;S++)w.emplaceBack(S);this.particleIndexBuffer=this.context.createVertexBuffer(w,Kv.members,!0),this.particleSegment=o.b1.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=u.width}update(a){return!(this.lastInvalidatedAt<a&&(this.lastInvalidatedAt=o.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function Jw(m,a,u){if(!m)return null;const g=a.getTextureDescriptor(m,u,!0);if(!g)return null;let{texture:x,mix:w,offset:S,tileSize:k,buffer:O,format:N}=g;if(!x||!N)return null;let Q=!1;return N==="uint32"&&(Q=!0,w[3]=0,w=Tg(o.d7,w,[0,u.paint.get("raster-particle-max-speed")]),S=Ig(o.d7,S,[0,u.paint.get("raster-particle-max-speed")])),{texture:x,textureOffset:[O/(k+2*O),k/(k+2*O)],tileSize:k,scalarData:Q,scale:w,offset:S,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[N]]}}function $w(m){const a=m._nearZ,u=m.projection.farthestPixelDistance(m),g=u-a,x=.2*m.height,w=a+x;return[a,u,(w-x-a)/g,(w-a)/g]}const rP=new o.bz(1,0,0,1),Id=new o.bz(0,1,0,1),Fd=new o.bz(0,0,1,1),zt=new o.bz(1,0,1,1),mr=new o.bz(0,1,1,1);function $l(m,a,u,g,x,w,S){const k=m.context,O=m.transform,N=k.gl,Q=O.projection.name==="globe",W=Q?["PROJECTION_GLOBE_VIEW"]:[];let X=o.a6.mat4.clone(u.projMatrix);if(Q&&o.a9(O.zoom)>0){const He=o.b4(u.canonical,O),nt=o.d8(He);X=o.a6.mat4.multiply(new Float32Array(16),O.globeMatrix,nt),o.a6.mat4.multiply(X,O.projMatrix,X)}const Y=o.a6.mat4.create();Y[12]+=2*x/(o.q.devicePixelRatio*O.width),Y[13]+=2*w/(o.q.devicePixelRatio*O.height),o.a6.mat4.multiply(X,Y,X);const ae=m.getOrCreateProgram("debug",{defines:W}),le=a.getTileByID(u.key);m.terrain&&m.terrain.setupElevationDraw(le,ae);const ce=Se.disabled,Ae=At.disabled,Be=m.colorModeForRenderPass(),Te="$debug";k.activeTexture.set(N.TEXTURE0),m.emptyTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),Q?le._makeGlobeTileDebugBuffers(m.context,O):le._makeDebugTileBoundsBuffers(m.context,O.projection);const be=le._tileDebugBuffer||m.debugBuffer,Me=le._tileDebugIndexBuffer||m.debugIndexBuffer,Fe=le._tileDebugSegments||m.debugSegments;if(ae.draw(m,N.LINE_STRIP,ce,Ae,Be,pr.disabled,Gw(X,g),Te,be,Me,Fe,null,null,null,[le._globeTileDebugBorderBuffer]),S){const He=le.latestRawTileData,nt=Math.floor((He&&He.byteLength||0)/1024);let mt=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(mt+=` => ${u.overscaledZ}`),mt+=` ${le.state}`,mt+=` ${nt}kb`,function(Et,pt){Et.initDebugOverlayCanvas();const kt=Et.debugOverlayCanvas,it=Et.context.gl,wt=Et.debugOverlayCanvas.getContext("2d");wt.clearRect(0,0,kt.width,kt.height),wt.shadowColor="white",wt.shadowBlur=2,wt.lineWidth=1.5,wt.strokeStyle="white",wt.textBaseline="top",wt.font="bold 36px Open Sans, sans-serif",wt.fillText(pt,5,5),wt.strokeText(pt,5,5),Et.debugOverlayTexture.update(kt),Et.debugOverlayTexture.bind(it.LINEAR,it.CLAMP_TO_EDGE)}(m,mt)}const ze=a.getTile(u).tileSize,Le=512/Math.min(ze,512)*(u.overscaledZ/O.zoom)*.5,Ve=le._tileDebugTextBuffer||m.debugBuffer,Xe=le._tileDebugTextIndexBuffer||m.quadTriangleIndexBuffer,je=le._tileDebugTextSegments||m.debugSegments;ae.draw(m,N.TRIANGLES,ce,Ae,ue.alphaBlended,pr.disabled,Gw(X,o.bz.transparent,Le),Te,Ve,Xe,je,null,null,null,[le._globeTileDebugTextBuffer])}function wi(m,a,u,g){Pp(m,0,a+u/2,m.transform.width,u,g)}function ot(m,a,u,g){Pp(m,a-u/2,0,u,m.transform.height,g)}function Pp(m,a,u,g,x,w){const S=m.context,k=S.gl;k.enable(k.SCISSOR_TEST),k.scissor(a*o.q.devicePixelRatio,u*o.q.devicePixelRatio,g*o.q.devicePixelRatio,x*o.q.devicePixelRatio),S.clear({color:w}),k.disable(k.SCISSOR_TEST)}const Ug=o.d5([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Wv}=Ug;function ec(m,a,u,g){m.emplaceBack(a,u,g)}class qv{constructor(a){this.vertexArray=new o.d9,this.indices=new o.aO,ec(this.vertexArray,-1,-1,1),ec(this.vertexArray,1,-1,1),ec(this.vertexArray,-1,1,1),ec(this.vertexArray,1,1,1),ec(this.vertexArray,-1,-1,-1),ec(this.vertexArray,1,-1,-1),ec(this.vertexArray,-1,1,-1),ec(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=a.createVertexBuffer(this.vertexArray,Wv),this.indexBuffer=a.createIndexBuffer(this.indices),this.segment=o.b1.simpleSegment(0,0,36,12)}}function _A(m,a,u,g,x,w){const S=m.context.gl,k=a.paint.get("sky-atmosphere-color"),O=a.paint.get("sky-atmosphere-halo-color"),N=a.paint.get("sky-atmosphere-sun-intensity"),Q=((W,X,Y,ae,le)=>({u_matrix_3f:W,u_sun_direction:X,u_sun_intensity:Y,u_color_tint_r:[ae.r,ae.g,ae.b,ae.a],u_color_tint_m:[le.r,le.g,le.b,le.a],u_luminance:5e-5}))(o.a6.mat3.fromMat4(o.a6.mat3.create(),g),x,N,k,O);S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_CUBE_MAP_POSITIVE_X+w,a.skyboxTexture,0),u.draw(m,S.TRIANGLES,Se.disabled,At.disabled,ue.unblended,pr.frontCW,Q,"skyboxCapture",a.skyboxGeometry.vertexBuffer,a.skyboxGeometry.indexBuffer,a.skyboxGeometry.segment)}const Pd=o.d5([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class nP{constructor(a){const u=new o.da;u.emplaceBack(-1,1,1,0,0),u.emplaceBack(1,1,1,1,0),u.emplaceBack(1,-1,1,1,1),u.emplaceBack(-1,-1,1,0,1);const g=new o.aO;g.emplaceBack(0,1,2),g.emplaceBack(2,3,0),this.vertexBuffer=a.createVertexBuffer(u,Pd.members),this.indexBuffer=a.createIndexBuffer(g),this.segments=o.b1.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const iP=o.d5([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class eB{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class zg{constructor(a){this.colorModeAlphaBlendedWriteRGB=new ue([1,ne,1,ne],o.bz.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new ue([1,0,1,0],o.bz.transparent,[!1,!1,!1,!0]),this.params=new eB,this.updateNeeded=!0,a.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),a.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),a.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),a.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(a){const u=a.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new nP(u);const g=this.params.sizeRange,x=this.params.intensityRange,w=function(Q){const W=o.dd(30),X=[];for(let Y=0;Y<Q;++Y){const ae=2*Math.PI*W(),le=Math.acos(1-2*W())-.5*Math.PI;X.push(o.a6.vec3.fromValues(Math.cos(le)*Math.cos(ae),Math.cos(le)*Math.sin(ae),Math.sin(le)))}return X}(this.params.starsCount),S=o.dd(300),k=new o.db,O=new o.aO;let N=0;for(let Q=0;Q<w.length;++Q){const W=o.a6.vec3.scale([],w[Q],200),X=Math.max(0,1+.01*g*(1*S()-.5)),Y=Math.max(0,1+.01*x*(1*S()-.5));k.emplaceBack(W[0],W[1],W[2],-1,-1,X,Y),k.emplaceBack(W[0],W[1],W[2],1,-1,X,Y),k.emplaceBack(W[0],W[1],W[2],1,1,X,Y),k.emplaceBack(W[0],W[1],W[2],-1,1,X,Y),O.emplaceBack(N+0,N+1,N+2),O.emplaceBack(N+0,N+2,N+3),N+=4}this.starsVx=u.createVertexBuffer(k,iP.members),this.starsIdx=u.createIndexBuffer(O),this.starsSegments=o.b1.simpleSegment(0,0,k.length,O.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(a,u){const g=a.context,x=g.gl,w=a.transform,S=new Se(x.LEQUAL,Se.ReadOnly,[0,1]),k=o.a9(w.zoom),O=a.style.getLut(u.scope),N=u.properties.get("color").toRenderColor(O).toArray01(),Q=u.properties.get("high-color").toRenderColor(O).toArray01(),W=u.properties.get("space-color").toRenderColor(O).toArray01PremultipliedAlpha(),X=5e-4,Y=o.dc(u.properties.get("horizon-blend"),0,1,X,.25),ae=o.cx(a,g,w)&&Y===X?w.worldSize/(2*Math.PI*1.025)-1:w.globeRadius,le=a.frameCounter/1e3%1,ce=o.a6.vec3.length(w.globeCenterInViewSpace),Ae=Math.sqrt(Math.pow(ce,2)-Math.pow(ae,2)),Be=Math.acos(Ae/ce),Te=be=>{const Me=w.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];be&&Me.push("ALPHA_PASS");const Fe=a.getOrCreateProgram("globeAtmosphere",{defines:Me}),ze=((Ve,Xe,je,He,nt,mt,Et,pt,kt,it,wt,bt)=>({u_frustum_tl:Ve,u_frustum_tr:Xe,u_frustum_br:je,u_frustum_bl:He,u_horizon:nt,u_transition:mt,u_fadeout_range:Et,u_color:pt,u_high_color:kt,u_space_color:it,u_temporal_offset:wt,u_horizon_angle:bt}))(w.frustumCorners.TL,w.frustumCorners.TR,w.frustumCorners.BR,w.frustumCorners.BL,w.frustumCorners.horizon,k,Y,N,Q,W,le,Be);a.uploadCommonUniforms(g,Fe);const Le=this.atmosphereBuffer;Le&&Fe.draw(a,x.TRIANGLES,S,At.disabled,be?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,pr.backCW,ze,be?"atmosphere_glow_alpha":"atmosphere_glow",Le.vertexBuffer,Le.indexBuffer,Le.segments)};Te(!1),Te(!0)}drawStars(a,u){const g=o.ap(u.properties.get("star-intensity"),0,1);if(g===0)return;const x=a.context,w=x.gl,S=a.transform,k=a.getOrCreateProgram("stars"),O=o.a6.quat.identity([]);o.a6.quat.rotateX(O,O,-S._pitch),o.a6.quat.rotateZ(O,O,-S.angle),o.a6.quat.rotateX(O,O,o.bB(S._center.lat)),o.a6.quat.rotateY(O,O,-o.bB(S._center.lng));const N=o.a6.mat4.fromQuat(new Float32Array(16),O),Q=o.a6.mat4.multiply([],S.starsProjMatrix,N),W=o.a6.mat3.fromMat4([],N),X=o.a6.mat3.invert([],W),Y=[0,1,0];o.a6.vec3.transformMat3(Y,Y,X),o.a6.vec3.scale(Y,Y,this.params.sizeMultiplier);const ae=[1,0,0];o.a6.vec3.transformMat3(ae,ae,X),o.a6.vec3.scale(ae,ae,this.params.sizeMultiplier);const le=(ce=Y,Ae=ae,Be=g,{u_matrix:Float32Array.from(Q),u_up:ce,u_right:Ae,u_intensity_multiplier:Be});var ce,Ae,Be;a.uploadCommonUniforms(x,k),this.starsVx&&this.starsIdx&&k.draw(a,w.TRIANGLES,Se.disabled,At.disabled,this.colorModeAlphaBlendedWriteRGB,pr.disabled,le,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function Vg(m,a){const u=[...m],g=a.cameraWorldSizeForFog/a.worldSize,x=o.a6.mat4.identity([]);return o.a6.mat4.scale(x,x,[g,g,1]),o.a6.mat4.multiply(u,x,u),o.a6.mat4.multiply(u,a.worldToFogMatrix,u),u}function Ng(m,a,u,g,x){const w=u.material,S=g.context,{baseColorTexture:k,metallicRoughnessTexture:O}=w.pbrMetallicRoughness,{normalTexture:N,occlusionTexture:Q,emissionTexture:W}=w;function X(Y,ae,le){if(Y&&(m.push(ae),S.activeTexture.set(S.gl.TEXTURE0+le),Y.gfxTexture)){const{minFilter:ce,magFilter:Ae,wrapS:Be,wrapT:Te}=Y.sampler;Y.gfxTexture.bindExtraParam(ce,Ae,Be,Te)}}X(k,"HAS_TEXTURE_u_baseColorTexture",Bo.BaseColor),X(O,"HAS_TEXTURE_u_metallicRoughnessTexture",Bo.MetallicRoughness),X(N,"HAS_TEXTURE_u_normalTexture",Bo.Normal),X(Q,"HAS_TEXTURE_u_occlusionTexture",Bo.Occlusion),X(W,"HAS_TEXTURE_u_emissionTexture",Bo.Emission),x&&(x.texture||(x.texture=new o.df(g.context,x.image,[x.image.height,x.image.height,x.image.height],S.gl.RGBA8)),S.activeTexture.set(S.gl.TEXTURE0+Bo.LUT),x.texture&&x.texture.bind(S.gl.LINEAR,S.gl.CLAMP_TO_EDGE),m.push("APPLY_LUT_ON_GPU")),u.texcoordBuffer&&(m.push("HAS_ATTRIBUTE_a_uv_2f"),a.push(u.texcoordBuffer)),u.colorBuffer&&(m.push(u.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),a.push(u.colorBuffer)),u.normalBuffer&&(m.push("HAS_ATTRIBUTE_a_normal_3f"),a.push(u.normalBuffer)),u.pbrBuffer&&(m.push("HAS_ATTRIBUTE_a_pbr"),m.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),a.push(u.pbrBuffer)),w.alphaMode!=="OPAQUE"&&w.alphaMode!=="MASK"||m.push("UNPREMULT_TEXTURE_IN_SHADER"),w.defined||m.push("DIFFUSE_SHADED"),m.push("USE_STANDARD_DERIVATIVES")}function Mp(m,a,u,g,x,w){const S=u.paint.get("model-opacity"),k=a.context,O=new Se(a.context.gl.LEQUAL,Se.ReadWrite,a.depthRangeFor3D),N=a.transform,Q=m.mesh,W=Q.material,X=W.pbrMetallicRoughness,Y=a.style.fog;let ae;ae=a.transform.projection.zAxisUnit==="pixels"?[...m.nodeModelMatrix]:o.a6.mat4.multiply([],g.zScaleMatrix,m.nodeModelMatrix),o.a6.mat4.multiply(ae,g.negCameraPosMatrix,ae);const le=o.a6.mat4.invert([],ae);o.a6.mat4.transpose(le,le);const ce=u.paint.get("model-emissive-strength").constantOr(0),Ae=rr(new Float32Array(m.worldViewProjection),new Float32Array(ae),new Float32Array(le),null,a,S,X.baseColorFactor.toRenderColor(null),W.emissiveFactor,X.metallicFactor,X.roughnessFactor,W,ce,u),Be={defines:[]},Te=[];Ng(Be.defines,Te,Q,a,u.lut);const be=a.shadowRenderer;be&&(be.useNormalOffset=!1);let Me=null;if(Y){const Le=Vg(m.nodeModelMatrix,a.transform);if(Me=new Float32Array(Le),N.projection.name!=="globe"){const Ve=Q.aabb.min,Xe=Q.aabb.max,[je,He]=Y.getOpacityForBounds(Le,Ve[0],Ve[1],Xe[0],Xe[1]);Be.overrideFog=je>=Kt||He>=Kt}}const Fe=Pu(a,u.paint.get("model-cutoff-fade-range"));Fe.shouldRenderCutoff&&Be.defines.push("RENDER_CUTOFF");const ze=a.getOrCreateProgram("model",Be);a.uploadCommonUniforms(k,ze,null,Me,Fe),a.renderPass!=="shadow"&&be&&be.setupShadowsFromMatrix(m.nodeModelMatrix,ze),ze.draw(a,k.gl.TRIANGLES,O,x,w,Q.material.doubleSided?pr.disabled:pr.backCCW,Ae,u.id,Q.vertexBuffer,Q.indexBuffer,Q.segments,u.paint,a.transform.zoom,void 0,Te)}function Rp(m,a,u,g,x,w,S){let k;k=m.projection.name==="globe"?o.dg(u,m):[...u],o.a6.mat4.multiply(k,k,a.matrix);const O=o.a6.mat4.multiply([],g,k);if(a.meshes)for(const N of a.meshes){if(N.material.alphaMode!=="BLEND"){S.push({mesh:N,depth:0,modelIndex:x,worldViewProjection:O,nodeModelMatrix:k});continue}const Q=o.a6.vec3.transformMat4([],N.centroid,O);Q[2]>0&&w.push({mesh:N,depth:Q[2],modelIndex:x,worldViewProjection:O,nodeModelMatrix:k})}if(a.children)for(const N of a.children)Rp(m,N,u,g,x,w,S)}function Md(m,a,u,g){const x=u.shadowRenderer;if(!x)return;const w=x.getShadowPassDepthMode(),S=x.getShadowPassColorMode(),k=x.calculateShadowPassMatrixFromMatrix(a),O=Vv(k);u.getOrCreateProgram("modelDepth",{defines:u._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(u,u.context.gl.TRIANGLES,w,At.disabled,S,pr.backCCW,O,g.id,m.vertexBuffer,m.indexBuffer,m.segments,g.paint,u.transform.zoom,void 0,void 0)}function tB(m,a,u){const g=a.updateZoomBasedPaintProperties(),x=function(w,S,k){let O,N,Q,W=w.terrain?w.terrain.exaggeration():0;if(w.terrain&&W>0){const X=w.terrain,Y=X.findDEMTileFor(k);Y&&Y.dem?O=o.di.create(X,k,Y):W=0}if(W===0&&(S.terrainElevationMin=0,S.terrainElevationMax=0),W===S.validForExaggeration&&(W===0||O&&O._demTile&&O._demTile.tileID===S.validForDEMTile.id&&O._dem._timestamp===S.validForDEMTile.timestamp))return!1;for(const X in S.instancesPerModel){const Y=S.instancesPerModel[X];for(let ae=0;ae<Y.instancedDataArray.length;++ae){const le=(O?W*O.getElevationAt(0|Y.instancedDataArray.float32[16*ae],0|Y.instancedDataArray.float32[16*ae+1],!0,!0):0)+Y.instancesEvaluatedElevation[ae];Y.instancedDataArray.float32[16*ae+6]=le,N=N?Math.min(S.terrainElevationMin,le):le,Q=Q?Math.max(S.terrainElevationMax,le):le}}return S.terrainElevationMin=N||0,S.terrainElevationMax=Q||0,S.validForExaggeration=W,S.validForDEMTile=O&&O._demTile?{id:O._demTile.tileID,timestamp:O._dem._timestamp}:{id:void 0,timestamp:0},!0}(m,a,u);(g||x)&&(a.uploaded=!1,a.upload(m.context))}const tc={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new o.c9([0,0,0],[o.ab,o.ab,0])};function oP(m,a){const u=1<<m.canonical.z,g=a.getFreeCameraOptions().position,x=a.elevation,w=m.canonical.x/u,S=(m.canonical.x+1)/u,k=m.canonical.y/u,O=(m.canonical.y+1)/u;let N=a._centerAltitude;if(x){const Y=x.getMinMaxForTile(m);Y&&Y.max>N&&(N=Y.max)}const Q=o.ap(g.x,w,S)-g.x,W=o.ap(g.y,k,O)-g.y,X=o.bD(N,a.center.lat)-g.z;return a._zoomFromMercatorZ(Math.sqrt(Q*Q+W*W+X*X))}function Xs(m,a,u,g,x,w,S){const k=m.context,O=m.renderPass==="shadow",N=m.shadowRenderer,Q=O&&N?N.getShadowPassDepthMode():new Se(k.gl.LEQUAL,Se.ReadWrite,m.depthRangeFor3D),W=m.isTileAffectedByFog(w);if(u.meshes)for(const X of u.meshes){const Y=["MODEL_POSITION_ON_GPU"],ae=[];let le,ce,Ae;g.instancedDataArray.length>20&&Y.push("INSTANCED_ARRAYS");const Be=Pu(m,a.paint.get("model-cutoff-fade-range"));if(Be.shouldRenderCutoff&&Y.push("RENDER_CUTOFF"),O&&N)le=m.getOrCreateProgram("modelDepth",{defines:Y}),ce=Vv(S.shadowTileMatrix,S.shadowTileMatrix,Float32Array.from(u.matrix)),Ae=N.getShadowPassColorMode();else{Ng(Y,ae,X,m,a.lut),le=m.getOrCreateProgram("model",{defines:Y,overrideFog:W});const be=X.material,Me=be.pbrMetallicRoughness,Fe=a.paint.get("model-opacity"),ze=a.paint.get("model-emissive-strength").constantOr(0);ce=rr(w.expandedProjMatrix,Float32Array.from(u.matrix),new Float32Array(16),null,m,Fe,Me.baseColorFactor.toRenderColor(null),be.emissiveFactor,Me.metallicFactor,Me.roughnessFactor,be,ze,a,x),N&&(S.shadowUniformsInitialized?le.setShadowUniformValues(k,N.getShadowUniformValues()):(N.setupShadows(w.toUnwrapped(),le,"model-tile",w.overscaledZ),S.shadowUniformsInitialized=!0)),Ae=Be.shouldRenderCutoff||Fe<1||be.alphaMode!=="OPAQUE"?ue.alphaBlended:ue.unblended}m.uploadCommonUniforms(k,le,w.toUnwrapped(),null,Be);const Te=X.material.doubleSided?pr.disabled:pr.backCCW;if(g.instancedDataArray.length>20)ae.push(g.instancedDataBuffer),le.draw(m,k.gl.TRIANGLES,Q,At.disabled,Ae,Te,ce,a.id,X.vertexBuffer,X.indexBuffer,X.segments,a.paint,m.transform.zoom,void 0,ae,g.instancedDataArray.length);else{const be=O?"u_instance":"u_normal_matrix";for(let Me=0;Me<g.instancedDataArray.length;++Me)ce[be]=new Float32Array(g.instancedDataArray.arrayBuffer,64*Me,16),le.draw(m,k.gl.TRIANGLES,Q,At.disabled,Ae,Te,ce,a.id,X.vertexBuffer,X.indexBuffer,X.segments,a.paint,m.transform.zoom,void 0,ae)}}if(u.children)for(const X of u.children)Xs(m,a,X,g,x,w,S)}const sP=[1,-1,1];function kp(m,a,u,g){if(!u.modelManager)return!0;const x=u.modelManager;if(!u.shadowRenderer)return!0;const w=u.shadowRenderer,S=a.aabb;let k=!0,O=m.maxHeight;if(O===0){let Q=0;for(const W in m.instancesPerModel){const X=x.getModel(W,g);X?Q=Math.max(Q,Math.max(Math.max(X.aabb.max[0],X.aabb.max[1]),X.aabb.max[2])):k=!1}O=m.maxScale*Q*1.41+m.maxVerticalOffset,k&&(m.maxHeight=O)}S.max[2]=O,S.min[2]+=m.terrainElevationMin,S.max[2]+=m.terrainElevationMax,o.a6.vec3.transformMat4(S.min,S.min,a.tileMatrix),o.a6.vec3.transformMat4(S.max,S.max,a.tileMatrix);const N=S.intersects(w.getCurrentCascadeFrustum());return u.currentShadowCascade===0&&(m.isInsideFirstShadowMapFrustum=N===2),N===0}function fi(m,a){const u=m.uniformValues.u_cutoff_params[0],g=m.uniformValues.u_cutoff_params[1],x=m.uniformValues.u_cutoff_params[2],w=m.uniformValues.u_cutoff_params[3];return g===u||w===x?1:o.ap(((a-u)/(g-u)-x)/(w-x),0,1)}function Bn(m,a,u,g){if(a.pitch<20)return 1;const x=a.getWorldToCameraMatrix();o.a6.mat4.multiply(x,x,m);const w=o.a6.vec4.fromValues(u.min[0],u.min[1],u.min[2],1);let S=o.a6.vec4.transformMat4(o.a6.vec4.create(),w,x),k=S,O=S;w[1]=u.max[1],S=o.a6.vec4.transformMat4(o.a6.vec4.create(),w,x),k=S[1]<k[1]?S:k,O=S[1]>O[1]?S:O,w[0]=u.max[0],S=o.a6.vec4.transformMat4(o.a6.vec4.create(),w,x),k=S[1]<k[1]?S:k,O=S[1]>O[1]?S:O,w[1]=u.min[1],S=o.a6.vec4.transformMat4(o.a6.vec4.create(),w,x),k=S[1]<k[1]?S:k,O=S[1]>O[1]?S:O;const N=o.ap(g[0],0,1),Q=100*a.pixelsPerMeter*o.ap(g[1],0,1),W=o.ap(g[2],0,1),X=o.a6.vec4.lerp(o.a6.vec4.create(),k,O,N),Y=Math.tan(.5*a.fovX),ae=-X[2]*Y;if(Q===0)return X[1]<-Math.abs(ae)?W:1;const le=(-Math.abs(ae)-X[1])/Q,ce=(Be,Te,be)=>(1-be)*Be+be*Te,Ae=o.ap(ce(1,W,le),W,1);return ce(1,Ae,o.ap((a.pitch-20)/20,0,1))}class rB{}class bh{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(a,u,g){{const W=this._storage.get(u.id);if(W)return W.lastUsedFrameIdx=a,W.buf}const x=g.gl,w=x.getBufferParameter(x.ELEMENT_ARRAY_BUFFER,x.BUFFER_SIZE),S=new ArrayBuffer(w),k=new Int16Array(S);x.getBufferSubData(x.ELEMENT_ARRAY_BUFFER,0,new Int16Array(S));const O=new o.dk;for(let W=0;W<w/2;W+=3){const X=k[W],Y=k[W+1],ae=k[W+2];O.emplaceBack(X,Y),O.emplaceBack(Y,ae),O.emplaceBack(ae,X)}const N=g.bindVertexArrayOES.current,Q=new rB;return Q.buf=new Oa(g,O),Q.lastUsedFrameIdx=a,this._storage.set(u.id,Q),g.bindVertexArrayOES.set(N),Q.buf}update(a){for(const[u,g]of this._storage)a-g.lastUsedFrameIdx>30&&(g.buf.destroy(),this._storage.delete(u))}destroy(){for(const[a,u]of this._storage)u.buf.destroy(),this._storage.delete(a)}}class Qg{constructor(a){this.occluderSize=30,this.depthOffset=-1e-4,a.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),a.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}const wh={symbol:function(m,a,u,g,x){if(m.renderPass!=="translucent")return;const w=At.disabled,S=m.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(N,Q,W,X,Y,ae,le){const ce=Q.transform,Ae=Y==="map",Be=ae==="map";for(const Te of N){const be=X.getTile(Te),Me=be.getBucket(W);if(!Me||!Me.text||!Me.text.segments.get().length)continue;const Fe=o.bj(Me.textSizeData,ce.zoom),ze=ha(Te,Me.getProjection(),ce),Le=ce.calculatePixelsToTileUnitsMatrix(be),Ve=Yr(ze,be.tileID.canonical,Be,Ae,ce,Me.getProjection(),Le),Xe=Me.hasIconTextFit()&&Me.hasIconData();if(Fe){const je=Math.pow(2,ce.zoom-be.tileID.overscaledZ);tP(Me,Ae,Be,le,o.cS,ce,Ve,Te,je,Fe,Xe)}}}(g,m,u,a,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),x);const k=u.paint.get("icon-opacity").constantOr(1)!==0,O=u.paint.get("text-opacity").constantOr(1)!==0;u.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(k||O)?Ip(m,a,u,g,w,S):(k&&Ip(m,a,u,g,w,S,{onlyIcons:!0}),O&&Ip(m,a,u,g,w,S,{onlyText:!0})),a.map.showCollisionBoxes&&(Dg(m,a,u,g,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),Dg(m,a,u,g,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))},circle:function(m,a,u,g){if(m.renderPass!=="translucent")return;const x=u.paint.get("circle-opacity"),w=u.paint.get("circle-stroke-width"),S=u.paint.get("circle-stroke-opacity"),k=u.layout.get("circle-sort-key").constantOr(1)!==void 0,O=u.paint.get("circle-emissive-strength");if(x.constantOr(1)===0&&(w.constantOr(1)===0||S.constantOr(1)===0))return;const N=m.context,Q=N.gl,W=m.transform,X=m.depthModeForSublayer(0,Se.ReadOnly),Y=At.disabled,ae=m.colorModeForDrapableLayerRenderPass(O),le=W.projection.name==="globe",ce=[o.am(W.center.lng),o.at(W.center.lat)],Ae=[];for(let Te=0;Te<g.length;Te++){const be=g[Te],Me=a.getTile(be),Fe=Me.getBucket(u);if(!Fe||Fe.projection.name!==W.projection.name)continue;const ze=Fe.programConfigurations.get(u.id),Le=o.cT(u),Ve=m.isTileAffectedByFog(be);le&&Le.push("PROJECTION_GLOBE_VIEW"),Le.push("DEPTH_D24"),m.terrain&&W.depthOcclusionForSymbolsAndCircles&&Le.push("DEPTH_OCCLUSION");const Xe=m.getOrCreateProgram("circle",{config:ze,defines:Le,overrideFog:Ve}),je=Fe.layoutVertexBuffer,He=Fe.globeExtVertexBuffer,nt=Fe.indexBuffer,mt=W.projection.createInversionMatrix(W,be.canonical),Et={programConfiguration:ze,program:Xe,layoutVertexBuffer:je,globeExtVertexBuffer:He,indexBuffer:nt,uniformValues:o.cU(m,be,Me,mt,ce,u),tile:Me};if(k){const pt=Fe.segments.get();for(const kt of pt)Ae.push({segments:new o.b1([kt]),sortKey:kt.sortKey,state:Et})}else Ae.push({segments:Fe.segments,sortKey:0,state:Et})}k&&Ae.sort((Te,be)=>Te.sortKey-be.sortKey);const Be={useDepthForOcclusion:W.depthOcclusionForSymbolsAndCircles};for(const Te of Ae){const{programConfiguration:be,program:Me,layoutVertexBuffer:Fe,globeExtVertexBuffer:ze,indexBuffer:Le,uniformValues:Ve,tile:Xe}=Te.state,je=Te.segments;m.terrain&&m.terrain.setupElevationDraw(Xe,Me,Be),m.uploadCommonUniforms(N,Me,Xe.tileID.toUnwrapped()),Me.draw(m,Q.TRIANGLES,X,Y,ae,pr.disabled,Ve,u.id,Fe,Le,je,u.paint,W.zoom,be,[ze])}},heatmap:function(m,a,u,g){if(u.paint.get("heatmap-opacity")!==0)if(m.renderPass==="offscreen"){const x=m.context,w=x.gl,S=At.disabled,k=new ue([w.ONE,w.ONE,w.ONE,w.ONE],o.bz.transparent,[!0,!0,!0,!0]);(function(Y,ae,le,ce){const Ae=Y.gl,Be=ae.width*ce,Te=ae.height*ce;Y.activeTexture.set(Ae.TEXTURE1),Y.viewport.set([0,0,Be,Te]);let be=le.heatmapFbo;if(!be||be&&(be.width!==Be||be.height!==Te)){be&&be.destroy();const Me=Ae.createTexture();Ae.bindTexture(Ae.TEXTURE_2D,Me),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_WRAP_S,Ae.CLAMP_TO_EDGE),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_WRAP_T,Ae.CLAMP_TO_EDGE),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_MIN_FILTER,Ae.LINEAR),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_MAG_FILTER,Ae.LINEAR),be=le.heatmapFbo=Y.createFramebuffer(Be,Te,!0,null),function(Fe,ze,Le,Ve,Xe,je){const He=Fe.gl;He.texImage2D(He.TEXTURE_2D,0,Fe.extRenderToTextureHalfFloat?He.RGBA16F:He.RGBA,Xe,je,0,He.RGBA,Fe.extRenderToTextureHalfFloat?He.HALF_FLOAT:He.UNSIGNED_BYTE,null),Ve.colorAttachment.set(Le)}(Y,0,Me,be,Be,Te)}else Ae.bindTexture(Ae.TEXTURE_2D,be.colorAttachment.get()),Y.bindFramebuffer.set(be.framebuffer)})(x,m,u,m.transform.projection.name==="globe"?.5:.25),x.clear({color:o.bz.transparent});const O=m.transform,N=O.projection.name==="globe",Q=N?["PROJECTION_GLOBE_VIEW"]:[],W=N?pr.frontCCW:pr.disabled,X=[o.am(O.center.lng),o.at(O.center.lat)];for(let Y=0;Y<g.length;Y++){const ae=g[Y];if(a.hasRenderableParent(ae))continue;const le=a.getTile(ae),ce=le.getBucket(u);if(!ce||ce.projection.name!==O.projection.name)continue;const Ae=m.isTileAffectedByFog(ae),Be=ce.programConfigurations.get(u.id),Te=m.getOrCreateProgram("heatmap",{config:Be,defines:Q,overrideFog:Ae}),{zoom:be}=m.transform;m.terrain&&m.terrain.setupElevationDraw(le,Te),m.uploadCommonUniforms(x,Te,ae.toUnwrapped());const Me=O.projection.createInversionMatrix(O,ae.canonical);Te.draw(m,w.TRIANGLES,Se.disabled,S,k,W,JF(m,ae,le,Me,X,be,u.paint.get("heatmap-intensity")),u.id,ce.layoutVertexBuffer,ce.indexBuffer,ce.segments,u.paint,m.transform.zoom,Be,N?[ce.globeExtVertexBuffer]:null)}x.viewport.set([0,0,m.width,m.height])}else m.renderPass==="translucent"&&(m.context.setColorMode(m.colorModeForRenderPass()),function(x,w){const S=x.context,k=S.gl,O=w.heatmapFbo;if(!O)return;S.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,O.colorAttachment.get()),S.activeTexture.set(k.TEXTURE1);let N=w.colorRampTexture;N||(N=w.colorRampTexture=new o.T(S,w.colorRamp,k.RGBA8)),N.bind(k.LINEAR,k.CLAMP_TO_EDGE),x.getOrCreateProgram("heatmapTexture").draw(x,k.TRIANGLES,Se.disabled,At.disabled,x.colorModeForRenderPass(),pr.disabled,((Q,W,X,Y)=>({u_image:0,u_color_ramp:1,u_opacity:W.paint.get("heatmap-opacity")}))(0,w),w.id,x.viewportBuffer,x.quadTriangleIndexBuffer,x.viewportSegments,w.paint,x.transform.zoom)}(m,u))},line:function(m,a,u,g){if(m.renderPass!=="translucent")return;const x=u.paint.get("line-opacity"),w=u.paint.get("line-width");if(x.constantOr(1)===0||w.constantOr(1)===0)return;const S=u.paint.get("line-emissive-strength"),k=u.paint.get("line-occlusion-opacity"),O=m.context,N=O.gl,Q=u.layout.get("line-z-offset"),W=!Q.isConstant()||!!Q.constantOr(0),X=W?new Se(m.depthOcclusion?N.GREATER:N.LEQUAL,Se.ReadOnly,m.depthRangeFor3D):m.depthModeForSublayer(0,Se.ReadOnly),Y=m.colorModeForDrapableLayerRenderPass(S),ae=m.terrain&&m.terrain.renderingToTexture,le=ae?1:o.q.devicePixelRatio,ce=u.paint.get("line-dasharray"),Ae=ce.constantOr(1),Be=u.layout.get("line-cap"),Te=ce.constantOr(null),be=Be.constantOr(null),Me=u.paint.get("line-pattern"),Fe=Me.constantOr(1),ze=Me.constantOr(null),Le=u.paint.get("line-opacity").constantOr(1);let Ve=!Fe&&Le!==1||m.depthOcclusion&&k>0&&k<1;const Xe=u.paint.get("line-gradient"),je=Fe?"linePattern":"line",He=o.cV(u);let nt;if(ae&&m.terrain&&m.terrain.clipOrMaskOverlapStencilType()&&(Ve=!1),k!==0&&m.depthOcclusion){const Et=u.paint._values["line-opacity"];Et&&Et.value&&Et.value.kind==="constant"?nt=Et.value:o.w(`Occlusion opacity for layer ${u.id} is supported only when line-opacity isn't data-driven.`)}if(W&&(m.forceTerrainMode=!0),!W&&k!==0&&m.terrain&&!ae)return void o.w(`Occlusion opacity for layer ${u.id} is supported on terrain only if the layer has non-zero line-z-offset.`);const mt=Ve&&W?m.stencilModeFor3D():At.disabled;for(const Et of g){const pt=a.getTile(Et);if(Fe&&!pt.patternsLoaded())continue;const kt=pt.getBucket(u);if(!kt)continue;m.prepareDrawTile();const it=kt.programConfigurations.get(u.id),wt=m.isTileAffectedByFog(Et),bt=m.getOrCreateProgram(je,{config:it,defines:W?[...He,"ELEVATED"]:He,overrideFog:wt});if(ze&&pt.imageAtlas){const Nt=pt.imageAtlas.patternPositions[ze.toString()];Nt&&it.setConstantPatternPositions(Nt)}if(!Fe&&Te&&be&&pt.lineAtlas){const Nt=pt.lineAtlas.getDash(Te,be);Nt&&it.setConstantPatternPositions(Nt)}let[Dt,Ut]=u.paint.get("line-trim-offset");(be==="round"||be==="square")&&Dt!==Ut&&(Dt===0&&(Dt-=1),Ut===1&&(Ut+=1));const St=ae?Et.projMatrix:null,Ft=Fe?o.cW(m,pt,u,St,le,[Dt,Ut]):o.cX(m,pt,u,St,kt.lineClipsArray.length,le,[Dt,Ut]);if(Xe){const Nt=kt.gradients[u.id];let Jt=Nt.texture;if(u.gradientVersion!==Nt.version){let Br=256;if(u.stepInterpolant){const sr=a.getSource().maxzoom,xr=Et.canonical.z===sr?Math.ceil(1<<m.transform.maxZoom-Et.canonical.z):1;Br=o.ap(o.cY(kt.maxLineLength/o.ab*1024*xr),256,O.maxTextureSize)}Nt.gradient=o.cZ({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:Br,image:Nt.gradient||void 0,clips:kt.lineClipsArray}),Nt.texture?Nt.texture.update(Nt.gradient):Nt.texture=new o.T(O,Nt.gradient,N.RGBA8),Nt.version=u.gradientVersion,Jt=Nt.texture}O.activeTexture.set(N.TEXTURE1),Jt.bind(u.stepInterpolant?N.NEAREST:N.LINEAR,N.CLAMP_TO_EDGE)}Ae&&(O.activeTexture.set(N.TEXTURE0),pt.lineAtlasTexture&&pt.lineAtlasTexture.bind(N.LINEAR,N.REPEAT),it.updatePaintBuffers()),Fe&&(O.activeTexture.set(N.TEXTURE0),pt.imageAtlasTexture&&pt.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),it.updatePaintBuffers()),W&&m.terrain.setupElevationDraw(pt,bt),m.uploadCommonUniforms(O,bt,Et.toUnwrapped());const gr=Nt=>{nt!=null&&(nt.value=Le*k),bt.draw(m,N.TRIANGLES,X,Nt,Y,pr.disabled,Ft,u.id,kt.layoutVertexBuffer,kt.indexBuffer,kt.segments,u.paint,m.transform.zoom,it,[kt.layoutVertexBuffer2,kt.patternVertexBuffer,kt.zOffsetVertexBuffer]),nt!=null&&(nt.value=Le)};if(Ve&&!W){const Nt=m.stencilModeForClipping(Et).ref;Nt===0&&ae&&O.clear({stencil:0});const Jt={func:N.EQUAL,mask:255};Ft.u_alpha_discard_threshold=.8,gr(new At(Jt,Nt,255,N.KEEP,N.KEEP,N.INVERT)),Ft.u_alpha_discard_threshold=0,gr(new At(Jt,Nt,255,N.KEEP,N.KEEP,N.KEEP))}else Ve&&W&&(Ft.u_alpha_discard_threshold=.001),gr(W?mt:m.stencilModeForClipping(Et))}Ve&&(m.resetStencilClippingMasks(),ae&&O.clear({stencil:0})),k===0||m.depthOcclusion||ae||m.layersWithOcclusionOpacity.push(m.currentLayer),W&&(m.forceTerrainMode=!1)},fill:function(m,a,u,g){const x=u.paint.get("fill-color"),w=u.paint.get("fill-opacity"),S=u.is3D(),k=new Se(m.context.gl.LEQUAL,Se.ReadWrite,m.depthRangeFor3D);if(w.constantOr(1)===0)return;const O=u.paint.get("fill-emissive-strength"),N=m.colorModeForDrapableLayerRenderPass(O),Q=u.paint.get("fill-pattern"),W=m.opaquePassEnabledForLayer()&&!Q.constantOr(1)&&x.constantOr(o.bz.transparent).a===1&&w.constantOr(0)===1?"opaque":"translucent";if(m.renderPass===W){const X=S?k:m.depthModeForSublayer(1,m.renderPass==="opaque"?Se.ReadWrite:Se.ReadOnly);Lg(m,a,u,g,X,N,!1)}if(!S&&m.renderPass==="translucent"&&u.paint.get("fill-antialias")){const X=S?k:m.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,Se.ReadOnly);Lg(m,a,u,g,X,N,!0)}},"fill-extrusion":function(m,a,u,g){const x=u.paint.get("fill-extrusion-opacity"),w=m.context,S=w.gl,k=m.terrain,O=k&&k.renderingToTexture;if(x===0)return;const N=m.conflationActive&&m.style.isLayerClipped(u,a.getSource()),Q=m.style.order.indexOf(u.fqid);if(N&&function(W,X,Y,ae,le){for(const ce of ae){const Ae=X.getTile(ce).getBucket(Y);Ae&&(Ae.updateReplacement(ce,W.replacementSource,le),Ae.uploadCentroid(W.context))}}(m,a,u,g,Q),k||N)for(const W of g){const X=a.getTile(W).getBucket(u);X&&xh(m.context,a,W,X,u,k,N)}if(m.renderPass==="shadow"&&m.shadowRenderer){const W=m.shadowRenderer;if(k&&x<.65&&u._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof o.a4)return;const X=W.getShadowPassDepthMode(),Y=W.getShadowPassColorMode();Td(m,a,u,g,X,At.disabled,Y,N)}else if(m.renderPass==="translucent"){const W=!u.paint.get("fill-extrusion-pattern").constantOr(1),X=u.paint.get("fill-extrusion-color").constantOr(o.bz.white);if(!O&&X.a!==0){const Y=new Se(m.context.gl.LEQUAL,Se.ReadWrite,m.depthRangeFor3D);x===1&&W?Td(m,a,u,g,Y,At.disabled,ue.unblended,N):(Td(m,a,u,g,Y,At.disabled,ue.disabled,N),Td(m,a,u,g,Y,m.stencilModeFor3D(),m.colorModeForRenderPass(),N),m.resetStencilClippingMasks())}if(m.style.enable3dLights()&&W&&(!k&&m.transform.projection.name!=="globe"||O)){const Y=u.paint.get("fill-extrusion-opacity"),ae=u.paint.get("fill-extrusion-ambient-occlusion-intensity"),le=u.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),ce=u.paint.get("fill-extrusion-flood-light-intensity"),Ae=u.paint.get("fill-extrusion-flood-light-color").toRenderColor(u.lut).toArray01().slice(0,3),Be=ae>0&&le>0,Te=ce>0,be=(Fe,ze,Le)=>(1-Le)*Fe+Le*ze,Me=Fe=>{const ze=m.depthModeForSublayer(1,Se.ReadOnly,S.LEQUAL,!0),Le=u.paint.get(Fe?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Ve=be(.1,3,Le),Xe=m._showOverdrawInspector;if(!Xe){const je=new At({func:S.ALWAYS,mask:255},255,255,S.KEEP,S.KEEP,S.REPLACE),He=new ue([S.ONE,S.ONE,S.ONE,S.ONE],o.bz.transparent,[!1,!1,!1,!0],S.MIN);as(m,a,u,g,ze,je,He,pr.disabled,Fe,"sdf",Y,ae,le,ce,Ae,Ve,N,!1)}{const je=Xe?At.disabled:new At({func:S.EQUAL,mask:255},255,255,S.KEEP,S.DECR,S.DECR),He=Xe?m.colorModeForRenderPass():new ue([S.ONE_MINUS_DST_ALPHA,S.DST_ALPHA,S.ONE,S.ONE],o.bz.transparent,[!0,!0,!0,!0]);as(m,a,u,g,ze,je,He,pr.disabled,Fe,"color",Y,ae,le,ce,Ae,Ve,N,!1)}};if(O){const Fe=(ze,Le,Ve)=>{const Xe=m.depthModeForSublayer(1,Se.ReadOnly,S.LEQUAL,!1),je=u.paint.get(ze?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),He=be(.1,3,je);{const nt=new ue([S.ONE,S.ONE,S.ONE,S.ONE],o.bz.transparent,[!1,!1,!1,!0]);as(m,a,u,g,Xe,At.disabled,nt,pr.disabled,ze,"clear",Y,ae,le,ce,Ae,He,N,Le)}{const nt=new At({func:S.ALWAYS,mask:255},255,255,S.KEEP,S.KEEP,S.REPLACE),mt=new ue([S.ONE,S.ONE,S.ONE,S.ONE],o.bz.transparent,[!1,!1,!1,!0],S.MIN);as(m,a,u,g,Xe,nt,mt,pr.disabled,ze,"sdf",Y,ae,le,ce,Ae,He,N,Le)}{const nt=ze?S.ZERO:S.ONE_MINUS_DST_ALPHA,mt=new At({func:S.EQUAL,mask:255},255,255,S.KEEP,S.DECR,S.DECR),Et=new ue([nt,S.DST_ALPHA,S.ONE_MINUS_DST_ALPHA,S.ZERO],o.bz.transparent,[!0,!0,!0,!0]);as(m,a,u,g,Xe,mt,Et,pr.disabled,ze,"color",Y,ae,le,ce,Ae,He,N,Le)}{const nt=new ue([S.ONE,S.ONE,S.ONE,ze?S.ZERO:S.ONE],o.bz.transparent,[!1,!1,!1,!0],ze?S.FUNC_ADD:S.MAX);as(m,a,u,g,Xe,At.disabled,nt,pr.disabled,ze,"clear",Y,ae,le,ce,Ae,He,N,Le,Ve)}};if(Be||Te){let ze;if(m.prepareDrawTile(),k){const Le=k.drapeBufferSize[0],Ve=k.drapeBufferSize[1];ze=k.framebufferCopyTexture,ze&&(!ze||ze.size[0]===Le&&ze.size[1]===Ve)||(ze&&ze.destroy(),ze=k.framebufferCopyTexture=new o.T(w,new o.r({width:Le,height:Ve}),S.RGBA8)),ze.bind(S.LINEAR,S.CLAMP_TO_EDGE),S.copyTexImage2D(S.TEXTURE_2D,0,S.RGBA,0,0,Le,Ve,0)}Be&&Fe(!0,!1,ze),Te&&Fe(!1,!0,ze)}}else Be&&Me(!0),Te&&Me(!1),(Be||Te)&&m.resetStencilClippingMasks()}}},hillshade:function(m,a,u,g){if(m.renderPass!=="offscreen"&&m.renderPass!=="translucent"||m.style.disableElevatedTerrain)return;const x=m.context,w=m.terrain&&m.terrain.renderingToTexture,[S,k]=m.renderPass!=="translucent"||w?[{},g]:m.stencilConfigForOverlap(g);for(const O of k){const N=a.getTile(O);if(N.needsHillshadePrepare&&m.renderPass==="offscreen")_p(m,N,u);else if(m.renderPass==="translucent"){const Q=m.depthModeForSublayer(0,Se.ReadOnly),W=u.paint.get("hillshade-emissive-strength"),X=m.colorModeForDrapableLayerRenderPass(W),Y=w&&m.terrain?m.terrain.stencilModeForRTTOverlap(O):S[O.overscaledZ];yg(m,O,N,u,Q,Y,X)}}x.viewport.set([0,0,m.width,m.height]),m.resetStencilClippingMasks()},raster:function(m,a,u,g,x,w){if(m.renderPass!=="translucent"||u.paint.get("raster-opacity")===0)return;const S=m.transform.projection.name==="globe",k=u.paint.get("raster-elevation")!==0,O=k&&S;if(m.renderElevatedRasterBackface&&!O)return;const N=m.context,Q=N.gl,W=a.getSource(),X=function(Fe,ze,Le,Ve){const Xe=ze.paint.get("raster-color"),je=Fe.type==="raster-array",He=[],nt=ze.paint.get("raster-resampling"),mt=ze.paint.get("raster-color-mix");let Et=ze.paint.get("raster-color-range");const pt=[mt[0],mt[1],mt[2],0],kt=mt[3];let it=nt==="nearest"?Ve.NEAREST:Ve.LINEAR;if(je&&(He.push("RASTER_ARRAY"),Xe||He.push("RASTER_COLOR"),nt==="linear"&&He.push("RASTER_ARRAY_LINEAR"),it=Ve.NEAREST,!Et&&Fe.rasterLayers)){const wt=Fe.rasterLayers.find(({id:bt})=>bt===ze.sourceLayer);wt&&wt.fields&&wt.fields.range&&(Et=wt.fields.range)}if(Et=Et||[0,1],Xe){He.push("RASTER_COLOR"),Le.activeTexture.set(Ve.TEXTURE2),ze.updateColorRamp(Et);let wt=ze.colorRampTexture;wt||(wt=ze.colorRampTexture=new o.T(Le,ze.colorRamp,Ve.RGBA8)),wt.bind(Ve.LINEAR,Ve.CLAMP_TO_EDGE)}return{mix:pt,range:Et,offset:kt,defines:He,resampling:it}}(W,u,N,Q);if(W instanceof o.aD&&!g.length&&!S)return;const Y=u.paint.get("raster-emissive-strength"),ae=m.colorModeForDrapableLayerRenderPass(Y),le=m.terrain&&m.terrain.renderingToTexture,ce=!m.options.moving,Ae=u.paint.get("raster-resampling")==="nearest"?Q.NEAREST:Q.LINEAR;if(W instanceof o.aD&&!g.length&&(W.onNorthPole||W.onSouthPole)){const Fe=k?m.stencilModeFor3D():At.disabled;return void Ua(!!W.onNorthPole,null,m,a,u,Y,X,pr.disabled,Fe)}if(!g.length)return;const[Be,Te]=W instanceof o.aD||le?[{},g]:m.stencilConfigForOverlap(g),be=Te[Te.length-1].overscaledZ;O&&X.defines.push("PROJECTION_GLOBE_VIEW"),k&&X.defines.push("RENDER_CUTOFF");const Me=(Fe,ze,Le)=>{for(const Ve of Fe){const Xe=Ve.toUnwrapped(),je=a.getTile(Ve);if(le&&(!je||!je.hasData()))continue;N.activeTexture.set(Q.TEXTURE0);const He=Og(je,W,u,X);if(!He||!He.texture)continue;const{texture:nt,mix:mt,offset:Et,tileSize:pt,buffer:kt}=He;let it,wt;le?(it=Se.disabled,wt=Ve.projMatrix):k?(it=new Se(Q.LEQUAL,Se.ReadWrite,m.depthRangeFor3D),wt=S?Float32Array.from(m.transform.expandedFarZProjMatrix):m.transform.calculateProjMatrix(Xe,ce)):(it=m.depthModeForSublayer(Ve.overscaledZ-be,u.paint.get("raster-opacity")===1?Se.ReadWrite:Se.ReadOnly,Q.LESS),wt=m.transform.calculateProjMatrix(Xe,ce));const bt=m.terrain&&le?m.terrain.stencilModeForRTTOverlap(Ve):Be[Ve.overscaledZ],Dt=w?0:u.paint.get("raster-fade-duration");je.registerFadeDuration(Dt);const Ut=a.findLoadedParent(Ve,0),St=Cg(je,Ut,a,m.transform,Dt);let Ft,gr;m.terrain&&m.terrain.prepareDrawTile(),N.activeTexture.set(Q.TEXTURE0),nt.bind(Ae,Q.CLAMP_TO_EDGE),N.activeTexture.set(Q.TEXTURE1),Ut?(Ut.texture&&Ut.texture.bind(Ae,Q.CLAMP_TO_EDGE),Ft=Math.pow(2,Ut.tileID.overscaledZ-je.tileID.overscaledZ),gr=[je.tileID.canonical.x*Ft%1,je.tileID.canonical.y*Ft%1]):nt.bind(Ae,Q.CLAMP_TO_EDGE),nt.useMipmap&&N.extTextureFilterAnisotropic&&m.transform.pitch>20&&Q.texParameterf(Q.TEXTURE_2D,N.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,N.extTextureFilterAnisotropicMax);const Nt=m.transform;let Jt;const Br=k?Gi(Nt):[0,0,0,0];let sr,xr,Qr,zr,Dn,jn=0;if(O&&W instanceof o.aD&&W.coordinates.length>3)sr=Float32Array.from(o.b5(o.cC(new o.bP(0,0,0)))),xr=Float32Array.from(Nt.globeMatrix),Qr=Float32Array.from(o.cy(Nt)),zr=[o.am(Nt.center.lng),o.at(Nt.center.lat)],Jt=W.elevatedGlobePerspectiveTransform,Dn=W.elevatedGlobeGridMatrix||new Float32Array(9);else if(O){const tn=o.cz(Ve.canonical);jn=o.cA(tn.getCenter().lat),sr=Float32Array.from(o.b5(o.cC(Ve.canonical))),xr=Float32Array.from(Nt.globeMatrix),Qr=Float32Array.from(o.cy(Nt)),zr=[o.am(Nt.center.lng),o.at(Nt.center.lat)],Jt=[0,0],Dn=Float32Array.from(o.cB(Ve.canonical,tn,jn,Nt.worldSize/Nt._pixelsPerMercatorPixel))}else Jt=W instanceof o.aD?W.perspectiveTransform:[0,0],sr=new Float32Array(16),xr=new Float32Array(9),Qr=new Float32Array(16),zr=[0,0],Dn=new Float32Array(9);const hi=Ep(wt,sr,xr,Qr,Dn,gr||[0,0],o.a9(m.transform.zoom),zr,Br,Ft||1,St,u,Jt,k?u.paint.get("raster-elevation"):0,2,mt,Et,X.range,pt,kt,Y),Il=m.isTileAffectedByFog(Ve),so=m.getOrCreateProgram("raster",{defines:X.defines,overrideFog:Il});if(m.uploadCommonUniforms(N,so,Xe),W instanceof o.aD){const tn=W.elevatedGlobeVertexBuffer,Nn=W.elevatedGlobeIndexBuffer;if(le||!S)W.boundsBuffer&&W.boundsSegments&&so.draw(m,Q.TRIANGLES,it,At.disabled,ae,pr.disabled,hi,u.id,W.boundsBuffer,m.quadTriangleIndexBuffer,W.boundsSegments);else if(tn&&Nn){const Bi=Nt.zoom<=o.c2?W.elevatedGlobeSegments:W.getSegmentsForLongitude(Nt.center.lng);Bi&&so.draw(m,Q.TRIANGLES,it,At.disabled,ae,ze,hi,u.id,tn,Nn,Bi)}}else if(O){it=new Se(Q.LEQUAL,Se.ReadOnly,m.depthRangeFor3D);const tn=m.globeSharedBuffers;if(tn){const[Nn,Bi,zn]=tn.getGridBuffers(jn,!1);so.draw(m,Q.TRIANGLES,it,Le||bt,m.colorModeForRenderPass(),ze,hi,u.id,Nn,Bi,zn)}}else{const{tileBoundsBuffer:tn,tileBoundsIndexBuffer:Nn,tileBoundsSegments:Bi}=m.getTileBoundsBuffers(je);so.draw(m,Q.TRIANGLES,it,bt,ae,pr.disabled,hi,u.id,tn,Nn,Bi)}}if(!(W instanceof o.aD)&&O)for(const Ve of Fe){const Xe=Ve.canonical.y===(1<<Ve.canonical.z)-1;Ve.canonical.y===0&&Ua(!0,Ve,m,a,u,Y,X,ze,Le||At.disabled),Xe&&Ua(!1,Ve,m,a,u,Y,X,ze===pr.frontCW?pr.backCW:pr.frontCW,Le||At.disabled)}};O?Me(Te,m.renderElevatedRasterBackface?pr.backCW:pr.frontCW,m.stencilModeFor3D()):Me(Te,pr.disabled,void 0),m.resetStencilClippingMasks()},"raster-particle":function(m,a,u,g,x,w){m.renderPass==="offscreen"&&function(S,k,O,N){if(!N.length)return;const Q=S.context,W=Q.gl,X=k.getSource();if(!(X instanceof Zl))return;const Y=Math.ceil(Math.sqrt(O.paint.get("raster-particle-count")));let ae=O.particlePositionRGBAImage;if(!ae||ae.width!==Y){const Te=function(be){const Me=be*be,Fe=new Uint8Array(4*Me),ze=function(Ve){return Ve|=0,Ve=Math.imul(2747636419^Ve,2654435769),Ve=Math.imul(Ve^Ve>>>16,2654435769),((Ve=Math.imul(Ve^Ve>>>16,2654435769))>>>0)/4294967296},Le=1/1.1;for(let Ve=0;Ve<Me;Ve++){const Xe=Le*(ze(2*Ve+0)+Rc),je=Le*(ze(2*Ve+1)+Rc),He=255*Xe%1,nt=255*je%1,mt=He,Et=je-nt/255,pt=nt;Fe[4*Ve+0]=255*(Xe-He/255),Fe[4*Ve+1]=255*mt,Fe[4*Ve+2]=255*Et,Fe[4*Ve+3]=255*pt}return Fe}(Y);ae=O.particlePositionRGBAImage=new o.r({width:Y,height:Y},Te)}let le=O.particleFramebuffer;le?le.width!==Y&&(le.destroy(),le=O.particleFramebuffer=Q.createFramebuffer(Y,Y,!0,null)):le=O.particleFramebuffer=Q.createFramebuffer(Y,Y,!0,null);const ce=[];for(const Te of N){const be=k.getTile(Te);if(!(be instanceof ci))continue;const Me=Jw(be,X,O);if(!Me)continue;const Fe=[be.tileSize,be.tileSize];let ze=O.tileFramebuffer;ze||(ze=O.tileFramebuffer=Q.createFramebuffer(Fe[0],Fe[1],!0,null));let Le=be.rasterParticleState;Le||(Le=be.rasterParticleState=new Yw(Q,Te,Fe,ae));const Ve=Le.update(O.lastInvalidatedAt);Le.particleTextureDimension!==Y&&Le.updateParticleTexture(Te,ae);const Xe=Le.targetColorTexture;Le.targetColorTexture=Le.backgroundColorTexture,Le.backgroundColorTexture=Xe;const je=Le.particleTexture0;Le.particleTexture0=Le.particleTexture1,Le.particleTexture1=je,ce.push([Te,Me,Le,Ve])}if(ce.length===0)return;const Ae=o.q.now(),Be=O.previousDrawTimestamp?.001*(Ae-O.previousDrawTimestamp):.0167;if(O.previousDrawTimestamp=Ae,O.hasColorMap()){Q.activeTexture.set(W.TEXTURE0+2);let Te=O.colorRampTexture;Te||(Te=O.colorRampTexture=new o.T(Q,O.colorRamp,W.RGBA8)),Te.bind(W.LINEAR,W.CLAMP_TO_EDGE)}Q.bindFramebuffer.set(O.tileFramebuffer.framebuffer),function(Te,be,Me){const Fe=Te.context,ze=Fe.gl,Le=be.tileFramebuffer;Fe.activeTexture.set(ze.TEXTURE0);const Ve={u_texture:0,u_opacity:1.05*(je=be.paint.get("raster-particle-fade-opacity-factor"))/(je+.05)},Xe=Te.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var je;for(const He of Me){const[,,nt,mt]=He;Le.colorAttachment.set(nt.targetColorTexture.texture),Fe.viewport.set([0,0,Le.width,Le.height]),Fe.clear({color:o.bz.transparent}),mt&&(nt.backgroundColorTexture.bind(ze.NEAREST,ze.CLAMP_TO_EDGE),Xe.draw(Te,ze.TRIANGLES,Se.disabled,At.disabled,ue.alphaBlended,pr.disabled,Ve,be.id,Te.viewportBuffer,Te.quadTriangleIndexBuffer,Te.viewportSegments))}}(S,O,ce),function(Te,be,Me,Fe){const ze=Te.context,Le=ze.gl,Ve=Me.tileFramebuffer,Xe=Te.transform.projection.name==="globe",je=Me.paint.get("raster-particle-max-speed");for(const He of Fe){const[nt,mt,Et]=He;ze.activeTexture.set(Le.TEXTURE0+0),mt.texture.bind(Le.LINEAR,Le.CLAMP_TO_EDGE),Ve.colorAttachment.set(Et.targetColorTexture.texture);const pt=Te.getOrCreateProgram("rasterParticleDraw",{defines:mt.defines,overrideFog:!1});ze.activeTexture.set(Le.TEXTURE0+1);const kt=mt.scalarData?[]:[0,1,2,3].map(bt=>o.c$[bt](nt));kt.push(nt);const it=nt.canonical.x,wt=nt.canonical.y;for(const bt of kt){const Dt=be.getTile(Xe?bt.wrapped():bt);if(!Dt)continue;const Ut=Dt.rasterParticleState;if(!Ut)continue;const St=bt.canonical.x+(1<<bt.canonical.z)*(bt.wrap-nt.wrap),Ft=bt.canonical.y;Ut.particleTexture0.bind(Le.NEAREST,Le.CLAMP_TO_EDGE);const gr=Fg(1,Ut.particleTexture0.size[0],[St-it,Ft-wt],0,mt.texture.size,2,je,mt.textureOffset,mt.scale,mt.offset);pt.draw(Te,Le.POINTS,Se.disabled,At.disabled,ue.alphaBlended,pr.disabled,gr,Me.id,Ut.particleIndexBuffer,void 0,Ut.particleSegment)}}}(S,k,O,ce),Q.bindFramebuffer.set(O.particleFramebuffer.framebuffer),function(Te,be,Me,Fe){const ze=Te.context,Le=ze.gl,Ve=be.paint.get("raster-particle-max-speed"),Xe=Fe*be.paint.get("raster-particle-speed-factor")*.15,je=function(nt){return Math.pow(nt,6)}(.01+1*be.paint.get("raster-particle-reset-rate-factor")),He=be.particleFramebuffer;ze.viewport.set([0,0,He.width,He.height]);for(const nt of Me){const[,mt,Et]=nt;ze.activeTexture.set(Le.TEXTURE0+0),mt.texture.bind(Le.LINEAR,Le.CLAMP_TO_EDGE),ze.activeTexture.set(Le.TEXTURE0+1);const pt=Et.particleTexture0;pt.bind(Le.NEAREST,Le.CLAMP_TO_EDGE);const kt=Pg(1,pt.size[0],0,mt.texture.size,Ve,Xe,je,mt.textureOffset,mt.scale,mt.offset);He.colorAttachment.set(Et.particleTexture1.texture),ze.clear({color:o.bz.transparent}),Te.getOrCreateProgram("rasterParticleUpdate",{defines:mt.defines}).draw(Te,Le.TRIANGLES,Se.disabled,At.disabled,ue.unblended,pr.disabled,kt,be.id,Te.viewportBuffer,Te.quadTriangleIndexBuffer,Te.viewportSegments)}}(S,O,ce,Be)}(m,a,u,g),m.renderPass==="translucent"&&(function(S,k,O,N,Q){const W=S.context,X=W.gl,Y=k.getSource().tileSize,ae=5*(1-o.a7(o.bU,o.bU+1,S.transform.zoom))*Y+O.paint.get("raster-particle-elevation"),le=!S.options.moving,ce=S.transform.projection.name==="globe";if(!N.length)return;const[Ae,Be]=S.stencilConfigForOverlap(N),Te=[];ce&&Te.push("PROJECTION_GLOBE_VIEW");const be=S.stencilModeFor3D();for(const Me of Be){const Fe=Me.toUnwrapped(),ze=k.getTile(Me);if(!ze.rasterParticleState)continue;const Le=ze.rasterParticleState,Ve=100;ze.registerFadeDuration(Ve);const Xe=k.findLoadedParent(Me,0),je=Cg(ze,Xe,k,S.transform,Ve);let He,nt;S.terrain&&S.terrain.prepareDrawTile(),W.activeTexture.set(X.TEXTURE0),Le.targetColorTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),W.activeTexture.set(X.TEXTURE1),Xe&&Xe.rasterParticleState?(Xe.rasterParticleState.targetColorTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),He=Math.pow(2,Xe.tileID.overscaledZ-ze.tileID.overscaledZ),nt=[ze.tileID.canonical.x*He%1,ze.tileID.canonical.y*He%1]):Le.targetColorTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE);const mt=ce?Float32Array.from(S.transform.expandedFarZProjMatrix):S.transform.calculateProjMatrix(Fe,le),Et=S.transform,pt=$w(Et),kt=o.cz(Me.canonical),it=o.cA(kt.getCenter().lat);let wt,bt,Dt,Ut,St;ce?(wt=Float32Array.from(o.b5(o.cC(Me.canonical))),bt=Float32Array.from(Et.globeMatrix),Dt=Float32Array.from(o.cy(Et)),Ut=[o.am(Et.center.lng),o.at(Et.center.lat)],St=Float32Array.from(o.cB(Me.canonical,kt,it,Et.worldSize/Et._pixelsPerMercatorPixel))):(wt=new Float32Array(16),bt=new Float32Array(9),Dt=new Float32Array(16),Ut=[0,0],St=new Float32Array(9));const Ft=Ww(mt,wt,bt,Dt,St,nt||[0,0],o.a9(S.transform.zoom),Ut,pt,He||1,je,ae),gr=S.isTileAffectedByFog(Me),Nt=S.getOrCreateProgram("rasterParticle",{defines:Te,overrideFog:gr});if(S.uploadCommonUniforms(W,Nt,Fe),ce){const Jt=new Se(X.LEQUAL,Se.ReadOnly,S.depthRangeFor3D),Br=0,sr=S.globeSharedBuffers;if(sr){const[xr,Qr,zr]=sr.getGridBuffers(it,Br!==0);Nt.draw(S,X.TRIANGLES,Jt,be,ue.alphaBlended,S.renderElevatedRasterBackface?pr.frontCCW:pr.backCCW,Ft,O.id,xr,Qr,zr)}}else{const Jt=S.depthModeForSublayer(0,Se.ReadOnly),Br=Ae[Me.overscaledZ],{tileBoundsBuffer:sr,tileBoundsIndexBuffer:xr,tileBoundsSegments:Qr}=S.getTileBoundsBuffers(ze);Nt.draw(S,X.TRIANGLES,Jt,Br,ue.alphaBlended,pr.disabled,Ft,O.id,sr,xr,Qr)}}S.resetStencilClippingMasks()}(m,a,u,g),m.style.map.triggerRepaint())},background:function(m,a,u,g){const x=u.paint.get("background-color"),w=u.paint.get("background-opacity"),S=u.paint.get("background-emissive-strength"),k=u.paint.get("background-pitch-alignment")==="viewport";if(w===0)return;const O=m.context,N=O.gl,Q=m.transform,W=Q.tileSize,X=u.paint.get("background-pattern");let Y;if(X!==void 0&&(X===null||(Y=m.imageManager.getPattern(X.toString(),u.scope,m.style.getLut(u.scope)),!Y)))return;const ae=!X&&x.a===1&&w===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==ae)return;const le=At.disabled,ce=m.depthModeForSublayer(0,ae==="opaque"?Se.ReadWrite:Se.ReadOnly),Ae=m.colorModeForDrapableLayerRenderPass(S),Be=X?"backgroundPattern":"background";let Te,be=g;if(be||(Te=m.getBackgroundTiles(),be=Object.values(Te).map(Me=>Me.tileID)),X&&(O.activeTexture.set(N.TEXTURE0),m.imageManager.bind(m.context,u.scope)),k){const Me=m.getOrCreateProgram(Be,{overrideFog:!1,overrideRtt:!0}),Fe=new Float32Array(o.a6.mat4.identity([])),ze=new o.aA(0,0,0,0,0),Le=X?yA(Fe,S,w,m,0,u.scope,Y,k,{tileID:ze,tileSize:W}):qw(Fe,S,w,x.toRenderColor(u.lut));Me.draw(m,N.TRIANGLES,ce,le,Ae,pr.disabled,Le,u.id,m.viewportBuffer,m.quadTriangleIndexBuffer,m.viewportSegments)}else for(const Me of be){const Fe=m.isTileAffectedByFog(Me),ze=m.getOrCreateProgram(Be,{overrideFog:Fe}),Le=Me.toUnwrapped(),Ve=g?Me.projMatrix:m.transform.calculateProjMatrix(Le);m.prepareDrawTile();const Xe=a?a.getTile(Me):Te?Te[Me.key]:new la(Me,W,Q.zoom,m),je=X?yA(Ve,S,w,m,0,u.scope,Y,k,{tileID:Me,tileSize:W}):qw(Ve,S,w,x.toRenderColor(u.lut));m.uploadCommonUniforms(O,ze,Le);const{tileBoundsBuffer:He,tileBoundsIndexBuffer:nt,tileBoundsSegments:mt}=m.getTileBoundsBuffers(Xe);ze.draw(m,N.TRIANGLES,ce,le,Ae,pr.disabled,je,u.id,He,nt,mt)}},sky:function(m,a,u){const g=m._atmosphere?o.a9(m.transform.zoom):1,x=u.paint.get("sky-opacity")*g;if(x===0)return;const w=m.context,S=u.paint.get("sky-type"),k=new Se(w.gl.LEQUAL,Se.ReadOnly,[0,1]),O=m.frameCounter/1e3%1;S==="atmosphere"?m.renderPass==="offscreen"?u.needsSkyboxCapture(m)&&(function(N,Q,W,X){const Y=N.context,ae=Y.gl;let le=Q.skyboxFbo;if(!le){le=Q.skyboxFbo=Y.createFramebuffer(32,32,!0,null),Q.skyboxGeometry=new qv(Y),Q.skyboxTexture=Y.gl.createTexture(),ae.bindTexture(ae.TEXTURE_CUBE_MAP,Q.skyboxTexture),ae.texParameteri(ae.TEXTURE_CUBE_MAP,ae.TEXTURE_WRAP_S,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_CUBE_MAP,ae.TEXTURE_WRAP_T,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_CUBE_MAP,ae.TEXTURE_MIN_FILTER,ae.LINEAR),ae.texParameteri(ae.TEXTURE_CUBE_MAP,ae.TEXTURE_MAG_FILTER,ae.LINEAR);for(let Te=0;Te<6;++Te)ae.texImage2D(ae.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,ae.RGBA,32,32,0,ae.RGBA,ae.UNSIGNED_BYTE,null)}Y.bindFramebuffer.set(le.framebuffer),Y.viewport.set([0,0,32,32]);const ce=Q.getCenter(N,!0),Ae=N.getOrCreateProgram("skyboxCapture"),Be=new Float64Array(16);o.a6.mat4.identity(Be),o.a6.mat4.rotateY(Be,Be,.5*-Math.PI),_A(N,Q,Ae,Be,ce,0),o.a6.mat4.identity(Be),o.a6.mat4.rotateY(Be,Be,.5*Math.PI),_A(N,Q,Ae,Be,ce,1),o.a6.mat4.identity(Be),o.a6.mat4.rotateX(Be,Be,.5*-Math.PI),_A(N,Q,Ae,Be,ce,2),o.a6.mat4.identity(Be),o.a6.mat4.rotateX(Be,Be,.5*Math.PI),_A(N,Q,Ae,Be,ce,3),o.a6.mat4.identity(Be),_A(N,Q,Ae,Be,ce,4),o.a6.mat4.identity(Be),o.a6.mat4.rotateY(Be,Be,Math.PI),_A(N,Q,Ae,Be,ce,5),Y.viewport.set([0,0,N.width,N.height])}(m,u),u.markSkyboxValid(m)):m.renderPass==="sky"&&function(N,Q,W,X,Y){const ae=N.context,le=ae.gl,ce=N.transform,Ae=N.getOrCreateProgram("skybox");ae.activeTexture.set(le.TEXTURE0),le.bindTexture(le.TEXTURE_CUBE_MAP,Q.skyboxTexture);const Be=((Te,be,Me,Fe,ze)=>({u_matrix:Te,u_sun_direction:be,u_cubemap:0,u_opacity:Fe,u_temporal_offset:ze}))(ce.skyboxMatrix,Q.getCenter(N,!1),0,X,Y);N.uploadCommonUniforms(ae,Ae),Ae.draw(N,le.TRIANGLES,W,At.disabled,N.colorModeForRenderPass(),pr.backCW,Be,"skybox",Q.skyboxGeometry.vertexBuffer,Q.skyboxGeometry.indexBuffer,Q.skyboxGeometry.segment)}(m,u,k,x,O):S==="gradient"&&m.renderPass==="sky"&&function(N,Q,W,X,Y){const ae=N.context,le=ae.gl,ce=N.transform,Ae=N.getOrCreateProgram("skyboxGradient");Q.skyboxGeometry||(Q.skyboxGeometry=new qv(ae)),ae.activeTexture.set(le.TEXTURE0);let Be=Q.colorRampTexture;Be||(Be=Q.colorRampTexture=new o.T(ae,Q.colorRamp,le.RGBA8)),Be.bind(le.LINEAR,le.CLAMP_TO_EDGE);const Te=((be,Me,Fe,ze,Le)=>({u_matrix:be,u_color_ramp:0,u_center_direction:Me,u_radius:o.bB(Fe),u_opacity:ze,u_temporal_offset:Le}))(ce.skyboxMatrix,Q.getCenter(N,!1),Q.paint.get("sky-gradient-radius"),X,Y);N.uploadCommonUniforms(ae,Ae),Ae.draw(N,le.TRIANGLES,W,At.disabled,N.colorModeForRenderPass(),pr.backCW,Te,"skyboxGradient",Q.skyboxGeometry.vertexBuffer,Q.skyboxGeometry.indexBuffer,Q.skyboxGeometry.segment)}(m,u,k,x,O)},debug:function(m,a,u,g,x,w){for(let S=0;S<u.length;S++)if(x){const N=new o.bz(g.r*.8,g.g*.8,g.b*.8,1);$l(m,a,u[S],g,-1,-1,w),$l(m,a,u[S],g,-1,1,w),$l(m,a,u[S],g,1,1,w),$l(m,a,u[S],g,1,-1,w),$l(m,a,u[S],N,0,0,w)}else $l(m,a,u[S],g,0,0,w)},custom:function(m,a,u,g){const x=m.context,w=u.implementation;if(!m.transform.projection.unsupportedLayers||!m.transform.projection.unsupportedLayers.includes("custom")||m.terrain&&(m.terrain.renderingToTexture||m.renderPass==="offscreen")&&u.isDraped(a)){if(m.renderPass==="offscreen"){const S=w.prerender;if(S){if(m.setCustomLayerDefaults(),x.setColorMode(m.colorModeForRenderPass()),m.transform.projection.name==="globe"){const k=m.transform.pointMerc;S.call(w,x.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),o.a9(m.transform.zoom),[k.x,k.y],m.transform.pixelsPerMeterRatio)}else S.call(w,x.gl,m.transform.customLayerMatrix());x.setDirty(),m.setBaseState()}}else if(m.renderPass==="translucent"){if(m.terrain&&m.terrain.renderingToTexture){const k=w.renderToTile;if(k){const O=g[0].canonical,N=new o.a5(O.x+g[0].wrap*(1<<O.z),O.y,O.z);x.setDepthMode(Se.disabled),x.setStencilMode(At.disabled),x.setColorMode(m.colorModeForRenderPass()),m.setCustomLayerDefaults(),k.call(w,x.gl,N),x.setDirty(),m.setBaseState()}return}m.setCustomLayerDefaults(),x.setColorMode(m.colorModeForRenderPass()),x.setStencilMode(At.disabled);const S=w.renderingMode==="3d"?new Se(m.context.gl.LEQUAL,Se.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,Se.ReadOnly);if(x.setDepthMode(S),m.transform.projection.name==="globe"){const k=m.transform.pointMerc;w.render(x.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),o.a9(m.transform.zoom),[k.x,k.y],m.transform.pixelsPerMeterRatio)}else w.render(x.gl,m.transform.customLayerMatrix());x.setDirty(),m.setBaseState(),x.bindFramebuffer.set(null)}}else o.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(m,a,u,g){if(m.renderPass==="opaque")return;const x=u.paint.get("model-opacity");if(x===0)return;const w=u.paint.get("model-cast-shadows");if(m.renderPass==="shadow"&&(!w||m.terrain&&x<.65&&u._transitionablePaint._values["model-opacity"].value.expression instanceof o.a4))return;const S=m.shadowRenderer,k=u.paint.get("model-receive-shadows");S&&(S.useNormalOffset=!0,k||(S.enabled=!1));const O=()=>{S&&(S.useNormalOffset=!0,k||(S.enabled=!0))},N=a.getSource();if(m.renderPass==="light-beam"&&N.type!=="batched-model")return;if(N.type==="vector"||N.type==="geojson")return function(Ae,Be,Te,be,Me){const Fe=Ae.transform;if(Fe.projection.name!=="mercator")return void o.w(`Drawing 3D models for ${Fe.projection.name} projection is not yet implemented`);const ze=Fe.getFreeCameraOptions().position;if(!Ae.modelManager)return;const Le=Ae.modelManager;Te.modelManager=Le;const Ve=Ae.shadowRenderer;if(!Te._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const Xe=Te._unevaluatedLayout._values["model-id"],je={...Te.layout.get("model-id").parameters},He=Ae.style.order.indexOf(Te.fqid);for(const nt of be){const mt=Be.getTile(nt).getBucket(Te);if(!mt||mt.projection.name!==Fe.projection.name)continue;const Et=mt.getModelUris();Et&&!mt.modelsRequested&&(Le.addModelsFromBucket(Et,Me),mt.modelsRequested=!0);const pt=oP(nt,Fe);je.zoom=pt;const kt=Xe.possiblyEvaluate(je);if(tB(Ae,mt,nt),tc.shadowUniformsInitialized=!1,tc.useSingleShadowCascade=!!Ve&&Ve.getMaxCascadeForTile(nt.toUnwrapped())===0,Ae.renderPass==="shadow"&&Ve){if(Ae.currentShadowCascade===1&&mt.isInsideFirstShadowMapFrustum)continue;const bt=Fe.calculatePosMatrix(nt.toUnwrapped(),Fe.worldSize);if(tc.tileMatrix.set(bt),tc.shadowTileMatrix=Float32Array.from(Ve.calculateShadowPassMatrixFromMatrix(bt)),tc.aabb.min.fill(0),tc.aabb.max[0]=tc.aabb.max[1]=o.ab,tc.aabb.max[2]=0,kp(mt,tc,Ae,Te.scope))continue}const it=1<<nt.canonical.z,wt=[((ze.x-nt.wrap)*it-nt.canonical.x)*o.ab,(ze.y*it-nt.canonical.y)*o.ab,ze.z*it*o.ab];Ae.conflationActive&&Object.keys(mt.instancesPerModel).length>0&&Ae.style.isLayerClipped(Te,Be.getSource())&&mt.updateReplacement(nt,Ae.replacementSource,He,Me)&&(mt.uploaded=!1,mt.upload(Ae.context));for(let bt in mt.instancesPerModel){const Dt=mt.instancesPerModel[bt];Dt.features.length>0&&(bt=kt.evaluate(Dt.features[0].feature,{}));const Ut=Le.getModel(bt,Me);if(Ut&&Ut.uploaded)for(const St of Ut.nodes)Xs(Ae,Te,St,Dt,wt,nt,tc)}}}(m,a,u,g,N.type==="vector"?u.scope:""),void O();if(!N.loaded())return;if(N.type==="batched-model")return function(Ae,Be,Te,be){Te.resetLayerRenderingStats(Ae);const Me=Ae.context,Fe=Ae.transform,ze=Ae.style.fog,Le=Ae.shadowRenderer;if(Fe.projection.name!=="mercator")return void o.w(`Drawing 3D landmark models for ${Fe.projection.name} projection is not yet implemented`);const Ve=Ae.transform.getFreeCameraOptions().position,Xe=o.a6.vec3.scale([],[Ve.x,Ve.y,Ve.z],Ae.transform.worldSize),je=o.a6.vec3.negate([],Xe),He=o.a6.mat4.identity([]),nt=o.de(Fe.center.lat,Fe.zoom),mt=o.a6.mat4.fromScaling([],[1,1,1/nt]);o.a6.mat4.translate(He,He,je);const Et=Te.paint.get("model-opacity"),pt=new Se(Me.gl.LEQUAL,Se.ReadWrite,Ae.depthRangeFor3D),kt=new Se(Me.gl.LEQUAL,Se.ReadOnly,Ae.depthRangeFor3D),it=new o.c9([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),wt=Ae.renderPass==="shadow",bt=wt&&Le?Le.getCurrentCascadeFrustum():Fe.getFrustum(Fe.scaleZoom(Fe.worldSize)),Dt=Te.paint.get("model-front-cutoff"),Ut=Dt[2]<1,St=Pu(Ae,Te.paint.get("model-cutoff-fade-range")),Ft=Te.getLayerRenderingStats();(function(gr,Nt,Jt,Br){const sr=gr.terrain?gr.terrain.exaggeration():0,xr=gr.transform.zoom;for(const Qr of Br){const zr=Nt.getTile(Qr).getBucket(Jt);zr&&(gr.conflationActive&&zr.updateReplacement(Qr,gr.replacementSource),zr.evaluateScale(gr,Jt),gr.terrain&&sr>0&&zr.elevationUpdate(gr.terrain,sr,Qr,Jt.source),zr.needsReEvaluation(gr,xr,Jt)&&zr.evaluate(Jt))}})(Ae,Be,Te,be),function(){let gr,Nt,Jt;Ut?(gr=be.length-1,Nt=-1,Jt=-1):(gr=0,Nt=be.length,Jt=1);const Br=new Float64Array(16),sr=o.a6.vec3.create(),xr=new o.P(0,0);for(let Qr=gr;Qr!==Nt;Qr+=Jt){const zr=be[Qr],Dn=Be.getTile(zr).getBucket(Te);if(!Dn||!Dn.uploaded)continue;let jn=!1;Le&&(jn=Le.getMaxCascadeForTile(zr.toUnwrapped())===0);const hi=Fe.calculatePosMatrix(zr.toUnwrapped(),Fe.worldSize),Il=Dn.modelTraits;!wt&&Ut&&(o.a6.mat4.invert(Br,hi),o.a6.vec3.transformMat4(sr,Xe,Br),xr.x=sr[0],xr.y=sr[1]);const so=[];for(const tn of Dn.getNodesInfo()){if(tn.hiddenByReplacement||!tn.node.meshes)continue;const Nn=tn.node;let Bi=0;Ae.terrain&&Nn.elevation&&(Bi=Nn.elevation*Ae.terrain.exaggeration());const zn=(()=>{const ei=tn.aabb;return it.min=[...ei.min],it.max=[...ei.max],it.min[2]+=Bi,it.max[2]+=Bi,o.a6.vec3.transformMat4(it.min,it.min,hi),o.a6.vec3.transformMat4(it.max,it.max,hi),it})(),Vr=tn.evaluatedScale;if(Vr[0]<=1&&Vr[1]<=1&&Vr[2]<=1&&zn.intersects(bt)===0)continue;if(!wt&&Ut){const ei=.16666666666666666;tn.cameraCollisionOpacity=Xe[0]>zn.min[0]&&Xe[0]<zn.max[0]&&Xe[1]>zn.min[1]&&Xe[1]<zn.max[1]&&Xe[2]*nt<zn.max[2]&&Nn.footprint&&o.bu(xr,Nn.footprint)?Math.max(tn.cameraCollisionOpacity-ei,0):Math.min(1,tn.cameraCollisionOpacity+ei)}const Cn=[...hi],Rn=Nn.anchor?Nn.anchor[0]:0,Wi=Nn.anchor?Nn.anchor[1]:0;o.a6.mat4.translate(Cn,Cn,[Rn*(Vr[0]-1),Wi*(Vr[1]-1),Bi]),o.a6.vec3.exactEquals(Vr,o.dh)||o.a6.mat4.scale(Cn,Cn,Vr);const ao=o.a6.mat4.multiply([],Cn,Nn.matrix),fn=o.a6.mat4.multiply([],Fe.expandedFarZProjMatrix,ao),Lo=o.a6.mat4.multiply([],Fe.expandedFarZProjMatrix,Cn),Xo=o.a6.vec4.transformMat4([],[Rn,Wi,Bi,1],fn)[2];Nn.hidden=!1;let Oo=Et;wt||(Ut&&(Oo*=tn.cameraCollisionOpacity,Oo*=Bn(Cn,Fe,tn.aabb,Dt)),Oo*=fi(St,Xo)),Oo!==0?so.push({nodeInfo:tn,depth:Xo,opacity:Oo,wvpForNode:fn,wvpForTile:Lo,nodeModelMatrix:ao,tileModelMatrix:Cn}):Nn.hidden=!0}wt||so.sort((tn,Nn)=>!Ut||tn.opacity===1&&Nn.opacity===1?tn.depth<Nn.depth?-1:1:tn.opacity===1?-1:Nn.opacity===1?1:tn.depth>Nn.depth?-1:1);for(const tn of so){const Nn=tn.nodeInfo,Bi=Nn.node;let zn=o.a6.mat4.multiply([],mt,tn.tileModelMatrix);o.a6.mat4.multiply(zn,He,zn);const Vr=o.a6.mat4.invert([],zn);o.a6.mat4.transpose(Vr,Vr),o.a6.mat4.scale(Vr,Vr,sP),zn=o.a6.mat4.multiply(zn,zn,Bi.matrix);const Cn=Ae.renderPass==="light-beam",Rn=Il&o.dj.HasMapboxMeshFeatures,Wi=Rn?0:Nn.evaluatedRMEA[0][2];for(let ao=0;ao<Bi.meshes.length;++ao){const fn=Bi.meshes[ao],Lo=ao===Bi.lightMeshIndex;let Xo=tn.wvpForNode;if(Lo){if(!Cn&&!Ae.terrain&&Ae.shadowRenderer){Ae.currentLayer<Ae.firstLightBeamLayer&&(Ae.firstLightBeamLayer=Ae.currentLayer);continue}Xo=tn.wvpForTile}else if(Cn)continue;const Oo={defines:[]},ei=[];if(Ng(Oo.defines,ei,fn,Ae,Te.lut),Rn||Oo.defines.push("DIFFUSE_SHADED"),jn&&Oo.defines.push("SHADOWS_SINGLE_CASCADE"),Ft&&(wt?Ft.numRenderedVerticesInShadowPass+=fn.vertexArray.length:Ft.numRenderedVerticesInTransparentPass+=fn.vertexArray.length),wt){Md(fn,tn.nodeModelMatrix,Ae,Te);continue}let fa=null;if(ze){const Ou=Vg(tn.nodeModelMatrix,Ae.transform);if(fa=new Float32Array(Ou),Fe.projection.name!=="globe"){const Eh=fn.aabb.min,Oc=fn.aabb.max,[Ud,zd]=ze.getOpacityForBounds(Ou,Eh[0],Eh[1],Oc[0],Oc[1]);Oo.overrideFog=Ud>=Kt||zd>=Kt}}const pa=fn.material;let Fl;pa.occlusionTexture&&pa.occlusionTexture.offsetScale&&(Fl=pa.occlusionTexture.offsetScale,Oo.defines.push("OCCLUSION_TEXTURE_TRANSFORM")),!wt&&Le&&(Le.useNormalOffset=!!fn.normalBuffer);const ll=Ae.getOrCreateProgram("model",Oo);!wt&&Le&&Le.setupShadowsFromMatrix(tn.tileModelMatrix,ll,Le.useNormalOffset),Ae.uploadCommonUniforms(Me,ll,null,fa);const za=pa.pbrMetallicRoughness;za.metallicFactor=.9,za.roughnessFactor=.5;const Pl=rr(new Float32Array(Xo),new Float32Array(zn),new Float32Array(Vr),new Float32Array(Bi.matrix),Ae,tn.opacity,za.baseColorFactor.toRenderColor(null),pa.emissiveFactor,za.metallicFactor,za.roughnessFactor,pa,Wi,Te,[0,0,0],Fl);!Lo&&(Nn.hasTranslucentParts||tn.opacity<1)&&ll.draw(Ae,Me.gl.TRIANGLES,pt,At.disabled,ue.disabled,pr.backCCW,Pl,Te.id,fn.vertexBuffer,fn.indexBuffer,fn.segments,Te.paint,Ae.transform.zoom,void 0,ei),ll.draw(Ae,Me.gl.TRIANGLES,Lo?kt:pt,At.disabled,Lo||tn.opacity<1||Nn.hasTranslucentParts?ue.alphaBlended:ue.unblended,pr.backCCW,Pl,Te.id,fn.vertexBuffer,fn.indexBuffer,fn.segments,Te.paint,Ae.transform.zoom,void 0,ei)}}}}()}(m,a,u,g),void O();if(N.type!=="model")return;const Q=N.getModels(),W=[],X=m.transform.getFreeCameraOptions().position,Y=o.a6.vec3.scale([],[X.x,X.y,X.z],m.transform.worldSize);o.a6.vec3.negate(Y,Y);const ae=[],le=[];let ce=0;for(const Ae of Q){const Be=u.paint.get("model-rotation").constantOr(null),Te=u.paint.get("model-scale").constantOr(null),be=u.paint.get("model-translation").constantOr(null);Ae.computeModelMatrix(m,Be,Te,be,!0,!0,!1);const Me=o.a6.mat4.identity([]),Fe=o.de(Ae.position.lat,m.transform.zoom),ze=o.a6.mat4.fromScaling([],[1,1,1/Fe]);o.a6.mat4.translate(Me,Me,Y),W.push({zScaleMatrix:ze,negCameraPosMatrix:Me});for(const Le of Ae.nodes)Rp(m.transform,Le,Ae.matrix,m.transform.expandedFarZProjMatrix,ce,ae,le);ce++}if(ae.sort((Ae,Be)=>Be.depth-Ae.depth),m.renderPass!=="shadow"){if(x===1)for(const Ae of le)Mp(Ae,m,u,W[Ae.modelIndex],At.disabled,m.colorModeForRenderPass());else{for(const Ae of le)Mp(Ae,m,u,W[Ae.modelIndex],At.disabled,ue.disabled);for(const Ae of le)Mp(Ae,m,u,W[Ae.modelIndex],m.stencilModeFor3D(),m.colorModeForRenderPass());m.resetStencilClippingMasks()}for(const Ae of ae)Mp(Ae,m,u,W[Ae.modelIndex],At.disabled,m.colorModeForRenderPass());O()}else{for(const Ae of le)Md(Ae.mesh,Ae.nodeModelMatrix,m,u);for(const Ae of ae)Md(Ae.mesh,Ae.nodeModelMatrix,m,u);O()}}},Hg={model:function(m,a,u){const g=a.getSource();if(!g.loaded())return;if(g.type==="vector"||g.type==="geojson")return void(u.modelManager&&u.modelManager.upload(u,g.type==="vector"?m.scope:""));if(g.type==="batched-model"||g.type!=="model")return;const x=g.getModels();for(const w of x)w.upload(u.context)},raster:function(m,a,u){const g=a.getSource();if(!(g instanceof Zl&&g.loaded()))return;const x=m.sourceLayer||g.rasterLayerIds&&g.rasterLayerIds[0];if(!x)return;const w=m.paint.get("raster-array-band")||g.getInitialBand(x);if(w==null)return;const S=a.getIds().map(k=>a.getTileByID(k));for(const k of S)k.updateNeeded(x,w)&&g.prepareTile(k,x,w)},"raster-particle":function(m,a,u){const g=a.getSource();if(!(g instanceof Zl&&g.loaded()))return;const x=m.sourceLayer||g.rasterLayerIds&&g.rasterLayerIds[0];if(!x)return;const w=m.paint.get("raster-particle-array-band")||g.getInitialBand(x);if(w==null)return;const S=a.getIds().map(k=>a.getTileByID(k));for(const k of S)k.updateNeeded(x,w)&&g.prepareTile(k,x,w)}};class Xv{constructor(a,u,g,x){this.context=new $F(a,u),this.transform=g,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=x,this._timeStamp=o.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const w=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","raster-particle","hillshade","model","background","sky"];for(const k of w)this._debugParams.enabledLayers[k]=!0;x.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),x.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),x.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),x.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),x.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const k of w)x.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],k);this.occlusionParams=new Qg(x),this.setup(),this.numSublayers=wo.maxUnderzooming+wo.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new o.dl,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new yw(this),this._wireframeDebugCache=new bh,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const S=new o.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new o.T(this.context,S,a.RGBA8),this._clippingActiveLastFrame=!1}updateTerrain(a,u){const g=!!a&&!!a.terrain&&this.transform.projection.supportsTerrain;if(!(g||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Rv(this,a));const x=this._terrain;this.transform.elevation=g?x:null,x.update(a,this.transform,u),this.transform.elevation&&!x.enabled&&(this.transform.elevation=null)}_updateFog(a){const u=a.fog;if(!u||this.transform.projection.name==="globe"||u.getOpacity(this.transform.pitch)<1||u.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[g,x]=u.getFovAdjustedRange(this.transform._fov);if(g>x)return void(this.transform.fogCullDistSq=null);const w=g+.78*(x-g);this.transform.fogCullDistSq=w*w}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(a){a&&!this._terrain&&(this._terrain=new Rv(this,this.style)),this._forceTerrainMode=a}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(a,u){if(this.width=a*o.q.devicePixelRatio,this.height=u*o.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style.order)this.style._mergedLayers[g].resize()}setup(){const a=this.context,u=new o.a_;u.emplaceBack(0,0),u.emplaceBack(o.ab,0),u.emplaceBack(0,o.ab),u.emplaceBack(o.ab,o.ab),this.tileExtentBuffer=a.createVertexBuffer(u,o.b0.members),this.tileExtentSegments=o.b1.simpleSegment(0,0,4,2);const g=new o.a_;g.emplaceBack(0,0),g.emplaceBack(o.ab,0),g.emplaceBack(0,o.ab),g.emplaceBack(o.ab,o.ab),this.debugBuffer=a.createVertexBuffer(g,o.b0.members),this.debugSegments=o.b1.simpleSegment(0,0,4,5);const x=new o.a_;x.emplaceBack(-1,-1),x.emplaceBack(1,-1),x.emplaceBack(-1,1),x.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(x,o.b0.members),this.viewportSegments=o.b1.simpleSegment(0,0,4,2);const w=new o.aN;w.emplaceBack(0,0,0,0),w.emplaceBack(o.ab,0,o.ab,0),w.emplaceBack(0,o.ab,0,o.ab),w.emplaceBack(o.ab,o.ab,o.ab,o.ab),this.mercatorBoundsBuffer=a.createVertexBuffer(w,o.b3.members),this.mercatorBoundsSegments=o.b1.simpleSegment(0,0,4,2);const S=new o.aO;S.emplaceBack(0,1,2),S.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(S);const k=new o.a$;for(const N of[0,1,3,2,0])k.emplaceBack(N);this.debugIndexBuffer=a.createIndexBuffer(k),this.emptyTexture=new o.T(a,new o.r({width:1,height:1},Uint8Array.of(0,0,0,0)),a.gl.RGBA8),this.identityMat=o.a6.mat4.create();const O=this.context.gl;this.stencilClearMode=new At({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(a){return a._makeTileBoundsBuffers(this.context,this.transform.projection),a._tileBoundsBuffer?{tileBoundsBuffer:a._tileBoundsBuffer,tileBoundsIndexBuffer:a._tileBoundsIndexBuffer,tileBoundsSegments:a._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const a=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,a.TRIANGLES,Se.disabled,this.stencilClearMode,ue.disabled,pr.disabled,Cp(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(a,u,g){if(!u||this.currentStencilSource===u.id||!a.isTileClipped()||!g||g.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let k=!1;for(const O of g)if(this._tileClippingMaskIDs[O.key]===void 0){k=!0;break}if(!k)return}this.currentStencilSource=u.id;const x=this.context,w=x.gl;this.nextStencilID+g.length>256&&this.clearStencil(),x.setColorMode(ue.disabled),x.setDepthMode(Se.disabled);const S=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const k of g){const O=u.getTile(k),N=this._tileClippingMaskIDs[k.key]=this.nextStencilID++,{tileBoundsBuffer:Q,tileBoundsIndexBuffer:W,tileBoundsSegments:X}=this.getTileBoundsBuffers(O);S.draw(this,w.TRIANGLES,Se.disabled,new At({func:w.ALWAYS,mask:0},N,255,w.KEEP,w.KEEP,w.REPLACE),ue.disabled,pr.disabled,Cp(k.projMatrix),"$clipping",Q,W,X)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,u=this.context.gl;return new At({func:u.NOTEQUAL,mask:255},a,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(a){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(a);const u=this.context.gl;return new At({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(a){const u=this.context.gl,g=a.sort((S,k)=>k.overscaledZ-S.overscaledZ),x=g[g.length-1].overscaledZ,w=g[0].overscaledZ-x+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const S={};for(let k=0;k<w;k++)S[k+x]=new At({func:u.GEQUAL,mask:255},k+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=w,[S,g]}return[{[x]:At.disabled},g]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new ue([a.CONSTANT_COLOR,a.ONE,a.CONSTANT_COLOR,a.ONE],new o.bz(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ue.unblended:ue.alphaBlended}colorModeForDrapableLayerRenderPass(a){const u=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new ue([u.ONE,u.ONE_MINUS_SRC_ALPHA,u.CONSTANT_ALPHA,u.ONE_MINUS_SRC_ALPHA],new o.bz(0,0,0,a===void 0?0:a),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(a,u,g,x=!1){if(this.depthOcclusion)return new Se(this.context.gl.GREATER,Se.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!x)return Se.disabled;const w=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new Se(g||this.context.gl.LEQUAL,u,[w,w])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const a=this.context.gl,u=Math.ceil(this.width),g=Math.ceil(this.height),x=this.context.bindFramebuffer.get(),w=a.getParameter(a.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===u&&this.depthFBO.height===g||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),u!==0&&g!==0&&(this.depthFBO=new Rg(this.context,u,g,!1,"texture"),this.depthTexture=new o.T(this.context,{width:u,height:g,data:null},a.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(x),a.bindTexture(a.TEXTURE_2D,w),this.depthFBO&&(a.bindFramebuffer(a.READ_FRAMEBUFFER,null),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),a.blitFramebuffer(0,0,u,g,0,0,u,g,a.DEPTH_BUFFER_BIT,a.NEAREST),a.bindFramebuffer(a.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((a,u)=>a+u/this._fpsHistory.length,0))}render(a,u){const g=o.q.now();this._dt=g-this._timeStamp,this._timeStamp=g,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=a.map.repaint,this.style=a,this.options=u;const x=this.style._mergedLayers,w=this.style.order.filter(je=>{const He=x[je];return!(He.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[He.type]});let S=!1,k=!1;for(const je of w){const He=x[je];He.type==="circle"&&(S=!0),He.type==="symbol"&&(He.hasInitialOcclusionOpacityProperties?k=!0:S=!0)}const O=w.map(je=>x[je]),N=this.style._mergedSourceCaches;this.imageManager=a.imageManager,this.modelManager=a.modelManager,this.symbolFadeChange=a.placement.symbolFadeChange(o.q.now()),this.imageManager.beginFrame();let Q=0,W=!1;for(const je in N){const He=N[je];He.used&&(He.prepare(this.context),He.getSource().usedInConflation&&++Q)}let X=!1;for(const je of O)je.isHidden(this.transform.zoom)||(je.type==="clip"&&(X=!0),this.prepareLayer(je));const Y={},ae={},le={},ce={},Ae={};for(const je in N){const He=N[je];Y[je]=He.getVisibleCoordinates(),ae[je]=Y[je].slice().reverse(),le[je]=He.getVisibleCoordinates(!0).reverse(),ce[je]=He.getShadowCasterCoordinates(),Ae[je]=He.sortCoordinatesByDistance(Y[je])}const Be=je=>{const He=this.style.getLayerSourceCache(je);return He&&He.used?He.getSource():null};if(Q||X||this._clippingActiveLastFrame){const je=[],He=[];let nt=0;for(const mt of O)this.isSourceForClippingOrConflation(mt,Be(mt))&&(je.push(mt),He.push(nt)),nt++;if(je&&(X||je.length>1)||this._clippingActiveLastFrame){X=!1;const mt=[];for(let Et=0;Et<je.length;Et++){const pt=je[Et],kt=He[Et],it=this.style.getLayerSourceCache(pt);if(!it||!it.used||!it.getSource().usedInConflation&&pt.type!=="clip")continue;let wt=o.dn,bt=o.bs.None;const Dt=[];let Ut=!0;if(pt.type==="clip"){wt=kt;for(const St of pt.layout.get("clip-layer-types"))bt|=St==="model"?o.bs.Model:St==="symbol"?o.bs.Symbol:o.bs.FillExtrusion;for(const St of pt.layout.get("clip-layer-scope"))Dt.push(St);pt.isHidden(this.transform.zoom)?Ut=!1:X=!0}Ut&&mt.push({layer:pt.fqid,cache:it,order:wt,clipMask:bt,clipScope:Dt})}this.replacementSource.setSources(mt),W=!0}}this._clippingActiveLastFrame=X,W||this.replacementSource.clear(),this.conflationActive=W,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let je=0;je<O.length;je++){const He=O[je],nt=He.cutoffRange();if(this.longestCutoffRange=Math.max(nt,this.longestCutoffRange),nt>0){const mt=Be(He);mt&&(this.minCutoffZoom=Math.max(mt.minzoom,this.minCutoffZoom)),He.minzoom&&(this.minCutoffZoom=Math.max(He.minzoom,this.minCutoffZoom))}He.is3D()&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=je),this._lastOcclusionLayer=je)}const Te=this.style&&this.style.fog;Te?(this._fogVisible=Te.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=Te.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(le),this.opaquePassCutoff=0);const be=this._shadowRenderer;if(be){be.updateShadowParameters(this.transform,this.style.directionalLight);for(const je in N)for(const He of Y[je]){let nt={min:0,max:0};this.terrain&&(nt=this.terrain.getMinMaxForTile(He)||nt),be.addShadowReceiver(He.toUnwrapped(),nt.min,nt.max)}}if(this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new o.dm(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new zg(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),!no.has(this.context.gl))return;this.renderPass="offscreen";for(const je of O){const He=a.getLayerSourceCache(je);if(!je.hasOffscreenPass()||je.isHidden(this.transform.zoom))continue;const nt=He?ae[He.id]:void 0;(je.type==="custom"||je.type==="raster"||je.type==="raster-particle"||je.isSky()||nt&&nt.length)&&this.renderLayer(this,He,je,nt)}this.depthRangeFor3D=[0,1-(O.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,ce)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const Me=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),Fe=(()=>{if(u.showOverdrawInspector)return o.bz.black;const je=this.style.fog;if(je&&this.transform.projection.supportsFog){const He=this.style.getLut(je.scope);if(!Me){const nt=je.properties.get("color").toRenderColor(He).toArray01();return new o.bz(...nt)}if(Me){const nt=je.properties.get("space-color").toRenderColor(He).toArray01();return new o.bz(...nt)}}return o.bz.transparent})();if(this.context.clear({color:Fe,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Me&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=w.length-1;this.currentLayer>=0;this.currentLayer--){const je=O[this.currentLayer],He=a.getLayerSourceCache(je);if(je.isSky())continue;const nt=He?(je.is3D()?Ae:ae)[He.id]:void 0;this._renderTileClippingMasks(je,He,nt),this.renderLayer(this,He,je,nt)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&Me&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||o.a9(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<w.length;this.currentLayer++){const je=O[this.currentLayer],He=a.getLayerSourceCache(je);je.isSky()&&this.renderLayer(this,He,je,He?ae[He.id]:void 0)}function ze(je,He){let nt;return He&&(nt=(je.type==="symbol"?le:je.is3D()?Ae:ae)[He.id]),nt}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<w.length;){const je=O[this.currentLayer];if(je.type==="raster"||je.type==="raster-particle"){const He=a.getLayerSourceCache(je);this.renderLayer(this,He,je,ze(je,He))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let Le=0;be&&(Le=be.getShadowCastingLayerCount());let Ve=!1,Xe=-1;for(let je=0;je<w.length;++je){const He=O[je];He.isHidden(this.transform.zoom)||He.is3D()&&(Xe=je)}for(k&&Xe===-1&&(S=!0);this.currentLayer<w.length;){const je=O[this.currentLayer],He=a.getLayerSourceCache(je);if(je.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(je)){if(je.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(S&&!Ve&&this.terrain&&!this.transform.isOrthographic&&(Ve=!0,this.blitDepth()),k&&Xe!==-1&&this.currentLayer===Xe+1&&!this.transform.isOrthographic&&this.blitDepth(),je.is3D()||this.terrain||this._renderTileClippingMasks(je,He,He?Y[He.id]:void 0),this.renderLayer(this,He,je,ze(je,He)),!this.terrain&&be&&Le>0&&je.hasShadowPass()&&--Le==0&&(be.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const nt=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=nt;this.currentLayer++){const mt=O[this.currentLayer];if(!mt.hasLightBeamPass())continue;const Et=a.getLayerSourceCache(mt);this.renderLayer(this,Et,mt,Et?ae[Et.id]:void 0)}this.currentLayer=nt,this.renderPass="translucent"}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const nt=this.currentLayer;this.depthOcclusion=!0;for(const mt of this.layersWithOcclusionOpacity){this.currentLayer=mt;const Et=O[this.currentLayer],pt=a.getLayerSourceCache(Et),kt=pt?ae[pt.id]:void 0;Et.is3D()||this.terrain||this._renderTileClippingMasks(Et,pt,pt?Y[pt.id]:void 0),this.renderLayer(this,pt,Et,kt)}this.depthOcclusion=!1,this.currentLayer=nt,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let je=null;O.forEach(He=>{const nt=a.getLayerSourceCache(He);nt&&!He.isHidden(this.transform.zoom)&&nt.getVisibleCoordinates().length&&(!je||je.getSource().maxzoom<nt.getSource().maxzoom)&&(je=nt)}),je&&this.options.showTileBoundaries&&wh.debug(this,je,je.getVisibleCoordinates(),o.bz.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&wh.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new o.bz(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(je){const He=je.transform.padding;wi(je,je.transform.height-(He.top||0),3,rP),wi(je,He.bottom||0,3,Id),ot(je,He.left||0,3,Fd),ot(je,je.transform.width-(He.right||0),3,zt);const nt=je.transform.centerPoint;(function(mt,Et,pt,kt){Pp(mt,Et-1,pt-10,2,20,kt),Pp(mt,Et-10,pt-1,20,2,kt)})(je,nt.x,je.transform.height-nt.y,mr)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),W||(this.conflationActive=!1)}prepareLayer(a){this.gpuTimingStart(a);const{unsupportedLayers:u}=this.transform.projection,g=!u||!u.includes(a.type);if(Hg[a.type]&&(g||this.terrain&&a.type==="custom")){const x=this.style.getLayerSourceCache(a);Hg[a.type](a,x,this)}this.gpuTimingEnd()}renderLayer(a,u,g,x){g.isHidden(this.transform.zoom)||(g.type==="background"||g.type==="sky"||g.type==="custom"||g.type==="model"||g.type==="raster"||g.type==="raster-particle"||x&&x.length)&&(this.id=g.id,this.gpuTimingStart(g),a.transform.projection.unsupportedLayers&&a.transform.projection.unsupportedLayers.includes(g.type)&&(!a.terrain||g.type!=="custom")||g.type==="clip"||wh[g.type](a,u,g,x,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(a){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery,g=this.context.gl;let x=this.gpuTimers[a.id];x||(x=this.gpuTimers[a.id]={calls:0,cpuTime:0,query:g.createQuery()}),x.calls++,g.beginQuery(u.TIME_ELAPSED_EXT,x.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const a=this.context.extTimerQuery,u=this.context.gl,g=u.createQuery();this.deferredRenderGpuTimeQueries.push(g),u.beginQuery(a.TIME_ELAPSED_EXT,g)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const a=this.gpuTimers;return this.gpuTimers={},a}collectDeferredRenderGpuQueries(){const a=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],a}queryGpuTimers(a){const u={};for(const g in a){const x=a[g],w=this.context.extTimerQuery,S=w.getQueryParameter(x.query,this.context.gl.QUERY_RESULT)/1e6;w.deleteQueryEXT(x.query),u[g]=S}return u}queryGpuTimeDeferredRender(a){if(!this.options.gpuTimingDeferredRender)return 0;const u=this.context.extTimerQuery,g=this.context.gl;let x=0;for(const w of a)x+=u.getQueryParameter(w,g.QUERY_RESULT)/1e6,u.deleteQueryEXT(w);return x}translatePosMatrix(a,u,g,x,w){if(!g[0]&&!g[1])return a;const S=w?x==="map"?this.transform.angle:0:x==="viewport"?-this.transform.angle:0;if(S){const N=Math.sin(S),Q=Math.cos(S);g=[g[0]*Q-g[1]*N,g[0]*N+g[1]*Q]}const k=[w?g[0]:o.ak(u,g[0],this.transform.zoom),w?g[1]:o.ak(u,g[1],this.transform.zoom),0],O=new Float32Array(16);return o.a6.mat4.translate(O,a,k),O}saveTileTexture(a){const u=a.size[0],g=this._tileTextures[u];g?g.push(a):this._tileTextures[u]=[a]}getTileTexture(a){const u=this._tileTextures[a];return u&&u.length>0?u.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(a,u,g){const x=g===void 0?this.terrain&&this.terrain.renderingToTexture:g,w=[];return this.style&&this.style.enable3dLights()&&(a==="globeRaster"||a==="terrainRaster"?(w.push("LIGHTING_3D_MODE"),w.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):x||w.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"?this._shadowMapDebug||w.push("DEPTH_TEXTURE"):this.shadowRenderer&&(this.shadowRenderer.useNormalOffset?w.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"):w.push("RENDER_SHADOWS","DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(w.push("TERRAIN"),this.linearFloatFilteringSupported()&&w.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&w.push("GLOBE"),!this._fogVisible||x||u!==void 0&&!u||w.push("FOG","FOG_DITHERING"),x&&w.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&w.push("OVERDRAW_INSPECTOR"),w}getOrCreateProgram(a,u){this.cache=this.cache||{};const g=u&&u.defines||[],x=u&&u.config,w=this.currentGlobalDefines(a,u&&u.overrideFog,u&&u.overrideRtt).concat(g),S=_h.cacheKey(yh[a],a,w,x);return this.cache[S]||(this.cache[S]=new _h(this.context,a,yh[a],x,Xw[a],w)),this.cache[S]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(a,u){if(this.style.enable3dLights()){const g=this.style.directionalLight,x=this.style.ambientLight;if(g&&x){const w=((S,k,O)=>{const N=S.properties.get("direction"),Q=S.properties.get("color").toRenderColor(O.getLut(S.scope)).toArray01(),W=S.properties.get("intensity"),X=k.properties.get("color").toRenderColor(O.getLut(k.scope)).toArray01(),Y=k.properties.get("intensity"),ae=[N.x,N.y,N.z],le=o.cH(X,Y),ce=o.cH(Q,W);return{u_lighting_ambient_color:le,u_lighting_directional_dir:ae,u_lighting_directional_color:ce,u_ground_radiance:kv(ae,ce,le)}})(g,x,this.style);u.setLightsUniformValues(a,w)}}}uploadCommonUniforms(a,u,g,x,w){if(this.uploadCommonLightUniforms(a,u),this.terrain&&this.terrain.renderingToTexture)return;const S=this.style.fog;if(S){const k=S.getOpacity(this.transform.pitch),O=((N,Q,W,X,Y,ae,le,ce,Ae,Be,Te,be)=>{const Me=N.transform,Fe=Q.properties.get("color").toRenderColor(N.style.getLut(Q.scope)).toArray01();Fe[3]=X;const ze=N.frameCounter/1e3%1,[Le,Ve]=Q.properties.get("vertical-range");return{u_fog_matrix:W?Me.calculateFogTileMatrix(W):be||N.identityMat,u_fog_range:Q.getFovAdjustedRange(Me._fov),u_fog_color:Fe,u_fog_horizon_blend:Q.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(Le,Ve),Ve],u_fog_temporal_offset:ze,u_frustum_tl:Y,u_frustum_tr:ae,u_frustum_br:le,u_frustum_bl:ce,u_globe_pos:Ae,u_globe_radius:Be,u_viewport:Te,u_globe_transition:o.a9(Me.zoom),u_is_globe:+(Me.projection.name==="globe")}})(this,S,g,k,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*o.q.devicePixelRatio,this.transform.height*o.q.devicePixelRatio],x);u.setFogUniformValues(a,O)}w&&u.setCutoffUniformValues(a,w.uniformValues)}setTileLoadedFlag(a){this.tileLoaded=a}saveCanvasCopy(){const a=this.canvasCopy();a&&(this.frameCopies.push(a),this.tileLoaded=!1)}canvasCopy(){const a=this.context.gl,u=a.createTexture();return a.bindTexture(a.TEXTURE_2D,u),a.copyTexImage2D(a.TEXTURE_2D,0,a.RGBA,0,0,a.drawingBufferWidth,a.drawingBufferHeight,0),u}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const a=this.style&&this.style.fog;return!!a&&a.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const a=this._backgroundTiles,u=this._backgroundTiles={},g=this.transform.coveringTiles({tileSize:512});for(const x of g)u[x.key]=a[x.key]||new la(x,512,this.transform.tileZoom,this);return u}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(a,u){return!(!a.is3D()||a.type!=="clip"&&(a.minzoom&&a.minzoom>this.transform.zoom||(this.style._clipLayerPresent||a.sourceLayer!=="building")&&(!u||u.type!=="batched-model")))}isTileAffectedByFog(a){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let u=this._cachedTileFogOpacities[a.key];return u||(this._cachedTileFogOpacities[a.key]=u=this.style.fog.getOpacityForTile(a)),u[0]>=Kt||u[1]>=Kt}setupDepthForOcclusion(a,u,g){const x=this.context,w=x.gl,S=!!g;var k;g||(g={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),x.activeTexture.set(w.TEXTURE3),a&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),g.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],g.u_depth_range_unpack=[2/((k=this.depthRangeFor3D)[1]-k[0]),-1-2*k[0]/(k[1]-k[0])],g.u_occluder_half_size=.5*this.occlusionParams.occluderSize,g.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),x.activeTexture.set(w.TEXTURE0),S||u.setTerrainUniformValues(x,g)}}function Ru(m,a){let u=!1,g=null;const x=()=>{g=null,u&&(m(),g=setTimeout(x,a),u=!1)};return()=>(u=!0,g||x(),g)}class Bh{constructor(a){this._hashName=a&&encodeURIComponent(a),o.aJ(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Ru(this._updateHashUnthrottled.bind(this),300)}addTo(a){return this._map=a,window.addEventListener("hashchange",this._onHashChange,!1),a.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const a=this._map;if(!a)return"";const u=ku(a);if(this._hashName){const g=this._hashName;let x=!1;const w=location.hash.slice(1).split("&").map(S=>{const k=S.split("=")[0];return k===g?(x=!0,`${k}=${u}`):S}).filter(S=>S);return x||w.push(`${g}=${u}`),`#${w.join("&")}`}return`#${u}`}_getCurrentHash(){const a=location.hash.replace("#","");if(this._hashName){let u;return a.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(u=g)}),(u&&u[1]||"").split("/")}return a.split("/")}_onHashChange(){const a=this._map;if(!a)return!1;const u=this._getCurrentHash();if(u.length>=3&&!u.some(g=>isNaN(g))){const g=a.dragRotate.isEnabled()&&a.touchZoomRotate.isEnabled()?+(u[3]||0):a.getBearing();return a.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:g,pitch:+(u[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function ku(m,a){const u=m.getCenter(),g=Math.round(100*m.getZoom())/100,x=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,x),S=Math.round(u.lng*w)/w,k=Math.round(u.lat*w)/w,O=m.getBearing(),N=m.getPitch();let Q=a?`/${S}/${k}/${g}`:`${g}/${k}/${S}`;return(O||N)&&(Q+="/"+Math.round(10*O)/10),N&&(Q+=`/${Math.round(N)}`),Q}const xA={linearity:.3,easing:o.dp(0,0,.3,1)},jg=o.l({deceleration:2500,maxSpeed:1400},xA),Zv=o.l({deceleration:20,maxSpeed:1400},xA),Yv=o.l({deceleration:1e3,maxSpeed:360},xA),Jv=o.l({deceleration:1e3,maxSpeed:90},xA);class Ch{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.q.now(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,u=o.q.now();for(;a.length>0&&u-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const u={zoom:0,bearing:0,pitch:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)u.zoom+=w.zoomDelta||0,u.bearing+=w.bearingDelta||0,u.pitch+=w.pitchDelta||0,w.panDelta&&u.pan._add(w.panDelta),w.around&&(u.around=w.around),w.pinchAround&&(u.pinchAround=w.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,x={};if(u.pan.mag()){const w=bA(u.pan.mag(),g,o.l({},jg,a||{}));x.offset=u.pan.mult(w.amount/u.pan.mag()),x.center=this._map.transform.center,Rd(x,w)}if(u.zoom){const w=bA(u.zoom,g,Zv);x.zoom=this._map.transform.zoom+w.amount,Rd(x,w)}if(u.bearing){const w=bA(u.bearing,g,Yv);x.bearing=this._map.transform.bearing+o.ap(w.amount,-179,179),Rd(x,w)}if(u.pitch){const w=bA(u.pitch,g,Jv);x.pitch=this._map.transform.pitch+w.amount,Rd(x,w)}if(x.zoom||x.bearing){const w=u.pinchAround===void 0?u.around:u.pinchAround;x.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),x.noMoveStart=!0,x}}function Rd(m,a){(!m.duration||m.duration<a.duration)&&(m.duration=a.duration,m.easing=a.easing)}function bA(m,a,u){const{maxSpeed:g,linearity:x,deceleration:w}=u,S=o.ap(m*x/(a/1e3),-g,g),k=Math.abs(S)/(w*x);return{easing:u.easing,duration:1e3*k,amount:S*(k/2)}}class da extends o.x{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,u,g,x={}){const w=de(u.getCanvasContainer(),g),S=u.unproject(w);super(a,o.l({point:w,lngLat:S,originalEvent:g},x)),this._defaultPrevented=!1,this.target=u}}class kd extends o.x{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,u,g){const x=a==="touchend"?g.changedTouches:g.touches,w=_e(u.getCanvasContainer(),x),S=w.map(O=>u.unproject(O)),k=w.reduce((O,N,Q,W)=>O.add(N.div(W.length)),new o.P(0,0));super(a,{points:w,point:k,lngLats:S,lngLat:u.unproject(k),originalEvent:g}),this._defaultPrevented=!1}}class gs extends o.x{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,u){super("wheel",{originalEvent:u}),this._defaultPrevented=!1}}class $v{constructor(a,u){this._map=a,this._clickTolerance=u.clickTolerance}reset(){this._mousedownPos=void 0}wheel(a){return this._firePreventable(new gs(this._map,a))}mousedown(a,u){return this._mousedownPos=u,this._firePreventable(new da(a.type,this._map,a))}mouseup(a){this._map.fire(new da(a.type,this._map,a))}preclick(a){const u=o.l({},a);u.type="preclick",this._map.fire(new da(u.type,this._map,u))}click(a,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||(this.preclick(a),this._map.fire(new da(a.type,this._map,a)))}dblclick(a){return this._firePreventable(new da(a.type,this._map,a))}mouseover(a){this._map.fire(new da(a.type,this._map,a))}mouseout(a){this._map.fire(new da(a.type,this._map,a))}touchstart(a){return this._firePreventable(new kd(a.type,this._map,a))}touchmove(a){this._map.fire(new kd(a.type,this._map,a))}touchend(a){this._map.fire(new kd(a.type,this._map,a))}touchcancel(a){this._map.fire(new kd(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class e_{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(a){this._map.fire(new da(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new da("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._map.fire(new da(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Dd{constructor(a,u){this._map=a,this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,u){this.isEnabled()&&a.shiftKey&&a.button===0&&(me(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(a,u){if(!this._active)return;const g=u,x=this._startPos,w=this._lastPos;if(!x||!w||w.equals(g)||!this._box&&g.dist(x)<this._clickTolerance)return;this._lastPos=g,this._box||(this._box=$("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",a));const S=Math.min(x.x,g.x),k=Math.max(x.x,g.x),O=Math.min(x.y,g.y),N=Math.max(x.y,g.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${S}px,${O}px)`,this._box.style.width=k-S+"px",this._box.style.height=N-O+"px")})}mouseupWindow(a,u){if(!this._active)return;const g=this._startPos,x=u;if(g&&a.button===0){if(this.reset(),re(),g.x!==x.x||g.y!==x.y)return this._map.fire(new o.x("boxzoomend",{originalEvent:a})),{cameraAnimation:w=>w.fitScreenCoordinates(g,x,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",a)}}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),ye(),delete this._startPos,delete this._lastPos}_fireEvent(a,u){return this._map.fire(new o.x(a,{originalEvent:u}))}}function Du(m,a){const u={};for(let g=0;g<m.length;g++)u[m[g].identifier]=a[g];return u}class t_{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(a,u,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=a.timeStamp),g.length===this.numTouches&&(this.centroid=function(x){const w=new o.P(0,0);for(const S of x)w._add(S);return w.div(x.length)}(u),this.touches=Du(g,u)))}touchmove(a,u,g){if(this.aborted||!this.centroid)return;const x=Du(g,u);for(const w in this.touches){const S=x[w];(!S||S.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(a,u,g){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const x=!this.aborted&&this.centroid;if(this.reset(),x)return x}}}class Dp{constructor(a){this.singleTap=new t_(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(a,u,g){this.singleTap.touchstart(a,u,g)}touchmove(a,u,g){this.singleTap.touchmove(a,u,g)}touchend(a,u,g){const x=this.singleTap.touchend(a,u,g);if(x){const w=a.timeStamp-this.lastTime<500,S=!this.lastTap||this.lastTap.dist(x)<30;if(w&&S||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=x,this.count===this.numTaps)return this.reset(),x}}}class r_{constructor(){this._zoomIn=new Dp({numTouches:1,numTaps:2}),this._zoomOut=new Dp({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,u,g){this._zoomIn.touchstart(a,u,g),this._zoomOut.touchstart(a,u,g)}touchmove(a,u,g){this._zoomIn.touchmove(a,u,g),this._zoomOut.touchmove(a,u,g)}touchend(a,u,g){const x=this._zoomIn.touchend(a,u,g),w=this._zoomOut.touchend(a,u,g);return x?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:S=>S.easeTo({duration:300,zoom:S.getZoom()+1,around:S.unproject(x)},{originalEvent:a})}):w?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:S=>S.easeTo({duration:300,zoom:S.getZoom()-1,around:S.unproject(w)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Lp={0:1,2:2};class Op{constructor(a){this.reset(),this._clickTolerance=a.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(a,u){return!1}_move(a,u){return{}}mousedown(a,u){if(this._lastPoint)return;const g=ve(a);this._correctButton(a,g)&&(this._lastPoint=u,this._eventButton=g)}mousemoveWindow(a,u){const g=this._lastPoint;if(g){if(a.preventDefault(),this._eventButton!=null&&function(x,w){const S=Lp[w];return x.buttons===void 0||(x.buttons&S)!==S}(a,this._eventButton))this.reset();else if(this._moved||!(u.dist(g)<this._clickTolerance))return this._moved=!0,this._lastPoint=u,this._move(g,u)}}mouseupWindow(a){this._lastPoint&&ve(a)===this._eventButton&&(this._moved&&re(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gg extends Op{mousedown(a,u){super.mousedown(a,u),this._lastPoint&&(this._active=!0)}_correctButton(a,u){return u===0&&!a.ctrlKey}_move(a,u){return{around:u,panDelta:u.sub(a)}}}class Kg extends Op{_correctButton(a,u){return u===0&&a.ctrlKey||u===2}_move(a,u){const g=.8*(u.x-a.x);if(g)return this._active=!0,{bearingDelta:g}}contextmenu(a){a.preventDefault()}}class Wg extends Op{_correctButton(a,u){return u===0&&a.ctrlKey||u===2}_move(a,u){const g=-.5*(u.y-a.y);if(g)return this._active=!0,{pitchDelta:g}}contextmenu(a){a.preventDefault()}}class nB{constructor(a,u){this._map=a,this._el=a.getCanvasContainer(),this._minTouches=1,this._clickTolerance=u.clickTolerance||1,this.reset(),o.aJ(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}touchstart(a,u,g){return this._calculateTransform(a,u,g)}touchmove(a,u,g){if(this._active&&!(g.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(g.length===1&&!o.dq())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return a.cancelable&&a.preventDefault(),this._calculateTransform(a,u,g)}}touchend(a,u,g){this._calculateTransform(a,u,g),this._active&&g.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,u,g){g.length>0&&(this._active=!0);const x=Du(g,u),w=new o.P(0,0),S=new o.P(0,0);let k=0;for(const N in x){const Q=x[N],W=this._touches[N];W&&(w._add(Q),S._add(Q.sub(W)),k++,x[N]=Q)}if(this._touches=x,k<this._minTouches||!S.mag())return;const O=S.div(k);return this._sum._add(O),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(k),panDelta:O}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=$("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class qg{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(a){}_move(a,u,g){return{}}touchstart(a,u,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([u[0],u[1]]))}touchmove(a,u,g){const x=this._firstTwoTouches;if(!x)return;a.preventDefault();const[w,S]=x,k=Up(g,u,w),O=Up(g,u,S);if(!k||!O)return;const N=this._aroundCenter?null:k.add(O).div(2);return this._move([k,O],N,a)}touchend(a,u,g){if(!this._firstTwoTouches)return;const[x,w]=this._firstTwoTouches,S=Up(g,u,x),k=Up(g,u,w);S&&k||(this._active&&re(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Up(m,a,u){for(let g=0;g<m.length;g++)if(m[g].identifier===u)return a[g]}function n_(m,a){return Math.log(m/a)/Math.LN2}class iB extends qg{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,u){const g=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(n_(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:n_(this._distance,g),pinchAround:u}}}function i_(m,a){return 180*m.angleWith(a)/Math.PI}class oB extends qg{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,u){const g=this._vector;if(this._vector=a[0].sub(a[1]),g&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:i_(this._vector,g),pinchAround:u}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const u=25/(Math.PI*this._minDiameter)*360,g=this._startVector;if(!g)return!1;const x=i_(a,g);return Math.abs(x)<u}}function Xg(m){return Math.abs(m.y)>Math.abs(m.x)}class sB extends qg{constructor(a){super(),this._map=a}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(a){this._lastPoints=a,Xg(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,u,g){const x=this._lastPoints;if(!x)return;const w=a[0].sub(x[0]),S=a[1].sub(x[1]);return this._map._cooperativeGestures&&!o.dq()&&g.touches.length<3||(this._valid=this.gestureBeginsVertically(w,S,g.timeStamp),!this._valid)?void 0:(this._lastPoints=a,this._active=!0,{pitchDelta:(w.y+S.y)/2*-.5})}gestureBeginsVertically(a,u,g){if(this._valid!==void 0)return this._valid;const x=a.mag()>=2,w=u.mag()>=2;if(!x&&!w)return;if(!x||!w)return this._firstMove==null&&(this._firstMove=g),g-this._firstMove<100&&void 0;const S=a.y>0==u.y>0;return Xg(a)&&Xg(u)&&S}}const aB={panStep:100,bearingStep:15,pitchStep:10};class lB{constructor(){const a=aB;this._panStep=a.panStep,this._bearingStep=a.bearingStep,this._pitchStep=a.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let u=0,g=0,x=0,w=0,S=0;switch(a.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:a.shiftKey?g=-1:(a.preventDefault(),w=-1);break;case 39:a.shiftKey?g=1:(a.preventDefault(),w=1);break;case 38:a.shiftKey?x=1:(a.preventDefault(),S=-1);break;case 40:a.shiftKey?x=-1:(a.preventDefault(),S=1);break;default:return}return this._rotationDisabled&&(g=0,x=0),{cameraAnimation:k=>{const O=k.getZoom();k.easeTo({duration:300,easeId:"keyboardHandler",easing:cB,zoom:u?Math.round(O)+u*(a.shiftKey?2:1):O,bearing:k.getBearing()+g*this._bearingStep,pitch:k.getPitch()+x*this._pitchStep,offset:[-w*this._panStep,-S*this._panStep],center:k.getCenter()},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function cB(m){return m*(2-m)}const o_=4.000244140625,aP=1/450;class lP{constructor(a,u){this._map=a,this._el=a.getCanvasContainer(),this._handler=u,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=aP,o.aJ(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(a){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(a.ctrlKey||a.metaKey||this.isZooming()||o.dq()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let u=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const g=o.q.now(),x=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,u!==0&&u%o_==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":x>400?(this._type=null,this._lastValue=u,this._timeout=window.setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(x*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),a.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=a,this._delta-=u,this._active||this._start(a)),a.preventDefault()}_onTimeout(a){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(a)}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=de(this._el,a);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:u,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._map.transform;this._type==="wheel"&&a.projection.wrap&&(a._center.lng>=180||a._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const u=()=>a._terrainEnabled()&&this._aroundCoord?a.computeZoomRelativeTo(this._aroundCoord):a.zoom;if(this._delta!==0){const N=this._type==="wheel"&&Math.abs(this._delta)>o_?this._wheelZoomRate:this._defaultZoomRate;let Q=2/(1+Math.exp(-Math.abs(this._delta*N)));this._delta<0&&Q!==0&&(Q=1/Q);const W=u(),X=Math.pow(2,W),Y=typeof this._targetZoom=="number"?a.zoomScale(this._targetZoom):X;this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,a.scaleZoom(Y*Q))),this._type==="wheel"&&(this._startZoom=W,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const g=typeof this._targetZoom=="number"?this._targetZoom:u(),x=this._startZoom,w=this._easing;let S,k=!1;if(this._type==="wheel"&&x&&w){const N=Math.min((o.q.now()-this._lastWheelEventTime)/200,1),Q=w(N);S=o.aa(x,g,Q),N<1?this._frameId||(this._frameId=!0):k=!0}else S=g,k=!0;this._active=!0,k&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let O=S-u();return O*this._lastDelta<0&&(O=0),{noInertia:!0,needsRenderFrame:!k,zoomDelta:O,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let u=o.dr;if(this._prevEase){const g=this._prevEase,x=(o.q.now()-g.start)/g.duration,w=g.easing(x+.01)-g.easing(x),S=.27/Math.sqrt(w*w+1e-4)*.01,k=Math.sqrt(.0729-S*S);u=o.dp(S,k,.25,1)}return this._prevEase={start:o.q.now(),duration:a,easing:u},u}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=$("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class Ki{constructor(a,u){this._clickZoom=a,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class uB{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(a,u){return a.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:g.getZoom()+(a.shiftKey?-1:1),around:g.unproject(u)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class cP{constructor(){this._tap=new Dp({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(a,u,g){this._swipePoint||(this._tapTime&&a.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?g.length>0&&(this._swipePoint=u[0],this._swipeTouch=g[0].identifier):this._tap.touchstart(a,u,g))}touchmove(a,u,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const x=u[0],w=x.y-this._swipePoint.y;return this._swipePoint=x,a.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(a,u,g)}touchend(a,u,g){this._tapTime?this._swipePoint&&g.length===0&&this.reset():this._tap.touchend(a,u,g)&&(this._tapTime=a.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class uP{constructor(a,u,g){this._el=a,this._mousePan=u,this._touchPan=g}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class zp{constructor(a,u,g){this._pitchWithRotate=a.pitchWithRotate,this._mouseRotate=u,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class hB{constructor(a,u,g,x){this._el=a,this._touchZoom=u,this._touchRotate=g,this._tapDragZoom=x,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ld=m=>m.zoom||m.drag||m.pitch||m.rotate;class Zg extends o.x{}class Lu{constructor(){this.constants=[1,1,.01],this.radius=0}setup(a,u){const g=o.a6.vec3.sub([],u,a);this.radius=o.a6.vec3.length(g[2]<0?o.a6.vec3.div([],g,this.constants):[g[0],g[1],0])}projectRay(a){o.a6.vec3.div(a,a,this.constants),o.a6.vec3.normalize(a,a),o.a6.vec3.mul(a,a,this.constants);const u=o.a6.vec3.scale([],a,this.radius);if(u[2]>0){const g=o.a6.vec3.scale([],[0,0,1],o.a6.vec3.dot(u,[0,0,1])),x=o.a6.vec3.scale([],o.a6.vec3.normalize([],[u[0],u[1],0]),this.radius),w=o.a6.vec3.add([],u,o.a6.vec3.scale([],o.a6.vec3.sub([],o.a6.vec3.add([],x,g),u),2));u[0]=w[0],u[1]=w[1]}return u}}function wA(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}class Zs{constructor(a,u){this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ch(a),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Lu,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(u),o.aJ(["handleEvent","handleWindowEvent"],this);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[window,"blur",void 0]];for(const[x,w,S]of this._listeners){const k=x===document?this.handleWindowEvent:this.handleEvent;x.addEventListener(w,k,S)}}destroy(){for(const[a,u,g]of this._listeners){const x=a===document?this.handleWindowEvent:this.handleEvent;a.removeEventListener(u,x,g)}}_addDefaultHandlers(a){const u=this._map,g=u.getCanvasContainer();this._add("mapEvent",new $v(u,a));const x=u.boxZoom=new Dd(u,a);this._add("boxZoom",x);const w=new r_,S=new uB;u.doubleClickZoom=new Ki(S,w),this._add("tapZoom",w),this._add("clickZoom",S);const k=new cP;this._add("tapDragZoom",k);const O=u.touchPitch=new sB(u);this._add("touchPitch",O);const N=new Kg(a),Q=new Wg(a);u.dragRotate=new zp(a,N,Q),this._add("mouseRotate",N,["mousePitch"]),this._add("mousePitch",Q,["mouseRotate"]);const W=new Gg(a),X=new nB(u,a);u.dragPan=new uP(g,W,X),this._add("mousePan",W),this._add("touchPan",X,["touchZoom","touchRotate"]);const Y=new oB,ae=new iB;u.touchZoomRotate=new hB(g,ae,Y,k),this._add("touchRotate",Y,["touchPan","touchZoom"]),this._add("touchZoom",ae,["touchPan","touchRotate"]),this._add("blockableMapEvent",new e_(u));const le=u.scrollZoom=new lP(u,this);this._add("scrollZoom",le,["mousePan"]);const ce=u.keyboard=new lB;this._add("keyboard",ce);for(const Ae of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])a.interactive&&a[Ae]&&u[Ae].enable(a[Ae])}_add(a,u,g){this._handlers.push({handlerName:a,handler:u,allowed:g}),this._handlersById[a]=u}stop(a){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ld(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(a,u,g){for(const x in a)if(x!==g&&(!u||u.indexOf(x)<0))return!0;return!1}handleWindowEvent(a){this.handleEvent(a,`${a.type}Window`)}_getMapTouches(a){const u=[];for(const g of a)this._el.contains(g.target)&&u.push(g);return u}handleEvent(a,u){this._updatingCamera=!0;const g=a.type==="renderFrame",x=g?void 0:a,w={needsRenderFrame:!1},S={},k={},O=a.touches?this._getMapTouches(a.touches):void 0,N=O?_e(this._el,O):g?void 0:de(this._el,a);for(const{handlerName:X,handler:Y,allowed:ae}of this._handlers){if(!Y.isEnabled())continue;let le;this._blockedByActive(k,ae,X)?Y.reset():Y[u||a.type]&&(le=Y[u||a.type](a,N,O),this.mergeHandlerResult(w,S,le,X,x),le&&le.needsRenderFrame&&this._triggerRenderFrame()),(le||Y.isActive())&&(k[X]=Y)}const Q={};for(const X in this._previousActiveHandlers)k[X]||(Q[X]=x);this._previousActiveHandlers=k,(Object.keys(Q).length||wA(w))&&(this._changes.push([w,S,Q]),this._triggerRenderFrame()),(Object.keys(k).length||wA(w))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:W}=w;W&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],W(this._map))}mergeHandlerResult(a,u,g,x,w){if(!g)return;o.l(a,g);const S={handlerName:x,originalEvent:g.originalEvent||w};g.zoomDelta!==void 0&&(u.zoom=S),g.panDelta!==void 0&&(u.drag=S),g.pitchDelta!==void 0&&(u.pitch=S),g.bearingDelta!==void 0&&(u.rotate=S)}_applyChanges(){const a={},u={},g={};for(const[x,w,S]of this._changes)x.panDelta&&(a.panDelta=(a.panDelta||new o.P(0,0))._add(x.panDelta)),x.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+x.zoomDelta),x.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+x.bearingDelta),x.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+x.pitchDelta),x.around!==void 0&&(a.around=x.around),x.aroundCoord!==void 0&&(a.aroundCoord=x.aroundCoord),x.pinchAround!==void 0&&(a.pinchAround=x.pinchAround),x.noInertia&&(a.noInertia=x.noInertia),o.l(u,w),o.l(g,S);this._updateMapTransform(a,u,g),this._changes=[]}_updateMapTransform(a,u,g){const x=this._map,w=x.transform,S=Be=>[Be.x,Be.y,Be.z];if((Be=>{const Te=this._eventsInProgress.drag;return Te&&!this._handlersById[Te.handlerName].isActive()})()&&!wA(a)){const Be=w.zoom;w.cameraElevationReference="sea",this._originalZoom!=null&&w._orthographicProjectionAtLowPitch&&w.projection.name!=="globe"&&w.pitch===0?(w.cameraElevationReference="ground",w.zoom=this._originalZoom):(w.recenterOnTerrain(),w.cameraElevationReference="ground"),Be!==w.zoom&&this._map._update(!0)}if(w._isCameraConstrained&&x._stop(!0),!wA(a))return void this._fireEvents(u,g,!0);let{panDelta:k,zoomDelta:O,bearingDelta:N,pitchDelta:Q,around:W,aroundCoord:X,pinchAround:Y}=a;w._isCameraConstrained&&(O>0&&(O=0),w._isCameraConstrained=!1),Y!==void 0&&(W=Y),(O||(Be=>u[Be]&&!this._eventsInProgress[Be])("drag"))&&W&&(this._dragOrigin=S(w.pointCoordinate3D(W)),this._originalZoom=w.zoom,this._trackingEllipsoid.setup(w._camera.position,this._dragOrigin)),w.cameraElevationReference="sea",x._stop(!0),W=W||x.transform.centerPoint,N&&(w.bearing+=N),Q&&(w.pitch+=Q),w._updateCameraState();const ae=[0,0,0];if(k)if(w.projection.name==="mercator"){const Be=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(W).dir),Te=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(W.sub(k)).dir);ae[0]=Te[0]-Be[0],ae[1]=Te[1]-Be[1]}else{const Be=w.pointCoordinate(W);if(w.projection.name==="globe"){k=k.rotate(-w.angle);const Te=w._pixelsPerMercatorPixel/w.worldSize;ae[0]=-k.x*o.ds(o.aM(Be.y))*Te,ae[1]=-k.y*o.ds(w.center.lat)*Te}else{const Te=w.pointCoordinate(W.sub(k));Be&&Te&&(ae[0]=Te.x-Be.x,ae[1]=Te.y-Be.y)}}const le=w.zoom,ce=[0,0,0];if(O){const Be=S(X||w.pointCoordinate3D(W)),Te={dir:o.a6.vec3.normalize([],o.a6.vec3.sub([],Be,w._camera.position))};if(Te.dir[2]<0){const be=w.zoomDeltaToMovement(Be,O);o.a6.vec3.scale(ce,Te.dir,be)}}const Ae=o.a6.vec3.add(ae,ae,ce);w._translateCameraConstrained(Ae),O&&Math.abs(w.zoom-le)>1e-4&&w.recenterOnTerrain(),w.cameraElevationReference="ground",this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(u,g,!0)}_fireEvents(a,u,g){const x=Ld(this._eventsInProgress),w=Ld(a),S={};for(const Q in a){const{originalEvent:W}=a[Q];this._eventsInProgress[Q]||(S[`${Q}start`]=W),this._eventsInProgress[Q]=a[Q]}!x&&w&&this._fireEvent("movestart",w.originalEvent);for(const Q in S)this._fireEvent(Q,S[Q]);w&&this._fireEvent("move",w.originalEvent);for(const Q in a){const{originalEvent:W}=a[Q];this._fireEvent(Q,W)}const k={};let O;for(const Q in this._eventsInProgress){const{handlerName:W,originalEvent:X}=this._eventsInProgress[Q];this._handlersById[W].isActive()||(delete this._eventsInProgress[Q],O=u[W]||X,k[`${Q}end`]=O)}for(const Q in k)this._fireEvent(Q,k[Q]);const N=Ld(this._eventsInProgress);if(g&&(x||w)&&!N){this._updatingCamera=!0;const Q=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),W=X=>X!==0&&-this._bearingSnap<X&&X<this._bearingSnap;Q?(W(Q.bearing||this._map.getBearing())&&(Q.bearing=0),this._map.easeTo(Q,{originalEvent:O})):(this._map.fire(new o.x("moveend",{originalEvent:O})),W(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(a,u){this._map.fire(new o.x(a,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{this._frameId=void 0,this.handleEvent(new Zg("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const kc="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class s_ extends o.E{constructor(a,u){super(),this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=u.bearingSnap,this._respectPrefersReducedMotion=u.respectPrefersReducedMotion!==!1,o.aJ(["_renderFrameCallback"],this)}getCenter(){return new o.bK(this.transform.center.lng,this.transform.center.lat)}setCenter(a,u){return this.jumpTo({center:a},u)}panBy(a,u,g){return a=o.P.convert(a).mult(-1),this.panTo(this.transform.center,o.l({offset:a},u),g)}panTo(a,u,g){return this.easeTo(o.l({center:a},u),g)}getZoom(){return this.transform.zoom}setZoom(a,u){return this.jumpTo({zoom:a},u),this}zoomTo(a,u,g){return this.easeTo(o.l({zoom:a},u),g)}zoomIn(a,u){return this.zoomTo(this.getZoom()+1,a,u),this}zoomOut(a,u){return this.zoomTo(this.getZoom()-1,a,u),this}getBearing(){return this.transform.bearing}setBearing(a,u){return this.jumpTo({bearing:a},u),this}getPadding(){return this.transform.padding}setPadding(a,u){return this.jumpTo({padding:a},u),this}rotateTo(a,u,g){return this.easeTo(o.l({bearing:a},u),g)}resetNorth(a,u){return this.rotateTo(0,o.l({duration:1e3},a),u),this}resetNorthPitch(a,u){return this.easeTo(o.l({bearing:0,pitch:0,duration:1e3},a),u),this}snapToNorth(a,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,u):this}getPitch(){return this.transform.pitch}setPitch(a,u){return this.jumpTo({pitch:a},u),this}cameraForBounds(a,u){a=o.as.convert(a);const g=u&&u.bearing||0,x=u&&u.pitch||0,w=a.getNorthWest(),S=a.getSouthEast();return this._cameraForBounds(this.transform,w,S,g,x,u)}_extendPadding(a){const u={top:0,right:0,bottom:0,left:0};return a==null?o.l({},u,this.transform.padding):typeof a=="number"?{top:a,bottom:a,right:a,left:a}:o.l({},u,a)}_extendCameraOptions(a){return(a=o.l({offset:[0,0],maxZoom:this.transform.maxZoom},a)).padding=this._extendPadding(a.padding),a}_minimumAABBFrustumDistance(a,u){const g=u.max[0]-u.min[0],x=u.max[1]-u.min[1];return g/x>a.aspect?g/(2*Math.tan(.5*a.fovX)*a.aspect):x/(2*Math.tan(.5*a.fovY)*a.aspect)}_cameraForBoundsOnGlobe(a,u,g,x,w,S){const k=a.clone(),O=this._extendCameraOptions(S);k.bearing=x,k.pitch=w;const N=o.bK.convert(u),Q=o.bK.convert(g),W=.5*(N.lat+Q.lat),X=.5*(N.lng+Q.lng),Y=o.dt(W,X),ae=o.a6.vec3.normalize([],Y),le=o.a6.vec3.normalize([],o.a6.vec3.cross([],ae,[0,1,0])),ce=o.a6.vec3.cross([],le,ae),Ae=[le[0],le[1],le[2],0,ce[0],ce[1],ce[2],0,ae[0],ae[1],ae[2],0,0,0,0,1],Be=[Y,o.dt(N.lat,N.lng),o.dt(Q.lat,N.lng),o.dt(Q.lat,Q.lng),o.dt(N.lat,Q.lng),o.dt(W,N.lng),o.dt(W,Q.lng),o.dt(N.lat,X),o.dt(Q.lat,X)];let Te=o.c9.fromPoints(Be.map(bt=>[o.a6.vec3.dot(le,bt),o.a6.vec3.dot(ce,bt),o.a6.vec3.dot(ae,bt)]));const be=o.a6.vec3.transformMat4([],Te.center,Ae);o.a6.vec3.squaredLength(be)===0&&o.a6.vec3.set(be,0,0,1),o.a6.vec3.normalize(be,be),o.a6.vec3.scale(be,be,o.aq),k.center=o.du(be);const Me=k.getWorldToCameraMatrix(),Fe=o.a6.mat4.invert(new Float64Array(16),Me);Te=o.c9.applyTransform(Te,o.a6.mat4.multiply([],Me,Ae));const ze=this._extendAABB(Te,k,O,x);if(!ze)return void o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Te=ze,o.a6.vec3.transformMat4(be,be,Me);const Le=.5*(Te.max[2]-Te.min[2]),Ve=this._minimumAABBFrustumDistance(k,Te),Xe=o.a6.vec3.scale([],[0,0,1],Le),je=o.a6.vec3.add(Xe,be,Xe),He=Ve+(k.pitch===0?0:o.a6.vec3.distance(be,je)),nt=k.globeCenterInViewSpace,mt=o.a6.vec3.sub([],be,[nt[0],nt[1],nt[2]]);o.a6.vec3.normalize(mt,mt),o.a6.vec3.scale(mt,mt,He);const Et=o.a6.vec3.add([],be,mt);o.a6.vec3.transformMat4(Et,Et,Fe);const pt=o.dw/o.aq,kt=o.a6.vec3.length(Et),it=o.bD(Math.max(kt*pt-o.dw,Number.EPSILON),0),wt=Math.min(k.zoomFromMercatorZAdjusted(it),O.maxZoom);return wt>.5*(o.c2+o.bU)?(k.setProjection({name:"mercator"}),k.zoom=wt,this._cameraForBounds(k,u,g,x,w,S)):{center:k.center,zoom:wt,bearing:x,pitch:w}}_extendAABB(a,u,g,x){const w=.5*((g.padding.left||0)+(g.padding.right||0)),S=.5*((g.padding.top||0)+(g.padding.bottom||0)),k=S,O=w,N=w,Q=S,W=u.width-(O+N),X=u.height-(k+Q),Y=o.a6.vec3.sub([],a.max,a.min),ae=Math.min(W/Y[0],X/Y[1]),le=Math.min(u.scaleZoom(u.scale*ae),g.maxZoom);if(isNaN(le))return null;const ce=u.scale/u.zoomScale(le),Ae=new o.c9([a.min[0]-O*ce,a.min[1]-Q*ce,a.min[2]],[a.max[0]+N*ce,a.max[1]+k*ce,a.max[2]]),Be=(typeof g.offset.x=="number"&&typeof g.offset.y=="number"?new o.P(g.offset.x,g.offset.y):o.P.convert(g.offset)).rotate(-o.bB(x));return Ae.center[0]-=Be.x*ce,Ae.center[1]+=Be.y*ce,Ae}queryTerrainElevation(a,u){const g=this.transform.elevation;return g?(u=o.l({},{exaggerated:!0},u),g.getAtPoint(o.a5.fromLngLat(a),null,u.exaggerated)):null}_cameraForBounds(a,u,g,x,w,S){if(a.projection.name==="globe")return this._cameraForBoundsOnGlobe(a,u,g,x,w,S);const k=a.clone(),O=this._extendCameraOptions(S);k.bearing=x,k.pitch=w;const N=o.bK.convert(u),Q=o.bK.convert(g),W=new o.bK(N.lng,Q.lat),X=new o.bK(Q.lng,N.lat),Y=k.project(N),ae=k.project(Q),le=this.queryTerrainElevation(N),ce=this.queryTerrainElevation(Q),Ae=this.queryTerrainElevation(W),Be=this.queryTerrainElevation(X),Te=[[Y.x,Y.y,Math.min(le||0,ce||0,Ae||0,Be||0)],[ae.x,ae.y,Math.max(le||0,ce||0,Ae||0,Be||0)]];let be=o.c9.fromPoints(Te);const Me=k.getWorldToCameraMatrix(),Fe=o.a6.mat4.invert(new Float64Array(16),Me);be=o.c9.applyTransform(be,Me);const ze=this._extendAABB(be,k,O,x);if(!ze)return void o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");be=ze;const Le=.5*o.a6.vec3.sub([],be.max,be.min)[2],Ve=this._minimumAABBFrustumDistance(k,be),Xe=[0,0,1,0];o.a6.vec4.transformMat4(Xe,Xe,Me),o.a6.vec4.normalize(Xe,Xe);const je=o.a6.vec3.scale([],Xe,Ve+Le),He=o.a6.vec3.add([],be.center,je);o.a6.vec3.transformMat4(be.center,be.center,Fe),o.a6.vec3.transformMat4(He,He,Fe);const nt=k.unproject(new o.P(be.center[0],be.center[1])),mt=o.dv(k.projection,nt),Et=Math.pow(2,mt),pt=Math.min(k._zoomFromMercatorZ(He[2]*k.pixelsPerMeter*Et/k.worldSize),O.maxZoom);return k.mercatorFromTransition&&pt<.5*(o.c2+o.bU)?(k.setProjection({name:"globe"}),k.zoom=pt,this._cameraForBounds(k,u,g,x,w,S)):{center:nt,zoom:pt,bearing:x,pitch:w}}fitBounds(a,u,g){const x=this.cameraForBounds(a,u);return this._fitInternal(x,u,g)}fitScreenCoordinates(a,u,g,x,w){const S=o.P.convert(a),k=o.P.convert(u),O=new o.P(Math.min(S.x,k.x),Math.min(S.y,k.y)),N=new o.P(Math.max(S.x,k.x),Math.max(S.y,k.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(S,k))return this;const Q=this.transform.pointLocation3D(O),W=this.transform.pointLocation3D(N),X=this.transform.pointLocation3D(new o.P(O.x,N.y)),Y=this.transform.pointLocation3D(new o.P(N.x,O.y)),ae=[Math.min(Q.lng,W.lng,X.lng,Y.lng),Math.min(Q.lat,W.lat,X.lat,Y.lat)],le=[Math.max(Q.lng,W.lng,X.lng,Y.lng),Math.max(Q.lat,W.lat,X.lat,Y.lat)],ce=x&&x.pitch?x.pitch:this.getPitch(),Ae=this._cameraForBounds(this.transform,ae,le,g,ce,x);return this._fitInternal(Ae,x,w)}_fitInternal(a,u,g){return a?(u=o.l(a,u)).linear?this.easeTo(u,g):this.flyTo(u,g):this}jumpTo(a,u){this.stop();const g=a.preloadOnly?this.transform.clone():this.transform;let x=!1,w=!1,S=!1;"zoom"in a&&g.zoom!==+a.zoom&&(x=!0,g.zoom=+a.zoom),a.center!==void 0&&(g.center=o.bK.convert(a.center)),"bearing"in a&&g.bearing!==+a.bearing&&(w=!0,g.bearing=+a.bearing),"pitch"in a&&g.pitch!==+a.pitch&&(S=!0,g.pitch=+a.pitch);const k=typeof a.padding=="number"?this._extendPadding(a.padding):a.padding;if(a.padding!=null&&!g.isPaddingEqual(k))if(a.retainPadding===!1){const O=g.clone();O.padding=k,g.setLocationAtPoint(g.center,O.centerPoint)}else g.padding=k;return a.preloadOnly?(this._preloadTiles(g),this):(this.fire(new o.x("movestart",u)).fire(new o.x("move",u)),x&&this.fire(new o.x("zoomstart",u)).fire(new o.x("zoom",u)).fire(new o.x("zoomend",u)),w&&this.fire(new o.x("rotatestart",u)).fire(new o.x("rotate",u)).fire(new o.x("rotateend",u)),S&&this.fire(new o.x("pitchstart",u)).fire(new o.x("pitch",u)).fire(new o.x("pitchend",u)),this.fire(new o.x("moveend",u)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||o.w(kc),this.transform.getFreeCameraOptions()}setFreeCameraOptions(a,u){const g=this.transform;if(!g.projection.supportsFreeCamera)return o.w(kc),this;this.stop();const x=g.zoom,w=g.pitch,S=g.bearing;g.setFreeCameraOptions(a);const k=x!==g.zoom,O=w!==g.pitch,N=S!==g.bearing;return this.fire(new o.x("movestart",u)).fire(new o.x("move",u)),k&&this.fire(new o.x("zoomstart",u)).fire(new o.x("zoom",u)).fire(new o.x("zoomend",u)),N&&this.fire(new o.x("rotatestart",u)).fire(new o.x("rotate",u)).fire(new o.x("rotateend",u)),O&&this.fire(new o.x("pitchstart",u)).fire(new o.x("pitch",u)).fire(new o.x("pitchend",u)),this.fire(new o.x("moveend",u)),this}easeTo(a,u){this._stop(!1,a.easeId),((a=o.l({offset:[0,0],duration:500,easing:o.dr},a)).animate===!1||this._prefersReducedMotion(a))&&(a.duration=0);const g=this.transform,x=this.getZoom(),w=this.getBearing(),S=this.getPitch(),k=this.getPadding(),O="zoom"in a?+a.zoom:x,N="bearing"in a?this._normalizeBearing(a.bearing,w):w,Q="pitch"in a?+a.pitch:S,W=this._extendPadding(a.padding),X=o.P.convert(a.offset);let Y,ae,le;if(g.projection.name==="globe"){const Xe=o.a5.fromLngLat(g.center),je=X.rotate(-g.angle);Xe.x+=je.x/g.worldSize,Xe.y+=je.y/g.worldSize;const He=Xe.toLngLat(),nt=o.bK.convert(a.center||He);this._normalizeCenter(nt),Y=g.centerPoint.add(je),ae=new o.P(Xe.x,Xe.y).mult(g.worldSize),le=new o.P(o.am(nt.lng),o.at(nt.lat)).mult(g.worldSize).sub(ae)}else{Y=g.centerPoint.add(X);const Xe=g.pointLocation(Y),je=o.bK.convert(a.center||Xe);this._normalizeCenter(je),ae=g.project(Xe),le=g.project(je).sub(ae)}const ce=g.zoomScale(O-x);let Ae,Be;a.around&&(Ae=o.bK.convert(a.around),Be=g.locationPoint(Ae));const Te=this._zooming||O!==x,be=this._rotating||w!==N,Me=this._pitching||Q!==S,Fe=!g.isPaddingEqual(W),ze=a.retainPadding===!1?g.clone():g,Le=Xe=>je=>{if(Te&&(Xe.zoom=o.aa(x,O,je)),be&&(Xe.bearing=o.aa(w,N,je)),Me&&(Xe.pitch=o.aa(S,Q,je)),Fe&&(ze.interpolatePadding(k,W,je),Y=ze.centerPoint.add(X)),Ae)Xe.setLocationAtPoint(Ae,Be);else{const He=Xe.zoomScale(Xe.zoom-x),nt=O>x?Math.min(2,ce):Math.max(.5,ce),mt=Math.pow(nt,1-je),Et=Xe.unproject(ae.add(le.mult(je*mt)).mult(He));Xe.setLocationAtPoint(Xe.renderWorldCopies?Et.wrap():Et,Y)}return a.preloadOnly||this._fireMoveEvents(u),Xe};if(a.preloadOnly){const Xe=this._emulate(Le,a.duration,g);return this._preloadTiles(Xe),this}const Ve={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Te,this._rotating=be,this._pitching=Me,this._padding=Fe,this._easeId=a.easeId,this._prepareEase(u,a.noMoveStart,Ve),this._ease(Le(g),Xe=>{g.cameraElevationReference==="sea"&&g.recenterOnTerrain(),this._afterEase(u,Xe)},a),this}_prepareEase(a,u,g={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),u||g.moving||this.fire(new o.x("movestart",a)),this._zooming&&!g.zooming&&this.fire(new o.x("zoomstart",a)),this._rotating&&!g.rotating&&this.fire(new o.x("rotatestart",a)),this._pitching&&!g.pitching&&this.fire(new o.x("pitchstart",a))}_fireMoveEvents(a){this.fire(new o.x("move",a)),this._zooming&&this.fire(new o.x("zoom",a)),this._rotating&&this.fire(new o.x("rotate",a)),this._pitching&&this.fire(new o.x("pitch",a))}_afterEase(a,u){if(this._easeId&&u&&this._easeId===u)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const g=this._zooming,x=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new o.x("zoomend",a)),x&&this.fire(new o.x("rotateend",a)),w&&this.fire(new o.x("pitchend",a)),this.fire(new o.x("moveend",a))}flyTo(a,u){if(this._prefersReducedMotion(a)){const bt=o.ar(a,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(bt,u)}this.stop(),a=o.l({offset:[0,0],speed:1.2,curve:1.42,easing:o.dr},a);const g=this.transform,x=this.getZoom(),w=this.getBearing(),S=this.getPitch(),k=this.getPadding(),O="zoom"in a?o.ap(+a.zoom,g.minZoom,g.maxZoom):x,N="bearing"in a?this._normalizeBearing(a.bearing,w):w,Q="pitch"in a?+a.pitch:S,W=this._extendPadding(a.padding),X=g.zoomScale(O-x),Y=o.P.convert(a.offset);let ae=g.centerPoint.add(Y);const le=g.pointLocation(ae),ce=o.bK.convert(a.center||le);this._normalizeCenter(ce);const Ae=g.project(le),Be=g.project(ce).sub(Ae);let Te=a.curve;const be=Math.max(g.width,g.height),Me=be/X,Fe=Be.mag();if("minZoom"in a){const bt=o.ap(Math.min(a.minZoom,x,O),g.minZoom,g.maxZoom),Dt=be/g.zoomScale(bt-x);Te=Math.sqrt(Dt/Fe*2)}const ze=Te*Te;function Le(bt){const Dt=(Me*Me-be*be+(bt?-1:1)*ze*ze*Fe*Fe)/(2*(bt?Me:be)*ze*Fe);return Math.log(Math.sqrt(Dt*Dt+1)-Dt)}function Ve(bt){return(Math.exp(bt)-Math.exp(-bt))/2}function Xe(bt){return(Math.exp(bt)+Math.exp(-bt))/2}const je=Le(0);let He=function(bt){return Xe(je)/Xe(je+Te*bt)},nt=function(bt){return be*((Xe(je)*(Ve(Dt=je+Te*bt)/Xe(Dt))-Ve(je))/ze)/Fe;var Dt},mt=(Le(1)-je)/Te;if(Math.abs(Fe)<1e-6||!isFinite(mt)){if(Math.abs(be-Me)<1e-6)return this.easeTo(a,u);const bt=Me<be?-1:1;mt=Math.abs(Math.log(Me/be))/Te,nt=function(){return 0},He=function(Dt){return Math.exp(bt*Te*Dt)}}a.duration="duration"in a?+a.duration:1e3*mt/("screenSpeed"in a?+a.screenSpeed/Te:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0);const Et=w!==N,pt=Q!==S,kt=!g.isPaddingEqual(W),it=a.retainPadding===!1?g.clone():g,wt=bt=>Dt=>{const Ut=Dt*mt,St=1/He(Ut);bt.zoom=Dt===1?O:x+bt.scaleZoom(St),Et&&(bt.bearing=o.aa(w,N,Dt)),pt&&(bt.pitch=o.aa(S,Q,Dt)),kt&&(it.interpolatePadding(k,W,Dt),ae=it.centerPoint.add(Y));const Ft=Dt===1?ce:bt.unproject(Ae.add(Be.mult(nt(Ut))).mult(St));return bt.setLocationAtPoint(bt.renderWorldCopies?Ft.wrap():Ft,ae),bt._updateCameraOnTerrain(),a.preloadOnly||this._fireMoveEvents(u),bt};if(a.preloadOnly){const bt=this._emulate(wt,a.duration,g);return this._preloadTiles(bt),this}return this._zooming=!0,this._rotating=Et,this._pitching=pt,this._padding=kt,this._prepareEase(u,!1),this._ease(wt(g),()=>this._afterEase(u),a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(a){}_cancelRenderFrame(a){}_stop(a,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const g=this._onEaseEnd;this._onEaseEnd=void 0,g.call(this,u)}if(!a){const g=this.handlers;g&&g.stop(!1)}return this}_ease(a,u,g){g.animate===!1||g.duration===0?(a(1),u()):(this._easeStart=o.q.now(),this._easeOptions=g,this._onEaseFrame=a,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const a=Math.min((o.q.now()-this._easeStart)/this._easeOptions.duration,1),u=this._onEaseFrame;u&&u(this._easeOptions.easing(a)),a<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(a,u){a=o.bA(a,-180,180);const g=Math.abs(a-u);return Math.abs(a-360-u)<g&&(a-=360),Math.abs(a+360-u)<g&&(a+=360),a}_normalizeCenter(a){const u=this.transform;if(u.maxBounds||u.projection.name!=="globe"&&!u.renderWorldCopies)return;const g=a.lng-u.center.lng;a.lng+=g>180?-360:g<-180?360:0}_prefersReducedMotion(a){return this._respectPrefersReducedMotion&&o.q.prefersReducedMotion&&!(a&&a.essential)}_emulate(a,u,g){const x=Math.ceil(15*u/1e3),w=[],S=a(g.clone());for(let k=0;k<=x;k++){const O=S(k/x);w.push(O.clone())}return w}_preloadTiles(a,u){}}class Yg{constructor(a={}){this.options=a,o.aJ(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(a){const u=this.options&&this.options.compact,g=a._getUIString("AttributionControl.ToggleAttribution");this._map=a,this._container=$("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=$("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",g);const x=$("span","mapboxgl-ctrl-icon",this._compactButton);return x.setAttribute("aria-hidden","true"),x.setAttribute("title",g),this._innerContainer=$("div","mapboxgl-ctrl-attrib-inner",this._container),u&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),u===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let a=this._editLink;a||(a=this._editLink=this._container.querySelector(".mapbox-improve-map"));const u=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.e.ACCESS_TOKEN}];if(a){const g=u.reduce((x,w,S)=>(w.value&&(x+=`${w.key}=${w.value}${S<u.length-1?"&":""}`),x),"?");a.href=`${o.e.FEEDBACK_URL}/${g}#${ku(this._map,!0)}`,a.rel="noopener nofollow"}}_updateData(a){!a||a.sourceDataType!=="metadata"&&a.sourceDataType!=="visibility"&&a.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let a=[];if(this._map.style.stylesheet){const x=this._map.style.stylesheet;this.styleOwner=x.owner,this.styleId=x.id}const u=this._map.style._mergedSourceCaches;for(const x in u){const w=u[x];if(w.used){const S=w.getSource();S.attribution&&a.indexOf(S.attribution)<0&&a.push(S.attribution)}}a.sort((x,w)=>x.length-w.length),a=a.filter((x,w)=>{for(let S=w+1;S<a.length;S++)if(a[S].indexOf(x)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=[...this.options.customAttribution,...a]:a.unshift(this.options.customAttribution));const g=a.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,a.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class a_{constructor(){o.aJ(["_updateLogo","_updateCompact"],this)}onAdd(a){this._map=a,this._container=$("div","mapboxgl-ctrl");const u=$("a","mapboxgl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://www.mapbox.com/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(a){a&&a.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const a=this._map.style._sourceCaches;if(Object.entries(a).length===0)return!0;for(const u in a){const g=a[u].getSource();if(g.hasOwnProperty("mapbox_logo")&&!g.mapbox_logo)return!1}return!0}_updateCompact(){const a=this._container.children;if(a.length){const u=a[0];this._map.getCanvasContainer().offsetWidth<250?u.classList.add("mapboxgl-compact"):u.classList.remove("mapboxgl-compact")}}}class AB{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const u=++this._id;return this._queue.push({callback:a,id:u,cancelled:!1}),u}remove(a){const u=this._currentlyRunning,g=u?this._queue.concat(u):this._queue;for(const x of g)if(x.id===a)return void(x.cancelled=!0)}run(a=0){const u=this._currentlyRunning=this._queue;this._queue=[];for(const g of u)if(!g.cancelled&&(g.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class Vp{constructor(a){this.jumpTo(a)}getValue(a){if(a<=this._startTime)return this._start;if(a>=this._endTime)return this._end;const u=o.cw((a-this._startTime)/(this._endTime-this._startTime));return this._start*(1-u)+this._end*u}isEasing(a){return a>=this._startTime&&a<=this._endTime}jumpTo(a){this._startTime=-1/0,this._endTime=-1/0,this._start=a,this._end=a}easeTo(a,u,g){this._start=this.getValue(u),this._end=a,this._startTime=u,this._endTime=u+g}}const hP={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class AP{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}class l_{constructor(a){this.map=a,this.interactionsByType=new Map,this.typeById=new Map,this.filters=new Map,this.handleType=this.handleType.bind(this)}add(a,u){if(this.typeById.has(a))throw new Error(`Interaction id "${a}" already exists.`);const{type:g,filter:x}=u;if(x){const S=o.M(x,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(S.result==="error")throw new Error(S.value.map(k=>`${k.key}: ${k.message}`).join(", "));this.filters.set(a,S.value)}const w=this.interactionsByType.get(g)||new Map;w.size===0&&(this.map.on(g,this.handleType),this.interactionsByType.set(g,w)),w.set(a,u),this.typeById.set(a,g)}remove(a){const u=this.typeById.get(a);if(!u)return;this.typeById.delete(a),this.filters.delete(a);const g=this.interactionsByType.get(u);g&&(g.delete(a),g.size===0&&this.map.off(u,this.handleType))}handleType(a){const u=a.features||this.map.queryRenderedFeatures(a.point);if(!u)return;const g=this.interactionsByType.get(a.type),x={zoom:0};for(const[w,S]of g){const k=this.filters.get(w),{handler:O,layers:N}=S;for(const Q of u)if((!N||N.includes(Q.layer.id))&&(!k||k.evaluate(x,Q))&&O({id:w,feature:Q,interaction:S})!==!1)break}}}const c_={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0},Np={showCompass:!0,showZoom:!0,visualizePitch:!1};class Od{constructor(a,u,g=!1){this._clickTolerance=10,this.element=u,this.mouseRotate=new Kg({clickTolerance:a.dragRotate._mouseRotate._clickTolerance}),this.map=a,g&&(this.mousePitch=new Wg({clickTolerance:a.dragRotate._mousePitch._clickTolerance})),o.aJ(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),u.addEventListener("mousedown",this.mousedown),u.addEventListener("touchstart",this.touchstart,{passive:!1}),u.addEventListener("touchmove",this.touchmove),u.addEventListener("touchend",this.touchend),u.addEventListener("touchcancel",this.reset)}down(a,u){this.mouseRotate.mousedown(a,u),this.mousePitch&&this.mousePitch.mousedown(a,u),me()}move(a,u){const g=this.map,x=this.mouseRotate.mousemoveWindow(a,u),w=x&&x.bearingDelta;if(w&&g.setBearing(g.getBearing()+w),this.mousePitch){const S=this.mousePitch.mousemoveWindow(a,u),k=S&&S.pitchDelta;k&&g.setPitch(g.getPitch()+k)}}off(){const a=this.element;a.removeEventListener("mousedown",this.mousedown),a.removeEventListener("touchstart",this.touchstart,{passive:!1}),a.removeEventListener("touchmove",this.touchmove),a.removeEventListener("touchend",this.touchend),a.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){ye(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(a){this.down(o.l({},a,{ctrlKey:!0,preventDefault:()=>a.preventDefault()}),de(this.element,a)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(a){this.move(a,de(this.element,a))}mouseup(a){this.mouseRotate.mouseupWindow(a),this.mousePitch&&this.mousePitch.mouseupWindow(a),this.offTemp()}touchstart(a){a.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=_e(this.element,a.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>a.preventDefault()},this._startPos))}touchmove(a){a.targetTouches.length!==1?this.reset():(this._lastPos=_e(this.element,a.targetTouches)[0],this.move({preventDefault:()=>a.preventDefault()},this._lastPos))}touchend(a){a.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Dc(m,a,u){if(m=new o.bK(m.lng,m.lat),a){const g=new o.bK(m.lng-360,m.lat),x=new o.bK(m.lng+360,m.lat),w=360*Math.ceil(Math.abs(m.lng-u.center.lng)/360),S=u.locationPoint(m).distSqr(a),k=a.x<0||a.y<0||a.x>u.width||a.y>u.height;u.locationPoint(g).distSqr(a)<S&&(k||Math.abs(g.lng-u.center.lng)<w)?m=g:u.locationPoint(x).distSqr(a)<S&&(k||Math.abs(x.lng-u.center.lng)<w)&&(m=x)}for(;Math.abs(m.lng-u.center.lng)>180;){const g=u.locationPoint(m);if(g.x>=0&&g.y>=0&&g.x<=u.width&&g.y<=u.height)break;m.lng>u.center.lng?m.lng-=360:m.lng+=360}return m}const al={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Lc extends o.E{constructor(a,u){if(super(),(a instanceof HTMLElement||u)&&(a=o.l({element:a},u)),o.aJ(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=a&&a.occludedOpacity||.2,a&&a.element)this._element=a.element,this._offset=o.P.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=$("div");const w=41,S=27,k=q("svg",{display:"block",height:w*this._scale+"px",width:S*this._scale+"px",viewBox:`0 0 ${S} ${w}`},this._element),O=q("radialGradient",{id:"shadowGradient"},q("defs",{},k));q("stop",{offset:"10%","stop-opacity":.4},O),q("stop",{offset:"100%","stop-opacity":.05},O),q("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},k),q("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},k),q("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},k),q("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},k),this._offset=o.P.convert(a&&a.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",w=>{w.preventDefault()}),this._element.addEventListener("mousedown",w=>{w.preventDefault()});const g=this._element.classList;for(const w in al)g.remove(`mapboxgl-marker-anchor-${w}`);g.add(`mapboxgl-marker-anchor-${this._anchor}`);const x=a&&a.className?a.className.trim().split(/\s+/):[];g.add(...x),this._popup=null}addTo(a){return a===this._map||(this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._updateMoving),a.on("moveend",this._update),a.on("remove",this._clearFadeTimer),a._addMarker(this),this.setDraggable(this._draggable),this._update(),a.on("click",this._onMapClick)),this}remove(){const a=this._map;return a&&(a.off("click",this._onMapClick),a.off("move",this._updateMoving),a.off("moveend",this._update),a.off("mousedown",this._addDragHandler),a.off("touchstart",this._addDragHandler),a.off("mouseup",this._onUp),a.off("touchend",this._onUp),a.off("mousemove",this._onMove),a.off("touchmove",this._onMove),a.off("remove",this._clearFadeTimer),a._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=o.bK.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const x=Math.sqrt(Math.pow(13.5,2)/2);a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[x,-1*(38.1-13.5+x)],"bottom-right":[-x,-1*(38.1-13.5+x)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,a._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(a){const u=a.code,g=a.charCode||a.keyCode;u!=="Space"&&u!=="Enter"&&g!==32&&g!==13||this.togglePopup()}_onMapClick(a){const u=a.originalEvent.target,g=this._element;this._popup&&(u===g||g.contains(u))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const a=this._popup;return a?(a.isOpen()?(a.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(a.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const a=this._map,u=this._pos;if(!a||!u)return!1;const g=a.unproject(u),x=a.getFreeCameraOptions();if(!x.position)return!1;const w=x.position.toLngLat();return w.distanceTo(g)<.9*w.distanceTo(this._lngLat)}_evaluateOpacity(){const a=this._map;if(!a)return;const u=this._pos;if(!u||u.x<0||u.x>a.transform.width||u.y<0||u.y>a.transform.height)return void this._clearFadeTimer();const g=a.unproject(u);let x;a._showingGlobe()&&o.dz(a.transform,this._lngLat)?x=0:(x=1-a._queryFogOpacity(g),a.transform._terrainEnabled()&&a.getTerrain()&&this._behindTerrain()&&(x*=this._occludedOpacity)),this._element.style.opacity=`${x}`,this._element.style.pointerEvents=x>0?"auto":"none",this._popup&&this._popup._setOpacity(x),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const a=this._pos;if(!a||!this._map)return;const u=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${a.x}px,${a.y}px)
            ${al[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${u.x}px,${u.y}px)
        `}_calculateXYTransform(){const a=this._pos,u=this._map,g=this.getPitchAlignment();if(!u||!a||g!=="map")return"";if(!u._showingGlobe()){const O=u.getPitch();return O?`rotateX(${O}deg)`:""}const x=o.c0(o.dA(u.transform,this._lngLat)),w=a.sub(o.dB(u.transform)),S=Math.abs(w.x)+Math.abs(w.y);if(S===0)return"";const k=x/S;return`rotateX(${-w.y*k}deg) rotateY(${w.x*k}deg)`}_calculateZTransform(){const a=this._pos,u=this._map;if(!u||!a)return"";let g=0;const x=this.getRotationAlignment();if(x==="map")if(u._showingGlobe()){const w=u.project(new o.bK(this._lngLat.lng,this._lngLat.lat+.001)),S=u.project(new o.bK(this._lngLat.lng,this._lngLat.lat-.001)).sub(w);g=o.c0(Math.atan2(S.y,S.x))-90}else g=-u.getBearing();else if(x==="horizon"){const w=o.a7(4,6,u.getZoom()),S=o.dB(u.transform);S.y+=w*u.transform.height;const k=a.sub(S),O=o.c0(Math.atan2(k.y,k.x));g=(O>90?O-270:O+90)*(1-w)}return g+=this._rotation,g?`rotateZ(${g}deg)`:""}_update(a){cancelAnimationFrame(this._updateFrameId);const u=this._map;u&&(u.transform.renderWorldCopies&&(this._lngLat=Dc(this._lngLat,this._pos,u.transform)),this._pos=u.project(this._lngLat),a===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),u._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(u._showingGlobe()||u.getTerrain()||u.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(a){return this._offset=o.P.convert(a),this._update(),this}addClassName(a){return this._element.classList.add(a),this}removeClassName(a){return this._element.classList.remove(a),this}toggleClassName(a){return this._element.classList.toggle(a)}_onMove(a){const u=this._map;if(!u)return;const g=this._pointerdownPos,x=this._positionDelta;if(g&&x){if(!this._isDragging){const w=this._clickTolerance||u._clickTolerance;if(a.point.dist(g)<w)return;this._isDragging=!0}this._pos=a.point.sub(x),this._lngLat=u.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.x("dragstart"))),this.fire(new o.x("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const a=this._map;a&&(a.off("mousemove",this._onMove),a.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new o.x("dragend")),this._state="inactive"}_addDragHandler(a){const u=this._map,g=this._pos;u&&g&&this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(g),this._pointerdownPos=a.point,this._state="pending",u.on("mousemove",this._onMove),u.on("touchmove",this._onMove),u.once("mouseup",this._onUp),u.once("touchend",this._onUp))}setDraggable(a){this._draggable=!!a;const u=this._map;return u&&(a?(u.on("mousedown",this._addDragHandler),u.on("touchstart",this._addDragHandler)):(u.off("mousedown",this._addDragHandler),u.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(a){return this._occludedOpacity=a||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const BA={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Sh={maxWidth:100,unit:"metric"},dP={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},fP={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},pP=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function dB(m=new o.P(0,0),a="bottom"){if(typeof m=="number"){const u=Math.round(Math.sqrt(.5*Math.pow(m,2)));switch(a){case"top":return new o.P(0,m);case"top-left":return new o.P(u,u);case"top-right":return new o.P(-u,u);case"bottom":return new o.P(0,-m);case"bottom-left":return new o.P(u,-u);case"bottom-right":return new o.P(-u,-u);case"left":return new o.P(m,0);case"right":return new o.P(-m,0)}return new o.P(0,0)}return m instanceof o.P||Array.isArray(m)?o.P.convert(m):o.P.convert(m[a]||[0,0])}return{version:_,supported:K.supported,setRTLTextPlugin:o.dC,getRTLTextPluginStatus:o.dD,Map:class extends s_{constructor(m){M.mark(C.create);const a=m;if((m=o.l({},c_,m)).minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(m.antialias&&o.dx(window)&&(m.antialias=!1,o.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new ug(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies),m),this._repaint=!!m.repaint,this._interactive=m.interactive,this._minTileCacheSize=m.minTileCacheSize,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=m.crossSourceCollisions,this._collectResourceTiming=m.collectResourceTiming,this._language=this._parseLanguage(m.language),this._worldview=m.worldview,this._renderTaskQueue=new AB,this._domRenderTaskQueue=new AB,this._controls=[],this._markers=[],this._popups=[],this._mapId=o.aP(),this._locale=o.l({},hP,m.locale),this._clickTolerance=m.clickTolerance,this._cooperativeGestures=m.cooperativeGestures,this._performanceMetricsCollection=m.performanceMetricsCollection,this._tessellationStep=m.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=m.precompilePrograms,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Vp(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._requestManager=new Xt(m.transformRequest,m.accessToken,m.testMode),this._silenceAuthErrors=!!m.testMode,this._contextCreateOptions=m.contextCreateOptions?{...m.contextCreateOptions}:{},typeof m.container=="string"){const u=document.getElementById(m.container);if(!u)throw new Error(`Container '${m.container.toString()}' not found.`);this._container=u}else{if(!(m.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(this._container.childNodes.length>0&&o.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),m.maxBounds&&this.setMaxBounds(m.maxBounds),o.aJ(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new AP),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new Zs(this,m),this._localFontFamily=m.localFontFamily,this._localIdeographFontFamily=m.localIdeographFontFamily,(m.style||!m.testMode)&&this.setStyle(m.style||o.e.DEFAULT_STYLE,{config:m.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),m.projection&&this.setProjection(m.projection),m.hash&&(this._hash=new Bh(typeof m.hash=="string"&&m.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){a.center==null&&a.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch});const u=m.bounds;u&&(this.resize(),this.fitBounds(u,o.l({},m.fitBoundsOptions,{duration:0})))}this.resize(),m.attributionControl&&this.addControl(new Yg({customAttribution:m.customAttribution})),this._logoControl=new a_,this.addControl(this._logoControl,m.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new o.x(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new o.x(`${u.dataType}dataloading`,u))}),this._interactions=new l_(this)}_getMapId(){return this._mapId}addControl(m,a){if(a===void 0&&(a=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new o.t(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=m.onAdd(this);this._controls.push(m);const g=this._controlPositions[a];return a.indexOf("bottom")!==-1?g.insertBefore(u,g.firstChild):g.appendChild(u),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new o.t(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(m);return a>-1&&this._controls.splice(a,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(m){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const a=!this._moving;return a&&this.fire(new o.x("movestart",m)).fire(new o.x("move",m)),this.fire(new o.x("resize",m)),a&&this.fire(new o.x("moveend",m)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(m){return this.transform.setMaxBounds(o.as.convert(m)),this._update()}setMinZoom(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m?this.setZoom(m):this.fire(new o.x("zoomstart")).fire(new o.x("zoom")).fire(new o.x("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m??22)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m?this.setZoom(m):this.fire(new o.x("zoomstart")).fire(new o.x("zoom")).fire(new o.x("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m?this.setPitch(m):this.fire(new o.x("pitchstart")).fire(new o.x("pitch")).fire(new o.x("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m?this.setPitch(m):this.fire(new o.x("pitchstart")).fire(new o.x("pitch")).fire(new o.x("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.renderWorldCopies=m,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(m){return m==="auto"?navigator.language:Array.isArray(m)?m.length===0?void 0:m.map(a=>a==="auto"?navigator.language:a):m}setLanguage(m){const a=this._parseLanguage(m);if(!this.style||a===this._language)return this;this._language=a,this.style.reloadSources();for(const u of this._controls)u._setLanguage&&u._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(m){return this.style&&m!==this._worldview?(this._worldview=m,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(m){return this._lazyInitEmptyStyle(),m?typeof m=="string"&&(m={name:m}):m=null,this._useExplicitProjection=!!m,this._prioritizeAndUpdateProjection(m,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const m=this.transform,a=m.projection.name;let u;a==="globe"&&m.zoom>=o.bU?(m.setMercatorFromTransition(),u=!0):a==="mercator"&&m.zoom<o.bU&&(m.setProjection({name:"globe"}),u=!0),u&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(m,a){return this._updateProjection(m||a||{name:"mercator"})}_updateProjection(m){let a;return a=m.name==="globe"&&this.transform.zoom>=o.bU?this.transform.setMercatorFromTransition():this.transform.setProjection(m),this.style.applyProjectionUpdate(),a&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(m){return this.transform.locationPoint3D(o.bK.convert(m))}unproject(m){return this.transform.pointLocation3D(o.P.convert(m))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(m,a,u){if(m==="mouseenter"||m==="mouseover"){let g=!1;const x=S=>{const k=a.filter(N=>this.getLayer(N)),O=k.length?this.queryRenderedFeatures(S.point,{layers:k}):[];O.length?g||(g=!0,u.call(this,new da(m,this,S.originalEvent,{features:O}))):g=!1},w=()=>{g=!1};return{layers:new Set(a),listener:u,delegates:{mousemove:x,mouseout:w}}}if(m==="mouseleave"||m==="mouseout"){let g=!1;const x=S=>{const k=a.filter(O=>this.getLayer(O));(k.length?this.queryRenderedFeatures(S.point,{layers:k}):[]).length?g=!0:g&&(g=!1,u.call(this,new da(m,this,S.originalEvent)))},w=S=>{g&&(g=!1,u.call(this,new da(m,this,S.originalEvent)))};return{layers:new Set(a),listener:u,delegates:{mousemove:x,mouseout:w}}}{const g=x=>{const w=a.filter(k=>this.getLayer(k)),S=w.length?this.queryRenderedFeatures(x.point,{layers:w}):[];S.length&&(x.features=S,u.call(this,x),delete x.features)};return{layers:new Set(a),listener:u,delegates:{[m]:g}}}}on(m,a,u){if(typeof a=="function"||u===void 0)return super.on(m,a);if(Array.isArray(a)||(a=[a]),a){for(const x of a)if(!this._isValidId(x))return this}const g=this._createDelegatedListener(m,a,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(g);for(const x in g.delegates)this.on(x,g.delegates[x]);return this}once(m,a,u){if(typeof a=="function"||u===void 0)return super.once(m,a);if(Array.isArray(a)||(a=[a]),a){for(const x of a)if(!this._isValidId(x))return this}const g=this._createDelegatedListener(m,a,u);for(const x in g.delegates)this.once(x,g.delegates[x]);return this}off(m,a,u){if(typeof a=="function"||u===void 0)return super.off(m,a);const g=new Set(Array.isArray(a)?a:[a]);for(const S of g)if(!this._isValidId(S))return this;const x=(S,k)=>{if(S.size!==k.size)return!1;for(const O of S)if(!k.has(O))return!1;return!0},w=this._delegatedListeners?this._delegatedListeners[m]:void 0;return w&&(S=>{for(let k=0;k<S.length;k++){const O=S[k];if(O.listener===u&&x(O.layers,g)){for(const N in O.delegates)this.off(N,O.delegates[N]);return S.splice(k,1),this}}})(w),this}queryRenderedFeatures(m,a){if(!this.style)return[];if(a!==void 0||m===void 0||m instanceof o.P||Array.isArray(m)||(a=m,m=void 0),m=m||[[0,0],[this.transform.width,this.transform.height]],(a=a||{}).layers&&Array.isArray(a.layers)){for(const u of a.layers)if(!this._isValidId(u))return[]}return this.style.queryRenderedFeatures(m,a,this.transform)}querySourceFeatures(m,a){return this._isValidId(m)?this.style.querySourceFeatures(m,a):[]}isPointOnSurface(m){const{name:a}=this.transform.projection;return a!=="globe"&&a!=="mercator"&&o.w(`${a} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(o.P.convert(m))}addInteraction(m,a){return this._interactions.add(m,a),this}removeInteraction(m){return this._interactions.remove(m),this}setStyle(m,a){return a=o.l({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},a),this.style&&m&&a.diff!==!1&&a.localFontFamily===this._localFontFamily&&a.localIdeographFontFamily===this._localIdeographFontFamily&&!a.config?(this.style._diffStyle(m,(u,g)=>{u?(o.w(`Unable to perform style diff: ${String(u.message||u.error||u)}. Rebuilding the style from scratch.`),this._updateStyle(m,a)):g&&this._update(!0)},()=>{this._postStyleLoadEvent()}),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._localFontFamily=a.localFontFamily,this._updateStyle(m,a))}_getUIString(m){const a=this._locale[m];if(a==null)throw new Error(`Missing UI string '${m}'`);return a}_updateStyle(m,a){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),m){const u=o.l({},a);a&&a.config&&(u.initialConfig=a.config,delete u.config),this.style=new ol(this,u).load(m),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new ol(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(o.w("There is no style added to the map."),!1)}_isValidId(m){return m==null?(this.fire(new o.t(new Error("IDs can't be empty."))),!1):!o.cn(m)||(this.fire(new o.t(new Error(`IDs can't contain special symbols: "${m}".`))),!1)}addSource(m,a){return this._isValidId(m)?(this._lazyInitEmptyStyle(),this.style.addSource(m,a),this._update(!0)):this}isSourceLoaded(m){return!!this._isValidId(m)&&!!this.style&&this.style._isSourceCacheLoaded(m)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(m,a,u){this._lazyInitEmptyStyle(),this.style.addSourceType(m,a,u)}removeSource(m){return this._isValidId(m)?(this.style.removeSource(m),this._updateTerrain(),this._update(!0)):this}getSource(m){return this._isValidId(m)?this.style.getOwnSource(m):null}addImage(m,a,{pixelRatio:u=1,sdf:g=!1,stretchX:x,stretchY:w,content:S}={}){if(this._lazyInitEmptyStyle(),a instanceof HTMLImageElement||ImageBitmap&&a instanceof ImageBitmap){const{width:k,height:O,data:N}=o.q.getImageData(a);this.style.addImage(m,{data:new o.r({width:k,height:O},N),pixelRatio:u,stretchX:x,stretchY:w,content:S,sdf:g,version:0})}else if(a.width===void 0||a.height===void 0)this.fire(new o.t(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:k,height:O}=a,N=a;this.style.addImage(m,{data:new o.r({width:k,height:O},new Uint8Array(N.data)),pixelRatio:u,stretchX:x,stretchY:w,content:S,sdf:g,version:0,userImage:N}),N.onAdd&&N.onAdd(this,m)}}updateImage(m,a){this._lazyInitEmptyStyle();const u=this.style.getImage(m);if(!u)return void this.fire(new o.t(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=a instanceof HTMLImageElement||ImageBitmap&&a instanceof ImageBitmap?o.q.getImageData(a):a,{width:x,height:w,data:S}=g;if(x===void 0||w===void 0)return void this.fire(new o.t(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(x!==u.data.width||w!==u.data.height)return void this.fire(new o.t(new Error(`The width and height of the updated image (${x}, ${w})
                must be that same as the previous version of the image
                (${u.data.width}, ${u.data.height})`)));const k=!(a instanceof HTMLImageElement||ImageBitmap&&a instanceof ImageBitmap);u.data.replace(S,k),this.style.updateImage(m,u)}hasImage(m){return m?!!this.style&&!!this.style.getImage(m):(this.fire(new o.t(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m,a){o.o(this._requestManager.transformRequest(m,o.R.Image),(u,g)=>{a(u,g instanceof HTMLImageElement?o.q.getImageData(g):g)})}listImages(){return this.style.listImages()}addModel(m,a){this._lazyInitEmptyStyle(),this.style.addModel(m,a)}hasModel(m){return m?this.style.hasModel(m):(this.fire(new o.t(new Error("Missing required model id"))),!1)}removeModel(m){this.style.removeModel(m)}listModels(){return this.style.listModels()}addLayer(m,a){return this._isValidId(m.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(m,a),this._update(!0)):this}getSlot(m){const a=this.getLayer(m);return a&&a.slot||null}setSlot(m,a){return this.style.setSlot(m,a),this.style.mergeLayers(),this._update(!0)}addImport(m,a){return this.style.addImport(m,a),this}updateImport(m,a){return typeof a!="string"&&a.id!==m?(this.removeImport(m),this.addImport(a)):(this.style.updateImport(m,a),this._update(!0))}removeImport(m){return this.style.removeImport(m),this}moveImport(m,a){return this.style.moveImport(m,a),this._update(!0)}moveLayer(m,a){return this._isValidId(m)?(this.style.moveLayer(m,a),this._update(!0)):this}removeLayer(m){return this._isValidId(m)?(this.style.removeLayer(m),this._update(!0)):this}getLayer(m){if(!this._isValidId(m))return null;const a=this.style.getOwnLayer(m);return a?a.type==="custom"?a.implementation:a.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(m,a,u){return this._isValidId(m)?(this.style.setLayerZoomRange(m,a,u),this._update(!0)):this}setFilter(m,a,u={}){return this._isValidId(m)?(this.style.setFilter(m,a,u),this._update(!0)):this}getFilter(m){return this._isValidId(m)?this.style.getFilter(m):null}setPaintProperty(m,a,u,g={}){return this._isValidId(m)?(this.style.setPaintProperty(m,a,u,g),this._update(!0)):this}getPaintProperty(m,a){return this._isValidId(m)?this.style.getPaintProperty(m,a):null}setLayoutProperty(m,a,u,g={}){return this._isValidId(m)?(this.style.setLayoutProperty(m,a,u,g),this._update(!0)):this}getLayoutProperty(m,a){return this._isValidId(m)?this.style.getLayoutProperty(m,a):null}getSchema(m){return this.style.getSchema(m)}setSchema(m,a){return this.style.setSchema(m,a),this._update(!0)}getConfig(m){return this.style.getConfig(m)}setConfig(m,a){return this.style.setConfig(m,a),this._update(!0)}getConfigProperty(m,a){return this.style.getConfigProperty(m,a)}setConfigProperty(m,a,u){return this.style.setConfigProperty(m,a,u),this._update(!0)}setLights(m){if(this._lazyInitEmptyStyle(),m&&m.length===1&&m[0].type==="flat"){const a=m[0];a.properties?this.style.setFlatLight(a.properties,a.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(m),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const m=this.style.getLights()||[];return m.length===0&&m.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),m}setLight(m,a={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:m}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(m){return this._lazyInitEmptyStyle(),!m&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(m),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(m){return this._lazyInitEmptyStyle(),this.style.setFog(m),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setColorTheme(m){return this._lazyInitEmptyStyle(),this.style.setColorTheme(m),this._update(!0)}setCamera(m){return this.style.setCamera(m),this._triggerCameraUpdate(m)}_triggerCameraUpdate(m){return this._update(this.transform.setOrthographicProjectionAtLowPitch(m["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(m){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(o.bK.convert(m),this.transform):0}setFeatureState(m,a){return this._isValidId(m.source)?(this.style.setFeatureState(m,a),this._update()):this}removeFeatureState(m,a){return this._isValidId(m.source)?(this.style.removeFeatureState(m,a),this._update()):this}getFeatureState(m){return this._isValidId(m.source)?this.style.getFeatureState(m):null}_updateContainerDimensions(){if(!this._container)return;const m=this._container.getBoundingClientRect().width||400,a=this._container.getBoundingClientRect().height||300;let u,g,x,w=this._container;for(;w&&(!g||!x);){const S=window.getComputedStyle(w).transform;S&&S!=="none"&&(u=S.match(/matrix.*\((.+)\)/)[1].split(", "),u[0]&&u[0]!=="0"&&u[0]!=="1"&&(g=u[0]),u[3]&&u[3]!=="0"&&u[3]!=="1"&&(x=u[3])),w=w.parentElement}this._containerWidth=g?Math.abs(m/g):m,this._containerHeight=x?Math.abs(a/x):a}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const m=this._container;m.classList.add("mapboxgl-map"),(this._missingCSSCanary=$("div","mapboxgl-canary",m)).style.visibility="hidden",this._detectMissingCSS();const a=this._canvasContainer=$("div","mapboxgl-canvas-container",m);this._canvas=$("canvas","mapboxgl-canvas",a),this._interactive&&(a.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const u=this._controlContainer=$("div","mapboxgl-control-container",m),g=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(x=>{g[x]=$("div",`mapboxgl-ctrl-${x}`,u)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,a){const u=o.q.devicePixelRatio||1;this._canvas.width=u*Math.ceil(m),this._canvas.height=u*Math.ceil(a),this._canvas.style.width=`${m}px`,this._canvas.style.height=`${a}px`}_addMarker(m){this._markers.push(m)}_removeMarker(m){const a=this._markers.indexOf(m);a!==-1&&this._markers.splice(a,1)}_addPopup(m){this._popups.push(m)}_removePopup(m){const a=this._popups.indexOf(m);a!==-1&&this._popups.splice(a,1)}_setupPainter(){const m=o.l({},K.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),a=this._canvas.getContext("webgl2",m);a?(Io(a,!0),this.painter=new Xv(a,this._contextCreateOptions,this.transform,this._tp),this.on("data",u=>{u.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),o.m.testSupport(a)):this.fire(new o.t(new Error("Failed to initialize WebGL")))}_contextLost(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.x("webglcontextlost",{originalEvent:m}))}_contextRestored(m){this._setupPainter(),this.resize(),this._update(),this.fire(new o.x("webglcontextrestored",{originalEvent:m}))}_onMapScroll(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_requestDomTask(m){!this.loaded()||this.loaded()&&!this.isMoving()?m():this._domRenderTaskQueue.add(m)}_render(m){let a;this.fire(new o.x("renderstart")),++this._frameId;const u=this.painter.context.extTimerQuery,g=o.q.now(),x=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(a=x.createQuery(),x.beginQuery(u.TIME_ELAPSED_EXT,a)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(m),this._domRenderTaskQueue.run(m),this._removed)return;this._updateProjectionTransition();const w=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const N=this.transform.zoom,Q=this.transform.pitch,W=o.q.now(),X=new o.a3(N,{now:W,fadeDuration:w,pitch:Q,transition:this.style.transition});this.style.update(X)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let S=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),S=this._updateAverageElevation(g),this.style.updateSources(this.transform),this._forceMarkerAndPopupUpdate()):S=this._updateAverageElevation(g);const k=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,w,this._crossSourceCollisions,this.painter.replacementSource);if(k&&(this._placementDirty=k.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:w,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new o.x("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,M.mark(C.load),this.fire(new o.x("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),a){const N=o.q.now()-g;x.endQuery(u.TIME_ELAPSED_EXT),setTimeout(()=>{const Q=x.getQueryParameter(a,x.QUERY_RESULT)/1e6;x.deleteQuery(a),this.fire(new o.x("gpu-timing-frame",{cpuTime:N,gpuTime:Q}))},50)}if(this.listens("gpu-timing-layer")){const N=this.painter.collectGpuTimers();setTimeout(()=>{const Q=this.painter.queryGpuTimers(N);this.fire(new o.x("gpu-timing-layer",{layerTimes:Q}))},50)}if(this.listens("gpu-timing-deferred-render")){const N=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const Q=this.painter.queryGpuTimeDeferredRender(N);this.fire(new o.x("gpu-timing-deferred-render",{gpuTime:Q}))},50)}const O=this._sourcesDirty||this._styleDirty||this._placementDirty||S;if(O||this._repaint)this.triggerRepaint();else{const N=this.idle();if(N&&(S=this._updateAverageElevation(g,!0)),S)this.triggerRepaint();else if(this._triggerFrame(!1),N&&(this.fire(new o.x("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const Q=this._calculateSpeedIndex();this.fire(new o.x("speedindexcompleted",{speedIndex:Q})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||O||(this._fullyLoaded=!0,M.mark(C.fullLoad),this._performanceMetricsCollection&&Ao(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(m){for(const a of this._markers)m&&!this.getRenderWorldCopies()&&(a._lngLat=a._lngLat.wrap()),a._update();for(const a of this._popups)!m||this.getRenderWorldCopies()||a._trackPointer||(a._lngLat=a._lngLat.wrap()),a._update()}_updateAverageElevation(m,a=!1){const u=x=>(this.transform.averageElevation=x,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&u(0);const g=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(g||(a||m-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(m)){const x=this.transform.averageElevation;let w=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(w)?w=0:this._averageElevationLastSampledAt=m;const S=Math.abs(x-w);if(S>1){if(this._isInitialLoad||g)return this._averageElevation.jumpTo(w),u(w);this._averageElevation.easeTo(w,m,300)}else if(S>1e-4)return this._averageElevation.jumpTo(w),u(w)}return!!this._averageElevation.isEasing(m)&&u(this._averageElevation.getValue(m))}_authenticate(){Qe(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,m=>{if(m&&(m.message===Ht||m.status===401)){const a=this.painter.context.gl;Io(a,!1),this._logoControl instanceof a_&&this._logoControl._updateLogo(),a&&a.clear(a.DEPTH_BUFFER_BIT|a.COLOR_BUFFER_BIT|a.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new o.t(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),Dr(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&Zr(this._requestManager._customAccessToken,{map:this,skuToken:this._requestManager._skuToken,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const m=this._isDragging();this.painter.updateTerrain(this.style,m)}_calculateSpeedIndex(){const m=this.painter.canvasCopy(),a=this.painter.getCanvasCopiesAndTimestamps();a.timeStamps.push(performance.now());const u=this.painter.context.gl,g=u.createFramebuffer();function x(w){u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,w,0);const S=new Uint8Array(u.drawingBufferWidth*u.drawingBufferHeight*4);return u.readPixels(0,0,u.drawingBufferWidth,u.drawingBufferHeight,u.RGBA,u.UNSIGNED_BYTE,S),S}return u.bindFramebuffer(u.FRAMEBUFFER,g),this._canvasPixelComparison(x(m),a.canvasCopies.map(x),a.timeStamps)}_canvasPixelComparison(m,a,u){let g=u[1]-u[0];const x=m.length/4;for(let w=0;w<a.length;w++){const S=a[w];let k=0;for(let O=0;O<S.length;O+=4)S[O]===m[O]&&S[O+1]===m[O+1]&&S[O+2]===m[O+2]&&S[O+3]===m[O+3]&&(k+=1);g+=(u[w+2]-u[w+1])*(1-k/x)}return g}remove(){this._hash&&this._hash.remove();for(const a of this._controls)a.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const m=this.painter.context.gl.getExtension("WEBGL_lose_context");m&&m.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),no.delete(this.painter.context.gl),ji.remove(),Vt.remove(),this._removed=!0,this.fire(new o.x("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(m){this._renderNextFrame=this._renderNextFrame||m,this.style&&!this._frame&&(this._frame=o.q.frame(a=>{const u=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,u&&this._render(a)}))}_preloadTiles(m){const a=this.style?this.style.getSourceCaches():[];return o.bf(a,(u,g)=>u._preloadTiles(m,g),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(m){this._trackResize&&this.resize({originalEvent:m})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(m){this._showParseStatus!==m&&(this._showParseStatus=m,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(m){this._showTerrainWireframe!==m&&(this._showTerrainWireframe=m,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(m){this._showLayers2DWireframe!==m&&(this._showLayers2DWireframe=m,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(m){this._showLayers3DWireframe!==m&&(this._showLayers3DWireframe=m,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(m){this._speedIndexTiming!==m&&(this._speedIndexTiming=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,this._tp.refreshUI(),m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(m){this._showTileAABBs!==m&&(this._showTileAABBs=m,this._tp.refreshUI(),m&&this._update())}_setCacheLimits(m,a){o.dy(m,a)}get version(){return _}},NavigationControl:class{constructor(m={}){this.options=o.l({},Np,m),this._container=$("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(o.aJ(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",a=>{this._map&&this._map.zoomIn({},{originalEvent:a})}),$("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",a=>{this._map&&this._map.zoomOut({},{originalEvent:a})}),$("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(o.aJ(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",a=>{const u=this._map;u&&(this.options.visualizePitch?u.resetNorthPitch({},{originalEvent:a}):u.resetNorth({},{originalEvent:a}))}),this._compassIcon=$("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const m=this._map;if(!m)return;const a=m.getZoom(),u=a===m.getMaxZoom(),g=a===m.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())}_rotateCompassArrow(){const m=this._map;if(!m)return;const a=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(m.transform.pitch*(Math.PI/180)),.5)}) rotateX(${m.transform.pitch}deg) rotateZ(${m.transform.angle*(180/Math.PI)}deg)`:`rotate(${m.transform.angle*(180/Math.PI)}deg)`;m._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=a)})}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),m.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&m.on("pitch",this._rotateCompassArrow),m.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Od(m,this._compass,this.options.visualizePitch)),this._container}onRemove(){const m=this._map;m&&(this._container.remove(),this.options.showZoom&&m.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&m.off("pitch",this._rotateCompassArrow),m.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(m,a){const u=$("button",m,this._container);return u.type="button",u.addEventListener("click",a),u}_setButtonTitle(m,a){if(!this._map)return;const u=this._map._getUIString(`NavigationControl.${a}`);m.setAttribute("aria-label",u),m.firstElementChild&&m.firstElementChild.setAttribute("title",u)}},GeolocateControl:class extends o.E{constructor(m={}){super();const a=navigator.geolocation;this.options=o.l({geolocation:a},BA,m),o.aJ(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Ru(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(m){return this._map=m,this._container=$("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(m){const a=(u=!!this.options.geolocation)=>{this._supportsGeolocation=u,m(u)};this._supportsGeolocation!==void 0?m(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(u=>a(u.state!=="denied")).catch(()=>a()):a()}_isOutOfMapMaxBounds(m){const a=this._map.getMaxBounds(),u=m.coords;return!!a&&(u.longitude<a.getWest()||u.longitude>a.getEast()||u.latitude<a.getSouth()||u.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(m){if(this._map){if(this._isOutOfMapMaxBounds(m))return this._setErrorState(),this.fire(new o.x("outofmaxbounds",m)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(m),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(m),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new o.x("geolocate",m)),this._finish()}}_updateCamera(m){const a=new o.bK(m.coords.longitude,m.coords.latitude),u=m.coords.accuracy,g=this._map.getBearing(),x=o.l({bearing:g},this.options.fitBoundsOptions);this._map.fitBounds(a.toBounds(u),x,{geolocateSource:!0})}_updateMarker(m){if(m){const a=new o.bK(m.coords.longitude,m.coords.latitude);this._accuracyCircleMarker.setLngLat(a).addTo(this._map),this._userLocationDotMarker.setLngLat(a).addTo(this._map),this._accuracy=m.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const m=this._map.transform,a=o.bD(1,m._center.lat)*m.worldSize,u=Math.ceil(2*this._accuracy*a);this._circleElement.style.width=`${u}px`,this._circleElement.style.height=`${u}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(m){if(this._map){if(this.options.trackUserLocation)if(m.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(m.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new o.x("error",m)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(m){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=$("button","mapboxgl-ctrl-geolocate",this._container),$("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",m===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",a),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=$("div","mapboxgl-user-location"),this._dotElement.appendChild($("div","mapboxgl-user-location-dot")),this._dotElement.appendChild($("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Lc({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=$("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Lc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",a=>{a.geolocateSource||this._watchState!=="ACTIVE_LOCK"||a.originalEvent&&a.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new o.x("trackuserlocationend")))})}}_onDeviceOrientation(m){this._userLocationDotMarker&&(m.webkitCompassHeading?this._heading=m.webkitCompassHeading:m.absolute===!0&&(this._heading=-1*m.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.x("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.x("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.x("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(m={maximumAge:6e5,timeout:0},this._noTimeout=!0):(m=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,m),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const m=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(a=>{a==="granted"&&m()}).catch(console.error):m()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Yg,ScaleControl:class{constructor(m={}){this.options=o.l({},Sh,m),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),o.aJ(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const m=this.options.maxWidth||100,a=this._map,u=a._containerHeight/2,g=a._containerWidth/2-m/2,x=a.unproject([g,u]),w=a.unproject([g+m,u]),S=x.distanceTo(w);if(this.options.unit==="imperial"){const k=3.2808*S;k>5280?this._setScale(m,k/5280,"mile"):this._setScale(m,k,"foot")}else this.options.unit==="nautical"?this._setScale(m,S/1852,"nautical-mile"):S>=1e3?this._setScale(m,S/1e3,"kilometer"):this._setScale(m,S,"meter")}_setScale(m,a,u){this._map._requestDomTask(()=>{const g=function(w){const S=Math.pow(10,`${Math.floor(w)}`.length-1);let k=w/S;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(O){const N=Math.pow(10,Math.ceil(-Math.log(O)/Math.LN10));return Math.round(O*N)/N}(k),S*k}(a),x=g/a;this._container.innerHTML=this._isNumberFormatSupported&&u!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:u}).format(g):`${g}&nbsp;${dP[u]}`,this._container.style.width=m*x+"px"})}onAdd(m){return this._map=m,this._language=m.getLanguage(),this._container=$("div","mapboxgl-ctrl mapboxgl-ctrl-scale",m.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(m){this._language=m,this._update()}setUnit(m){this.options.unit=m,this._update()}},FullscreenControl:class{constructor(m={}){this._fullscreen=!1,m&&m.container&&(m.container instanceof HTMLElement?this._container=m.container:o.w("Full screen control 'container' must be a DOM element.")),o.aJ(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=$("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const m=this._fullscreenButton=$("button","mapboxgl-ctrl-fullscreen",this._controlContainer);$("span","mapboxgl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",m)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends o.E{constructor(m){super(),this.options=o.l(Object.create(fP),m),o.aJ(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(m&&m.className?m.className.trim().split(/\s+/):[])}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&m.on("preclick",this._onClose),this.options.closeOnMove&&m.on("move",this._onClose),m.on("remove",this.remove),this._update(),m._addPopup(this),this._focusFirstElement(),this._trackPointer?(m.on("mousemove",this._onMouseEvent),m.on("mouseup",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")):m.on("move",this._update),this.fire(new o.x("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const m=this._map;return m&&(m.off("move",this._update),m.off("move",this._onClose),m.off("preclick",this._onClose),m.off("click",this._onClose),m.off("remove",this.remove),m.off("mousemove",this._onMouseEvent),m.off("mouseup",this._onMouseEvent),m.off("drag",this._onMouseEvent),m._canvasContainer&&m._canvasContainer.classList.remove("mapboxgl-track-pointer"),m._removePopup(this),this._map=void 0),this.fire(new o.x("close")),this}getLngLat(){return this._lngLat}setLngLat(m){this._lngLat=o.bK.convert(m),this._pos=null,this._trackPointer=!1,this._update();const a=this._map;return a&&(a.on("move",this._update),a.off("mousemove",this._onMouseEvent),a._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const m=this._map;return m&&(m.off("move",this._update),m.on("mousemove",this._onMouseEvent),m.on("drag",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(document.createTextNode(m))}setHTML(m){const a=document.createDocumentFragment(),u=document.createElement("body");let g;for(u.innerHTML=m;g=u.firstChild,g;)a.appendChild(g);return this.setDOMContent(a)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){let a=this._content;if(a)for(;a.hasChildNodes();)a.firstChild&&a.removeChild(a.firstChild);else a=this._content=$("div","mapboxgl-popup-content",this._container||void 0);if(a.appendChild(m),this.options.closeButton){const u=this._closeButton=$("button","mapboxgl-popup-close-button",a);u.type="button",u.setAttribute("aria-label","Close popup"),u.setAttribute("aria-hidden","true"),u.innerHTML="&#215;",u.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(m){return this._classList.add(m),this._updateClassList(),this}removeClassName(m){return this._classList.delete(m),this._updateClassList(),this}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){let a;return this._classList.delete(m)?a=!1:(this._classList.add(m),a=!0),this._updateClassList(),a}_onMouseEvent(m){this._update(m.point)}_getAnchor(m){if(this.options.anchor)return this.options.anchor;const a=this._map,u=this._container,g=this._pos;if(!a||!u||!g)return"bottom";const x=u.offsetWidth,w=u.offsetHeight,S=g.x<x/2,k=g.x>a.transform.width-x/2;if(g.y+m<w)return S?"top-left":k?"top-right":"top";if(g.y>a.transform.height-w){if(S)return"bottom-left";if(k)return"bottom-right"}return S?"left":k?"right":"bottom"}_updateClassList(){const m=this._container;if(!m)return;const a=[...this._classList];a.push("mapboxgl-popup"),this._anchor&&a.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&a.push("mapboxgl-popup-track-pointer"),m.className=a.join(" ")}_update(m){const a=this._map,u=this._content;if(!a||!this._lngLat&&!this._trackPointer||!u)return;let g=this._container;if(g||(g=this._container=$("div","mapboxgl-popup",a.getContainer()),this._tip=$("div","mapboxgl-popup-tip",g),g.appendChild(u)),this.options.maxWidth&&g.style.maxWidth!==this.options.maxWidth&&(g.style.maxWidth=this.options.maxWidth),a.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Dc(this._lngLat,this._pos,a.transform)),!this._trackPointer||m){const x=this._pos=this._trackPointer&&m instanceof o.P?m:a.project(this._lngLat),w=dB(this.options.offset),S=this._anchor=this._getAnchor(w.y),k=dB(this.options.offset,S),O=x.add(k).round();a._requestDomTask(()=>{this._container&&S&&(this._container.style.transform=`${al[S]} translate(${O.x}px,${O.y}px)`)})}if(!this._marker&&a._showingGlobe()){const x=o.dz(a.transform,this._lngLat)?0:1;this._setOpacity(x)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(pP);m&&m.focus()}_onClose(){this.remove()}_setOpacity(m){this._container&&(this._container.style.opacity=`${m}`),this._content&&(this._content.style.pointerEvents=m?"auto":"none")}},Marker:Lc,Style:ol,LngLat:o.bK,LngLatBounds:o.as,Point:o.P,MercatorCoordinate:o.a5,FreeCameraOptions:Aa,Evented:o.E,config:o.e,prewarm:o.dE,clearPrewarmedResources:o.dF,get accessToken(){return o.e.ACCESS_TOKEN},set accessToken(m){o.e.ACCESS_TOKEN=m},get baseApiUrl(){return o.e.API_URL},set baseApiUrl(m){o.e.API_URL=m},get workerCount(){return o.dG.workerCount},set workerCount(m){o.dG.workerCount=m},get maxParallelImageRequests(){return o.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(m){o.e.MAX_PARALLEL_IMAGE_REQUESTS=m},clearStorage(m){o.dH(m)},get workerUrl(){return o.dI.workerUrl},set workerUrl(m){o.dI.workerUrl=m},get workerClass(){return o.dI.workerClass},set workerClass(m){o.dI.workerClass=m},get workerParams(){return o.dI.workerParams},set workerParams(m){o.dI.workerParams=m},get dracoUrl(){return o.dJ()},set dracoUrl(m){o.dK(m)},get meshoptUrl(){return o.dL()},set meshoptUrl(m){o.dM(m)},setNow:o.q.setNow,restoreNow:o.q.restoreNow}});var p=l;return p})})(a$);var ODe=a$.exports;const f2=Lb(ODe),UDe=ove({displayName:"CloseIcon",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"});var zj={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c$=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=i&63|128):(i&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=i>>18|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=i&63|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=i&63|128)}return t},zDe=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const i=e[r++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){const l=e[r++];t[n++]=String.fromCharCode((i&31)<<6|l&63)}else if(i>239&&i<365){const l=e[r++],h=e[r++],p=e[r++],o=((i&7)<<18|(l&63)<<12|(h&63)<<6|p&63)-65536;t[n++]=String.fromCharCode(55296+(o>>10)),t[n++]=String.fromCharCode(56320+(o&1023))}else{const l=e[r++],h=e[r++];t[n++]=String.fromCharCode((i&15)<<12|(l&63)<<6|h&63)}}return t.join("")},u$={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<e.length;i+=3){const l=e[i],h=i+1<e.length,p=h?e[i+1]:0,o=i+2<e.length,_=o?e[i+2]:0,C=l>>2,M=(l&3)<<4|p>>4;let L=(p&15)<<2|_>>6,z=_&63;o||(z=64,h||(L=64)),n.push(r[C],r[M],r[L],r[z])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(c$(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):zDe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<e.length;){const l=r[e.charAt(i++)],p=i<e.length?r[e.charAt(i)]:0;++i;const _=i<e.length?r[e.charAt(i)]:64;++i;const M=i<e.length?r[e.charAt(i)]:64;if(++i,l==null||p==null||_==null||M==null)throw new VDe;const L=l<<2|p>>4;if(n.push(L),_!==64){const z=p<<4&240|_>>2;if(n.push(z),M!==64){const j=_<<6&192|M;n.push(j)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class VDe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NDe=function(e){const t=c$(e);return u$.encodeByteArray(t,!0)},GT=function(e){return NDe(e).replace(/\./g,"")},QDe=function(e){try{return u$.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HDe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jDe=()=>HDe().__FIREBASE_DEFAULTS__,GDe=()=>{if(typeof process>"u"||typeof zj>"u")return;const e=zj.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},KDe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&QDe(e[1]);return t&&JSON.parse(t)},MU=()=>{try{return jDe()||GDe()||KDe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},WDe=e=>{var t,r;return(r=(t=MU())===null||t===void 0?void 0:t.emulatorHosts)===null||r===void 0?void 0:r[e]},qDe=e=>{const t=WDe(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},h$=()=>{var e;return(e=MU())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XDe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZDe(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",i=e.iat||0,l=e.sub||e.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},e);return[GT(JSON.stringify(r)),GT(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YDe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JDe(){var e;const t=(e=MU())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $De(){return!JDe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function e2e(){try{return typeof indexedDB=="object"}catch{return!1}}function t2e(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var l;t(((l=i.error)===null||l===void 0?void 0:l.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2e="FirebaseError";class Av extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=r2e,Object.setPrototypeOf(this,Av.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,A$.prototype.create)}}class A${constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},i=`${this.service}/${t}`,l=this.errors[t],h=l?n2e(l,n):"Error",p=`${this.serviceName}: ${h} (${i}).`;return new Av(i,p,n)}}function n2e(e,t){return e.replace(i2e,(r,n)=>{const i=t[n];return i!=null?String(i):`<${n}?>`})}const i2e=/\{\$([^}]+)}/g;function p2(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const i of r){if(!n.includes(i))return!1;const l=e[i],h=t[i];if(Vj(l)&&Vj(h)){if(!p2(l,h))return!1}else if(l!==h)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function Vj(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(e){return e&&e._delegate?e._delegate:e}class Tb{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2e{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new XDe;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){var r;const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(r=t==null?void 0:t.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(a2e(t))try{this.getOrInitializeService({instanceIdentifier:am})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const l=this.getOrInitializeService({instanceIdentifier:i});n.resolve(l)}catch{}}}}clearInstance(t=am){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=am){return this.instances.has(t)}getOptions(t=am){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[l,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(l);n===p&&h.resolve(i)}return i}onInit(t,r){var n;const i=this.normalizeInstanceIdentifier(r),l=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;l.add(t),this.onInitCallbacks.set(i,l);const h=this.instances.get(i);return h&&t(h,i),()=>{l.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:s2e(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=am){return this.component?this.component.multipleInstances?t:am:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function s2e(e){return e===am?void 0:e}function a2e(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2e{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new o2e(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pi;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(pi||(pi={}));const c2e={debug:pi.DEBUG,verbose:pi.VERBOSE,info:pi.INFO,warn:pi.WARN,error:pi.ERROR,silent:pi.SILENT},u2e=pi.INFO,h2e={[pi.DEBUG]:"log",[pi.VERBOSE]:"log",[pi.INFO]:"info",[pi.WARN]:"warn",[pi.ERROR]:"error"},A2e=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),i=h2e[t];if(i)console[i](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class d${constructor(t){this.name=t,this._logLevel=u2e,this._logHandler=A2e,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in pi))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?c2e[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,pi.DEBUG,...t),this._logHandler(this,pi.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,pi.VERBOSE,...t),this._logHandler(this,pi.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,pi.INFO,...t),this._logHandler(this,pi.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,pi.WARN,...t),this._logHandler(this,pi.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,pi.ERROR,...t),this._logHandler(this,pi.ERROR,...t)}}const d2e=(e,t)=>t.some(r=>e instanceof r);let Nj,Qj;function f2e(){return Nj||(Nj=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function p2e(){return Qj||(Qj=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const f$=new WeakMap,m2=new WeakMap,p$=new WeakMap,Fk=new WeakMap,RU=new WeakMap;function m2e(e){const t=new Promise((r,n)=>{const i=()=>{e.removeEventListener("success",l),e.removeEventListener("error",h)},l=()=>{r(Hf(e.result)),i()},h=()=>{n(e.error),i()};e.addEventListener("success",l),e.addEventListener("error",h)});return t.then(r=>{r instanceof IDBCursor&&f$.set(r,e)}).catch(()=>{}),RU.set(t,e),t}function g2e(e){if(m2.has(e))return;const t=new Promise((r,n)=>{const i=()=>{e.removeEventListener("complete",l),e.removeEventListener("error",h),e.removeEventListener("abort",h)},l=()=>{r(),i()},h=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",l),e.addEventListener("error",h),e.addEventListener("abort",h)});m2.set(e,t)}let g2={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return m2.get(e);if(t==="objectStoreNames")return e.objectStoreNames||p$.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Hf(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function y2e(e){g2=e(g2)}function v2e(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(Pk(this),t,...r);return p$.set(n,t.sort?t.sort():[t]),Hf(n)}:p2e().includes(e)?function(...t){return e.apply(Pk(this),t),Hf(f$.get(this))}:function(...t){return Hf(e.apply(Pk(this),t))}}function _2e(e){return typeof e=="function"?v2e(e):(e instanceof IDBTransaction&&g2e(e),d2e(e,f2e())?new Proxy(e,g2):e)}function Hf(e){if(e instanceof IDBRequest)return m2e(e);if(Fk.has(e))return Fk.get(e);const t=_2e(e);return t!==e&&(Fk.set(e,t),RU.set(t,e)),t}const Pk=e=>RU.get(e);function x2e(e,t,{blocked:r,upgrade:n,blocking:i,terminated:l}={}){const h=indexedDB.open(e,t),p=Hf(h);return n&&h.addEventListener("upgradeneeded",o=>{n(Hf(h.result),o.oldVersion,o.newVersion,Hf(h.transaction),o)}),r&&h.addEventListener("blocked",o=>r(o.oldVersion,o.newVersion,o)),p.then(o=>{l&&o.addEventListener("close",()=>l()),i&&o.addEventListener("versionchange",_=>i(_.oldVersion,_.newVersion,_))}).catch(()=>{}),p}const b2e=["get","getKey","getAll","getAllKeys","count"],w2e=["put","add","delete","clear"],Mk=new Map;function Hj(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Mk.get(t))return Mk.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,i=w2e.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||b2e.includes(r)))return;const l=async function(h,...p){const o=this.transaction(h,i?"readwrite":"readonly");let _=o.store;return n&&(_=_.index(p.shift())),(await Promise.all([_[r](...p),i&&o.done]))[0]};return Mk.set(t,l),l}y2e(e=>({...e,get:(t,r,n)=>Hj(t,r)||e.get(t,r,n),has:(t,r)=>!!Hj(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2e{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(C2e(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function C2e(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const y2="@firebase/app",jj="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad=new d$("@firebase/app"),S2e="@firebase/app-compat",E2e="@firebase/analytics-compat",T2e="@firebase/analytics",I2e="@firebase/app-check-compat",F2e="@firebase/app-check",P2e="@firebase/auth",M2e="@firebase/auth-compat",R2e="@firebase/database",k2e="@firebase/data-connect",D2e="@firebase/database-compat",L2e="@firebase/functions",O2e="@firebase/functions-compat",U2e="@firebase/installations",z2e="@firebase/installations-compat",V2e="@firebase/messaging",N2e="@firebase/messaging-compat",Q2e="@firebase/performance",H2e="@firebase/performance-compat",j2e="@firebase/remote-config",G2e="@firebase/remote-config-compat",K2e="@firebase/storage",W2e="@firebase/storage-compat",q2e="@firebase/firestore",X2e="@firebase/vertexai-preview",Z2e="@firebase/firestore-compat",Y2e="firebase",J2e="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2="[DEFAULT]",$2e={[y2]:"fire-core",[S2e]:"fire-core-compat",[T2e]:"fire-analytics",[E2e]:"fire-analytics-compat",[F2e]:"fire-app-check",[I2e]:"fire-app-check-compat",[P2e]:"fire-auth",[M2e]:"fire-auth-compat",[R2e]:"fire-rtdb",[k2e]:"fire-data-connect",[D2e]:"fire-rtdb-compat",[L2e]:"fire-fn",[O2e]:"fire-fn-compat",[U2e]:"fire-iid",[z2e]:"fire-iid-compat",[V2e]:"fire-fcm",[N2e]:"fire-fcm-compat",[Q2e]:"fire-perf",[H2e]:"fire-perf-compat",[j2e]:"fire-rc",[G2e]:"fire-rc-compat",[K2e]:"fire-gcs",[W2e]:"fire-gcs-compat",[q2e]:"fire-fst",[Z2e]:"fire-fst-compat",[X2e]:"fire-vertex","fire-js":"fire-js",[Y2e]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT=new Map,eLe=new Map,_2=new Map;function Gj(e,t){try{e.container.addComponent(t)}catch(r){Ad.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function WT(e){const t=e.name;if(_2.has(t))return Ad.debug(`There were multiple attempts to register component ${t}.`),!1;_2.set(t,e);for(const r of KT.values())Gj(r,e);for(const r of eLe.values())Gj(r,e);return!0}function tLe(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rLe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jf=new A$("app","Firebase",rLe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nLe{constructor(t,r,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Tb("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw jf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iLe=J2e;function m$(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n=Object.assign({name:v2,automaticDataCollectionEnabled:!1},t),i=n.name;if(typeof i!="string"||!i)throw jf.create("bad-app-name",{appName:String(i)});if(r||(r=h$()),!r)throw jf.create("no-options");const l=KT.get(i);if(l){if(p2(r,l.options)&&p2(n,l.config))return l;throw jf.create("duplicate-app",{appName:i})}const h=new l2e(i);for(const o of _2.values())h.addComponent(o);const p=new nLe(r,n,h);return KT.set(i,p),p}function oLe(e=v2){const t=KT.get(e);if(!t&&e===v2&&h$())return m$();if(!t)throw jf.create("no-app",{appName:e});return t}function wy(e,t,r){var n;let i=(n=$2e[e])!==null&&n!==void 0?n:e;r&&(i+=`-${r}`);const l=i.match(/\s|\//),h=t.match(/\s|\//);if(l||h){const p=[`Unable to register library "${i}" with version "${t}":`];l&&p.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&h&&p.push("and"),h&&p.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ad.warn(p.join(" "));return}WT(new Tb(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sLe="firebase-heartbeat-database",aLe=1,Ib="firebase-heartbeat-store";let Rk=null;function g$(){return Rk||(Rk=x2e(sLe,aLe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Ib)}catch(r){console.warn(r)}}}}).catch(e=>{throw jf.create("idb-open",{originalErrorMessage:e.message})})),Rk}async function lLe(e){try{const r=(await g$()).transaction(Ib),n=await r.objectStore(Ib).get(y$(e));return await r.done,n}catch(t){if(t instanceof Av)Ad.warn(t.message);else{const r=jf.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Ad.warn(r.message)}}}async function Kj(e,t){try{const n=(await g$()).transaction(Ib,"readwrite");await n.objectStore(Ib).put(t,y$(e)),await n.done}catch(r){if(r instanceof Av)Ad.warn(r.message);else{const n=jf.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Ad.warn(n.message)}}}function y$(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cLe=1024,uLe=30*24*60*60*1e3;class hLe{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new dLe(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Wj();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const p=new Date(h.date).valueOf();return Date.now()-p<=uLe}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Ad.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Wj(),{heartbeatsToSend:n,unsentEntries:i}=ALe(this._heartbeatsCache.heartbeats),l=GT(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(r){return Ad.warn(r),""}}}function Wj(){return new Date().toISOString().substring(0,10)}function ALe(e,t=cLe){const r=[];let n=e.slice();for(const i of e){const l=r.find(h=>h.agent===i.agent);if(l){if(l.dates.push(i.date),qj(r)>t){l.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),qj(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class dLe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return e2e()?t2e().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await lLe(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return Kj(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return Kj(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function qj(e){return GT(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fLe(e){WT(new Tb("platform-logger",t=>new B2e(t),"PRIVATE")),WT(new Tb("heartbeat",t=>new hLe(t),"PRIVATE")),wy(y2,jj,e),wy(y2,jj,"esm2017"),wy("fire-js","")}fLe("");var pLe="firebase",mLe="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wy(pLe,mLe,"app");var Xj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var v$;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(se,re){function de(){}de.prototype=re.prototype,se.D=re.prototype,se.prototype=new de,se.prototype.constructor=se,se.C=function(_e,ve,Pe){for(var Ee=Array(arguments.length-2),Ht=2;Ht<arguments.length;Ht++)Ee[Ht-2]=arguments[Ht];return re.prototype[ve].apply(_e,Ee)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(se,re,de){de||(de=0);var _e=Array(16);if(typeof re=="string")for(var ve=0;16>ve;++ve)_e[ve]=re.charCodeAt(de++)|re.charCodeAt(de++)<<8|re.charCodeAt(de++)<<16|re.charCodeAt(de++)<<24;else for(ve=0;16>ve;++ve)_e[ve]=re[de++]|re[de++]<<8|re[de++]<<16|re[de++]<<24;re=se.g[0],de=se.g[1],ve=se.g[2];var Pe=se.g[3],Ee=re+(Pe^de&(ve^Pe))+_e[0]+3614090360&4294967295;re=de+(Ee<<7&4294967295|Ee>>>25),Ee=Pe+(ve^re&(de^ve))+_e[1]+3905402710&4294967295,Pe=re+(Ee<<12&4294967295|Ee>>>20),Ee=ve+(de^Pe&(re^de))+_e[2]+606105819&4294967295,ve=Pe+(Ee<<17&4294967295|Ee>>>15),Ee=de+(re^ve&(Pe^re))+_e[3]+3250441966&4294967295,de=ve+(Ee<<22&4294967295|Ee>>>10),Ee=re+(Pe^de&(ve^Pe))+_e[4]+4118548399&4294967295,re=de+(Ee<<7&4294967295|Ee>>>25),Ee=Pe+(ve^re&(de^ve))+_e[5]+1200080426&4294967295,Pe=re+(Ee<<12&4294967295|Ee>>>20),Ee=ve+(de^Pe&(re^de))+_e[6]+2821735955&4294967295,ve=Pe+(Ee<<17&4294967295|Ee>>>15),Ee=de+(re^ve&(Pe^re))+_e[7]+4249261313&4294967295,de=ve+(Ee<<22&4294967295|Ee>>>10),Ee=re+(Pe^de&(ve^Pe))+_e[8]+1770035416&4294967295,re=de+(Ee<<7&4294967295|Ee>>>25),Ee=Pe+(ve^re&(de^ve))+_e[9]+2336552879&4294967295,Pe=re+(Ee<<12&4294967295|Ee>>>20),Ee=ve+(de^Pe&(re^de))+_e[10]+4294925233&4294967295,ve=Pe+(Ee<<17&4294967295|Ee>>>15),Ee=de+(re^ve&(Pe^re))+_e[11]+2304563134&4294967295,de=ve+(Ee<<22&4294967295|Ee>>>10),Ee=re+(Pe^de&(ve^Pe))+_e[12]+1804603682&4294967295,re=de+(Ee<<7&4294967295|Ee>>>25),Ee=Pe+(ve^re&(de^ve))+_e[13]+4254626195&4294967295,Pe=re+(Ee<<12&4294967295|Ee>>>20),Ee=ve+(de^Pe&(re^de))+_e[14]+2792965006&4294967295,ve=Pe+(Ee<<17&4294967295|Ee>>>15),Ee=de+(re^ve&(Pe^re))+_e[15]+1236535329&4294967295,de=ve+(Ee<<22&4294967295|Ee>>>10),Ee=re+(ve^Pe&(de^ve))+_e[1]+4129170786&4294967295,re=de+(Ee<<5&4294967295|Ee>>>27),Ee=Pe+(de^ve&(re^de))+_e[6]+3225465664&4294967295,Pe=re+(Ee<<9&4294967295|Ee>>>23),Ee=ve+(re^de&(Pe^re))+_e[11]+643717713&4294967295,ve=Pe+(Ee<<14&4294967295|Ee>>>18),Ee=de+(Pe^re&(ve^Pe))+_e[0]+3921069994&4294967295,de=ve+(Ee<<20&4294967295|Ee>>>12),Ee=re+(ve^Pe&(de^ve))+_e[5]+3593408605&4294967295,re=de+(Ee<<5&4294967295|Ee>>>27),Ee=Pe+(de^ve&(re^de))+_e[10]+38016083&4294967295,Pe=re+(Ee<<9&4294967295|Ee>>>23),Ee=ve+(re^de&(Pe^re))+_e[15]+3634488961&4294967295,ve=Pe+(Ee<<14&4294967295|Ee>>>18),Ee=de+(Pe^re&(ve^Pe))+_e[4]+3889429448&4294967295,de=ve+(Ee<<20&4294967295|Ee>>>12),Ee=re+(ve^Pe&(de^ve))+_e[9]+568446438&4294967295,re=de+(Ee<<5&4294967295|Ee>>>27),Ee=Pe+(de^ve&(re^de))+_e[14]+3275163606&4294967295,Pe=re+(Ee<<9&4294967295|Ee>>>23),Ee=ve+(re^de&(Pe^re))+_e[3]+4107603335&4294967295,ve=Pe+(Ee<<14&4294967295|Ee>>>18),Ee=de+(Pe^re&(ve^Pe))+_e[8]+1163531501&4294967295,de=ve+(Ee<<20&4294967295|Ee>>>12),Ee=re+(ve^Pe&(de^ve))+_e[13]+2850285829&4294967295,re=de+(Ee<<5&4294967295|Ee>>>27),Ee=Pe+(de^ve&(re^de))+_e[2]+4243563512&4294967295,Pe=re+(Ee<<9&4294967295|Ee>>>23),Ee=ve+(re^de&(Pe^re))+_e[7]+1735328473&4294967295,ve=Pe+(Ee<<14&4294967295|Ee>>>18),Ee=de+(Pe^re&(ve^Pe))+_e[12]+2368359562&4294967295,de=ve+(Ee<<20&4294967295|Ee>>>12),Ee=re+(de^ve^Pe)+_e[5]+4294588738&4294967295,re=de+(Ee<<4&4294967295|Ee>>>28),Ee=Pe+(re^de^ve)+_e[8]+2272392833&4294967295,Pe=re+(Ee<<11&4294967295|Ee>>>21),Ee=ve+(Pe^re^de)+_e[11]+1839030562&4294967295,ve=Pe+(Ee<<16&4294967295|Ee>>>16),Ee=de+(ve^Pe^re)+_e[14]+4259657740&4294967295,de=ve+(Ee<<23&4294967295|Ee>>>9),Ee=re+(de^ve^Pe)+_e[1]+2763975236&4294967295,re=de+(Ee<<4&4294967295|Ee>>>28),Ee=Pe+(re^de^ve)+_e[4]+1272893353&4294967295,Pe=re+(Ee<<11&4294967295|Ee>>>21),Ee=ve+(Pe^re^de)+_e[7]+4139469664&4294967295,ve=Pe+(Ee<<16&4294967295|Ee>>>16),Ee=de+(ve^Pe^re)+_e[10]+3200236656&4294967295,de=ve+(Ee<<23&4294967295|Ee>>>9),Ee=re+(de^ve^Pe)+_e[13]+681279174&4294967295,re=de+(Ee<<4&4294967295|Ee>>>28),Ee=Pe+(re^de^ve)+_e[0]+3936430074&4294967295,Pe=re+(Ee<<11&4294967295|Ee>>>21),Ee=ve+(Pe^re^de)+_e[3]+3572445317&4294967295,ve=Pe+(Ee<<16&4294967295|Ee>>>16),Ee=de+(ve^Pe^re)+_e[6]+76029189&4294967295,de=ve+(Ee<<23&4294967295|Ee>>>9),Ee=re+(de^ve^Pe)+_e[9]+3654602809&4294967295,re=de+(Ee<<4&4294967295|Ee>>>28),Ee=Pe+(re^de^ve)+_e[12]+3873151461&4294967295,Pe=re+(Ee<<11&4294967295|Ee>>>21),Ee=ve+(Pe^re^de)+_e[15]+530742520&4294967295,ve=Pe+(Ee<<16&4294967295|Ee>>>16),Ee=de+(ve^Pe^re)+_e[2]+3299628645&4294967295,de=ve+(Ee<<23&4294967295|Ee>>>9),Ee=re+(ve^(de|~Pe))+_e[0]+4096336452&4294967295,re=de+(Ee<<6&4294967295|Ee>>>26),Ee=Pe+(de^(re|~ve))+_e[7]+1126891415&4294967295,Pe=re+(Ee<<10&4294967295|Ee>>>22),Ee=ve+(re^(Pe|~de))+_e[14]+2878612391&4294967295,ve=Pe+(Ee<<15&4294967295|Ee>>>17),Ee=de+(Pe^(ve|~re))+_e[5]+4237533241&4294967295,de=ve+(Ee<<21&4294967295|Ee>>>11),Ee=re+(ve^(de|~Pe))+_e[12]+1700485571&4294967295,re=de+(Ee<<6&4294967295|Ee>>>26),Ee=Pe+(de^(re|~ve))+_e[3]+2399980690&4294967295,Pe=re+(Ee<<10&4294967295|Ee>>>22),Ee=ve+(re^(Pe|~de))+_e[10]+4293915773&4294967295,ve=Pe+(Ee<<15&4294967295|Ee>>>17),Ee=de+(Pe^(ve|~re))+_e[1]+2240044497&4294967295,de=ve+(Ee<<21&4294967295|Ee>>>11),Ee=re+(ve^(de|~Pe))+_e[8]+1873313359&4294967295,re=de+(Ee<<6&4294967295|Ee>>>26),Ee=Pe+(de^(re|~ve))+_e[15]+4264355552&4294967295,Pe=re+(Ee<<10&4294967295|Ee>>>22),Ee=ve+(re^(Pe|~de))+_e[6]+2734768916&4294967295,ve=Pe+(Ee<<15&4294967295|Ee>>>17),Ee=de+(Pe^(ve|~re))+_e[13]+1309151649&4294967295,de=ve+(Ee<<21&4294967295|Ee>>>11),Ee=re+(ve^(de|~Pe))+_e[4]+4149444226&4294967295,re=de+(Ee<<6&4294967295|Ee>>>26),Ee=Pe+(de^(re|~ve))+_e[11]+3174756917&4294967295,Pe=re+(Ee<<10&4294967295|Ee>>>22),Ee=ve+(re^(Pe|~de))+_e[2]+718787259&4294967295,ve=Pe+(Ee<<15&4294967295|Ee>>>17),Ee=de+(Pe^(ve|~re))+_e[9]+3951481745&4294967295,se.g[0]=se.g[0]+re&4294967295,se.g[1]=se.g[1]+(ve+(Ee<<21&4294967295|Ee>>>11))&4294967295,se.g[2]=se.g[2]+ve&4294967295,se.g[3]=se.g[3]+Pe&4294967295}n.prototype.u=function(se,re){re===void 0&&(re=se.length);for(var de=re-this.blockSize,_e=this.B,ve=this.h,Pe=0;Pe<re;){if(ve==0)for(;Pe<=de;)i(this,se,Pe),Pe+=this.blockSize;if(typeof se=="string"){for(;Pe<re;)if(_e[ve++]=se.charCodeAt(Pe++),ve==this.blockSize){i(this,_e),ve=0;break}}else for(;Pe<re;)if(_e[ve++]=se[Pe++],ve==this.blockSize){i(this,_e),ve=0;break}}this.h=ve,this.o+=re},n.prototype.v=function(){var se=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);se[0]=128;for(var re=1;re<se.length-8;++re)se[re]=0;var de=8*this.o;for(re=se.length-8;re<se.length;++re)se[re]=de&255,de/=256;for(this.u(se),se=Array(16),re=de=0;4>re;++re)for(var _e=0;32>_e;_e+=8)se[de++]=this.g[re]>>>_e&255;return se};function l(se,re){var de=p;return Object.prototype.hasOwnProperty.call(de,se)?de[se]:de[se]=re(se)}function h(se,re){this.h=re;for(var de=[],_e=!0,ve=se.length-1;0<=ve;ve--){var Pe=se[ve]|0;_e&&Pe==re||(de[ve]=Pe,_e=!1)}this.g=de}var p={};function o(se){return-128<=se&&128>se?l(se,function(re){return new h([re|0],0>re?-1:0)}):new h([se|0],0>se?-1:0)}function _(se){if(isNaN(se)||!isFinite(se))return M;if(0>se)return $(_(-se));for(var re=[],de=1,_e=0;se>=de;_e++)re[_e]=se/de|0,de*=4294967296;return new h(re,0)}function C(se,re){if(se.length==0)throw Error("number format error: empty string");if(re=re||10,2>re||36<re)throw Error("radix out of range: "+re);if(se.charAt(0)=="-")return $(C(se.substring(1),re));if(0<=se.indexOf("-"))throw Error('number format error: interior "-" character');for(var de=_(Math.pow(re,8)),_e=M,ve=0;ve<se.length;ve+=8){var Pe=Math.min(8,se.length-ve),Ee=parseInt(se.substring(ve,ve+Pe),re);8>Pe?(Pe=_(Math.pow(re,Pe)),_e=_e.j(Pe).add(_(Ee))):(_e=_e.j(de),_e=_e.add(_(Ee)))}return _e}var M=o(0),L=o(1),z=o(16777216);e=h.prototype,e.m=function(){if(K(this))return-$(this).m();for(var se=0,re=1,de=0;de<this.g.length;de++){var _e=this.i(de);se+=(0<=_e?_e:4294967296+_e)*re,re*=4294967296}return se},e.toString=function(se){if(se=se||10,2>se||36<se)throw Error("radix out of range: "+se);if(j(this))return"0";if(K(this))return"-"+$(this).toString(se);for(var re=_(Math.pow(se,6)),de=this,_e="";;){var ve=fe(de,re).g;de=q(de,ve.j(re));var Pe=((0<de.g.length?de.g[0]:de.h)>>>0).toString(se);if(de=ve,j(de))return Pe+_e;for(;6>Pe.length;)Pe="0"+Pe;_e=Pe+_e}},e.i=function(se){return 0>se?0:se<this.g.length?this.g[se]:this.h};function j(se){if(se.h!=0)return!1;for(var re=0;re<se.g.length;re++)if(se.g[re]!=0)return!1;return!0}function K(se){return se.h==-1}e.l=function(se){return se=q(this,se),K(se)?-1:j(se)?0:1};function $(se){for(var re=se.g.length,de=[],_e=0;_e<re;_e++)de[_e]=~se.g[_e];return new h(de,~se.h).add(L)}e.abs=function(){return K(this)?$(this):this},e.add=function(se){for(var re=Math.max(this.g.length,se.g.length),de=[],_e=0,ve=0;ve<=re;ve++){var Pe=_e+(this.i(ve)&65535)+(se.i(ve)&65535),Ee=(Pe>>>16)+(this.i(ve)>>>16)+(se.i(ve)>>>16);_e=Ee>>>16,Pe&=65535,Ee&=65535,de[ve]=Ee<<16|Pe}return new h(de,de[de.length-1]&-2147483648?-1:0)};function q(se,re){return se.add($(re))}e.j=function(se){if(j(this)||j(se))return M;if(K(this))return K(se)?$(this).j($(se)):$($(this).j(se));if(K(se))return $(this.j($(se)));if(0>this.l(z)&&0>se.l(z))return _(this.m()*se.m());for(var re=this.g.length+se.g.length,de=[],_e=0;_e<2*re;_e++)de[_e]=0;for(_e=0;_e<this.g.length;_e++)for(var ve=0;ve<se.g.length;ve++){var Pe=this.i(_e)>>>16,Ee=this.i(_e)&65535,Ht=se.i(ve)>>>16,Xt=se.i(ve)&65535;de[2*_e+2*ve]+=Ee*Xt,ee(de,2*_e+2*ve),de[2*_e+2*ve+1]+=Pe*Xt,ee(de,2*_e+2*ve+1),de[2*_e+2*ve+1]+=Ee*Ht,ee(de,2*_e+2*ve+1),de[2*_e+2*ve+2]+=Pe*Ht,ee(de,2*_e+2*ve+2)}for(_e=0;_e<re;_e++)de[_e]=de[2*_e+1]<<16|de[2*_e];for(_e=re;_e<2*re;_e++)de[_e]=0;return new h(de,0)};function ee(se,re){for(;(se[re]&65535)!=se[re];)se[re+1]+=se[re]>>>16,se[re]&=65535,re++}function ie(se,re){this.g=se,this.h=re}function fe(se,re){if(j(re))throw Error("division by zero");if(j(se))return new ie(M,M);if(K(se))return re=fe($(se),re),new ie($(re.g),$(re.h));if(K(re))return re=fe(se,$(re)),new ie($(re.g),re.h);if(30<se.g.length){if(K(se)||K(re))throw Error("slowDivide_ only works with positive integers.");for(var de=L,_e=re;0>=_e.l(se);)de=me(de),_e=me(_e);var ve=ye(de,1),Pe=ye(_e,1);for(_e=ye(_e,2),de=ye(de,2);!j(_e);){var Ee=Pe.add(_e);0>=Ee.l(se)&&(ve=ve.add(de),Pe=Ee),_e=ye(_e,1),de=ye(de,1)}return re=q(se,ve.j(re)),new ie(ve,re)}for(ve=M;0<=se.l(re);){for(de=Math.max(1,Math.floor(se.m()/re.m())),_e=Math.ceil(Math.log(de)/Math.LN2),_e=48>=_e?1:Math.pow(2,_e-48),Pe=_(de),Ee=Pe.j(re);K(Ee)||0<Ee.l(se);)de-=_e,Pe=_(de),Ee=Pe.j(re);j(Pe)&&(Pe=L),ve=ve.add(Pe),se=q(se,Ee)}return new ie(ve,se)}e.A=function(se){return fe(this,se).h},e.and=function(se){for(var re=Math.max(this.g.length,se.g.length),de=[],_e=0;_e<re;_e++)de[_e]=this.i(_e)&se.i(_e);return new h(de,this.h&se.h)},e.or=function(se){for(var re=Math.max(this.g.length,se.g.length),de=[],_e=0;_e<re;_e++)de[_e]=this.i(_e)|se.i(_e);return new h(de,this.h|se.h)},e.xor=function(se){for(var re=Math.max(this.g.length,se.g.length),de=[],_e=0;_e<re;_e++)de[_e]=this.i(_e)^se.i(_e);return new h(de,this.h^se.h)};function me(se){for(var re=se.g.length+1,de=[],_e=0;_e<re;_e++)de[_e]=se.i(_e)<<1|se.i(_e-1)>>>31;return new h(de,se.h)}function ye(se,re){var de=re>>5;re%=32;for(var _e=se.g.length-de,ve=[],Pe=0;Pe<_e;Pe++)ve[Pe]=0<re?se.i(Pe+de)>>>re|se.i(Pe+de+1)<<32-re:se.i(Pe+de);return new h(ve,se.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=C,v$=h}).apply(typeof Xj<"u"?Xj:typeof self<"u"?self:typeof window<"u"?window:{});var wS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _$,q1,x$,xE,x2,b$,w$,B$;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(U,ne,ue){return U==Array.prototype||U==Object.prototype||(U[ne]=ue.value),U};function r(U){U=[typeof globalThis=="object"&&globalThis,U,typeof window=="object"&&window,typeof self=="object"&&self,typeof wS=="object"&&wS];for(var ne=0;ne<U.length;++ne){var ue=U[ne];if(ue&&ue.Math==Math)return ue}throw Error("Cannot find global object")}var n=r(this);function i(U,ne){if(ne)e:{var ue=n;U=U.split(".");for(var Se=0;Se<U.length-1;Se++){var Bt=U[Se];if(!(Bt in ue))break e;ue=ue[Bt]}U=U[U.length-1],Se=ue[U],ne=ne(Se),ne!=Se&&ne!=null&&t(ue,U,{configurable:!0,writable:!0,value:ne})}}function l(U,ne){U instanceof String&&(U+="");var ue=0,Se=!1,Bt={next:function(){if(!Se&&ue<U.length){var At=ue++;return{value:ne(At,U[At]),done:!1}}return Se=!0,{done:!0,value:void 0}}};return Bt[Symbol.iterator]=function(){return Bt},Bt}i("Array.prototype.values",function(U){return U||function(){return l(this,function(ne,ue){return ue})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},p=this||self;function o(U){var ne=typeof U;return ne=ne!="object"?ne:U?Array.isArray(U)?"array":ne:"null",ne=="array"||ne=="object"&&typeof U.length=="number"}function _(U){var ne=typeof U;return ne=="object"&&U!=null||ne=="function"}function C(U,ne,ue){return U.call.apply(U.bind,arguments)}function M(U,ne,ue){if(!U)throw Error();if(2<arguments.length){var Se=Array.prototype.slice.call(arguments,2);return function(){var Bt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Bt,Se),U.apply(ne,Bt)}}return function(){return U.apply(ne,arguments)}}function L(U,ne,ue){return L=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?C:M,L.apply(null,arguments)}function z(U,ne){var ue=Array.prototype.slice.call(arguments,1);return function(){var Se=ue.slice();return Se.push.apply(Se,arguments),U.apply(this,Se)}}function j(U,ne){function ue(){}ue.prototype=ne.prototype,U.aa=ne.prototype,U.prototype=new ue,U.prototype.constructor=U,U.Qb=function(Se,Bt,At){for(var fr=Array(arguments.length-2),$n=2;$n<arguments.length;$n++)fr[$n-2]=arguments[$n];return ne.prototype[Bt].apply(Se,fr)}}function K(U){const ne=U.length;if(0<ne){const ue=Array(ne);for(let Se=0;Se<ne;Se++)ue[Se]=U[Se];return ue}return[]}function $(U,ne){for(let ue=1;ue<arguments.length;ue++){const Se=arguments[ue];if(o(Se)){const Bt=U.length||0,At=Se.length||0;U.length=Bt+At;for(let fr=0;fr<At;fr++)U[Bt+fr]=Se[fr]}else U.push(Se)}}class q{constructor(ne,ue){this.i=ne,this.j=ue,this.h=0,this.g=null}get(){let ne;return 0<this.h?(this.h--,ne=this.g,this.g=ne.next,ne.next=null):ne=this.i(),ne}}function ee(U){return/^[\s\xa0]*$/.test(U)}function ie(){var U=p.navigator;return U&&(U=U.userAgent)?U:""}function fe(U){return fe[" "](U),U}fe[" "]=function(){};var me=ie().indexOf("Gecko")!=-1&&!(ie().toLowerCase().indexOf("webkit")!=-1&&ie().indexOf("Edge")==-1)&&!(ie().indexOf("Trident")!=-1||ie().indexOf("MSIE")!=-1)&&ie().indexOf("Edge")==-1;function ye(U,ne,ue){for(const Se in U)ne.call(ue,U[Se],Se,U)}function se(U,ne){for(const ue in U)ne.call(void 0,U[ue],ue,U)}function re(U){const ne={};for(const ue in U)ne[ue]=U[ue];return ne}const de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _e(U,ne){let ue,Se;for(let Bt=1;Bt<arguments.length;Bt++){Se=arguments[Bt];for(ue in Se)U[ue]=Se[ue];for(let At=0;At<de.length;At++)ue=de[At],Object.prototype.hasOwnProperty.call(Se,ue)&&(U[ue]=Se[ue])}}function ve(U){var ne=1;U=U.split(":");const ue=[];for(;0<ne&&U.length;)ue.push(U.shift()),ne--;return U.length&&ue.push(U.join(":")),ue}function Pe(U){p.setTimeout(()=>{throw U},0)}function Ee(){var U=Yt;let ne=null;return U.g&&(ne=U.g,U.g=U.g.next,U.g||(U.h=null),ne.next=null),ne}class Ht{constructor(){this.h=this.g=null}add(ne,ue){const Se=Xt.get();Se.set(ne,ue),this.h?this.h.next=Se:this.g=Se,this.h=Se}}var Xt=new q(()=>new gt,U=>U.reset());class gt{constructor(){this.next=this.g=this.h=null}set(ne,ue){this.h=ne,this.g=ue,this.next=null}reset(){this.next=this.g=this.h=null}}let jt,Mt=!1,Yt=new Ht,ht=()=>{const U=p.Promise.resolve(void 0);jt=()=>{U.then(lr)}};var lr=()=>{for(var U;U=Ee();){try{U.h.call(U.g)}catch(ue){Pe(ue)}var ne=Xt;ne.j(U),100>ne.h&&(ne.h++,U.next=ne.g,ne.g=U)}Mt=!1};function ir(){this.s=this.s,this.C=this.C}ir.prototype.s=!1,ir.prototype.ma=function(){this.s||(this.s=!0,this.N())},ir.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $t(U,ne){this.type=U,this.g=this.target=ne,this.defaultPrevented=!1}$t.prototype.h=function(){this.defaultPrevented=!0};var Vt=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var U=!1,ne=Object.defineProperty({},"passive",{get:function(){U=!0}});try{const ue=()=>{};p.addEventListener("test",ue,ne),p.removeEventListener("test",ue,ne)}catch{}return U}();function Dr(U,ne){if($t.call(this,U?U.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,U){var ue=this.type=U.type,Se=U.changedTouches&&U.changedTouches.length?U.changedTouches[0]:null;if(this.target=U.target||U.srcElement,this.g=ne,ne=U.relatedTarget){if(me){e:{try{fe(ne.nodeName);var Bt=!0;break e}catch{}Bt=!1}Bt||(ne=null)}}else ue=="mouseover"?ne=U.fromElement:ue=="mouseout"&&(ne=U.toElement);this.relatedTarget=ne,Se?(this.clientX=Se.clientX!==void 0?Se.clientX:Se.pageX,this.clientY=Se.clientY!==void 0?Se.clientY:Se.pageY,this.screenX=Se.screenX||0,this.screenY=Se.screenY||0):(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0),this.button=U.button,this.key=U.key||"",this.ctrlKey=U.ctrlKey,this.altKey=U.altKey,this.shiftKey=U.shiftKey,this.metaKey=U.metaKey,this.pointerId=U.pointerId||0,this.pointerType=typeof U.pointerType=="string"?U.pointerType:kr[U.pointerType]||"",this.state=U.state,this.i=U,U.defaultPrevented&&Dr.aa.h.call(this)}}j(Dr,$t);var kr={2:"touch",3:"pen",4:"mouse"};Dr.prototype.h=function(){Dr.aa.h.call(this);var U=this.i;U.preventDefault?U.preventDefault():U.returnValue=!1};var Zr="closure_listenable_"+(1e6*Math.random()|0),Lr=0;function Ao(U,ne,ue,Se,Bt){this.listener=U,this.proxy=null,this.src=ne,this.type=ue,this.capture=!!Se,this.ha=Bt,this.key=++Lr,this.da=this.fa=!1}function ji(U){U.da=!0,U.listener=null,U.proxy=null,U.src=null,U.ha=null}function Qe(U){this.src=U,this.g={},this.h=0}Qe.prototype.add=function(U,ne,ue,Se,Bt){var At=U.toString();U=this.g[At],U||(U=this.g[At]=[],this.h++);var fr=Io(U,ne,Se,Bt);return-1<fr?(ne=U[fr],ue||(ne.fa=!1)):(ne=new Ao(ne,this.src,At,!!Se,Bt),ne.fa=ue,U.push(ne)),ne};function no(U,ne){var ue=ne.type;if(ue in U.g){var Se=U.g[ue],Bt=Array.prototype.indexOf.call(Se,ne,void 0),At;(At=0<=Bt)&&Array.prototype.splice.call(Se,Bt,1),At&&(ji(ne),U.g[ue].length==0&&(delete U.g[ue],U.h--))}}function Io(U,ne,ue,Se){for(var Bt=0;Bt<U.length;++Bt){var At=U[Bt];if(!At.da&&At.listener==ne&&At.capture==!!ue&&At.ha==Se)return Bt}return-1}var ms="closure_lm_"+(1e6*Math.random()|0),Ot={};function Bs(U,ne,ue,Se,Bt){if(Array.isArray(ne)){for(var At=0;At<ne.length;At++)Bs(U,ne[At],ue,Se,Bt);return null}return ue=Er(ue),U&&U[Zr]?U.K(ne,ue,_(Se)?!!Se.capture:!!Se,Bt):Oi(U,ne,ue,!1,Se,Bt)}function Oi(U,ne,ue,Se,Bt,At){if(!ne)throw Error("Invalid event type");var fr=_(Bt)?!!Bt.capture:!!Bt,$n=io(U);if($n||(U[ms]=$n=new Qe(U)),ue=$n.add(ne,ue,Se,fr,At),ue.proxy)return ue;if(Se=Fo(),ue.proxy=Se,Se.src=U,Se.listener=ue,U.addEventListener)Vt||(Bt=fr),Bt===void 0&&(Bt=!1),U.addEventListener(ne.toString(),Se,Bt);else if(U.attachEvent)U.attachEvent(Ji(ne.toString()),Se);else if(U.addListener&&U.removeListener)U.addListener(Se);else throw Error("addEventListener and attachEvent are unavailable.");return ue}function Fo(){function U(ue){return ne.call(U.src,U.listener,ue)}const ne=Po;return U}function Pr(U,ne,ue,Se,Bt){if(Array.isArray(ne))for(var At=0;At<ne.length;At++)Pr(U,ne[At],ue,Se,Bt);else Se=_(Se)?!!Se.capture:!!Se,ue=Er(ue),U&&U[Zr]?(U=U.i,ne=String(ne).toString(),ne in U.g&&(At=U.g[ne],ue=Io(At,ue,Se,Bt),-1<ue&&(ji(At[ue]),Array.prototype.splice.call(At,ue,1),At.length==0&&(delete U.g[ne],U.h--)))):U&&(U=io(U))&&(ne=U.g[ne.toString()],U=-1,ne&&(U=Io(ne,ue,Se,Bt)),(ue=-1<U?ne[U]:null)&&nn(ue))}function nn(U){if(typeof U!="number"&&U&&!U.da){var ne=U.src;if(ne&&ne[Zr])no(ne.i,U);else{var ue=U.type,Se=U.proxy;ne.removeEventListener?ne.removeEventListener(ue,Se,U.capture):ne.detachEvent?ne.detachEvent(Ji(ue),Se):ne.addListener&&ne.removeListener&&ne.removeListener(Se),(ue=io(ne))?(no(ue,U),ue.h==0&&(ue.src=null,ne[ms]=null)):ji(U)}}}function Ji(U){return U in Ot?Ot[U]:Ot[U]="on"+U}function Po(U,ne){if(U.da)U=!0;else{ne=new Dr(ne,this);var ue=U.listener,Se=U.ha||U.src;U.fa&&nn(U),U=ue.call(Se,ne)}return U}function io(U){return U=U[ms],U instanceof Qe?U:null}var Cs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Er(U){return typeof U=="function"?U:(U[Cs]||(U[Cs]=function(ne){return U.handleEvent(ne)}),U[Cs])}function Di(){ir.call(this),this.i=new Qe(this),this.M=this,this.F=null}j(Di,ir),Di.prototype[Zr]=!0,Di.prototype.removeEventListener=function(U,ne,ue,Se){Pr(this,U,ne,ue,Se)};function yi(U,ne){var ue,Se=U.F;if(Se)for(ue=[];Se;Se=Se.F)ue.push(Se);if(U=U.M,Se=ne.type||ne,typeof ne=="string")ne=new $t(ne,U);else if(ne instanceof $t)ne.target=ne.target||U;else{var Bt=ne;ne=new $t(Se,U),_e(ne,Bt)}if(Bt=!0,ue)for(var At=ue.length-1;0<=At;At--){var fr=ne.g=ue[At];Bt=Go(fr,Se,!0,ne)&&Bt}if(fr=ne.g=U,Bt=Go(fr,Se,!0,ne)&&Bt,Bt=Go(fr,Se,!1,ne)&&Bt,ue)for(At=0;At<ue.length;At++)fr=ne.g=ue[At],Bt=Go(fr,Se,!1,ne)&&Bt}Di.prototype.N=function(){if(Di.aa.N.call(this),this.i){var U=this.i,ne;for(ne in U.g){for(var ue=U.g[ne],Se=0;Se<ue.length;Se++)ji(ue[Se]);delete U.g[ne],U.h--}}this.F=null},Di.prototype.K=function(U,ne,ue,Se){return this.i.add(String(U),ne,!1,ue,Se)},Di.prototype.L=function(U,ne,ue,Se){return this.i.add(String(U),ne,!0,ue,Se)};function Go(U,ne,ue,Se){if(ne=U.i.g[String(ne)],!ne)return!0;ne=ne.concat();for(var Bt=!0,At=0;At<ne.length;++At){var fr=ne[At];if(fr&&!fr.da&&fr.capture==ue){var $n=fr.listener,pr=fr.ha||fr.src;fr.fa&&no(U.i,fr),Bt=$n.call(pr,Se)!==!1&&Bt}}return Bt&&!Se.defaultPrevented}function xo(U,ne,ue){if(typeof U=="function")ue&&(U=L(U,ue));else if(U&&typeof U.handleEvent=="function")U=L(U.handleEvent,U);else throw Error("Invalid listener argument");return 2147483647<Number(ne)?-1:p.setTimeout(U,ne||0)}function es(U){U.g=xo(()=>{U.g=null,U.i&&(U.i=!1,es(U))},U.l);const ne=U.h;U.h=null,U.m.apply(null,ne)}class wc extends ir{constructor(ne,ue){super(),this.m=ne,this.l=ue,this.h=null,this.i=!1,this.g=null}j(ne){this.h=arguments,this.g?this.i=!0:es(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ra(U){ir.call(this),this.h=U,this.g={}}j(Ra,ir);var Wl=[];function ka(U){ye(U.g,function(ne,ue){this.g.hasOwnProperty(ue)&&nn(ne)},U),U.g={}}Ra.prototype.N=function(){Ra.aa.N.call(this),ka(this)},Ra.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ts=p.JSON.stringify,tl=p.JSON.parse,Qs=class{stringify(U){return p.JSON.stringify(U,void 0)}parse(U){return p.JSON.parse(U,void 0)}};function _l(){}_l.prototype.h=null;function an(U){return U.h||(U.h=U.i())}function Hs(){}var js={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rs(){$t.call(this,"d")}j(rs,$t);function ns(){$t.call(this,"c")}j(ns,$t);var sa={},ql=null;function xl(){return ql=ql||new Di}sa.La="serverreachability";function bl(U){$t.call(this,sa.La,U)}j(bl,$t);function ct(U){const ne=xl();yi(ne,new bl(ne))}sa.STAT_EVENT="statevent";function he(U,ne){$t.call(this,sa.STAT_EVENT,U),this.stat=ne}j(he,$t);function ge(U){const ne=xl();yi(ne,new he(ne,U))}sa.Ma="timingevent";function ke(U,ne){$t.call(this,sa.Ma,U),this.size=ne}j(ke,$t);function Ne(U,ne){if(typeof U!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){U()},ne)}function Ue(){this.g=!0}Ue.prototype.xa=function(){this.g=!1};function Je(U,ne,ue,Se,Bt,At){U.info(function(){if(U.g)if(At)for(var fr="",$n=At.split("&"),pr=0;pr<$n.length;pr++){var Vn=$n[pr].split("=");if(1<Vn.length){var Do=Vn[0];Vn=Vn[1];var qo=Do.split("_");fr=2<=qo.length&&qo[1]=="type"?fr+(Do+"="+Vn+"&"):fr+(Do+"=redacted&")}}else fr=null;else fr=At;return"XMLHTTP REQ ("+Se+") [attempt "+Bt+"]: "+ne+`
`+ue+`
`+fr})}function lt(U,ne,ue,Se,Bt,At,fr){U.info(function(){return"XMLHTTP RESP ("+Se+") [ attempt "+Bt+"]: "+ne+`
`+ue+`
`+At+" "+fr})}function tt(U,ne,ue,Se){U.info(function(){return"XMLHTTP TEXT ("+ne+"): "+vt(U,ue)+(Se?" "+Se:"")})}function ut(U,ne){U.info(function(){return"TIMEOUT: "+ne})}Ue.prototype.info=function(){};function vt(U,ne){if(!U.g)return ne;if(!ne)return null;try{var ue=JSON.parse(ne);if(ue){for(U=0;U<ue.length;U++)if(Array.isArray(ue[U])){var Se=ue[U];if(!(2>Se.length)){var Bt=Se[1];if(Array.isArray(Bt)&&!(1>Bt.length)){var At=Bt[0];if(At!="noop"&&At!="stop"&&At!="close")for(var fr=1;fr<Bt.length;fr++)Bt[fr]=""}}}}return ts(ue)}catch{return ne}}var ft={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Rt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kt;function Wt(){}j(Wt,_l),Wt.prototype.g=function(){return new XMLHttpRequest},Wt.prototype.i=function(){return{}},Kt=new Wt;function vr(U,ne,ue,Se){this.j=U,this.i=ne,this.l=ue,this.R=Se||1,this.U=new Ra(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new wr}function wr(){this.i=null,this.g="",this.h=!1}var Sr={},br={};function yn(U,ne,ue){U.L=1,U.v=Cu(Ss(ne)),U.m=ue,U.P=!0,xn(U,null)}function xn(U,ne){U.F=Date.now(),On(U),U.A=Ss(U.v);var ue=U.A,Se=U.R;Array.isArray(Se)||(Se=[String(Se)]),_r(ue.i,"t",Se),U.C=0,ue=U.j.J,U.h=new wr,U.g=Tu(U.j,ue?ne:null,!U.m),0<U.O&&(U.M=new wc(L(U.Y,U,U.g),U.O)),ne=U.U,ue=U.g,Se=U.ca;var Bt="readystatechange";Array.isArray(Bt)||(Bt&&(Wl[0]=Bt.toString()),Bt=Wl);for(var At=0;At<Bt.length;At++){var fr=Bs(ue,Bt[At],Se||ne.handleEvent,!1,ne.h||ne);if(!fr)break;ne.g[fr.key]=fr}ne=U.H?re(U.H):{},U.m?(U.u||(U.u="POST"),ne["Content-Type"]="application/x-www-form-urlencoded",U.g.ea(U.A,U.u,U.m,ne)):(U.u="GET",U.g.ea(U.A,U.u,null,ne)),ct(),Je(U.i,U.u,U.A,U.l,U.R,U.m)}vr.prototype.ca=function(U){U=U.target;const ne=this.M;ne&&Qn(U)==3?ne.j():this.Y(U)},vr.prototype.Y=function(U){try{if(U==this.g)e:{const qo=Qn(this.g);var ne=this.g.Ba();const Aa=this.g.Z();if(!(3>qo)&&(qo!=3||this.g&&(this.h.h||this.g.oa()||Jn(this.g)))){this.J||qo!=4||ne==7||(ne==8||0>=Aa?ct(3):ct(2)),vi(this);var ue=this.g.Z();this.X=ue;t:if(Rr(this)){var Se=Jn(this.g);U="";var Bt=Se.length,At=Qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mo(this),zi(this);var fr="";break t}this.h.i=new p.TextDecoder}for(ne=0;ne<Bt;ne++)this.h.h=!0,U+=this.h.i.decode(Se[ne],{stream:!(At&&ne==Bt-1)});Se.length=0,this.h.g+=U,this.C=0,fr=this.h.g}else fr=this.g.oa();if(this.o=ue==200,lt(this.i,this.u,this.A,this.l,this.R,qo,ue),this.o){if(this.T&&!this.K){t:{if(this.g){var $n,pr=this.g;if(($n=pr.g?pr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee($n)){var Vn=$n;break t}}Vn=null}if(ue=Vn)tt(this.i,this.l,ue,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,aa(this,ue);else{this.o=!1,this.s=3,ge(12),Mo(this),zi(this);break e}}if(this.P){ue=!0;let ss;for(;!this.J&&this.C<fr.length;)if(ss=vn(this,fr),ss==br){qo==4&&(this.s=4,ge(14),ue=!1),tt(this.i,this.l,null,"[Incomplete Response]");break}else if(ss==Sr){this.s=4,ge(15),tt(this.i,this.l,fr,"[Invalid Chunk]"),ue=!1;break}else tt(this.i,this.l,ss,null),aa(this,ss);if(Rr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qo!=4||fr.length!=0||this.h.h||(this.s=1,ge(16),ue=!1),this.o=this.o&&ue,!ue)tt(this.i,this.l,fr,"[Invalid Chunked Response]"),Mo(this),zi(this);else if(0<fr.length&&!this.W){this.W=!0;var Do=this.j;Do.g==this&&Do.ba&&!Do.M&&(Do.j.info("Great, no buffering proxy detected. Bytes received: "+fr.length),nl(Do),Do.M=!0,ge(11))}}else tt(this.i,this.l,fr,null),aa(this,fr);qo==4&&Mo(this),this.o&&!this.J&&(qo==4?Es(this.j,this):(this.o=!1,On(this)))}else fo(this.g),ue==400&&0<fr.indexOf("Unknown SID")?(this.s=3,ge(12)):(this.s=0,ge(13)),Mo(this),zi(this)}}}catch{}finally{}};function Rr(U){return U.g?U.u=="GET"&&U.L!=2&&U.j.Ca:!1}function vn(U,ne){var ue=U.C,Se=ne.indexOf(`
`,ue);return Se==-1?br:(ue=Number(ne.substring(ue,Se)),isNaN(ue)?Sr:(Se+=1,Se+ue>ne.length?br:(ne=ne.slice(Se,Se+ue),U.C=Se+ue,ne)))}vr.prototype.cancel=function(){this.J=!0,Mo(this)};function On(U){U.S=Date.now()+U.I,Ui(U,U.I)}function Ui(U,ne){if(U.B!=null)throw Error("WatchDog timer not null");U.B=Ne(L(U.ba,U),ne)}function vi(U){U.B&&(p.clearTimeout(U.B),U.B=null)}vr.prototype.ba=function(){this.B=null;const U=Date.now();0<=U-this.S?(ut(this.i,this.A),this.L!=2&&(ct(),ge(17)),Mo(this),this.s=2,zi(this)):Ui(this,this.S-U)};function zi(U){U.j.G==0||U.J||Es(U.j,U)}function Mo(U){vi(U);var ne=U.M;ne&&typeof ne.ma=="function"&&ne.ma(),U.M=null,ka(U.U),U.g&&(ne=U.g,U.g=null,ne.abort(),ne.ma())}function aa(U,ne){try{var ue=U.j;if(ue.G!=0&&(ue.g==U||wl(ue.h,U))){if(!U.K&&wl(ue.h,U)&&ue.G==3){try{var Se=ue.Da.g.parse(ne)}catch{Se=null}if(Array.isArray(Se)&&Se.length==3){var Bt=Se;if(Bt[0]==0){e:if(!ue.u){if(ue.g)if(ue.g.F+3e3<U.F)mA(ue),Wo(ue);else break e;mh(ue),ge(18)}}else ue.za=Bt[1],0<ue.za-ue.T&&37500>Bt[2]&&ue.F&&ue.v==0&&!ue.C&&(ue.C=Ne(L(ue.Za,ue),6e3));if(1>=wu(ue.h)&&ue.ca){try{ue.ca()}catch{}ue.ca=void 0}}else Tl(ue,11)}else if((U.K||ue.g==U)&&mA(ue),!ee(ne))for(Bt=ue.Da.g.parse(ne),ne=0;ne<Bt.length;ne++){let Vn=Bt[ne];if(ue.T=Vn[0],Vn=Vn[1],ue.G==2)if(Vn[0]=="c"){ue.K=Vn[1],ue.ia=Vn[2];const Do=Vn[3];Do!=null&&(ue.la=Do,ue.j.info("VER="+ue.la));const qo=Vn[4];qo!=null&&(ue.Aa=qo,ue.j.info("SVER="+ue.Aa));const Aa=Vn[5];Aa!=null&&typeof Aa=="number"&&0<Aa&&(Se=1.5*Aa,ue.L=Se,ue.j.info("backChannelRequestTimeoutMs_="+Se)),Se=ue;const ss=U.g;if(ss){const Bo=ss.g?ss.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bo){var At=Se.h;At.g||Bo.indexOf("spdy")==-1&&Bo.indexOf("quic")==-1&&Bo.indexOf("h2")==-1||(At.j=At.l,At.g=new Set,At.h&&(Bu(At,At.h),At.h=null))}if(Se.D){const gh=ss.g?ss.g.getResponseHeader("X-HTTP-Session-Id"):null;gh&&(Se.ya=gh,ci(Se.I,Se.D,gh))}}ue.G=3,ue.l&&ue.l.ua(),ue.ba&&(ue.R=Date.now()-U.F,ue.j.info("Handshake RTT: "+ue.R+"ms")),Se=ue;var fr=U;if(Se.qa=Eu(Se,Se.J?Se.ia:null,Se.W),fr.K){fh(Se.h,fr);var $n=fr,pr=Se.L;pr&&($n.I=pr),$n.B&&(vi($n),On($n)),Se.g=fr}else Pc(Se);0<ue.i.length&&$i(ue)}else Vn[0]!="stop"&&Vn[0]!="close"||Tl(ue,7);else ue.G==3&&(Vn[0]=="stop"||Vn[0]=="close"?Vn[0]=="stop"?Tl(ue,7):_i(ue):Vn[0]!="noop"&&ue.l&&ue.l.ta(Vn),ue.v=0)}}ct(4)}catch{}}var dh=class{constructor(U,ne){this.g=U,this.map=ne}};function Xl(U){this.l=U||10,p.PerformanceNavigationTiming?(U=p.performance.getEntriesByType("navigation"),U=0<U.length&&(U[0].nextHopProtocol=="hq"||U[0].nextHopProtocol=="h2")):U=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=U?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zl(U){return U.h?!0:U.g?U.g.size>=U.j:!1}function wu(U){return U.h?1:U.g?U.g.size:0}function wl(U,ne){return U.h?U.h==ne:U.g?U.g.has(ne):!1}function Bu(U,ne){U.g?U.g.add(ne):U.h=ne}function fh(U,ne){U.h&&U.h==ne?U.h=null:U.g&&U.g.has(ne)&&U.g.delete(ne)}Xl.prototype.cancel=function(){if(this.i=Bc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const U of this.g.values())U.cancel();this.g.clear()}};function Bc(U){if(U.h!=null)return U.i.concat(U.h.D);if(U.g!=null&&U.g.size!==0){let ne=U.i;for(const ue of U.g.values())ne=ne.concat(ue.D);return ne}return K(U.i)}function Cc(U){if(U.V&&typeof U.V=="function")return U.V();if(typeof Map<"u"&&U instanceof Map||typeof Set<"u"&&U instanceof Set)return Array.from(U.values());if(typeof U=="string")return U.split("");if(o(U)){for(var ne=[],ue=U.length,Se=0;Se<ue;Se++)ne.push(U[Se]);return ne}ne=[],ue=0;for(Se in U)ne[ue++]=U[Se];return ne}function Gs(U){if(U.na&&typeof U.na=="function")return U.na();if(!U.V||typeof U.V!="function"){if(typeof Map<"u"&&U instanceof Map)return Array.from(U.keys());if(!(typeof Set<"u"&&U instanceof Set)){if(o(U)||typeof U=="string"){var ne=[];U=U.length;for(var ue=0;ue<U;ue++)ne.push(ue);return ne}ne=[],ue=0;for(const Se in U)ne[ue++]=Se;return ne}}}function Ks(U,ne){if(U.forEach&&typeof U.forEach=="function")U.forEach(ne,void 0);else if(o(U)||typeof U=="string")Array.prototype.forEach.call(U,ne,void 0);else for(var ue=Gs(U),Se=Cc(U),Bt=Se.length,At=0;At<Bt;At++)ne.call(void 0,Se[At],ue&&ue[At],U)}var Ws=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ro(U,ne){if(U){U=U.split("&");for(var ue=0;ue<U.length;ue++){var Se=U[ue].indexOf("="),Bt=null;if(0<=Se){var At=U[ue].substring(0,Se);Bt=U[ue].substring(Se+1)}else At=U[ue];ne(At,Bt?decodeURIComponent(Bt.replace(/\+/g," ")):"")}}}function bo(U){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,U instanceof bo){this.h=U.h,Sc(this,U.j),this.o=U.o,this.g=U.g,Yl(this,U.s),this.l=U.l;var ne=U.i,ue=new Kr;ue.i=ne.i,ne.g&&(ue.g=new Map(ne.g),ue.h=ne.h),la(this,ue),this.m=U.m}else U&&(ne=String(U).match(Ws))?(this.h=!1,Sc(this,ne[1]||"",!0),this.o=Ec(ne[2]||""),this.g=Ec(ne[3]||"",!0),Yl(this,ne[4]),this.l=Ec(ne[5]||"",!0),la(this,ne[6]||"",!0),this.m=Ec(ne[7]||"")):(this.h=!1,this.i=new Kr(null,this.h))}bo.prototype.toString=function(){var U=[],ne=this.j;ne&&U.push(wo(ne,Tc,!0),":");var ue=this.g;return(ue||ne=="file")&&(U.push("//"),(ne=this.o)&&U.push(wo(ne,Tc,!0),"@"),U.push(encodeURIComponent(String(ue)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ue=this.s,ue!=null&&U.push(":",String(ue))),(ue=this.l)&&(this.g&&ue.charAt(0)!="/"&&U.push("/"),U.push(wo(ue,ue.charAt(0)=="/"?fA:Cl,!0))),(ue=this.i.toString())&&U.push("?",ue),(ue=this.m)&&U.push("#",wo(ue,pA)),U.join("")};function Ss(U){return new bo(U)}function Sc(U,ne,ue){U.j=ue?Ec(ne,!0):ne,U.j&&(U.j=U.j.replace(/:$/,""))}function Yl(U,ne){if(ne){if(ne=Number(ne),isNaN(ne)||0>ne)throw Error("Bad port number "+ne);U.s=ne}else U.s=null}function la(U,ne,ue){ne instanceof Kr?(U.i=ne,rl(U.i,U.h)):(ue||(ne=wo(ne,Ic)),U.i=new Kr(ne,U.h))}function ci(U,ne,ue){U.i.set(ne,ue)}function Cu(U){return ci(U,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),U}function Ec(U,ne){return U?ne?decodeURI(U.replace(/%25/g,"%2525")):decodeURIComponent(U):""}function wo(U,ne,ue){return typeof U=="string"?(U=encodeURI(U).replace(ne,Bl),ue&&(U=U.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),U):null}function Bl(U){return U=U.charCodeAt(0),"%"+(U>>4&15).toString(16)+(U&15).toString(16)}var Tc=/[#\/\?@]/g,Cl=/[#\?:]/g,fA=/[#\?]/g,Ic=/[#\?@]/g,pA=/#/g;function Kr(U,ne){this.h=this.g=null,this.i=U||null,this.j=!!ne}function qs(U){U.g||(U.g=new Map,U.h=0,U.i&&Ro(U.i,function(ne,ue){U.add(decodeURIComponent(ne.replace(/\+/g," ")),ue)}))}e=Kr.prototype,e.add=function(U,ne){qs(this),this.i=null,U=ca(this,U);var ue=this.g.get(U);return ue||this.g.set(U,ue=[]),ue.push(ne),this.h+=1,this};function An(U,ne){qs(U),ne=ca(U,ne),U.g.has(ne)&&(U.i=null,U.h-=U.g.get(ne).length,U.g.delete(ne))}function ph(U,ne){return qs(U),ne=ca(U,ne),U.g.has(ne)}e.forEach=function(U,ne){qs(this),this.g.forEach(function(ue,Se){ue.forEach(function(Bt){U.call(ne,Bt,Se,this)},this)},this)},e.na=function(){qs(this);const U=Array.from(this.g.values()),ne=Array.from(this.g.keys()),ue=[];for(let Se=0;Se<ne.length;Se++){const Bt=U[Se];for(let At=0;At<Bt.length;At++)ue.push(ne[Se])}return ue},e.V=function(U){qs(this);let ne=[];if(typeof U=="string")ph(this,U)&&(ne=ne.concat(this.g.get(ca(this,U))));else{U=Array.from(this.g.values());for(let ue=0;ue<U.length;ue++)ne=ne.concat(U[ue])}return ne},e.set=function(U,ne){return qs(this),this.i=null,U=ca(this,U),ph(this,U)&&(this.h-=this.g.get(U).length),this.g.set(U,[ne]),this.h+=1,this},e.get=function(U,ne){return U?(U=this.V(U),0<U.length?String(U[0]):ne):ne};function _r(U,ne,ue){An(U,ne),0<ue.length&&(U.i=null,U.g.set(ca(U,ne),K(ue)),U.h+=ue.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const U=[],ne=Array.from(this.g.keys());for(var ue=0;ue<ne.length;ue++){var Se=ne[ue];const At=encodeURIComponent(String(Se)),fr=this.V(Se);for(Se=0;Se<fr.length;Se++){var Bt=At;fr[Se]!==""&&(Bt+="="+encodeURIComponent(String(fr[Se]))),U.push(Bt)}}return this.i=U.join("&")};function ca(U,ne){return ne=String(ne),U.j&&(ne=ne.toLowerCase()),ne}function rl(U,ne){ne&&!U.j&&(qs(U),U.i=null,U.g.forEach(function(ue,Se){var Bt=Se.toLowerCase();Se!=Bt&&(An(this,Se),_r(this,Bt,ue))},U)),U.j=ne}function Jl(U,ne){const ue=new Ue;if(p.Image){const Se=new Image;Se.onload=z(is,ue,"TestLoadImage: loaded",!0,ne,Se),Se.onerror=z(is,ue,"TestLoadImage: error",!1,ne,Se),Se.onabort=z(is,ue,"TestLoadImage: abort",!1,ne,Se),Se.ontimeout=z(is,ue,"TestLoadImage: timeout",!1,ne,Se),p.setTimeout(function(){Se.ontimeout&&Se.ontimeout()},1e4),Se.src=U}else ne(!1)}function Ko(U,ne){const ue=new Ue,Se=new AbortController,Bt=setTimeout(()=>{Se.abort(),is(ue,"TestPingServer: timeout",!1,ne)},1e4);fetch(U,{signal:Se.signal}).then(At=>{clearTimeout(Bt),At.ok?is(ue,"TestPingServer: ok",!0,ne):is(ue,"TestPingServer: server error",!1,ne)}).catch(()=>{clearTimeout(Bt),is(ue,"TestPingServer: error",!1,ne)})}function is(U,ne,ue,Se,Bt){try{Bt&&(Bt.onload=null,Bt.onerror=null,Bt.onabort=null,Bt.ontimeout=null),Se(ue)}catch{}}function ua(){this.g=new Qs}function er(U,ne,ue){const Se=ue||"";try{Ks(U,function(Bt,At){let fr=Bt;_(Bt)&&(fr=ts(Bt)),ne.push(Se+At+"="+encodeURIComponent(fr))})}catch(Bt){throw ne.push(Se+"type="+encodeURIComponent("_badmap")),Bt}}function Yr(U){this.l=U.Ub||null,this.j=U.eb||!1}j(Yr,_l),Yr.prototype.g=function(){return new Wr(this.l,this.j)},Yr.prototype.i=function(U){return function(){return U}}({});function Wr(U,ne){Di.call(this),this.D=U,this.o=ne,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(Wr,Di),e=Wr.prototype,e.open=function(U,ne){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=U,this.A=ne,this.readyState=1,qr(this)},e.send=function(U){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const ne={headers:this.u,method:this.B,credentials:this.m,cache:void 0};U&&(ne.body=U),(this.D||p).fetch(new Request(this.A,ne)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oo(this)),this.readyState=0},e.Sa=function(U){if(this.g&&(this.l=U,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=U.headers,this.readyState=2,qr(this)),this.g&&(this.readyState=3,qr(this),this.g)))if(this.responseType==="arraybuffer")U.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in U){if(this.j=U.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;os(this)}else U.text().then(this.Ra.bind(this),this.ga.bind(this))};function os(U){U.j.read().then(U.Pa.bind(U)).catch(U.ga.bind(U))}e.Pa=function(U){if(this.g){if(this.o&&U.value)this.response.push(U.value);else if(!this.o){var ne=U.value?U.value:new Uint8Array(0);(ne=this.v.decode(ne,{stream:!U.done}))&&(this.response=this.responseText+=ne)}U.done?oo(this):qr(this),this.readyState==3&&os(this)}},e.Ra=function(U){this.g&&(this.response=this.responseText=U,oo(this))},e.Qa=function(U){this.g&&(this.response=U,oo(this))},e.ga=function(){this.g&&oo(this)};function oo(U){U.readyState=4,U.l=null,U.j=null,U.v=null,qr(U)}e.setRequestHeader=function(U,ne){this.u.append(U,ne)},e.getResponseHeader=function(U){return this.h&&this.h.get(U.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const U=[],ne=this.h.entries();for(var ue=ne.next();!ue.done;)ue=ue.value,U.push(ue[0]+": "+ue[1]),ue=ne.next();return U.join(`\r
`)};function qr(U){U.onreadystatechange&&U.onreadystatechange.call(U)}Object.defineProperty(Wr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(U){this.m=U?"include":"same-origin"}});function Su(U){let ne="";return ye(U,function(ue,Se){ne+=Se,ne+=":",ne+=ue,ne+=`\r
`}),ne}function qe(U,ne,ue){e:{for(Se in ue){var Se=!1;break e}Se=!0}Se||(ue=Su(ue),typeof U=="string"?ue!=null&&encodeURIComponent(String(ue)):ci(U,ne,ue))}function st(U){Di.call(this),this.headers=new Map,this.o=U||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(st,Di);var It=/^https?$/i,cr=["POST","PUT"];e=st.prototype,e.Ha=function(U){this.J=U},e.ea=function(U,ne,ue,Se){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+U);ne=ne?ne.toUpperCase():"GET",this.D=U,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kt.g(),this.v=this.o?an(this.o):an(Kt),this.g.onreadystatechange=L(this.Ea,this);try{this.B=!0,this.g.open(ne,String(U),!0),this.B=!1}catch(At){Pn(this,At);return}if(U=ue||"",ue=new Map(this.headers),Se)if(Object.getPrototypeOf(Se)===Object.prototype)for(var Bt in Se)ue.set(Bt,Se[Bt]);else if(typeof Se.keys=="function"&&typeof Se.get=="function")for(const At of Se.keys())ue.set(At,Se.get(At));else throw Error("Unknown input type for opt_headers: "+String(Se));Se=Array.from(ue.keys()).find(At=>At.toLowerCase()=="content-type"),Bt=p.FormData&&U instanceof p.FormData,!(0<=Array.prototype.indexOf.call(cr,ne,void 0))||Se||Bt||ue.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[At,fr]of ue)this.g.setRequestHeader(At,fr);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ui(this),this.u=!0,this.g.send(U),this.u=!1}catch(At){Pn(this,At)}};function Pn(U,ne){U.h=!1,U.g&&(U.j=!0,U.g.abort(),U.j=!1),U.l=ne,U.m=5,Un(U),un(U)}function Un(U){U.A||(U.A=!0,yi(U,"complete"),yi(U,"error"))}e.abort=function(U){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=U||7,yi(this,"complete"),yi(this,"abort"),un(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),un(this,!0)),st.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Wn(this):this.bb())},e.bb=function(){Wn(this)};function Wn(U){if(U.h&&typeof h<"u"&&(!U.v[1]||Qn(U)!=4||U.Z()!=2)){if(U.u&&Qn(U)==4)xo(U.Ea,0,U);else if(yi(U,"readystatechange"),Qn(U)==4){U.h=!1;try{const fr=U.Z();e:switch(fr){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ne=!0;break e;default:ne=!1}var ue;if(!(ue=ne)){var Se;if(Se=fr===0){var Bt=String(U.D).match(Ws)[1]||null;!Bt&&p.self&&p.self.location&&(Bt=p.self.location.protocol.slice(0,-1)),Se=!It.test(Bt?Bt.toLowerCase():"")}ue=Se}if(ue)yi(U,"complete"),yi(U,"success");else{U.m=6;try{var At=2<Qn(U)?U.g.statusText:""}catch{At=""}U.l=At+" ["+U.Z()+"]",Un(U)}}finally{un(U)}}}}function un(U,ne){if(U.g){ui(U);const ue=U.g,Se=U.v[0]?()=>{}:null;U.g=null,U.v=null,ne||yi(U,"ready");try{ue.onreadystatechange=Se}catch{}}}function ui(U){U.I&&(p.clearTimeout(U.I),U.I=null)}e.isActive=function(){return!!this.g};function Qn(U){return U.g?U.g.readyState:0}e.Z=function(){try{return 2<Qn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(U){if(this.g){var ne=this.g.responseText;return U&&ne.indexOf(U)==0&&(ne=ne.substring(U.length)),tl(ne)}};function Jn(U){try{if(!U.g)return null;if("response"in U.g)return U.g.response;switch(U.H){case"":case"text":return U.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in U.g)return U.g.mozResponseArrayBuffer}return null}catch{return null}}function fo(U){const ne={};U=(U.g&&2<=Qn(U)&&U.g.getAllResponseHeaders()||"").split(`\r
`);for(let Se=0;Se<U.length;Se++){if(ee(U[Se]))continue;var ue=ve(U[Se]);const Bt=ue[0];if(ue=ue[1],typeof ue!="string")continue;ue=ue.trim();const At=ne[Bt]||[];ne[Bt]=At,At.push(ue)}se(ne,function(Se){return Se.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sl(U,ne,ue){return ue&&ue.internalChannelParams&&ue.internalChannelParams[U]||ne}function ha(U){this.Aa=0,this.i=[],this.j=new Ue,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Sl("failFast",!1,U),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Sl("baseRetryDelayMs",5e3,U),this.cb=Sl("retryDelaySeedMs",1e4,U),this.Wa=Sl("forwardChannelMaxRetries",2,U),this.wa=Sl("forwardChannelRequestTimeoutMs",2e4,U),this.pa=U&&U.xmlHttpFactory||void 0,this.Xa=U&&U.Tb||void 0,this.Ca=U&&U.useFetchStreams||!1,this.L=void 0,this.J=U&&U.supportsCrossDomainXhr||!1,this.K="",this.h=new Xl(U&&U.concurrentRequestLimit),this.Da=new ua,this.P=U&&U.fastHandshake||!1,this.O=U&&U.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=U&&U.Rb||!1,U&&U.xa&&this.j.xa(),U&&U.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&U&&U.detectBufferingProxy||!1,this.ja=void 0,U&&U.longPollingTimeout&&0<U.longPollingTimeout&&(this.ja=U.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=ha.prototype,e.la=8,e.G=1,e.connect=function(U,ne,ue,Se){ge(0),this.W=U,this.H=ne||{},ue&&Se!==void 0&&(this.H.OSID=ue,this.H.OAID=Se),this.F=this.X,this.I=Eu(this,null,this.W),$i(this)};function _i(U){if(Da(U),U.G==3){var ne=U.U++,ue=Ss(U.I);if(ci(ue,"SID",U.K),ci(ue,"RID",ne),ci(ue,"TYPE","terminate"),El(U,ue),ne=new vr(U,U.j,ne),ne.L=2,ne.v=Cu(Ss(ue)),ue=!1,p.navigator&&p.navigator.sendBeacon)try{ue=p.navigator.sendBeacon(ne.v.toString(),"")}catch{}!ue&&p.Image&&(new Image().src=ne.v,ue=!0),ue||(ne.g=Tu(ne.j,null),ne.g.ea(ne.v)),ne.F=Date.now(),On(ne)}pp(U)}function Wo(U){U.g&&(nl(U),U.g.cancel(),U.g=null)}function Da(U){Wo(U),U.u&&(p.clearTimeout(U.u),U.u=null),mA(U),U.h.cancel(),U.s&&(typeof U.s=="number"&&p.clearTimeout(U.s),U.s=null)}function $i(U){if(!Zl(U.h)&&!U.s){U.s=!0;var ne=U.Ga;jt||ht(),Mt||(jt(),Mt=!0),Yt.add(ne,U),U.B=0}}function fp(U,ne){return wu(U.h)>=U.h.j-(U.s?1:0)?!1:U.s?(U.i=ne.D.concat(U.i),!0):U.G==1||U.G==2||U.B>=(U.Va?0:U.Wa)?!1:(U.s=Ne(L(U.Ga,U,ne),ag(U,U.B)),U.B++,!0)}e.Ga=function(U){if(this.s)if(this.s=null,this.G==1){if(!U){this.U=Math.floor(1e5*Math.random()),U=this.U++;const Bt=new vr(this,this.j,U);let At=this.o;if(this.S&&(At?(At=re(At),_e(At,this.S)):At=this.S),this.m!==null||this.O||(Bt.H=At,At=null),this.P)e:{for(var ne=0,ue=0;ue<this.i.length;ue++){t:{var Se=this.i[ue];if("__data__"in Se.map&&(Se=Se.map.__data__,typeof Se=="string")){Se=Se.length;break t}Se=void 0}if(Se===void 0)break;if(ne+=Se,4096<ne){ne=ue;break e}if(ne===4096||ue===this.i.length-1){ne=ue+1;break e}}ne=1e3}else ne=1e3;ne=Fc(this,Bt,ne),ue=Ss(this.I),ci(ue,"RID",U),ci(ue,"CVER",22),this.D&&ci(ue,"X-HTTP-Session-Id",this.D),El(this,ue),At&&(this.O?ne="headers="+encodeURIComponent(String(Su(At)))+"&"+ne:this.m&&qe(ue,this.m,At)),Bu(this.h,Bt),this.Ua&&ci(ue,"TYPE","init"),this.P?(ci(ue,"$req",ne),ci(ue,"SID","null"),Bt.T=!0,yn(Bt,ue,null)):yn(Bt,ue,ne),this.G=2}}else this.G==3&&(U?La(this,U):this.i.length==0||Zl(this.h)||La(this))};function La(U,ne){var ue;ne?ue=ne.l:ue=U.U++;const Se=Ss(U.I);ci(Se,"SID",U.K),ci(Se,"RID",ue),ci(Se,"AID",U.T),El(U,Se),U.m&&U.o&&qe(Se,U.m,U.o),ue=new vr(U,U.j,ue,U.B+1),U.m===null&&(ue.H=U.o),ne&&(U.i=ne.D.concat(U.i)),ne=Fc(U,ue,1e3),ue.I=Math.round(.5*U.wa)+Math.round(.5*U.wa*Math.random()),Bu(U.h,ue),yn(ue,Se,ne)}function El(U,ne){U.H&&ye(U.H,function(ue,Se){ci(ne,Se,ue)}),U.l&&Ks({},function(ue,Se){ci(ne,Se,ue)})}function Fc(U,ne,ue){ue=Math.min(U.i.length,ue);var Se=U.l?L(U.l.Na,U.l,U):null;e:{var Bt=U.i;let At=-1;for(;;){const fr=["count="+ue];At==-1?0<ue?(At=Bt[0].g,fr.push("ofs="+At)):At=0:fr.push("ofs="+At);let $n=!0;for(let pr=0;pr<ue;pr++){let Vn=Bt[pr].g;const Do=Bt[pr].map;if(Vn-=At,0>Vn)At=Math.max(0,Bt[pr].g-100),$n=!1;else try{er(Do,fr,"req"+Vn+"_")}catch{Se&&Se(Do)}}if($n){Se=fr.join("&");break e}}}return U=U.i.splice(0,ue),ne.D=U,Se}function Pc(U){if(!U.g&&!U.u){U.Y=1;var ne=U.Fa;jt||ht(),Mt||(jt(),Mt=!0),Yt.add(ne,U),U.v=0}}function mh(U){return U.g||U.u||3<=U.v?!1:(U.Y++,U.u=Ne(L(U.Fa,U),ag(U,U.v)),U.v++,!0)}e.Fa=function(){if(this.u=null,sg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var U=2*this.R;this.j.info("BP detection timer enabled: "+U),this.A=Ne(L(this.ab,this),U)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ge(10),Wo(this),sg(this))};function nl(U){U.A!=null&&(p.clearTimeout(U.A),U.A=null)}function sg(U){U.g=new vr(U,U.j,"rpc",U.Y),U.m===null&&(U.g.H=U.o),U.g.O=0;var ne=Ss(U.qa);ci(ne,"RID","rpc"),ci(ne,"SID",U.K),ci(ne,"AID",U.T),ci(ne,"CI",U.F?"0":"1"),!U.F&&U.ja&&ci(ne,"TO",U.ja),ci(ne,"TYPE","xmlhttp"),El(U,ne),U.m&&U.o&&qe(ne,U.m,U.o),U.L&&(U.g.I=U.L);var ue=U.g;U=U.ia,ue.L=1,ue.v=Cu(Ss(ne)),ue.m=null,ue.P=!0,xn(ue,U)}e.Za=function(){this.C!=null&&(this.C=null,Wo(this),mh(this),ge(19))};function mA(U){U.C!=null&&(p.clearTimeout(U.C),U.C=null)}function Es(U,ne){var ue=null;if(U.g==ne){mA(U),nl(U),U.g=null;var Se=2}else if(wl(U.h,ne))ue=ne.D,fh(U.h,ne),Se=1;else return;if(U.G!=0){if(ne.o)if(Se==1){ue=ne.m?ne.m.length:0,ne=Date.now()-ne.F;var Bt=U.B;Se=xl(),yi(Se,new ke(Se,ue)),$i(U)}else Pc(U);else if(Bt=ne.s,Bt==3||Bt==0&&0<ne.X||!(Se==1&&fp(U,ne)||Se==2&&mh(U)))switch(ue&&0<ue.length&&(ne=U.h,ne.i=ne.i.concat(ue)),Bt){case 1:Tl(U,5);break;case 4:Tl(U,10);break;case 3:Tl(U,6);break;default:Tl(U,2)}}}function ag(U,ne){let ue=U.Ta+Math.floor(Math.random()*U.cb);return U.isActive()||(ue*=2),ue*ne}function Tl(U,ne){if(U.j.info("Error code "+ne),ne==2){var ue=L(U.fb,U),Se=U.Xa;const Bt=!Se;Se=new bo(Se||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Sc(Se,"https"),Cu(Se),Bt?Jl(Se.toString(),ue):Ko(Se.toString(),ue)}else ge(2);U.G=0,U.l&&U.l.sa(ne),pp(U),Da(U)}e.fb=function(U){U?(this.j.info("Successfully pinged google.com"),ge(2)):(this.j.info("Failed to ping google.com"),ge(1))};function pp(U){if(U.G=0,U.ka=[],U.l){const ne=Bc(U.h);(ne.length!=0||U.i.length!=0)&&($(U.ka,ne),$(U.ka,U.i),U.h.i.length=0,K(U.i),U.i.length=0),U.l.ra()}}function Eu(U,ne,ue){var Se=ue instanceof bo?Ss(ue):new bo(ue);if(Se.g!="")ne&&(Se.g=ne+"."+Se.g),Yl(Se,Se.s);else{var Bt=p.location;Se=Bt.protocol,ne=ne?ne+"."+Bt.hostname:Bt.hostname,Bt=+Bt.port;var At=new bo(null);Se&&Sc(At,Se),ne&&(At.g=ne),Bt&&Yl(At,Bt),ue&&(At.l=ue),Se=At}return ue=U.D,ne=U.ya,ue&&ne&&ci(Se,ue,ne),ci(Se,"VER",U.la),El(U,Se),Se}function Tu(U,ne,ue){if(ne&&!U.J)throw Error("Can't create secondary domain capable XhrIo object.");return ne=U.Ca&&!U.pa?new st(new Yr({eb:ue})):new st(U.pa),ne.Ha(U.J),ne}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function lg(){}e=lg.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Mc(){}Mc.prototype.g=function(U,ne){return new ko(U,ne)};function ko(U,ne){Di.call(this),this.g=new ha(ne),this.l=U,this.h=ne&&ne.messageUrlParams||null,U=ne&&ne.messageHeaders||null,ne&&ne.clientProtocolHeaderRequired&&(U?U["X-Client-Protocol"]="webchannel":U={"X-Client-Protocol":"webchannel"}),this.g.o=U,U=ne&&ne.initMessageHeaders||null,ne&&ne.messageContentType&&(U?U["X-WebChannel-Content-Type"]=ne.messageContentType:U={"X-WebChannel-Content-Type":ne.messageContentType}),ne&&ne.va&&(U?U["X-WebChannel-Client-Profile"]=ne.va:U={"X-WebChannel-Client-Profile":ne.va}),this.g.S=U,(U=ne&&ne.Sb)&&!ee(U)&&(this.g.m=U),this.v=ne&&ne.supportsCrossDomainXhr||!1,this.u=ne&&ne.sendRawJson||!1,(ne=ne&&ne.httpSessionIdParam)&&!ee(ne)&&(this.g.D=ne,U=this.h,U!==null&&ne in U&&(U=this.h,ne in U&&delete U[ne])),this.j=new Fu(this)}j(ko,Di),ko.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ko.prototype.close=function(){_i(this.g)},ko.prototype.o=function(U){var ne=this.g;if(typeof U=="string"){var ue={};ue.__data__=U,U=ue}else this.u&&(ue={},ue.__data__=ts(U),U=ue);ne.i.push(new dh(ne.Ya++,U)),ne.G==3&&$i(ne)},ko.prototype.N=function(){this.g.l=null,delete this.j,_i(this.g),delete this.g,ko.aa.N.call(this)};function cg(U){rs.call(this),U.__headers__&&(this.headers=U.__headers__,this.statusCode=U.__status__,delete U.__headers__,delete U.__status__);var ne=U.__sm__;if(ne){e:{for(const ue in ne){U=ue;break e}U=void 0}(this.i=U)&&(U=this.i,ne=ne!==null&&U in ne?ne[U]:void 0),this.data=ne}else this.data=U}j(cg,rs);function Iu(){ns.call(this),this.status=1}j(Iu,ns);function Fu(U){this.g=U}j(Fu,lg),Fu.prototype.ua=function(){yi(this.g,"a")},Fu.prototype.ta=function(U){yi(this.g,new cg(U))},Fu.prototype.sa=function(U){yi(this.g,new Iu)},Fu.prototype.ra=function(){yi(this.g,"b")},Mc.prototype.createWebChannel=Mc.prototype.g,ko.prototype.send=ko.prototype.o,ko.prototype.open=ko.prototype.m,ko.prototype.close=ko.prototype.close,B$=function(){return new Mc},w$=function(){return xl()},b$=sa,x2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ft.NO_ERROR=0,ft.TIMEOUT=8,ft.HTTP_ERROR=6,xE=ft,Rt.COMPLETE="complete",x$=Rt,Hs.EventType=js,js.OPEN="a",js.CLOSE="b",js.ERROR="c",js.MESSAGE="d",Di.prototype.listen=Di.prototype.K,q1=Hs,st.prototype.listenOnce=st.prototype.L,st.prototype.getLastError=st.prototype.Ka,st.prototype.getLastErrorCode=st.prototype.Ba,st.prototype.getStatus=st.prototype.Z,st.prototype.getResponseJson=st.prototype.Oa,st.prototype.getResponseText=st.prototype.oa,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Ha,_$=st}).apply(typeof wS<"u"?wS:typeof self<"u"?self:typeof window<"u"?window:{});const Zj="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ka.UNAUTHENTICATED=new Ka(null),Ka.GOOGLE_CREDENTIALS=new Ka("google-credentials-uid"),Ka.FIRST_PARTY=new Ka("first-party-uid"),Ka.MOCK_USER=new Ka("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dv="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km=new d$("@firebase/firestore");function y1(){return Km.logLevel}function en(e,...t){if(Km.logLevel<=pi.DEBUG){const r=t.map(kU);Km.debug(`Firestore (${dv}): ${e}`,...r)}}function Wm(e,...t){if(Km.logLevel<=pi.ERROR){const r=t.map(kU);Km.error(`Firestore (${dv}): ${e}`,...r)}}function qT(e,...t){if(Km.logLevel<=pi.WARN){const r=t.map(kU);Km.warn(`Firestore (${dv}): ${e}`,...r)}}function kU(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(e="Unexpected state"){const t=`FIRESTORE (${dv}) INTERNAL ASSERTION FAILED: `+e;throw Wm(t),new Error(t)}function ps(e,t){e||ai()}function uo(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class gn extends Av{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C${constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class gLe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(Ka.UNAUTHENTICATED))}shutdown(){}}class yLe{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class vLe{constructor(t){this.t=t,this.currentUser=Ka.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){ps(this.o===void 0);let n=this.i;const i=o=>this.i!==n?(n=this.i,r(o)):Promise.resolve();let l=new Im;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Im,t.enqueueRetryable(()=>i(this.currentUser))};const h=()=>{const o=l;t.enqueueRetryable(async()=>{await o.promise,await i(this.currentUser)})},p=o=>{en("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=o,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(o=>p(o)),setTimeout(()=>{if(!this.auth){const o=this.t.getImmediate({optional:!0});o?p(o):(en("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Im)}},0),h()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==t?(en("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ps(typeof n.accessToken=="string"),new C$(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ps(t===null||typeof t=="string"),new Ka(t)}}class _Le{constructor(t,r,n){this.l=t,this.h=r,this.P=n,this.type="FirstParty",this.user=Ka.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class xLe{constructor(t,r,n){this.l=t,this.h=r,this.P=n}getToken(){return Promise.resolve(new _Le(this.l,this.h,this.P))}start(t,r){t.enqueueRetryable(()=>r(Ka.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bLe{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wLe{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,r){ps(this.o===void 0);const n=l=>{l.error!=null&&en("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.R;return this.R=l.token,en("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?r(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable(()=>n(l))};const i=l=>{en("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>i(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?i(l):en("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(ps(typeof r.token=="string"),this.R=r.token,new bLe(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BLe(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const i=BLe(40);for(let l=0;l<i.length;++l)n.length<20&&i[l]<r&&(n+=t.charAt(i[l]%t.length))}return n}}function ro(e,t){return e<t?-1:e>t?1:0}function Gy(e,t,r){return e.length===t.length&&e.every((n,i)=>r(n,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new gn(hr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new gn(hr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<-62135596800)throw new gn(hr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new gn(hr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ia.fromMillis(Date.now())}static fromDate(t){return ia.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*r));return new ia(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?ro(this.nanoseconds,t.nanoseconds):ro(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Vo(t)}static min(){return new Vo(new ia(0,0))}static max(){return new Vo(new ia(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(t,r,n){r===void 0?r=0:r>t.length&&ai(),n===void 0?n=t.length-r:n>t.length-r&&ai(),this.segments=t,this.offset=r,this.len=n}get length(){return this.len}isEqual(t){return Fb.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof Fb?t.forEach(n=>{r.push(n)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,n=this.limit();r<n;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const n=Math.min(t.length,r.length);for(let i=0;i<n;i++){const l=t.get(i),h=r.get(i);if(l<h)return-1;if(l>h)return 1}return t.length<r.length?-1:t.length>r.length?1:0}}class Jo extends Fb{construct(t,r,n){return new Jo(t,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const n of t){if(n.indexOf("//")>=0)throw new gn(hr.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new Jo(r)}static emptyPath(){return new Jo([])}}const CLe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sa extends Fb{construct(t,r,n){return new Sa(t,r,n)}static isValidIdentifier(t){return CLe.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sa.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Sa(["__name__"])}static fromServerFormat(t){const r=[];let n="",i=0;const l=()=>{if(n.length===0)throw new gn(hr.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let h=!1;for(;i<t.length;){const p=t[i];if(p==="\\"){if(i+1===t.length)throw new gn(hr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const o=t[i+1];if(o!=="\\"&&o!=="."&&o!=="`")throw new gn(hr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=o,i+=2}else p==="`"?(h=!h,i++):p!=="."||h?(n+=p,i++):(l(),i++)}if(l(),h)throw new gn(hr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Sa(r)}static emptyPath(){return new Sa([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(t){this.path=t}static fromPath(t){return new Ln(Jo.fromString(t))}static fromName(t){return new Ln(Jo.fromString(t).popFirst(5))}static empty(){return new Ln(Jo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Jo.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return Jo.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ln(new Jo(t.slice()))}}function SLe(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,i=Vo.fromTimestamp(n===1e9?new ia(r+1,0):new ia(r,n));return new rp(i,Ln.empty(),t)}function ELe(e){return new rp(e.readTime,e.key,-1)}class rp{constructor(t,r,n){this.readTime=t,this.documentKey=r,this.largestBatchId=n}static min(){return new rp(Vo.min(),Ln.empty(),-1)}static max(){return new rp(Vo.max(),Ln.empty(),-1)}}function TLe(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=Ln.comparator(e.documentKey,t.documentKey),r!==0?r:ro(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ILe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FLe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E$(e){if(e.code!==hr.FAILED_PRECONDITION||e.message!==ILe)throw e;en("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&ai(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new or((n,i)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(n,i)},this.catchCallback=l=>{this.wrapFailure(r,l).next(n,i)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof or?r:or.resolve(r)}catch(r){return or.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):or.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):or.reject(r)}static resolve(t){return new or((r,n)=>{r(t)})}static reject(t){return new or((r,n)=>{n(t)})}static waitFor(t){return new or((r,n)=>{let i=0,l=0,h=!1;t.forEach(p=>{++i,p.next(()=>{++l,h&&l===i&&r()},o=>n(o))}),h=!0,l===i&&r()})}static or(t){let r=or.resolve(!1);for(const n of t)r=r.next(i=>i?or.resolve(i):n());return r}static forEach(t,r){const n=[];return t.forEach((i,l)=>{n.push(r.call(this,i,l))}),this.waitFor(n)}static mapArray(t,r){return new or((n,i)=>{const l=t.length,h=new Array(l);let p=0;for(let o=0;o<l;o++){const _=o;r(t[_]).next(C=>{h[_]=C,++p,p===l&&n(h)},C=>i(C))}})}static doWhile(t,r){return new or((n,i)=>{const l=()=>{t()===!0?r().next(()=>{l()},i):n()};l()})}}function PLe(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function OF(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}T$.oe=-1;function DU(e){return e==null}function XT(e){return e===0&&1/e==-1/0}function MLe(e){return typeof e=="number"&&Number.isInteger(e)&&!XT(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yj(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function fw(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function I$(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(t,r){this.comparator=t,this.root=r||ba.EMPTY}insert(t,r){return new Kl(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,ba.BLACK,null,null))}remove(t){return new Kl(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ba.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(t,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(t){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,n)=>(t(r,n),!1))}toString(){const t=[];return this.inorderTraversal((r,n)=>(t.push(`${r}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new BS(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new BS(this.root,t,this.comparator,!1)}getReverseIterator(){return new BS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new BS(this.root,t,this.comparator,!0)}}class BS{constructor(t,r,n,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=r?n(t.key,r):1,r&&i&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ba{constructor(t,r,n,i,l){this.key=t,this.value=r,this.color=n??ba.RED,this.left=i??ba.EMPTY,this.right=l??ba.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,n,i,l){return new ba(t??this.key,r??this.value,n??this.color,i??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let i=this;const l=n(t,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(t,r,n),null):l===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(t,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ba.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let n,i=this;if(r(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(t,i.key)===0){if(i.right.isEmpty())return ba.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ba.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ba.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ai();const t=this.left.check();if(t!==this.right.check())throw ai();return t+(this.isRed()?0:1)}}ba.EMPTY=null,ba.RED=!0,ba.BLACK=!1;ba.EMPTY=new class{constructor(){this.size=0}get key(){throw ai()}get value(){throw ai()}get color(){throw ai()}get left(){throw ai()}get right(){throw ai()}copy(t,r,n,i,l){return this}insert(t,r,n){return new ba(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(t){this.comparator=t,this.data=new Kl(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,n)=>(t(r),!1))}forEachInRange(t,r){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;r(i.key)}}forEachWhile(t,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new Jj(this.data.getIterator())}getIteratorFrom(t){return new Jj(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(n=>{r=r.add(n)}),r}isEqual(t){if(!(t instanceof Ja)||this.size!==t.size)return!1;const r=this.data.getIterator(),n=t.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,l=n.getNext().key;if(this.comparator(i,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Ja(this.comparator);return r.data=t,r}}class Jj{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(t){this.fields=t,t.sort(Sa.comparator)}static empty(){return new nh([])}unionWith(t){let r=new Ja(Sa.comparator);for(const n of this.fields)r=r.add(n);for(const n of t)r=r.add(n);return new nh(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return Gy(this.fields,t.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RLe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(i){try{return atob(i)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new RLe("Invalid base64 string: "+l):l}}(t);return new lA(r)}static fromUint8Array(t){const r=function(i){let l="";for(let h=0;h<i.length;++h)l+=String.fromCharCode(i[h]);return l}(t);return new lA(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ro(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}lA.EMPTY_BYTE_STRING=new lA("");const kLe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qm(e){if(ps(!!e),typeof e=="string"){let t=0;const r=kLe.exec(e);if(ps(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),t=Number(i)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:wa(e.seconds),nanos:wa(e.nanos)}}function wa(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Pb(e){return typeof e=="string"?lA.fromBase64String(e):lA.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LU(e){var t,r;return((r=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function F$(e){const t=e.mapValue.fields.__previous_value__;return LU(t)?F$(t):t}function ZT(e){const t=qm(e.mapValue.fields.__local_write_time__.timestampValue);return new ia(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DLe{constructor(t,r,n,i,l,h,p,o,_){this.databaseId=t,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=o,this.useFetchStreams=_}}class YT{constructor(t,r){this.projectId=t,this.database=r||"(default)"}static empty(){return new YT("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof YT&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ky(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?LU(e)?4:OLe(e)?9007199254740991:LLe(e)?10:11:ai()}function cA(e,t){if(e===t)return!0;const r=Ky(e);if(r!==Ky(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ZT(e).isEqual(ZT(t));case 3:return function(i,l){if(typeof i.timestampValue=="string"&&typeof l.timestampValue=="string"&&i.timestampValue.length===l.timestampValue.length)return i.timestampValue===l.timestampValue;const h=qm(i.timestampValue),p=qm(l.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,l){return Pb(i.bytesValue).isEqual(Pb(l.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,l){return wa(i.geoPointValue.latitude)===wa(l.geoPointValue.latitude)&&wa(i.geoPointValue.longitude)===wa(l.geoPointValue.longitude)}(e,t);case 2:return function(i,l){if("integerValue"in i&&"integerValue"in l)return wa(i.integerValue)===wa(l.integerValue);if("doubleValue"in i&&"doubleValue"in l){const h=wa(i.doubleValue),p=wa(l.doubleValue);return h===p?XT(h)===XT(p):isNaN(h)&&isNaN(p)}return!1}(e,t);case 9:return Gy(e.arrayValue.values||[],t.arrayValue.values||[],cA);case 10:case 11:return function(i,l){const h=i.mapValue.fields||{},p=l.mapValue.fields||{};if(Yj(h)!==Yj(p))return!1;for(const o in h)if(h.hasOwnProperty(o)&&(p[o]===void 0||!cA(h[o],p[o])))return!1;return!0}(e,t);default:return ai()}}function Mb(e,t){return(e.values||[]).find(r=>cA(r,t))!==void 0}function Wy(e,t){if(e===t)return 0;const r=Ky(e),n=Ky(t);if(r!==n)return ro(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return ro(e.booleanValue,t.booleanValue);case 2:return function(l,h){const p=wa(l.integerValue||l.doubleValue),o=wa(h.integerValue||h.doubleValue);return p<o?-1:p>o?1:p===o?0:isNaN(p)?isNaN(o)?0:-1:1}(e,t);case 3:return $j(e.timestampValue,t.timestampValue);case 4:return $j(ZT(e),ZT(t));case 5:return ro(e.stringValue,t.stringValue);case 6:return function(l,h){const p=Pb(l),o=Pb(h);return p.compareTo(o)}(e.bytesValue,t.bytesValue);case 7:return function(l,h){const p=l.split("/"),o=h.split("/");for(let _=0;_<p.length&&_<o.length;_++){const C=ro(p[_],o[_]);if(C!==0)return C}return ro(p.length,o.length)}(e.referenceValue,t.referenceValue);case 8:return function(l,h){const p=ro(wa(l.latitude),wa(h.latitude));return p!==0?p:ro(wa(l.longitude),wa(h.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return e9(e.arrayValue,t.arrayValue);case 10:return function(l,h){var p,o,_,C;const M=l.fields||{},L=h.fields||{},z=(p=M.value)===null||p===void 0?void 0:p.arrayValue,j=(o=L.value)===null||o===void 0?void 0:o.arrayValue,K=ro(((_=z==null?void 0:z.values)===null||_===void 0?void 0:_.length)||0,((C=j==null?void 0:j.values)===null||C===void 0?void 0:C.length)||0);return K!==0?K:e9(z,j)}(e.mapValue,t.mapValue);case 11:return function(l,h){if(l===CS.mapValue&&h===CS.mapValue)return 0;if(l===CS.mapValue)return 1;if(h===CS.mapValue)return-1;const p=l.fields||{},o=Object.keys(p),_=h.fields||{},C=Object.keys(_);o.sort(),C.sort();for(let M=0;M<o.length&&M<C.length;++M){const L=ro(o[M],C[M]);if(L!==0)return L;const z=Wy(p[o[M]],_[C[M]]);if(z!==0)return z}return ro(o.length,C.length)}(e.mapValue,t.mapValue);default:throw ai()}}function $j(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ro(e,t);const r=qm(e),n=qm(t),i=ro(r.seconds,n.seconds);return i!==0?i:ro(r.nanos,n.nanos)}function e9(e,t){const r=e.values||[],n=t.values||[];for(let i=0;i<r.length&&i<n.length;++i){const l=Wy(r[i],n[i]);if(l)return l}return ro(r.length,n.length)}function qy(e){return b2(e)}function b2(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const n=qm(r);return`time(${n.seconds},${n.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return Pb(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return Ln.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let n="[",i=!0;for(const l of r.values||[])i?i=!1:n+=",",n+=b2(l);return n+"]"}(e.arrayValue):"mapValue"in e?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",l=!0;for(const h of n)l?l=!1:i+=",",i+=`${h}:${b2(r.fields[h])}`;return i+"}"}(e.mapValue):ai()}function w2(e){return!!e&&"integerValue"in e}function OU(e){return!!e&&"arrayValue"in e}function bE(e){return!!e&&"mapValue"in e}function LLe(e){var t,r;return((r=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Px(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return fw(e.mapValue.fields,(r,n)=>t.mapValue.fields[r]=Px(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=Px(e.arrayValue.values[r]);return t}return Object.assign({},e)}function OLe(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(t){this.value=t}static empty(){return new rh({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let n=0;n<t.length-1;++n)if(r=(r.mapValue.fields||{})[t.get(n)],!bE(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=Px(r)}setAll(t){let r=Sa.emptyPath(),n={},i=[];t.forEach((h,p)=>{if(!r.isImmediateParentOf(p)){const o=this.getFieldsMap(r);this.applyChanges(o,n,i),n={},i=[],r=p.popLast()}h?n[p.lastSegment()]=Px(h):i.push(p.lastSegment())});const l=this.getFieldsMap(r);this.applyChanges(l,n,i)}delete(t){const r=this.field(t.popLast());bE(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return cA(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=r.mapValue.fields[t.get(n)];bE(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[t.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(t,r,n){fw(r,(i,l)=>t[i]=l);for(const i of n)delete t[i]}clone(){return new rh(Px(this.value))}}function P$(e){const t=[];return fw(e.fields,(r,n)=>{const i=new Sa([r]);if(bE(n)){const l=P$(n.mapValue).fields;if(l.length===0)t.push(i);else for(const h of l)t.push(i.child(h))}else t.push(i)}),new nh(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(t,r,n,i,l,h,p){this.key=t,this.documentType=r,this.version=n,this.readTime=i,this.createTime=l,this.data=h,this.documentState=p}static newInvalidDocument(t){return new $u(t,0,Vo.min(),Vo.min(),Vo.min(),rh.empty(),0)}static newFoundDocument(t,r,n,i){return new $u(t,1,r,Vo.min(),n,i,0)}static newNoDocument(t,r){return new $u(t,2,r,Vo.min(),Vo.min(),rh.empty(),0)}static newUnknownDocument(t,r){return new $u(t,3,r,Vo.min(),Vo.min(),rh.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(Vo.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=rh.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=rh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Vo.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof $u&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new $u(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(t,r){this.position=t,this.inclusive=r}}function t9(e,t,r){let n=0;for(let i=0;i<e.position.length;i++){const l=t[i],h=e.position[i];if(l.field.isKeyField()?n=Ln.comparator(Ln.fromName(h.referenceValue),r.key):n=Wy(h,r.data.field(l.field)),l.dir==="desc"&&(n*=-1),n!==0)break}return n}function r9(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!cA(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(t,r="asc"){this.field=t,this.dir=r}}function ULe(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M${}class ra extends M${constructor(t,r,n){super(),this.field=t,this.op=r,this.value=n}static create(t,r,n){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,n):new VLe(t,r,n):r==="array-contains"?new HLe(t,n):r==="in"?new jLe(t,n):r==="not-in"?new GLe(t,n):r==="array-contains-any"?new KLe(t,n):new ra(t,r,n)}static createKeyFieldInFilter(t,r,n){return r==="in"?new NLe(t,n):new QLe(t,n)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Wy(r,this.value)):r!==null&&Ky(this.value)===Ky(r)&&this.matchesComparison(Wy(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ai()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class np extends M${constructor(t,r){super(),this.filters=t,this.op=r,this.ae=null}static create(t,r){return new np(t,r)}matches(t){return R$(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function R$(e){return e.op==="and"}function k$(e){return zLe(e)&&R$(e)}function zLe(e){for(const t of e.filters)if(t instanceof np)return!1;return!0}function B2(e){if(e instanceof ra)return e.field.canonicalString()+e.op.toString()+qy(e.value);if(k$(e))return e.filters.map(t=>B2(t)).join(",");{const t=e.filters.map(r=>B2(r)).join(",");return`${e.op}(${t})`}}function D$(e,t){return e instanceof ra?function(n,i){return i instanceof ra&&n.op===i.op&&n.field.isEqual(i.field)&&cA(n.value,i.value)}(e,t):e instanceof np?function(n,i){return i instanceof np&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((l,h,p)=>l&&D$(h,i.filters[p]),!0):!1}(e,t):void ai()}function L$(e){return e instanceof ra?function(r){return`${r.field.canonicalString()} ${r.op} ${qy(r.value)}`}(e):e instanceof np?function(r){return r.op.toString()+" {"+r.getFilters().map(L$).join(" ,")+"}"}(e):"Filter"}class VLe extends ra{constructor(t,r,n){super(t,r,n),this.key=Ln.fromName(n.referenceValue)}matches(t){const r=Ln.comparator(t.key,this.key);return this.matchesComparison(r)}}class NLe extends ra{constructor(t,r){super(t,"in",r),this.keys=O$("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class QLe extends ra{constructor(t,r){super(t,"not-in",r),this.keys=O$("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function O$(e,t){var r;return(((r=t.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>Ln.fromName(n.referenceValue))}class HLe extends ra{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return OU(r)&&Mb(r.arrayValue,this.value)}}class jLe extends ra{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&Mb(this.value.arrayValue,r)}}class GLe extends ra{constructor(t,r){super(t,"not-in",r)}matches(t){if(Mb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&!Mb(this.value.arrayValue,r)}}class KLe extends ra{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!OU(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Mb(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WLe{constructor(t,r=null,n=[],i=[],l=null,h=null,p=null){this.path=t,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=l,this.startAt=h,this.endAt=p,this.ue=null}}function n9(e,t=null,r=[],n=[],i=null,l=null,h=null){return new WLe(e,t,r,n,i,l,h)}function UU(e){const t=uo(e);if(t.ue===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(n=>B2(n)).join(","),r+="|ob:",r+=t.orderBy.map(n=>function(l){return l.field.canonicalString()+l.dir}(n)).join(","),DU(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(n=>qy(n)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(n=>qy(n)).join(",")),t.ue=r}return t.ue}function zU(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!ULe(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!D$(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!r9(e.startAt,t.startAt)&&r9(e.endAt,t.endAt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(t,r=null,n=[],i=[],l=null,h="F",p=null,o=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=l,this.limitType=h,this.startAt=p,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function qLe(e,t,r,n,i,l,h,p){return new UF(e,t,r,n,i,l,h,p)}function XLe(e){return new UF(e)}function i9(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function ZLe(e){return e.collectionGroup!==null}function Mx(e){const t=uo(e);if(t.ce===null){t.ce=[];const r=new Set;for(const l of t.explicitOrderBy)t.ce.push(l),r.add(l.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new Ja(Sa.comparator);return h.filters.forEach(o=>{o.getFlattenedFilters().forEach(_=>{_.isInequality()&&(p=p.add(_.field))})}),p})(t).forEach(l=>{r.has(l.canonicalString())||l.isKeyField()||t.ce.push(new $T(l,n))}),r.has(Sa.keyField().canonicalString())||t.ce.push(new $T(Sa.keyField(),n))}return t.ce}function Fm(e){const t=uo(e);return t.le||(t.le=YLe(t,Mx(e))),t.le}function YLe(e,t){if(e.limitType==="F")return n9(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const l=i.dir==="desc"?"asc":"desc";return new $T(i.field,l)});const r=e.endAt?new JT(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new JT(e.startAt.position,e.startAt.inclusive):null;return n9(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function C2(e,t,r){return new UF(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function U$(e,t){return zU(Fm(e),Fm(t))&&e.limitType===t.limitType}function z$(e){return`${UU(Fm(e))}|lt:${e.limitType}`}function v1(e){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>L$(i)).join(", ")}]`),DU(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>qy(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>qy(i)).join(",")),`Target(${n})`}(Fm(e))}; limitType=${e.limitType})`}function VU(e,t){return t.isFoundDocument()&&function(n,i){const l=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(l):Ln.isDocumentKey(n.path)?n.path.isEqual(l):n.path.isImmediateParentOf(l)}(e,t)&&function(n,i){for(const l of Mx(n))if(!l.field.isKeyField()&&i.data.field(l.field)===null)return!1;return!0}(e,t)&&function(n,i){for(const l of n.filters)if(!l.matches(i))return!1;return!0}(e,t)&&function(n,i){return!(n.startAt&&!function(h,p,o){const _=t9(h,p,o);return h.inclusive?_<=0:_<0}(n.startAt,Mx(n),i)||n.endAt&&!function(h,p,o){const _=t9(h,p,o);return h.inclusive?_>=0:_>0}(n.endAt,Mx(n),i))}(e,t)}function JLe(e){return(t,r)=>{let n=!1;for(const i of Mx(e)){const l=$Le(i,t,r);if(l!==0)return l;n=n||i.field.isKeyField()}return 0}}function $Le(e,t,r){const n=e.field.isKeyField()?Ln.comparator(t.key,r.key):function(l,h,p){const o=h.data.field(l),_=p.data.field(l);return o!==null&&_!==null?Wy(o,_):ai()}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return ai()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n!==void 0){for(const[i,l]of n)if(this.equalsFn(i,t))return l}}has(t){return this.get(t)!==void 0}set(t,r){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return this.inner[n]=[[t,r]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],t))return void(i[l]=[t,r]);i.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){fw(this.inner,(r,n)=>{for(const[i,l]of n)t(i,l)})}isEmpty(){return I$(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eOe=new Kl(Ln.comparator);function eI(){return eOe}const V$=new Kl(Ln.comparator);function SS(...e){let t=V$;for(const r of e)t=t.insert(r.key,r);return t}function N$(e){let t=V$;return e.forEach((r,n)=>t=t.insert(r,n.overlayedDocument)),t}function vm(){return Rx()}function Q$(){return Rx()}function Rx(){return new fv(e=>e.toString(),(e,t)=>e.isEqual(t))}const tOe=new Kl(Ln.comparator),rOe=new Ja(Ln.comparator);function Xa(...e){let t=rOe;for(const r of e)t=t.add(r);return t}const nOe=new Ja(ro);function iOe(){return nOe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NU(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:XT(t)?"-0":t}}function H$(e){return{integerValue:""+e}}function oOe(e,t){return MLe(t)?H$(t):NU(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(){this._=void 0}}function sOe(e,t,r){return e instanceof tI?function(i,l){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return l&&LU(l)&&(l=F$(l)),l&&(h.fields.__previous_value__=l),{mapValue:h}}(r,t):e instanceof Rb?G$(e,t):e instanceof kb?K$(e,t):function(i,l){const h=j$(i,l),p=o9(h)+o9(i.Pe);return w2(h)&&w2(i.Pe)?H$(p):NU(i.serializer,p)}(e,t)}function aOe(e,t,r){return e instanceof Rb?G$(e,t):e instanceof kb?K$(e,t):r}function j$(e,t){return e instanceof rI?function(n){return w2(n)||function(l){return!!l&&"doubleValue"in l}(n)}(t)?t:{integerValue:0}:null}class tI extends zF{}class Rb extends zF{constructor(t){super(),this.elements=t}}function G$(e,t){const r=W$(t);for(const n of e.elements)r.some(i=>cA(i,n))||r.push(n);return{arrayValue:{values:r}}}class kb extends zF{constructor(t){super(),this.elements=t}}function K$(e,t){let r=W$(t);for(const n of e.elements)r=r.filter(i=>!cA(i,n));return{arrayValue:{values:r}}}class rI extends zF{constructor(t,r){super(),this.serializer=t,this.Pe=r}}function o9(e){return wa(e.integerValue||e.doubleValue)}function W$(e){return OU(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function lOe(e,t){return e.field.isEqual(t.field)&&function(n,i){return n instanceof Rb&&i instanceof Rb||n instanceof kb&&i instanceof kb?Gy(n.elements,i.elements,cA):n instanceof rI&&i instanceof rI?cA(n.Pe,i.Pe):n instanceof tI&&i instanceof tI}(e.transform,t.transform)}class cOe{constructor(t,r){this.version=t,this.transformResults=r}}class rd{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new rd}static exists(t){return new rd(void 0,t)}static updateTime(t){return new rd(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function wE(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class VF{}function q$(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Z$(e.key,rd.none()):new pw(e.key,e.data,rd.none());{const r=e.data,n=rh.empty();let i=new Ja(Sa.comparator);for(let l of t.fields)if(!i.has(l)){let h=r.field(l);h===null&&l.length>1&&(l=l.popLast(),h=r.field(l)),h===null?n.delete(l):n.set(l,h),i=i.add(l)}return new og(e.key,n,new nh(i.toArray()),rd.none())}}function uOe(e,t,r){e instanceof pw?function(i,l,h){const p=i.value.clone(),o=a9(i.fieldTransforms,l,h.transformResults);p.setAll(o),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(e,t,r):e instanceof og?function(i,l,h){if(!wE(i.precondition,l))return void l.convertToUnknownDocument(h.version);const p=a9(i.fieldTransforms,l,h.transformResults),o=l.data;o.setAll(X$(i)),o.setAll(p),l.convertToFoundDocument(h.version,o).setHasCommittedMutations()}(e,t,r):function(i,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,t,r)}function kx(e,t,r,n){return e instanceof pw?function(l,h,p,o){if(!wE(l.precondition,h))return p;const _=l.value.clone(),C=l9(l.fieldTransforms,o,h);return _.setAll(C),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null}(e,t,r,n):e instanceof og?function(l,h,p,o){if(!wE(l.precondition,h))return p;const _=l9(l.fieldTransforms,o,h),C=h.data;return C.setAll(X$(l)),C.setAll(_),h.convertToFoundDocument(h.version,C).setHasLocalMutations(),p===null?null:p.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(M=>M.field))}(e,t,r,n):function(l,h,p){return wE(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p}(e,t,r)}function hOe(e,t){let r=null;for(const n of e.fieldTransforms){const i=t.data.field(n.field),l=j$(n.transform,i||null);l!=null&&(r===null&&(r=rh.empty()),r.set(n.field,l))}return r||null}function s9(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Gy(n,i,(l,h)=>lOe(l,h))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class pw extends VF{constructor(t,r,n,i=[]){super(),this.key=t,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class og extends VF{constructor(t,r,n,i,l=[]){super(),this.key=t,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function X$(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}}),t}function a9(e,t,r){const n=new Map;ps(e.length===r.length);for(let i=0;i<r.length;i++){const l=e[i],h=l.transform,p=t.data.field(l.field);n.set(l.field,aOe(h,p,r[i]))}return n}function l9(e,t,r){const n=new Map;for(const i of e){const l=i.transform,h=r.data.field(i.field);n.set(i.field,sOe(l,h,t))}return n}class Z$ extends VF{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AOe extends VF{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dOe{constructor(t,r,n,i){this.batchId=t,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(t.key)&&uOe(l,t,n[i])}}applyToLocalView(t,r){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(r=kx(n,t,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(r=kx(n,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const n=Q$();return this.mutations.forEach(i=>{const l=t.get(i.key),h=l.overlayedDocument;let p=this.applyToLocalView(h,l.mutatedFields);p=r.has(i.key)?null:p;const o=q$(h,p);o!==null&&n.set(i.key,o),h.isValidDocument()||h.convertToNoDocument(Vo.min())}),n}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Xa())}isEqual(t){return this.batchId===t.batchId&&Gy(this.mutations,t.mutations,(r,n)=>s9(r,n))&&Gy(this.baseMutations,t.baseMutations,(r,n)=>s9(r,n))}}class QU{constructor(t,r,n,i){this.batch=t,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(t,r,n){ps(t.mutations.length===n.length);let i=function(){return tOe}();const l=t.mutations;for(let h=0;h<l.length;h++)i=i.insert(l[h].key,n[h].version);return new QU(t,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fOe{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ys,di;function pOe(e){switch(e){default:return ai();case hr.CANCELLED:case hr.UNKNOWN:case hr.DEADLINE_EXCEEDED:case hr.RESOURCE_EXHAUSTED:case hr.INTERNAL:case hr.UNAVAILABLE:case hr.UNAUTHENTICATED:return!1;case hr.INVALID_ARGUMENT:case hr.NOT_FOUND:case hr.ALREADY_EXISTS:case hr.PERMISSION_DENIED:case hr.FAILED_PRECONDITION:case hr.ABORTED:case hr.OUT_OF_RANGE:case hr.UNIMPLEMENTED:case hr.DATA_LOSS:return!0}}function mOe(e){if(e===void 0)return Wm("GRPC error has no .code"),hr.UNKNOWN;switch(e){case ys.OK:return hr.OK;case ys.CANCELLED:return hr.CANCELLED;case ys.UNKNOWN:return hr.UNKNOWN;case ys.DEADLINE_EXCEEDED:return hr.DEADLINE_EXCEEDED;case ys.RESOURCE_EXHAUSTED:return hr.RESOURCE_EXHAUSTED;case ys.INTERNAL:return hr.INTERNAL;case ys.UNAVAILABLE:return hr.UNAVAILABLE;case ys.UNAUTHENTICATED:return hr.UNAUTHENTICATED;case ys.INVALID_ARGUMENT:return hr.INVALID_ARGUMENT;case ys.NOT_FOUND:return hr.NOT_FOUND;case ys.ALREADY_EXISTS:return hr.ALREADY_EXISTS;case ys.PERMISSION_DENIED:return hr.PERMISSION_DENIED;case ys.FAILED_PRECONDITION:return hr.FAILED_PRECONDITION;case ys.ABORTED:return hr.ABORTED;case ys.OUT_OF_RANGE:return hr.OUT_OF_RANGE;case ys.UNIMPLEMENTED:return hr.UNIMPLEMENTED;case ys.DATA_LOSS:return hr.DATA_LOSS;default:return ai()}}(di=ys||(ys={}))[di.OK=0]="OK",di[di.CANCELLED=1]="CANCELLED",di[di.UNKNOWN=2]="UNKNOWN",di[di.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",di[di.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",di[di.NOT_FOUND=5]="NOT_FOUND",di[di.ALREADY_EXISTS=6]="ALREADY_EXISTS",di[di.PERMISSION_DENIED=7]="PERMISSION_DENIED",di[di.UNAUTHENTICATED=16]="UNAUTHENTICATED",di[di.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",di[di.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",di[di.ABORTED=10]="ABORTED",di[di.OUT_OF_RANGE=11]="OUT_OF_RANGE",di[di.UNIMPLEMENTED=12]="UNIMPLEMENTED",di[di.INTERNAL=13]="INTERNAL",di[di.UNAVAILABLE=14]="UNAVAILABLE",di[di.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new v$([4294967295,4294967295],0);class gOe{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function S2(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function yOe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function vOe(e,t){return S2(e,t.toTimestamp())}function By(e){return ps(!!e),Vo.fromTimestamp(function(r){const n=qm(r);return new ia(n.seconds,n.nanos)}(e))}function Y$(e,t){return E2(e,t).canonicalString()}function E2(e,t){const r=function(i){return new Jo(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?r:r.child(t)}function _Oe(e){const t=Jo.fromString(e);return ps(TOe(t)),t}function T2(e,t){return Y$(e.databaseId,t.path)}function xOe(e){const t=_Oe(e);return t.length===4?Jo.emptyPath():wOe(t)}function bOe(e){return new Jo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function wOe(e){return ps(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function c9(e,t,r){return{name:T2(e,t),fields:r.value.mapValue.fields}}function BOe(e,t){let r;if(t instanceof pw)r={update:c9(e,t.key,t.value)};else if(t instanceof Z$)r={delete:T2(e,t.key)};else if(t instanceof og)r={update:c9(e,t.key,t.data),updateMask:EOe(t.fieldMask)};else{if(!(t instanceof AOe))return ai();r={verify:T2(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(n=>function(l,h){const p=h.transform;if(p instanceof tI)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Rb)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof kb)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof rI)return{fieldPath:h.field.canonicalString(),increment:p.Pe};throw ai()}(0,n))),t.precondition.isNone||(r.currentDocument=function(i,l){return l.updateTime!==void 0?{updateTime:vOe(i,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ai()}(e,t.precondition)),r}function COe(e,t){return e&&e.length>0?(ps(t!==void 0),e.map(r=>function(i,l){let h=i.updateTime?By(i.updateTime):By(l);return h.isEqual(Vo.min())&&(h=By(l)),new cOe(h,i.transformResults||[])}(r,t))):[]}function SOe(e){let t=xOe(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){ps(n===1);const C=r.from[0];C.allDescendants?i=C.collectionId:t=t.child(C.collectionId)}let l=[];r.where&&(l=function(M){const L=J$(M);return L instanceof np&&k$(L)?L.getFilters():[L]}(r.where));let h=[];r.orderBy&&(h=function(M){return M.map(L=>function(j){return new $T(P0(j.field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(L))}(r.orderBy));let p=null;r.limit&&(p=function(M){let L;return L=typeof M=="object"?M.value:M,DU(L)?null:L}(r.limit));let o=null;r.startAt&&(o=function(M){const L=!!M.before,z=M.values||[];return new JT(z,L)}(r.startAt));let _=null;return r.endAt&&(_=function(M){const L=!M.before,z=M.values||[];return new JT(z,L)}(r.endAt)),qLe(t,i,h,l,p,"F",o,_)}function J$(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=P0(r.unaryFilter.field);return ra.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=P0(r.unaryFilter.field);return ra.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=P0(r.unaryFilter.field);return ra.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=P0(r.unaryFilter.field);return ra.create(h,"!=",{nullValue:"NULL_VALUE"});default:return ai()}}(e):e.fieldFilter!==void 0?function(r){return ra.create(P0(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ai()}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return np.create(r.compositeFilter.filters.map(n=>J$(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ai()}}(r.compositeFilter.op))}(e):ai()}function P0(e){return Sa.fromServerFormat(e.fieldPath)}function EOe(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function TOe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IOe{constructor(t){this.ct=t}}function FOe(e){const t=SOe({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?C2(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class POe{constructor(){this.un=new MOe}addToCollectionParentIndex(t,r){return this.un.add(r),or.resolve()}getCollectionParents(t,r){return or.resolve(this.un.getEntries(r))}addFieldIndex(t,r){return or.resolve()}deleteFieldIndex(t,r){return or.resolve()}deleteAllFieldIndexes(t){return or.resolve()}createTargetIndexes(t,r){return or.resolve()}getDocumentsMatchingTarget(t,r){return or.resolve(null)}getIndexType(t,r){return or.resolve(0)}getFieldIndexes(t,r){return or.resolve([])}getNextCollectionGroupToUpdate(t){return or.resolve(null)}getMinOffset(t,r){return or.resolve(rp.min())}getMinOffsetFromCollectionGroup(t,r){return or.resolve(rp.min())}updateCollectionGroup(t,r,n){return or.resolve()}updateIndexEntries(t,r){return or.resolve()}}class MOe{constructor(){this.index={}}add(t){const r=t.lastSegment(),n=t.popLast(),i=this.index[r]||new Ja(Jo.comparator),l=!i.has(n);return this.index[r]=i.add(n),l}has(t){const r=t.lastSegment(),n=t.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(t){return(this.index[t]||new Ja(Jo.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new Xy(0)}static kn(){return new Xy(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ROe{constructor(){this.changes=new fv(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,$u.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?or.resolve(n):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kOe{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DOe{constructor(t,r,n,i){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,r){let n=null;return this.documentOverlayCache.getOverlay(t,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(t,r))).next(i=>(n!==null&&kx(n.mutation,i,nh.empty(),ia.now()),i))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.getLocalViewOfDocuments(t,n,Xa()).next(()=>n))}getLocalViewOfDocuments(t,r,n=Xa()){const i=vm();return this.populateOverlays(t,i,r).next(()=>this.computeViews(t,r,i,n).next(l=>{let h=SS();return l.forEach((p,o)=>{h=h.insert(p,o.overlayedDocument)}),h}))}getOverlayedDocuments(t,r){const n=vm();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,Xa()))}populateOverlays(t,r,n){const i=[];return n.forEach(l=>{r.has(l)||i.push(l)}),this.documentOverlayCache.getOverlays(t,i).next(l=>{l.forEach((h,p)=>{r.set(h,p)})})}computeViews(t,r,n,i){let l=eI();const h=Rx(),p=function(){return Rx()}();return r.forEach((o,_)=>{const C=n.get(_.key);i.has(_.key)&&(C===void 0||C.mutation instanceof og)?l=l.insert(_.key,_):C!==void 0?(h.set(_.key,C.mutation.getFieldMask()),kx(C.mutation,_,C.mutation.getFieldMask(),ia.now())):h.set(_.key,nh.empty())}),this.recalculateAndSaveOverlays(t,l).next(o=>(o.forEach((_,C)=>h.set(_,C)),r.forEach((_,C)=>{var M;return p.set(_,new kOe(C,(M=h.get(_))!==null&&M!==void 0?M:null))}),p))}recalculateAndSaveOverlays(t,r){const n=Rx();let i=new Kl((h,p)=>h-p),l=Xa();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(h=>{for(const p of h)p.keys().forEach(o=>{const _=r.get(o);if(_===null)return;let C=n.get(o)||nh.empty();C=p.applyToLocalView(_,C),n.set(o,C);const M=(i.get(p.batchId)||Xa()).add(o);i=i.insert(p.batchId,M)})}).next(()=>{const h=[],p=i.getReverseIterator();for(;p.hasNext();){const o=p.getNext(),_=o.key,C=o.value,M=Q$();C.forEach(L=>{if(!l.has(L)){const z=q$(r.get(L),n.get(L));z!==null&&M.set(L,z),l=l.add(L)}}),h.push(this.documentOverlayCache.saveOverlays(t,_,M))}return or.waitFor(h)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,r,n,i){return function(h){return Ln.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):ZLe(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,n,i):this.getDocumentsMatchingCollectionQuery(t,r,n,i)}getNextDocuments(t,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,n,i).next(l=>{const h=i-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,n.largestBatchId,i-l.size):or.resolve(vm());let p=-1,o=l;return h.next(_=>or.forEach(_,(C,M)=>(p<M.largestBatchId&&(p=M.largestBatchId),l.get(C)?or.resolve():this.remoteDocumentCache.getEntry(t,C).next(L=>{o=o.insert(C,L)}))).next(()=>this.populateOverlays(t,_,l)).next(()=>this.computeViews(t,o,_,Xa())).next(C=>({batchId:p,changes:N$(C)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new Ln(r)).next(n=>{let i=SS();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(t,r,n,i){const l=r.collectionGroup;let h=SS();return this.indexManager.getCollectionParents(t,l).next(p=>or.forEach(p,o=>{const _=function(M,L){return new UF(L,null,M.explicitOrderBy.slice(),M.filters.slice(),M.limit,M.limitType,M.startAt,M.endAt)}(r,o.child(l));return this.getDocumentsMatchingCollectionQuery(t,_,n,i).next(C=>{C.forEach((M,L)=>{h=h.insert(M,L)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(t,r,n,i){let l;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,n.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,n,l,i))).next(h=>{l.forEach((o,_)=>{const C=_.getKey();h.get(C)===null&&(h=h.insert(C,$u.newInvalidDocument(C)))});let p=SS();return h.forEach((o,_)=>{const C=l.get(o);C!==void 0&&kx(C.mutation,_,nh.empty(),ia.now()),VU(r,_)&&(p=p.insert(o,_))}),p})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LOe{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,r){return or.resolve(this.hr.get(r))}saveBundleMetadata(t,r){return this.hr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:By(i.createTime)}}(r)),or.resolve()}getNamedQuery(t,r){return or.resolve(this.Pr.get(r))}saveNamedQuery(t,r){return this.Pr.set(r.name,function(i){return{name:i.name,query:FOe(i.bundledQuery),readTime:By(i.readTime)}}(r)),or.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OOe{constructor(){this.overlays=new Kl(Ln.comparator),this.Ir=new Map}getOverlay(t,r){return or.resolve(this.overlays.get(r))}getOverlays(t,r){const n=vm();return or.forEach(r,i=>this.getOverlay(t,i).next(l=>{l!==null&&n.set(i,l)})).next(()=>n)}saveOverlays(t,r,n){return n.forEach((i,l)=>{this.ht(t,r,l)}),or.resolve()}removeOverlaysForBatchId(t,r,n){const i=this.Ir.get(n);return i!==void 0&&(i.forEach(l=>this.overlays=this.overlays.remove(l)),this.Ir.delete(n)),or.resolve()}getOverlaysForCollection(t,r,n){const i=vm(),l=r.length+1,h=new Ln(r.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const o=p.getNext().value,_=o.getKey();if(!r.isPrefixOf(_.path))break;_.path.length===l&&o.largestBatchId>n&&i.set(o.getKey(),o)}return or.resolve(i)}getOverlaysForCollectionGroup(t,r,n,i){let l=new Kl((_,C)=>_-C);const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===r&&_.largestBatchId>n){let C=l.get(_.largestBatchId);C===null&&(C=vm(),l=l.insert(_.largestBatchId,C)),C.set(_.getKey(),_)}}const p=vm(),o=l.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((_,C)=>p.set(_,C)),!(p.size()>=i)););return or.resolve(p)}ht(t,r,n){const i=this.overlays.get(n.key);if(i!==null){const h=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,h)}this.overlays=this.overlays.insert(n.key,new fOe(r,n));let l=this.Ir.get(r);l===void 0&&(l=Xa(),this.Ir.set(r,l)),this.Ir.set(r,l.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UOe{constructor(){this.sessionToken=lA.EMPTY_BYTE_STRING}getSessionToken(t){return or.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,or.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(){this.Tr=new Ja($s.Er),this.dr=new Ja($s.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,r){const n=new $s(t,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(t,r){t.forEach(n=>this.addReference(n,r))}removeReference(t,r){this.Vr(new $s(t,r))}mr(t,r){t.forEach(n=>this.removeReference(n,r))}gr(t){const r=new Ln(new Jo([])),n=new $s(r,t),i=new $s(r,t+1),l=[];return this.dr.forEachInRange([n,i],h=>{this.Vr(h),l.push(h.key)}),l}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const r=new Ln(new Jo([])),n=new $s(r,t),i=new $s(r,t+1);let l=Xa();return this.dr.forEachInRange([n,i],h=>{l=l.add(h.key)}),l}containsKey(t){const r=new $s(t,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&t.isEqual(n.key)}}class $s{constructor(t,r){this.key=t,this.wr=r}static Er(t,r){return Ln.comparator(t.key,r.key)||ro(t.wr,r.wr)}static Ar(t,r){return ro(t.wr,r.wr)||Ln.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zOe{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Ja($s.Er)}checkEmpty(t){return or.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,n,i){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new dOe(l,r,n,i);this.mutationQueue.push(h);for(const p of i)this.br=this.br.add(new $s(p.key,l)),this.indexManager.addToCollectionParentIndex(t,p.key.path.popLast());return or.resolve(h)}lookupMutationBatch(t,r){return or.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(t,r){const n=r+1,i=this.vr(n),l=i<0?0:i;return or.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return or.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return or.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const n=new $s(r,0),i=new $s(r,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([n,i],h=>{const p=this.Dr(h.wr);l.push(p)}),or.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,r){let n=new Ja(ro);return r.forEach(i=>{const l=new $s(i,0),h=new $s(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,h],p=>{n=n.add(p.wr)})}),or.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(t,r){const n=r.path,i=n.length+1;let l=n;Ln.isDocumentKey(l)||(l=l.child(""));const h=new $s(new Ln(l),0);let p=new Ja(ro);return this.br.forEachWhile(o=>{const _=o.key.path;return!!n.isPrefixOf(_)&&(_.length===i&&(p=p.add(o.wr)),!0)},h),or.resolve(this.Cr(p))}Cr(t){const r=[];return t.forEach(n=>{const i=this.Dr(n);i!==null&&r.push(i)}),r}removeMutationBatch(t,r){ps(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return or.forEach(r.mutations,i=>{const l=new $s(i.key,r.batchId);return n=n.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.br=n})}On(t){}containsKey(t,r){const n=new $s(r,0),i=this.br.firstAfterOrEqual(n);return or.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,or.resolve()}Fr(t,r){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){const r=this.vr(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VOe{constructor(t){this.Mr=t,this.docs=function(){return new Kl(Ln.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const n=r.key,i=this.docs.get(n),l=i?i.size:0,h=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const n=this.docs.get(r);return or.resolve(n?n.document.mutableCopy():$u.newInvalidDocument(r))}getEntries(t,r){let n=eI();return r.forEach(i=>{const l=this.docs.get(i);n=n.insert(i,l?l.document.mutableCopy():$u.newInvalidDocument(i))}),or.resolve(n)}getDocumentsMatchingQuery(t,r,n,i){let l=eI();const h=r.path,p=new Ln(h.child("")),o=this.docs.getIteratorFrom(p);for(;o.hasNext();){const{key:_,value:{document:C}}=o.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||TLe(ELe(C),n)<=0||(i.has(C.key)||VU(r,C))&&(l=l.insert(C.key,C.mutableCopy()))}return or.resolve(l)}getAllFromCollectionGroup(t,r,n,i){ai()}Or(t,r){return or.forEach(this.docs,n=>r(n))}newChangeBuffer(t){return new NOe(this)}getSize(t){return or.resolve(this.size)}}class NOe extends ROe{constructor(t){super(),this.cr=t}applyChanges(t){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.cr.addEntry(t,i)):this.cr.removeEntry(n)}),or.waitFor(r)}getFromCache(t,r){return this.cr.getEntry(t,r)}getAllFromCache(t,r){return this.cr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QOe{constructor(t){this.persistence=t,this.Nr=new fv(r=>UU(r),zU),this.lastRemoteSnapshotVersion=Vo.min(),this.highestTargetId=0,this.Lr=0,this.Br=new HU,this.targetCount=0,this.kr=Xy.Bn()}forEachTarget(t,r){return this.Nr.forEach((n,i)=>r(i)),or.resolve()}getLastRemoteSnapshotVersion(t){return or.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return or.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),or.resolve(this.highestTargetId)}setTargetsMetadata(t,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),or.resolve()}Kn(t){this.Nr.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.kr=new Xy(r),this.highestTargetId=r),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,r){return this.Kn(r),this.targetCount+=1,or.resolve()}updateTargetData(t,r){return this.Kn(r),or.resolve()}removeTargetData(t,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,or.resolve()}removeTargets(t,r,n){let i=0;const l=[];return this.Nr.forEach((h,p)=>{p.sequenceNumber<=r&&n.get(p.targetId)===null&&(this.Nr.delete(h),l.push(this.removeMatchingKeysForTargetId(t,p.targetId)),i++)}),or.waitFor(l).next(()=>i)}getTargetCount(t){return or.resolve(this.targetCount)}getTargetData(t,r){const n=this.Nr.get(r)||null;return or.resolve(n)}addMatchingKeys(t,r,n){return this.Br.Rr(r,n),or.resolve()}removeMatchingKeys(t,r,n){this.Br.mr(r,n);const i=this.persistence.referenceDelegate,l=[];return i&&r.forEach(h=>{l.push(i.markPotentiallyOrphaned(t,h))}),or.waitFor(l)}removeMatchingKeysForTargetId(t,r){return this.Br.gr(r),or.resolve()}getMatchingKeysForTargetId(t,r){const n=this.Br.yr(r);return or.resolve(n)}containsKey(t,r){return or.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HOe{constructor(t,r){this.qr={},this.overlays={},this.Qr=new T$(0),this.Kr=!1,this.Kr=!0,this.$r=new UOe,this.referenceDelegate=t(this),this.Ur=new QOe(this),this.indexManager=new POe,this.remoteDocumentCache=function(i){return new VOe(i)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new IOe(r),this.Gr=new LOe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new OOe,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let n=this.qr[t.toKey()];return n||(n=new zOe(r,this.referenceDelegate),this.qr[t.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,r,n){en("MemoryPersistence","Starting transaction:",t);const i=new jOe(this.Qr.next());return this.referenceDelegate.zr(),n(i).next(l=>this.referenceDelegate.jr(i).next(()=>l)).toPromise().then(l=>(i.raiseOnCommittedEvent(),l))}Hr(t,r){return or.or(Object.values(this.qr).map(n=>()=>n.containsKey(t,r)))}}class jOe extends FLe{constructor(t){super(),this.currentSequenceNumber=t}}class jU{constructor(t){this.persistence=t,this.Jr=new HU,this.Yr=null}static Zr(t){return new jU(t)}get Xr(){if(this.Yr)return this.Yr;throw ai()}addReference(t,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),or.resolve()}removeReference(t,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),or.resolve()}markPotentiallyOrphaned(t,r){return this.Xr.add(r.toString()),or.resolve()}removeTarget(t,r){this.Jr.gr(r.targetId).forEach(i=>this.Xr.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,r.targetId).next(i=>{i.forEach(l=>this.Xr.add(l.toString()))}).next(()=>n.removeTargetData(t,r))}zr(){this.Yr=new Set}jr(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return or.forEach(this.Xr,n=>{const i=Ln.fromPath(n);return this.ei(t,i).next(l=>{l||r.removeEntry(i,Vo.min())})}).next(()=>(this.Yr=null,r.apply(t)))}updateLimboDocument(t,r){return this.ei(t,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(t){return 0}ei(t,r){return or.or([()=>or.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Hr(t,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GU{constructor(t,r,n,i){this.targetId=t,this.fromCache=r,this.$i=n,this.Ui=i}static Wi(t,r){let n=Xa(),i=Xa();for(const l of r.docChanges)switch(l.type){case 0:n=n.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new GU(t,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GOe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KOe{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return $De()?8:PLe(YDe())>0?6:4}()}initialize(t,r){this.Ji=t,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(t,r,n,i){const l={result:null};return this.Yi(t,r).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.Zi(t,r,i,n).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new GOe;return this.Xi(t,r,h).next(p=>{if(l.result=p,this.zi)return this.es(t,r,h,p.size)})}).next(()=>l.result)}es(t,r,n,i){return n.documentReadCount<this.ji?(y1()<=pi.DEBUG&&en("QueryEngine","SDK will not create cache indexes for query:",v1(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),or.resolve()):(y1()<=pi.DEBUG&&en("QueryEngine","Query:",v1(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(y1()<=pi.DEBUG&&en("QueryEngine","The SDK decides to create cache indexes for query:",v1(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Fm(r))):or.resolve())}Yi(t,r){if(i9(r))return or.resolve(null);let n=Fm(r);return this.indexManager.getIndexType(t,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=C2(r,null,"F"),n=Fm(r)),this.indexManager.getDocumentsMatchingTarget(t,n).next(l=>{const h=Xa(...l);return this.Ji.getDocuments(t,h).next(p=>this.indexManager.getMinOffset(t,n).next(o=>{const _=this.ts(r,p);return this.ns(r,_,h,o.readTime)?this.Yi(t,C2(r,null,"F")):this.rs(t,_,r,o)}))})))}Zi(t,r,n,i){return i9(r)||i.isEqual(Vo.min())?or.resolve(null):this.Ji.getDocuments(t,n).next(l=>{const h=this.ts(r,l);return this.ns(r,h,n,i)?or.resolve(null):(y1()<=pi.DEBUG&&en("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),v1(r)),this.rs(t,h,r,SLe(i,-1)).next(p=>p))})}ts(t,r){let n=new Ja(JLe(t));return r.forEach((i,l)=>{VU(t,l)&&(n=n.add(l))}),n}ns(t,r,n,i){if(t.limit===null)return!1;if(n.size!==r.size)return!0;const l=t.limitType==="F"?r.last():r.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}Xi(t,r,n){return y1()<=pi.DEBUG&&en("QueryEngine","Using full collection scan to execute query:",v1(r)),this.Ji.getDocumentsMatchingQuery(t,r,rp.min(),n)}rs(t,r,n,i){return this.Ji.getDocumentsMatchingQuery(t,n,i).next(l=>(r.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WOe{constructor(t,r,n,i){this.persistence=t,this.ss=r,this.serializer=i,this.os=new Kl(ro),this._s=new fv(l=>UU(l),zU),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(n)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new DOe(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.os))}}function qOe(e,t,r,n){return new WOe(e,t,r,n)}async function $$(e,t){const r=uo(e);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(l=>(i=l,r.ls(t),r.mutationQueue.getAllMutationBatches(n))).next(l=>{const h=[],p=[];let o=Xa();for(const _ of i){h.push(_.batchId);for(const C of _.mutations)o=o.add(C.key)}for(const _ of l){p.push(_.batchId);for(const C of _.mutations)o=o.add(C.key)}return r.localDocuments.getDocuments(n,o).next(_=>({hs:_,removedBatchIds:h,addedBatchIds:p}))})})}function XOe(e,t){const r=uo(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=t.batch.keys(),l=r.cs.newChangeBuffer({trackRemovals:!0});return function(p,o,_,C){const M=_.batch,L=M.keys();let z=or.resolve();return L.forEach(j=>{z=z.next(()=>C.getEntry(o,j)).next(K=>{const $=_.docVersions.get(j);ps($!==null),K.version.compareTo($)<0&&(M.applyToRemoteDocument(K,_),K.isValidDocument()&&(K.setReadTime(_.commitVersion),C.addEntry(K)))})}),z.next(()=>p.mutationQueue.removeMutationBatch(o,M))}(r,n,t,l).next(()=>l.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(p){let o=Xa();for(let _=0;_<p.mutationResults.length;++_)p.mutationResults[_].transformResults.length>0&&(o=o.add(p.batch.mutations[_].key));return o}(t))).next(()=>r.localDocuments.getDocuments(n,i))})}function ZOe(e){const t=uo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Ur.getLastRemoteSnapshotVersion(r))}function YOe(e,t){const r=uo(e);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}class u9{constructor(){this.activeTargetIds=iOe()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class JOe{constructor(){this.so=new u9,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,n){}addLocalQueryTarget(t,r=!0){return r&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,r,n){this.oo[t]=r}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new u9,Promise.resolve()}handleUserChange(t,r,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Oe{_o(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){en("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){en("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ES=null;function kk(){return ES===null?ES=function(){return 268435456+Math.round(2147483648*Math.random())}():ES++,"0x"+ES.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eUe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tUe{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa="WebChannelConnection";class rUe extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${i}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${l}`}get Fo(){return!1}Mo(r,n,i,l,h){const p=kk(),o=this.xo(r,n.toUriEncodedString());en("RestConnection",`Sending RPC '${r}' ${p}:`,o,i);const _={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(_,l,h),this.No(r,o,_,i).then(C=>(en("RestConnection",`Received RPC '${r}' ${p}: `,C),C),C=>{throw qT("RestConnection",`RPC '${r}' ${p} failed with error: `,C,"url: ",o,"request:",i),C})}Lo(r,n,i,l,h,p){return this.Mo(r,n,i,l,h)}Oo(r,n,i){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+dv}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((l,h)=>r[h]=l),i&&i.headers.forEach((l,h)=>r[h]=l)}xo(r,n){const i=eUe[r];return`${this.Do}/v1/${n}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,r,n,i){const l=kk();return new Promise((h,p)=>{const o=new _$;o.setWithCredentials(!0),o.listenOnce(x$.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case xE.NO_ERROR:const C=o.getResponseJson();en(Qa,`XHR for RPC '${t}' ${l} received:`,JSON.stringify(C)),h(C);break;case xE.TIMEOUT:en(Qa,`RPC '${t}' ${l} timed out`),p(new gn(hr.DEADLINE_EXCEEDED,"Request time out"));break;case xE.HTTP_ERROR:const M=o.getStatus();if(en(Qa,`RPC '${t}' ${l} failed with status:`,M,"response text:",o.getResponseText()),M>0){let L=o.getResponseJson();Array.isArray(L)&&(L=L[0]);const z=L==null?void 0:L.error;if(z&&z.status&&z.message){const j=function($){const q=$.toLowerCase().replace(/_/g,"-");return Object.values(hr).indexOf(q)>=0?q:hr.UNKNOWN}(z.status);p(new gn(j,z.message))}else p(new gn(hr.UNKNOWN,"Server responded with status "+o.getStatus()))}else p(new gn(hr.UNAVAILABLE,"Connection failed."));break;default:ai()}}finally{en(Qa,`RPC '${t}' ${l} completed.`)}});const _=JSON.stringify(i);en(Qa,`RPC '${t}' ${l} sending request:`,i),o.send(r,"POST",_,n,15)})}Bo(t,r,n){const i=kk(),l=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],h=B$(),p=w$(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(o.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Oo(o.initMessageHeaders,r,n),o.encodeInitMessageHeaders=!0;const C=l.join("");en(Qa,`Creating RPC '${t}' stream ${i}: ${C}`,o);const M=h.createWebChannel(C,o);let L=!1,z=!1;const j=new tUe({Io:$=>{z?en(Qa,`Not sending because RPC '${t}' stream ${i} is closed:`,$):(L||(en(Qa,`Opening RPC '${t}' stream ${i} transport.`),M.open(),L=!0),en(Qa,`RPC '${t}' stream ${i} sending:`,$),M.send($))},To:()=>M.close()}),K=($,q,ee)=>{$.listen(q,ie=>{try{ee(ie)}catch(fe){setTimeout(()=>{throw fe},0)}})};return K(M,q1.EventType.OPEN,()=>{z||(en(Qa,`RPC '${t}' stream ${i} transport opened.`),j.yo())}),K(M,q1.EventType.CLOSE,()=>{z||(z=!0,en(Qa,`RPC '${t}' stream ${i} transport closed`),j.So())}),K(M,q1.EventType.ERROR,$=>{z||(z=!0,qT(Qa,`RPC '${t}' stream ${i} transport errored:`,$),j.So(new gn(hr.UNAVAILABLE,"The operation could not be completed")))}),K(M,q1.EventType.MESSAGE,$=>{var q;if(!z){const ee=$.data[0];ps(!!ee);const ie=ee,fe=ie.error||((q=ie[0])===null||q===void 0?void 0:q.error);if(fe){en(Qa,`RPC '${t}' stream ${i} received error:`,fe);const me=fe.status;let ye=function(de){const _e=ys[de];if(_e!==void 0)return mOe(_e)}(me),se=fe.message;ye===void 0&&(ye=hr.INTERNAL,se="Unknown error status: "+me+" with message "+fe.message),z=!0,j.So(new gn(ye,se)),M.close()}else en(Qa,`RPC '${t}' stream ${i} received:`,ee),j.bo(ee)}}),K(p,b$.STAT_EVENT,$=>{$.stat===x2.PROXY?en(Qa,`RPC '${t}' stream ${i} detected buffering proxy`):$.stat===x2.NOPROXY&&en(Qa,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{j.wo()},0),j}}function Dk(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NF(e){return new gOe(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eee{constructor(t,r,n=1e3,i=1.5,l=6e4){this.ui=t,this.timerId=r,this.ko=n,this.qo=i,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,r-n);i>0&&en("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nUe{constructor(t,r,n,i,l,h,p,o){this.ui=t,this.Ho=n,this.Jo=i,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new eee(t,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():r&&r.code===hr.RESOURCE_EXHAUSTED?(Wm(r.toString()),Wm("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===hr.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(r)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.Yo===r&&this.P_(n,i)},n=>{t(()=>{const i=new gn(hr.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(i)})})}P_(t,r){const n=this.h_(this.Yo);this.stream=this.T_(t,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{n(()=>this.I_(i))}),this.stream.onMessage(i=>{n(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(t){return en("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return r=>{this.ui.enqueueAndForget(()=>this.Yo===t?r():(en("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iUe extends nUe{constructor(t,r,n,i,l,h){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,h),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,r){return this.connection.Bo("Write",t,r)}E_(t){return ps(!!t.streamToken),this.lastStreamToken=t.streamToken,ps(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){ps(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const r=COe(t.writeResults,t.commitTime),n=By(t.commitTime);return this.listener.g_(n,r)}p_(){const t={};t.database=bOe(this.serializer),this.a_(t)}m_(t){const r={streamToken:this.lastStreamToken,writes:t.map(n=>BOe(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oUe extends class{}{constructor(t,r,n,i){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new gn(hr.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,r,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Mo(t,E2(r,n),i,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===hr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new gn(hr.UNKNOWN,l.toString())})}Lo(t,r,n,i,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,p])=>this.connection.Lo(t,E2(r,n),i,h,p,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===hr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new gn(hr.UNKNOWN,h.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class sUe{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Wm(r),this.D_=!1):en("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aUe{constructor(t,r,n,i,l){this.localStore=t,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o(h=>{n.enqueueAndForget(async()=>{gw(this)&&(en("RemoteStore","Restarting streams for network reachability change."),await async function(o){const _=uo(o);_.L_.add(4),await mw(_),_.q_.set("Unknown"),_.L_.delete(4),await QF(_)}(this))})}),this.q_=new sUe(n,i)}}async function QF(e){if(gw(e))for(const t of e.B_)await t(!0)}async function mw(e){for(const t of e.B_)await t(!1)}function gw(e){return uo(e).L_.size===0}async function tee(e,t,r){if(!OF(t))throw t;e.L_.add(1),await mw(e),e.q_.set("Offline"),r||(r=()=>ZOe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{en("RemoteStore","Retrying IndexedDB access"),await r(),e.L_.delete(1),await QF(e)})}function ree(e,t){return t().catch(r=>tee(e,r,t))}async function HF(e){const t=uo(e),r=ip(t);let n=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;lUe(t);)try{const i=await YOe(t.localStore,n);if(i===null){t.O_.length===0&&r.o_();break}n=i.batchId,cUe(t,i)}catch(i){await tee(t,i)}nee(t)&&iee(t)}function lUe(e){return gw(e)&&e.O_.length<10}function cUe(e,t){e.O_.push(t);const r=ip(e);r.r_()&&r.V_&&r.m_(t.mutations)}function nee(e){return gw(e)&&!ip(e).n_()&&e.O_.length>0}function iee(e){ip(e).start()}async function uUe(e){ip(e).p_()}async function hUe(e){const t=ip(e);for(const r of e.O_)t.m_(r.mutations)}async function AUe(e,t,r){const n=e.O_.shift(),i=QU.from(n,t,r);await ree(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await HF(e)}async function dUe(e,t){t&&ip(e).V_&&await async function(n,i){if(function(h){return pOe(h)&&h!==hr.ABORTED}(i.code)){const l=n.O_.shift();ip(n).s_(),await ree(n,()=>n.remoteSyncer.rejectFailedWrite(l.batchId,i)),await HF(n)}}(e,t),nee(e)&&iee(e)}async function A9(e,t){const r=uo(e);r.asyncQueue.verifyOperationInProgress(),en("RemoteStore","RemoteStore received new credentials");const n=gw(r);r.L_.add(3),await mw(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.L_.delete(3),await QF(r)}async function fUe(e,t){const r=uo(e);t?(r.L_.delete(2),await QF(r)):t||(r.L_.add(2),await mw(r),r.q_.set("Unknown"))}function ip(e){return e.U_||(e.U_=function(r,n,i){const l=uo(r);return l.w_(),new iUe(n,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,i)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:uUe.bind(null,e),mo:dUe.bind(null,e),f_:hUe.bind(null,e),g_:AUe.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await HF(e)):(await e.U_.stop(),e.O_.length>0&&(en("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))})),e.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(t,r,n,i,l){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=l,this.deferred=new Im,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,n,i,l){const h=Date.now()+n,p=new KU(t,r,h,i,l);return p.start(n),p}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new gn(hr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oee(e,t){if(Wm("AsyncQueue",`${t}: ${e}`),OF(e))return new gn(hr.UNAVAILABLE,`${t}: ${e}`);throw e}class pUe{constructor(){this.queries=d9(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const i=uo(r),l=i.queries;i.queries=d9(),l.forEach((h,p)=>{for(const o of p.j_)o.onError(n)})})(this,new gn(hr.ABORTED,"Firestore shutting down"))}}function d9(){return new fv(e=>z$(e),U$)}function mUe(e){e.Y_.forEach(t=>{t.next()})}var f9,p9;(p9=f9||(f9={})).ea="default",p9.Cache="cache";class gUe{constructor(t,r,n,i,l,h){this.localStore=t,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Ca={},this.Fa=new fv(p=>z$(p),U$),this.Ma=new Map,this.xa=new Set,this.Oa=new Kl(Ln.comparator),this.Na=new Map,this.La=new HU,this.Ba={},this.ka=new Map,this.qa=Xy.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function yUe(e,t,r){const n=bUe(e);try{const i=await function(h,p){const o=uo(h),_=ia.now(),C=p.reduce((z,j)=>z.add(j.key),Xa());let M,L;return o.persistence.runTransaction("Locally write mutations","readwrite",z=>{let j=eI(),K=Xa();return o.cs.getEntries(z,C).next($=>{j=$,j.forEach((q,ee)=>{ee.isValidDocument()||(K=K.add(q))})}).next(()=>o.localDocuments.getOverlayedDocuments(z,j)).next($=>{M=$;const q=[];for(const ee of p){const ie=hOe(ee,M.get(ee.key).overlayedDocument);ie!=null&&q.push(new og(ee.key,ie,P$(ie.value.mapValue),rd.exists(!0)))}return o.mutationQueue.addMutationBatch(z,_,q,p)}).next($=>{L=$;const q=$.applyToLocalDocumentSet(M,K);return o.documentOverlayCache.saveOverlays(z,$.batchId,q)})}).then(()=>({batchId:L.batchId,changes:N$(M)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(i.batchId),function(h,p,o){let _=h.Ba[h.currentUser.toKey()];_||(_=new Kl(ro)),_=_.insert(p,o),h.Ba[h.currentUser.toKey()]=_}(n,i.batchId,r),await jF(n,i.changes),await HF(n.remoteStore)}catch(i){const l=oee(i,"Failed to persist write");r.reject(l)}}function m9(e,t,r){const n=uo(e);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Fa.forEach((l,h)=>{const p=h.view.Z_(t);p.snapshot&&i.push(p.snapshot)}),function(h,p){const o=uo(h);o.onlineState=p;let _=!1;o.queries.forEach((C,M)=>{for(const L of M.j_)L.Z_(p)&&(_=!0)}),_&&mUe(o)}(n.eventManager,t),i.length&&n.Ca.d_(i),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function vUe(e,t){const r=uo(e),n=t.batch.batchId;try{const i=await XOe(r.localStore,t);aee(r,n,null),see(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await jF(r,i)}catch(i){await E$(i)}}async function _Ue(e,t,r){const n=uo(e);try{const i=await function(h,p){const o=uo(h);return o.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let C;return o.mutationQueue.lookupMutationBatch(_,p).next(M=>(ps(M!==null),C=M.keys(),o.mutationQueue.removeMutationBatch(_,M))).next(()=>o.mutationQueue.performConsistencyCheck(_)).next(()=>o.documentOverlayCache.removeOverlaysForBatchId(_,C,p)).next(()=>o.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,C)).next(()=>o.localDocuments.getDocuments(_,C))})}(n.localStore,t);aee(n,t,r),see(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await jF(n,i)}catch(i){await E$(i)}}function see(e,t){(e.ka.get(t)||[]).forEach(r=>{r.resolve()}),e.ka.delete(t)}function aee(e,t,r){const n=uo(e);let i=n.Ba[n.currentUser.toKey()];if(i){const l=i.get(t);l&&(r?l.reject(r):l.resolve(),i=i.remove(t)),n.Ba[n.currentUser.toKey()]=i}}async function jF(e,t,r){const n=uo(e),i=[],l=[],h=[];n.Fa.isEmpty()||(n.Fa.forEach((p,o)=>{h.push(n.Ka(o,t,r).then(_=>{var C;if((_||r)&&n.isPrimaryClient){const M=_?!_.fromCache:(C=void 0)===null||C===void 0?void 0:C.current;n.sharedClientState.updateQueryState(o.targetId,M?"current":"not-current")}if(_){i.push(_);const M=GU.Wi(o.targetId,_);l.push(M)}}))}),await Promise.all(h),n.Ca.d_(i),await async function(o,_){const C=uo(o);try{await C.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>or.forEach(_,L=>or.forEach(L.$i,z=>C.persistence.referenceDelegate.addReference(M,L.targetId,z)).next(()=>or.forEach(L.Ui,z=>C.persistence.referenceDelegate.removeReference(M,L.targetId,z)))))}catch(M){if(!OF(M))throw M;en("LocalStore","Failed to update sequence numbers: "+M)}for(const M of _){const L=M.targetId;if(!M.fromCache){const z=C.os.get(L),j=z.snapshotVersion,K=z.withLastLimboFreeSnapshotVersion(j);C.os=C.os.insert(L,K)}}}(n.localStore,l))}async function xUe(e,t){const r=uo(e);if(!r.currentUser.isEqual(t)){en("SyncEngine","User change. New user:",t.toKey());const n=await $$(r.localStore,t);r.currentUser=t,function(l,h){l.ka.forEach(p=>{p.forEach(o=>{o.reject(new gn(hr.CANCELLED,h))})}),l.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await jF(r,n.hs)}}function bUe(e){const t=uo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=vUe.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=_Ue.bind(null,t),t}class nI{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=NF(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,r){return null}Ha(t,r){return null}za(t){return qOe(this.persistence,new KOe,t.initialUser,this.serializer)}Ga(t){return new HOe(jU.Zr,this.serializer)}Wa(t){return new JOe}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nI.provider={build:()=>new nI};class I2{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>m9(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=xUe.bind(null,this.syncEngine),await fUe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new pUe}()}createDatastore(t){const r=NF(t.databaseInfo.databaseId),n=function(l){return new rUe(l)}(t.databaseInfo);return function(l,h,p,o){return new oUe(l,h,p,o)}(t.authCredentials,t.appCheckCredentials,n,r)}createRemoteStore(t){return function(n,i,l,h,p){return new aUe(n,i,l,h,p)}(this.localStore,this.datastore,t.asyncQueue,r=>m9(this.syncEngine,r,0),function(){return h9.D()?new h9:new $Oe}())}createSyncEngine(t,r){return function(i,l,h,p,o,_,C){const M=new gUe(i,l,h,p,o,_);return C&&(M.Qa=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(i){const l=uo(i);en("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await mw(l),l.k_.shutdown(),l.q_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}I2.provider={build:()=>new I2};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wUe{constructor(t,r,n,i,l){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=Ka.UNAUTHENTICATED,this.clientId=S$.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(n,async h=>{en("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(n,h=>(en("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Im;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const n=oee(r,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function Lk(e,t){e.asyncQueue.verifyOperationInProgress(),en("FirestoreClient","Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async i=>{n.isEqual(i)||(await $$(t.localStore,i),n=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function g9(e,t){e.asyncQueue.verifyOperationInProgress();const r=await BUe(e);en("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(n=>A9(t.remoteStore,n)),e.setAppCheckTokenChangeListener((n,i)=>A9(t.remoteStore,i)),e._onlineComponents=t}async function BUe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){en("FirestoreClient","Using user provided OfflineComponentProvider");try{await Lk(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(i){return i.name==="FirebaseError"?i.code===hr.FAILED_PRECONDITION||i.code===hr.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;qT("Error using user provided cache. Falling back to memory cache: "+r),await Lk(e,new nI)}}else en("FirestoreClient","Using default OfflineComponentProvider"),await Lk(e,new nI);return e._offlineComponents}async function CUe(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(en("FirestoreClient","Using user provided OnlineComponentProvider"),await g9(e,e._uninitializedComponentsProvider._online)):(en("FirestoreClient","Using default OnlineComponentProvider"),await g9(e,new I2))),e._onlineComponents}function SUe(e){return CUe(e).then(t=>t.syncEngine)}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lee(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cee(e,t,r){if(!r)throw new gn(hr.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function EUe(e,t,r,n){if(t===!0&&n===!0)throw new gn(hr.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function v9(e){if(!Ln.isDocumentKey(e))throw new gn(hr.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function _9(e){if(Ln.isDocumentKey(e))throw new gn(hr.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function WU(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":ai()}function uee(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new gn(hr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=WU(e);throw new gn(hr.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x9{constructor(t){var r,n;if(t.host===void 0){if(t.ssl!==void 0)throw new gn(hr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(r=t.ssl)===null||r===void 0||r;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new gn(hr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}EUe("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lee((n=t.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new gn(hr.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new gn(hr.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new gn(hr.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class GF{constructor(t,r,n,i){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new x9({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new gn(hr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new gn(hr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new x9(t),t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new gLe;switch(n.type){case"firstParty":return new xLe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new gn(hr.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=y9.get(r);n&&(en("ComponentProvider","Removing Datastore"),y9.delete(r),n.terminate())}(this),Promise.resolve()}}function TUe(e,t,r,n={}){var i;const l=(e=uee(e,GF))._getSettings(),h=`${t}:${r}`;if(l.host!=="firestore.googleapis.com"&&l.host!==h&&qT("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},l),{host:h,ssl:!1})),n.mockUserToken){let p,o;if(typeof n.mockUserToken=="string")p=n.mockUserToken,o=Ka.MOCK_USER;else{p=ZDe(n.mockUserToken,(i=e._app)===null||i===void 0?void 0:i.options.projectId);const _=n.mockUserToken.sub||n.mockUserToken.user_id;if(!_)throw new gn(hr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");o=new Ka(_)}e._authCredentials=new yLe(new C$(p,o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(t,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new qU(this.firestore,t,this._query)}}class nd{constructor(t,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gf(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new nd(this.firestore,t,this._key)}}class Gf extends qU{constructor(t,r,n){super(t,r,XLe(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new nd(this.firestore,null,new Ln(t))}withConverter(t){return new Gf(this.firestore,t,this._path)}}function IUe(e,t,...r){if(e=Eb(e),cee("collection","path",t),e instanceof GF){const n=Jo.fromString(t,...r);return _9(n),new Gf(e,null,n)}{if(!(e instanceof nd||e instanceof Gf))throw new gn(hr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Jo.fromString(t,...r));return _9(n),new Gf(e.firestore,null,n)}}function FUe(e,t,...r){if(e=Eb(e),arguments.length===1&&(t=S$.newId()),cee("doc","path",t),e instanceof GF){const n=Jo.fromString(t,...r);return v9(n),new nd(e,null,new Ln(n))}{if(!(e instanceof nd||e instanceof Gf))throw new gn(hr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Jo.fromString(t,...r));return v9(n),new nd(e.firestore,e instanceof Gf?e.converter:null,new Ln(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new eee(this,"async_queue_retry"),this.Vu=()=>{const n=Dk();n&&en("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=t;const r=Dk();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const r=Dk();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new Im;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!OF(t))throw t;en("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(t){const r=this.mu.then(()=>(this.du=!0,t().catch(n=>{this.Eu=n,this.du=!1;const i=function(h){let p=h.message||"";return h.stack&&(p=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),p}(n);throw Wm("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(t,r,n){this.fu(),this.Ru.indexOf(t)>-1&&(r=0);const i=KU.createAndSchedule(this,t,r,n,l=>this.yu(l));return this.Tu.push(i),i}fu(){this.Eu&&ai()}verifyOperationInProgress(){}async wu(){let t;do t=this.mu,await t;while(t!==this.mu)}Su(t){for(const r of this.Tu)if(r.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){const r=this.Tu.indexOf(t);this.Tu.splice(r,1)}}class hee extends GF{constructor(t,r,n,i){super(t,r,n,i),this.type="firestore",this._queue=new b9,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new b9(t),this._firestoreClient=void 0,await t}}}function PUe(e,t){const r=typeof e=="object"?e:oLe(),n=typeof e=="string"?e:"(default)",i=tLe(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const l=qDe("firestore");l&&TUe(i,...l)}return i}function MUe(e){if(e._terminated)throw new gn(hr.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||RUe(e),e._firestoreClient}function RUe(e){var t,r,n;const i=e._freezeSettings(),l=function(p,o,_,C){return new DLe(p,o,_,C.host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,lee(C.experimentalLongPollingOptions),C.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new wUe(e._authCredentials,e._appCheckCredentials,e._queue,l,e._componentsProvider&&function(p){const o=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(o),_online:o}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Db(lA.fromBase64String(t))}catch(r){throw new gn(hr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new Db(lA.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aee{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new gn(hr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sa(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dee{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fee{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new gn(hr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new gn(hr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ro(this._lat,t._lat)||ro(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pee{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(n,i){if(n.length!==i.length)return!1;for(let l=0;l<n.length;++l)if(n[l]!==i[l])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kUe=/^__.*__$/;class DUe{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return this.fieldMask!==null?new og(t,this.data,this.fieldMask,r,this.fieldTransforms):new pw(t,this.data,r,this.fieldTransforms)}}function mee(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ai()}}class XU{constructor(t,r,n,i,l,h){this.settings=t,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new XU(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(t),i=this.Fu({path:n,xu:!1});return i.Ou(t),i}Nu(t){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(t),i=this.Fu({path:n,xu:!1});return i.vu(),i}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return iI(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(t.length===0)throw this.Bu("Document fields must not be empty");if(mee(this.Cu)&&kUe.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class LUe{constructor(t,r,n){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=n||NF(t)}Qu(t,r,n,i=!1){return new XU({Cu:t,methodName:r,qu:n,path:Sa.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function OUe(e){const t=e._freezeSettings(),r=NF(e._databaseId);return new LUe(e._databaseId,!!t.ignoreUndefinedProperties,r)}function UUe(e,t,r,n,i,l={}){const h=e.Qu(l.merge||l.mergeFields?2:0,t,r,i);_ee("Data must be an object, but it was:",h,n);const p=yee(n,h);let o,_;if(l.merge)o=new nh(h.fieldMask),_=h.fieldTransforms;else if(l.mergeFields){const C=[];for(const M of l.mergeFields){const L=zUe(t,M,r);if(!h.contains(L))throw new gn(hr.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);QUe(C,L)||C.push(L)}o=new nh(C),_=h.fieldTransforms.filter(M=>o.covers(M.field))}else o=null,_=h.fieldTransforms;return new DUe(new rh(p),o,_)}function gee(e,t){if(vee(e=Eb(e)))return _ee("Unsupported field value:",t,e),yee(e,t);if(e instanceof dee)return function(n,i){if(!mee(i.Cu))throw i.Bu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${n._methodName}() is not currently supported inside arrays`);const l=n._toFieldTransform(i);l&&i.fieldTransforms.push(l)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&t.Cu!==4)throw t.Bu("Nested arrays are not supported");return function(n,i){const l=[];let h=0;for(const p of n){let o=gee(p,i.Lu(h));o==null&&(o={nullValue:"NULL_VALUE"}),l.push(o),h++}return{arrayValue:{values:l}}}(e,t)}return function(n,i){if((n=Eb(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return oOe(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const l=ia.fromDate(n);return{timestampValue:S2(i.serializer,l)}}if(n instanceof ia){const l=new ia(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:S2(i.serializer,l)}}if(n instanceof fee)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Db)return{bytesValue:yOe(i.serializer,n._byteString)};if(n instanceof nd){const l=i.databaseId,h=n.firestore._databaseId;if(!h.isEqual(l))throw i.Bu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Y$(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof pee)return function(h,p){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map(o=>{if(typeof o!="number")throw p.Bu("VectorValues must only contain numeric values.");return NU(p.serializer,o)})}}}}}}(n,i);throw i.Bu(`Unsupported field value: ${WU(n)}`)}(e,t)}function yee(e,t){const r={};return I$(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):fw(e,(n,i)=>{const l=gee(i,t.Mu(n));l!=null&&(r[n]=l)}),{mapValue:{fields:r}}}function vee(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof ia||e instanceof fee||e instanceof Db||e instanceof nd||e instanceof dee||e instanceof pee)}function _ee(e,t,r){if(!vee(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const n=WU(r);throw n==="an object"?t.Bu(e+" a custom object"):t.Bu(e+" "+n)}}function zUe(e,t,r){if((t=Eb(t))instanceof Aee)return t._internalPath;if(typeof t=="string")return NUe(e,t);throw iI("Field path arguments must be of type string or ",e,!1,void 0,r)}const VUe=new RegExp("[~\\*/\\[\\]]");function NUe(e,t,r){if(t.search(VUe)>=0)throw iI(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new Aee(...t.split("."))._internalPath}catch{throw iI(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function iI(e,t,r,n,i){const l=n&&!n.isEmpty(),h=i!==void 0;let p=`Function ${t}() called with invalid data`;r&&(p+=" (via `toFirestore()`)"),p+=". ";let o="";return(l||h)&&(o+=" (found",l&&(o+=` in field ${n}`),h&&(o+=` in document ${i}`),o+=")"),new gn(hr.INVALID_ARGUMENT,p+e+o)}function QUe(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HUe(e,t,r){let n;return n=e?e.toFirestore(t):t,n}function jUe(e,t){const r=uee(e.firestore,hee),n=FUe(e),i=HUe(e.converter,t);return GUe(r,[UUe(OUe(e.firestore),"addDoc",n._key,i,e.converter!==null,{}).toMutation(n._key,rd.exists(!1))]).then(()=>n)}function GUe(e,t){return function(n,i){const l=new Im;return n.asyncQueue.enqueueAndForget(async()=>yUe(await SUe(n),i,l)),l.promise}(MUe(e),t)}(function(t,r=!0){(function(i){dv=i})(iLe),WT(new Tb("firestore",(n,{instanceIdentifier:i,options:l})=>{const h=n.getProvider("app").getImmediate(),p=new hee(new vLe(n.getProvider("auth-internal")),new wLe(n.getProvider("app-check-internal")),function(_,C){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new gn(hr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new YT(_.options.projectId,C)}(h,i),h);return l=Object.assign({useFetchStreams:r},l),p._setSettings(l),p},"PUBLIC").setMultipleInstances(!0)),wy(Zj,"4.7.3",t),wy(Zj,"4.7.3","esm2017")})();const KUe={apiKey:void 0,authDomain:"ccc-data-store.firebaseapp.com",projectId:"ccc-data-store",storageBucket:"ccc-data-store.appspot.com",messagingSenderId:void 0,appId:void 0,measurementId:void 0},WUe=m$(KUe),qUe=PUe(WUe),XUe="pk.eyJ1IjoiY2hyaXN0aWFuLWJ1cm5zcmVkIiwiYSI6ImNtMjltczVwajA3Z2IyaXBzZGlqNXhtaWkifQ.9FC3d6uBtpOL5sn-LlRoaw";f2.accessToken=XUe;const ZUe=()=>{const[e,t]=Re.useState(null),[r,n]=Re.useState(null),[i,l]=Re.useState(null),[h,p]=Re.useState(null),[o,_]=Re.useState(null),[C,M]=Re.useState(null),[L,z]=Re.useState(null),[j,K]=Re.useState({lat:-37.81627664587091,lng:144.9858104478029}),[$,q]=Re.useState(""),ee=Re.useRef(null),ie=Re.useRef(null),fe=Re.useRef(null),me=Re.useRef(null),[ye,se]=Re.useState(window.innerWidth),re=x_e();Re.useEffect(()=>{const ht=()=>{se(window.innerWidth)};return window.addEventListener("resize",ht),()=>{window.removeEventListener("resize",ht)}},[]),Re.useEffect(()=>{const ht={params:{operation:e||"",leadObserver:r||"",riskSelected:i||"",controlFrameworkSelected:h||"",operatingContexts:o||"",equipmentSelected:C||""}};(async()=>{try{const ir=await DDe(ht);q(ir)}catch(ir){console.error("Failed to generate QR code URL",ir)}})()},[e,r,i,h,o,C]),Re.useEffect(()=>(ee.current&&(ie.current=new f2.Map({container:ee.current,center:j,zoom:14}),ie.current.on("click",ht=>{const lr=ht.lngLat;z({lat:lr.lat,lng:lr.lng}),fe.current&&fe.current.remove(),fe.current=new f2.Marker().setLngLat(lr).addTo(ie.current)})),()=>{ie.current&&ie.current.remove()}),[]),Re.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(ht=>{const{latitude:lr,longitude:ir}=ht.coords;K({lat:lr,lng:ir}),console.log("User's location:",{latitude:lr,longitude:ir})},ht=>{console.error("Error fetching user's location:",ht)},{enableHighAccuracy:!0})},[]);const de=Object.entries(_D||{}).map(([ht,lr])=>({label:`${ht} - ${lr.site}`,value:ht})),_e=Object.entries(xD||{}).map(([ht,lr])=>({label:`${ht} - ${lr.label}`,value:ht,icon:lr.icon})),ve=i?Object.entries(bD[i]||{}).map(([ht,lr])=>({label:`${ht} - ${lr.control}`,value:ht})):[],Pe=h?Object.entries(wD[h]||{}).map(([ht,lr])=>({label:`${ht} - ${lr.operating_context}`,value:ht})):[],Ee=o?Object.entries(BD[o]||{}).map(([ht,lr])=>({label:`${ht} - ${lr.equipment}`,value:ht})):[],Ht=ht=>{const lr=(ht==null?void 0:ht.value)||null;t(lr),n(null),l(null),p(null),_(null),M(null)},Xt=ht=>{l((ht==null?void 0:ht.value)||null),p(null),_(null),M(null)},gt=ht=>{p((ht==null?void 0:ht.value)||null),_(null),M(null)},jt=ht=>{_((ht==null?void 0:ht.value)||null),M(null)},Mt=ht=>{M((ht==null?void 0:ht.value)||null)},Yt=async()=>{if(o&&i&&C&&h&&L&&e&&$)try{await jUe(IUe(qUe,"markers"),{context:wD[h][o].operating_context,control:xD[i].label,equipment:BD[o][C].equipment,framework:bD[i][h].control,location:L,operation:_D[e].site,url:$}),re({title:"Marker created.",description:"Marker successfully created!",status:"success",duration:5e3,isClosable:!0,position:"top"})}catch(ht){re({title:"Error adding marker.",description:`Error: ${ht.message}`,status:"error",duration:5e3,isClosable:!0,position:"top"})}else re({title:"Input Error.",description:"Error - Fill all inputs to create a marker.",status:"error",duration:5e3,isClosable:!0,position:"top"})};return $e.jsxs(Ab,{width:"100vw",spacing:4,align:"start",flexDirection:ye<950?"column":"row",children:[$e.jsxs(Of,{position:"relative",bg:"gray.100",width:ye<950?"100%":"50%",height:"100%",padding:4,children:[$e.jsx(UO,{children:"Parameters"}),$e.jsx(sm,{as:"b",fontSize:"sm",children:"Operation"}),$e.jsx(o1,{options:de,value:de.find(ht=>ht.value===e)||null,onChange:Ht,isClearable:!0}),$e.jsx(sm,{as:"b",fontSize:"sm",children:"Controls"}),$e.jsx(o1,{options:_e,value:_e.find(ht=>ht.value===i)||null,isDisabled:!e,onChange:Xt,isClearable:!0}),$e.jsx(sm,{as:"b",fontSize:"sm",children:"Control Framework"}),$e.jsx(o1,{options:ve,value:ve.find(ht=>ht.value===h)||null,isDisabled:!i,onChange:gt,isClearable:!0}),$e.jsx(sm,{as:"b",fontSize:"sm",children:"Operating Context"}),$e.jsx(o1,{options:Pe,value:Pe.find(ht=>ht.value===o)||null,isDisabled:!h,onChange:jt,isClearable:!0}),$e.jsx(sm,{as:"b",fontSize:"sm",children:"Equipment"}),$e.jsx(o1,{options:Ee,value:Ee.find(ht=>ht.value===C)||null,isDisabled:!o,onChange:Mt,isClearable:!0}),$e.jsx(sm,{as:"b",fontSize:"sm",children:"Location (Lat, Lng)"}),$e.jsxs(zq,{mb:4,children:[$e.jsx(TO,{value:L?`${L.lat}, ${L.lng}`:"",readOnly:!0,placeholder:"Select a location on the map"}),L&&$e.jsx(IO,{children:$e.jsx(Mq,{"aria-label":"Clear location",icon:$e.jsx(UDe,{}),size:"xs",onClick:()=>{z(null),fe.current&&(fe.current.remove(),fe.current=null)},bg:"transparent"})})]}),$e.jsx(Of,{height:"300px",ref:ee,style:{width:"100%"}})]}),$e.jsxs(Of,{position:"relative",width:ye<950?"100%":"50%",height:"92vh",padding:4,children:[$e.jsx(RDe,{value:$,summaryTableRef:me,createMarker:Yt}),$e.jsx(LDe,{ref:me,selectedOperation:e,selectedControl:i,selectedControlFramework:h,selectedOperatingContext:o,selectedEquipment:C,locationCoords:L})]})]})};function YUe(){return $e.jsxs(Qye,{children:[$e.jsx(b_e,{}),$e.jsx(Ab,{children:$e.jsx(ZUe,{})})]})}J7(document.getElementById("root")).render($e.jsx(Re.StrictMode,{children:$e.jsx(YUe,{})}));
