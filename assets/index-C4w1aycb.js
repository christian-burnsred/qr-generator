function AY(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const c=Object.getOwnPropertyDescriptor(n,i);c&&Object.defineProperty(e,i,c.get?c:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function r(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(i){if(i.ep)return;i.ep=!0;const c=r(i);fetch(i.href,c)}})();var Qy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function V1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gV={exports:{}},zS={},vV={exports:{}},Dn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H1=Symbol.for("react.element"),hY=Symbol.for("react.portal"),dY=Symbol.for("react.fragment"),fY=Symbol.for("react.strict_mode"),pY=Symbol.for("react.profiler"),mY=Symbol.for("react.provider"),gY=Symbol.for("react.context"),vY=Symbol.for("react.forward_ref"),yY=Symbol.for("react.suspense"),_Y=Symbol.for("react.memo"),xY=Symbol.for("react.lazy"),DU=Symbol.iterator;function bY(e){return e===null||typeof e!="object"?null:(e=DU&&e[DU]||e["@@iterator"],typeof e=="function"?e:null)}var yV={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_V=Object.assign,xV={};function y0(e,t,r){this.props=e,this.context=t,this.refs=xV,this.updater=r||yV}y0.prototype.isReactComponent={};y0.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};y0.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function bV(){}bV.prototype=y0.prototype;function xD(e,t,r){this.props=e,this.context=t,this.refs=xV,this.updater=r||yV}var bD=xD.prototype=new bV;bD.constructor=xD;_V(bD,y0.prototype);bD.isPureReactComponent=!0;var kU=Array.isArray,wV=Object.prototype.hasOwnProperty,wD={current:null},BV={key:!0,ref:!0,__self:!0,__source:!0};function CV(e,t,r){var n,i={},c=null,d=null;if(t!=null)for(n in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(c=""+t.key),t)wV.call(t,n)&&!BV.hasOwnProperty(n)&&(i[n]=t[n]);var y=arguments.length-2;if(y===1)i.children=r;else if(1<y){for(var o=Array(y),x=0;x<y;x++)o[x]=arguments[x+2];i.children=o}if(e&&e.defaultProps)for(n in y=e.defaultProps,y)i[n]===void 0&&(i[n]=y[n]);return{$$typeof:H1,type:e,key:c,ref:d,props:i,_owner:wD.current}}function wY(e,t){return{$$typeof:H1,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function BD(e){return typeof e=="object"&&e!==null&&e.$$typeof===H1}function BY(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var RU=/\/+/g;function nI(e,t){return typeof e=="object"&&e!==null&&e.key!=null?BY(""+e.key):t.toString(36)}function SB(e,t,r,n,i){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(c){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case H1:case hY:d=!0}}if(d)return d=e,i=i(d),e=n===""?"."+nI(d,0):n,kU(i)?(r="",e!=null&&(r=e.replace(RU,"$&/")+"/"),SB(i,t,r,"",function(x){return x})):i!=null&&(BD(i)&&(i=wY(i,r+(!i.key||d&&d.key===i.key?"":(""+i.key).replace(RU,"$&/")+"/")+e)),t.push(i)),1;if(d=0,n=n===""?".":n+":",kU(e))for(var y=0;y<e.length;y++){c=e[y];var o=n+nI(c,y);d+=SB(c,t,r,o,i)}else if(o=bY(e),typeof o=="function")for(e=o.call(e),y=0;!(c=e.next()).done;)c=c.value,o=n+nI(c,y++),d+=SB(c,t,r,o,i);else if(c==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function ow(e,t,r){if(e==null)return e;var n=[],i=0;return SB(e,n,"","",function(c){return t.call(r,c,i++)}),n}function CY(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var fs={current:null},EB={transition:null},SY={ReactCurrentDispatcher:fs,ReactCurrentBatchConfig:EB,ReactCurrentOwner:wD};function SV(){throw Error("act(...) is not supported in production builds of React.")}Dn.Children={map:ow,forEach:function(e,t,r){ow(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ow(e,function(){t++}),t},toArray:function(e){return ow(e,function(t){return t})||[]},only:function(e){if(!BD(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Dn.Component=y0;Dn.Fragment=dY;Dn.Profiler=pY;Dn.PureComponent=xD;Dn.StrictMode=fY;Dn.Suspense=yY;Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SY;Dn.act=SV;Dn.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=_V({},e.props),i=e.key,c=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(c=t.ref,d=wD.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var y=e.type.defaultProps;for(o in t)wV.call(t,o)&&!BV.hasOwnProperty(o)&&(n[o]=t[o]===void 0&&y!==void 0?y[o]:t[o])}var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){y=Array(o);for(var x=0;x<o;x++)y[x]=arguments[x+2];n.children=y}return{$$typeof:H1,type:e.type,key:i,ref:c,props:n,_owner:d}};Dn.createContext=function(e){return e={$$typeof:gY,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:mY,_context:e},e.Consumer=e};Dn.createElement=CV;Dn.createFactory=function(e){var t=CV.bind(null,e);return t.type=e,t};Dn.createRef=function(){return{current:null}};Dn.forwardRef=function(e){return{$$typeof:vY,render:e}};Dn.isValidElement=BD;Dn.lazy=function(e){return{$$typeof:xY,_payload:{_status:-1,_result:e},_init:CY}};Dn.memo=function(e,t){return{$$typeof:_Y,type:e,compare:t===void 0?null:t}};Dn.startTransition=function(e){var t=EB.transition;EB.transition={};try{e()}finally{EB.transition=t}};Dn.unstable_act=SV;Dn.useCallback=function(e,t){return fs.current.useCallback(e,t)};Dn.useContext=function(e){return fs.current.useContext(e)};Dn.useDebugValue=function(){};Dn.useDeferredValue=function(e){return fs.current.useDeferredValue(e)};Dn.useEffect=function(e,t){return fs.current.useEffect(e,t)};Dn.useId=function(){return fs.current.useId()};Dn.useImperativeHandle=function(e,t,r){return fs.current.useImperativeHandle(e,t,r)};Dn.useInsertionEffect=function(e,t){return fs.current.useInsertionEffect(e,t)};Dn.useLayoutEffect=function(e,t){return fs.current.useLayoutEffect(e,t)};Dn.useMemo=function(e,t){return fs.current.useMemo(e,t)};Dn.useReducer=function(e,t,r){return fs.current.useReducer(e,t,r)};Dn.useRef=function(e){return fs.current.useRef(e)};Dn.useState=function(e){return fs.current.useState(e)};Dn.useSyncExternalStore=function(e,t,r){return fs.current.useSyncExternalStore(e,t,r)};Dn.useTransition=function(){return fs.current.useTransition()};Dn.version="18.3.1";vV.exports=Dn;var Se=vV.exports;const Tu=V1(Se),LU=AY({__proto__:null,default:Tu},[Se]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EY=Se,TY=Symbol.for("react.element"),FY=Symbol.for("react.fragment"),IY=Object.prototype.hasOwnProperty,MY=EY.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,PY={key:!0,ref:!0,__self:!0,__source:!0};function EV(e,t,r){var n,i={},c=null,d=null;r!==void 0&&(c=""+r),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(d=t.ref);for(n in t)IY.call(t,n)&&!PY.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:TY,type:e,key:c,ref:d,props:i,_owner:MY.current}}zS.Fragment=FY;zS.jsx=EV;zS.jsxs=EV;gV.exports=zS;var Je=gV.exports,TV={exports:{}},ul={},FV={exports:{}},IV={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Pt,Xt){var It=Pt.length;Pt.push(Xt);e:for(;0<It;){var dr=It-1>>>1,ar=Pt[dr];if(0<i(ar,Xt))Pt[dr]=Xt,Pt[It]=ar,It=dr;else break e}}function r(Pt){return Pt.length===0?null:Pt[0]}function n(Pt){if(Pt.length===0)return null;var Xt=Pt[0],It=Pt.pop();if(It!==Xt){Pt[0]=It;e:for(var dr=0,ar=Pt.length,tr=ar>>>1;dr<tr;){var Rt=2*(dr+1)-1,Or=Pt[Rt],Cr=Rt+1,qr=Pt[Cr];if(0>i(Or,It))Cr<ar&&0>i(qr,Or)?(Pt[dr]=qr,Pt[Cr]=It,dr=Cr):(Pt[dr]=Or,Pt[Rt]=It,dr=Rt);else if(Cr<ar&&0>i(qr,It))Pt[dr]=qr,Pt[Cr]=It,dr=Cr;else break e}}return Xt}function i(Pt,Xt){var It=Pt.sortIndex-Xt.sortIndex;return It!==0?It:Pt.id-Xt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,y=d.now();e.unstable_now=function(){return d.now()-y}}var o=[],x=[],S=1,k=null,O=3,Q=!1,G=!1,K=!1,ee=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function re(Pt){for(var Xt=r(x);Xt!==null;){if(Xt.callback===null)n(x);else if(Xt.startTime<=Pt)n(x),Xt.sortIndex=Xt.expirationTime,t(o,Xt);else break;Xt=r(x)}}function ue(Pt){if(K=!1,re(Pt),!G)if(r(o)!==null)G=!0,ot(ce);else{var Xt=r(x);Xt!==null&&Gt(ue,Xt.startTime-Pt)}}function ce(Pt,Xt){G=!1,K&&(K=!1,W(fe),fe=-1),Q=!0;var It=O;try{for(re(Xt),k=r(o);k!==null&&(!(k.expirationTime>Xt)||Pt&&!He());){var dr=k.callback;if(typeof dr=="function"){k.callback=null,O=k.priorityLevel;var ar=dr(k.expirationTime<=Xt);Xt=e.unstable_now(),typeof ar=="function"?k.callback=ar:k===r(o)&&n(o),re(Xt)}else n(o);k=r(o)}if(k!==null)var tr=!0;else{var Rt=r(x);Rt!==null&&Gt(ue,Rt.startTime-Xt),tr=!1}return tr}finally{k=null,O=It,Q=!1}}var he=!1,xe=null,fe=-1,Ue=5,Ge=-1;function He(){return!(e.unstable_now()-Ge<Ue)}function tt(){if(xe!==null){var Pt=e.unstable_now();Ge=Pt;var Xt=!0;try{Xt=xe(!0,Pt)}finally{Xt?pt():(he=!1,xe=null)}}else he=!1}var pt;if(typeof J=="function")pt=function(){J(tt)};else if(typeof MessageChannel<"u"){var gt=new MessageChannel,Et=gt.port2;gt.port1.onmessage=tt,pt=function(){Et.postMessage(null)}}else pt=function(){ee(tt,0)};function ot(Pt){xe=Pt,he||(he=!0,pt())}function Gt(Pt,Xt){fe=ee(function(){Pt(e.unstable_now())},Xt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Pt){Pt.callback=null},e.unstable_continueExecution=function(){G||Q||(G=!0,ot(ce))},e.unstable_forceFrameRate=function(Pt){0>Pt||125<Pt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ue=0<Pt?Math.floor(1e3/Pt):5},e.unstable_getCurrentPriorityLevel=function(){return O},e.unstable_getFirstCallbackNode=function(){return r(o)},e.unstable_next=function(Pt){switch(O){case 1:case 2:case 3:var Xt=3;break;default:Xt=O}var It=O;O=Xt;try{return Pt()}finally{O=It}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Pt,Xt){switch(Pt){case 1:case 2:case 3:case 4:case 5:break;default:Pt=3}var It=O;O=Pt;try{return Xt()}finally{O=It}},e.unstable_scheduleCallback=function(Pt,Xt,It){var dr=e.unstable_now();switch(typeof It=="object"&&It!==null?(It=It.delay,It=typeof It=="number"&&0<It?dr+It:dr):It=dr,Pt){case 1:var ar=-1;break;case 2:ar=250;break;case 5:ar=1073741823;break;case 4:ar=1e4;break;default:ar=5e3}return ar=It+ar,Pt={id:S++,callback:Xt,priorityLevel:Pt,startTime:It,expirationTime:ar,sortIndex:-1},It>dr?(Pt.sortIndex=It,t(x,Pt),r(o)===null&&Pt===r(x)&&(K?(W(fe),fe=-1):K=!0,Gt(ue,It-dr))):(Pt.sortIndex=ar,t(o,Pt),G||Q||(G=!0,ot(ce))),Pt},e.unstable_shouldYield=He,e.unstable_wrapCallback=function(Pt){var Xt=O;return function(){var It=O;O=Xt;try{return Pt.apply(this,arguments)}finally{O=It}}}})(IV);FV.exports=IV;var DY=FV.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kY=Se,al=DY;function Yt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var MV=new Set,Z_={};function Bp(e,t){Jg(e,t),Jg(e+"Capture",t)}function Jg(e,t){for(Z_[e]=t,e=0;e<t.length;e++)MV.add(t[e])}var kA=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tP=Object.prototype.hasOwnProperty,RY=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,OU={},UU={};function LY(e){return tP.call(UU,e)?!0:tP.call(OU,e)?!1:RY.test(e)?UU[e]=!0:(OU[e]=!0,!1)}function OY(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function UY(e,t,r,n){if(t===null||typeof t>"u"||OY(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ps(e,t,r,n,i,c,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=c,this.removeEmptyString=d}var Ca={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ca[e]=new ps(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ca[t]=new ps(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ca[e]=new ps(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ca[e]=new ps(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ca[e]=new ps(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ca[e]=new ps(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ca[e]=new ps(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ca[e]=new ps(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ca[e]=new ps(e,5,!1,e.toLowerCase(),null,!1,!1)});var CD=/[\-:]([a-z])/g;function SD(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(CD,SD);Ca[t]=new ps(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(CD,SD);Ca[t]=new ps(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(CD,SD);Ca[t]=new ps(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ca[e]=new ps(e,1,!1,e.toLowerCase(),null,!1,!1)});Ca.xlinkHref=new ps("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ca[e]=new ps(e,1,!1,e.toLowerCase(),null,!0,!0)});function ED(e,t,r,n){var i=Ca.hasOwnProperty(t)?Ca[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(UY(t,r,i,n)&&(r=null),n||i===null?LY(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var HA=kY.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,aw=Symbol.for("react.element"),sg=Symbol.for("react.portal"),lg=Symbol.for("react.fragment"),TD=Symbol.for("react.strict_mode"),rP=Symbol.for("react.profiler"),PV=Symbol.for("react.provider"),DV=Symbol.for("react.context"),FD=Symbol.for("react.forward_ref"),nP=Symbol.for("react.suspense"),iP=Symbol.for("react.suspense_list"),ID=Symbol.for("react.memo"),Zh=Symbol.for("react.lazy"),kV=Symbol.for("react.offscreen"),zU=Symbol.iterator;function hy(e){return e===null||typeof e!="object"?null:(e=zU&&e[zU]||e["@@iterator"],typeof e=="function"?e:null)}var oo=Object.assign,iI;function Ny(e){if(iI===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);iI=t&&t[1]||""}return`
`+iI+e}var oI=!1;function aI(e,t){if(!e||oI)return"";oI=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(x){var n=x}Reflect.construct(e,[],t)}else{try{t.call()}catch(x){n=x}e.call(t.prototype)}else{try{throw Error()}catch(x){n=x}e()}}catch(x){if(x&&n&&typeof x.stack=="string"){for(var i=x.stack.split(`
`),c=n.stack.split(`
`),d=i.length-1,y=c.length-1;1<=d&&0<=y&&i[d]!==c[y];)y--;for(;1<=d&&0<=y;d--,y--)if(i[d]!==c[y]){if(d!==1||y!==1)do if(d--,y--,0>y||i[d]!==c[y]){var o=`
`+i[d].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}while(1<=d&&0<=y);break}}}finally{oI=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ny(e):""}function zY(e){switch(e.tag){case 5:return Ny(e.type);case 16:return Ny("Lazy");case 13:return Ny("Suspense");case 19:return Ny("SuspenseList");case 0:case 2:case 15:return e=aI(e.type,!1),e;case 11:return e=aI(e.type.render,!1),e;case 1:return e=aI(e.type,!0),e;default:return""}}function oP(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case lg:return"Fragment";case sg:return"Portal";case rP:return"Profiler";case TD:return"StrictMode";case nP:return"Suspense";case iP:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case DV:return(e.displayName||"Context")+".Consumer";case PV:return(e._context.displayName||"Context")+".Provider";case FD:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ID:return t=e.displayName||null,t!==null?t:oP(e.type)||"Memo";case Zh:t=e._payload,e=e._init;try{return oP(e(t))}catch{}}return null}function QY(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oP(t);case 8:return t===TD?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Sd(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function RV(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function NY(e){var t=RV(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,c=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(d){n=""+d,c.call(this,d)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(d){n=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function sw(e){e._valueTracker||(e._valueTracker=NY(e))}function LV(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=RV(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function vC(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function aP(e,t){var r=t.checked;return oo({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function QU(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Sd(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function OV(e,t){t=t.checked,t!=null&&ED(e,"checked",t,!1)}function sP(e,t){OV(e,t);var r=Sd(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?lP(e,t.type,r):t.hasOwnProperty("defaultValue")&&lP(e,t.type,Sd(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function NU(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function lP(e,t,r){(t!=="number"||vC(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Vy=Array.isArray;function Rg(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Sd(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function cP(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Yt(91));return oo({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function VU(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Yt(92));if(Vy(r)){if(1<r.length)throw Error(Yt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Sd(r)}}function UV(e,t){var r=Sd(t.value),n=Sd(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function HU(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function zV(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uP(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?zV(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var lw,QV=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(lw=lw||document.createElement("div"),lw.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=lw.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Y_(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var d_={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},VY=["Webkit","ms","Moz","O"];Object.keys(d_).forEach(function(e){VY.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),d_[t]=d_[e]})});function NV(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||d_.hasOwnProperty(e)&&d_[e]?(""+t).trim():t+"px"}function VV(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=NV(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var HY=oo({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function AP(e,t){if(t){if(HY[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Yt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Yt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Yt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Yt(62))}}function hP(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dP=null;function MD(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fP=null,Lg=null,Og=null;function jU(e){if(e=K1(e)){if(typeof fP!="function")throw Error(Yt(280));var t=e.stateNode;t&&(t=jS(t),fP(e.stateNode,e.type,t))}}function HV(e){Lg?Og?Og.push(e):Og=[e]:Lg=e}function jV(){if(Lg){var e=Lg,t=Og;if(Og=Lg=null,jU(e),t)for(e=0;e<t.length;e++)jU(t[e])}}function GV(e,t){return e(t)}function KV(){}var sI=!1;function WV(e,t,r){if(sI)return e(t,r);sI=!0;try{return GV(e,t,r)}finally{sI=!1,(Lg!==null||Og!==null)&&(KV(),jV())}}function J_(e,t){var r=e.stateNode;if(r===null)return null;var n=jS(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Yt(231,t,typeof r));return r}var pP=!1;if(kA)try{var dy={};Object.defineProperty(dy,"passive",{get:function(){pP=!0}}),window.addEventListener("test",dy,dy),window.removeEventListener("test",dy,dy)}catch{pP=!1}function jY(e,t,r,n,i,c,d,y,o){var x=Array.prototype.slice.call(arguments,3);try{t.apply(r,x)}catch(S){this.onError(S)}}var f_=!1,yC=null,_C=!1,mP=null,GY={onError:function(e){f_=!0,yC=e}};function KY(e,t,r,n,i,c,d,y,o){f_=!1,yC=null,jY.apply(GY,arguments)}function WY(e,t,r,n,i,c,d,y,o){if(KY.apply(this,arguments),f_){if(f_){var x=yC;f_=!1,yC=null}else throw Error(Yt(198));_C||(_C=!0,mP=x)}}function Cp(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function qV(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function GU(e){if(Cp(e)!==e)throw Error(Yt(188))}function qY(e){var t=e.alternate;if(!t){if(t=Cp(e),t===null)throw Error(Yt(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var c=i.alternate;if(c===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===c.child){for(c=i.child;c;){if(c===r)return GU(i),e;if(c===n)return GU(i),t;c=c.sibling}throw Error(Yt(188))}if(r.return!==n.return)r=i,n=c;else{for(var d=!1,y=i.child;y;){if(y===r){d=!0,r=i,n=c;break}if(y===n){d=!0,n=i,r=c;break}y=y.sibling}if(!d){for(y=c.child;y;){if(y===r){d=!0,r=c,n=i;break}if(y===n){d=!0,n=c,r=i;break}y=y.sibling}if(!d)throw Error(Yt(189))}}if(r.alternate!==n)throw Error(Yt(190))}if(r.tag!==3)throw Error(Yt(188));return r.stateNode.current===r?e:t}function XV(e){return e=qY(e),e!==null?ZV(e):null}function ZV(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ZV(e);if(t!==null)return t;e=e.sibling}return null}var YV=al.unstable_scheduleCallback,KU=al.unstable_cancelCallback,XY=al.unstable_shouldYield,ZY=al.unstable_requestPaint,Co=al.unstable_now,YY=al.unstable_getCurrentPriorityLevel,PD=al.unstable_ImmediatePriority,JV=al.unstable_UserBlockingPriority,xC=al.unstable_NormalPriority,JY=al.unstable_LowPriority,$V=al.unstable_IdlePriority,QS=null,Fu=null;function $Y(e){if(Fu&&typeof Fu.onCommitFiberRoot=="function")try{Fu.onCommitFiberRoot(QS,e,void 0,(e.current.flags&128)===128)}catch{}}var Pc=Math.clz32?Math.clz32:rJ,eJ=Math.log,tJ=Math.LN2;function rJ(e){return e>>>=0,e===0?32:31-(eJ(e)/tJ|0)|0}var cw=64,uw=4194304;function Hy(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function bC(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,c=e.pingedLanes,d=r&268435455;if(d!==0){var y=d&~i;y!==0?n=Hy(y):(c&=d,c!==0&&(n=Hy(c)))}else d=r&~i,d!==0?n=Hy(d):c!==0&&(n=Hy(c));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,c=t&-t,i>=c||i===16&&(c&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Pc(t),i=1<<r,n|=e[r],t&=~i;return n}function nJ(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iJ(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,c=e.pendingLanes;0<c;){var d=31-Pc(c),y=1<<d,o=i[d];o===-1?(!(y&r)||y&n)&&(i[d]=nJ(y,t)):o<=t&&(e.expiredLanes|=y),c&=~y}}function gP(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function e8(){var e=cw;return cw<<=1,!(cw&4194240)&&(cw=64),e}function lI(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function j1(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Pc(t),e[t]=r}function oJ(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Pc(r),c=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~c}}function DD(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Pc(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var gi=0;function t8(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var r8,kD,n8,i8,o8,vP=!1,Aw=[],dd=null,fd=null,pd=null,$_=new Map,e1=new Map,td=[],aJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function WU(e,t){switch(e){case"focusin":case"focusout":dd=null;break;case"dragenter":case"dragleave":fd=null;break;case"mouseover":case"mouseout":pd=null;break;case"pointerover":case"pointerout":$_.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":e1.delete(t.pointerId)}}function fy(e,t,r,n,i,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:c,targetContainers:[i]},t!==null&&(t=K1(t),t!==null&&kD(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function sJ(e,t,r,n,i){switch(t){case"focusin":return dd=fy(dd,e,t,r,n,i),!0;case"dragenter":return fd=fy(fd,e,t,r,n,i),!0;case"mouseover":return pd=fy(pd,e,t,r,n,i),!0;case"pointerover":var c=i.pointerId;return $_.set(c,fy($_.get(c)||null,e,t,r,n,i)),!0;case"gotpointercapture":return c=i.pointerId,e1.set(c,fy(e1.get(c)||null,e,t,r,n,i)),!0}return!1}function a8(e){var t=Xf(e.target);if(t!==null){var r=Cp(t);if(r!==null){if(t=r.tag,t===13){if(t=qV(r),t!==null){e.blockedOn=t,o8(e.priority,function(){n8(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function TB(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=yP(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);dP=n,r.target.dispatchEvent(n),dP=null}else return t=K1(r),t!==null&&kD(t),e.blockedOn=r,!1;t.shift()}return!0}function qU(e,t,r){TB(e)&&r.delete(t)}function lJ(){vP=!1,dd!==null&&TB(dd)&&(dd=null),fd!==null&&TB(fd)&&(fd=null),pd!==null&&TB(pd)&&(pd=null),$_.forEach(qU),e1.forEach(qU)}function py(e,t){e.blockedOn===t&&(e.blockedOn=null,vP||(vP=!0,al.unstable_scheduleCallback(al.unstable_NormalPriority,lJ)))}function t1(e){function t(i){return py(i,e)}if(0<Aw.length){py(Aw[0],e);for(var r=1;r<Aw.length;r++){var n=Aw[r];n.blockedOn===e&&(n.blockedOn=null)}}for(dd!==null&&py(dd,e),fd!==null&&py(fd,e),pd!==null&&py(pd,e),$_.forEach(t),e1.forEach(t),r=0;r<td.length;r++)n=td[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<td.length&&(r=td[0],r.blockedOn===null);)a8(r),r.blockedOn===null&&td.shift()}var Ug=HA.ReactCurrentBatchConfig,wC=!0;function cJ(e,t,r,n){var i=gi,c=Ug.transition;Ug.transition=null;try{gi=1,RD(e,t,r,n)}finally{gi=i,Ug.transition=c}}function uJ(e,t,r,n){var i=gi,c=Ug.transition;Ug.transition=null;try{gi=4,RD(e,t,r,n)}finally{gi=i,Ug.transition=c}}function RD(e,t,r,n){if(wC){var i=yP(e,t,r,n);if(i===null)vI(e,t,n,BC,r),WU(e,n);else if(sJ(i,e,t,r,n))n.stopPropagation();else if(WU(e,n),t&4&&-1<aJ.indexOf(e)){for(;i!==null;){var c=K1(i);if(c!==null&&r8(c),c=yP(e,t,r,n),c===null&&vI(e,t,n,BC,r),c===i)break;i=c}i!==null&&n.stopPropagation()}else vI(e,t,n,null,r)}}var BC=null;function yP(e,t,r,n){if(BC=null,e=MD(n),e=Xf(e),e!==null)if(t=Cp(e),t===null)e=null;else if(r=t.tag,r===13){if(e=qV(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return BC=e,null}function s8(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YY()){case PD:return 1;case JV:return 4;case xC:case JY:return 16;case $V:return 536870912;default:return 16}default:return 16}}var od=null,LD=null,FB=null;function l8(){if(FB)return FB;var e,t=LD,r=t.length,n,i="value"in od?od.value:od.textContent,c=i.length;for(e=0;e<r&&t[e]===i[e];e++);var d=r-e;for(n=1;n<=d&&t[r-n]===i[c-n];n++);return FB=i.slice(e,1<n?1-n:void 0)}function IB(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function hw(){return!0}function XU(){return!1}function Al(e){function t(r,n,i,c,d){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(r=e[y],this[y]=r?r(c):c[y]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?hw:XU,this.isPropagationStopped=XU,this}return oo(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=hw)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=hw)},persist:function(){},isPersistent:hw}),t}var _0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},OD=Al(_0),G1=oo({},_0,{view:0,detail:0}),AJ=Al(G1),cI,uI,my,NS=oo({},G1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:UD,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==my&&(my&&e.type==="mousemove"?(cI=e.screenX-my.screenX,uI=e.screenY-my.screenY):uI=cI=0,my=e),cI)},movementY:function(e){return"movementY"in e?e.movementY:uI}}),ZU=Al(NS),hJ=oo({},NS,{dataTransfer:0}),dJ=Al(hJ),fJ=oo({},G1,{relatedTarget:0}),AI=Al(fJ),pJ=oo({},_0,{animationName:0,elapsedTime:0,pseudoElement:0}),mJ=Al(pJ),gJ=oo({},_0,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vJ=Al(gJ),yJ=oo({},_0,{data:0}),YU=Al(yJ),_J={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xJ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bJ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wJ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=bJ[e])?!!t[e]:!1}function UD(){return wJ}var BJ=oo({},G1,{key:function(e){if(e.key){var t=_J[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=IB(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xJ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:UD,charCode:function(e){return e.type==="keypress"?IB(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?IB(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),CJ=Al(BJ),SJ=oo({},NS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),JU=Al(SJ),EJ=oo({},G1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:UD}),TJ=Al(EJ),FJ=oo({},_0,{propertyName:0,elapsedTime:0,pseudoElement:0}),IJ=Al(FJ),MJ=oo({},NS,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),PJ=Al(MJ),DJ=[9,13,27,32],zD=kA&&"CompositionEvent"in window,p_=null;kA&&"documentMode"in document&&(p_=document.documentMode);var kJ=kA&&"TextEvent"in window&&!p_,c8=kA&&(!zD||p_&&8<p_&&11>=p_),$U=" ",e5=!1;function u8(e,t){switch(e){case"keyup":return DJ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function A8(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cg=!1;function RJ(e,t){switch(e){case"compositionend":return A8(t);case"keypress":return t.which!==32?null:(e5=!0,$U);case"textInput":return e=t.data,e===$U&&e5?null:e;default:return null}}function LJ(e,t){if(cg)return e==="compositionend"||!zD&&u8(e,t)?(e=l8(),FB=LD=od=null,cg=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return c8&&t.locale!=="ko"?null:t.data;default:return null}}var OJ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function t5(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!OJ[e.type]:t==="textarea"}function h8(e,t,r,n){HV(n),t=CC(t,"onChange"),0<t.length&&(r=new OD("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var m_=null,r1=null;function UJ(e){w8(e,0)}function VS(e){var t=hg(e);if(LV(t))return e}function zJ(e,t){if(e==="change")return t}var d8=!1;if(kA){var hI;if(kA){var dI="oninput"in document;if(!dI){var r5=document.createElement("div");r5.setAttribute("oninput","return;"),dI=typeof r5.oninput=="function"}hI=dI}else hI=!1;d8=hI&&(!document.documentMode||9<document.documentMode)}function n5(){m_&&(m_.detachEvent("onpropertychange",f8),r1=m_=null)}function f8(e){if(e.propertyName==="value"&&VS(r1)){var t=[];h8(t,r1,e,MD(e)),WV(UJ,t)}}function QJ(e,t,r){e==="focusin"?(n5(),m_=t,r1=r,m_.attachEvent("onpropertychange",f8)):e==="focusout"&&n5()}function NJ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return VS(r1)}function VJ(e,t){if(e==="click")return VS(t)}function HJ(e,t){if(e==="input"||e==="change")return VS(t)}function jJ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rc=typeof Object.is=="function"?Object.is:jJ;function n1(e,t){if(Rc(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!tP.call(t,i)||!Rc(e[i],t[i]))return!1}return!0}function i5(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function o5(e,t){var r=i5(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=i5(r)}}function p8(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?p8(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function m8(){for(var e=window,t=vC();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=vC(e.document)}return t}function QD(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function GJ(e){var t=m8(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&p8(r.ownerDocument.documentElement,r)){if(n!==null&&QD(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,c=Math.min(n.start,i);n=n.end===void 0?c:Math.min(n.end,i),!e.extend&&c>n&&(i=n,n=c,c=i),i=o5(r,c);var d=o5(r,n);i&&d&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),c>n?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var KJ=kA&&"documentMode"in document&&11>=document.documentMode,ug=null,_P=null,g_=null,xP=!1;function a5(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;xP||ug==null||ug!==vC(n)||(n=ug,"selectionStart"in n&&QD(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),g_&&n1(g_,n)||(g_=n,n=CC(_P,"onSelect"),0<n.length&&(t=new OD("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ug)))}function dw(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ag={animationend:dw("Animation","AnimationEnd"),animationiteration:dw("Animation","AnimationIteration"),animationstart:dw("Animation","AnimationStart"),transitionend:dw("Transition","TransitionEnd")},fI={},g8={};kA&&(g8=document.createElement("div").style,"AnimationEvent"in window||(delete Ag.animationend.animation,delete Ag.animationiteration.animation,delete Ag.animationstart.animation),"TransitionEvent"in window||delete Ag.transitionend.transition);function HS(e){if(fI[e])return fI[e];if(!Ag[e])return e;var t=Ag[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in g8)return fI[e]=t[r];return e}var v8=HS("animationend"),y8=HS("animationiteration"),_8=HS("animationstart"),x8=HS("transitionend"),b8=new Map,s5="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rd(e,t){b8.set(e,t),Bp(t,[e])}for(var pI=0;pI<s5.length;pI++){var mI=s5[pI],WJ=mI.toLowerCase(),qJ=mI[0].toUpperCase()+mI.slice(1);Rd(WJ,"on"+qJ)}Rd(v8,"onAnimationEnd");Rd(y8,"onAnimationIteration");Rd(_8,"onAnimationStart");Rd("dblclick","onDoubleClick");Rd("focusin","onFocus");Rd("focusout","onBlur");Rd(x8,"onTransitionEnd");Jg("onMouseEnter",["mouseout","mouseover"]);Jg("onMouseLeave",["mouseout","mouseover"]);Jg("onPointerEnter",["pointerout","pointerover"]);Jg("onPointerLeave",["pointerout","pointerover"]);Bp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bp("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XJ=new Set("cancel close invalid load scroll toggle".split(" ").concat(jy));function l5(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,WY(n,t,void 0,e),e.currentTarget=null}function w8(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var c=void 0;if(t)for(var d=n.length-1;0<=d;d--){var y=n[d],o=y.instance,x=y.currentTarget;if(y=y.listener,o!==c&&i.isPropagationStopped())break e;l5(i,y,x),c=o}else for(d=0;d<n.length;d++){if(y=n[d],o=y.instance,x=y.currentTarget,y=y.listener,o!==c&&i.isPropagationStopped())break e;l5(i,y,x),c=o}}}if(_C)throw e=mP,_C=!1,mP=null,e}function Qi(e,t){var r=t[SP];r===void 0&&(r=t[SP]=new Set);var n=e+"__bubble";r.has(n)||(B8(t,e,2,!1),r.add(n))}function gI(e,t,r){var n=0;t&&(n|=4),B8(r,e,n,t)}var fw="_reactListening"+Math.random().toString(36).slice(2);function i1(e){if(!e[fw]){e[fw]=!0,MV.forEach(function(r){r!=="selectionchange"&&(XJ.has(r)||gI(r,!1,e),gI(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[fw]||(t[fw]=!0,gI("selectionchange",!1,t))}}function B8(e,t,r,n){switch(s8(t)){case 1:var i=cJ;break;case 4:i=uJ;break;default:i=RD}r=i.bind(null,t,r,e),i=void 0,!pP||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function vI(e,t,r,n,i){var c=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var d=n.tag;if(d===3||d===4){var y=n.stateNode.containerInfo;if(y===i||y.nodeType===8&&y.parentNode===i)break;if(d===4)for(d=n.return;d!==null;){var o=d.tag;if((o===3||o===4)&&(o=d.stateNode.containerInfo,o===i||o.nodeType===8&&o.parentNode===i))return;d=d.return}for(;y!==null;){if(d=Xf(y),d===null)return;if(o=d.tag,o===5||o===6){n=c=d;continue e}y=y.parentNode}}n=n.return}WV(function(){var x=c,S=MD(r),k=[];e:{var O=b8.get(e);if(O!==void 0){var Q=OD,G=e;switch(e){case"keypress":if(IB(r)===0)break e;case"keydown":case"keyup":Q=CJ;break;case"focusin":G="focus",Q=AI;break;case"focusout":G="blur",Q=AI;break;case"beforeblur":case"afterblur":Q=AI;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=ZU;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=dJ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=TJ;break;case v8:case y8:case _8:Q=mJ;break;case x8:Q=IJ;break;case"scroll":Q=AJ;break;case"wheel":Q=PJ;break;case"copy":case"cut":case"paste":Q=vJ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=JU}var K=(t&4)!==0,ee=!K&&e==="scroll",W=K?O!==null?O+"Capture":null:O;K=[];for(var J=x,re;J!==null;){re=J;var ue=re.stateNode;if(re.tag===5&&ue!==null&&(re=ue,W!==null&&(ue=J_(J,W),ue!=null&&K.push(o1(J,ue,re)))),ee)break;J=J.return}0<K.length&&(O=new Q(O,G,null,r,S),k.push({event:O,listeners:K}))}}if(!(t&7)){e:{if(O=e==="mouseover"||e==="pointerover",Q=e==="mouseout"||e==="pointerout",O&&r!==dP&&(G=r.relatedTarget||r.fromElement)&&(Xf(G)||G[RA]))break e;if((Q||O)&&(O=S.window===S?S:(O=S.ownerDocument)?O.defaultView||O.parentWindow:window,Q?(G=r.relatedTarget||r.toElement,Q=x,G=G?Xf(G):null,G!==null&&(ee=Cp(G),G!==ee||G.tag!==5&&G.tag!==6)&&(G=null)):(Q=null,G=x),Q!==G)){if(K=ZU,ue="onMouseLeave",W="onMouseEnter",J="mouse",(e==="pointerout"||e==="pointerover")&&(K=JU,ue="onPointerLeave",W="onPointerEnter",J="pointer"),ee=Q==null?O:hg(Q),re=G==null?O:hg(G),O=new K(ue,J+"leave",Q,r,S),O.target=ee,O.relatedTarget=re,ue=null,Xf(S)===x&&(K=new K(W,J+"enter",G,r,S),K.target=re,K.relatedTarget=ee,ue=K),ee=ue,Q&&G)t:{for(K=Q,W=G,J=0,re=K;re;re=Hm(re))J++;for(re=0,ue=W;ue;ue=Hm(ue))re++;for(;0<J-re;)K=Hm(K),J--;for(;0<re-J;)W=Hm(W),re--;for(;J--;){if(K===W||W!==null&&K===W.alternate)break t;K=Hm(K),W=Hm(W)}K=null}else K=null;Q!==null&&c5(k,O,Q,K,!1),G!==null&&ee!==null&&c5(k,ee,G,K,!0)}}e:{if(O=x?hg(x):window,Q=O.nodeName&&O.nodeName.toLowerCase(),Q==="select"||Q==="input"&&O.type==="file")var ce=zJ;else if(t5(O))if(d8)ce=HJ;else{ce=NJ;var he=QJ}else(Q=O.nodeName)&&Q.toLowerCase()==="input"&&(O.type==="checkbox"||O.type==="radio")&&(ce=VJ);if(ce&&(ce=ce(e,x))){h8(k,ce,r,S);break e}he&&he(e,O,x),e==="focusout"&&(he=O._wrapperState)&&he.controlled&&O.type==="number"&&lP(O,"number",O.value)}switch(he=x?hg(x):window,e){case"focusin":(t5(he)||he.contentEditable==="true")&&(ug=he,_P=x,g_=null);break;case"focusout":g_=_P=ug=null;break;case"mousedown":xP=!0;break;case"contextmenu":case"mouseup":case"dragend":xP=!1,a5(k,r,S);break;case"selectionchange":if(KJ)break;case"keydown":case"keyup":a5(k,r,S)}var xe;if(zD)e:{switch(e){case"compositionstart":var fe="onCompositionStart";break e;case"compositionend":fe="onCompositionEnd";break e;case"compositionupdate":fe="onCompositionUpdate";break e}fe=void 0}else cg?u8(e,r)&&(fe="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(fe="onCompositionStart");fe&&(c8&&r.locale!=="ko"&&(cg||fe!=="onCompositionStart"?fe==="onCompositionEnd"&&cg&&(xe=l8()):(od=S,LD="value"in od?od.value:od.textContent,cg=!0)),he=CC(x,fe),0<he.length&&(fe=new YU(fe,e,null,r,S),k.push({event:fe,listeners:he}),xe?fe.data=xe:(xe=A8(r),xe!==null&&(fe.data=xe)))),(xe=kJ?RJ(e,r):LJ(e,r))&&(x=CC(x,"onBeforeInput"),0<x.length&&(S=new YU("onBeforeInput","beforeinput",null,r,S),k.push({event:S,listeners:x}),S.data=xe))}w8(k,t)})}function o1(e,t,r){return{instance:e,listener:t,currentTarget:r}}function CC(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,c=i.stateNode;i.tag===5&&c!==null&&(i=c,c=J_(e,r),c!=null&&n.unshift(o1(e,c,i)),c=J_(e,t),c!=null&&n.push(o1(e,c,i))),e=e.return}return n}function Hm(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function c5(e,t,r,n,i){for(var c=t._reactName,d=[];r!==null&&r!==n;){var y=r,o=y.alternate,x=y.stateNode;if(o!==null&&o===n)break;y.tag===5&&x!==null&&(y=x,i?(o=J_(r,c),o!=null&&d.unshift(o1(r,o,y))):i||(o=J_(r,c),o!=null&&d.push(o1(r,o,y)))),r=r.return}d.length!==0&&e.push({event:t,listeners:d})}var ZJ=/\r\n?/g,YJ=/\u0000|\uFFFD/g;function u5(e){return(typeof e=="string"?e:""+e).replace(ZJ,`
`).replace(YJ,"")}function pw(e,t,r){if(t=u5(t),u5(e)!==t&&r)throw Error(Yt(425))}function SC(){}var bP=null,wP=null;function BP(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var CP=typeof setTimeout=="function"?setTimeout:void 0,JJ=typeof clearTimeout=="function"?clearTimeout:void 0,A5=typeof Promise=="function"?Promise:void 0,$J=typeof queueMicrotask=="function"?queueMicrotask:typeof A5<"u"?function(e){return A5.resolve(null).then(e).catch(e$)}:CP;function e$(e){setTimeout(function(){throw e})}function yI(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),t1(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);t1(t)}function md(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function h5(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var x0=Math.random().toString(36).slice(2),bu="__reactFiber$"+x0,a1="__reactProps$"+x0,RA="__reactContainer$"+x0,SP="__reactEvents$"+x0,t$="__reactListeners$"+x0,r$="__reactHandles$"+x0;function Xf(e){var t=e[bu];if(t)return t;for(var r=e.parentNode;r;){if(t=r[RA]||r[bu]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=h5(e);e!==null;){if(r=e[bu])return r;e=h5(e)}return t}e=r,r=e.parentNode}return null}function K1(e){return e=e[bu]||e[RA],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hg(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Yt(33))}function jS(e){return e[a1]||null}var EP=[],dg=-1;function Ld(e){return{current:e}}function Vi(e){0>dg||(e.current=EP[dg],EP[dg]=null,dg--)}function Ri(e,t){dg++,EP[dg]=e.current,e.current=t}var Ed={},Ga=Ld(Ed),Fs=Ld(!1),hp=Ed;function $g(e,t){var r=e.type.contextTypes;if(!r)return Ed;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},c;for(c in r)i[c]=t[c];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Is(e){return e=e.childContextTypes,e!=null}function EC(){Vi(Fs),Vi(Ga)}function d5(e,t,r){if(Ga.current!==Ed)throw Error(Yt(168));Ri(Ga,t),Ri(Fs,r)}function C8(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(Yt(108,QY(e)||"Unknown",i));return oo({},r,n)}function TC(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ed,hp=Ga.current,Ri(Ga,e),Ri(Fs,Fs.current),!0}function f5(e,t,r){var n=e.stateNode;if(!n)throw Error(Yt(169));r?(e=C8(e,t,hp),n.__reactInternalMemoizedMergedChildContext=e,Vi(Fs),Vi(Ga),Ri(Ga,e)):Vi(Fs),Ri(Fs,r)}var fA=null,GS=!1,_I=!1;function S8(e){fA===null?fA=[e]:fA.push(e)}function n$(e){GS=!0,S8(e)}function Od(){if(!_I&&fA!==null){_I=!0;var e=0,t=gi;try{var r=fA;for(gi=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}fA=null,GS=!1}catch(i){throw fA!==null&&(fA=fA.slice(e+1)),YV(PD,Od),i}finally{gi=t,_I=!1}}return null}var fg=[],pg=0,FC=null,IC=0,Ll=[],Ol=0,dp=null,vA=1,yA="";function Qf(e,t){fg[pg++]=IC,fg[pg++]=FC,FC=e,IC=t}function E8(e,t,r){Ll[Ol++]=vA,Ll[Ol++]=yA,Ll[Ol++]=dp,dp=e;var n=vA;e=yA;var i=32-Pc(n)-1;n&=~(1<<i),r+=1;var c=32-Pc(t)+i;if(30<c){var d=i-i%5;c=(n&(1<<d)-1).toString(32),n>>=d,i-=d,vA=1<<32-Pc(t)+i|r<<i|n,yA=c+e}else vA=1<<c|r<<i|n,yA=e}function ND(e){e.return!==null&&(Qf(e,1),E8(e,1,0))}function VD(e){for(;e===FC;)FC=fg[--pg],fg[pg]=null,IC=fg[--pg],fg[pg]=null;for(;e===dp;)dp=Ll[--Ol],Ll[Ol]=null,yA=Ll[--Ol],Ll[Ol]=null,vA=Ll[--Ol],Ll[Ol]=null}var tl=null,Ys=null,Wi=!1,Tc=null;function T8(e,t){var r=Nl(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function p5(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,tl=e,Ys=md(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,tl=e,Ys=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=dp!==null?{id:vA,overflow:yA}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Nl(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,tl=e,Ys=null,!0):!1;default:return!1}}function TP(e){return(e.mode&1)!==0&&(e.flags&128)===0}function FP(e){if(Wi){var t=Ys;if(t){var r=t;if(!p5(e,t)){if(TP(e))throw Error(Yt(418));t=md(r.nextSibling);var n=tl;t&&p5(e,t)?T8(n,r):(e.flags=e.flags&-4097|2,Wi=!1,tl=e)}}else{if(TP(e))throw Error(Yt(418));e.flags=e.flags&-4097|2,Wi=!1,tl=e}}}function m5(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;tl=e}function mw(e){if(e!==tl)return!1;if(!Wi)return m5(e),Wi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!BP(e.type,e.memoizedProps)),t&&(t=Ys)){if(TP(e))throw F8(),Error(Yt(418));for(;t;)T8(e,t),t=md(t.nextSibling)}if(m5(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Yt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ys=md(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ys=null}}else Ys=tl?md(e.stateNode.nextSibling):null;return!0}function F8(){for(var e=Ys;e;)e=md(e.nextSibling)}function e0(){Ys=tl=null,Wi=!1}function HD(e){Tc===null?Tc=[e]:Tc.push(e)}var i$=HA.ReactCurrentBatchConfig;function gy(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Yt(309));var n=r.stateNode}if(!n)throw Error(Yt(147,e));var i=n,c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(d){var y=i.refs;d===null?delete y[c]:y[c]=d},t._stringRef=c,t)}if(typeof e!="string")throw Error(Yt(284));if(!r._owner)throw Error(Yt(290,e))}return e}function gw(e,t){throw e=Object.prototype.toString.call(t),Error(Yt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function g5(e){var t=e._init;return t(e._payload)}function I8(e){function t(W,J){if(e){var re=W.deletions;re===null?(W.deletions=[J],W.flags|=16):re.push(J)}}function r(W,J){if(!e)return null;for(;J!==null;)t(W,J),J=J.sibling;return null}function n(W,J){for(W=new Map;J!==null;)J.key!==null?W.set(J.key,J):W.set(J.index,J),J=J.sibling;return W}function i(W,J){return W=_d(W,J),W.index=0,W.sibling=null,W}function c(W,J,re){return W.index=re,e?(re=W.alternate,re!==null?(re=re.index,re<J?(W.flags|=2,J):re):(W.flags|=2,J)):(W.flags|=1048576,J)}function d(W){return e&&W.alternate===null&&(W.flags|=2),W}function y(W,J,re,ue){return J===null||J.tag!==6?(J=EI(re,W.mode,ue),J.return=W,J):(J=i(J,re),J.return=W,J)}function o(W,J,re,ue){var ce=re.type;return ce===lg?S(W,J,re.props.children,ue,re.key):J!==null&&(J.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===Zh&&g5(ce)===J.type)?(ue=i(J,re.props),ue.ref=gy(W,J,re),ue.return=W,ue):(ue=OB(re.type,re.key,re.props,null,W.mode,ue),ue.ref=gy(W,J,re),ue.return=W,ue)}function x(W,J,re,ue){return J===null||J.tag!==4||J.stateNode.containerInfo!==re.containerInfo||J.stateNode.implementation!==re.implementation?(J=TI(re,W.mode,ue),J.return=W,J):(J=i(J,re.children||[]),J.return=W,J)}function S(W,J,re,ue,ce){return J===null||J.tag!==7?(J=ip(re,W.mode,ue,ce),J.return=W,J):(J=i(J,re),J.return=W,J)}function k(W,J,re){if(typeof J=="string"&&J!==""||typeof J=="number")return J=EI(""+J,W.mode,re),J.return=W,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case aw:return re=OB(J.type,J.key,J.props,null,W.mode,re),re.ref=gy(W,null,J),re.return=W,re;case sg:return J=TI(J,W.mode,re),J.return=W,J;case Zh:var ue=J._init;return k(W,ue(J._payload),re)}if(Vy(J)||hy(J))return J=ip(J,W.mode,re,null),J.return=W,J;gw(W,J)}return null}function O(W,J,re,ue){var ce=J!==null?J.key:null;if(typeof re=="string"&&re!==""||typeof re=="number")return ce!==null?null:y(W,J,""+re,ue);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case aw:return re.key===ce?o(W,J,re,ue):null;case sg:return re.key===ce?x(W,J,re,ue):null;case Zh:return ce=re._init,O(W,J,ce(re._payload),ue)}if(Vy(re)||hy(re))return ce!==null?null:S(W,J,re,ue,null);gw(W,re)}return null}function Q(W,J,re,ue,ce){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return W=W.get(re)||null,y(J,W,""+ue,ce);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case aw:return W=W.get(ue.key===null?re:ue.key)||null,o(J,W,ue,ce);case sg:return W=W.get(ue.key===null?re:ue.key)||null,x(J,W,ue,ce);case Zh:var he=ue._init;return Q(W,J,re,he(ue._payload),ce)}if(Vy(ue)||hy(ue))return W=W.get(re)||null,S(J,W,ue,ce,null);gw(J,ue)}return null}function G(W,J,re,ue){for(var ce=null,he=null,xe=J,fe=J=0,Ue=null;xe!==null&&fe<re.length;fe++){xe.index>fe?(Ue=xe,xe=null):Ue=xe.sibling;var Ge=O(W,xe,re[fe],ue);if(Ge===null){xe===null&&(xe=Ue);break}e&&xe&&Ge.alternate===null&&t(W,xe),J=c(Ge,J,fe),he===null?ce=Ge:he.sibling=Ge,he=Ge,xe=Ue}if(fe===re.length)return r(W,xe),Wi&&Qf(W,fe),ce;if(xe===null){for(;fe<re.length;fe++)xe=k(W,re[fe],ue),xe!==null&&(J=c(xe,J,fe),he===null?ce=xe:he.sibling=xe,he=xe);return Wi&&Qf(W,fe),ce}for(xe=n(W,xe);fe<re.length;fe++)Ue=Q(xe,W,fe,re[fe],ue),Ue!==null&&(e&&Ue.alternate!==null&&xe.delete(Ue.key===null?fe:Ue.key),J=c(Ue,J,fe),he===null?ce=Ue:he.sibling=Ue,he=Ue);return e&&xe.forEach(function(He){return t(W,He)}),Wi&&Qf(W,fe),ce}function K(W,J,re,ue){var ce=hy(re);if(typeof ce!="function")throw Error(Yt(150));if(re=ce.call(re),re==null)throw Error(Yt(151));for(var he=ce=null,xe=J,fe=J=0,Ue=null,Ge=re.next();xe!==null&&!Ge.done;fe++,Ge=re.next()){xe.index>fe?(Ue=xe,xe=null):Ue=xe.sibling;var He=O(W,xe,Ge.value,ue);if(He===null){xe===null&&(xe=Ue);break}e&&xe&&He.alternate===null&&t(W,xe),J=c(He,J,fe),he===null?ce=He:he.sibling=He,he=He,xe=Ue}if(Ge.done)return r(W,xe),Wi&&Qf(W,fe),ce;if(xe===null){for(;!Ge.done;fe++,Ge=re.next())Ge=k(W,Ge.value,ue),Ge!==null&&(J=c(Ge,J,fe),he===null?ce=Ge:he.sibling=Ge,he=Ge);return Wi&&Qf(W,fe),ce}for(xe=n(W,xe);!Ge.done;fe++,Ge=re.next())Ge=Q(xe,W,fe,Ge.value,ue),Ge!==null&&(e&&Ge.alternate!==null&&xe.delete(Ge.key===null?fe:Ge.key),J=c(Ge,J,fe),he===null?ce=Ge:he.sibling=Ge,he=Ge);return e&&xe.forEach(function(tt){return t(W,tt)}),Wi&&Qf(W,fe),ce}function ee(W,J,re,ue){if(typeof re=="object"&&re!==null&&re.type===lg&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case aw:e:{for(var ce=re.key,he=J;he!==null;){if(he.key===ce){if(ce=re.type,ce===lg){if(he.tag===7){r(W,he.sibling),J=i(he,re.props.children),J.return=W,W=J;break e}}else if(he.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===Zh&&g5(ce)===he.type){r(W,he.sibling),J=i(he,re.props),J.ref=gy(W,he,re),J.return=W,W=J;break e}r(W,he);break}else t(W,he);he=he.sibling}re.type===lg?(J=ip(re.props.children,W.mode,ue,re.key),J.return=W,W=J):(ue=OB(re.type,re.key,re.props,null,W.mode,ue),ue.ref=gy(W,J,re),ue.return=W,W=ue)}return d(W);case sg:e:{for(he=re.key;J!==null;){if(J.key===he)if(J.tag===4&&J.stateNode.containerInfo===re.containerInfo&&J.stateNode.implementation===re.implementation){r(W,J.sibling),J=i(J,re.children||[]),J.return=W,W=J;break e}else{r(W,J);break}else t(W,J);J=J.sibling}J=TI(re,W.mode,ue),J.return=W,W=J}return d(W);case Zh:return he=re._init,ee(W,J,he(re._payload),ue)}if(Vy(re))return G(W,J,re,ue);if(hy(re))return K(W,J,re,ue);gw(W,re)}return typeof re=="string"&&re!==""||typeof re=="number"?(re=""+re,J!==null&&J.tag===6?(r(W,J.sibling),J=i(J,re),J.return=W,W=J):(r(W,J),J=EI(re,W.mode,ue),J.return=W,W=J),d(W)):r(W,J)}return ee}var t0=I8(!0),M8=I8(!1),MC=Ld(null),PC=null,mg=null,jD=null;function GD(){jD=mg=PC=null}function KD(e){var t=MC.current;Vi(MC),e._currentValue=t}function IP(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function zg(e,t){PC=e,jD=mg=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Es=!0),e.firstContext=null)}function Zl(e){var t=e._currentValue;if(jD!==e)if(e={context:e,memoizedValue:t,next:null},mg===null){if(PC===null)throw Error(Yt(308));mg=e,PC.dependencies={lanes:0,firstContext:e}}else mg=mg.next=e;return t}var Zf=null;function WD(e){Zf===null?Zf=[e]:Zf.push(e)}function P8(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,WD(t)):(r.next=i.next,i.next=r),t.interleaved=r,LA(e,n)}function LA(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Yh=!1;function qD(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function D8(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wA(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gd(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Jn&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,LA(e,r)}return i=n.interleaved,i===null?(t.next=t,WD(n)):(t.next=i.next,i.next=t),n.interleaved=t,LA(e,r)}function MB(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,DD(e,r)}}function v5(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,c=null;if(r=r.firstBaseUpdate,r!==null){do{var d={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};c===null?i=c=d:c=c.next=d,r=r.next}while(r!==null);c===null?i=c=t:c=c.next=t}else i=c=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:c,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function DC(e,t,r,n){var i=e.updateQueue;Yh=!1;var c=i.firstBaseUpdate,d=i.lastBaseUpdate,y=i.shared.pending;if(y!==null){i.shared.pending=null;var o=y,x=o.next;o.next=null,d===null?c=x:d.next=x,d=o;var S=e.alternate;S!==null&&(S=S.updateQueue,y=S.lastBaseUpdate,y!==d&&(y===null?S.firstBaseUpdate=x:y.next=x,S.lastBaseUpdate=o))}if(c!==null){var k=i.baseState;d=0,S=x=o=null,y=c;do{var O=y.lane,Q=y.eventTime;if((n&O)===O){S!==null&&(S=S.next={eventTime:Q,lane:0,tag:y.tag,payload:y.payload,callback:y.callback,next:null});e:{var G=e,K=y;switch(O=t,Q=r,K.tag){case 1:if(G=K.payload,typeof G=="function"){k=G.call(Q,k,O);break e}k=G;break e;case 3:G.flags=G.flags&-65537|128;case 0:if(G=K.payload,O=typeof G=="function"?G.call(Q,k,O):G,O==null)break e;k=oo({},k,O);break e;case 2:Yh=!0}}y.callback!==null&&y.lane!==0&&(e.flags|=64,O=i.effects,O===null?i.effects=[y]:O.push(y))}else Q={eventTime:Q,lane:O,tag:y.tag,payload:y.payload,callback:y.callback,next:null},S===null?(x=S=Q,o=k):S=S.next=Q,d|=O;if(y=y.next,y===null){if(y=i.shared.pending,y===null)break;O=y,y=O.next,O.next=null,i.lastBaseUpdate=O,i.shared.pending=null}}while(!0);if(S===null&&(o=k),i.baseState=o,i.firstBaseUpdate=x,i.lastBaseUpdate=S,t=i.shared.interleaved,t!==null){i=t;do d|=i.lane,i=i.next;while(i!==t)}else c===null&&(i.shared.lanes=0);pp|=d,e.lanes=d,e.memoizedState=k}}function y5(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Yt(191,i));i.call(n)}}}var W1={},Iu=Ld(W1),s1=Ld(W1),l1=Ld(W1);function Yf(e){if(e===W1)throw Error(Yt(174));return e}function XD(e,t){switch(Ri(l1,t),Ri(s1,e),Ri(Iu,W1),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:uP(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=uP(t,e)}Vi(Iu),Ri(Iu,t)}function r0(){Vi(Iu),Vi(s1),Vi(l1)}function k8(e){Yf(l1.current);var t=Yf(Iu.current),r=uP(t,e.type);t!==r&&(Ri(s1,e),Ri(Iu,r))}function ZD(e){s1.current===e&&(Vi(Iu),Vi(s1))}var ro=Ld(0);function kC(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xI=[];function YD(){for(var e=0;e<xI.length;e++)xI[e]._workInProgressVersionPrimary=null;xI.length=0}var PB=HA.ReactCurrentDispatcher,bI=HA.ReactCurrentBatchConfig,fp=0,io=null,zo=null,ea=null,RC=!1,v_=!1,c1=0,o$=0;function La(){throw Error(Yt(321))}function JD(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Rc(e[r],t[r]))return!1;return!0}function $D(e,t,r,n,i,c){if(fp=c,io=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,PB.current=e===null||e.memoizedState===null?c$:u$,e=r(n,i),v_){c=0;do{if(v_=!1,c1=0,25<=c)throw Error(Yt(301));c+=1,ea=zo=null,t.updateQueue=null,PB.current=A$,e=r(n,i)}while(v_)}if(PB.current=LC,t=zo!==null&&zo.next!==null,fp=0,ea=zo=io=null,RC=!1,t)throw Error(Yt(300));return e}function ek(){var e=c1!==0;return c1=0,e}function gu(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ea===null?io.memoizedState=ea=e:ea=ea.next=e,ea}function Yl(){if(zo===null){var e=io.alternate;e=e!==null?e.memoizedState:null}else e=zo.next;var t=ea===null?io.memoizedState:ea.next;if(t!==null)ea=t,zo=e;else{if(e===null)throw Error(Yt(310));zo=e,e={memoizedState:zo.memoizedState,baseState:zo.baseState,baseQueue:zo.baseQueue,queue:zo.queue,next:null},ea===null?io.memoizedState=ea=e:ea=ea.next=e}return ea}function u1(e,t){return typeof t=="function"?t(e):t}function wI(e){var t=Yl(),r=t.queue;if(r===null)throw Error(Yt(311));r.lastRenderedReducer=e;var n=zo,i=n.baseQueue,c=r.pending;if(c!==null){if(i!==null){var d=i.next;i.next=c.next,c.next=d}n.baseQueue=i=c,r.pending=null}if(i!==null){c=i.next,n=n.baseState;var y=d=null,o=null,x=c;do{var S=x.lane;if((fp&S)===S)o!==null&&(o=o.next={lane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),n=x.hasEagerState?x.eagerState:e(n,x.action);else{var k={lane:S,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null};o===null?(y=o=k,d=n):o=o.next=k,io.lanes|=S,pp|=S}x=x.next}while(x!==null&&x!==c);o===null?d=n:o.next=y,Rc(n,t.memoizedState)||(Es=!0),t.memoizedState=n,t.baseState=d,t.baseQueue=o,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do c=i.lane,io.lanes|=c,pp|=c,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function BI(e){var t=Yl(),r=t.queue;if(r===null)throw Error(Yt(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,c=t.memoizedState;if(i!==null){r.pending=null;var d=i=i.next;do c=e(c,d.action),d=d.next;while(d!==i);Rc(c,t.memoizedState)||(Es=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),r.lastRenderedState=c}return[c,n]}function R8(){}function L8(e,t){var r=io,n=Yl(),i=t(),c=!Rc(n.memoizedState,i);if(c&&(n.memoizedState=i,Es=!0),n=n.queue,tk(z8.bind(null,r,n,e),[e]),n.getSnapshot!==t||c||ea!==null&&ea.memoizedState.tag&1){if(r.flags|=2048,A1(9,U8.bind(null,r,n,i,t),void 0,null),ra===null)throw Error(Yt(349));fp&30||O8(r,t,i)}return i}function O8(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=io.updateQueue,t===null?(t={lastEffect:null,stores:null},io.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function U8(e,t,r,n){t.value=r,t.getSnapshot=n,Q8(t)&&N8(e)}function z8(e,t,r){return r(function(){Q8(t)&&N8(e)})}function Q8(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Rc(e,r)}catch{return!0}}function N8(e){var t=LA(e,1);t!==null&&Dc(t,e,1,-1)}function _5(e){var t=gu();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u1,lastRenderedState:e},t.queue=e,e=e.dispatch=l$.bind(null,io,e),[t.memoizedState,e]}function A1(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=io.updateQueue,t===null?(t={lastEffect:null,stores:null},io.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function V8(){return Yl().memoizedState}function DB(e,t,r,n){var i=gu();io.flags|=e,i.memoizedState=A1(1|t,r,void 0,n===void 0?null:n)}function KS(e,t,r,n){var i=Yl();n=n===void 0?null:n;var c=void 0;if(zo!==null){var d=zo.memoizedState;if(c=d.destroy,n!==null&&JD(n,d.deps)){i.memoizedState=A1(t,r,c,n);return}}io.flags|=e,i.memoizedState=A1(1|t,r,c,n)}function x5(e,t){return DB(8390656,8,e,t)}function tk(e,t){return KS(2048,8,e,t)}function H8(e,t){return KS(4,2,e,t)}function j8(e,t){return KS(4,4,e,t)}function G8(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function K8(e,t,r){return r=r!=null?r.concat([e]):null,KS(4,4,G8.bind(null,t,e),r)}function rk(){}function W8(e,t){var r=Yl();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&JD(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function q8(e,t){var r=Yl();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&JD(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function X8(e,t,r){return fp&21?(Rc(r,t)||(r=e8(),io.lanes|=r,pp|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Es=!0),e.memoizedState=r)}function a$(e,t){var r=gi;gi=r!==0&&4>r?r:4,e(!0);var n=bI.transition;bI.transition={};try{e(!1),t()}finally{gi=r,bI.transition=n}}function Z8(){return Yl().memoizedState}function s$(e,t,r){var n=yd(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Y8(e))J8(t,r);else if(r=P8(e,t,r,n),r!==null){var i=us();Dc(r,e,n,i),$8(r,t,n)}}function l$(e,t,r){var n=yd(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Y8(e))J8(t,i);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var d=t.lastRenderedState,y=c(d,r);if(i.hasEagerState=!0,i.eagerState=y,Rc(y,d)){var o=t.interleaved;o===null?(i.next=i,WD(t)):(i.next=o.next,o.next=i),t.interleaved=i;return}}catch{}finally{}r=P8(e,t,i,n),r!==null&&(i=us(),Dc(r,e,n,i),$8(r,t,n))}}function Y8(e){var t=e.alternate;return e===io||t!==null&&t===io}function J8(e,t){v_=RC=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function $8(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,DD(e,r)}}var LC={readContext:Zl,useCallback:La,useContext:La,useEffect:La,useImperativeHandle:La,useInsertionEffect:La,useLayoutEffect:La,useMemo:La,useReducer:La,useRef:La,useState:La,useDebugValue:La,useDeferredValue:La,useTransition:La,useMutableSource:La,useSyncExternalStore:La,useId:La,unstable_isNewReconciler:!1},c$={readContext:Zl,useCallback:function(e,t){return gu().memoizedState=[e,t===void 0?null:t],e},useContext:Zl,useEffect:x5,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,DB(4194308,4,G8.bind(null,t,e),r)},useLayoutEffect:function(e,t){return DB(4194308,4,e,t)},useInsertionEffect:function(e,t){return DB(4,2,e,t)},useMemo:function(e,t){var r=gu();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=gu();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=s$.bind(null,io,e),[n.memoizedState,e]},useRef:function(e){var t=gu();return e={current:e},t.memoizedState=e},useState:_5,useDebugValue:rk,useDeferredValue:function(e){return gu().memoizedState=e},useTransition:function(){var e=_5(!1),t=e[0];return e=a$.bind(null,e[1]),gu().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=io,i=gu();if(Wi){if(r===void 0)throw Error(Yt(407));r=r()}else{if(r=t(),ra===null)throw Error(Yt(349));fp&30||O8(n,t,r)}i.memoizedState=r;var c={value:r,getSnapshot:t};return i.queue=c,x5(z8.bind(null,n,c,e),[e]),n.flags|=2048,A1(9,U8.bind(null,n,c,r,t),void 0,null),r},useId:function(){var e=gu(),t=ra.identifierPrefix;if(Wi){var r=yA,n=vA;r=(n&~(1<<32-Pc(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=c1++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=o$++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},u$={readContext:Zl,useCallback:W8,useContext:Zl,useEffect:tk,useImperativeHandle:K8,useInsertionEffect:H8,useLayoutEffect:j8,useMemo:q8,useReducer:wI,useRef:V8,useState:function(){return wI(u1)},useDebugValue:rk,useDeferredValue:function(e){var t=Yl();return X8(t,zo.memoizedState,e)},useTransition:function(){var e=wI(u1)[0],t=Yl().memoizedState;return[e,t]},useMutableSource:R8,useSyncExternalStore:L8,useId:Z8,unstable_isNewReconciler:!1},A$={readContext:Zl,useCallback:W8,useContext:Zl,useEffect:tk,useImperativeHandle:K8,useInsertionEffect:H8,useLayoutEffect:j8,useMemo:q8,useReducer:BI,useRef:V8,useState:function(){return BI(u1)},useDebugValue:rk,useDeferredValue:function(e){var t=Yl();return zo===null?t.memoizedState=e:X8(t,zo.memoizedState,e)},useTransition:function(){var e=BI(u1)[0],t=Yl().memoizedState;return[e,t]},useMutableSource:R8,useSyncExternalStore:L8,useId:Z8,unstable_isNewReconciler:!1};function Sc(e,t){if(e&&e.defaultProps){t=oo({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function MP(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:oo({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var WS={isMounted:function(e){return(e=e._reactInternals)?Cp(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=us(),i=yd(e),c=wA(n,i);c.payload=t,r!=null&&(c.callback=r),t=gd(e,c,i),t!==null&&(Dc(t,e,i,n),MB(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=us(),i=yd(e),c=wA(n,i);c.tag=1,c.payload=t,r!=null&&(c.callback=r),t=gd(e,c,i),t!==null&&(Dc(t,e,i,n),MB(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=us(),n=yd(e),i=wA(r,n);i.tag=2,t!=null&&(i.callback=t),t=gd(e,i,n),t!==null&&(Dc(t,e,n,r),MB(t,e,n))}};function b5(e,t,r,n,i,c,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,c,d):t.prototype&&t.prototype.isPureReactComponent?!n1(r,n)||!n1(i,c):!0}function eH(e,t,r){var n=!1,i=Ed,c=t.contextType;return typeof c=="object"&&c!==null?c=Zl(c):(i=Is(t)?hp:Ga.current,n=t.contextTypes,c=(n=n!=null)?$g(e,i):Ed),t=new t(r,c),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=WS,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=c),t}function w5(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&WS.enqueueReplaceState(t,t.state,null)}function PP(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},qD(e);var c=t.contextType;typeof c=="object"&&c!==null?i.context=Zl(c):(c=Is(t)?hp:Ga.current,i.context=$g(e,c)),i.state=e.memoizedState,c=t.getDerivedStateFromProps,typeof c=="function"&&(MP(e,t,c,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&WS.enqueueReplaceState(i,i.state,null),DC(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function n0(e,t){try{var r="",n=t;do r+=zY(n),n=n.return;while(n);var i=r}catch(c){i=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:t,stack:i,digest:null}}function CI(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function DP(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var h$=typeof WeakMap=="function"?WeakMap:Map;function tH(e,t,r){r=wA(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){UC||(UC=!0,HP=n),DP(e,t)},r}function rH(e,t,r){r=wA(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){DP(e,t)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(r.callback=function(){DP(e,t),typeof n!="function"&&(vd===null?vd=new Set([this]):vd.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),r}function B5(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new h$;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=S$.bind(null,e,t,r),t.then(e,e))}function C5(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function S5(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=wA(-1,1),t.tag=2,gd(r,t,1))),r.lanes|=1),e)}var d$=HA.ReactCurrentOwner,Es=!1;function ss(e,t,r,n){t.child=e===null?M8(t,null,r,n):t0(t,e.child,r,n)}function E5(e,t,r,n,i){r=r.render;var c=t.ref;return zg(t,i),n=$D(e,t,r,n,c,i),r=ek(),e!==null&&!Es?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,OA(e,t,i)):(Wi&&r&&ND(t),t.flags|=1,ss(e,t,n,i),t.child)}function T5(e,t,r,n,i){if(e===null){var c=r.type;return typeof c=="function"&&!uk(c)&&c.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=c,nH(e,t,c,n,i)):(e=OB(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!(e.lanes&i)){var d=c.memoizedProps;if(r=r.compare,r=r!==null?r:n1,r(d,n)&&e.ref===t.ref)return OA(e,t,i)}return t.flags|=1,e=_d(c,n),e.ref=t.ref,e.return=t,t.child=e}function nH(e,t,r,n,i){if(e!==null){var c=e.memoizedProps;if(n1(c,n)&&e.ref===t.ref)if(Es=!1,t.pendingProps=n=c,(e.lanes&i)!==0)e.flags&131072&&(Es=!0);else return t.lanes=e.lanes,OA(e,t,i)}return kP(e,t,r,n,i)}function iH(e,t,r){var n=t.pendingProps,i=n.children,c=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ri(vg,Xs),Xs|=r;else{if(!(r&1073741824))return e=c!==null?c.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ri(vg,Xs),Xs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=c!==null?c.baseLanes:r,Ri(vg,Xs),Xs|=n}else c!==null?(n=c.baseLanes|r,t.memoizedState=null):n=r,Ri(vg,Xs),Xs|=n;return ss(e,t,i,r),t.child}function oH(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function kP(e,t,r,n,i){var c=Is(r)?hp:Ga.current;return c=$g(t,c),zg(t,i),r=$D(e,t,r,n,c,i),n=ek(),e!==null&&!Es?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,OA(e,t,i)):(Wi&&n&&ND(t),t.flags|=1,ss(e,t,r,i),t.child)}function F5(e,t,r,n,i){if(Is(r)){var c=!0;TC(t)}else c=!1;if(zg(t,i),t.stateNode===null)kB(e,t),eH(t,r,n),PP(t,r,n,i),n=!0;else if(e===null){var d=t.stateNode,y=t.memoizedProps;d.props=y;var o=d.context,x=r.contextType;typeof x=="object"&&x!==null?x=Zl(x):(x=Is(r)?hp:Ga.current,x=$g(t,x));var S=r.getDerivedStateFromProps,k=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function";k||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==n||o!==x)&&w5(t,d,n,x),Yh=!1;var O=t.memoizedState;d.state=O,DC(t,n,d,i),o=t.memoizedState,y!==n||O!==o||Fs.current||Yh?(typeof S=="function"&&(MP(t,r,S,n),o=t.memoizedState),(y=Yh||b5(t,r,y,n,O,o,x))?(k||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=o),d.props=n,d.state=o,d.context=x,n=y):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{d=t.stateNode,D8(e,t),y=t.memoizedProps,x=t.type===t.elementType?y:Sc(t.type,y),d.props=x,k=t.pendingProps,O=d.context,o=r.contextType,typeof o=="object"&&o!==null?o=Zl(o):(o=Is(r)?hp:Ga.current,o=$g(t,o));var Q=r.getDerivedStateFromProps;(S=typeof Q=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==k||O!==o)&&w5(t,d,n,o),Yh=!1,O=t.memoizedState,d.state=O,DC(t,n,d,i);var G=t.memoizedState;y!==k||O!==G||Fs.current||Yh?(typeof Q=="function"&&(MP(t,r,Q,n),G=t.memoizedState),(x=Yh||b5(t,r,x,n,O,G,o)||!1)?(S||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(n,G,o),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(n,G,o)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=G),d.props=n,d.state=G,d.context=o,n=x):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),n=!1)}return RP(e,t,r,n,c,i)}function RP(e,t,r,n,i,c){oH(e,t);var d=(t.flags&128)!==0;if(!n&&!d)return i&&f5(t,r,!1),OA(e,t,c);n=t.stateNode,d$.current=t;var y=d&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&d?(t.child=t0(t,e.child,null,c),t.child=t0(t,null,y,c)):ss(e,t,y,c),t.memoizedState=n.state,i&&f5(t,r,!0),t.child}function aH(e){var t=e.stateNode;t.pendingContext?d5(e,t.pendingContext,t.pendingContext!==t.context):t.context&&d5(e,t.context,!1),XD(e,t.containerInfo)}function I5(e,t,r,n,i){return e0(),HD(i),t.flags|=256,ss(e,t,r,n),t.child}var LP={dehydrated:null,treeContext:null,retryLane:0};function OP(e){return{baseLanes:e,cachePool:null,transitions:null}}function sH(e,t,r){var n=t.pendingProps,i=ro.current,c=!1,d=(t.flags&128)!==0,y;if((y=d)||(y=e!==null&&e.memoizedState===null?!1:(i&2)!==0),y?(c=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ri(ro,i&1),e===null)return FP(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(d=n.children,e=n.fallback,c?(n=t.mode,c=t.child,d={mode:"hidden",children:d},!(n&1)&&c!==null?(c.childLanes=0,c.pendingProps=d):c=ZS(d,n,0,null),e=ip(e,n,r,null),c.return=t,e.return=t,c.sibling=e,t.child=c,t.child.memoizedState=OP(r),t.memoizedState=LP,e):nk(t,d));if(i=e.memoizedState,i!==null&&(y=i.dehydrated,y!==null))return f$(e,t,d,n,y,i,r);if(c){c=n.fallback,d=t.mode,i=e.child,y=i.sibling;var o={mode:"hidden",children:n.children};return!(d&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=o,t.deletions=null):(n=_d(i,o),n.subtreeFlags=i.subtreeFlags&14680064),y!==null?c=_d(y,c):(c=ip(c,d,r,null),c.flags|=2),c.return=t,n.return=t,n.sibling=c,t.child=n,n=c,c=t.child,d=e.child.memoizedState,d=d===null?OP(r):{baseLanes:d.baseLanes|r,cachePool:null,transitions:d.transitions},c.memoizedState=d,c.childLanes=e.childLanes&~r,t.memoizedState=LP,n}return c=e.child,e=c.sibling,n=_d(c,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function nk(e,t){return t=ZS({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function vw(e,t,r,n){return n!==null&&HD(n),t0(t,e.child,null,r),e=nk(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function f$(e,t,r,n,i,c,d){if(r)return t.flags&256?(t.flags&=-257,n=CI(Error(Yt(422))),vw(e,t,d,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(c=n.fallback,i=t.mode,n=ZS({mode:"visible",children:n.children},i,0,null),c=ip(c,i,d,null),c.flags|=2,n.return=t,c.return=t,n.sibling=c,t.child=n,t.mode&1&&t0(t,e.child,null,d),t.child.memoizedState=OP(d),t.memoizedState=LP,c);if(!(t.mode&1))return vw(e,t,d,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var y=n.dgst;return n=y,c=Error(Yt(419)),n=CI(c,n,void 0),vw(e,t,d,n)}if(y=(d&e.childLanes)!==0,Es||y){if(n=ra,n!==null){switch(d&-d){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|d)?0:i,i!==0&&i!==c.retryLane&&(c.retryLane=i,LA(e,i),Dc(n,e,i,-1))}return ck(),n=CI(Error(Yt(421))),vw(e,t,d,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=E$.bind(null,e),i._reactRetry=t,null):(e=c.treeContext,Ys=md(i.nextSibling),tl=t,Wi=!0,Tc=null,e!==null&&(Ll[Ol++]=vA,Ll[Ol++]=yA,Ll[Ol++]=dp,vA=e.id,yA=e.overflow,dp=t),t=nk(t,n.children),t.flags|=4096,t)}function M5(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),IP(e.return,t,r)}function SI(e,t,r,n,i){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=n,c.tail=r,c.tailMode=i)}function lH(e,t,r){var n=t.pendingProps,i=n.revealOrder,c=n.tail;if(ss(e,t,n.children,r),n=ro.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&M5(e,r,t);else if(e.tag===19)M5(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ri(ro,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&kC(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),SI(t,!1,i,r,c);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&kC(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}SI(t,!0,r,null,c);break;case"together":SI(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function kB(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function OA(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),pp|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Yt(153));if(t.child!==null){for(e=t.child,r=_d(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=_d(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function p$(e,t,r){switch(t.tag){case 3:aH(t),e0();break;case 5:k8(t);break;case 1:Is(t.type)&&TC(t);break;case 4:XD(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Ri(MC,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ri(ro,ro.current&1),t.flags|=128,null):r&t.child.childLanes?sH(e,t,r):(Ri(ro,ro.current&1),e=OA(e,t,r),e!==null?e.sibling:null);Ri(ro,ro.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return lH(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ri(ro,ro.current),n)break;return null;case 22:case 23:return t.lanes=0,iH(e,t,r)}return OA(e,t,r)}var cH,UP,uH,AH;cH=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};UP=function(){};uH=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Yf(Iu.current);var c=null;switch(r){case"input":i=aP(e,i),n=aP(e,n),c=[];break;case"select":i=oo({},i,{value:void 0}),n=oo({},n,{value:void 0}),c=[];break;case"textarea":i=cP(e,i),n=cP(e,n),c=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=SC)}AP(r,n);var d;r=null;for(x in i)if(!n.hasOwnProperty(x)&&i.hasOwnProperty(x)&&i[x]!=null)if(x==="style"){var y=i[x];for(d in y)y.hasOwnProperty(d)&&(r||(r={}),r[d]="")}else x!=="dangerouslySetInnerHTML"&&x!=="children"&&x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(Z_.hasOwnProperty(x)?c||(c=[]):(c=c||[]).push(x,null));for(x in n){var o=n[x];if(y=i!=null?i[x]:void 0,n.hasOwnProperty(x)&&o!==y&&(o!=null||y!=null))if(x==="style")if(y){for(d in y)!y.hasOwnProperty(d)||o&&o.hasOwnProperty(d)||(r||(r={}),r[d]="");for(d in o)o.hasOwnProperty(d)&&y[d]!==o[d]&&(r||(r={}),r[d]=o[d])}else r||(c||(c=[]),c.push(x,r)),r=o;else x==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,y=y?y.__html:void 0,o!=null&&y!==o&&(c=c||[]).push(x,o)):x==="children"?typeof o!="string"&&typeof o!="number"||(c=c||[]).push(x,""+o):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&(Z_.hasOwnProperty(x)?(o!=null&&x==="onScroll"&&Qi("scroll",e),c||y===o||(c=[])):(c=c||[]).push(x,o))}r&&(c=c||[]).push("style",r);var x=c;(t.updateQueue=x)&&(t.flags|=4)}};AH=function(e,t,r,n){r!==n&&(t.flags|=4)};function vy(e,t){if(!Wi)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Oa(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function m$(e,t,r){var n=t.pendingProps;switch(VD(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oa(t),null;case 1:return Is(t.type)&&EC(),Oa(t),null;case 3:return n=t.stateNode,r0(),Vi(Fs),Vi(Ga),YD(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(mw(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Tc!==null&&(KP(Tc),Tc=null))),UP(e,t),Oa(t),null;case 5:ZD(t);var i=Yf(l1.current);if(r=t.type,e!==null&&t.stateNode!=null)uH(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Yt(166));return Oa(t),null}if(e=Yf(Iu.current),mw(t)){n=t.stateNode,r=t.type;var c=t.memoizedProps;switch(n[bu]=t,n[a1]=c,e=(t.mode&1)!==0,r){case"dialog":Qi("cancel",n),Qi("close",n);break;case"iframe":case"object":case"embed":Qi("load",n);break;case"video":case"audio":for(i=0;i<jy.length;i++)Qi(jy[i],n);break;case"source":Qi("error",n);break;case"img":case"image":case"link":Qi("error",n),Qi("load",n);break;case"details":Qi("toggle",n);break;case"input":QU(n,c),Qi("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!c.multiple},Qi("invalid",n);break;case"textarea":VU(n,c),Qi("invalid",n)}AP(r,c),i=null;for(var d in c)if(c.hasOwnProperty(d)){var y=c[d];d==="children"?typeof y=="string"?n.textContent!==y&&(c.suppressHydrationWarning!==!0&&pw(n.textContent,y,e),i=["children",y]):typeof y=="number"&&n.textContent!==""+y&&(c.suppressHydrationWarning!==!0&&pw(n.textContent,y,e),i=["children",""+y]):Z_.hasOwnProperty(d)&&y!=null&&d==="onScroll"&&Qi("scroll",n)}switch(r){case"input":sw(n),NU(n,c,!0);break;case"textarea":sw(n),HU(n);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(n.onclick=SC)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{d=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=zV(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=d.createElement(r,{is:n.is}):(e=d.createElement(r),r==="select"&&(d=e,n.multiple?d.multiple=!0:n.size&&(d.size=n.size))):e=d.createElementNS(e,r),e[bu]=t,e[a1]=n,cH(e,t,!1,!1),t.stateNode=e;e:{switch(d=hP(r,n),r){case"dialog":Qi("cancel",e),Qi("close",e),i=n;break;case"iframe":case"object":case"embed":Qi("load",e),i=n;break;case"video":case"audio":for(i=0;i<jy.length;i++)Qi(jy[i],e);i=n;break;case"source":Qi("error",e),i=n;break;case"img":case"image":case"link":Qi("error",e),Qi("load",e),i=n;break;case"details":Qi("toggle",e),i=n;break;case"input":QU(e,n),i=aP(e,n),Qi("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=oo({},n,{value:void 0}),Qi("invalid",e);break;case"textarea":VU(e,n),i=cP(e,n),Qi("invalid",e);break;default:i=n}AP(r,i),y=i;for(c in y)if(y.hasOwnProperty(c)){var o=y[c];c==="style"?VV(e,o):c==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&QV(e,o)):c==="children"?typeof o=="string"?(r!=="textarea"||o!=="")&&Y_(e,o):typeof o=="number"&&Y_(e,""+o):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Z_.hasOwnProperty(c)?o!=null&&c==="onScroll"&&Qi("scroll",e):o!=null&&ED(e,c,o,d))}switch(r){case"input":sw(e),NU(e,n,!1);break;case"textarea":sw(e),HU(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Sd(n.value));break;case"select":e.multiple=!!n.multiple,c=n.value,c!=null?Rg(e,!!n.multiple,c,!1):n.defaultValue!=null&&Rg(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=SC)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Oa(t),null;case 6:if(e&&t.stateNode!=null)AH(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Yt(166));if(r=Yf(l1.current),Yf(Iu.current),mw(t)){if(n=t.stateNode,r=t.memoizedProps,n[bu]=t,(c=n.nodeValue!==r)&&(e=tl,e!==null))switch(e.tag){case 3:pw(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&pw(n.nodeValue,r,(e.mode&1)!==0)}c&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[bu]=t,t.stateNode=n}return Oa(t),null;case 13:if(Vi(ro),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Wi&&Ys!==null&&t.mode&1&&!(t.flags&128))F8(),e0(),t.flags|=98560,c=!1;else if(c=mw(t),n!==null&&n.dehydrated!==null){if(e===null){if(!c)throw Error(Yt(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(Yt(317));c[bu]=t}else e0(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Oa(t),c=!1}else Tc!==null&&(KP(Tc),Tc=null),c=!0;if(!c)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ro.current&1?Ho===0&&(Ho=3):ck())),t.updateQueue!==null&&(t.flags|=4),Oa(t),null);case 4:return r0(),UP(e,t),e===null&&i1(t.stateNode.containerInfo),Oa(t),null;case 10:return KD(t.type._context),Oa(t),null;case 17:return Is(t.type)&&EC(),Oa(t),null;case 19:if(Vi(ro),c=t.memoizedState,c===null)return Oa(t),null;if(n=(t.flags&128)!==0,d=c.rendering,d===null)if(n)vy(c,!1);else{if(Ho!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=kC(e),d!==null){for(t.flags|=128,vy(c,!1),n=d.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)c=r,e=n,c.flags&=14680066,d=c.alternate,d===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=d.childLanes,c.lanes=d.lanes,c.child=d.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=d.memoizedProps,c.memoizedState=d.memoizedState,c.updateQueue=d.updateQueue,c.type=d.type,e=d.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ri(ro,ro.current&1|2),t.child}e=e.sibling}c.tail!==null&&Co()>i0&&(t.flags|=128,n=!0,vy(c,!1),t.lanes=4194304)}else{if(!n)if(e=kC(d),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),vy(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!Wi)return Oa(t),null}else 2*Co()-c.renderingStartTime>i0&&r!==1073741824&&(t.flags|=128,n=!0,vy(c,!1),t.lanes=4194304);c.isBackwards?(d.sibling=t.child,t.child=d):(r=c.last,r!==null?r.sibling=d:t.child=d,c.last=d)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Co(),t.sibling=null,r=ro.current,Ri(ro,n?r&1|2:r&1),t):(Oa(t),null);case 22:case 23:return lk(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Xs&1073741824&&(Oa(t),t.subtreeFlags&6&&(t.flags|=8192)):Oa(t),null;case 24:return null;case 25:return null}throw Error(Yt(156,t.tag))}function g$(e,t){switch(VD(t),t.tag){case 1:return Is(t.type)&&EC(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return r0(),Vi(Fs),Vi(Ga),YD(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ZD(t),null;case 13:if(Vi(ro),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Yt(340));e0()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Vi(ro),null;case 4:return r0(),null;case 10:return KD(t.type._context),null;case 22:case 23:return lk(),null;case 24:return null;default:return null}}var yw=!1,Va=!1,v$=typeof WeakSet=="function"?WeakSet:Set,br=null;function gg(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ao(e,t,n)}else r.current=null}function zP(e,t,r){try{r()}catch(n){Ao(e,t,n)}}var P5=!1;function y$(e,t){if(bP=wC,e=m8(),QD(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,c=n.focusNode;n=n.focusOffset;try{r.nodeType,c.nodeType}catch{r=null;break e}var d=0,y=-1,o=-1,x=0,S=0,k=e,O=null;t:for(;;){for(var Q;k!==r||i!==0&&k.nodeType!==3||(y=d+i),k!==c||n!==0&&k.nodeType!==3||(o=d+n),k.nodeType===3&&(d+=k.nodeValue.length),(Q=k.firstChild)!==null;)O=k,k=Q;for(;;){if(k===e)break t;if(O===r&&++x===i&&(y=d),O===c&&++S===n&&(o=d),(Q=k.nextSibling)!==null)break;k=O,O=k.parentNode}k=Q}r=y===-1||o===-1?null:{start:y,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(wP={focusedElem:e,selectionRange:r},wC=!1,br=t;br!==null;)if(t=br,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,br=e;else for(;br!==null;){t=br;try{var G=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(G!==null){var K=G.memoizedProps,ee=G.memoizedState,W=t.stateNode,J=W.getSnapshotBeforeUpdate(t.elementType===t.type?K:Sc(t.type,K),ee);W.__reactInternalSnapshotBeforeUpdate=J}break;case 3:var re=t.stateNode.containerInfo;re.nodeType===1?re.textContent="":re.nodeType===9&&re.documentElement&&re.removeChild(re.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Yt(163))}}catch(ue){Ao(t,t.return,ue)}if(e=t.sibling,e!==null){e.return=t.return,br=e;break}br=t.return}return G=P5,P5=!1,G}function y_(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var c=i.destroy;i.destroy=void 0,c!==void 0&&zP(t,r,c)}i=i.next}while(i!==n)}}function qS(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function QP(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function hH(e){var t=e.alternate;t!==null&&(e.alternate=null,hH(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[bu],delete t[a1],delete t[SP],delete t[t$],delete t[r$])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dH(e){return e.tag===5||e.tag===3||e.tag===4}function D5(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||dH(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function NP(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=SC));else if(n!==4&&(e=e.child,e!==null))for(NP(e,t,r),e=e.sibling;e!==null;)NP(e,t,r),e=e.sibling}function VP(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(VP(e,t,r),e=e.sibling;e!==null;)VP(e,t,r),e=e.sibling}var pa=null,Ec=!1;function Uh(e,t,r){for(r=r.child;r!==null;)fH(e,t,r),r=r.sibling}function fH(e,t,r){if(Fu&&typeof Fu.onCommitFiberUnmount=="function")try{Fu.onCommitFiberUnmount(QS,r)}catch{}switch(r.tag){case 5:Va||gg(r,t);case 6:var n=pa,i=Ec;pa=null,Uh(e,t,r),pa=n,Ec=i,pa!==null&&(Ec?(e=pa,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):pa.removeChild(r.stateNode));break;case 18:pa!==null&&(Ec?(e=pa,r=r.stateNode,e.nodeType===8?yI(e.parentNode,r):e.nodeType===1&&yI(e,r),t1(e)):yI(pa,r.stateNode));break;case 4:n=pa,i=Ec,pa=r.stateNode.containerInfo,Ec=!0,Uh(e,t,r),pa=n,Ec=i;break;case 0:case 11:case 14:case 15:if(!Va&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var c=i,d=c.destroy;c=c.tag,d!==void 0&&(c&2||c&4)&&zP(r,t,d),i=i.next}while(i!==n)}Uh(e,t,r);break;case 1:if(!Va&&(gg(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(y){Ao(r,t,y)}Uh(e,t,r);break;case 21:Uh(e,t,r);break;case 22:r.mode&1?(Va=(n=Va)||r.memoizedState!==null,Uh(e,t,r),Va=n):Uh(e,t,r);break;default:Uh(e,t,r)}}function k5(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new v$),t.forEach(function(n){var i=T$.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function xc(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var c=e,d=t,y=d;e:for(;y!==null;){switch(y.tag){case 5:pa=y.stateNode,Ec=!1;break e;case 3:pa=y.stateNode.containerInfo,Ec=!0;break e;case 4:pa=y.stateNode.containerInfo,Ec=!0;break e}y=y.return}if(pa===null)throw Error(Yt(160));fH(c,d,i),pa=null,Ec=!1;var o=i.alternate;o!==null&&(o.return=null),i.return=null}catch(x){Ao(i,t,x)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)pH(t,e),t=t.sibling}function pH(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xc(t,e),Au(e),n&4){try{y_(3,e,e.return),qS(3,e)}catch(K){Ao(e,e.return,K)}try{y_(5,e,e.return)}catch(K){Ao(e,e.return,K)}}break;case 1:xc(t,e),Au(e),n&512&&r!==null&&gg(r,r.return);break;case 5:if(xc(t,e),Au(e),n&512&&r!==null&&gg(r,r.return),e.flags&32){var i=e.stateNode;try{Y_(i,"")}catch(K){Ao(e,e.return,K)}}if(n&4&&(i=e.stateNode,i!=null)){var c=e.memoizedProps,d=r!==null?r.memoizedProps:c,y=e.type,o=e.updateQueue;if(e.updateQueue=null,o!==null)try{y==="input"&&c.type==="radio"&&c.name!=null&&OV(i,c),hP(y,d);var x=hP(y,c);for(d=0;d<o.length;d+=2){var S=o[d],k=o[d+1];S==="style"?VV(i,k):S==="dangerouslySetInnerHTML"?QV(i,k):S==="children"?Y_(i,k):ED(i,S,k,x)}switch(y){case"input":sP(i,c);break;case"textarea":UV(i,c);break;case"select":var O=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!c.multiple;var Q=c.value;Q!=null?Rg(i,!!c.multiple,Q,!1):O!==!!c.multiple&&(c.defaultValue!=null?Rg(i,!!c.multiple,c.defaultValue,!0):Rg(i,!!c.multiple,c.multiple?[]:"",!1))}i[a1]=c}catch(K){Ao(e,e.return,K)}}break;case 6:if(xc(t,e),Au(e),n&4){if(e.stateNode===null)throw Error(Yt(162));i=e.stateNode,c=e.memoizedProps;try{i.nodeValue=c}catch(K){Ao(e,e.return,K)}}break;case 3:if(xc(t,e),Au(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{t1(t.containerInfo)}catch(K){Ao(e,e.return,K)}break;case 4:xc(t,e),Au(e);break;case 13:xc(t,e),Au(e),i=e.child,i.flags&8192&&(c=i.memoizedState!==null,i.stateNode.isHidden=c,!c||i.alternate!==null&&i.alternate.memoizedState!==null||(ak=Co())),n&4&&k5(e);break;case 22:if(S=r!==null&&r.memoizedState!==null,e.mode&1?(Va=(x=Va)||S,xc(t,e),Va=x):xc(t,e),Au(e),n&8192){if(x=e.memoizedState!==null,(e.stateNode.isHidden=x)&&!S&&e.mode&1)for(br=e,S=e.child;S!==null;){for(k=br=S;br!==null;){switch(O=br,Q=O.child,O.tag){case 0:case 11:case 14:case 15:y_(4,O,O.return);break;case 1:gg(O,O.return);var G=O.stateNode;if(typeof G.componentWillUnmount=="function"){n=O,r=O.return;try{t=n,G.props=t.memoizedProps,G.state=t.memoizedState,G.componentWillUnmount()}catch(K){Ao(n,r,K)}}break;case 5:gg(O,O.return);break;case 22:if(O.memoizedState!==null){L5(k);continue}}Q!==null?(Q.return=O,br=Q):L5(k)}S=S.sibling}e:for(S=null,k=e;;){if(k.tag===5){if(S===null){S=k;try{i=k.stateNode,x?(c=i.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(y=k.stateNode,o=k.memoizedProps.style,d=o!=null&&o.hasOwnProperty("display")?o.display:null,y.style.display=NV("display",d))}catch(K){Ao(e,e.return,K)}}}else if(k.tag===6){if(S===null)try{k.stateNode.nodeValue=x?"":k.memoizedProps}catch(K){Ao(e,e.return,K)}}else if((k.tag!==22&&k.tag!==23||k.memoizedState===null||k===e)&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===e)break e;for(;k.sibling===null;){if(k.return===null||k.return===e)break e;S===k&&(S=null),k=k.return}S===k&&(S=null),k.sibling.return=k.return,k=k.sibling}}break;case 19:xc(t,e),Au(e),n&4&&k5(e);break;case 21:break;default:xc(t,e),Au(e)}}function Au(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(dH(r)){var n=r;break e}r=r.return}throw Error(Yt(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Y_(i,""),n.flags&=-33);var c=D5(e);VP(e,c,i);break;case 3:case 4:var d=n.stateNode.containerInfo,y=D5(e);NP(e,y,d);break;default:throw Error(Yt(161))}}catch(o){Ao(e,e.return,o)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _$(e,t,r){br=e,mH(e)}function mH(e,t,r){for(var n=(e.mode&1)!==0;br!==null;){var i=br,c=i.child;if(i.tag===22&&n){var d=i.memoizedState!==null||yw;if(!d){var y=i.alternate,o=y!==null&&y.memoizedState!==null||Va;y=yw;var x=Va;if(yw=d,(Va=o)&&!x)for(br=i;br!==null;)d=br,o=d.child,d.tag===22&&d.memoizedState!==null?O5(i):o!==null?(o.return=d,br=o):O5(i);for(;c!==null;)br=c,mH(c),c=c.sibling;br=i,yw=y,Va=x}R5(e)}else i.subtreeFlags&8772&&c!==null?(c.return=i,br=c):R5(e)}}function R5(e){for(;br!==null;){var t=br;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Va||qS(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Va)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Sc(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var c=t.updateQueue;c!==null&&y5(t,c,n);break;case 3:var d=t.updateQueue;if(d!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}y5(t,d,r)}break;case 5:var y=t.stateNode;if(r===null&&t.flags&4){r=y;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var x=t.alternate;if(x!==null){var S=x.memoizedState;if(S!==null){var k=S.dehydrated;k!==null&&t1(k)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Yt(163))}Va||t.flags&512&&QP(t)}catch(O){Ao(t,t.return,O)}}if(t===e){br=null;break}if(r=t.sibling,r!==null){r.return=t.return,br=r;break}br=t.return}}function L5(e){for(;br!==null;){var t=br;if(t===e){br=null;break}var r=t.sibling;if(r!==null){r.return=t.return,br=r;break}br=t.return}}function O5(e){for(;br!==null;){var t=br;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{qS(4,t)}catch(o){Ao(t,r,o)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(o){Ao(t,i,o)}}var c=t.return;try{QP(t)}catch(o){Ao(t,c,o)}break;case 5:var d=t.return;try{QP(t)}catch(o){Ao(t,d,o)}}}catch(o){Ao(t,t.return,o)}if(t===e){br=null;break}var y=t.sibling;if(y!==null){y.return=t.return,br=y;break}br=t.return}}var x$=Math.ceil,OC=HA.ReactCurrentDispatcher,ik=HA.ReactCurrentOwner,Kl=HA.ReactCurrentBatchConfig,Jn=0,ra=null,Do=null,wa=0,Xs=0,vg=Ld(0),Ho=0,h1=null,pp=0,XS=0,ok=0,__=null,Cs=null,ak=0,i0=1/0,hA=null,UC=!1,HP=null,vd=null,_w=!1,ad=null,zC=0,x_=0,jP=null,RB=-1,LB=0;function us(){return Jn&6?Co():RB!==-1?RB:RB=Co()}function yd(e){return e.mode&1?Jn&2&&wa!==0?wa&-wa:i$.transition!==null?(LB===0&&(LB=e8()),LB):(e=gi,e!==0||(e=window.event,e=e===void 0?16:s8(e.type)),e):1}function Dc(e,t,r,n){if(50<x_)throw x_=0,jP=null,Error(Yt(185));j1(e,r,n),(!(Jn&2)||e!==ra)&&(e===ra&&(!(Jn&2)&&(XS|=r),Ho===4&&rd(e,wa)),Ms(e,n),r===1&&Jn===0&&!(t.mode&1)&&(i0=Co()+500,GS&&Od()))}function Ms(e,t){var r=e.callbackNode;iJ(e,t);var n=bC(e,e===ra?wa:0);if(n===0)r!==null&&KU(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&KU(r),t===1)e.tag===0?n$(U5.bind(null,e)):S8(U5.bind(null,e)),$J(function(){!(Jn&6)&&Od()}),r=null;else{switch(t8(n)){case 1:r=PD;break;case 4:r=JV;break;case 16:r=xC;break;case 536870912:r=$V;break;default:r=xC}r=BH(r,gH.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function gH(e,t){if(RB=-1,LB=0,Jn&6)throw Error(Yt(327));var r=e.callbackNode;if(Qg()&&e.callbackNode!==r)return null;var n=bC(e,e===ra?wa:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=QC(e,n);else{t=n;var i=Jn;Jn|=2;var c=yH();(ra!==e||wa!==t)&&(hA=null,i0=Co()+500,np(e,t));do try{B$();break}catch(y){vH(e,y)}while(!0);GD(),OC.current=c,Jn=i,Do!==null?t=0:(ra=null,wa=0,t=Ho)}if(t!==0){if(t===2&&(i=gP(e),i!==0&&(n=i,t=GP(e,i))),t===1)throw r=h1,np(e,0),rd(e,n),Ms(e,Co()),r;if(t===6)rd(e,n);else{if(i=e.current.alternate,!(n&30)&&!b$(i)&&(t=QC(e,n),t===2&&(c=gP(e),c!==0&&(n=c,t=GP(e,c))),t===1))throw r=h1,np(e,0),rd(e,n),Ms(e,Co()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(Yt(345));case 2:Nf(e,Cs,hA);break;case 3:if(rd(e,n),(n&130023424)===n&&(t=ak+500-Co(),10<t)){if(bC(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){us(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=CP(Nf.bind(null,e,Cs,hA),t);break}Nf(e,Cs,hA);break;case 4:if(rd(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var d=31-Pc(n);c=1<<d,d=t[d],d>i&&(i=d),n&=~c}if(n=i,n=Co()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*x$(n/1960))-n,10<n){e.timeoutHandle=CP(Nf.bind(null,e,Cs,hA),n);break}Nf(e,Cs,hA);break;case 5:Nf(e,Cs,hA);break;default:throw Error(Yt(329))}}}return Ms(e,Co()),e.callbackNode===r?gH.bind(null,e):null}function GP(e,t){var r=__;return e.current.memoizedState.isDehydrated&&(np(e,t).flags|=256),e=QC(e,t),e!==2&&(t=Cs,Cs=r,t!==null&&KP(t)),e}function KP(e){Cs===null?Cs=e:Cs.push.apply(Cs,e)}function b$(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],c=i.getSnapshot;i=i.value;try{if(!Rc(c(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function rd(e,t){for(t&=~ok,t&=~XS,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Pc(t),n=1<<r;e[r]=-1,t&=~n}}function U5(e){if(Jn&6)throw Error(Yt(327));Qg();var t=bC(e,0);if(!(t&1))return Ms(e,Co()),null;var r=QC(e,t);if(e.tag!==0&&r===2){var n=gP(e);n!==0&&(t=n,r=GP(e,n))}if(r===1)throw r=h1,np(e,0),rd(e,t),Ms(e,Co()),r;if(r===6)throw Error(Yt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Nf(e,Cs,hA),Ms(e,Co()),null}function sk(e,t){var r=Jn;Jn|=1;try{return e(t)}finally{Jn=r,Jn===0&&(i0=Co()+500,GS&&Od())}}function mp(e){ad!==null&&ad.tag===0&&!(Jn&6)&&Qg();var t=Jn;Jn|=1;var r=Kl.transition,n=gi;try{if(Kl.transition=null,gi=1,e)return e()}finally{gi=n,Kl.transition=r,Jn=t,!(Jn&6)&&Od()}}function lk(){Xs=vg.current,Vi(vg)}function np(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,JJ(r)),Do!==null)for(r=Do.return;r!==null;){var n=r;switch(VD(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&EC();break;case 3:r0(),Vi(Fs),Vi(Ga),YD();break;case 5:ZD(n);break;case 4:r0();break;case 13:Vi(ro);break;case 19:Vi(ro);break;case 10:KD(n.type._context);break;case 22:case 23:lk()}r=r.return}if(ra=e,Do=e=_d(e.current,null),wa=Xs=t,Ho=0,h1=null,ok=XS=pp=0,Cs=__=null,Zf!==null){for(t=0;t<Zf.length;t++)if(r=Zf[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,c=r.pending;if(c!==null){var d=c.next;c.next=i,n.next=d}r.pending=n}Zf=null}return e}function vH(e,t){do{var r=Do;try{if(GD(),PB.current=LC,RC){for(var n=io.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}RC=!1}if(fp=0,ea=zo=io=null,v_=!1,c1=0,ik.current=null,r===null||r.return===null){Ho=1,h1=t,Do=null;break}e:{var c=e,d=r.return,y=r,o=t;if(t=wa,y.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var x=o,S=y,k=S.tag;if(!(S.mode&1)&&(k===0||k===11||k===15)){var O=S.alternate;O?(S.updateQueue=O.updateQueue,S.memoizedState=O.memoizedState,S.lanes=O.lanes):(S.updateQueue=null,S.memoizedState=null)}var Q=C5(d);if(Q!==null){Q.flags&=-257,S5(Q,d,y,c,t),Q.mode&1&&B5(c,x,t),t=Q,o=x;var G=t.updateQueue;if(G===null){var K=new Set;K.add(o),t.updateQueue=K}else G.add(o);break e}else{if(!(t&1)){B5(c,x,t),ck();break e}o=Error(Yt(426))}}else if(Wi&&y.mode&1){var ee=C5(d);if(ee!==null){!(ee.flags&65536)&&(ee.flags|=256),S5(ee,d,y,c,t),HD(n0(o,y));break e}}c=o=n0(o,y),Ho!==4&&(Ho=2),__===null?__=[c]:__.push(c),c=d;do{switch(c.tag){case 3:c.flags|=65536,t&=-t,c.lanes|=t;var W=tH(c,o,t);v5(c,W);break e;case 1:y=o;var J=c.type,re=c.stateNode;if(!(c.flags&128)&&(typeof J.getDerivedStateFromError=="function"||re!==null&&typeof re.componentDidCatch=="function"&&(vd===null||!vd.has(re)))){c.flags|=65536,t&=-t,c.lanes|=t;var ue=rH(c,y,t);v5(c,ue);break e}}c=c.return}while(c!==null)}xH(r)}catch(ce){t=ce,Do===r&&r!==null&&(Do=r=r.return);continue}break}while(!0)}function yH(){var e=OC.current;return OC.current=LC,e===null?LC:e}function ck(){(Ho===0||Ho===3||Ho===2)&&(Ho=4),ra===null||!(pp&268435455)&&!(XS&268435455)||rd(ra,wa)}function QC(e,t){var r=Jn;Jn|=2;var n=yH();(ra!==e||wa!==t)&&(hA=null,np(e,t));do try{w$();break}catch(i){vH(e,i)}while(!0);if(GD(),Jn=r,OC.current=n,Do!==null)throw Error(Yt(261));return ra=null,wa=0,Ho}function w$(){for(;Do!==null;)_H(Do)}function B$(){for(;Do!==null&&!XY();)_H(Do)}function _H(e){var t=wH(e.alternate,e,Xs);e.memoizedProps=e.pendingProps,t===null?xH(e):Do=t,ik.current=null}function xH(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=g$(r,t),r!==null){r.flags&=32767,Do=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ho=6,Do=null;return}}else if(r=m$(r,t,Xs),r!==null){Do=r;return}if(t=t.sibling,t!==null){Do=t;return}Do=t=e}while(t!==null);Ho===0&&(Ho=5)}function Nf(e,t,r){var n=gi,i=Kl.transition;try{Kl.transition=null,gi=1,C$(e,t,r,n)}finally{Kl.transition=i,gi=n}return null}function C$(e,t,r,n){do Qg();while(ad!==null);if(Jn&6)throw Error(Yt(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Yt(177));e.callbackNode=null,e.callbackPriority=0;var c=r.lanes|r.childLanes;if(oJ(e,c),e===ra&&(Do=ra=null,wa=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||_w||(_w=!0,BH(xC,function(){return Qg(),null})),c=(r.flags&15990)!==0,r.subtreeFlags&15990||c){c=Kl.transition,Kl.transition=null;var d=gi;gi=1;var y=Jn;Jn|=4,ik.current=null,y$(e,r),pH(r,e),GJ(wP),wC=!!bP,wP=bP=null,e.current=r,_$(r),ZY(),Jn=y,gi=d,Kl.transition=c}else e.current=r;if(_w&&(_w=!1,ad=e,zC=i),c=e.pendingLanes,c===0&&(vd=null),$Y(r.stateNode),Ms(e,Co()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(UC)throw UC=!1,e=HP,HP=null,e;return zC&1&&e.tag!==0&&Qg(),c=e.pendingLanes,c&1?e===jP?x_++:(x_=0,jP=e):x_=0,Od(),null}function Qg(){if(ad!==null){var e=t8(zC),t=Kl.transition,r=gi;try{if(Kl.transition=null,gi=16>e?16:e,ad===null)var n=!1;else{if(e=ad,ad=null,zC=0,Jn&6)throw Error(Yt(331));var i=Jn;for(Jn|=4,br=e.current;br!==null;){var c=br,d=c.child;if(br.flags&16){var y=c.deletions;if(y!==null){for(var o=0;o<y.length;o++){var x=y[o];for(br=x;br!==null;){var S=br;switch(S.tag){case 0:case 11:case 15:y_(8,S,c)}var k=S.child;if(k!==null)k.return=S,br=k;else for(;br!==null;){S=br;var O=S.sibling,Q=S.return;if(hH(S),S===x){br=null;break}if(O!==null){O.return=Q,br=O;break}br=Q}}}var G=c.alternate;if(G!==null){var K=G.child;if(K!==null){G.child=null;do{var ee=K.sibling;K.sibling=null,K=ee}while(K!==null)}}br=c}}if(c.subtreeFlags&2064&&d!==null)d.return=c,br=d;else e:for(;br!==null;){if(c=br,c.flags&2048)switch(c.tag){case 0:case 11:case 15:y_(9,c,c.return)}var W=c.sibling;if(W!==null){W.return=c.return,br=W;break e}br=c.return}}var J=e.current;for(br=J;br!==null;){d=br;var re=d.child;if(d.subtreeFlags&2064&&re!==null)re.return=d,br=re;else e:for(d=J;br!==null;){if(y=br,y.flags&2048)try{switch(y.tag){case 0:case 11:case 15:qS(9,y)}}catch(ce){Ao(y,y.return,ce)}if(y===d){br=null;break e}var ue=y.sibling;if(ue!==null){ue.return=y.return,br=ue;break e}br=y.return}}if(Jn=i,Od(),Fu&&typeof Fu.onPostCommitFiberRoot=="function")try{Fu.onPostCommitFiberRoot(QS,e)}catch{}n=!0}return n}finally{gi=r,Kl.transition=t}}return!1}function z5(e,t,r){t=n0(r,t),t=tH(e,t,1),e=gd(e,t,1),t=us(),e!==null&&(j1(e,1,t),Ms(e,t))}function Ao(e,t,r){if(e.tag===3)z5(e,e,r);else for(;t!==null;){if(t.tag===3){z5(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(vd===null||!vd.has(n))){e=n0(r,e),e=rH(t,e,1),t=gd(t,e,1),e=us(),t!==null&&(j1(t,1,e),Ms(t,e));break}}t=t.return}}function S$(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=us(),e.pingedLanes|=e.suspendedLanes&r,ra===e&&(wa&r)===r&&(Ho===4||Ho===3&&(wa&130023424)===wa&&500>Co()-ak?np(e,0):ok|=r),Ms(e,t)}function bH(e,t){t===0&&(e.mode&1?(t=uw,uw<<=1,!(uw&130023424)&&(uw=4194304)):t=1);var r=us();e=LA(e,t),e!==null&&(j1(e,t,r),Ms(e,r))}function E$(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),bH(e,r)}function T$(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Yt(314))}n!==null&&n.delete(t),bH(e,r)}var wH;wH=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Fs.current)Es=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Es=!1,p$(e,t,r);Es=!!(e.flags&131072)}else Es=!1,Wi&&t.flags&1048576&&E8(t,IC,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;kB(e,t),e=t.pendingProps;var i=$g(t,Ga.current);zg(t,r),i=$D(null,t,n,e,i,r);var c=ek();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Is(n)?(c=!0,TC(t)):c=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,qD(t),i.updater=WS,t.stateNode=i,i._reactInternals=t,PP(t,n,e,r),t=RP(null,t,n,!0,c,r)):(t.tag=0,Wi&&c&&ND(t),ss(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(kB(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=I$(n),e=Sc(n,e),i){case 0:t=kP(null,t,n,e,r);break e;case 1:t=F5(null,t,n,e,r);break e;case 11:t=E5(null,t,n,e,r);break e;case 14:t=T5(null,t,n,Sc(n.type,e),r);break e}throw Error(Yt(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Sc(n,i),kP(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Sc(n,i),F5(e,t,n,i,r);case 3:e:{if(aH(t),e===null)throw Error(Yt(387));n=t.pendingProps,c=t.memoizedState,i=c.element,D8(e,t),DC(t,n,null,r);var d=t.memoizedState;if(n=d.element,c.isDehydrated)if(c={element:n,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){i=n0(Error(Yt(423)),t),t=I5(e,t,n,r,i);break e}else if(n!==i){i=n0(Error(Yt(424)),t),t=I5(e,t,n,r,i);break e}else for(Ys=md(t.stateNode.containerInfo.firstChild),tl=t,Wi=!0,Tc=null,r=M8(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(e0(),n===i){t=OA(e,t,r);break e}ss(e,t,n,r)}t=t.child}return t;case 5:return k8(t),e===null&&FP(t),n=t.type,i=t.pendingProps,c=e!==null?e.memoizedProps:null,d=i.children,BP(n,i)?d=null:c!==null&&BP(n,c)&&(t.flags|=32),oH(e,t),ss(e,t,d,r),t.child;case 6:return e===null&&FP(t),null;case 13:return sH(e,t,r);case 4:return XD(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=t0(t,null,n,r):ss(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Sc(n,i),E5(e,t,n,i,r);case 7:return ss(e,t,t.pendingProps,r),t.child;case 8:return ss(e,t,t.pendingProps.children,r),t.child;case 12:return ss(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,c=t.memoizedProps,d=i.value,Ri(MC,n._currentValue),n._currentValue=d,c!==null)if(Rc(c.value,d)){if(c.children===i.children&&!Fs.current){t=OA(e,t,r);break e}}else for(c=t.child,c!==null&&(c.return=t);c!==null;){var y=c.dependencies;if(y!==null){d=c.child;for(var o=y.firstContext;o!==null;){if(o.context===n){if(c.tag===1){o=wA(-1,r&-r),o.tag=2;var x=c.updateQueue;if(x!==null){x=x.shared;var S=x.pending;S===null?o.next=o:(o.next=S.next,S.next=o),x.pending=o}}c.lanes|=r,o=c.alternate,o!==null&&(o.lanes|=r),IP(c.return,r,t),y.lanes|=r;break}o=o.next}}else if(c.tag===10)d=c.type===t.type?null:c.child;else if(c.tag===18){if(d=c.return,d===null)throw Error(Yt(341));d.lanes|=r,y=d.alternate,y!==null&&(y.lanes|=r),IP(d,r,t),d=c.sibling}else d=c.child;if(d!==null)d.return=c;else for(d=c;d!==null;){if(d===t){d=null;break}if(c=d.sibling,c!==null){c.return=d.return,d=c;break}d=d.return}c=d}ss(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,zg(t,r),i=Zl(i),n=n(i),t.flags|=1,ss(e,t,n,r),t.child;case 14:return n=t.type,i=Sc(n,t.pendingProps),i=Sc(n.type,i),T5(e,t,n,i,r);case 15:return nH(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Sc(n,i),kB(e,t),t.tag=1,Is(n)?(e=!0,TC(t)):e=!1,zg(t,r),eH(t,n,i),PP(t,n,i,r),RP(null,t,n,!0,e,r);case 19:return lH(e,t,r);case 22:return iH(e,t,r)}throw Error(Yt(156,t.tag))};function BH(e,t){return YV(e,t)}function F$(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nl(e,t,r,n){return new F$(e,t,r,n)}function uk(e){return e=e.prototype,!(!e||!e.isReactComponent)}function I$(e){if(typeof e=="function")return uk(e)?1:0;if(e!=null){if(e=e.$$typeof,e===FD)return 11;if(e===ID)return 14}return 2}function _d(e,t){var r=e.alternate;return r===null?(r=Nl(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function OB(e,t,r,n,i,c){var d=2;if(n=e,typeof e=="function")uk(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case lg:return ip(r.children,i,c,t);case TD:d=8,i|=8;break;case rP:return e=Nl(12,r,t,i|2),e.elementType=rP,e.lanes=c,e;case nP:return e=Nl(13,r,t,i),e.elementType=nP,e.lanes=c,e;case iP:return e=Nl(19,r,t,i),e.elementType=iP,e.lanes=c,e;case kV:return ZS(r,i,c,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case PV:d=10;break e;case DV:d=9;break e;case FD:d=11;break e;case ID:d=14;break e;case Zh:d=16,n=null;break e}throw Error(Yt(130,e==null?e:typeof e,""))}return t=Nl(d,r,t,i),t.elementType=e,t.type=n,t.lanes=c,t}function ip(e,t,r,n){return e=Nl(7,e,n,t),e.lanes=r,e}function ZS(e,t,r,n){return e=Nl(22,e,n,t),e.elementType=kV,e.lanes=r,e.stateNode={isHidden:!1},e}function EI(e,t,r){return e=Nl(6,e,null,t),e.lanes=r,e}function TI(e,t,r){return t=Nl(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function M$(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lI(0),this.expirationTimes=lI(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lI(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ak(e,t,r,n,i,c,d,y,o){return e=new M$(e,t,r,y,o),t===1?(t=1,c===!0&&(t|=8)):t=0,c=Nl(3,null,null,t),e.current=c,c.stateNode=e,c.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},qD(c),e}function P$(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sg,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function CH(e){if(!e)return Ed;e=e._reactInternals;e:{if(Cp(e)!==e||e.tag!==1)throw Error(Yt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Is(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Yt(171))}if(e.tag===1){var r=e.type;if(Is(r))return C8(e,r,t)}return t}function SH(e,t,r,n,i,c,d,y,o){return e=Ak(r,n,!0,e,i,c,d,y,o),e.context=CH(null),r=e.current,n=us(),i=yd(r),c=wA(n,i),c.callback=t??null,gd(r,c,i),e.current.lanes=i,j1(e,i,n),Ms(e,n),e}function YS(e,t,r,n){var i=t.current,c=us(),d=yd(i);return r=CH(r),t.context===null?t.context=r:t.pendingContext=r,t=wA(c,d),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=gd(i,t,d),e!==null&&(Dc(e,i,d,c),MB(e,i,d)),d}function NC(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Q5(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function hk(e,t){Q5(e,t),(e=e.alternate)&&Q5(e,t)}function D$(){return null}var EH=typeof reportError=="function"?reportError:function(e){console.error(e)};function dk(e){this._internalRoot=e}JS.prototype.render=dk.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Yt(409));YS(e,t,null,null)};JS.prototype.unmount=dk.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;mp(function(){YS(null,e,null,null)}),t[RA]=null}};function JS(e){this._internalRoot=e}JS.prototype.unstable_scheduleHydration=function(e){if(e){var t=i8();e={blockedOn:null,target:e,priority:t};for(var r=0;r<td.length&&t!==0&&t<td[r].priority;r++);td.splice(r,0,e),r===0&&a8(e)}};function fk(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function $S(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function N5(){}function k$(e,t,r,n,i){if(i){if(typeof n=="function"){var c=n;n=function(){var x=NC(d);c.call(x)}}var d=SH(t,n,e,0,null,!1,!1,"",N5);return e._reactRootContainer=d,e[RA]=d.current,i1(e.nodeType===8?e.parentNode:e),mp(),d}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var y=n;n=function(){var x=NC(o);y.call(x)}}var o=Ak(e,0,!1,null,null,!1,!1,"",N5);return e._reactRootContainer=o,e[RA]=o.current,i1(e.nodeType===8?e.parentNode:e),mp(function(){YS(t,o,r,n)}),o}function eE(e,t,r,n,i){var c=r._reactRootContainer;if(c){var d=c;if(typeof i=="function"){var y=i;i=function(){var o=NC(d);y.call(o)}}YS(t,d,e,i)}else d=k$(r,t,e,i,n);return NC(d)}r8=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Hy(t.pendingLanes);r!==0&&(DD(t,r|1),Ms(t,Co()),!(Jn&6)&&(i0=Co()+500,Od()))}break;case 13:mp(function(){var n=LA(e,1);if(n!==null){var i=us();Dc(n,e,1,i)}}),hk(e,1)}};kD=function(e){if(e.tag===13){var t=LA(e,134217728);if(t!==null){var r=us();Dc(t,e,134217728,r)}hk(e,134217728)}};n8=function(e){if(e.tag===13){var t=yd(e),r=LA(e,t);if(r!==null){var n=us();Dc(r,e,t,n)}hk(e,t)}};i8=function(){return gi};o8=function(e,t){var r=gi;try{return gi=e,t()}finally{gi=r}};fP=function(e,t,r){switch(t){case"input":if(sP(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=jS(n);if(!i)throw Error(Yt(90));LV(n),sP(n,i)}}}break;case"textarea":UV(e,r);break;case"select":t=r.value,t!=null&&Rg(e,!!r.multiple,t,!1)}};GV=sk;KV=mp;var R$={usingClientEntryPoint:!1,Events:[K1,hg,jS,HV,jV,sk]},yy={findFiberByHostInstance:Xf,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},L$={bundleType:yy.bundleType,version:yy.version,rendererPackageName:yy.rendererPackageName,rendererConfig:yy.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:HA.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=XV(e),e===null?null:e.stateNode},findFiberByHostInstance:yy.findFiberByHostInstance||D$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xw.isDisabled&&xw.supportsFiber)try{QS=xw.inject(L$),Fu=xw}catch{}}ul.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R$;ul.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fk(t))throw Error(Yt(200));return P$(e,t,null,r)};ul.createRoot=function(e,t){if(!fk(e))throw Error(Yt(299));var r=!1,n="",i=EH;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Ak(e,1,!1,null,null,r,!1,n,i),e[RA]=t.current,i1(e.nodeType===8?e.parentNode:e),new dk(t)};ul.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Yt(188)):(e=Object.keys(e).join(","),Error(Yt(268,e)));return e=XV(t),e=e===null?null:e.stateNode,e};ul.flushSync=function(e){return mp(e)};ul.hydrate=function(e,t,r){if(!$S(t))throw Error(Yt(200));return eE(null,e,t,!0,r)};ul.hydrateRoot=function(e,t,r){if(!fk(e))throw Error(Yt(405));var n=r!=null&&r.hydratedSources||null,i=!1,c="",d=EH;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),t=SH(t,null,e,1,r??null,i,!1,c,d),e[RA]=t.current,i1(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new JS(t)};ul.render=function(e,t,r){if(!$S(t))throw Error(Yt(200));return eE(null,e,t,!1,r)};ul.unmountComponentAtNode=function(e){if(!$S(e))throw Error(Yt(40));return e._reactRootContainer?(mp(function(){eE(null,null,e,!1,function(){e._reactRootContainer=null,e[RA]=null})}),!0):!1};ul.unstable_batchedUpdates=sk;ul.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!$S(r))throw Error(Yt(200));if(e==null||e._reactInternals===void 0)throw Error(Yt(38));return eE(e,t,r,!1,n)};ul.version="18.3.1-next-f1338f8080-20240426";function TH(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(TH)}catch(e){console.error(e)}}TH(),TV.exports=ul;var tE=TV.exports,FH,V5=tE;FH=V5.createRoot,V5.hydrateRoot;var O$=!1;function U$(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function z$(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var Q$=function(){function e(r){var n=this;this._insertTag=function(i){var c;n.tags.length===0?n.insertionPoint?c=n.insertionPoint.nextSibling:n.prepend?c=n.container.firstChild:c=n.before:c=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,c),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!O$:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(z$(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var c=U$(i);try{c.insertRule(n,c.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},e}(),Ua="-ms-",VC="-moz-",oi="-webkit-",IH="comm",pk="rule",mk="decl",N$="@import",MH="@keyframes",V$="@layer",H$=Math.abs,rE=String.fromCharCode,j$=Object.assign;function G$(e,t){return va(e,0)^45?(((t<<2^va(e,0))<<2^va(e,1))<<2^va(e,2))<<2^va(e,3):0}function PH(e){return e.trim()}function K$(e,t){return(e=t.exec(e))?e[0]:e}function ai(e,t,r){return e.replace(t,r)}function WP(e,t){return e.indexOf(t)}function va(e,t){return e.charCodeAt(t)|0}function d1(e,t,r){return e.slice(t,r)}function _u(e){return e.length}function gk(e){return e.length}function bw(e,t){return t.push(e),e}function W$(e,t){return e.map(t).join("")}var nE=1,o0=1,DH=0,ks=0,Mo=0,b0="";function iE(e,t,r,n,i,c,d){return{value:e,root:t,parent:r,type:n,props:i,children:c,line:nE,column:o0,length:d,return:""}}function _y(e,t){return j$(iE("",null,null,"",null,null,0),e,{length:-e.length},t)}function q$(){return Mo}function X$(){return Mo=ks>0?va(b0,--ks):0,o0--,Mo===10&&(o0=1,nE--),Mo}function rl(){return Mo=ks<DH?va(b0,ks++):0,o0++,Mo===10&&(o0=1,nE++),Mo}function Mu(){return va(b0,ks)}function UB(){return ks}function q1(e,t){return d1(b0,e,t)}function f1(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function kH(e){return nE=o0=1,DH=_u(b0=e),ks=0,[]}function RH(e){return b0="",e}function zB(e){return PH(q1(ks-1,qP(e===91?e+2:e===40?e+1:e)))}function Z$(e){for(;(Mo=Mu())&&Mo<33;)rl();return f1(e)>2||f1(Mo)>3?"":" "}function Y$(e,t){for(;--t&&rl()&&!(Mo<48||Mo>102||Mo>57&&Mo<65||Mo>70&&Mo<97););return q1(e,UB()+(t<6&&Mu()==32&&rl()==32))}function qP(e){for(;rl();)switch(Mo){case e:return ks;case 34:case 39:e!==34&&e!==39&&qP(Mo);break;case 40:e===41&&qP(e);break;case 92:rl();break}return ks}function J$(e,t){for(;rl()&&e+Mo!==57;)if(e+Mo===84&&Mu()===47)break;return"/*"+q1(t,ks-1)+"*"+rE(e===47?e:rl())}function $$(e){for(;!f1(Mu());)rl();return q1(e,ks)}function eee(e){return RH(QB("",null,null,null,[""],e=kH(e),0,[0],e))}function QB(e,t,r,n,i,c,d,y,o){for(var x=0,S=0,k=d,O=0,Q=0,G=0,K=1,ee=1,W=1,J=0,re="",ue=i,ce=c,he=n,xe=re;ee;)switch(G=J,J=rl()){case 40:if(G!=108&&va(xe,k-1)==58){WP(xe+=ai(zB(J),"&","&\f"),"&\f")!=-1&&(W=-1);break}case 34:case 39:case 91:xe+=zB(J);break;case 9:case 10:case 13:case 32:xe+=Z$(G);break;case 92:xe+=Y$(UB()-1,7);continue;case 47:switch(Mu()){case 42:case 47:bw(tee(J$(rl(),UB()),t,r),o);break;default:xe+="/"}break;case 123*K:y[x++]=_u(xe)*W;case 125*K:case 59:case 0:switch(J){case 0:case 125:ee=0;case 59+S:W==-1&&(xe=ai(xe,/\f/g,"")),Q>0&&_u(xe)-k&&bw(Q>32?j5(xe+";",n,r,k-1):j5(ai(xe," ","")+";",n,r,k-2),o);break;case 59:xe+=";";default:if(bw(he=H5(xe,t,r,x,S,i,y,re,ue=[],ce=[],k),c),J===123)if(S===0)QB(xe,t,he,he,ue,c,k,y,ce);else switch(O===99&&va(xe,3)===110?100:O){case 100:case 108:case 109:case 115:QB(e,he,he,n&&bw(H5(e,he,he,0,0,i,y,re,i,ue=[],k),ce),i,ce,k,y,n?ue:ce);break;default:QB(xe,he,he,he,[""],ce,0,y,ce)}}x=S=Q=0,K=W=1,re=xe="",k=d;break;case 58:k=1+_u(xe),Q=G;default:if(K<1){if(J==123)--K;else if(J==125&&K++==0&&X$()==125)continue}switch(xe+=rE(J),J*K){case 38:W=S>0?1:(xe+="\f",-1);break;case 44:y[x++]=(_u(xe)-1)*W,W=1;break;case 64:Mu()===45&&(xe+=zB(rl())),O=Mu(),S=k=_u(re=xe+=$$(UB())),J++;break;case 45:G===45&&_u(xe)==2&&(K=0)}}return c}function H5(e,t,r,n,i,c,d,y,o,x,S){for(var k=i-1,O=i===0?c:[""],Q=gk(O),G=0,K=0,ee=0;G<n;++G)for(var W=0,J=d1(e,k+1,k=H$(K=d[G])),re=e;W<Q;++W)(re=PH(K>0?O[W]+" "+J:ai(J,/&\f/g,O[W])))&&(o[ee++]=re);return iE(e,t,r,i===0?pk:y,o,x,S)}function tee(e,t,r){return iE(e,t,r,IH,rE(q$()),d1(e,2,-2),0)}function j5(e,t,r,n){return iE(e,t,r,mk,d1(e,0,n),d1(e,n+1,-1),n)}function Ng(e,t){for(var r="",n=gk(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function ree(e,t,r,n){switch(e.type){case V$:if(e.children.length)break;case N$:case mk:return e.return=e.return||e.value;case IH:return"";case MH:return e.return=e.value+"{"+Ng(e.children,n)+"}";case pk:e.value=e.props.join(",")}return _u(r=Ng(e.children,n))?e.return=e.value+"{"+r+"}":""}function nee(e){var t=gk(e);return function(r,n,i,c){for(var d="",y=0;y<t;y++)d+=e[y](r,n,i,c)||"";return d}}function iee(e){return function(t){t.root||(t=t.return)&&e(t)}}var G5=function(t){var r=new WeakMap;return function(n){if(r.has(n))return r.get(n);var i=t(n);return r.set(n,i),i}};function LH(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var oee=function(t,r,n){for(var i=0,c=0;i=c,c=Mu(),i===38&&c===12&&(r[n]=1),!f1(c);)rl();return q1(t,ks)},aee=function(t,r){var n=-1,i=44;do switch(f1(i)){case 0:i===38&&Mu()===12&&(r[n]=1),t[n]+=oee(ks-1,r,n);break;case 2:t[n]+=zB(i);break;case 4:if(i===44){t[++n]=Mu()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=rE(i)}while(i=rl());return t},see=function(t,r){return RH(aee(kH(t),r))},K5=new WeakMap,lee=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!K5.get(n))&&!i){K5.set(t,!0);for(var c=[],d=see(r,c),y=n.props,o=0,x=0;o<d.length;o++)for(var S=0;S<y.length;S++,x++)t.props[x]=c[o]?d[o].replace(/&\f/g,y[S]):y[S]+" "+d[o]}}},cee=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function OH(e,t){switch(G$(e,t)){case 5103:return oi+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return oi+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return oi+e+VC+e+Ua+e+e;case 6828:case 4268:return oi+e+Ua+e+e;case 6165:return oi+e+Ua+"flex-"+e+e;case 5187:return oi+e+ai(e,/(\w+).+(:[^]+)/,oi+"box-$1$2"+Ua+"flex-$1$2")+e;case 5443:return oi+e+Ua+"flex-item-"+ai(e,/flex-|-self/,"")+e;case 4675:return oi+e+Ua+"flex-line-pack"+ai(e,/align-content|flex-|-self/,"")+e;case 5548:return oi+e+Ua+ai(e,"shrink","negative")+e;case 5292:return oi+e+Ua+ai(e,"basis","preferred-size")+e;case 6060:return oi+"box-"+ai(e,"-grow","")+oi+e+Ua+ai(e,"grow","positive")+e;case 4554:return oi+ai(e,/([^-])(transform)/g,"$1"+oi+"$2")+e;case 6187:return ai(ai(ai(e,/(zoom-|grab)/,oi+"$1"),/(image-set)/,oi+"$1"),e,"")+e;case 5495:case 3959:return ai(e,/(image-set\([^]*)/,oi+"$1$`$1");case 4968:return ai(ai(e,/(.+:)(flex-)?(.*)/,oi+"box-pack:$3"+Ua+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+oi+e+e;case 4095:case 3583:case 4068:case 2532:return ai(e,/(.+)-inline(.+)/,oi+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(_u(e)-1-t>6)switch(va(e,t+1)){case 109:if(va(e,t+4)!==45)break;case 102:return ai(e,/(.+:)(.+)-([^]+)/,"$1"+oi+"$2-$3$1"+VC+(va(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~WP(e,"stretch")?OH(ai(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(va(e,t+1)!==115)break;case 6444:switch(va(e,_u(e)-3-(~WP(e,"!important")&&10))){case 107:return ai(e,":",":"+oi)+e;case 101:return ai(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+oi+(va(e,14)===45?"inline-":"")+"box$3$1"+oi+"$2$3$1"+Ua+"$2box$3")+e}break;case 5936:switch(va(e,t+11)){case 114:return oi+e+Ua+ai(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return oi+e+Ua+ai(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return oi+e+Ua+ai(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return oi+e+Ua+e+e}return e}var uee=function(t,r,n,i){if(t.length>-1&&!t.return)switch(t.type){case mk:t.return=OH(t.value,t.length);break;case MH:return Ng([_y(t,{value:ai(t.value,"@","@"+oi)})],i);case pk:if(t.length)return W$(t.props,function(c){switch(K$(c,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ng([_y(t,{props:[ai(c,/:(read-\w+)/,":"+VC+"$1")]})],i);case"::placeholder":return Ng([_y(t,{props:[ai(c,/:(plac\w+)/,":"+oi+"input-$1")]}),_y(t,{props:[ai(c,/:(plac\w+)/,":"+VC+"$1")]}),_y(t,{props:[ai(c,/:(plac\w+)/,Ua+"input-$1")]})],i)}return""})}},Aee=[uee],hee=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(K){var ee=K.getAttribute("data-emotion");ee.indexOf(" ")!==-1&&(document.head.appendChild(K),K.setAttribute("data-s",""))})}var i=t.stylisPlugins||Aee,c={},d,y=[];d=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(K){for(var ee=K.getAttribute("data-emotion").split(" "),W=1;W<ee.length;W++)c[ee[W]]=!0;y.push(K)});var o,x=[lee,cee];{var S,k=[ree,iee(function(K){S.insert(K)})],O=nee(x.concat(i,k)),Q=function(ee){return Ng(eee(ee),O)};o=function(ee,W,J,re){S=J,Q(ee?ee+"{"+W.styles+"}":W.styles),re&&(G.inserted[W.name]=!0)}}var G={key:r,sheet:new Q$({key:r,container:d,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:c,registered:{},insert:o};return G.sheet.hydrate(y),G};function Qr(){return Qr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qr.apply(null,arguments)}var UH={exports:{}},vi={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var na=typeof Symbol=="function"&&Symbol.for,vk=na?Symbol.for("react.element"):60103,yk=na?Symbol.for("react.portal"):60106,oE=na?Symbol.for("react.fragment"):60107,aE=na?Symbol.for("react.strict_mode"):60108,sE=na?Symbol.for("react.profiler"):60114,lE=na?Symbol.for("react.provider"):60109,cE=na?Symbol.for("react.context"):60110,_k=na?Symbol.for("react.async_mode"):60111,uE=na?Symbol.for("react.concurrent_mode"):60111,AE=na?Symbol.for("react.forward_ref"):60112,hE=na?Symbol.for("react.suspense"):60113,dee=na?Symbol.for("react.suspense_list"):60120,dE=na?Symbol.for("react.memo"):60115,fE=na?Symbol.for("react.lazy"):60116,fee=na?Symbol.for("react.block"):60121,pee=na?Symbol.for("react.fundamental"):60117,mee=na?Symbol.for("react.responder"):60118,gee=na?Symbol.for("react.scope"):60119;function hl(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case vk:switch(e=e.type,e){case _k:case uE:case oE:case sE:case aE:case hE:return e;default:switch(e=e&&e.$$typeof,e){case cE:case AE:case fE:case dE:case lE:return e;default:return t}}case yk:return t}}}function zH(e){return hl(e)===uE}vi.AsyncMode=_k;vi.ConcurrentMode=uE;vi.ContextConsumer=cE;vi.ContextProvider=lE;vi.Element=vk;vi.ForwardRef=AE;vi.Fragment=oE;vi.Lazy=fE;vi.Memo=dE;vi.Portal=yk;vi.Profiler=sE;vi.StrictMode=aE;vi.Suspense=hE;vi.isAsyncMode=function(e){return zH(e)||hl(e)===_k};vi.isConcurrentMode=zH;vi.isContextConsumer=function(e){return hl(e)===cE};vi.isContextProvider=function(e){return hl(e)===lE};vi.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===vk};vi.isForwardRef=function(e){return hl(e)===AE};vi.isFragment=function(e){return hl(e)===oE};vi.isLazy=function(e){return hl(e)===fE};vi.isMemo=function(e){return hl(e)===dE};vi.isPortal=function(e){return hl(e)===yk};vi.isProfiler=function(e){return hl(e)===sE};vi.isStrictMode=function(e){return hl(e)===aE};vi.isSuspense=function(e){return hl(e)===hE};vi.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===oE||e===uE||e===sE||e===aE||e===hE||e===dee||typeof e=="object"&&e!==null&&(e.$$typeof===fE||e.$$typeof===dE||e.$$typeof===lE||e.$$typeof===cE||e.$$typeof===AE||e.$$typeof===pee||e.$$typeof===mee||e.$$typeof===gee||e.$$typeof===fee)};vi.typeOf=hl;UH.exports=vi;var vee=UH.exports,QH=vee,yee={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},_ee={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},NH={};NH[QH.ForwardRef]=yee;NH[QH.Memo]=_ee;var xee=!0;function VH(e,t,r){var n="";return r.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):n+=i+" "}),n}var xk=function(t,r,n){var i=t.key+"-"+r.name;(n===!1||xee===!1)&&t.registered[i]===void 0&&(t.registered[i]=r.styles)},bk=function(t,r,n){xk(t,r,n);var i=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var c=r;do t.insert(r===c?"."+i:"",c,t.sheet,!0),c=c.next;while(c!==void 0)}};function bee(e){for(var t=0,r,n=0,i=e.length;i>=4;++n,i-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var wee={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Bee=!1,Cee=/[A-Z]|^ms/g,See=/_EMO_([^_]+?)_([^]*?)_EMO_/g,HH=function(t){return t.charCodeAt(1)===45},W5=function(t){return t!=null&&typeof t!="boolean"},FI=LH(function(e){return HH(e)?e:e.replace(Cee,"-$&").toLowerCase()}),q5=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(See,function(n,i,c){return xu={name:i,styles:c,next:xu},i})}return wee[t]!==1&&!HH(t)&&typeof r=="number"&&r!==0?r+"px":r},Eee="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function p1(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var i=r;if(i.anim===1)return xu={name:i.name,styles:i.styles,next:xu},i.name;var c=r;if(c.styles!==void 0){var d=c.next;if(d!==void 0)for(;d!==void 0;)xu={name:d.name,styles:d.styles,next:xu},d=d.next;var y=c.styles+";";return y}return Tee(e,t,r)}case"function":{if(e!==void 0){var o=xu,x=r(e);return xu=o,p1(e,t,x)}break}}var S=r;if(t==null)return S;var k=t[S];return k!==void 0?k:S}function Tee(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=p1(e,t,r[i])+";";else for(var c in r){var d=r[c];if(typeof d!="object"){var y=d;t!=null&&t[y]!==void 0?n+=c+"{"+t[y]+"}":W5(y)&&(n+=FI(c)+":"+q5(c,y)+";")}else{if(c==="NO_COMPONENT_SELECTOR"&&Bee)throw new Error(Eee);if(Array.isArray(d)&&typeof d[0]=="string"&&(t==null||t[d[0]]===void 0))for(var o=0;o<d.length;o++)W5(d[o])&&(n+=FI(c)+":"+q5(c,d[o])+";");else{var x=p1(e,t,d);switch(c){case"animation":case"animationName":{n+=FI(c)+":"+x+";";break}default:n+=c+"{"+x+"}"}}}}return n}var X5=/label:\s*([^\s;\n{]+)\s*(;|$)/g,xu;function pE(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,i="";xu=void 0;var c=e[0];if(c==null||c.raw===void 0)n=!1,i+=p1(r,t,c);else{var d=c;i+=d[0]}for(var y=1;y<e.length;y++)if(i+=p1(r,t,e[y]),n){var o=c;i+=o[y]}X5.lastIndex=0;for(var x="",S;(S=X5.exec(i))!==null;)x+="-"+S[1];var k=bee(i)+x;return{name:k,styles:i,next:xu}}var Fee=function(t){return t()},jH=LU.useInsertionEffect?LU.useInsertionEffect:!1,GH=jH||Fee,Z5=jH||Se.useLayoutEffect,Iee=!1,KH=Se.createContext(typeof HTMLElement<"u"?hee({key:"css"}):null);KH.Provider;var wk=function(t){return Se.forwardRef(function(r,n){var i=Se.useContext(KH);return t(r,i,n)})},a0=Se.createContext({}),Mee=function(t,r){if(typeof r=="function"){var n=r(t);return n}return Qr({},t,r)},Pee=G5(function(e){return G5(function(t){return Mee(e,t)})}),Dee=function(t){var r=Se.useContext(a0);return t.theme!==r&&(r=Pee(r)(t.theme)),Se.createElement(a0.Provider,{value:r},t.children)},Bk={}.hasOwnProperty,XP="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",kee=function(t,r){var n={};for(var i in r)Bk.call(r,i)&&(n[i]=r[i]);return n[XP]=t,n},Ree=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return xk(r,n,i),GH(function(){return bk(r,n,i)}),null},Lee=wk(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var i=e[XP],c=[n],d="";typeof e.className=="string"?d=VH(t.registered,c,e.className):e.className!=null&&(d=e.className+" ");var y=pE(c,void 0,Se.useContext(a0));d+=t.key+"-"+y.name;var o={};for(var x in e)Bk.call(e,x)&&x!=="css"&&x!==XP&&!Iee&&(o[x]=e[x]);return o.className=d,r&&(o.ref=r),Se.createElement(Se.Fragment,null,Se.createElement(Ree,{cache:t,serialized:y,isStringTag:typeof i=="string"}),Se.createElement(i,o))}),Oee=Lee,Hr=function(t,r){var n=arguments;if(r==null||!Bk.call(r,"css"))return Se.createElement.apply(void 0,n);var i=n.length,c=new Array(i);c[0]=Oee,c[1]=kee(t,r);for(var d=2;d<i;d++)c[d]=n[d];return Se.createElement.apply(null,c)},mE=wk(function(e,t){var r=e.styles,n=pE([r],void 0,Se.useContext(a0)),i=Se.useRef();return Z5(function(){var c=t.key+"-global",d=new t.sheet.constructor({key:c,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),y=!1,o=document.querySelector('style[data-emotion="'+c+" "+n.name+'"]');return t.sheet.tags.length&&(d.before=t.sheet.tags[0]),o!==null&&(y=!0,o.setAttribute("data-emotion",c),d.hydrate([o])),i.current=[d,y],function(){d.flush()}},[t]),Z5(function(){var c=i.current,d=c[0],y=c[1];if(y){c[1]=!1;return}if(n.next!==void 0&&bk(t,n.next,!0),d.tags.length){var o=d.tags[d.tags.length-1].nextElementSibling;d.before=o,d.flush()}t.insert("",n,d,!1)},[t,n.name]),null});function Ck(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return pE(t)}var WH=function(){var t=Ck.apply(void 0,arguments),r="animation-"+t.name;return{name:r,styles:"@keyframes "+r+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},qH=String.raw,XH=qH`
  :root,
  :host {
    --chakra-vh: 100vh;
  }

  @supports (height: -webkit-fill-available) {
    :root,
    :host {
      --chakra-vh: -webkit-fill-available;
    }
  }

  @supports (height: -moz-fill-available) {
    :root,
    :host {
      --chakra-vh: -moz-fill-available;
    }
  }

  @supports (height: 100dvh) {
    :root,
    :host {
      --chakra-vh: 100dvh;
    }
  }
`,Uee=()=>Je.jsx(mE,{styles:XH}),zee=({scope:e=""})=>Je.jsx(mE,{styles:qH`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        touch-action: manipulation;
      }

      body {
        position: relative;
        min-height: 100%;
        margin: 0;
        font-feature-settings: "kern";
      }

      ${e} :where(*, *::before, *::after) {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
        word-wrap: break-word;
      }

      main {
        display: block;
      }

      ${e} hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      ${e} :where(pre, code, kbd,samp) {
        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      ${e} a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      ${e} abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      ${e} :where(b, strong) {
        font-weight: bold;
      }

      ${e} small {
        font-size: 80%;
      }

      ${e} :where(sub,sup) {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      ${e} sub {
        bottom: -0.25em;
      }

      ${e} sup {
        top: -0.5em;
      }

      ${e} img {
        border-style: none;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      ${e} :where(button, input) {
        overflow: visible;
      }

      ${e} :where(button, select) {
        text-transform: none;
      }

      ${e} :where(
          button::-moz-focus-inner,
          [type="button"]::-moz-focus-inner,
          [type="reset"]::-moz-focus-inner,
          [type="submit"]::-moz-focus-inner
        ) {
        border-style: none;
        padding: 0;
      }

      ${e} fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      ${e} legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      ${e} progress {
        vertical-align: baseline;
      }

      ${e} textarea {
        overflow: auto;
      }

      ${e} :where([type="checkbox"], [type="radio"]) {
        box-sizing: border-box;
        padding: 0;
      }

      ${e} input[type="number"]::-webkit-inner-spin-button,
      ${e} input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      ${e} input[type="number"] {
        -moz-appearance: textfield;
      }

      ${e} input[type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      ${e} input[type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ${e} ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      ${e} details {
        display: block;
      }

      ${e} summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      ${e} :where(
          blockquote,
          dl,
          dd,
          h1,
          h2,
          h3,
          h4,
          h5,
          h6,
          hr,
          figure,
          p,
          pre
        ) {
        margin: 0;
      }

      ${e} button {
        background: transparent;
        padding: 0;
      }

      ${e} fieldset {
        margin: 0;
        padding: 0;
      }

      ${e} :where(ol, ul) {
        margin: 0;
        padding: 0;
      }

      ${e} textarea {
        resize: vertical;
      }

      ${e} :where(button, [role="button"]) {
        cursor: pointer;
      }

      ${e} button::-moz-focus-inner {
        border: 0 !important;
      }

      ${e} table {
        border-collapse: collapse;
      }

      ${e} :where(h1, h2, h3, h4, h5, h6) {
        font-size: inherit;
        font-weight: inherit;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      ${e} :where(img, svg, video, canvas, audio, iframe, embed, object) {
        display: block;
      }

      ${e} :where(img, video) {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible]
        :focus:not([data-focus-visible-added]):not(
          [data-focus-visible-disabled]
        ) {
        outline: none;
        box-shadow: none;
      }

      ${e} select::-ms-expand {
        display: none;
      }

      ${XH}
    `});function Qee(e,t){return`${e} returned \`undefined\`. Seems you forgot to wrap component within ${t}`}function dl(e={}){const{name:t,strict:r=!0,hookName:n="useContext",providerName:i="Provider",errorMessage:c,defaultValue:d}=e,y=Se.createContext(d);y.displayName=t;function o(){var x;const S=Se.useContext(y);if(!S&&r){const k=new Error(c??Qee(n,i));throw k.name="ContextError",(x=Error.captureStackTrace)==null||x.call(Error,k,o),k}return S}return[y.Provider,o,y]}var[Nee,Vee]=dl({strict:!1,name:"PortalManagerContext"});function ZH(e){const{children:t,zIndex:r}=e;return Je.jsx(Nee,{value:{zIndex:r},children:t})}ZH.displayName="PortalManager";var m1=globalThis!=null&&globalThis.document?Se.useLayoutEffect:Se.useEffect,[YH,Hee]=dl({strict:!1,name:"PortalContext"}),Sk="chakra-portal",jee=".chakra-portal",Gee=e=>Je.jsx("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:e.zIndex,top:0,left:0,right:0},children:e.children}),Kee=e=>{const{appendToParentPortal:t,children:r}=e,[n,i]=Se.useState(null),c=Se.useRef(null),[,d]=Se.useState({});Se.useEffect(()=>d({}),[]);const y=Hee(),o=Vee();m1(()=>{if(!n)return;const S=n.ownerDocument,k=t?y??S.body:S.body;if(!k)return;c.current=S.createElement("div"),c.current.className=Sk,k.appendChild(c.current),d({});const O=c.current;return()=>{k.contains(O)&&k.removeChild(O)}},[n]);const x=o!=null&&o.zIndex?Je.jsx(Gee,{zIndex:o==null?void 0:o.zIndex,children:r}):r;return c.current?tE.createPortal(Je.jsx(YH,{value:c.current,children:x}),c.current):Je.jsx("span",{ref:S=>{S&&i(S)}})},Wee=e=>{const{children:t,containerRef:r,appendToParentPortal:n}=e,i=r.current,c=i??(typeof window<"u"?document.body:void 0),d=Se.useMemo(()=>{const o=i==null?void 0:i.ownerDocument.createElement("div");return o&&(o.className=Sk),o},[i]),[,y]=Se.useState({});return m1(()=>y({}),[]),m1(()=>{if(!(!d||!c))return c.appendChild(d),()=>{c.removeChild(d)}},[d,c]),c&&d?tE.createPortal(Je.jsx(YH,{value:n?d:null,children:t}),d):null};function gE(e){const t={appendToParentPortal:!0,...e},{containerRef:r,...n}=t;return r?Je.jsx(Wee,{containerRef:r,...n}):Je.jsx(Kee,{...n})}gE.className=Sk;gE.selector=jee;gE.displayName="Portal";function w0(){const e=Se.useContext(a0);if(!e)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return e}var Ek=Se.createContext({});Ek.displayName="ColorModeContext";function vE(){const e=Se.useContext(Ek);if(e===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return e}function Y5(e,t){const{colorMode:r}=vE();return r==="dark"?t:e}var ww={light:"chakra-ui-light",dark:"chakra-ui-dark"};function qee(e={}){const{preventTransition:t=!0}=e,r={setDataset:n=>{const i=t?r.preventTransition():void 0;document.documentElement.dataset.theme=n,document.documentElement.style.colorScheme=n,i==null||i()},setClassName(n){document.body.classList.add(n?ww.dark:ww.light),document.body.classList.remove(n?ww.light:ww.dark)},query(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme(n){var i;return((i=r.query().matches)!=null?i:n==="dark")?"dark":"light"},addListener(n){const i=r.query(),c=d=>{n(d.matches?"dark":"light")};return typeof i.addListener=="function"?i.addListener(c):i.addEventListener("change",c),()=>{typeof i.removeListener=="function"?i.removeListener(c):i.removeEventListener("change",c)}},preventTransition(){const n=document.createElement("style");return n.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(n),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(n)})})}}};return r}var Xee="chakra-ui-color-mode";function Zee(e){return{ssr:!1,type:"localStorage",get(t){if(!(globalThis!=null&&globalThis.document))return t;let r;try{r=localStorage.getItem(e)||t}catch{}return r||t},set(t){try{localStorage.setItem(e,t)}catch{}}}}var Yee=Zee(Xee),J5=()=>{};function $5(e,t){return e.type==="cookie"&&e.ssr?e.get(t):t}function JH(e){const{value:t,children:r,options:{useSystemColorMode:n,initialColorMode:i,disableTransitionOnChange:c}={},colorModeManager:d=Yee}=e,y=i==="dark"?"dark":"light",[o,x]=Se.useState(()=>$5(d,y)),[S,k]=Se.useState(()=>$5(d)),{getSystemTheme:O,setClassName:Q,setDataset:G,addListener:K}=Se.useMemo(()=>qee({preventTransition:c}),[c]),ee=i==="system"&&!o?S:o,W=Se.useCallback(ue=>{const ce=ue==="system"?O():ue;x(ce),Q(ce==="dark"),G(ce),d.set(ce)},[d,O,Q,G]);m1(()=>{i==="system"&&k(O())},[]),Se.useEffect(()=>{const ue=d.get();if(ue){W(ue);return}if(i==="system"){W("system");return}W(y)},[d,y,i,W]);const J=Se.useCallback(()=>{W(ee==="dark"?"light":"dark")},[ee,W]);Se.useEffect(()=>{if(n)return K(W)},[n,K,W]);const re=Se.useMemo(()=>({colorMode:t??ee,toggleColorMode:t?J5:J,setColorMode:t?J5:W,forced:t!==void 0}),[ee,J,W,t]);return Je.jsx(Ek.Provider,{value:re,children:r})}JH.displayName="ColorModeProvider";function Jee(){const e=vE(),t=w0();return{...e,theme:t}}var fo=(...e)=>e.filter(Boolean).join(" ");function nl(e){const t=typeof e;return e!=null&&(t==="object"||t==="function")&&!Array.isArray(e)}function _A(e,...t){return $ee(e)?e(...t):e}var $ee=e=>typeof e=="function",vu=e=>e?"":void 0,II=e=>e?!0:void 0;function ez(...e){return function(r){e.some(n=>(n==null||n(r),r==null?void 0:r.defaultPrevented))}}var HC={exports:{}};HC.exports;(function(e,t){var r=200,n="__lodash_hash_undefined__",i=800,c=16,d=9007199254740991,y="[object Arguments]",o="[object Array]",x="[object AsyncFunction]",S="[object Boolean]",k="[object Date]",O="[object Error]",Q="[object Function]",G="[object GeneratorFunction]",K="[object Map]",ee="[object Number]",W="[object Null]",J="[object Object]",re="[object Proxy]",ue="[object RegExp]",ce="[object Set]",he="[object String]",xe="[object Undefined]",fe="[object WeakMap]",Ue="[object ArrayBuffer]",Ge="[object DataView]",He="[object Float32Array]",tt="[object Float64Array]",pt="[object Int8Array]",gt="[object Int16Array]",Et="[object Int32Array]",ot="[object Uint8Array]",Gt="[object Uint8ClampedArray]",Pt="[object Uint16Array]",Xt="[object Uint32Array]",It=/[\\^$.*+?()[\]{}|]/g,dr=/^\[object .+?Constructor\]$/,ar=/^(?:0|[1-9]\d*)$/,tr={};tr[He]=tr[tt]=tr[pt]=tr[gt]=tr[Et]=tr[ot]=tr[Gt]=tr[Pt]=tr[Xt]=!0,tr[y]=tr[o]=tr[Ue]=tr[S]=tr[Ge]=tr[k]=tr[O]=tr[Q]=tr[K]=tr[ee]=tr[J]=tr[ue]=tr[ce]=tr[he]=tr[fe]=!1;var Rt=typeof Qy=="object"&&Qy&&Qy.Object===Object&&Qy,Or=typeof self=="object"&&self&&self.Object===Object&&self,Cr=Rt||Or||Function("return this")(),qr=t&&!t.nodeType&&t,Fr=qr&&!0&&e&&!e.nodeType&&e,qi=Fr&&Fr.exports===qr,Xi=qi&&Rt.process,ke=function(){try{var Ne=Fr&&Fr.require&&Fr.require("util").types;return Ne||Xi&&Xi.binding&&Xi.binding("util")}catch{}}(),ao=ke&&ke.isTypedArray;function ko(Ne,st,wt){switch(wt.length){case 0:return Ne.call(st);case 1:return Ne.call(st,wt[0]);case 2:return Ne.call(st,wt[0],wt[1]);case 3:return Ne.call(st,wt[0],wt[1],wt[2])}return Ne.apply(st,wt)}function Sa(Ne,st){for(var wt=-1,$t=Array(Ne);++wt<Ne;)$t[wt]=st(wt);return $t}function Dt(Ne){return function(st){return Ne(st)}}function Ea(Ne,st){return Ne==null?void 0:Ne[st]}function Ei(Ne,st){return function(wt){return Ne(st(wt))}}var po=Array.prototype,Br=Function.prototype,en=Object.prototype,Hi=Cr["__core-js_shared__"],mo=Br.toString,so=en.hasOwnProperty,Wa=function(){var Ne=/[^.]+$/.exec(Hi&&Hi.keys&&Hi.keys.IE_PROTO||"");return Ne?"Symbol(src)_1."+Ne:""}(),xr=en.toString,Ls=mo.call(Object),Ta=RegExp("^"+mo.call(so).replace(It,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ia=qi?Cr.Buffer:void 0,go=Cr.Symbol,Wo=Cr.Uint8Array;ia&&ia.allocUnsafe;var Qc=Ei(Object.getPrototypeOf,Object),Nc=Object.create,Vc=en.propertyIsEnumerable,Os=po.splice,oa=go?go.toStringTag:void 0,Us=function(){try{var Ne=Ma(Object,"defineProperty");return Ne({},"",{}),Ne}catch{}}(),Fa=ia?ia.isBuffer:void 0,Hc=Math.max,tn=Date.now,qa=Ma(Cr,"Map"),pl=Ma(Object,"create"),aa=function(){function Ne(){}return function(st){if(!Eo(st))return{};if(Nc)return Nc(st);Ne.prototype=st;var wt=new Ne;return Ne.prototype=void 0,wt}}();function sa(Ne){var st=-1,wt=Ne==null?0:Ne.length;for(this.clear();++st<wt;){var $t=Ne[st];this.set($t[0],$t[1])}}function Qu(){this.__data__=pl?pl(null):{},this.size=0}function jc(Ne){var st=this.has(Ne)&&delete this.__data__[Ne];return this.size-=st?1:0,st}function Nu(Ne){var st=this.__data__;if(pl){var wt=st[Ne];return wt===n?void 0:wt}return so.call(st,Ne)?st[Ne]:void 0}function oc(Ne){var st=this.__data__;return pl?st[Ne]!==void 0:so.call(st,Ne)}function it(Ne,st){var wt=this.__data__;return this.size+=this.has(Ne)?0:1,wt[Ne]=pl&&st===void 0?n:st,this}sa.prototype.clear=Qu,sa.prototype.delete=jc,sa.prototype.get=Nu,sa.prototype.has=oc,sa.prototype.set=it;function se(Ne){var st=-1,wt=Ne==null?0:Ne.length;for(this.clear();++st<wt;){var $t=Ne[st];this.set($t[0],$t[1])}}function Ae(){this.__data__=[],this.size=0}function Be(Ne){var st=this.__data__,wt=un(st,Ne);if(wt<0)return!1;var $t=st.length-1;return wt==$t?st.pop():Os.call(st,wt,1),--this.size,!0}function De(Ne){var st=this.__data__,wt=un(st,Ne);return wt<0?void 0:st[wt][1]}function Ie(Ne){return un(this.__data__,Ne)>-1}function Ke(Ne,st){var wt=this.__data__,$t=un(wt,Ne);return $t<0?(++this.size,wt.push([Ne,st])):wt[$t][1]=st,this}se.prototype.clear=Ae,se.prototype.delete=Be,se.prototype.get=De,se.prototype.has=Ie,se.prototype.set=Ke;function rt(Ne){var st=-1,wt=Ne==null?0:Ne.length;for(this.clear();++st<wt;){var $t=Ne[st];this.set($t[0],$t[1])}}function Ze(){this.size=0,this.__data__={hash:new sa,map:new(qa||se),string:new sa}}function nt(Ne){var st=vo(this,Ne).delete(Ne);return this.size-=st?1:0,st}function dt(Ne){return vo(this,Ne).get(Ne)}function ut(Ne){return vo(this,Ne).has(Ne)}function Ct(Ne,st){var wt=vo(this,Ne),$t=wt.size;return wt.set(Ne,st),this.size+=wt.size==$t?0:1,this}rt.prototype.clear=Ze,rt.prototype.delete=nt,rt.prototype.get=dt,rt.prototype.has=ut,rt.prototype.set=Ct;function zt(Ne){var st=this.__data__=new se(Ne);this.size=st.size}function Nt(){this.__data__=new se,this.size=0}function hr(Ne){var st=this.__data__,wt=st.delete(Ne);return this.size=st.size,wt}function fr(Ne){return this.__data__.get(Ne)}function yr(Ne){return this.__data__.has(Ne)}function pr(Ne,st){var wt=this.__data__;if(wt instanceof se){var $t=wt.__data__;if(!qa||$t.length<r-1)return $t.push([Ne,st]),this.size=++wt.size,this;wt=this.__data__=new rt($t)}return wt.set(Ne,st),this.size=wt.size,this}zt.prototype.clear=Nt,zt.prototype.delete=hr,zt.prototype.get=fr,zt.prototype.has=yr,zt.prototype.set=pr;function mn(Ne,st){var wt=An(Ne),$t=!wt&&Gu(Ne),Sn=!wt&&!$t&&Zc(Ne),kn=!wt&&!$t&&!Sn&&Kt(Ne),Xn=wt||$t||Sn||kn,fn=Xn?Sa(Ne.length,String):[],ti=fn.length;for(var Ti in Ne)Xn&&(Ti=="length"||Sn&&(Ti=="offset"||Ti=="parent")||kn&&(Ti=="buffer"||Ti=="byteLength"||Ti=="byteOffset")||ZA(Ti,ti))||fn.push(Ti);return fn}function gn(Ne,st,wt){(wt!==void 0&&!Kr(Ne[st],wt)||wt===void 0&&!(st in Ne))&&Kn(Ne,st,wt)}function Sr(Ne,st,wt){var $t=Ne[st];(!(so.call(Ne,st)&&Kr($t,wt))||wt===void 0&&!(st in Ne))&&Kn(Ne,st,wt)}function un(Ne,st){for(var wt=Ne.length;wt--;)if(Kr(Ne[wt][0],st))return wt;return-1}function Kn(Ne,st,wt){st=="__proto__"&&Us?Us(Ne,st,{configurable:!0,enumerable:!0,value:wt,writable:!0}):Ne[st]=wt}var Mi=Ya();function yi(Ne){return Ne==null?Ne===void 0?xe:W:oa&&oa in Object(Ne)?Hu(Ne):ml(Ne)}function Zi(Ne){return vl(Ne)&&yi(Ne)==y}function Xa(Ne){if(!Eo(Ne)||Dp(Ne))return!1;var st=Qs(Ne)?Ta:dr;return st.test(Xd(Ne))}function zs(Ne){return vl(Ne)&&ac(Ne.length)&&!!tr[yi(Ne)]}function qA(Ne){if(!Eo(Ne))return qo(Ne);var st=kp(Ne),wt=[];for(var $t in Ne)$t=="constructor"&&(st||!so.call(Ne,$t))||wt.push($t);return wt}function Gc(Ne,st,wt,$t,Sn){Ne!==st&&Mi(st,function(kn,Xn){if(Sn||(Sn=new zt),Eo(kn))Kc(Ne,st,Xn,wt,Gc,$t,Sn);else{var fn=$t?$t(gl(Ne,Xn),kn,Xn+"",Ne,st,Sn):void 0;fn===void 0&&(fn=kn),gn(Ne,Xn,fn)}},Wr)}function Kc(Ne,st,wt,$t,Sn,kn,Xn){var fn=gl(Ne,wt),ti=gl(st,wt),Ti=Xn.get(ti);if(Ti){gn(Ne,wt,Ti);return}var $n=kn?kn(fn,ti,wt+"",Ne,st,Xn):void 0,Yi=$n===void 0;if(Yi){var $A=An(ti),gs=!$A&&Zc(ti),_i=!$A&&!gs&&Kt(ti);$n=ti,$A||gs||_i?An(fn)?$n=fn:cr(fn)?$n=qc(fn):gs?(Yi=!1,$n=Gd(ti)):_i?(Yi=!1,$n=Vu(ti)):$n=[]:Ja(ti)||Gu(ti)?($n=fn,Gu(fn)?$n=Xr(fn):(!Eo(fn)||Qs(fn))&&($n=Wd(ti))):Yi=!1}Yi&&(Xn.set(ti,$n),Sn($n,ti,$t,kn,Xn),Xn.delete(ti)),gn(Ne,wt,$n)}function XA(Ne,st){return qd(ju(Ne,st,Zr),Ne+"")}var Wc=Us?function(Ne,st){return Us(Ne,"toString",{configurable:!0,enumerable:!1,value:To(st),writable:!0})}:Zr;function Gd(Ne,st){return Ne.slice()}function Kd(Ne){var st=new Ne.constructor(Ne.byteLength);return new Wo(st).set(new Wo(Ne)),st}function Vu(Ne,st){var wt=Kd(Ne.buffer);return new Ne.constructor(wt,Ne.byteOffset,Ne.length)}function qc(Ne,st){var wt=-1,$t=Ne.length;for(st||(st=Array($t));++wt<$t;)st[wt]=Ne[wt];return st}function Ia(Ne,st,wt,$t){var Sn=!wt;wt||(wt={});for(var kn=-1,Xn=st.length;++kn<Xn;){var fn=st[kn],ti=void 0;ti===void 0&&(ti=Ne[fn]),Sn?Kn(wt,fn,ti):Sr(wt,fn,ti)}return wt}function Za(Ne){return XA(function(st,wt){var $t=-1,Sn=wt.length,kn=Sn>1?wt[Sn-1]:void 0,Xn=Sn>2?wt[2]:void 0;for(kn=Ne.length>3&&typeof kn=="function"?(Sn--,kn):void 0,Xn&&ms(wt[0],wt[1],Xn)&&(kn=Sn<3?void 0:kn,Sn=1),st=Object(st);++$t<Sn;){var fn=wt[$t];fn&&Ne(st,fn,$t,kn)}return st})}function Ya(Ne){return function(st,wt,$t){for(var Sn=-1,kn=Object(st),Xn=$t(st),fn=Xn.length;fn--;){var ti=Xn[++Sn];if(wt(kn[ti],ti,kn)===!1)break}return st}}function vo(Ne,st){var wt=Ne.__data__;return YA(st)?wt[typeof st=="string"?"string":"hash"]:wt.map}function Ma(Ne,st){var wt=Ea(Ne,st);return Xa(wt)?wt:void 0}function Hu(Ne){var st=so.call(Ne,oa),wt=Ne[oa];try{Ne[oa]=void 0;var $t=!0}catch{}var Sn=xr.call(Ne);return $t&&(st?Ne[oa]=wt:delete Ne[oa]),Sn}function Wd(Ne){return typeof Ne.constructor=="function"&&!kp(Ne)?aa(Qc(Ne)):{}}function ZA(Ne,st){var wt=typeof Ne;return st=st??d,!!st&&(wt=="number"||wt!="symbol"&&ar.test(Ne))&&Ne>-1&&Ne%1==0&&Ne<st}function ms(Ne,st,wt){if(!Eo(wt))return!1;var $t=typeof st;return($t=="number"?Zd(wt)&&ZA(st,wt.length):$t=="string"&&st in wt)?Kr(wt[st],Ne):!1}function YA(Ne){var st=typeof Ne;return st=="string"||st=="number"||st=="symbol"||st=="boolean"?Ne!=="__proto__":Ne===null}function Dp(Ne){return!!Wa&&Wa in Ne}function kp(Ne){var st=Ne&&Ne.constructor,wt=typeof st=="function"&&st.prototype||en;return Ne===wt}function qo(Ne){var st=[];if(Ne!=null)for(var wt in Object(Ne))st.push(wt);return st}function ml(Ne){return xr.call(Ne)}function ju(Ne,st,wt){return st=Hc(st===void 0?Ne.length-1:st,0),function(){for(var $t=arguments,Sn=-1,kn=Hc($t.length-st,0),Xn=Array(kn);++Sn<kn;)Xn[Sn]=$t[st+Sn];Sn=-1;for(var fn=Array(st+1);++Sn<st;)fn[Sn]=$t[Sn];return fn[st]=wt(Xn),ko(Ne,this,fn)}}function gl(Ne,st){if(!(st==="constructor"&&typeof Ne[st]=="function")&&st!="__proto__")return Ne[st]}var qd=Xc(Wc);function Xc(Ne){var st=0,wt=0;return function(){var $t=tn(),Sn=c-($t-wt);if(wt=$t,Sn>0){if(++st>=i)return arguments[0]}else st=0;return Ne.apply(void 0,arguments)}}function Xd(Ne){if(Ne!=null){try{return mo.call(Ne)}catch{}try{return Ne+""}catch{}}return""}function Kr(Ne,st){return Ne===st||Ne!==Ne&&st!==st}var Gu=Zi(function(){return arguments}())?Zi:function(Ne){return vl(Ne)&&so.call(Ne,"callee")&&!Vc.call(Ne,"callee")},An=Array.isArray;function Zd(Ne){return Ne!=null&&ac(Ne.length)&&!Qs(Ne)}function cr(Ne){return vl(Ne)&&Zd(Ne)}var Zc=Fa||JA;function Qs(Ne){if(!Eo(Ne))return!1;var st=yi(Ne);return st==Q||st==G||st==x||st==re}function ac(Ne){return typeof Ne=="number"&&Ne>-1&&Ne%1==0&&Ne<=d}function Eo(Ne){var st=typeof Ne;return Ne!=null&&(st=="object"||st=="function")}function vl(Ne){return Ne!=null&&typeof Ne=="object"}function Ja(Ne){if(!vl(Ne)||yi(Ne)!=J)return!1;var st=Qc(Ne);if(st===null)return!0;var wt=so.call(st,"constructor")&&st.constructor;return typeof wt=="function"&&wt instanceof wt&&mo.call(wt)==Ls}var Kt=ao?Dt(ao):zs;function Xr(Ne){return Ia(Ne,Wr(Ne))}function Wr(Ne){return Zd(Ne)?mn(Ne):qA(Ne)}var Xo=Za(function(Ne,st,wt,$t){Gc(Ne,st,wt,$t)});function To(Ne){return function(){return Ne}}function Zr(Ne){return Ne}function JA(){return!1}e.exports=Xo})(HC,HC.exports);var ete=HC.exports;const Su=V1(ete);var tte=e=>/!(important)?$/.test(e),tz=e=>typeof e=="string"?e.replace(/!(important)?$/,"").trim():e,rte=(e,t)=>r=>{const n=String(t),i=tte(n),c=tz(n),d=e?`${e}.${c}`:c;let y=nl(r.__cssMap)&&d in r.__cssMap?r.__cssMap[d].varRef:t;return y=tz(y),i?`${y} !important`:y};function Tk(e){const{scale:t,transform:r,compose:n}=e;return(c,d)=>{var y;const o=rte(t,c)(d);let x=(y=r==null?void 0:r(o,d))!=null?y:o;return n&&(x=n(x,d)),x}}var Bw=(...e)=>t=>e.reduce((r,n)=>n(r),t);function El(e,t){return r=>{const n={property:r,scale:e};return n.transform=Tk({scale:e,transform:t}),n}}var nte=({rtl:e,ltr:t})=>r=>r.direction==="rtl"?e:t;function ite(e){const{property:t,scale:r,transform:n}=e;return{scale:r,property:nte(t),transform:r?Tk({scale:r,compose:n}):n}}var $H=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function ote(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...$H].join(" ")}function ate(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...$H].join(" ")}var ste={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},lte={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function cte(e){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":e,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}var ute={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},ZP={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},Ate=new Set(Object.values(ZP)),YP=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),hte=e=>e.trim();function dte(e,t){if(e==null||YP.has(e))return e;if(!(JP(e)||YP.has(e)))return`url('${e}')`;const i=/(^[a-z-A-Z]+)\((.*)\)/g.exec(e),c=i==null?void 0:i[1],d=i==null?void 0:i[2];if(!c||!d)return e;const y=c.includes("-gradient")?c:`${c}-gradient`,[o,...x]=d.split(",").map(hte).filter(Boolean);if((x==null?void 0:x.length)===0)return e;const S=o in ZP?ZP[o]:o;x.unshift(S);const k=x.map(O=>{if(Ate.has(O))return O;const Q=O.indexOf(" "),[G,K]=Q!==-1?[O.substr(0,Q),O.substr(Q+1)]:[O],ee=JP(K)?K:K&&K.split(" "),W=`colors.${G}`,J=W in t.__cssMap?t.__cssMap[W].varRef:G;return ee?[J,...Array.isArray(ee)?ee:[ee]].join(" "):J});return`${y}(${k.join(", ")})`}var JP=e=>typeof e=="string"&&e.includes("(")&&e.includes(")"),fte=(e,t)=>dte(e,t??{});function pte(e){return/^var\(--.+\)$/.test(e)}var mte=e=>{const t=parseFloat(e.toString()),r=e.toString().replace(String(t),"");return{unitless:!r,value:t,unit:r}},hu=e=>t=>`${e}(${t})`,Vn={filter(e){return e!=="auto"?e:ste},backdropFilter(e){return e!=="auto"?e:lte},ring(e){return cte(Vn.px(e))},bgClip(e){return e==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:e}},transform(e){return e==="auto"?ote():e==="auto-gpu"?ate():e},vh(e){return e==="$100vh"?"var(--chakra-vh)":e},px(e){if(e==null)return e;const{unitless:t}=mte(e);return t||typeof e=="number"?`${e}px`:e},fraction(e){return typeof e!="number"||e>1?e:`${e*100}%`},float(e,t){const r={left:"right",right:"left"};return t.direction==="rtl"?r[e]:e},degree(e){if(pte(e)||e==null)return e;const t=typeof e=="string"&&!e.endsWith("deg");return typeof e=="number"||t?`${e}deg`:e},gradient:fte,blur:hu("blur"),opacity:hu("opacity"),brightness:hu("brightness"),contrast:hu("contrast"),dropShadow:hu("drop-shadow"),grayscale:hu("grayscale"),hueRotate:e=>hu("hue-rotate")(Vn.degree(e)),invert:hu("invert"),saturate:hu("saturate"),sepia:hu("sepia"),bgImage(e){return e==null||JP(e)||YP.has(e)?e:`url(${e})`},outline(e){const t=String(e)==="0"||String(e)==="none";return e!==null&&t?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:e}},flexDirection(e){var t;const{space:r,divide:n}=(t=ute[e])!=null?t:{},i={flexDirection:e};return r&&(i[r]=1),n&&(i[n]=1),i}},ht={borderWidths:El("borderWidths"),borderStyles:El("borderStyles"),colors:El("colors"),borders:El("borders"),gradients:El("gradients",Vn.gradient),radii:El("radii",Vn.px),space:El("space",Bw(Vn.vh,Vn.px)),spaceT:El("space",Bw(Vn.vh,Vn.px)),degreeT(e){return{property:e,transform:Vn.degree}},prop(e,t,r){return{property:e,scale:t,...t&&{transform:Tk({scale:t,transform:r})}}},propT(e,t){return{property:e,transform:t}},sizes:El("sizes",Bw(Vn.vh,Vn.px)),sizesT:El("sizes",Bw(Vn.vh,Vn.fraction)),shadows:El("shadows"),logical:ite,blur:El("blur",Vn.blur)},NB={background:ht.colors("background"),backgroundColor:ht.colors("backgroundColor"),backgroundImage:ht.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:Vn.bgClip},bgSize:ht.prop("backgroundSize"),bgPosition:ht.prop("backgroundPosition"),bg:ht.colors("background"),bgColor:ht.colors("backgroundColor"),bgPos:ht.prop("backgroundPosition"),bgRepeat:ht.prop("backgroundRepeat"),bgAttachment:ht.prop("backgroundAttachment"),bgGradient:ht.gradients("backgroundImage"),bgClip:{transform:Vn.bgClip}};Object.assign(NB,{bgImage:NB.backgroundImage,bgImg:NB.backgroundImage});var ii={border:ht.borders("border"),borderWidth:ht.borderWidths("borderWidth"),borderStyle:ht.borderStyles("borderStyle"),borderColor:ht.colors("borderColor"),borderRadius:ht.radii("borderRadius"),borderTop:ht.borders("borderTop"),borderBlockStart:ht.borders("borderBlockStart"),borderTopLeftRadius:ht.radii("borderTopLeftRadius"),borderStartStartRadius:ht.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:ht.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:ht.radii("borderTopRightRadius"),borderStartEndRadius:ht.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:ht.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:ht.borders("borderRight"),borderInlineEnd:ht.borders("borderInlineEnd"),borderBottom:ht.borders("borderBottom"),borderBlockEnd:ht.borders("borderBlockEnd"),borderBottomLeftRadius:ht.radii("borderBottomLeftRadius"),borderBottomRightRadius:ht.radii("borderBottomRightRadius"),borderLeft:ht.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:ht.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:ht.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:ht.borders(["borderLeft","borderRight"]),borderInline:ht.borders("borderInline"),borderY:ht.borders(["borderTop","borderBottom"]),borderBlock:ht.borders("borderBlock"),borderTopWidth:ht.borderWidths("borderTopWidth"),borderBlockStartWidth:ht.borderWidths("borderBlockStartWidth"),borderTopColor:ht.colors("borderTopColor"),borderBlockStartColor:ht.colors("borderBlockStartColor"),borderTopStyle:ht.borderStyles("borderTopStyle"),borderBlockStartStyle:ht.borderStyles("borderBlockStartStyle"),borderBottomWidth:ht.borderWidths("borderBottomWidth"),borderBlockEndWidth:ht.borderWidths("borderBlockEndWidth"),borderBottomColor:ht.colors("borderBottomColor"),borderBlockEndColor:ht.colors("borderBlockEndColor"),borderBottomStyle:ht.borderStyles("borderBottomStyle"),borderBlockEndStyle:ht.borderStyles("borderBlockEndStyle"),borderLeftWidth:ht.borderWidths("borderLeftWidth"),borderInlineStartWidth:ht.borderWidths("borderInlineStartWidth"),borderLeftColor:ht.colors("borderLeftColor"),borderInlineStartColor:ht.colors("borderInlineStartColor"),borderLeftStyle:ht.borderStyles("borderLeftStyle"),borderInlineStartStyle:ht.borderStyles("borderInlineStartStyle"),borderRightWidth:ht.borderWidths("borderRightWidth"),borderInlineEndWidth:ht.borderWidths("borderInlineEndWidth"),borderRightColor:ht.colors("borderRightColor"),borderInlineEndColor:ht.colors("borderInlineEndColor"),borderRightStyle:ht.borderStyles("borderRightStyle"),borderInlineEndStyle:ht.borderStyles("borderInlineEndStyle"),borderTopRadius:ht.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:ht.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:ht.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:ht.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(ii,{rounded:ii.borderRadius,roundedTop:ii.borderTopRadius,roundedTopLeft:ii.borderTopLeftRadius,roundedTopRight:ii.borderTopRightRadius,roundedTopStart:ii.borderStartStartRadius,roundedTopEnd:ii.borderStartEndRadius,roundedBottom:ii.borderBottomRadius,roundedBottomLeft:ii.borderBottomLeftRadius,roundedBottomRight:ii.borderBottomRightRadius,roundedBottomStart:ii.borderEndStartRadius,roundedBottomEnd:ii.borderEndEndRadius,roundedLeft:ii.borderLeftRadius,roundedRight:ii.borderRightRadius,roundedStart:ii.borderInlineStartRadius,roundedEnd:ii.borderInlineEndRadius,borderStart:ii.borderInlineStart,borderEnd:ii.borderInlineEnd,borderTopStartRadius:ii.borderStartStartRadius,borderTopEndRadius:ii.borderStartEndRadius,borderBottomStartRadius:ii.borderEndStartRadius,borderBottomEndRadius:ii.borderEndEndRadius,borderStartRadius:ii.borderInlineStartRadius,borderEndRadius:ii.borderInlineEndRadius,borderStartWidth:ii.borderInlineStartWidth,borderEndWidth:ii.borderInlineEndWidth,borderStartColor:ii.borderInlineStartColor,borderEndColor:ii.borderInlineEndColor,borderStartStyle:ii.borderInlineStartStyle,borderEndStyle:ii.borderInlineEndStyle});var gte={color:ht.colors("color"),textColor:ht.colors("color"),fill:ht.colors("fill"),stroke:ht.colors("stroke")},$P={boxShadow:ht.shadows("boxShadow"),mixBlendMode:!0,blendMode:ht.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:ht.prop("backgroundBlendMode"),opacity:!0};Object.assign($P,{shadow:$P.boxShadow});var vte={filter:{transform:Vn.filter},blur:ht.blur("--chakra-blur"),brightness:ht.propT("--chakra-brightness",Vn.brightness),contrast:ht.propT("--chakra-contrast",Vn.contrast),hueRotate:ht.propT("--chakra-hue-rotate",Vn.hueRotate),invert:ht.propT("--chakra-invert",Vn.invert),saturate:ht.propT("--chakra-saturate",Vn.saturate),dropShadow:ht.propT("--chakra-drop-shadow",Vn.dropShadow),backdropFilter:{transform:Vn.backdropFilter},backdropBlur:ht.blur("--chakra-backdrop-blur"),backdropBrightness:ht.propT("--chakra-backdrop-brightness",Vn.brightness),backdropContrast:ht.propT("--chakra-backdrop-contrast",Vn.contrast),backdropHueRotate:ht.propT("--chakra-backdrop-hue-rotate",Vn.hueRotate),backdropInvert:ht.propT("--chakra-backdrop-invert",Vn.invert),backdropSaturate:ht.propT("--chakra-backdrop-saturate",Vn.saturate)},jC={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:Vn.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:ht.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:ht.space("gap"),rowGap:ht.space("rowGap"),columnGap:ht.space("columnGap")};Object.assign(jC,{flexDir:jC.flexDirection});var ej={gridGap:ht.space("gridGap"),gridColumnGap:ht.space("gridColumnGap"),gridRowGap:ht.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},yte={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:Vn.outline},outlineOffset:!0,outlineColor:ht.colors("outlineColor")},Dl={width:ht.sizesT("width"),inlineSize:ht.sizesT("inlineSize"),height:ht.sizes("height"),blockSize:ht.sizes("blockSize"),boxSize:ht.sizes(["width","height"]),minWidth:ht.sizes("minWidth"),minInlineSize:ht.sizes("minInlineSize"),minHeight:ht.sizes("minHeight"),minBlockSize:ht.sizes("minBlockSize"),maxWidth:ht.sizes("maxWidth"),maxInlineSize:ht.sizes("maxInlineSize"),maxHeight:ht.sizes("maxHeight"),maxBlockSize:ht.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(e,t)=>{var r,n,i;return{[`@media screen and (min-width: ${(i=(n=(r=t.__breakpoints)==null?void 0:r.get(e))==null?void 0:n.minW)!=null?i:e})`]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(e,t)=>{var r,n,i;return{[`@media screen and (max-width: ${(i=(n=(r=t.__breakpoints)==null?void 0:r.get(e))==null?void 0:n._minW)!=null?i:e})`]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:ht.propT("float",Vn.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(Dl,{w:Dl.width,h:Dl.height,minW:Dl.minWidth,maxW:Dl.maxWidth,minH:Dl.minHeight,maxH:Dl.maxHeight,overscroll:Dl.overscrollBehavior,overscrollX:Dl.overscrollBehaviorX,overscrollY:Dl.overscrollBehaviorY});var _te={listStyleType:!0,listStylePosition:!0,listStylePos:ht.prop("listStylePosition"),listStyleImage:!0,listStyleImg:ht.prop("listStyleImage")};function xte(e,t,r,n){const i=typeof t=="string"?t.split("."):[t];for(n=0;n<i.length&&e;n+=1)e=e[i[n]];return e===void 0?r:e}var bte=e=>{const t=new WeakMap;return(n,i,c,d)=>{if(typeof n>"u")return e(n,i,c);t.has(n)||t.set(n,new Map);const y=t.get(n);if(y.has(i))return y.get(i);const o=e(n,i,c,d);return y.set(i,o),o}},wte=bte(xte),Bte={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},Cte={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},MI=(e,t,r)=>{const n={},i=wte(e,t,{});for(const c in i)c in r&&r[c]!=null||(n[c]=i[c]);return n},Ste={srOnly:{transform(e){return e===!0?Bte:e==="focusable"?Cte:{}}},layerStyle:{processResult:!0,transform:(e,t,r)=>MI(t,`layerStyles.${e}`,r)},textStyle:{processResult:!0,transform:(e,t,r)=>MI(t,`textStyles.${e}`,r)},apply:{processResult:!0,transform:(e,t,r)=>MI(t,e,r)}},b_={position:!0,pos:ht.prop("position"),zIndex:ht.prop("zIndex","zIndices"),inset:ht.spaceT("inset"),insetX:ht.spaceT(["left","right"]),insetInline:ht.spaceT("insetInline"),insetY:ht.spaceT(["top","bottom"]),insetBlock:ht.spaceT("insetBlock"),top:ht.spaceT("top"),insetBlockStart:ht.spaceT("insetBlockStart"),bottom:ht.spaceT("bottom"),insetBlockEnd:ht.spaceT("insetBlockEnd"),left:ht.spaceT("left"),insetInlineStart:ht.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:ht.spaceT("right"),insetInlineEnd:ht.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(b_,{insetStart:b_.insetInlineStart,insetEnd:b_.insetInlineEnd});var Ete={ring:{transform:Vn.ring},ringColor:ht.colors("--chakra-ring-color"),ringOffset:ht.prop("--chakra-ring-offset-width"),ringOffsetColor:ht.colors("--chakra-ring-offset-color"),ringInset:ht.prop("--chakra-ring-inset")},Ni={margin:ht.spaceT("margin"),marginTop:ht.spaceT("marginTop"),marginBlockStart:ht.spaceT("marginBlockStart"),marginRight:ht.spaceT("marginRight"),marginInlineEnd:ht.spaceT("marginInlineEnd"),marginBottom:ht.spaceT("marginBottom"),marginBlockEnd:ht.spaceT("marginBlockEnd"),marginLeft:ht.spaceT("marginLeft"),marginInlineStart:ht.spaceT("marginInlineStart"),marginX:ht.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:ht.spaceT("marginInline"),marginY:ht.spaceT(["marginTop","marginBottom"]),marginBlock:ht.spaceT("marginBlock"),padding:ht.space("padding"),paddingTop:ht.space("paddingTop"),paddingBlockStart:ht.space("paddingBlockStart"),paddingRight:ht.space("paddingRight"),paddingBottom:ht.space("paddingBottom"),paddingBlockEnd:ht.space("paddingBlockEnd"),paddingLeft:ht.space("paddingLeft"),paddingInlineStart:ht.space("paddingInlineStart"),paddingInlineEnd:ht.space("paddingInlineEnd"),paddingX:ht.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:ht.space("paddingInline"),paddingY:ht.space(["paddingTop","paddingBottom"]),paddingBlock:ht.space("paddingBlock")};Object.assign(Ni,{m:Ni.margin,mt:Ni.marginTop,mr:Ni.marginRight,me:Ni.marginInlineEnd,marginEnd:Ni.marginInlineEnd,mb:Ni.marginBottom,ml:Ni.marginLeft,ms:Ni.marginInlineStart,marginStart:Ni.marginInlineStart,mx:Ni.marginX,my:Ni.marginY,p:Ni.padding,pt:Ni.paddingTop,py:Ni.paddingY,px:Ni.paddingX,pb:Ni.paddingBottom,pl:Ni.paddingLeft,ps:Ni.paddingInlineStart,paddingStart:Ni.paddingInlineStart,pr:Ni.paddingRight,pe:Ni.paddingInlineEnd,paddingEnd:Ni.paddingInlineEnd});var Tte={textDecorationColor:ht.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:ht.shadows("textShadow")},Fte={clipPath:!0,transform:ht.propT("transform",Vn.transform),transformOrigin:!0,translateX:ht.spaceT("--chakra-translate-x"),translateY:ht.spaceT("--chakra-translate-y"),skewX:ht.degreeT("--chakra-skew-x"),skewY:ht.degreeT("--chakra-skew-y"),scaleX:ht.prop("--chakra-scale-x"),scaleY:ht.prop("--chakra-scale-y"),scale:ht.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:ht.degreeT("--chakra-rotate")},Ite={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:ht.prop("transitionDuration","transition.duration"),transitionProperty:ht.prop("transitionProperty","transition.property"),transitionTimingFunction:ht.prop("transitionTimingFunction","transition.easing")},Mte={fontFamily:ht.prop("fontFamily","fonts"),fontSize:ht.prop("fontSize","fontSizes",Vn.px),fontWeight:ht.prop("fontWeight","fontWeights"),lineHeight:ht.prop("lineHeight","lineHeights"),letterSpacing:ht.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(e){if(e===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},Pte={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:ht.spaceT("scrollMargin"),scrollMarginTop:ht.spaceT("scrollMarginTop"),scrollMarginBottom:ht.spaceT("scrollMarginBottom"),scrollMarginLeft:ht.spaceT("scrollMarginLeft"),scrollMarginRight:ht.spaceT("scrollMarginRight"),scrollMarginX:ht.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:ht.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:ht.spaceT("scrollPadding"),scrollPaddingTop:ht.spaceT("scrollPaddingTop"),scrollPaddingBottom:ht.spaceT("scrollPaddingBottom"),scrollPaddingLeft:ht.spaceT("scrollPaddingLeft"),scrollPaddingRight:ht.spaceT("scrollPaddingRight"),scrollPaddingX:ht.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:ht.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function tj(e){return nl(e)&&e.reference?e.reference:String(e)}var yE=(e,...t)=>t.map(tj).join(` ${e} `).replace(/calc/g,""),rz=(...e)=>`calc(${yE("+",...e)})`,nz=(...e)=>`calc(${yE("-",...e)})`,e4=(...e)=>`calc(${yE("*",...e)})`,iz=(...e)=>`calc(${yE("/",...e)})`,oz=e=>{const t=tj(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:e4(t,-1)},Gf=Object.assign(e=>({add:(...t)=>Gf(rz(e,...t)),subtract:(...t)=>Gf(nz(e,...t)),multiply:(...t)=>Gf(e4(e,...t)),divide:(...t)=>Gf(iz(e,...t)),negate:()=>Gf(oz(e)),toString:()=>e.toString()}),{add:rz,subtract:nz,multiply:e4,divide:iz,negate:oz});function Dte(e,t="-"){return e.replace(/\s+/g,t)}function kte(e){const t=Dte(e.toString());return Lte(Rte(t))}function Rte(e){return e.includes("\\.")?e:!Number.isInteger(parseFloat(e.toString()))?e.replace(".","\\."):e}function Lte(e){return e.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}function Ote(e,t=""){return[t,e].filter(Boolean).join("-")}function Ute(e,t){return`var(${e}${t?`, ${t}`:""})`}function zte(e,t=""){return kte(`--${Ote(e,t)}`)}function Gr(e,t,r){const n=zte(e,r);return{variable:n,reference:Ute(n,t)}}function Qte(e,t){const r={};for(const n of t){if(Array.isArray(n)){const[i,c]=n;r[i]=Gr(`${e}-${i}`,c);continue}r[n]=Gr(`${e}-${n}`)}return r}function Nte(e){const t=e==null?0:e.length;return t?e[t-1]:void 0}function Vte(e){const t=parseFloat(e.toString()),r=e.toString().replace(String(t),"");return{unitless:!r,value:t,unit:r}}function t4(e){if(e==null)return e;const{unitless:t}=Vte(e);return t||typeof e=="number"?`${e}px`:e}var rj=(e,t)=>parseInt(e[1],10)>parseInt(t[1],10)?1:-1,Fk=e=>Object.fromEntries(Object.entries(e).sort(rj));function az(e){const t=Fk(e);return Object.assign(Object.values(t),t)}function Hte(e){const t=Object.keys(Fk(e));return new Set(t)}function sz(e){var t;if(!e)return e;e=(t=t4(e))!=null?t:e;const r=-.02;return typeof e=="number"?`${e+r}`:e.replace(/(\d+\.?\d*)/u,n=>`${parseFloat(n)+r}`)}function Gy(e,t){const r=["@media screen"];return e&&r.push("and",`(min-width: ${t4(e)})`),t&&r.push("and",`(max-width: ${t4(t)})`),r.join(" ")}function jte(e){var t;if(!e)return null;e.base=(t=e.base)!=null?t:"0px";const r=az(e),n=Object.entries(e).sort(rj).map(([d,y],o,x)=>{var S;let[,k]=(S=x[o+1])!=null?S:[];return k=parseFloat(k)>0?sz(k):void 0,{_minW:sz(y),breakpoint:d,minW:y,maxW:k,maxWQuery:Gy(null,k),minWQuery:Gy(y),minMaxQuery:Gy(y,k)}}),i=Hte(e),c=Array.from(i.values());return{keys:i,normalized:r,isResponsive(d){const y=Object.keys(d);return y.length>0&&y.every(o=>i.has(o))},asObject:Fk(e),asArray:az(e),details:n,get(d){return n.find(y=>y.breakpoint===d)},media:[null,...r.map(d=>Gy(d)).slice(1)],toArrayValue(d){if(!nl(d))throw new Error("toArrayValue: value must be an object");const y=c.map(o=>{var x;return(x=d[o])!=null?x:null});for(;Nte(y)===null;)y.pop();return y},toObjectValue(d){if(!Array.isArray(d))throw new Error("toObjectValue: value must be an array");return d.reduce((y,o,x)=>{const S=c[x];return S!=null&&o!=null&&(y[S]=o),y},{})}}}var da={hover:(e,t)=>`${e}:hover ${t}, ${e}[data-hover] ${t}`,focus:(e,t)=>`${e}:focus ${t}, ${e}[data-focus] ${t}`,focusVisible:(e,t)=>`${e}:focus-visible ${t}`,focusWithin:(e,t)=>`${e}:focus-within ${t}`,active:(e,t)=>`${e}:active ${t}, ${e}[data-active] ${t}`,disabled:(e,t)=>`${e}:disabled ${t}, ${e}[data-disabled] ${t}`,invalid:(e,t)=>`${e}:invalid ${t}, ${e}[data-invalid] ${t}`,checked:(e,t)=>`${e}:checked ${t}, ${e}[data-checked] ${t}`,indeterminate:(e,t)=>`${e}:indeterminate ${t}, ${e}[aria-checked=mixed] ${t}, ${e}[data-indeterminate] ${t}`,readOnly:(e,t)=>`${e}:read-only ${t}, ${e}[readonly] ${t}, ${e}[data-read-only] ${t}`,expanded:(e,t)=>`${e}:read-only ${t}, ${e}[aria-expanded=true] ${t}, ${e}[data-expanded] ${t}`,placeholderShown:(e,t)=>`${e}:placeholder-shown ${t}`},zh=e=>nj(t=>e(t,"&"),"[role=group]","[data-group]",".group"),sA=e=>nj(t=>e(t,"~ &"),"[data-peer]",".peer"),nj=(e,...t)=>t.map(e).join(", "),_E={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:zh(da.hover),_peerHover:sA(da.hover),_groupFocus:zh(da.focus),_peerFocus:sA(da.focus),_groupFocusVisible:zh(da.focusVisible),_peerFocusVisible:sA(da.focusVisible),_groupActive:zh(da.active),_peerActive:sA(da.active),_groupDisabled:zh(da.disabled),_peerDisabled:sA(da.disabled),_groupInvalid:zh(da.invalid),_peerInvalid:sA(da.invalid),_groupChecked:zh(da.checked),_peerChecked:sA(da.checked),_groupFocusWithin:zh(da.focusWithin),_peerFocusWithin:sA(da.focusWithin),_peerPlaceholderShown:sA(da.placeholderShown),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]"},ij=Object.keys(_E);function lz(e,t){return Gr(String(e).replace(/\./g,"-"),void 0,t)}function Gte(e,t){let r={};const n={};for(const[i,c]of Object.entries(e)){const{isSemantic:d,value:y}=c,{variable:o,reference:x}=lz(i,t==null?void 0:t.cssVarPrefix);if(!d){if(i.startsWith("space")){const O=i.split("."),[Q,...G]=O,K=`${Q}.-${G.join(".")}`,ee=Gf.negate(y),W=Gf.negate(x);n[K]={value:ee,var:o,varRef:W}}r[o]=y,n[i]={value:y,var:o,varRef:x};continue}const S=O=>{const G=[String(i).split(".")[0],O].join(".");if(!e[G])return O;const{reference:ee}=lz(G,t==null?void 0:t.cssVarPrefix);return ee},k=nl(y)?y:{default:y};r=Su(r,Object.entries(k).reduce((O,[Q,G])=>{var K,ee;if(!G)return O;const W=S(`${G}`);if(Q==="default")return O[o]=W,O;const J=(ee=(K=_E)==null?void 0:K[Q])!=null?ee:Q;return O[J]={[o]:W},O},{})),n[i]={value:x,var:o,varRef:x}}return{cssVars:r,cssMap:n}}function Kte(e,t=[]){const r=Object.assign({},e);for(const n of t)n in r&&delete r[n];return r}function Wte(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function qte(e){return typeof e=="object"&&e!=null&&!Array.isArray(e)}function cz(e,t,r={}){const{stop:n,getKey:i}=r;function c(d,y=[]){var o;if(qte(d)||Array.isArray(d)){const x={};for(const[S,k]of Object.entries(d)){const O=(o=i==null?void 0:i(S))!=null?o:S,Q=[...y,O];if(n!=null&&n(d,Q))return t(d,y);x[O]=c(k,Q)}return x}return t(d,y)}return c(e)}var Xte=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function Zte(e){return Wte(e,Xte)}function Yte(e){return e.semanticTokens}function Jte(e){const{__cssMap:t,__cssVars:r,__breakpoints:n,...i}=e;return i}var $te=e=>ij.includes(e)||e==="default";function ere({tokens:e,semanticTokens:t}){const r={};return cz(e,(n,i)=>{n!=null&&(r[i.join(".")]={isSemantic:!1,value:n})}),cz(t,(n,i)=>{n!=null&&(r[i.join(".")]={isSemantic:!0,value:n})},{stop:n=>Object.keys(n).every($te)}),r}function tre(e){var t;const r=Jte(e),n=Zte(r),i=Yte(r),c=ere({tokens:n,semanticTokens:i}),d=(t=r.config)==null?void 0:t.cssVarPrefix,{cssMap:y,cssVars:o}=Gte(c,{cssVarPrefix:d});return Object.assign(r,{__cssVars:{...{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"},...o},__cssMap:y,__breakpoints:jte(r.breakpoints)}),r}var Ik=Su({},NB,ii,gte,jC,Dl,vte,Ete,yte,ej,Ste,b_,$P,Ni,Pte,Mte,Tte,Fte,_te,Ite);Object.assign({},Ni,Dl,jC,ej,b_);var rre=[...Object.keys(Ik),...ij],nre={...Ik,..._E},ire=e=>e in nre,ore=e=>t=>{if(!t.__breakpoints)return e;const{isResponsive:r,toArrayValue:n,media:i}=t.__breakpoints,c={};for(const d in e){let y=_A(e[d],t);if(y==null)continue;if(y=nl(y)&&r(y)?n(y):y,!Array.isArray(y)){c[d]=y;continue}const o=y.slice(0,i.length).length;for(let x=0;x<o;x+=1){const S=i==null?void 0:i[x];if(!S){c[d]=y[x];continue}c[S]=c[S]||{},y[x]!=null&&(c[S][d]=y[x])}}return c};function are(e){const t=[];let r="",n=!1;for(let i=0;i<e.length;i++){const c=e[i];c==="("?(n=!0,r+=c):c===")"?(n=!1,r+=c):c===","&&!n?(t.push(r),r=""):r+=c}return r=r.trim(),r&&t.push(r),t}function sre(e){return/^var\(--.+\)$/.test(e)}var lre=(e,t)=>e.startsWith("--")&&typeof t=="string"&&!sre(t),cre=(e,t)=>{var r,n;if(t==null)return t;const i=o=>{var x,S;return(S=(x=e.__cssMap)==null?void 0:x[o])==null?void 0:S.varRef},c=o=>{var x;return(x=i(o))!=null?x:o},[d,y]=are(t);return t=(n=(r=i(d))!=null?r:c(y))!=null?n:c(t),t};function ure(e){const{configs:t={},pseudos:r={},theme:n}=e,i=(c,d=!1)=>{var y,o,x;const S=_A(c,n),k=ore(S)(n);let O={};for(let Q in k){const G=k[Q];let K=_A(G,n);Q in r&&(Q=r[Q]),lre(Q,K)&&(K=cre(n,K));let ee=t[Q];if(ee===!0&&(ee={property:Q}),nl(K)){O[Q]=(y=O[Q])!=null?y:{},O[Q]=Su({},O[Q],i(K,!0));continue}let W=(x=(o=ee==null?void 0:ee.transform)==null?void 0:o.call(ee,K,n,S))!=null?x:K;W=ee!=null&&ee.processResult?i(W,!0):W;const J=_A(ee==null?void 0:ee.property,n);if(!d&&(ee!=null&&ee.static)){const re=_A(ee.static,n);O=Su({},O,re)}if(J&&Array.isArray(J)){for(const re of J)O[re]=W;continue}if(J){J==="&"&&nl(W)?O=Su({},O,W):O[J]=W;continue}if(nl(W)){O=Su({},O,W);continue}O[Q]=W}return O};return i}var oj=e=>t=>ure({theme:t,pseudos:_E,configs:Ik})(e);function Oi(e){return{definePartsStyle(t){return t},defineMultiStyleConfig(t){return{parts:e,...t}}}}function Are(e,t){if(Array.isArray(e))return e;if(nl(e))return t(e);if(e!=null)return[e]}function hre(e,t){for(let r=t+1;r<e.length;r++)if(e[r]!=null)return r;return-1}function dre(e){const t=e.__breakpoints;return function(n,i,c,d){var y,o;if(!t)return;const x={},S=Are(c,t.toArrayValue);if(!S)return x;const k=S.length,O=k===1,Q=!!n.parts;for(let G=0;G<k;G++){const K=t.details[G],ee=t.details[hre(S,G)],W=Gy(K.minW,ee==null?void 0:ee._minW),J=_A((y=n[i])==null?void 0:y[S[G]],d);if(J){if(Q){(o=n.parts)==null||o.forEach(re=>{Su(x,{[re]:O?J[re]:{[W]:J[re]}})});continue}if(!Q){O?Su(x,J):x[W]=J;continue}x[W]=J}}return x}}function fre(e){return t=>{var r;const{variant:n,size:i,theme:c}=t,d=dre(c);return Su({},_A((r=e.baseStyle)!=null?r:{},t),d(e,"sizes",i,t),d(e,"variants",n,t))}}function nc(e){return Kte(e,["styleConfig","size","variant","colorScheme"])}var pre={common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},mre={"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},gre={"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},vre={property:pre,easing:mre,duration:gre},yre=vre,_re={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},xre=_re,bre={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},wre=bre,Bre={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},Cre=Bre,Sre={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},Ere=Sre,Tre={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},Fre=Tre,Ire={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},Mre=Ire,Pre={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},Dre=Pre,kre={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},aj=kre,sj={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},Rre={max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch"},Lre={sm:"640px",md:"768px",lg:"1024px",xl:"1280px"},Ore={...sj,...Rre,container:Lre},lj=Ore,Ure={breakpoints:Cre,zIndices:xre,radii:Fre,blur:Dre,colors:Ere,...aj,sizes:lj,shadows:Mre,space:sj,borders:wre,transition:yre},{defineMultiStyleConfig:zre,definePartsStyle:Ky}=Oi(["stepper","step","title","description","indicator","separator","icon","number"]),mA=Gr("stepper-indicator-size"),yg=Gr("stepper-icon-size"),_g=Gr("stepper-title-font-size"),Wy=Gr("stepper-description-font-size"),xy=Gr("stepper-accent-color"),Qre=Ky(({colorScheme:e})=>({stepper:{display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"},[xy.variable]:`colors.${e}.500`,_dark:{[xy.variable]:`colors.${e}.200`}},title:{fontSize:_g.reference,fontWeight:"medium"},description:{fontSize:Wy.reference,color:"chakra-subtle-text"},number:{fontSize:_g.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:yg.reference,height:yg.reference},indicator:{flexShrink:0,borderRadius:"full",width:mA.reference,height:mA.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:xy.reference},"&[data-status=complete]":{bg:xy.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:xy.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:`calc(100% - ${mA.reference} - 8px)`,top:`calc(${mA.reference} + 4px)`,insetStart:`calc(${mA.reference} / 2 - 1px)`}}})),Nre=zre({baseStyle:Qre,sizes:{xs:Ky({stepper:{[mA.variable]:"sizes.4",[yg.variable]:"sizes.3",[_g.variable]:"fontSizes.xs",[Wy.variable]:"fontSizes.xs"}}),sm:Ky({stepper:{[mA.variable]:"sizes.6",[yg.variable]:"sizes.4",[_g.variable]:"fontSizes.sm",[Wy.variable]:"fontSizes.xs"}}),md:Ky({stepper:{[mA.variable]:"sizes.8",[yg.variable]:"sizes.5",[_g.variable]:"fontSizes.md",[Wy.variable]:"fontSizes.sm"}}),lg:Ky({stepper:{[mA.variable]:"sizes.10",[yg.variable]:"sizes.6",[_g.variable]:"fontSizes.lg",[Wy.variable]:"fontSizes.md"}})},defaultProps:{size:"md",colorScheme:"blue"}});function hi(e,t={}){let r=!1;function n(){if(!r){r=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}function i(...S){n();for(const k of S)t[k]=o(k);return hi(e,t)}function c(...S){for(const k of S)k in t||(t[k]=o(k));return hi(e,t)}function d(){return Object.fromEntries(Object.entries(t).map(([k,O])=>[k,O.selector]))}function y(){return Object.fromEntries(Object.entries(t).map(([k,O])=>[k,O.className]))}function o(S){const Q=`chakra-${(["container","root"].includes(S??"")?[e]:[e,S]).filter(Boolean).join("__")}`;return{className:Q,selector:`.${Q}`,toString:()=>S}}return{parts:i,toPart:o,extend:c,selectors:d,classnames:y,get keys(){return Object.keys(t)},__type:{}}}var Vre=hi("accordion").parts("root","container","button","panel").extend("icon"),Hre=hi("alert").parts("title","description","container").extend("icon","spinner"),jre=hi("avatar").parts("label","badge","container").extend("excessLabel","group"),Gre=hi("breadcrumb").parts("link","item","container").extend("separator");hi("button").parts();var Kre=hi("checkbox").parts("control","icon","container").extend("label");hi("progress").parts("track","filledTrack").extend("label");var Wre=hi("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),qre=hi("editable").parts("preview","input","textarea"),Xre=hi("form").parts("container","requiredIndicator","helperText"),Zre=hi("formError").parts("text","icon"),Yre=hi("input").parts("addon","field","element","group"),Jre=hi("list").parts("container","item","icon"),$re=hi("menu").parts("button","list","item").extend("groupTitle","icon","command","divider"),ene=hi("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),tne=hi("numberinput").parts("root","field","stepperGroup","stepper");hi("pininput").parts("field");var rne=hi("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton"),nne=hi("progress").parts("label","filledTrack","track"),ine=hi("radio").parts("container","control","label"),one=hi("select").parts("field","icon"),ane=hi("slider").parts("container","track","thumb","filledTrack","mark"),sne=hi("stat").parts("container","label","helpText","number","icon"),lne=hi("switch").parts("container","track","thumb","label"),cne=hi("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),une=hi("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),Ane=hi("tag").parts("container","label","closeButton"),hne=hi("card").parts("container","header","body","footer");hi("stepper").parts("stepper","step","title","description","indicator","separator","icon","number");function Jf(e,t,r){return Math.min(Math.max(e,r),t)}class dne extends Error{constructor(t){super(`Failed to parse color: "${t}"`)}}var qy=dne;function Mk(e){if(typeof e!="string")throw new qy(e);if(e.trim().toLowerCase()==="transparent")return[0,0,0,0];let t=e.trim();t=xne.test(e)?mne(e):e;const r=gne.exec(t);if(r){const d=Array.from(r).slice(1);return[...d.slice(0,3).map(y=>parseInt(g1(y,2),16)),parseInt(g1(d[3]||"f",2),16)/255]}const n=vne.exec(t);if(n){const d=Array.from(n).slice(1);return[...d.slice(0,3).map(y=>parseInt(y,16)),parseInt(d[3]||"ff",16)/255]}const i=yne.exec(t);if(i){const d=Array.from(i).slice(1);return[...d.slice(0,3).map(y=>parseInt(y,10)),parseFloat(d[3]||"1")]}const c=_ne.exec(t);if(c){const[d,y,o,x]=Array.from(c).slice(1).map(parseFloat);if(Jf(0,100,y)!==y)throw new qy(e);if(Jf(0,100,o)!==o)throw new qy(e);return[...bne(d,y,o),Number.isNaN(x)?1:x]}throw new qy(e)}function fne(e){let t=5381,r=e.length;for(;r;)t=t*33^e.charCodeAt(--r);return(t>>>0)%2341}const uz=e=>parseInt(e.replace(/_/g,""),36),pne="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((e,t)=>{const r=uz(t.substring(0,3)),n=uz(t.substring(3)).toString(16);let i="";for(let c=0;c<6-n.length;c++)i+="0";return e[r]=`${i}${n}`,e},{});function mne(e){const t=e.toLowerCase().trim(),r=pne[fne(t)];if(!r)throw new qy(e);return`#${r}`}const g1=(e,t)=>Array.from(Array(t)).map(()=>e).join(""),gne=new RegExp(`^#${g1("([a-f0-9])",3)}([a-f0-9])?$`,"i"),vne=new RegExp(`^#${g1("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),yne=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${g1(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),_ne=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,xne=/^[a-z]+$/i,Az=e=>Math.round(e*255),bne=(e,t,r)=>{let n=r/100;if(t===0)return[n,n,n].map(Az);const i=(e%360+360)%360/60,c=(1-Math.abs(2*n-1))*(t/100),d=c*(1-Math.abs(i%2-1));let y=0,o=0,x=0;i>=0&&i<1?(y=c,o=d):i>=1&&i<2?(y=d,o=c):i>=2&&i<3?(o=c,x=d):i>=3&&i<4?(o=d,x=c):i>=4&&i<5?(y=d,x=c):i>=5&&i<6&&(y=c,x=d);const S=n-c/2,k=y+S,O=o+S,Q=x+S;return[k,O,Q].map(Az)};function wne(e,t,r,n){return`rgba(${Jf(0,255,e).toFixed()}, ${Jf(0,255,t).toFixed()}, ${Jf(0,255,r).toFixed()}, ${parseFloat(Jf(0,1,n).toFixed(3))})`}function Bne(e,t){const[r,n,i,c]=Mk(e);return wne(r,n,i,c-t)}function Cne(e){const[t,r,n,i]=Mk(e);let c=d=>{const y=Jf(0,255,d).toString(16);return y.length===1?`0${y}`:y};return`#${c(t)}${c(r)}${c(n)}${i<1?c(Math.round(i*255)):""}`}function Sne(e,t,r,n,i){for(t=t.split?t.split("."):t,n=0;n<t.length;n++)e=e?e[t[n]]:i;return e===i?r:e}var Ene=e=>Object.keys(e).length===0,cs=(e,t,r)=>{const n=Sne(e,`colors.${t}`,t);try{return Cne(n),n}catch{return r??"#000000"}},Tne=e=>{const[t,r,n]=Mk(e);return(t*299+r*587+n*114)/1e3},Fne=e=>t=>{const r=cs(t,e);return Tne(r)<128?"dark":"light"},Ine=e=>t=>Fne(e)(t)==="dark",s0=(e,t)=>r=>{const n=cs(r,e);return Bne(n,1-t)};function hz(e="1rem",t="rgba(255, 255, 255, 0.15)"){return{backgroundImage:`linear-gradient(
    45deg,
    ${t} 25%,
    transparent 25%,
    transparent 50%,
    ${t} 50%,
    ${t} 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:`${e} ${e}`}}var Mne=()=>`#${Math.floor(Math.random()*16777215).toString(16).padEnd(6,"0")}`;function Pne(e){const t=Mne();return!e||Ene(e)?t:e.string&&e.colors?kne(e.string,e.colors):e.string&&!e.colors?Dne(e.string):e.colors&&!e.string?Rne(e.colors):t}function Dne(e){let t=0;if(e.length===0)return t.toString();for(let n=0;n<e.length;n+=1)t=e.charCodeAt(n)+((t<<5)-t),t=t&t;let r="#";for(let n=0;n<3;n+=1){const i=t>>n*8&255;r+=`00${i.toString(16)}`.substr(-2)}return r}function kne(e,t){let r=0;if(e.length===0)return t[0];for(let n=0;n<e.length;n+=1)r=e.charCodeAt(n)+((r<<5)-r),r=r&r;return r=(r%t.length+t.length)%t.length,t[r]}function Rne(e){return e[Math.floor(Math.random()*e.length)]}function jr(e,t){return r=>r.colorMode==="dark"?t:e}function Pk(e){const{orientation:t,vertical:r,horizontal:n}=e;return t?t==="vertical"?r:n:{}}function cj(e){return nl(e)&&e.reference?e.reference:String(e)}var xE=(e,...t)=>t.map(cj).join(` ${e} `).replace(/calc/g,""),dz=(...e)=>`calc(${xE("+",...e)})`,fz=(...e)=>`calc(${xE("-",...e)})`,r4=(...e)=>`calc(${xE("*",...e)})`,pz=(...e)=>`calc(${xE("/",...e)})`,mz=e=>{const t=cj(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:r4(t,-1)},gA=Object.assign(e=>({add:(...t)=>gA(dz(e,...t)),subtract:(...t)=>gA(fz(e,...t)),multiply:(...t)=>gA(r4(e,...t)),divide:(...t)=>gA(pz(e,...t)),negate:()=>gA(mz(e)),toString:()=>e.toString()}),{add:dz,subtract:fz,multiply:r4,divide:pz,negate:mz});function Lne(e){return!Number.isInteger(parseFloat(e.toString()))}function One(e,t="-"){return e.replace(/\s+/g,t)}function uj(e){const t=One(e.toString());return t.includes("\\.")?e:Lne(e)?t.replace(".","\\."):e}function Une(e,t=""){return[t,uj(e)].filter(Boolean).join("-")}function zne(e,t){return`var(${uj(e)}${t?`, ${t}`:""})`}function Qne(e,t=""){return`--${Une(e,t)}`}function Ko(e,t){const r=Qne(e,void 0);return{variable:r,reference:zne(r,Nne(void 0))}}function Nne(e){return typeof e=="string"?e:e==null?void 0:e.reference}var{defineMultiStyleConfig:Vne,definePartsStyle:VB}=Oi(lne.keys),w_=Ko("switch-track-width"),op=Ko("switch-track-height"),PI=Ko("switch-track-diff"),Hne=gA.subtract(w_,op),n4=Ko("switch-thumb-x"),by=Ko("switch-bg"),jne=e=>{const{colorScheme:t}=e;return{borderRadius:"full",p:"0.5",width:[w_.reference],height:[op.reference],transitionProperty:"common",transitionDuration:"fast",[by.variable]:"colors.gray.300",_dark:{[by.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[by.variable]:`colors.${t}.500`,_dark:{[by.variable]:`colors.${t}.200`}},bg:by.reference}},Gne={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[op.reference],height:[op.reference],_checked:{transform:`translateX(${n4.reference})`}},Kne=VB(e=>({container:{[PI.variable]:Hne,[n4.variable]:PI.reference,_rtl:{[n4.variable]:gA(PI).negate().toString()}},track:jne(e),thumb:Gne})),Wne={sm:VB({container:{[w_.variable]:"1.375rem",[op.variable]:"sizes.3"}}),md:VB({container:{[w_.variable]:"1.875rem",[op.variable]:"sizes.4"}}),lg:VB({container:{[w_.variable]:"2.875rem",[op.variable]:"sizes.6"}})},qne=Vne({baseStyle:Kne,sizes:Wne,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:Xne,definePartsStyle:Vg}=Oi(cne.keys),Zne=Vg({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),GC={"&[data-is-numeric=true]":{textAlign:"end"}},Yne=Vg(e=>{const{colorScheme:t}=e;return{th:{color:jr("gray.600","gray.400")(e),borderBottom:"1px",borderColor:jr(`${t}.100`,`${t}.700`)(e),...GC},td:{borderBottom:"1px",borderColor:jr(`${t}.100`,`${t}.700`)(e),...GC},caption:{color:jr("gray.600","gray.100")(e)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),Jne=Vg(e=>{const{colorScheme:t}=e;return{th:{color:jr("gray.600","gray.400")(e),borderBottom:"1px",borderColor:jr(`${t}.100`,`${t}.700`)(e),...GC},td:{borderBottom:"1px",borderColor:jr(`${t}.100`,`${t}.700`)(e),...GC},caption:{color:jr("gray.600","gray.100")(e)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:jr(`${t}.100`,`${t}.700`)(e)},td:{background:jr(`${t}.100`,`${t}.700`)(e)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),$ne={simple:Yne,striped:Jne,unstyled:{}},eie={sm:Vg({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:Vg({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:Vg({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},tie=Xne({baseStyle:Zne,variants:$ne,sizes:eie,defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}}),Ss=Gr("tabs-color"),Ic=Gr("tabs-bg"),Cw=Gr("tabs-border-color"),{defineMultiStyleConfig:rie,definePartsStyle:Pu}=Oi(une.keys),nie=e=>{const{orientation:t}=e;return{display:t==="vertical"?"flex":"block"}},iie=e=>{const{isFitted:t}=e;return{flex:t?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},oie=e=>{const{align:t="start",orientation:r}=e;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[t],flexDirection:r==="vertical"?"column":"row"}},aie={p:4},sie=Pu(e=>({root:nie(e),tab:iie(e),tablist:oie(e),tabpanel:aie})),lie={sm:Pu({tab:{py:1,px:4,fontSize:"sm"}}),md:Pu({tab:{fontSize:"md",py:2,px:4}}),lg:Pu({tab:{fontSize:"lg",py:3,px:4}})},cie=Pu(e=>{const{colorScheme:t,orientation:r}=e,n=r==="vertical",i=n?"borderStart":"borderBottom",c=n?"marginStart":"marginBottom";return{tablist:{[i]:"2px solid",borderColor:"inherit"},tab:{[i]:"2px solid",borderColor:"transparent",[c]:"-2px",_selected:{[Ss.variable]:`colors.${t}.600`,_dark:{[Ss.variable]:`colors.${t}.300`},borderColor:"currentColor"},_active:{[Ic.variable]:"colors.gray.200",_dark:{[Ic.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:Ss.reference,bg:Ic.reference}}}),uie=Pu(e=>{const{colorScheme:t}=e;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[Cw.variable]:"transparent",_selected:{[Ss.variable]:`colors.${t}.600`,[Cw.variable]:"colors.white",_dark:{[Ss.variable]:`colors.${t}.300`,[Cw.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:Cw.reference},color:Ss.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),Aie=Pu(e=>{const{colorScheme:t}=e;return{tab:{border:"1px solid",borderColor:"inherit",[Ic.variable]:"colors.gray.50",_dark:{[Ic.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[Ic.variable]:"colors.white",[Ss.variable]:`colors.${t}.600`,_dark:{[Ic.variable]:"colors.gray.800",[Ss.variable]:`colors.${t}.300`},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:Ss.reference,bg:Ic.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),hie=Pu(e=>{const{colorScheme:t,theme:r}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:cs(r,`${t}.700`),bg:cs(r,`${t}.100`)}}}}),die=Pu(e=>{const{colorScheme:t}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",[Ss.variable]:"colors.gray.600",_dark:{[Ss.variable]:"inherit"},_selected:{[Ss.variable]:"colors.white",[Ic.variable]:`colors.${t}.600`,_dark:{[Ss.variable]:"colors.gray.800",[Ic.variable]:`colors.${t}.300`}},color:Ss.reference,bg:Ic.reference}}}),fie=Pu({}),pie={line:cie,enclosed:uie,"enclosed-colored":Aie,"soft-rounded":hie,"solid-rounded":die,unstyled:fie},mie=rie({baseStyle:sie,sizes:lie,variants:pie,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),So=Qte("badge",["bg","color","shadow"]),gie={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:So.bg.reference,color:So.color.reference,boxShadow:So.shadow.reference},vie=e=>{const{colorScheme:t,theme:r}=e,n=s0(`${t}.500`,.6)(r);return{[So.bg.variable]:`colors.${t}.500`,[So.color.variable]:"colors.white",_dark:{[So.bg.variable]:n,[So.color.variable]:"colors.whiteAlpha.800"}}},yie=e=>{const{colorScheme:t,theme:r}=e,n=s0(`${t}.200`,.16)(r);return{[So.bg.variable]:`colors.${t}.100`,[So.color.variable]:`colors.${t}.800`,_dark:{[So.bg.variable]:n,[So.color.variable]:`colors.${t}.200`}}},_ie=e=>{const{colorScheme:t,theme:r}=e,n=s0(`${t}.200`,.8)(r);return{[So.color.variable]:`colors.${t}.500`,_dark:{[So.color.variable]:n},[So.shadow.variable]:`inset 0 0 0px 1px ${So.color.reference}`}},xie={solid:vie,subtle:yie,outline:_ie},B_={baseStyle:gie,variants:xie,defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:bie,definePartsStyle:ap}=Oi(Ane.keys),gz=Gr("tag-bg"),vz=Gr("tag-color"),DI=Gr("tag-shadow"),HB=Gr("tag-min-height"),jB=Gr("tag-min-width"),GB=Gr("tag-font-size"),KB=Gr("tag-padding-inline"),wie={fontWeight:"medium",lineHeight:1.2,outline:0,[vz.variable]:So.color.reference,[gz.variable]:So.bg.reference,[DI.variable]:So.shadow.reference,color:vz.reference,bg:gz.reference,boxShadow:DI.reference,borderRadius:"md",minH:HB.reference,minW:jB.reference,fontSize:GB.reference,px:KB.reference,_focusVisible:{[DI.variable]:"shadows.outline"}},Bie={lineHeight:1.2,overflow:"visible"},Cie={fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}},Sie=ap({container:wie,label:Bie,closeButton:Cie}),Eie={sm:ap({container:{[HB.variable]:"sizes.5",[jB.variable]:"sizes.5",[GB.variable]:"fontSizes.xs",[KB.variable]:"space.2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:ap({container:{[HB.variable]:"sizes.6",[jB.variable]:"sizes.6",[GB.variable]:"fontSizes.sm",[KB.variable]:"space.2"}}),lg:ap({container:{[HB.variable]:"sizes.8",[jB.variable]:"sizes.8",[GB.variable]:"fontSizes.md",[KB.variable]:"space.3"}})},Tie={subtle:ap(e=>{var t;return{container:(t=B_.variants)==null?void 0:t.subtle(e)}}),solid:ap(e=>{var t;return{container:(t=B_.variants)==null?void 0:t.solid(e)}}),outline:ap(e=>{var t;return{container:(t=B_.variants)==null?void 0:t.outline(e)}})},Fie=bie({variants:Tie,baseStyle:Sie,sizes:Eie,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),{definePartsStyle:xA,defineMultiStyleConfig:Iie}=Oi(Yre.keys),xg=Gr("input-height"),bg=Gr("input-font-size"),wg=Gr("input-padding"),Bg=Gr("input-border-radius"),Mie=xA({addon:{height:xg.reference,fontSize:bg.reference,px:wg.reference,borderRadius:Bg.reference},field:{width:"100%",height:xg.reference,fontSize:bg.reference,px:wg.reference,borderRadius:Bg.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),Qh={lg:{[bg.variable]:"fontSizes.lg",[wg.variable]:"space.4",[Bg.variable]:"radii.md",[xg.variable]:"sizes.12"},md:{[bg.variable]:"fontSizes.md",[wg.variable]:"space.4",[Bg.variable]:"radii.md",[xg.variable]:"sizes.10"},sm:{[bg.variable]:"fontSizes.sm",[wg.variable]:"space.3",[Bg.variable]:"radii.sm",[xg.variable]:"sizes.8"},xs:{[bg.variable]:"fontSizes.xs",[wg.variable]:"space.2",[Bg.variable]:"radii.sm",[xg.variable]:"sizes.6"}},Pie={lg:xA({field:Qh.lg,group:Qh.lg}),md:xA({field:Qh.md,group:Qh.md}),sm:xA({field:Qh.sm,group:Qh.sm}),xs:xA({field:Qh.xs,group:Qh.xs})};function Dk(e){const{focusBorderColor:t,errorBorderColor:r}=e;return{focusBorderColor:t||jr("blue.500","blue.300")(e),errorBorderColor:r||jr("red.500","red.300")(e)}}var Die=xA(e=>{const{theme:t}=e,{focusBorderColor:r,errorBorderColor:n}=Dk(e);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:jr("gray.300","whiteAlpha.400")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:cs(t,n),boxShadow:`0 0 0 1px ${cs(t,n)}`},_focusVisible:{zIndex:1,borderColor:cs(t,r),boxShadow:`0 0 0 1px ${cs(t,r)}`}},addon:{border:"1px solid",borderColor:jr("inherit","whiteAlpha.50")(e),bg:jr("gray.100","whiteAlpha.300")(e)}}}),kie=xA(e=>{const{theme:t}=e,{focusBorderColor:r,errorBorderColor:n}=Dk(e);return{field:{border:"2px solid",borderColor:"transparent",bg:jr("gray.100","whiteAlpha.50")(e),_hover:{bg:jr("gray.200","whiteAlpha.100")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:cs(t,n)},_focusVisible:{bg:"transparent",borderColor:cs(t,r)}},addon:{border:"2px solid",borderColor:"transparent",bg:jr("gray.100","whiteAlpha.50")(e)}}}),Rie=xA(e=>{const{theme:t}=e,{focusBorderColor:r,errorBorderColor:n}=Dk(e);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:cs(t,n),boxShadow:`0px 1px 0px 0px ${cs(t,n)}`},_focusVisible:{borderColor:cs(t,r),boxShadow:`0px 1px 0px 0px ${cs(t,r)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}}),Lie=xA({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}}),Oie={outline:Die,filled:kie,flushed:Rie,unstyled:Lie},li=Iie({baseStyle:Mie,sizes:Pie,variants:Oie,defaultProps:{size:"md",variant:"outline"}}),yz,Uie={...(yz=li.baseStyle)==null?void 0:yz.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"},_z,xz,zie={outline:e=>{var t,r;return(r=(t=li.variants)==null?void 0:t.outline(e).field)!=null?r:{}},flushed:e=>{var t,r;return(r=(t=li.variants)==null?void 0:t.flushed(e).field)!=null?r:{}},filled:e=>{var t,r;return(r=(t=li.variants)==null?void 0:t.filled(e).field)!=null?r:{}},unstyled:(xz=(_z=li.variants)==null?void 0:_z.unstyled.field)!=null?xz:{}},bz,wz,Bz,Cz,Sz,Ez,Tz,Fz,Qie={xs:(wz=(bz=li.sizes)==null?void 0:bz.xs.field)!=null?wz:{},sm:(Cz=(Bz=li.sizes)==null?void 0:Bz.sm.field)!=null?Cz:{},md:(Ez=(Sz=li.sizes)==null?void 0:Sz.md.field)!=null?Ez:{},lg:(Fz=(Tz=li.sizes)==null?void 0:Tz.lg.field)!=null?Fz:{}},Nie={baseStyle:Uie,sizes:Qie,variants:zie,defaultProps:{size:"md",variant:"outline"}},Sw=Ko("tooltip-bg"),kI=Ko("tooltip-fg"),Vie=Ko("popper-arrow-bg"),Hie={bg:Sw.reference,color:kI.reference,[Sw.variable]:"colors.gray.700",[kI.variable]:"colors.whiteAlpha.900",_dark:{[Sw.variable]:"colors.gray.300",[kI.variable]:"colors.gray.900"},[Vie.variable]:Sw.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"},jie={baseStyle:Hie},{defineMultiStyleConfig:Gie,definePartsStyle:Xy}=Oi(nne.keys),Kie=e=>{const{colorScheme:t,theme:r,isIndeterminate:n,hasStripe:i}=e,c=jr(hz(),hz("1rem","rgba(0,0,0,0.1)"))(e),d=jr(`${t}.500`,`${t}.200`)(e),y=`linear-gradient(
    to right,
    transparent 0%,
    ${cs(r,d)} 50%,
    transparent 100%
  )`;return{...!n&&i&&c,...n?{bgImage:y}:{bgColor:d}}},Wie={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},qie=e=>({bg:jr("gray.100","whiteAlpha.300")(e)}),Xie=e=>({transitionProperty:"common",transitionDuration:"slow",...Kie(e)}),Zie=Xy(e=>({label:Wie,filledTrack:Xie(e),track:qie(e)})),Yie={xs:Xy({track:{h:"1"}}),sm:Xy({track:{h:"2"}}),md:Xy({track:{h:"3"}}),lg:Xy({track:{h:"4"}})},Jie=Gie({sizes:Yie,baseStyle:Zie,defaultProps:{size:"md",colorScheme:"blue"}}),$ie=e=>typeof e=="function";function As(e,...t){return $ie(e)?e(...t):e}var{definePartsStyle:WB,defineMultiStyleConfig:eoe}=Oi(Kre.keys),C_=Gr("checkbox-size"),toe=e=>{const{colorScheme:t}=e;return{w:C_.reference,h:C_.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:jr(`${t}.500`,`${t}.200`)(e),borderColor:jr(`${t}.500`,`${t}.200`)(e),color:jr("white","gray.900")(e),_hover:{bg:jr(`${t}.600`,`${t}.300`)(e),borderColor:jr(`${t}.600`,`${t}.300`)(e)},_disabled:{borderColor:jr("gray.200","transparent")(e),bg:jr("gray.200","whiteAlpha.300")(e),color:jr("gray.500","whiteAlpha.500")(e)}},_indeterminate:{bg:jr(`${t}.500`,`${t}.200`)(e),borderColor:jr(`${t}.500`,`${t}.200`)(e),color:jr("white","gray.900")(e)},_disabled:{bg:jr("gray.100","whiteAlpha.100")(e),borderColor:jr("gray.100","transparent")(e)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:jr("red.500","red.300")(e)}}},roe={_disabled:{cursor:"not-allowed"}},noe={userSelect:"none",_disabled:{opacity:.4}},ioe={transitionProperty:"transform",transitionDuration:"normal"},ooe=WB(e=>({icon:ioe,container:roe,control:As(toe,e),label:noe})),aoe={sm:WB({control:{[C_.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:WB({control:{[C_.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:WB({control:{[C_.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},KC=eoe({baseStyle:ooe,sizes:aoe,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:soe,definePartsStyle:qB}=Oi(ine.keys),loe=e=>{var t;const r=(t=As(KC.baseStyle,e))==null?void 0:t.control;return{...r,borderRadius:"full",_checked:{...r==null?void 0:r._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},coe=qB(e=>{var t,r,n,i;return{label:(r=(t=KC).baseStyle)==null?void 0:r.call(t,e).label,container:(i=(n=KC).baseStyle)==null?void 0:i.call(n,e).container,control:loe(e)}}),uoe={md:qB({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:qB({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:qB({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},Aoe=soe({baseStyle:coe,sizes:uoe,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:hoe,definePartsStyle:doe}=Oi(one.keys),Ew=Gr("select-bg"),Iz,foe={...(Iz=li.baseStyle)==null?void 0:Iz.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:Ew.reference,[Ew.variable]:"colors.white",_dark:{[Ew.variable]:"colors.gray.700"},"> option, > optgroup":{bg:Ew.reference}},poe={width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}},moe=doe({field:foe,icon:poe}),Tw={paddingInlineEnd:"8"},Mz,Pz,Dz,kz,Rz,Lz,Oz,Uz,goe={lg:{...(Mz=li.sizes)==null?void 0:Mz.lg,field:{...(Pz=li.sizes)==null?void 0:Pz.lg.field,...Tw}},md:{...(Dz=li.sizes)==null?void 0:Dz.md,field:{...(kz=li.sizes)==null?void 0:kz.md.field,...Tw}},sm:{...(Rz=li.sizes)==null?void 0:Rz.sm,field:{...(Lz=li.sizes)==null?void 0:Lz.sm.field,...Tw}},xs:{...(Oz=li.sizes)==null?void 0:Oz.xs,field:{...(Uz=li.sizes)==null?void 0:Uz.xs.field,...Tw},icon:{insetEnd:"1"}}},voe=hoe({baseStyle:moe,sizes:goe,variants:li.variants,defaultProps:li.defaultProps}),RI=Gr("skeleton-start-color"),LI=Gr("skeleton-end-color"),yoe={[RI.variable]:"colors.gray.100",[LI.variable]:"colors.gray.400",_dark:{[RI.variable]:"colors.gray.800",[LI.variable]:"colors.gray.600"},background:RI.reference,borderColor:LI.reference,opacity:.7,borderRadius:"sm"},_oe={baseStyle:yoe},OI=Gr("skip-link-bg"),xoe={borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[OI.variable]:"colors.white",_dark:{[OI.variable]:"colors.gray.700"},bg:OI.reference}},boe={baseStyle:xoe},{defineMultiStyleConfig:woe,definePartsStyle:bE}=Oi(ane.keys),v1=Gr("slider-thumb-size"),y1=Gr("slider-track-size"),nd=Gr("slider-bg"),Boe=e=>{const{orientation:t}=e;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...Pk({orientation:t,vertical:{h:"100%"},horizontal:{w:"100%"}})}},Coe=e=>({...Pk({orientation:e.orientation,horizontal:{h:y1.reference},vertical:{w:y1.reference}}),overflow:"hidden",borderRadius:"sm",[nd.variable]:"colors.gray.200",_dark:{[nd.variable]:"colors.whiteAlpha.200"},_disabled:{[nd.variable]:"colors.gray.300",_dark:{[nd.variable]:"colors.whiteAlpha.300"}},bg:nd.reference}),Soe=e=>{const{orientation:t}=e;return{...Pk({orientation:t,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}}),w:v1.reference,h:v1.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}}},Eoe=e=>{const{colorScheme:t}=e;return{width:"inherit",height:"inherit",[nd.variable]:`colors.${t}.500`,_dark:{[nd.variable]:`colors.${t}.200`},bg:nd.reference}},Toe=bE(e=>({container:Boe(e),track:Coe(e),thumb:Soe(e),filledTrack:Eoe(e)})),Foe=bE({container:{[v1.variable]:"sizes.4",[y1.variable]:"sizes.1"}}),Ioe=bE({container:{[v1.variable]:"sizes.3.5",[y1.variable]:"sizes.1"}}),Moe=bE({container:{[v1.variable]:"sizes.2.5",[y1.variable]:"sizes.0.5"}}),Poe={lg:Foe,md:Ioe,sm:Moe},Doe=woe({baseStyle:Toe,sizes:Poe,defaultProps:{size:"md",colorScheme:"blue"}}),Kf=Ko("spinner-size"),koe={width:[Kf.reference],height:[Kf.reference]},Roe={xs:{[Kf.variable]:"sizes.3"},sm:{[Kf.variable]:"sizes.4"},md:{[Kf.variable]:"sizes.6"},lg:{[Kf.variable]:"sizes.8"},xl:{[Kf.variable]:"sizes.12"}},Loe={baseStyle:koe,sizes:Roe,defaultProps:{size:"md"}},{defineMultiStyleConfig:Ooe,definePartsStyle:Aj}=Oi(sne.keys),Uoe={fontWeight:"medium"},zoe={opacity:.8,marginBottom:"2"},Qoe={verticalAlign:"baseline",fontWeight:"semibold"},Noe={marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"},Voe=Aj({container:{},label:Uoe,helpText:zoe,number:Qoe,icon:Noe}),Hoe={md:Aj({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},joe=Ooe({baseStyle:Voe,sizes:Hoe,defaultProps:{size:"md"}}),UI=Gr("kbd-bg"),Goe={[UI.variable]:"colors.gray.100",_dark:{[UI.variable]:"colors.whiteAlpha.100"},bg:UI.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"},Koe={baseStyle:Goe},Woe={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}},qoe={baseStyle:Woe},{defineMultiStyleConfig:Xoe,definePartsStyle:Zoe}=Oi(Jre.keys),Yoe={marginEnd:"2",display:"inline",verticalAlign:"text-bottom"},Joe=Zoe({icon:Yoe}),$oe=Xoe({baseStyle:Joe}),{defineMultiStyleConfig:eae,definePartsStyle:tae}=Oi($re.keys),yu=Gr("menu-bg"),zI=Gr("menu-shadow"),rae={[yu.variable]:"#fff",[zI.variable]:"shadows.sm",_dark:{[yu.variable]:"colors.gray.700",[zI.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px",bg:yu.reference,boxShadow:zI.reference},nae={py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[yu.variable]:"colors.gray.100",_dark:{[yu.variable]:"colors.whiteAlpha.100"}},_active:{[yu.variable]:"colors.gray.200",_dark:{[yu.variable]:"colors.whiteAlpha.200"}},_expanded:{[yu.variable]:"colors.gray.100",_dark:{[yu.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:yu.reference},iae={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},oae={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},aae={opacity:.6},sae={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6},lae={transitionProperty:"common",transitionDuration:"normal"},cae=tae({button:lae,list:rae,item:nae,groupTitle:iae,icon:oae,command:aae,divider:sae}),uae=eae({baseStyle:cae}),{defineMultiStyleConfig:Aae,definePartsStyle:i4}=Oi(ene.keys),QI=Gr("modal-bg"),NI=Gr("modal-shadow"),hae={bg:"blackAlpha.600",zIndex:"modal"},dae=e=>{const{isCentered:t,scrollBehavior:r}=e;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:t?"center":"flex-start",overflow:r==="inside"?"hidden":"auto",overscrollBehaviorY:"none"}},fae=e=>{const{isCentered:t,scrollBehavior:r}=e;return{borderRadius:"md",color:"inherit",my:t?"auto":"16",mx:t?"auto":void 0,zIndex:"modal",maxH:r==="inside"?"calc(100% - 7.5rem)":void 0,[QI.variable]:"colors.white",[NI.variable]:"shadows.lg",_dark:{[QI.variable]:"colors.gray.700",[NI.variable]:"shadows.dark-lg"},bg:QI.reference,boxShadow:NI.reference}},pae={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},mae={position:"absolute",top:"2",insetEnd:"3"},gae=e=>{const{scrollBehavior:t}=e;return{px:"6",py:"2",flex:"1",overflow:t==="inside"?"auto":void 0}},vae={px:"6",py:"4"},yae=i4(e=>({overlay:hae,dialogContainer:As(dae,e),dialog:As(fae,e),header:pae,closeButton:mae,body:As(gae,e),footer:vae}));function bc(e){return i4(e==="full"?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:e}})}var _ae={xs:bc("xs"),sm:bc("sm"),md:bc("md"),lg:bc("lg"),xl:bc("xl"),"2xl":bc("2xl"),"3xl":bc("3xl"),"4xl":bc("4xl"),"5xl":bc("5xl"),"6xl":bc("6xl"),full:bc("full")},xae=Aae({baseStyle:yae,sizes:_ae,defaultProps:{size:"md"}}),{defineMultiStyleConfig:bae,definePartsStyle:hj}=Oi(tne.keys),kk=Ko("number-input-stepper-width"),dj=Ko("number-input-input-padding"),wae=gA(kk).add("0.5rem").toString(),VI=Ko("number-input-bg"),HI=Ko("number-input-color"),jI=Ko("number-input-border-color"),Bae={[kk.variable]:"sizes.6",[dj.variable]:wae},Cae=e=>{var t,r;return(r=(t=As(li.baseStyle,e))==null?void 0:t.field)!=null?r:{}},Sae={width:kk.reference},Eae={borderStart:"1px solid",borderStartColor:jI.reference,color:HI.reference,bg:VI.reference,[HI.variable]:"colors.chakra-body-text",[jI.variable]:"colors.chakra-border-color",_dark:{[HI.variable]:"colors.whiteAlpha.800",[jI.variable]:"colors.whiteAlpha.300"},_active:{[VI.variable]:"colors.gray.200",_dark:{[VI.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},Tae=hj(e=>{var t;return{root:Bae,field:(t=As(Cae,e))!=null?t:{},stepperGroup:Sae,stepper:Eae}});function Fw(e){var t,r,n;const i=(t=li.sizes)==null?void 0:t[e],c={lg:"md",md:"md",sm:"sm",xs:"sm"},d=(n=(r=i.field)==null?void 0:r.fontSize)!=null?n:"md",y=aj.fontSizes[d];return hj({field:{...i.field,paddingInlineEnd:dj.reference,verticalAlign:"top"},stepper:{fontSize:gA(y).multiply(.75).toString(),_first:{borderTopEndRadius:c[e]},_last:{borderBottomEndRadius:c[e],mt:"-1px",borderTopWidth:1}}})}var Fae={xs:Fw("xs"),sm:Fw("sm"),md:Fw("md"),lg:Fw("lg")},Iae=bae({baseStyle:Tae,sizes:Fae,variants:li.variants,defaultProps:li.defaultProps}),zz,Mae={...(zz=li.baseStyle)==null?void 0:zz.field,textAlign:"center"},Pae={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},Qz,Nz,Dae={outline:e=>{var t,r,n;return(n=(r=As((t=li.variants)==null?void 0:t.outline,e))==null?void 0:r.field)!=null?n:{}},flushed:e=>{var t,r,n;return(n=(r=As((t=li.variants)==null?void 0:t.flushed,e))==null?void 0:r.field)!=null?n:{}},filled:e=>{var t,r,n;return(n=(r=As((t=li.variants)==null?void 0:t.filled,e))==null?void 0:r.field)!=null?n:{}},unstyled:(Nz=(Qz=li.variants)==null?void 0:Qz.unstyled.field)!=null?Nz:{}},kae={baseStyle:Mae,sizes:Pae,variants:Dae,defaultProps:li.defaultProps},{defineMultiStyleConfig:Rae,definePartsStyle:Lae}=Oi(rne.keys),Iw=Ko("popper-bg"),Oae=Ko("popper-arrow-bg"),Vz=Ko("popper-arrow-shadow-color"),Uae={zIndex:10},zae={[Iw.variable]:"colors.white",bg:Iw.reference,[Oae.variable]:Iw.reference,[Vz.variable]:"colors.gray.200",_dark:{[Iw.variable]:"colors.gray.700",[Vz.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},Qae={px:3,py:2,borderBottomWidth:"1px"},Nae={px:3,py:2},Vae={px:3,py:2,borderTopWidth:"1px"},Hae={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},jae=Lae({popper:Uae,content:zae,header:Qae,body:Nae,footer:Vae,closeButton:Hae}),Gae=Rae({baseStyle:jae}),{definePartsStyle:o4,defineMultiStyleConfig:Kae}=Oi(Wre.keys),GI=Gr("drawer-bg"),KI=Gr("drawer-box-shadow");function jm(e){return o4(e==="full"?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:e}})}var Wae={bg:"blackAlpha.600",zIndex:"modal"},qae={display:"flex",zIndex:"modal",justifyContent:"center"},Xae=e=>{const{isFullHeight:t}=e;return{...t&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[GI.variable]:"colors.white",[KI.variable]:"shadows.lg",_dark:{[GI.variable]:"colors.gray.700",[KI.variable]:"shadows.dark-lg"},bg:GI.reference,boxShadow:KI.reference}},Zae={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},Yae={position:"absolute",top:"2",insetEnd:"3"},Jae={px:"6",py:"2",flex:"1",overflow:"auto"},$ae={px:"6",py:"4"},ese=o4(e=>({overlay:Wae,dialogContainer:qae,dialog:As(Xae,e),header:Zae,closeButton:Yae,body:Jae,footer:$ae})),tse={xs:jm("xs"),sm:jm("md"),md:jm("lg"),lg:jm("2xl"),xl:jm("4xl"),full:jm("full")},rse=Kae({baseStyle:ese,sizes:tse,defaultProps:{size:"xs"}}),{definePartsStyle:nse,defineMultiStyleConfig:ise}=Oi(qre.keys),ose={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},ase={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},sse={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},lse=nse({preview:ose,input:ase,textarea:sse}),cse=ise({baseStyle:lse}),{definePartsStyle:use,defineMultiStyleConfig:Ase}=Oi(Xre.keys),Hg=Gr("form-control-color"),hse={marginStart:"1",[Hg.variable]:"colors.red.500",_dark:{[Hg.variable]:"colors.red.300"},color:Hg.reference},dse={mt:"2",[Hg.variable]:"colors.gray.600",_dark:{[Hg.variable]:"colors.whiteAlpha.600"},color:Hg.reference,lineHeight:"normal",fontSize:"sm"},fse=use({container:{width:"100%",position:"relative"},requiredIndicator:hse,helperText:dse}),pse=Ase({baseStyle:fse}),{definePartsStyle:mse,defineMultiStyleConfig:gse}=Oi(Zre.keys),jg=Gr("form-error-color"),vse={[jg.variable]:"colors.red.500",_dark:{[jg.variable]:"colors.red.300"},color:jg.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},yse={marginEnd:"0.5em",[jg.variable]:"colors.red.500",_dark:{[jg.variable]:"colors.red.300"},color:jg.reference},_se=mse({text:vse,icon:yse}),xse=gse({baseStyle:_se}),bse={fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}},wse={baseStyle:bse},Bse={fontFamily:"heading",fontWeight:"bold"},Cse={"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},Sse={baseStyle:Bse,sizes:Cse,defaultProps:{size:"xl"}},{defineMultiStyleConfig:Ese,definePartsStyle:Tse}=Oi(Gre.keys),WI=Gr("breadcrumb-link-decor"),Fse={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:WI.reference,[WI.variable]:"none","&:not([aria-current=page])":{cursor:"pointer",_hover:{[WI.variable]:"underline"},_focusVisible:{boxShadow:"outline"}}},Ise=Tse({link:Fse}),Mse=Ese({baseStyle:Ise}),Pse={lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},fj=e=>{const{colorScheme:t,theme:r}=e;if(t==="gray")return{color:jr("gray.800","whiteAlpha.900")(e),_hover:{bg:jr("gray.100","whiteAlpha.200")(e)},_active:{bg:jr("gray.200","whiteAlpha.300")(e)}};const n=s0(`${t}.200`,.12)(r),i=s0(`${t}.200`,.24)(r);return{color:jr(`${t}.600`,`${t}.200`)(e),bg:"transparent",_hover:{bg:jr(`${t}.50`,n)(e)},_active:{bg:jr(`${t}.100`,i)(e)}}},Dse=e=>{const{colorScheme:t}=e,r=jr("gray.200","whiteAlpha.300")(e);return{border:"1px solid",borderColor:t==="gray"?r:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...As(fj,e)}},kse={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},Rse=e=>{var t;const{colorScheme:r}=e;if(r==="gray"){const o=jr("gray.100","whiteAlpha.200")(e);return{bg:o,color:jr("gray.800","whiteAlpha.900")(e),_hover:{bg:jr("gray.200","whiteAlpha.300")(e),_disabled:{bg:o}},_active:{bg:jr("gray.300","whiteAlpha.400")(e)}}}const{bg:n=`${r}.500`,color:i="white",hoverBg:c=`${r}.600`,activeBg:d=`${r}.700`}=(t=kse[r])!=null?t:{},y=jr(n,`${r}.200`)(e);return{bg:y,color:jr(i,"gray.800")(e),_hover:{bg:jr(c,`${r}.300`)(e),_disabled:{bg:y}},_active:{bg:jr(d,`${r}.400`)(e)}}},Lse=e=>{const{colorScheme:t}=e;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:jr(`${t}.500`,`${t}.200`)(e),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:jr(`${t}.700`,`${t}.500`)(e)}}},Ose={bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"},Use={ghost:fj,outline:Dse,solid:Rse,link:Lse,unstyled:Ose},zse={lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},Qse={baseStyle:Pse,variants:Use,sizes:zse,defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:sp,defineMultiStyleConfig:Nse}=Oi(hne.keys),WC=Gr("card-bg"),BA=Gr("card-padding"),pj=Gr("card-shadow"),XB=Gr("card-radius"),mj=Gr("card-border-width","0"),gj=Gr("card-border-color"),Vse=sp({container:{[WC.variable]:"colors.chakra-body-bg",backgroundColor:WC.reference,boxShadow:pj.reference,borderRadius:XB.reference,color:"chakra-body-text",borderWidth:mj.reference,borderColor:gj.reference},body:{padding:BA.reference,flex:"1 1 0%"},header:{padding:BA.reference},footer:{padding:BA.reference}}),Hse={sm:sp({container:{[XB.variable]:"radii.base",[BA.variable]:"space.3"}}),md:sp({container:{[XB.variable]:"radii.md",[BA.variable]:"space.5"}}),lg:sp({container:{[XB.variable]:"radii.xl",[BA.variable]:"space.7"}})},jse={elevated:sp({container:{[pj.variable]:"shadows.base",_dark:{[WC.variable]:"colors.gray.700"}}}),outline:sp({container:{[mj.variable]:"1px",[gj.variable]:"colors.chakra-border-color"}}),filled:sp({container:{[WC.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[BA.variable]:0},header:{[BA.variable]:0},footer:{[BA.variable]:0}}},Gse=Nse({baseStyle:Vse,variants:jse,sizes:Hse,defaultProps:{variant:"elevated",size:"md"}}),S_=Ko("close-button-size"),wy=Ko("close-button-bg"),Kse={w:[S_.reference],h:[S_.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[wy.variable]:"colors.blackAlpha.100",_dark:{[wy.variable]:"colors.whiteAlpha.100"}},_active:{[wy.variable]:"colors.blackAlpha.200",_dark:{[wy.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:wy.reference},Wse={lg:{[S_.variable]:"sizes.10",fontSize:"md"},md:{[S_.variable]:"sizes.8",fontSize:"xs"},sm:{[S_.variable]:"sizes.6",fontSize:"2xs"}},qse={baseStyle:Kse,sizes:Wse,defaultProps:{size:"md"}},{variants:Xse,defaultProps:Zse}=B_,Yse={fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:So.bg.reference,color:So.color.reference,boxShadow:So.shadow.reference},Jse={baseStyle:Yse,variants:Xse,defaultProps:Zse},$se={w:"100%",mx:"auto",maxW:"prose",px:"4"},ele={baseStyle:$se},tle={opacity:.6,borderColor:"inherit"},rle={borderStyle:"solid"},nle={borderStyle:"dashed"},ile={solid:rle,dashed:nle},ole={baseStyle:tle,variants:ile,defaultProps:{variant:"solid"}},{definePartsStyle:ale,defineMultiStyleConfig:sle}=Oi(Vre.keys),lle={borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},cle={transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},ule={pt:"2",px:"4",pb:"5"},Ale={fontSize:"1.25em"},hle=ale({container:lle,button:cle,panel:ule,icon:Ale}),dle=sle({baseStyle:hle}),{definePartsStyle:X1,defineMultiStyleConfig:fle}=Oi(Hre.keys),il=Gr("alert-fg"),UA=Gr("alert-bg"),ple=X1({container:{bg:UA.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:il.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:il.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function Rk(e){const{theme:t,colorScheme:r}=e,n=s0(`${r}.200`,.16)(t);return{light:`colors.${r}.100`,dark:n}}var mle=X1(e=>{const{colorScheme:t}=e,r=Rk(e);return{container:{[il.variable]:`colors.${t}.600`,[UA.variable]:r.light,_dark:{[il.variable]:`colors.${t}.200`,[UA.variable]:r.dark}}}}),gle=X1(e=>{const{colorScheme:t}=e,r=Rk(e);return{container:{[il.variable]:`colors.${t}.600`,[UA.variable]:r.light,_dark:{[il.variable]:`colors.${t}.200`,[UA.variable]:r.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:il.reference}}}),vle=X1(e=>{const{colorScheme:t}=e,r=Rk(e);return{container:{[il.variable]:`colors.${t}.600`,[UA.variable]:r.light,_dark:{[il.variable]:`colors.${t}.200`,[UA.variable]:r.dark},pt:"2",borderTopWidth:"4px",borderTopColor:il.reference}}}),yle=X1(e=>{const{colorScheme:t}=e;return{container:{[il.variable]:"colors.white",[UA.variable]:`colors.${t}.600`,_dark:{[il.variable]:"colors.gray.900",[UA.variable]:`colors.${t}.200`},color:il.reference}}}),_le={subtle:mle,"left-accent":gle,"top-accent":vle,solid:yle},xle=fle({baseStyle:ple,variants:_le,defaultProps:{variant:"subtle",colorScheme:"blue"}}),{definePartsStyle:vj,defineMultiStyleConfig:ble}=Oi(jre.keys),Gg=Gr("avatar-border-color"),E_=Gr("avatar-bg"),_1=Gr("avatar-font-size"),l0=Gr("avatar-size"),wle={borderRadius:"full",border:"0.2em solid",borderColor:Gg.reference,[Gg.variable]:"white",_dark:{[Gg.variable]:"colors.gray.800"}},Ble={bg:E_.reference,fontSize:_1.reference,width:l0.reference,height:l0.reference,lineHeight:"1",[E_.variable]:"colors.gray.200",_dark:{[E_.variable]:"colors.whiteAlpha.400"}},Cle=e=>{const{name:t,theme:r}=e,n=t?Pne({string:t}):"colors.gray.400",i=Ine(n)(r);let c="white";return i||(c="gray.800"),{bg:E_.reference,fontSize:_1.reference,color:c,borderColor:Gg.reference,verticalAlign:"top",width:l0.reference,height:l0.reference,"&:not([data-loaded])":{[E_.variable]:n},[Gg.variable]:"colors.white",_dark:{[Gg.variable]:"colors.gray.800"}}},Sle={fontSize:_1.reference,lineHeight:"1"},Ele=vj(e=>({badge:As(wle,e),excessLabel:As(Ble,e),container:As(Cle,e),label:Sle}));function Nh(e){const t=e!=="100%"?lj[e]:void 0;return vj({container:{[l0.variable]:t??e,[_1.variable]:`calc(${t??e} / 2.5)`},excessLabel:{[l0.variable]:t??e,[_1.variable]:`calc(${t??e} / 2.5)`}})}var Tle={"2xs":Nh(4),xs:Nh(6),sm:Nh(8),md:Nh(12),lg:Nh(16),xl:Nh(24),"2xl":Nh(32),full:Nh("100%")},Fle=ble({baseStyle:Ele,sizes:Tle,defaultProps:{size:"md"}}),Ile={Accordion:dle,Alert:xle,Avatar:Fle,Badge:B_,Breadcrumb:Mse,Button:Qse,Checkbox:KC,CloseButton:qse,Code:Jse,Container:ele,Divider:ole,Drawer:rse,Editable:cse,Form:pse,FormError:xse,FormLabel:wse,Heading:Sse,Input:li,Kbd:Koe,Link:qoe,List:$oe,Menu:uae,Modal:xae,NumberInput:Iae,PinInput:kae,Popover:Gae,Progress:Jie,Radio:Aoe,Select:voe,Skeleton:_oe,SkipLink:boe,Slider:Doe,Spinner:Loe,Stat:joe,Switch:qne,Table:tie,Tabs:mie,Tag:Fie,Textarea:Nie,Tooltip:jie,Card:Gse,Stepper:Nre},Mle={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},Ple={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},Dle="ltr",kle={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},Rle={semanticTokens:Mle,direction:Dle,...Ure,components:Ile,styles:Ple,config:kle};function Lle(e,t){const r={};return Object.keys(e).forEach(n=>{t.includes(n)||(r[n]=e[n])}),r}function Ole(e,t,r,n){const i=typeof t=="string"?t.split("."):[t];for(n=0;n<i.length&&e;n+=1)e=e[i[n]];return e===void 0?r:e}var Ule=e=>{const t=new WeakMap;return(n,i,c,d)=>{if(typeof n>"u")return e(n,i,c);t.has(n)||t.set(n,new Map);const y=t.get(n);if(y.has(i))return y.get(i);const o=e(n,i,c,d);return y.set(i,o),o}},yj=Ule(Ole);function _j(e,t){const r={};return Object.keys(e).forEach(n=>{const i=e[n];t(i,n,e)&&(r[n]=i)}),r}var xj=e=>_j(e,t=>t!=null);function zle(e){return typeof e=="function"}function bj(e,...t){return zle(e)?e(...t):e}var Qle=typeof Element<"u",Nle=typeof Map=="function",Vle=typeof Set=="function",Hle=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function ZB(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,i;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!ZB(e[n],t[n]))return!1;return!0}var c;if(Nle&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(c=e.entries();!(n=c.next()).done;)if(!t.has(n.value[0]))return!1;for(c=e.entries();!(n=c.next()).done;)if(!ZB(n.value[1],t.get(n.value[0])))return!1;return!0}if(Vle&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(c=e.entries();!(n=c.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(Hle&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[n]))return!1;if(Qle&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((i[n]==="_owner"||i[n]==="__v"||i[n]==="__o")&&e.$$typeof)&&!ZB(e[i[n]],t[i[n]]))return!1;return!0}return e!==e&&t!==t}var jle=function(t,r){try{return ZB(t,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const Gle=V1(jle);function wj(e,t={}){var r;const{styleConfig:n,...i}=t,{theme:c,colorMode:d}=Jee(),y=e?yj(c,`components.${e}`):void 0,o=n||y,x=Su({theme:c,colorMode:d},(r=o==null?void 0:o.defaultProps)!=null?r:{},xj(Lle(i,["children"]))),S=Se.useRef({});if(o){const O=fre(o)(x);Gle(S.current,O)||(S.current=O)}return S.current}function Ud(e,t={}){return wj(e,t)}function Rs(e,t={}){return wj(e,t)}var Kle=new Set([...rre,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),Wle=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function qle(e){return Wle.has(e)||!Kle.has(e)}function Xle(e,...t){if(e==null)throw new TypeError("Cannot convert undefined or null to object");const r={...e};for(const n of t)if(n!=null)for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(i in r&&delete r[i],r[i]=n[i]);return r}function Bj(e){const t=Object.assign({},e);for(let r in t)t[r]===void 0&&delete t[r];return t}var Zle=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Yle=LH(function(e){return Zle.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),Jle=Yle,$le=function(t){return t!=="theme"},Hz=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?Jle:$le},jz=function(t,r,n){var i;if(r){var c=r.shouldForwardProp;i=t.__emotion_forwardProp&&c?function(d){return t.__emotion_forwardProp(d)&&c(d)}:c}return typeof i!="function"&&n&&(i=t.__emotion_forwardProp),i},ece=!1,tce=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return xk(r,n,i),GH(function(){return bk(r,n,i)}),null},rce=function e(t,r){var n=t.__emotion_real===t,i=n&&t.__emotion_base||t,c,d;r!==void 0&&(c=r.label,d=r.target);var y=jz(t,r,n),o=y||Hz(i),x=!o("as");return function(){var S=arguments,k=n&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(c!==void 0&&k.push("label:"+c+";"),S[0]==null||S[0].raw===void 0)k.push.apply(k,S);else{k.push(S[0][0]);for(var O=S.length,Q=1;Q<O;Q++)k.push(S[Q],S[0][Q])}var G=wk(function(K,ee,W){var J=x&&K.as||i,re="",ue=[],ce=K;if(K.theme==null){ce={};for(var he in K)ce[he]=K[he];ce.theme=Se.useContext(a0)}typeof K.className=="string"?re=VH(ee.registered,ue,K.className):K.className!=null&&(re=K.className+" ");var xe=pE(k.concat(ue),ee.registered,ce);re+=ee.key+"-"+xe.name,d!==void 0&&(re+=" "+d);var fe=x&&y===void 0?Hz(J):o,Ue={};for(var Ge in K)x&&Ge==="as"||fe(Ge)&&(Ue[Ge]=K[Ge]);return Ue.className=re,W&&(Ue.ref=W),Se.createElement(Se.Fragment,null,Se.createElement(tce,{cache:ee,serialized:xe,isStringTag:typeof J=="string"}),Se.createElement(J,Ue))});return G.displayName=c!==void 0?c:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",G.defaultProps=t.defaultProps,G.__emotion_real=G,G.__emotion_base=i,G.__emotion_styles=k,G.__emotion_forwardProp=y,Object.defineProperty(G,"toString",{value:function(){return d===void 0&&ece?"NO_COMPONENT_SELECTOR":"."+d}}),G.withComponent=function(K,ee){return e(K,Qr({},r,ee,{shouldForwardProp:jz(G,ee,!0)})).apply(void 0,k)},G}},nce=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],qC=rce.bind();nce.forEach(function(e){qC[e]=qC(e)});var Gz,ice=(Gz=qC.default)!=null?Gz:qC,oce=({baseStyle:e})=>t=>{const{theme:r,css:n,__css:i,sx:c,...d}=t,y=_j(d,(k,O)=>ire(O)),o=bj(e,t),x=Xle({},i,o,xj(y),c),S=oj(x)(t.theme);return n?[S,n]:S};function qI(e,t){const{baseStyle:r,...n}=t??{};n.shouldForwardProp||(n.shouldForwardProp=qle);const i=oce({baseStyle:r}),c=ice(e,n)(i);return Tu.forwardRef(function(o,x){const{colorMode:S,forced:k}=vE();return Tu.createElement(c,{ref:x,"data-theme":k?S:void 0,...o})})}function ace(){const e=new Map;return new Proxy(qI,{apply(t,r,n){return qI(...n)},get(t,r){return e.has(r)||e.set(r,qI(r)),e.get(r)}})}var Pn=ace();function di(e){return Se.forwardRef(e)}function sce(e={}){const{strict:t=!0,errorMessage:r="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:n}=e,i=Se.createContext(void 0);i.displayName=n;function c(){var d;const y=Se.useContext(i);if(!y&&t){const o=new Error(r);throw o.name="ContextError",(d=Error.captureStackTrace)==null||d.call(Error,o,c),o}return y}return[i.Provider,c,i]}function lce(e){const{cssVarsRoot:t,theme:r,children:n}=e,i=Se.useMemo(()=>tre(r),[r]);return Je.jsxs(Dee,{theme:i,children:[Je.jsx(cce,{root:t}),n]})}function cce({root:e=":host, :root"}){const t=[e,"[data-theme]"].join(",");return Je.jsx(mE,{styles:r=>({[t]:r.__cssVars})})}sce({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function uce(){const{colorMode:e}=vE();return Je.jsx(mE,{styles:t=>{const r=yj(t,"styles.global"),n=bj(r,{theme:t,colorMode:e});return n?oj(n)(t):void 0}})}var Lk=Se.createContext({getDocument(){return document},getWindow(){return window}});Lk.displayName="EnvironmentContext";function Ace({defer:e}={}){const[,t]=Se.useReducer(r=>r+1,0);return m1(()=>{e&&t()},[e]),Se.useContext(Lk)}function Cj(e){const{children:t,environment:r,disabled:n}=e,i=Se.useRef(null),c=Se.useMemo(()=>r||{getDocument:()=>{var y,o;return(o=(y=i.current)==null?void 0:y.ownerDocument)!=null?o:document},getWindow:()=>{var y,o;return(o=(y=i.current)==null?void 0:y.ownerDocument.defaultView)!=null?o:window}},[r]),d=!n||!r;return Je.jsxs(Lk.Provider,{value:c,children:[t,d&&Je.jsx("span",{id:"__chakra_env",hidden:!0,ref:i})]})}Cj.displayName="EnvironmentProvider";var hce=e=>{const{children:t,colorModeManager:r,portalZIndex:n,resetScope:i,resetCSS:c=!0,theme:d={},environment:y,cssVarsRoot:o,disableEnvironment:x,disableGlobalStyle:S}=e,k=Je.jsx(Cj,{environment:y,disabled:x,children:t});return Je.jsx(lce,{theme:d,cssVarsRoot:o,children:Je.jsxs(JH,{colorModeManager:r,options:d.config,children:[c?Je.jsx(zee,{scope:i}):Je.jsx(Uee,{}),!S&&Je.jsx(uce,{}),n?Je.jsx(ZH,{zIndex:n,children:k}):k]})})},dce=(e,t)=>e.find(r=>r.id===t);function Kz(e,t){const r=Sj(e,t),n=r?e[r].findIndex(i=>i.id===t):-1;return{position:r,index:n}}function Sj(e,t){for(const[r,n]of Object.entries(e))if(dce(n,t))return r}function fce(e){const t=e.includes("right"),r=e.includes("left");let n="center";return t&&(n="flex-end"),r&&(n="flex-start"),{display:"flex",flexDirection:"column",alignItems:n}}function pce(e){const r=e==="top"||e==="bottom"?"0 auto":void 0,n=e.includes("top")?"env(safe-area-inset-top, 0px)":void 0,i=e.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,c=e.includes("left")?void 0:"env(safe-area-inset-right, 0px)",d=e.includes("right")?void 0:"env(safe-area-inset-left, 0px)";return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:r,top:n,bottom:i,right:c,left:d}}function x1(e,t=[]){const r=Se.useRef(e);return Se.useEffect(()=>{r.current=e}),Se.useCallback((...n)=>{var i;return(i=r.current)==null?void 0:i.call(r,...n)},t)}function mce(e,t){const r=x1(e);Se.useEffect(()=>{if(t==null)return;let n=null;return n=window.setTimeout(()=>{r()},t),()=>{n&&window.clearTimeout(n)}},[t,r])}function XC(e,t){const r=Se.useRef(!1),n=Se.useRef(!1);Se.useEffect(()=>{if(r.current&&n.current)return e();n.current=!0},t),Se.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[])}const Ok=Se.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),wE=Se.createContext({}),Z1=Se.createContext(null),Uk=typeof window<"u",Ej=Uk?Se.useLayoutEffect:Se.useEffect,Tj=Se.createContext({strict:!1}),BE=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),gce="framerAppearId",Fj="data-"+BE(gce),vce={skipAnimations:!1,useManualTiming:!1};function yce(e){let t=new Set,r=new Set,n=!1,i=!1;const c=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function y(x){c.has(x)&&(o.schedule(x),e()),x(d)}const o={schedule:(x,S=!1,k=!1)=>{const Q=k&&n?t:r;return S&&c.add(x),Q.has(x)||Q.add(x),x},cancel:x=>{r.delete(x),c.delete(x)},process:x=>{if(d=x,n){i=!0;return}n=!0,[t,r]=[r,t],r.clear(),t.forEach(y),n=!1,i&&(i=!1,o.process(x))}};return o}const Mw=["read","resolveKeyframes","update","preRender","render","postRender"],_ce=40;function Ij(e,t){let r=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},c=()=>r=!0,d=Mw.reduce((W,J)=>(W[J]=yce(c),W),{}),{read:y,resolveKeyframes:o,update:x,preRender:S,render:k,postRender:O}=d,Q=()=>{const W=performance.now();r=!1,i.delta=n?1e3/60:Math.max(Math.min(W-i.timestamp,_ce),1),i.timestamp=W,i.isProcessing=!0,y.process(i),o.process(i),x.process(i),S.process(i),k.process(i),O.process(i),i.isProcessing=!1,r&&t&&(n=!1,e(Q))},G=()=>{r=!0,n=!0,i.isProcessing||e(Q)};return{schedule:Mw.reduce((W,J)=>{const re=d[J];return W[J]=(ue,ce=!1,he=!1)=>(r||G(),re.schedule(ue,ce,he)),W},{}),cancel:W=>{for(let J=0;J<Mw.length;J++)d[Mw[J]].cancel(W)},state:i,steps:d}}const{schedule:zk,cancel:OFe}=Ij(queueMicrotask,!1);function Cg(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}const Mj=Se.createContext({});let Wz=!1;function xce(e,t,r,n,i){var c;const{visualElement:d}=Se.useContext(wE),y=Se.useContext(Tj),o=Se.useContext(Z1),x=Se.useContext(Ok).reducedMotion,S=Se.useRef();n=n||y.renderer,!S.current&&n&&(S.current=n(e,{visualState:t,parent:d,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:x}));const k=S.current,O=Se.useContext(Mj);k&&!k.projection&&i&&(k.type==="html"||k.type==="svg")&&wce(S.current,r,i,O),Se.useInsertionEffect(()=>{k&&k.update(r,o)});const Q=r[Fj],G=Se.useRef(!!Q&&!window.MotionHandoffIsComplete&&((c=window.MotionHasOptimisedAnimation)===null||c===void 0?void 0:c.call(window,Q)));return Ej(()=>{k&&(k.updateFeatures(),zk.render(k.render),G.current&&k.animationState&&k.animationState.animateChanges())}),Se.useEffect(()=>{k&&(!G.current&&k.animationState&&k.animationState.animateChanges(),G.current=!1,Wz||(Wz=!0,queueMicrotask(bce)))}),k}function bce(){window.MotionHandoffIsComplete=!0}function wce(e,t,r,n){const{layoutId:i,layout:c,drag:d,dragConstraints:y,layoutScroll:o,layoutRoot:x}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:Pj(e.parent)),e.projection.setOptions({layoutId:i,layout:c,alwaysMeasureLayout:!!d||y&&Cg(y),visualElement:e,animationType:typeof c=="string"?c:"both",initialPromotionConfig:n,layoutScroll:o,layoutRoot:x})}function Pj(e){if(e)return e.options.allowProjection!==!1?e.projection:Pj(e.parent)}function Bce(e,t,r){return Se.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):Cg(r)&&(r.current=n))},[t])}function b1(e){return typeof e=="string"||Array.isArray(e)}function w1(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Qk=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Nk=["initial",...Qk];function CE(e){return w1(e.animate)||Nk.some(t=>b1(e[t]))}function Dj(e){return!!(CE(e)||e.variants)}function Cce(e,t){if(CE(e)){const{initial:r,animate:n}=e;return{initial:r===!1||b1(r)?r:void 0,animate:b1(n)?n:void 0}}return e.inherit!==!1?t:{}}function Sce(e){const{initial:t,animate:r}=Cce(e,Se.useContext(wE));return Se.useMemo(()=>({initial:t,animate:r}),[qz(t),qz(r)])}function qz(e){return Array.isArray(e)?e.join(" "):e}const Xz={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},c0={};for(const e in Xz)c0[e]={isEnabled:t=>Xz[e].some(r=>!!t[r])};function Ece(e){for(const t in e)c0[t]={...c0[t],...e[t]}}const Vk=Se.createContext({}),Tce=Symbol.for("motionComponentSymbol"),ja=e=>e;let a4=ja;function Fce({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:i}){e&&Ece(e);function c(y,o){let x;const S={...Se.useContext(Ok),...y,layoutId:Ice(y)},{isStatic:k}=S,O=Sce(y),Q=n(y,k);if(!k&&Uk){Mce();const G=Pce(S);x=G.MeasureLayout,O.visualElement=xce(i,Q,S,t,G.ProjectionNode)}return Je.jsxs(wE.Provider,{value:O,children:[x&&O.visualElement?Je.jsx(x,{visualElement:O.visualElement,...S}):null,r(i,y,Bce(Q,O.visualElement,o),Q,k,O.visualElement)]})}const d=Se.forwardRef(c);return d[Tce]=i,d}function Ice({layoutId:e}){const t=Se.useContext(Vk).id;return t&&e!==void 0?t+"-"+e:e}function Mce(e,t){Se.useContext(Tj).strict}function Pce(e){const{drag:t,layout:r}=c0;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function Dce(e){function t(n,i={}){return Fce(e(n,i))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(n,i)=>(r.has(i)||r.set(i,t(i)),r.get(i))})}const kce=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Hk(e){return typeof e!="string"||e.includes("-")?!1:!!(kce.indexOf(e)>-1||/[A-Z]/u.test(e))}const ZC={};function Rce(e){Object.assign(ZC,e)}const Y1=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],zd=new Set(Y1);function kj(e,{layout:t,layoutId:r}){return zd.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!ZC[e]||e==="opacity")}const Ha=e=>!!(e&&e.getVelocity),Rj=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Td=(e,t,r)=>r>t?t:r<e?e:r,B0={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},T_={...B0,transform:e=>Td(0,1,e)},Pw={...B0,default:1},F_=e=>Math.round(e*1e5)/1e5,jk=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,Lce=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,Oce=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function J1(e){return typeof e=="string"}function Uce(e){return e==null}const $1=e=>({test:t=>J1(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Gh=$1("deg"),Du=$1("%"),Yr=$1("px"),zce=$1("vh"),Qce=$1("vw"),Zz={...Du,parse:e=>Du.parse(e)/100,transform:e=>Du.transform(e*100)},Yz={...B0,transform:Math.round},Gk={borderWidth:Yr,borderTopWidth:Yr,borderRightWidth:Yr,borderBottomWidth:Yr,borderLeftWidth:Yr,borderRadius:Yr,radius:Yr,borderTopLeftRadius:Yr,borderTopRightRadius:Yr,borderBottomRightRadius:Yr,borderBottomLeftRadius:Yr,width:Yr,maxWidth:Yr,height:Yr,maxHeight:Yr,size:Yr,top:Yr,right:Yr,bottom:Yr,left:Yr,padding:Yr,paddingTop:Yr,paddingRight:Yr,paddingBottom:Yr,paddingLeft:Yr,margin:Yr,marginTop:Yr,marginRight:Yr,marginBottom:Yr,marginLeft:Yr,rotate:Gh,rotateX:Gh,rotateY:Gh,rotateZ:Gh,scale:Pw,scaleX:Pw,scaleY:Pw,scaleZ:Pw,skew:Gh,skewX:Gh,skewY:Gh,distance:Yr,translateX:Yr,translateY:Yr,translateZ:Yr,x:Yr,y:Yr,z:Yr,perspective:Yr,transformPerspective:Yr,opacity:T_,originX:Zz,originY:Zz,originZ:Yr,zIndex:Yz,backgroundPositionX:Yr,backgroundPositionY:Yr,fillOpacity:T_,strokeOpacity:T_,numOctaves:Yz},Nce={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Vce=Y1.length;function Hce(e,t,r){let n="",i=!0;for(let c=0;c<Vce;c++){const d=Y1[c],y=e[d];if(y===void 0)continue;let o=!0;if(typeof y=="number"?o=y===(d.startsWith("scale")?1:0):o=parseFloat(y)===0,!o||r){const x=Rj(y,Gk[d]);if(!o){i=!1;const S=Nce[d]||d;n+=`${S}(${x}) `}r&&(t[d]=x)}}return n=n.trim(),r?n=r(t,i?"":n):i&&(n="none"),n}const Lj=e=>t=>typeof t=="string"&&t.startsWith(e),Oj=Lj("--"),jce=Lj("var(--"),Kk=e=>jce(e)?Gce.test(e.split("/*")[0].trim()):!1,Gce=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Wk(e,t,r){const{style:n,vars:i,transformOrigin:c}=e;let d=!1,y=!1;for(const o in t){const x=t[o];if(zd.has(o)){d=!0;continue}else if(Oj(o)){i[o]=x;continue}else{const S=Rj(x,Gk[o]);o.startsWith("origin")?(y=!0,c[o]=S):n[o]=S}}if(t.transform||(d||r?n.transform=Hce(t,e.transform,r):n.transform&&(n.transform="none")),y){const{originX:o="50%",originY:x="50%",originZ:S=0}=c;n.transformOrigin=`${o} ${x} ${S}`}}const qk=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Uj(e,t,r){for(const n in t)!Ha(t[n])&&!kj(n,r)&&(e[n]=t[n])}function Kce({transformTemplate:e},t){return Se.useMemo(()=>{const r=qk();return Wk(r,t,e),Object.assign({},r.vars,r.style)},[t])}function Wce(e,t){const r=e.style||{},n={};return Uj(n,r,e),Object.assign(n,Kce(e,t)),n}function qce(e,t){const r={},n=Wce(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const Xce=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function YC(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Xce.has(e)}let zj=e=>!YC(e);function Zce(e){e&&(zj=t=>t.startsWith("on")?!YC(t):e(t))}try{Zce(require("@emotion/is-prop-valid").default)}catch{}function Yce(e,t,r){const n={};for(const i in e)i==="values"&&typeof e.values=="object"||(zj(i)||r===!0&&YC(i)||!t&&!YC(i)||e.draggable&&i.startsWith("onDrag"))&&(n[i]=e[i]);return n}function Jz(e,t,r){return typeof e=="string"?e:Yr.transform(t+r*e)}function Jce(e,t,r){const n=Jz(t,e.x,e.width),i=Jz(r,e.y,e.height);return`${n} ${i}`}const $ce={offset:"stroke-dashoffset",array:"stroke-dasharray"},eue={offset:"strokeDashoffset",array:"strokeDasharray"};function tue(e,t,r=1,n=0,i=!0){e.pathLength=1;const c=i?$ce:eue;e[c.offset]=Yr.transform(-n);const d=Yr.transform(t),y=Yr.transform(r);e[c.array]=`${d} ${y}`}function Xk(e,{attrX:t,attrY:r,attrScale:n,originX:i,originY:c,pathLength:d,pathSpacing:y=1,pathOffset:o=0,...x},S,k){if(Wk(e,x,k),S){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:O,style:Q,dimensions:G}=e;O.transform&&(G&&(Q.transform=O.transform),delete O.transform),G&&(i!==void 0||c!==void 0||Q.transform)&&(Q.transformOrigin=Jce(G,i!==void 0?i:.5,c!==void 0?c:.5)),t!==void 0&&(O.x=t),r!==void 0&&(O.y=r),n!==void 0&&(O.scale=n),d!==void 0&&tue(O,d,y,o,!1)}const Qj=()=>({...qk(),attrs:{}}),Zk=e=>typeof e=="string"&&e.toLowerCase()==="svg";function rue(e,t,r,n){const i=Se.useMemo(()=>{const c=Qj();return Xk(c,t,Zk(n),e.transformTemplate),{...c.attrs,style:{...c.style}}},[t]);if(e.style){const c={};Uj(c,e.style,e),i.style={...c,...i.style}}return i}function nue(e=!1){return(r,n,i,{latestValues:c},d)=>{const o=(Hk(r)?rue:qce)(n,c,d,r),x=Yce(n,typeof r=="string",e),S=r!==Se.Fragment?{...x,...o,ref:i}:{},{children:k}=n,O=Se.useMemo(()=>Ha(k)?k.get():k,[k]);return Se.createElement(r,{...S,children:O})}}function Nj(e,{style:t,vars:r},n,i){Object.assign(e.style,t,i&&i.getProjectionStyles(n));for(const c in r)e.style.setProperty(c,r[c])}const Vj=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Hj(e,t,r,n){Nj(e,t,void 0,n);for(const i in t.attrs)e.setAttribute(Vj.has(i)?i:BE(i),t.attrs[i])}function Yk(e,t,r){var n;const{style:i}=e,c={};for(const d in i)(Ha(i[d])||t.style&&Ha(t.style[d])||kj(d,e)||((n=r==null?void 0:r.getValue(d))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(c[d]=i[d]);return r&&i&&typeof i.willChange=="string"&&(r.applyWillChange=!1),c}function jj(e,t,r){const n=Yk(e,t,r);for(const i in e)if(Ha(e[i])||Ha(t[i])){const c=Y1.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[c]=e[i]}return n}function $z(e){const t=[{},{}];return e==null||e.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function Jk(e,t,r,n){if(typeof t=="function"){const[i,c]=$z(n);t=t(r!==void 0?r:e.custom,i,c)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,c]=$z(n);t=t(r!==void 0?r:e.custom,i,c)}return t}function $k(e){const t=Se.useRef(null);return t.current===null&&(t.current=e()),t.current}const s4=e=>Array.isArray(e),iue=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),oue=e=>s4(e)?e[e.length-1]||0:e;function YB(e){const t=Ha(e)?e.get():e;return iue(t)?t.toValue():t}const Gj=new Set(["opacity","clipPath","filter","transform"]);function Kj(e){if(zd.has(e))return"transform";if(Gj.has(e))return BE(e)}function SE(e,t){e.indexOf(t)===-1&&e.push(t)}function EE(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}function aue({applyWillChange:e=!1,scrapeMotionValuesFromProps:t,createRenderState:r,onMount:n},i,c,d,y){const o={latestValues:lue(i,c,d,y?!1:e,t),renderState:r()};return n&&(o.mount=x=>n(i,x,o)),o}const Wj=e=>(t,r)=>{const n=Se.useContext(wE),i=Se.useContext(Z1),c=()=>aue(e,t,n,i,r);return r?c():$k(c)};function sue(e,t){const r=Kj(t);r&&SE(e,r)}function e6(e,t,r){const n=Array.isArray(t)?t:[t];for(let i=0;i<n.length;i++){const c=Jk(e,n[i]);if(c){const{transitionEnd:d,transition:y,...o}=c;r(o,d)}}}function lue(e,t,r,n,i){var c;const d={},y=[],o=n&&((c=e.style)===null||c===void 0?void 0:c.willChange)===void 0,x=i(e,{});for(const ee in x)d[ee]=YB(x[ee]);let{initial:S,animate:k}=e;const O=CE(e),Q=Dj(e);t&&Q&&!O&&e.inherit!==!1&&(S===void 0&&(S=t.initial),k===void 0&&(k=t.animate));let G=r?r.initial===!1:!1;G=G||S===!1;const K=G?k:S;return K&&typeof K!="boolean"&&!w1(K)&&e6(e,K,(ee,W)=>{for(const J in ee){let re=ee[J];if(Array.isArray(re)){const ue=G?re.length-1:0;re=re[ue]}re!==null&&(d[J]=re)}for(const J in W)d[J]=W[J]}),o&&(k&&S!==!1&&!w1(k)&&e6(e,k,ee=>{for(const W in ee)sue(y,W)}),y.length&&(d.willChange=y.join(","))),d}const{schedule:Si,cancel:zA,state:ma,steps:XI}=Ij(typeof requestAnimationFrame<"u"?requestAnimationFrame:ja,!0),cue={useVisualState:Wj({scrapeMotionValuesFromProps:jj,createRenderState:Qj,onMount:(e,t,{renderState:r,latestValues:n})=>{Si.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),Si.render(()=>{Xk(r,n,Zk(t.tagName),e.transformTemplate),Hj(t,r)})}})},uue={useVisualState:Wj({applyWillChange:!0,scrapeMotionValuesFromProps:Yk,createRenderState:qk})};function Aue(e,{forwardMotionProps:t=!1},r,n){return{...Hk(e)?cue:uue,preloadedFeatures:r,useRender:nue(t),createVisualElement:n,Component:e}}function bA(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}const qj=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function TE(e,t="page"){return{point:{x:e[`${t}X`],y:e[`${t}Y`]}}}const hue=e=>t=>qj(t)&&e(t,TE(t));function CA(e,t,r,n){return bA(e,t,hue(r),n)}const due=(e,t)=>r=>t(e(r)),SA=(...e)=>e.reduce(due);function Xj(e){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=e,r):!1}}const t6=Xj("dragHorizontal"),r6=Xj("dragVertical");function Zj(e){let t=!1;if(e==="y")t=r6();else if(e==="x")t=t6();else{const r=t6(),n=r6();r&&n?t=()=>{r(),n()}:(r&&r(),n&&n())}return t}function Yj(){const e=Zj(!0);return e?(e(),!1):!0}class Qd{constructor(t){this.isMounted=!1,this.node=t}update(){}}function n6(e,t){const r=t?"pointerenter":"pointerleave",n=t?"onHoverStart":"onHoverEnd",i=(c,d)=>{if(c.pointerType==="touch"||Yj())return;const y=e.getProps();e.animationState&&y.whileHover&&e.animationState.setActive("whileHover",t);const o=y[n];o&&Si.postRender(()=>o(c,d))};return CA(e.current,r,i,{passive:!e.getProps()[n]})}class fue extends Qd{mount(){this.unmount=SA(n6(this.node,!0),n6(this.node,!1))}unmount(){}}class pue extends Qd{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=SA(bA(this.node.current,"focus",()=>this.onFocus()),bA(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Jj=(e,t)=>t?e===t?!0:Jj(e,t.parentElement):!1;function ZI(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,TE(r))}class mue extends Qd{constructor(){super(...arguments),this.removeStartListeners=ja,this.removeEndListeners=ja,this.removeAccessibleListeners=ja,this.startPointerPress=(t,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),c=CA(window,"pointerup",(y,o)=>{if(!this.checkPressEnd())return;const{onTap:x,onTapCancel:S,globalTapTarget:k}=this.node.getProps(),O=!k&&!Jj(this.node.current,y.target)?S:x;O&&Si.update(()=>O(y,o))},{passive:!(n.onTap||n.onPointerUp)}),d=CA(window,"pointercancel",(y,o)=>this.cancelPress(y,o),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=SA(c,d),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=c=>{if(c.key!=="Enter"||this.isPressing)return;const d=y=>{y.key!=="Enter"||!this.checkPressEnd()||ZI("up",(o,x)=>{const{onTap:S}=this.node.getProps();S&&Si.postRender(()=>S(o,x))})};this.removeEndListeners(),this.removeEndListeners=bA(this.node.current,"keyup",d),ZI("down",(y,o)=>{this.startPress(y,o)})},r=bA(this.node.current,"keydown",t),n=()=>{this.isPressing&&ZI("cancel",(c,d)=>this.cancelPress(c,d))},i=bA(this.node.current,"blur",n);this.removeAccessibleListeners=SA(r,i)}}startPress(t,r){this.isPressing=!0;const{onTapStart:n,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Si.postRender(()=>n(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Yj()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Si.postRender(()=>n(t,r))}mount(){const t=this.node.getProps(),r=CA(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=bA(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=SA(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const l4=new WeakMap,YI=new WeakMap,gue=e=>{const t=l4.get(e.target);t&&t(e)},vue=e=>{e.forEach(gue)};function yue({root:e,...t}){const r=e||document;YI.has(r)||YI.set(r,{});const n=YI.get(r),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(vue,{root:e,...t})),n[i]}function _ue(e,t,r){const n=yue(t);return l4.set(e,r),n.observe(e),()=>{l4.delete(e),n.unobserve(e)}}const xue={some:0,all:1};class bue extends Qd{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:i="some",once:c}=t,d={root:r?r.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:xue[i]},y=o=>{const{isIntersecting:x}=o;if(this.isInView===x||(this.isInView=x,c&&!x&&this.hasEnteredView))return;x&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",x);const{onViewportEnter:S,onViewportLeave:k}=this.node.getProps(),O=x?S:k;O&&O(o)};return _ue(this.node.current,d,y)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(wue(t,r))&&this.startObserver()}unmount(){}}function wue({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const Bue={inView:{Feature:bue},tap:{Feature:mue},focus:{Feature:pue},hover:{Feature:fue}};function $j(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function FE(e,t,r){const n=e.getProps();return Jk(n,t,r!==void 0?r:n.custom,e)}const EA=e=>e*1e3,TA=e=>e/1e3,Cue={type:"spring",stiffness:500,damping:25,restSpeed:10},Sue=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Eue={type:"keyframes",duration:.8},Tue={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Fue=(e,{keyframes:t})=>t.length>2?Eue:zd.has(e)?e.startsWith("scale")?Sue(t[1]):Cue:Tue;function Iue({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:c,repeatType:d,repeatDelay:y,from:o,elapsed:x,...S}){return!!Object.keys(S).length}function e2(e,t){return e[t]||e.default||e}const Mue=e=>e!==null;function IE(e,{repeat:t,repeatType:r="loop"},n){const i=e.filter(Mue),c=t&&r!=="loop"&&t%2===1?0:i.length-1;return!c||n===void 0?i[c]:n}const eG=e=>/^0[^.\s]+$/u.test(e);function Pue(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||eG(e):!0}const tG=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),Due=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function kue(e){const t=Due.exec(e);if(!t)return[,];const[,r,n,i]=t;return[`--${r??n}`,i]}function rG(e,t,r=1){const[n,i]=kue(e);if(!n)return;const c=window.getComputedStyle(t).getPropertyValue(n);if(c){const d=c.trim();return tG(d)?parseFloat(d):d}return Kk(i)?rG(i,t,r+1):i}const Rue=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),i6=e=>e===B0||e===Yr,o6=(e,t)=>parseFloat(e.split(", ")[t]),a6=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const i=n.match(/^matrix3d\((.+)\)$/u);if(i)return o6(i[1],t);{const c=n.match(/^matrix\((.+)\)$/u);return c?o6(c[1],e):0}},Lue=new Set(["x","y","z"]),Oue=Y1.filter(e=>!Lue.has(e));function Uue(e){const t=[];return Oue.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const u0={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:a6(4,13),y:a6(5,14)};u0.translateX=u0.x;u0.translateY=u0.y;const nG=e=>t=>t.test(e),zue={test:e=>e==="auto",parse:e=>e},iG=[B0,Yr,Du,Gh,Qce,zce,zue],s6=e=>iG.find(nG(e)),lp=new Set;let c4=!1,u4=!1;function oG(){if(u4){const e=Array.from(lp).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const i=Uue(n);i.length&&(r.set(n,i),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const i=r.get(n);i&&i.forEach(([c,d])=>{var y;(y=n.getValue(c))===null||y===void 0||y.set(d)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}u4=!1,c4=!1,lp.forEach(e=>e.complete()),lp.clear()}function aG(){lp.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(u4=!0)})}function Que(){aG(),oG()}class t2{constructor(t,r,n,i,c,d=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=i,this.element=c,this.isAsync=d}scheduleResolve(){this.isScheduled=!0,this.isAsync?(lp.add(this),c4||(c4=!0,Si.read(aG),Si.resolveKeyframes(oG))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:i}=this;for(let c=0;c<t.length;c++)if(t[c]===null)if(c===0){const d=i==null?void 0:i.get(),y=t[t.length-1];if(d!==void 0)t[0]=d;else if(n&&r){const o=n.readValue(r,y);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=y),i&&d===void 0&&i.set(t[0])}else t[c]=t[c-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),lp.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,lp.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const r2=(e,t)=>r=>!!(J1(r)&&Oce.test(r)&&r.startsWith(e)||t&&!Uce(r)&&Object.prototype.hasOwnProperty.call(r,t)),sG=(e,t,r)=>n=>{if(!J1(n))return n;const[i,c,d,y]=n.match(jk);return{[e]:parseFloat(i),[t]:parseFloat(c),[r]:parseFloat(d),alpha:y!==void 0?parseFloat(y):1}},Nue=e=>Td(0,255,e),JI={...B0,transform:e=>Math.round(Nue(e))},$f={test:r2("rgb","red"),parse:sG("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+JI.transform(e)+", "+JI.transform(t)+", "+JI.transform(r)+", "+F_(T_.transform(n))+")"};function Vue(e){let t="",r="",n="",i="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),i=e.substring(4,5),t+=t,r+=r,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const A4={test:r2("#"),parse:Vue,transform:$f.transform},Sg={test:r2("hsl","hue"),parse:sG("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Du.transform(F_(t))+", "+Du.transform(F_(r))+", "+F_(T_.transform(n))+")"},Qa={test:e=>$f.test(e)||A4.test(e)||Sg.test(e),parse:e=>$f.test(e)?$f.parse(e):Sg.test(e)?Sg.parse(e):A4.parse(e),transform:e=>J1(e)?e:e.hasOwnProperty("red")?$f.transform(e):Sg.transform(e)};function Hue(e){var t,r;return isNaN(e)&&J1(e)&&(((t=e.match(jk))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(Lce))===null||r===void 0?void 0:r.length)||0)>0}const lG="number",cG="color",jue="var",Gue="var(",l6="${}",Kue=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function B1(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},i=[];let c=0;const y=t.replace(Kue,o=>(Qa.test(o)?(n.color.push(c),i.push(cG),r.push(Qa.parse(o))):o.startsWith(Gue)?(n.var.push(c),i.push(jue),r.push(o)):(n.number.push(c),i.push(lG),r.push(parseFloat(o))),++c,l6)).split(l6);return{values:r,split:y,indexes:n,types:i}}function uG(e){return B1(e).values}function AG(e){const{split:t,types:r}=B1(e),n=t.length;return i=>{let c="";for(let d=0;d<n;d++)if(c+=t[d],i[d]!==void 0){const y=r[d];y===lG?c+=F_(i[d]):y===cG?c+=Qa.transform(i[d]):c+=i[d]}return c}}const Wue=e=>typeof e=="number"?0:e;function que(e){const t=uG(e);return AG(e)(t.map(Wue))}const Fd={test:Hue,parse:uG,createTransformer:AG,getAnimatableNone:que},Xue=new Set(["brightness","contrast","saturate","opacity"]);function Zue(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(jk)||[];if(!n)return e;const i=r.replace(n,"");let c=Xue.has(t)?1:0;return n!==r&&(c*=100),t+"("+c+i+")"}const Yue=/\b([a-z-]*)\(.*?\)/gu,h4={...Fd,getAnimatableNone:e=>{const t=e.match(Yue);return t?t.map(Zue).join(" "):e}},Jue={...Gk,color:Qa,backgroundColor:Qa,outlineColor:Qa,fill:Qa,stroke:Qa,borderColor:Qa,borderTopColor:Qa,borderRightColor:Qa,borderBottomColor:Qa,borderLeftColor:Qa,filter:h4,WebkitFilter:h4},n2=e=>Jue[e];function hG(e,t){let r=n2(e);return r!==h4&&(r=Fd),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const $ue=new Set(["auto","none","0"]);function eAe(e,t,r){let n=0,i;for(;n<e.length&&!i;){const c=e[n];typeof c=="string"&&!$ue.has(c)&&B1(c).values.length&&(i=e[n]),n++}if(i&&r)for(const c of t)e[c]=hG(r,i)}class dG extends t2{constructor(t,r,n,i,c){super(t,r,n,i,c,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let o=0;o<t.length;o++){let x=t[o];if(typeof x=="string"&&(x=x.trim(),Kk(x))){const S=rG(x,r.current);S!==void 0&&(t[o]=S),o===t.length-1&&(this.finalKeyframe=x)}}if(this.resolveNoneKeyframes(),!Rue.has(n)||t.length!==2)return;const[i,c]=t,d=s6(i),y=s6(c);if(d!==y)if(i6(d)&&i6(y))for(let o=0;o<t.length;o++){const x=t[o];typeof x=="string"&&(t[o]=parseFloat(x))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let i=0;i<t.length;i++)Pue(t[i])&&n.push(i);n.length&&eAe(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=u0[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const i=r[r.length-1];i!==void 0&&t.getValue(n,i).jump(i,!1)}measureEndState(){var t;const{element:r,name:n,unresolvedKeyframes:i}=this;if(!r||!r.current)return;const c=r.getValue(n);c&&c.jump(this.measuredOrigin,!1);const d=i.length-1,y=i[d];i[d]=u0[n](r.measureViewportBox(),window.getComputedStyle(r.current)),y!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=y),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([o,x])=>{r.getValue(o).set(x)}),this.resolveNoneKeyframes()}}function fG(e){let t;return()=>(t===void 0&&(t=e()),t)}let JB;function tAe(){JB=void 0}const FA={now:()=>(JB===void 0&&FA.set(ma.isProcessing||vce.useManualTiming?ma.timestamp:performance.now()),JB),set:e=>{JB=e,queueMicrotask(tAe)}},c6=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Fd.test(e)||e==="0")&&!e.startsWith("url("));function rAe(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function nAe(e,t,r,n){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const c=e[e.length-1],d=c6(i,t),y=c6(c,t);return!d||!y?!1:rAe(e)||r==="spring"&&n}const iAe=40;class pG{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:i=0,repeatDelay:c=0,repeatType:d="loop",...y}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=FA.now(),this.options={autoplay:t,delay:r,type:n,repeat:i,repeatDelay:c,repeatType:d,...y},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>iAe?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Que(),this._resolved}onKeyframesResolved(t,r){this.resolvedAt=FA.now(),this.hasAttemptedResolve=!0;const{name:n,type:i,velocity:c,delay:d,onComplete:y,onUpdate:o,isGenerator:x}=this.options;if(!x&&!nAe(t,n,i,c))if(d)this.options.duration=0;else{o==null||o(IE(t,this.options,r)),y==null||y(),this.resolveFinishedPromise();return}const S=this.initPlayback(t,r);S!==!1&&(this._resolved={keyframes:t,finalKeyframe:r,...S},this.onPostResolved())}onPostResolved(){}then(t,r){return this.currentFinishedPromise.then(t,r)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}function mG(e,t){return t?e*(1e3/t):0}const oAe=5;function gG(e,t,r){const n=Math.max(t-oAe,0);return mG(r-e(n),t-n)}const $I=.001,aAe=.01,sAe=10,lAe=.05,cAe=1;function uAe({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let i,c,d=1-t;d=Td(lAe,cAe,d),e=Td(aAe,sAe,TA(e)),d<1?(i=x=>{const S=x*d,k=S*e,O=S-r,Q=d4(x,d),G=Math.exp(-k);return $I-O/Q*G},c=x=>{const k=x*d*e,O=k*r+r,Q=Math.pow(d,2)*Math.pow(x,2)*e,G=Math.exp(-k),K=d4(Math.pow(x,2),d);return(-i(x)+$I>0?-1:1)*((O-Q)*G)/K}):(i=x=>{const S=Math.exp(-x*e),k=(x-r)*e+1;return-$I+S*k},c=x=>{const S=Math.exp(-x*e),k=(r-x)*(e*e);return S*k});const y=5/e,o=hAe(i,c,y);if(e=EA(e),isNaN(o))return{stiffness:100,damping:10,duration:e};{const x=Math.pow(o,2)*n;return{stiffness:x,damping:d*2*Math.sqrt(n*x),duration:e}}}const AAe=12;function hAe(e,t,r){let n=r;for(let i=1;i<AAe;i++)n=n-e(n)/t(n);return n}function d4(e,t){return e*Math.sqrt(1-t*t)}const dAe=["duration","bounce"],fAe=["stiffness","damping","mass"];function u6(e,t){return t.some(r=>e[r]!==void 0)}function pAe(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!u6(e,fAe)&&u6(e,dAe)){const r=uAe(e);t={...t,...r,mass:1},t.isResolvedFromDuration=!0}return t}function vG({keyframes:e,restDelta:t,restSpeed:r,...n}){const i=e[0],c=e[e.length-1],d={done:!1,value:i},{stiffness:y,damping:o,mass:x,duration:S,velocity:k,isResolvedFromDuration:O}=pAe({...n,velocity:-TA(n.velocity||0)}),Q=k||0,G=o/(2*Math.sqrt(y*x)),K=c-i,ee=TA(Math.sqrt(y/x)),W=Math.abs(K)<5;r||(r=W?.01:2),t||(t=W?.005:.5);let J;if(G<1){const re=d4(ee,G);J=ue=>{const ce=Math.exp(-G*ee*ue);return c-ce*((Q+G*ee*K)/re*Math.sin(re*ue)+K*Math.cos(re*ue))}}else if(G===1)J=re=>c-Math.exp(-ee*re)*(K+(Q+ee*K)*re);else{const re=ee*Math.sqrt(G*G-1);J=ue=>{const ce=Math.exp(-G*ee*ue),he=Math.min(re*ue,300);return c-ce*((Q+G*ee*K)*Math.sinh(he)+re*K*Math.cosh(he))/re}}return{calculatedDuration:O&&S||null,next:re=>{const ue=J(re);if(O)d.done=re>=S;else{let ce=0;G<1&&(ce=re===0?EA(Q):gG(J,re,ue));const he=Math.abs(ce)<=r,xe=Math.abs(c-ue)<=t;d.done=he&&xe}return d.value=d.done?c:ue,d}}}function A6({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:c=500,modifyTarget:d,min:y,max:o,restDelta:x=.5,restSpeed:S}){const k=e[0],O={done:!1,value:k},Q=fe=>y!==void 0&&fe<y||o!==void 0&&fe>o,G=fe=>y===void 0?o:o===void 0||Math.abs(y-fe)<Math.abs(o-fe)?y:o;let K=r*t;const ee=k+K,W=d===void 0?ee:d(ee);W!==ee&&(K=W-k);const J=fe=>-K*Math.exp(-fe/n),re=fe=>W+J(fe),ue=fe=>{const Ue=J(fe),Ge=re(fe);O.done=Math.abs(Ue)<=x,O.value=O.done?W:Ge};let ce,he;const xe=fe=>{Q(O.value)&&(ce=fe,he=vG({keyframes:[O.value,G(O.value)],velocity:gG(re,fe,O.value),damping:i,stiffness:c,restDelta:x,restSpeed:S}))};return xe(0),{calculatedDuration:null,next:fe=>{let Ue=!1;return!he&&ce===void 0&&(Ue=!0,ue(fe),xe(fe)),ce!==void 0&&fe>=ce?he.next(fe-ce):(!Ue&&ue(fe),O)}}}const yG=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,mAe=1e-7,gAe=12;function vAe(e,t,r,n,i){let c,d,y=0;do d=t+(r-t)/2,c=yG(d,n,i)-e,c>0?r=d:t=d;while(Math.abs(c)>mAe&&++y<gAe);return d}function ex(e,t,r,n){if(e===t&&r===n)return ja;const i=c=>vAe(c,0,1,e,r);return c=>c===0||c===1?c:yG(i(c),t,n)}const yAe=ex(.42,0,1,1),_Ae=ex(0,0,.58,1),_G=ex(.42,0,.58,1),xAe=e=>Array.isArray(e)&&typeof e[0]!="number",xG=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,bG=e=>t=>1-e(1-t),i2=e=>1-Math.sin(Math.acos(e)),wG=bG(i2),bAe=xG(i2),BG=ex(.33,1.53,.69,.99),o2=bG(BG),wAe=xG(o2),BAe=e=>(e*=2)<1?.5*o2(e):.5*(2-Math.pow(2,-10*(e-1))),h6={linear:ja,easeIn:yAe,easeInOut:_G,easeOut:_Ae,circIn:i2,circInOut:bAe,circOut:wG,backIn:o2,backInOut:wAe,backOut:BG,anticipate:BAe},d6=e=>{if(Array.isArray(e)){a4(e.length===4);const[t,r,n,i]=e;return ex(t,r,n,i)}else if(typeof e=="string")return a4(h6[e]!==void 0),h6[e];return e},C1=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},no=(e,t,r)=>e+(t-e)*r;function eM(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function CAe({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let i=0,c=0,d=0;if(!t)i=c=d=r;else{const y=r<.5?r*(1+t):r+t-r*t,o=2*r-y;i=eM(o,y,e+1/3),c=eM(o,y,e),d=eM(o,y,e-1/3)}return{red:Math.round(i*255),green:Math.round(c*255),blue:Math.round(d*255),alpha:n}}function JC(e,t){return r=>r>0?t:e}const tM=(e,t,r)=>{const n=e*e,i=r*(t*t-n)+n;return i<0?0:Math.sqrt(i)},SAe=[A4,$f,Sg],EAe=e=>SAe.find(t=>t.test(e));function f6(e){const t=EAe(e);if(!t)return!1;let r=t.parse(e);return t===Sg&&(r=CAe(r)),r}const p6=(e,t)=>{const r=f6(e),n=f6(t);if(!r||!n)return JC(e,t);const i={...r};return c=>(i.red=tM(r.red,n.red,c),i.green=tM(r.green,n.green,c),i.blue=tM(r.blue,n.blue,c),i.alpha=no(r.alpha,n.alpha,c),$f.transform(i))},f4=new Set(["none","hidden"]);function TAe(e,t){return f4.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function FAe(e,t){return r=>no(e,t,r)}function a2(e){return typeof e=="number"?FAe:typeof e=="string"?Kk(e)?JC:Qa.test(e)?p6:PAe:Array.isArray(e)?CG:typeof e=="object"?Qa.test(e)?p6:IAe:JC}function CG(e,t){const r=[...e],n=r.length,i=e.map((c,d)=>a2(c)(c,t[d]));return c=>{for(let d=0;d<n;d++)r[d]=i[d](c);return r}}function IAe(e,t){const r={...e,...t},n={};for(const i in r)e[i]!==void 0&&t[i]!==void 0&&(n[i]=a2(e[i])(e[i],t[i]));return i=>{for(const c in n)r[c]=n[c](i);return r}}function MAe(e,t){var r;const n=[],i={color:0,var:0,number:0};for(let c=0;c<t.values.length;c++){const d=t.types[c],y=e.indexes[d][i[d]],o=(r=e.values[y])!==null&&r!==void 0?r:0;n[c]=o,i[d]++}return n}const PAe=(e,t)=>{const r=Fd.createTransformer(t),n=B1(e),i=B1(t);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?f4.has(e)&&!i.values.length||f4.has(t)&&!n.values.length?TAe(e,t):SA(CG(MAe(n,i),i.values),r):JC(e,t)};function SG(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?no(e,t,r):a2(e)(e,t)}function DAe(e,t,r){const n=[],i=r||SG,c=e.length-1;for(let d=0;d<c;d++){let y=i(e[d],e[d+1]);if(t){const o=Array.isArray(t)?t[d]||ja:t;y=SA(o,y)}n.push(y)}return n}function kAe(e,t,{clamp:r=!0,ease:n,mixer:i}={}){const c=e.length;if(a4(c===t.length),c===1)return()=>t[0];if(c===2&&e[0]===e[1])return()=>t[1];e[0]>e[c-1]&&(e=[...e].reverse(),t=[...t].reverse());const d=DAe(t,n,i),y=d.length,o=x=>{let S=0;if(y>1)for(;S<e.length-2&&!(x<e[S+1]);S++);const k=C1(e[S],e[S+1],x);return d[S](k)};return r?x=>o(Td(e[0],e[c-1],x)):o}function RAe(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const i=C1(0,t,n);e.push(no(r,1,i))}}function LAe(e){const t=[0];return RAe(t,e.length-1),t}function OAe(e,t){return e.map(r=>r*t)}function UAe(e,t){return e.map(()=>t||_G).splice(0,e.length-1)}function $C({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const i=xAe(n)?n.map(d6):d6(n),c={done:!1,value:t[0]},d=OAe(r&&r.length===t.length?r:LAe(t),e),y=kAe(d,t,{ease:Array.isArray(i)?i:UAe(t,i)});return{calculatedDuration:e,next:o=>(c.value=y(o),c.done=o>=e,c)}}const m6=2e4;function zAe(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<m6;)t+=r,n=e.next(t);return t>=m6?1/0:t}const QAe=e=>{const t=({timestamp:r})=>e(r);return{start:()=>Si.update(t,!0),stop:()=>zA(t),now:()=>ma.isProcessing?ma.timestamp:FA.now()}},NAe={decay:A6,inertia:A6,tween:$C,keyframes:$C,spring:vG},VAe=e=>e/100;class s2 extends pG{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:o}=this.options;o&&o()};const{name:r,motionValue:n,element:i,keyframes:c}=this.options,d=(i==null?void 0:i.KeyframeResolver)||t2,y=(o,x)=>this.onKeyframesResolved(o,x);this.resolver=new d(c,y,r,n,i),this.resolver.scheduleResolve()}initPlayback(t){const{type:r="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:c,velocity:d=0}=this.options,y=NAe[r]||$C;let o,x;y!==$C&&typeof t[0]!="number"&&(o=SA(VAe,SG(t[0],t[1])),t=[0,100]);const S=y({...this.options,keyframes:t});c==="mirror"&&(x=y({...this.options,keyframes:[...t].reverse(),velocity:-d})),S.calculatedDuration===null&&(S.calculatedDuration=zAe(S));const{calculatedDuration:k}=S,O=k+i,Q=O*(n+1)-i;return{generator:S,mirroredGenerator:x,mapPercentToKeyframes:o,calculatedDuration:k,resolvedDuration:O,totalDuration:Q}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,r=!1){const{resolved:n}=this;if(!n){const{keyframes:fe}=this.options;return{done:!0,value:fe[fe.length-1]}}const{finalKeyframe:i,generator:c,mirroredGenerator:d,mapPercentToKeyframes:y,keyframes:o,calculatedDuration:x,totalDuration:S,resolvedDuration:k}=n;if(this.startTime===null)return c.next(0);const{delay:O,repeat:Q,repeatType:G,repeatDelay:K,onUpdate:ee}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-S/this.speed,this.startTime)),r?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const W=this.currentTime-O*(this.speed>=0?1:-1),J=this.speed>=0?W<0:W>S;this.currentTime=Math.max(W,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=S);let re=this.currentTime,ue=c;if(Q){const fe=Math.min(this.currentTime,S)/k;let Ue=Math.floor(fe),Ge=fe%1;!Ge&&fe>=1&&(Ge=1),Ge===1&&Ue--,Ue=Math.min(Ue,Q+1),!!(Ue%2)&&(G==="reverse"?(Ge=1-Ge,K&&(Ge-=K/k)):G==="mirror"&&(ue=d)),re=Td(0,1,Ge)*k}const ce=J?{done:!1,value:o[0]}:ue.next(re);y&&(ce.value=y(ce.value));let{done:he}=ce;!J&&x!==null&&(he=this.speed>=0?this.currentTime>=S:this.currentTime<=0);const xe=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&he);return xe&&i!==void 0&&(ce.value=IE(o,this.options,i)),ee&&ee(ce.value),xe&&this.finish(),ce}get duration(){const{resolved:t}=this;return t?TA(t.calculatedDuration):0}get time(){return TA(this.currentTime)}set time(t){t=EA(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=TA(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=QAe,onPlay:r,startTime:n}=this.options;this.driver||(this.driver=t(c=>this.tick(c))),r&&r();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const EG=e=>Array.isArray(e)&&typeof e[0]=="number";function TG(e){return!!(!e||typeof e=="string"&&e in l2||EG(e)||Array.isArray(e)&&e.every(TG))}const Zy=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,l2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Zy([0,.65,.55,1]),circOut:Zy([.55,0,1,.45]),backIn:Zy([.31,.01,.66,-.59]),backOut:Zy([.33,1.53,.69,.99])};function HAe(e){return FG(e)||l2.easeOut}function FG(e){if(e)return EG(e)?Zy(e):Array.isArray(e)?e.map(HAe):l2[e]}function jAe(e,t,r,{delay:n=0,duration:i=300,repeat:c=0,repeatType:d="loop",ease:y,times:o}={}){const x={[t]:r};o&&(x.offset=o);const S=FG(y);return Array.isArray(S)&&(x.easing=S),e.animate(x,{delay:n,duration:i,easing:Array.isArray(S)?"linear":S,fill:"both",iterations:c+1,direction:d==="reverse"?"alternate":"normal"})}const GAe=fG(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),eS=10,KAe=2e4;function WAe(e){return e.type==="spring"||!TG(e.ease)}function qAe(e,t){const r=new s2({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:e[0]};const i=[];let c=0;for(;!n.done&&c<KAe;)n=r.sample(c),i.push(n.value),c+=eS;return{times:void 0,keyframes:i,duration:c-eS,ease:"linear"}}class g6 extends pG{constructor(t){super(t);const{name:r,motionValue:n,element:i,keyframes:c}=this.options;this.resolver=new dG(c,(d,y)=>this.onKeyframesResolved(d,y),r,n,i),this.resolver.scheduleResolve()}initPlayback(t,r){var n;let{duration:i=300,times:c,ease:d,type:y,motionValue:o,name:x,startTime:S}=this.options;if(!(!((n=o.owner)===null||n===void 0)&&n.current))return!1;if(WAe(this.options)){const{onComplete:O,onUpdate:Q,motionValue:G,element:K,...ee}=this.options,W=qAe(t,ee);t=W.keyframes,t.length===1&&(t[1]=t[0]),i=W.duration,c=W.times,d=W.ease,y="keyframes"}const k=jAe(o.owner.current,x,t,{...this.options,duration:i,times:c,ease:d});return k.startTime=S??this.calcStartTime(),this.pendingTimeline?(k.timeline=this.pendingTimeline,this.pendingTimeline=void 0):k.onfinish=()=>{const{onComplete:O}=this.options;o.set(IE(t,this.options,r)),O&&O(),this.cancel(),this.resolveFinishedPromise()},{animation:k,duration:i,times:c,type:y,ease:d,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:r}=t;return TA(r)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:r}=t;return TA(r.currentTime||0)}set time(t){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.currentTime=EA(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:r}=t;return r.playbackRate}set speed(t){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:r}=t;return r.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:r}=t;return r.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:r}=this;if(!r)return ja;const{animation:n}=r;n.timeline=t,n.onfinish=null}return ja}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:r,keyframes:n,duration:i,type:c,ease:d,times:y}=t;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:x,onUpdate:S,onComplete:k,element:O,...Q}=this.options,G=new s2({...Q,keyframes:n,duration:i,type:c,ease:d,times:y,isGenerator:!0}),K=EA(this.time);x.setWithVelocity(G.sample(K-eS).value,G.sample(K).value,eS)}const{onStop:o}=this.options;o&&o(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:r,name:n,repeatDelay:i,repeatType:c,damping:d,type:y}=t;return GAe()&&n&&Gj.has(n)&&r&&r.owner&&r.owner.current instanceof HTMLElement&&!r.owner.getProps().onUpdate&&!i&&c!=="mirror"&&d!==0&&y!=="inertia"}}function XAe(e,t){let r;const n=()=>{const{currentTime:i}=t,d=(i===null?0:i.value)/100;r!==d&&e(d),r=d};return Si.update(n,!0),()=>zA(n)}const ZAe=fG(()=>window.ScrollTimeline!==void 0);class YAe{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,r){return Promise.all(this.animations).then(t).catch(r)}getAll(t){return this.animations[0][t]}setAll(t,r){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=r}attachTimeline(t){const r=this.animations.map(n=>{if(ZAe()&&n.attachTimeline)n.attachTimeline(t);else return n.pause(),XAe(i=>{n.time=n.duration*i},t)});return()=>{r.forEach((n,i)=>{n&&n(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let r=0;r<this.animations.length;r++)t=Math.max(t,this.animations[r].duration);return t}runAll(t){this.animations.forEach(r=>r[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const c2=(e,t,r,n={},i,c,d)=>y=>{const o=e2(n,e)||{},x=o.delay||n.delay||0;let{elapsed:S=0}=n;S=S-EA(x);let k={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-S,onUpdate:Q=>{t.set(Q),o.onUpdate&&o.onUpdate(Q)},onComplete:()=>{y(),o.onComplete&&o.onComplete(),d&&d()},onStop:d,name:e,motionValue:t,element:c?void 0:i};Iue(o)||(k={...k,...Fue(e,k)}),k.duration&&(k.duration=EA(k.duration)),k.repeatDelay&&(k.repeatDelay=EA(k.repeatDelay)),k.from!==void 0&&(k.keyframes[0]=k.from);let O=!1;if((k.type===!1||k.duration===0&&!k.repeatDelay)&&(k.duration=0,k.delay===0&&(O=!0)),O&&!c&&t.get()!==void 0){const Q=IE(k.keyframes,o);if(Q!==void 0)return Si.update(()=>{k.onUpdate(Q),k.onComplete()}),new YAe([])}return!c&&g6.supports(k)?new g6(k):new s2(k)};class u2{constructor(){this.subscriptions=[]}add(t){return SE(this.subscriptions,t),()=>EE(this.subscriptions,t)}notify(t,r,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,r,n);else for(let c=0;c<i;c++){const d=this.subscriptions[c];d&&d(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const v6=30,JAe=e=>!isNaN(parseFloat(e));class IG{constructor(t,r={}){this.version="11.3.28",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,i=!0)=>{const c=FA.now();this.updatedAt!==c&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=FA.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=JAe(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new u2);const n=this.events[t].add(r);return t==="change"?()=>{n(),Si.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=FA.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>v6)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,v6);return mG(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function S1(e,t){return new IG(e,t)}function $Ae(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,S1(r))}function ehe(e,t){const r=FE(e,t);let{transitionEnd:n={},transition:i={},...c}=r||{};c={...c,...n};for(const d in c){const y=oue(c[d]);$Ae(e,d,y)}}function MG(e){return e.getProps()[Fj]}class the extends IG{constructor(){super(...arguments),this.output=[],this.counts=new Map}add(t){const r=Kj(t);if(!r)return;const n=this.counts.get(r)||0;this.counts.set(r,n+1),n===0&&(this.output.push(r),this.update());let i=!1;return()=>{if(i)return;i=!0;const c=this.counts.get(r)-1;this.counts.set(r,c),c===0&&(EE(this.output,r),this.update())}}update(){this.set(this.output.length?this.output.join(", "):"auto")}}function rhe(e){return!!(Ha(e)&&e.add)}function p4(e,t){var r;if(!e.applyWillChange)return;let n=e.getValue("willChange");if(!n&&!(!((r=e.props.style)===null||r===void 0)&&r.willChange)&&(n=new the("auto"),e.addValue("willChange",n)),rhe(n))return n.add(t)}function nhe({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function PG(e,t,{delay:r=0,transitionOverride:n,type:i}={}){var c;let{transition:d=e.getDefaultTransition(),transitionEnd:y,...o}=t;n&&(d=n);const x=[],S=i&&e.animationState&&e.animationState.getState()[i];for(const k in o){const O=e.getValue(k,(c=e.latestValues[k])!==null&&c!==void 0?c:null),Q=o[k];if(Q===void 0||S&&nhe(S,k))continue;const G={delay:r,...e2(d||{},k)};let K=!1;if(window.MotionHandoffAnimation){const W=MG(e);if(W){const J=window.MotionHandoffAnimation(W,k,Si);J!==null&&(G.startTime=J,K=!0)}}O.start(c2(k,O,Q,e.shouldReduceMotion&&zd.has(k)?{type:!1}:G,e,K,p4(e,k)));const ee=O.animation;ee&&x.push(ee)}return y&&Promise.all(x).then(()=>{Si.update(()=>{y&&ehe(e,y)})}),x}function m4(e,t,r={}){var n;const i=FE(e,t,r.type==="exit"?(n=e.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:c=e.getDefaultTransition()||{}}=i||{};r.transitionOverride&&(c=r.transitionOverride);const d=i?()=>Promise.all(PG(e,i,r)):()=>Promise.resolve(),y=e.variantChildren&&e.variantChildren.size?(x=0)=>{const{delayChildren:S=0,staggerChildren:k,staggerDirection:O}=c;return ihe(e,t,S+x,k,O,r)}:()=>Promise.resolve(),{when:o}=c;if(o){const[x,S]=o==="beforeChildren"?[d,y]:[y,d];return x().then(()=>S())}else return Promise.all([d(),y(r.delay)])}function ihe(e,t,r=0,n=0,i=1,c){const d=[],y=(e.variantChildren.size-1)*n,o=i===1?(x=0)=>x*n:(x=0)=>y-x*n;return Array.from(e.variantChildren).sort(ohe).forEach((x,S)=>{x.notify("AnimationStart",t),d.push(m4(x,t,{...c,delay:r+o(S)}).then(()=>x.notify("AnimationComplete",t)))}),Promise.all(d)}function ohe(e,t){return e.sortNodePosition(t)}function ahe(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const i=t.map(c=>m4(e,c,r));n=Promise.all(i)}else if(typeof t=="string")n=m4(e,t,r);else{const i=typeof t=="function"?FE(e,t,r.custom):t;n=Promise.all(PG(e,i,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}const she=[...Qk].reverse(),lhe=Qk.length;function che(e){return t=>Promise.all(t.map(({animation:r,options:n})=>ahe(e,r,n)))}function uhe(e){let t=che(e),r=y6(),n=!0;const i=o=>(x,S)=>{var k;const O=FE(e,S,o==="exit"?(k=e.presenceContext)===null||k===void 0?void 0:k.custom:void 0);if(O){const{transition:Q,transitionEnd:G,...K}=O;x={...x,...K,...G}}return x};function c(o){t=o(e)}function d(o){const x=e.getProps(),S=e.getVariantContext(!0)||{},k=[],O=new Set;let Q={},G=1/0;for(let ee=0;ee<lhe;ee++){const W=she[ee],J=r[W],re=x[W]!==void 0?x[W]:S[W],ue=b1(re),ce=W===o?J.isActive:null;ce===!1&&(G=ee);let he=re===S[W]&&re!==x[W]&&ue;if(he&&n&&e.manuallyAnimateOnMount&&(he=!1),J.protectedKeys={...Q},!J.isActive&&ce===null||!re&&!J.prevProp||w1(re)||typeof re=="boolean")continue;let fe=Ahe(J.prevProp,re)||W===o&&J.isActive&&!he&&ue||ee>G&&ue,Ue=!1;const Ge=Array.isArray(re)?re:[re];let He=Ge.reduce(i(W),{});ce===!1&&(He={});const{prevResolvedValues:tt={}}=J,pt={...tt,...He},gt=Et=>{fe=!0,O.has(Et)&&(Ue=!0,O.delete(Et)),J.needsAnimating[Et]=!0;const ot=e.getValue(Et);ot&&(ot.liveStyle=!1)};for(const Et in pt){const ot=He[Et],Gt=tt[Et];if(Q.hasOwnProperty(Et))continue;let Pt=!1;s4(ot)&&s4(Gt)?Pt=!$j(ot,Gt):Pt=ot!==Gt,Pt?ot!=null?gt(Et):O.add(Et):ot!==void 0&&O.has(Et)?gt(Et):J.protectedKeys[Et]=!0}J.prevProp=re,J.prevResolvedValues=He,J.isActive&&(Q={...Q,...He}),n&&e.blockInitialAnimation&&(fe=!1),fe&&(!he||Ue)&&k.push(...Ge.map(Et=>({animation:Et,options:{type:W}})))}if(O.size){const ee={};O.forEach(W=>{const J=e.getBaseTarget(W),re=e.getValue(W);re&&(re.liveStyle=!0),ee[W]=J??null}),k.push({animation:ee})}let K=!!k.length;return n&&(x.initial===!1||x.initial===x.animate)&&!e.manuallyAnimateOnMount&&(K=!1),n=!1,K?t(k):Promise.resolve()}function y(o,x){var S;if(r[o].isActive===x)return Promise.resolve();(S=e.variantChildren)===null||S===void 0||S.forEach(O=>{var Q;return(Q=O.animationState)===null||Q===void 0?void 0:Q.setActive(o,x)}),r[o].isActive=x;const k=d(o);for(const O in r)r[O].protectedKeys={};return k}return{animateChanges:d,setActive:y,setAnimateFunction:c,getState:()=>r,reset:()=>{r=y6(),n=!0}}}function Ahe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!$j(t,e):!1}function Rf(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function y6(){return{animate:Rf(!0),whileInView:Rf(),whileHover:Rf(),whileTap:Rf(),whileDrag:Rf(),whileFocus:Rf(),exit:Rf()}}class hhe extends Qd{constructor(t){super(t),t.animationState||(t.animationState=uhe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();w1(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let dhe=0;class fhe extends Qd{constructor(){super(...arguments),this.id=dhe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const i=this.node.animationState.setActive("exit",!t);r&&!t&&i.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const phe={animation:{Feature:hhe},exit:{Feature:fhe}},_6=(e,t)=>Math.abs(e-t);function mhe(e,t){const r=_6(e.x,t.x),n=_6(e.y,t.y);return Math.sqrt(r**2+n**2)}class DG{constructor(t,r,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:c=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=nM(this.lastMoveEventInfo,this.history),O=this.startEvent!==null,Q=mhe(k.offset,{x:0,y:0})>=3;if(!O&&!Q)return;const{point:G}=k,{timestamp:K}=ma;this.history.push({...G,timestamp:K});const{onStart:ee,onMove:W}=this.handlers;O||(ee&&ee(this.lastMoveEvent,k),this.startEvent=this.lastMoveEvent),W&&W(this.lastMoveEvent,k)},this.handlePointerMove=(k,O)=>{this.lastMoveEvent=k,this.lastMoveEventInfo=rM(O,this.transformPagePoint),Si.update(this.updatePoint,!0)},this.handlePointerUp=(k,O)=>{this.end();const{onEnd:Q,onSessionEnd:G,resumeAnimation:K}=this.handlers;if(this.dragSnapToOrigin&&K&&K(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const ee=nM(k.type==="pointercancel"?this.lastMoveEventInfo:rM(O,this.transformPagePoint),this.history);this.startEvent&&Q&&Q(k,ee),G&&G(k,ee)},!qj(t))return;this.dragSnapToOrigin=c,this.handlers=r,this.transformPagePoint=n,this.contextWindow=i||window;const d=TE(t),y=rM(d,this.transformPagePoint),{point:o}=y,{timestamp:x}=ma;this.history=[{...o,timestamp:x}];const{onSessionStart:S}=r;S&&S(t,nM(y,this.history)),this.removeListeners=SA(CA(this.contextWindow,"pointermove",this.handlePointerMove),CA(this.contextWindow,"pointerup",this.handlePointerUp),CA(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),zA(this.updatePoint)}}function rM(e,t){return t?{point:t(e.point)}:e}function x6(e,t){return{x:e.x-t.x,y:e.y-t.y}}function nM({point:e},t){return{point:e,delta:x6(e,kG(t)),offset:x6(e,ghe(t)),velocity:vhe(t,.1)}}function ghe(e){return e[0]}function kG(e){return e[e.length-1]}function vhe(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const i=kG(e);for(;r>=0&&(n=e[r],!(i.timestamp-n.timestamp>EA(t)));)r--;if(!n)return{x:0,y:0};const c=TA(i.timestamp-n.timestamp);if(c===0)return{x:0,y:0};const d={x:(i.x-n.x)/c,y:(i.y-n.y)/c};return d.x===1/0&&(d.x=0),d.y===1/0&&(d.y=0),d}const RG=1e-4,yhe=1-RG,_he=1+RG,LG=.01,xhe=0-LG,bhe=0+LG;function sl(e){return e.max-e.min}function whe(e,t,r){return Math.abs(e-t)<=r}function b6(e,t,r,n=.5){e.origin=n,e.originPoint=no(t.min,t.max,e.origin),e.scale=sl(r)/sl(t),e.translate=no(r.min,r.max,e.origin)-e.originPoint,(e.scale>=yhe&&e.scale<=_he||isNaN(e.scale))&&(e.scale=1),(e.translate>=xhe&&e.translate<=bhe||isNaN(e.translate))&&(e.translate=0)}function I_(e,t,r,n){b6(e.x,t.x,r.x,n?n.originX:void 0),b6(e.y,t.y,r.y,n?n.originY:void 0)}function w6(e,t,r){e.min=r.min+t.min,e.max=e.min+sl(t)}function Bhe(e,t,r){w6(e.x,t.x,r.x),w6(e.y,t.y,r.y)}function B6(e,t,r){e.min=t.min-r.min,e.max=e.min+sl(t)}function M_(e,t,r){B6(e.x,t.x,r.x),B6(e.y,t.y,r.y)}function Che(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?no(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?no(r,e,n.max):Math.min(e,r)),e}function C6(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function She(e,{top:t,left:r,bottom:n,right:i}){return{x:C6(e.x,r,i),y:C6(e.y,t,n)}}function S6(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function Ehe(e,t){return{x:S6(e.x,t.x),y:S6(e.y,t.y)}}function The(e,t){let r=.5;const n=sl(e),i=sl(t);return i>n?r=C1(t.min,t.max-n,e.min):n>i&&(r=C1(e.min,e.max-i,t.min)),Td(0,1,r)}function Fhe(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const g4=.35;function Ihe(e=g4){return e===!1?e=0:e===!0&&(e=g4),{x:E6(e,"left","right"),y:E6(e,"top","bottom")}}function E6(e,t,r){return{min:T6(e,t),max:T6(e,r)}}function T6(e,t){return typeof e=="number"?e:e[t]||0}const F6=()=>({translate:0,scale:1,origin:0,originPoint:0}),Eg=()=>({x:F6(),y:F6()}),I6=()=>({min:0,max:0}),wo=()=>({x:I6(),y:I6()});function kl(e){return[e("x"),e("y")]}function OG({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function Mhe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Phe(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function iM(e){return e===void 0||e===1}function v4({scale:e,scaleX:t,scaleY:r}){return!iM(e)||!iM(t)||!iM(r)}function Vf(e){return v4(e)||UG(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function UG(e){return M6(e.x)||M6(e.y)}function M6(e){return e&&e!=="0%"}function tS(e,t,r){const n=e-r,i=t*n;return r+i}function P6(e,t,r,n,i){return i!==void 0&&(e=tS(e,i,n)),tS(e,r,n)+t}function y4(e,t=0,r=1,n,i){e.min=P6(e.min,t,r,n,i),e.max=P6(e.max,t,r,n,i)}function zG(e,{x:t,y:r}){y4(e.x,t.translate,t.scale,t.originPoint),y4(e.y,r.translate,r.scale,r.originPoint)}const D6=.999999999999,k6=1.0000000000001;function Dhe(e,t,r,n=!1){const i=r.length;if(!i)return;t.x=t.y=1;let c,d;for(let y=0;y<i;y++){c=r[y],d=c.projectionDelta;const{visualElement:o}=c.options;o&&o.props.style&&o.props.style.display==="contents"||(n&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Fg(e,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),d&&(t.x*=d.x.scale,t.y*=d.y.scale,zG(e,d)),n&&Vf(c.latestValues)&&Fg(e,c.latestValues))}t.x<k6&&t.x>D6&&(t.x=1),t.y<k6&&t.y>D6&&(t.y=1)}function Tg(e,t){e.min=e.min+t,e.max=e.max+t}function R6(e,t,r,n,i=.5){const c=no(e.min,e.max,i);y4(e,t,r,c,n)}function Fg(e,t){R6(e.x,t.x,t.scaleX,t.scale,t.originX),R6(e.y,t.y,t.scaleY,t.scale,t.originY)}function QG(e,t){return OG(Phe(e.getBoundingClientRect(),t))}function khe(e,t,r){const n=QG(e,r),{scroll:i}=t;return i&&(Tg(n.x,i.offset.x),Tg(n.y,i.offset.y)),n}const NG=({current:e})=>e?e.ownerDocument.defaultView:null,Rhe=new WeakMap;class Lhe{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wo(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=S=>{const{dragSnapToOrigin:k}=this.getProps();k?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(TE(S,"page").point)},c=(S,k)=>{var O;const{drag:Q,dragPropagation:G,onDragStart:K}=this.getProps();if(Q&&!G&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Zj(Q),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),kl(W=>{let J=this.getAxisMotionValue(W).get()||0;if(Du.test(J)){const{projection:re}=this.visualElement;if(re&&re.layout){const ue=re.layout.layoutBox[W];ue&&(J=sl(ue)*(parseFloat(J)/100))}}this.originPoint[W]=J}),K&&Si.postRender(()=>K(S,k)),(O=this.removeWillChange)===null||O===void 0||O.call(this),this.removeWillChange=p4(this.visualElement,"transform");const{animationState:ee}=this.visualElement;ee&&ee.setActive("whileDrag",!0)},d=(S,k)=>{const{dragPropagation:O,dragDirectionLock:Q,onDirectionLock:G,onDrag:K}=this.getProps();if(!O&&!this.openGlobalLock)return;const{offset:ee}=k;if(Q&&this.currentDirection===null){this.currentDirection=Ohe(ee),this.currentDirection!==null&&G&&G(this.currentDirection);return}this.updateAxis("x",k.point,ee),this.updateAxis("y",k.point,ee),this.visualElement.render(),K&&K(S,k)},y=(S,k)=>this.stop(S,k),o=()=>kl(S=>{var k;return this.getAnimationState(S)==="paused"&&((k=this.getAxisMotionValue(S).animation)===null||k===void 0?void 0:k.play())}),{dragSnapToOrigin:x}=this.getProps();this.panSession=new DG(t,{onSessionStart:i,onStart:c,onMove:d,onSessionEnd:y,resumeAnimation:o},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:x,contextWindow:NG(this.visualElement)})}stop(t,r){var n;(n=this.removeWillChange)===null||n===void 0||n.call(this);const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:c}=r;this.startAnimation(c);const{onDragEnd:d}=this.getProps();d&&Si.postRender(()=>d(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:i}=this.getProps();if(!n||!Dw(t,i,this.currentDirection))return;const c=this.getAxisMotionValue(t);let d=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(d=Che(d,this.constraints[t],this.elastic[t])),c.set(d)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,c=this.constraints;r&&Cg(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&i?this.constraints=She(i.layoutBox,r):this.constraints=!1,this.elastic=Ihe(n),c!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&kl(d=>{this.constraints!==!1&&this.getAxisMotionValue(d)&&(this.constraints[d]=Fhe(i.layoutBox[d],this.constraints[d]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Cg(t))return!1;const n=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const c=khe(n,i.root,this.visualElement.getTransformPagePoint());let d=Ehe(i.layout.layoutBox,c);if(r){const y=r(Mhe(d));this.hasMutatedConstraints=!!y,y&&(d=OG(y))}return d}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:i,dragTransition:c,dragSnapToOrigin:d,onDragTransitionEnd:y}=this.getProps(),o=this.constraints||{},x=kl(S=>{if(!Dw(S,r,this.currentDirection))return;let k=o&&o[S]||{};d&&(k={min:0,max:0});const O=i?200:1e6,Q=i?40:1e7,G={type:"inertia",velocity:n?t[S]:0,bounceStiffness:O,bounceDamping:Q,timeConstant:750,restDelta:1,restSpeed:10,...c,...k};return this.startAxisValueAnimation(S,G)});return Promise.all(x).then(y)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return n.start(c2(t,n,0,r,this.visualElement,!1,p4(this.visualElement,t)))}stopAnimation(){kl(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){kl(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),i=n[r];return i||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){kl(r=>{const{drag:n}=this.getProps();if(!Dw(r,n,this.currentDirection))return;const{projection:i}=this.visualElement,c=this.getAxisMotionValue(r);if(i&&i.layout){const{min:d,max:y}=i.layout.layoutBox[r];c.set(t[r]-no(d,y,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Cg(r)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};kl(d=>{const y=this.getAxisMotionValue(d);if(y&&this.constraints!==!1){const o=y.get();i[d]=The({min:o,max:o},this.constraints[d])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),kl(d=>{if(!Dw(d,t,null))return;const y=this.getAxisMotionValue(d),{min:o,max:x}=this.constraints[d];y.set(no(o,x,i[d]))})}addListeners(){if(!this.visualElement.current)return;Rhe.set(this.visualElement,this);const t=this.visualElement.current,r=CA(t,"pointerdown",o=>{const{drag:x,dragListener:S=!0}=this.getProps();x&&S&&this.start(o)}),n=()=>{const{dragConstraints:o}=this.getProps();Cg(o)&&o.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,c=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Si.read(n);const d=bA(window,"resize",()=>this.scalePositionWithinConstraints()),y=i.addEventListener("didUpdate",({delta:o,hasLayoutChanged:x})=>{this.isDragging&&x&&(kl(S=>{const k=this.getAxisMotionValue(S);k&&(this.originPoint[S]+=o[S].translate,k.set(k.get()+o[S].translate))}),this.visualElement.render())});return()=>{d(),r(),c(),y&&y()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:c=!1,dragElastic:d=g4,dragMomentum:y=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:i,dragConstraints:c,dragElastic:d,dragMomentum:y}}}function Dw(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function Ohe(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class Uhe extends Qd{constructor(t){super(t),this.removeGroupControls=ja,this.removeListeners=ja,this.controls=new Lhe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ja}unmount(){this.removeGroupControls(),this.removeListeners()}}const L6=e=>(t,r)=>{e&&Si.postRender(()=>e(t,r))};class zhe extends Qd{constructor(){super(...arguments),this.removePointerDownListener=ja}onPointerDown(t){this.session=new DG(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:NG(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:L6(t),onStart:L6(r),onMove:n,onEnd:(c,d)=>{delete this.session,i&&Si.postRender(()=>i(c,d))}}}mount(){this.removePointerDownListener=CA(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Qhe(){const e=Se.useContext(Z1);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:n}=e,i=Se.useId();Se.useEffect(()=>n(i),[]);const c=Se.useCallback(()=>r&&r(i),[i,r]);return!t&&r?[!1,c]:[!0]}function Nhe(){return Vhe(Se.useContext(Z1))}function Vhe(e){return e===null?!0:e.isPresent}const $B={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function O6(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const By={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Yr.test(e))e=parseFloat(e);else return e;const r=O6(e,t.target.x),n=O6(e,t.target.y);return`${r}% ${n}%`}},Hhe={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,i=Fd.parse(e);if(i.length>5)return n;const c=Fd.createTransformer(e),d=typeof i[0]!="number"?1:0,y=r.x.scale*t.x,o=r.y.scale*t.y;i[0+d]/=y,i[1+d]/=o;const x=no(y,o,.5);return typeof i[2+d]=="number"&&(i[2+d]/=x),typeof i[3+d]=="number"&&(i[3+d]/=x),c(i)}};class jhe extends Se.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:i}=this.props,{projection:c}=t;Rce(Ghe),c&&(r.group&&r.group.add(c),n&&n.register&&i&&n.register(c),c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),$B.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:i,isPresent:c}=this.props,d=n.projection;return d&&(d.isPresent=c,i||t.layoutDependency!==r||r===void 0?d.willUpdate():this.safeToRemove(),t.isPresent!==c&&(c?d.promote():d.relegate()||Si.postRender(()=>{const y=d.getStack();(!y||!y.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),zk.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function VG(e){const[t,r]=Qhe(),n=Se.useContext(Vk);return Je.jsx(jhe,{...e,layoutGroup:n,switchLayoutGroup:Se.useContext(Mj),isPresent:t,safeToRemove:r})}const Ghe={borderRadius:{...By,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:By,borderTopRightRadius:By,borderBottomLeftRadius:By,borderBottomRightRadius:By,boxShadow:Hhe},HG=["TopLeft","TopRight","BottomLeft","BottomRight"],Khe=HG.length,U6=e=>typeof e=="string"?parseFloat(e):e,z6=e=>typeof e=="number"||Yr.test(e);function Whe(e,t,r,n,i,c){i?(e.opacity=no(0,r.opacity!==void 0?r.opacity:1,qhe(n)),e.opacityExit=no(t.opacity!==void 0?t.opacity:1,0,Xhe(n))):c&&(e.opacity=no(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let d=0;d<Khe;d++){const y=`border${HG[d]}Radius`;let o=Q6(t,y),x=Q6(r,y);if(o===void 0&&x===void 0)continue;o||(o=0),x||(x=0),o===0||x===0||z6(o)===z6(x)?(e[y]=Math.max(no(U6(o),U6(x),n),0),(Du.test(x)||Du.test(o))&&(e[y]+="%")):e[y]=x}(t.rotate||r.rotate)&&(e.rotate=no(t.rotate||0,r.rotate||0,n))}function Q6(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const qhe=jG(0,.5,wG),Xhe=jG(.5,.95,ja);function jG(e,t,r){return n=>n<e?0:n>t?1:r(C1(e,t,n))}function N6(e,t){e.min=t.min,e.max=t.max}function Tl(e,t){N6(e.x,t.x),N6(e.y,t.y)}function V6(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function H6(e,t,r,n,i){return e-=t,e=tS(e,1/r,n),i!==void 0&&(e=tS(e,1/i,n)),e}function Zhe(e,t=0,r=1,n=.5,i,c=e,d=e){if(Du.test(t)&&(t=parseFloat(t),t=no(d.min,d.max,t/100)-d.min),typeof t!="number")return;let y=no(c.min,c.max,n);e===c&&(y-=t),e.min=H6(e.min,t,r,y,i),e.max=H6(e.max,t,r,y,i)}function j6(e,t,[r,n,i],c,d){Zhe(e,t[r],t[n],t[i],t.scale,c,d)}const Yhe=["x","scaleX","originX"],Jhe=["y","scaleY","originY"];function G6(e,t,r,n){j6(e.x,t,Yhe,r?r.x:void 0,n?n.x:void 0),j6(e.y,t,Jhe,r?r.y:void 0,n?n.y:void 0)}function K6(e){return e.translate===0&&e.scale===1}function GG(e){return K6(e.x)&&K6(e.y)}function W6(e,t){return e.min===t.min&&e.max===t.max}function $he(e,t){return W6(e.x,t.x)&&W6(e.y,t.y)}function q6(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function KG(e,t){return q6(e.x,t.x)&&q6(e.y,t.y)}function X6(e){return sl(e.x)/sl(e.y)}function Z6(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class ede{constructor(){this.members=[]}add(t){SE(this.members,t),t.scheduleRender()}remove(t){if(EE(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(i=>t===i);if(r===0)return!1;let n;for(let i=r;i>=0;i--){const c=this.members[i];if(c.isPresent!==!1){n=c;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function tde(e,t,r){let n="";const i=e.x.translate/t.x,c=e.y.translate/t.y,d=(r==null?void 0:r.z)||0;if((i||c||d)&&(n=`translate3d(${i}px, ${c}px, ${d}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:x,rotate:S,rotateX:k,rotateY:O,skewX:Q,skewY:G}=r;x&&(n=`perspective(${x}px) ${n}`),S&&(n+=`rotate(${S}deg) `),k&&(n+=`rotateX(${k}deg) `),O&&(n+=`rotateY(${O}deg) `),Q&&(n+=`skewX(${Q}deg) `),G&&(n+=`skewY(${G}deg) `)}const y=e.x.scale*t.x,o=e.y.scale*t.y;return(y!==1||o!==1)&&(n+=`scale(${y}, ${o})`),n||"none"}const rde=(e,t)=>e.depth-t.depth;class nde{constructor(){this.children=[],this.isDirty=!1}add(t){SE(this.children,t),this.isDirty=!0}remove(t){EE(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(rde),this.isDirty=!1,this.children.forEach(t)}}function ide(e,t){const r=FA.now(),n=({timestamp:i})=>{const c=i-r;c>=t&&(zA(n),e(c-t))};return Si.read(n,!0),()=>zA(n)}function ode(e){return e instanceof SVGElement&&e.tagName!=="svg"}function ade(e,t,r){const n=Ha(e)?e:S1(e);return n.start(c2("",n,t,r)),n.animation}const Hf={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Yy=typeof window<"u"&&window.MotionDebug!==void 0,oM=["","X","Y","Z"],sde={visibility:"hidden"},Y6=1e3;let lde=0;function aM(e,t,r,n){const{latestValues:i}=t;i[e]&&(r[e]=i[e],t.setStaticValue(e,0),n&&(n[e]=0))}function WG(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return!1;const{visualElement:t}=e.options;return t?window.MotionHasOptimisedTransformAnimation(MG(t))?!0:e.parent&&!e.parent.hasCheckedOptimisedAppear?WG(e.parent):!1:!1}function qG({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(d={},y=t==null?void 0:t()){this.id=lde++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Yy&&(Hf.totalNodes=Hf.resolvedTargetDeltas=Hf.recalculatedProjection=0),this.nodes.forEach(Ade),this.nodes.forEach(mde),this.nodes.forEach(gde),this.nodes.forEach(hde),Yy&&window.MotionDebug.record(Hf)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=d,this.root=y?y.root||y:this,this.path=y?[...y.path,y]:[],this.parent=y,this.depth=y?y.depth+1:0;for(let o=0;o<this.path.length;o++)this.path[o].shouldResetTransform=!0;this.root===this&&(this.nodes=new nde)}addEventListener(d,y){return this.eventHandlers.has(d)||this.eventHandlers.set(d,new u2),this.eventHandlers.get(d).add(y)}notifyListeners(d,...y){const o=this.eventHandlers.get(d);o&&o.notify(...y)}hasListeners(d){return this.eventHandlers.has(d)}mount(d,y=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=ode(d),this.instance=d;const{layoutId:o,layout:x,visualElement:S}=this.options;if(S&&!S.current&&S.mount(d),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),y&&(x||o)&&(this.isLayoutDirty=!0),e){let k;const O=()=>this.root.updateBlockedByResize=!1;e(d,()=>{this.root.updateBlockedByResize=!0,k&&k(),k=ide(O,250),$B.hasAnimatedSinceResize&&($B.hasAnimatedSinceResize=!1,this.nodes.forEach($6))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&S&&(o||x)&&this.addEventListener("didUpdate",({delta:k,hasLayoutChanged:O,hasRelativeTargetChanged:Q,layout:G})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const K=this.options.transition||S.getDefaultTransition()||bde,{onLayoutAnimationStart:ee,onLayoutAnimationComplete:W}=S.getProps(),J=!this.targetLayout||!KG(this.targetLayout,G)||Q,re=!O&&Q;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||re||O&&(J||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(k,re);const ue={...e2(K,"layout"),onPlay:ee,onComplete:W};(S.shouldReduceMotion||this.options.layoutRoot)&&(ue.delay=0,ue.type=!1),this.startAnimation(ue)}else O||$6(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=G})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const d=this.getStack();d&&d.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,zA(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(vde),this.animationId++)}getTransformTemplate(){const{visualElement:d}=this.options;return d&&d.getProps().transformTemplate}willUpdate(d=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionHandoffCancelAll&&WG(this)&&window.MotionHandoffCancelAll(),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let S=0;S<this.path.length;S++){const k=this.path[S];k.shouldResetTransform=!0,k.updateScroll("snapshot"),k.options.layoutRoot&&k.willUpdate(!1)}const{layoutId:y,layout:o}=this.options;if(y===void 0&&!o)return;const x=this.getTransformTemplate();this.prevTransformTemplateValue=x?x(this.latestValues,""):void 0,this.updateSnapshot(),d&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(J6);return}this.isUpdating||this.nodes.forEach(fde),this.isUpdating=!1,this.nodes.forEach(pde),this.nodes.forEach(cde),this.nodes.forEach(ude),this.clearAllSnapshots();const y=FA.now();ma.delta=Td(0,1e3/60,y-ma.timestamp),ma.timestamp=y,ma.isProcessing=!0,XI.update.process(ma),XI.preRender.process(ma),XI.render.process(ma),ma.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,zk.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(dde),this.sharedNodes.forEach(yde)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Si.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Si.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let o=0;o<this.path.length;o++)this.path[o].updateScroll();const d=this.layout;this.layout=this.measure(!1),this.layoutCorrected=wo(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:y}=this.options;y&&y.notify("LayoutMeasure",this.layout.layoutBox,d?d.layoutBox:void 0)}updateScroll(d="measure"){let y=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===d&&(y=!1),y){const o=n(this.instance);this.scroll={animationId:this.root.animationId,phase:d,isRoot:o,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:o}}}resetTransform(){if(!i)return;const d=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,y=this.projectionDelta&&!GG(this.projectionDelta),o=this.getTransformTemplate(),x=o?o(this.latestValues,""):void 0,S=x!==this.prevTransformTemplateValue;d&&(y||Vf(this.latestValues)||S)&&(i(this.instance,x),this.shouldResetTransform=!1,this.scheduleRender())}measure(d=!0){const y=this.measurePageBox();let o=this.removeElementScroll(y);return d&&(o=this.removeTransform(o)),wde(o),{animationId:this.root.animationId,measuredBox:y,layoutBox:o,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:y}=this.options;if(!y)return wo();const o=y.measureViewportBox();if(!(((d=this.scroll)===null||d===void 0?void 0:d.wasRoot)||this.path.some(Bde))){const{scroll:S}=this.root;S&&(Tg(o.x,S.offset.x),Tg(o.y,S.offset.y))}return o}removeElementScroll(d){var y;const o=wo();if(Tl(o,d),!((y=this.scroll)===null||y===void 0)&&y.wasRoot)return o;for(let x=0;x<this.path.length;x++){const S=this.path[x],{scroll:k,options:O}=S;S!==this.root&&k&&O.layoutScroll&&(k.wasRoot&&Tl(o,d),Tg(o.x,k.offset.x),Tg(o.y,k.offset.y))}return o}applyTransform(d,y=!1){const o=wo();Tl(o,d);for(let x=0;x<this.path.length;x++){const S=this.path[x];!y&&S.options.layoutScroll&&S.scroll&&S!==S.root&&Fg(o,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),Vf(S.latestValues)&&Fg(o,S.latestValues)}return Vf(this.latestValues)&&Fg(o,this.latestValues),o}removeTransform(d){const y=wo();Tl(y,d);for(let o=0;o<this.path.length;o++){const x=this.path[o];if(!x.instance||!Vf(x.latestValues))continue;v4(x.latestValues)&&x.updateSnapshot();const S=wo(),k=x.measurePageBox();Tl(S,k),G6(y,x.latestValues,x.snapshot?x.snapshot.layoutBox:void 0,S)}return Vf(this.latestValues)&&G6(y,this.latestValues),y}setTargetDelta(d){this.targetDelta=d,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(d){this.options={...this.options,...d,crossfade:d.crossfade!==void 0?d.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ma.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(d=!1){var y;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const x=!!this.resumingFrom||this!==o;if(!(d||x&&this.isSharedProjectionDirty||this.isProjectionDirty||!((y=this.parent)===null||y===void 0)&&y.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:k,layoutId:O}=this.options;if(!(!this.layout||!(k||O))){if(this.resolvedRelativeTargetAt=ma.timestamp,!this.targetDelta&&!this.relativeTarget){const Q=this.getClosestProjectingParent();Q&&Q.layout&&this.animationProgress!==1?(this.relativeParent=Q,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wo(),this.relativeTargetOrigin=wo(),M_(this.relativeTargetOrigin,this.layout.layoutBox,Q.layout.layoutBox),Tl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=wo(),this.targetWithTransforms=wo()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Bhe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Tl(this.target,this.layout.layoutBox),zG(this.target,this.targetDelta)):Tl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const Q=this.getClosestProjectingParent();Q&&!!Q.resumingFrom==!!this.resumingFrom&&!Q.options.layoutScroll&&Q.target&&this.animationProgress!==1?(this.relativeParent=Q,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wo(),this.relativeTargetOrigin=wo(),M_(this.relativeTargetOrigin,this.target,Q.target),Tl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Yy&&Hf.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||v4(this.parent.latestValues)||UG(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var d;const y=this.getLead(),o=!!this.resumingFrom||this!==y;let x=!0;if((this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty)&&(x=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(x=!1),this.resolvedRelativeTargetAt===ma.timestamp&&(x=!1),x)return;const{layout:S,layoutId:k}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(S||k))return;Tl(this.layoutCorrected,this.layout.layoutBox);const O=this.treeScale.x,Q=this.treeScale.y;Dhe(this.layoutCorrected,this.treeScale,this.path,o),y.layout&&!y.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(y.target=y.layout.layoutBox,y.targetWithTransforms=wo());const{target:G}=y;if(!G){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(V6(this.prevProjectionDelta.x,this.projectionDelta.x),V6(this.prevProjectionDelta.y,this.projectionDelta.y)),I_(this.projectionDelta,this.layoutCorrected,G,this.latestValues),(this.treeScale.x!==O||this.treeScale.y!==Q||!Z6(this.projectionDelta.x,this.prevProjectionDelta.x)||!Z6(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",G)),Yy&&Hf.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(d=!0){var y;if((y=this.options.visualElement)===null||y===void 0||y.scheduleRender(),d){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Eg(),this.projectionDelta=Eg(),this.projectionDeltaWithTransform=Eg()}setAnimationOrigin(d,y=!1){const o=this.snapshot,x=o?o.latestValues:{},S={...this.latestValues},k=Eg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!y;const O=wo(),Q=o?o.source:void 0,G=this.layout?this.layout.source:void 0,K=Q!==G,ee=this.getStack(),W=!ee||ee.members.length<=1,J=!!(K&&!W&&this.options.crossfade===!0&&!this.path.some(xde));this.animationProgress=0;let re;this.mixTargetDelta=ue=>{const ce=ue/1e3;eQ(k.x,d.x,ce),eQ(k.y,d.y,ce),this.setTargetDelta(k),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(M_(O,this.layout.layoutBox,this.relativeParent.layout.layoutBox),_de(this.relativeTarget,this.relativeTargetOrigin,O,ce),re&&$he(this.relativeTarget,re)&&(this.isProjectionDirty=!1),re||(re=wo()),Tl(re,this.relativeTarget)),K&&(this.animationValues=S,Whe(S,x,this.latestValues,ce,J,W)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ce},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(d){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(zA(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Si.update(()=>{$B.hasAnimatedSinceResize=!0,this.currentAnimation=ade(0,Y6,{...d,onUpdate:y=>{this.mixTargetDelta(y),d.onUpdate&&d.onUpdate(y)},onComplete:()=>{d.onComplete&&d.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const d=this.getStack();d&&d.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Y6),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const d=this.getLead();let{targetWithTransforms:y,target:o,layout:x,latestValues:S}=d;if(!(!y||!o||!x)){if(this!==d&&this.layout&&x&&XG(this.options.animationType,this.layout.layoutBox,x.layoutBox)){o=this.target||wo();const k=sl(this.layout.layoutBox.x);o.x.min=d.target.x.min,o.x.max=o.x.min+k;const O=sl(this.layout.layoutBox.y);o.y.min=d.target.y.min,o.y.max=o.y.min+O}Tl(y,o),Fg(y,S),I_(this.projectionDeltaWithTransform,this.layoutCorrected,y,S)}}registerSharedNode(d,y){this.sharedNodes.has(d)||this.sharedNodes.set(d,new ede),this.sharedNodes.get(d).add(y);const x=y.options.initialPromotionConfig;y.promote({transition:x?x.transition:void 0,preserveFollowOpacity:x&&x.shouldPreserveFollowOpacity?x.shouldPreserveFollowOpacity(y):void 0})}isLead(){const d=this.getStack();return d?d.lead===this:!0}getLead(){var d;const{layoutId:y}=this.options;return y?((d=this.getStack())===null||d===void 0?void 0:d.lead)||this:this}getPrevLead(){var d;const{layoutId:y}=this.options;return y?(d=this.getStack())===null||d===void 0?void 0:d.prevLead:void 0}getStack(){const{layoutId:d}=this.options;if(d)return this.root.sharedNodes.get(d)}promote({needsReset:d,transition:y,preserveFollowOpacity:o}={}){const x=this.getStack();x&&x.promote(this,o),d&&(this.projectionDelta=void 0,this.needsReset=!0),y&&this.setOptions({transition:y})}relegate(){const d=this.getStack();return d?d.relegate(this):!1}resetSkewAndRotation(){const{visualElement:d}=this.options;if(!d)return;let y=!1;const{latestValues:o}=d;if((o.z||o.rotate||o.rotateX||o.rotateY||o.rotateZ||o.skewX||o.skewY)&&(y=!0),!y)return;const x={};o.z&&aM("z",d,x,this.animationValues);for(let S=0;S<oM.length;S++)aM(`rotate${oM[S]}`,d,x,this.animationValues),aM(`skew${oM[S]}`,d,x,this.animationValues);d.render();for(const S in x)d.setStaticValue(S,x[S]),this.animationValues&&(this.animationValues[S]=x[S]);d.scheduleRender()}getProjectionStyles(d){var y,o;if(!this.instance||this.isSVG)return;if(!this.isVisible)return sde;const x={visibility:""},S=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,x.opacity="",x.pointerEvents=YB(d==null?void 0:d.pointerEvents)||"",x.transform=S?S(this.latestValues,""):"none",x;const k=this.getLead();if(!this.projectionDelta||!this.layout||!k.target){const K={};return this.options.layoutId&&(K.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,K.pointerEvents=YB(d==null?void 0:d.pointerEvents)||""),this.hasProjected&&!Vf(this.latestValues)&&(K.transform=S?S({},""):"none",this.hasProjected=!1),K}const O=k.animationValues||k.latestValues;this.applyTransformsToTarget(),x.transform=tde(this.projectionDeltaWithTransform,this.treeScale,O),S&&(x.transform=S(O,x.transform));const{x:Q,y:G}=this.projectionDelta;x.transformOrigin=`${Q.origin*100}% ${G.origin*100}% 0`,k.animationValues?x.opacity=k===this?(o=(y=O.opacity)!==null&&y!==void 0?y:this.latestValues.opacity)!==null&&o!==void 0?o:1:this.preserveOpacity?this.latestValues.opacity:O.opacityExit:x.opacity=k===this?O.opacity!==void 0?O.opacity:"":O.opacityExit!==void 0?O.opacityExit:0;for(const K in ZC){if(O[K]===void 0)continue;const{correct:ee,applyTo:W}=ZC[K],J=x.transform==="none"?O[K]:ee(O[K],k);if(W){const re=W.length;for(let ue=0;ue<re;ue++)x[W[ue]]=J}else x[K]=J}return this.options.layoutId&&(x.pointerEvents=k===this?YB(d==null?void 0:d.pointerEvents)||"":"none"),x}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(d=>{var y;return(y=d.currentAnimation)===null||y===void 0?void 0:y.stop()}),this.root.nodes.forEach(J6),this.root.sharedNodes.clear()}}}function cde(e){e.updateLayout()}function ude(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=e.layout,{animationType:c}=e.options,d=r.source!==e.layout.source;c==="size"?kl(k=>{const O=d?r.measuredBox[k]:r.layoutBox[k],Q=sl(O);O.min=n[k].min,O.max=O.min+Q}):XG(c,r.layoutBox,n)&&kl(k=>{const O=d?r.measuredBox[k]:r.layoutBox[k],Q=sl(n[k]);O.max=O.min+Q,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[k].max=e.relativeTarget[k].min+Q)});const y=Eg();I_(y,n,r.layoutBox);const o=Eg();d?I_(o,e.applyTransform(i,!0),r.measuredBox):I_(o,n,r.layoutBox);const x=!GG(y);let S=!1;if(!e.resumeFrom){const k=e.getClosestProjectingParent();if(k&&!k.resumeFrom){const{snapshot:O,layout:Q}=k;if(O&&Q){const G=wo();M_(G,r.layoutBox,O.layoutBox);const K=wo();M_(K,n,Q.layoutBox),KG(G,K)||(S=!0),k.options.layoutRoot&&(e.relativeTarget=K,e.relativeTargetOrigin=G,e.relativeParent=k)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:o,layoutDelta:y,hasLayoutChanged:x,hasRelativeTargetChanged:S})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function Ade(e){Yy&&Hf.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function hde(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function dde(e){e.clearSnapshot()}function J6(e){e.clearMeasurements()}function fde(e){e.isLayoutDirty=!1}function pde(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function $6(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function mde(e){e.resolveTargetDelta()}function gde(e){e.calcProjection()}function vde(e){e.resetSkewAndRotation()}function yde(e){e.removeLeadSnapshot()}function eQ(e,t,r){e.translate=no(t.translate,0,r),e.scale=no(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function tQ(e,t,r,n){e.min=no(t.min,r.min,n),e.max=no(t.max,r.max,n)}function _de(e,t,r,n){tQ(e.x,t.x,r.x,n),tQ(e.y,t.y,r.y,n)}function xde(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const bde={duration:.45,ease:[.4,0,.1,1]},rQ=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),nQ=rQ("applewebkit/")&&!rQ("chrome/")?Math.round:ja;function iQ(e){e.min=nQ(e.min),e.max=nQ(e.max)}function wde(e){iQ(e.x),iQ(e.y)}function XG(e,t,r){return e==="position"||e==="preserve-aspect"&&!whe(X6(t),X6(r),.2)}function Bde(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const Cde=qG({attachResizeListener:(e,t)=>bA(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),sM={current:void 0},ZG=qG({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!sM.current){const e=new Cde({});e.mount(window),e.setOptions({layoutScroll:!0}),sM.current=e}return sM.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Sde={pan:{Feature:zhe},drag:{Feature:Uhe,ProjectionNode:ZG,MeasureLayout:VG}},_4={current:null},YG={current:!1};function Ede(){if(YG.current=!0,!!Uk)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>_4.current=e.matches;e.addListener(t),t()}else _4.current=!1}function Tde(e,t,r){for(const n in t){const i=t[n],c=r[n];if(Ha(i))e.addValue(n,i);else if(Ha(c))e.addValue(n,S1(i,{owner:e}));else if(c!==i)if(e.hasValue(n)){const d=e.getValue(n);d.liveStyle===!0?d.jump(i):d.hasAnimated||d.set(i)}else{const d=e.getStaticValue(n);e.addValue(n,S1(d!==void 0?d:i,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const oQ=new WeakMap,Fde=[...iG,Qa,Fd],Ide=e=>Fde.find(nG(e)),aQ=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Mde=Nk.length;class Pde{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:c,visualState:d},y={}){this.applyWillChange=!1,this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=t2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.isRenderScheduled=!1,this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.isRenderScheduled=!1,this.scheduleRender=()=>{this.isRenderScheduled||(this.isRenderScheduled=!0,Si.render(this.render,!1,!0))};const{latestValues:o,renderState:x}=d;this.latestValues=o,this.baseTarget={...o},this.initialValues=r.initial?{...o}:{},this.renderState=x,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=y,this.blockInitialAnimation=!!c,this.isControllingVariants=CE(r),this.isVariantNode=Dj(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:S,...k}=this.scrapeMotionValuesFromProps(r,{},this);for(const O in k){const Q=k[O];o[O]!==void 0&&Ha(Q)&&Q.set(o[O],!1)}}mount(t){this.current=t,oQ.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),YG.current||Ede(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:_4.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){oQ.delete(this.current),this.projection&&this.projection.unmount(),zA(this.notifyUpdate),zA(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(t,r){const n=zd.has(t),i=r.on("change",d=>{this.latestValues[t]=d,this.props.onUpdate&&Si.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),c=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{i(),c(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in c0){const r=c0[t];if(!r)continue;const{isEnabled:n,Feature:i}=r;if(!this.features[t]&&i&&n(this.props)&&(this.features[t]=new i(this)),this.features[t]){const c=this.features[t];c.isMounted?c.update():(c.mount(),c.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wo()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<aQ.length;n++){const i=aQ[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const c="on"+i,d=t[c];d&&(this.propEventSubscriptions[i]=this.on(i,d))}this.prevMotionValues=Tde(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<Mde;n++){const i=Nk[n],c=this.props[i];(b1(c)||c===!1)&&(r[i]=c)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=S1(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){var n;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(tG(i)||eG(i))?i=parseFloat(i):!Ide(i)&&Fd.test(r)&&(i=hG(t,r)),this.setBaseTarget(t,Ha(i)?i.get():i)),Ha(i)?i.get():i}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const d=Jk(this.props,n,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);d&&(i=d[t])}if(n&&i!==void 0)return i;const c=this.getBaseTargetFromProps(this.props,t);return c!==void 0&&!Ha(c)?c:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new u2),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class JG extends Pde{constructor(){super(...arguments),this.KeyframeResolver=dG}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}}function Dde(e){return window.getComputedStyle(e)}class kde extends JG{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=Nj}readValueFromInstance(t,r){if(zd.has(r)){const n=n2(r);return n&&n.default||0}else{const n=Dde(t),i=(Oj(r)?n.getPropertyValue(r):n[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:r}){return QG(t,r)}build(t,r,n){Wk(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return Yk(t,r,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ha(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}class Rde extends JG{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=wo}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(zd.has(r)){const n=n2(r);return n&&n.default||0}return r=Vj.has(r)?r:BE(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return jj(t,r,n)}build(t,r,n){Xk(t,r,this.isSVGTag,n.transformTemplate)}renderInstance(t,r,n,i){Hj(t,r,n,i)}mount(t){this.isSVGTag=Zk(t.tagName),super.mount(t)}}const Lde=(e,t)=>Hk(e)?new Rde(t):new kde(t,{allowProjection:e!==Se.Fragment}),Ode={layout:{ProjectionNode:ZG,MeasureLayout:VG}},Ude={...phe,...Bue,...Sde,...Ode},zde=Dce((e,t)=>Aue(e,t,Ude,Lde));class Qde extends Se.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Nde({children:e,isPresent:t}){const r=Se.useId(),n=Se.useRef(null),i=Se.useRef({width:0,height:0,top:0,left:0}),{nonce:c}=Se.useContext(Ok);return Se.useInsertionEffect(()=>{const{width:d,height:y,top:o,left:x}=i.current;if(t||!n.current||!d||!y)return;n.current.dataset.motionPopId=r;const S=document.createElement("style");return c&&(S.nonce=c),document.head.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${y}px !important;
            top: ${o}px !important;
            left: ${x}px !important;
          }
        `),()=>{document.head.removeChild(S)}},[t]),Je.jsx(Qde,{isPresent:t,childRef:n,sizeRef:i,children:Se.cloneElement(e,{ref:n})})}const Vde=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:i,presenceAffectsLayout:c,mode:d})=>{const y=$k(Hde),o=Se.useId(),x=Se.useMemo(()=>({id:o,initial:t,isPresent:r,custom:i,onExitComplete:S=>{y.set(S,!0);for(const k of y.values())if(!k)return;n&&n()},register:S=>(y.set(S,!1),()=>y.delete(S))}),c?[Math.random()]:[r]);return Se.useMemo(()=>{y.forEach((S,k)=>y.set(k,!1))},[r]),Se.useEffect(()=>{!r&&!y.size&&n&&n()},[r]),d==="popLayout"&&(e=Je.jsx(Nde,{isPresent:r,children:e})),Je.jsx(Z1.Provider,{value:x,children:e})};function Hde(){return new Map}const kw=e=>e.key||"";function sQ(e){const t=[];return Se.Children.forEach(e,r=>{Se.isValidElement(r)&&t.push(r)}),t}const jde=({children:e,exitBeforeEnter:t,custom:r,initial:n=!0,onExitComplete:i,presenceAffectsLayout:c=!0,mode:d="sync"})=>{const y=Se.useMemo(()=>sQ(e),[e]),o=y.map(kw),x=Se.useRef(!0),S=Se.useRef(y),k=$k(()=>new Map),[O,Q]=Se.useState(y),[G,K]=Se.useState(y);Ej(()=>{x.current=!1,S.current=y;for(let J=0;J<G.length;J++){const re=kw(G[J]);o.includes(re)?k.delete(re):k.get(re)!==!0&&k.set(re,!1)}},[G,o.length,o.join("-")]);const ee=[];if(y!==O){let J=[...y];for(let re=0;re<G.length;re++){const ue=G[re],ce=kw(ue);o.includes(ce)||(J.splice(re,0,ue),ee.push(ue))}d==="wait"&&ee.length&&(J=ee),K(sQ(J)),Q(y);return}const{forceRender:W}=Se.useContext(Vk);return Je.jsx(Je.Fragment,{children:G.map(J=>{const re=kw(J),ue=y===G||o.includes(re),ce=()=>{if(k.has(re))k.set(re,!0);else return;let he=!0;k.forEach(xe=>{xe||(he=!1)}),he&&(W==null||W(),K(S.current),i&&i())};return Je.jsx(Vde,{isPresent:ue,initial:!x.current||n?void 0:!1,custom:ue?void 0:r,presenceAffectsLayout:c,mode:d,onExitComplete:ue?void 0:ce,children:J},re)})})};var Gde={initial:e=>{const{position:t}=e,r=["top","bottom"].includes(t)?"y":"x";let n=["top-right","bottom-right"].includes(t)?1:-1;return t==="bottom"&&(n=1),{opacity:0,[r]:n*24}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},$G=Se.memo(e=>{const{id:t,message:r,onCloseComplete:n,onRequestRemove:i,requestClose:c=!1,position:d="bottom",duration:y=5e3,containerStyle:o,motionVariants:x=Gde,toastSpacing:S="0.5rem"}=e,[k,O]=Se.useState(y),Q=Nhe();XC(()=>{Q||n==null||n()},[Q]),XC(()=>{O(y)},[y]);const G=()=>O(null),K=()=>O(y),ee=()=>{Q&&i()};Se.useEffect(()=>{Q&&c&&i()},[Q,c,i]),mce(ee,k);const W=Se.useMemo(()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:S,...o}),[o,S]),J=Se.useMemo(()=>fce(d),[d]);return Je.jsx(zde.div,{layout:!0,className:"chakra-toast",variants:x,initial:"initial",animate:"animate",exit:"exit",onHoverStart:G,onHoverEnd:K,custom:{position:d},style:J,children:Je.jsx(Pn.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:W,children:_A(r,{id:t,onClose:ee})})})});$G.displayName="ToastComponent";var lQ={path:Je.jsxs("g",{stroke:"currentColor",strokeWidth:"1.5",children:[Je.jsx("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),Je.jsx("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),Je.jsx("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},jA=di((e,t)=>{const{as:r,viewBox:n,color:i="currentColor",focusable:c=!1,children:d,className:y,__css:o,...x}=e,S=fo("chakra-icon",y),k=Ud("Icon",e),O={w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:i,...o,...k},Q={ref:t,focusable:c,className:S,__css:O},G=n??lQ.viewBox;if(r&&typeof r!="string")return Je.jsx(Pn.svg,{as:r,...Q,...x});const K=d??lQ.path;return Je.jsx(Pn.svg,{verticalAlign:"middle",viewBox:G,...Q,...x,children:K})});jA.displayName="Icon";function Kde(e){const{viewBox:t="0 0 24 24",d:r,displayName:n,defaultProps:i={}}=e,c=Se.Children.toArray(e.path),d=di((y,o)=>Je.jsx(jA,{ref:o,viewBox:t,...i,...y,children:c.length?c:Je.jsx("path",{fill:"currentColor",d:r})}));return d.displayName=n,d}function Wde(e){return Je.jsx(jA,{viewBox:"0 0 24 24",...e,children:Je.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})}function qde(e){return Je.jsx(jA,{viewBox:"0 0 24 24",...e,children:Je.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})}function cQ(e){return Je.jsx(jA,{viewBox:"0 0 24 24",...e,children:Je.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}var Xde=WH({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),ME=di((e,t)=>{const r=Ud("Spinner",e),{label:n="Loading...",thickness:i="2px",speed:c="0.45s",emptyColor:d="transparent",className:y,...o}=nc(e),x=fo("chakra-spinner",y),S={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:i,borderBottomColor:d,borderLeftColor:d,animation:`${Xde} ${c} linear infinite`,...r};return Je.jsx(Pn.div,{ref:t,__css:S,className:x,...o,children:n&&Je.jsx(Pn.span,{srOnly:!0,children:n})})});ME.displayName="Spinner";var[Zde,A2]=dl({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[Yde,h2]=dl({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),e7={info:{icon:qde,colorScheme:"blue"},warning:{icon:cQ,colorScheme:"orange"},success:{icon:Wde,colorScheme:"green"},error:{icon:cQ,colorScheme:"red"},loading:{icon:ME,colorScheme:"blue"}};function Jde(e){return e7[e].colorScheme}function $de(e){return e7[e].icon}var t7=di(function(t,r){const n=h2(),{status:i}=A2(),c={display:"inline",...n.description};return Je.jsx(Pn.div,{ref:r,"data-status":i,...t,className:fo("chakra-alert__desc",t.className),__css:c})});t7.displayName="AlertDescription";function r7(e){const{status:t}=A2(),r=$de(t),n=h2(),i=t==="loading"?n.spinner:n.icon;return Je.jsx(Pn.span,{display:"inherit","data-status":t,...e,className:fo("chakra-alert__icon",e.className),__css:i,children:e.children||Je.jsx(r,{h:"100%",w:"100%"})})}r7.displayName="AlertIcon";var n7=di(function(t,r){const n=h2(),{status:i}=A2();return Je.jsx(Pn.div,{ref:r,"data-status":i,...t,className:fo("chakra-alert__title",t.className),__css:n.title})});n7.displayName="AlertTitle";var i7=di(function(t,r){var n;const{status:i="info",addRole:c=!0,...d}=nc(t),y=(n=t.colorScheme)!=null?n:Jde(i),o=Rs("Alert",{...t,colorScheme:y}),x={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...o.container};return Je.jsx(Zde,{value:{status:i},children:Je.jsx(Yde,{value:o,children:Je.jsx(Pn.div,{"data-status":i,role:c?"alert":void 0,ref:r,...d,className:fo("chakra-alert",t.className),__css:x})})})});i7.displayName="Alert";function efe(e){return Je.jsx(jA,{focusable:"false","aria-hidden":!0,...e,children:Je.jsx("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}var o7=di(function(t,r){const n=Ud("CloseButton",t),{children:i,isDisabled:c,__css:d,...y}=nc(t),o={outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0};return Je.jsx(Pn.button,{type:"button","aria-label":"Close",ref:r,disabled:c,__css:{...o,...n,...d},...y,children:i||Je.jsx(efe,{width:"1em",height:"1em"})})});o7.displayName="CloseButton";var tfe={top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]},P_=rfe(tfe);function rfe(e){let t=e;const r=new Set,n=i=>{t=i(t),r.forEach(c=>c())};return{getState:()=>t,subscribe:i=>(r.add(i),()=>{n(()=>e),r.delete(i)}),removeToast:(i,c)=>{n(d=>({...d,[c]:d[c].filter(y=>y.id!=i)}))},notify:(i,c)=>{const d=nfe(i,c),{position:y,id:o}=d;return n(x=>{var S,k;const Q=y.includes("top")?[d,...(S=x[y])!=null?S:[]]:[...(k=x[y])!=null?k:[],d];return{...x,[y]:Q}}),o},update:(i,c)=>{i&&n(d=>{const y={...d},{position:o,index:x}=Kz(y,i);return o&&x!==-1&&(y[o][x]={...y[o][x],...c,message:ofe(c)}),y})},closeAll:({positions:i}={})=>{n(c=>(i??["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((o,x)=>(o[x]=c[x].map(S=>({...S,requestClose:!0})),o),{...c}))},close:i=>{n(c=>{const d=Sj(c,i);return d?{...c,[d]:c[d].map(y=>y.id==i?{...y,requestClose:!0}:y)}:c})},isActive:i=>!!Kz(P_.getState(),i).position}}var uQ=0;function nfe(e,t={}){var r,n;uQ+=1;const i=(r=t.id)!=null?r:uQ,c=(n=t.position)!=null?n:"bottom";return{id:i,message:e,position:c,duration:t.duration,onCloseComplete:t.onCloseComplete,onRequestRemove:()=>P_.removeToast(String(i),c),status:t.status,requestClose:!1,containerStyle:t.containerStyle}}var ife=e=>{const{status:t,variant:r="solid",id:n,title:i,isClosable:c,onClose:d,description:y,colorScheme:o,icon:x}=e,S=n?{root:`toast-${n}`,title:`toast-${n}-title`,description:`toast-${n}-description`}:void 0;return Je.jsxs(i7,{addRole:!1,status:t,variant:r,id:S==null?void 0:S.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:o,children:[Je.jsx(r7,{children:x}),Je.jsxs(Pn.div,{flex:"1",maxWidth:"100%",children:[i&&Je.jsx(n7,{id:S==null?void 0:S.title,children:i}),y&&Je.jsx(t7,{id:S==null?void 0:S.description,display:"block",children:y})]}),c&&Je.jsx(o7,{size:"sm",onClick:d,position:"absolute",insetEnd:1,top:1})]})};function ofe(e={}){const{render:t,toastComponent:r=ife}=e;return i=>typeof t=="function"?t({...i,...e}):Je.jsx(r,{...i,...e})}var[afe,zFe]=dl({name:"ToastOptionsContext",strict:!1}),sfe=e=>{const t=Se.useSyncExternalStore(P_.subscribe,P_.getState,P_.getState),{motionVariants:r,component:n=$G,portalProps:i}=e,d=Object.keys(t).map(y=>{const o=t[y];return Je.jsx("div",{role:"region","aria-live":"polite","aria-label":`Notifications-${y}`,id:`chakra-toast-manager-${y}`,style:pce(y),children:Je.jsx(jde,{initial:!1,children:o.map(x=>Je.jsx(n,{motionVariants:r,...x},x.id))})},y)});return Je.jsx(gE,{...i,children:d})},lfe=e=>function({children:r,theme:n=e,toastOptions:i,...c}){return Je.jsxs(hce,{theme:n,...c,children:[Je.jsx(afe,{value:i==null?void 0:i.defaultOptions,children:r}),Je.jsx(sfe,{...i})]})},cfe=lfe(Rle),ufe=Object.defineProperty,Afe=(e,t,r)=>t in e?ufe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uo=(e,t,r)=>(Afe(e,typeof t!="symbol"?t+"":t,r),r);function AQ(e){return e.sort((t,r)=>{const n=t.compareDocumentPosition(r);if(n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(n&Node.DOCUMENT_POSITION_DISCONNECTED||n&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}var hfe=e=>typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE;function hQ(e,t,r){let n=e+1;return r&&n>=t&&(n=0),n}function dQ(e,t,r){let n=e-1;return r&&n<0&&(n=t),n}var x4=typeof window<"u"?Se.useLayoutEffect:Se.useEffect,rS=e=>e,dfe=class{constructor(){uo(this,"descendants",new Map),uo(this,"register",e=>{if(e!=null)return hfe(e)?this.registerNode(e):t=>{this.registerNode(t,e)}}),uo(this,"unregister",e=>{this.descendants.delete(e);const t=AQ(Array.from(this.descendants.keys()));this.assignIndex(t)}),uo(this,"destroy",()=>{this.descendants.clear()}),uo(this,"assignIndex",e=>{this.descendants.forEach(t=>{const r=e.indexOf(t.node);t.index=r,t.node.dataset.index=t.index.toString()})}),uo(this,"count",()=>this.descendants.size),uo(this,"enabledCount",()=>this.enabledValues().length),uo(this,"values",()=>Array.from(this.descendants.values()).sort((t,r)=>t.index-r.index)),uo(this,"enabledValues",()=>this.values().filter(e=>!e.disabled)),uo(this,"item",e=>{if(this.count()!==0)return this.values()[e]}),uo(this,"enabledItem",e=>{if(this.enabledCount()!==0)return this.enabledValues()[e]}),uo(this,"first",()=>this.item(0)),uo(this,"firstEnabled",()=>this.enabledItem(0)),uo(this,"last",()=>this.item(this.descendants.size-1)),uo(this,"lastEnabled",()=>{const e=this.enabledValues().length-1;return this.enabledItem(e)}),uo(this,"indexOf",e=>{var t,r;return e&&(r=(t=this.descendants.get(e))==null?void 0:t.index)!=null?r:-1}),uo(this,"enabledIndexOf",e=>e==null?-1:this.enabledValues().findIndex(t=>t.node.isSameNode(e))),uo(this,"next",(e,t=!0)=>{const r=hQ(e,this.count(),t);return this.item(r)}),uo(this,"nextEnabled",(e,t=!0)=>{const r=this.item(e);if(!r)return;const n=this.enabledIndexOf(r.node),i=hQ(n,this.enabledCount(),t);return this.enabledItem(i)}),uo(this,"prev",(e,t=!0)=>{const r=dQ(e,this.count()-1,t);return this.item(r)}),uo(this,"prevEnabled",(e,t=!0)=>{const r=this.item(e);if(!r)return;const n=this.enabledIndexOf(r.node),i=dQ(n,this.enabledCount()-1,t);return this.enabledItem(i)}),uo(this,"registerNode",(e,t)=>{if(!e||this.descendants.has(e))return;const r=Array.from(this.descendants.keys()).concat(e),n=AQ(r);t!=null&&t.disabled&&(t.disabled=!!t.disabled);const i={node:e,index:-1,...t};this.descendants.set(e,i),this.assignIndex(n)})}};function ffe(e,t){if(e!=null){if(typeof e=="function"){e(t);return}try{e.current=t}catch{throw new Error(`Cannot assign value '${t}' to ref '${e}'`)}}}function A0(...e){return t=>{e.forEach(r=>{ffe(r,t)})}}function pfe(...e){return Se.useMemo(()=>A0(...e),e)}function mfe(){const e=Se.useRef(new dfe);return x4(()=>()=>e.current.destroy()),e.current}var[gfe,a7]=dl({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});function vfe(e){const t=a7(),[r,n]=Se.useState(-1),i=Se.useRef(null);x4(()=>()=>{i.current&&t.unregister(i.current)},[]),x4(()=>{if(!i.current)return;const d=Number(i.current.dataset.index);r!=d&&!Number.isNaN(d)&&n(d)});const c=rS(e?t.register(e):t.register);return{descendants:t,index:r,enabledIndex:t.enabledIndexOf(i.current),register:A0(c,i)}}function yfe(){return[rS(gfe),()=>rS(a7()),()=>mfe(),i=>vfe(i)]}function s7(e){return Se.Children.toArray(e).filter(t=>Se.isValidElement(t))}var[QFe,_fe]=dl({strict:!1,name:"ButtonGroupContext"});function xfe(e){const[t,r]=Se.useState(!e);return{ref:Se.useCallback(c=>{c&&r(c.tagName==="BUTTON")},[]),type:t?"button":void 0}}function b4(e){const{children:t,className:r,...n}=e,i=Se.isValidElement(t)?Se.cloneElement(t,{"aria-hidden":!0,focusable:!1}):t,c=fo("chakra-button__icon",r);return Je.jsx(Pn.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...n,className:c,children:i})}b4.displayName="ButtonIcon";function w4(e){const{label:t,placement:r,spacing:n="0.5rem",children:i=Je.jsx(ME,{color:"currentColor",width:"1em",height:"1em"}),className:c,__css:d,...y}=e,o=fo("chakra-button__spinner",c),x=r==="start"?"marginEnd":"marginStart",S=Se.useMemo(()=>({display:"flex",alignItems:"center",position:t?"relative":"absolute",[x]:t?n:0,fontSize:"1em",lineHeight:"normal",...d}),[d,t,x,n]);return Je.jsx(Pn.div,{className:o,...y,__css:S,children:i})}w4.displayName="ButtonSpinner";var Jh=di((e,t)=>{const r=_fe(),n=Ud("Button",{...r,...e}),{isDisabled:i=r==null?void 0:r.isDisabled,isLoading:c,isActive:d,children:y,leftIcon:o,rightIcon:x,loadingText:S,iconSpacing:k="0.5rem",type:O,spinner:Q,spinnerPlacement:G="start",className:K,as:ee,...W}=nc(e),J=Se.useMemo(()=>{const he={...n==null?void 0:n._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...n,...!!r&&{_focus:he}}},[n,r]),{ref:re,type:ue}=xfe(ee),ce={rightIcon:x,leftIcon:o,iconSpacing:k,children:y};return Je.jsxs(Pn.button,{ref:pfe(t,re),as:ee,type:O??ue,"data-active":vu(d),"data-loading":vu(c),__css:J,className:fo("chakra-button",K),...W,disabled:i||c,children:[c&&G==="start"&&Je.jsx(w4,{className:"chakra-button__spinner--start",label:S,placement:"start",spacing:k,children:Q}),c?S||Je.jsx(Pn.span,{opacity:0,children:Je.jsx(fQ,{...ce})}):Je.jsx(fQ,{...ce}),c&&G==="end"&&Je.jsx(w4,{className:"chakra-button__spinner--end",label:S,placement:"end",spacing:k,children:Q})]})});Jh.displayName="Button";function fQ(e){const{leftIcon:t,rightIcon:r,children:n,iconSpacing:i}=e;return Je.jsxs(Je.Fragment,{children:[t&&Je.jsx(b4,{marginEnd:i,children:t}),n,r&&Je.jsx(b4,{marginStart:i,children:r})]})}var l7=di((e,t)=>{const{icon:r,children:n,isRound:i,"aria-label":c,...d}=e,y=r||n,o=Se.isValidElement(y)?Se.cloneElement(y,{"aria-hidden":!0,focusable:!1}):null;return Je.jsx(Jh,{padding:"0",borderRadius:i?"full":void 0,ref:t,"aria-label":c,...d,children:o})});l7.displayName="IconButton";var[bfe,wfe]=dl({name:"FormControlStylesContext",errorMessage:`useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormControl />" `}),[Bfe,c7]=dl({strict:!1,name:"FormControlContext"});function Cfe(e){const{id:t,isRequired:r,isInvalid:n,isDisabled:i,isReadOnly:c,...d}=e,y=Se.useId(),o=t||`field-${y}`,x=`${o}-label`,S=`${o}-feedback`,k=`${o}-helptext`,[O,Q]=Se.useState(!1),[G,K]=Se.useState(!1),[ee,W]=Se.useState(!1),J=Se.useCallback((xe={},fe=null)=>({id:k,...xe,ref:A0(fe,Ue=>{Ue&&K(!0)})}),[k]),re=Se.useCallback((xe={},fe=null)=>({...xe,ref:fe,"data-focus":vu(ee),"data-disabled":vu(i),"data-invalid":vu(n),"data-readonly":vu(c),id:xe.id!==void 0?xe.id:x,htmlFor:xe.htmlFor!==void 0?xe.htmlFor:o}),[o,i,ee,n,c,x]),ue=Se.useCallback((xe={},fe=null)=>({id:S,...xe,ref:A0(fe,Ue=>{Ue&&Q(!0)}),"aria-live":"polite"}),[S]),ce=Se.useCallback((xe={},fe=null)=>({...xe,...d,ref:fe,role:"group","data-focus":vu(ee),"data-disabled":vu(i),"data-invalid":vu(n),"data-readonly":vu(c)}),[d,i,ee,n,c]),he=Se.useCallback((xe={},fe=null)=>({...xe,ref:fe,role:"presentation","aria-hidden":!0,children:xe.children||"*"}),[]);return{isRequired:!!r,isInvalid:!!n,isReadOnly:!!c,isDisabled:!!i,isFocused:!!ee,onFocus:()=>W(!0),onBlur:()=>W(!1),hasFeedbackText:O,setHasFeedbackText:Q,hasHelpText:G,setHasHelpText:K,id:o,labelId:x,feedbackId:S,helpTextId:k,htmlProps:d,getHelpTextProps:J,getErrorMessageProps:ue,getRootProps:ce,getLabelProps:re,getRequiredIndicatorProps:he}}var Sfe=di(function(t,r){const n=Rs("Form",t),i=nc(t),{getRootProps:c,htmlProps:d,...y}=Cfe(i),o=fo("chakra-form-control",t.className);return Je.jsx(Bfe,{value:y,children:Je.jsx(bfe,{value:n,children:Je.jsx(Pn.div,{...c({},r),className:o,__css:n.container})})})});Sfe.displayName="FormControl";var Efe=di(function(t,r){const n=c7(),i=wfe(),c=fo("chakra-form__helper-text",t.className);return Je.jsx(Pn.div,{...n==null?void 0:n.getHelpTextProps(t,r),__css:i.helperText,className:c})});Efe.displayName="FormHelperText";function u7(e){const{isDisabled:t,isInvalid:r,isReadOnly:n,isRequired:i,...c}=Tfe(e);return{...c,disabled:t,readOnly:n,required:i,"aria-invalid":II(r),"aria-required":II(i),"aria-readonly":II(n)}}function Tfe(e){var t,r,n;const i=c7(),{id:c,disabled:d,readOnly:y,required:o,isRequired:x,isInvalid:S,isReadOnly:k,isDisabled:O,onFocus:Q,onBlur:G,...K}=e,ee=e["aria-describedby"]?[e["aria-describedby"]]:[];return i!=null&&i.hasFeedbackText&&(i!=null&&i.isInvalid)&&ee.push(i.feedbackId),i!=null&&i.hasHelpText&&ee.push(i.helpTextId),{...K,"aria-describedby":ee.join(" ")||void 0,id:c??(i==null?void 0:i.id),isDisabled:(t=d??O)!=null?t:i==null?void 0:i.isDisabled,isReadOnly:(r=y??k)!=null?r:i==null?void 0:i.isReadOnly,isRequired:(n=o??x)!=null?n:i==null?void 0:i.isRequired,isInvalid:S??(i==null?void 0:i.isInvalid),onFocus:ez(i==null?void 0:i.onFocus,Q),onBlur:ez(i==null?void 0:i.onBlur,G)}}function Ffe(e,t,r,n){const i=x1(r);return Se.useEffect(()=>{const c=typeof e=="function"?e():e??document;if(!(!r||!c))return c.addEventListener(t,i,n),()=>{c.removeEventListener(t,i,n)}},[t,e,n,i,r]),()=>{const c=typeof e=="function"?e():e??document;c==null||c.removeEventListener(t,i,n)}}function Ife(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}var A7={exports:{}},Mfe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Pfe=Mfe,Dfe=Pfe;function h7(){}function d7(){}d7.resetWarningCache=h7;var kfe=function(){function e(n,i,c,d,y,o){if(o!==Dfe){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:d7,resetWarningCache:h7};return r.PropTypes=r,r};A7.exports=kfe();var f7=A7.exports;function B4(e,t){return B4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},B4(e,t)}function gp(e){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gp(e)}function Rfe(e,t){if(gp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(gp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p7(e){var t=Rfe(e,"string");return gp(t)=="symbol"?t:t+""}function Ig(e,t,r){return(t=p7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m7(e){return e!=null&&typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}function g7(e){var t;if(!m7(e))return!1;const r=(t=e.ownerDocument.defaultView)!=null?t:window;return e instanceof r.HTMLElement}function Lfe(e){var t,r;return(r=(t=v7(e))==null?void 0:t.defaultView)!=null?r:window}function v7(e){return m7(e)?e.ownerDocument:document}function Ofe(e){return v7(e).activeElement}var y7=e=>e.hasAttribute("tabindex"),Ufe=e=>y7(e)&&e.tabIndex===-1;function zfe(e){return!!e.getAttribute("disabled")||!!e.getAttribute("aria-disabled")}function _7(e){return e.parentElement&&_7(e.parentElement)?!0:e.hidden}function Qfe(e){const t=e.getAttribute("contenteditable");return t!=="false"&&t!=null}function Nfe(e){if(!g7(e)||_7(e)||zfe(e))return!1;const{localName:t}=e;if(["input","select","textarea","button"].indexOf(t)>=0)return!0;const n={a:()=>e.hasAttribute("href"),audio:()=>e.hasAttribute("controls"),video:()=>e.hasAttribute("controls")};return t in n?n[t]():Qfe(e)?!0:y7(e)}function Vfe(e){return e?g7(e)&&Nfe(e)&&!Ufe(e):!1}var[Hfe,jfe]=dl({name:"InputGroupStylesContext",errorMessage:`useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in "<InputGroup />" `}),x7=di(function(t,r){const n=Rs("Input",t),{children:i,className:c,...d}=nc(t),y=fo("chakra-input__group",c),o={},x=s7(i),S=n.field;x.forEach(O=>{var Q,G;n&&(S&&O.type.id==="InputLeftElement"&&(o.paddingStart=(Q=S.height)!=null?Q:S.h),S&&O.type.id==="InputRightElement"&&(o.paddingEnd=(G=S.height)!=null?G:S.h),O.type.id==="InputRightAddon"&&(o.borderEndRadius=0),O.type.id==="InputLeftAddon"&&(o.borderStartRadius=0))});const k=x.map(O=>{var Q,G;const K=Bj({size:((Q=O.props)==null?void 0:Q.size)||t.size,variant:((G=O.props)==null?void 0:G.variant)||t.variant});return O.type.id!=="Input"?Se.cloneElement(O,K):Se.cloneElement(O,Object.assign(K,o,O.props))});return Je.jsx(Pn.div,{className:y,ref:r,__css:{width:"100%",display:"flex",position:"relative",isolation:"isolate",...n.group},"data-group":!0,...d,children:Je.jsx(Hfe,{value:n,children:k})})});x7.displayName="InputGroup";var Gfe=Pn("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),PE=di(function(t,r){var n,i;const{placement:c="left",...d}=t,y=jfe(),o=y.field,S={[c==="left"?"insetStart":"insetEnd"]:"0",width:(n=o==null?void 0:o.height)!=null?n:o==null?void 0:o.h,height:(i=o==null?void 0:o.height)!=null?i:o==null?void 0:o.h,fontSize:o==null?void 0:o.fontSize,...y.element};return Je.jsx(Gfe,{ref:r,__css:S,...d})});PE.id="InputElement";PE.displayName="InputElement";var b7=di(function(t,r){const{className:n,...i}=t,c=fo("chakra-input__left-element",n);return Je.jsx(PE,{ref:r,placement:"left",className:c,...i})});b7.id="InputLeftElement";b7.displayName="InputLeftElement";var d2=di(function(t,r){const{className:n,...i}=t,c=fo("chakra-input__right-element",n);return Je.jsx(PE,{ref:r,placement:"right",className:c,...i})});d2.id="InputRightElement";d2.displayName="InputRightElement";var f2=di(function(t,r){const{htmlSize:n,...i}=t,c=Rs("Input",i),d=nc(i),y=u7(d),o=fo("chakra-input",t.className);return Je.jsx(Pn.input,{size:n,...y,__css:c.field,ref:r,className:o})});f2.displayName="Input";f2.id="Input";var w7=Object.freeze(["base","sm","md","lg","xl","2xl"]);function Kfe(e,t){return Array.isArray(e)?e.map(r=>r===null?null:t(r)):nl(e)?Object.keys(e).reduce((r,n)=>(r[n]=t(e[n]),r),{}):e!=null?t(e):null}function Wfe(e,t=w7){const r={};return e.forEach((n,i)=>{const c=t[i];n!=null&&(r[c]=n)}),r}var jf=di(function(t,r){const n=Ud("Text",t),{className:i,align:c,decoration:d,casing:y,...o}=nc(t),x=Bj({textAlign:t.align,textDecoration:t.decoration,textTransform:t.casing});return Je.jsx(Pn.p,{ref:r,className:fo("chakra-text",t.className),...x,...o,__css:n})});jf.displayName="Text";var B7=e=>Je.jsx(Pn.div,{className:"chakra-stack__item",...e,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...e.__css}});B7.displayName="StackItem";function qfe(e){const{spacing:t,direction:r}=e,n={column:{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":Kfe(r,i=>n[i])}}var p2=di((e,t)=>{const{isInline:r,direction:n,align:i,justify:c,spacing:d="0.5rem",wrap:y,children:o,divider:x,className:S,shouldWrapChildren:k,...O}=e,Q=r?"row":n??"column",G=Se.useMemo(()=>qfe({spacing:d,direction:Q}),[d,Q]),K=!!x,ee=!k&&!K,W=Se.useMemo(()=>{const re=s7(o);return ee?re:re.map((ue,ce)=>{const he=typeof ue.key<"u"?ue.key:ce,xe=ce+1===re.length,Ue=k?Je.jsx(B7,{children:ue},he):ue;if(!K)return Ue;const Ge=Se.cloneElement(x,{__css:G}),He=xe?null:Ge;return Je.jsxs(Se.Fragment,{children:[Ue,He]},he)})},[x,G,K,ee,k,o]),J=fo("chakra-stack",S);return Je.jsx(Pn.div,{ref:t,display:"flex",alignItems:i,justifyContent:c,flexDirection:Q,flexWrap:y,gap:K?void 0:d,className:J,...O,children:W})});p2.displayName="Stack";var C7=di((e,t)=>Je.jsx(p2,{align:"center",...e,direction:"column",ref:t}));C7.displayName="VStack";var DE=di((e,t)=>Je.jsx(p2,{align:"center",...e,direction:"row",ref:t}));DE.displayName="HStack";var m2=di(function(t,r){const n=Ud("Heading",t),{className:i,...c}=nc(t);return Je.jsx(Pn.h2,{ref:r,className:fo("chakra-heading",t.className),...c,__css:n})});m2.displayName="Heading";var Li=Pn("div");Li.displayName="Box";var S7=di(function(t,r){const{size:n,centerContent:i=!0,...c}=t,d=i?{display:"flex",alignItems:"center",justifyContent:"center"}:{};return Je.jsx(Li,{ref:r,boxSize:n,__css:{...d,flexShrink:0,flexGrow:0},...c})});S7.displayName="Square";var Xfe=di(function(t,r){const{size:n,...i}=t;return Je.jsx(S7,{size:n,ref:r,borderRadius:"9999px",...i})});Xfe.displayName="Circle";var E7=di(function(t,r){const{borderLeftWidth:n,borderBottomWidth:i,borderTopWidth:c,borderRightWidth:d,borderWidth:y,borderStyle:o,borderColor:x,...S}=Ud("Divider",t),{className:k,orientation:O="horizontal",__css:Q,...G}=nc(t),K={vertical:{borderLeftWidth:n||d||y||"1px",height:"100%"},horizontal:{borderBottomWidth:i||c||y||"1px",width:"100%"}};return Je.jsx(Pn.hr,{ref:r,"aria-orientation":O,...G,__css:{...S,border:"0",borderColor:x,borderStyle:o,...K[O],...Q},className:fo("chakra-divider",k)})});E7.displayName="Divider";var g2=di(function(t,r){const{direction:n,align:i,justify:c,wrap:d,basis:y,grow:o,shrink:x,...S}=t,k={display:"flex",flexDirection:n,alignItems:i,justifyContent:c,flexWrap:d,flexBasis:y,flexGrow:o,flexShrink:x};return Je.jsx(Pn.div,{ref:r,__css:k,...S})});g2.displayName="Flex";function Zfe(e,t={}){const{ssr:r=!0,fallback:n}=t,{getWindow:i}=Ace(),c=Array.isArray(e)?e:[e];let d=Array.isArray(n)?n:[n];d=d.filter(x=>x!=null);const[y,o]=Se.useState(()=>c.map((x,S)=>({media:x,matches:r?!!d[S]:i().matchMedia(x).matches})));return Se.useEffect(()=>{const x=i();o(c.map(O=>({media:O,matches:x.matchMedia(O).matches})));const S=c.map(O=>x.matchMedia(O)),k=O=>{o(Q=>Q.slice().map(G=>G.media===O.media?{...G,matches:O.matches}:G))};return S.forEach(O=>{typeof O.addListener=="function"?O.addListener(k):O.addEventListener("change",k)}),()=>{S.forEach(O=>{typeof O.removeListener=="function"?O.removeListener(k):O.removeEventListener("change",k)})}},[i]),y.map(x=>x.matches)}function Yfe(e,t,r=w7){let n=Object.keys(e).indexOf(t);if(n!==-1)return e[t];let i=r.indexOf(t);for(;i>=0;){const c=r[i];if(e.hasOwnProperty(c)){n=i;break}i-=1}if(n!==-1){const c=r[n];return e[c]}}function Jfe(e){var t,r;const n=nl(e)?e:{fallback:e??"base"},c=w0().__breakpoints.details.map(({minMaxQuery:x,breakpoint:S})=>({breakpoint:S,query:x.replace("@media screen and ","")})),d=c.map(x=>x.breakpoint===n.fallback),o=Zfe(c.map(x=>x.query),{fallback:d,ssr:n.ssr}).findIndex(x=>x==!0);return(r=(t=c[o])==null?void 0:t.breakpoint)!=null?r:n.fallback}function $fe(e,t){var r;const n=nl(t)?t:{fallback:t??"base"},i=Jfe(n),c=w0();if(!i)return;const d=Array.from(((r=c.__breakpoints)==null?void 0:r.keys)||[]),y=Array.isArray(e)?Object.fromEntries(Object.entries(Wfe(e,d)).map(([o,x])=>[o,x])):e;return Yfe(y,i,d)}function epe(e){const t=e.current;if(!t)return!1;const r=Ofe(t);return!r||t.contains(r)?!1:!!Vfe(r)}function tpe(e,t){const{shouldFocus:r,visible:n,focusRef:i}=t,c=r&&!n;XC(()=>{if(!c||epe(e))return;const d=(i==null?void 0:i.current)||e.current;let y;if(d)return y=requestAnimationFrame(()=>{d.focus({preventScroll:!0})}),()=>{cancelAnimationFrame(y)}},[c,e,i])}var Gm=(e,t)=>({var:e,varRef:t?`var(${e}, ${t})`:`var(${e})`}),Zs={arrowShadowColor:Gm("--popper-arrow-shadow-color"),arrowSize:Gm("--popper-arrow-size","8px"),arrowSizeHalf:Gm("--popper-arrow-size-half"),arrowBg:Gm("--popper-arrow-bg"),transformOrigin:Gm("--popper-transform-origin"),arrowOffset:Gm("--popper-arrow-offset")};function rpe(e){if(e.includes("top"))return"1px 1px 0px 0 var(--popper-arrow-shadow-color)";if(e.includes("bottom"))return"-1px -1px 0px 0 var(--popper-arrow-shadow-color)";if(e.includes("right"))return"-1px 1px 0px 0 var(--popper-arrow-shadow-color)";if(e.includes("left"))return"1px -1px 0px 0 var(--popper-arrow-shadow-color)"}var npe={top:"bottom center","top-start":"bottom left","top-end":"bottom right",bottom:"top center","bottom-start":"top left","bottom-end":"top right",left:"right center","left-start":"right top","left-end":"right bottom",right:"left center","right-start":"left top","right-end":"left bottom"},ipe=e=>npe[e],pQ={scroll:!0,resize:!0};function ope(e){let t;return typeof e=="object"?t={enabled:!0,options:{...pQ,...e}}:t={enabled:e,options:pQ},t}var ape={name:"matchWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:e})=>{e.styles.popper.width=`${e.rects.reference.width}px`},effect:({state:e})=>()=>{const t=e.elements.reference;e.elements.popper.style.width=`${t.offsetWidth}px`}},spe={name:"transformOrigin",enabled:!0,phase:"write",fn:({state:e})=>{mQ(e)},effect:({state:e})=>()=>{mQ(e)}},mQ=e=>{e.elements.popper.style.setProperty(Zs.transformOrigin.var,ipe(e.placement))},lpe={name:"positionArrow",enabled:!0,phase:"afterWrite",fn:({state:e})=>{cpe(e)}},cpe=e=>{var t;if(!e.placement)return;const r=upe(e.placement);if((t=e.elements)!=null&&t.arrow&&r){Object.assign(e.elements.arrow.style,{[r.property]:r.value,width:Zs.arrowSize.varRef,height:Zs.arrowSize.varRef,zIndex:-1});const n={[Zs.arrowSizeHalf.var]:`calc(${Zs.arrowSize.varRef} / 2 - 1px)`,[Zs.arrowOffset.var]:`calc(${Zs.arrowSizeHalf.varRef} * -1)`};for(const i in n)e.elements.arrow.style.setProperty(i,n[i])}},upe=e=>{if(e.startsWith("top"))return{property:"bottom",value:Zs.arrowOffset.varRef};if(e.startsWith("bottom"))return{property:"top",value:Zs.arrowOffset.varRef};if(e.startsWith("left"))return{property:"right",value:Zs.arrowOffset.varRef};if(e.startsWith("right"))return{property:"left",value:Zs.arrowOffset.varRef}},Ape={name:"innerArrow",enabled:!0,phase:"main",requires:["arrow"],fn:({state:e})=>{gQ(e)},effect:({state:e})=>()=>{gQ(e)}},gQ=e=>{if(!e.elements.arrow)return;const t=e.elements.arrow.querySelector("[data-popper-arrow-inner]");if(!t)return;const r=rpe(e.placement);r&&t.style.setProperty("--popper-arrow-default-shadow",r),Object.assign(t.style,{transform:"rotate(45deg)",background:Zs.arrowBg.varRef,top:0,left:0,width:"100%",height:"100%",position:"absolute",zIndex:"inherit",boxShadow:"var(--popper-arrow-shadow, var(--popper-arrow-default-shadow))"})},hpe={"start-start":{ltr:"left-start",rtl:"right-start"},"start-end":{ltr:"left-end",rtl:"right-end"},"end-start":{ltr:"right-start",rtl:"left-start"},"end-end":{ltr:"right-end",rtl:"left-end"},start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}},dpe={"auto-start":"auto-end","auto-end":"auto-start","top-start":"top-end","top-end":"top-start","bottom-start":"bottom-end","bottom-end":"bottom-start"};function fpe(e,t="ltr"){var r,n;const i=((r=hpe[e])==null?void 0:r[t])||e;return t==="ltr"?i:(n=dpe[e])!=null?n:i}var Ps="top",Jl="bottom",$l="right",Ds="left",v2="auto",tx=[Ps,Jl,$l,Ds],h0="start",E1="end",ppe="clippingParents",T7="viewport",Cy="popper",mpe="reference",vQ=tx.reduce(function(e,t){return e.concat([t+"-"+h0,t+"-"+E1])},[]),F7=[].concat(tx,[v2]).reduce(function(e,t){return e.concat([t,t+"-"+h0,t+"-"+E1])},[]),gpe="beforeRead",vpe="read",ype="afterRead",_pe="beforeMain",xpe="main",bpe="afterMain",wpe="beforeWrite",Bpe="write",Cpe="afterWrite",Spe=[gpe,vpe,ype,_pe,xpe,bpe,wpe,Bpe,Cpe];function Ru(e){return e?(e.nodeName||"").toLowerCase():null}function ll(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function vp(e){var t=ll(e).Element;return e instanceof t||e instanceof Element}function Wl(e){var t=ll(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function y2(e){if(typeof ShadowRoot>"u")return!1;var t=ll(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Epe(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},i=t.attributes[r]||{},c=t.elements[r];!Wl(c)||!Ru(c)||(Object.assign(c.style,n),Object.keys(i).forEach(function(d){var y=i[d];y===!1?c.removeAttribute(d):c.setAttribute(d,y===!0?"":y)}))})}function Tpe(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var i=t.elements[n],c=t.attributes[n]||{},d=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),y=d.reduce(function(o,x){return o[x]="",o},{});!Wl(i)||!Ru(i)||(Object.assign(i.style,y),Object.keys(c).forEach(function(o){i.removeAttribute(o)}))})}}const Fpe={name:"applyStyles",enabled:!0,phase:"write",fn:Epe,effect:Tpe,requires:["computeStyles"]};function ku(e){return e.split("-")[0]}var cp=Math.max,nS=Math.min,d0=Math.round;function C4(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function I7(){return!/^((?!chrome|android).)*safari/i.test(C4())}function f0(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),i=1,c=1;t&&Wl(e)&&(i=e.offsetWidth>0&&d0(n.width)/e.offsetWidth||1,c=e.offsetHeight>0&&d0(n.height)/e.offsetHeight||1);var d=vp(e)?ll(e):window,y=d.visualViewport,o=!I7()&&r,x=(n.left+(o&&y?y.offsetLeft:0))/i,S=(n.top+(o&&y?y.offsetTop:0))/c,k=n.width/i,O=n.height/c;return{width:k,height:O,top:S,right:x+k,bottom:S+O,left:x,x,y:S}}function _2(e){var t=f0(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function M7(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&y2(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function QA(e){return ll(e).getComputedStyle(e)}function Ipe(e){return["table","td","th"].indexOf(Ru(e))>=0}function Nd(e){return((vp(e)?e.ownerDocument:e.document)||window.document).documentElement}function kE(e){return Ru(e)==="html"?e:e.assignedSlot||e.parentNode||(y2(e)?e.host:null)||Nd(e)}function yQ(e){return!Wl(e)||QA(e).position==="fixed"?null:e.offsetParent}function Mpe(e){var t=/firefox/i.test(C4()),r=/Trident/i.test(C4());if(r&&Wl(e)){var n=QA(e);if(n.position==="fixed")return null}var i=kE(e);for(y2(i)&&(i=i.host);Wl(i)&&["html","body"].indexOf(Ru(i))<0;){var c=QA(i);if(c.transform!=="none"||c.perspective!=="none"||c.contain==="paint"||["transform","perspective"].indexOf(c.willChange)!==-1||t&&c.willChange==="filter"||t&&c.filter&&c.filter!=="none")return i;i=i.parentNode}return null}function rx(e){for(var t=ll(e),r=yQ(e);r&&Ipe(r)&&QA(r).position==="static";)r=yQ(r);return r&&(Ru(r)==="html"||Ru(r)==="body"&&QA(r).position==="static")?t:r||Mpe(e)||t}function x2(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function D_(e,t,r){return cp(e,nS(t,r))}function Ppe(e,t,r){var n=D_(e,t,r);return n>r?r:n}function P7(){return{top:0,right:0,bottom:0,left:0}}function D7(e){return Object.assign({},P7(),e)}function k7(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var Dpe=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,D7(typeof t!="number"?t:k7(t,tx))};function kpe(e){var t,r=e.state,n=e.name,i=e.options,c=r.elements.arrow,d=r.modifiersData.popperOffsets,y=ku(r.placement),o=x2(y),x=[Ds,$l].indexOf(y)>=0,S=x?"height":"width";if(!(!c||!d)){var k=Dpe(i.padding,r),O=_2(c),Q=o==="y"?Ps:Ds,G=o==="y"?Jl:$l,K=r.rects.reference[S]+r.rects.reference[o]-d[o]-r.rects.popper[S],ee=d[o]-r.rects.reference[o],W=rx(c),J=W?o==="y"?W.clientHeight||0:W.clientWidth||0:0,re=K/2-ee/2,ue=k[Q],ce=J-O[S]-k[G],he=J/2-O[S]/2+re,xe=D_(ue,he,ce),fe=o;r.modifiersData[n]=(t={},t[fe]=xe,t.centerOffset=xe-he,t)}}function Rpe(e){var t=e.state,r=e.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||M7(t.elements.popper,i)&&(t.elements.arrow=i))}const Lpe={name:"arrow",enabled:!0,phase:"main",fn:kpe,effect:Rpe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function p0(e){return e.split("-")[1]}var Ope={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Upe(e,t){var r=e.x,n=e.y,i=t.devicePixelRatio||1;return{x:d0(r*i)/i||0,y:d0(n*i)/i||0}}function _Q(e){var t,r=e.popper,n=e.popperRect,i=e.placement,c=e.variation,d=e.offsets,y=e.position,o=e.gpuAcceleration,x=e.adaptive,S=e.roundOffsets,k=e.isFixed,O=d.x,Q=O===void 0?0:O,G=d.y,K=G===void 0?0:G,ee=typeof S=="function"?S({x:Q,y:K}):{x:Q,y:K};Q=ee.x,K=ee.y;var W=d.hasOwnProperty("x"),J=d.hasOwnProperty("y"),re=Ds,ue=Ps,ce=window;if(x){var he=rx(r),xe="clientHeight",fe="clientWidth";if(he===ll(r)&&(he=Nd(r),QA(he).position!=="static"&&y==="absolute"&&(xe="scrollHeight",fe="scrollWidth")),he=he,i===Ps||(i===Ds||i===$l)&&c===E1){ue=Jl;var Ue=k&&he===ce&&ce.visualViewport?ce.visualViewport.height:he[xe];K-=Ue-n.height,K*=o?1:-1}if(i===Ds||(i===Ps||i===Jl)&&c===E1){re=$l;var Ge=k&&he===ce&&ce.visualViewport?ce.visualViewport.width:he[fe];Q-=Ge-n.width,Q*=o?1:-1}}var He=Object.assign({position:y},x&&Ope),tt=S===!0?Upe({x:Q,y:K},ll(r)):{x:Q,y:K};if(Q=tt.x,K=tt.y,o){var pt;return Object.assign({},He,(pt={},pt[ue]=J?"0":"",pt[re]=W?"0":"",pt.transform=(ce.devicePixelRatio||1)<=1?"translate("+Q+"px, "+K+"px)":"translate3d("+Q+"px, "+K+"px, 0)",pt))}return Object.assign({},He,(t={},t[ue]=J?K+"px":"",t[re]=W?Q+"px":"",t.transform="",t))}function zpe(e){var t=e.state,r=e.options,n=r.gpuAcceleration,i=n===void 0?!0:n,c=r.adaptive,d=c===void 0?!0:c,y=r.roundOffsets,o=y===void 0?!0:y,x={placement:ku(t.placement),variation:p0(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,_Q(Object.assign({},x,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:d,roundOffsets:o})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,_Q(Object.assign({},x,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:o})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Qpe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:zpe,data:{}};var Rw={passive:!0};function Npe(e){var t=e.state,r=e.instance,n=e.options,i=n.scroll,c=i===void 0?!0:i,d=n.resize,y=d===void 0?!0:d,o=ll(t.elements.popper),x=[].concat(t.scrollParents.reference,t.scrollParents.popper);return c&&x.forEach(function(S){S.addEventListener("scroll",r.update,Rw)}),y&&o.addEventListener("resize",r.update,Rw),function(){c&&x.forEach(function(S){S.removeEventListener("scroll",r.update,Rw)}),y&&o.removeEventListener("resize",r.update,Rw)}}const Vpe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Npe,data:{}};var Hpe={left:"right",right:"left",bottom:"top",top:"bottom"};function eC(e){return e.replace(/left|right|bottom|top/g,function(t){return Hpe[t]})}var jpe={start:"end",end:"start"};function xQ(e){return e.replace(/start|end/g,function(t){return jpe[t]})}function b2(e){var t=ll(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function w2(e){return f0(Nd(e)).left+b2(e).scrollLeft}function Gpe(e,t){var r=ll(e),n=Nd(e),i=r.visualViewport,c=n.clientWidth,d=n.clientHeight,y=0,o=0;if(i){c=i.width,d=i.height;var x=I7();(x||!x&&t==="fixed")&&(y=i.offsetLeft,o=i.offsetTop)}return{width:c,height:d,x:y+w2(e),y:o}}function Kpe(e){var t,r=Nd(e),n=b2(e),i=(t=e.ownerDocument)==null?void 0:t.body,c=cp(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),d=cp(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),y=-n.scrollLeft+w2(e),o=-n.scrollTop;return QA(i||r).direction==="rtl"&&(y+=cp(r.clientWidth,i?i.clientWidth:0)-c),{width:c,height:d,x:y,y:o}}function B2(e){var t=QA(e),r=t.overflow,n=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function R7(e){return["html","body","#document"].indexOf(Ru(e))>=0?e.ownerDocument.body:Wl(e)&&B2(e)?e:R7(kE(e))}function k_(e,t){var r;t===void 0&&(t=[]);var n=R7(e),i=n===((r=e.ownerDocument)==null?void 0:r.body),c=ll(n),d=i?[c].concat(c.visualViewport||[],B2(n)?n:[]):n,y=t.concat(d);return i?y:y.concat(k_(kE(d)))}function S4(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Wpe(e,t){var r=f0(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function bQ(e,t,r){return t===T7?S4(Gpe(e,r)):vp(t)?Wpe(t,r):S4(Kpe(Nd(e)))}function qpe(e){var t=k_(kE(e)),r=["absolute","fixed"].indexOf(QA(e).position)>=0,n=r&&Wl(e)?rx(e):e;return vp(n)?t.filter(function(i){return vp(i)&&M7(i,n)&&Ru(i)!=="body"}):[]}function Xpe(e,t,r,n){var i=t==="clippingParents"?qpe(e):[].concat(t),c=[].concat(i,[r]),d=c[0],y=c.reduce(function(o,x){var S=bQ(e,x,n);return o.top=cp(S.top,o.top),o.right=nS(S.right,o.right),o.bottom=nS(S.bottom,o.bottom),o.left=cp(S.left,o.left),o},bQ(e,d,n));return y.width=y.right-y.left,y.height=y.bottom-y.top,y.x=y.left,y.y=y.top,y}function L7(e){var t=e.reference,r=e.element,n=e.placement,i=n?ku(n):null,c=n?p0(n):null,d=t.x+t.width/2-r.width/2,y=t.y+t.height/2-r.height/2,o;switch(i){case Ps:o={x:d,y:t.y-r.height};break;case Jl:o={x:d,y:t.y+t.height};break;case $l:o={x:t.x+t.width,y};break;case Ds:o={x:t.x-r.width,y};break;default:o={x:t.x,y:t.y}}var x=i?x2(i):null;if(x!=null){var S=x==="y"?"height":"width";switch(c){case h0:o[x]=o[x]-(t[S]/2-r[S]/2);break;case E1:o[x]=o[x]+(t[S]/2-r[S]/2);break}}return o}function T1(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=n===void 0?e.placement:n,c=r.strategy,d=c===void 0?e.strategy:c,y=r.boundary,o=y===void 0?ppe:y,x=r.rootBoundary,S=x===void 0?T7:x,k=r.elementContext,O=k===void 0?Cy:k,Q=r.altBoundary,G=Q===void 0?!1:Q,K=r.padding,ee=K===void 0?0:K,W=D7(typeof ee!="number"?ee:k7(ee,tx)),J=O===Cy?mpe:Cy,re=e.rects.popper,ue=e.elements[G?J:O],ce=Xpe(vp(ue)?ue:ue.contextElement||Nd(e.elements.popper),o,S,d),he=f0(e.elements.reference),xe=L7({reference:he,element:re,strategy:"absolute",placement:i}),fe=S4(Object.assign({},re,xe)),Ue=O===Cy?fe:he,Ge={top:ce.top-Ue.top+W.top,bottom:Ue.bottom-ce.bottom+W.bottom,left:ce.left-Ue.left+W.left,right:Ue.right-ce.right+W.right},He=e.modifiersData.offset;if(O===Cy&&He){var tt=He[i];Object.keys(Ge).forEach(function(pt){var gt=[$l,Jl].indexOf(pt)>=0?1:-1,Et=[Ps,Jl].indexOf(pt)>=0?"y":"x";Ge[pt]+=tt[Et]*gt})}return Ge}function Zpe(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=r.boundary,c=r.rootBoundary,d=r.padding,y=r.flipVariations,o=r.allowedAutoPlacements,x=o===void 0?F7:o,S=p0(n),k=S?y?vQ:vQ.filter(function(G){return p0(G)===S}):tx,O=k.filter(function(G){return x.indexOf(G)>=0});O.length===0&&(O=k);var Q=O.reduce(function(G,K){return G[K]=T1(e,{placement:K,boundary:i,rootBoundary:c,padding:d})[ku(K)],G},{});return Object.keys(Q).sort(function(G,K){return Q[G]-Q[K]})}function Ype(e){if(ku(e)===v2)return[];var t=eC(e);return[xQ(e),t,xQ(t)]}function Jpe(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var i=r.mainAxis,c=i===void 0?!0:i,d=r.altAxis,y=d===void 0?!0:d,o=r.fallbackPlacements,x=r.padding,S=r.boundary,k=r.rootBoundary,O=r.altBoundary,Q=r.flipVariations,G=Q===void 0?!0:Q,K=r.allowedAutoPlacements,ee=t.options.placement,W=ku(ee),J=W===ee,re=o||(J||!G?[eC(ee)]:Ype(ee)),ue=[ee].concat(re).reduce(function(Rt,Or){return Rt.concat(ku(Or)===v2?Zpe(t,{placement:Or,boundary:S,rootBoundary:k,padding:x,flipVariations:G,allowedAutoPlacements:K}):Or)},[]),ce=t.rects.reference,he=t.rects.popper,xe=new Map,fe=!0,Ue=ue[0],Ge=0;Ge<ue.length;Ge++){var He=ue[Ge],tt=ku(He),pt=p0(He)===h0,gt=[Ps,Jl].indexOf(tt)>=0,Et=gt?"width":"height",ot=T1(t,{placement:He,boundary:S,rootBoundary:k,altBoundary:O,padding:x}),Gt=gt?pt?$l:Ds:pt?Jl:Ps;ce[Et]>he[Et]&&(Gt=eC(Gt));var Pt=eC(Gt),Xt=[];if(c&&Xt.push(ot[tt]<=0),y&&Xt.push(ot[Gt]<=0,ot[Pt]<=0),Xt.every(function(Rt){return Rt})){Ue=He,fe=!1;break}xe.set(He,Xt)}if(fe)for(var It=G?3:1,dr=function(Or){var Cr=ue.find(function(qr){var Fr=xe.get(qr);if(Fr)return Fr.slice(0,Or).every(function(qi){return qi})});if(Cr)return Ue=Cr,"break"},ar=It;ar>0;ar--){var tr=dr(ar);if(tr==="break")break}t.placement!==Ue&&(t.modifiersData[n]._skip=!0,t.placement=Ue,t.reset=!0)}}const $pe={name:"flip",enabled:!0,phase:"main",fn:Jpe,requiresIfExists:["offset"],data:{_skip:!1}};function wQ(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function BQ(e){return[Ps,$l,Jl,Ds].some(function(t){return e[t]>=0})}function eme(e){var t=e.state,r=e.name,n=t.rects.reference,i=t.rects.popper,c=t.modifiersData.preventOverflow,d=T1(t,{elementContext:"reference"}),y=T1(t,{altBoundary:!0}),o=wQ(d,n),x=wQ(y,i,c),S=BQ(o),k=BQ(x);t.modifiersData[r]={referenceClippingOffsets:o,popperEscapeOffsets:x,isReferenceHidden:S,hasPopperEscaped:k},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":S,"data-popper-escaped":k})}const tme={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:eme};function rme(e,t,r){var n=ku(e),i=[Ds,Ps].indexOf(n)>=0?-1:1,c=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,d=c[0],y=c[1];return d=d||0,y=(y||0)*i,[Ds,$l].indexOf(n)>=0?{x:y,y:d}:{x:d,y}}function nme(e){var t=e.state,r=e.options,n=e.name,i=r.offset,c=i===void 0?[0,0]:i,d=F7.reduce(function(S,k){return S[k]=rme(k,t.rects,c),S},{}),y=d[t.placement],o=y.x,x=y.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=o,t.modifiersData.popperOffsets.y+=x),t.modifiersData[n]=d}const ime={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:nme};function ome(e){var t=e.state,r=e.name;t.modifiersData[r]=L7({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const ame={name:"popperOffsets",enabled:!0,phase:"read",fn:ome,data:{}};function sme(e){return e==="x"?"y":"x"}function lme(e){var t=e.state,r=e.options,n=e.name,i=r.mainAxis,c=i===void 0?!0:i,d=r.altAxis,y=d===void 0?!1:d,o=r.boundary,x=r.rootBoundary,S=r.altBoundary,k=r.padding,O=r.tether,Q=O===void 0?!0:O,G=r.tetherOffset,K=G===void 0?0:G,ee=T1(t,{boundary:o,rootBoundary:x,padding:k,altBoundary:S}),W=ku(t.placement),J=p0(t.placement),re=!J,ue=x2(W),ce=sme(ue),he=t.modifiersData.popperOffsets,xe=t.rects.reference,fe=t.rects.popper,Ue=typeof K=="function"?K(Object.assign({},t.rects,{placement:t.placement})):K,Ge=typeof Ue=="number"?{mainAxis:Ue,altAxis:Ue}:Object.assign({mainAxis:0,altAxis:0},Ue),He=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,tt={x:0,y:0};if(he){if(c){var pt,gt=ue==="y"?Ps:Ds,Et=ue==="y"?Jl:$l,ot=ue==="y"?"height":"width",Gt=he[ue],Pt=Gt+ee[gt],Xt=Gt-ee[Et],It=Q?-fe[ot]/2:0,dr=J===h0?xe[ot]:fe[ot],ar=J===h0?-fe[ot]:-xe[ot],tr=t.elements.arrow,Rt=Q&&tr?_2(tr):{width:0,height:0},Or=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:P7(),Cr=Or[gt],qr=Or[Et],Fr=D_(0,xe[ot],Rt[ot]),qi=re?xe[ot]/2-It-Fr-Cr-Ge.mainAxis:dr-Fr-Cr-Ge.mainAxis,Xi=re?-xe[ot]/2+It+Fr+qr+Ge.mainAxis:ar+Fr+qr+Ge.mainAxis,ke=t.elements.arrow&&rx(t.elements.arrow),ao=ke?ue==="y"?ke.clientTop||0:ke.clientLeft||0:0,ko=(pt=He==null?void 0:He[ue])!=null?pt:0,Sa=Gt+qi-ko-ao,Dt=Gt+Xi-ko,Ea=D_(Q?nS(Pt,Sa):Pt,Gt,Q?cp(Xt,Dt):Xt);he[ue]=Ea,tt[ue]=Ea-Gt}if(y){var Ei,po=ue==="x"?Ps:Ds,Br=ue==="x"?Jl:$l,en=he[ce],Hi=ce==="y"?"height":"width",mo=en+ee[po],so=en-ee[Br],Wa=[Ps,Ds].indexOf(W)!==-1,xr=(Ei=He==null?void 0:He[ce])!=null?Ei:0,Ls=Wa?mo:en-xe[Hi]-fe[Hi]-xr+Ge.altAxis,Ta=Wa?en+xe[Hi]+fe[Hi]-xr-Ge.altAxis:so,ia=Q&&Wa?Ppe(Ls,en,Ta):D_(Q?Ls:mo,en,Q?Ta:so);he[ce]=ia,tt[ce]=ia-en}t.modifiersData[n]=tt}}const cme={name:"preventOverflow",enabled:!0,phase:"main",fn:lme,requiresIfExists:["offset"]};function ume(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Ame(e){return e===ll(e)||!Wl(e)?b2(e):ume(e)}function hme(e){var t=e.getBoundingClientRect(),r=d0(t.width)/e.offsetWidth||1,n=d0(t.height)/e.offsetHeight||1;return r!==1||n!==1}function dme(e,t,r){r===void 0&&(r=!1);var n=Wl(t),i=Wl(t)&&hme(t),c=Nd(t),d=f0(e,i,r),y={scrollLeft:0,scrollTop:0},o={x:0,y:0};return(n||!n&&!r)&&((Ru(t)!=="body"||B2(c))&&(y=Ame(t)),Wl(t)?(o=f0(t,!0),o.x+=t.clientLeft,o.y+=t.clientTop):c&&(o.x=w2(c))),{x:d.left+y.scrollLeft-o.x,y:d.top+y.scrollTop-o.y,width:d.width,height:d.height}}function fme(e){var t=new Map,r=new Set,n=[];e.forEach(function(c){t.set(c.name,c)});function i(c){r.add(c.name);var d=[].concat(c.requires||[],c.requiresIfExists||[]);d.forEach(function(y){if(!r.has(y)){var o=t.get(y);o&&i(o)}}),n.push(c)}return e.forEach(function(c){r.has(c.name)||i(c)}),n}function pme(e){var t=fme(e);return Spe.reduce(function(r,n){return r.concat(t.filter(function(i){return i.phase===n}))},[])}function mme(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function gme(e){var t=e.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var CQ={placement:"bottom",modifiers:[],strategy:"absolute"};function SQ(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function vme(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,i=t.defaultOptions,c=i===void 0?CQ:i;return function(y,o,x){x===void 0&&(x=c);var S={placement:"bottom",orderedModifiers:[],options:Object.assign({},CQ,c),modifiersData:{},elements:{reference:y,popper:o},attributes:{},styles:{}},k=[],O=!1,Q={state:S,setOptions:function(W){var J=typeof W=="function"?W(S.options):W;K(),S.options=Object.assign({},c,S.options,J),S.scrollParents={reference:vp(y)?k_(y):y.contextElement?k_(y.contextElement):[],popper:k_(o)};var re=pme(gme([].concat(n,S.options.modifiers)));return S.orderedModifiers=re.filter(function(ue){return ue.enabled}),G(),Q.update()},forceUpdate:function(){if(!O){var W=S.elements,J=W.reference,re=W.popper;if(SQ(J,re)){S.rects={reference:dme(J,rx(re),S.options.strategy==="fixed"),popper:_2(re)},S.reset=!1,S.placement=S.options.placement,S.orderedModifiers.forEach(function(Ge){return S.modifiersData[Ge.name]=Object.assign({},Ge.data)});for(var ue=0;ue<S.orderedModifiers.length;ue++){if(S.reset===!0){S.reset=!1,ue=-1;continue}var ce=S.orderedModifiers[ue],he=ce.fn,xe=ce.options,fe=xe===void 0?{}:xe,Ue=ce.name;typeof he=="function"&&(S=he({state:S,options:fe,name:Ue,instance:Q})||S)}}}},update:mme(function(){return new Promise(function(ee){Q.forceUpdate(),ee(S)})}),destroy:function(){K(),O=!0}};if(!SQ(y,o))return Q;Q.setOptions(x).then(function(ee){!O&&x.onFirstUpdate&&x.onFirstUpdate(ee)});function G(){S.orderedModifiers.forEach(function(ee){var W=ee.name,J=ee.options,re=J===void 0?{}:J,ue=ee.effect;if(typeof ue=="function"){var ce=ue({state:S,name:W,instance:Q,options:re}),he=function(){};k.push(ce||he)}})}function K(){k.forEach(function(ee){return ee()}),k=[]}return Q}}var yme=[Vpe,ame,Qpe,Fpe,ime,$pe,cme,Lpe,tme],_me=vme({defaultModifiers:yme});function xme(e={}){const{enabled:t=!0,modifiers:r,placement:n="bottom",strategy:i="absolute",arrowPadding:c=8,eventListeners:d=!0,offset:y,gutter:o=8,flip:x=!0,boundary:S="clippingParents",preventOverflow:k=!0,matchWidth:O,direction:Q="ltr"}=e,G=Se.useRef(null),K=Se.useRef(null),ee=Se.useRef(null),W=fpe(n,Q),J=Se.useRef(()=>{}),re=Se.useCallback(()=>{var Ge;!t||!G.current||!K.current||((Ge=J.current)==null||Ge.call(J),ee.current=_me(G.current,K.current,{placement:W,modifiers:[Ape,lpe,spe,{...ape,enabled:!!O},{name:"eventListeners",...ope(d)},{name:"arrow",options:{padding:c}},{name:"offset",options:{offset:y??[0,o]}},{name:"flip",enabled:!!x,options:{padding:8}},{name:"preventOverflow",enabled:!!k,options:{boundary:S}},...r??[]],strategy:i}),ee.current.forceUpdate(),J.current=ee.current.destroy)},[W,t,r,O,d,c,y,o,x,k,S,i]);Se.useEffect(()=>()=>{var Ge;!G.current&&!K.current&&((Ge=ee.current)==null||Ge.destroy(),ee.current=null)},[]);const ue=Se.useCallback(Ge=>{G.current=Ge,re()},[re]),ce=Se.useCallback((Ge={},He=null)=>({...Ge,ref:A0(ue,He)}),[ue]),he=Se.useCallback(Ge=>{K.current=Ge,re()},[re]),xe=Se.useCallback((Ge={},He=null)=>({...Ge,ref:A0(he,He),style:{...Ge.style,position:i,minWidth:O?void 0:"max-content",inset:"0 auto auto 0"}}),[i,he,O]),fe=Se.useCallback((Ge={},He=null)=>{const{size:tt,shadowColor:pt,bg:gt,style:Et,...ot}=Ge;return{...ot,ref:He,"data-popper-arrow":"",style:bme(Ge)}},[]),Ue=Se.useCallback((Ge={},He=null)=>({...Ge,ref:He,"data-popper-arrow-inner":""}),[]);return{update(){var Ge;(Ge=ee.current)==null||Ge.update()},forceUpdate(){var Ge;(Ge=ee.current)==null||Ge.forceUpdate()},transformOrigin:Zs.transformOrigin.varRef,referenceRef:ue,popperRef:he,getPopperProps:xe,getArrowProps:fe,getArrowInnerProps:Ue,getReferenceProps:ce}}function bme(e){const{size:t,shadowColor:r,bg:n,style:i}=e,c={...i,position:"absolute"};return t&&(c["--popper-arrow-size"]=t),r&&(c["--popper-arrow-shadow-color"]=r),n&&(c["--popper-arrow-bg"]=n),c}function wme(e={}){const{onClose:t,onOpen:r,isOpen:n,id:i}=e,c=x1(r),d=x1(t),[y,o]=Se.useState(e.defaultIsOpen||!1),x=n!==void 0?n:y,S=n!==void 0,k=Se.useId(),O=i??`disclosure-${k}`,Q=Se.useCallback(()=>{S||o(!1),d==null||d()},[S,d]),G=Se.useCallback(()=>{S||o(!0),c==null||c()},[S,c]),K=Se.useCallback(()=>{x?Q():G()},[x,G,Q]);function ee(J={}){return{...J,"aria-expanded":x,"aria-controls":O,onClick(re){var ue;(ue=J.onClick)==null||ue.call(J,re),K()}}}function W(J={}){return{...J,hidden:!x,id:O}}return{isOpen:x,onOpen:G,onClose:Q,onToggle:K,isControlled:S,getButtonProps:ee,getDisclosureProps:W}}function Bme(e){const{ref:t,handler:r,enabled:n=!0}=e,i=x1(r),d=Se.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}).current;Se.useEffect(()=>{if(!n)return;const y=k=>{lM(k,t)&&(d.isPointerDown=!0)},o=k=>{if(d.ignoreEmulatedMouseEvents){d.ignoreEmulatedMouseEvents=!1;return}d.isPointerDown&&r&&lM(k,t)&&(d.isPointerDown=!1,i(k))},x=k=>{d.ignoreEmulatedMouseEvents=!0,r&&d.isPointerDown&&lM(k,t)&&(d.isPointerDown=!1,i(k))},S=O7(t.current);return S.addEventListener("mousedown",y,!0),S.addEventListener("mouseup",o,!0),S.addEventListener("touchstart",y,!0),S.addEventListener("touchend",x,!0),()=>{S.removeEventListener("mousedown",y,!0),S.removeEventListener("mouseup",o,!0),S.removeEventListener("touchstart",y,!0),S.removeEventListener("touchend",x,!0)}},[r,t,i,d,n])}function lM(e,t){var r;const n=e.target;return n&&!O7(n).contains(n)?!1:!((r=t.current)!=null&&r.contains(n))}function O7(e){var t;return(t=e==null?void 0:e.ownerDocument)!=null?t:document}function Cme(e){const{isOpen:t,ref:r}=e,[n,i]=Se.useState(t),[c,d]=Se.useState(!1);return Se.useEffect(()=>{c||(i(t),d(!0))},[t,c,n]),Ffe(()=>r.current,"animationend",()=>{i(t)}),{present:!(t?!1:!n),onComplete(){var o;const x=Lfe(r.current),S=new x.CustomEvent("animationend",{bubbles:!0});(o=r.current)==null||o.dispatchEvent(S)}}}var[Sme,NFe,Eme,VFe]=yfe(),[Tme,HFe]=dl({strict:!1,name:"MenuContext"});function Fme(e,...t){const r=Se.useId(),n=e||r;return Se.useMemo(()=>t.map(i=>`${i}-${n}`),[n,t])}function Ime(e){var t;return(t=e==null?void 0:e.ownerDocument)!=null?t:document}function Mme(e={}){const{id:t,closeOnSelect:r=!0,closeOnBlur:n=!0,initialFocusRef:i,autoSelect:c=!0,isLazy:d,isOpen:y,defaultIsOpen:o,onClose:x,onOpen:S,placement:k="bottom-start",lazyBehavior:O="unmount",direction:Q,computePositionOnMount:G=!1,...K}=e,ee=Se.useRef(null),W=Se.useRef(null),J=Eme(),re=Se.useCallback(()=>{requestAnimationFrame(()=>{var tr;(tr=ee.current)==null||tr.focus({preventScroll:!1})})},[]),ue=Se.useCallback(()=>{const tr=setTimeout(()=>{var Rt;if(i)(Rt=i.current)==null||Rt.focus();else{const Or=J.firstEnabled();Or&&pt(Or.index)}});Pt.current.add(tr)},[J,i]),ce=Se.useCallback(()=>{const tr=setTimeout(()=>{const Rt=J.lastEnabled();Rt&&pt(Rt.index)});Pt.current.add(tr)},[J]),he=Se.useCallback(()=>{S==null||S(),c?ue():re()},[c,ue,re,S]),{isOpen:xe,onOpen:fe,onClose:Ue,onToggle:Ge}=wme({isOpen:y,defaultIsOpen:o,onClose:x,onOpen:he});Bme({enabled:xe&&n,ref:ee,handler:tr=>{var Rt;(Rt=W.current)!=null&&Rt.contains(tr.target)||Ue()}});const He=xme({...K,enabled:xe||G,placement:k,direction:Q}),[tt,pt]=Se.useState(-1);XC(()=>{xe||pt(-1)},[xe]),tpe(ee,{focusRef:W,visible:xe,shouldFocus:!0});const gt=Cme({isOpen:xe,ref:ee}),[Et,ot]=Fme(t,"menu-button","menu-list"),Gt=Se.useCallback(()=>{fe(),re()},[fe,re]),Pt=Se.useRef(new Set([]));Se.useEffect(()=>{const tr=Pt.current;return()=>{tr.forEach(Rt=>clearTimeout(Rt)),tr.clear()}},[]);const Xt=Se.useCallback(()=>{fe(),ue()},[ue,fe]),It=Se.useCallback(()=>{fe(),ce()},[fe,ce]),dr=Se.useCallback(()=>{var tr,Rt;const Or=Ime(ee.current),Cr=(tr=ee.current)==null?void 0:tr.contains(Or.activeElement);if(!(xe&&!Cr))return;const Fr=(Rt=J.item(tt))==null?void 0:Rt.node;Fr==null||Fr.focus({preventScroll:!0})},[xe,tt,J]),ar=Se.useRef(null);return{openAndFocusMenu:Gt,openAndFocusFirstItem:Xt,openAndFocusLastItem:It,onTransitionEnd:dr,unstable__animationState:gt,descendants:J,popper:He,buttonId:Et,menuId:ot,forceUpdate:He.forceUpdate,orientation:"vertical",isOpen:xe,onToggle:Ge,onOpen:fe,onClose:Ue,menuRef:ee,buttonRef:W,focusedIndex:tt,closeOnSelect:r,closeOnBlur:n,autoSelect:c,setFocusedIndex:pt,isLazy:d,lazyBehavior:O,initialFocusRef:i,rafId:ar}}var[Pme,Dme]=dl({name:"MenuStylesContext",errorMessage:`useMenuStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Menu />" `}),U7=e=>{const{children:t}=e,r=Rs("Menu",e),n=nc(e),{direction:i}=w0(),{descendants:c,...d}=Mme({...n,direction:i}),y=Se.useMemo(()=>d,[d]),{isOpen:o,onClose:x,forceUpdate:S}=y;return Je.jsx(Sme,{value:c,children:Je.jsx(Tme,{value:y,children:Je.jsx(Pme,{value:r,children:_A(t,{isOpen:o,onClose:x,forceUpdate:S})})})})};U7.displayName="Menu";var z7=e=>{const{className:t,children:r,...n}=e,i=Dme(),c=Se.Children.only(r),d=Se.isValidElement(c)?Se.cloneElement(c,{focusable:"false","aria-hidden":!0,className:fo("chakra-menu__icon",c.props.className)}):null,y=fo("chakra-menu__icon-wrapper",t);return Je.jsx(Pn.span,{className:y,...n,__css:i.icon,children:d})};z7.displayName="MenuIcon";var[kme,nx]=dl({name:"TableStylesContext",errorMessage:`useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Table />" `}),Q7=di((e,t)=>{const r=Rs("Table",e),{className:n,layout:i,...c}=nc(e);return Je.jsx(kme,{value:r,children:Je.jsx(Pn.table,{ref:t,__css:{tableLayout:i,...r.table},className:fo("chakra-table",n),...c})})});Q7.displayName="Table";var Rme=di((e,t)=>{const r=nx();return Je.jsx(Pn.thead,{...e,ref:t,__css:r.thead})}),Lf=di((e,t)=>{const r=nx();return Je.jsx(Pn.tr,{...e,ref:t,__css:r.tr})}),Lme=di((e,t)=>{const r=nx();return Je.jsx(Pn.tbody,{...e,ref:t,__css:r.tbody})}),Fl=di(({isNumeric:e,...t},r)=>{const n=nx();return Je.jsx(Pn.td,{...t,ref:r,__css:n.td,"data-is-numeric":e})}),EQ=di(({isNumeric:e,...t},r)=>{const n=nx();return Je.jsx(Pn.th,{...t,ref:r,__css:n.th,"data-is-numeric":e})});const Ome=()=>Je.jsx(Li,{bg:"#e05c04",px:4,children:Je.jsx(g2,{h:"8vh",alignItems:"center",justifyContent:"space-between",children:Je.jsx(m2,{size:"md",color:"white",children:"BHP"})})});function TQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Lr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TQ(Object(r),!0).forEach(function(n){Ig(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ume(e){if(Array.isArray(e))return e}function zme(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,c,d,y=[],o=!0,x=!1;try{if(c=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;o=!1}else for(;!(o=(n=c.call(r)).done)&&(y.push(n.value),y.length!==t);o=!0);}catch(S){x=!0,i=S}finally{try{if(!o&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(x)throw i}}return y}}function E4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function N7(e,t){if(e){if(typeof e=="string")return E4(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E4(e,t):void 0}}function Qme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $o(e,t){return Ume(e)||zme(e,t)||N7(e,t)||Qme()}function Lc(e,t){if(e==null)return{};var r,n,i=Ife(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var Nme=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function RE(e){var t=e.defaultInputValue,r=t===void 0?"":t,n=e.defaultMenuIsOpen,i=n===void 0?!1:n,c=e.defaultValue,d=c===void 0?null:c,y=e.inputValue,o=e.menuIsOpen,x=e.onChange,S=e.onInputChange,k=e.onMenuClose,O=e.onMenuOpen,Q=e.value,G=Lc(e,Nme),K=Se.useState(y!==void 0?y:r),ee=$o(K,2),W=ee[0],J=ee[1],re=Se.useState(o!==void 0?o:i),ue=$o(re,2),ce=ue[0],he=ue[1],xe=Se.useState(Q!==void 0?Q:d),fe=$o(xe,2),Ue=fe[0],Ge=fe[1],He=Se.useCallback(function(Pt,Xt){typeof x=="function"&&x(Pt,Xt),Ge(Pt)},[x]),tt=Se.useCallback(function(Pt,Xt){var It;typeof S=="function"&&(It=S(Pt,Xt)),J(It!==void 0?It:Pt)},[S]),pt=Se.useCallback(function(){typeof O=="function"&&O(),he(!0)},[O]),gt=Se.useCallback(function(){typeof k=="function"&&k(),he(!1)},[k]),Et=y!==void 0?y:W,ot=o!==void 0?o:ce,Gt=Q!==void 0?Q:Ue;return Lr(Lr({},G),{},{inputValue:Et,menuIsOpen:ot,onChange:He,onInputChange:tt,onMenuClose:gt,onMenuOpen:pt,value:Gt})}function Vme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p7(n.key),n)}}function Hme(e,t,r){return t&&FQ(e.prototype,t),r&&FQ(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function jme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B4(e,t)}function iS(e){return iS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},iS(e)}function V7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V7=function(){return!!e})()}function Gme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kme(e,t){if(t&&(gp(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gme(e)}function Wme(e){var t=V7();return function(){var r,n=iS(e);if(t){var i=iS(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Kme(this,r)}}function qme(e){if(Array.isArray(e))return E4(e)}function Xme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Zme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kg(e){return qme(e)||Xme(e)||N7(e)||Zme()}function Yme(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const Jme=Math.min,$me=Math.max,oS=Math.round,Lw=Math.floor,aS=e=>({x:e,y:e});function ege(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function H7(e){return G7(e)?(e.nodeName||"").toLowerCase():"#document"}function NA(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function j7(e){var t;return(t=(G7(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function G7(e){return e instanceof Node||e instanceof NA(e).Node}function tge(e){return e instanceof Element||e instanceof NA(e).Element}function C2(e){return e instanceof HTMLElement||e instanceof NA(e).HTMLElement}function IQ(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof NA(e).ShadowRoot}function K7(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=S2(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(i)}function rge(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function nge(e){return["html","body","#document"].includes(H7(e))}function S2(e){return NA(e).getComputedStyle(e)}function ige(e){if(H7(e)==="html")return e;const t=e.assignedSlot||e.parentNode||IQ(e)&&e.host||j7(e);return IQ(t)?t.host:t}function W7(e){const t=ige(e);return nge(t)?e.ownerDocument?e.ownerDocument.body:e.body:C2(t)&&K7(t)?t:W7(t)}function sS(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=W7(e),c=i===((n=e.ownerDocument)==null?void 0:n.body),d=NA(i);if(c){const y=T4(d);return t.concat(d,d.visualViewport||[],K7(i)?i:[],y&&r?sS(y):[])}return t.concat(i,sS(i,[],r))}function T4(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function oge(e){const t=S2(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=C2(e),c=i?e.offsetWidth:r,d=i?e.offsetHeight:n,y=oS(r)!==c||oS(n)!==d;return y&&(r=c,n=d),{width:r,height:n,$:y}}function E2(e){return tge(e)?e:e.contextElement}function MQ(e){const t=E2(e);if(!C2(t))return aS(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:c}=oge(t);let d=(c?oS(r.width):r.width)/n,y=(c?oS(r.height):r.height)/i;return(!d||!Number.isFinite(d))&&(d=1),(!y||!Number.isFinite(y))&&(y=1),{x:d,y}}const age=aS(0);function sge(e){const t=NA(e);return!rge()||!t.visualViewport?age:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function lge(e,t,r){return!1}function PQ(e,t,r,n){t===void 0&&(t=!1);const i=e.getBoundingClientRect(),c=E2(e);let d=aS(1);t&&(d=MQ(e));const y=lge()?sge(c):aS(0);let o=(i.left+y.x)/d.x,x=(i.top+y.y)/d.y,S=i.width/d.x,k=i.height/d.y;if(c){const O=NA(c),Q=n;let G=O,K=T4(G);for(;K&&n&&Q!==G;){const ee=MQ(K),W=K.getBoundingClientRect(),J=S2(K),re=W.left+(K.clientLeft+parseFloat(J.paddingLeft))*ee.x,ue=W.top+(K.clientTop+parseFloat(J.paddingTop))*ee.y;o*=ee.x,x*=ee.y,S*=ee.x,k*=ee.y,o+=re,x+=ue,G=NA(K),K=T4(G)}}return ege({width:S,height:k,x:o,y:x})}function cge(e,t){let r=null,n;const i=j7(e);function c(){var y;clearTimeout(n),(y=r)==null||y.disconnect(),r=null}function d(y,o){y===void 0&&(y=!1),o===void 0&&(o=1),c();const{left:x,top:S,width:k,height:O}=e.getBoundingClientRect();if(y||t(),!k||!O)return;const Q=Lw(S),G=Lw(i.clientWidth-(x+k)),K=Lw(i.clientHeight-(S+O)),ee=Lw(x),J={rootMargin:-Q+"px "+-G+"px "+-K+"px "+-ee+"px",threshold:$me(0,Jme(1,o))||1};let re=!0;function ue(ce){const he=ce[0].intersectionRatio;if(he!==o){if(!re)return d();he?d(!1,he):n=setTimeout(()=>{d(!1,1e-7)},1e3)}re=!1}try{r=new IntersectionObserver(ue,{...J,root:i.ownerDocument})}catch{r=new IntersectionObserver(ue,J)}r.observe(e)}return d(!0),c}function uge(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:c=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:y=typeof IntersectionObserver=="function",animationFrame:o=!1}=n,x=E2(e),S=i||c?[...x?sS(x):[],...sS(t)]:[];S.forEach(W=>{i&&W.addEventListener("scroll",r,{passive:!0}),c&&W.addEventListener("resize",r)});const k=x&&y?cge(x,r):null;let O=-1,Q=null;d&&(Q=new ResizeObserver(W=>{let[J]=W;J&&J.target===x&&Q&&(Q.unobserve(t),cancelAnimationFrame(O),O=requestAnimationFrame(()=>{var re;(re=Q)==null||re.observe(t)})),r()}),x&&!o&&Q.observe(x),Q.observe(t));let G,K=o?PQ(e):null;o&&ee();function ee(){const W=PQ(e);K&&(W.x!==K.x||W.y!==K.y||W.width!==K.width||W.height!==K.height)&&r(),K=W,G=requestAnimationFrame(ee)}return r(),()=>{var W;S.forEach(J=>{i&&J.removeEventListener("scroll",r),c&&J.removeEventListener("resize",r)}),k==null||k(),(W=Q)==null||W.disconnect(),Q=null,o&&cancelAnimationFrame(G)}}var F4=Se.useLayoutEffect,Age=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],lS=function(){};function hge(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function dge(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var c=[].concat(n);if(t&&e)for(var d in t)t.hasOwnProperty(d)&&t[d]&&c.push("".concat(hge(e,d)));return c.filter(function(y){return y}).map(function(y){return String(y).trim()}).join(" ")}var cS=function(t){return wge(t)?t.filter(Boolean):gp(t)==="object"&&t!==null?[t]:[]},q7=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var r=Lc(t,Age);return Lr({},r)},ho=function(t,r,n){var i=t.cx,c=t.getStyles,d=t.getClassNames,y=t.className;return{css:c(r,t),className:i(n??{},d(r,t),y)}};function fge(e,t,r){if(r){var n=r(e,t);if(typeof n=="string")return n}return e}function LE(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function pge(e){return LE(e)?window.innerHeight:e.clientHeight}function X7(e){return LE(e)?window.pageYOffset:e.scrollTop}function uS(e,t){if(LE(e)){window.scrollTo(0,t);return}e.scrollTop=t}function mge(e){var t=getComputedStyle(e),r=t.position==="absolute",n=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var i=e;i=i.parentElement;)if(t=getComputedStyle(i),!(r&&t.position==="static")&&n.test(t.overflow+t.overflowY+t.overflowX))return i;return document.documentElement}function gge(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function Ow(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:lS,i=X7(e),c=t-i,d=10,y=0;function o(){y+=d;var x=gge(y,i,c,r);uS(e,x),y<r?window.requestAnimationFrame(o):n(e)}o()}function DQ(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),i=t.offsetHeight/3;n.bottom+i>r.bottom?uS(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+i,e.scrollHeight)):n.top-i<r.top&&uS(e,Math.max(t.offsetTop-i,0))}function vge(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function kQ(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function yge(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var Z7=!1,_ge={get passive(){return Z7=!0}},Uw=typeof window<"u"?window:{};Uw.addEventListener&&Uw.removeEventListener&&(Uw.addEventListener("p",lS,_ge),Uw.removeEventListener("p",lS,!1));var xge=Z7;function bge(e){return e!=null}function wge(e){return Array.isArray(e)}function Jy(e,t,r){return e?t:r}var Bge=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var c=Object.entries(t).filter(function(d){var y=$o(d,1),o=y[0];return!n.includes(o)});return c.reduce(function(d,y){var o=$o(y,2),x=o[0],S=o[1];return d[x]=S,d},{})},Cge=["children","innerProps"],Sge=["children","innerProps"];function Ege(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,i=e.placement,c=e.shouldScroll,d=e.isFixedPosition,y=e.controlHeight,o=mge(r),x={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return x;var S=o.getBoundingClientRect(),k=S.height,O=r.getBoundingClientRect(),Q=O.bottom,G=O.height,K=O.top,ee=r.offsetParent.getBoundingClientRect(),W=ee.top,J=d?window.innerHeight:pge(o),re=X7(o),ue=parseInt(getComputedStyle(r).marginBottom,10),ce=parseInt(getComputedStyle(r).marginTop,10),he=W-ce,xe=J-K,fe=he+re,Ue=k-re-K,Ge=Q-J+re+ue,He=re+K-ce,tt=160;switch(i){case"auto":case"bottom":if(xe>=G)return{placement:"bottom",maxHeight:t};if(Ue>=G&&!d)return c&&Ow(o,Ge,tt),{placement:"bottom",maxHeight:t};if(!d&&Ue>=n||d&&xe>=n){c&&Ow(o,Ge,tt);var pt=d?xe-ue:Ue-ue;return{placement:"bottom",maxHeight:pt}}if(i==="auto"||d){var gt=t,Et=d?he:fe;return Et>=n&&(gt=Math.min(Et-ue-y,t)),{placement:"top",maxHeight:gt}}if(i==="bottom")return c&&uS(o,Ge),{placement:"bottom",maxHeight:t};break;case"top":if(he>=G)return{placement:"top",maxHeight:t};if(fe>=G&&!d)return c&&Ow(o,He,tt),{placement:"top",maxHeight:t};if(!d&&fe>=n||d&&he>=n){var ot=t;return(!d&&fe>=n||d&&he>=n)&&(ot=d?he-ce:fe-ce),c&&Ow(o,He,tt),{placement:"top",maxHeight:ot}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return x}function Tge(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var Y7=function(t){return t==="auto"?"bottom":t},Fge=function(t,r){var n,i=t.placement,c=t.theme,d=c.borderRadius,y=c.spacing,o=c.colors;return Lr((n={label:"menu"},Ig(n,Tge(i),"100%"),Ig(n,"position","absolute"),Ig(n,"width","100%"),Ig(n,"zIndex",1),n),r?{}:{backgroundColor:o.neutral0,borderRadius:d,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:y.menuGutter,marginTop:y.menuGutter})},J7=Se.createContext(null),Ige=function(t){var r=t.children,n=t.minMenuHeight,i=t.maxMenuHeight,c=t.menuPlacement,d=t.menuPosition,y=t.menuShouldScrollIntoView,o=t.theme,x=Se.useContext(J7)||{},S=x.setPortalPlacement,k=Se.useRef(null),O=Se.useState(i),Q=$o(O,2),G=Q[0],K=Q[1],ee=Se.useState(null),W=$o(ee,2),J=W[0],re=W[1],ue=o.spacing.controlHeight;return F4(function(){var ce=k.current;if(ce){var he=d==="fixed",xe=y&&!he,fe=Ege({maxHeight:i,menuEl:ce,minHeight:n,placement:c,shouldScroll:xe,isFixedPosition:he,controlHeight:ue});K(fe.maxHeight),re(fe.placement),S==null||S(fe.placement)}},[i,c,d,y,n,S,ue]),r({ref:k,placerProps:Lr(Lr({},t),{},{placement:J||Y7(c),maxHeight:G})})},Mge=function(t){var r=t.children,n=t.innerRef,i=t.innerProps;return Hr("div",Qr({},ho(t,"menu",{menu:!0}),{ref:n},i),r)},Pge=Mge,Dge=function(t,r){var n=t.maxHeight,i=t.theme.spacing.baseUnit;return Lr({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},r?{}:{paddingBottom:i,paddingTop:i})},kge=function(t){var r=t.children,n=t.innerProps,i=t.innerRef,c=t.isMulti;return Hr("div",Qr({},ho(t,"menuList",{"menu-list":!0,"menu-list--is-multi":c}),{ref:i},n),r)},$7=function(t,r){var n=t.theme,i=n.spacing.baseUnit,c=n.colors;return Lr({textAlign:"center"},r?{}:{color:c.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},Rge=$7,Lge=$7,Oge=function(t){var r=t.children,n=r===void 0?"No options":r,i=t.innerProps,c=Lc(t,Cge);return Hr("div",Qr({},ho(Lr(Lr({},c),{},{children:n,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),n)},Uge=function(t){var r=t.children,n=r===void 0?"Loading...":r,i=t.innerProps,c=Lc(t,Sge);return Hr("div",Qr({},ho(Lr(Lr({},c),{},{children:n,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),n)},zge=function(t){var r=t.rect,n=t.offset,i=t.position;return{left:r.left,position:i,top:n,width:r.width,zIndex:1}},Qge=function(t){var r=t.appendTo,n=t.children,i=t.controlElement,c=t.innerProps,d=t.menuPlacement,y=t.menuPosition,o=Se.useRef(null),x=Se.useRef(null),S=Se.useState(Y7(d)),k=$o(S,2),O=k[0],Q=k[1],G=Se.useMemo(function(){return{setPortalPlacement:Q}},[]),K=Se.useState(null),ee=$o(K,2),W=ee[0],J=ee[1],re=Se.useCallback(function(){if(i){var xe=vge(i),fe=y==="fixed"?0:window.pageYOffset,Ue=xe[O]+fe;(Ue!==(W==null?void 0:W.offset)||xe.left!==(W==null?void 0:W.rect.left)||xe.width!==(W==null?void 0:W.rect.width))&&J({offset:Ue,rect:xe})}},[i,y,O,W==null?void 0:W.offset,W==null?void 0:W.rect.left,W==null?void 0:W.rect.width]);F4(function(){re()},[re]);var ue=Se.useCallback(function(){typeof x.current=="function"&&(x.current(),x.current=null),i&&o.current&&(x.current=uge(i,o.current,re,{elementResize:"ResizeObserver"in window}))},[i,re]);F4(function(){ue()},[ue]);var ce=Se.useCallback(function(xe){o.current=xe,ue()},[ue]);if(!r&&y!=="fixed"||!W)return null;var he=Hr("div",Qr({ref:ce},ho(Lr(Lr({},t),{},{offset:W.offset,position:y,rect:W.rect}),"menuPortal",{"menu-portal":!0}),c),n);return Hr(J7.Provider,{value:G},r?tE.createPortal(he,r):he)},Nge=function(t){var r=t.isDisabled,n=t.isRtl;return{label:"container",direction:n?"rtl":void 0,pointerEvents:r?"none":void 0,position:"relative"}},Vge=function(t){var r=t.children,n=t.innerProps,i=t.isDisabled,c=t.isRtl;return Hr("div",Qr({},ho(t,"container",{"--is-disabled":i,"--is-rtl":c}),n),r)},Hge=function(t,r){var n=t.theme.spacing,i=t.isMulti,c=t.hasValue,d=t.selectProps.controlShouldRenderValue;return Lr({alignItems:"center",display:i&&c&&d?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},r?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(n.baseUnit*2,"px")})},jge=function(t){var r=t.children,n=t.innerProps,i=t.isMulti,c=t.hasValue;return Hr("div",Qr({},ho(t,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":c}),n),r)},Gge=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},Kge=function(t){var r=t.children,n=t.innerProps;return Hr("div",Qr({},ho(t,"indicatorsContainer",{indicators:!0}),n),r)},RQ,Wge=["size"],qge=["innerProps","isRtl","size"],Xge={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},e9=function(t){var r=t.size,n=Lc(t,Wge);return Hr("svg",Qr({height:r,width:r,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:Xge},n))},T2=function(t){return Hr(e9,Qr({size:20},t),Hr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},t9=function(t){return Hr(e9,Qr({size:20},t),Hr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},r9=function(t,r){var n=t.isFocused,i=t.theme,c=i.spacing.baseUnit,d=i.colors;return Lr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},r?{}:{color:n?d.neutral60:d.neutral20,padding:c*2,":hover":{color:n?d.neutral80:d.neutral40}})},Zge=r9,Yge=function(t){var r=t.children,n=t.innerProps;return Hr("div",Qr({},ho(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),r||Hr(t9,null))},Jge=r9,$ge=function(t){var r=t.children,n=t.innerProps;return Hr("div",Qr({},ho(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),r||Hr(T2,null))},e0e=function(t,r){var n=t.isDisabled,i=t.theme,c=i.spacing.baseUnit,d=i.colors;return Lr({label:"indicatorSeparator",alignSelf:"stretch",width:1},r?{}:{backgroundColor:n?d.neutral10:d.neutral20,marginBottom:c*2,marginTop:c*2})},t0e=function(t){var r=t.innerProps;return Hr("span",Qr({},r,ho(t,"indicatorSeparator",{"indicator-separator":!0})))},r0e=WH(RQ||(RQ=Yme([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),n0e=function(t,r){var n=t.isFocused,i=t.size,c=t.theme,d=c.colors,y=c.spacing.baseUnit;return Lr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},r?{}:{color:n?d.neutral60:d.neutral20,padding:y*2})},cM=function(t){var r=t.delay,n=t.offset;return Hr("span",{css:Ck({animation:"".concat(r0e," 1s ease-in-out ").concat(r,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},i0e=function(t){var r=t.innerProps,n=t.isRtl,i=t.size,c=i===void 0?4:i,d=Lc(t,qge);return Hr("div",Qr({},ho(Lr(Lr({},d),{},{innerProps:r,isRtl:n,size:c}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),r),Hr(cM,{delay:0,offset:n}),Hr(cM,{delay:160,offset:!0}),Hr(cM,{delay:320,offset:!n}))},o0e=function(t,r){var n=t.isDisabled,i=t.isFocused,c=t.theme,d=c.colors,y=c.borderRadius,o=c.spacing;return Lr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:o.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},r?{}:{backgroundColor:n?d.neutral5:d.neutral0,borderColor:n?d.neutral10:i?d.primary:d.neutral20,borderRadius:y,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(d.primary):void 0,"&:hover":{borderColor:i?d.primary:d.neutral30}})},a0e=function(t){var r=t.children,n=t.isDisabled,i=t.isFocused,c=t.innerRef,d=t.innerProps,y=t.menuIsOpen;return Hr("div",Qr({ref:c},ho(t,"control",{control:!0,"control--is-disabled":n,"control--is-focused":i,"control--menu-is-open":y}),d,{"aria-disabled":n||void 0}),r)},s0e=a0e,l0e=["data"],c0e=function(t,r){var n=t.theme.spacing;return r?{}:{paddingBottom:n.baseUnit*2,paddingTop:n.baseUnit*2}},u0e=function(t){var r=t.children,n=t.cx,i=t.getStyles,c=t.getClassNames,d=t.Heading,y=t.headingProps,o=t.innerProps,x=t.label,S=t.theme,k=t.selectProps;return Hr("div",Qr({},ho(t,"group",{group:!0}),o),Hr(d,Qr({},y,{selectProps:k,theme:S,getStyles:i,getClassNames:c,cx:n}),x),Hr("div",null,r))},A0e=function(t,r){var n=t.theme,i=n.colors,c=n.spacing;return Lr({label:"group",cursor:"default",display:"block"},r?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:c.baseUnit*3,paddingRight:c.baseUnit*3,textTransform:"uppercase"})},h0e=function(t){var r=q7(t);r.data;var n=Lc(r,l0e);return Hr("div",Qr({},ho(t,"groupHeading",{"group-heading":!0}),n))},d0e=u0e,f0e=["innerRef","isDisabled","isHidden","inputClassName"],p0e=function(t,r){var n=t.isDisabled,i=t.value,c=t.theme,d=c.spacing,y=c.colors;return Lr(Lr({visibility:n?"hidden":"visible",transform:i?"translateZ(0)":""},m0e),r?{}:{margin:d.baseUnit/2,paddingBottom:d.baseUnit/2,paddingTop:d.baseUnit/2,color:y.neutral80})},n9={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},m0e={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Lr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},n9)},g0e=function(t){return Lr({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},n9)},v0e=function(t){var r=t.cx,n=t.value,i=q7(t),c=i.innerRef,d=i.isDisabled,y=i.isHidden,o=i.inputClassName,x=Lc(i,f0e);return Hr("div",Qr({},ho(t,"input",{"input-container":!0}),{"data-value":n||""}),Hr("input",Qr({className:r({input:!0},o),ref:c,style:g0e(y),disabled:d},x)))},y0e=v0e,_0e=function(t,r){var n=t.theme,i=n.spacing,c=n.borderRadius,d=n.colors;return Lr({label:"multiValue",display:"flex",minWidth:0},r?{}:{backgroundColor:d.neutral10,borderRadius:c/2,margin:i.baseUnit/2})},x0e=function(t,r){var n=t.theme,i=n.borderRadius,c=n.colors,d=t.cropWithEllipsis;return Lr({overflow:"hidden",textOverflow:d||d===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},r?{}:{borderRadius:i/2,color:c.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},b0e=function(t,r){var n=t.theme,i=n.spacing,c=n.borderRadius,d=n.colors,y=t.isFocused;return Lr({alignItems:"center",display:"flex"},r?{}:{borderRadius:c/2,backgroundColor:y?d.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:d.dangerLight,color:d.danger}})},i9=function(t){var r=t.children,n=t.innerProps;return Hr("div",n,r)},w0e=i9,B0e=i9;function C0e(e){var t=e.children,r=e.innerProps;return Hr("div",Qr({role:"button"},r),t||Hr(T2,{size:14}))}var S0e=function(t){var r=t.children,n=t.components,i=t.data,c=t.innerProps,d=t.isDisabled,y=t.removeProps,o=t.selectProps,x=n.Container,S=n.Label,k=n.Remove;return Hr(x,{data:i,innerProps:Lr(Lr({},ho(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":d})),c),selectProps:o},Hr(S,{data:i,innerProps:Lr({},ho(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:o},r),Hr(k,{data:i,innerProps:Lr(Lr({},ho(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(r||"option")},y),selectProps:o}))},E0e=S0e,T0e=function(t,r){var n=t.isDisabled,i=t.isFocused,c=t.isSelected,d=t.theme,y=d.spacing,o=d.colors;return Lr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},r?{}:{backgroundColor:c?o.primary:i?o.primary25:"transparent",color:n?o.neutral20:c?o.neutral0:"inherit",padding:"".concat(y.baseUnit*2,"px ").concat(y.baseUnit*3,"px"),":active":{backgroundColor:n?void 0:c?o.primary:o.primary50}})},F0e=function(t){var r=t.children,n=t.isDisabled,i=t.isFocused,c=t.isSelected,d=t.innerRef,y=t.innerProps;return Hr("div",Qr({},ho(t,"option",{option:!0,"option--is-disabled":n,"option--is-focused":i,"option--is-selected":c}),{ref:d,"aria-disabled":n},y),r)},I0e=F0e,M0e=function(t,r){var n=t.theme,i=n.spacing,c=n.colors;return Lr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},r?{}:{color:c.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},P0e=function(t){var r=t.children,n=t.innerProps;return Hr("div",Qr({},ho(t,"placeholder",{placeholder:!0}),n),r)},D0e=P0e,k0e=function(t,r){var n=t.isDisabled,i=t.theme,c=i.spacing,d=i.colors;return Lr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},r?{}:{color:n?d.neutral40:d.neutral80,marginLeft:c.baseUnit/2,marginRight:c.baseUnit/2})},R0e=function(t){var r=t.children,n=t.isDisabled,i=t.innerProps;return Hr("div",Qr({},ho(t,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),i),r)},L0e=R0e,O0e={ClearIndicator:$ge,Control:s0e,DropdownIndicator:Yge,DownChevron:t9,CrossIcon:T2,Group:d0e,GroupHeading:h0e,IndicatorsContainer:Kge,IndicatorSeparator:t0e,Input:y0e,LoadingIndicator:i0e,Menu:Pge,MenuList:kge,MenuPortal:Qge,LoadingMessage:Uge,NoOptionsMessage:Oge,MultiValue:E0e,MultiValueContainer:w0e,MultiValueLabel:B0e,MultiValueRemove:C0e,Option:I0e,Placeholder:D0e,SelectContainer:Vge,SingleValue:L0e,ValueContainer:jge},U0e=function(t){return Lr(Lr({},O0e),t.components)},LQ=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function z0e(e,t){return!!(e===t||LQ(e)&&LQ(t))}function Q0e(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!z0e(e[r],t[r]))return!1;return!0}function N0e(e,t){t===void 0&&(t=Q0e);var r=null;function n(){for(var i=[],c=0;c<arguments.length;c++)i[c]=arguments[c];if(r&&r.lastThis===this&&t(i,r.lastArgs))return r.lastResult;var d=e.apply(this,i);return r={lastResult:d,lastArgs:i,lastThis:this},d}return n.clear=function(){r=null},n}var V0e={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},H0e=function(t){return Hr("span",Qr({css:V0e},t))},OQ=H0e,j0e={guidance:function(t){var r=t.isSearchable,n=t.isMulti,i=t.tabSelectsValue,c=t.context,d=t.isInitialFocus;switch(c){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return d?"".concat(t["aria-label"]||"Select"," is focused ").concat(r?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var r=t.action,n=t.label,i=n===void 0?"":n,c=t.labels,d=t.isDisabled;switch(r){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(c.length>1?"s":""," ").concat(c.join(","),", selected.");case"select-option":return d?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(t){var r=t.context,n=t.focused,i=t.options,c=t.label,d=c===void 0?"":c,y=t.selectValue,o=t.isDisabled,x=t.isSelected,S=t.isAppleDevice,k=function(K,ee){return K&&K.length?"".concat(K.indexOf(ee)+1," of ").concat(K.length):""};if(r==="value"&&y)return"value ".concat(d," focused, ").concat(k(y,n),".");if(r==="menu"&&S){var O=o?" disabled":"",Q="".concat(x?" selected":"").concat(O);return"".concat(d).concat(Q,", ").concat(k(i,n),".")}return""},onFilter:function(t){var r=t.inputValue,n=t.resultsMessage;return"".concat(n).concat(r?" for search term "+r:"",".")}},G0e=function(t){var r=t.ariaSelection,n=t.focusedOption,i=t.focusedValue,c=t.focusableOptions,d=t.isFocused,y=t.selectValue,o=t.selectProps,x=t.id,S=t.isAppleDevice,k=o.ariaLiveMessages,O=o.getOptionLabel,Q=o.inputValue,G=o.isMulti,K=o.isOptionDisabled,ee=o.isSearchable,W=o.menuIsOpen,J=o.options,re=o.screenReaderStatus,ue=o.tabSelectsValue,ce=o.isLoading,he=o["aria-label"],xe=o["aria-live"],fe=Se.useMemo(function(){return Lr(Lr({},j0e),k||{})},[k]),Ue=Se.useMemo(function(){var Et="";if(r&&fe.onChange){var ot=r.option,Gt=r.options,Pt=r.removedValue,Xt=r.removedValues,It=r.value,dr=function(Fr){return Array.isArray(Fr)?null:Fr},ar=Pt||ot||dr(It),tr=ar?O(ar):"",Rt=Gt||Xt||void 0,Or=Rt?Rt.map(O):[],Cr=Lr({isDisabled:ar&&K(ar,y),label:tr,labels:Or},r);Et=fe.onChange(Cr)}return Et},[r,fe,K,y,O]),Ge=Se.useMemo(function(){var Et="",ot=n||i,Gt=!!(n&&y&&y.includes(n));if(ot&&fe.onFocus){var Pt={focused:ot,label:O(ot),isDisabled:K(ot,y),isSelected:Gt,options:c,context:ot===n?"menu":"value",selectValue:y,isAppleDevice:S};Et=fe.onFocus(Pt)}return Et},[n,i,O,K,fe,c,y,S]),He=Se.useMemo(function(){var Et="";if(W&&J.length&&!ce&&fe.onFilter){var ot=re({count:c.length});Et=fe.onFilter({inputValue:Q,resultsMessage:ot})}return Et},[c,Q,W,fe,J,re,ce]),tt=(r==null?void 0:r.action)==="initial-input-focus",pt=Se.useMemo(function(){var Et="";if(fe.guidance){var ot=i?"value":W?"menu":"input";Et=fe.guidance({"aria-label":he,context:ot,isDisabled:n&&K(n,y),isMulti:G,isSearchable:ee,tabSelectsValue:ue,isInitialFocus:tt})}return Et},[he,n,i,G,K,ee,W,fe,y,ue,tt]),gt=Hr(Se.Fragment,null,Hr("span",{id:"aria-selection"},Ue),Hr("span",{id:"aria-focused"},Ge),Hr("span",{id:"aria-results"},He),Hr("span",{id:"aria-guidance"},pt));return Hr(Se.Fragment,null,Hr(OQ,{id:x},tt&&gt),Hr(OQ,{"aria-live":xe,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},d&&!tt&&gt))},K0e=G0e,I4=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],W0e=new RegExp("["+I4.map(function(e){return e.letters}).join("")+"]","g"),o9={};for(var uM=0;uM<I4.length;uM++)for(var AM=I4[uM],hM=0;hM<AM.letters.length;hM++)o9[AM.letters[hM]]=AM.base;var a9=function(t){return t.replace(W0e,function(r){return o9[r]})},q0e=N0e(a9),UQ=function(t){return t.replace(/^\s+|\s+$/g,"")},X0e=function(t){return"".concat(t.label," ").concat(t.value)},Z0e=function(t){return function(r,n){if(r.data.__isNew__)return!0;var i=Lr({ignoreCase:!0,ignoreAccents:!0,stringify:X0e,trim:!0,matchFrom:"any"},t),c=i.ignoreCase,d=i.ignoreAccents,y=i.stringify,o=i.trim,x=i.matchFrom,S=o?UQ(n):n,k=o?UQ(y(r)):y(r);return c&&(S=S.toLowerCase(),k=k.toLowerCase()),d&&(S=q0e(S),k=a9(k)),x==="start"?k.substr(0,S.length)===S:k.indexOf(S)>-1}},Y0e=["innerRef"];function J0e(e){var t=e.innerRef,r=Lc(e,Y0e),n=Bge(r,"onExited","in","enter","exit","appear");return Hr("input",Qr({ref:t},n,{css:Ck({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var $0e=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()};function eve(e){var t=e.isEnabled,r=e.onBottomArrive,n=e.onBottomLeave,i=e.onTopArrive,c=e.onTopLeave,d=Se.useRef(!1),y=Se.useRef(!1),o=Se.useRef(0),x=Se.useRef(null),S=Se.useCallback(function(ee,W){if(x.current!==null){var J=x.current,re=J.scrollTop,ue=J.scrollHeight,ce=J.clientHeight,he=x.current,xe=W>0,fe=ue-ce-re,Ue=!1;fe>W&&d.current&&(n&&n(ee),d.current=!1),xe&&y.current&&(c&&c(ee),y.current=!1),xe&&W>fe?(r&&!d.current&&r(ee),he.scrollTop=ue,Ue=!0,d.current=!0):!xe&&-W>re&&(i&&!y.current&&i(ee),he.scrollTop=0,Ue=!0,y.current=!0),Ue&&$0e(ee)}},[r,n,i,c]),k=Se.useCallback(function(ee){S(ee,ee.deltaY)},[S]),O=Se.useCallback(function(ee){o.current=ee.changedTouches[0].clientY},[]),Q=Se.useCallback(function(ee){var W=o.current-ee.changedTouches[0].clientY;S(ee,W)},[S]),G=Se.useCallback(function(ee){if(ee){var W=xge?{passive:!1}:!1;ee.addEventListener("wheel",k,W),ee.addEventListener("touchstart",O,W),ee.addEventListener("touchmove",Q,W)}},[Q,O,k]),K=Se.useCallback(function(ee){ee&&(ee.removeEventListener("wheel",k,!1),ee.removeEventListener("touchstart",O,!1),ee.removeEventListener("touchmove",Q,!1))},[Q,O,k]);return Se.useEffect(function(){if(t){var ee=x.current;return G(ee),function(){K(ee)}}},[t,G,K]),function(ee){x.current=ee}}var zQ=["boxSizing","height","overflow","paddingRight","position"],QQ={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function NQ(e){e.preventDefault()}function VQ(e){e.stopPropagation()}function HQ(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function jQ(){return"ontouchstart"in window||navigator.maxTouchPoints}var GQ=!!(typeof window<"u"&&window.document&&window.document.createElement),Sy=0,Km={capture:!1,passive:!1};function tve(e){var t=e.isEnabled,r=e.accountForScrollbars,n=r===void 0?!0:r,i=Se.useRef({}),c=Se.useRef(null),d=Se.useCallback(function(o){if(GQ){var x=document.body,S=x&&x.style;if(n&&zQ.forEach(function(G){var K=S&&S[G];i.current[G]=K}),n&&Sy<1){var k=parseInt(i.current.paddingRight,10)||0,O=document.body?document.body.clientWidth:0,Q=window.innerWidth-O+k||0;Object.keys(QQ).forEach(function(G){var K=QQ[G];S&&(S[G]=K)}),S&&(S.paddingRight="".concat(Q,"px"))}x&&jQ()&&(x.addEventListener("touchmove",NQ,Km),o&&(o.addEventListener("touchstart",HQ,Km),o.addEventListener("touchmove",VQ,Km))),Sy+=1}},[n]),y=Se.useCallback(function(o){if(GQ){var x=document.body,S=x&&x.style;Sy=Math.max(Sy-1,0),n&&Sy<1&&zQ.forEach(function(k){var O=i.current[k];S&&(S[k]=O)}),x&&jQ()&&(x.removeEventListener("touchmove",NQ,Km),o&&(o.removeEventListener("touchstart",HQ,Km),o.removeEventListener("touchmove",VQ,Km)))}},[n]);return Se.useEffect(function(){if(t){var o=c.current;return d(o),function(){y(o)}}},[t,d,y]),function(o){c.current=o}}var rve=function(t){var r=t.target;return r.ownerDocument.activeElement&&r.ownerDocument.activeElement.blur()},nve={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function ive(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,i=n===void 0?!0:n,c=e.onBottomArrive,d=e.onBottomLeave,y=e.onTopArrive,o=e.onTopLeave,x=eve({isEnabled:i,onBottomArrive:c,onBottomLeave:d,onTopArrive:y,onTopLeave:o}),S=tve({isEnabled:r}),k=function(Q){x(Q),S(Q)};return Hr(Se.Fragment,null,r&&Hr("div",{onClick:rve,css:nve}),t(k))}var ove={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},ave=function(t){var r=t.name,n=t.onFocus;return Hr("input",{required:!0,name:r,tabIndex:-1,"aria-hidden":"true",onFocus:n,css:ove,value:"",onChange:function(){}})},sve=ave;function F2(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function lve(){return F2(/^iPhone/i)}function s9(){return F2(/^Mac/i)}function cve(){return F2(/^iPad/i)||s9()&&navigator.maxTouchPoints>1}function uve(){return lve()||cve()}function Ave(){return s9()||uve()}var hve=function(t){return t.label},l9=function(t){return t.label},c9=function(t){return t.value},dve=function(t){return!!t.isDisabled},fve={clearIndicator:Jge,container:Nge,control:o0e,dropdownIndicator:Zge,group:c0e,groupHeading:A0e,indicatorsContainer:Gge,indicatorSeparator:e0e,input:p0e,loadingIndicator:n0e,loadingMessage:Lge,menu:Fge,menuList:Dge,menuPortal:zge,multiValue:_0e,multiValueLabel:x0e,multiValueRemove:b0e,noOptionsMessage:Rge,option:T0e,placeholder:M0e,singleValue:k0e,valueContainer:Hge},pve={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},mve=4,u9=4,gve=38,vve=u9*2,yve={baseUnit:u9,controlHeight:gve,menuGutter:vve},dM={borderRadius:mve,colors:pve,spacing:yve},_ve={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:kQ(),captureMenuScroll:!kQ(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:Z0e(),formatGroupLabel:hve,getOptionLabel:l9,getOptionValue:c9,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:dve,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!yge(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var r=t.count;return"".concat(r," result").concat(r!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function KQ(e,t,r,n){var i=d9(e,t,r),c=f9(e,t,r),d=h9(e,t),y=AS(e,t);return{type:"option",data:t,isDisabled:i,isSelected:c,label:d,value:y,index:n}}function tC(e,t){return e.options.map(function(r,n){if("options"in r){var i=r.options.map(function(d,y){return KQ(e,d,t,y)}).filter(function(d){return qQ(e,d)});return i.length>0?{type:"group",data:r,options:i,index:n}:void 0}var c=KQ(e,r,t,n);return qQ(e,c)?c:void 0}).filter(bge)}function A9(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,Kg(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function WQ(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,Kg(n.options.map(function(i){return{data:i.data,id:"".concat(t,"-").concat(n.index,"-").concat(i.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function xve(e,t){return A9(tC(e,t))}function qQ(e,t){var r=e.inputValue,n=r===void 0?"":r,i=t.data,c=t.isSelected,d=t.label,y=t.value;return(!m9(e)||!c)&&p9(e,{label:d,value:y,data:i},n)}function bve(e,t){var r=e.focusedValue,n=e.selectValue,i=n.indexOf(r);if(i>-1){var c=t.indexOf(r);if(c>-1)return r;if(i<t.length)return t[i]}return null}function wve(e,t){var r=e.focusedOption;return r&&t.indexOf(r)>-1?r:t[0]}var fM=function(t,r){var n,i=(n=t.find(function(c){return c.data===r}))===null||n===void 0?void 0:n.id;return i||null},h9=function(t,r){return t.getOptionLabel(r)},AS=function(t,r){return t.getOptionValue(r)};function d9(e,t,r){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,r):!1}function f9(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=AS(e,t);return r.some(function(i){return AS(e,i)===n})}function p9(e,t,r){return e.filterOption?e.filterOption(t,r):!0}var m9=function(t){var r=t.hideSelectedOptions,n=t.isMulti;return r===void 0?n:r},Bve=1,ix=function(e){jme(r,e);var t=Wme(r);function r(n){var i;if(Vme(this,r),i=t.call(this,n),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.isAppleDevice=Ave(),i.controlRef=null,i.getControlRef=function(o){i.controlRef=o},i.focusedOptionRef=null,i.getFocusedOptionRef=function(o){i.focusedOptionRef=o},i.menuListRef=null,i.getMenuListRef=function(o){i.menuListRef=o},i.inputRef=null,i.getInputRef=function(o){i.inputRef=o},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(o,x){var S=i.props,k=S.onChange,O=S.name;x.name=O,i.ariaOnChange(o,x),k(o,x)},i.setValue=function(o,x,S){var k=i.props,O=k.closeMenuOnSelect,Q=k.isMulti,G=k.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:G}),O&&(i.setState({inputIsHiddenAfterUpdate:!Q}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(o,{action:x,option:S})},i.selectOption=function(o){var x=i.props,S=x.blurInputOnSelect,k=x.isMulti,O=x.name,Q=i.state.selectValue,G=k&&i.isOptionSelected(o,Q),K=i.isOptionDisabled(o,Q);if(G){var ee=i.getOptionValue(o);i.setValue(Q.filter(function(W){return i.getOptionValue(W)!==ee}),"deselect-option",o)}else if(!K)k?i.setValue([].concat(Kg(Q),[o]),"select-option",o):i.setValue(o,"select-option");else{i.ariaOnChange(o,{action:"select-option",option:o,name:O});return}S&&i.blurInput()},i.removeValue=function(o){var x=i.props.isMulti,S=i.state.selectValue,k=i.getOptionValue(o),O=S.filter(function(G){return i.getOptionValue(G)!==k}),Q=Jy(x,O,O[0]||null);i.onChange(Q,{action:"remove-value",removedValue:o}),i.focusInput()},i.clearValue=function(){var o=i.state.selectValue;i.onChange(Jy(i.props.isMulti,[],null),{action:"clear",removedValues:o})},i.popValue=function(){var o=i.props.isMulti,x=i.state.selectValue,S=x[x.length-1],k=x.slice(0,x.length-1),O=Jy(o,k,k[0]||null);i.onChange(O,{action:"pop-value",removedValue:S})},i.getFocusedOptionId=function(o){return fM(i.state.focusableOptionsWithIds,o)},i.getFocusableOptionsWithIds=function(){return WQ(tC(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var o=arguments.length,x=new Array(o),S=0;S<o;S++)x[S]=arguments[S];return dge.apply(void 0,[i.props.classNamePrefix].concat(x))},i.getOptionLabel=function(o){return h9(i.props,o)},i.getOptionValue=function(o){return AS(i.props,o)},i.getStyles=function(o,x){var S=i.props.unstyled,k=fve[o](x,S);k.boxSizing="border-box";var O=i.props.styles[o];return O?O(k,x):k},i.getClassNames=function(o,x){var S,k;return(S=(k=i.props.classNames)[o])===null||S===void 0?void 0:S.call(k,x)},i.getElementId=function(o){return"".concat(i.state.instancePrefix,"-").concat(o)},i.getComponents=function(){return U0e(i.props)},i.buildCategorizedOptions=function(){return tC(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return A9(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(o,x){i.setState({ariaSelection:Lr({value:o},x)})},i.onMenuMouseDown=function(o){o.button===0&&(o.stopPropagation(),o.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(o){i.blockOptionHover=!1},i.onControlMouseDown=function(o){if(!o.defaultPrevented){var x=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?o.target.tagName!=="INPUT"&&o.target.tagName!=="TEXTAREA"&&i.onMenuClose():x&&i.openMenu("first"):(x&&(i.openAfterFocus=!0),i.focusInput()),o.target.tagName!=="INPUT"&&o.target.tagName!=="TEXTAREA"&&o.preventDefault()}},i.onDropdownIndicatorMouseDown=function(o){if(!(o&&o.type==="mousedown"&&o.button!==0)&&!i.props.isDisabled){var x=i.props,S=x.isMulti,k=x.menuIsOpen;i.focusInput(),k?(i.setState({inputIsHiddenAfterUpdate:!S}),i.onMenuClose()):i.openMenu("first"),o.preventDefault()}},i.onClearIndicatorMouseDown=function(o){o&&o.type==="mousedown"&&o.button!==0||(i.clearValue(),o.preventDefault(),i.openAfterFocus=!1,o.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(o){typeof i.props.closeMenuOnScroll=="boolean"?o.target instanceof HTMLElement&&LE(o.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(o)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(o){var x=o.touches,S=x&&x.item(0);S&&(i.initialTouchX=S.clientX,i.initialTouchY=S.clientY,i.userIsDragging=!1)},i.onTouchMove=function(o){var x=o.touches,S=x&&x.item(0);if(S){var k=Math.abs(S.clientX-i.initialTouchX),O=Math.abs(S.clientY-i.initialTouchY),Q=5;i.userIsDragging=k>Q||O>Q}},i.onTouchEnd=function(o){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(o.target)&&i.menuListRef&&!i.menuListRef.contains(o.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(o){i.userIsDragging||i.onControlMouseDown(o)},i.onClearIndicatorTouchEnd=function(o){i.userIsDragging||i.onClearIndicatorMouseDown(o)},i.onDropdownIndicatorTouchEnd=function(o){i.userIsDragging||i.onDropdownIndicatorMouseDown(o)},i.handleInputChange=function(o){var x=i.props.inputValue,S=o.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(S,{action:"input-change",prevInputValue:x}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(o){i.props.onFocus&&i.props.onFocus(o),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(o){var x=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(o),i.onInputChange("",{action:"input-blur",prevInputValue:x}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(o){if(!(i.blockOptionHover||i.state.focusedOption===o)){var x=i.getFocusableOptions(),S=x.indexOf(o);i.setState({focusedOption:o,focusedOptionId:S>-1?i.getFocusedOptionId(o):null})}},i.shouldHideSelectedOptions=function(){return m9(i.props)},i.onValueInputFocus=function(o){o.preventDefault(),o.stopPropagation(),i.focus()},i.onKeyDown=function(o){var x=i.props,S=x.isMulti,k=x.backspaceRemovesValue,O=x.escapeClearsValue,Q=x.inputValue,G=x.isClearable,K=x.isDisabled,ee=x.menuIsOpen,W=x.onKeyDown,J=x.tabSelectsValue,re=x.openMenuOnFocus,ue=i.state,ce=ue.focusedOption,he=ue.focusedValue,xe=ue.selectValue;if(!K&&!(typeof W=="function"&&(W(o),o.defaultPrevented))){switch(i.blockOptionHover=!0,o.key){case"ArrowLeft":if(!S||Q)return;i.focusValue("previous");break;case"ArrowRight":if(!S||Q)return;i.focusValue("next");break;case"Delete":case"Backspace":if(Q)return;if(he)i.removeValue(he);else{if(!k)return;S?i.popValue():G&&i.clearValue()}break;case"Tab":if(i.isComposing||o.shiftKey||!ee||!J||!ce||re&&i.isOptionSelected(ce,xe))return;i.selectOption(ce);break;case"Enter":if(o.keyCode===229)break;if(ee){if(!ce||i.isComposing)return;i.selectOption(ce);break}return;case"Escape":ee?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:Q}),i.onMenuClose()):G&&O&&i.clearValue();break;case" ":if(Q)return;if(!ee){i.openMenu("first");break}if(!ce)return;i.selectOption(ce);break;case"ArrowUp":ee?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":ee?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!ee)return;i.focusOption("pageup");break;case"PageDown":if(!ee)return;i.focusOption("pagedown");break;case"Home":if(!ee)return;i.focusOption("first");break;case"End":if(!ee)return;i.focusOption("last");break;default:return}o.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++Bve),i.state.selectValue=cS(n.value),n.menuIsOpen&&i.state.selectValue.length){var c=i.getFocusableOptionsWithIds(),d=i.buildFocusableOptions(),y=d.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=c,i.state.focusedOption=d[y],i.state.focusedOptionId=fM(c,d[y])}return i}return Hme(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&DQ(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var c=this.props,d=c.isDisabled,y=c.menuIsOpen,o=this.state.isFocused;(o&&!d&&i.isDisabled||o&&y&&!i.menuIsOpen)&&this.focusInput(),o&&d&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!o&&!d&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(DQ(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,c){this.props.onInputChange(i,c)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var c=this,d=this.state,y=d.selectValue,o=d.isFocused,x=this.buildFocusableOptions(),S=i==="first"?0:x.length-1;if(!this.props.isMulti){var k=x.indexOf(y[0]);k>-1&&(S=k)}this.scrollToFocusedOptionOnUpdate=!(o&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:x[S],focusedOptionId:this.getFocusedOptionId(x[S])},function(){return c.onMenuOpen()})}},{key:"focusValue",value:function(i){var c=this.state,d=c.selectValue,y=c.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var o=d.indexOf(y);y||(o=-1);var x=d.length-1,S=-1;if(d.length){switch(i){case"previous":o===0?S=0:o===-1?S=x:S=o-1;break;case"next":o>-1&&o<x&&(S=o+1);break}this.setState({inputIsHidden:S!==-1,focusedValue:d[S]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",c=this.props.pageSize,d=this.state.focusedOption,y=this.getFocusableOptions();if(y.length){var o=0,x=y.indexOf(d);d||(x=-1),i==="up"?o=x>0?x-1:y.length-1:i==="down"?o=(x+1)%y.length:i==="pageup"?(o=x-c,o<0&&(o=0)):i==="pagedown"?(o=x+c,o>y.length-1&&(o=y.length-1)):i==="last"&&(o=y.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:y[o],focusedValue:null,focusedOptionId:this.getFocusedOptionId(y[o])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(dM):Lr(Lr({},dM),this.props.theme):dM}},{key:"getCommonProps",value:function(){var i=this.clearValue,c=this.cx,d=this.getStyles,y=this.getClassNames,o=this.getValue,x=this.selectOption,S=this.setValue,k=this.props,O=k.isMulti,Q=k.isRtl,G=k.options,K=this.hasValue();return{clearValue:i,cx:c,getStyles:d,getClassNames:y,getValue:o,hasValue:K,isMulti:O,isRtl:Q,options:G,selectOption:x,selectProps:k,setValue:S,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,c=i.isClearable,d=i.isMulti;return c===void 0?d:c}},{key:"isOptionDisabled",value:function(i,c){return d9(this.props,i,c)}},{key:"isOptionSelected",value:function(i,c){return f9(this.props,i,c)}},{key:"filterOption",value:function(i,c){return p9(this.props,i,c)}},{key:"formatOptionLabel",value:function(i,c){if(typeof this.props.formatOptionLabel=="function"){var d=this.props.inputValue,y=this.state.selectValue;return this.props.formatOptionLabel(i,{context:c,inputValue:d,selectValue:y})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,c=i.isDisabled,d=i.isSearchable,y=i.inputId,o=i.inputValue,x=i.tabIndex,S=i.form,k=i.menuIsOpen,O=i.required,Q=this.getComponents(),G=Q.Input,K=this.state,ee=K.inputIsHidden,W=K.ariaSelection,J=this.commonProps,re=y||this.getElementId("input"),ue=Lr(Lr(Lr({"aria-autocomplete":"list","aria-expanded":k,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":O,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},k&&{"aria-controls":this.getElementId("listbox")}),!d&&{"aria-readonly":!0}),this.hasValue()?(W==null?void 0:W.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return d?Se.createElement(G,Qr({},J,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:re,innerRef:this.getInputRef,isDisabled:c,isHidden:ee,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:x,form:S,type:"text",value:o},ue)):Se.createElement(J0e,Qr({id:re,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:lS,onFocus:this.onInputFocus,disabled:c,tabIndex:x,inputMode:"none",form:S,value:""},ue))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,c=this.getComponents(),d=c.MultiValue,y=c.MultiValueContainer,o=c.MultiValueLabel,x=c.MultiValueRemove,S=c.SingleValue,k=c.Placeholder,O=this.commonProps,Q=this.props,G=Q.controlShouldRenderValue,K=Q.isDisabled,ee=Q.isMulti,W=Q.inputValue,J=Q.placeholder,re=this.state,ue=re.selectValue,ce=re.focusedValue,he=re.isFocused;if(!this.hasValue()||!G)return W?null:Se.createElement(k,Qr({},O,{key:"placeholder",isDisabled:K,isFocused:he,innerProps:{id:this.getElementId("placeholder")}}),J);if(ee)return ue.map(function(fe,Ue){var Ge=fe===ce,He="".concat(i.getOptionLabel(fe),"-").concat(i.getOptionValue(fe));return Se.createElement(d,Qr({},O,{components:{Container:y,Label:o,Remove:x},isFocused:Ge,isDisabled:K,key:He,index:Ue,removeProps:{onClick:function(){return i.removeValue(fe)},onTouchEnd:function(){return i.removeValue(fe)},onMouseDown:function(pt){pt.preventDefault()}},data:fe}),i.formatOptionLabel(fe,"value"))});if(W)return null;var xe=ue[0];return Se.createElement(S,Qr({},O,{data:xe,isDisabled:K}),this.formatOptionLabel(xe,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),c=i.ClearIndicator,d=this.commonProps,y=this.props,o=y.isDisabled,x=y.isLoading,S=this.state.isFocused;if(!this.isClearable()||!c||o||!this.hasValue()||x)return null;var k={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return Se.createElement(c,Qr({},d,{innerProps:k,isFocused:S}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),c=i.LoadingIndicator,d=this.commonProps,y=this.props,o=y.isDisabled,x=y.isLoading,S=this.state.isFocused;if(!c||!x)return null;var k={"aria-hidden":"true"};return Se.createElement(c,Qr({},d,{innerProps:k,isDisabled:o,isFocused:S}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),c=i.DropdownIndicator,d=i.IndicatorSeparator;if(!c||!d)return null;var y=this.commonProps,o=this.props.isDisabled,x=this.state.isFocused;return Se.createElement(d,Qr({},y,{isDisabled:o,isFocused:x}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),c=i.DropdownIndicator;if(!c)return null;var d=this.commonProps,y=this.props.isDisabled,o=this.state.isFocused,x={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return Se.createElement(c,Qr({},d,{innerProps:x,isDisabled:y,isFocused:o}))}},{key:"renderMenu",value:function(){var i=this,c=this.getComponents(),d=c.Group,y=c.GroupHeading,o=c.Menu,x=c.MenuList,S=c.MenuPortal,k=c.LoadingMessage,O=c.NoOptionsMessage,Q=c.Option,G=this.commonProps,K=this.state.focusedOption,ee=this.props,W=ee.captureMenuScroll,J=ee.inputValue,re=ee.isLoading,ue=ee.loadingMessage,ce=ee.minMenuHeight,he=ee.maxMenuHeight,xe=ee.menuIsOpen,fe=ee.menuPlacement,Ue=ee.menuPosition,Ge=ee.menuPortalTarget,He=ee.menuShouldBlockScroll,tt=ee.menuShouldScrollIntoView,pt=ee.noOptionsMessage,gt=ee.onMenuScrollToTop,Et=ee.onMenuScrollToBottom;if(!xe)return null;var ot=function(tr,Rt){var Or=tr.type,Cr=tr.data,qr=tr.isDisabled,Fr=tr.isSelected,qi=tr.label,Xi=tr.value,ke=K===Cr,ao=qr?void 0:function(){return i.onOptionHover(Cr)},ko=qr?void 0:function(){return i.selectOption(Cr)},Sa="".concat(i.getElementId("option"),"-").concat(Rt),Dt={id:Sa,onClick:ko,onMouseMove:ao,onMouseOver:ao,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:Fr};return Se.createElement(Q,Qr({},G,{innerProps:Dt,data:Cr,isDisabled:qr,isSelected:Fr,key:Sa,label:qi,type:Or,value:Xi,isFocused:ke,innerRef:ke?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(tr.data,"menu"))},Gt;if(this.hasOptions())Gt=this.getCategorizedOptions().map(function(ar){if(ar.type==="group"){var tr=ar.data,Rt=ar.options,Or=ar.index,Cr="".concat(i.getElementId("group"),"-").concat(Or),qr="".concat(Cr,"-heading");return Se.createElement(d,Qr({},G,{key:Cr,data:tr,options:Rt,Heading:y,headingProps:{id:qr,data:ar.data},label:i.formatGroupLabel(ar.data)}),ar.options.map(function(Fr){return ot(Fr,"".concat(Or,"-").concat(Fr.index))}))}else if(ar.type==="option")return ot(ar,"".concat(ar.index))});else if(re){var Pt=ue({inputValue:J});if(Pt===null)return null;Gt=Se.createElement(k,G,Pt)}else{var Xt=pt({inputValue:J});if(Xt===null)return null;Gt=Se.createElement(O,G,Xt)}var It={minMenuHeight:ce,maxMenuHeight:he,menuPlacement:fe,menuPosition:Ue,menuShouldScrollIntoView:tt},dr=Se.createElement(Ige,Qr({},G,It),function(ar){var tr=ar.ref,Rt=ar.placerProps,Or=Rt.placement,Cr=Rt.maxHeight;return Se.createElement(o,Qr({},G,It,{innerRef:tr,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:re,placement:Or}),Se.createElement(ive,{captureEnabled:W,onTopArrive:gt,onBottomArrive:Et,lockEnabled:He},function(qr){return Se.createElement(x,Qr({},G,{innerRef:function(qi){i.getMenuListRef(qi),qr(qi)},innerProps:{role:"listbox","aria-multiselectable":G.isMulti,id:i.getElementId("listbox")},isLoading:re,maxHeight:Cr,focusedOption:K}),Gt)}))});return Ge||Ue==="fixed"?Se.createElement(S,Qr({},G,{appendTo:Ge,controlElement:this.controlRef,menuPlacement:fe,menuPosition:Ue}),dr):dr}},{key:"renderFormField",value:function(){var i=this,c=this.props,d=c.delimiter,y=c.isDisabled,o=c.isMulti,x=c.name,S=c.required,k=this.state.selectValue;if(S&&!this.hasValue()&&!y)return Se.createElement(sve,{name:x,onFocus:this.onValueInputFocus});if(!(!x||y))if(o)if(d){var O=k.map(function(K){return i.getOptionValue(K)}).join(d);return Se.createElement("input",{name:x,type:"hidden",value:O})}else{var Q=k.length>0?k.map(function(K,ee){return Se.createElement("input",{key:"i-".concat(ee),name:x,type:"hidden",value:i.getOptionValue(K)})}):Se.createElement("input",{name:x,type:"hidden",value:""});return Se.createElement("div",null,Q)}else{var G=k[0]?this.getOptionValue(k[0]):"";return Se.createElement("input",{name:x,type:"hidden",value:G})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,c=this.state,d=c.ariaSelection,y=c.focusedOption,o=c.focusedValue,x=c.isFocused,S=c.selectValue,k=this.getFocusableOptions();return Se.createElement(K0e,Qr({},i,{id:this.getElementId("live-region"),ariaSelection:d,focusedOption:y,focusedValue:o,isFocused:x,selectValue:S,focusableOptions:k,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),c=i.Control,d=i.IndicatorsContainer,y=i.SelectContainer,o=i.ValueContainer,x=this.props,S=x.className,k=x.id,O=x.isDisabled,Q=x.menuIsOpen,G=this.state.isFocused,K=this.commonProps=this.getCommonProps();return Se.createElement(y,Qr({},K,{className:S,innerProps:{id:k,onKeyDown:this.onKeyDown},isDisabled:O,isFocused:G}),this.renderLiveRegion(),Se.createElement(c,Qr({},K,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:O,isFocused:G,menuIsOpen:Q}),Se.createElement(o,Qr({},K,{isDisabled:O}),this.renderPlaceholderOrValue(),this.renderInput()),Se.createElement(d,Qr({},K,{isDisabled:O}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,c){var d=c.prevProps,y=c.clearFocusValueOnUpdate,o=c.inputIsHiddenAfterUpdate,x=c.ariaSelection,S=c.isFocused,k=c.prevWasFocused,O=c.instancePrefix,Q=i.options,G=i.value,K=i.menuIsOpen,ee=i.inputValue,W=i.isMulti,J=cS(G),re={};if(d&&(G!==d.value||Q!==d.options||K!==d.menuIsOpen||ee!==d.inputValue)){var ue=K?xve(i,J):[],ce=K?WQ(tC(i,J),"".concat(O,"-option")):[],he=y?bve(c,J):null,xe=wve(c,ue),fe=fM(ce,xe);re={selectValue:J,focusedOption:xe,focusedOptionId:fe,focusableOptionsWithIds:ce,focusedValue:he,clearFocusValueOnUpdate:!1}}var Ue=o!=null&&i!==d?{inputIsHidden:o,inputIsHiddenAfterUpdate:void 0}:{},Ge=x,He=S&&k;return S&&!He&&(Ge={value:Jy(W,J,J[0]||null),options:J,action:"initial-input-focus"},He=!k),(x==null?void 0:x.action)==="initial-input-focus"&&(Ge=null),Lr(Lr(Lr({},re),Ue),{},{prevProps:i,ariaSelection:Ge,prevWasFocused:He})}}]),r}(Se.Component);ix.defaultProps=_ve;var Cve=Se.forwardRef(function(e,t){var r=RE(e);return Se.createElement(ix,Qr({ref:t},r))}),Sve=Cve,Eve=["allowCreateWhileLoading","createOptionPosition","formatCreateLabel","isValidNewOption","getNewOptionData","onCreateOption","options","onChange"],XQ=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=String(t).toLowerCase(),c=String(n.getOptionValue(r)).toLowerCase(),d=String(n.getOptionLabel(r)).toLowerCase();return c===i||d===i},pM={formatCreateLabel:function(t){return'Create "'.concat(t,'"')},isValidNewOption:function(t,r,n,i){return!(!t||r.some(function(c){return XQ(t,c,i)})||n.some(function(c){return XQ(t,c,i)}))},getNewOptionData:function(t,r){return{label:r,value:t,__isNew__:!0}}};function g9(e){var t=e.allowCreateWhileLoading,r=t===void 0?!1:t,n=e.createOptionPosition,i=n===void 0?"last":n,c=e.formatCreateLabel,d=c===void 0?pM.formatCreateLabel:c,y=e.isValidNewOption,o=y===void 0?pM.isValidNewOption:y,x=e.getNewOptionData,S=x===void 0?pM.getNewOptionData:x,k=e.onCreateOption,O=e.options,Q=O===void 0?[]:O,G=e.onChange,K=Lc(e,Eve),ee=K.getOptionValue,W=ee===void 0?c9:ee,J=K.getOptionLabel,re=J===void 0?l9:J,ue=K.inputValue,ce=K.isLoading,he=K.isMulti,xe=K.value,fe=K.name,Ue=Se.useMemo(function(){return o(ue,cS(xe),Q,{getOptionValue:W,getOptionLabel:re})?S(ue,d(ue)):void 0},[d,S,re,W,ue,o,Q,xe]),Ge=Se.useMemo(function(){return(r||!ce)&&Ue?i==="first"?[Ue].concat(Kg(Q)):[].concat(Kg(Q),[Ue]):Q},[r,i,ce,Ue,Q]),He=Se.useCallback(function(tt,pt){if(pt.action!=="select-option")return G(tt,pt);var gt=Array.isArray(tt)?tt:[tt];if(gt[gt.length-1]===Ue){if(k)k(ue);else{var Et=S(ue,ue),ot={action:"create-option",name:fe,option:Et};G(Jy(he,[].concat(Kg(cS(xe)),[Et]),Et),ot)}return}G(tt,pt)},[S,ue,he,fe,Ue,k,G,xe]);return Lr(Lr({},K),{},{options:Ge,onChange:He})}var Tve=Se.forwardRef(function(e,t){var r=RE(e),n=g9(r);return Se.createElement(ix,Qr({ref:t},n))}),Fve=Tve,Ive=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];function v9(e){var t=e.defaultOptions,r=t===void 0?!1:t,n=e.cacheOptions,i=n===void 0?!1:n,c=e.loadOptions;e.options;var d=e.isLoading,y=d===void 0?!1:d,o=e.onInputChange,x=e.filterOption,S=x===void 0?null:x,k=Lc(e,Ive),O=k.inputValue,Q=Se.useRef(void 0),G=Se.useRef(!1),K=Se.useState(Array.isArray(r)?r:void 0),ee=$o(K,2),W=ee[0],J=ee[1],re=Se.useState(typeof O<"u"?O:""),ue=$o(re,2),ce=ue[0],he=ue[1],xe=Se.useState(r===!0),fe=$o(xe,2),Ue=fe[0],Ge=fe[1],He=Se.useState(void 0),tt=$o(He,2),pt=tt[0],gt=tt[1],Et=Se.useState([]),ot=$o(Et,2),Gt=ot[0],Pt=ot[1],Xt=Se.useState(!1),It=$o(Xt,2),dr=It[0],ar=It[1],tr=Se.useState({}),Rt=$o(tr,2),Or=Rt[0],Cr=Rt[1],qr=Se.useState(void 0),Fr=$o(qr,2),qi=Fr[0],Xi=Fr[1],ke=Se.useState(void 0),ao=$o(ke,2),ko=ao[0],Sa=ao[1];i!==ko&&(Cr({}),Sa(i)),r!==qi&&(J(Array.isArray(r)?r:void 0),Xi(r)),Se.useEffect(function(){return G.current=!0,function(){G.current=!1}},[]);var Dt=Se.useCallback(function(po,Br){if(!c)return Br();var en=c(po,Br);en&&typeof en.then=="function"&&en.then(Br,function(){return Br()})},[c]);Se.useEffect(function(){r===!0&&Dt(ce,function(po){G.current&&(J(po||[]),Ge(!!Q.current))})},[]);var Ea=Se.useCallback(function(po,Br){var en=fge(po,Br,o);if(!en){Q.current=void 0,he(""),gt(""),Pt([]),Ge(!1),ar(!1);return}if(i&&Or[en])he(en),gt(en),Pt(Or[en]),Ge(!1),ar(!1);else{var Hi=Q.current={};he(en),Ge(!0),ar(!pt),Dt(en,function(mo){G&&Hi===Q.current&&(Q.current=void 0,Ge(!1),gt(en),Pt(mo||[]),ar(!1),Cr(mo?Lr(Lr({},Or),{},Ig({},en,mo)):Or))})}},[i,Dt,pt,Or,o]),Ei=dr?[]:ce&&pt?Gt:W||[];return Lr(Lr({},k),{},{options:Ei,isLoading:Ue||y,onInputChange:Ea,filterOption:S})}var Mve=Se.forwardRef(function(e,t){var r=v9(e),n=RE(r);return Se.createElement(ix,Qr({ref:t},n))}),Pve=Mve,Dve=Se.forwardRef(function(e,t){var r=v9(e),n=RE(r),i=g9(n);return Se.createElement(ix,Qr({ref:t},i))}),kve=Dve,y9=e=>{let{className:t,clearValue:r,cx:n,getStyles:i,getClassNames:c,getValue:d,hasValue:y,isMulti:o,isRtl:x,options:S,selectOption:k,selectProps:O,setValue:Q,theme:G,...K}=e;return{...K}},Rve=e=>typeof e=="string"&&["sm","md","lg"].includes(e),Lve=e=>Rve(e)?e:e==="xs"?"sm":e==="xl"?"lg":"md",Oc=e=>{let t=w0(),r=Lve(t.components.Input.defaultProps.size),n=e??r;return $fe(typeof n=="string"?[n]:n,{fallback:"md"})||r},Ove=e=>{let{children:t,className:r,cx:n,innerProps:i,isDisabled:c,isRtl:d,hasValue:y,selectProps:{chakraStyles:o}}=e,x={position:"relative",direction:d?"rtl":void 0,...c?{cursor:"not-allowed"}:{}},S=o!=null&&o.container?o.container(x,e):x;return Je.jsx(Li,{...i,className:n({"--is-disabled":c,"--is-rtl":d,"--has-value":y},r),sx:S,children:t})},Uve=e=>{let{children:t,className:r,cx:n,isMulti:i,hasValue:c,innerProps:d,selectProps:{chakraStyles:y,size:o,variant:x,focusBorderColor:S,errorBorderColor:k,controlShouldRenderValue:O}}=e,Q=Oc(o),G=Rs("Input",{size:Q,variant:x,focusBorderColor:S,errorBorderColor:k}),K={display:i&&c&&O?"flex":"grid",alignItems:"center",flex:1,paddingY:"2px",paddingX:G.field.px,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},ee=y!=null&&y.valueContainer?y.valueContainer(K,e):K;return Je.jsx(Li,{...d,className:n({"value-container":!0,"value-container--is-multi":i,"value-container--has-value":c},r),sx:ee,children:t})},zve=e=>{let{children:t,className:r,cx:n,innerProps:i,selectProps:{chakraStyles:c}}=e,d={display:"flex",alignItems:"center",alignSelf:"stretch",flexShrink:0},y=c!=null&&c.indicatorsContainer?c.indicatorsContainer(d,e):d;return Je.jsx(Li,{...i,className:n({indicators:!0},r),sx:y,children:t})},Qve=e=>{let{className:t,cx:r,children:n,innerRef:i,innerProps:c,isDisabled:d,isFocused:y,menuIsOpen:o,selectProps:{chakraStyles:x,size:S,variant:k,focusBorderColor:O,errorBorderColor:Q,isInvalid:G,isReadOnly:K}}=e,ee=Oc(S),{field:{height:W,h:J,...re}}=Rs("Input",{size:ee,variant:k,focusBorderColor:O,errorBorderColor:Q}),ue={...re,position:"relative",display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",padding:0,overflow:"hidden",height:"auto",minH:W||J,...d?{pointerEvents:"none"}:{}},ce=x!=null&&x.control?x.control(ue,e):ue;return Je.jsx(Li,{ref:i,className:r({control:!0,"control--is-disabled":d,"control--is-focused":y,"control--menu-is-open":o},t),sx:ce,...c,"data-focus":y?!0:void 0,"data-focus-visible":y?!0:void 0,"data-invalid":G?!0:void 0,"data-disabled":d?!0:void 0,"data-readonly":K?!0:void 0,children:n})},Nve=e=>{let{className:t,cx:r,selectProps:{chakraStyles:n,useBasicStyles:i,variant:c}}=e,d={opacity:1,...i||c!=="outline"?{display:"none"}:{}},y=n!=null&&n.indicatorSeparator?n.indicatorSeparator(d,e):d;return Je.jsx(E7,{className:r({"indicator-separator":!0},t),sx:y,orientation:"vertical"})},Vve=e=>Je.jsx(jA,{role:"presentation",focusable:"false","aria-hidden":"true",...e,children:Je.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}),Hve=e=>{let{children:t,className:r,cx:n,innerProps:i,selectProps:{chakraStyles:c,useBasicStyles:d,size:y,focusBorderColor:o,errorBorderColor:x,variant:S}}=e,k=Oc(y),O=Rs("Input",{size:k,variant:S,focusBorderColor:o,errorBorderColor:x}),Q={sm:"16px",md:"20px",lg:"24px"}[k],G={...O.addon,display:"flex",alignItems:"center",justifyContent:"center",height:"100%",borderRadius:0,borderWidth:0,fontSize:Q,...d&&{background:"transparent",padding:0,width:6,marginRight:2,marginLeft:1,cursor:"inherit"}},K=c!=null&&c.dropdownIndicator?c.dropdownIndicator(G,e):G,ee={height:"1em",width:"1em"},W=c!=null&&c.downChevron?c.downChevron(ee,e):ee;return Je.jsx(Li,{...i,className:n({indicator:!0,"dropdown-indicator":!0},r),sx:K,children:t||Je.jsx(Vve,{sx:W})})},jve=e=>Je.jsx(jA,{focusable:"false","aria-hidden":!0,...e,children:Je.jsx("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})}),Gve=e=>{let{children:t,className:r,cx:n,innerProps:i,selectProps:{chakraStyles:c,size:d}}=e,y=Oc(d),o={...Ud("CloseButton",{size:y}),marginX:1,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,cursor:"pointer"},x=c!=null&&c.clearIndicator?c.clearIndicator(o,e):o,S={width:"1em",height:"1em"},k=c!=null&&c.crossIcon?c.crossIcon(S,e):S;return Je.jsx(Li,{role:"button",className:n({indicator:!0,"clear-indicator":!0},r),sx:x,"aria-label":"Clear selected options",...i,children:t||Je.jsx(jve,{sx:k})})},Kve=e=>{let{className:t,cx:r,innerProps:n,selectProps:{chakraStyles:i,size:c},color:d,emptyColor:y,speed:o,thickness:x,spinnerSize:S}=e,k=Oc(c),O={sm:"xs",md:"sm",lg:"md"}[k],Q={marginRight:3},G=i!=null&&i.loadingIndicator?i.loadingIndicator(Q,e):Q;return Je.jsx(ME,{className:r({indicator:!0,"loading-indicator":!0},t),sx:G,...n,size:S||O,color:d,emptyColor:y,speed:o,thickness:x})},Wve=Qve,qve=e=>{let{className:t,cx:r,value:n,selectProps:{chakraStyles:i,isReadOnly:c}}=e,{innerRef:d,isDisabled:y,isHidden:o,inputClassName:x,...S}=y9(e),k={gridArea:"1 / 2",minW:"2px",border:0,margin:0,outline:0,padding:0},O={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content",color:"inherit",marginX:"0.125rem",paddingY:"0.125rem",visibility:y?"hidden":"visible",transform:n?"translateZ(0)":"",_after:{content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre",padding:0,...k}},Q=i!=null&&i.inputContainer?i.inputContainer(O,e):O,G={background:0,opacity:o?0:1,width:"100%",...k},K=i!=null&&i.input?i.input(G,e):G;return Je.jsx(Li,{className:r({"input-container":!0},t),"data-value":n||"",sx:Q,children:Je.jsx(Pn.input,{className:r({input:!0},x),ref:d,sx:K,disabled:y,readOnly:c?!0:void 0,...S})})},Xve=qve,Zve=e=>e?{bottom:"top",top:"bottom"}[e]:"top",Yve=e=>{let{className:t,cx:r,children:n,innerProps:i,innerRef:c,placement:d,selectProps:{chakraStyles:y}}=e,o={position:"absolute",[Zve(d)]:"100%",marginY:"8px",width:"100%",zIndex:1},x=y!=null&&y.menu?y.menu(o,e):o;return Je.jsx(U7,{children:Je.jsx(Li,{...i,ref:c,className:r({menu:!0},t),sx:x,children:n})})},Jve=Yve,$ve=e=>{var t;let{className:r,cx:n,innerRef:i,children:c,maxHeight:d,isMulti:y,innerProps:o,selectProps:{chakraStyles:x,size:S,variant:k,focusBorderColor:O,errorBorderColor:Q}}=e,G=Rs("Menu"),K=Oc(S),ee=Rs("Input",{size:K,variant:k,focusBorderColor:O,errorBorderColor:Q}).field,W={...G.list,minW:"100%",maxHeight:`${d}px`,overflowY:"auto","--input-border-radius":ee==null?void 0:ee["--input-border-radius"],borderRadius:(ee==null?void 0:ee.borderRadius)||((t=G.list)==null?void 0:t.borderRadius),position:"relative",WebkitOverflowScrolling:"touch"},J=x!=null&&x.menuList?x.menuList(W,e):W;return Je.jsx(Li,{...o,className:n({"menu-list":!0,"menu-list--is-multi":y},r),sx:J,ref:i,children:c})},eye=e=>{let{children:t,className:r,cx:n,innerProps:i,selectProps:{chakraStyles:c,size:d}}=e,y=Oc(d),o={color:"chakra-subtle-text",textAlign:"center",paddingY:{sm:"6px",md:"8px",lg:"10px"}[y],fontSize:y},x=c!=null&&c.loadingMessage?c.loadingMessage(o,e):o;return Je.jsx(Li,{...i,className:n({"menu-notice":!0,"menu-notice--loading":!0},r),sx:x,children:t})},tye=e=>{let{children:t,className:r,cx:n,innerProps:i,selectProps:{chakraStyles:c,size:d}}=e,y=Oc(d),o={color:"chakra-subtle-text",textAlign:"center",paddingY:{sm:"6px",md:"8px",lg:"10px"}[y],fontSize:y},x=c!=null&&c.noOptionsMessage?c.noOptionsMessage(o,e):o;return Je.jsx(Li,{...i,className:n({"menu-notice":!0,"menu-notice--no-options":!0},r),sx:x,children:t})},rye=e=>{let{children:t,className:r,cx:n,theme:i,getStyles:c,Heading:d,headingProps:y,label:o,selectProps:x,innerProps:S,getClassNames:k}=e,{chakraStyles:O}=x,Q={},G=O!=null&&O.group?O.group(Q,e):Q;return Je.jsxs(Li,{...S,className:n({group:!0},r),sx:G,children:[Je.jsx(d,{...y,selectProps:x,cx:n,theme:i,getStyles:c,getClassNames:k,children:o}),Je.jsx(Li,{children:t})]})},nye=e=>{let{cx:t,className:r,selectProps:{chakraStyles:n,size:i,hasStickyGroupHeaders:c}}=e,{data:d,...y}=y9(e),o=Rs("Menu"),x=Oc(i),S={sm:"xs",md:"sm",lg:"md"},k={sm:"0.4rem 0.8rem",md:"0.5rem 1rem",lg:"0.6rem 1.2rem"},O={...o.groupTitle,fontSize:S[x],padding:k[x],margin:0,borderBottomWidth:c?"1px":0,position:c?"sticky":"static",top:-2,bg:o.list.bg,zIndex:1},Q=n!=null&&n.groupHeading?n.groupHeading(O,e):O;return Je.jsx(Li,{...y,className:t({"group-heading":!0},r),sx:Q})},iye=e=>Je.jsx("svg",{viewBox:"0 0 14 14",width:"1em",height:"1em",...e,children:Je.jsx("polygon",{fill:"currentColor",points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"})}),oye=e=>{let{className:t,cx:r,innerRef:n,innerProps:i,children:c,isFocused:d,isDisabled:y,isSelected:o,selectProps:{chakraStyles:x,size:S,isMulti:k,hideSelectedOptions:O,selectedOptionStyle:Q,selectedOptionColorScheme:G}}=e,K=Rs("Menu").item,ee=Oc(S),W={sm:"0.6rem",md:"0.8rem",lg:"1rem"},J={sm:"0.3rem",md:"0.4rem",lg:"0.5rem"},re=Y5(`${G}.500`,`${G}.300`),ue=Y5("white","black"),ce=Q==="check"&&(!k||O===!1),he=Q==="color",xe={...K,cursor:"pointer",display:"flex",alignItems:"center",width:"100%",textAlign:"start",fontSize:ee,paddingX:W[ee],paddingY:J[ee],...he&&{_selected:{bg:re,color:ue,_active:{bg:re}}}},fe=x!=null&&x.option?x.option(xe,e):xe;return Je.jsxs(Li,{...i,className:r({option:!0,"option--is-disabled":y,"option--is-focused":d,"option--is-selected":o},t),sx:fe,ref:n,"data-focus":d?!0:void 0,"aria-disabled":y?!0:void 0,"aria-selected":o,children:[ce&&Je.jsx(z7,{fontSize:"0.8em",marginEnd:"0.75rem",opacity:o?1:0,children:Je.jsx(iye,{})}),c]})},aye=e=>typeof e=="object"&&e!==null&&"colorScheme"in e&&typeof e.colorScheme=="string",sye=e=>typeof e=="object"&&e!==null&&"variant"in e&&typeof e.variant=="string",_9=e=>typeof e=="object"&&e!==null&&"isFixed"in e&&typeof e.isFixed=="boolean",lye=e=>{let{children:t,className:r,components:n,cx:i,data:c,innerProps:d,isDisabled:y,isFocused:o,removeProps:x,selectProps:S,cropWithEllipsis:k}=e,{Container:O,Label:Q,Remove:G}=n,{chakraStyles:K,colorScheme:ee,tagVariant:W,size:J}=S,re=Oc(J),ue="",ce="",he=!1;aye(c)&&(ue=c.colorScheme),sye(c)&&(ce=c.variant),_9(c)&&(he=c.isFixed);let xe=Rs("Tag",{size:re,colorScheme:ue||ee,variant:ce||W||(he?"solid":"subtle")}),fe={...xe.container,display:"flex",alignItems:"center",minWidth:0,margin:"0.125rem"},Ue=K!=null&&K.multiValue?K.multiValue(fe,e):fe,Ge={...xe.label,overflow:"hidden",textOverflow:k||k===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},He=K!=null&&K.multiValueLabel?K.multiValueLabel(Ge,e):Ge,tt={...xe.closeButton,display:"flex",alignItems:"center",justifyContent:"center"},pt=K!=null&&K.multiValueRemove?K.multiValueRemove(tt,e):tt;return Je.jsxs(O,{data:c,innerProps:{className:i({"multi-value":!0,"multi-value--is-disabled":y},r),...d},sx:Ue,selectProps:S,children:[Je.jsx(Q,{data:c,innerProps:{className:i({"multi-value__label":!0},r)},sx:He,selectProps:S,children:t}),Je.jsx(G,{data:c,innerProps:{className:i({"multi-value__remove":!0},r),"aria-label":`Remove ${t||"option"}`,...x},sx:pt,selectProps:S,isFocused:o})]})},cye=e=>{let{children:t,innerProps:r,sx:n}=e;return Je.jsx(Pn.span,{...r,sx:n,children:t})},uye=e=>{let{children:t,innerProps:r,sx:n}=e;return Je.jsx(Pn.span,{...r,sx:n,children:t})},Aye=e=>Je.jsx(jA,{verticalAlign:"inherit",viewBox:"0 0 512 512",...e,children:Je.jsx("path",{fill:"currentColor",d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})}),hye=e=>{let{children:t,innerProps:r,isFocused:n,data:i,sx:c}=e;return _9(i)&&i.isFixed?null:Je.jsx(Li,{...r,role:"button",sx:c,"data-focus":n?!0:void 0,"data-focus-visible":n?!0:void 0,children:t||Je.jsx(Aye,{})})},dye=lye,fye=e=>{let{children:t,className:r,cx:n,innerProps:i,selectProps:{chakraStyles:c}}=e,d={gridArea:"1 / 1 / 2 / 3",color:"chakra-placeholder-color",mx:"0.125rem",userSelect:"none"},y=c!=null&&c.placeholder?c.placeholder(d,e):d;return Je.jsx(Li,{...i,className:n({placeholder:!0},r),sx:y,children:t})},pye=fye,mye=e=>{let{children:t,className:r,cx:n,isDisabled:i,innerProps:c,selectProps:{chakraStyles:d}}=e,y={gridArea:"1 / 1 / 2 / 3",mx:"0.125rem",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},o=d!=null&&d.singleValue?d.singleValue(y,e):y;return Je.jsx(Li,{className:n({"single-value":!0,"single-value--is-disabled":i},r),sx:o,...c,children:t})},gye=mye,vye={ClearIndicator:Gve,Control:Wve,DropdownIndicator:Hve,Group:rye,GroupHeading:nye,IndicatorSeparator:Nve,IndicatorsContainer:zve,Input:Xve,LoadingIndicator:Kve,LoadingMessage:eye,Menu:Jve,MenuList:$ve,MultiValue:dye,MultiValueContainer:cye,MultiValueLabel:uye,MultiValueRemove:hye,NoOptionsMessage:tye,Option:oye,Placeholder:pye,SelectContainer:Ove,SingleValue:gye,ValueContainer:Uve},yye=vye,_ye=({components:e={},theme:t,size:r,colorScheme:n="gray",isDisabled:i,isInvalid:c,isReadOnly:d,required:y,isRequired:o,inputId:x,tagVariant:S,selectedOptionStyle:k="color",selectedOptionColorScheme:O,selectedOptionColor:Q,variant:G,focusBorderColor:K,errorBorderColor:ee,chakraStyles:W={},onFocus:J,onBlur:re,menuIsOpen:ue,...ce})=>{var he;let xe=w0(),{variant:fe}=xe.components.Input.defaultProps,Ue=u7({id:x,isDisabled:i,isInvalid:c,isRequired:o,isReadOnly:d,onFocus:J,onBlur:re}),Ge=ue??(Ue.readOnly?!1:void 0),He=k;["color","check"].includes(k)||(He="color");let tt=O||Q||"blue";return typeof tt!="string"&&(tt="blue"),{components:{...yye,...e},colorScheme:n,size:r,tagVariant:S,selectedOptionStyle:He,selectedOptionColorScheme:tt,variant:G??fe,chakraStyles:W,focusBorderColor:K,errorBorderColor:ee,onFocus:Ue.onFocus,onBlur:Ue.onBlur,isDisabled:Ue.disabled,isInvalid:!!Ue["aria-invalid"],inputId:Ue.id,isReadOnly:Ue.readOnly,required:y??Ue.required,menuIsOpen:Ge,...ce,"aria-invalid":(he=ce["aria-invalid"])!=null?he:Ue["aria-invalid"]}},OE=_ye,xye=Se.forwardRef((e,t)=>{let r=OE(e);return Je.jsx(Sve,{ref:t,...r})}),Ey=xye;Se.forwardRef((e,t)=>{let r=OE(e);return Je.jsx(Fve,{ref:t,...r})});Se.forwardRef((e,t)=>{let r=OE(e);return Je.jsx(Pve,{ref:t,...r})});Se.forwardRef((e,t)=>{let r=OE(e);return Je.jsx(kve,{ref:t,...r})});var x9={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ZQ=Tu.createContext&&Tu.createContext(x9),bye=["attr","size","title"];function wye(e,t){if(e==null)return{};var r=Bye(e,t),n,i;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(i=0;i<c.length;i++)n=c[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Bye(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function hS(){return hS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hS.apply(this,arguments)}function YQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function dS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YQ(Object(r),!0).forEach(function(n){Cye(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YQ(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cye(e,t,r){return t=Sye(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sye(e){var t=Eye(e,"string");return typeof t=="symbol"?t:t+""}function Eye(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function b9(e){return e&&e.map((t,r)=>Tu.createElement(t.tag,dS({key:r},t.attr),b9(t.child)))}function Sp(e){return t=>Tu.createElement(Tye,hS({attr:dS({},e.attr)},t),b9(e.child))}function Tye(e){var t=r=>{var{attr:n,size:i,title:c}=e,d=wye(e,bye),y=i||r.size||"1em",o;return r.className&&(o=r.className),e.className&&(o=(o?o+" ":"")+e.className),Tu.createElement("svg",hS({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,d,{className:o,style:dS(dS({color:e.color||r.color},r.style),e.style),height:y,width:y,xmlns:"http://www.w3.org/2000/svg"}),c&&Tu.createElement("title",null,c),e.children)};return ZQ!==void 0?Tu.createElement(ZQ.Consumer,null,r=>t(r)):t(x9)}function Fye(e){return Sp({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M544 416L32 416c-17.7 0-32 14.3-32 32s14.3 32 32 32l512 0c17.7 0 32-14.3 32-32s-14.3-32-32-32zm22.6-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L480 274.7 480 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 210.7-41.4-41.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0l96-96zm-320-45.3c-12.5-12.5-32.8-12.5-45.3 0L160 274.7 160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 210.7L54.6 233.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3z"},child:[]}]})(e)}function Iye(e){return Sp({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M249.4 25.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3L269.3 96 416 96c53 0 96 43 96 96v32c0 17.7-14.3 32-32 32s-32-14.3-32-32V192c0-17.7-14.3-32-32-32l-146.7 0 25.4 25.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0l-80-80c-12.5-12.5-12.5-32.8 0-45.3l80-80zm13.3 256l80 80c12.5 12.5 12.5 32.8 0 45.3l-80 80c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 416 96 416c-17.7 0-32 14.3-32 32v32c0 17.7-14.3 32-32 32s-32-14.3-32-32V448c0-53 43-96 96-96l146.7 0-25.4-25.4c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0zM384 384a64 64 0 1 1 128 0 64 64 0 1 1 -128 0zM64 192A64 64 0 1 1 64 64a64 64 0 1 1 0 128z"},child:[]}]})(e)}function Mye(e){return Sp({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M0 256L28.5 28c2-16 15.6-28 31.8-28H228.9c15 0 27.1 12.1 27.1 27.1c0 3.2-.6 6.5-1.7 9.5L208 160H347.3c20.2 0 36.7 16.4 36.7 36.7c0 7.4-2.2 14.6-6.4 20.7l-192.2 281c-5.9 8.6-15.6 13.7-25.9 13.7h-2.9c-15.7 0-28.5-12.8-28.5-28.5c0-2.3 .3-4.6 .9-6.9L176 288H32c-17.7 0-32-14.3-32-32z"},child:[]}]})(e)}function Pye(e){return Sp({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M135.2 117.4L109.1 192H402.9l-26.1-74.6C372.3 104.6 360.2 96 346.6 96H165.4c-13.6 0-25.7 8.6-30.2 21.4zM39.6 196.8L74.8 96.3C88.3 57.8 124.6 32 165.4 32H346.6c40.8 0 77.1 25.8 90.6 64.3l35.2 100.5c23.2 9.6 39.6 32.5 39.6 59.2V400v48c0 17.7-14.3 32-32 32H448c-17.7 0-32-14.3-32-32V400H96v48c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32V400 256c0-26.7 16.4-49.6 39.6-59.2zM128 288a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm288 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"},child:[]}]})(e)}function Dye(e){return Sp({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M308.5 135.3c7.1-6.3 9.9-16.2 6.2-25c-2.3-5.3-4.8-10.5-7.6-15.5L304 89.4c-3-5-6.3-9.9-9.8-14.6c-5.7-7.6-15.7-10.1-24.7-7.1l-28.2 9.3c-10.7-8.8-23-16-36.2-20.9L199 27.1c-1.9-9.3-9.1-16.7-18.5-17.8C173.9 8.4 167.2 8 160.4 8h-.7c-6.8 0-13.5 .4-20.1 1.2c-9.4 1.1-16.6 8.6-18.5 17.8L115 56.1c-13.3 5-25.5 12.1-36.2 20.9L50.5 67.8c-9-3-19-.5-24.7 7.1c-3.5 4.7-6.8 9.6-9.9 14.6l-3 5.3c-2.8 5-5.3 10.2-7.6 15.6c-3.7 8.7-.9 18.6 6.2 25l22.2 19.8C32.6 161.9 32 168.9 32 176s.6 14.1 1.7 20.9L11.5 216.7c-7.1 6.3-9.9 16.2-6.2 25c2.3 5.3 4.8 10.5 7.6 15.6l3 5.2c3 5.1 6.3 9.9 9.9 14.6c5.7 7.6 15.7 10.1 24.7 7.1l28.2-9.3c10.7 8.8 23 16 36.2 20.9l6.1 29.1c1.9 9.3 9.1 16.7 18.5 17.8c6.7 .8 13.5 1.2 20.4 1.2s13.7-.4 20.4-1.2c9.4-1.1 16.6-8.6 18.5-17.8l6.1-29.1c13.3-5 25.5-12.1 36.2-20.9l28.2 9.3c9 3 19 .5 24.7-7.1c3.5-4.7 6.8-9.5 9.8-14.6l3.1-5.4c2.8-5 5.3-10.2 7.6-15.5c3.7-8.7 .9-18.6-6.2-25l-22.2-19.8c1.1-6.8 1.7-13.8 1.7-20.9s-.6-14.1-1.7-20.9l22.2-19.8zM112 176a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM504.7 500.5c6.3 7.1 16.2 9.9 25 6.2c5.3-2.3 10.5-4.8 15.5-7.6l5.4-3.1c5-3 9.9-6.3 14.6-9.8c7.6-5.7 10.1-15.7 7.1-24.7l-9.3-28.2c8.8-10.7 16-23 20.9-36.2l29.1-6.1c9.3-1.9 16.7-9.1 17.8-18.5c.8-6.7 1.2-13.5 1.2-20.4s-.4-13.7-1.2-20.4c-1.1-9.4-8.6-16.6-17.8-18.5L583.9 307c-5-13.3-12.1-25.5-20.9-36.2l9.3-28.2c3-9 .5-19-7.1-24.7c-4.7-3.5-9.6-6.8-14.6-9.9l-5.3-3c-5-2.8-10.2-5.3-15.6-7.6c-8.7-3.7-18.6-.9-25 6.2l-19.8 22.2c-6.8-1.1-13.8-1.7-20.9-1.7s-14.1 .6-20.9 1.7l-19.8-22.2c-6.3-7.1-16.2-9.9-25-6.2c-5.3 2.3-10.5 4.8-15.6 7.6l-5.2 3c-5.1 3-9.9 6.3-14.6 9.9c-7.6 5.7-10.1 15.7-7.1 24.7l9.3 28.2c-8.8 10.7-16 23-20.9 36.2L315.1 313c-9.3 1.9-16.7 9.1-17.8 18.5c-.8 6.7-1.2 13.5-1.2 20.4s.4 13.7 1.2 20.4c1.1 9.4 8.6 16.6 17.8 18.5l29.1 6.1c5 13.3 12.1 25.5 20.9 36.2l-9.3 28.2c-3 9-.5 19 7.1 24.7c4.7 3.5 9.5 6.8 14.6 9.8l5.4 3.1c5 2.8 10.2 5.3 15.5 7.6c8.7 3.7 18.6 .9 25-6.2l19.8-22.2c6.8 1.1 13.8 1.7 20.9 1.7s14.1-.6 20.9-1.7l19.8 22.2zM464 304a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"},child:[]}]})(e)}function kye(e){return Sp({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M96 0C43 0 0 43 0 96V352c0 48 35.2 87.7 81.1 94.9l-46 46C28.1 499.9 33.1 512 43 512H82.7c8.5 0 16.6-3.4 22.6-9.4L160 448H288l54.6 54.6c6 6 14.1 9.4 22.6 9.4H405c10 0 15-12.1 7.9-19.1l-46-46c46-7.1 81.1-46.9 81.1-94.9V96c0-53-43-96-96-96H96zM64 128c0-17.7 14.3-32 32-32h80c17.7 0 32 14.3 32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V128zM272 96h80c17.7 0 32 14.3 32 32v96c0 17.7-14.3 32-32 32H272c-17.7 0-32-14.3-32-32V128c0-17.7 14.3-32 32-32zM64 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zm288-32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"},child:[]}]})(e)}function Rye(e){return Sp({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M64 80c-8.8 0-16 7.2-16 16l0 320c0 8.8 7.2 16 16 16l320 0c8.8 0 16-7.2 16-16l0-320c0-8.8-7.2-16-16-16L64 80zM0 96C0 60.7 28.7 32 64 32l320 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zm224 64c6.7 0 13 2.8 17.6 7.7l104 112c6.5 7 8.2 17.2 4.4 25.9s-12.5 14.4-22 14.4l-208 0c-9.5 0-18.2-5.7-22-14.4s-2.1-18.9 4.4-25.9l104-112c4.5-4.9 10.9-7.7 17.6-7.7z"},child:[]}]})(e)}const w9={NMKM:{site:"Mt Keith",location:[[0,0],[0,0]]},CNM:{site:"Cliffs",location:[[0,0],[0,0]]},NLNM:{site:"Leinster",location:[[0,0],[0,0]]},NPI:{site:"Non-Process Infrastructure",location:[[0,0],[0,0]]},BRO:{site:"BurnsRED Office",location:[[144.98176569919508,-37.818534455210106],[144.9908777222061,-37.811264469979434]]},WFH:{site:"BurnsRED WFH Office",location:[[144.8949274511054,-37.76481882313553],[144.907305,-37.755989]]}},B9={3e7:{icon:Pye,label:"Vehicle and Mobile Equipment"},4e7:{icon:kye,label:"Rail"},5e7:{icon:Rye,label:"Lifting"},6e7:{icon:Mye,label:"Electrical"},7e7:{icon:Fye,label:"Falling object"},8e7:{icon:Dye,label:"Crushing"},9e7:{icon:Iye,label:"Mat. Moving"}},C9={3e7:{31e6:{control:"Crash, Collision, Overturn on Mine Site"},32e6:{control:"Pre-start Inspections"},33e6:{control:"Use mobile plant"},34e6:{control:"General Safety Rules for Operator"},35e6:{control:"Warning Signals and Reversing"}},4e7:{41e6:{control:"Control 1"},42e6:{control:"Control 2"}},5e7:{51e6:{control:"Control 1"},52e6:{control:"Control 2"}},6e7:{61e6:{control:"Control 1"},62e6:{control:"Control 2"}},7e7:{71e6:{control:"Control 1"},72e6:{control:"Control 2"}},8e7:{81e6:{control:"Control 1"},82e6:{control:"Control 2"}},9e7:{91e6:{control:"Control 1"},92e6:{control:"Control 2"}}},S9={31e6:{311e5:{operating_context:"Underground"},312e5:{operating_context:"Surface"},313e5:{operating_context:"Onsite non-Mining"},314e5:{operating_context:"Offsite"}},32e6:{321e5:{operating_context:"Operating Context 1"},322e5:{operating_context:"Operating Context 2"}},33e6:{331e5:{operating_context:"Operating Context 1"},332e5:{operating_context:"Operating Context 2"}},34e6:{341e5:{operating_context:"Operating Context 1"},342e5:{operating_context:"Operating Context 2"}},35e6:{351e5:{operating_context:"Operating Context 1"},352e5:{operating_context:"Operating Context 2"}},41e6:{411e5:{operating_context:"Operating Context 1"},412e5:{operating_context:"Operating Context 2"}},42e6:{421e5:{operating_context:"Operating Context 1"},422e5:{operating_context:"Operating Context 2"}},51e6:{511e5:{operating_context:"Operating Context 1"},512e5:{operating_context:"Operating Context 2"}},52e6:{521e5:{operating_context:"Operating Context 1"},522e5:{operating_context:"Operating Context 2"}},61e6:{611e5:{operating_context:"Operating Context 1"},612e5:{operating_context:"Operating Context 2"}},62e6:{621e5:{operating_context:"Operating Context 1"},622e5:{operating_context:"Operating Context 2"}},71e6:{711e5:{operating_context:"Operating Context 1"},712e5:{operating_context:"Operating Context 2"}},72e6:{721e5:{operating_context:"Operating Context 1"},722e5:{operating_context:"Operating Context 2"}},81e6:{811e5:{operating_context:"Operating Context 1"},812e5:{operating_context:"Operating Context 2"}},82e6:{821e5:{operating_context:"Operating Context 1"},822e5:{operating_context:"Operating Context 2"}},91e6:{911e5:{operating_context:"Operating Context 1"},912e5:{operating_context:"Operating Context 2"}},92e6:{921e5:{operating_context:"Operating Context 1"},922e5:{operating_context:"Operating Context 2"}}},E9={312e5:{3111e4:{equipment:"Off-highway Truck"},3112e4:{equipment:"Wheel Loaders"},3113e4:{equipment:"Rubber Tyred SME"},3114e4:{equipment:"Dozers"},3115e4:{equipment:"Drills and tracked SME"},3116e4:{equipment:"Excavators/ Shovels"},3117e4:{equipment:"Off-highway haulers"}},311e5:{3121e4:{equipment:"UG ME"},3122e4:{equipment:"UG Loaders, bogger"},3123e4:{equipment:"UG shuttle cars, miners"}},313e5:{3131e4:{equipment:"Off-highway Truck"},3132e4:{equipment:"Wheel Loaders"},3133e4:{equipment:"Rubber Tyred SME"},3134e4:{equipment:"Dozers"}},314e5:{3141e4:{equipment:"Off-highway Truck"},3142e4:{equipment:"Wheel Loaders"},3143e4:{equipment:"Rubber Tyred SME"},3144e4:{equipment:"Dozers"}},321e5:{32111e3:{equipment:"Off-highway Truck"},3212e4:{equipment:"Wheel Loaders"}},322e5:{3221e4:{equipment:"Off-highway Truck"},3222e4:{equipment:"Wheel Loaders"}},331e5:{3311e4:{equipment:"Off-highway Truck"},3312e4:{equipment:"Wheel Loaders"}},332e5:{3321e4:{equipment:"Off-highway Truck"},3322e4:{equipment:"Wheel Loaders"}},341e5:{3411e4:{equipment:"Off-highway Truck"},3412e4:{equipment:"Wheel Loaders"}},342e5:{3421e4:{equipment:"Off-highway Truck"},3422e4:{equipment:"Wheel Loaders"}},351e5:{3511e4:{equipment:"Off-highway Truck"},3512e4:{equipment:"Wheel Loaders"}},352e5:{3521e4:{equipment:"Off-highway Truck"},3522e4:{equipment:"Wheel Loaders"}},411e5:{4111e4:{equipment:"Equipment Item 1"},4112e4:{equipment:"Equipment Item 2"}},412e5:{4121e4:{equipment:"Equipment Item 1"},4122e4:{equipment:"Equipment Item 2"}},421e5:{4211e4:{equipment:"Equipment Item 1"},4212e4:{equipment:"Equipment Item 2"}},422e5:{4221e4:{equipment:"Equipment Item 1"},4222e4:{equipment:"Equipment Item 2"}},511e5:{5111e4:{equipment:"Equipment Item 1"},5112e4:{equipment:"Equipment Item 2"}},512e5:{5121e4:{equipment:"Equipment Item 1"},5122e4:{equipment:"Equipment Item 2"}},521e5:{5211e4:{equipment:"Equipment Item 1"},5212e4:{equipment:"Equipment Item 2"}},522e5:{5221e4:{equipment:"Equipment Item 1"},5222e4:{equipment:"Equipment Item 2"}},611e5:{6111e4:{equipment:"Equipment Item 1"},6112e4:{equipment:"Equipment Item 2"}},612e5:{6121e4:{equipment:"Equipment Item 1"},6122e4:{equipment:"Equipment Item 2"}},621e5:{6211e4:{equipment:"Equipment Item 1"},6212e4:{equipment:"Equipment Item 2"}},622e5:{6221e4:{equipment:"Equipment Item 1"},6222e4:{equipment:"Equipment Item 2"}},711e5:{7111e4:{equipment:"Equipment Item 1"},7112e4:{equipment:"Equipment Item 2"}},712e5:{7121e4:{equipment:"Equipment Item 1"},7122e4:{equipment:"Equipment Item 2"}},721e5:{7211e4:{equipment:"Equipment Item 1"},7212e4:{equipment:"Equipment Item 2"}},722e5:{7221e4:{equipment:"Equipment Item 1"},7222e4:{equipment:"Equipment Item 2"}},811e5:{8111e4:{equipment:"Equipment Item 1"},8112e4:{equipment:"Equipment Item 2"}},812e5:{8121e4:{equipment:"Equipment Item 1"},8122e4:{equipment:"Equipment Item 2"}},821e5:{8211e4:{equipment:"Equipment Item 1"},8212e4:{equipment:"Equipment Item 2"}},822e5:{8221e4:{equipment:"Equipment Item 1"},8222e4:{equipment:"Equipment Item 2"}},911e5:{9111e4:{equipment:"Equipment Item 1"},9112e4:{equipment:"Equipment Item 2"}},912e5:{9121e4:{equipment:"Equipment Item 1"},9122e4:{equipment:"Equipment Item 2"}},921e5:{9211e4:{equipment:"Equipment Item 1"},9212e4:{equipment:"Equipment Item 2"}},922e5:{9221e4:{equipment:"Equipment Item 1"},9222e4:{equipment:"Equipment Item 2"}}};var UE={},T9={L:1,M:0,Q:3,H:2},F9={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},Lye=F9;function I9(e){this.mode=Lye.MODE_8BIT_BYTE,this.data=e}I9.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var Oye=I9,zw=T9;function wu(e,t){this.totalCount=e,this.dataCount=t}wu.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];wu.getRSBlocks=function(e,t){var r=wu.getRsBlockTable(e,t);if(r==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var n=r.length/3,i=new Array,c=0;c<n;c++)for(var d=r[c*3+0],y=r[c*3+1],o=r[c*3+2],x=0;x<d;x++)i.push(new wu(y,o));return i};wu.getRsBlockTable=function(e,t){switch(t){case zw.L:return wu.RS_BLOCK_TABLE[(e-1)*4+0];case zw.M:return wu.RS_BLOCK_TABLE[(e-1)*4+1];case zw.Q:return wu.RS_BLOCK_TABLE[(e-1)*4+2];case zw.H:return wu.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};var Uye=wu;function M9(){this.buffer=new Array,this.length=0}M9.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var zye=M9,Mc={glog:function(e){if(e<1)throw new Error("glog("+e+")");return Mc.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return Mc.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var ya=0;ya<8;ya++)Mc.EXP_TABLE[ya]=1<<ya;for(var ya=8;ya<256;ya++)Mc.EXP_TABLE[ya]=Mc.EXP_TABLE[ya-4]^Mc.EXP_TABLE[ya-5]^Mc.EXP_TABLE[ya-6]^Mc.EXP_TABLE[ya-8];for(var ya=0;ya<255;ya++)Mc.LOG_TABLE[Mc.EXP_TABLE[ya]]=ya;var P9=Mc,Of=P9;function rC(e,t){if(e.length==null)throw new Error(e.length+"/"+t);for(var r=0;r<e.length&&e[r]==0;)r++;this.num=new Array(e.length-r+t);for(var n=0;n<e.length-r;n++)this.num[n]=e[n+r]}rC.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),r=0;r<this.getLength();r++)for(var n=0;n<e.getLength();n++)t[r+n]^=Of.gexp(Of.glog(this.get(r))+Of.glog(e.get(n)));return new rC(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=Of.glog(this.get(0))-Of.glog(e.get(0)),r=new Array(this.getLength()),n=0;n<this.getLength();n++)r[n]=this.get(n);for(var n=0;n<e.getLength();n++)r[n]^=Of.gexp(Of.glog(e.get(n))+t);return new rC(r,0).mod(e)}};var D9=rC,Il=F9,JQ=D9,Qye=P9,Vh={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},fa={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;fa.getBCHDigit(t)-fa.getBCHDigit(fa.G15)>=0;)t^=fa.G15<<fa.getBCHDigit(t)-fa.getBCHDigit(fa.G15);return(e<<10|t)^fa.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;fa.getBCHDigit(t)-fa.getBCHDigit(fa.G18)>=0;)t^=fa.G18<<fa.getBCHDigit(t)-fa.getBCHDigit(fa.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;e!=0;)t++,e>>>=1;return t},getPatternPosition:function(e){return fa.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,r){switch(e){case Vh.PATTERN000:return(t+r)%2==0;case Vh.PATTERN001:return t%2==0;case Vh.PATTERN010:return r%3==0;case Vh.PATTERN011:return(t+r)%3==0;case Vh.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case Vh.PATTERN101:return t*r%2+t*r%3==0;case Vh.PATTERN110:return(t*r%2+t*r%3)%2==0;case Vh.PATTERN111:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new JQ([1],0),r=0;r<e;r++)t=t.multiply(new JQ([1,Qye.gexp(r)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case Il.MODE_NUMBER:return 10;case Il.MODE_ALPHA_NUM:return 9;case Il.MODE_8BIT_BYTE:return 8;case Il.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case Il.MODE_NUMBER:return 12;case Il.MODE_ALPHA_NUM:return 11;case Il.MODE_8BIT_BYTE:return 16;case Il.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(t<41)switch(e){case Il.MODE_NUMBER:return 14;case Il.MODE_ALPHA_NUM:return 13;case Il.MODE_8BIT_BYTE:return 16;case Il.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),r=0,n=0;n<t;n++)for(var i=0;i<t;i++){for(var c=0,d=e.isDark(n,i),y=-1;y<=1;y++)if(!(n+y<0||t<=n+y))for(var o=-1;o<=1;o++)i+o<0||t<=i+o||y==0&&o==0||d==e.isDark(n+y,i+o)&&c++;c>5&&(r+=3+c-5)}for(var n=0;n<t-1;n++)for(var i=0;i<t-1;i++){var x=0;e.isDark(n,i)&&x++,e.isDark(n+1,i)&&x++,e.isDark(n,i+1)&&x++,e.isDark(n+1,i+1)&&x++,(x==0||x==4)&&(r+=3)}for(var n=0;n<t;n++)for(var i=0;i<t-6;i++)e.isDark(n,i)&&!e.isDark(n,i+1)&&e.isDark(n,i+2)&&e.isDark(n,i+3)&&e.isDark(n,i+4)&&!e.isDark(n,i+5)&&e.isDark(n,i+6)&&(r+=40);for(var i=0;i<t;i++)for(var n=0;n<t-6;n++)e.isDark(n,i)&&!e.isDark(n+1,i)&&e.isDark(n+2,i)&&e.isDark(n+3,i)&&e.isDark(n+4,i)&&!e.isDark(n+5,i)&&e.isDark(n+6,i)&&(r+=40);for(var S=0,i=0;i<t;i++)for(var n=0;n<t;n++)e.isDark(n,i)&&S++;var k=Math.abs(100*S/t/t-50)/5;return r+=k*10,r}},Nye=fa,Vye=Oye,k9=Uye,R9=zye,Vd=Nye,Hye=D9;function Eu(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var fl=Eu.prototype;fl.addData=function(e){var t=new Vye(e);this.dataList.push(t),this.dataCache=null};fl.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]};fl.getModuleCount=function(){return this.moduleCount};fl.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=k9.getRSBlocks(e,this.errorCorrectLevel),r=new R9,n=0,i=0;i<t.length;i++)n+=t[i].dataCount;for(var i=0;i<this.dataList.length;i++){var c=this.dataList[i];r.put(c.mode,4),r.put(c.getLength(),Vd.getLengthInBits(c.mode,e)),c.write(r)}if(r.getLengthInBits()<=n*8)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())};fl.makeImpl=function(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=Eu.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)};fl.setupPositionProbePattern=function(e,t){for(var r=-1;r<=7;r++)if(!(e+r<=-1||this.moduleCount<=e+r))for(var n=-1;n<=7;n++)t+n<=-1||this.moduleCount<=t+n||(0<=r&&r<=6&&(n==0||n==6)||0<=n&&n<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=n&&n<=4?this.modules[e+r][t+n]=!0:this.modules[e+r][t+n]=!1)};fl.getBestMaskPattern=function(){for(var e=0,t=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=Vd.getLostPoint(this);(r==0||e>n)&&(e=n,t=r)}return t};fl.createMovieClip=function(e,t,r){var n=e.createEmptyMovieClip(t,r),i=1;this.make();for(var c=0;c<this.modules.length;c++)for(var d=c*i,y=0;y<this.modules[c].length;y++){var o=y*i,x=this.modules[c][y];x&&(n.beginFill(0,100),n.moveTo(o,d),n.lineTo(o+i,d),n.lineTo(o+i,d+i),n.lineTo(o,d+i),n.endFill())}return n};fl.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)};fl.setupPositionAdjustPattern=function(){for(var e=Vd.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var n=e[t],i=e[r];if(this.modules[n][i]==null)for(var c=-2;c<=2;c++)for(var d=-2;d<=2;d++)c==-2||c==2||d==-2||d==2||c==0&&d==0?this.modules[n+c][i+d]=!0:this.modules[n+c][i+d]=!1}};fl.setupTypeNumber=function(e){for(var t=Vd.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var n=!e&&(t>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(var r=0;r<18;r++){var n=!e&&(t>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}};fl.setupTypeInfo=function(e,t){for(var r=this.errorCorrectLevel<<3|t,n=Vd.getBCHTypeInfo(r),i=0;i<15;i++){var c=!e&&(n>>i&1)==1;i<6?this.modules[i][8]=c:i<8?this.modules[i+1][8]=c:this.modules[this.moduleCount-15+i][8]=c}for(var i=0;i<15;i++){var c=!e&&(n>>i&1)==1;i<8?this.modules[8][this.moduleCount-i-1]=c:i<9?this.modules[8][15-i-1+1]=c:this.modules[8][15-i-1]=c}this.modules[this.moduleCount-8][8]=!e};fl.mapData=function(e,t){for(var r=-1,n=this.moduleCount-1,i=7,c=0,d=this.moduleCount-1;d>0;d-=2)for(d==6&&d--;;){for(var y=0;y<2;y++)if(this.modules[n][d-y]==null){var o=!1;c<e.length&&(o=(e[c]>>>i&1)==1);var x=Vd.getMask(t,n,d-y);x&&(o=!o),this.modules[n][d-y]=o,i--,i==-1&&(c++,i=7)}if(n+=r,n<0||this.moduleCount<=n){n-=r,r=-r;break}}};Eu.PAD0=236;Eu.PAD1=17;Eu.createData=function(e,t,r){for(var n=k9.getRSBlocks(e,t),i=new R9,c=0;c<r.length;c++){var d=r[c];i.put(d.mode,4),i.put(d.getLength(),Vd.getLengthInBits(d.mode,e)),d.write(i)}for(var y=0,c=0;c<n.length;c++)y+=n[c].dataCount;if(i.getLengthInBits()>y*8)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+y*8+")");for(i.getLengthInBits()+4<=y*8&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=y*8||(i.put(Eu.PAD0,8),i.getLengthInBits()>=y*8));)i.put(Eu.PAD1,8);return Eu.createBytes(i,n)};Eu.createBytes=function(e,t){for(var r=0,n=0,i=0,c=new Array(t.length),d=new Array(t.length),y=0;y<t.length;y++){var o=t[y].dataCount,x=t[y].totalCount-o;n=Math.max(n,o),i=Math.max(i,x),c[y]=new Array(o);for(var S=0;S<c[y].length;S++)c[y][S]=255&e.buffer[S+r];r+=o;var k=Vd.getErrorCorrectPolynomial(x),O=new Hye(c[y],k.getLength()-1),Q=O.mod(k);d[y]=new Array(k.getLength()-1);for(var S=0;S<d[y].length;S++){var G=S+Q.getLength()-d[y].length;d[y][S]=G>=0?Q.get(G):0}}for(var K=0,S=0;S<t.length;S++)K+=t[S].totalCount;for(var ee=new Array(K),W=0,S=0;S<n;S++)for(var y=0;y<t.length;y++)S<c[y].length&&(ee[W++]=c[y][S]);for(var S=0;S<i;S++)for(var y=0;y<t.length;y++)S<d[y].length&&(ee[W++]=d[y][S]);return ee};var jye=Eu,I2={};Object.defineProperty(I2,"__esModule",{value:!0});var Gye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kye=f7,Ml=O9(Kye),L9=Se,Qw=O9(L9);function O9(e){return e&&e.__esModule?e:{default:e}}function Wye(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var qye={bgColor:Ml.default.oneOfType([Ml.default.object,Ml.default.string]).isRequired,bgD:Ml.default.string.isRequired,fgColor:Ml.default.oneOfType([Ml.default.object,Ml.default.string]).isRequired,fgD:Ml.default.string.isRequired,size:Ml.default.number.isRequired,title:Ml.default.string,viewBoxSize:Ml.default.number.isRequired,xmlns:Ml.default.string},M2=(0,L9.forwardRef)(function(e,t){var r=e.bgColor,n=e.bgD,i=e.fgD,c=e.fgColor,d=e.size,y=e.title,o=e.viewBoxSize,x=e.xmlns,S=x===void 0?"http://www.w3.org/2000/svg":x,k=Wye(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return Qw.default.createElement("svg",Gye({},k,{height:d,ref:t,viewBox:"0 0 "+o+" "+o,width:d,xmlns:S}),y?Qw.default.createElement("title",null,y):null,Qw.default.createElement("path",{d:n,fill:r}),Qw.default.createElement("path",{d:i,fill:c}))});M2.displayName="QRCodeSvg";M2.propTypes=qye;I2.default=M2;Object.defineProperty(UE,"__esModule",{value:!0});UE.QRCode=void 0;var Xye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zye=f7,lA=ox(Zye),Yye=T9,Jye=ox(Yye),$ye=jye,e_e=ox($ye),U9=Se,t_e=ox(U9),r_e=I2,n_e=ox(r_e);function ox(e){return e&&e.__esModule?e:{default:e}}function i_e(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var o_e={bgColor:lA.default.oneOfType([lA.default.object,lA.default.string]),fgColor:lA.default.oneOfType([lA.default.object,lA.default.string]),level:lA.default.string,size:lA.default.number,value:lA.default.string.isRequired},zE=(0,U9.forwardRef)(function(e,t){var r=e.bgColor,n=r===void 0?"#FFFFFF":r,i=e.fgColor,c=i===void 0?"#000000":i,d=e.level,y=d===void 0?"L":d,o=e.size,x=o===void 0?256:o,S=e.value,k=i_e(e,["bgColor","fgColor","level","size","value"]),O=new e_e.default(-1,Jye.default[y]);O.addData(S),O.make();var Q=O.modules;return t_e.default.createElement(n_e.default,Xye({},k,{bgColor:n,bgD:Q.map(function(G,K){return G.map(function(ee,W){return ee?"":"M "+W+" "+K+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:c,fgD:Q.map(function(G,K){return G.map(function(ee,W){return ee?"M "+W+" "+K+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:x,viewBoxSize:Q.length}))});UE.QRCode=zE;zE.displayName="QRCode";zE.propTypes=o_e;var a_e=UE.default=zE;/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var M4=function(e,t){return M4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},M4(e,t)};function Uc(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");M4(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var P4=function(){return P4=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(t[c]=r[c])}return t},P4.apply(this,arguments)};function as(e,t,r,n){function i(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function y(S){try{x(n.next(S))}catch(k){d(k)}}function o(S){try{x(n.throw(S))}catch(k){d(k)}}function x(S){S.done?c(S.value):i(S.value).then(y,o)}x((n=n.apply(e,[])).next())})}function za(e,t){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},n,i,c,d;return d={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function y(x){return function(S){return o([x,S])}}function o(x){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(c=x[0]&2?i.return:x[0]?i.throw||((c=i.return)&&c.call(i),0):i.next)&&!(c=c.call(i,x[1])).done)return c;switch(i=0,c&&(x=[x[0]&2,c.value]),x[0]){case 0:case 1:c=x;break;case 4:return r.label++,{value:x[1],done:!1};case 5:r.label++,i=x[1],x=[0];continue;case 7:x=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(x[0]===6||x[0]===2)){r=0;continue}if(x[0]===3&&(!c||x[1]>c[0]&&x[1]<c[3])){r.label=x[1];break}if(x[0]===6&&r.label<c[1]){r.label=c[1],c=x;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(x);break}c[2]&&r.ops.pop(),r.trys.pop();continue}x=t.call(e,r)}catch(S){x=[6,S],i=0}finally{n=c=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}}function Nw(e,t,r){if(arguments.length===2)for(var n=0,i=t.length,c;n<i;n++)(c||!(n in t))&&(c||(c=Array.prototype.slice.call(t,0,n)),c[n]=t[n]);return e.concat(c||t)}var VA=function(){function e(t,r,n,i){this.left=t,this.top=r,this.width=n,this.height=i}return e.prototype.add=function(t,r,n,i){return new e(this.left+t,this.top+r,this.width+n,this.height+i)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var n=Array.from(r).find(function(i){return i.width!==0});return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),QE=function(e,t){return VA.fromClientRect(e,t.getBoundingClientRect())},s_e=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),i=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new VA(0,0,n,i)},NE=function(e){for(var t=[],r=0,n=e.length;r<n;){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var c=e.charCodeAt(r++);(c&64512)===56320?t.push(((i&1023)<<10)+(c&1023)+65536):(t.push(i),r--)}else t.push(i)}return t},Bo=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],i=-1,c="";++i<r;){var d=e[i];d<=65535?n.push(d):(d-=65536,n.push((d>>10)+55296,d%1024+56320)),(i+1===r||n.length>16384)&&(c+=String.fromCharCode.apply(String,n),n.length=0)}return c},$Q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l_e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Vw=0;Vw<$Q.length;Vw++)l_e[$Q.charCodeAt(Vw)]=Vw;var e3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$y=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Hw=0;Hw<e3.length;Hw++)$y[e3.charCodeAt(Hw)]=Hw;var c_e=function(e){var t=e.length*.75,r=e.length,n,i=0,c,d,y,o;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var x=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),S=Array.isArray(x)?x:new Uint8Array(x);for(n=0;n<r;n+=4)c=$y[e.charCodeAt(n)],d=$y[e.charCodeAt(n+1)],y=$y[e.charCodeAt(n+2)],o=$y[e.charCodeAt(n+3)],S[i++]=c<<2|d>>4,S[i++]=(d&15)<<4|y>>2,S[i++]=(y&3)<<6|o&63;return x},u_e=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},A_e=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},up=5,P2=11,mM=2,h_e=P2-up,z9=65536>>up,d_e=1<<up,gM=d_e-1,f_e=1024>>up,p_e=z9+f_e,m_e=p_e,g_e=32,v_e=m_e+g_e,y_e=65536>>P2,__e=1<<h_e,x_e=__e-1,t3=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},b_e=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},w_e=function(e,t){var r=c_e(e),n=Array.isArray(r)?A_e(r):new Uint32Array(r),i=Array.isArray(r)?u_e(r):new Uint16Array(r),c=24,d=t3(i,c/2,n[4]/2),y=n[5]===2?t3(i,(c+n[4])/2):b_e(n,Math.ceil((c+n[4])/4));return new B_e(n[0],n[1],n[2],n[3],d,y)},B_e=function(){function e(t,r,n,i,c,d){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=i,this.index=c,this.data=d}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>up],r=(r<<mM)+(t&gM),this.data[r];if(t<=65535)return r=this.index[z9+(t-55296>>up)],r=(r<<mM)+(t&gM),this.data[r];if(t<this.highStart)return r=v_e-y_e+(t>>P2),r=this.index[r],r+=t>>up&x_e,r=this.index[r],r=(r<<mM)+(t&gM),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),r3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C_e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var jw=0;jw<r3.length;jw++)C_e[r3.charCodeAt(jw)]=jw;var S_e="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",n3=50,E_e=1,Q9=2,N9=3,T_e=4,F_e=5,i3=7,V9=8,o3=9,sd=10,D4=11,a3=12,k4=13,I_e=14,e_=15,R4=16,Gw=17,Ty=18,M_e=19,s3=20,L4=21,Fy=22,vM=23,Wm=24,qs=25,t_=26,r_=27,qm=28,P_e=29,Wf=30,D_e=31,Kw=32,Ww=33,O4=34,U4=35,z4=36,F1=37,Q4=38,nC=39,iC=40,yM=41,H9=42,k_e=43,R_e=[9001,65288],j9="!",Rn="×",qw="÷",N4=w_e(S_e),cA=[Wf,z4],V4=[E_e,Q9,N9,F_e],G9=[sd,V9],l3=[r_,t_],L_e=V4.concat(G9),c3=[Q4,nC,iC,O4,U4],O_e=[e_,k4],U_e=function(e,t){t===void 0&&(t="strict");var r=[],n=[],i=[];return e.forEach(function(c,d){var y=N4.get(c);if(y>n3?(i.push(!0),y-=n3):i.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(c)!==-1)return n.push(d),r.push(R4);if(y===T_e||y===D4){if(d===0)return n.push(d),r.push(Wf);var o=r[d-1];return L_e.indexOf(o)===-1?(n.push(n[d-1]),r.push(o)):(n.push(d),r.push(Wf))}if(n.push(d),y===D_e)return r.push(t==="strict"?L4:F1);if(y===H9||y===P_e)return r.push(Wf);if(y===k_e)return c>=131072&&c<=196605||c>=196608&&c<=262141?r.push(F1):r.push(Wf);r.push(y)}),[n,r,i]},_M=function(e,t,r,n){var i=n[r];if(Array.isArray(e)?e.indexOf(i)!==-1:e===i)for(var c=r;c<=n.length;){c++;var d=n[c];if(d===t)return!0;if(d!==sd)break}if(i===sd)for(var c=r;c>0;){c--;var y=n[c];if(Array.isArray(e)?e.indexOf(y)!==-1:e===y)for(var o=r;o<=n.length;){o++;var d=n[o];if(d===t)return!0;if(d!==sd)break}if(y!==sd)break}return!1},u3=function(e,t){for(var r=e;r>=0;){var n=t[r];if(n===sd)r--;else return n}return 0},z_e=function(e,t,r,n,i){if(r[n]===0)return Rn;var c=n-1;if(Array.isArray(i)&&i[c]===!0)return Rn;var d=c-1,y=c+1,o=t[c],x=d>=0?t[d]:0,S=t[y];if(o===Q9&&S===N9)return Rn;if(V4.indexOf(o)!==-1)return j9;if(V4.indexOf(S)!==-1||G9.indexOf(S)!==-1)return Rn;if(u3(c,t)===V9)return qw;if(N4.get(e[c])===D4||(o===Kw||o===Ww)&&N4.get(e[y])===D4||o===i3||S===i3||o===o3||[sd,k4,e_].indexOf(o)===-1&&S===o3||[Gw,Ty,M_e,Wm,qm].indexOf(S)!==-1||u3(c,t)===Fy||_M(vM,Fy,c,t)||_M([Gw,Ty],L4,c,t)||_M(a3,a3,c,t))return Rn;if(o===sd)return qw;if(o===vM||S===vM)return Rn;if(S===R4||o===R4)return qw;if([k4,e_,L4].indexOf(S)!==-1||o===I_e||x===z4&&O_e.indexOf(o)!==-1||o===qm&&S===z4||S===s3||cA.indexOf(S)!==-1&&o===qs||cA.indexOf(o)!==-1&&S===qs||o===r_&&[F1,Kw,Ww].indexOf(S)!==-1||[F1,Kw,Ww].indexOf(o)!==-1&&S===t_||cA.indexOf(o)!==-1&&l3.indexOf(S)!==-1||l3.indexOf(o)!==-1&&cA.indexOf(S)!==-1||[r_,t_].indexOf(o)!==-1&&(S===qs||[Fy,e_].indexOf(S)!==-1&&t[y+1]===qs)||[Fy,e_].indexOf(o)!==-1&&S===qs||o===qs&&[qs,qm,Wm].indexOf(S)!==-1)return Rn;if([qs,qm,Wm,Gw,Ty].indexOf(S)!==-1)for(var k=c;k>=0;){var O=t[k];if(O===qs)return Rn;if([qm,Wm].indexOf(O)!==-1)k--;else break}if([r_,t_].indexOf(S)!==-1)for(var k=[Gw,Ty].indexOf(o)!==-1?d:c;k>=0;){var O=t[k];if(O===qs)return Rn;if([qm,Wm].indexOf(O)!==-1)k--;else break}if(Q4===o&&[Q4,nC,O4,U4].indexOf(S)!==-1||[nC,O4].indexOf(o)!==-1&&[nC,iC].indexOf(S)!==-1||[iC,U4].indexOf(o)!==-1&&S===iC||c3.indexOf(o)!==-1&&[s3,t_].indexOf(S)!==-1||c3.indexOf(S)!==-1&&o===r_||cA.indexOf(o)!==-1&&cA.indexOf(S)!==-1||o===Wm&&cA.indexOf(S)!==-1||cA.concat(qs).indexOf(o)!==-1&&S===Fy&&R_e.indexOf(e[y])===-1||cA.concat(qs).indexOf(S)!==-1&&o===Ty)return Rn;if(o===yM&&S===yM){for(var Q=r[c],G=1;Q>0&&(Q--,t[Q]===yM);)G++;if(G%2!==0)return Rn}return o===Kw&&S===Ww?Rn:qw},Q_e=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=U_e(e,t.lineBreak),n=r[0],i=r[1],c=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(i=i.map(function(y){return[qs,Wf,H9].indexOf(y)!==-1?F1:y}));var d=t.wordBreak==="keep-all"?c.map(function(y,o){return y&&e[o]>=19968&&e[o]<=40959}):void 0;return[n,i,d]},N_e=function(){function e(t,r,n,i){this.codePoints=t,this.required=r===j9,this.start=n,this.end=i}return e.prototype.slice=function(){return Bo.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),V_e=function(e,t){var r=NE(e),n=Q_e(r,t),i=n[0],c=n[1],d=n[2],y=r.length,o=0,x=0;return{next:function(){if(x>=y)return{done:!0,value:null};for(var S=Rn;x<y&&(S=z_e(r,c,i,++x,d))===Rn;);if(S!==Rn||x===y){var k=new N_e(r,S,o,x);return o=x,{value:k,done:!1}}return{done:!0,value:null}}}},H_e=1,j_e=2,ax=4,A3=8,fS=10,h3=47,R_=92,G_e=9,K_e=32,Xw=34,Iy=61,W_e=35,q_e=36,X_e=37,Zw=39,Yw=40,My=41,Z_e=95,ws=45,Y_e=33,J_e=60,$_e=62,e1e=64,t1e=91,r1e=93,n1e=61,i1e=123,Jw=63,o1e=125,d3=124,a1e=126,s1e=128,f3=65533,xM=42,ep=43,l1e=44,c1e=58,u1e=59,I1=46,A1e=0,h1e=8,d1e=11,f1e=14,p1e=31,m1e=127,du=-1,K9=48,W9=97,q9=101,g1e=102,v1e=117,y1e=122,X9=65,Z9=69,Y9=70,_1e=85,x1e=90,Na=function(e){return e>=K9&&e<=57},b1e=function(e){return e>=55296&&e<=57343},Xm=function(e){return Na(e)||e>=X9&&e<=Y9||e>=W9&&e<=g1e},w1e=function(e){return e>=W9&&e<=y1e},B1e=function(e){return e>=X9&&e<=x1e},C1e=function(e){return w1e(e)||B1e(e)},S1e=function(e){return e>=s1e},$w=function(e){return e===fS||e===G_e||e===K_e},pS=function(e){return C1e(e)||S1e(e)||e===Z_e},p3=function(e){return pS(e)||Na(e)||e===ws},E1e=function(e){return e>=A1e&&e<=h1e||e===d1e||e>=f1e&&e<=p1e||e===m1e},$h=function(e,t){return e!==R_?!1:t!==fS},eB=function(e,t,r){return e===ws?pS(t)||$h(t,r):pS(e)?!0:!!(e===R_&&$h(e,t))},bM=function(e,t,r){return e===ep||e===ws?Na(t)?!0:t===I1&&Na(r):Na(e===I1?t:e)},T1e=function(e){var t=0,r=1;(e[t]===ep||e[t]===ws)&&(e[t]===ws&&(r=-1),t++);for(var n=[];Na(e[t]);)n.push(e[t++]);var i=n.length?parseInt(Bo.apply(void 0,n),10):0;e[t]===I1&&t++;for(var c=[];Na(e[t]);)c.push(e[t++]);var d=c.length,y=d?parseInt(Bo.apply(void 0,c),10):0;(e[t]===Z9||e[t]===q9)&&t++;var o=1;(e[t]===ep||e[t]===ws)&&(e[t]===ws&&(o=-1),t++);for(var x=[];Na(e[t]);)x.push(e[t++]);var S=x.length?parseInt(Bo.apply(void 0,x),10):0;return r*(i+y*Math.pow(10,-d))*Math.pow(10,o*S)},F1e={type:2},I1e={type:3},M1e={type:4},P1e={type:13},D1e={type:8},k1e={type:21},R1e={type:9},L1e={type:10},O1e={type:11},U1e={type:12},z1e={type:14},tB={type:23},Q1e={type:1},N1e={type:25},V1e={type:24},H1e={type:26},j1e={type:27},G1e={type:28},K1e={type:29},W1e={type:31},H4={type:32},J9=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(NE(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==H4;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case Xw:return this.consumeStringToken(Xw);case W_e:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),i=this.peekCodePoint(2);if(p3(r)||$h(n,i)){var c=eB(r,n,i)?j_e:H_e,d=this.consumeName();return{type:5,value:d,flags:c}}break;case q_e:if(this.peekCodePoint(0)===Iy)return this.consumeCodePoint(),P1e;break;case Zw:return this.consumeStringToken(Zw);case Yw:return F1e;case My:return I1e;case xM:if(this.peekCodePoint(0)===Iy)return this.consumeCodePoint(),z1e;break;case ep:if(bM(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case l1e:return M1e;case ws:var y=t,o=this.peekCodePoint(0),x=this.peekCodePoint(1);if(bM(y,o,x))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(eB(y,o,x))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(o===ws&&x===$_e)return this.consumeCodePoint(),this.consumeCodePoint(),V1e;break;case I1:if(bM(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case h3:if(this.peekCodePoint(0)===xM)for(this.consumeCodePoint();;){var S=this.consumeCodePoint();if(S===xM&&(S=this.consumeCodePoint(),S===h3))return this.consumeToken();if(S===du)return this.consumeToken()}break;case c1e:return H1e;case u1e:return j1e;case J_e:if(this.peekCodePoint(0)===Y_e&&this.peekCodePoint(1)===ws&&this.peekCodePoint(2)===ws)return this.consumeCodePoint(),this.consumeCodePoint(),N1e;break;case e1e:var k=this.peekCodePoint(0),O=this.peekCodePoint(1),Q=this.peekCodePoint(2);if(eB(k,O,Q)){var d=this.consumeName();return{type:7,value:d}}break;case t1e:return G1e;case R_:if($h(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case r1e:return K1e;case n1e:if(this.peekCodePoint(0)===Iy)return this.consumeCodePoint(),D1e;break;case i1e:return O1e;case o1e:return U1e;case v1e:case _1e:var G=this.peekCodePoint(0),K=this.peekCodePoint(1);return G===ep&&(Xm(K)||K===Jw)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case d3:if(this.peekCodePoint(0)===Iy)return this.consumeCodePoint(),R1e;if(this.peekCodePoint(0)===d3)return this.consumeCodePoint(),k1e;break;case a1e:if(this.peekCodePoint(0)===Iy)return this.consumeCodePoint(),L1e;break;case du:return H4}return $w(t)?(this.consumeWhiteSpace(),W1e):Na(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):pS(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Bo(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();Xm(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var n=!1;r===Jw&&t.length<6;)t.push(r),r=this.consumeCodePoint(),n=!0;if(n){var i=parseInt(Bo.apply(void 0,t.map(function(o){return o===Jw?K9:o})),16),c=parseInt(Bo.apply(void 0,t.map(function(o){return o===Jw?Y9:o})),16);return{type:30,start:i,end:c}}var d=parseInt(Bo.apply(void 0,t),16);if(this.peekCodePoint(0)===ws&&Xm(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var y=[];Xm(r)&&y.length<6;)y.push(r),r=this.consumeCodePoint();var c=parseInt(Bo.apply(void 0,y),16);return{type:30,start:d,end:c}}else return{type:30,start:d,end:d}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===Yw?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Yw?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===du)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===Zw||r===Xw){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===du||this.peekCodePoint(0)===My)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),tB)}for(;;){var i=this.consumeCodePoint();if(i===du||i===My)return{type:22,value:Bo.apply(void 0,t)};if($w(i))return this.consumeWhiteSpace(),this.peekCodePoint(0)===du||this.peekCodePoint(0)===My?(this.consumeCodePoint(),{type:22,value:Bo.apply(void 0,t)}):(this.consumeBadUrlRemnants(),tB);if(i===Xw||i===Zw||i===Yw||E1e(i))return this.consumeBadUrlRemnants(),tB;if(i===R_)if($h(i,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),tB;else t.push(i)}},e.prototype.consumeWhiteSpace=function(){for(;$w(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===My||t===du)return;$h(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,n="";t>0;){var i=Math.min(r,t);n+=Bo.apply(void 0,this._value.splice(0,i)),t-=i}return this._value.shift(),n},e.prototype.consumeStringToken=function(t){var r="",n=0;do{var i=this._value[n];if(i===du||i===void 0||i===t)return r+=this.consumeStringSlice(n),{type:0,value:r};if(i===fS)return this._value.splice(0,n),Q1e;if(i===R_){var c=this._value[n+1];c!==du&&c!==void 0&&(c===fS?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):$h(i,c)&&(r+=this.consumeStringSlice(n),r+=Bo(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=ax,n=this.peekCodePoint(0);for((n===ep||n===ws)&&t.push(this.consumeCodePoint());Na(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(n===I1&&Na(i))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=A3;Na(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),i=this.peekCodePoint(1);var c=this.peekCodePoint(2);if((n===Z9||n===q9)&&((i===ep||i===ws)&&Na(c)||Na(i)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=A3;Na(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[T1e(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],n=t[1],i=this.peekCodePoint(0),c=this.peekCodePoint(1),d=this.peekCodePoint(2);if(eB(i,c,d)){var y=this.consumeName();return{type:15,number:r,flags:n,unit:y}}return i===X_e?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(Xm(t)){for(var r=Bo(t);Xm(this.peekCodePoint(0))&&r.length<6;)r+=Bo(this.consumeCodePoint());$w(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||b1e(n)||n>1114111?f3:n}return t===du?f3:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(p3(r))t+=Bo(r);else if($h(r,this.peekCodePoint(0)))t+=Bo(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),$9=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new J9;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},n=this.consumeToken();;){if(n.type===32||X1e(n,t))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?H4:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),sx=function(e){return e.type===15},C0=function(e){return e.type===17},Ci=function(e){return e.type===20},q1e=function(e){return e.type===0},j4=function(e,t){return Ci(e)&&e.value===t},eK=function(e){return e.type!==31},m0=function(e){return e.type!==31&&e.type!==4},Ou=function(e){var t=[],r=[];return e.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&t.push(r),t},X1e=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},Id=function(e){return e.type===17||e.type===15},Po=function(e){return e.type===16||Id(e)},tK=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},_a={type:17,number:0,flags:ax},D2={type:16,number:50,flags:ax},ld={type:16,number:100,flags:ax},n_=function(e,t,r){var n=e[0],i=e[1];return[ki(n,t),ki(typeof i<"u"?i:n,r)]},ki=function(e,t){if(e.type===16)return e.number/100*t;if(sx(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},rK="deg",nK="grad",iK="rad",oK="turn",VE={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case rK:return Math.PI*t.number/180;case nK:return Math.PI/200*t.number;case iK:return t.number;case oK:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},aK=function(e){return e.type===15&&(e.unit===rK||e.unit===nK||e.unit===iK||e.unit===oK)},sK=function(e){var t=e.filter(Ci).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[_a,_a];case"to top":case"bottom":return Vl(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[_a,ld];case"to right":case"left":return Vl(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[ld,ld];case"to bottom":case"top":return Vl(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[ld,_a];case"to left":case"right":return Vl(270)}return 0},Vl=function(e){return Math.PI*e/180},xd={name:"color",parse:function(e,t){if(t.type===18){var r=Z1e[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var n=t.value.substring(0,1),i=t.value.substring(1,2),c=t.value.substring(2,3);return cd(parseInt(n+n,16),parseInt(i+i,16),parseInt(c+c,16),1)}if(t.value.length===4){var n=t.value.substring(0,1),i=t.value.substring(1,2),c=t.value.substring(2,3),d=t.value.substring(3,4);return cd(parseInt(n+n,16),parseInt(i+i,16),parseInt(c+c,16),parseInt(d+d,16)/255)}if(t.value.length===6){var n=t.value.substring(0,2),i=t.value.substring(2,4),c=t.value.substring(4,6);return cd(parseInt(n,16),parseInt(i,16),parseInt(c,16),1)}if(t.value.length===8){var n=t.value.substring(0,2),i=t.value.substring(2,4),c=t.value.substring(4,6),d=t.value.substring(6,8);return cd(parseInt(n,16),parseInt(i,16),parseInt(c,16),parseInt(d,16)/255)}}if(t.type===20){var y=IA[t.value.toUpperCase()];if(typeof y<"u")return y}return IA.TRANSPARENT}},bd=function(e){return(255&e)===0},Jo=function(e){var t=255&e,r=255&e>>8,n=255&e>>16,i=255&e>>24;return t<255?"rgba("+i+","+n+","+r+","+t/255+")":"rgb("+i+","+n+","+r+")"},cd=function(e,t,r,n){return(e<<24|t<<16|r<<8|Math.round(n*255)<<0)>>>0},m3=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},g3=function(e,t){var r=t.filter(m0);if(r.length===3){var n=r.map(m3),i=n[0],c=n[1],d=n[2];return cd(i,c,d,1)}if(r.length===4){var y=r.map(m3),i=y[0],c=y[1],d=y[2],o=y[3];return cd(i,c,d,o)}return 0};function wM(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var v3=function(e,t){var r=t.filter(m0),n=r[0],i=r[1],c=r[2],d=r[3],y=(n.type===17?Vl(n.number):VE.parse(e,n))/(Math.PI*2),o=Po(i)?i.number/100:0,x=Po(c)?c.number/100:0,S=typeof d<"u"&&Po(d)?ki(d,1):1;if(o===0)return cd(x*255,x*255,x*255,1);var k=x<=.5?x*(o+1):x+o-x*o,O=x*2-k,Q=wM(O,k,y+1/3),G=wM(O,k,y),K=wM(O,k,y-1/3);return cd(Q*255,G*255,K*255,S)},Z1e={hsl:v3,hsla:v3,rgb:g3,rgba:g3},L_=function(e,t){return xd.parse(e,$9.create(t).parseComponentValue())},IA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Y1e={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(Ci(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},J1e={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},HE=function(e,t){var r=xd.parse(e,t[0]),n=t[1];return n&&Po(n)?{color:r,stop:n}:{color:r,stop:null}},y3=function(e,t){var r=e[0],n=e[e.length-1];r.stop===null&&(r.stop=_a),n.stop===null&&(n.stop=ld);for(var i=[],c=0,d=0;d<e.length;d++){var y=e[d].stop;if(y!==null){var o=ki(y,t);o>c?i.push(o):i.push(c),c=o}else i.push(null)}for(var x=null,d=0;d<i.length;d++){var S=i[d];if(S===null)x===null&&(x=d);else if(x!==null){for(var k=d-x,O=i[x-1],Q=(S-O)/(k+1),G=1;G<=k;G++)i[x+G-1]=Q*G;x=null}}return e.map(function(K,ee){var W=K.color;return{color:W,stop:Math.max(Math.min(1,i[ee]/t),0)}})},$1e=function(e,t,r){var n=t/2,i=r/2,c=ki(e[0],t)-n,d=i-ki(e[1],r);return(Math.atan2(d,c)+Math.PI*2)%(Math.PI*2)},exe=function(e,t,r){var n=typeof e=="number"?e:$1e(e,t,r),i=Math.abs(t*Math.sin(n))+Math.abs(r*Math.cos(n)),c=t/2,d=r/2,y=i/2,o=Math.sin(n-Math.PI/2)*y,x=Math.cos(n-Math.PI/2)*y;return[i,c-x,c+x,d-o,d+o]},wc=function(e,t){return Math.sqrt(e*e+t*t)},_3=function(e,t,r,n,i){var c=[[0,0],[0,t],[e,0],[e,t]];return c.reduce(function(d,y){var o=y[0],x=y[1],S=wc(r-o,n-x);return(i?S<d.optimumDistance:S>d.optimumDistance)?{optimumCorner:y,optimumDistance:S}:d},{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},txe=function(e,t,r,n,i){var c=0,d=0;switch(e.size){case 0:e.shape===0?c=d=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-i)):e.shape===1&&(c=Math.min(Math.abs(t),Math.abs(t-n)),d=Math.min(Math.abs(r),Math.abs(r-i)));break;case 2:if(e.shape===0)c=d=Math.min(wc(t,r),wc(t,r-i),wc(t-n,r),wc(t-n,r-i));else if(e.shape===1){var y=Math.min(Math.abs(r),Math.abs(r-i))/Math.min(Math.abs(t),Math.abs(t-n)),o=_3(n,i,t,r,!0),x=o[0],S=o[1];c=wc(x-t,(S-r)/y),d=y*c}break;case 1:e.shape===0?c=d=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-i)):e.shape===1&&(c=Math.max(Math.abs(t),Math.abs(t-n)),d=Math.max(Math.abs(r),Math.abs(r-i)));break;case 3:if(e.shape===0)c=d=Math.max(wc(t,r),wc(t,r-i),wc(t-n,r),wc(t-n,r-i));else if(e.shape===1){var y=Math.max(Math.abs(r),Math.abs(r-i))/Math.max(Math.abs(t),Math.abs(t-n)),k=_3(n,i,t,r,!1),x=k[0],S=k[1];c=wc(x-t,(S-r)/y),d=y*c}break}return Array.isArray(e.size)&&(c=ki(e.size[0],n),d=e.size.length===2?ki(e.size[1],i):c),[c,d]},rxe=function(e,t){var r=Vl(180),n=[];return Ou(t).forEach(function(i,c){if(c===0){var d=i[0];if(d.type===20&&d.value==="to"){r=sK(i);return}else if(aK(d)){r=VE.parse(e,d);return}}var y=HE(e,i);n.push(y)}),{angle:r,stops:n,type:1}},rB=function(e,t){var r=Vl(180),n=[];return Ou(t).forEach(function(i,c){if(c===0){var d=i[0];if(d.type===20&&["top","left","right","bottom"].indexOf(d.value)!==-1){r=sK(i);return}else if(aK(d)){r=(VE.parse(e,d)+Vl(270))%Vl(360);return}}var y=HE(e,i);n.push(y)}),{angle:r,stops:n,type:1}},nxe=function(e,t){var r=Vl(180),n=[],i=1,c=0,d=3,y=[];return Ou(t).forEach(function(o,x){var S=o[0];if(x===0){if(Ci(S)&&S.value==="linear"){i=1;return}else if(Ci(S)&&S.value==="radial"){i=2;return}}if(S.type===18){if(S.name==="from"){var k=xd.parse(e,S.values[0]);n.push({stop:_a,color:k})}else if(S.name==="to"){var k=xd.parse(e,S.values[0]);n.push({stop:ld,color:k})}else if(S.name==="color-stop"){var O=S.values.filter(m0);if(O.length===2){var k=xd.parse(e,O[1]),Q=O[0];C0(Q)&&n.push({stop:{type:16,number:Q.number*100,flags:Q.flags},color:k})}}}}),i===1?{angle:(r+Vl(180))%Vl(360),stops:n,type:i}:{size:d,shape:c,stops:n,position:y,type:i}},lK="closest-side",cK="farthest-side",uK="closest-corner",AK="farthest-corner",hK="circle",dK="ellipse",fK="cover",pK="contain",ixe=function(e,t){var r=0,n=3,i=[],c=[];return Ou(t).forEach(function(d,y){var o=!0;if(y===0){var x=!1;o=d.reduce(function(k,O){if(x)if(Ci(O))switch(O.value){case"center":return c.push(D2),k;case"top":case"left":return c.push(_a),k;case"right":case"bottom":return c.push(ld),k}else(Po(O)||Id(O))&&c.push(O);else if(Ci(O))switch(O.value){case hK:return r=0,!1;case dK:return r=1,!1;case"at":return x=!0,!1;case lK:return n=0,!1;case fK:case cK:return n=1,!1;case pK:case uK:return n=2,!1;case AK:return n=3,!1}else if(Id(O)||Po(O))return Array.isArray(n)||(n=[]),n.push(O),!1;return k},o)}if(o){var S=HE(e,d);i.push(S)}}),{size:n,shape:r,stops:i,position:c,type:2}},nB=function(e,t){var r=0,n=3,i=[],c=[];return Ou(t).forEach(function(d,y){var o=!0;if(y===0?o=d.reduce(function(S,k){if(Ci(k))switch(k.value){case"center":return c.push(D2),!1;case"top":case"left":return c.push(_a),!1;case"right":case"bottom":return c.push(ld),!1}else if(Po(k)||Id(k))return c.push(k),!1;return S},o):y===1&&(o=d.reduce(function(S,k){if(Ci(k))switch(k.value){case hK:return r=0,!1;case dK:return r=1,!1;case pK:case lK:return n=0,!1;case cK:return n=1,!1;case uK:return n=2,!1;case fK:case AK:return n=3,!1}else if(Id(k)||Po(k))return Array.isArray(n)||(n=[]),n.push(k),!1;return S},o)),o){var x=HE(e,d);i.push(x)}}),{size:n,shape:r,stops:i,position:c,type:2}},oxe=function(e){return e.type===1},axe=function(e){return e.type===2},k2={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var n=mK[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function sxe(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!mK[e.name])}var mK={"linear-gradient":rxe,"-moz-linear-gradient":rB,"-ms-linear-gradient":rB,"-o-linear-gradient":rB,"-webkit-linear-gradient":rB,"radial-gradient":ixe,"-moz-radial-gradient":nB,"-ms-radial-gradient":nB,"-o-radial-gradient":nB,"-webkit-radial-gradient":nB,"-webkit-gradient":nxe},lxe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(n){return m0(n)&&sxe(n)}).map(function(n){return k2.parse(e,n)})}},cxe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(Ci(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},uxe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Ou(t).map(function(r){return r.filter(Po)}).map(tK)}},Axe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Ou(t).map(function(r){return r.filter(Ci).map(function(n){return n.value}).join(" ")}).map(hxe)}},hxe=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Wg;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(Wg||(Wg={}));var dxe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Ou(t).map(function(r){return r.filter(fxe)})}},fxe=function(e){return Ci(e)||Po(e)},jE=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},pxe=jE("top"),mxe=jE("right"),gxe=jE("bottom"),vxe=jE("left"),GE=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return tK(r.filter(Po))}}},yxe=GE("top-left"),_xe=GE("top-right"),xxe=GE("bottom-right"),bxe=GE("bottom-left"),KE=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},wxe=KE("top"),Bxe=KE("right"),Cxe=KE("bottom"),Sxe=KE("left"),WE=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return sx(r)?r.number:0}}},Exe=WE("top"),Txe=WE("right"),Fxe=WE("bottom"),Ixe=WE("left"),Mxe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Pxe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},Dxe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(Ci).reduce(function(r,n){return r|kxe(n.value)},0)}},kxe=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},Rxe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},Lxe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},mS;(function(e){e.NORMAL="normal",e.STRICT="strict"})(mS||(mS={}));var Oxe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return mS.STRICT;case"normal":default:return mS.NORMAL}}},Uxe={name:"line-height",initialValue:"normal",prefix:!1,type:4},x3=function(e,t){return Ci(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:Po(e)?ki(e,t):t},zxe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:k2.parse(e,t)}},Qxe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},G4={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},qE=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Nxe=qE("top"),Vxe=qE("right"),Hxe=qE("bottom"),jxe=qE("left"),Gxe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(Ci).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Kxe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},XE=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Wxe=XE("top"),qxe=XE("right"),Xxe=XE("bottom"),Zxe=XE("left"),Yxe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Jxe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},$xe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&j4(t[0],"none")?[]:Ou(t).map(function(r){for(var n={color:IA.TRANSPARENT,offsetX:_a,offsetY:_a,blur:_a},i=0,c=0;c<r.length;c++){var d=r[c];Id(d)?(i===0?n.offsetX=d:i===1?n.offsetY=d:n.blur=d,i++):n.color=xd.parse(e,d)}return n})}},ebe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},tbe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=ibe[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},rbe=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},nbe=function(e){var t=e.filter(function(o){return o.type===17}).map(function(o){return o.number}),r=t[0],n=t[1];t[2],t[3];var i=t[4],c=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var d=t[12],y=t[13];return t[14],t[15],t.length===16?[r,n,i,c,d,y]:null},ibe={matrix:rbe,matrix3d:nbe},b3={type:16,number:50,flags:ax},obe=[b3,b3],abe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(Po);return r.length!==2?obe:[r[0],r[1]]}},sbe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},O_;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(O_||(O_={}));var lbe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return O_.BREAK_ALL;case"keep-all":return O_.KEEP_ALL;case"normal":default:return O_.NORMAL}}},cbe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(C0(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},gK={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},ube={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return C0(t)?t.number:1}},Abe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},hbe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(Ci).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},dbe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],n=[];return t.forEach(function(i){switch(i.type){case 20:case 0:r.push(i.value);break;case 17:r.push(i.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(i){return i.indexOf(" ")===-1?i:"'"+i+"'"})}},fbe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},pbe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(C0(t))return t.number;if(Ci(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},mbe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(Ci).map(function(r){return r.value})}},gbe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},No=function(e,t){return(e&t)!==0},vbe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},ybe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var n=[],i=t.filter(eK),c=0;c<i.length;c++){var d=i[c],y=i[c+1];if(d.type===20){var o=y&&C0(y)?y.number:1;n.push({counter:d.value,increment:o})}}return n}},_be={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],n=t.filter(eK),i=0;i<n.length;i++){var c=n[i],d=n[i+1];if(Ci(c)&&c.value!=="none"){var y=d&&C0(d)?d.number:0;r.push({counter:c.value,reset:y})}}return r}},xbe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(sx).map(function(r){return gK.parse(e,r)})}},bbe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var n=[],i=t.filter(q1e);if(i.length%2!==0)return null;for(var c=0;c<i.length;c+=2){var d=i[c].value,y=i[c+1].value;n.push({open:d,close:y})}return n}},w3=function(e,t,r){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?r?n.open:n.close:""},wbe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&j4(t[0],"none")?[]:Ou(t).map(function(r){for(var n={color:255,offsetX:_a,offsetY:_a,blur:_a,spread:_a,inset:!1},i=0,c=0;c<r.length;c++){var d=r[c];j4(d,"inset")?n.inset=!0:Id(d)?(i===0?n.offsetX=d:i===1?n.offsetY=d:i===2?n.blur=d:n.spread=d,i++):n.color=xd.parse(e,d)}return n})}},Bbe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],n=[];return t.filter(Ci).forEach(function(i){switch(i.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(i){n.indexOf(i)===-1&&n.push(i)}),n}},Cbe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Sbe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return sx(t)?t.number:0}},Ebe=function(){function e(t,r){var n,i;this.animationDuration=vr(t,xbe,r.animationDuration),this.backgroundClip=vr(t,Y1e,r.backgroundClip),this.backgroundColor=vr(t,J1e,r.backgroundColor),this.backgroundImage=vr(t,lxe,r.backgroundImage),this.backgroundOrigin=vr(t,cxe,r.backgroundOrigin),this.backgroundPosition=vr(t,uxe,r.backgroundPosition),this.backgroundRepeat=vr(t,Axe,r.backgroundRepeat),this.backgroundSize=vr(t,dxe,r.backgroundSize),this.borderTopColor=vr(t,pxe,r.borderTopColor),this.borderRightColor=vr(t,mxe,r.borderRightColor),this.borderBottomColor=vr(t,gxe,r.borderBottomColor),this.borderLeftColor=vr(t,vxe,r.borderLeftColor),this.borderTopLeftRadius=vr(t,yxe,r.borderTopLeftRadius),this.borderTopRightRadius=vr(t,_xe,r.borderTopRightRadius),this.borderBottomRightRadius=vr(t,xxe,r.borderBottomRightRadius),this.borderBottomLeftRadius=vr(t,bxe,r.borderBottomLeftRadius),this.borderTopStyle=vr(t,wxe,r.borderTopStyle),this.borderRightStyle=vr(t,Bxe,r.borderRightStyle),this.borderBottomStyle=vr(t,Cxe,r.borderBottomStyle),this.borderLeftStyle=vr(t,Sxe,r.borderLeftStyle),this.borderTopWidth=vr(t,Exe,r.borderTopWidth),this.borderRightWidth=vr(t,Txe,r.borderRightWidth),this.borderBottomWidth=vr(t,Fxe,r.borderBottomWidth),this.borderLeftWidth=vr(t,Ixe,r.borderLeftWidth),this.boxShadow=vr(t,wbe,r.boxShadow),this.color=vr(t,Mxe,r.color),this.direction=vr(t,Pxe,r.direction),this.display=vr(t,Dxe,r.display),this.float=vr(t,Rxe,r.cssFloat),this.fontFamily=vr(t,dbe,r.fontFamily),this.fontSize=vr(t,fbe,r.fontSize),this.fontStyle=vr(t,gbe,r.fontStyle),this.fontVariant=vr(t,mbe,r.fontVariant),this.fontWeight=vr(t,pbe,r.fontWeight),this.letterSpacing=vr(t,Lxe,r.letterSpacing),this.lineBreak=vr(t,Oxe,r.lineBreak),this.lineHeight=vr(t,Uxe,r.lineHeight),this.listStyleImage=vr(t,zxe,r.listStyleImage),this.listStylePosition=vr(t,Qxe,r.listStylePosition),this.listStyleType=vr(t,G4,r.listStyleType),this.marginTop=vr(t,Nxe,r.marginTop),this.marginRight=vr(t,Vxe,r.marginRight),this.marginBottom=vr(t,Hxe,r.marginBottom),this.marginLeft=vr(t,jxe,r.marginLeft),this.opacity=vr(t,ube,r.opacity);var c=vr(t,Gxe,r.overflow);this.overflowX=c[0],this.overflowY=c[c.length>1?1:0],this.overflowWrap=vr(t,Kxe,r.overflowWrap),this.paddingTop=vr(t,Wxe,r.paddingTop),this.paddingRight=vr(t,qxe,r.paddingRight),this.paddingBottom=vr(t,Xxe,r.paddingBottom),this.paddingLeft=vr(t,Zxe,r.paddingLeft),this.paintOrder=vr(t,Bbe,r.paintOrder),this.position=vr(t,Jxe,r.position),this.textAlign=vr(t,Yxe,r.textAlign),this.textDecorationColor=vr(t,Abe,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=vr(t,hbe,(i=r.textDecorationLine)!==null&&i!==void 0?i:r.textDecoration),this.textShadow=vr(t,$xe,r.textShadow),this.textTransform=vr(t,ebe,r.textTransform),this.transform=vr(t,tbe,r.transform),this.transformOrigin=vr(t,abe,r.transformOrigin),this.visibility=vr(t,sbe,r.visibility),this.webkitTextStrokeColor=vr(t,Cbe,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=vr(t,Sbe,r.webkitTextStrokeWidth),this.wordBreak=vr(t,lbe,r.wordBreak),this.zIndex=vr(t,cbe,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return bd(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return No(this.display,4)||No(this.display,33554432)||No(this.display,268435456)||No(this.display,536870912)||No(this.display,67108864)||No(this.display,134217728)},e}(),Tbe=function(){function e(t,r){this.content=vr(t,vbe,r.content),this.quotes=vr(t,bbe,r.quotes)}return e}(),B3=function(){function e(t,r){this.counterIncrement=vr(t,ybe,r.counterIncrement),this.counterReset=vr(t,_be,r.counterReset)}return e}(),vr=function(e,t,r){var n=new J9,i=r!==null&&typeof r<"u"?r.toString():t.initialValue;n.write(i);var c=new $9(n.read());switch(t.type){case 2:var d=c.parseComponentValue();return t.parse(e,Ci(d)?d.value:t.initialValue);case 0:return t.parse(e,c.parseComponentValue());case 1:return t.parse(e,c.parseComponentValues());case 4:return c.parseComponentValue();case 3:switch(t.format){case"angle":return VE.parse(e,c.parseComponentValue());case"color":return xd.parse(e,c.parseComponentValue());case"image":return k2.parse(e,c.parseComponentValue());case"length":var y=c.parseComponentValue();return Id(y)?y:_a;case"length-percentage":var o=c.parseComponentValue();return Po(o)?o:_a;case"time":return gK.parse(e,c.parseComponentValue())}break}},Fbe="data-html2canvas-debug",Ibe=function(e){var t=e.getAttribute(Fbe);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},K4=function(e,t){var r=Ibe(e);return r===1||t===r},Uu=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,K4(r,3))debugger;this.styles=new Ebe(t,window.getComputedStyle(r,null)),X4(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=QE(this.context,r),K4(r,4)&&(this.flags|=16)}return e}(),Mbe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",C3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i_=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var iB=0;iB<C3.length;iB++)i_[C3.charCodeAt(iB)]=iB;var Pbe=function(e){var t=e.length*.75,r=e.length,n,i=0,c,d,y,o;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var x=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),S=Array.isArray(x)?x:new Uint8Array(x);for(n=0;n<r;n+=4)c=i_[e.charCodeAt(n)],d=i_[e.charCodeAt(n+1)],y=i_[e.charCodeAt(n+2)],o=i_[e.charCodeAt(n+3)],S[i++]=c<<2|d>>4,S[i++]=(d&15)<<4|y>>2,S[i++]=(y&3)<<6|o&63;return x},Dbe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},kbe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},Ap=5,R2=11,BM=2,Rbe=R2-Ap,vK=65536>>Ap,Lbe=1<<Ap,CM=Lbe-1,Obe=1024>>Ap,Ube=vK+Obe,zbe=Ube,Qbe=32,Nbe=zbe+Qbe,Vbe=65536>>R2,Hbe=1<<Rbe,jbe=Hbe-1,S3=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},Gbe=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},Kbe=function(e,t){var r=Pbe(e),n=Array.isArray(r)?kbe(r):new Uint32Array(r),i=Array.isArray(r)?Dbe(r):new Uint16Array(r),c=24,d=S3(i,c/2,n[4]/2),y=n[5]===2?S3(i,(c+n[4])/2):Gbe(n,Math.ceil((c+n[4])/4));return new Wbe(n[0],n[1],n[2],n[3],d,y)},Wbe=function(){function e(t,r,n,i,c,d){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=i,this.index=c,this.data=d}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Ap],r=(r<<BM)+(t&CM),this.data[r];if(t<=65535)return r=this.index[vK+(t-55296>>Ap)],r=(r<<BM)+(t&CM),this.data[r];if(t<this.highStart)return r=Nbe-Vbe+(t>>R2),r=this.index[r],r+=t>>Ap&jbe,r=this.index[r],r=(r<<BM)+(t&CM),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),E3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qbe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var oB=0;oB<E3.length;oB++)qbe[E3.charCodeAt(oB)]=oB;var Xbe=1,SM=2,EM=3,T3=4,F3=5,Zbe=7,I3=8,TM=9,FM=10,M3=11,P3=12,D3=13,k3=14,IM=15,Ybe=function(e){for(var t=[],r=0,n=e.length;r<n;){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var c=e.charCodeAt(r++);(c&64512)===56320?t.push(((i&1023)<<10)+(c&1023)+65536):(t.push(i),r--)}else t.push(i)}return t},Jbe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],i=-1,c="";++i<r;){var d=e[i];d<=65535?n.push(d):(d-=65536,n.push((d>>10)+55296,d%1024+56320)),(i+1===r||n.length>16384)&&(c+=String.fromCharCode.apply(String,n),n.length=0)}return c},$be=Kbe(Mbe),Rl="×",MM="÷",ewe=function(e){return $be.get(e)},twe=function(e,t,r){var n=r-2,i=t[n],c=t[r-1],d=t[r];if(c===SM&&d===EM)return Rl;if(c===SM||c===EM||c===T3||d===SM||d===EM||d===T3)return MM;if(c===I3&&[I3,TM,M3,P3].indexOf(d)!==-1||(c===M3||c===TM)&&(d===TM||d===FM)||(c===P3||c===FM)&&d===FM||d===D3||d===F3||d===Zbe||c===Xbe)return Rl;if(c===D3&&d===k3){for(;i===F3;)i=t[--n];if(i===k3)return Rl}if(c===IM&&d===IM){for(var y=0;i===IM;)y++,i=t[--n];if(y%2===0)return Rl}return MM},rwe=function(e){var t=Ybe(e),r=t.length,n=0,i=0,c=t.map(ewe);return{next:function(){if(n>=r)return{done:!0,value:null};for(var d=Rl;n<r&&(d=twe(t,c,++n))===Rl;);if(d!==Rl||n===r){var y=Jbe.apply(null,t.slice(i,n));return i=n,{value:y,done:!1}}return{done:!0,value:null}}}},nwe=function(e){for(var t=rwe(e),r=[],n;!(n=t.next()).done;)n.value&&r.push(n.value.slice());return r},iwe=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=t+"px",n.style.display="block",e.body.appendChild(n),r.selectNode(n);var i=r.getBoundingClientRect(),c=Math.round(i.height);if(e.body.removeChild(n),c===t)return!0}}return!1},owe=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=t.firstChild,i=NE(n.data).map(function(o){return Bo(o)}),c=0,d={},y=i.every(function(o,x){r.setStart(n,c),r.setEnd(n,c+o.length);var S=r.getBoundingClientRect();c+=o.length;var k=S.x>d.x||S.y>d.y;return d=S,x===0?!0:k});return e.body.removeChild(t),y},awe=function(){return typeof new Image().crossOrigin<"u"},swe=function(){return typeof new XMLHttpRequest().responseType=="string"},lwe=function(e){var t=new Image,r=e.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},R3=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},cwe=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var i=new Image,c=t.toDataURL();i.src=c;var d=W4(r,r,0,0,i);return n.fillStyle="red",n.fillRect(0,0,r,r),L3(d).then(function(y){n.drawImage(y,0,0);var o=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var x=e.createElement("div");return x.style.backgroundImage="url("+c+")",x.style.height=r+"px",R3(o)?L3(W4(r,r,0,0,x)):Promise.reject(!1)}).then(function(y){return n.drawImage(y,0,0),R3(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},W4=function(e,t,r,n,i){var c="http://www.w3.org/2000/svg",d=document.createElementNS(c,"svg"),y=document.createElementNS(c,"foreignObject");return d.setAttributeNS(null,"width",e.toString()),d.setAttributeNS(null,"height",t.toString()),y.setAttributeNS(null,"width","100%"),y.setAttributeNS(null,"height","100%"),y.setAttributeNS(null,"x",r.toString()),y.setAttributeNS(null,"y",n.toString()),y.setAttributeNS(null,"externalResourcesRequired","true"),d.appendChild(y),y.appendChild(i),d},L3=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},ga={get SUPPORT_RANGE_BOUNDS(){var e=iwe(document);return Object.defineProperty(ga,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=ga.SUPPORT_RANGE_BOUNDS&&owe(document);return Object.defineProperty(ga,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=lwe(document);return Object.defineProperty(ga,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?cwe(document):Promise.resolve(!1);return Object.defineProperty(ga,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=awe();return Object.defineProperty(ga,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=swe();return Object.defineProperty(ga,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ga,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ga,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},U_=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),uwe=function(e,t,r,n){var i=dwe(t,r),c=[],d=0;return i.forEach(function(y){if(r.textDecorationLine.length||y.trim().length>0)if(ga.SUPPORT_RANGE_BOUNDS){var o=O3(n,d,y.length).getClientRects();if(o.length>1){var x=L2(y),S=0;x.forEach(function(O){c.push(new U_(O,VA.fromDOMRectList(e,O3(n,S+d,O.length).getClientRects()))),S+=O.length})}else c.push(new U_(y,VA.fromDOMRectList(e,o)))}else{var k=n.splitText(y.length);c.push(new U_(y,Awe(e,n))),n=k}else ga.SUPPORT_RANGE_BOUNDS||(n=n.splitText(y.length));d+=y.length}),c},Awe=function(e,t){var r=t.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var i=t.parentNode;if(i){i.replaceChild(n,t);var c=QE(e,n);return n.firstChild&&i.replaceChild(n.firstChild,n),c}}return VA.EMPTY},O3=function(e,t,r){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var i=n.createRange();return i.setStart(e,t),i.setEnd(e,t+r),i},L2=function(e){if(ga.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return nwe(e)},hwe=function(e,t){if(ga.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(n){return n.segment})}return pwe(e,t)},dwe=function(e,t){return t.letterSpacing!==0?L2(e):hwe(e,t)},fwe=[32,160,4961,65792,65793,4153,4241],pwe=function(e,t){for(var r=V_e(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),n=[],i,c=function(){if(i.value){var d=i.value.slice(),y=NE(d),o="";y.forEach(function(x){fwe.indexOf(x)===-1?o+=Bo(x):(o.length&&n.push(o),n.push(Bo(x)),o="")}),o.length&&n.push(o)}};!(i=r.next()).done;)c();return n},mwe=function(){function e(t,r,n){this.text=gwe(r.data,n.textTransform),this.textBounds=uwe(t,this.text,n,r)}return e}(),gwe=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(vwe,ywe);case 2:return e.toUpperCase();default:return e}},vwe=/(^|\s|:|-|\(|\))([a-z])/g,ywe=function(e,t,r){return e.length>0?t+r.toUpperCase():e},yK=function(e){Uc(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.src=n.currentSrc||n.src,i.intrinsicWidth=n.naturalWidth,i.intrinsicHeight=n.naturalHeight,i.context.cache.addImage(i.src),i}return t}(Uu),_K=function(e){Uc(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.canvas=n,i.intrinsicWidth=n.width,i.intrinsicHeight=n.height,i}return t}(Uu),xK=function(e){Uc(t,e);function t(r,n){var i=e.call(this,r,n)||this,c=new XMLSerializer,d=QE(r,n);return n.setAttribute("width",d.width+"px"),n.setAttribute("height",d.height+"px"),i.svg="data:image/svg+xml,"+encodeURIComponent(c.serializeToString(n)),i.intrinsicWidth=n.width.baseVal.value,i.intrinsicHeight=n.height.baseVal.value,i.context.cache.addImage(i.svg),i}return t}(Uu),bK=function(e){Uc(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.value=n.value,i}return t}(Uu),q4=function(e){Uc(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.start=n.start,i.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,i}return t}(Uu),_we=[{type:15,flags:0,unit:"px",number:3}],xwe=[{type:16,flags:0,number:50}],bwe=function(e){return e.width>e.height?new VA(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new VA(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},wwe=function(e){var t=e.type===Bwe?new Array(e.value.length+1).join("•"):e.value;return t.length===0?e.placeholder||"":t},gS="checkbox",vS="radio",Bwe="password",U3=707406591,O2=function(e){Uc(t,e);function t(r,n){var i=e.call(this,r,n)||this;switch(i.type=n.type.toLowerCase(),i.checked=n.checked,i.value=wwe(n),(i.type===gS||i.type===vS)&&(i.styles.backgroundColor=3739148031,i.styles.borderTopColor=i.styles.borderRightColor=i.styles.borderBottomColor=i.styles.borderLeftColor=2779096575,i.styles.borderTopWidth=i.styles.borderRightWidth=i.styles.borderBottomWidth=i.styles.borderLeftWidth=1,i.styles.borderTopStyle=i.styles.borderRightStyle=i.styles.borderBottomStyle=i.styles.borderLeftStyle=1,i.styles.backgroundClip=[0],i.styles.backgroundOrigin=[0],i.bounds=bwe(i.bounds)),i.type){case gS:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=_we;break;case vS:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=xwe;break}return i}return t}(Uu),wK=function(e){Uc(t,e);function t(r,n){var i=e.call(this,r,n)||this,c=n.options[n.selectedIndex||0];return i.value=c&&c.text||"",i}return t}(Uu),BK=function(e){Uc(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.value=n.value,i}return t}(Uu),CK=function(e){Uc(t,e);function t(r,n){var i=e.call(this,r,n)||this;i.src=n.src,i.width=parseInt(n.width,10)||0,i.height=parseInt(n.height,10)||0,i.backgroundColor=i.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){i.tree=EK(r,n.contentWindow.document.documentElement);var c=n.contentWindow.document.documentElement?L_(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):IA.TRANSPARENT,d=n.contentWindow.document.body?L_(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):IA.TRANSPARENT;i.backgroundColor=bd(c)?bd(d)?i.styles.backgroundColor:d:c}}catch{}return i}return t}(Uu),Cwe=["OL","UL","MENU"],oC=function(e,t,r,n){for(var i=t.firstChild,c=void 0;i;i=c)if(c=i.nextSibling,TK(i)&&i.data.trim().length>0)r.textNodes.push(new mwe(e,i,r.styles));else if(Mg(i))if(PK(i)&&i.assignedNodes)i.assignedNodes().forEach(function(y){return oC(e,y,r,n)});else{var d=SK(e,i);d.styles.isVisible()&&(Swe(i,d,n)?d.flags|=4:Ewe(d.styles)&&(d.flags|=2),Cwe.indexOf(i.tagName)!==-1&&(d.flags|=8),r.elements.push(d),i.slot,i.shadowRoot?oC(e,i.shadowRoot,d,n):!yS(i)&&!FK(i)&&!_S(i)&&oC(e,i,d,n))}},SK=function(e,t){return Z4(t)?new yK(e,t):IK(t)?new _K(e,t):FK(t)?new xK(e,t):Twe(t)?new bK(e,t):Fwe(t)?new q4(e,t):Iwe(t)?new O2(e,t):_S(t)?new wK(e,t):yS(t)?new BK(e,t):MK(t)?new CK(e,t):new Uu(e,t)},EK=function(e,t){var r=SK(e,t);return r.flags|=4,oC(e,t,r,r),r},Swe=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||U2(e)&&r.styles.isTransparent()},Ewe=function(e){return e.isPositioned()||e.isFloating()},TK=function(e){return e.nodeType===Node.TEXT_NODE},Mg=function(e){return e.nodeType===Node.ELEMENT_NODE},X4=function(e){return Mg(e)&&typeof e.style<"u"&&!aC(e)},aC=function(e){return typeof e.className=="object"},Twe=function(e){return e.tagName==="LI"},Fwe=function(e){return e.tagName==="OL"},Iwe=function(e){return e.tagName==="INPUT"},Mwe=function(e){return e.tagName==="HTML"},FK=function(e){return e.tagName==="svg"},U2=function(e){return e.tagName==="BODY"},IK=function(e){return e.tagName==="CANVAS"},z3=function(e){return e.tagName==="VIDEO"},Z4=function(e){return e.tagName==="IMG"},MK=function(e){return e.tagName==="IFRAME"},Q3=function(e){return e.tagName==="STYLE"},Pwe=function(e){return e.tagName==="SCRIPT"},yS=function(e){return e.tagName==="TEXTAREA"},_S=function(e){return e.tagName==="SELECT"},PK=function(e){return e.tagName==="SLOT"},N3=function(e){return e.tagName.indexOf("-")>0},Dwe=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(n){return r.counters[n].pop()})},e.prototype.parse=function(t){var r=this,n=t.counterIncrement,i=t.counterReset,c=!0;n!==null&&n.forEach(function(y){var o=r.counters[y.counter];o&&y.increment!==0&&(c=!1,o.length||o.push(1),o[Math.max(0,o.length-1)]+=y.increment)});var d=[];return c&&i.forEach(function(y){var o=r.counters[y.counter];d.push(y.counter),o||(o=r.counters[y.counter]=[]),o.push(y.reset)}),d},e}(),V3={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},H3={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},kwe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},Rwe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Zm=function(e,t,r,n,i,c){return e<t||e>r?M1(e,i,c.length>0):n.integers.reduce(function(d,y,o){for(;e>=y;)e-=y,d+=n.values[o];return d},"")+c},DK=function(e,t,r,n){var i="";do r||e--,i=n(e)+i,e/=t;while(e*t>=t);return i},xo=function(e,t,r,n,i){var c=r-t+1;return(e<0?"-":"")+(DK(Math.abs(e),c,n,function(d){return Bo(Math.floor(d%c)+t)})+i)},Uf=function(e,t,r){r===void 0&&(r=". ");var n=t.length;return DK(Math.abs(e),n,!1,function(i){return t[Math.floor(i%n)]})+r},og=1,Kh=2,Wh=4,o_=8,uA=function(e,t,r,n,i,c){if(e<-9999||e>9999)return M1(e,4,i.length>0);var d=Math.abs(e),y=i;if(d===0)return t[0]+y;for(var o=0;d>0&&o<=4;o++){var x=d%10;x===0&&No(c,og)&&y!==""?y=t[x]+y:x>1||x===1&&o===0||x===1&&o===1&&No(c,Kh)||x===1&&o===1&&No(c,Wh)&&e>100||x===1&&o>1&&No(c,o_)?y=t[x]+(o>0?r[o-1]:"")+y:x===1&&o>0&&(y=r[o-1]+y),d=Math.floor(d/10)}return(e<0?n:"")+y},j3="十百千萬",G3="拾佰仟萬",K3="マイナス",PM="마이너스",M1=function(e,t,r){var n=r?". ":"",i=r?"、":"",c=r?", ":"",d=r?" ":"";switch(t){case 0:return"•"+d;case 1:return"◦"+d;case 2:return"◾"+d;case 5:var y=xo(e,48,57,!0,n);return y.length<4?"0"+y:y;case 4:return Uf(e,"〇一二三四五六七八九",i);case 6:return Zm(e,1,3999,V3,3,n).toLowerCase();case 7:return Zm(e,1,3999,V3,3,n);case 8:return xo(e,945,969,!1,n);case 9:return xo(e,97,122,!1,n);case 10:return xo(e,65,90,!1,n);case 11:return xo(e,1632,1641,!0,n);case 12:case 49:return Zm(e,1,9999,H3,3,n);case 35:return Zm(e,1,9999,H3,3,n).toLowerCase();case 13:return xo(e,2534,2543,!0,n);case 14:case 30:return xo(e,6112,6121,!0,n);case 15:return Uf(e,"子丑寅卯辰巳午未申酉戌亥",i);case 16:return Uf(e,"甲乙丙丁戊己庚辛壬癸",i);case 17:case 48:return uA(e,"零一二三四五六七八九",j3,"負",i,Kh|Wh|o_);case 47:return uA(e,"零壹貳參肆伍陸柒捌玖",G3,"負",i,og|Kh|Wh|o_);case 42:return uA(e,"零一二三四五六七八九",j3,"负",i,Kh|Wh|o_);case 41:return uA(e,"零壹贰叁肆伍陆柒捌玖",G3,"负",i,og|Kh|Wh|o_);case 26:return uA(e,"〇一二三四五六七八九","十百千万",K3,i,0);case 25:return uA(e,"零壱弐参四伍六七八九","拾百千万",K3,i,og|Kh|Wh);case 31:return uA(e,"영일이삼사오육칠팔구","십백천만",PM,c,og|Kh|Wh);case 33:return uA(e,"零一二三四五六七八九","十百千萬",PM,c,0);case 32:return uA(e,"零壹貳參四五六七八九","拾百千",PM,c,og|Kh|Wh);case 18:return xo(e,2406,2415,!0,n);case 20:return Zm(e,1,19999,Rwe,3,n);case 21:return xo(e,2790,2799,!0,n);case 22:return xo(e,2662,2671,!0,n);case 22:return Zm(e,1,10999,kwe,3,n);case 23:return Uf(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Uf(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return xo(e,3302,3311,!0,n);case 28:return Uf(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",i);case 29:return Uf(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",i);case 34:return xo(e,3792,3801,!0,n);case 37:return xo(e,6160,6169,!0,n);case 38:return xo(e,4160,4169,!0,n);case 39:return xo(e,2918,2927,!0,n);case 40:return xo(e,1776,1785,!0,n);case 43:return xo(e,3046,3055,!0,n);case 44:return xo(e,3174,3183,!0,n);case 45:return xo(e,3664,3673,!0,n);case 46:return xo(e,3872,3881,!0,n);case 3:default:return xo(e,48,57,!0,n)}},kK="data-html2canvas-ignore",W3=function(){function e(t,r,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new Dwe,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var n=this,i=Lwe(t,r);if(!i.contentWindow)return Promise.reject("Unable to find iframe window");var c=t.defaultView.pageXOffset,d=t.defaultView.pageYOffset,y=i.contentWindow,o=y.document,x=zwe(i).then(function(){return as(n,void 0,void 0,function(){var S,k;return za(this,function(O){switch(O.label){case 0:return this.scrolledElements.forEach(Hwe),y&&(y.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(y.scrollY!==r.top||y.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(y.scrollX-r.left,y.scrollY-r.top,0,0))),S=this.options.onclone,k=this.clonedReferenceElement,typeof k>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:o.fonts&&o.fonts.ready?[4,o.fonts.ready]:[3,2];case 1:O.sent(),O.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Uwe(o)]:[3,4];case 3:O.sent(),O.label=4;case 4:return typeof S=="function"?[2,Promise.resolve().then(function(){return S(o,k)}).then(function(){return i})]:[2,i]}})})});return o.open(),o.write(Nwe(document.doctype)+"<html></html>"),Vwe(this.referenceElement.ownerDocument,c,d),o.replaceChild(o.adoptNode(this.documentElement),o.documentElement),o.close(),x},e.prototype.createElementClone=function(t){if(K4(t,2))debugger;if(IK(t))return this.createCanvasClone(t);if(z3(t))return this.createVideoClone(t);if(Q3(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return Z4(r)&&(Z4(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),N3(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return DM(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(c,d){return d&&typeof d.cssText=="string"?c+d.cssText:c},""),i=t.cloneNode(!1);return i.textContent=n,i}}catch(c){if(this.context.logger.error("Unable to access cssRules property",c),c.name!=="SecurityError")throw c}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var i=t.cloneNode(!1);try{i.width=t.width,i.height=t.height;var c=t.getContext("2d"),d=i.getContext("2d");if(d)if(!this.options.allowTaint&&c)d.putImageData(c.getImageData(0,0,t.width,t.height),0,0);else{var y=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(y){var o=y.getContextAttributes();(o==null?void 0:o.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}d.drawImage(t,0,0)}return i}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return i},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var i=t.ownerDocument.createElement("canvas");return i.width=t.offsetWidth,i.height=t.offsetHeight,i},e.prototype.appendChildNode=function(t,r,n){(!Mg(r)||!Pwe(r)&&!r.hasAttribute(kK)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Mg(r)||!Q3(r))&&t.appendChild(this.cloneNode(r,n))},e.prototype.cloneChildNodes=function(t,r,n){for(var i=this,c=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;c;c=c.nextSibling)if(Mg(c)&&PK(c)&&typeof c.assignedNodes=="function"){var d=c.assignedNodes();d.length&&d.forEach(function(y){return i.appendChildNode(r,y,n)})}else this.appendChildNode(r,c,n)},e.prototype.cloneNode=function(t,r){if(TK(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&Mg(t)&&(X4(t)||aC(t))){var i=this.createElementClone(t);i.style.transitionProperty="none";var c=n.getComputedStyle(t),d=n.getComputedStyle(t,":before"),y=n.getComputedStyle(t,":after");this.referenceElement===t&&X4(i)&&(this.clonedReferenceElement=i),U2(i)&&Kwe(i);var o=this.counters.parse(new B3(this.context,c)),x=this.resolvePseudoContent(t,i,d,z_.BEFORE);N3(t)&&(r=!0),z3(t)||this.cloneChildNodes(t,i,r),x&&i.insertBefore(x,i.firstChild);var S=this.resolvePseudoContent(t,i,y,z_.AFTER);return S&&i.appendChild(S),this.counters.pop(o),(c&&(this.options.copyStyles||aC(t))&&!MK(t)||r)&&DM(c,i),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([i,t.scrollLeft,t.scrollTop]),(yS(t)||_S(t))&&(yS(i)||_S(i))&&(i.value=t.value),i}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,n,i){var c=this;if(n){var d=n.content,y=r.ownerDocument;if(!(!y||!d||d==="none"||d==="-moz-alt-content"||n.display==="none")){this.counters.parse(new B3(this.context,n));var o=new Tbe(this.context,n),x=y.createElement("html2canvaspseudoelement");DM(n,x),o.content.forEach(function(k){if(k.type===0)x.appendChild(y.createTextNode(k.value));else if(k.type===22){var O=y.createElement("img");O.src=k.value,O.style.opacity="1",x.appendChild(O)}else if(k.type===18){if(k.name==="attr"){var Q=k.values.filter(Ci);Q.length&&x.appendChild(y.createTextNode(t.getAttribute(Q[0].value)||""))}else if(k.name==="counter"){var G=k.values.filter(m0),K=G[0],ee=G[1];if(K&&Ci(K)){var W=c.counters.getCounterValue(K.value),J=ee&&Ci(ee)?G4.parse(c.context,ee.value):3;x.appendChild(y.createTextNode(M1(W,J,!1)))}}else if(k.name==="counters"){var re=k.values.filter(m0),K=re[0],ue=re[1],ee=re[2];if(K&&Ci(K)){var ce=c.counters.getCounterValues(K.value),he=ee&&Ci(ee)?G4.parse(c.context,ee.value):3,xe=ue&&ue.type===0?ue.value:"",fe=ce.map(function(He){return M1(He,he,!1)}).join(xe);x.appendChild(y.createTextNode(fe))}}}else if(k.type===20)switch(k.value){case"open-quote":x.appendChild(y.createTextNode(w3(o.quotes,c.quoteDepth++,!0)));break;case"close-quote":x.appendChild(y.createTextNode(w3(o.quotes,--c.quoteDepth,!1)));break;default:x.appendChild(y.createTextNode(k.value))}}),x.className=Y4+" "+J4;var S=i===z_.BEFORE?" "+Y4:" "+J4;return aC(r)?r.className.baseValue+=S:r.className+=S,x}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),z_;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(z_||(z_={}));var Lwe=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(kK,"true"),e.body.appendChild(r),r},Owe=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},Uwe=function(e){return Promise.all([].slice.call(e.images,0).map(Owe))},zwe=function(e){return new Promise(function(t,r){var n=e.contentWindow;if(!n)return r("No window assigned for iframe");var i=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var c=setInterval(function(){i.body.childNodes.length>0&&i.readyState==="complete"&&(clearInterval(c),t(e))},50)}})},Qwe=["all","d","content"],DM=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e.item(r);Qwe.indexOf(n)===-1&&t.style.setProperty(n,e.getPropertyValue(n))}return t},Nwe=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},Vwe=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},Hwe=function(e){var t=e[0],r=e[1],n=e[2];t.scrollLeft=r,t.scrollTop=n},jwe=":before",Gwe=":after",Y4="___html2canvas___pseudoelement_before",J4="___html2canvas___pseudoelement_after",q3=`{
    content: "" !important;
    display: none !important;
}`,Kwe=function(e){Wwe(e,"."+Y4+jwe+q3+`
         .`+J4+Gwe+q3)},Wwe=function(e,t){var r=e.ownerDocument;if(r){var n=r.createElement("style");n.textContent=t,e.appendChild(n)}},RK=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),qwe=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(RM(t)||Jwe(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return as(this,void 0,void 0,function(){var r,n,i,c,d=this;return za(this,function(y){switch(y.label){case 0:return r=RK.isSameOrigin(t),n=!kM(t)&&this._options.useCORS===!0&&ga.SUPPORT_CORS_IMAGES&&!r,i=!kM(t)&&!r&&!RM(t)&&typeof this._options.proxy=="string"&&ga.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!kM(t)&&!RM(t)&&!i&&!n?[2]:(c=t,i?[4,this.proxy(c)]:[3,2]);case 1:c=y.sent(),y.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(o,x){var S=new Image;S.onload=function(){return o(S)},S.onerror=x,($we(c)||n)&&(S.crossOrigin="anonymous"),S.src=c,S.complete===!0&&setTimeout(function(){return o(S)},500),d._options.imageTimeout>0&&setTimeout(function(){return x("Timed out ("+d._options.imageTimeout+"ms) loading image")},d._options.imageTimeout)})];case 3:return[2,y.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var i=t.substring(0,256);return new Promise(function(c,d){var y=ga.SUPPORT_RESPONSE_TYPE?"blob":"text",o=new XMLHttpRequest;o.onload=function(){if(o.status===200)if(y==="text")c(o.response);else{var k=new FileReader;k.addEventListener("load",function(){return c(k.result)},!1),k.addEventListener("error",function(O){return d(O)},!1),k.readAsDataURL(o.response)}else d("Failed to proxy resource "+i+" with status code "+o.status)},o.onerror=d;var x=n.indexOf("?")>-1?"&":"?";if(o.open("GET",""+n+x+"url="+encodeURIComponent(t)+"&responseType="+y),y!=="text"&&o instanceof XMLHttpRequest&&(o.responseType=y),r._options.imageTimeout){var S=r._options.imageTimeout;o.timeout=S,o.ontimeout=function(){return d("Timed out ("+S+"ms) proxying "+i)}}o.send()})},e}(),Xwe=/^data:image\/svg\+xml/i,Zwe=/^data:image\/.*;base64,/i,Ywe=/^data:image\/.*/i,Jwe=function(e){return ga.SUPPORT_SVG_DRAWING||!eBe(e)},kM=function(e){return Ywe.test(e)},$we=function(e){return Zwe.test(e)},RM=function(e){return e.substr(0,4)==="blob"},eBe=function(e){return e.substr(-3).toLowerCase()==="svg"||Xwe.test(e)},Ar=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),Ym=function(e,t,r){return new Ar(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},aB=function(){function e(t,r,n,i){this.type=1,this.start=t,this.startControl=r,this.endControl=n,this.end=i}return e.prototype.subdivide=function(t,r){var n=Ym(this.start,this.startControl,t),i=Ym(this.startControl,this.endControl,t),c=Ym(this.endControl,this.end,t),d=Ym(n,i,t),y=Ym(i,c,t),o=Ym(d,y,t);return r?new e(this.start,n,d,o):new e(o,y,c,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Ul=function(e){return e.type===1},tBe=function(){function e(t){var r=t.styles,n=t.bounds,i=n_(r.borderTopLeftRadius,n.width,n.height),c=i[0],d=i[1],y=n_(r.borderTopRightRadius,n.width,n.height),o=y[0],x=y[1],S=n_(r.borderBottomRightRadius,n.width,n.height),k=S[0],O=S[1],Q=n_(r.borderBottomLeftRadius,n.width,n.height),G=Q[0],K=Q[1],ee=[];ee.push((c+o)/n.width),ee.push((G+k)/n.width),ee.push((d+K)/n.height),ee.push((x+O)/n.height);var W=Math.max.apply(Math,ee);W>1&&(c/=W,d/=W,o/=W,x/=W,k/=W,O/=W,G/=W,K/=W);var J=n.width-o,re=n.height-O,ue=n.width-k,ce=n.height-K,he=r.borderTopWidth,xe=r.borderRightWidth,fe=r.borderBottomWidth,Ue=r.borderLeftWidth,Ge=ki(r.paddingTop,t.bounds.width),He=ki(r.paddingRight,t.bounds.width),tt=ki(r.paddingBottom,t.bounds.width),pt=ki(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=c>0||d>0?Gi(n.left+Ue/3,n.top+he/3,c-Ue/3,d-he/3,fi.TOP_LEFT):new Ar(n.left+Ue/3,n.top+he/3),this.topRightBorderDoubleOuterBox=c>0||d>0?Gi(n.left+J,n.top+he/3,o-xe/3,x-he/3,fi.TOP_RIGHT):new Ar(n.left+n.width-xe/3,n.top+he/3),this.bottomRightBorderDoubleOuterBox=k>0||O>0?Gi(n.left+ue,n.top+re,k-xe/3,O-fe/3,fi.BOTTOM_RIGHT):new Ar(n.left+n.width-xe/3,n.top+n.height-fe/3),this.bottomLeftBorderDoubleOuterBox=G>0||K>0?Gi(n.left+Ue/3,n.top+ce,G-Ue/3,K-fe/3,fi.BOTTOM_LEFT):new Ar(n.left+Ue/3,n.top+n.height-fe/3),this.topLeftBorderDoubleInnerBox=c>0||d>0?Gi(n.left+Ue*2/3,n.top+he*2/3,c-Ue*2/3,d-he*2/3,fi.TOP_LEFT):new Ar(n.left+Ue*2/3,n.top+he*2/3),this.topRightBorderDoubleInnerBox=c>0||d>0?Gi(n.left+J,n.top+he*2/3,o-xe*2/3,x-he*2/3,fi.TOP_RIGHT):new Ar(n.left+n.width-xe*2/3,n.top+he*2/3),this.bottomRightBorderDoubleInnerBox=k>0||O>0?Gi(n.left+ue,n.top+re,k-xe*2/3,O-fe*2/3,fi.BOTTOM_RIGHT):new Ar(n.left+n.width-xe*2/3,n.top+n.height-fe*2/3),this.bottomLeftBorderDoubleInnerBox=G>0||K>0?Gi(n.left+Ue*2/3,n.top+ce,G-Ue*2/3,K-fe*2/3,fi.BOTTOM_LEFT):new Ar(n.left+Ue*2/3,n.top+n.height-fe*2/3),this.topLeftBorderStroke=c>0||d>0?Gi(n.left+Ue/2,n.top+he/2,c-Ue/2,d-he/2,fi.TOP_LEFT):new Ar(n.left+Ue/2,n.top+he/2),this.topRightBorderStroke=c>0||d>0?Gi(n.left+J,n.top+he/2,o-xe/2,x-he/2,fi.TOP_RIGHT):new Ar(n.left+n.width-xe/2,n.top+he/2),this.bottomRightBorderStroke=k>0||O>0?Gi(n.left+ue,n.top+re,k-xe/2,O-fe/2,fi.BOTTOM_RIGHT):new Ar(n.left+n.width-xe/2,n.top+n.height-fe/2),this.bottomLeftBorderStroke=G>0||K>0?Gi(n.left+Ue/2,n.top+ce,G-Ue/2,K-fe/2,fi.BOTTOM_LEFT):new Ar(n.left+Ue/2,n.top+n.height-fe/2),this.topLeftBorderBox=c>0||d>0?Gi(n.left,n.top,c,d,fi.TOP_LEFT):new Ar(n.left,n.top),this.topRightBorderBox=o>0||x>0?Gi(n.left+J,n.top,o,x,fi.TOP_RIGHT):new Ar(n.left+n.width,n.top),this.bottomRightBorderBox=k>0||O>0?Gi(n.left+ue,n.top+re,k,O,fi.BOTTOM_RIGHT):new Ar(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=G>0||K>0?Gi(n.left,n.top+ce,G,K,fi.BOTTOM_LEFT):new Ar(n.left,n.top+n.height),this.topLeftPaddingBox=c>0||d>0?Gi(n.left+Ue,n.top+he,Math.max(0,c-Ue),Math.max(0,d-he),fi.TOP_LEFT):new Ar(n.left+Ue,n.top+he),this.topRightPaddingBox=o>0||x>0?Gi(n.left+Math.min(J,n.width-xe),n.top+he,J>n.width+xe?0:Math.max(0,o-xe),Math.max(0,x-he),fi.TOP_RIGHT):new Ar(n.left+n.width-xe,n.top+he),this.bottomRightPaddingBox=k>0||O>0?Gi(n.left+Math.min(ue,n.width-Ue),n.top+Math.min(re,n.height-fe),Math.max(0,k-xe),Math.max(0,O-fe),fi.BOTTOM_RIGHT):new Ar(n.left+n.width-xe,n.top+n.height-fe),this.bottomLeftPaddingBox=G>0||K>0?Gi(n.left+Ue,n.top+Math.min(ce,n.height-fe),Math.max(0,G-Ue),Math.max(0,K-fe),fi.BOTTOM_LEFT):new Ar(n.left+Ue,n.top+n.height-fe),this.topLeftContentBox=c>0||d>0?Gi(n.left+Ue+pt,n.top+he+Ge,Math.max(0,c-(Ue+pt)),Math.max(0,d-(he+Ge)),fi.TOP_LEFT):new Ar(n.left+Ue+pt,n.top+he+Ge),this.topRightContentBox=o>0||x>0?Gi(n.left+Math.min(J,n.width+Ue+pt),n.top+he+Ge,J>n.width+Ue+pt?0:o-Ue+pt,x-(he+Ge),fi.TOP_RIGHT):new Ar(n.left+n.width-(xe+He),n.top+he+Ge),this.bottomRightContentBox=k>0||O>0?Gi(n.left+Math.min(ue,n.width-(Ue+pt)),n.top+Math.min(re,n.height+he+Ge),Math.max(0,k-(xe+He)),O-(fe+tt),fi.BOTTOM_RIGHT):new Ar(n.left+n.width-(xe+He),n.top+n.height-(fe+tt)),this.bottomLeftContentBox=G>0||K>0?Gi(n.left+Ue+pt,n.top+ce,Math.max(0,G-(Ue+pt)),K-(fe+tt),fi.BOTTOM_LEFT):new Ar(n.left+Ue+pt,n.top+n.height-(fe+tt))}return e}(),fi;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(fi||(fi={}));var Gi=function(e,t,r,n,i){var c=4*((Math.sqrt(2)-1)/3),d=r*c,y=n*c,o=e+r,x=t+n;switch(i){case fi.TOP_LEFT:return new aB(new Ar(e,x),new Ar(e,x-y),new Ar(o-d,t),new Ar(o,t));case fi.TOP_RIGHT:return new aB(new Ar(e,t),new Ar(e+d,t),new Ar(o,x-y),new Ar(o,x));case fi.BOTTOM_RIGHT:return new aB(new Ar(o,t),new Ar(o,t+y),new Ar(e+d,x),new Ar(e,x));case fi.BOTTOM_LEFT:default:return new aB(new Ar(o,x),new Ar(o-d,x),new Ar(e,t+y),new Ar(e,t))}},xS=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},rBe=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},bS=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},nBe=function(){function e(t,r,n){this.offsetX=t,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return e}(),sB=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),iBe=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),oBe=function(e){return e.type===0},LK=function(e){return e.type===1},aBe=function(e){return e.type===2},X3=function(e,t){return e.length===t.length?e.some(function(r,n){return r===t[n]}):!1},sBe=function(e,t,r,n,i){return e.map(function(c,d){switch(d){case 0:return c.add(t,r);case 1:return c.add(t+n,r);case 2:return c.add(t+n,r+i);case 3:return c.add(t,r+i)}return c})},OK=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),UK=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new tBe(this.container),this.container.styles.opacity<1&&this.effects.push(new iBe(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,i=this.container.bounds.top+this.container.styles.transformOrigin[1].number,c=this.container.styles.transform;this.effects.push(new nBe(n,i,c))}if(this.container.styles.overflowX!==0){var d=xS(this.curves),y=bS(this.curves);X3(d,y)?this.effects.push(new sB(d,6)):(this.effects.push(new sB(d,2)),this.effects.push(new sB(y,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,i=this.effects.slice(0);n;){var c=n.effects.filter(function(o){return!LK(o)});if(r||n.container.styles.position!==0||!n.parent){if(i.unshift.apply(i,c),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var d=xS(n.curves),y=bS(n.curves);X3(d,y)||i.unshift(new sB(y,6))}}else i.unshift.apply(i,c);n=n.parent}return i.filter(function(o){return No(o.target,t)})},e}(),$4=function(e,t,r,n){e.container.elements.forEach(function(i){var c=No(i.flags,4),d=No(i.flags,2),y=new UK(i,e);No(i.styles.display,2048)&&n.push(y);var o=No(i.flags,8)?[]:n;if(c||d){var x=c||i.styles.isPositioned()?r:t,S=new OK(y);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var k=i.styles.zIndex.order;if(k<0){var O=0;x.negativeZIndex.some(function(G,K){return k>G.element.container.styles.zIndex.order?(O=K,!1):O>0}),x.negativeZIndex.splice(O,0,S)}else if(k>0){var Q=0;x.positiveZIndex.some(function(G,K){return k>=G.element.container.styles.zIndex.order?(Q=K+1,!1):Q>0}),x.positiveZIndex.splice(Q,0,S)}else x.zeroOrAutoZIndexOrTransformedOrOpacity.push(S)}else i.styles.isFloating()?x.nonPositionedFloats.push(S):x.nonPositionedInlineLevel.push(S);$4(y,S,c?S:r,o)}else i.styles.isInlineLevel()?t.inlineLevel.push(y):t.nonInlineLevel.push(y),$4(y,t,r,o);No(i.flags,8)&&zK(i,o)})},zK=function(e,t){for(var r=e instanceof q4?e.start:1,n=e instanceof q4?e.reversed:!1,i=0;i<t.length;i++){var c=t[i];c.container instanceof bK&&typeof c.container.value=="number"&&c.container.value!==0&&(r=c.container.value),c.listValue=M1(r,c.container.styles.listStyleType,!0),r+=n?-1:1}},lBe=function(e){var t=new UK(e,null),r=new OK(t),n=[];return $4(t,r,r,n),zK(t.container,n),r},Z3=function(e,t){switch(t){case 0:return Hl(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Hl(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Hl(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return Hl(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},cBe=function(e,t){switch(t){case 0:return Hl(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Hl(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Hl(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return Hl(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},uBe=function(e,t){switch(t){case 0:return Hl(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Hl(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Hl(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return Hl(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},ABe=function(e,t){switch(t){case 0:return lB(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return lB(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return lB(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return lB(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},lB=function(e,t){var r=[];return Ul(e)?r.push(e.subdivide(.5,!1)):r.push(e),Ul(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},Hl=function(e,t,r,n){var i=[];return Ul(e)?i.push(e.subdivide(.5,!1)):i.push(e),Ul(r)?i.push(r.subdivide(.5,!0)):i.push(r),Ul(n)?i.push(n.subdivide(.5,!0).reverse()):i.push(n),Ul(t)?i.push(t.subdivide(.5,!1).reverse()):i.push(t),i},QK=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},wS=function(e){var t=e.styles,r=e.bounds,n=ki(t.paddingLeft,r.width),i=ki(t.paddingRight,r.width),c=ki(t.paddingTop,r.width),d=ki(t.paddingBottom,r.width);return r.add(n+t.borderLeftWidth,c+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+i),-(t.borderTopWidth+t.borderBottomWidth+c+d))},hBe=function(e,t){return e===0?t.bounds:e===2?wS(t):QK(t)},dBe=function(e,t){return e===0?t.bounds:e===2?wS(t):QK(t)},LM=function(e,t,r){var n=hBe(ag(e.styles.backgroundOrigin,t),e),i=dBe(ag(e.styles.backgroundClip,t),e),c=fBe(ag(e.styles.backgroundSize,t),r,n),d=c[0],y=c[1],o=n_(ag(e.styles.backgroundPosition,t),n.width-d,n.height-y),x=pBe(ag(e.styles.backgroundRepeat,t),o,c,n,i),S=Math.round(n.left+o[0]),k=Math.round(n.top+o[1]);return[x,S,k,d,y]},Jm=function(e){return Ci(e)&&e.value===Wg.AUTO},cB=function(e){return typeof e=="number"},fBe=function(e,t,r){var n=t[0],i=t[1],c=t[2],d=e[0],y=e[1];if(!d)return[0,0];if(Po(d)&&y&&Po(y))return[ki(d,r.width),ki(y,r.height)];var o=cB(c);if(Ci(d)&&(d.value===Wg.CONTAIN||d.value===Wg.COVER)){if(cB(c)){var x=r.width/r.height;return x<c!=(d.value===Wg.COVER)?[r.width,r.width/c]:[r.height*c,r.height]}return[r.width,r.height]}var S=cB(n),k=cB(i),O=S||k;if(Jm(d)&&(!y||Jm(y))){if(S&&k)return[n,i];if(!o&&!O)return[r.width,r.height];if(O&&o){var Q=S?n:i*c,G=k?i:n/c;return[Q,G]}var K=S?n:r.width,ee=k?i:r.height;return[K,ee]}if(o){var W=0,J=0;return Po(d)?W=ki(d,r.width):Po(y)&&(J=ki(y,r.height)),Jm(d)?W=J*c:(!y||Jm(y))&&(J=W/c),[W,J]}var re=null,ue=null;if(Po(d)?re=ki(d,r.width):y&&Po(y)&&(ue=ki(y,r.height)),re!==null&&(!y||Jm(y))&&(ue=S&&k?re/n*i:r.height),ue!==null&&Jm(d)&&(re=S&&k?ue/i*n:r.width),re!==null&&ue!==null)return[re,ue];throw new Error("Unable to calculate background-size for element")},ag=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},pBe=function(e,t,r,n,i){var c=t[0],d=t[1],y=r[0],o=r[1];switch(e){case 2:return[new Ar(Math.round(n.left),Math.round(n.top+d)),new Ar(Math.round(n.left+n.width),Math.round(n.top+d)),new Ar(Math.round(n.left+n.width),Math.round(o+n.top+d)),new Ar(Math.round(n.left),Math.round(o+n.top+d))];case 3:return[new Ar(Math.round(n.left+c),Math.round(n.top)),new Ar(Math.round(n.left+c+y),Math.round(n.top)),new Ar(Math.round(n.left+c+y),Math.round(n.height+n.top)),new Ar(Math.round(n.left+c),Math.round(n.height+n.top))];case 1:return[new Ar(Math.round(n.left+c),Math.round(n.top+d)),new Ar(Math.round(n.left+c+y),Math.round(n.top+d)),new Ar(Math.round(n.left+c+y),Math.round(n.top+d+o)),new Ar(Math.round(n.left+c),Math.round(n.top+d+o))];default:return[new Ar(Math.round(i.left),Math.round(i.top)),new Ar(Math.round(i.left+i.width),Math.round(i.top)),new Ar(Math.round(i.left+i.width),Math.round(i.height+i.top)),new Ar(Math.round(i.left),Math.round(i.height+i.top))]}},mBe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Y3="Hidden Text",gBe=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var n=this._document.createElement("div"),i=this._document.createElement("img"),c=this._document.createElement("span"),d=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",d.appendChild(n),i.src=mBe,i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",c.style.fontFamily=t,c.style.fontSize=r,c.style.margin="0",c.style.padding="0",c.appendChild(this._document.createTextNode(Y3)),n.appendChild(c),n.appendChild(i);var y=i.offsetTop-c.offsetTop+2;n.removeChild(c),n.appendChild(this._document.createTextNode(Y3)),n.style.lineHeight="normal",i.style.verticalAlign="super";var o=i.offsetTop-n.offsetTop+2;return d.removeChild(n),{baseline:y,middle:o}},e.prototype.getMetrics=function(t,r){var n=t+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(t,r)),this._data[n]},e}(),NK=function(){function e(t,r){this.context=t,this.options=r}return e}(),vBe=1e4,yBe=function(e){Uc(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i._activeEffects=[],i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),n.canvas||(i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px"),i.fontMetrics=new gBe(document),i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.ctx.textBaseline="bottom",i._activeEffects=[],i.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),i}return t.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(i){return n.applyEffect(i)})},t.prototype.applyEffect=function(r){this.ctx.save(),aBe(r)&&(this.ctx.globalAlpha=r.opacity),oBe(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),LK(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return as(this,void 0,void 0,function(){var n;return za(this,function(i){switch(i.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return as(this,void 0,void 0,function(){return za(this,function(n){switch(n.label){case 0:if(No(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,n,i){var c=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+i);else{var d=L2(r.text);d.reduce(function(y,o){return c.ctx.fillText(o,y,r.bounds.top+i),y+c.ctx.measureText(o).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(d){return d==="normal"||d==="small-caps"}).join(""),i=BBe(r.fontFamily).join(", "),c=sx(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,c,i].join(" "),i,c]},t.prototype.renderTextNode=function(r,n){return as(this,void 0,void 0,function(){var i,c,d,y,o,x,S,k,O=this;return za(this,function(Q){return i=this.createFontStyle(n),c=i[0],d=i[1],y=i[2],this.ctx.font=c,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",o=this.fontMetrics.getMetrics(d,y),x=o.baseline,S=o.middle,k=n.paintOrder,r.textBounds.forEach(function(G){k.forEach(function(K){switch(K){case 0:O.ctx.fillStyle=Jo(n.color),O.renderTextWithLetterSpacing(G,n.letterSpacing,x);var ee=n.textShadow;ee.length&&G.text.trim().length&&(ee.slice(0).reverse().forEach(function(W){O.ctx.shadowColor=Jo(W.color),O.ctx.shadowOffsetX=W.offsetX.number*O.options.scale,O.ctx.shadowOffsetY=W.offsetY.number*O.options.scale,O.ctx.shadowBlur=W.blur.number,O.renderTextWithLetterSpacing(G,n.letterSpacing,x)}),O.ctx.shadowColor="",O.ctx.shadowOffsetX=0,O.ctx.shadowOffsetY=0,O.ctx.shadowBlur=0),n.textDecorationLine.length&&(O.ctx.fillStyle=Jo(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(W){switch(W){case 1:O.ctx.fillRect(G.bounds.left,Math.round(G.bounds.top+x),G.bounds.width,1);break;case 2:O.ctx.fillRect(G.bounds.left,Math.round(G.bounds.top),G.bounds.width,1);break;case 3:O.ctx.fillRect(G.bounds.left,Math.ceil(G.bounds.top+S),G.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&G.text.trim().length&&(O.ctx.strokeStyle=Jo(n.webkitTextStrokeColor),O.ctx.lineWidth=n.webkitTextStrokeWidth,O.ctx.lineJoin=window.chrome?"miter":"round",O.ctx.strokeText(G.text,G.bounds.left,G.bounds.top+x)),O.ctx.strokeStyle="",O.ctx.lineWidth=0,O.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,n,i){if(i&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var c=wS(r),d=bS(n);this.path(d),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(i,0,0,r.intrinsicWidth,r.intrinsicHeight,c.left,c.top,c.width,c.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return as(this,void 0,void 0,function(){var n,i,c,d,y,o,J,J,x,S,k,O,ue,Q,G,ce,K,ee,W,J,re,ue,ce;return za(this,function(he){switch(he.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,i=r.curves,c=n.styles,d=0,y=n.textNodes,he.label=1;case 1:return d<y.length?(o=y[d],[4,this.renderTextNode(o,c)]):[3,4];case 2:he.sent(),he.label=3;case 3:return d++,[3,1];case 4:if(!(n instanceof yK))return[3,8];he.label=5;case 5:return he.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return J=he.sent(),this.renderReplacedElement(n,i,J),[3,8];case 7:return he.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof _K&&this.renderReplacedElement(n,i,n.canvas),!(n instanceof xK))return[3,12];he.label=9;case 9:return he.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return J=he.sent(),this.renderReplacedElement(n,i,J),[3,12];case 11:return he.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof CK&&n.tree?(x=new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,x.render(n.tree)]):[3,14];case 13:S=he.sent(),n.width&&n.height&&this.ctx.drawImage(S,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),he.label=14;case 14:if(n instanceof O2&&(k=Math.min(n.bounds.width,n.bounds.height),n.type===gS?n.checked&&(this.ctx.save(),this.path([new Ar(n.bounds.left+k*.39363,n.bounds.top+k*.79),new Ar(n.bounds.left+k*.16,n.bounds.top+k*.5549),new Ar(n.bounds.left+k*.27347,n.bounds.top+k*.44071),new Ar(n.bounds.left+k*.39694,n.bounds.top+k*.5649),new Ar(n.bounds.left+k*.72983,n.bounds.top+k*.23),new Ar(n.bounds.left+k*.84,n.bounds.top+k*.34085),new Ar(n.bounds.left+k*.39363,n.bounds.top+k*.79)]),this.ctx.fillStyle=Jo(U3),this.ctx.fill(),this.ctx.restore()):n.type===vS&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+k/2,n.bounds.top+k/2,k/4,0,Math.PI*2,!0),this.ctx.fillStyle=Jo(U3),this.ctx.fill(),this.ctx.restore())),_Be(n)&&n.value.length){switch(O=this.createFontStyle(c),ue=O[0],Q=O[1],G=this.fontMetrics.getMetrics(ue,Q).baseline,this.ctx.font=ue,this.ctx.fillStyle=Jo(c.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=bBe(n.styles.textAlign),ce=wS(n),K=0,n.styles.textAlign){case 1:K+=ce.width/2;break;case 2:K+=ce.width;break}ee=ce.add(K,0,0,-ce.height/2+1),this.ctx.save(),this.path([new Ar(ce.left,ce.top),new Ar(ce.left+ce.width,ce.top),new Ar(ce.left+ce.width,ce.top+ce.height),new Ar(ce.left,ce.top+ce.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new U_(n.value,ee),c.letterSpacing,G),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!No(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(W=n.styles.listStyleImage,W.type!==0)return[3,18];J=void 0,re=W.url,he.label=15;case 15:return he.trys.push([15,17,,18]),[4,this.context.cache.match(re)];case 16:return J=he.sent(),this.ctx.drawImage(J,n.bounds.left-(J.width+10),n.bounds.top),[3,18];case 17:return he.sent(),this.context.logger.error("Error loading list-style-image "+re),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(ue=this.createFontStyle(c)[0],this.ctx.font=ue,this.ctx.fillStyle=Jo(c.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",ce=new VA(n.bounds.left,n.bounds.top+ki(n.styles.paddingTop,n.bounds.width),n.bounds.width,x3(c.lineHeight,c.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new U_(r.listValue,ce),c.letterSpacing,x3(c.lineHeight,c.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),he.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return as(this,void 0,void 0,function(){var n,i,W,c,d,W,y,o,W,x,S,W,k,O,W,Q,G,W,K,ee,W;return za(this,function(J){switch(J.label){case 0:if(No(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:J.sent(),n=0,i=r.negativeZIndex,J.label=2;case 2:return n<i.length?(W=i[n],[4,this.renderStack(W)]):[3,5];case 3:J.sent(),J.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:J.sent(),c=0,d=r.nonInlineLevel,J.label=7;case 7:return c<d.length?(W=d[c],[4,this.renderNode(W)]):[3,10];case 8:J.sent(),J.label=9;case 9:return c++,[3,7];case 10:y=0,o=r.nonPositionedFloats,J.label=11;case 11:return y<o.length?(W=o[y],[4,this.renderStack(W)]):[3,14];case 12:J.sent(),J.label=13;case 13:return y++,[3,11];case 14:x=0,S=r.nonPositionedInlineLevel,J.label=15;case 15:return x<S.length?(W=S[x],[4,this.renderStack(W)]):[3,18];case 16:J.sent(),J.label=17;case 17:return x++,[3,15];case 18:k=0,O=r.inlineLevel,J.label=19;case 19:return k<O.length?(W=O[k],[4,this.renderNode(W)]):[3,22];case 20:J.sent(),J.label=21;case 21:return k++,[3,19];case 22:Q=0,G=r.zeroOrAutoZIndexOrTransformedOrOpacity,J.label=23;case 23:return Q<G.length?(W=G[Q],[4,this.renderStack(W)]):[3,26];case 24:J.sent(),J.label=25;case 25:return Q++,[3,23];case 26:K=0,ee=r.positiveZIndex,J.label=27;case 27:return K<ee.length?(W=ee[K],[4,this.renderStack(W)]):[3,30];case 28:J.sent(),J.label=29;case 29:return K++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var n=this;r.forEach(function(i,c){var d=Ul(i)?i.start:i;c===0?n.ctx.moveTo(d.x,d.y):n.ctx.lineTo(d.x,d.y),Ul(i)&&n.ctx.bezierCurveTo(i.startControl.x,i.startControl.y,i.endControl.x,i.endControl.y,i.end.x,i.end.y)})},t.prototype.renderRepeat=function(r,n,i,c){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(i,c),this.ctx.fill(),this.ctx.translate(-i,-c)},t.prototype.resizeImage=function(r,n,i){var c;if(r.width===n&&r.height===i)return r;var d=(c=this.canvas.ownerDocument)!==null&&c!==void 0?c:document,y=d.createElement("canvas");y.width=Math.max(1,n),y.height=Math.max(1,i);var o=y.getContext("2d");return o.drawImage(r,0,0,r.width,r.height,0,0,n,i),y},t.prototype.renderBackgroundImage=function(r){return as(this,void 0,void 0,function(){var n,i,c,d,y,o;return za(this,function(x){switch(x.label){case 0:n=r.styles.backgroundImage.length-1,i=function(S){var k,O,Q,Ge,ot,Gt,pt,gt,fe,G,Ge,ot,Gt,pt,gt,K,ee,W,J,re,ue,ce,he,xe,fe,Ue,Ge,He,tt,pt,gt,Et,ot,Gt,Pt,Xt,It,dr,ar,tr,Rt,Or;return za(this,function(Cr){switch(Cr.label){case 0:if(S.type!==0)return[3,5];k=void 0,O=S.url,Cr.label=1;case 1:return Cr.trys.push([1,3,,4]),[4,c.context.cache.match(O)];case 2:return k=Cr.sent(),[3,4];case 3:return Cr.sent(),c.context.logger.error("Error loading background-image "+O),[3,4];case 4:return k&&(Q=LM(r,n,[k.width,k.height,k.width/k.height]),Ge=Q[0],ot=Q[1],Gt=Q[2],pt=Q[3],gt=Q[4],fe=c.ctx.createPattern(c.resizeImage(k,pt,gt),"repeat"),c.renderRepeat(Ge,fe,ot,Gt)),[3,6];case 5:oxe(S)?(G=LM(r,n,[null,null,null]),Ge=G[0],ot=G[1],Gt=G[2],pt=G[3],gt=G[4],K=exe(S.angle,pt,gt),ee=K[0],W=K[1],J=K[2],re=K[3],ue=K[4],ce=document.createElement("canvas"),ce.width=pt,ce.height=gt,he=ce.getContext("2d"),xe=he.createLinearGradient(W,re,J,ue),y3(S.stops,ee).forEach(function(qr){return xe.addColorStop(qr.stop,Jo(qr.color))}),he.fillStyle=xe,he.fillRect(0,0,pt,gt),pt>0&&gt>0&&(fe=c.ctx.createPattern(ce,"repeat"),c.renderRepeat(Ge,fe,ot,Gt))):axe(S)&&(Ue=LM(r,n,[null,null,null]),Ge=Ue[0],He=Ue[1],tt=Ue[2],pt=Ue[3],gt=Ue[4],Et=S.position.length===0?[D2]:S.position,ot=ki(Et[0],pt),Gt=ki(Et[Et.length-1],gt),Pt=txe(S,ot,Gt,pt,gt),Xt=Pt[0],It=Pt[1],Xt>0&&It>0&&(dr=c.ctx.createRadialGradient(He+ot,tt+Gt,0,He+ot,tt+Gt,Xt),y3(S.stops,Xt*2).forEach(function(qr){return dr.addColorStop(qr.stop,Jo(qr.color))}),c.path(Ge),c.ctx.fillStyle=dr,Xt!==It?(ar=r.bounds.left+.5*r.bounds.width,tr=r.bounds.top+.5*r.bounds.height,Rt=It/Xt,Or=1/Rt,c.ctx.save(),c.ctx.translate(ar,tr),c.ctx.transform(1,0,0,Rt,0,0),c.ctx.translate(-ar,-tr),c.ctx.fillRect(He,Or*(tt-tr)+tr,pt,gt*Or),c.ctx.restore()):c.ctx.fill())),Cr.label=6;case 6:return n--,[2]}})},c=this,d=0,y=r.styles.backgroundImage.slice(0).reverse(),x.label=1;case 1:return d<y.length?(o=y[d],[5,i(o)]):[3,4];case 2:x.sent(),x.label=3;case 3:return d++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,n,i){return as(this,void 0,void 0,function(){return za(this,function(c){return this.path(Z3(i,n)),this.ctx.fillStyle=Jo(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,n,i,c){return as(this,void 0,void 0,function(){var d,y;return za(this,function(o){switch(o.label){case 0:return n<3?[4,this.renderSolidBorder(r,i,c)]:[3,2];case 1:return o.sent(),[2];case 2:return d=cBe(c,i),this.path(d),this.ctx.fillStyle=Jo(r),this.ctx.fill(),y=uBe(c,i),this.path(y),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return as(this,void 0,void 0,function(){var n,i,c,d,y,o,x,S,k=this;return za(this,function(O){switch(O.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,i=!bd(n.backgroundColor)||n.backgroundImage.length,c=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],d=xBe(ag(n.backgroundClip,0),r.curves),i||n.boxShadow.length?(this.ctx.save(),this.path(d),this.ctx.clip(),bd(n.backgroundColor)||(this.ctx.fillStyle=Jo(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:O.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(Q){k.ctx.save();var G=xS(r.curves),K=Q.inset?0:vBe,ee=sBe(G,-K+(Q.inset?1:-1)*Q.spread.number,(Q.inset?1:-1)*Q.spread.number,Q.spread.number*(Q.inset?-2:2),Q.spread.number*(Q.inset?-2:2));Q.inset?(k.path(G),k.ctx.clip(),k.mask(ee)):(k.mask(G),k.ctx.clip(),k.path(ee)),k.ctx.shadowOffsetX=Q.offsetX.number+K,k.ctx.shadowOffsetY=Q.offsetY.number,k.ctx.shadowColor=Jo(Q.color),k.ctx.shadowBlur=Q.blur.number,k.ctx.fillStyle=Q.inset?Jo(Q.color):"rgba(0,0,0,1)",k.ctx.fill(),k.ctx.restore()}),O.label=2;case 2:y=0,o=0,x=c,O.label=3;case 3:return o<x.length?(S=x[o],S.style!==0&&!bd(S.color)&&S.width>0?S.style!==2?[3,5]:[4,this.renderDashedDottedBorder(S.color,S.width,y,r.curves,2)]:[3,11]):[3,13];case 4:return O.sent(),[3,11];case 5:return S.style!==3?[3,7]:[4,this.renderDashedDottedBorder(S.color,S.width,y,r.curves,3)];case 6:return O.sent(),[3,11];case 7:return S.style!==4?[3,9]:[4,this.renderDoubleBorder(S.color,S.width,y,r.curves)];case 8:return O.sent(),[3,11];case 9:return[4,this.renderSolidBorder(S.color,y,r.curves)];case 10:O.sent(),O.label=11;case 11:y++,O.label=12;case 12:return o++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,n,i,c,d){return as(this,void 0,void 0,function(){var y,o,x,S,k,O,Q,G,K,ee,W,J,re,ue,ce,he,ce,he;return za(this,function(xe){return this.ctx.save(),y=ABe(c,i),o=Z3(c,i),d===2&&(this.path(o),this.ctx.clip()),Ul(o[0])?(x=o[0].start.x,S=o[0].start.y):(x=o[0].x,S=o[0].y),Ul(o[1])?(k=o[1].end.x,O=o[1].end.y):(k=o[1].x,O=o[1].y),i===0||i===2?Q=Math.abs(x-k):Q=Math.abs(S-O),this.ctx.beginPath(),d===3?this.formatPath(y):this.formatPath(o.slice(0,2)),G=n<3?n*3:n*2,K=n<3?n*2:n,d===3&&(G=n,K=n),ee=!0,Q<=G*2?ee=!1:Q<=G*2+K?(W=Q/(2*G+K),G*=W,K*=W):(J=Math.floor((Q+K)/(G+K)),re=(Q-J*G)/(J-1),ue=(Q-(J+1)*G)/J,K=ue<=0||Math.abs(K-re)<Math.abs(K-ue)?re:ue),ee&&(d===3?this.ctx.setLineDash([0,G+K]):this.ctx.setLineDash([G,K])),d===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Jo(r),this.ctx.stroke(),this.ctx.setLineDash([]),d===2&&(Ul(o[0])&&(ce=o[3],he=o[0],this.ctx.beginPath(),this.formatPath([new Ar(ce.end.x,ce.end.y),new Ar(he.start.x,he.start.y)]),this.ctx.stroke()),Ul(o[1])&&(ce=o[1],he=o[2],this.ctx.beginPath(),this.formatPath([new Ar(ce.end.x,ce.end.y),new Ar(he.start.x,he.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return as(this,void 0,void 0,function(){var n;return za(this,function(i){switch(i.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Jo(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=lBe(r),[4,this.renderStack(n)];case 1:return i.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(NK),_Be=function(e){return e instanceof BK||e instanceof wK?!0:e instanceof O2&&e.type!==vS&&e.type!==gS},xBe=function(e,t){switch(e){case 0:return xS(t);case 2:return rBe(t);case 1:default:return bS(t)}},bBe=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},wBe=["-apple-system","system-ui"],BBe=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return wBe.indexOf(t)===-1}):e},CBe=function(e){Uc(t,e);function t(r,n){var i=e.call(this,r,n)||this;return i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),i.options=n,i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px",i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),i}return t.prototype.render=function(r){return as(this,void 0,void 0,function(){var n,i;return za(this,function(c){switch(c.label){case 0:return n=W4(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,SBe(n)];case 1:return i=c.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Jo(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(NK),SBe=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},EBe=function(){function e(t){var r=t.id,n=t.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Nw([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Nw([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Nw([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Nw([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),TBe=function(){function e(t,r){var n;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new EBe({id:this.instanceName,enabled:t.logging}),this.cache=(n=t.cache)!==null&&n!==void 0?n:new qwe(this,t)}return e.instanceCount=1,e}(),J3=function(e,t){return t===void 0&&(t={}),FBe(e,t)};typeof window<"u"&&RK.setContext(window);var FBe=function(e,t){return as(void 0,void 0,void 0,function(){var r,n,i,c,d,y,o,x,S,k,O,Q,G,K,ee,W,J,re,ue,ce,xe,he,xe,fe,Ue,Ge,He,tt,pt,gt,Et,ot,Gt,Pt,Xt,It,dr,ar,tr,Rt;return za(this,function(Or){switch(Or.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return i={allowTaint:(fe=t.allowTaint)!==null&&fe!==void 0?fe:!1,imageTimeout:(Ue=t.imageTimeout)!==null&&Ue!==void 0?Ue:15e3,proxy:t.proxy,useCORS:(Ge=t.useCORS)!==null&&Ge!==void 0?Ge:!1},c=P4({logging:(He=t.logging)!==null&&He!==void 0?He:!0,cache:t.cache},i),d={windowWidth:(tt=t.windowWidth)!==null&&tt!==void 0?tt:n.innerWidth,windowHeight:(pt=t.windowHeight)!==null&&pt!==void 0?pt:n.innerHeight,scrollX:(gt=t.scrollX)!==null&&gt!==void 0?gt:n.pageXOffset,scrollY:(Et=t.scrollY)!==null&&Et!==void 0?Et:n.pageYOffset},y=new VA(d.scrollX,d.scrollY,d.windowWidth,d.windowHeight),o=new TBe(c,y),x=(ot=t.foreignObjectRendering)!==null&&ot!==void 0?ot:!1,S={allowTaint:(Gt=t.allowTaint)!==null&&Gt!==void 0?Gt:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:x,copyStyles:x},o.logger.debug("Starting document clone with size "+y.width+"x"+y.height+" scrolled to "+-y.left+","+-y.top),k=new W3(o,e,S),O=k.clonedReferenceElement,O?[4,k.toIFrame(r,y)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return Q=Or.sent(),G=U2(O)||Mwe(O)?s_e(O.ownerDocument):QE(o,O),K=G.width,ee=G.height,W=G.left,J=G.top,re=IBe(o,O,t.backgroundColor),ue={canvas:t.canvas,backgroundColor:re,scale:(Xt=(Pt=t.scale)!==null&&Pt!==void 0?Pt:n.devicePixelRatio)!==null&&Xt!==void 0?Xt:1,x:((It=t.x)!==null&&It!==void 0?It:0)+W,y:((dr=t.y)!==null&&dr!==void 0?dr:0)+J,width:(ar=t.width)!==null&&ar!==void 0?ar:Math.ceil(K),height:(tr=t.height)!==null&&tr!==void 0?tr:Math.ceil(ee)},x?(o.logger.debug("Document cloned, using foreign object rendering"),xe=new CBe(o,ue),[4,xe.render(O)]):[3,3];case 2:return ce=Or.sent(),[3,5];case 3:return o.logger.debug("Document cloned, element located at "+W+","+J+" with size "+K+"x"+ee+" using computed rendering"),o.logger.debug("Starting DOM parsing"),he=EK(o,O),re===he.styles.backgroundColor&&(he.styles.backgroundColor=IA.TRANSPARENT),o.logger.debug("Starting renderer for element at "+ue.x+","+ue.y+" with size "+ue.width+"x"+ue.height),xe=new yBe(o,ue),[4,xe.render(he)];case 4:ce=Or.sent(),Or.label=5;case 5:return(!((Rt=t.removeContainer)!==null&&Rt!==void 0)||Rt)&&(W3.destroy(Q)||o.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),o.logger.debug("Finished rendering"),[2,ce]}})})},IBe=function(e,t,r){var n=t.ownerDocument,i=n.documentElement?L_(e,getComputedStyle(n.documentElement).backgroundColor):IA.TRANSPARENT,c=n.body?L_(e,getComputedStyle(n.body).backgroundColor):IA.TRANSPARENT,d=typeof r=="string"?L_(e,r):r===null?IA.TRANSPARENT:4294967295;return t===n.documentElement?bd(i)?bd(c)?d:c:i:d};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var eD=function(e,t){return eD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},eD(e,t)};function er(e,t){eD(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var ln=function(){return ln=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(t[c]=r[c])}return t},ln.apply(this,arguments)};function MBe(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function yn(e,t,r,n){function i(c){return c instanceof r?c:new r(function(d){d(c)})}return new(r||(r=Promise))(function(c,d){function y(S){try{x(n.next(S))}catch(k){d(k)}}function o(S){try{x(n.throw(S))}catch(k){d(k)}}function x(S){S.done?c(S.value):i(S.value).then(y,o)}x((n=n.apply(e,[])).next())})}function _n(e,t){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},n,i,c,d;return d={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function y(x){return function(S){return o([x,S])}}function o(x){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(c=x[0]&2?i.return:x[0]?i.throw||((c=i.return)&&c.call(i),0):i.next)&&!(c=c.call(i,x[1])).done)return c;switch(i=0,c&&(x=[x[0]&2,c.value]),x[0]){case 0:case 1:c=x;break;case 4:return r.label++,{value:x[1],done:!1};case 5:r.label++,i=x[1],x=[0];continue;case 7:x=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(x[0]===6||x[0]===2)){r=0;continue}if(x[0]===3&&(!c||x[1]>c[0]&&x[1]<c[3])){r.label=x[1];break}if(x[0]===6&&r.label<c[1]){r.label=c[1],c=x;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(x);break}c[2]&&r.ops.pop(),r.trys.pop();continue}x=t.call(e,r)}catch(S){x=[6,S],i=0}finally{n=c=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}}function jn(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var c=arguments[t],d=0,y=c.length;d<y;d++,i++)n[i]=c[d];return n}var Pg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a_=new Uint8Array(256);for(var uB=0;uB<Pg.length;uB++)a_[Pg.charCodeAt(uB)]=uB;var PBe=function(e){for(var t="",r=e.length,n=0;n<r;n+=3)t+=Pg[e[n]>>2],t+=Pg[(e[n]&3)<<4|e[n+1]>>4],t+=Pg[(e[n+1]&15)<<2|e[n+2]>>6],t+=Pg[e[n+2]&63];return r%3===2?t=t.substring(0,t.length-1)+"=":r%3===1&&(t=t.substring(0,t.length-2)+"=="),t},$3=function(e){var t=e.length*.75,r=e.length,n,i=0,c,d,y,o;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var x=new Uint8Array(t);for(n=0;n<r;n+=4)c=a_[e.charCodeAt(n)],d=a_[e.charCodeAt(n+1)],y=a_[e.charCodeAt(n+2)],o=a_[e.charCodeAt(n+3)],x[i++]=c<<2|d>>4,x[i++]=(d&15)<<4|y>>2,x[i++]=(y&3)<<6|o&63;return x},DBe=/^(data)?:?([\w\/\+]+)?;?(charset=[\w-]+|base64)?.*,/i,kBe=function(e){var t=e.trim(),r=t.substring(0,100),n=r.match(DBe);if(!n)return $3(t);var i=n[0],c=t.substring(i.length);return $3(c)},sn=function(e){return e.charCodeAt(0)},RBe=function(e){return e.codePointAt(0)},lx=function(e,t){return Fc(e.toString(16),t,"0").toUpperCase()},ZE=function(e){return lx(e,2)},MA=function(e){return String.fromCharCode(e)},LBe=function(e){return MA(parseInt(e,16))},Fc=function(e,t,r){for(var n="",i=0,c=t-e.length;i<c;i++)n+=r;return n+e},xa=function(e,t,r){for(var n=e.length,i=0;i<n;i++)t[r++]=e.charCodeAt(i);return n},OBe=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},cx=function(e){return e.replace(/\t|\u0085|\u2028|\u2029/g,"    ").replace(/[\b\v]/g,"")},UBe=["\\n","\\f","\\r","\\u000B"],VK=function(e){return/^[\n\f\r\u000B]$/.test(e)},HK=function(e){return e.split(/[\n\f\r\u000B]/)},jK=function(e){return e.replace(/[\n\f\r\u000B]/g," ")},GK=function(e,t){var r=e.charCodeAt(t),n,i=t+1,c=1;return r>=55296&&r<=56319&&e.length>i&&(n=e.charCodeAt(i),n>=56320&&n<=57343&&(c=2)),[e.slice(t,t+c),c]},zBe=function(e){for(var t=[],r=0,n=e.length;r<n;){var i=GK(e,r),c=i[0],d=i[1];t.push(c),r+=d}return t},QBe=function(e){for(var t=UBe.join("|"),r=["$"],n=0,i=e.length;n<i;n++){var c=e[n];if(VK(c))throw new TypeError("`wordBreak` must not include "+t);r.push(c===""?".":OBe(c))}var d=r.join("|");return new RegExp("("+t+")|((.*?)("+d+"))","gm")},NBe=function(e,t,r,n){for(var i=QBe(t),c=cx(e).match(i),d="",y=0,o=[],x=function(){d!==""&&o.push(d),d="",y=0},S=0,k=c.length;S<k;S++){var O=c[S];if(VK(O))x();else{var Q=n(O);y+Q>r&&x(),d+=O,y+=Q}}return x(),o},VBe=/^D:(\d\d\d\d)(\d\d)?(\d\d)?(\d\d)?(\d\d)?(\d\d)?([+\-Z])?(\d\d)?'?(\d\d)?'?$/,KK=function(e){var t=e.match(VBe);if(t){var r=t[1],n=t[2],i=n===void 0?"01":n,c=t[3],d=c===void 0?"01":c,y=t[4],o=y===void 0?"00":y,x=t[5],S=x===void 0?"00":x,k=t[6],O=k===void 0?"00":k,Q=t[7],G=Q===void 0?"Z":Q,K=t[8],ee=K===void 0?"00":K,W=t[9],J=W===void 0?"00":W,re=G==="Z"?"Z":""+G+ee+":"+J,ue=new Date(r+"-"+i+"-"+d+"T"+o+":"+S+":"+O+re);return ue}},z2=function(e,t){for(var r,n=0,i;n<e.length;){var c=e.substring(n).match(t);if(!c)return{match:i,pos:n};i=c,n+=((r=c.index)!==null&&r!==void 0?r:0)+c[0].length}return{match:i,pos:n}},BS=function(e){return e[e.length-1]},tD=function(e){if(e instanceof Uint8Array)return e;for(var t=e.length,r=new Uint8Array(t),n=0;n<t;n++)r[n]=e.charCodeAt(n);return r},HBe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e.length,n=[],i=0;i<r;i++){var c=e[i];n[i]=c instanceof Uint8Array?c:tD(c)}for(var d=0,i=0;i<r;i++)d+=e[i].length;for(var y=new Uint8Array(d),o=0,x=0;x<r;x++)for(var S=n[x],k=0,O=S.length;k<O;k++)y[o++]=S[k];return y},jBe=function(e){for(var t=0,r=0,n=e.length;r<n;r++)t+=e[r].length;for(var i=new Uint8Array(t),c=0,r=0,n=e.length;r<n;r++){var d=e[r];i.set(d,c),c+=d.length}return i},WK=function(e){for(var t="",r=0,n=e.length;r<n;r++)t+=MA(e[r]);return t},GBe=function(e,t){return e.id-t.id},KBe=function(e,t){for(var r=[],n=0,i=e.length;n<i;n++){var c=e[n],d=e[n-1];(n===0||t(c)!==t(d))&&r.push(c)}return r},$m=function(e){for(var t=e.length,r=0,n=Math.floor(t/2);r<n;r++){var i=r,c=t-r-1,d=e[r];e[i]=e[c],e[c]=d}return e},WBe=function(e){for(var t=0,r=0,n=e.length;r<n;r++)t+=e[r];return t},qBe=function(e,t){for(var r=new Array(t-e),n=0,i=r.length;n<i;n++)r[n]=e+n;return r},XBe=function(e,t){for(var r=new Array(t.length),n=0,i=t.length;n<i;n++)r[n]=e[t[n]];return r},ZBe=function(e){return e instanceof Uint8Array||e instanceof ArrayBuffer||typeof e=="string"},Py=function(e){if(typeof e=="string")return kBe(e);if(e instanceof ArrayBuffer)return new Uint8Array(e);if(e instanceof Uint8Array)return e;throw new TypeError("`input` must be one of `string | ArrayBuffer | Uint8Array`")},g0=function(){return new Promise(function(e){setTimeout(function(){return e()},0)})},YBe=function(e,t){t===void 0&&(t=!0);var r=[];t&&r.push(65279);for(var n=0,i=e.length;n<i;){var c=e.codePointAt(n);if(c<65536)r.push(c),n+=1;else if(c<1114112)r.push(qK(c),XK(c)),n+=2;else throw new Error("Invalid code point: 0x"+ZE(c))}return new Uint16Array(r)},JBe=function(e){return e>=0&&e<=65535},$Be=function(e){return e>=65536&&e<=1114111},qK=function(e){return Math.floor((e-65536)/1024)+55296},XK=function(e){return(e-65536)%1024+56320},wd;(function(e){e.BigEndian="BigEndian",e.LittleEndian="LittleEndian"})(wd||(wd={}));var Dy="�".codePointAt(0),ZK=function(e,t){if(t===void 0&&(t=!0),e.length<=1)return String.fromCodePoint(Dy);for(var r=t?tCe(e):wd.BigEndian,n=t?2:0,i=[];e.length-n>=2;){var c=tN(e[n++],e[n++],r);if(eCe(c))if(e.length-n<2)i.push(Dy);else{var d=tN(e[n++],e[n++],r);eN(d)?i.push(c,d):i.push(Dy)}else eN(c)?(n+=2,i.push(Dy)):i.push(c)}return n<e.length&&i.push(Dy),String.fromCodePoint.apply(String,i)},eCe=function(e){return e>=55296&&e<=56319},eN=function(e){return e>=56320&&e<=57343},tN=function(e,t,r){if(r===wd.LittleEndian)return t<<8|e;if(r===wd.BigEndian)return e<<8|t;throw new Error("Invalid byteOrder: "+r)},tCe=function(e){return YK(e)?wd.BigEndian:JK(e)?wd.LittleEndian:wd.BigEndian},YK=function(e){return e[0]===254&&e[1]===255},JK=function(e){return e[0]===255&&e[1]===254},$K=function(e){return YK(e)||JK(e)},rCe=function(e){var t=String(e);if(Math.abs(e)<1){var r=parseInt(e.toString().split("e-")[1]);if(r){var n=e<0;n&&(e*=-1),e*=Math.pow(10,r-1),t="0."+new Array(r).join("0")+e.toString().substring(2),n&&(t="-"+t)}}else{var r=parseInt(e.toString().split("+")[1]);r>20&&(r-=20,e/=Math.pow(10,r),t=e.toString()+new Array(r+1).join("0"))}return t},sC=function(e){return Math.ceil(e.toString(2).length/8)},eg=function(e){for(var t=new Uint8Array(sC(e)),r=1;r<=t.length;r++)t[r-1]=e>>(t.length-r)*8;return t},ux=function(e){throw new Error(e)},GA={};(function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function r(c,d){return Object.prototype.hasOwnProperty.call(c,d)}e.assign=function(c){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var y=d.shift();if(y){if(typeof y!="object")throw new TypeError(y+"must be non-object");for(var o in y)r(y,o)&&(c[o]=y[o])}}return c},e.shrinkBuf=function(c,d){return c.length===d?c:c.subarray?c.subarray(0,d):(c.length=d,c)};var n={arraySet:function(c,d,y,o,x){if(d.subarray&&c.subarray){c.set(d.subarray(y,y+o),x);return}for(var S=0;S<o;S++)c[x+S]=d[y+S]},flattenChunks:function(c){var d,y,o,x,S,k;for(o=0,d=0,y=c.length;d<y;d++)o+=c[d].length;for(k=new Uint8Array(o),x=0,d=0,y=c.length;d<y;d++)S=c[d],k.set(S,x),x+=S.length;return k}},i={arraySet:function(c,d,y,o,x){for(var S=0;S<o;S++)c[x+S]=d[y+S]},flattenChunks:function(c){return[].concat.apply([],c)}};e.setTyped=function(c){c?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,n)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(t)})(GA);var Ax={},zu={},S0={},nCe=GA,iCe=4,rN=0,nN=1,oCe=2;function E0(e){for(var t=e.length;--t>=0;)e[t]=0}var aCe=0,eW=1,sCe=2,lCe=3,cCe=258,Q2=29,hx=256,P1=hx+1+Q2,qg=30,N2=19,tW=2*P1+1,tp=15,OM=16,uCe=7,V2=256,rW=16,nW=17,iW=18,rD=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],lC=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ACe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],oW=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],hCe=512,pA=new Array((P1+2)*2);E0(pA);var Q_=new Array(qg*2);E0(Q_);var D1=new Array(hCe);E0(D1);var k1=new Array(cCe-lCe+1);E0(k1);var H2=new Array(Q2);E0(H2);var CS=new Array(qg);E0(CS);function UM(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}var aW,sW,lW;function zM(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function cW(e){return e<256?D1[e]:D1[256+(e>>>7)]}function R1(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function Ts(e,t,r){e.bi_valid>OM-r?(e.bi_buf|=t<<e.bi_valid&65535,R1(e,e.bi_buf),e.bi_buf=t>>OM-e.bi_valid,e.bi_valid+=r-OM):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function Bu(e,t,r){Ts(e,r[t*2],r[t*2+1])}function uW(e,t){var r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1}function dCe(e){e.bi_valid===16?(R1(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function fCe(e,t){var r=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,c=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,y=t.stat_desc.extra_base,o=t.stat_desc.max_length,x,S,k,O,Q,G,K=0;for(O=0;O<=tp;O++)e.bl_count[O]=0;for(r[e.heap[e.heap_max]*2+1]=0,x=e.heap_max+1;x<tW;x++)S=e.heap[x],O=r[r[S*2+1]*2+1]+1,O>o&&(O=o,K++),r[S*2+1]=O,!(S>n)&&(e.bl_count[O]++,Q=0,S>=y&&(Q=d[S-y]),G=r[S*2],e.opt_len+=G*(O+Q),c&&(e.static_len+=G*(i[S*2+1]+Q)));if(K!==0){do{for(O=o-1;e.bl_count[O]===0;)O--;e.bl_count[O]--,e.bl_count[O+1]+=2,e.bl_count[o]--,K-=2}while(K>0);for(O=o;O!==0;O--)for(S=e.bl_count[O];S!==0;)k=e.heap[--x],!(k>n)&&(r[k*2+1]!==O&&(e.opt_len+=(O-r[k*2+1])*r[k*2],r[k*2+1]=O),S--)}}function AW(e,t,r){var n=new Array(tp+1),i=0,c,d;for(c=1;c<=tp;c++)n[c]=i=i+r[c-1]<<1;for(d=0;d<=t;d++){var y=e[d*2+1];y!==0&&(e[d*2]=uW(n[y]++,y))}}function pCe(){var e,t,r,n,i,c=new Array(tp+1);for(r=0,n=0;n<Q2-1;n++)for(H2[n]=r,e=0;e<1<<rD[n];e++)k1[r++]=n;for(k1[r-1]=n,i=0,n=0;n<16;n++)for(CS[n]=i,e=0;e<1<<lC[n];e++)D1[i++]=n;for(i>>=7;n<qg;n++)for(CS[n]=i<<7,e=0;e<1<<lC[n]-7;e++)D1[256+i++]=n;for(t=0;t<=tp;t++)c[t]=0;for(e=0;e<=143;)pA[e*2+1]=8,e++,c[8]++;for(;e<=255;)pA[e*2+1]=9,e++,c[9]++;for(;e<=279;)pA[e*2+1]=7,e++,c[7]++;for(;e<=287;)pA[e*2+1]=8,e++,c[8]++;for(AW(pA,P1+1,c),e=0;e<qg;e++)Q_[e*2+1]=5,Q_[e*2]=uW(e,5);aW=new UM(pA,rD,hx+1,P1,tp),sW=new UM(Q_,lC,0,qg,tp),lW=new UM(new Array(0),ACe,0,N2,uCe)}function hW(e){var t;for(t=0;t<P1;t++)e.dyn_ltree[t*2]=0;for(t=0;t<qg;t++)e.dyn_dtree[t*2]=0;for(t=0;t<N2;t++)e.bl_tree[t*2]=0;e.dyn_ltree[V2*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function dW(e){e.bi_valid>8?R1(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function mCe(e,t,r,n){dW(e),R1(e,r),R1(e,~r),nCe.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}function iN(e,t,r,n){var i=t*2,c=r*2;return e[i]<e[c]||e[i]===e[c]&&n[t]<=n[r]}function QM(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&iN(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!iN(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function oN(e,t,r){var n,i,c=0,d,y;if(e.last_lit!==0)do n=e.pending_buf[e.d_buf+c*2]<<8|e.pending_buf[e.d_buf+c*2+1],i=e.pending_buf[e.l_buf+c],c++,n===0?Bu(e,i,t):(d=k1[i],Bu(e,d+hx+1,t),y=rD[d],y!==0&&(i-=H2[d],Ts(e,i,y)),n--,d=cW(n),Bu(e,d,r),y=lC[d],y!==0&&(n-=CS[d],Ts(e,n,y)));while(c<e.last_lit);Bu(e,V2,t)}function nD(e,t){var r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,c=t.stat_desc.elems,d,y,o=-1,x;for(e.heap_len=0,e.heap_max=tW,d=0;d<c;d++)r[d*2]!==0?(e.heap[++e.heap_len]=o=d,e.depth[d]=0):r[d*2+1]=0;for(;e.heap_len<2;)x=e.heap[++e.heap_len]=o<2?++o:0,r[x*2]=1,e.depth[x]=0,e.opt_len--,i&&(e.static_len-=n[x*2+1]);for(t.max_code=o,d=e.heap_len>>1;d>=1;d--)QM(e,r,d);x=c;do d=e.heap[1],e.heap[1]=e.heap[e.heap_len--],QM(e,r,1),y=e.heap[1],e.heap[--e.heap_max]=d,e.heap[--e.heap_max]=y,r[x*2]=r[d*2]+r[y*2],e.depth[x]=(e.depth[d]>=e.depth[y]?e.depth[d]:e.depth[y])+1,r[d*2+1]=r[y*2+1]=x,e.heap[1]=x++,QM(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],fCe(e,t),AW(r,o,e.bl_count)}function aN(e,t,r){var n,i=-1,c,d=t[0*2+1],y=0,o=7,x=4;for(d===0&&(o=138,x=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)c=d,d=t[(n+1)*2+1],!(++y<o&&c===d)&&(y<x?e.bl_tree[c*2]+=y:c!==0?(c!==i&&e.bl_tree[c*2]++,e.bl_tree[rW*2]++):y<=10?e.bl_tree[nW*2]++:e.bl_tree[iW*2]++,y=0,i=c,d===0?(o=138,x=3):c===d?(o=6,x=3):(o=7,x=4))}function sN(e,t,r){var n,i=-1,c,d=t[0*2+1],y=0,o=7,x=4;for(d===0&&(o=138,x=3),n=0;n<=r;n++)if(c=d,d=t[(n+1)*2+1],!(++y<o&&c===d)){if(y<x)do Bu(e,c,e.bl_tree);while(--y!==0);else c!==0?(c!==i&&(Bu(e,c,e.bl_tree),y--),Bu(e,rW,e.bl_tree),Ts(e,y-3,2)):y<=10?(Bu(e,nW,e.bl_tree),Ts(e,y-3,3)):(Bu(e,iW,e.bl_tree),Ts(e,y-11,7));y=0,i=c,d===0?(o=138,x=3):c===d?(o=6,x=3):(o=7,x=4)}}function gCe(e){var t;for(aN(e,e.dyn_ltree,e.l_desc.max_code),aN(e,e.dyn_dtree,e.d_desc.max_code),nD(e,e.bl_desc),t=N2-1;t>=3&&e.bl_tree[oW[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t}function vCe(e,t,r,n){var i;for(Ts(e,t-257,5),Ts(e,r-1,5),Ts(e,n-4,4),i=0;i<n;i++)Ts(e,e.bl_tree[oW[i]*2+1],3);sN(e,e.dyn_ltree,t-1),sN(e,e.dyn_dtree,r-1)}function yCe(e){var t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return rN;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return nN;for(r=32;r<hx;r++)if(e.dyn_ltree[r*2]!==0)return nN;return rN}var lN=!1;function _Ce(e){lN||(pCe(),lN=!0),e.l_desc=new zM(e.dyn_ltree,aW),e.d_desc=new zM(e.dyn_dtree,sW),e.bl_desc=new zM(e.bl_tree,lW),e.bi_buf=0,e.bi_valid=0,hW(e)}function fW(e,t,r,n){Ts(e,(aCe<<1)+(n?1:0),3),mCe(e,t,r)}function xCe(e){Ts(e,eW<<1,3),Bu(e,V2,pA),dCe(e)}function bCe(e,t,r,n){var i,c,d=0;e.level>0?(e.strm.data_type===oCe&&(e.strm.data_type=yCe(e)),nD(e,e.l_desc),nD(e,e.d_desc),d=gCe(e),i=e.opt_len+3+7>>>3,c=e.static_len+3+7>>>3,c<=i&&(i=c)):i=c=r+5,r+4<=i&&t!==-1?fW(e,t,r,n):e.strategy===iCe||c===i?(Ts(e,(eW<<1)+(n?1:0),3),oN(e,pA,Q_)):(Ts(e,(sCe<<1)+(n?1:0),3),vCe(e,e.l_desc.max_code+1,e.d_desc.max_code+1,d+1),oN(e,e.dyn_ltree,e.dyn_dtree)),hW(e),n&&dW(e)}function wCe(e,t,r){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=r&255,e.last_lit++,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(k1[r]+hx+1)*2]++,e.dyn_dtree[cW(t)*2]++),e.last_lit===e.lit_bufsize-1}S0._tr_init=_Ce;S0._tr_stored_block=fW;S0._tr_flush_block=bCe;S0._tr_tally=wCe;S0._tr_align=xCe;function BCe(e,t,r,n){for(var i=e&65535|0,c=e>>>16&65535|0,d=0;r!==0;){d=r>2e3?2e3:r,r-=d;do i=i+t[n++]|0,c=c+i|0;while(--d);i%=65521,c%=65521}return i|c<<16|0}var pW=BCe;function CCe(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t}var SCe=CCe();function ECe(e,t,r,n){var i=SCe,c=n+r;e^=-1;for(var d=n;d<c;d++)e=e>>>8^i[(e^t[d])&255];return e^-1}var mW=ECe,j2={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ls=GA,ql=S0,gW=pW,qh=mW,TCe=j2,Ep=0,FCe=1,ICe=3,Bd=4,cN=5,Cu=0,uN=1,Xl=-2,MCe=-3,NM=-5,PCe=-1,DCe=1,AB=2,kCe=3,RCe=4,LCe=0,OCe=2,YE=8,UCe=9,zCe=15,QCe=8,NCe=29,VCe=256,iD=VCe+1+NCe,HCe=30,jCe=19,GCe=2*iD+1,KCe=15,Hn=3,ud=258,kc=ud+Hn+1,WCe=32,JE=42,oD=69,cC=73,uC=91,AC=103,rp=113,s_=666,Vo=1,dx=2,yp=3,T0=4,qCe=3;function Ad(e,t){return e.msg=TCe[t],t}function AN(e){return(e<<1)-(e>4?9:0)}function id(e){for(var t=e.length;--t>=0;)e[t]=0}function Xh(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(ls.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))}function ba(e,t){ql._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Xh(e.strm)}function ei(e,t){e.pending_buf[e.pending++]=t}function ky(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function XCe(e,t,r,n){var i=e.avail_in;return i>n&&(i=n),i===0?0:(e.avail_in-=i,ls.arraySet(t,e.input,e.next_in,i,r),e.state.wrap===1?e.adler=gW(e.adler,t,i,r):e.state.wrap===2&&(e.adler=qh(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)}function vW(e,t){var r=e.max_chain_length,n=e.strstart,i,c,d=e.prev_length,y=e.nice_match,o=e.strstart>e.w_size-kc?e.strstart-(e.w_size-kc):0,x=e.window,S=e.w_mask,k=e.prev,O=e.strstart+ud,Q=x[n+d-1],G=x[n+d];e.prev_length>=e.good_match&&(r>>=2),y>e.lookahead&&(y=e.lookahead);do if(i=t,!(x[i+d]!==G||x[i+d-1]!==Q||x[i]!==x[n]||x[++i]!==x[n+1])){n+=2,i++;do;while(x[++n]===x[++i]&&x[++n]===x[++i]&&x[++n]===x[++i]&&x[++n]===x[++i]&&x[++n]===x[++i]&&x[++n]===x[++i]&&x[++n]===x[++i]&&x[++n]===x[++i]&&n<O);if(c=ud-(O-n),n=O-ud,c>d){if(e.match_start=t,d=c,c>=y)break;Q=x[n+d-1],G=x[n+d]}}while((t=k[t&S])>o&&--r!==0);return d<=e.lookahead?d:e.lookahead}function _p(e){var t=e.w_size,r,n,i,c,d;do{if(c=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-kc)){ls.arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,n=e.hash_size,r=n;do i=e.head[--r],e.head[r]=i>=t?i-t:0;while(--n);n=t,r=n;do i=e.prev[--r],e.prev[r]=i>=t?i-t:0;while(--n);c+=t}if(e.strm.avail_in===0)break;if(n=XCe(e.strm,e.window,e.strstart+e.lookahead,c),e.lookahead+=n,e.lookahead+e.insert>=Hn)for(d=e.strstart-e.insert,e.ins_h=e.window[d],e.ins_h=(e.ins_h<<e.hash_shift^e.window[d+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[d+Hn-1])&e.hash_mask,e.prev[d&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=d,d++,e.insert--,!(e.lookahead+e.insert<Hn)););}while(e.lookahead<kc&&e.strm.avail_in!==0)}function ZCe(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(_p(e),e.lookahead===0&&t===Ep)return Vo;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((e.strstart===0||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,ba(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-kc&&(ba(e,!1),e.strm.avail_out===0))return Vo}return e.insert=0,t===Bd?(ba(e,!0),e.strm.avail_out===0?yp:T0):(e.strstart>e.block_start&&(ba(e,!1),e.strm.avail_out===0),Vo)}function VM(e,t){for(var r,n;;){if(e.lookahead<kc){if(_p(e),e.lookahead<kc&&t===Ep)return Vo;if(e.lookahead===0)break}if(r=0,e.lookahead>=Hn&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Hn-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-kc&&(e.match_length=vW(e,r)),e.match_length>=Hn)if(n=ql._tr_tally(e,e.strstart-e.match_start,e.match_length-Hn),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Hn){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Hn-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=ql._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(ba(e,!1),e.strm.avail_out===0))return Vo}return e.insert=e.strstart<Hn-1?e.strstart:Hn-1,t===Bd?(ba(e,!0),e.strm.avail_out===0?yp:T0):e.last_lit&&(ba(e,!1),e.strm.avail_out===0)?Vo:dx}function tg(e,t){for(var r,n,i;;){if(e.lookahead<kc){if(_p(e),e.lookahead<kc&&t===Ep)return Vo;if(e.lookahead===0)break}if(r=0,e.lookahead>=Hn&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Hn-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Hn-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-kc&&(e.match_length=vW(e,r),e.match_length<=5&&(e.strategy===DCe||e.match_length===Hn&&e.strstart-e.match_start>4096)&&(e.match_length=Hn-1)),e.prev_length>=Hn&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-Hn,n=ql._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-Hn),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Hn-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Hn-1,e.strstart++,n&&(ba(e,!1),e.strm.avail_out===0))return Vo}else if(e.match_available){if(n=ql._tr_tally(e,0,e.window[e.strstart-1]),n&&ba(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Vo}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=ql._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Hn-1?e.strstart:Hn-1,t===Bd?(ba(e,!0),e.strm.avail_out===0?yp:T0):e.last_lit&&(ba(e,!1),e.strm.avail_out===0)?Vo:dx}function YCe(e,t){for(var r,n,i,c,d=e.window;;){if(e.lookahead<=ud){if(_p(e),e.lookahead<=ud&&t===Ep)return Vo;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Hn&&e.strstart>0&&(i=e.strstart-1,n=d[i],n===d[++i]&&n===d[++i]&&n===d[++i])){c=e.strstart+ud;do;while(n===d[++i]&&n===d[++i]&&n===d[++i]&&n===d[++i]&&n===d[++i]&&n===d[++i]&&n===d[++i]&&n===d[++i]&&i<c);e.match_length=ud-(c-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Hn?(r=ql._tr_tally(e,1,e.match_length-Hn),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=ql._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(ba(e,!1),e.strm.avail_out===0))return Vo}return e.insert=0,t===Bd?(ba(e,!0),e.strm.avail_out===0?yp:T0):e.last_lit&&(ba(e,!1),e.strm.avail_out===0)?Vo:dx}function JCe(e,t){for(var r;;){if(e.lookahead===0&&(_p(e),e.lookahead===0)){if(t===Ep)return Vo;break}if(e.match_length=0,r=ql._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(ba(e,!1),e.strm.avail_out===0))return Vo}return e.insert=0,t===Bd?(ba(e,!0),e.strm.avail_out===0?yp:T0):e.last_lit&&(ba(e,!1),e.strm.avail_out===0)?Vo:dx}function fu(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}var Dg;Dg=[new fu(0,0,0,0,ZCe),new fu(4,4,8,4,VM),new fu(4,5,16,8,VM),new fu(4,6,32,32,VM),new fu(4,4,16,16,tg),new fu(8,16,32,32,tg),new fu(8,16,128,128,tg),new fu(8,32,128,256,tg),new fu(32,128,258,1024,tg),new fu(32,258,258,4096,tg)];function $Ce(e){e.window_size=2*e.w_size,id(e.head),e.max_lazy_match=Dg[e.level].max_lazy,e.good_match=Dg[e.level].good_length,e.nice_match=Dg[e.level].nice_length,e.max_chain_length=Dg[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Hn-1,e.match_available=0,e.ins_h=0}function eSe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=YE,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new ls.Buf16(GCe*2),this.dyn_dtree=new ls.Buf16((2*HCe+1)*2),this.bl_tree=new ls.Buf16((2*jCe+1)*2),id(this.dyn_ltree),id(this.dyn_dtree),id(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new ls.Buf16(KCe+1),this.heap=new ls.Buf16(2*iD+1),id(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new ls.Buf16(2*iD+1),id(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function yW(e){var t;return!e||!e.state?Ad(e,Xl):(e.total_in=e.total_out=0,e.data_type=OCe,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?JE:rp,e.adler=t.wrap===2?0:1,t.last_flush=Ep,ql._tr_init(t),Cu)}function _W(e){var t=yW(e);return t===Cu&&$Ce(e.state),t}function tSe(e,t){return!e||!e.state||e.state.wrap!==2?Xl:(e.state.gzhead=t,Cu)}function xW(e,t,r,n,i,c){if(!e)return Xl;var d=1;if(t===PCe&&(t=6),n<0?(d=0,n=-n):n>15&&(d=2,n-=16),i<1||i>UCe||r!==YE||n<8||n>15||t<0||t>9||c<0||c>RCe)return Ad(e,Xl);n===8&&(n=9);var y=new eSe;return e.state=y,y.strm=e,y.wrap=d,y.gzhead=null,y.w_bits=n,y.w_size=1<<y.w_bits,y.w_mask=y.w_size-1,y.hash_bits=i+7,y.hash_size=1<<y.hash_bits,y.hash_mask=y.hash_size-1,y.hash_shift=~~((y.hash_bits+Hn-1)/Hn),y.window=new ls.Buf8(y.w_size*2),y.head=new ls.Buf16(y.hash_size),y.prev=new ls.Buf16(y.w_size),y.lit_bufsize=1<<i+6,y.pending_buf_size=y.lit_bufsize*4,y.pending_buf=new ls.Buf8(y.pending_buf_size),y.d_buf=1*y.lit_bufsize,y.l_buf=3*y.lit_bufsize,y.level=t,y.strategy=c,y.method=r,_W(e)}function rSe(e,t){return xW(e,t,YE,zCe,QCe,LCe)}function nSe(e,t){var r,n,i,c;if(!e||!e.state||t>cN||t<0)return e?Ad(e,Xl):Xl;if(n=e.state,!e.output||!e.input&&e.avail_in!==0||n.status===s_&&t!==Bd)return Ad(e,e.avail_out===0?NM:Xl);if(n.strm=e,r=n.last_flush,n.last_flush=t,n.status===JE)if(n.wrap===2)e.adler=0,ei(n,31),ei(n,139),ei(n,8),n.gzhead?(ei(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),ei(n,n.gzhead.time&255),ei(n,n.gzhead.time>>8&255),ei(n,n.gzhead.time>>16&255),ei(n,n.gzhead.time>>24&255),ei(n,n.level===9?2:n.strategy>=AB||n.level<2?4:0),ei(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(ei(n,n.gzhead.extra.length&255),ei(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=qh(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=oD):(ei(n,0),ei(n,0),ei(n,0),ei(n,0),ei(n,0),ei(n,n.level===9?2:n.strategy>=AB||n.level<2?4:0),ei(n,qCe),n.status=rp);else{var d=YE+(n.w_bits-8<<4)<<8,y=-1;n.strategy>=AB||n.level<2?y=0:n.level<6?y=1:n.level===6?y=2:y=3,d|=y<<6,n.strstart!==0&&(d|=WCe),d+=31-d%31,n.status=rp,ky(n,d),n.strstart!==0&&(ky(n,e.adler>>>16),ky(n,e.adler&65535)),e.adler=1}if(n.status===oD)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(n.gzhead.extra.length&65535)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=qh(e.adler,n.pending_buf,n.pending-i,i)),Xh(e),i=n.pending,n.pending===n.pending_buf_size));)ei(n,n.gzhead.extra[n.gzindex]&255),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(e.adler=qh(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=cC)}else n.status=cC;if(n.status===cC)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=qh(e.adler,n.pending_buf,n.pending-i,i)),Xh(e),i=n.pending,n.pending===n.pending_buf_size)){c=1;break}n.gzindex<n.gzhead.name.length?c=n.gzhead.name.charCodeAt(n.gzindex++)&255:c=0,ei(n,c)}while(c!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=qh(e.adler,n.pending_buf,n.pending-i,i)),c===0&&(n.gzindex=0,n.status=uC)}else n.status=uC;if(n.status===uC)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=qh(e.adler,n.pending_buf,n.pending-i,i)),Xh(e),i=n.pending,n.pending===n.pending_buf_size)){c=1;break}n.gzindex<n.gzhead.comment.length?c=n.gzhead.comment.charCodeAt(n.gzindex++)&255:c=0,ei(n,c)}while(c!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=qh(e.adler,n.pending_buf,n.pending-i,i)),c===0&&(n.status=AC)}else n.status=AC;if(n.status===AC&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&Xh(e),n.pending+2<=n.pending_buf_size&&(ei(n,e.adler&255),ei(n,e.adler>>8&255),e.adler=0,n.status=rp)):n.status=rp),n.pending!==0){if(Xh(e),e.avail_out===0)return n.last_flush=-1,Cu}else if(e.avail_in===0&&AN(t)<=AN(r)&&t!==Bd)return Ad(e,NM);if(n.status===s_&&e.avail_in!==0)return Ad(e,NM);if(e.avail_in!==0||n.lookahead!==0||t!==Ep&&n.status!==s_){var o=n.strategy===AB?JCe(n,t):n.strategy===kCe?YCe(n,t):Dg[n.level].func(n,t);if((o===yp||o===T0)&&(n.status=s_),o===Vo||o===yp)return e.avail_out===0&&(n.last_flush=-1),Cu;if(o===dx&&(t===FCe?ql._tr_align(n):t!==cN&&(ql._tr_stored_block(n,0,0,!1),t===ICe&&(id(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),Xh(e),e.avail_out===0))return n.last_flush=-1,Cu}return t!==Bd?Cu:n.wrap<=0?uN:(n.wrap===2?(ei(n,e.adler&255),ei(n,e.adler>>8&255),ei(n,e.adler>>16&255),ei(n,e.adler>>24&255),ei(n,e.total_in&255),ei(n,e.total_in>>8&255),ei(n,e.total_in>>16&255),ei(n,e.total_in>>24&255)):(ky(n,e.adler>>>16),ky(n,e.adler&65535)),Xh(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?Cu:uN)}function iSe(e){var t;return!e||!e.state?Xl:(t=e.state.status,t!==JE&&t!==oD&&t!==cC&&t!==uC&&t!==AC&&t!==rp&&t!==s_?Ad(e,Xl):(e.state=null,t===rp?Ad(e,MCe):Cu))}function oSe(e,t){var r=t.length,n,i,c,d,y,o,x,S;if(!e||!e.state||(n=e.state,d=n.wrap,d===2||d===1&&n.status!==JE||n.lookahead))return Xl;for(d===1&&(e.adler=gW(e.adler,t,r,0)),n.wrap=0,r>=n.w_size&&(d===0&&(id(n.head),n.strstart=0,n.block_start=0,n.insert=0),S=new ls.Buf8(n.w_size),ls.arraySet(S,t,r-n.w_size,n.w_size,0),t=S,r=n.w_size),y=e.avail_in,o=e.next_in,x=e.input,e.avail_in=r,e.next_in=0,e.input=t,_p(n);n.lookahead>=Hn;){i=n.strstart,c=n.lookahead-(Hn-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+Hn-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++;while(--c);n.strstart=i,n.lookahead=Hn-1,_p(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Hn-1,n.match_available=0,e.next_in=o,e.input=x,e.avail_in=y,n.wrap=d,Cu}zu.deflateInit=rSe;zu.deflateInit2=xW;zu.deflateReset=_W;zu.deflateResetKeep=yW;zu.deflateSetHeader=tSe;zu.deflate=nSe;zu.deflateEnd=iSe;zu.deflateSetDictionary=oSe;zu.deflateInfo="pako deflate (from Nodeca project)";var Tp={},$E=GA,bW=!0,wW=!0;try{String.fromCharCode.apply(null,[0])}catch{bW=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{wW=!1}var L1=new $E.Buf8(256);for(var Hh=0;Hh<256;Hh++)L1[Hh]=Hh>=252?6:Hh>=248?5:Hh>=240?4:Hh>=224?3:Hh>=192?2:1;L1[254]=L1[254]=1;Tp.string2buf=function(e){var t,r,n,i,c,d=e.length,y=0;for(i=0;i<d;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<d&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),y+=r<128?1:r<2048?2:r<65536?3:4;for(t=new $E.Buf8(y),c=0,i=0;c<y;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<d&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[c++]=r:r<2048?(t[c++]=192|r>>>6,t[c++]=128|r&63):r<65536?(t[c++]=224|r>>>12,t[c++]=128|r>>>6&63,t[c++]=128|r&63):(t[c++]=240|r>>>18,t[c++]=128|r>>>12&63,t[c++]=128|r>>>6&63,t[c++]=128|r&63);return t};function BW(e,t){if(t<65534&&(e.subarray&&wW||!e.subarray&&bW))return String.fromCharCode.apply(null,$E.shrinkBuf(e,t));for(var r="",n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r}Tp.buf2binstring=function(e){return BW(e,e.length)};Tp.binstring2buf=function(e){for(var t=new $E.Buf8(e.length),r=0,n=t.length;r<n;r++)t[r]=e.charCodeAt(r);return t};Tp.buf2string=function(e,t){var r,n,i,c,d=t||e.length,y=new Array(d*2);for(n=0,r=0;r<d;){if(i=e[r++],i<128){y[n++]=i;continue}if(c=L1[i],c>4){y[n++]=65533,r+=c-1;continue}for(i&=c===2?31:c===3?15:7;c>1&&r<d;)i=i<<6|e[r++]&63,c--;if(c>1){y[n++]=65533;continue}i<65536?y[n++]=i:(i-=65536,y[n++]=55296|i>>10&1023,y[n++]=56320|i&1023)}return BW(y,n)};Tp.utf8border=function(e,t){var r;for(t=t||e.length,t>e.length&&(t=e.length),r=t-1;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+L1[e[r]]>t?r:t};function aSe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var CW=aSe,N_=zu,V_=GA,aD=Tp,sD=j2,sSe=CW,SW=Object.prototype.toString,lSe=0,HM=4,Xg=0,hN=1,dN=2,cSe=-1,uSe=0,ASe=8;function xp(e){if(!(this instanceof xp))return new xp(e);this.options=V_.assign({level:cSe,method:ASe,chunkSize:16384,windowBits:15,memLevel:8,strategy:uSe,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new sSe,this.strm.avail_out=0;var r=N_.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==Xg)throw new Error(sD[r]);if(t.header&&N_.deflateSetHeader(this.strm,t.header),t.dictionary){var n;if(typeof t.dictionary=="string"?n=aD.string2buf(t.dictionary):SW.call(t.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(t.dictionary):n=t.dictionary,r=N_.deflateSetDictionary(this.strm,n),r!==Xg)throw new Error(sD[r]);this._dict_set=!0}}xp.prototype.push=function(e,t){var r=this.strm,n=this.options.chunkSize,i,c;if(this.ended)return!1;c=t===~~t?t:t===!0?HM:lSe,typeof e=="string"?r.input=aD.string2buf(e):SW.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new V_.Buf8(n),r.next_out=0,r.avail_out=n),i=N_.deflate(r,c),i!==hN&&i!==Xg)return this.onEnd(i),this.ended=!0,!1;(r.avail_out===0||r.avail_in===0&&(c===HM||c===dN))&&(this.options.to==="string"?this.onData(aD.buf2binstring(V_.shrinkBuf(r.output,r.next_out))):this.onData(V_.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||r.avail_out===0)&&i!==hN);return c===HM?(i=N_.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Xg):(c===dN&&(this.onEnd(Xg),r.avail_out=0),!0)};xp.prototype.onData=function(e){this.chunks.push(e)};xp.prototype.onEnd=function(e){e===Xg&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=V_.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function G2(e,t){var r=new xp(t);if(r.push(e,!0),r.err)throw r.msg||sD[r.err];return r.result}function hSe(e,t){return t=t||{},t.raw=!0,G2(e,t)}function dSe(e,t){return t=t||{},t.gzip=!0,G2(e,t)}Ax.Deflate=xp;Ax.deflate=G2;Ax.deflateRaw=hSe;Ax.gzip=dSe;var fx={},zc={},hB=30,fSe=12,pSe=function(t,r){var n,i,c,d,y,o,x,S,k,O,Q,G,K,ee,W,J,re,ue,ce,he,xe,fe,Ue,Ge,He;n=t.state,i=t.next_in,Ge=t.input,c=i+(t.avail_in-5),d=t.next_out,He=t.output,y=d-(r-t.avail_out),o=d+(t.avail_out-257),x=n.dmax,S=n.wsize,k=n.whave,O=n.wnext,Q=n.window,G=n.hold,K=n.bits,ee=n.lencode,W=n.distcode,J=(1<<n.lenbits)-1,re=(1<<n.distbits)-1;e:do{K<15&&(G+=Ge[i++]<<K,K+=8,G+=Ge[i++]<<K,K+=8),ue=ee[G&J];t:for(;;){if(ce=ue>>>24,G>>>=ce,K-=ce,ce=ue>>>16&255,ce===0)He[d++]=ue&65535;else if(ce&16){he=ue&65535,ce&=15,ce&&(K<ce&&(G+=Ge[i++]<<K,K+=8),he+=G&(1<<ce)-1,G>>>=ce,K-=ce),K<15&&(G+=Ge[i++]<<K,K+=8,G+=Ge[i++]<<K,K+=8),ue=W[G&re];r:for(;;){if(ce=ue>>>24,G>>>=ce,K-=ce,ce=ue>>>16&255,ce&16){if(xe=ue&65535,ce&=15,K<ce&&(G+=Ge[i++]<<K,K+=8,K<ce&&(G+=Ge[i++]<<K,K+=8)),xe+=G&(1<<ce)-1,xe>x){t.msg="invalid distance too far back",n.mode=hB;break e}if(G>>>=ce,K-=ce,ce=d-y,xe>ce){if(ce=xe-ce,ce>k&&n.sane){t.msg="invalid distance too far back",n.mode=hB;break e}if(fe=0,Ue=Q,O===0){if(fe+=S-ce,ce<he){he-=ce;do He[d++]=Q[fe++];while(--ce);fe=d-xe,Ue=He}}else if(O<ce){if(fe+=S+O-ce,ce-=O,ce<he){he-=ce;do He[d++]=Q[fe++];while(--ce);if(fe=0,O<he){ce=O,he-=ce;do He[d++]=Q[fe++];while(--ce);fe=d-xe,Ue=He}}}else if(fe+=O-ce,ce<he){he-=ce;do He[d++]=Q[fe++];while(--ce);fe=d-xe,Ue=He}for(;he>2;)He[d++]=Ue[fe++],He[d++]=Ue[fe++],He[d++]=Ue[fe++],he-=3;he&&(He[d++]=Ue[fe++],he>1&&(He[d++]=Ue[fe++]))}else{fe=d-xe;do He[d++]=He[fe++],He[d++]=He[fe++],He[d++]=He[fe++],he-=3;while(he>2);he&&(He[d++]=He[fe++],he>1&&(He[d++]=He[fe++]))}}else if(ce&64){t.msg="invalid distance code",n.mode=hB;break e}else{ue=W[(ue&65535)+(G&(1<<ce)-1)];continue r}break}}else if(ce&64)if(ce&32){n.mode=fSe;break e}else{t.msg="invalid literal/length code",n.mode=hB;break e}else{ue=ee[(ue&65535)+(G&(1<<ce)-1)];continue t}break}}while(i<c&&d<o);he=K>>3,i-=he,K-=he<<3,G&=(1<<K)-1,t.next_in=i,t.next_out=d,t.avail_in=i<c?5+(c-i):5-(i-c),t.avail_out=d<o?257+(o-d):257-(d-o),n.hold=G,n.bits=K},fN=GA,rg=15,pN=852,mN=592,gN=0,jM=1,vN=2,mSe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],gSe=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],vSe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],ySe=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],_Se=function(t,r,n,i,c,d,y,o){var x=o.bits,S=0,k=0,O=0,Q=0,G=0,K=0,ee=0,W=0,J=0,re=0,ue,ce,he,xe,fe,Ue=null,Ge=0,He,tt=new fN.Buf16(rg+1),pt=new fN.Buf16(rg+1),gt=null,Et=0,ot,Gt,Pt;for(S=0;S<=rg;S++)tt[S]=0;for(k=0;k<i;k++)tt[r[n+k]]++;for(G=x,Q=rg;Q>=1&&tt[Q]===0;Q--);if(G>Q&&(G=Q),Q===0)return c[d++]=1<<24|64<<16|0,c[d++]=1<<24|64<<16|0,o.bits=1,0;for(O=1;O<Q&&tt[O]===0;O++);for(G<O&&(G=O),W=1,S=1;S<=rg;S++)if(W<<=1,W-=tt[S],W<0)return-1;if(W>0&&(t===gN||Q!==1))return-1;for(pt[1]=0,S=1;S<rg;S++)pt[S+1]=pt[S]+tt[S];for(k=0;k<i;k++)r[n+k]!==0&&(y[pt[r[n+k]]++]=k);if(t===gN?(Ue=gt=y,He=19):t===jM?(Ue=mSe,Ge-=257,gt=gSe,Et-=257,He=256):(Ue=vSe,gt=ySe,He=-1),re=0,k=0,S=O,fe=d,K=G,ee=0,he=-1,J=1<<G,xe=J-1,t===jM&&J>pN||t===vN&&J>mN)return 1;for(;;){ot=S-ee,y[k]<He?(Gt=0,Pt=y[k]):y[k]>He?(Gt=gt[Et+y[k]],Pt=Ue[Ge+y[k]]):(Gt=96,Pt=0),ue=1<<S-ee,ce=1<<K,O=ce;do ce-=ue,c[fe+(re>>ee)+ce]=ot<<24|Gt<<16|Pt|0;while(ce!==0);for(ue=1<<S-1;re&ue;)ue>>=1;if(ue!==0?(re&=ue-1,re+=ue):re=0,k++,--tt[S]===0){if(S===Q)break;S=r[n+y[k]]}if(S>G&&(re&xe)!==he){for(ee===0&&(ee=G),fe+=O,K=S-ee,W=1<<K;K+ee<Q&&(W-=tt[K+ee],!(W<=0));)K++,W<<=1;if(J+=1<<K,t===jM&&J>pN||t===vN&&J>mN)return 1;he=re&xe,c[he]=G<<24|K<<16|fe-d|0}}return re!==0&&(c[fe+re]=S-ee<<24|64<<16|0),o.bits=G,0},Js=GA,lD=pW,pu=mW,xSe=pSe,H_=_Se,bSe=0,EW=1,TW=2,yN=4,wSe=5,dB=6,bp=0,BSe=1,CSe=2,ec=-2,FW=-3,IW=-4,SSe=-5,_N=8,MW=1,xN=2,bN=3,wN=4,BN=5,CN=6,SN=7,EN=8,TN=9,FN=10,SS=11,AA=12,GM=13,IN=14,KM=15,MN=16,PN=17,DN=18,kN=19,fB=20,pB=21,RN=22,LN=23,ON=24,UN=25,zN=26,WM=27,QN=28,NN=29,Ki=30,PW=31,ESe=32,TSe=852,FSe=592,ISe=15,MSe=ISe;function VN(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function PSe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Js.Buf16(320),this.work=new Js.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function DW(e){var t;return!e||!e.state?ec:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=MW,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Js.Buf32(TSe),t.distcode=t.distdyn=new Js.Buf32(FSe),t.sane=1,t.back=-1,bp)}function kW(e){var t;return!e||!e.state?ec:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,DW(e))}function RW(e,t){var r,n;return!e||!e.state||(n=e.state,t<0?(r=0,t=-t):(r=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?ec:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,kW(e))}function LW(e,t){var r,n;return e?(n=new PSe,e.state=n,n.window=null,r=RW(e,t),r!==bp&&(e.state=null),r):ec}function DSe(e){return LW(e,MSe)}var HN=!0,qM,XM;function kSe(e){if(HN){var t;for(qM=new Js.Buf32(512),XM=new Js.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(H_(EW,e.lens,0,288,qM,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;H_(TW,e.lens,0,32,XM,0,e.work,{bits:5}),HN=!1}e.lencode=qM,e.lenbits=9,e.distcode=XM,e.distbits=5}function OW(e,t,r,n){var i,c=e.state;return c.window===null&&(c.wsize=1<<c.wbits,c.wnext=0,c.whave=0,c.window=new Js.Buf8(c.wsize)),n>=c.wsize?(Js.arraySet(c.window,t,r-c.wsize,c.wsize,0),c.wnext=0,c.whave=c.wsize):(i=c.wsize-c.wnext,i>n&&(i=n),Js.arraySet(c.window,t,r-n,i,c.wnext),n-=i,n?(Js.arraySet(c.window,t,r-n,n,0),c.wnext=n,c.whave=c.wsize):(c.wnext+=i,c.wnext===c.wsize&&(c.wnext=0),c.whave<c.wsize&&(c.whave+=i))),0}function RSe(e,t){var r,n,i,c,d,y,o,x,S,k,O,Q,G,K,ee=0,W,J,re,ue,ce,he,xe,fe,Ue=new Js.Buf8(4),Ge,He,tt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return ec;r=e.state,r.mode===AA&&(r.mode=GM),d=e.next_out,i=e.output,o=e.avail_out,c=e.next_in,n=e.input,y=e.avail_in,x=r.hold,S=r.bits,k=y,O=o,fe=bp;e:for(;;)switch(r.mode){case MW:if(r.wrap===0){r.mode=GM;break}for(;S<16;){if(y===0)break e;y--,x+=n[c++]<<S,S+=8}if(r.wrap&2&&x===35615){r.check=0,Ue[0]=x&255,Ue[1]=x>>>8&255,r.check=pu(r.check,Ue,2,0),x=0,S=0,r.mode=xN;break}if(r.flags=0,r.head&&(r.head.done=!1),!(r.wrap&1)||(((x&255)<<8)+(x>>8))%31){e.msg="incorrect header check",r.mode=Ki;break}if((x&15)!==_N){e.msg="unknown compression method",r.mode=Ki;break}if(x>>>=4,S-=4,xe=(x&15)+8,r.wbits===0)r.wbits=xe;else if(xe>r.wbits){e.msg="invalid window size",r.mode=Ki;break}r.dmax=1<<xe,e.adler=r.check=1,r.mode=x&512?FN:AA,x=0,S=0;break;case xN:for(;S<16;){if(y===0)break e;y--,x+=n[c++]<<S,S+=8}if(r.flags=x,(r.flags&255)!==_N){e.msg="unknown compression method",r.mode=Ki;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=Ki;break}r.head&&(r.head.text=x>>8&1),r.flags&512&&(Ue[0]=x&255,Ue[1]=x>>>8&255,r.check=pu(r.check,Ue,2,0)),x=0,S=0,r.mode=bN;case bN:for(;S<32;){if(y===0)break e;y--,x+=n[c++]<<S,S+=8}r.head&&(r.head.time=x),r.flags&512&&(Ue[0]=x&255,Ue[1]=x>>>8&255,Ue[2]=x>>>16&255,Ue[3]=x>>>24&255,r.check=pu(r.check,Ue,4,0)),x=0,S=0,r.mode=wN;case wN:for(;S<16;){if(y===0)break e;y--,x+=n[c++]<<S,S+=8}r.head&&(r.head.xflags=x&255,r.head.os=x>>8),r.flags&512&&(Ue[0]=x&255,Ue[1]=x>>>8&255,r.check=pu(r.check,Ue,2,0)),x=0,S=0,r.mode=BN;case BN:if(r.flags&1024){for(;S<16;){if(y===0)break e;y--,x+=n[c++]<<S,S+=8}r.length=x,r.head&&(r.head.extra_len=x),r.flags&512&&(Ue[0]=x&255,Ue[1]=x>>>8&255,r.check=pu(r.check,Ue,2,0)),x=0,S=0}else r.head&&(r.head.extra=null);r.mode=CN;case CN:if(r.flags&1024&&(Q=r.length,Q>y&&(Q=y),Q&&(r.head&&(xe=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),Js.arraySet(r.head.extra,n,c,Q,xe)),r.flags&512&&(r.check=pu(r.check,n,Q,c)),y-=Q,c+=Q,r.length-=Q),r.length))break e;r.length=0,r.mode=SN;case SN:if(r.flags&2048){if(y===0)break e;Q=0;do xe=n[c+Q++],r.head&&xe&&r.length<65536&&(r.head.name+=String.fromCharCode(xe));while(xe&&Q<y);if(r.flags&512&&(r.check=pu(r.check,n,Q,c)),y-=Q,c+=Q,xe)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=EN;case EN:if(r.flags&4096){if(y===0)break e;Q=0;do xe=n[c+Q++],r.head&&xe&&r.length<65536&&(r.head.comment+=String.fromCharCode(xe));while(xe&&Q<y);if(r.flags&512&&(r.check=pu(r.check,n,Q,c)),y-=Q,c+=Q,xe)break e}else r.head&&(r.head.comment=null);r.mode=TN;case TN:if(r.flags&512){for(;S<16;){if(y===0)break e;y--,x+=n[c++]<<S,S+=8}if(x!==(r.check&65535)){e.msg="header crc mismatch",r.mode=Ki;break}x=0,S=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=AA;break;case FN:for(;S<32;){if(y===0)break e;y--,x+=n[c++]<<S,S+=8}e.adler=r.check=VN(x),x=0,S=0,r.mode=SS;case SS:if(r.havedict===0)return e.next_out=d,e.avail_out=o,e.next_in=c,e.avail_in=y,r.hold=x,r.bits=S,CSe;e.adler=r.check=1,r.mode=AA;case AA:if(t===wSe||t===dB)break e;case GM:if(r.last){x>>>=S&7,S-=S&7,r.mode=WM;break}for(;S<3;){if(y===0)break e;y--,x+=n[c++]<<S,S+=8}switch(r.last=x&1,x>>>=1,S-=1,x&3){case 0:r.mode=IN;break;case 1:if(kSe(r),r.mode=fB,t===dB){x>>>=2,S-=2;break e}break;case 2:r.mode=PN;break;case 3:e.msg="invalid block type",r.mode=Ki}x>>>=2,S-=2;break;case IN:for(x>>>=S&7,S-=S&7;S<32;){if(y===0)break e;y--,x+=n[c++]<<S,S+=8}if((x&65535)!==(x>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Ki;break}if(r.length=x&65535,x=0,S=0,r.mode=KM,t===dB)break e;case KM:r.mode=MN;case MN:if(Q=r.length,Q){if(Q>y&&(Q=y),Q>o&&(Q=o),Q===0)break e;Js.arraySet(i,n,c,Q,d),y-=Q,c+=Q,o-=Q,d+=Q,r.length-=Q;break}r.mode=AA;break;case PN:for(;S<14;){if(y===0)break e;y--,x+=n[c++]<<S,S+=8}if(r.nlen=(x&31)+257,x>>>=5,S-=5,r.ndist=(x&31)+1,x>>>=5,S-=5,r.ncode=(x&15)+4,x>>>=4,S-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Ki;break}r.have=0,r.mode=DN;case DN:for(;r.have<r.ncode;){for(;S<3;){if(y===0)break e;y--,x+=n[c++]<<S,S+=8}r.lens[tt[r.have++]]=x&7,x>>>=3,S-=3}for(;r.have<19;)r.lens[tt[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Ge={bits:r.lenbits},fe=H_(bSe,r.lens,0,19,r.lencode,0,r.work,Ge),r.lenbits=Ge.bits,fe){e.msg="invalid code lengths set",r.mode=Ki;break}r.have=0,r.mode=kN;case kN:for(;r.have<r.nlen+r.ndist;){for(;ee=r.lencode[x&(1<<r.lenbits)-1],W=ee>>>24,J=ee>>>16&255,re=ee&65535,!(W<=S);){if(y===0)break e;y--,x+=n[c++]<<S,S+=8}if(re<16)x>>>=W,S-=W,r.lens[r.have++]=re;else{if(re===16){for(He=W+2;S<He;){if(y===0)break e;y--,x+=n[c++]<<S,S+=8}if(x>>>=W,S-=W,r.have===0){e.msg="invalid bit length repeat",r.mode=Ki;break}xe=r.lens[r.have-1],Q=3+(x&3),x>>>=2,S-=2}else if(re===17){for(He=W+3;S<He;){if(y===0)break e;y--,x+=n[c++]<<S,S+=8}x>>>=W,S-=W,xe=0,Q=3+(x&7),x>>>=3,S-=3}else{for(He=W+7;S<He;){if(y===0)break e;y--,x+=n[c++]<<S,S+=8}x>>>=W,S-=W,xe=0,Q=11+(x&127),x>>>=7,S-=7}if(r.have+Q>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Ki;break}for(;Q--;)r.lens[r.have++]=xe}}if(r.mode===Ki)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=Ki;break}if(r.lenbits=9,Ge={bits:r.lenbits},fe=H_(EW,r.lens,0,r.nlen,r.lencode,0,r.work,Ge),r.lenbits=Ge.bits,fe){e.msg="invalid literal/lengths set",r.mode=Ki;break}if(r.distbits=6,r.distcode=r.distdyn,Ge={bits:r.distbits},fe=H_(TW,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Ge),r.distbits=Ge.bits,fe){e.msg="invalid distances set",r.mode=Ki;break}if(r.mode=fB,t===dB)break e;case fB:r.mode=pB;case pB:if(y>=6&&o>=258){e.next_out=d,e.avail_out=o,e.next_in=c,e.avail_in=y,r.hold=x,r.bits=S,xSe(e,O),d=e.next_out,i=e.output,o=e.avail_out,c=e.next_in,n=e.input,y=e.avail_in,x=r.hold,S=r.bits,r.mode===AA&&(r.back=-1);break}for(r.back=0;ee=r.lencode[x&(1<<r.lenbits)-1],W=ee>>>24,J=ee>>>16&255,re=ee&65535,!(W<=S);){if(y===0)break e;y--,x+=n[c++]<<S,S+=8}if(J&&!(J&240)){for(ue=W,ce=J,he=re;ee=r.lencode[he+((x&(1<<ue+ce)-1)>>ue)],W=ee>>>24,J=ee>>>16&255,re=ee&65535,!(ue+W<=S);){if(y===0)break e;y--,x+=n[c++]<<S,S+=8}x>>>=ue,S-=ue,r.back+=ue}if(x>>>=W,S-=W,r.back+=W,r.length=re,J===0){r.mode=zN;break}if(J&32){r.back=-1,r.mode=AA;break}if(J&64){e.msg="invalid literal/length code",r.mode=Ki;break}r.extra=J&15,r.mode=RN;case RN:if(r.extra){for(He=r.extra;S<He;){if(y===0)break e;y--,x+=n[c++]<<S,S+=8}r.length+=x&(1<<r.extra)-1,x>>>=r.extra,S-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=LN;case LN:for(;ee=r.distcode[x&(1<<r.distbits)-1],W=ee>>>24,J=ee>>>16&255,re=ee&65535,!(W<=S);){if(y===0)break e;y--,x+=n[c++]<<S,S+=8}if(!(J&240)){for(ue=W,ce=J,he=re;ee=r.distcode[he+((x&(1<<ue+ce)-1)>>ue)],W=ee>>>24,J=ee>>>16&255,re=ee&65535,!(ue+W<=S);){if(y===0)break e;y--,x+=n[c++]<<S,S+=8}x>>>=ue,S-=ue,r.back+=ue}if(x>>>=W,S-=W,r.back+=W,J&64){e.msg="invalid distance code",r.mode=Ki;break}r.offset=re,r.extra=J&15,r.mode=ON;case ON:if(r.extra){for(He=r.extra;S<He;){if(y===0)break e;y--,x+=n[c++]<<S,S+=8}r.offset+=x&(1<<r.extra)-1,x>>>=r.extra,S-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Ki;break}r.mode=UN;case UN:if(o===0)break e;if(Q=O-o,r.offset>Q){if(Q=r.offset-Q,Q>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Ki;break}Q>r.wnext?(Q-=r.wnext,G=r.wsize-Q):G=r.wnext-Q,Q>r.length&&(Q=r.length),K=r.window}else K=i,G=d-r.offset,Q=r.length;Q>o&&(Q=o),o-=Q,r.length-=Q;do i[d++]=K[G++];while(--Q);r.length===0&&(r.mode=pB);break;case zN:if(o===0)break e;i[d++]=r.length,o--,r.mode=pB;break;case WM:if(r.wrap){for(;S<32;){if(y===0)break e;y--,x|=n[c++]<<S,S+=8}if(O-=o,e.total_out+=O,r.total+=O,O&&(e.adler=r.check=r.flags?pu(r.check,i,O,d-O):lD(r.check,i,O,d-O)),O=o,(r.flags?x:VN(x))!==r.check){e.msg="incorrect data check",r.mode=Ki;break}x=0,S=0}r.mode=QN;case QN:if(r.wrap&&r.flags){for(;S<32;){if(y===0)break e;y--,x+=n[c++]<<S,S+=8}if(x!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=Ki;break}x=0,S=0}r.mode=NN;case NN:fe=BSe;break e;case Ki:fe=FW;break e;case PW:return IW;case ESe:default:return ec}return e.next_out=d,e.avail_out=o,e.next_in=c,e.avail_in=y,r.hold=x,r.bits=S,(r.wsize||O!==e.avail_out&&r.mode<Ki&&(r.mode<WM||t!==yN))&&OW(e,e.output,e.next_out,O-e.avail_out),k-=e.avail_in,O-=e.avail_out,e.total_in+=k,e.total_out+=O,r.total+=O,r.wrap&&O&&(e.adler=r.check=r.flags?pu(r.check,i,O,e.next_out-O):lD(r.check,i,O,e.next_out-O)),e.data_type=r.bits+(r.last?64:0)+(r.mode===AA?128:0)+(r.mode===fB||r.mode===KM?256:0),(k===0&&O===0||t===yN)&&fe===bp&&(fe=SSe),fe}function LSe(e){if(!e||!e.state)return ec;var t=e.state;return t.window&&(t.window=null),e.state=null,bp}function OSe(e,t){var r;return!e||!e.state||(r=e.state,!(r.wrap&2))?ec:(r.head=t,t.done=!1,bp)}function USe(e,t){var r=t.length,n,i,c;return!e||!e.state||(n=e.state,n.wrap!==0&&n.mode!==SS)?ec:n.mode===SS&&(i=1,i=lD(i,t,r,0),i!==n.check)?FW:(c=OW(e,t,r,r),c?(n.mode=PW,IW):(n.havedict=1,bp))}zc.inflateReset=kW;zc.inflateReset2=RW;zc.inflateResetKeep=DW;zc.inflateInit=DSe;zc.inflateInit2=LW;zc.inflate=RSe;zc.inflateEnd=LSe;zc.inflateGetHeader=OSe;zc.inflateSetDictionary=USe;zc.inflateInfo="pako inflate (from Nodeca project)";var UW={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function zSe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var QSe=zSe,Zg=zc,j_=GA,hC=Tp,bo=UW,cD=j2,NSe=CW,VSe=QSe,zW=Object.prototype.toString;function wp(e){if(!(this instanceof wp))return new wp(e);this.options=j_.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new NSe,this.strm.avail_out=0;var r=Zg.inflateInit2(this.strm,t.windowBits);if(r!==bo.Z_OK)throw new Error(cD[r]);if(this.header=new VSe,Zg.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=hC.string2buf(t.dictionary):zW.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Zg.inflateSetDictionary(this.strm,t.dictionary),r!==bo.Z_OK)))throw new Error(cD[r])}wp.prototype.push=function(e,t){var r=this.strm,n=this.options.chunkSize,i=this.options.dictionary,c,d,y,o,x,S=!1;if(this.ended)return!1;d=t===~~t?t:t===!0?bo.Z_FINISH:bo.Z_NO_FLUSH,typeof e=="string"?r.input=hC.binstring2buf(e):zW.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new j_.Buf8(n),r.next_out=0,r.avail_out=n),c=Zg.inflate(r,bo.Z_NO_FLUSH),c===bo.Z_NEED_DICT&&i&&(c=Zg.inflateSetDictionary(this.strm,i)),c===bo.Z_BUF_ERROR&&S===!0&&(c=bo.Z_OK,S=!1),c!==bo.Z_STREAM_END&&c!==bo.Z_OK)return this.onEnd(c),this.ended=!0,!1;r.next_out&&(r.avail_out===0||c===bo.Z_STREAM_END||r.avail_in===0&&(d===bo.Z_FINISH||d===bo.Z_SYNC_FLUSH))&&(this.options.to==="string"?(y=hC.utf8border(r.output,r.next_out),o=r.next_out-y,x=hC.buf2string(r.output,y),r.next_out=o,r.avail_out=n-o,o&&j_.arraySet(r.output,r.output,y,o,0),this.onData(x)):this.onData(j_.shrinkBuf(r.output,r.next_out))),r.avail_in===0&&r.avail_out===0&&(S=!0)}while((r.avail_in>0||r.avail_out===0)&&c!==bo.Z_STREAM_END);return c===bo.Z_STREAM_END&&(d=bo.Z_FINISH),d===bo.Z_FINISH?(c=Zg.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===bo.Z_OK):(d===bo.Z_SYNC_FLUSH&&(this.onEnd(bo.Z_OK),r.avail_out=0),!0)};wp.prototype.onData=function(e){this.chunks.push(e)};wp.prototype.onEnd=function(e){e===bo.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=j_.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function K2(e,t){var r=new wp(t);if(r.push(e,!0),r.err)throw r.msg||cD[r.err];return r.result}function HSe(e,t){return t=t||{},t.raw=!0,K2(e,t)}fx.Inflate=wp;fx.inflate=K2;fx.inflateRaw=HSe;fx.ungzip=K2;var jSe=GA.assign,GSe=Ax,KSe=fx,WSe=UW,QW={};jSe(QW,GSe,KSe,WSe);var qSe=QW;const eT=V1(qSe);var jN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l_=new Uint8Array(256);for(var mB=0;mB<jN.length;mB++)l_[jN.charCodeAt(mB)]=mB;var XSe=function(e){var t=e.length*.75,r=e.length,n,i=0,c,d,y,o;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var x=new Uint8Array(t);for(n=0;n<r;n+=4)c=l_[e.charCodeAt(n)],d=l_[e.charCodeAt(n+1)],y=l_[e.charCodeAt(n+2)],o=l_[e.charCodeAt(n+3)],x[i++]=c<<2|d>>4,x[i++]=(d&15)<<4|y>>2,x[i++]=(y&3)<<6|o&63;return x},ZSe=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},NW=function(e){return ZSe(eT.inflate(XSe(e)))},YSe=function(e,t,r){for(var n="",i=0,c=t-e.length;i<c;i++)n+=r;return n+e};const JSe="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",$Se="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",eEe="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",tEe="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",rEe="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",nEe="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",iEe="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",oEe="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",aEe="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",sEe="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",lEe="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",cEe="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",uEe="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",AEe="eJxtmNtu20YQhl+F4FULyMGeD7pz3AY1ChtG7NpFA18w1NomIlECSRcxgrx7SVk7+wOdG8H5OJydf2Z2d5gf9cV+t0v9VK/r+6vXsXlOlbHe28paq229qj/t++m62aXZ4J/m8PRb1z9/baZxefK63Z6eXN5dVMvTCh83u277xr/6kLrnl2XNq7TpXnczuZyabdee98/b2VzM/x4/dd/T5qab2pd6PQ2vaVVfvDRD005puE3Lu7eH1HbN9hTjx4/77/X6y5lcnUmjVzHIVVDicVX/1W/SsO36dLMfu6nb9/X6TAoBD+5euvZbn8axXtuZ36dhPJrVQqgPQoh5hev91LWLkIv94W1Ygq9+aX+tZAx2tfz64284/sblN/rqfLP/mqrbt3FKu7G67Nv9cNgPzZQ2H6rz7bb6vLgZq89pTMO/M/xfEqturJpqSM/d7GJIm2oamk3aNcO3av80O5xh3yyKmm1193ZIT02bqovTKjP+MAf++7zsZvZ3276kYyWWXB0z99S18/PbafPHQ71W4fjn/fxnFO+ZvkrT0LVzTr78qB/+nk38bHM9exgP8zr1z9U7jt6840YW5uSJKcZOCaBBnKgm5mU8MVNYyMwWFvO7Ukagkmgg6sDWQ5yFFqjzUrLEaQ3BEmiwNsMSaZS0vgWfOkPHWQowNeTUc0kumnxZvsgPxlGai6VTGUqAVCTQ6QkWnc77DKEiLktSUBJKqHIQZ86d8gCpHYoiEzMsb1ubYy8vW50DChB5ZhGqrijD0EqUIeiaEHIfCg5Kpuu0ApiToaGPSY0uaQsyr65L2oKi1yFt1PLaQ3lzfXTgXodGoJYzglndSLDMPg1sTPJpQJHJigw0QrGERqD9YhyTOgONQDUyuF1zaxuokc/BW2ztXCMrGZ9WMW1oQZHIXWNBkSCfRZEL5BMUiZw6CzVSFCfUSGZFNjIldoKDkonTKQiJIGzWmFd3BizJJ9SINoLDriOfUCOZS+zg+KGD1qGiLNMLxtJD1/ns00ON6EzyUCM6vbxhoBKaqbG3DFQCNiL1iHccBPV0DHhQH/JW8EW90dkyFKGywCJU0WkVSvSGeiSUODWFFD0HYdPQVoiRgfPMA+/nnRgiAyNYSjpWNQcNSMrtFCUH4ZIRpSCWocFCSuhCEY6hoUClc0WC52BJlCYYLQdhN+hygRRRlo5BKRRLS6oihSqh+ZzzRGG1Mo4Iz1LoP0qsxDGFzk0JE42ji0jCPejomJKCuwil4m5CiRMEUMVSzVLDUstSx1Juc0oVWMpqY295qVltmtWmWW2a1aZZbZrVplltmtWmWW2G1WZYbYbVZlhthtVmWG2G1WZYbYbVZlhtltVmWW2W1WZZbZbVZlltltVmWW2W1QYjQCh7E2aAQHeGhCFgPoNoy8KNb2wxBhmGKBxoUZXlLGsLI6AsftEDHV0wIURVbANLcTKlGGBIKPOAxCmhePCKUwFzAmpDFRQvjA9R06Hq8TONvshgKDCuRAZTXigUxjxNFfKRo3CLhnIJBMFRvMZpqpNBMlQJzGT5WFQMVQI/AikPMIhEU1aDjqJvQwmjSHB05cC9jbYwc5UtAHNLhDw41ha+lEqF4JaH3gmB61SYcqInxTDmQK8v08vjqv4zDf1N0w3Lf4A8/vwPpfK11w==";var hEe={Courier:tEe,"Courier-Bold":JSe,"Courier-Oblique":eEe,"Courier-BoldOblique":$Se,Helvetica:oEe,"Helvetica-Bold":rEe,"Helvetica-Oblique":iEe,"Helvetica-BoldOblique":nEe,"Times-Roman":cEe,"Times-Bold":aEe,"Times-Italic":lEe,"Times-BoldItalic":sEe,Symbol:uEe,ZapfDingbats:AEe},O1;(function(e){e.Courier="Courier",e.CourierBold="Courier-Bold",e.CourierOblique="Courier-Oblique",e.CourierBoldOblique="Courier-BoldOblique",e.Helvetica="Helvetica",e.HelveticaBold="Helvetica-Bold",e.HelveticaOblique="Helvetica-Oblique",e.HelveticaBoldOblique="Helvetica-BoldOblique",e.TimesRoman="Times-Roman",e.TimesRomanBold="Times-Bold",e.TimesRomanItalic="Times-Italic",e.TimesRomanBoldItalic="Times-BoldItalic",e.Symbol="Symbol",e.ZapfDingbats="ZapfDingbats"})(O1||(O1={}));var GN={},dEe=function(){function e(){var t=this;this.getWidthOfGlyph=function(r){return t.CharWidths[r]},this.getXAxisKerningForPair=function(r,n){return(t.KernPairXAmounts[r]||{})[n]}}return e.load=function(t){var r=GN[t];if(r)return r;var n=NW(hEe[t]),i=Object.assign(new e,JSON.parse(n));return i.CharWidths=i.CharMetrics.reduce(function(c,d){return c[d.N]=d.WX,c},{}),i.KernPairXAmounts=i.KernPairs.reduce(function(c,d){var y=d[0],o=d[1],x=d[2];return c[y]||(c[y]={}),c[y][o]=x,c},{}),GN[t]=i,i},e}();const fEe="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";var pEe=NW(fEe),ZM=JSON.parse(pEe),YM=function(){function e(t,r){var n=this;this.canEncodeUnicodeCodePoint=function(i){return i in n.unicodeMappings},this.encodeUnicodeCodePoint=function(i){var c=n.unicodeMappings[i];if(!c){var d=String.fromCharCode(i),y="0x"+YSe(i.toString(16),4,"0"),o=n.name+' cannot encode "'+d+'" ('+y+")";throw new Error(o)}return{code:c[0],name:c[1]}},this.name=t,this.supportedCodePoints=Object.keys(r).map(Number).sort(function(i,c){return i-c}),this.unicodeMappings=r}return e}(),gB={Symbol:new YM("Symbol",ZM.symbol),ZapfDingbats:new YM("ZapfDingbats",ZM.zapfdingbats),WinAnsi:new YM("WinAnsi",ZM.win1252)},tT=function(e){return Object.keys(e).map(function(t){return e[t]})},mEe=tT(O1),KN=function(e){return mEe.includes(e)},vB=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height},Uo=function(e){return"`"+e+"`"},gEe=function(e){return"'"+e+"'"},WN=function(e){var t=typeof e;return t==="string"?gEe(e):t==="undefined"?Uo(e):e},vEe=function(e,t,r){for(var n=new Array(r.length),i=0,c=r.length;i<c;i++){var d=r[i];n[i]=WN(d)}var y=n.join(" or ");return Uo(t)+" must be one of "+y+", but was actually "+WN(e)},hd=function(e,t,r){Array.isArray(r)||(r=tT(r));for(var n=0,i=r.length;n<i;n++)if(e===r[n])return;throw new TypeError(vEe(e,t,r))},Pl=function(e,t,r){Array.isArray(r)||(r=tT(r)),hd(e,t,r.concat(void 0))},yEe=function(e,t,r){Array.isArray(r)||(r=tT(r));for(var n=0,i=e.length;n<i;n++)hd(e[n],t,r)},_Ee=function(e){return e===null?"null":e===void 0?"undefined":typeof e=="string"?"string":isNaN(e)?"NaN":typeof e=="number"?"number":typeof e=="boolean"?"boolean":typeof e=="symbol"?"symbol":typeof e=="bigint"?"bigint":e.constructor&&e.constructor.name?e.constructor.name:e.name?e.name:e.constructor?String(e.constructor):String(e)},xEe=function(e,t){return t==="null"?e===null:t==="undefined"?e===void 0:t==="string"?typeof e=="string":t==="number"?typeof e=="number"&&!isNaN(e):t==="boolean"?typeof e=="boolean":t==="symbol"?typeof e=="symbol":t==="bigint"?typeof e=="bigint":t===Date?e instanceof Date:t===Array?e instanceof Array:t===Uint8Array?e instanceof Uint8Array:t===ArrayBuffer?e instanceof ArrayBuffer:t===Function?e instanceof Function:e instanceof t[0]},bEe=function(e,t,r){for(var n=new Array(r.length),i=0,c=r.length;i<c;i++){var d=r[i];d==="null"&&(n[i]=Uo("null")),d==="undefined"&&(n[i]=Uo("undefined")),d==="string"?n[i]=Uo("string"):d==="number"?n[i]=Uo("number"):d==="boolean"?n[i]=Uo("boolean"):d==="symbol"?n[i]=Uo("symbol"):d==="bigint"?n[i]=Uo("bigint"):d===Array?n[i]=Uo("Array"):d===Uint8Array?n[i]=Uo("Uint8Array"):d===ArrayBuffer?n[i]=Uo("ArrayBuffer"):n[i]=Uo(d[1])}var y=n.join(" or ");return Uo(t)+" must be of type "+y+", but was actually of type "+Uo(_Ee(e))},vt=function(e,t,r){for(var n=0,i=r.length;n<i;n++)if(xEe(e,r[n]))return;throw new TypeError(bEe(e,t,r))},Jt=function(e,t,r){vt(e,t,r.concat("undefined"))},VW=function(e,t,r){for(var n=0,i=e.length;n<i;n++)vt(e[n],t,r)},$s=function(e,t,r,n){if(vt(e,t,["number"]),vt(r,"min",["number"]),vt(n,"max",["number"]),n=Math.max(r,n),e<r||e>n)throw new Error(Uo(t)+" must be at least "+r+" and at most "+n+", but was actually "+e)},Bc=function(e,t,r,n){vt(e,t,["number","undefined"]),typeof e=="number"&&$s(e,t,r,n)},HW=function(e,t,r){if(vt(e,t,["number"]),e%r!==0)throw new Error(Uo(t)+" must be a multiple of "+r+", but was actually "+e)},wEe=function(e,t){if(!Number.isInteger(e))throw new Error(Uo(t)+" must be an integer, but was actually "+e)},rT=function(e,t){if(![1,0].includes(Math.sign(e)))throw new Error(Uo(t)+" must be a positive number or 0, but was actually "+e)},cn=new Uint16Array(256);for(var yB=0;yB<256;yB++)cn[yB]=yB;cn[22]=sn("");cn[24]=sn("˘");cn[25]=sn("ˇ");cn[26]=sn("ˆ");cn[27]=sn("˙");cn[28]=sn("˝");cn[29]=sn("˛");cn[30]=sn("˚");cn[31]=sn("˜");cn[127]=sn("�");cn[128]=sn("•");cn[129]=sn("†");cn[130]=sn("‡");cn[131]=sn("…");cn[132]=sn("—");cn[133]=sn("–");cn[134]=sn("ƒ");cn[135]=sn("⁄");cn[136]=sn("‹");cn[137]=sn("›");cn[138]=sn("−");cn[139]=sn("‰");cn[140]=sn("„");cn[141]=sn("“");cn[142]=sn("”");cn[143]=sn("‘");cn[144]=sn("’");cn[145]=sn("‚");cn[146]=sn("™");cn[147]=sn("ﬁ");cn[148]=sn("ﬂ");cn[149]=sn("Ł");cn[150]=sn("Œ");cn[151]=sn("Š");cn[152]=sn("Ÿ");cn[153]=sn("Ž");cn[154]=sn("ı");cn[155]=sn("ł");cn[156]=sn("œ");cn[157]=sn("š");cn[158]=sn("ž");cn[159]=sn("�");cn[160]=sn("€");cn[173]=sn("�");var jW=function(e){for(var t=new Array(e.length),r=0,n=e.length;r<n;r++)t[r]=cn[e[r]];return String.fromCodePoint.apply(String,t)},PA=function(){function e(t){this.populate=t,this.value=void 0}return e.prototype.getValue=function(){return this.value},e.prototype.access=function(){return this.value||(this.value=this.populate()),this.value},e.prototype.invalidate=function(){this.value=void 0},e.populatedBy=function(t){return new e(t)},e}(),jl=function(e){er(t,e);function t(r,n){var i=this,c="Method "+r+"."+n+"() not implemented";return i=e.call(this,c)||this,i}return t}(Error),W2=function(e){er(t,e);function t(r){var n=this,i="Cannot construct "+r+" - it has a private constructor";return n=e.call(this,i)||this,n}return t}(Error),ES=function(e){er(t,e);function t(r,n){var i=this,c=function(o){var x,S;return(x=o==null?void 0:o.name)!==null&&x!==void 0?x:(S=o==null?void 0:o.constructor)===null||S===void 0?void 0:S.name},d=Array.isArray(r)?r.map(c):[c(r)],y="Expected instance of "+d.join(" or ")+", "+("but got instance of "+(n&&c(n)));return i=e.call(this,y)||this,i}return t}(Error),BEe=function(e){er(t,e);function t(r){var n=this,i=r+" stream encoding not supported";return n=e.call(this,i)||this,n}return t}(Error),q2=function(e){er(t,e);function t(r,n){var i=this,c="Cannot call "+r+"."+n+"() more than once";return i=e.call(this,c)||this,i}return t}(Error);(function(e){er(t,e);function t(r){var n=this,i="Missing catalog (ref="+r+")";return n=e.call(this,i)||this,n}return t})(Error);var CEe=function(e){er(t,e);function t(){var r=this,n="Can't embed page with missing Contents";return r=e.call(this,n)||this,r}return t}(Error),SEe=function(e){er(t,e);function t(r){var n,i,c,d=this,y=(c=(i=(n=r==null?void 0:r.contructor)===null||n===void 0?void 0:n.name)!==null&&i!==void 0?i:r==null?void 0:r.name)!==null&&c!==void 0?c:r,o="Unrecognized stream type: "+y;return d=e.call(this,o)||this,d}return t}(Error),EEe=function(e){er(t,e);function t(){var r=this,n="Found mismatched contexts while embedding pages. All pages in the array passed to `PDFDocument.embedPages()` must be from the same document.";return r=e.call(this,n)||this,r}return t}(Error),TEe=function(e){er(t,e);function t(r){var n=this,i="Attempted to convert PDFArray with "+r+" elements to rectangle, but must have exactly 4 elements.";return n=e.call(this,i)||this,n}return t}(Error),GW=function(e){er(t,e);function t(r){var n=this,i='Attempted to convert "'+r+'" to a date, but it does not match the PDF date string format.';return n=e.call(this,i)||this,n}return t}(Error),qN=function(e){er(t,e);function t(r,n){var i=this,c="Invalid targetIndex specified: targetIndex="+r+" must be less than Count="+n;return i=e.call(this,c)||this,i}return t}(Error),XN=function(e){er(t,e);function t(r,n){var i=this,c="Failed to "+n+" at targetIndex="+r+" due to corrupt page tree: It is likely that one or more 'Count' entries are invalid";return i=e.call(this,c)||this,i}return t}(Error),TS=function(e){er(t,e);function t(r,n,i){var c=this,d="index should be at least "+n+" and at most "+i+", but was actually "+r;return c=e.call(this,d)||this,c}return t}(Error),X2=function(e){er(t,e);function t(){var r=this,n="Attempted to set invalid field value";return r=e.call(this,n)||this,r}return t}(Error),FEe=function(e){er(t,e);function t(){var r=this,n="Attempted to select multiple values for single-select field";return r=e.call(this,n)||this,r}return t}(Error),IEe=function(e){er(t,e);function t(r){var n=this,i="No /DA (default appearance) entry found for field: "+r;return n=e.call(this,i)||this,n}return t}(Error),MEe=function(e){er(t,e);function t(r){var n=this,i="No Tf operator found for DA of field: "+r;return n=e.call(this,i)||this,n}return t}(Error),ZN=function(e){er(t,e);function t(r,n){var i=this,c="Failed to parse number "+("(line:"+r.line+" col:"+r.column+" offset="+r.offset+'): "'+n+'"');return i=e.call(this,c)||this,i}return t}(Error),Hd=function(e){er(t,e);function t(r,n){var i=this,c="Failed to parse PDF document "+("(line:"+r.line+" col:"+r.column+" offset="+r.offset+"): "+n);return i=e.call(this,c)||this,i}return t}(Error),PEe=function(e){er(t,e);function t(r,n,i){var c=this,d="Expected next byte to be "+n+" but it was actually "+i;return c=e.call(this,r,d)||this,c}return t}(Hd),DEe=function(e){er(t,e);function t(r,n){var i=this,c="Failed to parse PDF object starting with the following byte: "+n;return i=e.call(this,r,c)||this,i}return t}(Hd),kEe=function(e){er(t,e);function t(r){var n=this,i="Failed to parse invalid PDF object";return n=e.call(this,r,i)||this,n}return t}(Hd),REe=function(e){er(t,e);function t(r){var n=this,i="Failed to parse PDF stream";return n=e.call(this,r,i)||this,n}return t}(Hd),LEe=function(e){er(t,e);function t(r){var n=this,i="Failed to parse PDF literal string due to unbalanced parenthesis";return n=e.call(this,r,i)||this,n}return t}(Hd),OEe=function(e){er(t,e);function t(r){var n=this,i="Parser stalled";return n=e.call(this,r,i)||this,n}return t}(Hd),UEe=function(e){er(t,e);function t(r){var n=this,i="No PDF header found";return n=e.call(this,r,i)||this,n}return t}(Hd),zEe=function(e){er(t,e);function t(r,n){var i=this,c="Did not find expected keyword '"+WK(n)+"'";return i=e.call(this,r,c)||this,i}return t}(Hd),uD;(function(e){e[e.Null=0]="Null",e[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.Newline=10]="Newline",e[e.FormFeed=12]="FormFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationPoint=33]="ExclamationPoint",e[e.Hash=35]="Hash",e[e.Percent=37]="Percent",e[e.LeftParen=40]="LeftParen",e[e.RightParen=41]="RightParen",e[e.Plus=43]="Plus",e[e.Minus=45]="Minus",e[e.Dash=45]="Dash",e[e.Period=46]="Period",e[e.ForwardSlash=47]="ForwardSlash",e[e.Zero=48]="Zero",e[e.One=49]="One",e[e.Two=50]="Two",e[e.Three=51]="Three",e[e.Four=52]="Four",e[e.Five=53]="Five",e[e.Six=54]="Six",e[e.Seven=55]="Seven",e[e.Eight=56]="Eight",e[e.Nine=57]="Nine",e[e.LessThan=60]="LessThan",e[e.GreaterThan=62]="GreaterThan",e[e.A=65]="A",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.O=79]="O",e[e.P=80]="P",e[e.R=82]="R",e[e.LeftSquareBracket=91]="LeftSquareBracket",e[e.BackSlash=92]="BackSlash",e[e.RightSquareBracket=93]="RightSquareBracket",e[e.a=97]="a",e[e.b=98]="b",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.i=105]="i",e[e.j=106]="j",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.x=120]="x",e[e.LeftCurly=123]="LeftCurly",e[e.RightCurly=125]="RightCurly",e[e.Tilde=126]="Tilde"})(uD||(uD={}));const ze=uD;var nT=function(){function e(t,r){this.major=String(t),this.minor=String(r)}return e.prototype.toString=function(){var t=MA(129);return"%PDF-"+this.major+"."+this.minor+`
%`+t+t+t+t},e.prototype.sizeInBytes=function(){return 12+this.major.length+this.minor.length},e.prototype.copyBytesInto=function(t,r){var n=r;return t[r++]=ze.Percent,t[r++]=ze.P,t[r++]=ze.D,t[r++]=ze.F,t[r++]=ze.Dash,r+=xa(this.major,t,r),t[r++]=ze.Period,r+=xa(this.minor,t,r),t[r++]=ze.Newline,t[r++]=ze.Percent,t[r++]=129,t[r++]=129,t[r++]=129,t[r++]=129,r-n},e.forVersion=function(t,r){return new e(t,r)},e}(),hs=function(){function e(){}return e.prototype.clone=function(t){throw new jl(this.constructor.name,"clone")},e.prototype.toString=function(){throw new jl(this.constructor.name,"toString")},e.prototype.sizeInBytes=function(){throw new jl(this.constructor.name,"sizeInBytes")},e.prototype.copyBytesInto=function(t,r){throw new jl(this.constructor.name,"copyBytesInto")},e}(),on=function(e){er(t,e);function t(r){var n=e.call(this)||this;return n.numberValue=r,n.stringValue=rCe(r),n}return t.prototype.asNumber=function(){return this.numberValue},t.prototype.value=function(){return this.numberValue},t.prototype.clone=function(){return t.of(this.numberValue)},t.prototype.toString=function(){return this.stringValue},t.prototype.sizeInBytes=function(){return this.stringValue.length},t.prototype.copyBytesInto=function(r,n){return n+=xa(this.stringValue,r,n),this.stringValue.length},t.of=function(r){return new t(r)},t}(hs),Yn=function(e){er(t,e);function t(r){var n=e.call(this)||this;return n.array=[],n.context=r,n}return t.prototype.size=function(){return this.array.length},t.prototype.push=function(r){this.array.push(r)},t.prototype.insert=function(r,n){this.array.splice(r,0,n)},t.prototype.indexOf=function(r){var n=this.array.indexOf(r);return n===-1?void 0:n},t.prototype.remove=function(r){this.array.splice(r,1)},t.prototype.set=function(r,n){this.array[r]=n},t.prototype.get=function(r){return this.array[r]},t.prototype.lookupMaybe=function(r){for(var n,i=[],c=1;c<arguments.length;c++)i[c-1]=arguments[c];return(n=this.context).lookupMaybe.apply(n,jn([this.get(r)],i))},t.prototype.lookup=function(r){for(var n,i=[],c=1;c<arguments.length;c++)i[c-1]=arguments[c];return(n=this.context).lookup.apply(n,jn([this.get(r)],i))},t.prototype.asRectangle=function(){if(this.size()!==4)throw new TEe(this.size());var r=this.lookup(0,on).asNumber(),n=this.lookup(1,on).asNumber(),i=this.lookup(2,on).asNumber(),c=this.lookup(3,on).asNumber(),d=r,y=n,o=i-r,x=c-n;return{x:d,y,width:o,height:x}},t.prototype.asArray=function(){return this.array.slice()},t.prototype.clone=function(r){for(var n=t.withContext(r||this.context),i=0,c=this.size();i<c;i++)n.push(this.array[i]);return n},t.prototype.toString=function(){for(var r="[ ",n=0,i=this.size();n<i;n++)r+=this.get(n).toString(),r+=" ";return r+="]",r},t.prototype.sizeInBytes=function(){for(var r=3,n=0,i=this.size();n<i;n++)r+=this.get(n).sizeInBytes()+1;return r},t.prototype.copyBytesInto=function(r,n){var i=n;r[n++]=ze.LeftSquareBracket,r[n++]=ze.Space;for(var c=0,d=this.size();c<d;c++)n+=this.get(c).copyBytesInto(r,n),r[n++]=ze.Space;return r[n++]=ze.RightSquareBracket,n-i},t.prototype.scalePDFNumbers=function(r,n){for(var i=0,c=this.size();i<c;i++){var d=this.lookup(i);if(d instanceof on){var y=i%2===0?r:n;this.set(i,on.of(d.asNumber()*y))}}},t.withContext=function(r){return new t(r)},t}(hs),JM={},U1=function(e){er(t,e);function t(r,n){var i=this;if(r!==JM)throw new W2("PDFBool");return i=e.call(this)||this,i.value=n,i}return t.prototype.asBoolean=function(){return this.value},t.prototype.clone=function(){return this},t.prototype.toString=function(){return String(this.value)},t.prototype.sizeInBytes=function(){return this.value?4:5},t.prototype.copyBytesInto=function(r,n){return this.value?(r[n++]=ze.t,r[n++]=ze.r,r[n++]=ze.u,r[n++]=ze.e,4):(r[n++]=ze.f,r[n++]=ze.a,r[n++]=ze.l,r[n++]=ze.s,r[n++]=ze.e,5)},t.True=new t(JM,!0),t.False=new t(JM,!1),t}(hs),ic=new Uint8Array(256);ic[ze.LeftParen]=1;ic[ze.RightParen]=1;ic[ze.LessThan]=1;ic[ze.GreaterThan]=1;ic[ze.LeftSquareBracket]=1;ic[ze.RightSquareBracket]=1;ic[ze.LeftCurly]=1;ic[ze.RightCurly]=1;ic[ze.ForwardSlash]=1;ic[ze.Percent]=1;var KA=new Uint8Array(256);KA[ze.Null]=1;KA[ze.Tab]=1;KA[ze.Newline]=1;KA[ze.FormFeed]=1;KA[ze.CarriageReturn]=1;KA[ze.Space]=1;var Z2=new Uint8Array(256);for(var Ry=0,QEe=256;Ry<QEe;Ry++)Z2[Ry]=KA[Ry]||ic[Ry]?1:0;Z2[ze.Hash]=1;var NEe=function(e){return e.replace(/#([\dABCDEF]{2})/g,function(t,r){return LBe(r)})},VEe=function(e){return e>=ze.ExclamationPoint&&e<=ze.Tilde&&!Z2[e]},YN={},JN=new Map,Le=function(e){er(t,e);function t(r,n){var i=this;if(r!==YN)throw new W2("PDFName");i=e.call(this)||this;for(var c="/",d=0,y=n.length;d<y;d++){var o=n[d],x=sn(o);c+=VEe(x)?o:"#"+ZE(x)}return i.encodedName=c,i}return t.prototype.asBytes=function(){for(var r=[],n="",i=!1,c=function(k){k!==void 0&&r.push(k),i=!1},d=1,y=this.encodedName.length;d<y;d++){var o=this.encodedName[d],x=sn(o),S=this.encodedName[d+1];i?x>=ze.Zero&&x<=ze.Nine||x>=ze.a&&x<=ze.f||x>=ze.A&&x<=ze.F?(n+=o,(n.length===2||!(S>="0"&&S<="9"||S>="a"&&S<="f"||S>="A"&&S<="F"))&&(c(parseInt(n,16)),n="")):c(x):x===ze.Hash?i=!0:c(x)}return new Uint8Array(r)},t.prototype.decodeText=function(){var r=this.asBytes();return String.fromCharCode.apply(String,Array.from(r))},t.prototype.asString=function(){return this.encodedName},t.prototype.value=function(){return this.encodedName},t.prototype.clone=function(){return this},t.prototype.toString=function(){return this.encodedName},t.prototype.sizeInBytes=function(){return this.encodedName.length},t.prototype.copyBytesInto=function(r,n){return n+=xa(this.encodedName,r,n),this.encodedName.length},t.of=function(r){var n=NEe(r),i=JN.get(n);return i||(i=new t(YN,n),JN.set(n,i)),i},t.Length=t.of("Length"),t.FlateDecode=t.of("FlateDecode"),t.Resources=t.of("Resources"),t.Font=t.of("Font"),t.XObject=t.of("XObject"),t.ExtGState=t.of("ExtGState"),t.Contents=t.of("Contents"),t.Type=t.of("Type"),t.Parent=t.of("Parent"),t.MediaBox=t.of("MediaBox"),t.Page=t.of("Page"),t.Annots=t.of("Annots"),t.TrimBox=t.of("TrimBox"),t.ArtBox=t.of("ArtBox"),t.BleedBox=t.of("BleedBox"),t.CropBox=t.of("CropBox"),t.Rotate=t.of("Rotate"),t.Title=t.of("Title"),t.Author=t.of("Author"),t.Subject=t.of("Subject"),t.Creator=t.of("Creator"),t.Keywords=t.of("Keywords"),t.Producer=t.of("Producer"),t.CreationDate=t.of("CreationDate"),t.ModDate=t.of("ModDate"),t}(hs),HEe=function(e){er(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.asNull=function(){return null},t.prototype.clone=function(){return this},t.prototype.toString=function(){return"null"},t.prototype.sizeInBytes=function(){return 4},t.prototype.copyBytesInto=function(r,n){return r[n++]=ze.n,r[n++]=ze.u,r[n++]=ze.l,r[n++]=ze.l,4},t}(hs);const Bs=new HEe;var pn=function(e){er(t,e);function t(r,n){var i=e.call(this)||this;return i.dict=r,i.context=n,i}return t.prototype.keys=function(){return Array.from(this.dict.keys())},t.prototype.values=function(){return Array.from(this.dict.values())},t.prototype.entries=function(){return Array.from(this.dict.entries())},t.prototype.set=function(r,n){this.dict.set(r,n)},t.prototype.get=function(r,n){n===void 0&&(n=!1);var i=this.dict.get(r);if(!(i===Bs&&!n))return i},t.prototype.has=function(r){var n=this.dict.get(r);return n!==void 0&&n!==Bs},t.prototype.lookupMaybe=function(r){for(var n,i=[],c=1;c<arguments.length;c++)i[c-1]=arguments[c];var d=i.includes(Bs),y=(n=this.context).lookupMaybe.apply(n,jn([this.get(r,d)],i));if(!(y===Bs&&!d))return y},t.prototype.lookup=function(r){for(var n,i=[],c=1;c<arguments.length;c++)i[c-1]=arguments[c];var d=i.includes(Bs),y=(n=this.context).lookup.apply(n,jn([this.get(r,d)],i));if(!(y===Bs&&!d))return y},t.prototype.delete=function(r){return this.dict.delete(r)},t.prototype.asMap=function(){return new Map(this.dict)},t.prototype.uniqueKey=function(r){r===void 0&&(r="");for(var n=this.keys(),i=Le.of(this.context.addRandomSuffix(r,10));n.includes(i);)i=Le.of(this.context.addRandomSuffix(r,10));return i},t.prototype.clone=function(r){for(var n=t.withContext(r||this.context),i=this.entries(),c=0,d=i.length;c<d;c++){var y=i[c],o=y[0],x=y[1];n.set(o,x)}return n},t.prototype.toString=function(){for(var r=`<<
`,n=this.entries(),i=0,c=n.length;i<c;i++){var d=n[i],y=d[0],o=d[1];r+=y.toString()+" "+o.toString()+`
`}return r+=">>",r},t.prototype.sizeInBytes=function(){for(var r=5,n=this.entries(),i=0,c=n.length;i<c;i++){var d=n[i],y=d[0],o=d[1];r+=y.sizeInBytes()+o.sizeInBytes()+2}return r},t.prototype.copyBytesInto=function(r,n){var i=n;r[n++]=ze.LessThan,r[n++]=ze.LessThan,r[n++]=ze.Newline;for(var c=this.entries(),d=0,y=c.length;d<y;d++){var o=c[d],x=o[0],S=o[1];n+=x.copyBytesInto(r,n),r[n++]=ze.Space,n+=S.copyBytesInto(r,n),r[n++]=ze.Newline}return r[n++]=ze.GreaterThan,r[n++]=ze.GreaterThan,n-i},t.withContext=function(r){return new t(new Map,r)},t.fromMapWithContext=function(r,n){return new t(r,n)},t}(hs),ol=function(e){er(t,e);function t(r){var n=e.call(this)||this;return n.dict=r,n}return t.prototype.clone=function(r){throw new jl(this.constructor.name,"clone")},t.prototype.getContentsString=function(){throw new jl(this.constructor.name,"getContentsString")},t.prototype.getContents=function(){throw new jl(this.constructor.name,"getContents")},t.prototype.getContentsSize=function(){throw new jl(this.constructor.name,"getContentsSize")},t.prototype.updateDict=function(){var r=this.getContentsSize();this.dict.set(Le.Length,on.of(r))},t.prototype.sizeInBytes=function(){return this.updateDict(),this.dict.sizeInBytes()+this.getContentsSize()+18},t.prototype.toString=function(){this.updateDict();var r=this.dict.toString();return r+=`
stream
`,r+=this.getContentsString(),r+=`
endstream`,r},t.prototype.copyBytesInto=function(r,n){this.updateDict();var i=n;n+=this.dict.copyBytesInto(r,n),r[n++]=ze.Newline,r[n++]=ze.s,r[n++]=ze.t,r[n++]=ze.r,r[n++]=ze.e,r[n++]=ze.a,r[n++]=ze.m,r[n++]=ze.Newline;for(var c=this.getContents(),d=0,y=c.length;d<y;d++)r[n++]=c[d];return r[n++]=ze.Newline,r[n++]=ze.e,r[n++]=ze.n,r[n++]=ze.d,r[n++]=ze.s,r[n++]=ze.t,r[n++]=ze.r,r[n++]=ze.e,r[n++]=ze.a,r[n++]=ze.m,n-i},t}(hs),z1=function(e){er(t,e);function t(r,n){var i=e.call(this,r)||this;return i.contents=n,i}return t.prototype.asUint8Array=function(){return this.contents.slice()},t.prototype.clone=function(r){return t.of(this.dict.clone(r),this.contents.slice())},t.prototype.getContentsString=function(){return WK(this.contents)},t.prototype.getContents=function(){return this.contents},t.prototype.getContentsSize=function(){return this.contents.length},t.of=function(r,n){return new t(r,n)},t}(ol),$N={},eV=new Map,ui=function(e){er(t,e);function t(r,n,i){var c=this;if(r!==$N)throw new W2("PDFRef");return c=e.call(this)||this,c.objectNumber=n,c.generationNumber=i,c.tag=n+" "+i+" R",c}return t.prototype.clone=function(){return this},t.prototype.toString=function(){return this.tag},t.prototype.sizeInBytes=function(){return this.tag.length},t.prototype.copyBytesInto=function(r,n){return n+=xa(this.tag,r,n),this.tag.length},t.of=function(r,n){n===void 0&&(n=0);var i=r+" "+n+" R",c=eV.get(i);return c||(c=new t($N,r,n),eV.set(i,c)),c},t}(hs),Un=function(){function e(t,r){this.name=t,this.args=r||[]}return e.prototype.clone=function(t){for(var r=new Array(this.args.length),n=0,i=r.length;n<i;n++){var c=this.args[n];r[n]=c instanceof hs?c.clone(t):c}return e.of(this.name,r)},e.prototype.toString=function(){for(var t="",r=0,n=this.args.length;r<n;r++)t+=String(this.args[r])+" ";return t+=this.name,t},e.prototype.sizeInBytes=function(){for(var t=0,r=0,n=this.args.length;r<n;r++){var i=this.args[r];t+=(i instanceof hs?i.sizeInBytes():i.length)+1}return t+=this.name.length,t},e.prototype.copyBytesInto=function(t,r){for(var n=r,i=0,c=this.args.length;i<c;i++){var d=this.args[i];d instanceof hs?r+=d.copyBytesInto(t,r):r+=xa(d,t,r),t[r++]=ze.Space}return r+=xa(this.name,t,r),r-n},e.of=function(t,r){return new e(t,r)},e}(),AD;(function(e){e.NonStrokingColor="sc",e.NonStrokingColorN="scn",e.NonStrokingColorRgb="rg",e.NonStrokingColorGray="g",e.NonStrokingColorCmyk="k",e.NonStrokingColorspace="cs",e.StrokingColor="SC",e.StrokingColorN="SCN",e.StrokingColorRgb="RG",e.StrokingColorGray="G",e.StrokingColorCmyk="K",e.StrokingColorspace="CS",e.BeginMarkedContentSequence="BDC",e.BeginMarkedContent="BMC",e.EndMarkedContent="EMC",e.MarkedContentPointWithProps="DP",e.MarkedContentPoint="MP",e.DrawObject="Do",e.ConcatTransformationMatrix="cm",e.PopGraphicsState="Q",e.PushGraphicsState="q",e.SetFlatness="i",e.SetGraphicsStateParams="gs",e.SetLineCapStyle="J",e.SetLineDashPattern="d",e.SetLineJoinStyle="j",e.SetLineMiterLimit="M",e.SetLineWidth="w",e.SetTextMatrix="Tm",e.SetRenderingIntent="ri",e.AppendRectangle="re",e.BeginInlineImage="BI",e.BeginInlineImageData="ID",e.EndInlineImage="EI",e.ClipEvenOdd="W*",e.ClipNonZero="W",e.CloseAndStroke="s",e.CloseFillEvenOddAndStroke="b*",e.CloseFillNonZeroAndStroke="b",e.ClosePath="h",e.AppendBezierCurve="c",e.CurveToReplicateFinalPoint="y",e.CurveToReplicateInitialPoint="v",e.EndPath="n",e.FillEvenOddAndStroke="B*",e.FillEvenOdd="f*",e.FillNonZeroAndStroke="B",e.FillNonZero="f",e.LegacyFillNonZero="F",e.LineTo="l",e.MoveTo="m",e.ShadingFill="sh",e.StrokePath="S",e.BeginText="BT",e.EndText="ET",e.MoveText="Td",e.MoveTextSetLeading="TD",e.NextLine="T*",e.SetCharacterSpacing="Tc",e.SetFontAndSize="Tf",e.SetTextHorizontalScaling="Tz",e.SetTextLineHeight="TL",e.SetTextRenderingMode="Tr",e.SetTextRise="Ts",e.SetWordSpacing="Tw",e.ShowText="Tj",e.ShowTextAdjusted="TJ",e.ShowTextLine="'",e.ShowTextLineAndSpace='"',e.Type3D0="d0",e.Type3D1="d1",e.BeginCompatibilitySection="BX",e.EndCompatibilitySection="EX"})(AD||(AD={}));const Gn=AD;var Y2=function(e){er(t,e);function t(r,n){var i=e.call(this,r)||this;return i.computeContents=function(){var c=i.getUnencodedContents();return i.encode?eT.deflate(c):c},i.encode=n,n&&r.set(Le.of("Filter"),Le.of("FlateDecode")),i.contentsCache=PA.populatedBy(i.computeContents),i}return t.prototype.getContents=function(){return this.contentsCache.access()},t.prototype.getContentsSize=function(){return this.contentsCache.access().length},t.prototype.getUnencodedContents=function(){throw new jl(this.constructor.name,"getUnencodedContents")},t}(ol),G_=function(e){er(t,e);function t(r,n,i){i===void 0&&(i=!0);var c=e.call(this,r,i)||this;return c.operators=n,c}return t.prototype.push=function(){for(var r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];(r=this.operators).push.apply(r,n)},t.prototype.clone=function(r){for(var n=new Array(this.operators.length),i=0,c=this.operators.length;i<c;i++)n[i]=this.operators[i].clone(r);var d=this,y=d.dict,o=d.encode;return t.of(y.clone(r),n,o)},t.prototype.getContentsString=function(){for(var r="",n=0,i=this.operators.length;n<i;n++)r+=this.operators[n]+`
`;return r},t.prototype.getUnencodedContents=function(){for(var r=new Uint8Array(this.getUnencodedContentsSize()),n=0,i=0,c=this.operators.length;i<c;i++)n+=this.operators[i].copyBytesInto(r,n),r[n++]=ze.Newline;return r},t.prototype.getUnencodedContentsSize=function(){for(var r=0,n=0,i=this.operators.length;n<i;n++)r+=this.operators[n].sizeInBytes()+1;return r},t.of=function(r,n,i){return i===void 0&&(i=!0),new t(r,n,i)},t}(Y2),jEe=function(){function e(t){this.seed=t}return e.prototype.nextInt=function(){var t=Math.sin(this.seed++)*1e4;return t-Math.floor(t)},e.withSeed=function(t){return new e(t)},e}(),GEe=function(e,t){var r=e[0],n=t[0];return r.objectNumber-n.objectNumber},hD=function(){function e(){this.largestObjectNumber=0,this.header=nT.forVersion(1,7),this.trailerInfo={},this.indirectObjects=new Map,this.rng=jEe.withSeed(1)}return e.prototype.assign=function(t,r){this.indirectObjects.set(t,r),t.objectNumber>this.largestObjectNumber&&(this.largestObjectNumber=t.objectNumber)},e.prototype.nextRef=function(){return this.largestObjectNumber+=1,ui.of(this.largestObjectNumber)},e.prototype.register=function(t){var r=this.nextRef();return this.assign(r,t),r},e.prototype.delete=function(t){return this.indirectObjects.delete(t)},e.prototype.lookupMaybe=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=r.includes(Bs),c=t instanceof ui?this.indirectObjects.get(t):t;if(!(!c||c===Bs&&!i)){for(var d=0,y=r.length;d<y;d++){var o=r[d];if(o===Bs){if(c===Bs)return c}else if(c instanceof o)return c}throw new ES(r,c)}},e.prototype.lookup=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=t instanceof ui?this.indirectObjects.get(t):t;if(r.length===0)return i;for(var c=0,d=r.length;c<d;c++){var y=r[c];if(y===Bs){if(i===Bs)return i}else if(i instanceof y)return i}throw new ES(r,i)},e.prototype.getObjectRef=function(t){for(var r=Array.from(this.indirectObjects.entries()),n=0,i=r.length;n<i;n++){var c=r[n],d=c[0],y=c[1];if(y===t)return d}},e.prototype.enumerateIndirectObjects=function(){return Array.from(this.indirectObjects.entries()).sort(GEe)},e.prototype.obj=function(t){if(t instanceof hs)return t;if(t==null)return Bs;if(typeof t=="string")return Le.of(t);if(typeof t=="number")return on.of(t);if(typeof t=="boolean")return t?U1.True:U1.False;if(Array.isArray(t)){for(var r=Yn.withContext(this),n=0,i=t.length;n<i;n++)r.push(this.obj(t[n]));return r}else{for(var c=pn.withContext(this),d=Object.keys(t),n=0,i=d.length;n<i;n++){var y=d[n],o=t[y];o!==void 0&&c.set(Le.of(y),this.obj(o))}return c}},e.prototype.stream=function(t,r){return r===void 0&&(r={}),z1.of(this.obj(r),tD(t))},e.prototype.flateStream=function(t,r){return r===void 0&&(r={}),this.stream(eT.deflate(tD(t)),ln(ln({},r),{Filter:"FlateDecode"}))},e.prototype.contentStream=function(t,r){return r===void 0&&(r={}),G_.of(this.obj(r),t)},e.prototype.formXObject=function(t,r){return r===void 0&&(r={}),this.contentStream(t,ln(ln({BBox:this.obj([0,0,0,0]),Matrix:this.obj([1,0,0,1,0,0])},r),{Type:"XObject",Subtype:"Form"}))},e.prototype.getPushGraphicsStateContentStream=function(){if(this.pushGraphicsStateContentStreamRef)return this.pushGraphicsStateContentStreamRef;var t=this.obj({}),r=Un.of(Gn.PushGraphicsState),n=G_.of(t,[r]);return this.pushGraphicsStateContentStreamRef=this.register(n),this.pushGraphicsStateContentStreamRef},e.prototype.getPopGraphicsStateContentStream=function(){if(this.popGraphicsStateContentStreamRef)return this.popGraphicsStateContentStreamRef;var t=this.obj({}),r=Un.of(Gn.PopGraphicsState),n=G_.of(t,[r]);return this.popGraphicsStateContentStreamRef=this.register(n),this.popGraphicsStateContentStreamRef},e.prototype.addRandomSuffix=function(t,r){return r===void 0&&(r=4),t+"-"+Math.floor(this.rng.nextInt()*Math.pow(10,r))},e.create=function(){return new e},e}(),DA=function(e){er(t,e);function t(r,n,i){i===void 0&&(i=!0);var c=e.call(this,r,n)||this;return c.normalized=!1,c.autoNormalizeCTM=i,c}return t.prototype.clone=function(r){for(var n=t.fromMapWithContext(new Map,r||this.context,this.autoNormalizeCTM),i=this.entries(),c=0,d=i.length;c<d;c++){var y=i[c],o=y[0],x=y[1];n.set(o,x)}return n},t.prototype.Parent=function(){return this.lookupMaybe(Le.Parent,pn)},t.prototype.Contents=function(){return this.lookup(Le.of("Contents"))},t.prototype.Annots=function(){return this.lookupMaybe(Le.Annots,Yn)},t.prototype.BleedBox=function(){return this.lookupMaybe(Le.BleedBox,Yn)},t.prototype.TrimBox=function(){return this.lookupMaybe(Le.TrimBox,Yn)},t.prototype.ArtBox=function(){return this.lookupMaybe(Le.ArtBox,Yn)},t.prototype.Resources=function(){var r=this.getInheritableAttribute(Le.Resources);return this.context.lookupMaybe(r,pn)},t.prototype.MediaBox=function(){var r=this.getInheritableAttribute(Le.MediaBox);return this.context.lookup(r,Yn)},t.prototype.CropBox=function(){var r=this.getInheritableAttribute(Le.CropBox);return this.context.lookupMaybe(r,Yn)},t.prototype.Rotate=function(){var r=this.getInheritableAttribute(Le.Rotate);return this.context.lookupMaybe(r,on)},t.prototype.getInheritableAttribute=function(r){var n;return this.ascend(function(i){n||(n=i.get(r))}),n},t.prototype.setParent=function(r){this.set(Le.Parent,r)},t.prototype.addContentStream=function(r){var n=this.normalizedEntries().Contents||this.context.obj([]);this.set(Le.Contents,n),n.push(r)},t.prototype.wrapContentStreams=function(r,n){var i=this.Contents();return i instanceof Yn?(i.insert(0,r),i.push(n),!0):!1},t.prototype.addAnnot=function(r){var n=this.normalizedEntries().Annots;n.push(r)},t.prototype.removeAnnot=function(r){var n=this.normalizedEntries().Annots,i=n.indexOf(r);i!==void 0&&n.remove(i)},t.prototype.setFontDictionary=function(r,n){var i=this.normalizedEntries().Font;i.set(r,n)},t.prototype.newFontDictionaryKey=function(r){var n=this.normalizedEntries().Font;return n.uniqueKey(r)},t.prototype.newFontDictionary=function(r,n){var i=this.newFontDictionaryKey(r);return this.setFontDictionary(i,n),i},t.prototype.setXObject=function(r,n){var i=this.normalizedEntries().XObject;i.set(r,n)},t.prototype.newXObjectKey=function(r){var n=this.normalizedEntries().XObject;return n.uniqueKey(r)},t.prototype.newXObject=function(r,n){var i=this.newXObjectKey(r);return this.setXObject(i,n),i},t.prototype.setExtGState=function(r,n){var i=this.normalizedEntries().ExtGState;i.set(r,n)},t.prototype.newExtGStateKey=function(r){var n=this.normalizedEntries().ExtGState;return n.uniqueKey(r)},t.prototype.newExtGState=function(r,n){var i=this.newExtGStateKey(r);return this.setExtGState(i,n),i},t.prototype.ascend=function(r){r(this);var n=this.Parent();n&&n.ascend(r)},t.prototype.normalize=function(){if(!this.normalized){var r=this.context,n=this.get(Le.Contents),i=this.context.lookup(n);i instanceof ol&&this.set(Le.Contents,r.obj([n])),this.autoNormalizeCTM&&this.wrapContentStreams(this.context.getPushGraphicsStateContentStream(),this.context.getPopGraphicsStateContentStream());var c=this.getInheritableAttribute(Le.Resources),d=r.lookupMaybe(c,pn)||r.obj({});this.set(Le.Resources,d);var y=d.lookupMaybe(Le.Font,pn)||r.obj({});d.set(Le.Font,y);var o=d.lookupMaybe(Le.XObject,pn)||r.obj({});d.set(Le.XObject,o);var x=d.lookupMaybe(Le.ExtGState,pn)||r.obj({});d.set(Le.ExtGState,x);var S=this.Annots()||r.obj([]);this.set(Le.Annots,S),this.normalized=!0}},t.prototype.normalizedEntries=function(){this.normalize();var r=this.Annots(),n=this.Resources(),i=this.Contents();return{Annots:r,Resources:n,Contents:i,Font:n.lookup(Le.Font,pn),XObject:n.lookup(Le.XObject,pn),ExtGState:n.lookup(Le.ExtGState,pn)}},t.InheritableEntries=["Resources","MediaBox","CropBox","Rotate"],t.withContextAndParent=function(r,n){var i=new Map;return i.set(Le.Type,Le.Page),i.set(Le.Parent,n),i.set(Le.Resources,r.obj({})),i.set(Le.MediaBox,r.obj([0,0,612,792])),new t(i,r,!1)},t.fromMapWithContext=function(r,n,i){return i===void 0&&(i=!0),new t(r,n,i)},t}(pn),tV=function(){function e(t,r){var n=this;this.traversedObjects=new Map,this.copy=function(i){return i instanceof DA?n.copyPDFPage(i):i instanceof pn?n.copyPDFDict(i):i instanceof Yn?n.copyPDFArray(i):i instanceof ol?n.copyPDFStream(i):i instanceof ui?n.copyPDFIndirectObject(i):i.clone()},this.copyPDFPage=function(i){for(var c=i.clone(),d=DA.InheritableEntries,y=0,o=d.length;y<o;y++){var x=Le.of(d[y]),S=c.getInheritableAttribute(x);!c.get(x)&&S&&c.set(x,S)}return c.delete(Le.of("Parent")),n.copyPDFDict(c)},this.copyPDFDict=function(i){if(n.traversedObjects.has(i))return n.traversedObjects.get(i);var c=i.clone(n.dest);n.traversedObjects.set(i,c);for(var d=i.entries(),y=0,o=d.length;y<o;y++){var x=d[y],S=x[0],k=x[1];c.set(S,n.copy(k))}return c},this.copyPDFArray=function(i){if(n.traversedObjects.has(i))return n.traversedObjects.get(i);var c=i.clone(n.dest);n.traversedObjects.set(i,c);for(var d=0,y=i.size();d<y;d++){var o=i.get(d);c.set(d,n.copy(o))}return c},this.copyPDFStream=function(i){if(n.traversedObjects.has(i))return n.traversedObjects.get(i);var c=i.clone(n.dest);n.traversedObjects.set(i,c);for(var d=i.dict.entries(),y=0,o=d.length;y<o;y++){var x=d[y],S=x[0],k=x[1];c.dict.set(S,n.copy(k))}return c},this.copyPDFIndirectObject=function(i){var c=n.traversedObjects.has(i);if(!c){var d=n.dest.nextRef();n.traversedObjects.set(i,d);var y=n.src.lookup(i);if(y){var o=n.copy(y);n.dest.assign(d,o)}}return n.traversedObjects.get(i)},this.src=t,this.dest=r}return e.for=function(t,r){return new e(t,r)},e}(),KW=function(){function e(t){this.subsections=t?[[t]]:[],this.chunkIdx=0,this.chunkLength=t?1:0}return e.prototype.addEntry=function(t,r){this.append({ref:t,offset:r,deleted:!1})},e.prototype.addDeletedEntry=function(t,r){this.append({ref:t,offset:r,deleted:!0})},e.prototype.toString=function(){for(var t=`xref
`,r=0,n=this.subsections.length;r<n;r++){var i=this.subsections[r];t+=i[0].ref.objectNumber+" "+i.length+`
`;for(var c=0,d=i.length;c<d;c++){var y=i[c];t+=Fc(String(y.offset),10,"0"),t+=" ",t+=Fc(String(y.ref.generationNumber),5,"0"),t+=" ",t+=y.deleted?"f":"n",t+=` 
`}}return t},e.prototype.sizeInBytes=function(){for(var t=5,r=0,n=this.subsections.length;r<n;r++){var i=this.subsections[r],c=i.length,d=i[0];t+=2,t+=String(d.ref.objectNumber).length,t+=String(c).length,t+=20*c}return t},e.prototype.copyBytesInto=function(t,r){var n=r;return t[r++]=ze.x,t[r++]=ze.r,t[r++]=ze.e,t[r++]=ze.f,t[r++]=ze.Newline,r+=this.copySubsectionsIntoBuffer(this.subsections,t,r),r-n},e.prototype.copySubsectionsIntoBuffer=function(t,r,n){for(var i=n,c=t.length,d=0;d<c;d++){var y=this.subsections[d],o=String(y[0].ref.objectNumber);n+=xa(o,r,n),r[n++]=ze.Space;var x=String(y.length);n+=xa(x,r,n),r[n++]=ze.Newline,n+=this.copyEntriesIntoBuffer(y,r,n)}return n-i},e.prototype.copyEntriesIntoBuffer=function(t,r,n){for(var i=t.length,c=0;c<i;c++){var d=t[c],y=Fc(String(d.offset),10,"0");n+=xa(y,r,n),r[n++]=ze.Space;var o=Fc(String(d.ref.generationNumber),5,"0");n+=xa(o,r,n),r[n++]=ze.Space,r[n++]=d.deleted?ze.f:ze.n,r[n++]=ze.Space,r[n++]=ze.Newline}return 20*i},e.prototype.append=function(t){if(this.chunkLength===0){this.subsections.push([t]),this.chunkIdx=0,this.chunkLength=1;return}var r=this.subsections[this.chunkIdx],n=r[this.chunkLength-1];t.ref.objectNumber-n.ref.objectNumber>1?(this.subsections.push([t]),this.chunkIdx+=1,this.chunkLength=1):(r.push(t),this.chunkLength+=1)},e.create=function(){return new e({ref:ui.of(0,65535),offset:0,deleted:!0})},e.createEmpty=function(){return new e},e}(),J2=function(){function e(t){this.lastXRefOffset=String(t)}return e.prototype.toString=function(){return`startxref
`+this.lastXRefOffset+`
%%EOF`},e.prototype.sizeInBytes=function(){return 16+this.lastXRefOffset.length},e.prototype.copyBytesInto=function(t,r){var n=r;return t[r++]=ze.s,t[r++]=ze.t,t[r++]=ze.a,t[r++]=ze.r,t[r++]=ze.t,t[r++]=ze.x,t[r++]=ze.r,t[r++]=ze.e,t[r++]=ze.f,t[r++]=ze.Newline,r+=xa(this.lastXRefOffset,t,r),t[r++]=ze.Newline,t[r++]=ze.Percent,t[r++]=ze.Percent,t[r++]=ze.E,t[r++]=ze.O,t[r++]=ze.F,r-n},e.forLastCrossRefSectionOffset=function(t){return new e(t)},e}(),KEe=function(){function e(t){this.dict=t}return e.prototype.toString=function(){return`trailer
`+this.dict.toString()},e.prototype.sizeInBytes=function(){return 8+this.dict.sizeInBytes()},e.prototype.copyBytesInto=function(t,r){var n=r;return t[r++]=ze.t,t[r++]=ze.r,t[r++]=ze.a,t[r++]=ze.i,t[r++]=ze.l,t[r++]=ze.e,t[r++]=ze.r,t[r++]=ze.Newline,r+=this.dict.copyBytesInto(t,r),r-n},e.of=function(t){return new e(t)},e}(),WW=function(e){er(t,e);function t(r,n,i){i===void 0&&(i=!0);var c=e.call(this,r.obj({}),i)||this;return c.objects=n,c.offsets=c.computeObjectOffsets(),c.offsetsString=c.computeOffsetsString(),c.dict.set(Le.of("Type"),Le.of("ObjStm")),c.dict.set(Le.of("N"),on.of(c.objects.length)),c.dict.set(Le.of("First"),on.of(c.offsetsString.length)),c}return t.prototype.getObjectsCount=function(){return this.objects.length},t.prototype.clone=function(r){return t.withContextAndObjects(r||this.dict.context,this.objects.slice(),this.encode)},t.prototype.getContentsString=function(){for(var r=this.offsetsString,n=0,i=this.objects.length;n<i;n++){var c=this.objects[n],d=c[1];r+=d+`
`}return r},t.prototype.getUnencodedContents=function(){for(var r=new Uint8Array(this.getUnencodedContentsSize()),n=xa(this.offsetsString,r,0),i=0,c=this.objects.length;i<c;i++){var d=this.objects[i],y=d[1];n+=y.copyBytesInto(r,n),r[n++]=ze.Newline}return r},t.prototype.getUnencodedContentsSize=function(){return this.offsetsString.length+BS(this.offsets)[1]+BS(this.objects)[1].sizeInBytes()+1},t.prototype.computeOffsetsString=function(){for(var r="",n=0,i=this.offsets.length;n<i;n++){var c=this.offsets[n],d=c[0],y=c[1];r+=d+" "+y+" "}return r},t.prototype.computeObjectOffsets=function(){for(var r=0,n=new Array(this.objects.length),i=0,c=this.objects.length;i<c;i++){var d=this.objects[i],y=d[0],o=d[1];n[i]=[y.objectNumber,r],r+=o.sizeInBytes()+1}return n},t.withContextAndObjects=function(r,n,i){return i===void 0&&(i=!0),new t(r,n,i)},t}(Y2),qW=function(){function e(t,r){var n=this;this.parsedObjects=0,this.shouldWaitForTick=function(i){return n.parsedObjects+=i,n.parsedObjects%n.objectsPerTick===0},this.context=t,this.objectsPerTick=r}return e.prototype.serializeToBuffer=function(){return yn(this,void 0,void 0,function(){var t,r,n,i,c,d,y,o,x,S,k,O,Q,G,K,ee,W;return _n(this,function(J){switch(J.label){case 0:return[4,this.computeBufferSize()];case 1:t=J.sent(),r=t.size,n=t.header,i=t.indirectObjects,c=t.xref,d=t.trailerDict,y=t.trailer,o=0,x=new Uint8Array(r),o+=n.copyBytesInto(x,o),x[o++]=ze.Newline,x[o++]=ze.Newline,S=0,k=i.length,J.label=2;case 2:return S<k?(O=i[S],Q=O[0],G=O[1],K=String(Q.objectNumber),o+=xa(K,x,o),x[o++]=ze.Space,ee=String(Q.generationNumber),o+=xa(ee,x,o),x[o++]=ze.Space,x[o++]=ze.o,x[o++]=ze.b,x[o++]=ze.j,x[o++]=ze.Newline,o+=G.copyBytesInto(x,o),x[o++]=ze.Newline,x[o++]=ze.e,x[o++]=ze.n,x[o++]=ze.d,x[o++]=ze.o,x[o++]=ze.b,x[o++]=ze.j,x[o++]=ze.Newline,x[o++]=ze.Newline,W=G instanceof WW?G.getObjectsCount():1,this.shouldWaitForTick(W)?[4,g0()]:[3,4]):[3,5];case 3:J.sent(),J.label=4;case 4:return S++,[3,2];case 5:return c&&(o+=c.copyBytesInto(x,o),x[o++]=ze.Newline),d&&(o+=d.copyBytesInto(x,o),x[o++]=ze.Newline,x[o++]=ze.Newline),o+=y.copyBytesInto(x,o),[2,x]}})})},e.prototype.computeIndirectObjectSize=function(t){var r=t[0],n=t[1],i=r.sizeInBytes()+3,c=n.sizeInBytes()+9;return i+c},e.prototype.createTrailerDict=function(){return this.context.obj({Size:this.context.largestObjectNumber+1,Root:this.context.trailerInfo.Root,Encrypt:this.context.trailerInfo.Encrypt,Info:this.context.trailerInfo.Info,ID:this.context.trailerInfo.ID})},e.prototype.computeBufferSize=function(){return yn(this,void 0,void 0,function(){var t,r,n,i,c,d,y,o,x,S,k;return _n(this,function(O){switch(O.label){case 0:t=nT.forVersion(1,7),r=t.sizeInBytes()+2,n=KW.create(),i=this.context.enumerateIndirectObjects(),c=0,d=i.length,O.label=1;case 1:return c<d?(y=i[c],o=y[0],n.addEntry(o,r),r+=this.computeIndirectObjectSize(y),this.shouldWaitForTick(1)?[4,g0()]:[3,3]):[3,4];case 2:O.sent(),O.label=3;case 3:return c++,[3,1];case 4:return x=r,r+=n.sizeInBytes()+1,S=KEe.of(this.createTrailerDict()),r+=S.sizeInBytes()+2,k=J2.forLastCrossRefSectionOffset(x),r+=k.sizeInBytes(),[2,{size:r,header:t,indirectObjects:i,xref:n,trailerDict:S,trailer:k}]}})})},e.forContext=function(t,r){return new e(t,r)},e}(),XW=function(e){er(t,e);function t(r){var n=e.call(this)||this;return n.data=r,n}return t.prototype.clone=function(){return t.of(this.data.slice())},t.prototype.toString=function(){return"PDFInvalidObject("+this.data.length+" bytes)"},t.prototype.sizeInBytes=function(){return this.data.length},t.prototype.copyBytesInto=function(r,n){for(var i=this.data.length,c=0;c<i;c++)r[n++]=this.data[c];return i},t.of=function(r){return new t(r)},t}(hs),ed;(function(e){e[e.Deleted=0]="Deleted",e[e.Uncompressed=1]="Uncompressed",e[e.Compressed=2]="Compressed"})(ed||(ed={}));var WEe=function(e){er(t,e);function t(r,n,i){i===void 0&&(i=!0);var c=e.call(this,r,i)||this;return c.computeIndex=function(){for(var d=[],y=0,o=0,x=c.entries.length;o<x;o++){var S=c.entries[o],k=c.entries[o-1];o===0?d.push(S.ref.objectNumber):S.ref.objectNumber-k.ref.objectNumber>1&&(d.push(y),d.push(S.ref.objectNumber),y=0),y+=1}return d.push(y),d},c.computeEntryTuples=function(){for(var d=new Array(c.entries.length),y=0,o=c.entries.length;y<o;y++){var x=c.entries[y];if(x.type===ed.Deleted){var S=x.type,k=x.nextFreeObjectNumber,O=x.ref;d[y]=[S,k,O.generationNumber]}if(x.type===ed.Uncompressed){var S=x.type,Q=x.offset,O=x.ref;d[y]=[S,Q,O.generationNumber]}if(x.type===ed.Compressed){var S=x.type,G=x.objectStreamRef,K=x.index;d[y]=[S,G.objectNumber,K]}}return d},c.computeMaxEntryByteWidths=function(){for(var d=c.entryTuplesCache.access(),y=[0,0,0],o=0,x=d.length;o<x;o++){var S=d[o],k=S[0],O=S[1],Q=S[2],G=sC(k),K=sC(O),ee=sC(Q);G>y[0]&&(y[0]=G),K>y[1]&&(y[1]=K),ee>y[2]&&(y[2]=ee)}return y},c.entries=n||[],c.entryTuplesCache=PA.populatedBy(c.computeEntryTuples),c.maxByteWidthsCache=PA.populatedBy(c.computeMaxEntryByteWidths),c.indexCache=PA.populatedBy(c.computeIndex),r.set(Le.of("Type"),Le.of("XRef")),c}return t.prototype.addDeletedEntry=function(r,n){var i=ed.Deleted;this.entries.push({type:i,ref:r,nextFreeObjectNumber:n}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},t.prototype.addUncompressedEntry=function(r,n){var i=ed.Uncompressed;this.entries.push({type:i,ref:r,offset:n}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},t.prototype.addCompressedEntry=function(r,n,i){var c=ed.Compressed;this.entries.push({type:c,ref:r,objectStreamRef:n,index:i}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},t.prototype.clone=function(r){var n=this,i=n.dict,c=n.entries,d=n.encode;return t.of(i.clone(r),c.slice(),d)},t.prototype.getContentsString=function(){for(var r=this.entryTuplesCache.access(),n=this.maxByteWidthsCache.access(),i="",c=0,d=r.length;c<d;c++){for(var y=r[c],o=y[0],x=y[1],S=y[2],k=$m(eg(o)),O=$m(eg(x)),Q=$m(eg(S)),G=n[0]-1;G>=0;G--)i+=(k[G]||0).toString(2);for(var G=n[1]-1;G>=0;G--)i+=(O[G]||0).toString(2);for(var G=n[2]-1;G>=0;G--)i+=(Q[G]||0).toString(2)}return i},t.prototype.getUnencodedContents=function(){for(var r=this.entryTuplesCache.access(),n=this.maxByteWidthsCache.access(),i=new Uint8Array(this.getUnencodedContentsSize()),c=0,d=0,y=r.length;d<y;d++){for(var o=r[d],x=o[0],S=o[1],k=o[2],O=$m(eg(x)),Q=$m(eg(S)),G=$m(eg(k)),K=n[0]-1;K>=0;K--)i[c++]=O[K]||0;for(var K=n[1]-1;K>=0;K--)i[c++]=Q[K]||0;for(var K=n[2]-1;K>=0;K--)i[c++]=G[K]||0}return i},t.prototype.getUnencodedContentsSize=function(){var r=this.maxByteWidthsCache.access(),n=WBe(r);return n*this.entries.length},t.prototype.updateDict=function(){e.prototype.updateDict.call(this);var r=this.maxByteWidthsCache.access(),n=this.indexCache.access(),i=this.dict.context;this.dict.set(Le.of("W"),i.obj(r)),this.dict.set(Le.of("Index"),i.obj(n))},t.create=function(r,n){n===void 0&&(n=!0);var i=new t(r,[],n);return i.addDeletedEntry(ui.of(0,65535),0),i},t.of=function(r,n,i){return i===void 0&&(i=!0),new t(r,n,i)},t}(Y2),qEe=function(e){er(t,e);function t(r,n,i,c){var d=e.call(this,r,n)||this;return d.encodeStreams=i,d.objectsPerStream=c,d}return t.prototype.computeBufferSize=function(){return yn(this,void 0,void 0,function(){var r,n,i,c,d,y,o,x,G,K,S,W,k,O,ee,Q,G,K,ee,W,J,re,ue,ce;return _n(this,function(he){switch(he.label){case 0:r=this.context.largestObjectNumber+1,n=nT.forVersion(1,7),i=n.sizeInBytes()+2,c=WEe.create(this.createTrailerDict(),this.encodeStreams),d=[],y=[],o=[],x=this.context.enumerateIndirectObjects(),G=0,K=x.length,he.label=1;case 1:return G<K?(S=x[G],W=S[0],k=S[1],O=W===this.context.trailerInfo.Encrypt||k instanceof ol||k instanceof XW||W.generationNumber!==0,O?(d.push(S),c.addUncompressedEntry(W,i),i+=this.computeIndirectObjectSize(S),this.shouldWaitForTick(1)?[4,g0()]:[3,3]):[3,4]):[3,6];case 2:he.sent(),he.label=3;case 3:return[3,5];case 4:ee=BS(y),Q=BS(o),(!ee||ee.length%this.objectsPerStream===0)&&(ee=[],y.push(ee),Q=ui.of(r++),o.push(Q)),c.addCompressedEntry(W,Q,ee.length),ee.push(S),he.label=5;case 5:return G++,[3,1];case 6:G=0,K=y.length,he.label=7;case 7:return G<K?(ee=y[G],W=o[G],J=WW.withContextAndObjects(this.context,ee,this.encodeStreams),c.addUncompressedEntry(W,i),i+=this.computeIndirectObjectSize([W,J]),d.push([W,J]),this.shouldWaitForTick(ee.length)?[4,g0()]:[3,9]):[3,10];case 8:he.sent(),he.label=9;case 9:return G++,[3,7];case 10:return re=ui.of(r++),c.dict.set(Le.of("Size"),on.of(r)),c.addUncompressedEntry(re,i),ue=i,i+=this.computeIndirectObjectSize([re,c]),d.push([re,c]),ce=J2.forLastCrossRefSectionOffset(ue),i+=ce.sizeInBytes(),[2,{size:i,header:n,indirectObjects:d,trailer:ce}]}})})},t.forContext=function(r,n,i,c){return i===void 0&&(i=!0),c===void 0&&(c=50),new t(r,n,i,c)},t}(qW),Jr=function(e){er(t,e);function t(r){var n=e.call(this)||this;return n.value=r,n}return t.prototype.asBytes=function(){for(var r=this.value+(this.value.length%2===1?"0":""),n=r.length,i=new Uint8Array(r.length/2),c=0,d=0;c<n;){var y=parseInt(r.substring(c,c+2),16);i[d]=y,c+=2,d+=1}return i},t.prototype.decodeText=function(){var r=this.asBytes();return $K(r)?ZK(r):jW(r)},t.prototype.decodeDate=function(){var r=this.decodeText(),n=KK(r);if(!n)throw new GW(r);return n},t.prototype.asString=function(){return this.value},t.prototype.clone=function(){return t.of(this.value)},t.prototype.toString=function(){return"<"+this.value+">"},t.prototype.sizeInBytes=function(){return this.value.length+2},t.prototype.copyBytesInto=function(r,n){return r[n++]=ze.LessThan,n+=xa(this.value,r,n),r[n++]=ze.GreaterThan,this.value.length+2},t.of=function(r){return new t(r)},t.fromText=function(r){for(var n=YBe(r),i="",c=0,d=n.length;c<d;c++)i+=lx(n[c],4);return new t(i)},t}(hs),FS=function(){function e(t,r){this.encoding=t===O1.ZapfDingbats?gB.ZapfDingbats:t===O1.Symbol?gB.Symbol:gB.WinAnsi,this.font=dEe.load(t),this.fontName=this.font.FontName,this.customName=r}return e.prototype.encodeText=function(t){for(var r=this.encodeTextAsGlyphs(t),n=new Array(r.length),i=0,c=r.length;i<c;i++)n[i]=ZE(r[i].code);return Jr.of(n.join(""))},e.prototype.widthOfTextAtSize=function(t,r){for(var n=this.encodeTextAsGlyphs(t),i=0,c=0,d=n.length;c<d;c++){var y=n[c].name,o=(n[c+1]||{}).name,x=this.font.getXAxisKerningForPair(y,o)||0;i+=this.widthOfGlyph(y)+x}var S=r/1e3;return i*S},e.prototype.heightOfFontAtSize=function(t,r){r===void 0&&(r={});var n=r.descender,i=n===void 0?!0:n,c=this.font,d=c.Ascender,y=c.Descender,o=c.FontBBox,x=d||o[3],S=y||o[1],k=x-S;return i||(k+=y||0),k/1e3*t},e.prototype.sizeOfFontAtHeight=function(t){var r=this.font,n=r.Ascender,i=r.Descender,c=r.FontBBox,d=n||c[3],y=i||c[1];return 1e3*t/(d-y)},e.prototype.embedIntoContext=function(t,r){var n=t.obj({Type:"Font",Subtype:"Type1",BaseFont:this.customName||this.fontName,Encoding:this.encoding===gB.WinAnsi?"WinAnsiEncoding":void 0});return r?(t.assign(r,n),r):t.register(n)},e.prototype.widthOfGlyph=function(t){return this.font.getWidthOfGlyph(t)||250},e.prototype.encodeTextAsGlyphs=function(t){for(var r=Array.from(t),n=new Array(r.length),i=0,c=r.length;i<c;i++){var d=RBe(r[i]);n[i]=this.encoding.encodeUnicodeCodePoint(d)}return n},e.for=function(t,r){return new e(t,r)},e}(),XEe=function(e,t){for(var r=new Array(e.length),n=0,i=e.length;n<i;n++){var c=e[n],d=rV(dC(t(c))),y=rV.apply(void 0,c.codePoints.map(YEe));r[n]=[d,y]}return ZEe(r)},ZEe=function(e){return`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange
`+e.length+` beginbfchar
`+e.map(function(t){var r=t[0],n=t[1];return r+" "+n}).join(`
`)+`
endbfchar
endcmap
CMapName currentdict /CMap defineresource pop
end
end`},rV=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"<"+e.join("")+">"},dC=function(e){return lx(e,4)},YEe=function(e){if(JBe(e))return dC(e);if($Be(e)){var t=qK(e),r=XK(e);return""+dC(t)+dC(r)}var n=ZE(e),i="0x"+n+" is not a valid UTF-8 or UTF-16 codepoint.";throw new Error(i)},JEe=function(e){var t=0,r=function(n){t|=1<<n-1};return e.fixedPitch&&r(1),e.serif&&r(2),r(3),e.script&&r(4),e.nonsymbolic&&r(6),e.italic&&r(7),e.allCap&&r(17),e.smallCap&&r(18),e.forceBold&&r(19),t},$Ee=function(e){var t=e["OS/2"]?e["OS/2"].sFamilyClass:0,r=JEe({fixedPitch:e.post.isFixedPitch,serif:1<=t&&t<=7,symbolic:!0,script:t===10,italic:e.head.macStyle.italic});return r},ci=function(e){er(t,e);function t(r){var n=e.call(this)||this;return n.value=r,n}return t.prototype.asBytes=function(){for(var r=[],n="",i=!1,c=function(k){k!==void 0&&r.push(k),i=!1},d=0,y=this.value.length;d<y;d++){var o=this.value[d],x=sn(o),S=this.value[d+1];i?x===ze.Newline||x===ze.CarriageReturn?c():x===ze.n?c(ze.Newline):x===ze.r?c(ze.CarriageReturn):x===ze.t?c(ze.Tab):x===ze.b?c(ze.Backspace):x===ze.f?c(ze.FormFeed):x===ze.LeftParen?c(ze.LeftParen):x===ze.RightParen?c(ze.RightParen):x===ze.Backspace?c(ze.BackSlash):x>=ze.Zero&&x<=ze.Seven?(n+=o,(n.length===3||!(S>="0"&&S<="7"))&&(c(parseInt(n,8)),n="")):c(x):x===ze.BackSlash?i=!0:c(x)}return new Uint8Array(r)},t.prototype.decodeText=function(){var r=this.asBytes();return $K(r)?ZK(r):jW(r)},t.prototype.decodeDate=function(){var r=this.decodeText(),n=KK(r);if(!n)throw new GW(r);return n},t.prototype.asString=function(){return this.value},t.prototype.clone=function(){return t.of(this.value)},t.prototype.toString=function(){return"("+this.value+")"},t.prototype.sizeInBytes=function(){return this.value.length+2},t.prototype.copyBytesInto=function(r,n){return r[n++]=ze.LeftParen,n+=xa(this.value,r,n),r[n++]=ze.RightParen,this.value.length+2},t.of=function(r){return new t(r)},t.fromDate=function(r){var n=Fc(String(r.getUTCFullYear()),4,"0"),i=Fc(String(r.getUTCMonth()+1),2,"0"),c=Fc(String(r.getUTCDate()),2,"0"),d=Fc(String(r.getUTCHours()),2,"0"),y=Fc(String(r.getUTCMinutes()),2,"0"),o=Fc(String(r.getUTCSeconds()),2,"0");return new t("D:"+n+i+c+d+y+o+"Z")},t}(hs),$2=function(){function e(t,r,n,i){var c=this;this.allGlyphsInFontSortedById=function(){for(var d=new Array(c.font.characterSet.length),y=0,o=d.length;y<o;y++){var x=c.font.characterSet[y];d[y]=c.font.glyphForCodePoint(x)}return KBe(d.sort(GBe),function(S){return S.id})},this.font=t,this.scale=1e3/this.font.unitsPerEm,this.fontData=r,this.fontName=this.font.postscriptName||"Font",this.customName=n,this.fontFeatures=i,this.baseFontName="",this.glyphCache=PA.populatedBy(this.allGlyphsInFontSortedById)}return e.for=function(t,r,n,i){return yn(this,void 0,void 0,function(){var c;return _n(this,function(d){switch(d.label){case 0:return[4,t.create(r)];case 1:return c=d.sent(),[2,new e(c,r,n,i)]}})})},e.prototype.encodeText=function(t){for(var r=this.font.layout(t,this.fontFeatures).glyphs,n=new Array(r.length),i=0,c=r.length;i<c;i++)n[i]=lx(r[i].id,4);return Jr.of(n.join(""))},e.prototype.widthOfTextAtSize=function(t,r){for(var n=this.font.layout(t,this.fontFeatures).glyphs,i=0,c=0,d=n.length;c<d;c++)i+=n[c].advanceWidth*this.scale;var y=r/1e3;return i*y},e.prototype.heightOfFontAtSize=function(t,r){r===void 0&&(r={});var n=r.descender,i=n===void 0?!0:n,c=this.font,d=c.ascent,y=c.descent,o=c.bbox,x=(d||o.maxY)*this.scale,S=(y||o.minY)*this.scale,k=x-S;return i||(k-=Math.abs(y)||0),k/1e3*t},e.prototype.sizeOfFontAtHeight=function(t){var r=this.font,n=r.ascent,i=r.descent,c=r.bbox,d=(n||c.maxY)*this.scale,y=(i||c.minY)*this.scale;return 1e3*t/(d-y)},e.prototype.embedIntoContext=function(t,r){return this.baseFontName=this.customName||t.addRandomSuffix(this.fontName),this.embedFontDict(t,r)},e.prototype.embedFontDict=function(t,r){return yn(this,void 0,void 0,function(){var n,i,c;return _n(this,function(d){switch(d.label){case 0:return[4,this.embedCIDFontDict(t)];case 1:return n=d.sent(),i=this.embedUnicodeCmap(t),c=t.obj({Type:"Font",Subtype:"Type0",BaseFont:this.baseFontName,Encoding:"Identity-H",DescendantFonts:[n],ToUnicode:i}),r?(t.assign(r,c),[2,r]):[2,t.register(c)]}})})},e.prototype.isCFF=function(){return this.font.cff},e.prototype.embedCIDFontDict=function(t){return yn(this,void 0,void 0,function(){var r,n;return _n(this,function(i){switch(i.label){case 0:return[4,this.embedFontDescriptor(t)];case 1:return r=i.sent(),n=t.obj({Type:"Font",Subtype:this.isCFF()?"CIDFontType0":"CIDFontType2",CIDToGIDMap:"Identity",BaseFont:this.baseFontName,CIDSystemInfo:{Registry:ci.of("Adobe"),Ordering:ci.of("Identity"),Supplement:0},FontDescriptor:r,W:this.computeWidths()}),[2,t.register(n)]}})})},e.prototype.embedFontDescriptor=function(t){return yn(this,void 0,void 0,function(){var r,n,i,c,d,y,o,x,S,k,O,Q,G,K,ee;return _n(this,function(W){switch(W.label){case 0:return[4,this.embedFontStream(t)];case 1:return r=W.sent(),n=this.scale,i=this.font,c=i.italicAngle,d=i.ascent,y=i.descent,o=i.capHeight,x=i.xHeight,S=this.font.bbox,k=S.minX,O=S.minY,Q=S.maxX,G=S.maxY,K=t.obj((ee={Type:"FontDescriptor",FontName:this.baseFontName,Flags:$Ee(this.font),FontBBox:[k*n,O*n,Q*n,G*n],ItalicAngle:c,Ascent:d*n,Descent:y*n,CapHeight:(o||d)*n,XHeight:(x||0)*n,StemV:0},ee[this.isCFF()?"FontFile3":"FontFile2"]=r,ee)),[2,t.register(K)]}})})},e.prototype.serializeFont=function(){return yn(this,void 0,void 0,function(){return _n(this,function(t){return[2,this.fontData]})})},e.prototype.embedFontStream=function(t){return yn(this,void 0,void 0,function(){var r,n,i;return _n(this,function(c){switch(c.label){case 0:return i=(n=t).flateStream,[4,this.serializeFont()];case 1:return r=i.apply(n,[c.sent(),{Subtype:this.isCFF()?"CIDFontType0C":void 0}]),[2,t.register(r)]}})})},e.prototype.embedUnicodeCmap=function(t){var r=XEe(this.glyphCache.access(),this.glyphId.bind(this)),n=t.flateStream(r);return t.register(n)},e.prototype.glyphId=function(t){return t?t.id:-1},e.prototype.computeWidths=function(){for(var t=this.glyphCache.access(),r=[],n=[],i=0,c=t.length;i<c;i++){var d=t[i],y=t[i-1],o=this.glyphId(d),x=this.glyphId(y);i===0?r.push(o):o-x!==1&&(r.push(n),r.push(o),n=[]),n.push(d.advanceWidth*this.scale)}return r.push(n),r},e}(),eTe=function(e){er(t,e);function t(r,n,i,c){var d=e.call(this,r,n,i,c)||this;return d.subset=d.font.createSubset(),d.glyphs=[],d.glyphCache=PA.populatedBy(function(){return d.glyphs}),d.glyphIdMap=new Map,d}return t.for=function(r,n,i,c){return yn(this,void 0,void 0,function(){var d;return _n(this,function(y){switch(y.label){case 0:return[4,r.create(n)];case 1:return d=y.sent(),[2,new t(d,n,i,c)]}})})},t.prototype.encodeText=function(r){for(var n=this.font.layout(r,this.fontFeatures).glyphs,i=new Array(n.length),c=0,d=n.length;c<d;c++){var y=n[c],o=this.subset.includeGlyph(y);this.glyphs[o-1]=y,this.glyphIdMap.set(y.id,o),i[c]=lx(o,4)}return this.glyphCache.invalidate(),Jr.of(i.join(""))},t.prototype.isCFF=function(){return this.subset.cff},t.prototype.glyphId=function(r){return r?this.glyphIdMap.get(r.id):-1},t.prototype.serializeFont=function(){var r=this;return new Promise(function(n,i){var c=[];r.subset.encodeStream().on("data",function(d){return c.push(d)}).on("end",function(){return n(jBe(c))}).on("error",function(d){return i(d)})})},t}($2),dD;(function(e){e.Source="Source",e.Data="Data",e.Alternative="Alternative",e.Supplement="Supplement",e.EncryptedPayload="EncryptedPayload",e.FormData="EncryptedPayload",e.Schema="Schema",e.Unspecified="Unspecified"})(dD||(dD={}));var tTe=function(){function e(t,r,n){n===void 0&&(n={}),this.fileData=t,this.fileName=r,this.options=n}return e.for=function(t,r,n){return n===void 0&&(n={}),new e(t,r,n)},e.prototype.embedIntoContext=function(t,r){return yn(this,void 0,void 0,function(){var n,i,c,d,y,o,x,S,k;return _n(this,function(O){return n=this.options,i=n.mimeType,c=n.description,d=n.creationDate,y=n.modificationDate,o=n.afRelationship,x=t.flateStream(this.fileData,{Type:"EmbeddedFile",Subtype:i??void 0,Params:{Size:this.fileData.length,CreationDate:d?ci.fromDate(d):void 0,ModDate:y?ci.fromDate(y):void 0}}),S=t.register(x),k=t.obj({Type:"Filespec",F:ci.of(this.fileName),UF:Jr.fromText(this.fileName),EF:{F:S},Desc:c?Jr.fromText(c):void 0,AFRelationship:o??void 0}),r?(t.assign(r,k),[2,r]):[2,t.register(k)]})})},e}(),nV=[65472,65473,65474,65475,65477,65478,65479,65480,65481,65482,65483,65484,65485,65486,65487],Yg;(function(e){e.DeviceGray="DeviceGray",e.DeviceRGB="DeviceRGB",e.DeviceCMYK="DeviceCMYK"})(Yg||(Yg={}));var rTe={1:Yg.DeviceGray,3:Yg.DeviceRGB,4:Yg.DeviceCMYK},ZW=function(){function e(t,r,n,i,c){this.imageData=t,this.bitsPerComponent=r,this.width=n,this.height=i,this.colorSpace=c}return e.for=function(t){return yn(this,void 0,void 0,function(){var r,n,i,c,d,y,o,x,S,k;return _n(this,function(O){if(r=new DataView(t.buffer),n=r.getUint16(0),n!==65496)throw new Error("SOI not found in JPEG");for(i=2;i<r.byteLength&&(c=r.getUint16(i),i+=2,!nV.includes(c));)i+=r.getUint16(i);if(!nV.includes(c))throw new Error("Invalid JPEG");if(i+=2,d=r.getUint8(i++),y=r.getUint16(i),i+=2,o=r.getUint16(i),i+=2,x=r.getUint8(i++),S=rTe[x],!S)throw new Error("Unknown JPEG channel.");return k=S,[2,new e(t,d,o,y,k)]})})},e.prototype.embedIntoContext=function(t,r){return yn(this,void 0,void 0,function(){var n;return _n(this,function(i){return n=t.stream(this.imageData,{Type:"XObject",Subtype:"Image",BitsPerComponent:this.bitsPerComponent,Width:this.width,Height:this.height,ColorSpace:this.colorSpace,Filter:"DCTDecode",Decode:this.colorSpace===Yg.DeviceCMYK?[1,0,1,0,1,0,1,0]:void 0}),r?(t.assign(r,n),[2,r]):[2,t.register(n)]})})},e}(),qt={};qt.toRGBA8=function(e){var t=e.width,r=e.height;if(e.tabs.acTL==null)return[qt.toRGBA8.decodeImage(e.data,t,r,e).buffer];var n=[];e.frames[0].data==null&&(e.frames[0].data=e.data);for(var i=t*r*4,c=new Uint8Array(i),d=new Uint8Array(i),y=new Uint8Array(i),o=0;o<e.frames.length;o++){var x=e.frames[o],S=x.rect.x,k=x.rect.y,O=x.rect.width,Q=x.rect.height,G=qt.toRGBA8.decodeImage(x.data,O,Q,e);if(o!=0)for(var K=0;K<i;K++)y[K]=c[K];if(x.blend==0?qt._copyTile(G,O,Q,c,t,r,S,k,0):x.blend==1&&qt._copyTile(G,O,Q,c,t,r,S,k,1),n.push(c.buffer.slice(0)),x.dispose!=0){if(x.dispose==1)qt._copyTile(d,O,Q,c,t,r,S,k,0);else if(x.dispose==2)for(var K=0;K<i;K++)c[K]=y[K]}}return n};qt.toRGBA8.decodeImage=function(e,t,r,n){var i=t*r,c=qt.decode._getBPP(n),d=Math.ceil(t*c/8),y=new Uint8Array(i*4),o=new Uint32Array(y.buffer),x=n.ctype,S=n.depth,k=qt._bin.readUshort;if(x==6){var O=i<<2;if(S==8)for(var Q=0;Q<O;Q+=4)y[Q]=e[Q],y[Q+1]=e[Q+1],y[Q+2]=e[Q+2],y[Q+3]=e[Q+3];if(S==16)for(var Q=0;Q<O;Q++)y[Q]=e[Q<<1]}else if(x==2){var G=n.tabs.tRNS;if(G==null){if(S==8)for(var Q=0;Q<i;Q++){var K=Q*3;o[Q]=255<<24|e[K+2]<<16|e[K+1]<<8|e[K]}if(S==16)for(var Q=0;Q<i;Q++){var K=Q*6;o[Q]=255<<24|e[K+4]<<16|e[K+2]<<8|e[K]}}else{var ee=G[0],W=G[1],J=G[2];if(S==8)for(var Q=0;Q<i;Q++){var re=Q<<2,K=Q*3;o[Q]=255<<24|e[K+2]<<16|e[K+1]<<8|e[K],e[K]==ee&&e[K+1]==W&&e[K+2]==J&&(y[re+3]=0)}if(S==16)for(var Q=0;Q<i;Q++){var re=Q<<2,K=Q*6;o[Q]=255<<24|e[K+4]<<16|e[K+2]<<8|e[K],k(e,K)==ee&&k(e,K+2)==W&&k(e,K+4)==J&&(y[re+3]=0)}}}else if(x==3){var ue=n.tabs.PLTE,ce=n.tabs.tRNS,he=ce?ce.length:0;if(S==1)for(var xe=0;xe<r;xe++)for(var fe=xe*d,Ue=xe*t,Q=0;Q<t;Q++){var re=Ue+Q<<2,Ge=e[fe+(Q>>3)]>>7-((Q&7)<<0)&1,He=3*Ge;y[re]=ue[He],y[re+1]=ue[He+1],y[re+2]=ue[He+2],y[re+3]=Ge<he?ce[Ge]:255}if(S==2)for(var xe=0;xe<r;xe++)for(var fe=xe*d,Ue=xe*t,Q=0;Q<t;Q++){var re=Ue+Q<<2,Ge=e[fe+(Q>>2)]>>6-((Q&3)<<1)&3,He=3*Ge;y[re]=ue[He],y[re+1]=ue[He+1],y[re+2]=ue[He+2],y[re+3]=Ge<he?ce[Ge]:255}if(S==4)for(var xe=0;xe<r;xe++)for(var fe=xe*d,Ue=xe*t,Q=0;Q<t;Q++){var re=Ue+Q<<2,Ge=e[fe+(Q>>1)]>>4-((Q&1)<<2)&15,He=3*Ge;y[re]=ue[He],y[re+1]=ue[He+1],y[re+2]=ue[He+2],y[re+3]=Ge<he?ce[Ge]:255}if(S==8)for(var Q=0;Q<i;Q++){var re=Q<<2,Ge=e[Q],He=3*Ge;y[re]=ue[He],y[re+1]=ue[He+1],y[re+2]=ue[He+2],y[re+3]=Ge<he?ce[Ge]:255}}else if(x==4){if(S==8)for(var Q=0;Q<i;Q++){var re=Q<<2,tt=Q<<1,pt=e[tt];y[re]=pt,y[re+1]=pt,y[re+2]=pt,y[re+3]=e[tt+1]}if(S==16)for(var Q=0;Q<i;Q++){var re=Q<<2,tt=Q<<2,pt=e[tt];y[re]=pt,y[re+1]=pt,y[re+2]=pt,y[re+3]=e[tt+2]}}else if(x==0)for(var ee=n.tabs.tRNS?n.tabs.tRNS:-1,xe=0;xe<r;xe++){var gt=xe*d,Et=xe*t;if(S==1)for(var ot=0;ot<t;ot++){var pt=255*(e[gt+(ot>>>3)]>>>7-(ot&7)&1),Gt=pt==ee*255?0:255;o[Et+ot]=Gt<<24|pt<<16|pt<<8|pt}else if(S==2)for(var ot=0;ot<t;ot++){var pt=85*(e[gt+(ot>>>2)]>>>6-((ot&3)<<1)&3),Gt=pt==ee*85?0:255;o[Et+ot]=Gt<<24|pt<<16|pt<<8|pt}else if(S==4)for(var ot=0;ot<t;ot++){var pt=17*(e[gt+(ot>>>1)]>>>4-((ot&1)<<2)&15),Gt=pt==ee*17?0:255;o[Et+ot]=Gt<<24|pt<<16|pt<<8|pt}else if(S==8)for(var ot=0;ot<t;ot++){var pt=e[gt+ot],Gt=pt==ee?0:255;o[Et+ot]=Gt<<24|pt<<16|pt<<8|pt}else if(S==16)for(var ot=0;ot<t;ot++){var pt=e[gt+(ot<<1)],Gt=k(e,gt+(ot<<Q))==ee?0:255;o[Et+ot]=Gt<<24|pt<<16|pt<<8|pt}}return y};qt.decode=function(e){for(var t=new Uint8Array(e),r=8,n=qt._bin,i=n.readUshort,c=n.readUint,d={tabs:{},frames:[]},y=new Uint8Array(t.length),o=0,x,S=0,k=[137,80,78,71,13,10,26,10],O=0;O<8;O++)if(t[O]!=k[O])throw"The input is not a PNG file!";for(;r<t.length;){var Q=n.readUint(t,r);r+=4;var G=n.readASCII(t,r,4);if(r+=4,G=="IHDR")qt.decode._IHDR(t,r,d);else if(G=="IDAT"){for(var O=0;O<Q;O++)y[o+O]=t[r+O];o+=Q}else if(G=="acTL")d.tabs[G]={num_frames:c(t,r),num_plays:c(t,r+4)},x=new Uint8Array(t.length);else if(G=="fcTL"){if(S!=0){var K=d.frames[d.frames.length-1];K.data=qt.decode._decompress(d,x.slice(0,S),K.rect.width,K.rect.height),S=0}var ee={x:c(t,r+12),y:c(t,r+16),width:c(t,r+4),height:c(t,r+8)},W=i(t,r+22);W=i(t,r+20)/(W==0?100:W);var J={rect:ee,delay:Math.round(W*1e3),dispose:t[r+24],blend:t[r+25]};d.frames.push(J)}else if(G=="fdAT"){for(var O=0;O<Q-4;O++)x[S+O]=t[r+O+4];S+=Q-4}else if(G=="pHYs")d.tabs[G]=[n.readUint(t,r),n.readUint(t,r+4),t[r+8]];else if(G=="cHRM"){d.tabs[G]=[];for(var O=0;O<8;O++)d.tabs[G].push(n.readUint(t,r+O*4))}else if(G=="tEXt"){d.tabs[G]==null&&(d.tabs[G]={});var re=n.nextZero(t,r),ue=n.readASCII(t,r,re-r),ce=n.readASCII(t,re+1,r+Q-re-1);d.tabs[G][ue]=ce}else if(G=="iTXt"){d.tabs[G]==null&&(d.tabs[G]={});var re=0,he=r;re=n.nextZero(t,he);var ue=n.readASCII(t,he,re-he);he=re+1,t[he],t[he+1],he+=2,re=n.nextZero(t,he),n.readASCII(t,he,re-he),he=re+1,re=n.nextZero(t,he),n.readUTF8(t,he,re-he),he=re+1;var ce=n.readUTF8(t,he,Q-(he-r));d.tabs[G][ue]=ce}else if(G=="PLTE")d.tabs[G]=n.readBytes(t,r,Q);else if(G=="hIST"){var xe=d.tabs.PLTE.length/3;d.tabs[G]=[];for(var O=0;O<xe;O++)d.tabs[G].push(i(t,r+O*2))}else if(G=="tRNS")d.ctype==3?d.tabs[G]=n.readBytes(t,r,Q):d.ctype==0?d.tabs[G]=i(t,r):d.ctype==2&&(d.tabs[G]=[i(t,r),i(t,r+2),i(t,r+4)]);else if(G=="gAMA")d.tabs[G]=n.readUint(t,r)/1e5;else if(G=="sRGB")d.tabs[G]=t[r];else if(G=="bKGD")d.ctype==0||d.ctype==4?d.tabs[G]=[i(t,r)]:d.ctype==2||d.ctype==6?d.tabs[G]=[i(t,r),i(t,r+2),i(t,r+4)]:d.ctype==3&&(d.tabs[G]=t[r]);else if(G=="IEND")break;r+=Q,n.readUint(t,r),r+=4}if(S!=0){var K=d.frames[d.frames.length-1];K.data=qt.decode._decompress(d,x.slice(0,S),K.rect.width,K.rect.height),S=0}return d.data=qt.decode._decompress(d,y,d.width,d.height),delete d.compress,delete d.interlace,delete d.filter,d};qt.decode._decompress=function(e,t,r,n){var i=qt.decode._getBPP(e),c=Math.ceil(r*i/8),d=new Uint8Array((c+1+e.interlace)*n);return t=qt.decode._inflate(t,d),e.interlace==0?t=qt.decode._filterZero(t,e,0,r,n):e.interlace==1&&(t=qt.decode._readInterlace(t,e)),t};qt.decode._inflate=function(e,t){var r=qt.inflateRaw(new Uint8Array(e.buffer,2,e.length-6),t);return r};qt.inflateRaw=function(){var e={};return e.H={},e.H.N=function(t,r){var n=Uint8Array,i=0,c=0,d=0,y=0,o=0,x=0,S=0,k=0,O=0,Q,G;if(t[0]==3&&t[1]==0)return r||new n(0);var K=e.H,ee=K.b,W=K.e,J=K.R,re=K.n,ue=K.A,ce=K.Z,he=K.m,xe=r==null;for(xe&&(r=new n(t.length>>>2<<3));i==0;){if(i=ee(t,O,1),c=ee(t,O+1,2),O+=3,c==0){O&7&&(O+=8-(O&7));var fe=(O>>>3)+4,Ue=t[fe-4]|t[fe-3]<<8;xe&&(r=e.H.W(r,k+Ue)),r.set(new n(t.buffer,t.byteOffset+fe,Ue),k),O=fe+Ue<<3,k+=Ue;continue}if(xe&&(r=e.H.W(r,k+(1<<17))),c==1&&(Q=he.J,G=he.h,x=511,S=31),c==2){d=W(t,O,5)+257,y=W(t,O+5,5)+1,o=W(t,O+10,4)+4,O+=14;for(var Ge=1,He=0;He<38;He+=2)he.Q[He]=0,he.Q[He+1]=0;for(var He=0;He<o;He++){var tt=W(t,O+He*3,3);he.Q[(he.X[He]<<1)+1]=tt,tt>Ge&&(Ge=tt)}O+=3*o,re(he.Q,Ge),ue(he.Q,Ge,he.u),Q=he.w,G=he.d,O=J(he.u,(1<<Ge)-1,d+y,t,O,he.v);var pt=K.V(he.v,0,d,he.C);x=(1<<pt)-1;var gt=K.V(he.v,d,y,he.D);S=(1<<gt)-1,re(he.C,pt),ue(he.C,pt,Q),re(he.D,gt),ue(he.D,gt,G)}for(;;){var Et=Q[ce(t,O)&x];O+=Et&15;var ot=Et>>>4;if(!(ot>>>8))r[k++]=ot;else{if(ot==256)break;var Gt=k+ot-254;if(ot>264){var Pt=he.q[ot-257];Gt=k+(Pt>>>3)+W(t,O,Pt&7),O+=Pt&7}var Xt=G[ce(t,O)&S];O+=Xt&15;var It=Xt>>>4,dr=he.c[It],ar=(dr>>>4)+ee(t,O,dr&15);for(O+=dr&15;k<Gt;)r[k]=r[k++-ar],r[k]=r[k++-ar],r[k]=r[k++-ar],r[k]=r[k++-ar];k=Gt}}}return r.length==k?r:r.slice(0,k)},e.H.W=function(t,r){var n=t.length;if(r<=n)return t;var i=new Uint8Array(n<<1);return i.set(t,0),i},e.H.R=function(t,r,n,i,c,d){for(var y=e.H.e,o=e.H.Z,x=0;x<n;){var S=t[o(i,c)&r];c+=S&15;var k=S>>>4;if(k<=15)d[x]=k,x++;else{var O=0,Q=0;k==16?(Q=3+y(i,c,2),c+=2,O=d[x-1]):k==17?(Q=3+y(i,c,3),c+=3):k==18&&(Q=11+y(i,c,7),c+=7);for(var G=x+Q;x<G;)d[x]=O,x++}}return c},e.H.V=function(t,r,n,i){for(var c=0,d=0,y=i.length>>>1;d<n;){var o=t[d+r];i[d<<1]=0,i[(d<<1)+1]=o,o>c&&(c=o),d++}for(;d<y;)i[d<<1]=0,i[(d<<1)+1]=0,d++;return c},e.H.n=function(t,r){for(var n=e.H.m,i=t.length,c,d,y,o,x,S=n.j,o=0;o<=r;o++)S[o]=0;for(o=1;o<i;o+=2)S[t[o]]++;var k=n.K;for(c=0,S[0]=0,d=1;d<=r;d++)c=c+S[d-1]<<1,k[d]=c;for(y=0;y<i;y+=2)x=t[y+1],x!=0&&(t[y]=k[x],k[x]++)},e.H.A=function(t,r,n){for(var i=t.length,c=e.H.m,d=c.r,y=0;y<i;y+=2)if(t[y+1]!=0)for(var o=y>>1,x=t[y+1],S=o<<4|x,k=r-x,O=t[y]<<k,Q=O+(1<<k);O!=Q;){var G=d[O]>>>15-r;n[G]=S,O++}},e.H.l=function(t,r){for(var n=e.H.m.r,i=15-r,c=0;c<t.length;c+=2){var d=t[c]<<r-t[c+1];t[c]=n[d]>>>i}},e.H.M=function(t,r,n){n=n<<(r&7);var i=r>>>3;t[i]|=n,t[i+1]|=n>>>8},e.H.I=function(t,r,n){n=n<<(r&7);var i=r>>>3;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},e.H.e=function(t,r,n){return(t[r>>>3]|t[(r>>>3)+1]<<8)>>>(r&7)&(1<<n)-1},e.H.b=function(t,r,n){return(t[r>>>3]|t[(r>>>3)+1]<<8|t[(r>>>3)+2]<<16)>>>(r&7)&(1<<n)-1},e.H.Z=function(t,r){return(t[r>>>3]|t[(r>>>3)+1]<<8|t[(r>>>3)+2]<<16)>>>(r&7)},e.H.i=function(t,r){return(t[r>>>3]|t[(r>>>3)+1]<<8|t[(r>>>3)+2]<<16|t[(r>>>3)+3]<<24)>>>(r&7)},e.H.m=function(){var t=Uint16Array,r=Uint32Array;return{K:new t(16),j:new t(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new t(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new r(32),J:new t(512),_:[],h:new t(32),$:[],w:new t(32768),C:[],v:[],d:new t(32768),D:[],u:new t(512),Q:[],r:new t(32768),s:new r(286),Y:new r(30),a:new r(19),t:new r(15e3),k:new t(65536),g:new t(32768)}}(),function(){for(var t=e.H.m,r=32768,n=0;n<r;n++){var i=n;i=(i&2863311530)>>>1|(i&1431655765)<<1,i=(i&3435973836)>>>2|(i&858993459)<<2,i=(i&4042322160)>>>4|(i&252645135)<<4,i=(i&4278255360)>>>8|(i&16711935)<<8,t.r[n]=(i>>>16|i<<16)>>>17}function c(d,y,o){for(;y--!=0;)d.push(0,o)}for(var n=0;n<32;n++)t.q[n]=t.S[n]<<3|t.T[n],t.c[n]=t.p[n]<<4|t.z[n];c(t._,144,8),c(t._,112,9),c(t._,24,7),c(t._,8,8),e.H.n(t._,9),e.H.A(t._,9,t.J),e.H.l(t._,9),c(t.$,32,5),e.H.n(t.$,5),e.H.A(t.$,5,t.h),e.H.l(t.$,5),c(t.Q,19,0),c(t.C,286,0),c(t.D,30,0),c(t.v,320,0)}(),e.H.N}();qt.decode._readInterlace=function(e,t){for(var r=t.width,n=t.height,i=qt.decode._getBPP(t),c=i>>3,d=Math.ceil(r*i/8),y=new Uint8Array(n*d),o=0,x=[0,0,4,0,2,0,1],S=[0,4,0,2,0,1,0],k=[8,8,8,4,4,2,2],O=[8,8,4,4,2,2,1],Q=0;Q<7;){for(var G=k[Q],K=O[Q],ee=0,W=0,J=x[Q];J<n;)J+=G,W++;for(var re=S[Q];re<r;)re+=K,ee++;var ue=Math.ceil(ee*i/8);qt.decode._filterZero(e,t,o,ee,W);for(var ce=0,he=x[Q];he<n;){for(var xe=S[Q],fe=o+ce*ue<<3;xe<r;){if(i==1){var Ue=e[fe>>3];Ue=Ue>>7-(fe&7)&1,y[he*d+(xe>>3)]|=Ue<<7-((xe&7)<<0)}if(i==2){var Ue=e[fe>>3];Ue=Ue>>6-(fe&7)&3,y[he*d+(xe>>2)]|=Ue<<6-((xe&3)<<1)}if(i==4){var Ue=e[fe>>3];Ue=Ue>>4-(fe&7)&15,y[he*d+(xe>>1)]|=Ue<<4-((xe&1)<<2)}if(i>=8)for(var Ge=he*d+xe*c,He=0;He<c;He++)y[Ge+He]=e[(fe>>3)+He];fe+=i,xe+=K}ce++,he+=G}ee*W!=0&&(o+=W*(1+ue)),Q=Q+1}return y};qt.decode._getBPP=function(e){var t=[1,null,3,1,2,null,4][e.ctype];return t*e.depth};qt.decode._filterZero=function(e,t,r,n,i){var c=qt.decode._getBPP(t),d=Math.ceil(n*c/8),y=qt.decode._paeth;c=Math.ceil(c/8);var o=0,x=1,S=e[r],k=0;if(S>1&&(e[r]=[0,0,1][S-2]),S==3)for(k=c;k<d;k++)e[k+1]=e[k+1]+(e[k+1-c]>>>1)&255;for(var O=0;O<i;O++)if(o=r+O*d,x=o+O+1,S=e[x-1],k=0,S==0)for(;k<d;k++)e[o+k]=e[x+k];else if(S==1){for(;k<c;k++)e[o+k]=e[x+k];for(;k<d;k++)e[o+k]=e[x+k]+e[o+k-c]}else if(S==2)for(;k<d;k++)e[o+k]=e[x+k]+e[o+k-d];else if(S==3){for(;k<c;k++)e[o+k]=e[x+k]+(e[o+k-d]>>>1);for(;k<d;k++)e[o+k]=e[x+k]+(e[o+k-d]+e[o+k-c]>>>1)}else{for(;k<c;k++)e[o+k]=e[x+k]+y(0,e[o+k-d],0);for(;k<d;k++)e[o+k]=e[x+k]+y(e[o+k-c],e[o+k-d],e[o+k-c-d])}return e};qt.decode._paeth=function(e,t,r){var n=e+t-r,i=n-e,c=n-t,d=n-r;return i*i<=c*c&&i*i<=d*d?e:c*c<=d*d?t:r};qt.decode._IHDR=function(e,t,r){var n=qt._bin;r.width=n.readUint(e,t),t+=4,r.height=n.readUint(e,t),t+=4,r.depth=e[t],t++,r.ctype=e[t],t++,r.compress=e[t],t++,r.filter=e[t],t++,r.interlace=e[t],t++};qt._bin={nextZero:function(e,t){for(;e[t]!=0;)t++;return t},readUshort:function(e,t){return e[t]<<8|e[t+1]},writeUshort:function(e,t,r){e[t]=r>>8&255,e[t+1]=r&255},readUint:function(e,t){return e[t]*(256*256*256)+(e[t+1]<<16|e[t+2]<<8|e[t+3])},writeUint:function(e,t,r){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=r&255},readASCII:function(e,t,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(e[t+i]);return n},writeASCII:function(e,t,r){for(var n=0;n<r.length;n++)e[t+n]=r.charCodeAt(n)},readBytes:function(e,t,r){for(var n=[],i=0;i<r;i++)n.push(e[t+i]);return n},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,r){for(var n="",i,c=0;c<r;c++)n+="%"+qt._bin.pad(e[t+c].toString(16));try{i=decodeURIComponent(n)}catch{return qt._bin.readASCII(e,t,r)}return i}};qt._copyTile=function(e,t,r,n,i,c,d,y,o){for(var x=Math.min(t,i),S=Math.min(r,c),k=0,O=0,Q=0;Q<S;Q++)for(var G=0;G<x;G++)if(d>=0&&y>=0?(k=Q*t+G<<2,O=(y+Q)*i+d+G<<2):(k=(-y+Q)*t-d+G<<2,O=Q*i+G<<2),o==0)n[O]=e[k],n[O+1]=e[k+1],n[O+2]=e[k+2],n[O+3]=e[k+3];else if(o==1){var K=e[k+3]*.00392156862745098,ee=e[k]*K,W=e[k+1]*K,J=e[k+2]*K,re=n[O+3]*(1/255),ue=n[O]*re,ce=n[O+1]*re,he=n[O+2]*re,xe=1-K,fe=K+re*xe,Ue=fe==0?0:1/fe;n[O+3]=255*fe,n[O+0]=(ee+ue*xe)*Ue,n[O+1]=(W+ce*xe)*Ue,n[O+2]=(J+he*xe)*Ue}else if(o==2){var K=e[k+3],ee=e[k],W=e[k+1],J=e[k+2],re=n[O+3],ue=n[O],ce=n[O+1],he=n[O+2];K==re&&ee==ue&&W==ce&&J==he?(n[O]=0,n[O+1]=0,n[O+2]=0,n[O+3]=0):(n[O]=ee,n[O+1]=W,n[O+2]=J,n[O+3]=K)}else if(o==3){var K=e[k+3],ee=e[k],W=e[k+1],J=e[k+2],re=n[O+3],ue=n[O],ce=n[O+1],he=n[O+2];if(K==re&&ee==ue&&W==ce&&J==he)continue;if(K<220&&re>20)return!1}return!0};qt.encode=function(e,t,r,n,i,c,d){n==null&&(n=0),d==null&&(d=!1);var y=qt.encode.compress(e,t,r,n,[!1,!1,!1,0,d]);return qt.encode.compressPNG(y,-1),qt.encode._main(y,t,r,i,c)};qt.encodeLL=function(e,t,r,n,i,c,d,y){for(var o={ctype:0+(n==1?0:2)+(i==0?0:4),depth:c,frames:[]},x=(n+i)*c,S=x*t,k=0;k<e.length;k++)o.frames.push({rect:{x:0,y:0,width:t,height:r},img:new Uint8Array(e[k]),blend:0,dispose:1,bpp:Math.ceil(x/8),bpl:Math.ceil(S/8)});qt.encode.compressPNG(o,0,!0);var O=qt.encode._main(o,t,r,d,y);return O};qt.encode._main=function(e,t,r,n,i){i==null&&(i={});var c=qt.crc.crc,d=qt._bin.writeUint,y=qt._bin.writeUshort,o=qt._bin.writeASCII,x=8,S=e.frames.length>1,k=!1,O=33+(S?20:0);if(i.sRGB!=null&&(O+=13),i.pHYs!=null&&(O+=21),e.ctype==3){for(var Q=e.plte.length,G=0;G<Q;G++)e.plte[G]>>>24!=255&&(k=!0);O+=8+Q*3+4+(k?8+Q*1+4:0)}for(var K=0;K<e.frames.length;K++){var ee=e.frames[K];S&&(O+=38),O+=ee.cimg.length+12,K!=0&&(O+=4)}O+=12;for(var W=new Uint8Array(O),J=[137,80,78,71,13,10,26,10],G=0;G<8;G++)W[G]=J[G];if(d(W,x,13),x+=4,o(W,x,"IHDR"),x+=4,d(W,x,t),x+=4,d(W,x,r),x+=4,W[x]=e.depth,x++,W[x]=e.ctype,x++,W[x]=0,x++,W[x]=0,x++,W[x]=0,x++,d(W,x,c(W,x-17,17)),x+=4,i.sRGB!=null&&(d(W,x,1),x+=4,o(W,x,"sRGB"),x+=4,W[x]=i.sRGB,x++,d(W,x,c(W,x-5,5)),x+=4),i.pHYs!=null&&(d(W,x,9),x+=4,o(W,x,"pHYs"),x+=4,d(W,x,i.pHYs[0]),x+=4,d(W,x,i.pHYs[1]),x+=4,W[x]=i.pHYs[2],x++,d(W,x,c(W,x-13,13)),x+=4),S&&(d(W,x,8),x+=4,o(W,x,"acTL"),x+=4,d(W,x,e.frames.length),x+=4,d(W,x,i.loop!=null?i.loop:0),x+=4,d(W,x,c(W,x-12,12)),x+=4),e.ctype==3){var Q=e.plte.length;d(W,x,Q*3),x+=4,o(W,x,"PLTE"),x+=4;for(var G=0;G<Q;G++){var re=G*3,ue=e.plte[G],ce=ue&255,he=ue>>>8&255,xe=ue>>>16&255;W[x+re+0]=ce,W[x+re+1]=he,W[x+re+2]=xe}if(x+=Q*3,d(W,x,c(W,x-Q*3-4,Q*3+4)),x+=4,k){d(W,x,Q),x+=4,o(W,x,"tRNS"),x+=4;for(var G=0;G<Q;G++)W[x+G]=e.plte[G]>>>24&255;x+=Q,d(W,x,c(W,x-Q-4,Q+4)),x+=4}}for(var fe=0,K=0;K<e.frames.length;K++){var ee=e.frames[K];S&&(d(W,x,26),x+=4,o(W,x,"fcTL"),x+=4,d(W,x,fe++),x+=4,d(W,x,ee.rect.width),x+=4,d(W,x,ee.rect.height),x+=4,d(W,x,ee.rect.x),x+=4,d(W,x,ee.rect.y),x+=4,y(W,x,n[K]),x+=2,y(W,x,1e3),x+=2,W[x]=ee.dispose,x++,W[x]=ee.blend,x++,d(W,x,c(W,x-30,30)),x+=4);var Ue=ee.cimg,Q=Ue.length;d(W,x,Q+(K==0?0:4)),x+=4;var Ge=x;o(W,x,K==0?"IDAT":"fdAT"),x+=4,K!=0&&(d(W,x,fe++),x+=4),W.set(Ue,x),x+=Q,d(W,x,c(W,Ge,x-Ge)),x+=4}return d(W,x,0),x+=4,o(W,x,"IEND"),x+=4,d(W,x,c(W,x-4,4)),x+=4,W.buffer};qt.encode.compressPNG=function(e,t,r){for(var n=0;n<e.frames.length;n++){var i=e.frames[n];i.rect.width;var c=i.rect.height,d=new Uint8Array(c*i.bpl+c);i.cimg=qt.encode._filterZero(i.img,c,i.bpp,i.bpl,d,t,r)}};qt.encode.compress=function(e,t,r,n,i){for(var c=i[0],d=i[1],y=i[2],o=i[3],x=i[4],S=6,k=8,O=255,Q=0;Q<e.length;Q++)for(var G=new Uint8Array(e[Q]),K=G.length,ee=0;ee<K;ee+=4)O&=G[ee+3];var W=O!=255,J=qt.encode.framize(e,t,r,c,d,y),re={},ue=[],ce=[];if(n!=0){for(var he=[],ee=0;ee<J.length;ee++)he.push(J[ee].img.buffer);for(var xe=qt.encode.concatRGBA(he),fe=qt.quantize(xe,n),Ue=0,Ge=new Uint8Array(fe.abuf),ee=0;ee<J.length;ee++){var He=J[ee].img,tt=He.length;ce.push(new Uint8Array(fe.inds.buffer,Ue>>2,tt>>2));for(var Q=0;Q<tt;Q+=4)He[Q]=Ge[Ue+Q],He[Q+1]=Ge[Ue+Q+1],He[Q+2]=Ge[Ue+Q+2],He[Q+3]=Ge[Ue+Q+3];Ue+=tt}for(var ee=0;ee<fe.plte.length;ee++)ue.push(fe.plte[ee].est.rgba)}else for(var Q=0;Q<J.length;Q++){var pt=J[Q],gt=new Uint32Array(pt.img.buffer),Et=pt.rect.width,K=gt.length,ot=new Uint8Array(K);ce.push(ot);for(var ee=0;ee<K;ee++){var Gt=gt[ee];if(ee!=0&&Gt==gt[ee-1])ot[ee]=ot[ee-1];else if(ee>Et&&Gt==gt[ee-Et])ot[ee]=ot[ee-Et];else{var Pt=re[Gt];if(Pt==null&&(re[Gt]=Pt=ue.length,ue.push(Gt),ue.length>=300))break;ot[ee]=Pt}}}var Xt=ue.length;Xt<=256&&x==!1&&(Xt<=2?k=1:Xt<=4?k=2:Xt<=16?k=4:k=8,k=Math.max(k,o));for(var Q=0;Q<J.length;Q++){var pt=J[Q];pt.rect.x,pt.rect.y;var Et=pt.rect.width,It=pt.rect.height,dr=pt.img;new Uint32Array(dr.buffer);var ar=4*Et,tr=4;if(Xt<=256&&x==!1){ar=Math.ceil(k*Et/8);for(var Rt=new Uint8Array(ar*It),Or=ce[Q],Cr=0;Cr<It;Cr++){var ee=Cr*ar,qr=Cr*Et;if(k==8)for(var Fr=0;Fr<Et;Fr++)Rt[ee+Fr]=Or[qr+Fr];else if(k==4)for(var Fr=0;Fr<Et;Fr++)Rt[ee+(Fr>>1)]|=Or[qr+Fr]<<4-(Fr&1)*4;else if(k==2)for(var Fr=0;Fr<Et;Fr++)Rt[ee+(Fr>>2)]|=Or[qr+Fr]<<6-(Fr&3)*2;else if(k==1)for(var Fr=0;Fr<Et;Fr++)Rt[ee+(Fr>>3)]|=Or[qr+Fr]<<7-(Fr&7)*1}dr=Rt,S=3,tr=1}else if(W==!1&&J.length==1){for(var Rt=new Uint8Array(Et*It*3),qi=Et*It,ee=0;ee<qi;ee++){var He=ee*3,Xi=ee*4;Rt[He]=dr[Xi],Rt[He+1]=dr[Xi+1],Rt[He+2]=dr[Xi+2]}dr=Rt,S=2,tr=3,ar=3*Et}pt.img=dr,pt.bpl=ar,pt.bpp=tr}return{ctype:S,depth:k,plte:ue,frames:J}};qt.encode.framize=function(e,t,r,n,i,c){for(var d=[],y=0;y<e.length;y++){var o=new Uint8Array(e[y]),x=new Uint32Array(o.buffer),S,k=0,O=0,Q=t,G=r,K=n?1:0;if(y!=0){for(var ee=c||n||y==1||d[y-2].dispose!=0?1:2,W=0,J=1e9,re=0;re<ee;re++){for(var pt=new Uint8Array(e[y-1-re]),ue=new Uint32Array(e[y-1-re]),ce=t,he=r,xe=-1,fe=-1,Ue=0;Ue<r;Ue++)for(var Ge=0;Ge<t;Ge++){var He=Ue*t+Ge;x[He]!=ue[He]&&(Ge<ce&&(ce=Ge),Ge>xe&&(xe=Ge),Ue<he&&(he=Ue),Ue>fe&&(fe=Ue))}xe==-1&&(ce=he=xe=fe=0),i&&((ce&1)==1&&ce--,(he&1)==1&&he--);var tt=(xe-ce+1)*(fe-he+1);tt<J&&(J=tt,W=re,k=ce,O=he,Q=xe-ce+1,G=fe-he+1)}var pt=new Uint8Array(e[y-1-W]);W==1&&(d[y-1].dispose=2),S=new Uint8Array(Q*G*4),qt._copyTile(pt,t,r,S,Q,G,-k,-O,0),K=qt._copyTile(o,t,r,S,Q,G,-k,-O,3)?1:0,K==1?qt.encode._prepareDiff(o,t,r,S,{x:k,y:O,width:Q,height:G}):qt._copyTile(o,t,r,S,Q,G,-k,-O,0)}else S=o.slice(0);d.push({rect:{x:k,y:O,width:Q,height:G},img:S,blend:K,dispose:0})}if(n)for(var y=0;y<d.length;y++){var gt=d[y];if(gt.blend!=1){var Et=gt.rect,ot=d[y-1].rect,Gt=Math.min(Et.x,ot.x),Pt=Math.min(Et.y,ot.y),Xt=Math.max(Et.x+Et.width,ot.x+ot.width),It=Math.max(Et.y+Et.height,ot.y+ot.height),dr={x:Gt,y:Pt,width:Xt-Gt,height:It-Pt};d[y-1].dispose=1,y-1!=0&&qt.encode._updateFrame(e,t,r,d,y-1,dr,i),qt.encode._updateFrame(e,t,r,d,y,dr,i)}}var ar=0;if(e.length!=1)for(var He=0;He<d.length;He++){var gt=d[He];ar+=gt.rect.width*gt.rect.height}return d};qt.encode._updateFrame=function(e,t,r,n,i,c,d){for(var y=Uint8Array,o=Uint32Array,x=new y(e[i-1]),S=new o(e[i-1]),k=i+1<e.length?new y(e[i+1]):null,O=new y(e[i]),Q=new o(O.buffer),G=t,K=r,ee=-1,W=-1,J=0;J<c.height;J++)for(var re=0;re<c.width;re++){var ue=c.x+re,ce=c.y+J,he=ce*t+ue,xe=Q[he];xe==0||n[i-1].dispose==0&&S[he]==xe&&(k==null||k[he*4+3]!=0)||(ue<G&&(G=ue),ue>ee&&(ee=ue),ce<K&&(K=ce),ce>W&&(W=ce))}ee==-1&&(G=K=ee=W=0),d&&((G&1)==1&&G--,(K&1)==1&&K--),c={x:G,y:K,width:ee-G+1,height:W-K+1};var fe=n[i];fe.rect=c,fe.blend=1,fe.img=new Uint8Array(c.width*c.height*4),n[i-1].dispose==0?(qt._copyTile(x,t,r,fe.img,c.width,c.height,-c.x,-c.y,0),qt.encode._prepareDiff(O,t,r,fe.img,c)):qt._copyTile(O,t,r,fe.img,c.width,c.height,-c.x,-c.y,0)};qt.encode._prepareDiff=function(e,t,r,n,i){qt._copyTile(e,t,r,n,i.width,i.height,-i.x,-i.y,2)};qt.encode._filterZero=function(e,t,r,n,i,c,d){var y=[],o=[0,1,2,3,4];c!=-1?o=[c]:(t*n>5e5||r==1)&&(o=[0]);var x;d&&(x={level:0});for(var S=d&&UZIP!=null?UZIP:eT,k=0;k<o.length;k++){for(var O=0;O<t;O++)qt.encode._filterLine(i,e,O,n,r,o[k]);y.push(S.deflate(i,x))}for(var Q,G=1e9,k=0;k<y.length;k++)y[k].length<G&&(Q=k,G=y[k].length);return y[Q]};qt.encode._filterLine=function(e,t,r,n,i,c){var d=r*n,y=d+r,o=qt.decode._paeth;if(e[y]=c,y++,c==0)if(n<500)for(var x=0;x<n;x++)e[y+x]=t[d+x];else e.set(new Uint8Array(t.buffer,d,n),y);else if(c==1){for(var x=0;x<i;x++)e[y+x]=t[d+x];for(var x=i;x<n;x++)e[y+x]=t[d+x]-t[d+x-i]+256&255}else if(r==0){for(var x=0;x<i;x++)e[y+x]=t[d+x];if(c==2)for(var x=i;x<n;x++)e[y+x]=t[d+x];if(c==3)for(var x=i;x<n;x++)e[y+x]=t[d+x]-(t[d+x-i]>>1)+256&255;if(c==4)for(var x=i;x<n;x++)e[y+x]=t[d+x]-o(t[d+x-i],0,0)+256&255}else{if(c==2)for(var x=0;x<n;x++)e[y+x]=t[d+x]+256-t[d+x-n]&255;if(c==3){for(var x=0;x<i;x++)e[y+x]=t[d+x]+256-(t[d+x-n]>>1)&255;for(var x=i;x<n;x++)e[y+x]=t[d+x]+256-(t[d+x-n]+t[d+x-i]>>1)&255}if(c==4){for(var x=0;x<i;x++)e[y+x]=t[d+x]+256-o(0,t[d+x-n],0)&255;for(var x=i;x<n;x++)e[y+x]=t[d+x]+256-o(t[d+x-i],t[d+x-n],t[d+x-i-n])&255}}};qt.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var r=t,n=0;n<8;n++)r&1?r=3988292384^r>>>1:r=r>>>1;e[t]=r}return e}(),update:function(e,t,r,n){for(var i=0;i<n;i++)e=qt.crc.table[(e^t[r+i])&255]^e>>>8;return e},crc:function(e,t,r){return qt.crc.update(4294967295,e,t,r)^4294967295}};qt.quantize=function(e,t){var r=new Uint8Array(e),n=r.slice(0),i=new Uint32Array(n.buffer),c=qt.quantize.getKDtree(n,t),d=c[0],y=c[1];qt.quantize.planeDst;for(var o=r,x=i,S=o.length,k=new Uint8Array(r.length>>2),O=0;O<S;O+=4){var Q=o[O]*.00392156862745098,G=o[O+1]*(1/255),K=o[O+2]*(1/255),ee=o[O+3]*(1/255),W=qt.quantize.getNearest(d,Q,G,K,ee);k[O>>2]=W.ind,x[O>>2]=W.est.rgba}return{abuf:n.buffer,inds:k,plte:y}};qt.quantize.getKDtree=function(e,t,r){r==null&&(r=1e-4);var n=new Uint32Array(e.buffer),i={i0:0,i1:e.length,bst:null,est:null,tdst:0,left:null,right:null};i.bst=qt.quantize.stats(e,i.i0,i.i1),i.est=qt.quantize.estats(i.bst);for(var c=[i];c.length<t;){for(var d=0,y=0,o=0;o<c.length;o++)c[o].est.L>d&&(d=c[o].est.L,y=o);if(d<r)break;var x=c[y],S=qt.quantize.splitPixels(e,n,x.i0,x.i1,x.est.e,x.est.eMq255),k=x.i0>=S||x.i1<=S;if(k){x.est.L=0;continue}var O={i0:x.i0,i1:S,bst:null,est:null,tdst:0,left:null,right:null};O.bst=qt.quantize.stats(e,O.i0,O.i1),O.est=qt.quantize.estats(O.bst);var Q={i0:S,i1:x.i1,bst:null,est:null,tdst:0,left:null,right:null};Q.bst={R:[],m:[],N:x.bst.N-O.bst.N};for(var o=0;o<16;o++)Q.bst.R[o]=x.bst.R[o]-O.bst.R[o];for(var o=0;o<4;o++)Q.bst.m[o]=x.bst.m[o]-O.bst.m[o];Q.est=qt.quantize.estats(Q.bst),x.left=O,x.right=Q,c[y]=O,c.push(Q)}c.sort(function(G,K){return K.bst.N-G.bst.N});for(var o=0;o<c.length;o++)c[o].ind=o;return[i,c]};qt.quantize.getNearest=function(e,t,r,n,i){if(e.left==null)return e.tdst=qt.quantize.dist(e.est.q,t,r,n,i),e;var c=qt.quantize.planeDst(e.est,t,r,n,i),d=e.left,y=e.right;c>0&&(d=e.right,y=e.left);var o=qt.quantize.getNearest(d,t,r,n,i);if(o.tdst<=c*c)return o;var x=qt.quantize.getNearest(y,t,r,n,i);return x.tdst<o.tdst?x:o};qt.quantize.planeDst=function(e,t,r,n,i){var c=e.e;return c[0]*t+c[1]*r+c[2]*n+c[3]*i-e.eMq};qt.quantize.dist=function(e,t,r,n,i){var c=t-e[0],d=r-e[1],y=n-e[2],o=i-e[3];return c*c+d*d+y*y+o*o};qt.quantize.splitPixels=function(e,t,r,n,i,c){var d=qt.quantize.vecDot;for(n-=4;r<n;){for(;d(e,r,i)<=c;)r+=4;for(;d(e,n,i)>c;)n-=4;if(r>=n)break;var y=t[r>>2];t[r>>2]=t[n>>2],t[n>>2]=y,r+=4,n-=4}for(;d(e,r,i)>c;)r-=4;return r+4};qt.quantize.vecDot=function(e,t,r){return e[t]*r[0]+e[t+1]*r[1]+e[t+2]*r[2]+e[t+3]*r[3]};qt.quantize.stats=function(e,t,r){for(var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[0,0,0,0],c=r-t>>2,d=t;d<r;d+=4){var y=e[d]*.00392156862745098,o=e[d+1]*(1/255),x=e[d+2]*(1/255),S=e[d+3]*(1/255);i[0]+=y,i[1]+=o,i[2]+=x,i[3]+=S,n[0]+=y*y,n[1]+=y*o,n[2]+=y*x,n[3]+=y*S,n[5]+=o*o,n[6]+=o*x,n[7]+=o*S,n[10]+=x*x,n[11]+=x*S,n[15]+=S*S}return n[4]=n[1],n[8]=n[2],n[9]=n[6],n[12]=n[3],n[13]=n[7],n[14]=n[11],{R:n,m:i,N:c}};qt.quantize.estats=function(e){var t=e.R,r=e.m,n=e.N,i=r[0],c=r[1],d=r[2],y=r[3],o=n==0?0:1/n,x=[t[0]-i*i*o,t[1]-i*c*o,t[2]-i*d*o,t[3]-i*y*o,t[4]-c*i*o,t[5]-c*c*o,t[6]-c*d*o,t[7]-c*y*o,t[8]-d*i*o,t[9]-d*c*o,t[10]-d*d*o,t[11]-d*y*o,t[12]-y*i*o,t[13]-y*c*o,t[14]-y*d*o,t[15]-y*y*o],S=x,k=qt.M4,O=[.5,.5,.5,.5],Q=0,G=0;if(n!=0)for(var K=0;K<10&&(O=k.multVec(S,O),G=Math.sqrt(k.dot(O,O)),O=k.sml(1/G,O),!(Math.abs(G-Q)<1e-9));K++)Q=G;var ee=[i*o,c*o,d*o,y*o],W=k.dot(k.sml(255,ee),O);return{Cov:x,q:ee,e:O,L:Q,eMq255:W,eMq:k.dot(O,ee),rgba:(Math.round(255*ee[3])<<24|Math.round(255*ee[2])<<16|Math.round(255*ee[1])<<8|Math.round(255*ee[0])<<0)>>>0}};qt.M4={multVec:function(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],e[4]*t[0]+e[5]*t[1]+e[6]*t[2]+e[7]*t[3],e[8]*t[0]+e[9]*t[1]+e[10]*t[2]+e[11]*t[3],e[12]*t[0]+e[13]*t[1]+e[14]*t[2]+e[15]*t[3]]},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},sml:function(e,t){return[e*t[0],e*t[1],e*t[2],e*t[3]]}};qt.encode.concatRGBA=function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r].byteLength;for(var n=new Uint8Array(t),i=0,r=0;r<e.length;r++){for(var c=new Uint8Array(e[r]),d=c.length,y=0;y<d;y+=4){var o=c[y],x=c[y+1],S=c[y+2],k=c[y+3];k==0&&(o=x=S=0),n[i+y]=o,n[i+y+1]=x,n[i+y+2]=S,n[i+y+3]=k}i+=d}return n.buffer};var nTe=function(e){if(e===0)return qf.Greyscale;if(e===2)return qf.Truecolour;if(e===3)return qf.IndexedColour;if(e===4)return qf.GreyscaleWithAlpha;if(e===6)return qf.TruecolourWithAlpha;throw new Error("Unknown color type: "+e)},iTe=function(e){for(var t=Math.floor(e.length/4),r=new Uint8Array(t*3),n=new Uint8Array(t*1),i=0,c=0,d=0;i<e.length;)r[c++]=e[i++],r[c++]=e[i++],r[c++]=e[i++],n[d++]=e[i++];return{rgbChannel:r,alphaChannel:n}},qf;(function(e){e.Greyscale="Greyscale",e.Truecolour="Truecolour",e.IndexedColour="IndexedColour",e.GreyscaleWithAlpha="GreyscaleWithAlpha",e.TruecolourWithAlpha="TruecolourWithAlpha"})(qf||(qf={}));var oTe=function(){function e(t){var r=qt.decode(t),n=qt.toRGBA8(r);if(n.length>1)throw new Error("Animated PNGs are not supported");var i=new Uint8Array(n[0]),c=iTe(i),d=c.rgbChannel,y=c.alphaChannel;this.rgbChannel=d;var o=y.some(function(x){return x<255});o&&(this.alphaChannel=y),this.type=nTe(r.ctype),this.width=r.width,this.height=r.height,this.bitsPerComponent=8}return e.load=function(t){return new e(t)},e}(),YW=function(){function e(t){this.image=t,this.bitsPerComponent=t.bitsPerComponent,this.width=t.width,this.height=t.height,this.colorSpace="DeviceRGB"}return e.for=function(t){return yn(this,void 0,void 0,function(){var r;return _n(this,function(n){return r=oTe.load(t),[2,new e(r)]})})},e.prototype.embedIntoContext=function(t,r){return yn(this,void 0,void 0,function(){var n,i;return _n(this,function(c){return n=this.embedAlphaChannel(t),i=t.flateStream(this.image.rgbChannel,{Type:"XObject",Subtype:"Image",BitsPerComponent:this.image.bitsPerComponent,Width:this.image.width,Height:this.image.height,ColorSpace:this.colorSpace,SMask:n}),r?(t.assign(r,i),[2,r]):[2,t.register(i)]})})},e.prototype.embedAlphaChannel=function(t){if(this.image.alphaChannel){var r=t.flateStream(this.image.alphaChannel,{Type:"XObject",Subtype:"Image",Height:this.image.height,Width:this.image.width,BitsPerComponent:this.image.bitsPerComponent,ColorSpace:"DeviceGray",Decode:[0,1]});return t.register(r)}},e}(),JW=function(){function e(t,r,n){this.bytes=t,this.start=r||0,this.pos=this.start,this.end=r&&n?r+n:this.bytes.length}return Object.defineProperty(e.prototype,"length",{get:function(){return this.end-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this.length===0},enumerable:!1,configurable:!0}),e.prototype.getByte=function(){return this.pos>=this.end?-1:this.bytes[this.pos++]},e.prototype.getUint16=function(){var t=this.getByte(),r=this.getByte();return t===-1||r===-1?-1:(t<<8)+r},e.prototype.getInt32=function(){var t=this.getByte(),r=this.getByte(),n=this.getByte(),i=this.getByte();return(t<<24)+(r<<16)+(n<<8)+i},e.prototype.getBytes=function(t,r){r===void 0&&(r=!1);var n=this.bytes,i=this.pos,c=this.end;if(t){var y=i+t;y>c&&(y=c),this.pos=y;var d=n.subarray(i,y);return r?new Uint8ClampedArray(d):d}else{var d=n.subarray(i,c);return r?new Uint8ClampedArray(d):d}},e.prototype.peekByte=function(){var t=this.getByte();return this.pos--,t},e.prototype.peekBytes=function(t,r){r===void 0&&(r=!1);var n=this.getBytes(t,r);return this.pos-=n.length,n},e.prototype.skip=function(t){t||(t=1),this.pos+=t},e.prototype.reset=function(){this.pos=this.start},e.prototype.moveStart=function(){this.start=this.pos},e.prototype.makeSubStream=function(t,r){return new e(this.bytes,t,r)},e.prototype.decode=function(){return this.bytes},e}(),aTe=new Uint8Array(0),px=function(){function e(t){if(this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=aTe,this.minBufferLength=512,t)for(;this.minBufferLength<t;)this.minBufferLength*=2}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){for(;!this.eof&&this.bufferLength===0;)this.readBlock();return this.bufferLength===0},enumerable:!1,configurable:!0}),e.prototype.getByte=function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.pos++]},e.prototype.getUint16=function(){var t=this.getByte(),r=this.getByte();return t===-1||r===-1?-1:(t<<8)+r},e.prototype.getInt32=function(){var t=this.getByte(),r=this.getByte(),n=this.getByte(),i=this.getByte();return(t<<24)+(r<<16)+(n<<8)+i},e.prototype.getBytes=function(t,r){r===void 0&&(r=!1);var n,i=this.pos;if(t){for(this.ensureBuffer(i+t),n=i+t;!this.eof&&this.bufferLength<n;)this.readBlock();var c=this.bufferLength;n>c&&(n=c)}else{for(;!this.eof;)this.readBlock();n=this.bufferLength}this.pos=n;var d=this.buffer.subarray(i,n);return r&&!(d instanceof Uint8ClampedArray)?new Uint8ClampedArray(d):d},e.prototype.peekByte=function(){var t=this.getByte();return this.pos--,t},e.prototype.peekBytes=function(t,r){r===void 0&&(r=!1);var n=this.getBytes(t,r);return this.pos-=n.length,n},e.prototype.skip=function(t){t||(t=1),this.pos+=t},e.prototype.reset=function(){this.pos=0},e.prototype.makeSubStream=function(t,r){for(var n=t+r;this.bufferLength<=n&&!this.eof;)this.readBlock();return new JW(this.buffer,t,r)},e.prototype.decode=function(){for(;!this.eof;)this.readBlock();return this.buffer.subarray(0,this.bufferLength)},e.prototype.readBlock=function(){throw new jl(this.constructor.name,"readBlock")},e.prototype.ensureBuffer=function(t){var r=this.buffer;if(t<=r.byteLength)return r;for(var n=this.minBufferLength;n<t;)n*=2;var i=new Uint8Array(n);return i.set(r),this.buffer=i},e}(),iV=function(e){return e===32||e===9||e===13||e===10},sTe=function(e){er(t,e);function t(r,n){var i=e.call(this,n)||this;return i.stream=r,i.input=new Uint8Array(5),n&&(n=.8*n),i}return t.prototype.readBlock=function(){for(var r=126,n=122,i=-1,c=this.stream,d=c.getByte();iV(d);)d=c.getByte();if(d===i||d===r){this.eof=!0;return}var y=this.bufferLength,o,x;if(d===n){for(o=this.ensureBuffer(y+4),x=0;x<4;++x)o[y+x]=0;this.bufferLength+=4}else{var S=this.input;for(S[0]=d,x=1;x<5;++x){for(d=c.getByte();iV(d);)d=c.getByte();if(S[x]=d,d===i||d===r)break}if(o=this.ensureBuffer(y+x-1),this.bufferLength+=x-1,x<5){for(;x<5;++x)S[x]=117;this.eof=!0}var k=0;for(x=0;x<5;++x)k=k*85+(S[x]-33);for(x=3;x>=0;--x)o[y+x]=k&255,k>>=8}},t}(px),lTe=function(e){er(t,e);function t(r,n){var i=e.call(this,n)||this;return i.stream=r,i.firstDigit=-1,n&&(n=.5*n),i}return t.prototype.readBlock=function(){var r=8e3,n=this.stream.getBytes(r);if(!n.length){this.eof=!0;return}for(var i=n.length+1>>1,c=this.ensureBuffer(this.bufferLength+i),d=this.bufferLength,y=this.firstDigit,o=0,x=n.length;o<x;o++){var S=n[o],k=void 0;if(S>=48&&S<=57)k=S&15;else if(S>=65&&S<=70||S>=97&&S<=102)k=(S&15)+9;else if(S===62){this.eof=!0;break}else continue;y<0?y=k:(c[d++]=y<<4|k,y=-1)}y>=0&&this.eof&&(c[d++]=y<<4,y=-1),this.firstDigit=y,this.bufferLength=d},t}(px),oV=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),cTe=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),uTe=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),ATe=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],hTe=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5],dTe=function(e){er(t,e);function t(r,n){var i=e.call(this,n)||this;i.stream=r;var c=r.getByte(),d=r.getByte();if(c===-1||d===-1)throw new Error("Invalid header in flate stream: "+c+", "+d);if((c&15)!==8)throw new Error("Unknown compression method in flate stream: "+c+", "+d);if(((c<<8)+d)%31!==0)throw new Error("Bad FCHECK in flate stream: "+c+", "+d);if(d&32)throw new Error("FDICT bit set in flate stream: "+c+", "+d);return i.codeSize=0,i.codeBuf=0,i}return t.prototype.readBlock=function(){var r,n,i=this.stream,c=this.getBits(3);if(c&1&&(this.eof=!0),c>>=1,c===0){var d=void 0;if((d=i.getByte())===-1)throw new Error("Bad block header in flate stream");var y=d;if((d=i.getByte())===-1)throw new Error("Bad block header in flate stream");if(y|=d<<8,(d=i.getByte())===-1)throw new Error("Bad block header in flate stream");var o=d;if((d=i.getByte())===-1)throw new Error("Bad block header in flate stream");if(o|=d<<8,o!==(~y&65535)&&(y!==0||o!==0))throw new Error("Bad uncompressed block length in flate stream");this.codeBuf=0,this.codeSize=0;var x=this.bufferLength;r=this.ensureBuffer(x+y);var S=x+y;if(this.bufferLength=S,y===0)i.peekByte()===-1&&(this.eof=!0);else for(var k=x;k<S;++k){if((d=i.getByte())===-1){this.eof=!0;break}r[k]=d}return}var O,Q;if(c===1)O=ATe,Q=hTe;else if(c===2){var G=this.getBits(5)+257,K=this.getBits(5)+1,ee=this.getBits(4)+4,W=new Uint8Array(oV.length),J=void 0;for(J=0;J<ee;++J)W[oV[J]]=this.getBits(3);var re=this.generateHuffmanTable(W);n=0,J=0;for(var ue=G+K,ce=new Uint8Array(ue),he=void 0,xe=void 0,fe=void 0;J<ue;){var Ue=this.getCode(re);if(Ue===16)he=2,xe=3,fe=n;else if(Ue===17)he=3,xe=3,fe=n=0;else if(Ue===18)he=7,xe=11,fe=n=0;else{ce[J++]=n=Ue;continue}for(var Ge=this.getBits(he)+xe;Ge-- >0;)ce[J++]=fe}O=this.generateHuffmanTable(ce.subarray(0,G)),Q=this.generateHuffmanTable(ce.subarray(G,ue))}else throw new Error("Unknown block type in flate stream");r=this.buffer;for(var He=r?r.length:0,tt=this.bufferLength;;){var pt=this.getCode(O);if(pt<256){tt+1>=He&&(r=this.ensureBuffer(tt+1),He=r.length),r[tt++]=pt;continue}if(pt===256){this.bufferLength=tt;return}pt-=257,pt=cTe[pt];var gt=pt>>16;gt>0&&(gt=this.getBits(gt)),n=(pt&65535)+gt,pt=this.getCode(Q),pt=uTe[pt],gt=pt>>16,gt>0&&(gt=this.getBits(gt));var Et=(pt&65535)+gt;tt+n>=He&&(r=this.ensureBuffer(tt+n),He=r.length);for(var ot=0;ot<n;++ot,++tt)r[tt]=r[tt-Et]}},t.prototype.getBits=function(r){for(var n=this.stream,i=this.codeSize,c=this.codeBuf,d;i<r;){if((d=n.getByte())===-1)throw new Error("Bad encoding in flate stream");c|=d<<i,i+=8}return d=c&(1<<r)-1,this.codeBuf=c>>r,this.codeSize=i-=r,d},t.prototype.getCode=function(r){for(var n=this.stream,i=r[0],c=r[1],d=this.codeSize,y=this.codeBuf,o;d<c&&(o=n.getByte())!==-1;)y|=o<<d,d+=8;var x=i[y&(1<<c)-1];typeof i=="number"&&console.log("FLATE:",x);var S=x>>16,k=x&65535;if(S<1||d<S)throw new Error("Bad encoding in flate stream");return this.codeBuf=y>>S,this.codeSize=d-S,k},t.prototype.generateHuffmanTable=function(r){var n=r.length,i=0,c;for(c=0;c<n;++c)r[c]>i&&(i=r[c]);for(var d=1<<i,y=new Int32Array(d),o=1,x=0,S=2;o<=i;++o,x<<=1,S<<=1)for(var k=0;k<n;++k)if(r[k]===o){var O=0,Q=x;for(c=0;c<o;++c)O=O<<1|Q&1,Q>>=1;for(c=O;c<d;c+=S)y[c]=o<<16|k;++x}return[y,i]},t}(px),fTe=function(e){er(t,e);function t(r,n,i){var c=e.call(this,n)||this;c.stream=r,c.cachedData=0,c.bitsCached=0;for(var d=4096,y={earlyChange:i,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(d),dictionaryLengths:new Uint16Array(d),dictionaryPrevCodes:new Uint16Array(d),currentSequence:new Uint8Array(d),currentSequenceLength:0},o=0;o<256;++o)y.dictionaryValues[o]=o,y.dictionaryLengths[o]=1;return c.lzwState=y,c}return t.prototype.readBlock=function(){var r=512,n=r*2,i=r,c,d,y,o=this.lzwState;if(o){var x=o.earlyChange,S=o.nextCode,k=o.dictionaryValues,O=o.dictionaryLengths,Q=o.dictionaryPrevCodes,G=o.codeLength,K=o.prevCode,ee=o.currentSequence,W=o.currentSequenceLength,J=0,re=this.bufferLength,ue=this.ensureBuffer(this.bufferLength+n);for(c=0;c<r;c++){var ce=this.readBits(G),he=W>0;if(!ce||ce<256)ee[0]=ce,W=1;else if(ce>=258)if(ce<S)for(W=O[ce],d=W-1,y=ce;d>=0;d--)ee[d]=k[y],y=Q[y];else ee[W++]=ee[0];else if(ce===256){G=9,S=258,W=0;continue}else{this.eof=!0,delete this.lzwState;break}if(he&&(Q[S]=K,O[S]=O[K]+1,k[S]=ee[0],S++,G=S+x&S+x-1?G:Math.min(Math.log(S+x)/.6931471805599453+1,12)|0),K=ce,J+=W,n<J){do n+=i;while(n<J);ue=this.ensureBuffer(this.bufferLength+n)}for(d=0;d<W;d++)ue[re++]=ee[d]}o.nextCode=S,o.codeLength=G,o.prevCode=K,o.currentSequenceLength=W,this.bufferLength=re}},t.prototype.readBits=function(r){for(var n=this.bitsCached,i=this.cachedData;n<r;){var c=this.stream.getByte();if(c===-1)return this.eof=!0,null;i=i<<8|c,n+=8}return this.bitsCached=n-=r,this.cachedData=i,i>>>n&(1<<r)-1},t}(px),pTe=function(e){er(t,e);function t(r,n){var i=e.call(this,n)||this;return i.stream=r,i}return t.prototype.readBlock=function(){var r=this.stream.getBytes(2);if(!r||r.length<2||r[0]===128){this.eof=!0;return}var n,i=this.bufferLength,c=r[0];if(c<128){if(n=this.ensureBuffer(i+c+1),n[i++]=r[1],c>0){var d=this.stream.getBytes(c);n.set(d,i),i+=c}}else{c=257-c;var y=r[1];n=this.ensureBuffer(i+c+1);for(var o=0;o<c;o++)n[i++]=y}this.bufferLength=i},t}(px),aV=function(e,t,r){if(t===Le.of("FlateDecode"))return new dTe(e);if(t===Le.of("LZWDecode")){var n=1;if(r instanceof pn){var i=r.lookup(Le.of("EarlyChange"));i instanceof on&&(n=i.asNumber())}return new fTe(e,void 0,n)}if(t===Le.of("ASCII85Decode"))return new sTe(e);if(t===Le.of("ASCIIHexDecode"))return new lTe(e);if(t===Le.of("RunLengthDecode"))return new pTe(e);throw new BEe(t.asString())},$W=function(e){var t=e.dict,r=e.contents,n=new JW(r),i=t.lookup(Le.of("Filter")),c=t.lookup(Le.of("DecodeParms"));if(i instanceof Le)n=aV(n,i,c);else if(i instanceof Yn)for(var d=0,y=i.size();d<y;d++)n=aV(n,i.lookup(d,Le),c&&c.lookupMaybe(d,pn));else if(i)throw new ES([Le,Yn],i);return n},mTe=function(e){var t=e.MediaBox(),r=t.lookup(2,on).asNumber()-t.lookup(0,on).asNumber(),n=t.lookup(3,on).asNumber()-t.lookup(1,on).asNumber();return{left:0,bottom:0,right:r,top:n}},gTe=function(e){return[1,0,0,1,-e.left,-e.bottom]},eq=function(){function e(t,r,n){this.page=t;var i=r??mTe(t);this.width=i.right-i.left,this.height=i.top-i.bottom,this.boundingBox=i,this.transformationMatrix=n??gTe(i)}return e.for=function(t,r,n){return yn(this,void 0,void 0,function(){return _n(this,function(i){return[2,new e(t,r,n)]})})},e.prototype.embedIntoContext=function(t,r){return yn(this,void 0,void 0,function(){var n,i,c,d,y,o,x,S,k,O;return _n(this,function(Q){if(n=this.page.normalizedEntries(),i=n.Contents,c=n.Resources,!i)throw new CEe;return d=this.decodeContents(i),y=this.boundingBox,o=y.left,x=y.bottom,S=y.right,k=y.top,O=t.flateStream(d,{Type:"XObject",Subtype:"Form",FormType:1,BBox:[o,x,S,k],Matrix:this.transformationMatrix,Resources:c}),r?(t.assign(r,O),[2,r]):[2,t.register(O)]})})},e.prototype.decodeContents=function(t){for(var r=Uint8Array.of(ze.Newline),n=[],i=0,c=t.size();i<c;i++){var d=t.lookup(i,ol),y=void 0;if(d instanceof z1)y=$W(d).decode();else if(d instanceof G_)y=d.getUnencodedContents();else throw new SEe(d);n.push(y,r)}return HBe.apply(void 0,n)},e}(),_B=function(e,t){if(e!==void 0)return t[e]},K_;(function(e){e.UseNone="UseNone",e.UseOutlines="UseOutlines",e.UseThumbs="UseThumbs",e.UseOC="UseOC"})(K_||(K_={}));var W_;(function(e){e.L2R="L2R",e.R2L="R2L"})(W_||(W_={}));var q_;(function(e){e.None="None",e.AppDefault="AppDefault"})(q_||(q_={}));var IS;(function(e){e.Simplex="Simplex",e.DuplexFlipShortEdge="DuplexFlipShortEdge",e.DuplexFlipLongEdge="DuplexFlipLongEdge"})(IS||(IS={}));var sV=function(){function e(t){this.dict=t}return e.prototype.lookupBool=function(t){var r=this.dict.lookup(Le.of(t));if(r instanceof U1)return r},e.prototype.lookupName=function(t){var r=this.dict.lookup(Le.of(t));if(r instanceof Le)return r},e.prototype.HideToolbar=function(){return this.lookupBool("HideToolbar")},e.prototype.HideMenubar=function(){return this.lookupBool("HideMenubar")},e.prototype.HideWindowUI=function(){return this.lookupBool("HideWindowUI")},e.prototype.FitWindow=function(){return this.lookupBool("FitWindow")},e.prototype.CenterWindow=function(){return this.lookupBool("CenterWindow")},e.prototype.DisplayDocTitle=function(){return this.lookupBool("DisplayDocTitle")},e.prototype.NonFullScreenPageMode=function(){return this.lookupName("NonFullScreenPageMode")},e.prototype.Direction=function(){return this.lookupName("Direction")},e.prototype.PrintScaling=function(){return this.lookupName("PrintScaling")},e.prototype.Duplex=function(){return this.lookupName("Duplex")},e.prototype.PickTrayByPDFSize=function(){return this.lookupBool("PickTrayByPDFSize")},e.prototype.PrintPageRange=function(){var t=this.dict.lookup(Le.of("PrintPageRange"));if(t instanceof Yn)return t},e.prototype.NumCopies=function(){var t=this.dict.lookup(Le.of("NumCopies"));if(t instanceof on)return t},e.prototype.getHideToolbar=function(){var t,r;return(r=(t=this.HideToolbar())===null||t===void 0?void 0:t.asBoolean())!==null&&r!==void 0?r:!1},e.prototype.getHideMenubar=function(){var t,r;return(r=(t=this.HideMenubar())===null||t===void 0?void 0:t.asBoolean())!==null&&r!==void 0?r:!1},e.prototype.getHideWindowUI=function(){var t,r;return(r=(t=this.HideWindowUI())===null||t===void 0?void 0:t.asBoolean())!==null&&r!==void 0?r:!1},e.prototype.getFitWindow=function(){var t,r;return(r=(t=this.FitWindow())===null||t===void 0?void 0:t.asBoolean())!==null&&r!==void 0?r:!1},e.prototype.getCenterWindow=function(){var t,r;return(r=(t=this.CenterWindow())===null||t===void 0?void 0:t.asBoolean())!==null&&r!==void 0?r:!1},e.prototype.getDisplayDocTitle=function(){var t,r;return(r=(t=this.DisplayDocTitle())===null||t===void 0?void 0:t.asBoolean())!==null&&r!==void 0?r:!1},e.prototype.getNonFullScreenPageMode=function(){var t,r,n=(t=this.NonFullScreenPageMode())===null||t===void 0?void 0:t.decodeText();return(r=_B(n,K_))!==null&&r!==void 0?r:K_.UseNone},e.prototype.getReadingDirection=function(){var t,r,n=(t=this.Direction())===null||t===void 0?void 0:t.decodeText();return(r=_B(n,W_))!==null&&r!==void 0?r:W_.L2R},e.prototype.getPrintScaling=function(){var t,r,n=(t=this.PrintScaling())===null||t===void 0?void 0:t.decodeText();return(r=_B(n,q_))!==null&&r!==void 0?r:q_.AppDefault},e.prototype.getDuplex=function(){var t,r=(t=this.Duplex())===null||t===void 0?void 0:t.decodeText();return _B(r,IS)},e.prototype.getPickTrayByPDFSize=function(){var t;return(t=this.PickTrayByPDFSize())===null||t===void 0?void 0:t.asBoolean()},e.prototype.getPrintPageRange=function(){var t=this.PrintPageRange();if(!t)return[];for(var r=[],n=0;n<t.size();n+=2){var i=t.lookup(n,on).asNumber(),c=t.lookup(n+1,on).asNumber();r.push({start:i,end:c})}return r},e.prototype.getNumCopies=function(){var t,r;return(r=(t=this.NumCopies())===null||t===void 0?void 0:t.asNumber())!==null&&r!==void 0?r:1},e.prototype.setHideToolbar=function(t){var r=this.dict.context.obj(t);this.dict.set(Le.of("HideToolbar"),r)},e.prototype.setHideMenubar=function(t){var r=this.dict.context.obj(t);this.dict.set(Le.of("HideMenubar"),r)},e.prototype.setHideWindowUI=function(t){var r=this.dict.context.obj(t);this.dict.set(Le.of("HideWindowUI"),r)},e.prototype.setFitWindow=function(t){var r=this.dict.context.obj(t);this.dict.set(Le.of("FitWindow"),r)},e.prototype.setCenterWindow=function(t){var r=this.dict.context.obj(t);this.dict.set(Le.of("CenterWindow"),r)},e.prototype.setDisplayDocTitle=function(t){var r=this.dict.context.obj(t);this.dict.set(Le.of("DisplayDocTitle"),r)},e.prototype.setNonFullScreenPageMode=function(t){hd(t,"nonFullScreenPageMode",K_);var r=Le.of(t);this.dict.set(Le.of("NonFullScreenPageMode"),r)},e.prototype.setReadingDirection=function(t){hd(t,"readingDirection",W_);var r=Le.of(t);this.dict.set(Le.of("Direction"),r)},e.prototype.setPrintScaling=function(t){hd(t,"printScaling",q_);var r=Le.of(t);this.dict.set(Le.of("PrintScaling"),r)},e.prototype.setDuplex=function(t){hd(t,"duplex",IS);var r=Le.of(t);this.dict.set(Le.of("Duplex"),r)},e.prototype.setPickTrayByPDFSize=function(t){var r=this.dict.context.obj(t);this.dict.set(Le.of("PickTrayByPDFSize"),r)},e.prototype.setPrintPageRange=function(t){Array.isArray(t)||(t=[t]);for(var r=[],n=0,i=t.length;n<i;n++)r.push(t[n].start),r.push(t[n].end);VW(r,"printPageRange",["number"]);var c=this.dict.context.obj(r);this.dict.set(Le.of("PrintPageRange"),c)},e.prototype.setNumCopies=function(t){$s(t,"numCopies",1,Number.MAX_VALUE),wEe(t,"numCopies");var r=this.dict.context.obj(t);this.dict.set(Le.of("NumCopies"),r)},e.fromDict=function(t){return new e(t)},e.create=function(t){var r=t.obj({});return new e(r)},e}(),vTe=/\/([^\0\t\n\f\r\ ]+)[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]+Tf/,tq=function(){function e(t,r){this.dict=t,this.ref=r}return e.prototype.T=function(){return this.dict.lookupMaybe(Le.of("T"),ci,Jr)},e.prototype.Ff=function(){var t=this.getInheritableAttribute(Le.of("Ff"));return this.dict.context.lookupMaybe(t,on)},e.prototype.V=function(){var t=this.getInheritableAttribute(Le.of("V"));return this.dict.context.lookup(t)},e.prototype.Kids=function(){return this.dict.lookupMaybe(Le.of("Kids"),Yn)},e.prototype.DA=function(){var t=this.dict.lookup(Le.of("DA"));if(t instanceof ci||t instanceof Jr)return t},e.prototype.setKids=function(t){this.dict.set(Le.of("Kids"),this.dict.context.obj(t))},e.prototype.getParent=function(){var t=this.dict.get(Le.of("Parent"));if(t instanceof ui){var r=this.dict.lookup(Le.of("Parent"),pn);return new e(r,t)}},e.prototype.setParent=function(t){t?this.dict.set(Le.of("Parent"),t):this.dict.delete(Le.of("Parent"))},e.prototype.getFullyQualifiedName=function(){var t=this.getParent();return t?t.getFullyQualifiedName()+"."+this.getPartialName():this.getPartialName()},e.prototype.getPartialName=function(){var t;return(t=this.T())===null||t===void 0?void 0:t.decodeText()},e.prototype.setPartialName=function(t){t?this.dict.set(Le.of("T"),Jr.fromText(t)):this.dict.delete(Le.of("T"))},e.prototype.setDefaultAppearance=function(t){this.dict.set(Le.of("DA"),ci.of(t))},e.prototype.getDefaultAppearance=function(){var t=this.DA();return t instanceof Jr?t.decodeText():t==null?void 0:t.asString()},e.prototype.setFontSize=function(t){var r,n=(r=this.getFullyQualifiedName())!==null&&r!==void 0?r:"",i=this.getDefaultAppearance();if(!i)throw new IEe(n);var c=z2(i,vTe);if(!c.match)throw new MEe(n);var d=i.slice(0,c.pos-c.match[0].length),y=c.pos<=i.length?i.slice(c.pos):"",o=c.match[1],x=d+" /"+o+" "+t+" Tf "+y;this.setDefaultAppearance(x)},e.prototype.getFlags=function(){var t,r;return(r=(t=this.Ff())===null||t===void 0?void 0:t.asNumber())!==null&&r!==void 0?r:0},e.prototype.setFlags=function(t){this.dict.set(Le.of("Ff"),on.of(t))},e.prototype.hasFlag=function(t){var r=this.getFlags();return(r&t)!==0},e.prototype.setFlag=function(t){var r=this.getFlags();this.setFlags(r|t)},e.prototype.clearFlag=function(t){var r=this.getFlags();this.setFlags(r&~t)},e.prototype.setFlagTo=function(t,r){r?this.setFlag(t):this.clearFlag(t)},e.prototype.getInheritableAttribute=function(t){var r;return this.ascend(function(n){r||(r=n.dict.get(t))}),r},e.prototype.ascend=function(t){t(this);var r=this.getParent();r&&r.ascend(t)},e}(),$M=function(){function e(t){this.dict=t}return e.prototype.W=function(){var t=this.dict.lookup(Le.of("W"));if(t instanceof on)return t},e.prototype.getWidth=function(){var t,r;return(r=(t=this.W())===null||t===void 0?void 0:t.asNumber())!==null&&r!==void 0?r:1},e.prototype.setWidth=function(t){var r=this.dict.context.obj(t);this.dict.set(Le.of("W"),r)},e.fromDict=function(t){return new e(t)},e}(),yTe=function(){function e(t){this.dict=t}return e.prototype.Rect=function(){return this.dict.lookup(Le.of("Rect"),Yn)},e.prototype.AP=function(){return this.dict.lookupMaybe(Le.of("AP"),pn)},e.prototype.F=function(){var t=this.dict.lookup(Le.of("F"));return this.dict.context.lookupMaybe(t,on)},e.prototype.getRectangle=function(){var t,r=this.Rect();return(t=r==null?void 0:r.asRectangle())!==null&&t!==void 0?t:{x:0,y:0,width:0,height:0}},e.prototype.setRectangle=function(t){var r=t.x,n=t.y,i=t.width,c=t.height,d=this.dict.context.obj([r,n,r+i,n+c]);this.dict.set(Le.of("Rect"),d)},e.prototype.getAppearanceState=function(){var t=this.dict.lookup(Le.of("AS"));if(t instanceof Le)return t},e.prototype.setAppearanceState=function(t){this.dict.set(Le.of("AS"),t)},e.prototype.setAppearances=function(t){this.dict.set(Le.of("AP"),t)},e.prototype.ensureAP=function(){var t=this.AP();return t||(t=this.dict.context.obj({}),this.dict.set(Le.of("AP"),t)),t},e.prototype.getNormalAppearance=function(){var t=this.ensureAP(),r=t.get(Le.of("N"));if(r instanceof ui||r instanceof pn)return r;throw new Error("Unexpected N type: "+(r==null?void 0:r.constructor.name))},e.prototype.setNormalAppearance=function(t){var r=this.ensureAP();r.set(Le.of("N"),t)},e.prototype.setRolloverAppearance=function(t){var r=this.ensureAP();r.set(Le.of("R"),t)},e.prototype.setDownAppearance=function(t){var r=this.ensureAP();r.set(Le.of("D"),t)},e.prototype.removeRolloverAppearance=function(){var t=this.AP();t==null||t.delete(Le.of("R"))},e.prototype.removeDownAppearance=function(){var t=this.AP();t==null||t.delete(Le.of("D"))},e.prototype.getAppearances=function(){var t=this.AP();if(t){var r=t.lookup(Le.of("N"),pn,ol),n=t.lookupMaybe(Le.of("R"),pn,ol),i=t.lookupMaybe(Le.of("D"),pn,ol);return{normal:r,rollover:n,down:i}}},e.prototype.getFlags=function(){var t,r;return(r=(t=this.F())===null||t===void 0?void 0:t.asNumber())!==null&&r!==void 0?r:0},e.prototype.setFlags=function(t){this.dict.set(Le.of("F"),on.of(t))},e.prototype.hasFlag=function(t){var r=this.getFlags();return(r&t)!==0},e.prototype.setFlag=function(t){var r=this.getFlags();this.setFlags(r|t)},e.prototype.clearFlag=function(t){var r=this.getFlags();this.setFlags(r&~t)},e.prototype.setFlagTo=function(t,r){r?this.setFlag(t):this.clearFlag(t)},e.fromDict=function(t){return new e(t)},e}(),eP=function(){function e(t){this.dict=t}return e.prototype.R=function(){var t=this.dict.lookup(Le.of("R"));if(t instanceof on)return t},e.prototype.BC=function(){var t=this.dict.lookup(Le.of("BC"));if(t instanceof Yn)return t},e.prototype.BG=function(){var t=this.dict.lookup(Le.of("BG"));if(t instanceof Yn)return t},e.prototype.CA=function(){var t=this.dict.lookup(Le.of("CA"));if(t instanceof Jr||t instanceof ci)return t},e.prototype.RC=function(){var t=this.dict.lookup(Le.of("RC"));if(t instanceof Jr||t instanceof ci)return t},e.prototype.AC=function(){var t=this.dict.lookup(Le.of("AC"));if(t instanceof Jr||t instanceof ci)return t},e.prototype.getRotation=function(){var t;return(t=this.R())===null||t===void 0?void 0:t.asNumber()},e.prototype.getBorderColor=function(){var t=this.BC();if(t){for(var r=[],n=0,i=t==null?void 0:t.size();n<i;n++){var c=t.get(n);c instanceof on&&r.push(c.asNumber())}return r}},e.prototype.getBackgroundColor=function(){var t=this.BG();if(t){for(var r=[],n=0,i=t==null?void 0:t.size();n<i;n++){var c=t.get(n);c instanceof on&&r.push(c.asNumber())}return r}},e.prototype.getCaptions=function(){var t=this.CA(),r=this.RC(),n=this.AC();return{normal:t==null?void 0:t.decodeText(),rollover:r==null?void 0:r.decodeText(),down:n==null?void 0:n.decodeText()}},e.prototype.setRotation=function(t){var r=this.dict.context.obj(t);this.dict.set(Le.of("R"),r)},e.prototype.setBorderColor=function(t){var r=this.dict.context.obj(t);this.dict.set(Le.of("BC"),r)},e.prototype.setBackgroundColor=function(t){var r=this.dict.context.obj(t);this.dict.set(Le.of("BG"),r)},e.prototype.setCaptions=function(t){var r=Jr.fromText(t.normal);if(this.dict.set(Le.of("CA"),r),t.rollover){var n=Jr.fromText(t.rollover);this.dict.set(Le.of("RC"),n)}else this.dict.delete(Le.of("RC"));if(t.down){var i=Jr.fromText(t.down);this.dict.set(Le.of("AC"),i)}else this.dict.delete(Le.of("AC"))},e.fromDict=function(t){return new e(t)},e}(),fD=function(e){er(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.MK=function(){var r=this.dict.lookup(Le.of("MK"));if(r instanceof pn)return r},t.prototype.BS=function(){var r=this.dict.lookup(Le.of("BS"));if(r instanceof pn)return r},t.prototype.DA=function(){var r=this.dict.lookup(Le.of("DA"));if(r instanceof ci||r instanceof Jr)return r},t.prototype.P=function(){var r=this.dict.get(Le.of("P"));if(r instanceof ui)return r},t.prototype.setP=function(r){this.dict.set(Le.of("P"),r)},t.prototype.setDefaultAppearance=function(r){this.dict.set(Le.of("DA"),ci.of(r))},t.prototype.getDefaultAppearance=function(){var r=this.DA();return r instanceof Jr?r.decodeText():r==null?void 0:r.asString()},t.prototype.getAppearanceCharacteristics=function(){var r=this.MK();if(r)return eP.fromDict(r)},t.prototype.getOrCreateAppearanceCharacteristics=function(){var r=this.MK();if(r)return eP.fromDict(r);var n=eP.fromDict(this.dict.context.obj({}));return this.dict.set(Le.of("MK"),n.dict),n},t.prototype.getBorderStyle=function(){var r=this.BS();if(r)return $M.fromDict(r)},t.prototype.getOrCreateBorderStyle=function(){var r=this.BS();if(r)return $M.fromDict(r);var n=$M.fromDict(this.dict.context.obj({}));return this.dict.set(Le.of("BS"),n.dict),n},t.prototype.getOnValue=function(){var r,n=(r=this.getAppearances())===null||r===void 0?void 0:r.normal;if(n instanceof pn)for(var i=n.keys(),c=0,d=i.length;c<d;c++){var y=i[c];if(y!==Le.of("Off"))return y}},t.fromDict=function(r){return new t(r)},t.create=function(r,n){var i=r.obj({Type:"Annot",Subtype:"Widget",Rect:[0,0,0,0],Parent:n});return new t(i)},t}(yTe),F0=function(e){er(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.FT=function(){var r=this.getInheritableAttribute(Le.of("FT"));return this.dict.context.lookup(r,Le)},t.prototype.getWidgets=function(){var r=this.Kids();if(!r)return[fD.fromDict(this.dict)];for(var n=new Array(r.size()),i=0,c=r.size();i<c;i++){var d=r.lookup(i,pn);n[i]=fD.fromDict(d)}return n},t.prototype.addWidget=function(r){var n=this.normalizedEntries().Kids;n.push(r)},t.prototype.removeWidget=function(r){var n=this.Kids();if(n){if(r<0||r>n.size())throw new TS(r,0,n.size());n.remove(r)}else{if(r!==0)throw new TS(r,0,0);this.setKids([])}},t.prototype.normalizedEntries=function(){var r=this.Kids();return r||(r=this.dict.context.obj([this.ref]),this.dict.set(Le.of("Kids"),r)),{Kids:r}},t.fromDict=function(r,n){return new t(r,n)},t}(tq),eR=function(e){er(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.Opt=function(){return this.dict.lookupMaybe(Le.of("Opt"),ci,Jr,Yn)},t.prototype.setOpt=function(r){this.dict.set(Le.of("Opt"),this.dict.context.obj(r))},t.prototype.getExportValues=function(){var r=this.Opt();if(r){if(r instanceof ci||r instanceof Jr)return[r];for(var n=[],i=0,c=r.size();i<c;i++){var d=r.lookup(i);(d instanceof ci||d instanceof Jr)&&n.push(d)}return n}},t.prototype.removeExportValue=function(r){var n=this.Opt();if(n)if(n instanceof ci||n instanceof Jr){if(r!==0)throw new TS(r,0,0);this.setOpt([])}else{if(r<0||r>n.size())throw new TS(r,0,n.size());n.remove(r)}},t.prototype.normalizeExportValues=function(){for(var r,n,i,c,d=(r=this.getExportValues())!==null&&r!==void 0?r:[],y=[],o=this.getWidgets(),x=0,S=o.length;x<S;x++){var k=o[x],O=(n=d[x])!==null&&n!==void 0?n:Jr.fromText((c=(i=k.getOnValue())===null||i===void 0?void 0:i.decodeText())!==null&&c!==void 0?c:"");y.push(O)}this.setOpt(y)},t.prototype.addOpt=function(r,n){var i;this.normalizeExportValues();var c=r.decodeText(),d;if(n)for(var y=(i=this.getExportValues())!==null&&i!==void 0?i:[],o=0,x=y.length;o<x;o++){var S=y[o];S.decodeText()===c&&(d=o)}var k=this.Opt();return k.push(r),d??k.size()-1},t.prototype.addWidgetWithOpt=function(r,n,i){var c=this.addOpt(n,i),d=Le.of(String(c));return this.addWidget(r),d},t}(F0),iT=function(e){er(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.setValue=function(r){var n,i=(n=this.getOnValue())!==null&&n!==void 0?n:Le.of("Yes");if(r!==i&&r!==Le.of("Off"))throw new X2;this.dict.set(Le.of("V"),r);for(var c=this.getWidgets(),d=0,y=c.length;d<y;d++){var o=c[d],x=o.getOnValue()===r?r:Le.of("Off");o.setAppearanceState(x)}},t.prototype.getValue=function(){var r=this.V();return r instanceof Le?r:Le.of("Off")},t.prototype.getOnValue=function(){var r=this.getWidgets()[0];return r==null?void 0:r.getOnValue()},t.fromDict=function(r,n){return new t(r,n)},t.create=function(r){var n=r.obj({FT:"Btn",Kids:[]}),i=r.register(n);return new t(n,i)},t}(eR),Io=function(e){return 1<<e},Cc;(function(e){e[e.ReadOnly=Io(0)]="ReadOnly",e[e.Required=Io(1)]="Required",e[e.NoExport=Io(2)]="NoExport"})(Cc||(Cc={}));var zl;(function(e){e[e.NoToggleToOff=Io(14)]="NoToggleToOff",e[e.Radio=Io(15)]="Radio",e[e.PushButton=Io(16)]="PushButton",e[e.RadiosInUnison=Io(25)]="RadiosInUnison"})(zl||(zl={}));var to;(function(e){e[e.Multiline=Io(12)]="Multiline",e[e.Password=Io(13)]="Password",e[e.FileSelect=Io(20)]="FileSelect",e[e.DoNotSpellCheck=Io(22)]="DoNotSpellCheck",e[e.DoNotScroll=Io(23)]="DoNotScroll",e[e.Comb=Io(24)]="Comb",e[e.RichText=Io(25)]="RichText"})(to||(to={}));var si;(function(e){e[e.Combo=Io(17)]="Combo",e[e.Edit=Io(18)]="Edit",e[e.Sort=Io(19)]="Sort",e[e.MultiSelect=Io(21)]="MultiSelect",e[e.DoNotSpellCheck=Io(22)]="DoNotSpellCheck",e[e.CommitOnSelChange=Io(26)]="CommitOnSelChange"})(si||(si={}));var rq=function(e){er(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.setValues=function(r){if(this.hasFlag(si.Combo)&&!this.hasFlag(si.Edit)&&!this.valuesAreValid(r))throw new X2;if(r.length===0&&this.dict.delete(Le.of("V")),r.length===1&&this.dict.set(Le.of("V"),r[0]),r.length>1){if(!this.hasFlag(si.MultiSelect))throw new FEe;this.dict.set(Le.of("V"),this.dict.context.obj(r))}this.updateSelectedIndices(r)},t.prototype.valuesAreValid=function(r){for(var n=this.getOptions(),i=function(o,x){var S=r[o].decodeText();if(!n.find(function(k){return S===(k.display||k.value).decodeText()}))return{value:!1}},c=0,d=r.length;c<d;c++){var y=i(c);if(typeof y=="object")return y.value}return!0},t.prototype.updateSelectedIndices=function(r){if(r.length>1){for(var n=new Array(r.length),i=this.getOptions(),c=function(o,x){var S=r[o].decodeText();n[o]=i.findIndex(function(k){return S===(k.display||k.value).decodeText()})},d=0,y=r.length;d<y;d++)c(d,y);this.dict.set(Le.of("I"),this.dict.context.obj(n.sort()))}else this.dict.delete(Le.of("I"))},t.prototype.getValues=function(){var r=this.V();if(r instanceof ci||r instanceof Jr)return[r];if(r instanceof Yn){for(var n=[],i=0,c=r.size();i<c;i++){var d=r.lookup(i);(d instanceof ci||d instanceof Jr)&&n.push(d)}return n}return[]},t.prototype.Opt=function(){return this.dict.lookupMaybe(Le.of("Opt"),ci,Jr,Yn)},t.prototype.setOptions=function(r){for(var n=new Array(r.length),i=0,c=r.length;i<c;i++){var d=r[i],y=d.value,o=d.display;n[i]=this.dict.context.obj([y,o||y])}this.dict.set(Le.of("Opt"),this.dict.context.obj(n))},t.prototype.getOptions=function(){var r=this.Opt();if(r instanceof ci||r instanceof Jr)return[{value:r,display:r}];if(r instanceof Yn){for(var n=[],i=0,c=r.size();i<c;i++){var d=r.lookup(i);if((d instanceof ci||d instanceof Jr)&&n.push({value:d,display:d}),d instanceof Yn&&d.size()>0){var y=d.lookup(0,ci,Jr),o=d.lookupMaybe(1,ci,Jr);n.push({value:y,display:o||y})}}return n}return[]},t}(F0),oT=function(e){er(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.fromDict=function(r,n){return new t(r,n)},t.create=function(r){var n=r.obj({FT:"Ch",Ff:si.Combo,Kids:[]}),i=r.register(n);return new t(n,i)},t}(rq),MS=function(e){er(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.addField=function(r){var n=this.normalizedEntries().Kids;n==null||n.push(r)},t.prototype.normalizedEntries=function(){var r=this.Kids();return r||(r=this.dict.context.obj([]),this.dict.set(Le.of("Kids"),r)),{Kids:r}},t.fromDict=function(r,n){return new t(r,n)},t.create=function(r){var n=r.obj({}),i=r.register(n);return new t(n,i)},t}(tq),tR=function(e){er(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.fromDict=function(r,n){return new t(r,n)},t}(F0),aT=function(e){er(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.MaxLen=function(){var r=this.dict.lookup(Le.of("MaxLen"));if(r instanceof on)return r},t.prototype.Q=function(){var r=this.dict.lookup(Le.of("Q"));if(r instanceof on)return r},t.prototype.setMaxLength=function(r){this.dict.set(Le.of("MaxLen"),on.of(r))},t.prototype.removeMaxLength=function(){this.dict.delete(Le.of("MaxLen"))},t.prototype.getMaxLength=function(){var r;return(r=this.MaxLen())===null||r===void 0?void 0:r.asNumber()},t.prototype.setQuadding=function(r){this.dict.set(Le.of("Q"),on.of(r))},t.prototype.getQuadding=function(){var r;return(r=this.Q())===null||r===void 0?void 0:r.asNumber()},t.prototype.setValue=function(r){this.dict.set(Le.of("V"),r)},t.prototype.removeValue=function(){this.dict.delete(Le.of("V"))},t.prototype.getValue=function(){var r=this.V();if(r instanceof ci||r instanceof Jr)return r},t.fromDict=function(r,n){return new t(r,n)},t.create=function(r){var n=r.obj({FT:"Tx",Kids:[]}),i=r.register(n);return new t(n,i)},t}(F0),sT=function(e){er(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.fromDict=function(r,n){return new t(r,n)},t.create=function(r){var n=r.obj({FT:"Btn",Ff:zl.PushButton,Kids:[]}),i=r.register(n);return new t(n,i)},t}(eR),lT=function(e){er(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.setValue=function(r){var n=this.getOnValues();if(!n.includes(r)&&r!==Le.of("Off"))throw new X2;this.dict.set(Le.of("V"),r);for(var i=this.getWidgets(),c=0,d=i.length;c<d;c++){var y=i[c],o=y.getOnValue()===r?r:Le.of("Off");y.setAppearanceState(o)}},t.prototype.getValue=function(){var r=this.V();return r instanceof Le?r:Le.of("Off")},t.prototype.getOnValues=function(){for(var r=this.getWidgets(),n=[],i=0,c=r.length;i<c;i++){var d=r[i].getOnValue();d&&n.push(d)}return n},t.fromDict=function(r,n){return new t(r,n)},t.create=function(r){var n=r.obj({FT:"Btn",Ff:zl.Radio,Kids:[]}),i=r.register(n);return new t(n,i)},t}(eR),cT=function(e){er(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.fromDict=function(r,n){return new t(r,n)},t.create=function(r){var n=r.obj({FT:"Ch",Kids:[]}),i=r.register(n);return new t(n,i)},t}(rq),rR=function(e){if(!e)return[];for(var t=[],r=0,n=e.size();r<n;r++){var i=e.get(r),c=e.lookup(r);i instanceof ui&&c instanceof pn&&t.push([nq(c,i),i])}return t},nq=function(e,t){var r=_Te(e);return r?MS.fromDict(e,t):xTe(e,t)},_Te=function(e){var t=e.lookup(Le.of("Kids"));if(t instanceof Yn)for(var r=0,n=t.size();r<n;r++){var i=t.lookup(r),c=i instanceof pn&&i.has(Le.of("T"));if(c)return!0}return!1},xTe=function(e,t){var r=nR(e,Le.of("FT")),n=e.context.lookup(r,Le);return n===Le.of("Btn")?bTe(e,t):n===Le.of("Ch")?wTe(e,t):n===Le.of("Tx")?aT.fromDict(e,t):n===Le.of("Sig")?tR.fromDict(e,t):F0.fromDict(e,t)},bTe=function(e,t){var r,n=nR(e,Le.of("Ff")),i=e.context.lookupMaybe(n,on),c=(r=i==null?void 0:i.asNumber())!==null&&r!==void 0?r:0;return pD(c,zl.PushButton)?sT.fromDict(e,t):pD(c,zl.Radio)?lT.fromDict(e,t):iT.fromDict(e,t)},wTe=function(e,t){var r,n=nR(e,Le.of("Ff")),i=e.context.lookupMaybe(n,on),c=(r=i==null?void 0:i.asNumber())!==null&&r!==void 0?r:0;return pD(c,si.Combo)?oT.fromDict(e,t):cT.fromDict(e,t)},pD=function(e,t){return(e&t)!==0},nR=function(e,t){var r;return iq(e,function(n){r||(r=n.get(t))}),r},iq=function(e,t){t(e);var r=e.lookupMaybe(Le.of("Parent"),pn);r&&iq(r,t)},PS=function(){function e(t){this.dict=t}return e.prototype.Fields=function(){var t=this.dict.lookup(Le.of("Fields"));if(t instanceof Yn)return t},e.prototype.getFields=function(){for(var t=this.normalizedEntries().Fields,r=new Array(t.size()),n=0,i=t.size();n<i;n++){var c=t.get(n),d=t.lookup(n,pn);r[n]=[nq(d,c),c]}return r},e.prototype.getAllFields=function(){var t=[],r=function(n){if(n)for(var i=0,c=n.length;i<c;i++){var d=n[i];t.push(d);var y=d[0];y instanceof MS&&r(rR(y.Kids()))}};return r(this.getFields()),t},e.prototype.addField=function(t){var r=this.normalizedEntries().Fields;r==null||r.push(t)},e.prototype.removeField=function(t){var r=t.getParent(),n=r===void 0?this.normalizedEntries().Fields:r.Kids(),i=n==null?void 0:n.indexOf(t.ref);if(n===void 0||i===void 0)throw new Error("Tried to remove inexistent field "+t.getFullyQualifiedName());n.remove(i),r!==void 0&&n.size()===0&&this.removeField(r)},e.prototype.normalizedEntries=function(){var t=this.Fields();return t||(t=this.dict.context.obj([]),this.dict.set(Le.of("Fields"),t)),{Fields:t}},e.fromDict=function(t){return new e(t)},e.create=function(t){var r=t.obj({Fields:[]});return new e(r)},e}(),oq=function(e){er(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.Pages=function(){return this.lookup(Le.of("Pages"),pn)},t.prototype.AcroForm=function(){return this.lookupMaybe(Le.of("AcroForm"),pn)},t.prototype.getAcroForm=function(){var r=this.AcroForm();if(r)return PS.fromDict(r)},t.prototype.getOrCreateAcroForm=function(){var r=this.getAcroForm();if(!r){r=PS.create(this.context);var n=this.context.register(r.dict);this.set(Le.of("AcroForm"),n)}return r},t.prototype.ViewerPreferences=function(){return this.lookupMaybe(Le.of("ViewerPreferences"),pn)},t.prototype.getViewerPreferences=function(){var r=this.ViewerPreferences();if(r)return sV.fromDict(r)},t.prototype.getOrCreateViewerPreferences=function(){var r=this.getViewerPreferences();if(!r){r=sV.create(this.context);var n=this.context.register(r.dict);this.set(Le.of("ViewerPreferences"),n)}return r},t.prototype.insertLeafNode=function(r,n){var i=this.get(Le.of("Pages")),c=this.Pages().insertLeafNode(r,n);return c||i},t.prototype.removeLeafNode=function(r){this.Pages().removeLeafNode(r)},t.withContextAndPages=function(r,n){var i=new Map;return i.set(Le.of("Type"),Le.of("Catalog")),i.set(Le.of("Pages"),n),new t(i,r)},t.fromMapWithContext=function(r,n){return new t(r,n)},t}(pn),aq=function(e){er(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.Parent=function(){return this.lookup(Le.of("Parent"))},t.prototype.Kids=function(){return this.lookup(Le.of("Kids"),Yn)},t.prototype.Count=function(){return this.lookup(Le.of("Count"),on)},t.prototype.pushTreeNode=function(r){var n=this.Kids();n.push(r)},t.prototype.pushLeafNode=function(r){var n=this.Kids();this.insertLeafKid(n.size(),r)},t.prototype.insertLeafNode=function(r,n){var i=this.Kids(),c=this.Count().asNumber();if(n>c)throw new qN(n,c);for(var d=n,y=0,o=i.size();y<o;y++){if(d===0){this.insertLeafKid(y,r);return}var x=i.get(y),S=this.context.lookup(x);if(S instanceof t){if(S.Count().asNumber()>d)return S.insertLeafNode(r,d)||x;d-=S.Count().asNumber()}S instanceof DA&&(d-=1)}if(d===0){this.insertLeafKid(i.size(),r);return}throw new XN(n,"insertLeafNode")},t.prototype.removeLeafNode=function(r,n){n===void 0&&(n=!0);var i=this.Kids(),c=this.Count().asNumber();if(r>=c)throw new qN(r,c);for(var d=r,y=0,o=i.size();y<o;y++){var x=i.get(y),S=this.context.lookup(x);if(S instanceof t)if(S.Count().asNumber()>d){S.removeLeafNode(d,n),n&&S.Kids().size()===0&&i.remove(y);return}else d-=S.Count().asNumber();if(S instanceof DA)if(d===0){this.removeKid(y);return}else d-=1}throw new XN(r,"removeLeafNode")},t.prototype.ascend=function(r){r(this);var n=this.Parent();n&&n.ascend(r)},t.prototype.traverse=function(r){for(var n=this.Kids(),i=0,c=n.size();i<c;i++){var d=n.get(i),y=this.context.lookup(d);y instanceof t&&y.traverse(r),r(y,d)}},t.prototype.insertLeafKid=function(r,n){var i=this.Kids();this.ascend(function(c){var d=c.Count().asNumber()+1;c.set(Le.of("Count"),on.of(d))}),i.insert(r,n)},t.prototype.removeKid=function(r){var n=this.Kids(),i=n.lookup(r);i instanceof DA&&this.ascend(function(c){var d=c.Count().asNumber()-1;c.set(Le.of("Count"),on.of(d))}),n.remove(r)},t.withContext=function(r,n){var i=new Map;return i.set(Le.of("Type"),Le.of("Pages")),i.set(Le.of("Kids"),r.obj([])),i.set(Le.of("Count"),r.obj(0)),n&&i.set(Le.of("Parent"),n),new t(i,r)},t.fromMapWithContext=function(r,n){return new t(r,n)},t}(pn),Ka=new Uint8Array(256);Ka[ze.Zero]=1;Ka[ze.One]=1;Ka[ze.Two]=1;Ka[ze.Three]=1;Ka[ze.Four]=1;Ka[ze.Five]=1;Ka[ze.Six]=1;Ka[ze.Seven]=1;Ka[ze.Eight]=1;Ka[ze.Nine]=1;var uT=new Uint8Array(256);uT[ze.Period]=1;uT[ze.Plus]=1;uT[ze.Minus]=1;var iR=new Uint8Array(256);for(var Ly=0,BTe=256;Ly<BTe;Ly++)iR[Ly]=Ka[Ly]||uT[Ly]?1:0;var lV=ze.Newline,cV=ze.CarriageReturn,CTe=function(){function e(t,r){r===void 0&&(r=!1),this.bytes=t,this.capNumbers=r}return e.prototype.parseRawInt=function(){for(var t="";!this.bytes.done();){var r=this.bytes.peek();if(!Ka[r])break;t+=MA(this.bytes.next())}var n=Number(t);if(!t||!isFinite(n))throw new ZN(this.bytes.position(),t);return n},e.prototype.parseRawNumber=function(){for(var t="";!this.bytes.done();){var r=this.bytes.peek();if(!iR[r]||(t+=MA(this.bytes.next()),r===ze.Period))break}for(;!this.bytes.done();){var r=this.bytes.peek();if(!Ka[r])break;t+=MA(this.bytes.next())}var n=Number(t);if(!t||!isFinite(n))throw new ZN(this.bytes.position(),t);if(n>Number.MAX_SAFE_INTEGER)if(this.capNumbers){var i="Parsed number that is too large for some PDF readers: "+t+", using Number.MAX_SAFE_INTEGER instead.";return console.warn(i),Number.MAX_SAFE_INTEGER}else{var i="Parsed number that is too large for some PDF readers: "+t+", not capping.";console.warn(i)}return n},e.prototype.skipWhitespace=function(){for(;!this.bytes.done()&&KA[this.bytes.peek()];)this.bytes.next()},e.prototype.skipLine=function(){for(;!this.bytes.done();){var t=this.bytes.peek();if(t===lV||t===cV)return;this.bytes.next()}},e.prototype.skipComment=function(){if(this.bytes.peek()!==ze.Percent)return!1;for(;!this.bytes.done();){var t=this.bytes.peek();if(t===lV||t===cV)return!0;this.bytes.next()}return!0},e.prototype.skipWhitespaceAndComments=function(){for(this.skipWhitespace();this.skipComment();)this.skipWhitespace()},e.prototype.matchKeyword=function(t){for(var r=this.bytes.offset(),n=0,i=t.length;n<i;n++)if(this.bytes.done()||this.bytes.next()!==t[n])return this.bytes.moveTo(r),!1;return!0},e}(),AT=function(){function e(t){this.idx=0,this.line=0,this.column=0,this.bytes=t,this.length=this.bytes.length}return e.prototype.moveTo=function(t){this.idx=t},e.prototype.next=function(){var t=this.bytes[this.idx++];return t===ze.Newline?(this.line+=1,this.column=0):this.column+=1,t},e.prototype.assertNext=function(t){if(this.peek()!==t)throw new PEe(this.position(),t,this.peek());return this.next()},e.prototype.peek=function(){return this.bytes[this.idx]},e.prototype.peekAhead=function(t){return this.bytes[this.idx+t]},e.prototype.peekAt=function(t){return this.bytes[t]},e.prototype.done=function(){return this.idx>=this.length},e.prototype.offset=function(){return this.idx},e.prototype.slice=function(t,r){return this.bytes.slice(t,r)},e.prototype.position=function(){return{line:this.line,column:this.column,offset:this.idx}},e.of=function(t){return new e(t)},e.fromPDFRawStream=function(t){return e.of($W(t).decode())},e}(),STe=ze.Space,Oy=ze.CarriageReturn,Uy=ze.Newline,zy=[ze.s,ze.t,ze.r,ze.e,ze.a,ze.m],xB=[ze.e,ze.n,ze.d,ze.s,ze.t,ze.r,ze.e,ze.a,ze.m],Bi={header:[ze.Percent,ze.P,ze.D,ze.F,ze.Dash],eof:[ze.Percent,ze.Percent,ze.E,ze.O,ze.F],obj:[ze.o,ze.b,ze.j],endobj:[ze.e,ze.n,ze.d,ze.o,ze.b,ze.j],xref:[ze.x,ze.r,ze.e,ze.f],trailer:[ze.t,ze.r,ze.a,ze.i,ze.l,ze.e,ze.r],startxref:[ze.s,ze.t,ze.a,ze.r,ze.t,ze.x,ze.r,ze.e,ze.f],true:[ze.t,ze.r,ze.u,ze.e],false:[ze.f,ze.a,ze.l,ze.s,ze.e],null:[ze.n,ze.u,ze.l,ze.l],stream:zy,streamEOF1:jn(zy,[STe,Oy,Uy]),streamEOF2:jn(zy,[Oy,Uy]),streamEOF3:jn(zy,[Oy]),streamEOF4:jn(zy,[Uy]),endstream:xB,EOF1endstream:jn([Oy,Uy],xB),EOF2endstream:jn([Oy],xB),EOF3endstream:jn([Uy],xB)},sq=function(e){er(t,e);function t(r,n,i){i===void 0&&(i=!1);var c=e.call(this,r,i)||this;return c.context=n,c}return t.prototype.parseObject=function(){if(this.skipWhitespaceAndComments(),this.matchKeyword(Bi.true))return U1.True;if(this.matchKeyword(Bi.false))return U1.False;if(this.matchKeyword(Bi.null))return Bs;var r=this.bytes.peek();if(r===ze.LessThan&&this.bytes.peekAhead(1)===ze.LessThan)return this.parseDictOrStream();if(r===ze.LessThan)return this.parseHexString();if(r===ze.LeftParen)return this.parseString();if(r===ze.ForwardSlash)return this.parseName();if(r===ze.LeftSquareBracket)return this.parseArray();if(iR[r])return this.parseNumberOrRef();throw new DEe(this.bytes.position(),r)},t.prototype.parseNumberOrRef=function(){var r=this.parseRawNumber();this.skipWhitespaceAndComments();var n=this.bytes.offset();if(Ka[this.bytes.peek()]){var i=this.parseRawNumber();if(this.skipWhitespaceAndComments(),this.bytes.peek()===ze.R)return this.bytes.assertNext(ze.R),ui.of(r,i)}return this.bytes.moveTo(n),on.of(r)},t.prototype.parseHexString=function(){var r="";for(this.bytes.assertNext(ze.LessThan);!this.bytes.done()&&this.bytes.peek()!==ze.GreaterThan;)r+=MA(this.bytes.next());return this.bytes.assertNext(ze.GreaterThan),Jr.of(r)},t.prototype.parseString=function(){for(var r=0,n=!1,i="";!this.bytes.done();){var c=this.bytes.next();if(i+=MA(c),n||(c===ze.LeftParen&&(r+=1),c===ze.RightParen&&(r-=1)),c===ze.BackSlash?n=!n:n&&(n=!1),r===0)return ci.of(i.substring(1,i.length-1))}throw new LEe(this.bytes.position())},t.prototype.parseName=function(){this.bytes.assertNext(ze.ForwardSlash);for(var r="";!this.bytes.done();){var n=this.bytes.peek();if(KA[n]||ic[n])break;r+=MA(n),this.bytes.next()}return Le.of(r)},t.prototype.parseArray=function(){this.bytes.assertNext(ze.LeftSquareBracket),this.skipWhitespaceAndComments();for(var r=Yn.withContext(this.context);this.bytes.peek()!==ze.RightSquareBracket;){var n=this.parseObject();r.push(n),this.skipWhitespaceAndComments()}return this.bytes.assertNext(ze.RightSquareBracket),r},t.prototype.parseDict=function(){this.bytes.assertNext(ze.LessThan),this.bytes.assertNext(ze.LessThan),this.skipWhitespaceAndComments();for(var r=new Map;!this.bytes.done()&&this.bytes.peek()!==ze.GreaterThan&&this.bytes.peekAhead(1)!==ze.GreaterThan;){var n=this.parseName(),i=this.parseObject();r.set(n,i),this.skipWhitespaceAndComments()}this.skipWhitespaceAndComments(),this.bytes.assertNext(ze.GreaterThan),this.bytes.assertNext(ze.GreaterThan);var c=r.get(Le.of("Type"));return c===Le.of("Catalog")?oq.fromMapWithContext(r,this.context):c===Le.of("Pages")?aq.fromMapWithContext(r,this.context):c===Le.of("Page")?DA.fromMapWithContext(r,this.context):pn.fromMapWithContext(r,this.context)},t.prototype.parseDictOrStream=function(){var r=this.bytes.position(),n=this.parseDict();if(this.skipWhitespaceAndComments(),!this.matchKeyword(Bi.streamEOF1)&&!this.matchKeyword(Bi.streamEOF2)&&!this.matchKeyword(Bi.streamEOF3)&&!this.matchKeyword(Bi.streamEOF4)&&!this.matchKeyword(Bi.stream))return n;var i=this.bytes.offset(),c,d=n.get(Le.of("Length"));d instanceof on?(c=i+d.asNumber(),this.bytes.moveTo(c),this.skipWhitespaceAndComments(),this.matchKeyword(Bi.endstream)||(this.bytes.moveTo(i),c=this.findEndOfStreamFallback(r))):c=this.findEndOfStreamFallback(r);var y=this.bytes.slice(i,c);return z1.of(n,y)},t.prototype.findEndOfStreamFallback=function(r){for(var n=1,i=this.bytes.offset();!this.bytes.done()&&(i=this.bytes.offset(),this.matchKeyword(Bi.stream)?n+=1:this.matchKeyword(Bi.EOF1endstream)||this.matchKeyword(Bi.EOF2endstream)||this.matchKeyword(Bi.EOF3endstream)||this.matchKeyword(Bi.endstream)?n-=1:this.bytes.next(),n!==0););if(n!==0)throw new REe(r);return i},t.forBytes=function(r,n,i){return new t(AT.of(r),n,i)},t.forByteStream=function(r,n,i){return i===void 0&&(i=!1),new t(r,n,i)},t}(CTe),ETe=function(e){er(t,e);function t(r,n){var i=e.call(this,AT.fromPDFRawStream(r),r.dict.context)||this,c=r.dict;return i.alreadyParsed=!1,i.shouldWaitForTick=n||function(){return!1},i.firstOffset=c.lookup(Le.of("First"),on).asNumber(),i.objectCount=c.lookup(Le.of("N"),on).asNumber(),i}return t.prototype.parseIntoContext=function(){return yn(this,void 0,void 0,function(){var r,n,i,c,d,y,o,x;return _n(this,function(S){switch(S.label){case 0:if(this.alreadyParsed)throw new q2("PDFObjectStreamParser","parseIntoContext");this.alreadyParsed=!0,r=this.parseOffsetsAndObjectNumbers(),n=0,i=r.length,S.label=1;case 1:return n<i?(c=r[n],d=c.objectNumber,y=c.offset,this.bytes.moveTo(this.firstOffset+y),o=this.parseObject(),x=ui.of(d,0),this.context.assign(x,o),this.shouldWaitForTick()?[4,g0()]:[3,3]):[3,4];case 2:S.sent(),S.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.parseOffsetsAndObjectNumbers=function(){for(var r=[],n=0,i=this.objectCount;n<i;n++){this.skipWhitespaceAndComments();var c=this.parseRawInt();this.skipWhitespaceAndComments();var d=this.parseRawInt();r.push({objectNumber:c,offset:d})}return r},t.forStream=function(r,n){return new t(r,n)},t}(sq),TTe=function(){function e(t){this.alreadyParsed=!1,this.dict=t.dict,this.bytes=AT.fromPDFRawStream(t),this.context=this.dict.context;var r=this.dict.lookup(Le.of("Size"),on),n=this.dict.lookup(Le.of("Index"));if(n instanceof Yn){this.subsections=[];for(var i=0,c=n.size();i<c;i+=2){var d=n.lookup(i+0,on).asNumber(),y=n.lookup(i+1,on).asNumber();this.subsections.push({firstObjectNumber:d,length:y})}}else this.subsections=[{firstObjectNumber:0,length:r.asNumber()}];var o=this.dict.lookup(Le.of("W"),Yn);this.byteWidths=[-1,-1,-1];for(var i=0,c=o.size();i<c;i++)this.byteWidths[i]=o.lookup(i,on).asNumber()}return e.prototype.parseIntoContext=function(){if(this.alreadyParsed)throw new q2("PDFXRefStreamParser","parseIntoContext");this.alreadyParsed=!0,this.context.trailerInfo={Root:this.dict.get(Le.of("Root")),Encrypt:this.dict.get(Le.of("Encrypt")),Info:this.dict.get(Le.of("Info")),ID:this.dict.get(Le.of("ID"))};var t=this.parseEntries();return t},e.prototype.parseEntries=function(){for(var t=[],r=this.byteWidths,n=r[0],i=r[1],c=r[2],d=0,y=this.subsections.length;d<y;d++)for(var o=this.subsections[d],x=o.firstObjectNumber,S=o.length,k=0;k<S;k++){for(var O=0,Q=0,G=n;Q<G;Q++)O=O<<8|this.bytes.next();for(var K=0,Q=0,G=i;Q<G;Q++)K=K<<8|this.bytes.next();for(var ee=0,Q=0,G=c;Q<G;Q++)ee=ee<<8|this.bytes.next();n===0&&(O=1);var W=x+k,J={ref:ui.of(W,ee),offset:K,deleted:O===0,inObjectStream:O===2};t.push(J)}return t},e.forStream=function(t){return new e(t)},e}(),FTe=function(e){er(t,e);function t(r,n,i,c){n===void 0&&(n=1/0),i===void 0&&(i=!1),c===void 0&&(c=!1);var d=e.call(this,AT.of(r),hD.create(),c)||this;return d.alreadyParsed=!1,d.parsedObjects=0,d.shouldWaitForTick=function(){return d.parsedObjects+=1,d.parsedObjects%d.objectsPerTick===0},d.objectsPerTick=n,d.throwOnInvalidObject=i,d}return t.prototype.parseDocument=function(){return yn(this,void 0,void 0,function(){var r,n;return _n(this,function(i){switch(i.label){case 0:if(this.alreadyParsed)throw new q2("PDFParser","parseDocument");this.alreadyParsed=!0,this.context.header=this.parseHeader(),i.label=1;case 1:return this.bytes.done()?[3,3]:[4,this.parseDocumentSection()];case 2:if(i.sent(),n=this.bytes.offset(),n===r)throw new OEe(this.bytes.position());return r=n,[3,1];case 3:return this.maybeRecoverRoot(),this.context.lookup(ui.of(0))&&(console.warn("Removing parsed object: 0 0 R"),this.context.delete(ui.of(0))),[2,this.context]}})})},t.prototype.maybeRecoverRoot=function(){var r=function(S){return S instanceof pn&&S.lookup(Le.of("Type"))===Le.of("Catalog")},n=this.context.lookup(this.context.trailerInfo.Root);if(!r(n))for(var i=this.context.enumerateIndirectObjects(),c=0,d=i.length;c<d;c++){var y=i[c],o=y[0],x=y[1];r(x)&&(this.context.trailerInfo.Root=o)}},t.prototype.parseHeader=function(){for(;!this.bytes.done();){if(this.matchKeyword(Bi.header)){var r=this.parseRawInt();this.bytes.assertNext(ze.Period);var n=this.parseRawInt(),i=nT.forVersion(r,n);return this.skipBinaryHeaderComment(),i}this.bytes.next()}throw new UEe(this.bytes.position())},t.prototype.parseIndirectObjectHeader=function(){this.skipWhitespaceAndComments();var r=this.parseRawInt();this.skipWhitespaceAndComments();var n=this.parseRawInt();if(this.skipWhitespaceAndComments(),!this.matchKeyword(Bi.obj))throw new zEe(this.bytes.position(),Bi.obj);return ui.of(r,n)},t.prototype.matchIndirectObjectHeader=function(){var r=this.bytes.offset();try{return this.parseIndirectObjectHeader(),!0}catch{return this.bytes.moveTo(r),!1}},t.prototype.parseIndirectObject=function(){return yn(this,void 0,void 0,function(){var r,n;return _n(this,function(i){switch(i.label){case 0:return r=this.parseIndirectObjectHeader(),this.skipWhitespaceAndComments(),n=this.parseObject(),this.skipWhitespaceAndComments(),this.matchKeyword(Bi.endobj),n instanceof z1&&n.dict.lookup(Le.of("Type"))===Le.of("ObjStm")?[4,ETe.forStream(n,this.shouldWaitForTick).parseIntoContext()]:[3,2];case 1:return i.sent(),[3,3];case 2:n instanceof z1&&n.dict.lookup(Le.of("Type"))===Le.of("XRef")?TTe.forStream(n).parseIntoContext():this.context.assign(r,n),i.label=3;case 3:return[2,r]}})})},t.prototype.tryToParseInvalidIndirectObject=function(){var r=this.bytes.position(),n="Trying to parse invalid object: "+JSON.stringify(r)+")";if(this.throwOnInvalidObject)throw new Error(n);console.warn(n);var i=this.parseIndirectObjectHeader();console.warn("Invalid object ref: "+i),this.skipWhitespaceAndComments();for(var c=this.bytes.offset(),d=!0;!this.bytes.done()&&(this.matchKeyword(Bi.endobj)&&(d=!1),!!d);)this.bytes.next();if(d)throw new kEe(r);var y=this.bytes.offset()-Bi.endobj.length,o=XW.of(this.bytes.slice(c,y));return this.context.assign(i,o),i},t.prototype.parseIndirectObjects=function(){return yn(this,void 0,void 0,function(){var r;return _n(this,function(n){switch(n.label){case 0:this.skipWhitespaceAndComments(),n.label=1;case 1:if(!(!this.bytes.done()&&Ka[this.bytes.peek()]))return[3,8];r=this.bytes.offset(),n.label=2;case 2:return n.trys.push([2,4,,5]),[4,this.parseIndirectObject()];case 3:return n.sent(),[3,5];case 4:return n.sent(),this.bytes.moveTo(r),this.tryToParseInvalidIndirectObject(),[3,5];case 5:return this.skipWhitespaceAndComments(),this.skipJibberish(),this.shouldWaitForTick()?[4,g0()]:[3,7];case 6:n.sent(),n.label=7;case 7:return[3,1];case 8:return[2]}})})},t.prototype.maybeParseCrossRefSection=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(Bi.xref)){this.skipWhitespaceAndComments();for(var r=-1,n=KW.createEmpty();!this.bytes.done()&&Ka[this.bytes.peek()];){var i=this.parseRawInt();this.skipWhitespaceAndComments();var c=this.parseRawInt();this.skipWhitespaceAndComments();var d=this.bytes.peek();if(d===ze.n||d===ze.f){var y=ui.of(r,c);this.bytes.next()===ze.n?n.addEntry(y,i):n.addDeletedEntry(y,i),r+=1}else r=i;this.skipWhitespaceAndComments()}return n}},t.prototype.maybeParseTrailerDict=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(Bi.trailer)){this.skipWhitespaceAndComments();var r=this.parseDict(),n=this.context;n.trailerInfo={Root:r.get(Le.of("Root"))||n.trailerInfo.Root,Encrypt:r.get(Le.of("Encrypt"))||n.trailerInfo.Encrypt,Info:r.get(Le.of("Info"))||n.trailerInfo.Info,ID:r.get(Le.of("ID"))||n.trailerInfo.ID}}},t.prototype.maybeParseTrailer=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(Bi.startxref)){this.skipWhitespaceAndComments();var r=this.parseRawInt();return this.skipWhitespace(),this.matchKeyword(Bi.eof),this.skipWhitespaceAndComments(),this.matchKeyword(Bi.eof),this.skipWhitespaceAndComments(),J2.forLastCrossRefSectionOffset(r)}},t.prototype.parseDocumentSection=function(){return yn(this,void 0,void 0,function(){return _n(this,function(r){switch(r.label){case 0:return[4,this.parseIndirectObjects()];case 1:return r.sent(),this.maybeParseCrossRefSection(),this.maybeParseTrailerDict(),this.maybeParseTrailer(),this.skipJibberish(),[2]}})})},t.prototype.skipJibberish=function(){for(this.skipWhitespaceAndComments();!this.bytes.done();){var r=this.bytes.offset(),n=this.bytes.peek(),i=n>=ze.Space&&n<=ze.Tilde;if(i&&(this.matchKeyword(Bi.xref)||this.matchKeyword(Bi.trailer)||this.matchKeyword(Bi.startxref)||this.matchIndirectObjectHeader())){this.bytes.moveTo(r);break}this.bytes.next()}},t.prototype.skipBinaryHeaderComment=function(){this.skipWhitespaceAndComments();try{var r=this.bytes.offset();this.parseIndirectObjectHeader(),this.bytes.moveTo(r)}catch{this.bytes.next(),this.skipWhitespaceAndComments()}},t.forBytesWithOptions=function(r,n,i,c){return new t(r,n,i,c)},t}(sq),mu=function(e){return 1<<e},X_;(function(e){e[e.Invisible=mu(0)]="Invisible",e[e.Hidden=mu(1)]="Hidden",e[e.Print=mu(2)]="Print",e[e.NoZoom=mu(3)]="NoZoom",e[e.NoRotate=mu(4)]="NoRotate",e[e.NoView=mu(5)]="NoView",e[e.ReadOnly=mu(6)]="ReadOnly",e[e.Locked=mu(7)]="Locked",e[e.ToggleNoView=mu(8)]="ToggleNoView",e[e.LockedContents=mu(9)]="LockedContents"})(X_||(X_={}));var hT=function(e){return e instanceof Le?e:Le.of(e)},an=function(e){return e instanceof on?e:on.of(e)},xn=function(e){return e instanceof on?e.asNumber():e},Q1;(function(e){e.Degrees="degrees",e.Radians="radians"})(Q1||(Q1={}));var $r=function(e){return vt(e,"degreeAngle",["number"]),{type:Q1.Degrees,angle:e}},lq=Q1.Radians,cq=Q1.Degrees,uq=function(e){return e*Math.PI/180},ITe=function(e){return e*180/Math.PI},Ba=function(e){return e.type===lq?e.angle:e.type===cq?uq(e.angle):ux("Invalid rotation: "+JSON.stringify(e))},Aq=function(e){return e.type===lq?ITe(e.angle):e.type===cq?e.angle:ux("Invalid rotation: "+JSON.stringify(e))},WA=function(e){e===void 0&&(e=0);var t=e/90%4;return t===0?0:t===1?90:t===2?180:t===3?270:0},Fp=function(e,t){t===void 0&&(t=0);var r=WA(t);return r===90||r===270?{width:e.height,height:e.width}:{width:e.width,height:e.height}},MTe=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=0);var n=e.x,i=e.y,c=e.width,d=e.height,y=WA(r),o=t/2;return y===0?{x:n-o,y:i-o,width:c,height:d}:y===90?{x:n-d+o,y:i-o,width:d,height:c}:y===180?{x:n-c+o,y:i-d+o,width:c,height:d}:y===270?{x:n-o,y:i-c+o,width:d,height:c}:{x:n-o,y:i-o,width:c,height:d}},hq=function(){return Un.of(Gn.ClipNonZero)},DS=Math.cos,kS=Math.sin,RS=Math.tan,dT=function(e,t,r,n,i,c){return Un.of(Gn.ConcatTransformationMatrix,[an(e),an(t),an(r),an(n),an(i),an(c)])},Gl=function(e,t){return dT(1,0,0,1,e,t)},N1=function(e,t){return dT(e,0,0,t,0,0)},I0=function(e){return dT(DS(xn(e)),kS(xn(e)),-kS(xn(e)),DS(xn(e)),0,0)},bB=function(e){return I0(uq(xn(e)))},oR=function(e,t){return dT(1,RS(xn(e)),RS(xn(t)),1,0,0)},fT=function(e,t){return Un.of(Gn.SetLineDashPattern,["["+e.map(an).join(" ")+"]",an(t)])},kg;(function(e){e[e.Butt=0]="Butt",e[e.Round=1]="Round",e[e.Projecting=2]="Projecting"})(kg||(kg={}));var pT=function(e){return Un.of(Gn.SetLineCapStyle,[an(e)])},uV;(function(e){e[e.Miter=0]="Miter",e[e.Round=1]="Round",e[e.Bevel=2]="Bevel"})(uV||(uV={}));var Ip=function(e){return Un.of(Gn.SetGraphicsStateParams,[hT(e)])},jo=function(){return Un.of(Gn.PushGraphicsState)},Go=function(){return Un.of(Gn.PopGraphicsState)},mx=function(e){return Un.of(Gn.SetLineWidth,[an(e)])},el=function(e,t,r,n,i,c){return Un.of(Gn.AppendBezierCurve,[an(e),an(t),an(r),an(n),an(i),an(c)])},wB=function(e,t,r,n){return Un.of(Gn.CurveToReplicateInitialPoint,[an(e),an(t),an(r),an(n)])},Md=function(){return Un.of(Gn.ClosePath)},Lu=function(e,t){return Un.of(Gn.MoveTo,[an(e),an(t)])},ta=function(e,t){return Un.of(Gn.LineTo,[an(e),an(t)])},gx=function(){return Un.of(Gn.StrokePath)},aR=function(){return Un.of(Gn.FillNonZero)},sR=function(){return Un.of(Gn.FillNonZeroAndStroke)},dq=function(){return Un.of(Gn.EndPath)},PTe=function(){return Un.of(Gn.NextLine)},fq=function(e){return Un.of(Gn.ShowText,[e])},pq=function(){return Un.of(Gn.BeginText)},mq=function(){return Un.of(Gn.EndText)},lR=function(e,t){return Un.of(Gn.SetFontAndSize,[hT(e),an(t)])},DTe=function(e){return Un.of(Gn.SetTextLineHeight,[an(e)])},AV;(function(e){e[e.Fill=0]="Fill",e[e.Outline=1]="Outline",e[e.FillAndOutline=2]="FillAndOutline",e[e.Invisible=3]="Invisible",e[e.FillAndClip=4]="FillAndClip",e[e.OutlineAndClip=5]="OutlineAndClip",e[e.FillAndOutlineAndClip=6]="FillAndOutlineAndClip",e[e.Clip=7]="Clip"})(AV||(AV={}));var kTe=function(e,t,r,n,i,c){return Un.of(Gn.SetTextMatrix,[an(e),an(t),an(r),an(n),an(i),an(c)])},gq=function(e,t,r,n,i){return kTe(DS(xn(e)),kS(xn(e))+RS(xn(t)),-kS(xn(e))+RS(xn(r)),DS(xn(e)),n,i)},cR=function(e){return Un.of(Gn.DrawObject,[hT(e)])},RTe=function(e){return Un.of(Gn.NonStrokingColorGray,[an(e)])},LTe=function(e){return Un.of(Gn.StrokingColorGray,[an(e)])},OTe=function(e,t,r){return Un.of(Gn.NonStrokingColorRgb,[an(e),an(t),an(r)])},UTe=function(e,t,r){return Un.of(Gn.StrokingColorRgb,[an(e),an(t),an(r)])},zTe=function(e,t,r,n){return Un.of(Gn.NonStrokingColorCmyk,[an(e),an(t),an(r),an(n)])},QTe=function(e,t,r,n){return Un.of(Gn.StrokingColorCmyk,[an(e),an(t),an(r),an(n)])},vq=function(e){return Un.of(Gn.BeginMarkedContent,[hT(e)])},yq=function(){return Un.of(Gn.EndMarkedContent)},Pd;(function(e){e.Grayscale="Grayscale",e.RGB="RGB",e.CMYK="CMYK"})(Pd||(Pd={}));var _q=function(e){return $s(e,"gray",0,1),{type:Pd.Grayscale,gray:e}},Ai=function(e,t,r){return $s(e,"red",0,1),$s(t,"green",0,1),$s(r,"blue",0,1),{type:Pd.RGB,red:e,green:t,blue:r}},xq=function(e,t,r,n){return $s(e,"cyan",0,1),$s(t,"magenta",0,1),$s(r,"yellow",0,1),$s(n,"key",0,1),{type:Pd.CMYK,cyan:e,magenta:t,yellow:r,key:n}},uR=Pd.Grayscale,AR=Pd.RGB,hR=Pd.CMYK,Mp=function(e){return e.type===uR?RTe(e.gray):e.type===AR?OTe(e.red,e.green,e.blue):e.type===hR?zTe(e.cyan,e.magenta,e.yellow,e.key):ux("Invalid color: "+JSON.stringify(e))},vx=function(e){return e.type===uR?LTe(e.gray):e.type===AR?UTe(e.red,e.green,e.blue):e.type===hR?QTe(e.cyan,e.magenta,e.yellow,e.key):ux("Invalid color: "+JSON.stringify(e))},ds=function(e,t){return t===void 0&&(t=1),(e==null?void 0:e.length)===1?_q(e[0]*t):(e==null?void 0:e.length)===3?Ai(e[0]*t,e[1]*t,e[2]*t):(e==null?void 0:e.length)===4?xq(e[0]*t,e[1]*t,e[2]*t,e[3]*t):void 0},hV=function(e){return e.type===uR?[e.gray]:e.type===AR?[e.red,e.green,e.blue]:e.type===hR?[e.cyan,e.magenta,e.yellow,e.key]:ux("Invalid color: "+JSON.stringify(e))},kr=0,Rr=0,Ln=0,On=0,c_=0,u_=0,dV=new Map([["A",7],["a",7],["C",6],["c",6],["H",1],["h",1],["L",2],["l",2],["M",2],["m",2],["Q",4],["q",4],["S",4],["s",4],["T",2],["t",2],["V",1],["v",1],["Z",0],["z",0]]),NTe=function(e){for(var t,r=[],n=[],i="",c=!1,d=0,y=0,o=e;y<o.length;y++){var x=o[y];if(dV.has(x))d=dV.get(x),t&&(i.length>0&&(n[n.length]=+i),r[r.length]={cmd:t,args:n},n=[],i="",c=!1),t=x;else if([" ",","].includes(x)||x==="-"&&i.length>0&&i[i.length-1]!=="e"||x==="."&&c){if(i.length===0)continue;n.length===d?(r[r.length]={cmd:t,args:n},n=[+i],t==="M"&&(t="L"),t==="m"&&(t="l")):n[n.length]=+i,c=x===".",i=["-","."].includes(x)?x:""}else i+=x,x==="."&&(c=!0)}return i.length>0&&(n.length===d?(r[r.length]={cmd:t,args:n},n=[+i],t==="M"&&(t="L"),t==="m"&&(t="l")):n[n.length]=+i),r[r.length]={cmd:t,args:n},r},VTe=function(e){kr=Rr=Ln=On=c_=u_=0;for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n.cmd&&typeof fV[n.cmd]=="function"){var i=fV[n.cmd](n.args);Array.isArray(i)?t=t.concat(i):t.push(i)}}return t},fV={M:function(e){return kr=e[0],Rr=e[1],Ln=On=null,c_=kr,u_=Rr,Lu(kr,Rr)},m:function(e){return kr+=e[0],Rr+=e[1],Ln=On=null,c_=kr,u_=Rr,Lu(kr,Rr)},C:function(e){return kr=e[4],Rr=e[5],Ln=e[2],On=e[3],el(e[0],e[1],e[2],e[3],e[4],e[5])},c:function(e){var t=el(e[0]+kr,e[1]+Rr,e[2]+kr,e[3]+Rr,e[4]+kr,e[5]+Rr);return Ln=kr+e[2],On=Rr+e[3],kr+=e[4],Rr+=e[5],t},S:function(e){(Ln===null||On===null)&&(Ln=kr,On=Rr);var t=el(kr-(Ln-kr),Rr-(On-Rr),e[0],e[1],e[2],e[3]);return Ln=e[0],On=e[1],kr=e[2],Rr=e[3],t},s:function(e){(Ln===null||On===null)&&(Ln=kr,On=Rr);var t=el(kr-(Ln-kr),Rr-(On-Rr),kr+e[0],Rr+e[1],kr+e[2],Rr+e[3]);return Ln=kr+e[0],On=Rr+e[1],kr+=e[2],Rr+=e[3],t},Q:function(e){return Ln=e[0],On=e[1],kr=e[2],Rr=e[3],wB(e[0],e[1],kr,Rr)},q:function(e){var t=wB(e[0]+kr,e[1]+Rr,e[2]+kr,e[3]+Rr);return Ln=kr+e[0],On=Rr+e[1],kr+=e[2],Rr+=e[3],t},T:function(e){Ln===null||On===null?(Ln=kr,On=Rr):(Ln=kr-(Ln-kr),On=Rr-(On-Rr));var t=wB(Ln,On,e[0],e[1]);return Ln=kr-(Ln-kr),On=Rr-(On-Rr),kr=e[0],Rr=e[1],t},t:function(e){Ln===null||On===null?(Ln=kr,On=Rr):(Ln=kr-(Ln-kr),On=Rr-(On-Rr));var t=wB(Ln,On,kr+e[0],Rr+e[1]);return kr+=e[0],Rr+=e[1],t},A:function(e){var t=pV(kr,Rr,e);return kr=e[5],Rr=e[6],t},a:function(e){e[5]+=kr,e[6]+=Rr;var t=pV(kr,Rr,e);return kr=e[5],Rr=e[6],t},L:function(e){return kr=e[0],Rr=e[1],Ln=On=null,ta(kr,Rr)},l:function(e){return kr+=e[0],Rr+=e[1],Ln=On=null,ta(kr,Rr)},H:function(e){return kr=e[0],Ln=On=null,ta(kr,Rr)},h:function(e){return kr+=e[0],Ln=On=null,ta(kr,Rr)},V:function(e){return Rr=e[0],Ln=On=null,ta(kr,Rr)},v:function(e){return Rr+=e[0],Ln=On=null,ta(kr,Rr)},Z:function(){var e=Md();return kr=c_,Rr=u_,e},z:function(){var e=Md();return kr=c_,Rr=u_,e}},pV=function(e,t,r){for(var n=r[0],i=r[1],c=r[2],d=r[3],y=r[4],o=r[5],x=r[6],S=HTe(o,x,n,i,d,y,c,e,t),k=[],O=0,Q=S;O<Q.length;O++){var G=Q[O],K=jTe.apply(void 0,G);k.push(el.apply(void 0,K))}return k},HTe=function(e,t,r,n,i,c,d,y,o){var x=d*(Math.PI/180),S=Math.sin(x),k=Math.cos(x);r=Math.abs(r),n=Math.abs(n),Ln=k*(y-e)*.5+S*(o-t)*.5,On=k*(o-t)*.5-S*(y-e)*.5;var O=Ln*Ln/(r*r)+On*On/(n*n);O>1&&(O=Math.sqrt(O),r*=O,n*=O);var Q=k/r,G=S/r,K=-S/n,ee=k/n,W=Q*y+G*o,J=K*y+ee*o,re=Q*e+G*t,ue=K*e+ee*t,ce=(re-W)*(re-W)+(ue-J)*(ue-J),he=1/ce-.25;he<0&&(he=0);var xe=Math.sqrt(he);c===i&&(xe=-xe);var fe=.5*(W+re)-xe*(ue-J),Ue=.5*(J+ue)+xe*(re-W),Ge=Math.atan2(J-Ue,W-fe),He=Math.atan2(ue-Ue,re-fe),tt=He-Ge;tt<0&&c===1?tt+=2*Math.PI:tt>0&&c===0&&(tt-=2*Math.PI);for(var pt=Math.ceil(Math.abs(tt/(Math.PI*.5+.001))),gt=[],Et=0;Et<pt;Et++){var ot=Ge+Et*tt/pt,Gt=Ge+(Et+1)*tt/pt;gt[Et]=[fe,Ue,ot,Gt,r,n,S,k]}return gt},jTe=function(e,t,r,n,i,c,d,y){var o=y*i,x=-d*c,S=d*i,k=y*c,O=.5*(n-r),Q=8/3*Math.sin(O*.5)*Math.sin(O*.5)/Math.sin(O),G=e+Math.cos(r)-Q*Math.sin(r),K=t+Math.sin(r)+Q*Math.cos(r),ee=e+Math.cos(n),W=t+Math.sin(n),J=ee+Q*Math.sin(n),re=W-Q*Math.cos(n),ue=[o*G+x*K,S*G+k*K,o*J+x*re,S*J+k*re,o*ee+x*W,S*ee+k*W];return ue},GTe=function(e){return VTe(NTe(e))},KTe=function(e,t){for(var r=[jo(),t.graphicsState&&Ip(t.graphicsState),pq(),Mp(t.color),lR(t.font,t.size),DTe(t.lineHeight),gq(Ba(t.rotate),Ba(t.xSkew),Ba(t.ySkew),t.x,t.y)].filter(Boolean),n=0,i=e.length;n<i;n++)r.push(fq(e[n]),PTe());return r.push(mq(),Go()),r},bq=function(e,t){return[jo(),t.graphicsState&&Ip(t.graphicsState),Gl(t.x,t.y),I0(Ba(t.rotate)),N1(t.width,t.height),oR(Ba(t.xSkew),Ba(t.ySkew)),cR(e),Go()].filter(Boolean)},WTe=function(e,t){return[jo(),t.graphicsState&&Ip(t.graphicsState),Gl(t.x,t.y),I0(Ba(t.rotate)),N1(t.xScale,t.yScale),oR(Ba(t.xSkew),Ba(t.ySkew)),cR(e),Go()].filter(Boolean)},qTe=function(e){var t,r;return[jo(),e.graphicsState&&Ip(e.graphicsState),e.color&&vx(e.color),mx(e.thickness),fT((t=e.dashArray)!==null&&t!==void 0?t:[],(r=e.dashPhase)!==null&&r!==void 0?r:0),Lu(e.start.x,e.start.y),e.lineCap&&pT(e.lineCap),Lu(e.start.x,e.start.y),ta(e.end.x,e.end.y),gx(),Go()].filter(Boolean)},v0=function(e){var t,r;return[jo(),e.graphicsState&&Ip(e.graphicsState),e.color&&Mp(e.color),e.borderColor&&vx(e.borderColor),mx(e.borderWidth),e.borderLineCap&&pT(e.borderLineCap),fT((t=e.borderDashArray)!==null&&t!==void 0?t:[],(r=e.borderDashPhase)!==null&&r!==void 0?r:0),Gl(e.x,e.y),I0(Ba(e.rotate)),oR(Ba(e.xSkew),Ba(e.ySkew)),Lu(0,0),ta(0,e.height),ta(e.width,e.height),ta(e.width,0),Md(),e.color&&e.borderWidth?sR():e.color?aR():e.borderColor?gx():Md(),Go()].filter(Boolean)},LS=4*((Math.sqrt(2)-1)/3),XTe=function(e){var t=xn(e.x),r=xn(e.y),n=xn(e.xScale),i=xn(e.yScale);t-=n,r-=i;var c=n*LS,d=i*LS,y=t+n*2,o=r+i*2,x=t+n,S=r+i;return[jo(),Lu(t,S),el(t,S-d,x-c,r,x,r),el(x+c,r,y,S-d,y,S),el(y,S+d,x+c,o,x,o),el(x-c,o,t,S+d,t,S),Go()]},ZTe=function(e){var t=xn(e.x),r=xn(e.y),n=xn(e.xScale),i=xn(e.yScale),c=-n,d=-i,y=n*LS,o=i*LS,x=c+n*2,S=d+i*2,k=c+n,O=d+i;return[Gl(t,r),I0(Ba(e.rotate)),Lu(c,O),el(c,O-o,k-y,d,k,d),el(k+y,d,x,O-o,x,O),el(x,O+o,k+y,S,k,S),el(k-y,S,c,O+o,c,O)]},mD=function(e){var t,r,n;return jn([jo(),e.graphicsState&&Ip(e.graphicsState),e.color&&Mp(e.color),e.borderColor&&vx(e.borderColor),mx(e.borderWidth),e.borderLineCap&&pT(e.borderLineCap),fT((t=e.borderDashArray)!==null&&t!==void 0?t:[],(r=e.borderDashPhase)!==null&&r!==void 0?r:0)],e.rotate===void 0?XTe({x:e.x,y:e.y,xScale:e.xScale,yScale:e.yScale}):ZTe({x:e.x,y:e.y,xScale:e.xScale,yScale:e.yScale,rotate:(n=e.rotate)!==null&&n!==void 0?n:$r(0)}),[e.color&&e.borderWidth?sR():e.color?aR():e.borderColor?gx():Md(),Go()]).filter(Boolean)},YTe=function(e,t){var r,n,i;return jn([jo(),t.graphicsState&&Ip(t.graphicsState),Gl(t.x,t.y),I0(Ba((r=t.rotate)!==null&&r!==void 0?r:$r(0))),t.scale?N1(t.scale,-t.scale):N1(1,-1),t.color&&Mp(t.color),t.borderColor&&vx(t.borderColor),t.borderWidth&&mx(t.borderWidth),t.borderLineCap&&pT(t.borderLineCap),fT((n=t.borderDashArray)!==null&&n!==void 0?n:[],(i=t.borderDashPhase)!==null&&i!==void 0?i:0)],GTe(e),[t.color&&t.borderWidth?sR():t.color?aR():t.borderColor?gx():Md(),Go()]).filter(Boolean)},JTe=function(e){var t=xn(e.size),r=-1+.75,n=-1+.51,i=1-.525,c=1-.31,d=-1+.325,y=-((d-r)*(c-r))/(i-n)+n;return[jo(),e.color&&vx(e.color),mx(e.thickness),Gl(e.x,e.y),Lu(d*t,y*t),ta(r*t,n*t),ta(c*t,i*t),gx(),Go()].filter(Boolean)},jd=function(e){return e.rotation===0?[Gl(0,0),bB(0)]:e.rotation===90?[Gl(e.width,0),bB(90)]:e.rotation===180?[Gl(e.width,e.height),bB(180)]:e.rotation===270?[Gl(0,e.height),bB(270)]:[]},BB=function(e){var t=v0({x:e.x,y:e.y,width:e.width,height:e.height,borderWidth:e.borderWidth,color:e.color,borderColor:e.borderColor,rotate:$r(0),xSkew:$r(0),ySkew:$r(0)});if(!e.filled)return t;var r=xn(e.width),n=xn(e.height),i=Math.min(r,n)/2,c=JTe({x:r/2,y:n/2,size:i,thickness:e.thickness,color:e.markColor});return jn([jo()],t,c,[Go()])},CB=function(e){var t=xn(e.width),r=xn(e.height),n=Math.min(t,r)/2,i=mD({x:e.x,y:e.y,xScale:n,yScale:n,color:e.color,borderColor:e.borderColor,borderWidth:e.borderWidth});if(!e.filled)return i;var c=mD({x:e.x,y:e.y,xScale:n*.45,yScale:n*.45,color:e.dotColor,borderColor:void 0,borderWidth:0});return jn([jo()],i,c,[Go()])},mV=function(e){var t=xn(e.x),r=xn(e.y),n=xn(e.width),i=xn(e.height),c=v0({x:t,y:r,width:n,height:i,borderWidth:e.borderWidth,color:e.color,borderColor:e.borderColor,rotate:$r(0),xSkew:$r(0),ySkew:$r(0)}),d=dR(e.textLines,{color:e.textColor,font:e.font,size:e.fontSize,rotate:$r(0),xSkew:$r(0),ySkew:$r(0)});return jn([jo()],c,d,[Go()])},dR=function(e,t){for(var r=[pq(),Mp(t.color),lR(t.font,t.size)],n=0,i=e.length;n<i;n++){var c=e[n],d=c.encoded,y=c.x,o=c.y;r.push(gq(Ba(t.rotate),Ba(t.xSkew),Ba(t.ySkew),y,o),fq(d))}return r.push(mq()),r},wq=function(e){var t=xn(e.x),r=xn(e.y),n=xn(e.width),i=xn(e.height),c=xn(e.borderWidth),d=xn(e.padding),y=t+c/2+d,o=r+c/2+d,x=n-(c/2+d)*2,S=i-(c/2+d)*2,k=[Lu(y,o),ta(y,o+S),ta(y+x,o+S),ta(y+x,o),Md(),hq(),dq()],O=v0({x:t,y:r,width:n,height:i,borderWidth:e.borderWidth,color:e.color,borderColor:e.borderColor,rotate:$r(0),xSkew:$r(0),ySkew:$r(0)}),Q=dR(e.textLines,{color:e.textColor,font:e.font,size:e.fontSize,rotate:$r(0),xSkew:$r(0),ySkew:$r(0)}),G=jn([vq("Tx"),jo()],Q,[Go(),yq()]);return jn([jo()],O,k,G,[Go()])},$Te=function(e){for(var t=xn(e.x),r=xn(e.y),n=xn(e.width),i=xn(e.height),c=xn(e.lineHeight),d=xn(e.borderWidth),y=xn(e.padding),o=t+d/2+y,x=r+d/2+y,S=n-(d/2+y)*2,k=i-(d/2+y)*2,O=[Lu(o,x),ta(o,x+k),ta(o+S,x+k),ta(o+S,x),Md(),hq(),dq()],Q=v0({x:t,y:r,width:n,height:i,borderWidth:e.borderWidth,color:e.color,borderColor:e.borderColor,rotate:$r(0),xSkew:$r(0),ySkew:$r(0)}),G=[],K=0,ee=e.selectedLines.length;K<ee;K++){var W=e.textLines[e.selectedLines[K]];G.push.apply(G,v0({x:W.x-y,y:W.y-(c-W.height)/2,width:n-d,height:W.height+(c-W.height)/2,borderWidth:0,color:e.selectedColor,borderColor:void 0,rotate:$r(0),xSkew:$r(0),ySkew:$r(0)}))}var J=dR(e.textLines,{color:e.textColor,font:e.font,size:e.fontSize,rotate:$r(0),xSkew:$r(0),ySkew:$r(0)}),re=jn([vq("Tx"),jo()],J,[Go(),yq()]);return jn([jo()],Q,G,O,re,[Go()])},eFe=function(e){er(t,e);function t(){var r=this,n="Input document to `PDFDocument.load` is encrypted. You can use `PDFDocument.load(..., { ignoreEncryption: true })` if you wish to load the document anyways.";return r=e.call(this,n)||this,r}return t}(Error),tFe=function(e){er(t,e);function t(){var r=this,n="Input to `PDFDocument.embedFont` was a custom font, but no `fontkit` instance was found. You must register a `fontkit` instance with `PDFDocument.registerFontkit(...)` before embedding custom fonts.";return r=e.call(this,n)||this,r}return t}(Error),rFe=function(e){er(t,e);function t(){var r=this,n="A `page` passed to `PDFDocument.addPage` or `PDFDocument.insertPage` was from a different (foreign) PDF document. If you want to copy pages from one PDFDocument to another, you must use `PDFDocument.copyPages(...)` to copy the pages before adding or inserting them.";return r=e.call(this,n)||this,r}return t}(Error),nFe=function(e){er(t,e);function t(){var r=this,n="PDFDocument has no pages so `PDFDocument.removePage` cannot be called";return r=e.call(this,n)||this,r}return t}(Error),iFe=function(e){er(t,e);function t(r){var n=this,i='PDFDocument has no form field with the name "'+r+'"';return n=e.call(this,i)||this,n}return t}(Error),zf=function(e){er(t,e);function t(r,n,i){var c,d,y=this,o=n==null?void 0:n.name,x=(d=(c=i==null?void 0:i.constructor)===null||c===void 0?void 0:c.name)!==null&&d!==void 0?d:i,S='Expected field "'+r+'" to be of type '+o+", "+("but it is actually of type "+x);return y=e.call(this,S)||this,y}return t}(Error);(function(e){er(t,e);function t(r){var n=this,i='Failed to select check box due to missing onValue: "'+r+'"';return n=e.call(this,i)||this,n}return t})(Error);var Bq=function(e){er(t,e);function t(r){var n=this,i='A field already exists with the specified name: "'+r+'"';return n=e.call(this,i)||this,n}return t}(Error),oFe=function(e){er(t,e);function t(r){var n=this,i='Field name contains invalid component: "'+r+'"';return n=e.call(this,i)||this,n}return t}(Error);(function(e){er(t,e);function t(r){var n=this,i='A non-terminal field already exists with the specified name: "'+r+'"';return n=e.call(this,i)||this,n}return t})(Error);var aFe=function(e){er(t,e);function t(r){var n=this,i="Reading rich text fields is not supported: Attempted to read rich text field: "+r;return n=e.call(this,i)||this,n}return t}(Error),sFe=function(e){er(t,e);function t(r,n){var i=this,c="Failed to layout combed text as lineLength="+r+" is greater than cellCount="+n;return i=e.call(this,c)||this,i}return t}(Error),lFe=function(e){er(t,e);function t(r,n,i){var c=this,d="Attempted to set text with length="+r+" for TextField with maxLength="+n+" and name="+i;return c=e.call(this,d)||this,c}return t}(Error),cFe=function(e){er(t,e);function t(r,n,i){var c=this,d="Attempted to set maxLength="+n+", which is less than "+r+", the length of this field's current value (name="+i+")";return c=e.call(this,d)||this,c}return t}(Error),Qo;(function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right"})(Qo||(Qo={}));var Cq=4,Sq=500,Eq=function(e,t,r,n){n===void 0&&(n=!1);for(var i=Cq;i<Sq;){for(var c=0,d=0,y=e.length;d<y;d++){c+=1;for(var o=e[d],x=o.split(" "),S=r.width,k=0,O=x.length;k<O;k++){var Q=k===O-1,G=Q?x[k]:x[k]+" ",K=t.widthOfTextAtSize(G,i);S-=K,S<=0&&(c+=1,S=r.width-K)}}if(!n&&c>e.length)return i-1;var ee=t.heightAtSize(i),W=ee+ee*.2,J=W*c;if(J>Math.abs(r.height))return i-1;i+=1}return i},uFe=function(e,t,r,n){for(var i=r.width/n,c=r.height,d=Cq,y=zBe(e);d<Sq;){for(var o=0,x=y.length;o<x;o++){var S=y[o],k=t.widthOfTextAtSize(S,d)>i*.75;if(k)return d-1}var O=t.heightAtSize(d,{descender:!1});if(O>c)return d-1;d+=1}return d},AFe=function(e){for(var t=e.length;t>0;t--)if(/\s/.test(e[t]))return t},hFe=function(e,t,r,n){for(var i,c=e.length;c>0;){var d=e.substring(0,c),y=r.encodeText(d),o=r.widthOfTextAtSize(d,n);if(o<t){var x=e.substring(c)||void 0;return{line:d,encoded:y,width:o,remainder:x}}c=(i=AFe(d))!==null&&i!==void 0?i:0}return{line:e,encoded:r.encodeText(e),width:r.widthOfTextAtSize(e,n),remainder:void 0}},Tq=function(e,t){var r=t.alignment,n=t.fontSize,i=t.font,c=t.bounds,d=HK(cx(e));(n===void 0||n===0)&&(n=Eq(d,i,c,!0));for(var y=i.heightAtSize(n),o=y+y*.2,x=[],S=c.x,k=c.y,O=c.x+c.width,Q=c.y+c.height,G=c.y+c.height,K=0,ee=d.length;K<ee;K++)for(var W=d[K];W!==void 0;){var J=hFe(W,c.width,i,n),re=J.line,ue=J.encoded,ce=J.width,he=J.remainder,xe=r===Qo.Left?c.x:r===Qo.Center?c.x+c.width/2-ce/2:r===Qo.Right?c.x+c.width-ce:c.x;G-=o,xe<S&&(S=xe),G<k&&(k=G),xe+ce>O&&(O=xe+ce),G+y>Q&&(Q=G+y),x.push({text:re,encoded:ue,width:ce,height:y,x:xe,y:G}),W=he==null?void 0:he.trim()}return{fontSize:n,lineHeight:o,lines:x,bounds:{x:S,y:k,width:O-S,height:Q-k}}},dFe=function(e,t){var r=t.fontSize,n=t.font,i=t.bounds,c=t.cellCount,d=jK(cx(e));if(d.length>c)throw new sFe(d.length,c);(r===void 0||r===0)&&(r=uFe(d,n,i,c));for(var y=i.width/c,o=n.heightAtSize(r,{descender:!1}),x=i.y+(i.height/2-o/2),S=[],k=i.x,O=i.y,Q=i.x+i.width,G=i.y+i.height,K=0,ee=0;K<c;){var W=GK(d,ee),J=W[0],re=W[1],ue=n.encodeText(J),ce=n.widthOfTextAtSize(J,r),he=i.x+(y*K+y/2),xe=he-ce/2;xe<k&&(k=xe),x<O&&(O=x),xe+ce>Q&&(Q=xe+ce),x+o>G&&(G=x+o),S.push({text:d,encoded:ue,width:ce,height:o,x:xe,y:x}),K+=1,ee+=re}return{fontSize:r,cells:S,bounds:{x:k,y:O,width:Q-k,height:G-O}}},OS=function(e,t){var r=t.alignment,n=t.fontSize,i=t.font,c=t.bounds,d=jK(cx(e));(n===void 0||n===0)&&(n=Eq([d],i,c));var y=i.encodeText(d),o=i.widthOfTextAtSize(d,n),x=i.heightAtSize(n,{descender:!1}),S=r===Qo.Left?c.x:r===Qo.Center?c.x+c.width/2-o/2:r===Qo.Right?c.x+c.width-o:c.x,k=c.y+(c.height/2-x/2);return{fontSize:n,line:{text:d,encoded:y,width:o,height:x,x:S,y:k},bounds:{x:S,y:k,width:o,height:x}}},M0=function(e){return"normal"in e?e:{normal:e}},fFe=/\/([^\0\t\n\f\r\ ]+)[\0\t\n\f\r\ ]+(\d*\.\d+|\d+)[\0\t\n\f\r\ ]+Tf/,Dd=function(e){var t,r,n=(t=e.getDefaultAppearance())!==null&&t!==void 0?t:"",i=(r=z2(n,fFe).match)!==null&&r!==void 0?r:[],c=Number(i[2]);return isFinite(c)?c:void 0},pFe=/(\d*\.\d+|\d+)[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]+(g|rg|k)/,tc=function(e){var t,r=(t=e.getDefaultAppearance())!==null&&t!==void 0?t:"",n=z2(r,pFe).match,i=n??[],c=i[1],d=i[2],y=i[3],o=i[4],x=i[5];if(x==="g"&&c)return _q(Number(c));if(x==="rg"&&c&&d&&y)return Ai(Number(c),Number(d),Number(y));if(x==="k"&&c&&d&&y&&o)return xq(Number(c),Number(d),Number(y),Number(o))},rc=function(e,t,r,n){var i;n===void 0&&(n=0);var c=[Mp(t).toString(),lR((i=r==null?void 0:r.name)!==null&&i!==void 0?i:"dummy__noop",n).toString()].join(`
`);e.setDefaultAppearance(c)},mFe=function(e,t){var r,n,i,c=tc(t),d=tc(e.acroField),y=t.getRectangle(),o=t.getAppearanceCharacteristics(),x=t.getBorderStyle(),S=(r=x==null?void 0:x.getWidth())!==null&&r!==void 0?r:0,k=WA(o==null?void 0:o.getRotation()),O=Fp(y,k),Q=O.width,G=O.height,K=jd(ln(ln({},y),{rotation:k})),ee=Ai(0,0,0),W=(n=ds(o==null?void 0:o.getBorderColor()))!==null&&n!==void 0?n:ee,J=ds(o==null?void 0:o.getBackgroundColor()),re=ds(o==null?void 0:o.getBackgroundColor(),.8),ue=(i=c??d)!==null&&i!==void 0?i:ee;rc(c?t:e.acroField,ue);var ce={x:0+S/2,y:0+S/2,width:Q-S,height:G-S,thickness:1.5,borderWidth:S,borderColor:W,markColor:ue};return{normal:{on:jn(K,BB(ln(ln({},ce),{color:J,filled:!0}))),off:jn(K,BB(ln(ln({},ce),{color:J,filled:!1})))},down:{on:jn(K,BB(ln(ln({},ce),{color:re,filled:!0}))),off:jn(K,BB(ln(ln({},ce),{color:re,filled:!1})))}}},gFe=function(e,t){var r,n,i,c=tc(t),d=tc(e.acroField),y=t.getRectangle(),o=t.getAppearanceCharacteristics(),x=t.getBorderStyle(),S=(r=x==null?void 0:x.getWidth())!==null&&r!==void 0?r:0,k=WA(o==null?void 0:o.getRotation()),O=Fp(y,k),Q=O.width,G=O.height,K=jd(ln(ln({},y),{rotation:k})),ee=Ai(0,0,0),W=(n=ds(o==null?void 0:o.getBorderColor()))!==null&&n!==void 0?n:ee,J=ds(o==null?void 0:o.getBackgroundColor()),re=ds(o==null?void 0:o.getBackgroundColor(),.8),ue=(i=c??d)!==null&&i!==void 0?i:ee;rc(c?t:e.acroField,ue);var ce={x:Q/2,y:G/2,width:Q-S,height:G-S,borderWidth:S,borderColor:W,dotColor:ue};return{normal:{on:jn(K,CB(ln(ln({},ce),{color:J,filled:!0}))),off:jn(K,CB(ln(ln({},ce),{color:J,filled:!1})))},down:{on:jn(K,CB(ln(ln({},ce),{color:re,filled:!0}))),off:jn(K,CB(ln(ln({},ce),{color:re,filled:!1})))}}},vFe=function(e,t,r){var n,i,c,d,y,o=tc(t),x=tc(e.acroField),S=Dd(t),k=Dd(e.acroField),O=t.getRectangle(),Q=t.getAppearanceCharacteristics(),G=t.getBorderStyle(),K=Q==null?void 0:Q.getCaptions(),ee=(n=K==null?void 0:K.normal)!==null&&n!==void 0?n:"",W=(c=(i=K==null?void 0:K.down)!==null&&i!==void 0?i:ee)!==null&&c!==void 0?c:"",J=(d=G==null?void 0:G.getWidth())!==null&&d!==void 0?d:0,re=WA(Q==null?void 0:Q.getRotation()),ue=Fp(O,re),ce=ue.width,he=ue.height,xe=jd(ln(ln({},O),{rotation:re})),fe=Ai(0,0,0),Ue=ds(Q==null?void 0:Q.getBorderColor()),Ge=ds(Q==null?void 0:Q.getBackgroundColor()),He=ds(Q==null?void 0:Q.getBackgroundColor(),.8),tt={x:J,y:J,width:ce-J*2,height:he-J*2},pt=OS(ee,{alignment:Qo.Center,fontSize:S??k,font:r,bounds:tt}),gt=OS(W,{alignment:Qo.Center,fontSize:S??k,font:r,bounds:tt}),Et=Math.min(pt.fontSize,gt.fontSize),ot=(y=o??x)!==null&&y!==void 0?y:fe;rc(o||S!==void 0?t:e.acroField,ot,r,Et);var Gt={x:0+J/2,y:0+J/2,width:ce-J,height:he-J,borderWidth:J,borderColor:Ue,textColor:ot,font:r.name,fontSize:Et};return{normal:jn(xe,mV(ln(ln({},Gt),{color:Ge,textLines:[pt.line]}))),down:jn(xe,mV(ln(ln({},Gt),{color:He,textLines:[gt.line]})))}},yFe=function(e,t,r){var n,i,c,d,y=tc(t),o=tc(e.acroField),x=Dd(t),S=Dd(e.acroField),k=t.getRectangle(),O=t.getAppearanceCharacteristics(),Q=t.getBorderStyle(),G=(n=e.getText())!==null&&n!==void 0?n:"",K=(i=Q==null?void 0:Q.getWidth())!==null&&i!==void 0?i:0,ee=WA(O==null?void 0:O.getRotation()),W=Fp(k,ee),J=W.width,re=W.height,ue=jd(ln(ln({},k),{rotation:ee})),ce=Ai(0,0,0),he=ds(O==null?void 0:O.getBorderColor()),xe=ds(O==null?void 0:O.getBackgroundColor()),fe,Ue,Ge=e.isCombed()?0:1,He={x:K+Ge,y:K+Ge,width:J-(K+Ge)*2,height:re-(K+Ge)*2};if(e.isMultiline()){var tt=Tq(G,{alignment:e.getAlignment(),fontSize:x??S,font:r,bounds:He});fe=tt.lines,Ue=tt.fontSize}else if(e.isCombed()){var tt=dFe(G,{fontSize:x??S,font:r,bounds:He,cellCount:(c=e.getMaxLength())!==null&&c!==void 0?c:0});fe=tt.cells,Ue=tt.fontSize}else{var tt=OS(G,{alignment:e.getAlignment(),fontSize:x??S,font:r,bounds:He});fe=[tt.line],Ue=tt.fontSize}var pt=(d=y??o)!==null&&d!==void 0?d:ce;rc(y||x!==void 0?t:e.acroField,pt,r,Ue);var gt={x:0+K/2,y:0+K/2,width:J-K,height:re-K,borderWidth:K??0,borderColor:he,textColor:pt,font:r.name,fontSize:Ue,color:xe,textLines:fe,padding:Ge};return jn(ue,wq(gt))},_Fe=function(e,t,r){var n,i,c,d=tc(t),y=tc(e.acroField),o=Dd(t),x=Dd(e.acroField),S=t.getRectangle(),k=t.getAppearanceCharacteristics(),O=t.getBorderStyle(),Q=(n=e.getSelected()[0])!==null&&n!==void 0?n:"",G=(i=O==null?void 0:O.getWidth())!==null&&i!==void 0?i:0,K=WA(k==null?void 0:k.getRotation()),ee=Fp(S,K),W=ee.width,J=ee.height,re=jd(ln(ln({},S),{rotation:K})),ue=Ai(0,0,0),ce=ds(k==null?void 0:k.getBorderColor()),he=ds(k==null?void 0:k.getBackgroundColor()),xe=1,fe={x:G+xe,y:G+xe,width:W-(G+xe)*2,height:J-(G+xe)*2},Ue=OS(Q,{alignment:Qo.Left,fontSize:o??x,font:r,bounds:fe}),Ge=Ue.line,He=Ue.fontSize,tt=(c=d??y)!==null&&c!==void 0?c:ue;rc(d||o!==void 0?t:e.acroField,tt,r,He);var pt={x:0+G/2,y:0+G/2,width:W-G,height:J-G,borderWidth:G??0,borderColor:ce,textColor:tt,font:r.name,fontSize:He,color:he,textLines:[Ge],padding:xe};return jn(re,wq(pt))},xFe=function(e,t,r){var n,i,c=tc(t),d=tc(e.acroField),y=Dd(t),o=Dd(e.acroField),x=t.getRectangle(),S=t.getAppearanceCharacteristics(),k=t.getBorderStyle(),O=(n=k==null?void 0:k.getWidth())!==null&&n!==void 0?n:0,Q=WA(S==null?void 0:S.getRotation()),G=Fp(x,Q),K=G.width,ee=G.height,W=jd(ln(ln({},x),{rotation:Q})),J=Ai(0,0,0),re=ds(S==null?void 0:S.getBorderColor()),ue=ds(S==null?void 0:S.getBackgroundColor()),ce=e.getOptions(),he=e.getSelected();e.isSorted()&&ce.sort();for(var xe="",fe=0,Ue=ce.length;fe<Ue;fe++)xe+=ce[fe],fe<Ue-1&&(xe+=`
`);for(var Ge=1,He={x:O+Ge,y:O+Ge,width:K-(O+Ge)*2,height:ee-(O+Ge)*2},tt=Tq(xe,{alignment:Qo.Left,fontSize:y??o,font:r,bounds:He}),pt=tt.lines,gt=tt.fontSize,Et=tt.lineHeight,ot=[],fe=0,Ue=pt.length;fe<Ue;fe++){var Gt=pt[fe];he.includes(Gt.text)&&ot.push(fe)}var Pt=Ai(153/255,193/255,218/255),Xt=(i=c??d)!==null&&i!==void 0?i:J;return rc(c||y!==void 0?t:e.acroField,Xt,r,gt),jn(W,$Te({x:0+O/2,y:0+O/2,width:K-O,height:ee-O,borderWidth:O??0,borderColor:re,textColor:Xt,font:r.name,fontSize:gt,color:ue,textLines:pt,lineHeight:Et,selectedColor:Pt,selectedLines:ot,padding:Ge}))},Fq=function(){function e(t,r,n){this.alreadyEmbedded=!1,vt(t,"ref",[[ui,"PDFRef"]]),vt(r,"doc",[[kd,"PDFDocument"]]),vt(n,"embedder",[[eq,"PDFPageEmbedder"]]),this.ref=t,this.doc=r,this.width=n.width,this.height=n.height,this.embedder=n}return e.prototype.scale=function(t){return vt(t,"factor",["number"]),{width:this.width*t,height:this.height*t}},e.prototype.size=function(){return this.scale(1)},e.prototype.embed=function(){return yn(this,void 0,void 0,function(){return _n(this,function(t){switch(t.label){case 0:return this.alreadyEmbedded?[3,2]:[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:t.sent(),this.alreadyEmbedded=!0,t.label=2;case 2:return[2]}})})},e.of=function(t,r,n){return new e(t,r,n)},e}(),cl=function(){function e(t,r,n){this.modified=!0,vt(t,"ref",[[ui,"PDFRef"]]),vt(r,"doc",[[kd,"PDFDocument"]]),vt(n,"embedder",[[$2,"CustomFontEmbedder"],[FS,"StandardFontEmbedder"]]),this.ref=t,this.doc=r,this.name=n.fontName,this.embedder=n}return e.prototype.encodeText=function(t){return vt(t,"text",["string"]),this.modified=!0,this.embedder.encodeText(t)},e.prototype.widthOfTextAtSize=function(t,r){return vt(t,"text",["string"]),vt(r,"size",["number"]),this.embedder.widthOfTextAtSize(t,r)},e.prototype.heightAtSize=function(t,r){var n;return vt(t,"size",["number"]),Jt(r==null?void 0:r.descender,"options.descender",["boolean"]),this.embedder.heightOfFontAtSize(t,{descender:(n=r==null?void 0:r.descender)!==null&&n!==void 0?n:!0})},e.prototype.sizeAtHeight=function(t){return vt(t,"height",["number"]),this.embedder.sizeOfFontAtHeight(t)},e.prototype.getCharacterSet=function(){return this.embedder instanceof FS?this.embedder.encoding.supportedCodePoints:this.embedder.font.characterSet},e.prototype.embed=function(){return yn(this,void 0,void 0,function(){return _n(this,function(t){switch(t.label){case 0:return this.modified?[4,this.embedder.embedIntoContext(this.doc.context,this.ref)]:[3,2];case 1:t.sent(),this.modified=!1,t.label=2;case 2:return[2]}})})},e.of=function(t,r,n){return new e(t,r,n)},e}(),gD=function(){function e(t,r,n){vt(t,"ref",[[ui,"PDFRef"]]),vt(r,"doc",[[kd,"PDFDocument"]]),vt(n,"embedder",[[ZW,"JpegEmbedder"],[YW,"PngEmbedder"]]),this.ref=t,this.doc=r,this.width=n.width,this.height=n.height,this.embedder=n}return e.prototype.scale=function(t){return vt(t,"factor",["number"]),{width:this.width*t,height:this.height*t}},e.prototype.scaleToFit=function(t,r){vt(t,"width",["number"]),vt(r,"height",["number"]);var n=t/this.width,i=r/this.height,c=Math.min(n,i);return this.scale(c)},e.prototype.size=function(){return this.scale(1)},e.prototype.embed=function(){return yn(this,void 0,void 0,function(){var t,r,n;return _n(this,function(i){switch(i.label){case 0:return this.embedder?(this.embedTask||(t=this,r=t.doc,n=t.ref,this.embedTask=this.embedder.embedIntoContext(r.context,n)),[4,this.embedTask]):[2];case 1:return i.sent(),this.embedder=void 0,[2]}})})},e.of=function(t,r,n){return new e(t,r,n)},e}(),Cd;(function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right"})(Cd||(Cd={}));var P0=function(e){Jt(e==null?void 0:e.x,"options.x",["number"]),Jt(e==null?void 0:e.y,"options.y",["number"]),Jt(e==null?void 0:e.width,"options.width",["number"]),Jt(e==null?void 0:e.height,"options.height",["number"]),Jt(e==null?void 0:e.textColor,"options.textColor",[[Object,"Color"]]),Jt(e==null?void 0:e.backgroundColor,"options.backgroundColor",[[Object,"Color"]]),Jt(e==null?void 0:e.borderColor,"options.borderColor",[[Object,"Color"]]),Jt(e==null?void 0:e.borderWidth,"options.borderWidth",["number"]),Jt(e==null?void 0:e.rotate,"options.rotate",[[Object,"Rotation"]])},Pp=function(){function e(t,r,n){vt(t,"acroField",[[F0,"PDFAcroTerminal"]]),vt(r,"ref",[[ui,"PDFRef"]]),vt(n,"doc",[[kd,"PDFDocument"]]),this.acroField=t,this.ref=r,this.doc=n}return e.prototype.getName=function(){var t;return(t=this.acroField.getFullyQualifiedName())!==null&&t!==void 0?t:""},e.prototype.isReadOnly=function(){return this.acroField.hasFlag(Cc.ReadOnly)},e.prototype.enableReadOnly=function(){this.acroField.setFlagTo(Cc.ReadOnly,!0)},e.prototype.disableReadOnly=function(){this.acroField.setFlagTo(Cc.ReadOnly,!1)},e.prototype.isRequired=function(){return this.acroField.hasFlag(Cc.Required)},e.prototype.enableRequired=function(){this.acroField.setFlagTo(Cc.Required,!0)},e.prototype.disableRequired=function(){this.acroField.setFlagTo(Cc.Required,!1)},e.prototype.isExported=function(){return!this.acroField.hasFlag(Cc.NoExport)},e.prototype.enableExporting=function(){this.acroField.setFlagTo(Cc.NoExport,!1)},e.prototype.disableExporting=function(){this.acroField.setFlagTo(Cc.NoExport,!0)},e.prototype.needsAppearancesUpdate=function(){throw new jl(this.constructor.name,"needsAppearancesUpdate")},e.prototype.defaultUpdateAppearances=function(t){throw new jl(this.constructor.name,"defaultUpdateAppearances")},e.prototype.markAsDirty=function(){this.doc.getForm().markFieldAsDirty(this.ref)},e.prototype.markAsClean=function(){this.doc.getForm().markFieldAsClean(this.ref)},e.prototype.isDirty=function(){return this.doc.getForm().fieldIsDirty(this.ref)},e.prototype.createWidget=function(t){var r,n=t.textColor,i=t.backgroundColor,c=t.borderColor,d=t.borderWidth,y=Aq(t.rotate),o=t.caption,x=t.x,S=t.y,k=t.width+d,O=t.height+d,Q=!!t.hidden,G=t.page;HW(y,"degreesAngle",90);var K=fD.create(this.doc.context,this.ref),ee=MTe({x,y:S,width:k,height:O},d,y);K.setRectangle(ee),G&&K.setP(G);var W=K.getOrCreateAppearanceCharacteristics();i&&W.setBackgroundColor(hV(i)),W.setRotation(y),o&&W.setCaptions({normal:o}),c&&W.setBorderColor(hV(c));var J=K.getOrCreateBorderStyle();if(d!==void 0&&J.setWidth(d),K.setFlagTo(X_.Print,!0),K.setFlagTo(X_.Hidden,Q),K.setFlagTo(X_.Invisible,!1),n){var re=(r=this.acroField.getDefaultAppearance())!==null&&r!==void 0?r:"",ue=re+`
`+Mp(n).toString();this.acroField.setDefaultAppearance(ue)}return K},e.prototype.updateWidgetAppearanceWithFont=function(t,r,n){var i=n.normal,c=n.rollover,d=n.down;this.updateWidgetAppearances(t,{normal:this.createAppearanceStream(t,i,r),rollover:c&&this.createAppearanceStream(t,c,r),down:d&&this.createAppearanceStream(t,d,r)})},e.prototype.updateOnOffWidgetAppearance=function(t,r,n){var i=n.normal,c=n.rollover,d=n.down;this.updateWidgetAppearances(t,{normal:this.createAppearanceDict(t,i,r),rollover:c&&this.createAppearanceDict(t,c,r),down:d&&this.createAppearanceDict(t,d,r)})},e.prototype.updateWidgetAppearances=function(t,r){var n=r.normal,i=r.rollover,c=r.down;t.setNormalAppearance(n),i?t.setRolloverAppearance(i):t.removeRolloverAppearance(),c?t.setDownAppearance(c):t.removeDownAppearance()},e.prototype.createAppearanceStream=function(t,r,n){var i,c=this.acroField.dict.context,d=t.getRectangle(),y=d.width,o=d.height,x=n&&{Font:(i={},i[n.name]=n.ref,i)},S=c.formXObject(r,{Resources:x,BBox:c.obj([0,0,y,o]),Matrix:c.obj([1,0,0,1,0,0])}),k=c.register(S);return k},e.prototype.createImageAppearanceStream=function(t,r,n){var i,c,d=this.acroField.dict.context,y=t.getRectangle(),o=t.getAppearanceCharacteristics(),x=t.getBorderStyle(),S=(c=x==null?void 0:x.getWidth())!==null&&c!==void 0?c:0,k=WA(o==null?void 0:o.getRotation()),O=jd(ln(ln({},y),{rotation:k})),Q=Fp(y,k),G=r.scaleToFit(Q.width-S*2,Q.height-S*2),K={x:S,y:S,width:G.width,height:G.height,rotate:$r(0),xSkew:$r(0),ySkew:$r(0)};n===Cd.Center?(K.x+=(Q.width-S*2)/2-G.width/2,K.y+=(Q.height-S*2)/2-G.height/2):n===Cd.Right&&(K.x=Q.width-S-G.width,K.y=Q.height-S-G.height);var ee=this.doc.context.addRandomSuffix("Image",10),W=jn(O,bq(ee,K)),J={XObject:(i={},i[ee]=r.ref,i)},re=d.formXObject(W,{Resources:J,BBox:d.obj([0,0,y.width,y.height]),Matrix:d.obj([1,0,0,1,0,0])});return d.register(re)},e.prototype.createAppearanceDict=function(t,r,n){var i=this.acroField.dict.context,c=this.createAppearanceStream(t,r.on),d=this.createAppearanceStream(t,r.off),y=i.obj({});return y.set(n,c),y.set(Le.of("Off"),d),y},e}(),A_=function(e){er(t,e);function t(r,n,i){var c=e.call(this,r,n,i)||this;return vt(r,"acroCheckBox",[[iT,"PDFAcroCheckBox"]]),c.acroField=r,c}return t.prototype.check=function(){var r,n=(r=this.acroField.getOnValue())!==null&&r!==void 0?r:Le.of("Yes");this.markAsDirty(),this.acroField.setValue(n)},t.prototype.uncheck=function(){this.markAsDirty(),this.acroField.setValue(Le.of("Off"))},t.prototype.isChecked=function(){var r=this.acroField.getOnValue();return!!r&&r===this.acroField.getValue()},t.prototype.addToPage=function(r,n){var i,c,d,y,o,x;vt(r,"page",[[Ql,"PDFPage"]]),P0(n),n||(n={}),"textColor"in n||(n.textColor=Ai(0,0,0)),"backgroundColor"in n||(n.backgroundColor=Ai(1,1,1)),"borderColor"in n||(n.borderColor=Ai(0,0,0)),"borderWidth"in n||(n.borderWidth=1);var S=this.createWidget({x:(i=n.x)!==null&&i!==void 0?i:0,y:(c=n.y)!==null&&c!==void 0?c:0,width:(d=n.width)!==null&&d!==void 0?d:50,height:(y=n.height)!==null&&y!==void 0?y:50,textColor:n.textColor,backgroundColor:n.backgroundColor,borderColor:n.borderColor,borderWidth:(o=n.borderWidth)!==null&&o!==void 0?o:0,rotate:(x=n.rotate)!==null&&x!==void 0?x:$r(0),hidden:n.hidden,page:r.ref}),k=this.doc.context.register(S.dict);this.acroField.addWidget(k),S.setAppearanceState(Le.of("Off")),this.updateWidgetAppearance(S,Le.of("Yes")),r.node.addAnnot(k)},t.prototype.needsAppearancesUpdate=function(){for(var r,n=this.acroField.getWidgets(),i=0,c=n.length;i<c;i++){var d=n[i],y=d.getAppearanceState(),o=(r=d.getAppearances())===null||r===void 0?void 0:r.normal;if(!(o instanceof pn)||y&&!o.has(y))return!0}return!1},t.prototype.defaultUpdateAppearances=function(){this.updateAppearances()},t.prototype.updateAppearances=function(r){var n;Jt(r,"provider",[Function]);for(var i=this.acroField.getWidgets(),c=0,d=i.length;c<d;c++){var y=i[c],o=(n=y.getOnValue())!==null&&n!==void 0?n:Le.of("Yes");o&&this.updateWidgetAppearance(y,o,r)}this.markAsClean()},t.prototype.updateWidgetAppearance=function(r,n,i){var c=i??mFe,d=M0(c(this,r));this.updateOnOffWidgetAppearance(r,n,d)},t.of=function(r,n,i){return new t(r,n,i)},t}(Pp),fC=function(e){er(t,e);function t(r,n,i){var c=e.call(this,r,n,i)||this;return vt(r,"acroComboBox",[[oT,"PDFAcroComboBox"]]),c.acroField=r,c}return t.prototype.getOptions=function(){for(var r=this.acroField.getOptions(),n=new Array(r.length),i=0,c=n.length;i<c;i++){var d=r[i],y=d.display,o=d.value;n[i]=(y??o).decodeText()}return n},t.prototype.getSelected=function(){for(var r=this.acroField.getValues(),n=new Array(r.length),i=0,c=r.length;i<c;i++)n[i]=r[i].decodeText();return n},t.prototype.setOptions=function(r){vt(r,"options",[Array]);for(var n=new Array(r.length),i=0,c=r.length;i<c;i++)n[i]={value:Jr.fromText(r[i])};this.acroField.setOptions(n)},t.prototype.addOptions=function(r){vt(r,"options",["string",Array]);for(var n=Array.isArray(r)?r:[r],i=this.acroField.getOptions(),c=new Array(n.length),d=0,y=n.length;d<y;d++)c[d]={value:Jr.fromText(n[d])};this.acroField.setOptions(i.concat(c))},t.prototype.select=function(r,n){n===void 0&&(n=!1),vt(r,"options",["string",Array]),vt(n,"merge",["boolean"]);var i=Array.isArray(r)?r:[r],c=this.getOptions(),d=i.find(function(k){return!c.includes(k)});d&&this.enableEditing(),this.markAsDirty(),(i.length>1||i.length===1&&n)&&this.enableMultiselect();for(var y=new Array(i.length),o=0,x=i.length;o<x;o++)y[o]=Jr.fromText(i[o]);if(n){var S=this.acroField.getValues();this.acroField.setValues(S.concat(y))}else this.acroField.setValues(y)},t.prototype.clear=function(){this.markAsDirty(),this.acroField.setValues([])},t.prototype.setFontSize=function(r){rT(r,"fontSize"),this.acroField.setFontSize(r),this.markAsDirty()},t.prototype.isEditable=function(){return this.acroField.hasFlag(si.Edit)},t.prototype.enableEditing=function(){this.acroField.setFlagTo(si.Edit,!0)},t.prototype.disableEditing=function(){this.acroField.setFlagTo(si.Edit,!1)},t.prototype.isSorted=function(){return this.acroField.hasFlag(si.Sort)},t.prototype.enableSorting=function(){this.acroField.setFlagTo(si.Sort,!0)},t.prototype.disableSorting=function(){this.acroField.setFlagTo(si.Sort,!1)},t.prototype.isMultiselect=function(){return this.acroField.hasFlag(si.MultiSelect)},t.prototype.enableMultiselect=function(){this.acroField.setFlagTo(si.MultiSelect,!0)},t.prototype.disableMultiselect=function(){this.acroField.setFlagTo(si.MultiSelect,!1)},t.prototype.isSpellChecked=function(){return!this.acroField.hasFlag(si.DoNotSpellCheck)},t.prototype.enableSpellChecking=function(){this.acroField.setFlagTo(si.DoNotSpellCheck,!1)},t.prototype.disableSpellChecking=function(){this.acroField.setFlagTo(si.DoNotSpellCheck,!0)},t.prototype.isSelectOnClick=function(){return this.acroField.hasFlag(si.CommitOnSelChange)},t.prototype.enableSelectOnClick=function(){this.acroField.setFlagTo(si.CommitOnSelChange,!0)},t.prototype.disableSelectOnClick=function(){this.acroField.setFlagTo(si.CommitOnSelChange,!1)},t.prototype.addToPage=function(r,n){var i,c,d,y,o,x,S;vt(r,"page",[[Ql,"PDFPage"]]),P0(n),n||(n={}),"textColor"in n||(n.textColor=Ai(0,0,0)),"backgroundColor"in n||(n.backgroundColor=Ai(1,1,1)),"borderColor"in n||(n.borderColor=Ai(0,0,0)),"borderWidth"in n||(n.borderWidth=1);var k=this.createWidget({x:(i=n.x)!==null&&i!==void 0?i:0,y:(c=n.y)!==null&&c!==void 0?c:0,width:(d=n.width)!==null&&d!==void 0?d:200,height:(y=n.height)!==null&&y!==void 0?y:50,textColor:n.textColor,backgroundColor:n.backgroundColor,borderColor:n.borderColor,borderWidth:(o=n.borderWidth)!==null&&o!==void 0?o:0,rotate:(x=n.rotate)!==null&&x!==void 0?x:$r(0),hidden:n.hidden,page:r.ref}),O=this.doc.context.register(k.dict);this.acroField.addWidget(O);var Q=(S=n.font)!==null&&S!==void 0?S:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(k,Q),r.node.addAnnot(O)},t.prototype.needsAppearancesUpdate=function(){var r;if(this.isDirty())return!0;for(var n=this.acroField.getWidgets(),i=0,c=n.length;i<c;i++){var d=n[i],y=((r=d.getAppearances())===null||r===void 0?void 0:r.normal)instanceof ol;if(!y)return!0}return!1},t.prototype.defaultUpdateAppearances=function(r){vt(r,"font",[[cl,"PDFFont"]]),this.updateAppearances(r)},t.prototype.updateAppearances=function(r,n){vt(r,"font",[[cl,"PDFFont"]]),Jt(n,"provider",[Function]);for(var i=this.acroField.getWidgets(),c=0,d=i.length;c<d;c++){var y=i[c];this.updateWidgetAppearance(y,r,n)}this.markAsClean()},t.prototype.updateWidgetAppearance=function(r,n,i){var c=i??_Fe,d=M0(c(this,r,n));this.updateWidgetAppearanceWithFont(r,n,d)},t.of=function(r,n,i){return new t(r,n,i)},t}(Pp),pC=function(e){er(t,e);function t(r,n,i){var c=e.call(this,r,n,i)||this;return vt(r,"acroListBox",[[cT,"PDFAcroListBox"]]),c.acroField=r,c}return t.prototype.getOptions=function(){for(var r=this.acroField.getOptions(),n=new Array(r.length),i=0,c=n.length;i<c;i++){var d=r[i],y=d.display,o=d.value;n[i]=(y??o).decodeText()}return n},t.prototype.getSelected=function(){for(var r=this.acroField.getValues(),n=new Array(r.length),i=0,c=r.length;i<c;i++)n[i]=r[i].decodeText();return n},t.prototype.setOptions=function(r){vt(r,"options",[Array]),this.markAsDirty();for(var n=new Array(r.length),i=0,c=r.length;i<c;i++)n[i]={value:Jr.fromText(r[i])};this.acroField.setOptions(n)},t.prototype.addOptions=function(r){vt(r,"options",["string",Array]),this.markAsDirty();for(var n=Array.isArray(r)?r:[r],i=this.acroField.getOptions(),c=new Array(n.length),d=0,y=n.length;d<y;d++)c[d]={value:Jr.fromText(n[d])};this.acroField.setOptions(i.concat(c))},t.prototype.select=function(r,n){n===void 0&&(n=!1),vt(r,"options",["string",Array]),vt(n,"merge",["boolean"]);var i=Array.isArray(r)?r:[r],c=this.getOptions();yEe(i,"option",c),this.markAsDirty(),(i.length>1||i.length===1&&n)&&this.enableMultiselect();for(var d=new Array(i.length),y=0,o=i.length;y<o;y++)d[y]=Jr.fromText(i[y]);if(n){var x=this.acroField.getValues();this.acroField.setValues(x.concat(d))}else this.acroField.setValues(d)},t.prototype.clear=function(){this.markAsDirty(),this.acroField.setValues([])},t.prototype.setFontSize=function(r){rT(r,"fontSize"),this.acroField.setFontSize(r),this.markAsDirty()},t.prototype.isSorted=function(){return this.acroField.hasFlag(si.Sort)},t.prototype.enableSorting=function(){this.acroField.setFlagTo(si.Sort,!0)},t.prototype.disableSorting=function(){this.acroField.setFlagTo(si.Sort,!1)},t.prototype.isMultiselect=function(){return this.acroField.hasFlag(si.MultiSelect)},t.prototype.enableMultiselect=function(){this.acroField.setFlagTo(si.MultiSelect,!0)},t.prototype.disableMultiselect=function(){this.acroField.setFlagTo(si.MultiSelect,!1)},t.prototype.isSelectOnClick=function(){return this.acroField.hasFlag(si.CommitOnSelChange)},t.prototype.enableSelectOnClick=function(){this.acroField.setFlagTo(si.CommitOnSelChange,!0)},t.prototype.disableSelectOnClick=function(){this.acroField.setFlagTo(si.CommitOnSelChange,!1)},t.prototype.addToPage=function(r,n){var i,c,d,y,o,x,S;vt(r,"page",[[Ql,"PDFPage"]]),P0(n),n||(n={}),"textColor"in n||(n.textColor=Ai(0,0,0)),"backgroundColor"in n||(n.backgroundColor=Ai(1,1,1)),"borderColor"in n||(n.borderColor=Ai(0,0,0)),"borderWidth"in n||(n.borderWidth=1);var k=this.createWidget({x:(i=n.x)!==null&&i!==void 0?i:0,y:(c=n.y)!==null&&c!==void 0?c:0,width:(d=n.width)!==null&&d!==void 0?d:200,height:(y=n.height)!==null&&y!==void 0?y:100,textColor:n.textColor,backgroundColor:n.backgroundColor,borderColor:n.borderColor,borderWidth:(o=n.borderWidth)!==null&&o!==void 0?o:0,rotate:(x=n.rotate)!==null&&x!==void 0?x:$r(0),hidden:n.hidden,page:r.ref}),O=this.doc.context.register(k.dict);this.acroField.addWidget(O);var Q=(S=n.font)!==null&&S!==void 0?S:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(k,Q),r.node.addAnnot(O)},t.prototype.needsAppearancesUpdate=function(){var r;if(this.isDirty())return!0;for(var n=this.acroField.getWidgets(),i=0,c=n.length;i<c;i++){var d=n[i],y=((r=d.getAppearances())===null||r===void 0?void 0:r.normal)instanceof ol;if(!y)return!0}return!1},t.prototype.defaultUpdateAppearances=function(r){vt(r,"font",[[cl,"PDFFont"]]),this.updateAppearances(r)},t.prototype.updateAppearances=function(r,n){vt(r,"font",[[cl,"PDFFont"]]),Jt(n,"provider",[Function]);for(var i=this.acroField.getWidgets(),c=0,d=i.length;c<d;c++){var y=i[c];this.updateWidgetAppearance(y,r,n)}this.markAsClean()},t.prototype.updateWidgetAppearance=function(r,n,i){var c=i??xFe,d=M0(c(this,r,n));this.updateWidgetAppearanceWithFont(r,n,d)},t.of=function(r,n,i){return new t(r,n,i)},t}(Pp),h_=function(e){er(t,e);function t(r,n,i){var c=e.call(this,r,n,i)||this;return vt(r,"acroRadioButton",[[lT,"PDFAcroRadioButton"]]),c.acroField=r,c}return t.prototype.getOptions=function(){var r=this.acroField.getExportValues();if(r){for(var n=new Array(r.length),i=0,c=r.length;i<c;i++)n[i]=r[i].decodeText();return n}for(var d=this.acroField.getOnValues(),y=new Array(d.length),i=0,c=y.length;i<c;i++)y[i]=d[i].decodeText();return y},t.prototype.getSelected=function(){var r=this.acroField.getValue();if(r!==Le.of("Off")){var n=this.acroField.getExportValues();if(n){for(var i=this.acroField.getOnValues(),c=0,d=i.length;c<d;c++)if(i[c]===r)return n[c].decodeText()}return r.decodeText()}},t.prototype.select=function(r){vt(r,"option",["string"]);var n=this.getOptions();hd(r,"option",n),this.markAsDirty();var i=this.acroField.getOnValues(),c=this.acroField.getExportValues();if(c)for(var d=0,y=c.length;d<y;d++)c[d].decodeText()===r&&this.acroField.setValue(i[d]);else for(var d=0,y=i.length;d<y;d++){var o=i[d];o.decodeText()===r&&this.acroField.setValue(o)}},t.prototype.clear=function(){this.markAsDirty(),this.acroField.setValue(Le.of("Off"))},t.prototype.isOffToggleable=function(){return!this.acroField.hasFlag(zl.NoToggleToOff)},t.prototype.enableOffToggling=function(){this.acroField.setFlagTo(zl.NoToggleToOff,!1)},t.prototype.disableOffToggling=function(){this.acroField.setFlagTo(zl.NoToggleToOff,!0)},t.prototype.isMutuallyExclusive=function(){return!this.acroField.hasFlag(zl.RadiosInUnison)},t.prototype.enableMutualExclusion=function(){this.acroField.setFlagTo(zl.RadiosInUnison,!1)},t.prototype.disableMutualExclusion=function(){this.acroField.setFlagTo(zl.RadiosInUnison,!0)},t.prototype.addOptionToPage=function(r,n,i){var c,d,y,o,x,S,k,O,Q;vt(r,"option",["string"]),vt(n,"page",[[Ql,"PDFPage"]]),P0(i);var G=this.createWidget({x:(c=i==null?void 0:i.x)!==null&&c!==void 0?c:0,y:(d=i==null?void 0:i.y)!==null&&d!==void 0?d:0,width:(y=i==null?void 0:i.width)!==null&&y!==void 0?y:50,height:(o=i==null?void 0:i.height)!==null&&o!==void 0?o:50,textColor:(x=i==null?void 0:i.textColor)!==null&&x!==void 0?x:Ai(0,0,0),backgroundColor:(S=i==null?void 0:i.backgroundColor)!==null&&S!==void 0?S:Ai(1,1,1),borderColor:(k=i==null?void 0:i.borderColor)!==null&&k!==void 0?k:Ai(0,0,0),borderWidth:(O=i==null?void 0:i.borderWidth)!==null&&O!==void 0?O:1,rotate:(Q=i==null?void 0:i.rotate)!==null&&Q!==void 0?Q:$r(0),hidden:i==null?void 0:i.hidden,page:n.ref}),K=this.doc.context.register(G.dict),ee=this.acroField.addWidgetWithOpt(K,Jr.fromText(r),!this.isMutuallyExclusive());G.setAppearanceState(Le.of("Off")),this.updateWidgetAppearance(G,ee),n.node.addAnnot(K)},t.prototype.needsAppearancesUpdate=function(){for(var r,n=this.acroField.getWidgets(),i=0,c=n.length;i<c;i++){var d=n[i],y=d.getAppearanceState(),o=(r=d.getAppearances())===null||r===void 0?void 0:r.normal;if(!(o instanceof pn)||y&&!o.has(y))return!0}return!1},t.prototype.defaultUpdateAppearances=function(){this.updateAppearances()},t.prototype.updateAppearances=function(r){Jt(r,"provider",[Function]);for(var n=this.acroField.getWidgets(),i=0,c=n.length;i<c;i++){var d=n[i],y=d.getOnValue();y&&this.updateWidgetAppearance(d,y,r)}},t.prototype.updateWidgetAppearance=function(r,n,i){var c=i??gFe,d=M0(c(this,r));this.updateOnOffWidgetAppearance(r,n,d)},t.of=function(r,n,i){return new t(r,n,i)},t}(Pp),vD=function(e){er(t,e);function t(r,n,i){var c=e.call(this,r,n,i)||this;return vt(r,"acroSignature",[[tR,"PDFAcroSignature"]]),c.acroField=r,c}return t.prototype.needsAppearancesUpdate=function(){return!1},t.of=function(r,n,i){return new t(r,n,i)},t}(Pp),mC=function(e){er(t,e);function t(r,n,i){var c=e.call(this,r,n,i)||this;return vt(r,"acroText",[[aT,"PDFAcroText"]]),c.acroField=r,c}return t.prototype.getText=function(){var r=this.acroField.getValue();if(!r&&this.isRichFormatted())throw new aFe(this.getName());return r==null?void 0:r.decodeText()},t.prototype.setText=function(r){Jt(r,"text",["string"]);var n=this.getMaxLength();if(n!==void 0&&r&&r.length>n)throw new lFe(r.length,n,this.getName());this.markAsDirty(),this.disableRichFormatting(),r?this.acroField.setValue(Jr.fromText(r)):this.acroField.removeValue()},t.prototype.getAlignment=function(){var r=this.acroField.getQuadding();return r===0?Qo.Left:r===1?Qo.Center:r===2?Qo.Right:Qo.Left},t.prototype.setAlignment=function(r){hd(r,"alignment",Qo),this.markAsDirty(),this.acroField.setQuadding(r)},t.prototype.getMaxLength=function(){return this.acroField.getMaxLength()},t.prototype.setMaxLength=function(r){if(Bc(r,"maxLength",0,Number.MAX_SAFE_INTEGER),this.markAsDirty(),r===void 0)this.acroField.removeMaxLength();else{var n=this.getText();if(n&&n.length>r)throw new cFe(n.length,r,this.getName());this.acroField.setMaxLength(r)}},t.prototype.removeMaxLength=function(){this.markAsDirty(),this.acroField.removeMaxLength()},t.prototype.setImage=function(r){for(var n=this.getAlignment(),i=n===Qo.Center?Cd.Center:n===Qo.Right?Cd.Right:Cd.Left,c=this.acroField.getWidgets(),d=0,y=c.length;d<y;d++){var o=c[d],x=this.createImageAppearanceStream(o,r,i);this.updateWidgetAppearances(o,{normal:x})}this.markAsClean()},t.prototype.setFontSize=function(r){rT(r,"fontSize"),this.acroField.setFontSize(r),this.markAsDirty()},t.prototype.isMultiline=function(){return this.acroField.hasFlag(to.Multiline)},t.prototype.enableMultiline=function(){this.markAsDirty(),this.acroField.setFlagTo(to.Multiline,!0)},t.prototype.disableMultiline=function(){this.markAsDirty(),this.acroField.setFlagTo(to.Multiline,!1)},t.prototype.isPassword=function(){return this.acroField.hasFlag(to.Password)},t.prototype.enablePassword=function(){this.acroField.setFlagTo(to.Password,!0)},t.prototype.disablePassword=function(){this.acroField.setFlagTo(to.Password,!1)},t.prototype.isFileSelector=function(){return this.acroField.hasFlag(to.FileSelect)},t.prototype.enableFileSelection=function(){this.acroField.setFlagTo(to.FileSelect,!0)},t.prototype.disableFileSelection=function(){this.acroField.setFlagTo(to.FileSelect,!1)},t.prototype.isSpellChecked=function(){return!this.acroField.hasFlag(to.DoNotSpellCheck)},t.prototype.enableSpellChecking=function(){this.acroField.setFlagTo(to.DoNotSpellCheck,!1)},t.prototype.disableSpellChecking=function(){this.acroField.setFlagTo(to.DoNotSpellCheck,!0)},t.prototype.isScrollable=function(){return!this.acroField.hasFlag(to.DoNotScroll)},t.prototype.enableScrolling=function(){this.acroField.setFlagTo(to.DoNotScroll,!1)},t.prototype.disableScrolling=function(){this.acroField.setFlagTo(to.DoNotScroll,!0)},t.prototype.isCombed=function(){return this.acroField.hasFlag(to.Comb)&&!this.isMultiline()&&!this.isPassword()&&!this.isFileSelector()&&this.getMaxLength()!==void 0},t.prototype.enableCombing=function(){if(this.getMaxLength()===void 0){var r="PDFTextFields must have a max length in order to be combed";console.warn(r)}this.markAsDirty(),this.disableMultiline(),this.disablePassword(),this.disableFileSelection(),this.acroField.setFlagTo(to.Comb,!0)},t.prototype.disableCombing=function(){this.markAsDirty(),this.acroField.setFlagTo(to.Comb,!1)},t.prototype.isRichFormatted=function(){return this.acroField.hasFlag(to.RichText)},t.prototype.enableRichFormatting=function(){this.acroField.setFlagTo(to.RichText,!0)},t.prototype.disableRichFormatting=function(){this.acroField.setFlagTo(to.RichText,!1)},t.prototype.addToPage=function(r,n){var i,c,d,y,o,x,S;vt(r,"page",[[Ql,"PDFPage"]]),P0(n),n||(n={}),"textColor"in n||(n.textColor=Ai(0,0,0)),"backgroundColor"in n||(n.backgroundColor=Ai(1,1,1)),"borderColor"in n||(n.borderColor=Ai(0,0,0)),"borderWidth"in n||(n.borderWidth=1);var k=this.createWidget({x:(i=n.x)!==null&&i!==void 0?i:0,y:(c=n.y)!==null&&c!==void 0?c:0,width:(d=n.width)!==null&&d!==void 0?d:200,height:(y=n.height)!==null&&y!==void 0?y:50,textColor:n.textColor,backgroundColor:n.backgroundColor,borderColor:n.borderColor,borderWidth:(o=n.borderWidth)!==null&&o!==void 0?o:0,rotate:(x=n.rotate)!==null&&x!==void 0?x:$r(0),hidden:n.hidden,page:r.ref}),O=this.doc.context.register(k.dict);this.acroField.addWidget(O);var Q=(S=n.font)!==null&&S!==void 0?S:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(k,Q),r.node.addAnnot(O)},t.prototype.needsAppearancesUpdate=function(){var r;if(this.isDirty())return!0;for(var n=this.acroField.getWidgets(),i=0,c=n.length;i<c;i++){var d=n[i],y=((r=d.getAppearances())===null||r===void 0?void 0:r.normal)instanceof ol;if(!y)return!0}return!1},t.prototype.defaultUpdateAppearances=function(r){vt(r,"font",[[cl,"PDFFont"]]),this.updateAppearances(r)},t.prototype.updateAppearances=function(r,n){vt(r,"font",[[cl,"PDFFont"]]),Jt(n,"provider",[Function]);for(var i=this.acroField.getWidgets(),c=0,d=i.length;c<d;c++){var y=i[c];this.updateWidgetAppearance(y,r,n)}this.markAsClean()},t.prototype.updateWidgetAppearance=function(r,n,i){var c=i??yFe,d=M0(c(this,r,n));this.updateWidgetAppearanceWithFont(r,n,d)},t.of=function(r,n,i){return new t(r,n,i)},t}(Pp),US;(function(e){e.Courier="Courier",e.CourierBold="Courier-Bold",e.CourierOblique="Courier-Oblique",e.CourierBoldOblique="Courier-BoldOblique",e.Helvetica="Helvetica",e.HelveticaBold="Helvetica-Bold",e.HelveticaOblique="Helvetica-Oblique",e.HelveticaBoldOblique="Helvetica-BoldOblique",e.TimesRoman="Times-Roman",e.TimesRomanBold="Times-Bold",e.TimesRomanItalic="Times-Italic",e.TimesRomanBoldItalic="Times-BoldItalic",e.Symbol="Symbol",e.ZapfDingbats="ZapfDingbats"})(US||(US={}));var bFe=function(){function e(t,r){var n=this;this.embedDefaultFont=function(){return n.doc.embedStandardFont(US.Helvetica)},vt(t,"acroForm",[[PS,"PDFAcroForm"]]),vt(r,"doc",[[kd,"PDFDocument"]]),this.acroForm=t,this.doc=r,this.dirtyFields=new Set,this.defaultFontCache=PA.populatedBy(this.embedDefaultFont)}return e.prototype.hasXFA=function(){return this.acroForm.dict.has(Le.of("XFA"))},e.prototype.deleteXFA=function(){this.acroForm.dict.delete(Le.of("XFA"))},e.prototype.getFields=function(){for(var t=this.acroForm.getAllFields(),r=[],n=0,i=t.length;n<i;n++){var c=t[n],d=c[0],y=c[1],o=wFe(d,y,this.doc);o&&r.push(o)}return r},e.prototype.getFieldMaybe=function(t){vt(t,"name",["string"]);for(var r=this.getFields(),n=0,i=r.length;n<i;n++){var c=r[n];if(c.getName()===t)return c}},e.prototype.getField=function(t){vt(t,"name",["string"]);var r=this.getFieldMaybe(t);if(r)return r;throw new iFe(t)},e.prototype.getButton=function(t){vt(t,"name",["string"]);var r=this.getField(t);if(r instanceof gC)return r;throw new zf(t,gC,r)},e.prototype.getCheckBox=function(t){vt(t,"name",["string"]);var r=this.getField(t);if(r instanceof A_)return r;throw new zf(t,A_,r)},e.prototype.getDropdown=function(t){vt(t,"name",["string"]);var r=this.getField(t);if(r instanceof fC)return r;throw new zf(t,fC,r)},e.prototype.getOptionList=function(t){vt(t,"name",["string"]);var r=this.getField(t);if(r instanceof pC)return r;throw new zf(t,pC,r)},e.prototype.getRadioGroup=function(t){vt(t,"name",["string"]);var r=this.getField(t);if(r instanceof h_)return r;throw new zf(t,h_,r)},e.prototype.getSignature=function(t){vt(t,"name",["string"]);var r=this.getField(t);if(r instanceof vD)return r;throw new zf(t,vD,r)},e.prototype.getTextField=function(t){vt(t,"name",["string"]);var r=this.getField(t);if(r instanceof mC)return r;throw new zf(t,mC,r)},e.prototype.createButton=function(t){vt(t,"name",["string"]);var r=ng(t),n=this.findOrCreateNonTerminals(r.nonTerminal),i=sT.create(this.doc.context);return i.setPartialName(r.terminal),ig(n,[i,i.ref],r.terminal),gC.of(i,i.ref,this.doc)},e.prototype.createCheckBox=function(t){vt(t,"name",["string"]);var r=ng(t),n=this.findOrCreateNonTerminals(r.nonTerminal),i=iT.create(this.doc.context);return i.setPartialName(r.terminal),ig(n,[i,i.ref],r.terminal),A_.of(i,i.ref,this.doc)},e.prototype.createDropdown=function(t){vt(t,"name",["string"]);var r=ng(t),n=this.findOrCreateNonTerminals(r.nonTerminal),i=oT.create(this.doc.context);return i.setPartialName(r.terminal),ig(n,[i,i.ref],r.terminal),fC.of(i,i.ref,this.doc)},e.prototype.createOptionList=function(t){vt(t,"name",["string"]);var r=ng(t),n=this.findOrCreateNonTerminals(r.nonTerminal),i=cT.create(this.doc.context);return i.setPartialName(r.terminal),ig(n,[i,i.ref],r.terminal),pC.of(i,i.ref,this.doc)},e.prototype.createRadioGroup=function(t){vt(t,"name",["string"]);var r=ng(t),n=this.findOrCreateNonTerminals(r.nonTerminal),i=lT.create(this.doc.context);return i.setPartialName(r.terminal),ig(n,[i,i.ref],r.terminal),h_.of(i,i.ref,this.doc)},e.prototype.createTextField=function(t){vt(t,"name",["string"]);var r=ng(t),n=this.findOrCreateNonTerminals(r.nonTerminal),i=aT.create(this.doc.context);return i.setPartialName(r.terminal),ig(n,[i,i.ref],r.terminal),mC.of(i,i.ref,this.doc)},e.prototype.flatten=function(t){t===void 0&&(t={updateFieldAppearances:!0}),t.updateFieldAppearances&&this.updateFieldAppearances();for(var r=this.getFields(),n=0,i=r.length;n<i;n++){for(var c=r[n],d=c.acroField.getWidgets(),y=0,o=d.length;y<o;y++){var x=d[y],S=this.findWidgetPage(x),k=this.findWidgetAppearanceRef(c,x),O=S.node.newXObject("FlatWidget",k),Q=x.getRectangle(),G=jn([jo(),Gl(Q.x,Q.y)],jd(ln(ln({},Q),{rotation:0})),[cR(O),Go()]).filter(Boolean);S.pushOperators.apply(S,G)}this.removeField(c)}},e.prototype.removeField=function(t){for(var r=t.acroField.getWidgets(),n=new Set,i=0,c=r.length;i<c;i++){var d=r[i],y=this.findWidgetAppearanceRef(t,d),o=this.findWidgetPage(d);n.add(o),o.node.removeAnnot(y)}n.forEach(function(Q){return Q.node.removeAnnot(t.ref)}),this.acroForm.removeField(t.acroField);for(var x=t.acroField.normalizedEntries().Kids,S=x.size(),k=0;k<S;k++){var O=x.get(k);O instanceof ui&&this.doc.context.delete(O)}this.doc.context.delete(t.ref)},e.prototype.updateFieldAppearances=function(t){Jt(t,"font",[[cl,"PDFFont"]]),t=t??this.getDefaultFont();for(var r=this.getFields(),n=0,i=r.length;n<i;n++){var c=r[n];c.needsAppearancesUpdate()&&c.defaultUpdateAppearances(t)}},e.prototype.markFieldAsDirty=function(t){Jt(t,"fieldRef",[[ui,"PDFRef"]]),this.dirtyFields.add(t)},e.prototype.markFieldAsClean=function(t){Jt(t,"fieldRef",[[ui,"PDFRef"]]),this.dirtyFields.delete(t)},e.prototype.fieldIsDirty=function(t){return Jt(t,"fieldRef",[[ui,"PDFRef"]]),this.dirtyFields.has(t)},e.prototype.getDefaultFont=function(){return this.defaultFontCache.access()},e.prototype.findWidgetPage=function(t){var r=t.P(),n=this.doc.getPages().find(function(c){return c.ref===r});if(n===void 0){var i=this.doc.context.getObjectRef(t.dict);if(i===void 0)throw new Error("Could not find PDFRef for PDFObject");if(n=this.doc.findPageForAnnotationRef(i),n===void 0)throw new Error("Could not find page for PDFRef "+i)}return n},e.prototype.findWidgetAppearanceRef=function(t,r){var n,i=r.getNormalAppearance();if(i instanceof pn&&(t instanceof A_||t instanceof h_)){var c=t.acroField.getValue(),d=(n=i.get(c))!==null&&n!==void 0?n:i.get(Le.of("Off"));d instanceof ui&&(i=d)}if(!(i instanceof ui)){var y=t.getName();throw new Error("Failed to extract appearance ref for: "+y)}return i},e.prototype.findOrCreateNonTerminals=function(t){for(var r=[this.acroForm],n=0,i=t.length;n<i;n++){var c=t[n];if(!c)throw new oFe(c);var d=r[0],y=r[1],o=this.findNonTerminal(c,d);if(o)r=o;else{var x=MS.create(this.doc.context);x.setPartialName(c),x.setParent(y);var S=this.doc.context.register(x.dict);d.addField(S),r=[x,S]}}return r},e.prototype.findNonTerminal=function(t,r){for(var n=r instanceof PS?this.acroForm.getFields():rR(r.Kids()),i=0,c=n.length;i<c;i++){var d=n[i],y=d[0],o=d[1];if(y.getPartialName()===t){if(y instanceof MS)return[y,o];throw new Bq(t)}}},e.of=function(t,r){return new e(t,r)},e}(),wFe=function(e,t,r){if(e instanceof sT)return gC.of(e,t,r);if(e instanceof iT)return A_.of(e,t,r);if(e instanceof oT)return fC.of(e,t,r);if(e instanceof cT)return pC.of(e,t,r);if(e instanceof aT)return mC.of(e,t,r);if(e instanceof lT)return h_.of(e,t,r);if(e instanceof tR)return vD.of(e,t,r)},ng=function(e){if(e.length===0)throw new Error("PDF field names must not be empty strings");for(var t=e.split("."),r=0,n=t.length;r<n;r++)if(t[r]==="")throw new Error('Periods in PDF field names must be separated by at least one character: "'+e+'"');return t.length===1?{nonTerminal:[],terminal:t[0]}:{nonTerminal:t.slice(0,t.length-1),terminal:t[t.length-1]}},ig=function(e,t,r){for(var n=e[0],i=e[1],c=t[0],d=t[1],y=n.normalizedEntries(),o=rR("Kids"in y?y.Kids:y.Fields),x=0,S=o.length;x<S;x++)if(o[x][0].getPartialName()===r)throw new Bq(r);n.addField(d),c.setParent(i)},BFe={"4A0":[4767.87,6740.79],"2A0":[3370.39,4767.87],A0:[2383.94,3370.39],A1:[1683.78,2383.94],A2:[1190.55,1683.78],A3:[841.89,1190.55],A4:[595.28,841.89],A5:[419.53,595.28],A6:[297.64,419.53],A7:[209.76,297.64],A8:[147.4,209.76],A9:[104.88,147.4],A10:[73.7,104.88],B0:[2834.65,4008.19],B1:[2004.09,2834.65],B2:[1417.32,2004.09],B3:[1000.63,1417.32],B4:[708.66,1000.63],B5:[498.9,708.66],B6:[354.33,498.9],B7:[249.45,354.33],B8:[175.75,249.45],B9:[124.72,175.75],B10:[87.87,124.72],C0:[2599.37,3676.54],C1:[1836.85,2599.37],C2:[1298.27,1836.85],C3:[918.43,1298.27],C4:[649.13,918.43],C5:[459.21,649.13],C6:[323.15,459.21],C7:[229.61,323.15],C8:[161.57,229.61],C9:[113.39,161.57],C10:[79.37,113.39],RA0:[2437.8,3458.27],RA1:[1729.13,2437.8],RA2:[1218.9,1729.13],RA3:[864.57,1218.9],RA4:[609.45,864.57],SRA0:[2551.18,3628.35],SRA1:[1814.17,2551.18],SRA2:[1275.59,1814.17],SRA3:[907.09,1275.59],SRA4:[637.8,907.09],Executive:[521.86,756],Folio:[612,936],Legal:[612,1008],Letter:[612,792],Tabloid:[792,1224]},yD;(function(e){e[e.Fastest=1/0]="Fastest",e[e.Fast=1500]="Fast",e[e.Medium=500]="Medium",e[e.Slow=100]="Slow"})(yD||(yD={}));var CFe=function(){function e(t,r,n){this.alreadyEmbedded=!1,this.ref=t,this.doc=r,this.embedder=n}return e.prototype.embed=function(){return yn(this,void 0,void 0,function(){var t,r,n,i,c;return _n(this,function(d){switch(d.label){case 0:return this.alreadyEmbedded?[3,2]:[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:t=d.sent(),this.doc.catalog.has(Le.of("Names"))||this.doc.catalog.set(Le.of("Names"),this.doc.context.obj({})),r=this.doc.catalog.lookup(Le.of("Names"),pn),r.has(Le.of("EmbeddedFiles"))||r.set(Le.of("EmbeddedFiles"),this.doc.context.obj({})),n=r.lookup(Le.of("EmbeddedFiles"),pn),n.has(Le.of("Names"))||n.set(Le.of("Names"),this.doc.context.obj([])),i=n.lookup(Le.of("Names"),Yn),i.push(Jr.fromText(this.embedder.fileName)),i.push(t),this.doc.catalog.has(Le.of("AF"))||this.doc.catalog.set(Le.of("AF"),this.doc.context.obj([])),c=this.doc.catalog.lookup(Le.of("AF"),Yn),c.push(t),this.alreadyEmbedded=!0,d.label=2;case 2:return[2]}})})},e.of=function(t,r,n){return new e(t,r,n)},e}(),SFe=function(){function e(t,r,n){this.alreadyEmbedded=!1,this.ref=t,this.doc=r,this.embedder=n}return e.prototype.embed=function(){return yn(this,void 0,void 0,function(){var t,r,n,i,c,d,y;return _n(this,function(o){switch(o.label){case 0:return this.alreadyEmbedded?[3,2]:(t=this.doc,r=t.catalog,n=t.context,[4,this.embedder.embedIntoContext(this.doc.context,this.ref)]);case 1:i=o.sent(),r.has(Le.of("Names"))||r.set(Le.of("Names"),n.obj({})),c=r.lookup(Le.of("Names"),pn),c.has(Le.of("JavaScript"))||c.set(Le.of("JavaScript"),n.obj({})),d=c.lookup(Le.of("JavaScript"),pn),d.has(Le.of("Names"))||d.set(Le.of("Names"),n.obj([])),y=d.lookup(Le.of("Names"),Yn),y.push(Jr.fromText(this.embedder.scriptName)),y.push(i),this.alreadyEmbedded=!0,o.label=2;case 2:return[2]}})})},e.of=function(t,r,n){return new e(t,r,n)},e}(),EFe=function(){function e(t,r){this.script=t,this.scriptName=r}return e.for=function(t,r){return new e(t,r)},e.prototype.embedIntoContext=function(t,r){return yn(this,void 0,void 0,function(){var n;return _n(this,function(i){return n=t.obj({Type:"Action",S:"JavaScript",JS:Jr.fromText(this.script)}),r?(t.assign(r,n),[2,r]):[2,t.register(n)]})})},e}(),kd=function(){function e(t,r,n){var i=this;if(this.defaultWordBreaks=[" "],this.computePages=function(){var c=[];return i.catalog.Pages().traverse(function(d,y){if(d instanceof DA){var o=i.pageMap.get(d);o||(o=Ql.of(d,y,i),i.pageMap.set(d,o)),c.push(o)}}),c},this.getOrCreateForm=function(){var c=i.catalog.getOrCreateAcroForm();return bFe.of(c,i)},vt(t,"context",[[hD,"PDFContext"]]),vt(r,"ignoreEncryption",["boolean"]),this.context=t,this.catalog=t.lookup(t.trailerInfo.Root),this.isEncrypted=!!t.lookup(t.trailerInfo.Encrypt),this.pageCache=PA.populatedBy(this.computePages),this.pageMap=new Map,this.formCache=PA.populatedBy(this.getOrCreateForm),this.fonts=[],this.images=[],this.embeddedPages=[],this.embeddedFiles=[],this.javaScripts=[],!r&&this.isEncrypted)throw new eFe;n&&this.updateInfoDict()}return e.load=function(t,r){return r===void 0&&(r={}),yn(this,void 0,void 0,function(){var n,i,c,d,y,o,x,S,k,O,Q,G;return _n(this,function(K){switch(K.label){case 0:return n=r.ignoreEncryption,i=n===void 0?!1:n,c=r.parseSpeed,d=c===void 0?yD.Slow:c,y=r.throwOnInvalidObject,o=y===void 0?!1:y,x=r.updateMetadata,S=x===void 0?!0:x,k=r.capNumbers,O=k===void 0?!1:k,vt(t,"pdf",["string",Uint8Array,ArrayBuffer]),vt(i,"ignoreEncryption",["boolean"]),vt(d,"parseSpeed",["number"]),vt(o,"throwOnInvalidObject",["boolean"]),Q=Py(t),[4,FTe.forBytesWithOptions(Q,d,o,O).parseDocument()];case 1:return G=K.sent(),[2,new e(G,i,S)]}})})},e.create=function(t){return t===void 0&&(t={}),yn(this,void 0,void 0,function(){var r,n,i,c,d,y;return _n(this,function(o){return r=t.updateMetadata,n=r===void 0?!0:r,i=hD.create(),c=aq.withContext(i),d=i.register(c),y=oq.withContextAndPages(i,d),i.trailerInfo.Root=i.register(y),[2,new e(i,!1,n)]})})},e.prototype.registerFontkit=function(t){this.fontkit=t},e.prototype.getForm=function(){var t=this.formCache.access();return t.hasXFA()&&(console.warn("Removing XFA form data as pdf-lib does not support reading or writing XFA"),t.deleteXFA()),t},e.prototype.getTitle=function(){var t=this.getInfoDict().lookup(Le.Title);if(t)return jh(t),t.decodeText()},e.prototype.getAuthor=function(){var t=this.getInfoDict().lookup(Le.Author);if(t)return jh(t),t.decodeText()},e.prototype.getSubject=function(){var t=this.getInfoDict().lookup(Le.Subject);if(t)return jh(t),t.decodeText()},e.prototype.getKeywords=function(){var t=this.getInfoDict().lookup(Le.Keywords);if(t)return jh(t),t.decodeText()},e.prototype.getCreator=function(){var t=this.getInfoDict().lookup(Le.Creator);if(t)return jh(t),t.decodeText()},e.prototype.getProducer=function(){var t=this.getInfoDict().lookup(Le.Producer);if(t)return jh(t),t.decodeText()},e.prototype.getCreationDate=function(){var t=this.getInfoDict().lookup(Le.CreationDate);if(t)return jh(t),t.decodeDate()},e.prototype.getModificationDate=function(){var t=this.getInfoDict().lookup(Le.ModDate);if(t)return jh(t),t.decodeDate()},e.prototype.setTitle=function(t,r){vt(t,"title",["string"]);var n=Le.of("Title");if(this.getInfoDict().set(n,Jr.fromText(t)),r!=null&&r.showInWindowTitleBar){var i=this.catalog.getOrCreateViewerPreferences();i.setDisplayDocTitle(!0)}},e.prototype.setAuthor=function(t){vt(t,"author",["string"]);var r=Le.of("Author");this.getInfoDict().set(r,Jr.fromText(t))},e.prototype.setSubject=function(t){vt(t,"author",["string"]);var r=Le.of("Subject");this.getInfoDict().set(r,Jr.fromText(t))},e.prototype.setKeywords=function(t){vt(t,"keywords",[Array]);var r=Le.of("Keywords");this.getInfoDict().set(r,Jr.fromText(t.join(" ")))},e.prototype.setCreator=function(t){vt(t,"creator",["string"]);var r=Le.of("Creator");this.getInfoDict().set(r,Jr.fromText(t))},e.prototype.setProducer=function(t){vt(t,"creator",["string"]);var r=Le.of("Producer");this.getInfoDict().set(r,Jr.fromText(t))},e.prototype.setLanguage=function(t){vt(t,"language",["string"]);var r=Le.of("Lang");this.catalog.set(r,ci.of(t))},e.prototype.setCreationDate=function(t){vt(t,"creationDate",[[Date,"Date"]]);var r=Le.of("CreationDate");this.getInfoDict().set(r,ci.fromDate(t))},e.prototype.setModificationDate=function(t){vt(t,"modificationDate",[[Date,"Date"]]);var r=Le.of("ModDate");this.getInfoDict().set(r,ci.fromDate(t))},e.prototype.getPageCount=function(){return this.pageCount===void 0&&(this.pageCount=this.getPages().length),this.pageCount},e.prototype.getPages=function(){return this.pageCache.access()},e.prototype.getPage=function(t){var r=this.getPages();return $s(t,"index",0,r.length-1),r[t]},e.prototype.getPageIndices=function(){return qBe(0,this.getPageCount())},e.prototype.removePage=function(t){var r=this.getPageCount();if(this.pageCount===0)throw new nFe;$s(t,"index",0,r-1),this.catalog.removeLeafNode(t),this.pageCount=r-1},e.prototype.addPage=function(t){return vt(t,"page",["undefined",[Ql,"PDFPage"],Array]),this.insertPage(this.getPageCount(),t)},e.prototype.insertPage=function(t,r){var n=this.getPageCount();if($s(t,"index",0,n),vt(r,"page",["undefined",[Ql,"PDFPage"],Array]),!r||Array.isArray(r)){var i=Array.isArray(r)?r:BFe.A4;r=Ql.create(this),r.setSize.apply(r,i)}else if(r.doc!==this)throw new rFe;var c=this.catalog.insertLeafNode(r.ref,t);return r.node.setParent(c),this.pageMap.set(r.node,r),this.pageCache.invalidate(),this.pageCount=n+1,r},e.prototype.copyPages=function(t,r){return yn(this,void 0,void 0,function(){var n,i,c,d,y,o,x,S;return _n(this,function(k){switch(k.label){case 0:return vt(t,"srcDoc",[[e,"PDFDocument"]]),vt(r,"indices",[Array]),[4,t.flush()];case 1:for(k.sent(),n=tV.for(t.context,this.context),i=t.getPages(),c=new Array(r.length),d=0,y=r.length;d<y;d++)o=i[r[d]],x=n.copy(o.node),S=this.context.register(x),c[d]=Ql.of(x,S,this);return[2,c]}})})},e.prototype.copy=function(){return yn(this,void 0,void 0,function(){var t,r,n,i;return _n(this,function(c){switch(c.label){case 0:return[4,e.create()];case 1:return t=c.sent(),[4,t.copyPages(this,this.getPageIndices())];case 2:for(r=c.sent(),n=0,i=r.length;n<i;n++)t.addPage(r[n]);return this.getAuthor()!==void 0&&t.setAuthor(this.getAuthor()),this.getCreationDate()!==void 0&&t.setCreationDate(this.getCreationDate()),this.getCreator()!==void 0&&t.setCreator(this.getCreator()),this.getModificationDate()!==void 0&&t.setModificationDate(this.getModificationDate()),this.getProducer()!==void 0&&t.setProducer(this.getProducer()),this.getSubject()!==void 0&&t.setSubject(this.getSubject()),this.getTitle()!==void 0&&t.setTitle(this.getTitle()),t.defaultWordBreaks=this.defaultWordBreaks,[2,t]}})})},e.prototype.addJavaScript=function(t,r){vt(t,"name",["string"]),vt(r,"script",["string"]);var n=EFe.for(r,t),i=this.context.nextRef(),c=SFe.of(i,this,n);this.javaScripts.push(c)},e.prototype.attach=function(t,r,n){return n===void 0&&(n={}),yn(this,void 0,void 0,function(){var i,c,d,y;return _n(this,function(o){return vt(t,"attachment",["string",Uint8Array,ArrayBuffer]),vt(r,"name",["string"]),Jt(n.mimeType,"mimeType",["string"]),Jt(n.description,"description",["string"]),Jt(n.creationDate,"options.creationDate",[Date]),Jt(n.modificationDate,"options.modificationDate",[Date]),Pl(n.afRelationship,"options.afRelationship",dD),i=Py(t),c=tTe.for(i,r,n),d=this.context.nextRef(),y=CFe.of(d,this,c),this.embeddedFiles.push(y),[2]})})},e.prototype.embedFont=function(t,r){return r===void 0&&(r={}),yn(this,void 0,void 0,function(){var n,i,c,d,y,o,x,S,k,O;return _n(this,function(Q){switch(Q.label){case 0:return n=r.subset,i=n===void 0?!1:n,c=r.customName,d=r.features,vt(t,"font",["string",Uint8Array,ArrayBuffer]),vt(i,"subset",["boolean"]),KN(t)?(y=FS.for(t,c),[3,7]):[3,1];case 1:return ZBe(t)?(o=Py(t),x=this.assertFontkit(),i?[4,eTe.for(x,o,c,d)]:[3,3]):[3,6];case 2:return S=Q.sent(),[3,5];case 3:return[4,$2.for(x,o,c,d)];case 4:S=Q.sent(),Q.label=5;case 5:return y=S,[3,7];case 6:throw new TypeError("`font` must be one of `StandardFonts | string | Uint8Array | ArrayBuffer`");case 7:return k=this.context.nextRef(),O=cl.of(k,this,y),this.fonts.push(O),[2,O]}})})},e.prototype.embedStandardFont=function(t,r){if(vt(t,"font",["string"]),!KN(t))throw new TypeError("`font` must be one of type `StandardFonts`");var n=FS.for(t,r),i=this.context.nextRef(),c=cl.of(i,this,n);return this.fonts.push(c),c},e.prototype.embedJpg=function(t){return yn(this,void 0,void 0,function(){var r,n,i,c;return _n(this,function(d){switch(d.label){case 0:return vt(t,"jpg",["string",Uint8Array,ArrayBuffer]),r=Py(t),[4,ZW.for(r)];case 1:return n=d.sent(),i=this.context.nextRef(),c=gD.of(i,this,n),this.images.push(c),[2,c]}})})},e.prototype.embedPng=function(t){return yn(this,void 0,void 0,function(){var r,n,i,c;return _n(this,function(d){switch(d.label){case 0:return vt(t,"png",["string",Uint8Array,ArrayBuffer]),r=Py(t),[4,YW.for(r)];case 1:return n=d.sent(),i=this.context.nextRef(),c=gD.of(i,this,n),this.images.push(c),[2,c]}})})},e.prototype.embedPdf=function(t,r){return r===void 0&&(r=[0]),yn(this,void 0,void 0,function(){var n,i,c;return _n(this,function(d){switch(d.label){case 0:return vt(t,"pdf",["string",Uint8Array,ArrayBuffer,[e,"PDFDocument"]]),vt(r,"indices",[Array]),t instanceof e?(i=t,[3,3]):[3,1];case 1:return[4,e.load(t)];case 2:i=d.sent(),d.label=3;case 3:return n=i,c=XBe(n.getPages(),r),[2,this.embedPages(c)]}})})},e.prototype.embedPage=function(t,r,n){return yn(this,void 0,void 0,function(){var i;return _n(this,function(c){switch(c.label){case 0:return vt(t,"page",[[Ql,"PDFPage"]]),[4,this.embedPages([t],[r],[n])];case 1:return i=c.sent()[0],[2,i]}})})},e.prototype.embedPages=function(t,r,n){return r===void 0&&(r=[]),n===void 0&&(n=[]),yn(this,void 0,void 0,function(){var x,S,i,c,d,y,o,x,S,k,O,Q,G,K,ee;return _n(this,function(W){switch(W.label){case 0:if(t.length===0)return[2,[]];for(x=0,S=t.length-1;x<S;x++)if(i=t[x],c=t[x+1],i.node.context!==c.node.context)throw new EEe;d=t[0].node.context,y=d===this.context?function(J){return J}:tV.for(d,this.context).copy,o=new Array(t.length),x=0,S=t.length,W.label=1;case 1:return x<S?(k=y(t[x].node),O=r[x],Q=n[x],[4,eq.for(k,O,Q)]):[3,4];case 2:G=W.sent(),K=this.context.nextRef(),o[x]=Fq.of(K,this,G),W.label=3;case 3:return x++,[3,1];case 4:return(ee=this.embeddedPages).push.apply(ee,o),[2,o]}})})},e.prototype.flush=function(){return yn(this,void 0,void 0,function(){return _n(this,function(t){switch(t.label){case 0:return[4,this.embedAll(this.fonts)];case 1:return t.sent(),[4,this.embedAll(this.images)];case 2:return t.sent(),[4,this.embedAll(this.embeddedPages)];case 3:return t.sent(),[4,this.embedAll(this.embeddedFiles)];case 4:return t.sent(),[4,this.embedAll(this.javaScripts)];case 5:return t.sent(),[2]}})})},e.prototype.save=function(t){return t===void 0&&(t={}),yn(this,void 0,void 0,function(){var r,n,i,c,d,y,o,x,S,k;return _n(this,function(O){switch(O.label){case 0:return r=t.useObjectStreams,n=r===void 0?!0:r,i=t.addDefaultPage,c=i===void 0?!0:i,d=t.objectsPerTick,y=d===void 0?50:d,o=t.updateFieldAppearances,x=o===void 0?!0:o,vt(n,"useObjectStreams",["boolean"]),vt(c,"addDefaultPage",["boolean"]),vt(y,"objectsPerTick",["number"]),vt(x,"updateFieldAppearances",["boolean"]),c&&this.getPageCount()===0&&this.addPage(),x&&(S=this.formCache.getValue(),S&&S.updateFieldAppearances()),[4,this.flush()];case 1:return O.sent(),k=n?qEe:qW,[2,k.forContext(this.context,y).serializeToBuffer()]}})})},e.prototype.saveAsBase64=function(t){return t===void 0&&(t={}),yn(this,void 0,void 0,function(){var r,n,i,c,d;return _n(this,function(y){switch(y.label){case 0:return r=t.dataUri,n=r===void 0?!1:r,i=MBe(t,["dataUri"]),vt(n,"dataUri",["boolean"]),[4,this.save(i)];case 1:return c=y.sent(),d=PBe(c),[2,n?"data:application/pdf;base64,"+d:d]}})})},e.prototype.findPageForAnnotationRef=function(t){for(var r=this.getPages(),n=0,i=r.length;n<i;n++){var c=r[n],d=c.node.Annots();if((d==null?void 0:d.indexOf(t))!==void 0)return c}},e.prototype.embedAll=function(t){return yn(this,void 0,void 0,function(){var r,n;return _n(this,function(i){switch(i.label){case 0:r=0,n=t.length,i.label=1;case 1:return r<n?[4,t[r].embed()]:[3,4];case 2:i.sent(),i.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},e.prototype.updateInfoDict=function(){var t="pdf-lib (https://github.com/Hopding/pdf-lib)",r=new Date,n=this.getInfoDict();this.setProducer(t),this.setModificationDate(r),n.get(Le.of("Creator"))||this.setCreator(t),n.get(Le.of("CreationDate"))||this.setCreationDate(r)},e.prototype.getInfoDict=function(){var t=this.context.lookup(this.context.trailerInfo.Info);if(t instanceof pn)return t;var r=this.context.obj({});return this.context.trailerInfo.Info=this.context.register(r),r},e.prototype.assertFontkit=function(){if(!this.fontkit)throw new tFe;return this.fontkit},e}();function jh(e){if(!(e instanceof Jr)&&!(e instanceof ci))throw new ES([Jr,ci],e)}var dA;(function(e){e.Normal="Normal",e.Multiply="Multiply",e.Screen="Screen",e.Overlay="Overlay",e.Darken="Darken",e.Lighten="Lighten",e.ColorDodge="ColorDodge",e.ColorBurn="ColorBurn",e.HardLight="HardLight",e.SoftLight="SoftLight",e.Difference="Difference",e.Exclusion="Exclusion"})(dA||(dA={}));var Ql=function(){function e(t,r,n){this.fontSize=24,this.fontColor=Ai(0,0,0),this.lineHeight=24,this.x=0,this.y=0,vt(t,"leafNode",[[DA,"PDFPageLeaf"]]),vt(r,"ref",[[ui,"PDFRef"]]),vt(n,"doc",[[kd,"PDFDocument"]]),this.node=t,this.ref=r,this.doc=n}return e.prototype.setRotation=function(t){var r=Aq(t);HW(r,"degreesAngle",90),this.node.set(Le.of("Rotate"),this.doc.context.obj(r))},e.prototype.getRotation=function(){var t=this.node.Rotate();return $r(t?t.asNumber():0)},e.prototype.setSize=function(t,r){vt(t,"width",["number"]),vt(r,"height",["number"]);var n=this.getMediaBox();this.setMediaBox(n.x,n.y,t,r);var i=this.getCropBox(),c=this.getBleedBox(),d=this.getTrimBox(),y=this.getArtBox(),o=this.node.CropBox(),x=this.node.BleedBox(),S=this.node.TrimBox(),k=this.node.ArtBox();o&&vB(i,n)&&this.setCropBox(n.x,n.y,t,r),x&&vB(c,n)&&this.setBleedBox(n.x,n.y,t,r),S&&vB(d,n)&&this.setTrimBox(n.x,n.y,t,r),k&&vB(y,n)&&this.setArtBox(n.x,n.y,t,r)},e.prototype.setWidth=function(t){vt(t,"width",["number"]),this.setSize(t,this.getSize().height)},e.prototype.setHeight=function(t){vt(t,"height",["number"]),this.setSize(this.getSize().width,t)},e.prototype.setMediaBox=function(t,r,n,i){vt(t,"x",["number"]),vt(r,"y",["number"]),vt(n,"width",["number"]),vt(i,"height",["number"]);var c=this.doc.context.obj([t,r,t+n,r+i]);this.node.set(Le.MediaBox,c)},e.prototype.setCropBox=function(t,r,n,i){vt(t,"x",["number"]),vt(r,"y",["number"]),vt(n,"width",["number"]),vt(i,"height",["number"]);var c=this.doc.context.obj([t,r,t+n,r+i]);this.node.set(Le.CropBox,c)},e.prototype.setBleedBox=function(t,r,n,i){vt(t,"x",["number"]),vt(r,"y",["number"]),vt(n,"width",["number"]),vt(i,"height",["number"]);var c=this.doc.context.obj([t,r,t+n,r+i]);this.node.set(Le.BleedBox,c)},e.prototype.setTrimBox=function(t,r,n,i){vt(t,"x",["number"]),vt(r,"y",["number"]),vt(n,"width",["number"]),vt(i,"height",["number"]);var c=this.doc.context.obj([t,r,t+n,r+i]);this.node.set(Le.TrimBox,c)},e.prototype.setArtBox=function(t,r,n,i){vt(t,"x",["number"]),vt(r,"y",["number"]),vt(n,"width",["number"]),vt(i,"height",["number"]);var c=this.doc.context.obj([t,r,t+n,r+i]);this.node.set(Le.ArtBox,c)},e.prototype.getSize=function(){var t=this.getMediaBox(),r=t.width,n=t.height;return{width:r,height:n}},e.prototype.getWidth=function(){return this.getSize().width},e.prototype.getHeight=function(){return this.getSize().height},e.prototype.getMediaBox=function(){var t=this.node.MediaBox();return t.asRectangle()},e.prototype.getCropBox=function(){var t,r=this.node.CropBox();return(t=r==null?void 0:r.asRectangle())!==null&&t!==void 0?t:this.getMediaBox()},e.prototype.getBleedBox=function(){var t,r=this.node.BleedBox();return(t=r==null?void 0:r.asRectangle())!==null&&t!==void 0?t:this.getCropBox()},e.prototype.getTrimBox=function(){var t,r=this.node.TrimBox();return(t=r==null?void 0:r.asRectangle())!==null&&t!==void 0?t:this.getCropBox()},e.prototype.getArtBox=function(){var t,r=this.node.ArtBox();return(t=r==null?void 0:r.asRectangle())!==null&&t!==void 0?t:this.getCropBox()},e.prototype.translateContent=function(t,r){vt(t,"x",["number"]),vt(r,"y",["number"]),this.node.normalize(),this.getContentStream();var n=this.createContentStream(jo(),Gl(t,r)),i=this.doc.context.register(n),c=this.createContentStream(Go()),d=this.doc.context.register(c);this.node.wrapContentStreams(i,d)},e.prototype.scale=function(t,r){vt(t,"x",["number"]),vt(r,"y",["number"]),this.setSize(this.getWidth()*t,this.getHeight()*r),this.scaleContent(t,r),this.scaleAnnotations(t,r)},e.prototype.scaleContent=function(t,r){vt(t,"x",["number"]),vt(r,"y",["number"]),this.node.normalize(),this.getContentStream();var n=this.createContentStream(jo(),N1(t,r)),i=this.doc.context.register(n),c=this.createContentStream(Go()),d=this.doc.context.register(c);this.node.wrapContentStreams(i,d)},e.prototype.scaleAnnotations=function(t,r){vt(t,"x",["number"]),vt(r,"y",["number"]);var n=this.node.Annots();if(n)for(var i=0;i<n.size();i++){var c=n.lookup(i);c instanceof pn&&this.scaleAnnot(c,t,r)}},e.prototype.resetPosition=function(){this.getContentStream(!1),this.x=0,this.y=0},e.prototype.setFont=function(t){vt(t,"font",[[cl,"PDFFont"]]),this.font=t,this.fontKey=this.node.newFontDictionary(this.font.name,this.font.ref)},e.prototype.setFontSize=function(t){vt(t,"fontSize",["number"]),this.fontSize=t},e.prototype.setFontColor=function(t){vt(t,"fontColor",[[Object,"Color"]]),this.fontColor=t},e.prototype.setLineHeight=function(t){vt(t,"lineHeight",["number"]),this.lineHeight=t},e.prototype.getPosition=function(){return{x:this.x,y:this.y}},e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e.prototype.moveTo=function(t,r){vt(t,"x",["number"]),vt(r,"y",["number"]),this.x=t,this.y=r},e.prototype.moveDown=function(t){vt(t,"yDecrease",["number"]),this.y-=t},e.prototype.moveUp=function(t){vt(t,"yIncrease",["number"]),this.y+=t},e.prototype.moveLeft=function(t){vt(t,"xDecrease",["number"]),this.x-=t},e.prototype.moveRight=function(t){vt(t,"xIncrease",["number"]),this.x+=t},e.prototype.pushOperators=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];VW(t,"operator",[[Un,"PDFOperator"]]);var n=this.getContentStream();n.push.apply(n,t)},e.prototype.drawText=function(t,r){var n,i,c,d,y,o,x;r===void 0&&(r={}),vt(t,"text",["string"]),Jt(r.color,"options.color",[[Object,"Color"]]),Bc(r.opacity,"opacity.opacity",0,1),Jt(r.font,"options.font",[[cl,"PDFFont"]]),Jt(r.size,"options.size",["number"]),Jt(r.rotate,"options.rotate",[[Object,"Rotation"]]),Jt(r.xSkew,"options.xSkew",[[Object,"Rotation"]]),Jt(r.ySkew,"options.ySkew",[[Object,"Rotation"]]),Jt(r.x,"options.x",["number"]),Jt(r.y,"options.y",["number"]),Jt(r.lineHeight,"options.lineHeight",["number"]),Jt(r.maxWidth,"options.maxWidth",["number"]),Jt(r.wordBreaks,"options.wordBreaks",[Array]),Pl(r.blendMode,"options.blendMode",dA);for(var S=this.setOrEmbedFont(r.font),k=S.oldFont,O=S.newFont,Q=S.newFontKey,G=r.size||this.fontSize,K=r.wordBreaks||this.doc.defaultWordBreaks,ee=function(xe){return O.widthOfTextAtSize(xe,G)},W=r.maxWidth===void 0?HK(cx(t)):NBe(t,K,r.maxWidth,ee),J=new Array(W.length),re=0,ue=W.length;re<ue;re++)J[re]=O.encodeText(W[re]);var ce=this.maybeEmbedGraphicsState({opacity:r.opacity,blendMode:r.blendMode}),he=this.getContentStream();he.push.apply(he,KTe(J,{color:(n=r.color)!==null&&n!==void 0?n:this.fontColor,font:Q,size:G,rotate:(i=r.rotate)!==null&&i!==void 0?i:$r(0),xSkew:(c=r.xSkew)!==null&&c!==void 0?c:$r(0),ySkew:(d=r.ySkew)!==null&&d!==void 0?d:$r(0),x:(y=r.x)!==null&&y!==void 0?y:this.x,y:(o=r.y)!==null&&o!==void 0?o:this.y,lineHeight:(x=r.lineHeight)!==null&&x!==void 0?x:this.lineHeight,graphicsState:ce})),r.font&&(k?this.setFont(k):this.resetFont())},e.prototype.drawImage=function(t,r){var n,i,c,d,y,o,x;r===void 0&&(r={}),vt(t,"image",[[gD,"PDFImage"]]),Jt(r.x,"options.x",["number"]),Jt(r.y,"options.y",["number"]),Jt(r.width,"options.width",["number"]),Jt(r.height,"options.height",["number"]),Jt(r.rotate,"options.rotate",[[Object,"Rotation"]]),Jt(r.xSkew,"options.xSkew",[[Object,"Rotation"]]),Jt(r.ySkew,"options.ySkew",[[Object,"Rotation"]]),Bc(r.opacity,"opacity.opacity",0,1),Pl(r.blendMode,"options.blendMode",dA);var S=this.node.newXObject("Image",t.ref),k=this.maybeEmbedGraphicsState({opacity:r.opacity,blendMode:r.blendMode}),O=this.getContentStream();O.push.apply(O,bq(S,{x:(n=r.x)!==null&&n!==void 0?n:this.x,y:(i=r.y)!==null&&i!==void 0?i:this.y,width:(c=r.width)!==null&&c!==void 0?c:t.size().width,height:(d=r.height)!==null&&d!==void 0?d:t.size().height,rotate:(y=r.rotate)!==null&&y!==void 0?y:$r(0),xSkew:(o=r.xSkew)!==null&&o!==void 0?o:$r(0),ySkew:(x=r.ySkew)!==null&&x!==void 0?x:$r(0),graphicsState:k}))},e.prototype.drawPage=function(t,r){var n,i,c,d,y;r===void 0&&(r={}),vt(t,"embeddedPage",[[Fq,"PDFEmbeddedPage"]]),Jt(r.x,"options.x",["number"]),Jt(r.y,"options.y",["number"]),Jt(r.xScale,"options.xScale",["number"]),Jt(r.yScale,"options.yScale",["number"]),Jt(r.width,"options.width",["number"]),Jt(r.height,"options.height",["number"]),Jt(r.rotate,"options.rotate",[[Object,"Rotation"]]),Jt(r.xSkew,"options.xSkew",[[Object,"Rotation"]]),Jt(r.ySkew,"options.ySkew",[[Object,"Rotation"]]),Bc(r.opacity,"opacity.opacity",0,1),Pl(r.blendMode,"options.blendMode",dA);var o=this.node.newXObject("EmbeddedPdfPage",t.ref),x=this.maybeEmbedGraphicsState({opacity:r.opacity,blendMode:r.blendMode}),S=r.width!==void 0?r.width/t.width:r.xScale!==void 0?r.xScale:1,k=r.height!==void 0?r.height/t.height:r.yScale!==void 0?r.yScale:1,O=this.getContentStream();O.push.apply(O,WTe(o,{x:(n=r.x)!==null&&n!==void 0?n:this.x,y:(i=r.y)!==null&&i!==void 0?i:this.y,xScale:S,yScale:k,rotate:(c=r.rotate)!==null&&c!==void 0?c:$r(0),xSkew:(d=r.xSkew)!==null&&d!==void 0?d:$r(0),ySkew:(y=r.ySkew)!==null&&y!==void 0?y:$r(0),graphicsState:x}))},e.prototype.drawSvgPath=function(t,r){var n,i,c,d,y,o,x,S,k;r===void 0&&(r={}),vt(t,"path",["string"]),Jt(r.x,"options.x",["number"]),Jt(r.y,"options.y",["number"]),Jt(r.scale,"options.scale",["number"]),Jt(r.rotate,"options.rotate",[[Object,"Rotation"]]),Jt(r.borderWidth,"options.borderWidth",["number"]),Jt(r.color,"options.color",[[Object,"Color"]]),Bc(r.opacity,"opacity.opacity",0,1),Jt(r.borderColor,"options.borderColor",[[Object,"Color"]]),Jt(r.borderDashArray,"options.borderDashArray",[Array]),Jt(r.borderDashPhase,"options.borderDashPhase",["number"]),Pl(r.borderLineCap,"options.borderLineCap",kg),Bc(r.borderOpacity,"options.borderOpacity",0,1),Pl(r.blendMode,"options.blendMode",dA);var O=this.maybeEmbedGraphicsState({opacity:r.opacity,borderOpacity:r.borderOpacity,blendMode:r.blendMode});!("color"in r)&&!("borderColor"in r)&&(r.borderColor=Ai(0,0,0));var Q=this.getContentStream();Q.push.apply(Q,YTe(t,{x:(n=r.x)!==null&&n!==void 0?n:this.x,y:(i=r.y)!==null&&i!==void 0?i:this.y,scale:r.scale,rotate:(c=r.rotate)!==null&&c!==void 0?c:$r(0),color:(d=r.color)!==null&&d!==void 0?d:void 0,borderColor:(y=r.borderColor)!==null&&y!==void 0?y:void 0,borderWidth:(o=r.borderWidth)!==null&&o!==void 0?o:0,borderDashArray:(x=r.borderDashArray)!==null&&x!==void 0?x:void 0,borderDashPhase:(S=r.borderDashPhase)!==null&&S!==void 0?S:void 0,borderLineCap:(k=r.borderLineCap)!==null&&k!==void 0?k:void 0,graphicsState:O}))},e.prototype.drawLine=function(t){var r,n,i,c,d;vt(t.start,"options.start",[[Object,"{ x: number, y: number }"]]),vt(t.end,"options.end",[[Object,"{ x: number, y: number }"]]),vt(t.start.x,"options.start.x",["number"]),vt(t.start.y,"options.start.y",["number"]),vt(t.end.x,"options.end.x",["number"]),vt(t.end.y,"options.end.y",["number"]),Jt(t.thickness,"options.thickness",["number"]),Jt(t.color,"options.color",[[Object,"Color"]]),Jt(t.dashArray,"options.dashArray",[Array]),Jt(t.dashPhase,"options.dashPhase",["number"]),Pl(t.lineCap,"options.lineCap",kg),Bc(t.opacity,"opacity.opacity",0,1),Pl(t.blendMode,"options.blendMode",dA);var y=this.maybeEmbedGraphicsState({borderOpacity:t.opacity,blendMode:t.blendMode});"color"in t||(t.color=Ai(0,0,0));var o=this.getContentStream();o.push.apply(o,qTe({start:t.start,end:t.end,thickness:(r=t.thickness)!==null&&r!==void 0?r:1,color:(n=t.color)!==null&&n!==void 0?n:void 0,dashArray:(i=t.dashArray)!==null&&i!==void 0?i:void 0,dashPhase:(c=t.dashPhase)!==null&&c!==void 0?c:void 0,lineCap:(d=t.lineCap)!==null&&d!==void 0?d:void 0,graphicsState:y}))},e.prototype.drawRectangle=function(t){var r,n,i,c,d,y,o,x,S,k,O,Q,G;t===void 0&&(t={}),Jt(t.x,"options.x",["number"]),Jt(t.y,"options.y",["number"]),Jt(t.width,"options.width",["number"]),Jt(t.height,"options.height",["number"]),Jt(t.rotate,"options.rotate",[[Object,"Rotation"]]),Jt(t.xSkew,"options.xSkew",[[Object,"Rotation"]]),Jt(t.ySkew,"options.ySkew",[[Object,"Rotation"]]),Jt(t.borderWidth,"options.borderWidth",["number"]),Jt(t.color,"options.color",[[Object,"Color"]]),Bc(t.opacity,"opacity.opacity",0,1),Jt(t.borderColor,"options.borderColor",[[Object,"Color"]]),Jt(t.borderDashArray,"options.borderDashArray",[Array]),Jt(t.borderDashPhase,"options.borderDashPhase",["number"]),Pl(t.borderLineCap,"options.borderLineCap",kg),Bc(t.borderOpacity,"options.borderOpacity",0,1),Pl(t.blendMode,"options.blendMode",dA);var K=this.maybeEmbedGraphicsState({opacity:t.opacity,borderOpacity:t.borderOpacity,blendMode:t.blendMode});!("color"in t)&&!("borderColor"in t)&&(t.color=Ai(0,0,0));var ee=this.getContentStream();ee.push.apply(ee,v0({x:(r=t.x)!==null&&r!==void 0?r:this.x,y:(n=t.y)!==null&&n!==void 0?n:this.y,width:(i=t.width)!==null&&i!==void 0?i:150,height:(c=t.height)!==null&&c!==void 0?c:100,rotate:(d=t.rotate)!==null&&d!==void 0?d:$r(0),xSkew:(y=t.xSkew)!==null&&y!==void 0?y:$r(0),ySkew:(o=t.ySkew)!==null&&o!==void 0?o:$r(0),borderWidth:(x=t.borderWidth)!==null&&x!==void 0?x:0,color:(S=t.color)!==null&&S!==void 0?S:void 0,borderColor:(k=t.borderColor)!==null&&k!==void 0?k:void 0,borderDashArray:(O=t.borderDashArray)!==null&&O!==void 0?O:void 0,borderDashPhase:(Q=t.borderDashPhase)!==null&&Q!==void 0?Q:void 0,graphicsState:K,borderLineCap:(G=t.borderLineCap)!==null&&G!==void 0?G:void 0}))},e.prototype.drawSquare=function(t){t===void 0&&(t={});var r=t.size;Jt(r,"size",["number"]),this.drawRectangle(ln(ln({},t),{width:r,height:r}))},e.prototype.drawEllipse=function(t){var r,n,i,c,d,y,o,x,S,k,O;t===void 0&&(t={}),Jt(t.x,"options.x",["number"]),Jt(t.y,"options.y",["number"]),Jt(t.xScale,"options.xScale",["number"]),Jt(t.yScale,"options.yScale",["number"]),Jt(t.rotate,"options.rotate",[[Object,"Rotation"]]),Jt(t.color,"options.color",[[Object,"Color"]]),Bc(t.opacity,"opacity.opacity",0,1),Jt(t.borderColor,"options.borderColor",[[Object,"Color"]]),Bc(t.borderOpacity,"options.borderOpacity",0,1),Jt(t.borderWidth,"options.borderWidth",["number"]),Jt(t.borderDashArray,"options.borderDashArray",[Array]),Jt(t.borderDashPhase,"options.borderDashPhase",["number"]),Pl(t.borderLineCap,"options.borderLineCap",kg),Pl(t.blendMode,"options.blendMode",dA);var Q=this.maybeEmbedGraphicsState({opacity:t.opacity,borderOpacity:t.borderOpacity,blendMode:t.blendMode});!("color"in t)&&!("borderColor"in t)&&(t.color=Ai(0,0,0));var G=this.getContentStream();G.push.apply(G,mD({x:(r=t.x)!==null&&r!==void 0?r:this.x,y:(n=t.y)!==null&&n!==void 0?n:this.y,xScale:(i=t.xScale)!==null&&i!==void 0?i:100,yScale:(c=t.yScale)!==null&&c!==void 0?c:100,rotate:(d=t.rotate)!==null&&d!==void 0?d:void 0,color:(y=t.color)!==null&&y!==void 0?y:void 0,borderColor:(o=t.borderColor)!==null&&o!==void 0?o:void 0,borderWidth:(x=t.borderWidth)!==null&&x!==void 0?x:0,borderDashArray:(S=t.borderDashArray)!==null&&S!==void 0?S:void 0,borderDashPhase:(k=t.borderDashPhase)!==null&&k!==void 0?k:void 0,borderLineCap:(O=t.borderLineCap)!==null&&O!==void 0?O:void 0,graphicsState:Q}))},e.prototype.drawCircle=function(t){t===void 0&&(t={});var r=t.size,n=r===void 0?100:r;Jt(n,"size",["number"]),this.drawEllipse(ln(ln({},t),{xScale:n,yScale:n}))},e.prototype.setOrEmbedFont=function(t){var r=this.font,n=this.fontKey;t?this.setFont(t):this.getFont();var i=this.font,c=this.fontKey;return{oldFont:r,oldFontKey:n,newFont:i,newFontKey:c}},e.prototype.getFont=function(){if(!this.font||!this.fontKey){var t=this.doc.embedStandardFont(US.Helvetica);this.setFont(t)}return[this.font,this.fontKey]},e.prototype.resetFont=function(){this.font=void 0,this.fontKey=void 0},e.prototype.getContentStream=function(t){return t===void 0&&(t=!0),t&&this.contentStream?this.contentStream:(this.contentStream=this.createContentStream(),this.contentStreamRef=this.doc.context.register(this.contentStream),this.node.addContentStream(this.contentStreamRef),this.contentStream)},e.prototype.createContentStream=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=this.doc.context.obj({}),i=G_.of(n,t);return i},e.prototype.maybeEmbedGraphicsState=function(t){var r=t.opacity,n=t.borderOpacity,i=t.blendMode;if(!(r===void 0&&n===void 0&&i===void 0)){var c=this.doc.context.obj({Type:"ExtGState",ca:r,CA:n,BM:i}),d=this.node.newExtGState("GS",c);return d}},e.prototype.scaleAnnot=function(t,r,n){for(var i=["RD","CL","Vertices","QuadPoints","L","Rect"],c=0,d=i.length;c<d;c++){var y=t.lookup(Le.of(i[c]));y instanceof Yn&&y.scalePDFNumbers(r,n)}var o=t.lookup(Le.of("InkList"));if(o instanceof Yn)for(var c=0,d=o.size();c<d;c++){var x=o.lookup(c);x instanceof Yn&&x.scalePDFNumbers(r,n)}},e.of=function(t,r,n){return new e(t,r,n)},e.create=function(t){vt(t,"doc",[[kd,"PDFDocument"]]);var r=ui.of(-1),n=DA.withContextAndParent(t.context,r),i=t.context.register(n);return new e(n,i,t)},e}(),gC=function(e){er(t,e);function t(r,n,i){var c=e.call(this,r,n,i)||this;return vt(r,"acroButton",[[sT,"PDFAcroPushButton"]]),c.acroField=r,c}return t.prototype.setImage=function(r,n){n===void 0&&(n=Cd.Center);for(var i=this.acroField.getWidgets(),c=0,d=i.length;c<d;c++){var y=i[c],o=this.createImageAppearanceStream(y,r,n);this.updateWidgetAppearances(y,{normal:o})}this.markAsClean()},t.prototype.setFontSize=function(r){rT(r,"fontSize"),this.acroField.setFontSize(r),this.markAsDirty()},t.prototype.addToPage=function(r,n,i){var c,d,y,o,x,S,k,O,Q,G,K;Jt(r,"text",["string"]),Jt(n,"page",[[Ql,"PDFPage"]]),P0(i);var ee=this.createWidget({x:((c=i==null?void 0:i.x)!==null&&c!==void 0?c:0)-((d=i==null?void 0:i.borderWidth)!==null&&d!==void 0?d:0)/2,y:((y=i==null?void 0:i.y)!==null&&y!==void 0?y:0)-((o=i==null?void 0:i.borderWidth)!==null&&o!==void 0?o:0)/2,width:(x=i==null?void 0:i.width)!==null&&x!==void 0?x:100,height:(S=i==null?void 0:i.height)!==null&&S!==void 0?S:50,textColor:(k=i==null?void 0:i.textColor)!==null&&k!==void 0?k:Ai(0,0,0),backgroundColor:(O=i==null?void 0:i.backgroundColor)!==null&&O!==void 0?O:Ai(.75,.75,.75),borderColor:i==null?void 0:i.borderColor,borderWidth:(Q=i==null?void 0:i.borderWidth)!==null&&Q!==void 0?Q:0,rotate:(G=i==null?void 0:i.rotate)!==null&&G!==void 0?G:$r(0),caption:r,hidden:i==null?void 0:i.hidden,page:n.ref}),W=this.doc.context.register(ee.dict);this.acroField.addWidget(W);var J=(K=i==null?void 0:i.font)!==null&&K!==void 0?K:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(ee,J),n.node.addAnnot(W)},t.prototype.needsAppearancesUpdate=function(){var r;if(this.isDirty())return!0;for(var n=this.acroField.getWidgets(),i=0,c=n.length;i<c;i++){var d=n[i],y=((r=d.getAppearances())===null||r===void 0?void 0:r.normal)instanceof ol;if(!y)return!0}return!1},t.prototype.defaultUpdateAppearances=function(r){vt(r,"font",[[cl,"PDFFont"]]),this.updateAppearances(r)},t.prototype.updateAppearances=function(r,n){vt(r,"font",[[cl,"PDFFont"]]),Jt(n,"provider",[Function]);for(var i=this.acroField.getWidgets(),c=0,d=i.length;c<d;c++){var y=i[c];this.updateWidgetAppearance(y,r,n)}},t.prototype.updateWidgetAppearance=function(r,n,i){var c=i??vFe,d=M0(c(this,r,n));this.updateWidgetAppearanceWithFont(r,n,d)},t.of=function(r,n,i){return new t(r,n,i)},t}(Pp);const TFe=({value:e,summaryTableRef:t})=>{const r=Se.useRef(null),[n,i]=Se.useState(window.innerWidth);Se.useEffect(()=>{const y=()=>{i(window.innerWidth)};return window.addEventListener("resize",y),()=>{window.removeEventListener("resize",y)}},[]);const c=async()=>{if(r.current&&t.current){const y=await J3(r.current),o=await J3(t.current),x=y.toDataURL("image/png"),S=o.toDataURL("image/png"),k=await fetch("src/components/qr/qr_frame.pdf").then(He=>He.arrayBuffer()),O=await kd.load(k),Q=O.getPages()[0],{width:G,height:K}=Q.getSize(),ee=await O.embedPng(x),W=275,J=275,re=(G-W)/2,ue=(K-J)/2;Q.drawImage(ee,{x:re,y:ue,width:W,height:J});const ce=await O.embedPng(S),he=ce.size().width/4,xe=ce.size().height/4;Q.drawImage(ce,{x:20,y:20,width:he,height:xe});const fe=await O.save(),Ue=new Blob([fe],{type:"application/pdf"}),Ge=document.createElement("a");Ge.href=URL.createObjectURL(Ue),Ge.download="ccc_qr.pdf",Ge.click()}},d=()=>{window.open(e,"_blank","noopener,noreferrer")};return Je.jsxs(g2,{bg:"gray.100",borderRadius:"md",padding:1,justifyContent:"center",alignItems:"center",direction:n>1060?"row":"column",children:[Je.jsx(Li,{ref:r,position:"relative",width:"auto",display:"flex",justifyContent:"center",mb:[4,4,0],children:Je.jsx(a_e,{style:{height:"auto",width:"auto"},value:e})}),Je.jsx(Li,{position:"relative",width:n>1060?"auto":"100%",display:"flex",justifyContent:"center",alignItems:"center",padding:4,children:n>1060?Je.jsxs(C7,{spacing:4,width:"100%",children:[Je.jsx(Jh,{colorScheme:"blue",onClick:d,width:"100%",children:"Open in Browser"}),Je.jsx(Jh,{colorScheme:"orange",onClick:c,width:"100%",children:"Download as PDF"}),Je.jsx(Jh,{colorScheme:"green",width:"100%",children:"Create Marker"})]}):Je.jsxs(DE,{spacing:1,width:"100%",children:[Je.jsx(Jh,{colorScheme:"blue",onClick:d,width:"100%",size:"sm",children:"Open in Browser"}),Je.jsx(Jh,{colorScheme:"orange",onClick:c,width:"100%",size:"sm",children:"Download as PDF"}),Je.jsx(Jh,{colorScheme:"green",width:"100%",size:"sm",children:"Create Marker"})]})})]})},FFe=e=>{const t=JSON.stringify(e);return btoa(t)},IFe=async({params:e})=>{const t="http://bhp-qr-code-evolve-platform-prototype1.burnsred.com.au/",r=FFe(e),n=`${t}?params=${encodeURIComponent(r)}`;return console.log(n),n},MFe=Se.forwardRef(({selectedOperation:e,selectedControl:t,selectedControlFramework:r,selectedOperatingContext:n,selectedEquipment:i,locationCoords:c},d)=>Je.jsxs(Q7,{ref:d,variant:"simple",size:"md",children:[Je.jsx(Rme,{children:Je.jsxs(Lf,{children:[Je.jsx(EQ,{children:"Parameter"}),Je.jsx(EQ,{children:"Value"})]})}),Je.jsxs(Lme,{children:[Je.jsxs(Lf,{children:[Je.jsx(Fl,{children:"Operation"}),Je.jsx(Fl,{children:e?w9[e].site:null})]}),Je.jsxs(Lf,{children:[Je.jsx(Fl,{children:"Control"}),Je.jsx(Fl,{children:t?B9[t].label:null})]}),Je.jsxs(Lf,{children:[Je.jsx(Fl,{children:"Control Framework"}),Je.jsx(Fl,{children:t&&r?C9[t][r].control:null})]}),Je.jsxs(Lf,{children:[Je.jsx(Fl,{children:"Operating Context"}),Je.jsx(Fl,{children:r&&n?S9[r][n].operating_context:null})]}),Je.jsxs(Lf,{children:[Je.jsx(Fl,{children:"Equipment"}),Je.jsx(Fl,{children:i&&n?E9[n][i].equipment:null})]}),Je.jsxs(Lf,{children:[Je.jsx(Fl,{children:"Location"}),Je.jsx(Fl,{children:c?`${c.lat}, ${c.lng}`:null})]})]})]}));var Iq={exports:{}};(function(e,t){var r={};(function(n,i){e.exports=i()})(Qy,function(){var n,i,c;function d(o,x){if(!n)n=x;else if(!i)i=x;else{var S="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+i+")(sharedChunk); self.onerror = null;",k={};n(k),c=x(k),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(c.workerUrl=window.URL.createObjectURL(new Blob([S],{type:"text/javascript"})))}}d(["exports"],function(o){function x(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}var S,k={},O={};function Q(){if(S)return O;S=1,Object.defineProperty(O,"__esModule",{value:!0}),O.setMatrixArrayType=function(g){O.ARRAY_TYPE=a=g},O.toRadian=function(g){return g*h},O.equals=function(g,f){return Math.abs(g-f)<=A*Math.max(1,Math.abs(g),Math.abs(f))},O.RANDOM=O.ARRAY_TYPE=O.EPSILON=void 0;var A=1e-6;O.EPSILON=A;var a=typeof Float32Array<"u"?Float32Array:Array;O.ARRAY_TYPE=a;var l=Math.random;O.RANDOM=l;var h=Math.PI/180;return Math.hypot||(Math.hypot=function(){for(var g=0,f=arguments.length;f--;)g+=arguments[f]*arguments[f];return Math.sqrt(g)}),O}var G,K={};function ee(){if(G)return K;function A(f){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},A(f)}G=1,Object.defineProperty(K,"__esModule",{value:!0}),K.create=function(){var f=new a.ARRAY_TYPE(4);return a.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f},K.clone=function(f){var v=new a.ARRAY_TYPE(4);return v[0]=f[0],v[1]=f[1],v[2]=f[2],v[3]=f[3],v},K.copy=function(f,v){return f[0]=v[0],f[1]=v[1],f[2]=v[2],f[3]=v[3],f},K.identity=function(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=1,f},K.fromValues=function(f,v,B,F){var P=new a.ARRAY_TYPE(4);return P[0]=f,P[1]=v,P[2]=B,P[3]=F,P},K.set=function(f,v,B,F,P){return f[0]=v,f[1]=B,f[2]=F,f[3]=P,f},K.transpose=function(f,v){if(f===v){var B=v[1];f[1]=v[2],f[2]=B}else f[0]=v[0],f[1]=v[2],f[2]=v[1],f[3]=v[3];return f},K.invert=function(f,v){var B=v[0],F=v[1],P=v[2],b=v[3],E=B*b-P*F;return E?(f[0]=b*(E=1/E),f[1]=-F*E,f[2]=-P*E,f[3]=B*E,f):null},K.adjoint=function(f,v){var B=v[0];return f[0]=v[3],f[1]=-v[1],f[2]=-v[2],f[3]=B,f},K.determinant=function(f){return f[0]*f[3]-f[2]*f[1]},K.multiply=h,K.rotate=function(f,v,B){var F=v[0],P=v[1],b=v[2],E=v[3],M=Math.sin(B),T=Math.cos(B);return f[0]=F*T+b*M,f[1]=P*T+E*M,f[2]=F*-M+b*T,f[3]=P*-M+E*T,f},K.scale=function(f,v,B){var F=v[1],P=v[2],b=v[3],E=B[0],M=B[1];return f[0]=v[0]*E,f[1]=F*E,f[2]=P*M,f[3]=b*M,f},K.fromRotation=function(f,v){var B=Math.sin(v),F=Math.cos(v);return f[0]=F,f[1]=B,f[2]=-B,f[3]=F,f},K.fromScaling=function(f,v){return f[0]=v[0],f[1]=0,f[2]=0,f[3]=v[1],f},K.str=function(f){return"mat2("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+")"},K.frob=function(f){return Math.hypot(f[0],f[1],f[2],f[3])},K.LDU=function(f,v,B,F){return f[2]=F[2]/F[0],B[0]=F[0],B[1]=F[1],B[3]=F[3]-f[2]*B[1],[f,v,B]},K.add=function(f,v,B){return f[0]=v[0]+B[0],f[1]=v[1]+B[1],f[2]=v[2]+B[2],f[3]=v[3]+B[3],f},K.subtract=g,K.exactEquals=function(f,v){return f[0]===v[0]&&f[1]===v[1]&&f[2]===v[2]&&f[3]===v[3]},K.equals=function(f,v){var B=f[0],F=f[1],P=f[2],b=f[3],E=v[0],M=v[1],T=v[2],I=v[3];return Math.abs(B-E)<=a.EPSILON*Math.max(1,Math.abs(B),Math.abs(E))&&Math.abs(F-M)<=a.EPSILON*Math.max(1,Math.abs(F),Math.abs(M))&&Math.abs(P-T)<=a.EPSILON*Math.max(1,Math.abs(P),Math.abs(T))&&Math.abs(b-I)<=a.EPSILON*Math.max(1,Math.abs(b),Math.abs(I))},K.multiplyScalar=function(f,v,B){return f[0]=v[0]*B,f[1]=v[1]*B,f[2]=v[2]*B,f[3]=v[3]*B,f},K.multiplyScalarAndAdd=function(f,v,B,F){return f[0]=v[0]+B[0]*F,f[1]=v[1]+B[1]*F,f[2]=v[2]+B[2]*F,f[3]=v[3]+B[3]*F,f},K.sub=K.mul=void 0;var a=function(f,v){if(f&&f.__esModule)return f;if(f===null||A(f)!=="object"&&typeof f!="function")return{default:f};var B=l(void 0);if(B&&B.has(f))return B.get(f);var F={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in f)if(b!=="default"&&Object.prototype.hasOwnProperty.call(f,b)){var E=P?Object.getOwnPropertyDescriptor(f,b):null;E&&(E.get||E.set)?Object.defineProperty(F,b,E):F[b]=f[b]}return F.default=f,B&&B.set(f,F),F}(Q());function l(f){if(typeof WeakMap!="function")return null;var v=new WeakMap,B=new WeakMap;return(l=function(F){return F?B:v})(f)}function h(f,v,B){var F=v[0],P=v[1],b=v[2],E=v[3],M=B[0],T=B[1],I=B[2],R=B[3];return f[0]=F*M+b*T,f[1]=P*M+E*T,f[2]=F*I+b*R,f[3]=P*I+E*R,f}function g(f,v,B){return f[0]=v[0]-B[0],f[1]=v[1]-B[1],f[2]=v[2]-B[2],f[3]=v[3]-B[3],f}return K.mul=h,K.sub=g,K}var W,J={};function re(){if(W)return J;function A(f){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},A(f)}W=1,Object.defineProperty(J,"__esModule",{value:!0}),J.create=function(){var f=new a.ARRAY_TYPE(6);return a.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0,f[4]=0,f[5]=0),f[0]=1,f[3]=1,f},J.clone=function(f){var v=new a.ARRAY_TYPE(6);return v[0]=f[0],v[1]=f[1],v[2]=f[2],v[3]=f[3],v[4]=f[4],v[5]=f[5],v},J.copy=function(f,v){return f[0]=v[0],f[1]=v[1],f[2]=v[2],f[3]=v[3],f[4]=v[4],f[5]=v[5],f},J.identity=function(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=1,f[4]=0,f[5]=0,f},J.fromValues=function(f,v,B,F,P,b){var E=new a.ARRAY_TYPE(6);return E[0]=f,E[1]=v,E[2]=B,E[3]=F,E[4]=P,E[5]=b,E},J.set=function(f,v,B,F,P,b,E){return f[0]=v,f[1]=B,f[2]=F,f[3]=P,f[4]=b,f[5]=E,f},J.invert=function(f,v){var B=v[0],F=v[1],P=v[2],b=v[3],E=v[4],M=v[5],T=B*b-F*P;return T?(f[0]=b*(T=1/T),f[1]=-F*T,f[2]=-P*T,f[3]=B*T,f[4]=(P*M-b*E)*T,f[5]=(F*E-B*M)*T,f):null},J.determinant=function(f){return f[0]*f[3]-f[1]*f[2]},J.multiply=h,J.rotate=function(f,v,B){var F=v[0],P=v[1],b=v[2],E=v[3],M=v[4],T=v[5],I=Math.sin(B),R=Math.cos(B);return f[0]=F*R+b*I,f[1]=P*R+E*I,f[2]=F*-I+b*R,f[3]=P*-I+E*R,f[4]=M,f[5]=T,f},J.scale=function(f,v,B){var F=v[1],P=v[2],b=v[3],E=v[4],M=v[5],T=B[0],I=B[1];return f[0]=v[0]*T,f[1]=F*T,f[2]=P*I,f[3]=b*I,f[4]=E,f[5]=M,f},J.translate=function(f,v,B){var F=v[0],P=v[1],b=v[2],E=v[3],M=v[4],T=v[5],I=B[0],R=B[1];return f[0]=F,f[1]=P,f[2]=b,f[3]=E,f[4]=F*I+b*R+M,f[5]=P*I+E*R+T,f},J.fromRotation=function(f,v){var B=Math.sin(v),F=Math.cos(v);return f[0]=F,f[1]=B,f[2]=-B,f[3]=F,f[4]=0,f[5]=0,f},J.fromScaling=function(f,v){return f[0]=v[0],f[1]=0,f[2]=0,f[3]=v[1],f[4]=0,f[5]=0,f},J.fromTranslation=function(f,v){return f[0]=1,f[1]=0,f[2]=0,f[3]=1,f[4]=v[0],f[5]=v[1],f},J.str=function(f){return"mat2d("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+")"},J.frob=function(f){return Math.hypot(f[0],f[1],f[2],f[3],f[4],f[5],1)},J.add=function(f,v,B){return f[0]=v[0]+B[0],f[1]=v[1]+B[1],f[2]=v[2]+B[2],f[3]=v[3]+B[3],f[4]=v[4]+B[4],f[5]=v[5]+B[5],f},J.subtract=g,J.multiplyScalar=function(f,v,B){return f[0]=v[0]*B,f[1]=v[1]*B,f[2]=v[2]*B,f[3]=v[3]*B,f[4]=v[4]*B,f[5]=v[5]*B,f},J.multiplyScalarAndAdd=function(f,v,B,F){return f[0]=v[0]+B[0]*F,f[1]=v[1]+B[1]*F,f[2]=v[2]+B[2]*F,f[3]=v[3]+B[3]*F,f[4]=v[4]+B[4]*F,f[5]=v[5]+B[5]*F,f},J.exactEquals=function(f,v){return f[0]===v[0]&&f[1]===v[1]&&f[2]===v[2]&&f[3]===v[3]&&f[4]===v[4]&&f[5]===v[5]},J.equals=function(f,v){var B=f[0],F=f[1],P=f[2],b=f[3],E=f[4],M=f[5],T=v[0],I=v[1],R=v[2],U=v[3],V=v[4],X=v[5];return Math.abs(B-T)<=a.EPSILON*Math.max(1,Math.abs(B),Math.abs(T))&&Math.abs(F-I)<=a.EPSILON*Math.max(1,Math.abs(F),Math.abs(I))&&Math.abs(P-R)<=a.EPSILON*Math.max(1,Math.abs(P),Math.abs(R))&&Math.abs(b-U)<=a.EPSILON*Math.max(1,Math.abs(b),Math.abs(U))&&Math.abs(E-V)<=a.EPSILON*Math.max(1,Math.abs(E),Math.abs(V))&&Math.abs(M-X)<=a.EPSILON*Math.max(1,Math.abs(M),Math.abs(X))},J.sub=J.mul=void 0;var a=function(f,v){if(f&&f.__esModule)return f;if(f===null||A(f)!=="object"&&typeof f!="function")return{default:f};var B=l(void 0);if(B&&B.has(f))return B.get(f);var F={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in f)if(b!=="default"&&Object.prototype.hasOwnProperty.call(f,b)){var E=P?Object.getOwnPropertyDescriptor(f,b):null;E&&(E.get||E.set)?Object.defineProperty(F,b,E):F[b]=f[b]}return F.default=f,B&&B.set(f,F),F}(Q());function l(f){if(typeof WeakMap!="function")return null;var v=new WeakMap,B=new WeakMap;return(l=function(F){return F?B:v})(f)}function h(f,v,B){var F=v[0],P=v[1],b=v[2],E=v[3],M=v[4],T=v[5],I=B[0],R=B[1],U=B[2],V=B[3],X=B[4],Y=B[5];return f[0]=F*I+b*R,f[1]=P*I+E*R,f[2]=F*U+b*V,f[3]=P*U+E*V,f[4]=F*X+b*Y+M,f[5]=P*X+E*Y+T,f}function g(f,v,B){return f[0]=v[0]-B[0],f[1]=v[1]-B[1],f[2]=v[2]-B[2],f[3]=v[3]-B[3],f[4]=v[4]-B[4],f[5]=v[5]-B[5],f}return J.mul=h,J.sub=g,J}var ue,ce={};function he(){if(ue)return ce;function A(f){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},A(f)}ue=1,Object.defineProperty(ce,"__esModule",{value:!0}),ce.create=function(){var f=new a.ARRAY_TYPE(9);return a.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f},ce.fromMat4=function(f,v){return f[0]=v[0],f[1]=v[1],f[2]=v[2],f[3]=v[4],f[4]=v[5],f[5]=v[6],f[6]=v[8],f[7]=v[9],f[8]=v[10],f},ce.clone=function(f){var v=new a.ARRAY_TYPE(9);return v[0]=f[0],v[1]=f[1],v[2]=f[2],v[3]=f[3],v[4]=f[4],v[5]=f[5],v[6]=f[6],v[7]=f[7],v[8]=f[8],v},ce.copy=function(f,v){return f[0]=v[0],f[1]=v[1],f[2]=v[2],f[3]=v[3],f[4]=v[4],f[5]=v[5],f[6]=v[6],f[7]=v[7],f[8]=v[8],f},ce.fromValues=function(f,v,B,F,P,b,E,M,T){var I=new a.ARRAY_TYPE(9);return I[0]=f,I[1]=v,I[2]=B,I[3]=F,I[4]=P,I[5]=b,I[6]=E,I[7]=M,I[8]=T,I},ce.set=function(f,v,B,F,P,b,E,M,T,I){return f[0]=v,f[1]=B,f[2]=F,f[3]=P,f[4]=b,f[5]=E,f[6]=M,f[7]=T,f[8]=I,f},ce.identity=function(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=1,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},ce.transpose=function(f,v){if(f===v){var B=v[1],F=v[2],P=v[5];f[1]=v[3],f[2]=v[6],f[3]=B,f[5]=v[7],f[6]=F,f[7]=P}else f[0]=v[0],f[1]=v[3],f[2]=v[6],f[3]=v[1],f[4]=v[4],f[5]=v[7],f[6]=v[2],f[7]=v[5],f[8]=v[8];return f},ce.invert=function(f,v){var B=v[0],F=v[1],P=v[2],b=v[3],E=v[4],M=v[5],T=v[6],I=v[7],R=v[8],U=R*E-M*I,V=-R*b+M*T,X=I*b-E*T,Y=B*U+F*V+P*X;return Y?(f[0]=U*(Y=1/Y),f[1]=(-R*F+P*I)*Y,f[2]=(M*F-P*E)*Y,f[3]=V*Y,f[4]=(R*B-P*T)*Y,f[5]=(-M*B+P*b)*Y,f[6]=X*Y,f[7]=(-I*B+F*T)*Y,f[8]=(E*B-F*b)*Y,f):null},ce.adjoint=function(f,v){var B=v[0],F=v[1],P=v[2],b=v[3],E=v[4],M=v[5],T=v[6],I=v[7],R=v[8];return f[0]=E*R-M*I,f[1]=P*I-F*R,f[2]=F*M-P*E,f[3]=M*T-b*R,f[4]=B*R-P*T,f[5]=P*b-B*M,f[6]=b*I-E*T,f[7]=F*T-B*I,f[8]=B*E-F*b,f},ce.determinant=function(f){var v=f[3],B=f[4],F=f[5],P=f[6],b=f[7],E=f[8];return f[0]*(E*B-F*b)+f[1]*(-E*v+F*P)+f[2]*(b*v-B*P)},ce.multiply=h,ce.translate=function(f,v,B){var F=v[0],P=v[1],b=v[2],E=v[3],M=v[4],T=v[5],I=v[6],R=v[7],U=v[8],V=B[0],X=B[1];return f[0]=F,f[1]=P,f[2]=b,f[3]=E,f[4]=M,f[5]=T,f[6]=V*F+X*E+I,f[7]=V*P+X*M+R,f[8]=V*b+X*T+U,f},ce.rotate=function(f,v,B){var F=v[0],P=v[1],b=v[2],E=v[3],M=v[4],T=v[5],I=v[6],R=v[7],U=v[8],V=Math.sin(B),X=Math.cos(B);return f[0]=X*F+V*E,f[1]=X*P+V*M,f[2]=X*b+V*T,f[3]=X*E-V*F,f[4]=X*M-V*P,f[5]=X*T-V*b,f[6]=I,f[7]=R,f[8]=U,f},ce.scale=function(f,v,B){var F=B[0],P=B[1];return f[0]=F*v[0],f[1]=F*v[1],f[2]=F*v[2],f[3]=P*v[3],f[4]=P*v[4],f[5]=P*v[5],f[6]=v[6],f[7]=v[7],f[8]=v[8],f},ce.fromTranslation=function(f,v){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=1,f[5]=0,f[6]=v[0],f[7]=v[1],f[8]=1,f},ce.fromRotation=function(f,v){var B=Math.sin(v),F=Math.cos(v);return f[0]=F,f[1]=B,f[2]=0,f[3]=-B,f[4]=F,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},ce.fromScaling=function(f,v){return f[0]=v[0],f[1]=0,f[2]=0,f[3]=0,f[4]=v[1],f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},ce.fromMat2d=function(f,v){return f[0]=v[0],f[1]=v[1],f[2]=0,f[3]=v[2],f[4]=v[3],f[5]=0,f[6]=v[4],f[7]=v[5],f[8]=1,f},ce.fromQuat=function(f,v){var B=v[0],F=v[1],P=v[2],b=v[3],E=B+B,M=F+F,T=P+P,I=B*E,R=F*E,U=F*M,V=P*E,X=P*M,Y=P*T,H=b*E,$=b*M,te=b*T;return f[0]=1-U-Y,f[3]=R-te,f[6]=V+$,f[1]=R+te,f[4]=1-I-Y,f[7]=X-H,f[2]=V-$,f[5]=X+H,f[8]=1-I-U,f},ce.normalFromMat4=function(f,v){var B=v[0],F=v[1],P=v[2],b=v[3],E=v[4],M=v[5],T=v[6],I=v[7],R=v[8],U=v[9],V=v[10],X=v[11],Y=v[12],H=v[13],$=v[14],te=v[15],le=B*M-F*E,me=B*T-P*E,ve=B*I-b*E,de=F*T-P*M,Ce=F*I-b*M,_e=P*I-b*T,Te=R*H-U*Y,Oe=R*$-V*Y,Ve=R*te-X*Y,je=U*$-V*H,We=U*te-X*H,et=V*te-X*$,qe=le*et-me*We+ve*je+de*Ve-Ce*Oe+_e*Te;return qe?(f[0]=(M*et-T*We+I*je)*(qe=1/qe),f[1]=(T*Ve-E*et-I*Oe)*qe,f[2]=(E*We-M*Ve+I*Te)*qe,f[3]=(P*We-F*et-b*je)*qe,f[4]=(B*et-P*Ve+b*Oe)*qe,f[5]=(F*Ve-B*We-b*Te)*qe,f[6]=(H*_e-$*Ce+te*de)*qe,f[7]=($*ve-Y*_e-te*me)*qe,f[8]=(Y*Ce-H*ve+te*le)*qe,f):null},ce.projection=function(f,v,B){return f[0]=2/v,f[1]=0,f[2]=0,f[3]=0,f[4]=-2/B,f[5]=0,f[6]=-1,f[7]=1,f[8]=1,f},ce.str=function(f){return"mat3("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+", "+f[6]+", "+f[7]+", "+f[8]+")"},ce.frob=function(f){return Math.hypot(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8])},ce.add=function(f,v,B){return f[0]=v[0]+B[0],f[1]=v[1]+B[1],f[2]=v[2]+B[2],f[3]=v[3]+B[3],f[4]=v[4]+B[4],f[5]=v[5]+B[5],f[6]=v[6]+B[6],f[7]=v[7]+B[7],f[8]=v[8]+B[8],f},ce.subtract=g,ce.multiplyScalar=function(f,v,B){return f[0]=v[0]*B,f[1]=v[1]*B,f[2]=v[2]*B,f[3]=v[3]*B,f[4]=v[4]*B,f[5]=v[5]*B,f[6]=v[6]*B,f[7]=v[7]*B,f[8]=v[8]*B,f},ce.multiplyScalarAndAdd=function(f,v,B,F){return f[0]=v[0]+B[0]*F,f[1]=v[1]+B[1]*F,f[2]=v[2]+B[2]*F,f[3]=v[3]+B[3]*F,f[4]=v[4]+B[4]*F,f[5]=v[5]+B[5]*F,f[6]=v[6]+B[6]*F,f[7]=v[7]+B[7]*F,f[8]=v[8]+B[8]*F,f},ce.exactEquals=function(f,v){return f[0]===v[0]&&f[1]===v[1]&&f[2]===v[2]&&f[3]===v[3]&&f[4]===v[4]&&f[5]===v[5]&&f[6]===v[6]&&f[7]===v[7]&&f[8]===v[8]},ce.equals=function(f,v){var B=f[0],F=f[1],P=f[2],b=f[3],E=f[4],M=f[5],T=f[6],I=f[7],R=f[8],U=v[0],V=v[1],X=v[2],Y=v[3],H=v[4],$=v[5],te=v[6],le=v[7],me=v[8];return Math.abs(B-U)<=a.EPSILON*Math.max(1,Math.abs(B),Math.abs(U))&&Math.abs(F-V)<=a.EPSILON*Math.max(1,Math.abs(F),Math.abs(V))&&Math.abs(P-X)<=a.EPSILON*Math.max(1,Math.abs(P),Math.abs(X))&&Math.abs(b-Y)<=a.EPSILON*Math.max(1,Math.abs(b),Math.abs(Y))&&Math.abs(E-H)<=a.EPSILON*Math.max(1,Math.abs(E),Math.abs(H))&&Math.abs(M-$)<=a.EPSILON*Math.max(1,Math.abs(M),Math.abs($))&&Math.abs(T-te)<=a.EPSILON*Math.max(1,Math.abs(T),Math.abs(te))&&Math.abs(I-le)<=a.EPSILON*Math.max(1,Math.abs(I),Math.abs(le))&&Math.abs(R-me)<=a.EPSILON*Math.max(1,Math.abs(R),Math.abs(me))},ce.sub=ce.mul=void 0;var a=function(f,v){if(f&&f.__esModule)return f;if(f===null||A(f)!=="object"&&typeof f!="function")return{default:f};var B=l(void 0);if(B&&B.has(f))return B.get(f);var F={},P=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in f)if(b!=="default"&&Object.prototype.hasOwnProperty.call(f,b)){var E=P?Object.getOwnPropertyDescriptor(f,b):null;E&&(E.get||E.set)?Object.defineProperty(F,b,E):F[b]=f[b]}return F.default=f,B&&B.set(f,F),F}(Q());function l(f){if(typeof WeakMap!="function")return null;var v=new WeakMap,B=new WeakMap;return(l=function(F){return F?B:v})(f)}function h(f,v,B){var F=v[0],P=v[1],b=v[2],E=v[3],M=v[4],T=v[5],I=v[6],R=v[7],U=v[8],V=B[0],X=B[1],Y=B[2],H=B[3],$=B[4],te=B[5],le=B[6],me=B[7],ve=B[8];return f[0]=V*F+X*E+Y*I,f[1]=V*P+X*M+Y*R,f[2]=V*b+X*T+Y*U,f[3]=H*F+$*E+te*I,f[4]=H*P+$*M+te*R,f[5]=H*b+$*T+te*U,f[6]=le*F+me*E+ve*I,f[7]=le*P+me*M+ve*R,f[8]=le*b+me*T+ve*U,f}function g(f,v,B){return f[0]=v[0]-B[0],f[1]=v[1]-B[1],f[2]=v[2]-B[2],f[3]=v[3]-B[3],f[4]=v[4]-B[4],f[5]=v[5]-B[5],f[6]=v[6]-B[6],f[7]=v[7]-B[7],f[8]=v[8]-B[8],f}return ce.mul=h,ce.sub=g,ce}var xe,fe={};function Ue(){if(xe)return fe;function A(b){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},A(b)}xe=1,Object.defineProperty(fe,"__esModule",{value:!0}),fe.create=function(){var b=new a.ARRAY_TYPE(16);return a.ARRAY_TYPE!=Float32Array&&(b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[11]=0,b[12]=0,b[13]=0,b[14]=0),b[0]=1,b[5]=1,b[10]=1,b[15]=1,b},fe.clone=function(b){var E=new a.ARRAY_TYPE(16);return E[0]=b[0],E[1]=b[1],E[2]=b[2],E[3]=b[3],E[4]=b[4],E[5]=b[5],E[6]=b[6],E[7]=b[7],E[8]=b[8],E[9]=b[9],E[10]=b[10],E[11]=b[11],E[12]=b[12],E[13]=b[13],E[14]=b[14],E[15]=b[15],E},fe.copy=function(b,E){return b[0]=E[0],b[1]=E[1],b[2]=E[2],b[3]=E[3],b[4]=E[4],b[5]=E[5],b[6]=E[6],b[7]=E[7],b[8]=E[8],b[9]=E[9],b[10]=E[10],b[11]=E[11],b[12]=E[12],b[13]=E[13],b[14]=E[14],b[15]=E[15],b},fe.fromValues=function(b,E,M,T,I,R,U,V,X,Y,H,$,te,le,me,ve){var de=new a.ARRAY_TYPE(16);return de[0]=b,de[1]=E,de[2]=M,de[3]=T,de[4]=I,de[5]=R,de[6]=U,de[7]=V,de[8]=X,de[9]=Y,de[10]=H,de[11]=$,de[12]=te,de[13]=le,de[14]=me,de[15]=ve,de},fe.set=function(b,E,M,T,I,R,U,V,X,Y,H,$,te,le,me,ve,de){return b[0]=E,b[1]=M,b[2]=T,b[3]=I,b[4]=R,b[5]=U,b[6]=V,b[7]=X,b[8]=Y,b[9]=H,b[10]=$,b[11]=te,b[12]=le,b[13]=me,b[14]=ve,b[15]=de,b},fe.identity=h,fe.transpose=function(b,E){if(b===E){var M=E[1],T=E[2],I=E[3],R=E[6],U=E[7],V=E[11];b[1]=E[4],b[2]=E[8],b[3]=E[12],b[4]=M,b[6]=E[9],b[7]=E[13],b[8]=T,b[9]=R,b[11]=E[14],b[12]=I,b[13]=U,b[14]=V}else b[0]=E[0],b[1]=E[4],b[2]=E[8],b[3]=E[12],b[4]=E[1],b[5]=E[5],b[6]=E[9],b[7]=E[13],b[8]=E[2],b[9]=E[6],b[10]=E[10],b[11]=E[14],b[12]=E[3],b[13]=E[7],b[14]=E[11],b[15]=E[15];return b},fe.invert=function(b,E){var M=E[0],T=E[1],I=E[2],R=E[3],U=E[4],V=E[5],X=E[6],Y=E[7],H=E[8],$=E[9],te=E[10],le=E[11],me=E[12],ve=E[13],de=E[14],Ce=E[15],_e=M*V-T*U,Te=M*X-I*U,Oe=M*Y-R*U,Ve=T*X-I*V,je=T*Y-R*V,We=I*Y-R*X,et=H*ve-$*me,qe=H*de-te*me,At=H*Ce-le*me,xt=$*de-te*ve,at=$*Ce-le*ve,Vt=te*Ce-le*de,Ot=_e*Vt-Te*at+Oe*xt+Ve*At-je*qe+We*et;return Ot?(b[0]=(V*Vt-X*at+Y*xt)*(Ot=1/Ot),b[1]=(I*at-T*Vt-R*xt)*Ot,b[2]=(ve*We-de*je+Ce*Ve)*Ot,b[3]=(te*je-$*We-le*Ve)*Ot,b[4]=(X*At-U*Vt-Y*qe)*Ot,b[5]=(M*Vt-I*At+R*qe)*Ot,b[6]=(de*Oe-me*We-Ce*Te)*Ot,b[7]=(H*We-te*Oe+le*Te)*Ot,b[8]=(U*at-V*At+Y*et)*Ot,b[9]=(T*At-M*at-R*et)*Ot,b[10]=(me*je-ve*Oe+Ce*_e)*Ot,b[11]=($*Oe-H*je-le*_e)*Ot,b[12]=(V*qe-U*xt-X*et)*Ot,b[13]=(M*xt-T*qe+I*et)*Ot,b[14]=(ve*Te-me*Ve-de*_e)*Ot,b[15]=(H*Ve-$*Te+te*_e)*Ot,b):null},fe.adjoint=function(b,E){var M=E[0],T=E[1],I=E[2],R=E[3],U=E[4],V=E[5],X=E[6],Y=E[7],H=E[8],$=E[9],te=E[10],le=E[11],me=E[12],ve=E[13],de=E[14],Ce=E[15];return b[0]=V*(te*Ce-le*de)-$*(X*Ce-Y*de)+ve*(X*le-Y*te),b[1]=-(T*(te*Ce-le*de)-$*(I*Ce-R*de)+ve*(I*le-R*te)),b[2]=T*(X*Ce-Y*de)-V*(I*Ce-R*de)+ve*(I*Y-R*X),b[3]=-(T*(X*le-Y*te)-V*(I*le-R*te)+$*(I*Y-R*X)),b[4]=-(U*(te*Ce-le*de)-H*(X*Ce-Y*de)+me*(X*le-Y*te)),b[5]=M*(te*Ce-le*de)-H*(I*Ce-R*de)+me*(I*le-R*te),b[6]=-(M*(X*Ce-Y*de)-U*(I*Ce-R*de)+me*(I*Y-R*X)),b[7]=M*(X*le-Y*te)-U*(I*le-R*te)+H*(I*Y-R*X),b[8]=U*($*Ce-le*ve)-H*(V*Ce-Y*ve)+me*(V*le-Y*$),b[9]=-(M*($*Ce-le*ve)-H*(T*Ce-R*ve)+me*(T*le-R*$)),b[10]=M*(V*Ce-Y*ve)-U*(T*Ce-R*ve)+me*(T*Y-R*V),b[11]=-(M*(V*le-Y*$)-U*(T*le-R*$)+H*(T*Y-R*V)),b[12]=-(U*($*de-te*ve)-H*(V*de-X*ve)+me*(V*te-X*$)),b[13]=M*($*de-te*ve)-H*(T*de-I*ve)+me*(T*te-I*$),b[14]=-(M*(V*de-X*ve)-U*(T*de-I*ve)+me*(T*X-I*V)),b[15]=M*(V*te-X*$)-U*(T*te-I*$)+H*(T*X-I*V),b},fe.determinant=function(b){var E=b[0],M=b[1],T=b[2],I=b[3],R=b[4],U=b[5],V=b[6],X=b[7],Y=b[8],H=b[9],$=b[10],te=b[11],le=b[12],me=b[13],ve=b[14],de=b[15];return(E*U-M*R)*($*de-te*ve)-(E*V-T*R)*(H*de-te*me)+(E*X-I*R)*(H*ve-$*me)+(M*V-T*U)*(Y*de-te*le)-(M*X-I*U)*(Y*ve-$*le)+(T*X-I*V)*(Y*me-H*le)},fe.multiply=g,fe.translate=function(b,E,M){var T,I,R,U,V,X,Y,H,$,te,le,me,ve=M[0],de=M[1],Ce=M[2];return E===b?(b[12]=E[0]*ve+E[4]*de+E[8]*Ce+E[12],b[13]=E[1]*ve+E[5]*de+E[9]*Ce+E[13],b[14]=E[2]*ve+E[6]*de+E[10]*Ce+E[14],b[15]=E[3]*ve+E[7]*de+E[11]*Ce+E[15]):(I=E[1],R=E[2],U=E[3],V=E[4],X=E[5],Y=E[6],H=E[7],$=E[8],te=E[9],le=E[10],me=E[11],b[0]=T=E[0],b[1]=I,b[2]=R,b[3]=U,b[4]=V,b[5]=X,b[6]=Y,b[7]=H,b[8]=$,b[9]=te,b[10]=le,b[11]=me,b[12]=T*ve+V*de+$*Ce+E[12],b[13]=I*ve+X*de+te*Ce+E[13],b[14]=R*ve+Y*de+le*Ce+E[14],b[15]=U*ve+H*de+me*Ce+E[15]),b},fe.scale=function(b,E,M){var T=M[0],I=M[1],R=M[2];return b[0]=E[0]*T,b[1]=E[1]*T,b[2]=E[2]*T,b[3]=E[3]*T,b[4]=E[4]*I,b[5]=E[5]*I,b[6]=E[6]*I,b[7]=E[7]*I,b[8]=E[8]*R,b[9]=E[9]*R,b[10]=E[10]*R,b[11]=E[11]*R,b[12]=E[12],b[13]=E[13],b[14]=E[14],b[15]=E[15],b},fe.rotate=function(b,E,M,T){var I,R,U,V,X,Y,H,$,te,le,me,ve,de,Ce,_e,Te,Oe,Ve,je,We,et,qe,At,xt,at=T[0],Vt=T[1],Ot=T[2],Ft=Math.hypot(at,Vt,Ot);return Ft<a.EPSILON?null:(at*=Ft=1/Ft,Vt*=Ft,Ot*=Ft,I=Math.sin(M),R=Math.cos(M),X=E[1],Y=E[2],H=E[3],te=E[5],le=E[6],me=E[7],de=E[9],Ce=E[10],_e=E[11],Te=at*at*(U=1-R)+R,je=at*Vt*U-Ot*I,We=Vt*Vt*U+R,et=Ot*Vt*U+at*I,qe=at*Ot*U+Vt*I,At=Vt*Ot*U-at*I,xt=Ot*Ot*U+R,b[0]=(V=E[0])*Te+($=E[4])*(Oe=Vt*at*U+Ot*I)+(ve=E[8])*(Ve=Ot*at*U-Vt*I),b[1]=X*Te+te*Oe+de*Ve,b[2]=Y*Te+le*Oe+Ce*Ve,b[3]=H*Te+me*Oe+_e*Ve,b[4]=V*je+$*We+ve*et,b[5]=X*je+te*We+de*et,b[6]=Y*je+le*We+Ce*et,b[7]=H*je+me*We+_e*et,b[8]=V*qe+$*At+ve*xt,b[9]=X*qe+te*At+de*xt,b[10]=Y*qe+le*At+Ce*xt,b[11]=H*qe+me*At+_e*xt,E!==b&&(b[12]=E[12],b[13]=E[13],b[14]=E[14],b[15]=E[15]),b)},fe.rotateX=function(b,E,M){var T=Math.sin(M),I=Math.cos(M),R=E[4],U=E[5],V=E[6],X=E[7],Y=E[8],H=E[9],$=E[10],te=E[11];return E!==b&&(b[0]=E[0],b[1]=E[1],b[2]=E[2],b[3]=E[3],b[12]=E[12],b[13]=E[13],b[14]=E[14],b[15]=E[15]),b[4]=R*I+Y*T,b[5]=U*I+H*T,b[6]=V*I+$*T,b[7]=X*I+te*T,b[8]=Y*I-R*T,b[9]=H*I-U*T,b[10]=$*I-V*T,b[11]=te*I-X*T,b},fe.rotateY=function(b,E,M){var T=Math.sin(M),I=Math.cos(M),R=E[0],U=E[1],V=E[2],X=E[3],Y=E[8],H=E[9],$=E[10],te=E[11];return E!==b&&(b[4]=E[4],b[5]=E[5],b[6]=E[6],b[7]=E[7],b[12]=E[12],b[13]=E[13],b[14]=E[14],b[15]=E[15]),b[0]=R*I-Y*T,b[1]=U*I-H*T,b[2]=V*I-$*T,b[3]=X*I-te*T,b[8]=R*T+Y*I,b[9]=U*T+H*I,b[10]=V*T+$*I,b[11]=X*T+te*I,b},fe.rotateZ=function(b,E,M){var T=Math.sin(M),I=Math.cos(M),R=E[0],U=E[1],V=E[2],X=E[3],Y=E[4],H=E[5],$=E[6],te=E[7];return E!==b&&(b[8]=E[8],b[9]=E[9],b[10]=E[10],b[11]=E[11],b[12]=E[12],b[13]=E[13],b[14]=E[14],b[15]=E[15]),b[0]=R*I+Y*T,b[1]=U*I+H*T,b[2]=V*I+$*T,b[3]=X*I+te*T,b[4]=Y*I-R*T,b[5]=H*I-U*T,b[6]=$*I-V*T,b[7]=te*I-X*T,b},fe.fromTranslation=function(b,E){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=E[0],b[13]=E[1],b[14]=E[2],b[15]=1,b},fe.fromScaling=function(b,E){return b[0]=E[0],b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=E[1],b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=E[2],b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},fe.fromRotation=function(b,E,M){var T,I,R,U=M[0],V=M[1],X=M[2],Y=Math.hypot(U,V,X);return Y<a.EPSILON?null:(U*=Y=1/Y,V*=Y,X*=Y,T=Math.sin(E),I=Math.cos(E),b[0]=U*U*(R=1-I)+I,b[1]=V*U*R+X*T,b[2]=X*U*R-V*T,b[3]=0,b[4]=U*V*R-X*T,b[5]=V*V*R+I,b[6]=X*V*R+U*T,b[7]=0,b[8]=U*X*R+V*T,b[9]=V*X*R-U*T,b[10]=X*X*R+I,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b)},fe.fromXRotation=function(b,E){var M=Math.sin(E),T=Math.cos(E);return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=T,b[6]=M,b[7]=0,b[8]=0,b[9]=-M,b[10]=T,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},fe.fromYRotation=function(b,E){var M=Math.sin(E),T=Math.cos(E);return b[0]=T,b[1]=0,b[2]=-M,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=M,b[9]=0,b[10]=T,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},fe.fromZRotation=function(b,E){var M=Math.sin(E),T=Math.cos(E);return b[0]=T,b[1]=M,b[2]=0,b[3]=0,b[4]=-M,b[5]=T,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},fe.fromRotationTranslation=f,fe.fromQuat2=function(b,E){var M=new a.ARRAY_TYPE(3),T=-E[0],I=-E[1],R=-E[2],U=E[3],V=E[4],X=E[5],Y=E[6],H=E[7],$=T*T+I*I+R*R+U*U;return $>0?(M[0]=2*(V*U+H*T+X*R-Y*I)/$,M[1]=2*(X*U+H*I+Y*T-V*R)/$,M[2]=2*(Y*U+H*R+V*I-X*T)/$):(M[0]=2*(V*U+H*T+X*R-Y*I),M[1]=2*(X*U+H*I+Y*T-V*R),M[2]=2*(Y*U+H*R+V*I-X*T)),f(b,E,M),b},fe.getTranslation=function(b,E){return b[0]=E[12],b[1]=E[13],b[2]=E[14],b},fe.getScaling=v,fe.getRotation=function(b,E){var M=new a.ARRAY_TYPE(3);v(M,E);var T=1/M[0],I=1/M[1],R=1/M[2],U=E[0]*T,V=E[1]*I,X=E[2]*R,Y=E[4]*T,H=E[5]*I,$=E[6]*R,te=E[8]*T,le=E[9]*I,me=E[10]*R,ve=U+H+me,de=0;return ve>0?(de=2*Math.sqrt(ve+1),b[3]=.25*de,b[0]=($-le)/de,b[1]=(te-X)/de,b[2]=(V-Y)/de):U>H&&U>me?(de=2*Math.sqrt(1+U-H-me),b[3]=($-le)/de,b[0]=.25*de,b[1]=(V+Y)/de,b[2]=(te+X)/de):H>me?(de=2*Math.sqrt(1+H-U-me),b[3]=(te-X)/de,b[0]=(V+Y)/de,b[1]=.25*de,b[2]=($+le)/de):(de=2*Math.sqrt(1+me-U-H),b[3]=(V-Y)/de,b[0]=(te+X)/de,b[1]=($+le)/de,b[2]=.25*de),b},fe.fromRotationTranslationScale=function(b,E,M,T){var I=E[0],R=E[1],U=E[2],V=E[3],X=I+I,Y=R+R,H=U+U,$=I*X,te=I*Y,le=I*H,me=R*Y,ve=R*H,de=U*H,Ce=V*X,_e=V*Y,Te=V*H,Oe=T[0],Ve=T[1],je=T[2];return b[0]=(1-(me+de))*Oe,b[1]=(te+Te)*Oe,b[2]=(le-_e)*Oe,b[3]=0,b[4]=(te-Te)*Ve,b[5]=(1-($+de))*Ve,b[6]=(ve+Ce)*Ve,b[7]=0,b[8]=(le+_e)*je,b[9]=(ve-Ce)*je,b[10]=(1-($+me))*je,b[11]=0,b[12]=M[0],b[13]=M[1],b[14]=M[2],b[15]=1,b},fe.fromRotationTranslationScaleOrigin=function(b,E,M,T,I){var R=E[0],U=E[1],V=E[2],X=E[3],Y=R+R,H=U+U,$=V+V,te=R*Y,le=R*H,me=R*$,ve=U*H,de=U*$,Ce=V*$,_e=X*Y,Te=X*H,Oe=X*$,Ve=T[0],je=T[1],We=T[2],et=I[0],qe=I[1],At=I[2],xt=(1-(ve+Ce))*Ve,at=(le+Oe)*Ve,Vt=(me-Te)*Ve,Ot=(le-Oe)*je,Ft=(1-(te+Ce))*je,Bt=(de+_e)*je,or=(me+Te)*We,Qt=(de-_e)*We,jt=(1-(te+ve))*We;return b[0]=xt,b[1]=at,b[2]=Vt,b[3]=0,b[4]=Ot,b[5]=Ft,b[6]=Bt,b[7]=0,b[8]=or,b[9]=Qt,b[10]=jt,b[11]=0,b[12]=M[0]+et-(xt*et+Ot*qe+or*At),b[13]=M[1]+qe-(at*et+Ft*qe+Qt*At),b[14]=M[2]+At-(Vt*et+Bt*qe+jt*At),b[15]=1,b},fe.fromQuat=function(b,E){var M=E[0],T=E[1],I=E[2],R=E[3],U=M+M,V=T+T,X=I+I,Y=M*U,H=T*U,$=T*V,te=I*U,le=I*V,me=I*X,ve=R*U,de=R*V,Ce=R*X;return b[0]=1-$-me,b[1]=H+Ce,b[2]=te-de,b[3]=0,b[4]=H-Ce,b[5]=1-Y-me,b[6]=le+ve,b[7]=0,b[8]=te+de,b[9]=le-ve,b[10]=1-Y-$,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},fe.frustum=function(b,E,M,T,I,R,U){var V=1/(M-E),X=1/(I-T),Y=1/(R-U);return b[0]=2*R*V,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=2*R*X,b[6]=0,b[7]=0,b[8]=(M+E)*V,b[9]=(I+T)*X,b[10]=(U+R)*Y,b[11]=-1,b[12]=0,b[13]=0,b[14]=U*R*2*Y,b[15]=0,b},fe.perspectiveNO=B,fe.perspectiveZO=function(b,E,M,T,I){var R,U=1/Math.tan(E/2);return b[0]=U/M,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=U,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[11]=-1,b[12]=0,b[13]=0,b[15]=0,I!=null&&I!==1/0?(b[10]=I*(R=1/(T-I)),b[14]=I*T*R):(b[10]=-1,b[14]=-T),b},fe.perspectiveFromFieldOfView=function(b,E,M,T){var I=Math.tan(E.upDegrees*Math.PI/180),R=Math.tan(E.downDegrees*Math.PI/180),U=Math.tan(E.leftDegrees*Math.PI/180),V=Math.tan(E.rightDegrees*Math.PI/180),X=2/(U+V),Y=2/(I+R);return b[0]=X,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=Y,b[6]=0,b[7]=0,b[8]=-(U-V)*X*.5,b[9]=(I-R)*Y*.5,b[10]=T/(M-T),b[11]=-1,b[12]=0,b[13]=0,b[14]=T*M/(M-T),b[15]=0,b},fe.orthoNO=F,fe.orthoZO=function(b,E,M,T,I,R,U){var V=1/(E-M),X=1/(T-I),Y=1/(R-U);return b[0]=-2*V,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=-2*X,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=Y,b[11]=0,b[12]=(E+M)*V,b[13]=(I+T)*X,b[14]=R*Y,b[15]=1,b},fe.lookAt=function(b,E,M,T){var I,R,U,V,X,Y,H,$,te,le,me=E[0],ve=E[1],de=E[2],Ce=T[0],_e=T[1],Te=T[2],Oe=M[0],Ve=M[1],je=M[2];return Math.abs(me-Oe)<a.EPSILON&&Math.abs(ve-Ve)<a.EPSILON&&Math.abs(de-je)<a.EPSILON?h(b):(H=me-Oe,$=ve-Ve,te=de-je,I=_e*(te*=le=1/Math.hypot(H,$,te))-Te*($*=le),R=Te*(H*=le)-Ce*te,U=Ce*$-_e*H,(le=Math.hypot(I,R,U))?(I*=le=1/le,R*=le,U*=le):(I=0,R=0,U=0),V=$*U-te*R,X=te*I-H*U,Y=H*R-$*I,(le=Math.hypot(V,X,Y))?(V*=le=1/le,X*=le,Y*=le):(V=0,X=0,Y=0),b[0]=I,b[1]=V,b[2]=H,b[3]=0,b[4]=R,b[5]=X,b[6]=$,b[7]=0,b[8]=U,b[9]=Y,b[10]=te,b[11]=0,b[12]=-(I*me+R*ve+U*de),b[13]=-(V*me+X*ve+Y*de),b[14]=-(H*me+$*ve+te*de),b[15]=1,b)},fe.targetTo=function(b,E,M,T){var I=E[0],R=E[1],U=E[2],V=T[0],X=T[1],Y=T[2],H=I-M[0],$=R-M[1],te=U-M[2],le=H*H+$*$+te*te;le>0&&(H*=le=1/Math.sqrt(le),$*=le,te*=le);var me=X*te-Y*$,ve=Y*H-V*te,de=V*$-X*H;return(le=me*me+ve*ve+de*de)>0&&(me*=le=1/Math.sqrt(le),ve*=le,de*=le),b[0]=me,b[1]=ve,b[2]=de,b[3]=0,b[4]=$*de-te*ve,b[5]=te*me-H*de,b[6]=H*ve-$*me,b[7]=0,b[8]=H,b[9]=$,b[10]=te,b[11]=0,b[12]=I,b[13]=R,b[14]=U,b[15]=1,b},fe.str=function(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"},fe.frob=function(b){return Math.hypot(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15])},fe.add=function(b,E,M){return b[0]=E[0]+M[0],b[1]=E[1]+M[1],b[2]=E[2]+M[2],b[3]=E[3]+M[3],b[4]=E[4]+M[4],b[5]=E[5]+M[5],b[6]=E[6]+M[6],b[7]=E[7]+M[7],b[8]=E[8]+M[8],b[9]=E[9]+M[9],b[10]=E[10]+M[10],b[11]=E[11]+M[11],b[12]=E[12]+M[12],b[13]=E[13]+M[13],b[14]=E[14]+M[14],b[15]=E[15]+M[15],b},fe.subtract=P,fe.multiplyScalar=function(b,E,M){return b[0]=E[0]*M,b[1]=E[1]*M,b[2]=E[2]*M,b[3]=E[3]*M,b[4]=E[4]*M,b[5]=E[5]*M,b[6]=E[6]*M,b[7]=E[7]*M,b[8]=E[8]*M,b[9]=E[9]*M,b[10]=E[10]*M,b[11]=E[11]*M,b[12]=E[12]*M,b[13]=E[13]*M,b[14]=E[14]*M,b[15]=E[15]*M,b},fe.multiplyScalarAndAdd=function(b,E,M,T){return b[0]=E[0]+M[0]*T,b[1]=E[1]+M[1]*T,b[2]=E[2]+M[2]*T,b[3]=E[3]+M[3]*T,b[4]=E[4]+M[4]*T,b[5]=E[5]+M[5]*T,b[6]=E[6]+M[6]*T,b[7]=E[7]+M[7]*T,b[8]=E[8]+M[8]*T,b[9]=E[9]+M[9]*T,b[10]=E[10]+M[10]*T,b[11]=E[11]+M[11]*T,b[12]=E[12]+M[12]*T,b[13]=E[13]+M[13]*T,b[14]=E[14]+M[14]*T,b[15]=E[15]+M[15]*T,b},fe.exactEquals=function(b,E){return b[0]===E[0]&&b[1]===E[1]&&b[2]===E[2]&&b[3]===E[3]&&b[4]===E[4]&&b[5]===E[5]&&b[6]===E[6]&&b[7]===E[7]&&b[8]===E[8]&&b[9]===E[9]&&b[10]===E[10]&&b[11]===E[11]&&b[12]===E[12]&&b[13]===E[13]&&b[14]===E[14]&&b[15]===E[15]},fe.equals=function(b,E){var M=b[0],T=b[1],I=b[2],R=b[3],U=b[4],V=b[5],X=b[6],Y=b[7],H=b[8],$=b[9],te=b[10],le=b[11],me=b[12],ve=b[13],de=b[14],Ce=b[15],_e=E[0],Te=E[1],Oe=E[2],Ve=E[3],je=E[4],We=E[5],et=E[6],qe=E[7],At=E[8],xt=E[9],at=E[10],Vt=E[11],Ot=E[12],Ft=E[13],Bt=E[14],or=E[15];return Math.abs(M-_e)<=a.EPSILON*Math.max(1,Math.abs(M),Math.abs(_e))&&Math.abs(T-Te)<=a.EPSILON*Math.max(1,Math.abs(T),Math.abs(Te))&&Math.abs(I-Oe)<=a.EPSILON*Math.max(1,Math.abs(I),Math.abs(Oe))&&Math.abs(R-Ve)<=a.EPSILON*Math.max(1,Math.abs(R),Math.abs(Ve))&&Math.abs(U-je)<=a.EPSILON*Math.max(1,Math.abs(U),Math.abs(je))&&Math.abs(V-We)<=a.EPSILON*Math.max(1,Math.abs(V),Math.abs(We))&&Math.abs(X-et)<=a.EPSILON*Math.max(1,Math.abs(X),Math.abs(et))&&Math.abs(Y-qe)<=a.EPSILON*Math.max(1,Math.abs(Y),Math.abs(qe))&&Math.abs(H-At)<=a.EPSILON*Math.max(1,Math.abs(H),Math.abs(At))&&Math.abs($-xt)<=a.EPSILON*Math.max(1,Math.abs($),Math.abs(xt))&&Math.abs(te-at)<=a.EPSILON*Math.max(1,Math.abs(te),Math.abs(at))&&Math.abs(le-Vt)<=a.EPSILON*Math.max(1,Math.abs(le),Math.abs(Vt))&&Math.abs(me-Ot)<=a.EPSILON*Math.max(1,Math.abs(me),Math.abs(Ot))&&Math.abs(ve-Ft)<=a.EPSILON*Math.max(1,Math.abs(ve),Math.abs(Ft))&&Math.abs(de-Bt)<=a.EPSILON*Math.max(1,Math.abs(de),Math.abs(Bt))&&Math.abs(Ce-or)<=a.EPSILON*Math.max(1,Math.abs(Ce),Math.abs(or))},fe.sub=fe.mul=fe.ortho=fe.perspective=void 0;var a=function(b,E){if(b&&b.__esModule)return b;if(b===null||A(b)!=="object"&&typeof b!="function")return{default:b};var M=l(void 0);if(M&&M.has(b))return M.get(b);var T={},I=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var R in b)if(R!=="default"&&Object.prototype.hasOwnProperty.call(b,R)){var U=I?Object.getOwnPropertyDescriptor(b,R):null;U&&(U.get||U.set)?Object.defineProperty(T,R,U):T[R]=b[R]}return T.default=b,M&&M.set(b,T),T}(Q());function l(b){if(typeof WeakMap!="function")return null;var E=new WeakMap,M=new WeakMap;return(l=function(T){return T?M:E})(b)}function h(b){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}function g(b,E,M){var T=E[0],I=E[1],R=E[2],U=E[3],V=E[4],X=E[5],Y=E[6],H=E[7],$=E[8],te=E[9],le=E[10],me=E[11],ve=E[12],de=E[13],Ce=E[14],_e=E[15],Te=M[0],Oe=M[1],Ve=M[2],je=M[3];return b[0]=Te*T+Oe*V+Ve*$+je*ve,b[1]=Te*I+Oe*X+Ve*te+je*de,b[2]=Te*R+Oe*Y+Ve*le+je*Ce,b[3]=Te*U+Oe*H+Ve*me+je*_e,b[4]=(Te=M[4])*T+(Oe=M[5])*V+(Ve=M[6])*$+(je=M[7])*ve,b[5]=Te*I+Oe*X+Ve*te+je*de,b[6]=Te*R+Oe*Y+Ve*le+je*Ce,b[7]=Te*U+Oe*H+Ve*me+je*_e,b[8]=(Te=M[8])*T+(Oe=M[9])*V+(Ve=M[10])*$+(je=M[11])*ve,b[9]=Te*I+Oe*X+Ve*te+je*de,b[10]=Te*R+Oe*Y+Ve*le+je*Ce,b[11]=Te*U+Oe*H+Ve*me+je*_e,b[12]=(Te=M[12])*T+(Oe=M[13])*V+(Ve=M[14])*$+(je=M[15])*ve,b[13]=Te*I+Oe*X+Ve*te+je*de,b[14]=Te*R+Oe*Y+Ve*le+je*Ce,b[15]=Te*U+Oe*H+Ve*me+je*_e,b}function f(b,E,M){var T=E[0],I=E[1],R=E[2],U=E[3],V=T+T,X=I+I,Y=R+R,H=T*V,$=T*X,te=T*Y,le=I*X,me=I*Y,ve=R*Y,de=U*V,Ce=U*X,_e=U*Y;return b[0]=1-(le+ve),b[1]=$+_e,b[2]=te-Ce,b[3]=0,b[4]=$-_e,b[5]=1-(H+ve),b[6]=me+de,b[7]=0,b[8]=te+Ce,b[9]=me-de,b[10]=1-(H+le),b[11]=0,b[12]=M[0],b[13]=M[1],b[14]=M[2],b[15]=1,b}function v(b,E){var M=E[4],T=E[5],I=E[6],R=E[8],U=E[9],V=E[10];return b[0]=Math.hypot(E[0],E[1],E[2]),b[1]=Math.hypot(M,T,I),b[2]=Math.hypot(R,U,V),b}function B(b,E,M,T,I){var R,U=1/Math.tan(E/2);return b[0]=U/M,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=U,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[11]=-1,b[12]=0,b[13]=0,b[15]=0,I!=null&&I!==1/0?(b[10]=(I+T)*(R=1/(T-I)),b[14]=2*I*T*R):(b[10]=-1,b[14]=-2*T),b}function F(b,E,M,T,I,R,U){var V=1/(E-M),X=1/(T-I),Y=1/(R-U);return b[0]=-2*V,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=-2*X,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=2*Y,b[11]=0,b[12]=(E+M)*V,b[13]=(I+T)*X,b[14]=(U+R)*Y,b[15]=1,b}function P(b,E,M){return b[0]=E[0]-M[0],b[1]=E[1]-M[1],b[2]=E[2]-M[2],b[3]=E[3]-M[3],b[4]=E[4]-M[4],b[5]=E[5]-M[5],b[6]=E[6]-M[6],b[7]=E[7]-M[7],b[8]=E[8]-M[8],b[9]=E[9]-M[9],b[10]=E[10]-M[10],b[11]=E[11]-M[11],b[12]=E[12]-M[12],b[13]=E[13]-M[13],b[14]=E[14]-M[14],b[15]=E[15]-M[15],b}return fe.perspective=B,fe.ortho=F,fe.mul=g,fe.sub=P,fe}var Ge,He={},tt={};function pt(){if(Ge)return tt;function A(I){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},A(I)}Ge=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.create=h,tt.clone=function(I){var R=new a.ARRAY_TYPE(3);return R[0]=I[0],R[1]=I[1],R[2]=I[2],R},tt.length=g,tt.fromValues=function(I,R,U){var V=new a.ARRAY_TYPE(3);return V[0]=I,V[1]=R,V[2]=U,V},tt.copy=function(I,R){return I[0]=R[0],I[1]=R[1],I[2]=R[2],I},tt.set=function(I,R,U,V){return I[0]=R,I[1]=U,I[2]=V,I},tt.add=function(I,R,U){return I[0]=R[0]+U[0],I[1]=R[1]+U[1],I[2]=R[2]+U[2],I},tt.subtract=f,tt.multiply=v,tt.divide=B,tt.ceil=function(I,R){return I[0]=Math.ceil(R[0]),I[1]=Math.ceil(R[1]),I[2]=Math.ceil(R[2]),I},tt.floor=function(I,R){return I[0]=Math.floor(R[0]),I[1]=Math.floor(R[1]),I[2]=Math.floor(R[2]),I},tt.min=function(I,R,U){return I[0]=Math.min(R[0],U[0]),I[1]=Math.min(R[1],U[1]),I[2]=Math.min(R[2],U[2]),I},tt.max=function(I,R,U){return I[0]=Math.max(R[0],U[0]),I[1]=Math.max(R[1],U[1]),I[2]=Math.max(R[2],U[2]),I},tt.round=function(I,R){return I[0]=Math.round(R[0]),I[1]=Math.round(R[1]),I[2]=Math.round(R[2]),I},tt.scale=function(I,R,U){return I[0]=R[0]*U,I[1]=R[1]*U,I[2]=R[2]*U,I},tt.scaleAndAdd=function(I,R,U,V){return I[0]=R[0]+U[0]*V,I[1]=R[1]+U[1]*V,I[2]=R[2]+U[2]*V,I},tt.distance=F,tt.squaredDistance=P,tt.squaredLength=b,tt.negate=function(I,R){return I[0]=-R[0],I[1]=-R[1],I[2]=-R[2],I},tt.inverse=function(I,R){return I[0]=1/R[0],I[1]=1/R[1],I[2]=1/R[2],I},tt.normalize=function(I,R){var U=R[0],V=R[1],X=R[2],Y=U*U+V*V+X*X;return Y>0&&(Y=1/Math.sqrt(Y)),I[0]=R[0]*Y,I[1]=R[1]*Y,I[2]=R[2]*Y,I},tt.dot=E,tt.cross=function(I,R,U){var V=R[0],X=R[1],Y=R[2],H=U[0],$=U[1],te=U[2];return I[0]=X*te-Y*$,I[1]=Y*H-V*te,I[2]=V*$-X*H,I},tt.lerp=function(I,R,U,V){var X=R[0],Y=R[1],H=R[2];return I[0]=X+V*(U[0]-X),I[1]=Y+V*(U[1]-Y),I[2]=H+V*(U[2]-H),I},tt.hermite=function(I,R,U,V,X,Y){var H=Y*Y,$=H*(2*Y-3)+1,te=H*(Y-2)+Y,le=H*(Y-1),me=H*(3-2*Y);return I[0]=R[0]*$+U[0]*te+V[0]*le+X[0]*me,I[1]=R[1]*$+U[1]*te+V[1]*le+X[1]*me,I[2]=R[2]*$+U[2]*te+V[2]*le+X[2]*me,I},tt.bezier=function(I,R,U,V,X,Y){var H=1-Y,$=H*H,te=Y*Y,le=$*H,me=3*Y*$,ve=3*te*H,de=te*Y;return I[0]=R[0]*le+U[0]*me+V[0]*ve+X[0]*de,I[1]=R[1]*le+U[1]*me+V[1]*ve+X[1]*de,I[2]=R[2]*le+U[2]*me+V[2]*ve+X[2]*de,I},tt.random=function(I,R){R=R||1;var U=2*a.RANDOM()*Math.PI,V=2*a.RANDOM()-1,X=Math.sqrt(1-V*V)*R;return I[0]=Math.cos(U)*X,I[1]=Math.sin(U)*X,I[2]=V*R,I},tt.transformMat4=function(I,R,U){var V=R[0],X=R[1],Y=R[2],H=U[3]*V+U[7]*X+U[11]*Y+U[15];return I[0]=(U[0]*V+U[4]*X+U[8]*Y+U[12])/(H=H||1),I[1]=(U[1]*V+U[5]*X+U[9]*Y+U[13])/H,I[2]=(U[2]*V+U[6]*X+U[10]*Y+U[14])/H,I},tt.transformMat3=function(I,R,U){var V=R[0],X=R[1],Y=R[2];return I[0]=V*U[0]+X*U[3]+Y*U[6],I[1]=V*U[1]+X*U[4]+Y*U[7],I[2]=V*U[2]+X*U[5]+Y*U[8],I},tt.transformQuat=function(I,R,U){var V=U[0],X=U[1],Y=U[2],H=R[0],$=R[1],te=R[2],le=X*te-Y*$,me=Y*H-V*te,ve=V*$-X*H,de=X*ve-Y*me,Ce=Y*le-V*ve,_e=V*me-X*le,Te=2*U[3];return me*=Te,ve*=Te,Ce*=2,_e*=2,I[0]=H+(le*=Te)+(de*=2),I[1]=$+me+Ce,I[2]=te+ve+_e,I},tt.rotateX=function(I,R,U,V){var X=[],Y=[];return X[0]=R[0]-U[0],X[1]=R[1]-U[1],X[2]=R[2]-U[2],Y[0]=X[0],Y[1]=X[1]*Math.cos(V)-X[2]*Math.sin(V),Y[2]=X[1]*Math.sin(V)+X[2]*Math.cos(V),I[0]=Y[0]+U[0],I[1]=Y[1]+U[1],I[2]=Y[2]+U[2],I},tt.rotateY=function(I,R,U,V){var X=[],Y=[];return X[0]=R[0]-U[0],X[1]=R[1]-U[1],X[2]=R[2]-U[2],Y[0]=X[2]*Math.sin(V)+X[0]*Math.cos(V),Y[1]=X[1],Y[2]=X[2]*Math.cos(V)-X[0]*Math.sin(V),I[0]=Y[0]+U[0],I[1]=Y[1]+U[1],I[2]=Y[2]+U[2],I},tt.rotateZ=function(I,R,U,V){var X=[],Y=[];return X[0]=R[0]-U[0],X[1]=R[1]-U[1],X[2]=R[2]-U[2],Y[0]=X[0]*Math.cos(V)-X[1]*Math.sin(V),Y[1]=X[0]*Math.sin(V)+X[1]*Math.cos(V),Y[2]=X[2],I[0]=Y[0]+U[0],I[1]=Y[1]+U[1],I[2]=Y[2]+U[2],I},tt.angle=function(I,R){var U=I[0],V=I[1],X=I[2],Y=R[0],H=R[1],$=R[2],te=Math.sqrt(U*U+V*V+X*X)*Math.sqrt(Y*Y+H*H+$*$),le=te&&E(I,R)/te;return Math.acos(Math.min(Math.max(le,-1),1))},tt.zero=function(I){return I[0]=0,I[1]=0,I[2]=0,I},tt.str=function(I){return"vec3("+I[0]+", "+I[1]+", "+I[2]+")"},tt.exactEquals=function(I,R){return I[0]===R[0]&&I[1]===R[1]&&I[2]===R[2]},tt.equals=function(I,R){var U=I[0],V=I[1],X=I[2],Y=R[0],H=R[1],$=R[2];return Math.abs(U-Y)<=a.EPSILON*Math.max(1,Math.abs(U),Math.abs(Y))&&Math.abs(V-H)<=a.EPSILON*Math.max(1,Math.abs(V),Math.abs(H))&&Math.abs(X-$)<=a.EPSILON*Math.max(1,Math.abs(X),Math.abs($))},tt.forEach=tt.sqrLen=tt.len=tt.sqrDist=tt.dist=tt.div=tt.mul=tt.sub=void 0;var a=function(I,R){if(I&&I.__esModule)return I;if(I===null||A(I)!=="object"&&typeof I!="function")return{default:I};var U=l(void 0);if(U&&U.has(I))return U.get(I);var V={},X=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Y in I)if(Y!=="default"&&Object.prototype.hasOwnProperty.call(I,Y)){var H=X?Object.getOwnPropertyDescriptor(I,Y):null;H&&(H.get||H.set)?Object.defineProperty(V,Y,H):V[Y]=I[Y]}return V.default=I,U&&U.set(I,V),V}(Q());function l(I){if(typeof WeakMap!="function")return null;var R=new WeakMap,U=new WeakMap;return(l=function(V){return V?U:R})(I)}function h(){var I=new a.ARRAY_TYPE(3);return a.ARRAY_TYPE!=Float32Array&&(I[0]=0,I[1]=0,I[2]=0),I}function g(I){return Math.hypot(I[0],I[1],I[2])}function f(I,R,U){return I[0]=R[0]-U[0],I[1]=R[1]-U[1],I[2]=R[2]-U[2],I}function v(I,R,U){return I[0]=R[0]*U[0],I[1]=R[1]*U[1],I[2]=R[2]*U[2],I}function B(I,R,U){return I[0]=R[0]/U[0],I[1]=R[1]/U[1],I[2]=R[2]/U[2],I}function F(I,R){return Math.hypot(R[0]-I[0],R[1]-I[1],R[2]-I[2])}function P(I,R){var U=R[0]-I[0],V=R[1]-I[1],X=R[2]-I[2];return U*U+V*V+X*X}function b(I){var R=I[0],U=I[1],V=I[2];return R*R+U*U+V*V}function E(I,R){return I[0]*R[0]+I[1]*R[1]+I[2]*R[2]}tt.sub=f,tt.mul=v,tt.div=B,tt.dist=F,tt.sqrDist=P,tt.len=g,tt.sqrLen=b;var M,T=(M=h(),function(I,R,U,V,X,Y){var H,$;for(R||(R=3),U||(U=0),$=V?Math.min(V*R+U,I.length):I.length,H=U;H<$;H+=R)M[0]=I[H],M[1]=I[H+1],M[2]=I[H+2],X(M,M,Y),I[H]=M[0],I[H+1]=M[1],I[H+2]=M[2];return I});return tt.forEach=T,tt}var gt,Et,ot={};function Gt(){if(gt)return ot;function A(T){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},A(T)}gt=1,Object.defineProperty(ot,"__esModule",{value:!0}),ot.create=h,ot.clone=function(T){var I=new a.ARRAY_TYPE(4);return I[0]=T[0],I[1]=T[1],I[2]=T[2],I[3]=T[3],I},ot.fromValues=function(T,I,R,U){var V=new a.ARRAY_TYPE(4);return V[0]=T,V[1]=I,V[2]=R,V[3]=U,V},ot.copy=function(T,I){return T[0]=I[0],T[1]=I[1],T[2]=I[2],T[3]=I[3],T},ot.set=function(T,I,R,U,V){return T[0]=I,T[1]=R,T[2]=U,T[3]=V,T},ot.add=function(T,I,R){return T[0]=I[0]+R[0],T[1]=I[1]+R[1],T[2]=I[2]+R[2],T[3]=I[3]+R[3],T},ot.subtract=g,ot.multiply=f,ot.divide=v,ot.ceil=function(T,I){return T[0]=Math.ceil(I[0]),T[1]=Math.ceil(I[1]),T[2]=Math.ceil(I[2]),T[3]=Math.ceil(I[3]),T},ot.floor=function(T,I){return T[0]=Math.floor(I[0]),T[1]=Math.floor(I[1]),T[2]=Math.floor(I[2]),T[3]=Math.floor(I[3]),T},ot.min=function(T,I,R){return T[0]=Math.min(I[0],R[0]),T[1]=Math.min(I[1],R[1]),T[2]=Math.min(I[2],R[2]),T[3]=Math.min(I[3],R[3]),T},ot.max=function(T,I,R){return T[0]=Math.max(I[0],R[0]),T[1]=Math.max(I[1],R[1]),T[2]=Math.max(I[2],R[2]),T[3]=Math.max(I[3],R[3]),T},ot.round=function(T,I){return T[0]=Math.round(I[0]),T[1]=Math.round(I[1]),T[2]=Math.round(I[2]),T[3]=Math.round(I[3]),T},ot.scale=function(T,I,R){return T[0]=I[0]*R,T[1]=I[1]*R,T[2]=I[2]*R,T[3]=I[3]*R,T},ot.scaleAndAdd=function(T,I,R,U){return T[0]=I[0]+R[0]*U,T[1]=I[1]+R[1]*U,T[2]=I[2]+R[2]*U,T[3]=I[3]+R[3]*U,T},ot.distance=B,ot.squaredDistance=F,ot.length=P,ot.squaredLength=b,ot.negate=function(T,I){return T[0]=-I[0],T[1]=-I[1],T[2]=-I[2],T[3]=-I[3],T},ot.inverse=function(T,I){return T[0]=1/I[0],T[1]=1/I[1],T[2]=1/I[2],T[3]=1/I[3],T},ot.normalize=function(T,I){var R=I[0],U=I[1],V=I[2],X=I[3],Y=R*R+U*U+V*V+X*X;return Y>0&&(Y=1/Math.sqrt(Y)),T[0]=R*Y,T[1]=U*Y,T[2]=V*Y,T[3]=X*Y,T},ot.dot=function(T,I){return T[0]*I[0]+T[1]*I[1]+T[2]*I[2]+T[3]*I[3]},ot.cross=function(T,I,R,U){var V=R[0]*U[1]-R[1]*U[0],X=R[0]*U[2]-R[2]*U[0],Y=R[0]*U[3]-R[3]*U[0],H=R[1]*U[2]-R[2]*U[1],$=R[1]*U[3]-R[3]*U[1],te=R[2]*U[3]-R[3]*U[2],le=I[0],me=I[1],ve=I[2],de=I[3];return T[0]=me*te-ve*$+de*H,T[1]=-le*te+ve*Y-de*X,T[2]=le*$-me*Y+de*V,T[3]=-le*H+me*X-ve*V,T},ot.lerp=function(T,I,R,U){var V=I[0],X=I[1],Y=I[2],H=I[3];return T[0]=V+U*(R[0]-V),T[1]=X+U*(R[1]-X),T[2]=Y+U*(R[2]-Y),T[3]=H+U*(R[3]-H),T},ot.random=function(T,I){var R,U,V,X,Y,H;I=I||1;do Y=(R=2*a.RANDOM()-1)*R+(U=2*a.RANDOM()-1)*U;while(Y>=1);do H=(V=2*a.RANDOM()-1)*V+(X=2*a.RANDOM()-1)*X;while(H>=1);var $=Math.sqrt((1-Y)/H);return T[0]=I*R,T[1]=I*U,T[2]=I*V*$,T[3]=I*X*$,T},ot.transformMat4=function(T,I,R){var U=I[0],V=I[1],X=I[2],Y=I[3];return T[0]=R[0]*U+R[4]*V+R[8]*X+R[12]*Y,T[1]=R[1]*U+R[5]*V+R[9]*X+R[13]*Y,T[2]=R[2]*U+R[6]*V+R[10]*X+R[14]*Y,T[3]=R[3]*U+R[7]*V+R[11]*X+R[15]*Y,T},ot.transformQuat=function(T,I,R){var U=I[0],V=I[1],X=I[2],Y=R[0],H=R[1],$=R[2],te=R[3],le=te*U+H*X-$*V,me=te*V+$*U-Y*X,ve=te*X+Y*V-H*U,de=-Y*U-H*V-$*X;return T[0]=le*te+de*-Y+me*-$-ve*-H,T[1]=me*te+de*-H+ve*-Y-le*-$,T[2]=ve*te+de*-$+le*-H-me*-Y,T[3]=I[3],T},ot.zero=function(T){return T[0]=0,T[1]=0,T[2]=0,T[3]=0,T},ot.str=function(T){return"vec4("+T[0]+", "+T[1]+", "+T[2]+", "+T[3]+")"},ot.exactEquals=function(T,I){return T[0]===I[0]&&T[1]===I[1]&&T[2]===I[2]&&T[3]===I[3]},ot.equals=function(T,I){var R=T[0],U=T[1],V=T[2],X=T[3],Y=I[0],H=I[1],$=I[2],te=I[3];return Math.abs(R-Y)<=a.EPSILON*Math.max(1,Math.abs(R),Math.abs(Y))&&Math.abs(U-H)<=a.EPSILON*Math.max(1,Math.abs(U),Math.abs(H))&&Math.abs(V-$)<=a.EPSILON*Math.max(1,Math.abs(V),Math.abs($))&&Math.abs(X-te)<=a.EPSILON*Math.max(1,Math.abs(X),Math.abs(te))},ot.forEach=ot.sqrLen=ot.len=ot.sqrDist=ot.dist=ot.div=ot.mul=ot.sub=void 0;var a=function(T,I){if(T&&T.__esModule)return T;if(T===null||A(T)!=="object"&&typeof T!="function")return{default:T};var R=l(void 0);if(R&&R.has(T))return R.get(T);var U={},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var X in T)if(X!=="default"&&Object.prototype.hasOwnProperty.call(T,X)){var Y=V?Object.getOwnPropertyDescriptor(T,X):null;Y&&(Y.get||Y.set)?Object.defineProperty(U,X,Y):U[X]=T[X]}return U.default=T,R&&R.set(T,U),U}(Q());function l(T){if(typeof WeakMap!="function")return null;var I=new WeakMap,R=new WeakMap;return(l=function(U){return U?R:I})(T)}function h(){var T=new a.ARRAY_TYPE(4);return a.ARRAY_TYPE!=Float32Array&&(T[0]=0,T[1]=0,T[2]=0,T[3]=0),T}function g(T,I,R){return T[0]=I[0]-R[0],T[1]=I[1]-R[1],T[2]=I[2]-R[2],T[3]=I[3]-R[3],T}function f(T,I,R){return T[0]=I[0]*R[0],T[1]=I[1]*R[1],T[2]=I[2]*R[2],T[3]=I[3]*R[3],T}function v(T,I,R){return T[0]=I[0]/R[0],T[1]=I[1]/R[1],T[2]=I[2]/R[2],T[3]=I[3]/R[3],T}function B(T,I){return Math.hypot(I[0]-T[0],I[1]-T[1],I[2]-T[2],I[3]-T[3])}function F(T,I){var R=I[0]-T[0],U=I[1]-T[1],V=I[2]-T[2],X=I[3]-T[3];return R*R+U*U+V*V+X*X}function P(T){return Math.hypot(T[0],T[1],T[2],T[3])}function b(T){var I=T[0],R=T[1],U=T[2],V=T[3];return I*I+R*R+U*U+V*V}ot.sub=g,ot.mul=f,ot.div=v,ot.dist=B,ot.sqrDist=F,ot.len=P,ot.sqrLen=b;var E,M=(E=h(),function(T,I,R,U,V,X){var Y,H;for(I||(I=4),R||(R=0),H=U?Math.min(U*I+R,T.length):T.length,Y=R;Y<H;Y+=I)E[0]=T[Y],E[1]=T[Y+1],E[2]=T[Y+2],E[3]=T[Y+3],V(E,E,X),T[Y]=E[0],T[Y+1]=E[1],T[Y+2]=E[2],T[Y+3]=E[3];return T});return ot.forEach=M,ot}function Pt(){if(Et)return He;function A(_e){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Te){return typeof Te}:function(Te){return Te&&typeof Symbol=="function"&&Te.constructor===Symbol&&Te!==Symbol.prototype?"symbol":typeof Te},A(_e)}Et=1,Object.defineProperty(He,"__esModule",{value:!0}),He.create=B,He.identity=function(_e){return _e[0]=0,_e[1]=0,_e[2]=0,_e[3]=1,_e},He.setAxisAngle=F,He.getAxisAngle=function(_e,Te){var Oe=2*Math.acos(Te[3]),Ve=Math.sin(Oe/2);return Ve>a.EPSILON?(_e[0]=Te[0]/Ve,_e[1]=Te[1]/Ve,_e[2]=Te[2]/Ve):(_e[0]=1,_e[1]=0,_e[2]=0),Oe},He.getAngle=function(_e,Te){var Oe=R(_e,Te);return Math.acos(2*Oe*Oe-1)},He.multiply=P,He.rotateX=function(_e,Te,Oe){Oe*=.5;var Ve=Te[0],je=Te[1],We=Te[2],et=Te[3],qe=Math.sin(Oe),At=Math.cos(Oe);return _e[0]=Ve*At+et*qe,_e[1]=je*At+We*qe,_e[2]=We*At-je*qe,_e[3]=et*At-Ve*qe,_e},He.rotateY=function(_e,Te,Oe){Oe*=.5;var Ve=Te[0],je=Te[1],We=Te[2],et=Te[3],qe=Math.sin(Oe),At=Math.cos(Oe);return _e[0]=Ve*At-We*qe,_e[1]=je*At+et*qe,_e[2]=We*At+Ve*qe,_e[3]=et*At-je*qe,_e},He.rotateZ=function(_e,Te,Oe){Oe*=.5;var Ve=Te[0],je=Te[1],We=Te[2],et=Te[3],qe=Math.sin(Oe),At=Math.cos(Oe);return _e[0]=Ve*At+je*qe,_e[1]=je*At-Ve*qe,_e[2]=We*At+et*qe,_e[3]=et*At-We*qe,_e},He.calculateW=function(_e,Te){var Oe=Te[0],Ve=Te[1],je=Te[2];return _e[0]=Oe,_e[1]=Ve,_e[2]=je,_e[3]=Math.sqrt(Math.abs(1-Oe*Oe-Ve*Ve-je*je)),_e},He.exp=b,He.ln=E,He.pow=function(_e,Te,Oe){return E(_e,Te),I(_e,_e,Oe),b(_e,_e),_e},He.slerp=M,He.random=function(_e){var Te=a.RANDOM(),Oe=a.RANDOM(),Ve=a.RANDOM(),je=Math.sqrt(1-Te),We=Math.sqrt(Te);return _e[0]=je*Math.sin(2*Math.PI*Oe),_e[1]=je*Math.cos(2*Math.PI*Oe),_e[2]=We*Math.sin(2*Math.PI*Ve),_e[3]=We*Math.cos(2*Math.PI*Ve),_e},He.invert=function(_e,Te){var Oe=Te[0],Ve=Te[1],je=Te[2],We=Te[3],et=Oe*Oe+Ve*Ve+je*je+We*We,qe=et?1/et:0;return _e[0]=-Oe*qe,_e[1]=-Ve*qe,_e[2]=-je*qe,_e[3]=We*qe,_e},He.conjugate=function(_e,Te){return _e[0]=-Te[0],_e[1]=-Te[1],_e[2]=-Te[2],_e[3]=Te[3],_e},He.fromMat3=T,He.fromEuler=function(_e,Te,Oe,Ve){var je=.5*Math.PI/180;Te*=je,Oe*=je,Ve*=je;var We=Math.sin(Te),et=Math.cos(Te),qe=Math.sin(Oe),At=Math.cos(Oe),xt=Math.sin(Ve),at=Math.cos(Ve);return _e[0]=We*At*at-et*qe*xt,_e[1]=et*qe*at+We*At*xt,_e[2]=et*At*xt-We*qe*at,_e[3]=et*At*at+We*qe*xt,_e},He.str=function(_e){return"quat("+_e[0]+", "+_e[1]+", "+_e[2]+", "+_e[3]+")"},He.setAxes=He.sqlerp=He.rotationTo=He.equals=He.exactEquals=He.normalize=He.sqrLen=He.squaredLength=He.len=He.length=He.lerp=He.dot=He.scale=He.mul=He.add=He.set=He.copy=He.fromValues=He.clone=void 0;var a=v(Q()),l=v(he()),h=v(pt()),g=v(Gt());function f(_e){if(typeof WeakMap!="function")return null;var Te=new WeakMap,Oe=new WeakMap;return(f=function(Ve){return Ve?Oe:Te})(_e)}function v(_e,Te){if(_e&&_e.__esModule)return _e;if(_e===null||A(_e)!=="object"&&typeof _e!="function")return{default:_e};var Oe=f(Te);if(Oe&&Oe.has(_e))return Oe.get(_e);var Ve={},je=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var We in _e)if(We!=="default"&&Object.prototype.hasOwnProperty.call(_e,We)){var et=je?Object.getOwnPropertyDescriptor(_e,We):null;et&&(et.get||et.set)?Object.defineProperty(Ve,We,et):Ve[We]=_e[We]}return Ve.default=_e,Oe&&Oe.set(_e,Ve),Ve}function B(){var _e=new a.ARRAY_TYPE(4);return a.ARRAY_TYPE!=Float32Array&&(_e[0]=0,_e[1]=0,_e[2]=0),_e[3]=1,_e}function F(_e,Te,Oe){Oe*=.5;var Ve=Math.sin(Oe);return _e[0]=Ve*Te[0],_e[1]=Ve*Te[1],_e[2]=Ve*Te[2],_e[3]=Math.cos(Oe),_e}function P(_e,Te,Oe){var Ve=Te[0],je=Te[1],We=Te[2],et=Te[3],qe=Oe[0],At=Oe[1],xt=Oe[2],at=Oe[3];return _e[0]=Ve*at+et*qe+je*xt-We*At,_e[1]=je*at+et*At+We*qe-Ve*xt,_e[2]=We*at+et*xt+Ve*At-je*qe,_e[3]=et*at-Ve*qe-je*At-We*xt,_e}function b(_e,Te){var Oe=Te[0],Ve=Te[1],je=Te[2],We=Te[3],et=Math.sqrt(Oe*Oe+Ve*Ve+je*je),qe=Math.exp(We),At=et>0?qe*Math.sin(et)/et:0;return _e[0]=Oe*At,_e[1]=Ve*At,_e[2]=je*At,_e[3]=qe*Math.cos(et),_e}function E(_e,Te){var Oe=Te[0],Ve=Te[1],je=Te[2],We=Te[3],et=Math.sqrt(Oe*Oe+Ve*Ve+je*je),qe=et>0?Math.atan2(et,We)/et:0;return _e[0]=Oe*qe,_e[1]=Ve*qe,_e[2]=je*qe,_e[3]=.5*Math.log(Oe*Oe+Ve*Ve+je*je+We*We),_e}function M(_e,Te,Oe,Ve){var je,We,et,qe,At,xt=Te[0],at=Te[1],Vt=Te[2],Ot=Te[3],Ft=Oe[0],Bt=Oe[1],or=Oe[2],Qt=Oe[3];return(We=xt*Ft+at*Bt+Vt*or+Ot*Qt)<0&&(We=-We,Ft=-Ft,Bt=-Bt,or=-or,Qt=-Qt),1-We>a.EPSILON?(je=Math.acos(We),et=Math.sin(je),qe=Math.sin((1-Ve)*je)/et,At=Math.sin(Ve*je)/et):(qe=1-Ve,At=Ve),_e[0]=qe*xt+At*Ft,_e[1]=qe*at+At*Bt,_e[2]=qe*Vt+At*or,_e[3]=qe*Ot+At*Qt,_e}function T(_e,Te){var Oe,Ve=Te[0]+Te[4]+Te[8];if(Ve>0)Oe=Math.sqrt(Ve+1),_e[3]=.5*Oe,_e[0]=(Te[5]-Te[7])*(Oe=.5/Oe),_e[1]=(Te[6]-Te[2])*Oe,_e[2]=(Te[1]-Te[3])*Oe;else{var je=0;Te[4]>Te[0]&&(je=1),Te[8]>Te[3*je+je]&&(je=2);var We=(je+1)%3,et=(je+2)%3;Oe=Math.sqrt(Te[3*je+je]-Te[3*We+We]-Te[3*et+et]+1),_e[je]=.5*Oe,_e[3]=(Te[3*We+et]-Te[3*et+We])*(Oe=.5/Oe),_e[We]=(Te[3*We+je]+Te[3*je+We])*Oe,_e[et]=(Te[3*et+je]+Te[3*je+et])*Oe}return _e}He.clone=g.clone,He.fromValues=g.fromValues,He.copy=g.copy,He.set=g.set,He.add=g.add,He.mul=P;var I=g.scale;He.scale=I;var R=g.dot;He.dot=R,He.lerp=g.lerp;var U=g.length;He.length=U,He.len=U;var V=g.squaredLength;He.squaredLength=V,He.sqrLen=V;var X=g.normalize;He.normalize=X,He.exactEquals=g.exactEquals,He.equals=g.equals;var Y,H,$,te=(Y=h.create(),H=h.fromValues(1,0,0),$=h.fromValues(0,1,0),function(_e,Te,Oe){var Ve=h.dot(Te,Oe);return Ve<-.999999?(h.cross(Y,H,Te),h.len(Y)<1e-6&&h.cross(Y,$,Te),h.normalize(Y,Y),F(_e,Y,Math.PI),_e):Ve>.999999?(_e[0]=0,_e[1]=0,_e[2]=0,_e[3]=1,_e):(h.cross(Y,Te,Oe),_e[0]=Y[0],_e[1]=Y[1],_e[2]=Y[2],_e[3]=1+Ve,X(_e,_e))});He.rotationTo=te;var le,me,ve=(le=B(),me=B(),function(_e,Te,Oe,Ve,je,We){return M(le,Te,je,We),M(me,Oe,Ve,We),M(_e,le,me,2*We*(1-We)),_e});He.sqlerp=ve;var de,Ce=(de=l.create(),function(_e,Te,Oe,Ve){return de[0]=Oe[0],de[3]=Oe[1],de[6]=Oe[2],de[1]=Ve[0],de[4]=Ve[1],de[7]=Ve[2],de[2]=-Te[0],de[5]=-Te[1],de[8]=-Te[2],X(_e,T(_e,de))});return He.setAxes=Ce,He}var Xt,It={};function dr(){if(Xt)return It;function A(M){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},A(M)}Xt=1,Object.defineProperty(It,"__esModule",{value:!0}),It.create=function(){var M=new a.ARRAY_TYPE(8);return a.ARRAY_TYPE!=Float32Array&&(M[0]=0,M[1]=0,M[2]=0,M[4]=0,M[5]=0,M[6]=0,M[7]=0),M[3]=1,M},It.clone=function(M){var T=new a.ARRAY_TYPE(8);return T[0]=M[0],T[1]=M[1],T[2]=M[2],T[3]=M[3],T[4]=M[4],T[5]=M[5],T[6]=M[6],T[7]=M[7],T},It.fromValues=function(M,T,I,R,U,V,X,Y){var H=new a.ARRAY_TYPE(8);return H[0]=M,H[1]=T,H[2]=I,H[3]=R,H[4]=U,H[5]=V,H[6]=X,H[7]=Y,H},It.fromRotationTranslationValues=function(M,T,I,R,U,V,X){var Y=new a.ARRAY_TYPE(8);Y[0]=M,Y[1]=T,Y[2]=I,Y[3]=R;var H=.5*U,$=.5*V,te=.5*X;return Y[4]=H*R+$*I-te*T,Y[5]=$*R+te*M-H*I,Y[6]=te*R+H*T-$*M,Y[7]=-H*M-$*T-te*I,Y},It.fromRotationTranslation=v,It.fromTranslation=function(M,T){return M[0]=0,M[1]=0,M[2]=0,M[3]=1,M[4]=.5*T[0],M[5]=.5*T[1],M[6]=.5*T[2],M[7]=0,M},It.fromRotation=function(M,T){return M[0]=T[0],M[1]=T[1],M[2]=T[2],M[3]=T[3],M[4]=0,M[5]=0,M[6]=0,M[7]=0,M},It.fromMat4=function(M,T){var I=l.create();h.getRotation(I,T);var R=new a.ARRAY_TYPE(3);return h.getTranslation(R,T),v(M,I,R),M},It.copy=B,It.identity=function(M){return M[0]=0,M[1]=0,M[2]=0,M[3]=1,M[4]=0,M[5]=0,M[6]=0,M[7]=0,M},It.set=function(M,T,I,R,U,V,X,Y,H){return M[0]=T,M[1]=I,M[2]=R,M[3]=U,M[4]=V,M[5]=X,M[6]=Y,M[7]=H,M},It.getDual=function(M,T){return M[0]=T[4],M[1]=T[5],M[2]=T[6],M[3]=T[7],M},It.setDual=function(M,T){return M[4]=T[0],M[5]=T[1],M[6]=T[2],M[7]=T[3],M},It.getTranslation=function(M,T){var I=T[4],R=T[5],U=T[6],V=T[7],X=-T[0],Y=-T[1],H=-T[2],$=T[3];return M[0]=2*(I*$+V*X+R*H-U*Y),M[1]=2*(R*$+V*Y+U*X-I*H),M[2]=2*(U*$+V*H+I*Y-R*X),M},It.translate=function(M,T,I){var R=T[0],U=T[1],V=T[2],X=T[3],Y=.5*I[0],H=.5*I[1],$=.5*I[2],te=T[4],le=T[5],me=T[6],ve=T[7];return M[0]=R,M[1]=U,M[2]=V,M[3]=X,M[4]=X*Y+U*$-V*H+te,M[5]=X*H+V*Y-R*$+le,M[6]=X*$+R*H-U*Y+me,M[7]=-R*Y-U*H-V*$+ve,M},It.rotateX=function(M,T,I){var R=-T[0],U=-T[1],V=-T[2],X=T[3],Y=T[4],H=T[5],$=T[6],te=T[7],le=Y*X+te*R+H*V-$*U,me=H*X+te*U+$*R-Y*V,ve=$*X+te*V+Y*U-H*R,de=te*X-Y*R-H*U-$*V;return l.rotateX(M,T,I),M[4]=le*(X=M[3])+de*(R=M[0])+me*(V=M[2])-ve*(U=M[1]),M[5]=me*X+de*U+ve*R-le*V,M[6]=ve*X+de*V+le*U-me*R,M[7]=de*X-le*R-me*U-ve*V,M},It.rotateY=function(M,T,I){var R=-T[0],U=-T[1],V=-T[2],X=T[3],Y=T[4],H=T[5],$=T[6],te=T[7],le=Y*X+te*R+H*V-$*U,me=H*X+te*U+$*R-Y*V,ve=$*X+te*V+Y*U-H*R,de=te*X-Y*R-H*U-$*V;return l.rotateY(M,T,I),M[4]=le*(X=M[3])+de*(R=M[0])+me*(V=M[2])-ve*(U=M[1]),M[5]=me*X+de*U+ve*R-le*V,M[6]=ve*X+de*V+le*U-me*R,M[7]=de*X-le*R-me*U-ve*V,M},It.rotateZ=function(M,T,I){var R=-T[0],U=-T[1],V=-T[2],X=T[3],Y=T[4],H=T[5],$=T[6],te=T[7],le=Y*X+te*R+H*V-$*U,me=H*X+te*U+$*R-Y*V,ve=$*X+te*V+Y*U-H*R,de=te*X-Y*R-H*U-$*V;return l.rotateZ(M,T,I),M[4]=le*(X=M[3])+de*(R=M[0])+me*(V=M[2])-ve*(U=M[1]),M[5]=me*X+de*U+ve*R-le*V,M[6]=ve*X+de*V+le*U-me*R,M[7]=de*X-le*R-me*U-ve*V,M},It.rotateByQuatAppend=function(M,T,I){var R=I[0],U=I[1],V=I[2],X=I[3],Y=T[0],H=T[1],$=T[2],te=T[3];return M[0]=Y*X+te*R+H*V-$*U,M[1]=H*X+te*U+$*R-Y*V,M[2]=$*X+te*V+Y*U-H*R,M[3]=te*X-Y*R-H*U-$*V,M[4]=(Y=T[4])*X+(te=T[7])*R+(H=T[5])*V-($=T[6])*U,M[5]=H*X+te*U+$*R-Y*V,M[6]=$*X+te*V+Y*U-H*R,M[7]=te*X-Y*R-H*U-$*V,M},It.rotateByQuatPrepend=function(M,T,I){var R=T[0],U=T[1],V=T[2],X=T[3],Y=I[0],H=I[1],$=I[2],te=I[3];return M[0]=R*te+X*Y+U*$-V*H,M[1]=U*te+X*H+V*Y-R*$,M[2]=V*te+X*$+R*H-U*Y,M[3]=X*te-R*Y-U*H-V*$,M[4]=R*(te=I[7])+X*(Y=I[4])+U*($=I[6])-V*(H=I[5]),M[5]=U*te+X*H+V*Y-R*$,M[6]=V*te+X*$+R*H-U*Y,M[7]=X*te-R*Y-U*H-V*$,M},It.rotateAroundAxis=function(M,T,I,R){if(Math.abs(R)<a.EPSILON)return B(M,T);var U=Math.hypot(I[0],I[1],I[2]);R*=.5;var V=Math.sin(R),X=V*I[0]/U,Y=V*I[1]/U,H=V*I[2]/U,$=Math.cos(R),te=T[0],le=T[1],me=T[2],ve=T[3];M[0]=te*$+ve*X+le*H-me*Y,M[1]=le*$+ve*Y+me*X-te*H,M[2]=me*$+ve*H+te*Y-le*X,M[3]=ve*$-te*X-le*Y-me*H;var de=T[4],Ce=T[5],_e=T[6],Te=T[7];return M[4]=de*$+Te*X+Ce*H-_e*Y,M[5]=Ce*$+Te*Y+_e*X-de*H,M[6]=_e*$+Te*H+de*Y-Ce*X,M[7]=Te*$-de*X-Ce*Y-_e*H,M},It.add=function(M,T,I){return M[0]=T[0]+I[0],M[1]=T[1]+I[1],M[2]=T[2]+I[2],M[3]=T[3]+I[3],M[4]=T[4]+I[4],M[5]=T[5]+I[5],M[6]=T[6]+I[6],M[7]=T[7]+I[7],M},It.multiply=F,It.scale=function(M,T,I){return M[0]=T[0]*I,M[1]=T[1]*I,M[2]=T[2]*I,M[3]=T[3]*I,M[4]=T[4]*I,M[5]=T[5]*I,M[6]=T[6]*I,M[7]=T[7]*I,M},It.lerp=function(M,T,I,R){var U=1-R;return P(T,I)<0&&(R=-R),M[0]=T[0]*U+I[0]*R,M[1]=T[1]*U+I[1]*R,M[2]=T[2]*U+I[2]*R,M[3]=T[3]*U+I[3]*R,M[4]=T[4]*U+I[4]*R,M[5]=T[5]*U+I[5]*R,M[6]=T[6]*U+I[6]*R,M[7]=T[7]*U+I[7]*R,M},It.invert=function(M,T){var I=E(T);return M[0]=-T[0]/I,M[1]=-T[1]/I,M[2]=-T[2]/I,M[3]=T[3]/I,M[4]=-T[4]/I,M[5]=-T[5]/I,M[6]=-T[6]/I,M[7]=T[7]/I,M},It.conjugate=function(M,T){return M[0]=-T[0],M[1]=-T[1],M[2]=-T[2],M[3]=T[3],M[4]=-T[4],M[5]=-T[5],M[6]=-T[6],M[7]=T[7],M},It.normalize=function(M,T){var I=E(T);if(I>0){I=Math.sqrt(I);var R=T[0]/I,U=T[1]/I,V=T[2]/I,X=T[3]/I,Y=T[4],H=T[5],$=T[6],te=T[7],le=R*Y+U*H+V*$+X*te;M[0]=R,M[1]=U,M[2]=V,M[3]=X,M[4]=(Y-R*le)/I,M[5]=(H-U*le)/I,M[6]=($-V*le)/I,M[7]=(te-X*le)/I}return M},It.str=function(M){return"quat2("+M[0]+", "+M[1]+", "+M[2]+", "+M[3]+", "+M[4]+", "+M[5]+", "+M[6]+", "+M[7]+")"},It.exactEquals=function(M,T){return M[0]===T[0]&&M[1]===T[1]&&M[2]===T[2]&&M[3]===T[3]&&M[4]===T[4]&&M[5]===T[5]&&M[6]===T[6]&&M[7]===T[7]},It.equals=function(M,T){var I=M[0],R=M[1],U=M[2],V=M[3],X=M[4],Y=M[5],H=M[6],$=M[7],te=T[0],le=T[1],me=T[2],ve=T[3],de=T[4],Ce=T[5],_e=T[6],Te=T[7];return Math.abs(I-te)<=a.EPSILON*Math.max(1,Math.abs(I),Math.abs(te))&&Math.abs(R-le)<=a.EPSILON*Math.max(1,Math.abs(R),Math.abs(le))&&Math.abs(U-me)<=a.EPSILON*Math.max(1,Math.abs(U),Math.abs(me))&&Math.abs(V-ve)<=a.EPSILON*Math.max(1,Math.abs(V),Math.abs(ve))&&Math.abs(X-de)<=a.EPSILON*Math.max(1,Math.abs(X),Math.abs(de))&&Math.abs(Y-Ce)<=a.EPSILON*Math.max(1,Math.abs(Y),Math.abs(Ce))&&Math.abs(H-_e)<=a.EPSILON*Math.max(1,Math.abs(H),Math.abs(_e))&&Math.abs($-Te)<=a.EPSILON*Math.max(1,Math.abs($),Math.abs(Te))},It.sqrLen=It.squaredLength=It.len=It.length=It.dot=It.mul=It.setReal=It.getReal=void 0;var a=f(Q()),l=f(Pt()),h=f(Ue());function g(M){if(typeof WeakMap!="function")return null;var T=new WeakMap,I=new WeakMap;return(g=function(R){return R?I:T})(M)}function f(M,T){if(M&&M.__esModule)return M;if(M===null||A(M)!=="object"&&typeof M!="function")return{default:M};var I=g(T);if(I&&I.has(M))return I.get(M);var R={},U=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var V in M)if(V!=="default"&&Object.prototype.hasOwnProperty.call(M,V)){var X=U?Object.getOwnPropertyDescriptor(M,V):null;X&&(X.get||X.set)?Object.defineProperty(R,V,X):R[V]=M[V]}return R.default=M,I&&I.set(M,R),R}function v(M,T,I){var R=.5*I[0],U=.5*I[1],V=.5*I[2],X=T[0],Y=T[1],H=T[2],$=T[3];return M[0]=X,M[1]=Y,M[2]=H,M[3]=$,M[4]=R*$+U*H-V*Y,M[5]=U*$+V*X-R*H,M[6]=V*$+R*Y-U*X,M[7]=-R*X-U*Y-V*H,M}function B(M,T){return M[0]=T[0],M[1]=T[1],M[2]=T[2],M[3]=T[3],M[4]=T[4],M[5]=T[5],M[6]=T[6],M[7]=T[7],M}function F(M,T,I){var R=T[0],U=T[1],V=T[2],X=T[3],Y=I[4],H=I[5],$=I[6],te=I[7],le=T[4],me=T[5],ve=T[6],de=T[7],Ce=I[0],_e=I[1],Te=I[2],Oe=I[3];return M[0]=R*Oe+X*Ce+U*Te-V*_e,M[1]=U*Oe+X*_e+V*Ce-R*Te,M[2]=V*Oe+X*Te+R*_e-U*Ce,M[3]=X*Oe-R*Ce-U*_e-V*Te,M[4]=R*te+X*Y+U*$-V*H+le*Oe+de*Ce+me*Te-ve*_e,M[5]=U*te+X*H+V*Y-R*$+me*Oe+de*_e+ve*Ce-le*Te,M[6]=V*te+X*$+R*H-U*Y+ve*Oe+de*Te+le*_e-me*Ce,M[7]=X*te-R*Y-U*H-V*$+de*Oe-le*Ce-me*_e-ve*Te,M}It.getReal=l.copy,It.setReal=l.copy,It.mul=F;var P=l.dot;It.dot=P;var b=l.length;It.length=b,It.len=b;var E=l.squaredLength;return It.squaredLength=E,It.sqrLen=E,It}var ar,tr,Rt={};function Or(){if(ar)return Rt;function A(T){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},A(T)}ar=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.create=h,Rt.clone=function(T){var I=new a.ARRAY_TYPE(2);return I[0]=T[0],I[1]=T[1],I},Rt.fromValues=function(T,I){var R=new a.ARRAY_TYPE(2);return R[0]=T,R[1]=I,R},Rt.copy=function(T,I){return T[0]=I[0],T[1]=I[1],T},Rt.set=function(T,I,R){return T[0]=I,T[1]=R,T},Rt.add=function(T,I,R){return T[0]=I[0]+R[0],T[1]=I[1]+R[1],T},Rt.subtract=g,Rt.multiply=f,Rt.divide=v,Rt.ceil=function(T,I){return T[0]=Math.ceil(I[0]),T[1]=Math.ceil(I[1]),T},Rt.floor=function(T,I){return T[0]=Math.floor(I[0]),T[1]=Math.floor(I[1]),T},Rt.min=function(T,I,R){return T[0]=Math.min(I[0],R[0]),T[1]=Math.min(I[1],R[1]),T},Rt.max=function(T,I,R){return T[0]=Math.max(I[0],R[0]),T[1]=Math.max(I[1],R[1]),T},Rt.round=function(T,I){return T[0]=Math.round(I[0]),T[1]=Math.round(I[1]),T},Rt.scale=function(T,I,R){return T[0]=I[0]*R,T[1]=I[1]*R,T},Rt.scaleAndAdd=function(T,I,R,U){return T[0]=I[0]+R[0]*U,T[1]=I[1]+R[1]*U,T},Rt.distance=B,Rt.squaredDistance=F,Rt.length=P,Rt.squaredLength=b,Rt.negate=function(T,I){return T[0]=-I[0],T[1]=-I[1],T},Rt.inverse=function(T,I){return T[0]=1/I[0],T[1]=1/I[1],T},Rt.normalize=function(T,I){var R=I[0],U=I[1],V=R*R+U*U;return V>0&&(V=1/Math.sqrt(V)),T[0]=I[0]*V,T[1]=I[1]*V,T},Rt.dot=function(T,I){return T[0]*I[0]+T[1]*I[1]},Rt.cross=function(T,I,R){var U=I[0]*R[1]-I[1]*R[0];return T[0]=T[1]=0,T[2]=U,T},Rt.lerp=function(T,I,R,U){var V=I[0],X=I[1];return T[0]=V+U*(R[0]-V),T[1]=X+U*(R[1]-X),T},Rt.random=function(T,I){I=I||1;var R=2*a.RANDOM()*Math.PI;return T[0]=Math.cos(R)*I,T[1]=Math.sin(R)*I,T},Rt.transformMat2=function(T,I,R){var U=I[0],V=I[1];return T[0]=R[0]*U+R[2]*V,T[1]=R[1]*U+R[3]*V,T},Rt.transformMat2d=function(T,I,R){var U=I[0],V=I[1];return T[0]=R[0]*U+R[2]*V+R[4],T[1]=R[1]*U+R[3]*V+R[5],T},Rt.transformMat3=function(T,I,R){var U=I[0],V=I[1];return T[0]=R[0]*U+R[3]*V+R[6],T[1]=R[1]*U+R[4]*V+R[7],T},Rt.transformMat4=function(T,I,R){var U=I[0],V=I[1];return T[0]=R[0]*U+R[4]*V+R[12],T[1]=R[1]*U+R[5]*V+R[13],T},Rt.rotate=function(T,I,R,U){var V=I[0]-R[0],X=I[1]-R[1],Y=Math.sin(U),H=Math.cos(U);return T[0]=V*H-X*Y+R[0],T[1]=V*Y+X*H+R[1],T},Rt.angle=function(T,I){var R=T[0],U=T[1],V=I[0],X=I[1],Y=Math.sqrt(R*R+U*U)*Math.sqrt(V*V+X*X);return Math.acos(Math.min(Math.max(Y&&(R*V+U*X)/Y,-1),1))},Rt.zero=function(T){return T[0]=0,T[1]=0,T},Rt.str=function(T){return"vec2("+T[0]+", "+T[1]+")"},Rt.exactEquals=function(T,I){return T[0]===I[0]&&T[1]===I[1]},Rt.equals=function(T,I){var R=T[0],U=T[1],V=I[0],X=I[1];return Math.abs(R-V)<=a.EPSILON*Math.max(1,Math.abs(R),Math.abs(V))&&Math.abs(U-X)<=a.EPSILON*Math.max(1,Math.abs(U),Math.abs(X))},Rt.forEach=Rt.sqrLen=Rt.sqrDist=Rt.dist=Rt.div=Rt.mul=Rt.sub=Rt.len=void 0;var a=function(T,I){if(T&&T.__esModule)return T;if(T===null||A(T)!=="object"&&typeof T!="function")return{default:T};var R=l(void 0);if(R&&R.has(T))return R.get(T);var U={},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var X in T)if(X!=="default"&&Object.prototype.hasOwnProperty.call(T,X)){var Y=V?Object.getOwnPropertyDescriptor(T,X):null;Y&&(Y.get||Y.set)?Object.defineProperty(U,X,Y):U[X]=T[X]}return U.default=T,R&&R.set(T,U),U}(Q());function l(T){if(typeof WeakMap!="function")return null;var I=new WeakMap,R=new WeakMap;return(l=function(U){return U?R:I})(T)}function h(){var T=new a.ARRAY_TYPE(2);return a.ARRAY_TYPE!=Float32Array&&(T[0]=0,T[1]=0),T}function g(T,I,R){return T[0]=I[0]-R[0],T[1]=I[1]-R[1],T}function f(T,I,R){return T[0]=I[0]*R[0],T[1]=I[1]*R[1],T}function v(T,I,R){return T[0]=I[0]/R[0],T[1]=I[1]/R[1],T}function B(T,I){return Math.hypot(I[0]-T[0],I[1]-T[1])}function F(T,I){var R=I[0]-T[0],U=I[1]-T[1];return R*R+U*U}function P(T){return Math.hypot(T[0],T[1])}function b(T){var I=T[0],R=T[1];return I*I+R*R}Rt.len=P,Rt.sub=g,Rt.mul=f,Rt.div=v,Rt.dist=B,Rt.sqrDist=F,Rt.sqrLen=b;var E,M=(E=h(),function(T,I,R,U,V,X){var Y,H;for(I||(I=2),R||(R=0),H=U?Math.min(U*I+R,T.length):T.length,Y=R;Y<H;Y+=I)E[0]=T[Y],E[1]=T[Y+1],V(E,E,X),T[Y]=E[0],T[Y+1]=E[1];return T});return Rt.forEach=M,Rt}function Cr(){if(tr)return k;function A(T){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},A(T)}tr=1,Object.defineProperty(k,"__esModule",{value:!0}),k.vec4=k.vec3=k.vec2=k.quat2=k.quat=k.mat4=k.mat3=k.mat2d=k.mat2=k.glMatrix=void 0;var a=M(Q());k.glMatrix=a;var l=M(ee());k.mat2=l;var h=M(re());k.mat2d=h;var g=M(he());k.mat3=g;var f=M(Ue());k.mat4=f;var v=M(Pt());k.quat=v;var B=M(dr());k.quat2=B;var F=M(Or());k.vec2=F;var P=M(pt());k.vec3=P;var b=M(Gt());function E(T){if(typeof WeakMap!="function")return null;var I=new WeakMap,R=new WeakMap;return(E=function(U){return U?R:I})(T)}function M(T,I){if(T&&T.__esModule)return T;if(T===null||A(T)!=="object"&&typeof T!="function")return{default:T};var R=E(I);if(R&&R.has(T))return R.get(T);var U={},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var X in T)if(X!=="default"&&Object.prototype.hasOwnProperty.call(T,X)){var Y=V?Object.getOwnPropertyDescriptor(T,X):null;Y&&(Y.get||Y.set)?Object.defineProperty(U,X,Y):U[X]=T[X]}return U.default=T,R&&R.set(T,U),U}return k.vec4=b,k}var qr,Fr,qi,Xi,ke=Cr(),ao=function(){if(Fr)return qr;function A(a,l,h,g){this.cx=3*a,this.bx=3*(h-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(g-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=l,this.p2x=h,this.p2y=g}return Fr=1,qr=A,A.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,l){if(l===void 0&&(l=1e-6),a<0)return 0;if(a>1)return 1;for(var h=a,g=0;g<8;g++){var f=this.sampleCurveX(h)-a;if(Math.abs(f)<l)return h;var v=this.sampleCurveDerivativeX(h);if(Math.abs(v)<1e-6)break;h-=f/v}var B=0,F=1;for(h=a,g=0;g<20&&(f=this.sampleCurveX(h),!(Math.abs(f-a)<l));g++)a>f?B=h:F=h,h=.5*(F-B)+B;return h},solve:function(a,l){return this.sampleCurveY(this.solveCurveX(a,l))}},qr}(),ko=x(ao);function Sa(){if(Xi)return qi;function A(a,l){this.x=a,this.y=l}return Xi=1,qi=A,A.prototype={clone:function(){return new A(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,l){return this.clone()._rotateAround(a,l)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var l=a.x-this.x,h=a.y-this.y;return l*l+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,l){return Math.atan2(this.x*l-this.y*a,this.x*a+this.y*l)},_matMult:function(a){var l=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=l,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var l=Math.cos(a),h=Math.sin(a),g=h*this.x+l*this.y;return this.x=l*this.x-h*this.y,this.y=g,this},_rotateAround:function(a,l){var h=Math.cos(a),g=Math.sin(a),f=l.y+g*(this.x-l.x)+h*(this.y-l.y);return this.x=l.x+h*(this.x-l.x)-g*(this.y-l.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},A.convert=function(a){return a instanceof A?a:Array.isArray(a)?new A(a[0],a[1]):a},qi}var Dt=x(Sa());function Ea(A,a){if(Array.isArray(A)){if(!Array.isArray(a)||A.length!==a.length)return!1;for(let l=0;l<A.length;l++)if(!Ea(A[l],a[l]))return!1;return!0}if(typeof A=="object"&&A!==null&&a!==null){if(typeof a!="object"||Object.keys(A).length!==Object.keys(a).length)return!1;for(const l in A)if(!Ea(A[l],a[l]))return!1;return!0}return A===a}const Ei=Math.PI/180,po=180/Math.PI;function Br(A){return A*Ei}function en(A){return A*po}const Hi=[[0,0],[1,0],[1,1],[0,1]];function mo(A){if(A<=0)return 0;if(A>=1)return 1;const a=A*A,l=a*A;return 4*(A<.5?l:3*(A-a)+l-.75)}function so(A,a,l,h){const g=new ko(A,a,l,h);return function(f){return g.solve(f)}}const Wa=so(.25,.1,.25,1);function xr(A,a,l){return Math.min(l,Math.max(a,A))}function Ls(A,a,l){return(l=xr((l-A)/(a-A),0,1))*l*(3-2*l)}function Ta(A,a,l){const h=l-a,g=((A-a)%h+h)%h+a;return g===a?l:g}function ia(A,a,l){if(!A.length)return l(null,[]);let h=A.length;const g=new Array(A.length);let f=null;A.forEach((v,B)=>{a(v,(F,P)=>{F&&(f=F),g[B]=P,--h==0&&l(f,g)})})}function go(A,...a){for(const l of a)for(const h in l)A[h]=l[h];return A}let Wo=1;function Qc(){return Wo++}function Nc(A){return A<=1?1:Math.pow(2,Math.ceil(Math.log(A)/Math.LN2))}function Vc(A,a){A.forEach(l=>{a[l]&&(a[l]=a[l].bind(a))})}function Os(A,a){return A.indexOf(a,A.length-a.length)!==-1}function oa(A,a,l){const h={};for(const g in A)h[g]=a.call(this,A[g],g,A);return h}function Us(A,a,l){const h={};for(const g in A)a.call(this,A[g],g,A)&&(h[g]=A[g]);return h}function Fa(A){return Array.isArray(A)?A.map(Fa):typeof A=="object"&&A?oa(A,Fa):A}const Hc={};function tn(A){Hc[A]||(typeof console<"u"&&console.warn(A),Hc[A]=!0)}function qa(A,a,l){return(l.y-A.y)*(a.x-A.x)>(a.y-A.y)*(l.x-A.x)}function pl(A){let a=0;for(let l,h,g=0,f=A.length,v=f-1;g<f;v=g++)l=A[g],h=A[v],a+=(h.x-l.x)*(l.y+h.y);return a}function aa([A,a,l]){const h=Br(a+90),g=Br(l);return{x:A*Math.cos(h)*Math.sin(g),y:A*Math.sin(h)*Math.sin(g),z:A*Math.cos(g),azimuthal:a,polar:l}}function sa(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Qu(A){const a={};if(A.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,h,g,f)=>{const v=g||f;return a[h]=!v||v.toLowerCase(),""}),a["max-age"]){const l=parseInt(a["max-age"],10);isNaN(l)?delete a["max-age"]:a["max-age"]=l}return a}let jc,Nu=null;function oc(A,a){return[A[4*a],A[4*a+1],A[4*a+2],A[4*a+3]]}function it(A,a,l,h){for(;a<l;){const g=a+l>>1;A[g]<h?a=g+1:l=g}return a}function se(A,a,l,h){for(;a<l;){const g=a+l>>1;A[g]<=h?a=g+1:l=g}return a}function Ae(A){return A>0?1/(1.001-A):1+A}function Be(A){return A>0?1-1/(1.001-A):-A}const De={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(jc==null){const A=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{jc=r.API_URL_REGEX!=null?new RegExp(r.API_URL_REGEX):A}catch{jc=A}}return jc},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!De.API_URL)return null;try{const A=new URL(De.API_URL);return A.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":A.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function Ie(A){return De.API_URL_REGEX.test(A)}function Ke(A){return De.API_SPRITE_REGEX.test(A)}let rt,Ze,nt,dt,ut,Ct;function zt(){return rt==null&&(rt=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),rt}const Nt={now:()=>dt!==void 0?dt:performance.now(),setNow(A){dt=A},restoreNow(){dt=void 0},frame(A){const a=requestAnimationFrame(A);return{cancel:()=>cancelAnimationFrame(a)}},getImageData(A,a=0){const{width:l,height:h}=A;ut||(ut=document.createElement("canvas"));const g=ut.getContext("2d",{willReadFrequently:!0});if(!g)throw new Error("failed to create canvas 2d context");return(l>ut.width||h>ut.height)&&(ut.width=l,ut.height=h),g.clearRect(-a,-a,l+2*a,h+2*a),g.drawImage(A,0,0,l,h),g.getImageData(-a,-a,l+2*a,h+2*a)},resolveURL:A=>(Ze||(Ze=document.createElement("a")),Ze.href=A,Ze.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(nt==null&&(nt=window.matchMedia("(prefers-reduced-motion: reduce)")),nt.matches)},hasCanvasFingerprintNoise(){if(Ct!==void 0)return Ct;if(!zt())return Ct=!1,!1;const A=new OffscreenCanvas(85,1),a=A.getContext("2d",{willReadFrequently:!0});let l=0;for(let g=0;g<A.width;++g)a.fillStyle=`rgba(${l++},${l++},${l++}, 255)`,a.fillRect(g,0,1,1);const h=a.getImageData(0,0,A.width,A.height);l=0;for(let g=0;g<h.data.length;++g)if(g%4!=3&&l++!==h.data[g])return Ct=!0,!0;return Ct=!1,!1}};function hr(A,a){const l=A.indexOf("?");if(l<0)return`${A}?${new URLSearchParams(a).toString()}`;const h=new URLSearchParams(A.slice(l));for(const g in a)h.set(g,a[g]);return`${A.slice(0,l)}?${h.toString()}`}function fr(A,a={persistentParams:[]}){const l=A.indexOf("?");if(l<0)return A;const h=new URLSearchParams,g=new URLSearchParams(A.slice(l));for(const v of a.persistentParams){const B=g.get(v);B&&h.set(v,B)}const f=h.toString();return`${A.slice(0,l)}${f.length>0?`?${f}`:""}`}const yr="mapbox-tiles";let pr=500,mn=50;const gn=["language","worldview","jobid"];let Sr,un;function Kn(){try{return caches}catch{}}function Mi(){const A=Kn();A&&Sr==null&&(Sr=A.open(yr))}let yi=1/0;const Zi={supported:!1,testSupport:function(A){!qA&&zs&&(Gc?XA(A):Xa=A)}};let Xa,zs,qA=!1,Gc=!1;const Kc=typeof self<"u"?self:{};function XA(A){const a=A.createTexture();A.bindTexture(A.TEXTURE_2D,a);try{if(A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,zs),A.isContextLost())return;Zi.supported=!0}catch{}A.deleteTexture(a),qA=!0}Kc.document&&(zs=Kc.document.createElement("img"),zs.onload=function(){Xa&&XA(Xa),Xa=null,Gc=!0},zs.onerror=function(){qA=!0,Xa=null},zs.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Wc={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(Wc);class Gd extends Error{constructor(a,l,h){l===401&&Ie(h)&&(a+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(a),this.status=l,this.url=h}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Kd=sa()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,Vu=function(A,a){if(!(/^file:/.test(l=A.url)||/^file:/.test(Kd())&&!/^\w+:/.test(l))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(h,g){const f=new AbortController,v=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,referrer:Kd(),referrerPolicy:h.referrerPolicy,signal:f.signal});let B=!1,F=!1;const P=(b=v.url).indexOf("sku=")>0&&Ie(b);var b;h.type==="json"&&v.headers.set("Accept","application/json");const E=(T,I,R)=>{if(F)return;if(T&&T.message!=="SecurityError"&&tn(T.toString()),I&&R)return M(I);const U=Date.now();fetch(v).then(V=>{if(V.ok){const X=P?V.clone():null;return M(V,X,U)}return g(new Gd(V.statusText,V.status,h.url))}).catch(V=>{V.name!=="AbortError"&&g(new Error(`${V.message} ${h.url}`))})},M=(T,I,R)=>{(h.type==="arrayBuffer"?T.arrayBuffer():h.type==="json"?T.json():T.text()).then(U=>{F||(I&&R&&function(V,X,Y){if(Mi(),Sr==null)return;const H=Qu(X.headers.get("Cache-Control")||"");if(H["no-store"])return;const $={status:X.status,statusText:X.statusText,headers:new Headers};X.headers.forEach((me,ve)=>$.headers.set(ve,me)),H["max-age"]&&$.headers.set("Expires",new Date(Y+1e3*H["max-age"]).toUTCString());const te=$.headers.get("Expires");if(!te||new Date(te).getTime()-Y<42e4)return;let le=fr(V.url,{persistentParams:gn});if(X.status===206){const me=V.headers.get("Range");if(!me)return;$.status=200,le=hr(le,{range:me})}(function(me,ve){if(un===void 0)try{new Response(new ReadableStream),un=!0}catch{un=!1}un?ve(me.body):me.blob().then(ve)})(X,me=>{const ve=new Response((de=X.status)!==200&&de!==404&&[101,103,204,205,304].includes(de)?null:me,$);var de;Mi(),Sr!=null&&Sr.then(Ce=>Ce.put(le,ve)).catch(Ce=>tn(Ce.message))})}(v,I,R),B=!0,g(null,U,T.headers.get("Cache-Control"),T.headers.get("Expires")))}).catch(U=>{F||g(new Error(U.message))})};return P?function(T,I){if(Mi(),Sr==null)return I(null);Sr.then(R=>{let U=fr(T.url,{persistentParams:gn});const V=T.headers.get("Range");V&&(U=hr(U,{range:V})),R.match(U).then(X=>{const Y=function(H){if(!H)return!1;const $=new Date(H.headers.get("Expires")||0),te=Qu(H.headers.get("Cache-Control")||"");return $>Date.now()&&!te["no-cache"]}(X);R.delete(U),Y&&R.put(U,X.clone()),I(null,X,Y)}).catch(I)}).catch(I)}(v,E):E(null,null),{cancel:()=>{F=!0,B||f.abort()}}}(A,a);if(sa()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",A,a,void 0,!0)}var l;return function(h,g){const f=new XMLHttpRequest;f.open(h.method||"GET",h.url,!0),h.type==="arrayBuffer"&&(f.responseType="arraybuffer");for(const v in h.headers)f.setRequestHeader(v,h.headers[v]);return h.type==="json"&&(f.responseType="text",f.setRequestHeader("Accept","application/json")),f.withCredentials=h.credentials==="include",f.onerror=()=>{g(new Error(f.statusText))},f.onload=()=>{if((f.status>=200&&f.status<300||f.status===0)&&f.response!==null){let v=f.response;if(h.type==="json")try{v=JSON.parse(f.response)}catch(B){return g(B)}g(null,v,f.getResponseHeader("Cache-Control"),f.getResponseHeader("Expires"))}else g(new Gd(f.statusText,f.status,h.url))},f.send(h.body),{cancel:()=>f.abort()}}(A,a)},qc=function(A,a){return Vu(go(A,{type:"arrayBuffer"}),a)};function Ia(A){const a=document.createElement("a");return a.href=A,a.protocol===location.protocol&&a.host===location.host}const Za="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Ya,vo;Ya=[],vo=0;const Ma=function(A,a){if(Zi.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*"),vo>=De.MAX_PARALLEL_IMAGE_REQUESTS){const f={requestParameters:A,callback:a,cancelled:!1,cancel(){this.cancelled=!0}};return Ya.push(f),f}vo++;let l=!1;const h=()=>{if(!l)for(l=!0,vo--;Ya.length&&vo<De.MAX_PARALLEL_IMAGE_REQUESTS;){const f=Ya.shift(),{requestParameters:v,callback:B,cancelled:F}=f;F||(f.cancel=Ma(v,B).cancel)}},g=qc(A,(f,v,B,F)=>{h(),f?a(f):v&&(self.createImageBitmap?function(P,b){const E=new Blob([new Uint8Array(P)],{type:"image/png"});createImageBitmap(E).then(M=>{b(null,M)}).catch(M=>{b(new Error(`Could not load image because of ${M.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(v,(P,b)=>a(P,b,B,F)):function(P,b){const E=new Image;E.onload=()=>{b(null,E),URL.revokeObjectURL(E.src),E.onload=null,requestAnimationFrame(()=>{E.src=Za})},E.onerror=()=>b(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const M=new Blob([new Uint8Array(P)],{type:"image/png"});E.src=P.byteLength?URL.createObjectURL(M):Za}(v,(P,b)=>a(P,b,B,F)))});return{cancel:()=>{g.cancel(),h()}}};var Hu,Wd,ZA,ms={exports:{}},YA={exports:{}},Dp={exports:{}},kp=function(){if(ZA)return ms.exports;ZA=1;var A=(Hu||(Hu=1,YA.exports=function(l,h){var g,f,v,B,F,P,b,E;for(f=l.length-(g=3&l.length),v=h,F=3432918353,P=461845907,E=0;E<f;)b=255&l.charCodeAt(E)|(255&l.charCodeAt(++E))<<8|(255&l.charCodeAt(++E))<<16|(255&l.charCodeAt(++E))<<24,++E,v=27492+(65535&(B=5*(65535&(v=(v^=b=(65535&(b=(b=(65535&b)*F+(((b>>>16)*F&65535)<<16)&4294967295)<<15|b>>>17))*P+(((b>>>16)*P&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(B>>>16)&65535)<<16);switch(b=0,g){case 3:b^=(255&l.charCodeAt(E+2))<<16;case 2:b^=(255&l.charCodeAt(E+1))<<8;case 1:v^=b=(65535&(b=(b=(65535&(b^=255&l.charCodeAt(E)))*F+(((b>>>16)*F&65535)<<16)&4294967295)<<15|b>>>17))*P+(((b>>>16)*P&65535)<<16)&4294967295}return v^=l.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0}),YA.exports),a=(Wd||(Wd=1,Dp.exports=function(l,h){for(var g,f=l.length,v=h^f,B=0;f>=4;)g=1540483477*(65535&(g=255&l.charCodeAt(B)|(255&l.charCodeAt(++B))<<8|(255&l.charCodeAt(++B))<<16|(255&l.charCodeAt(++B))<<24))+((1540483477*(g>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),f-=4,++B;switch(f){case 3:v^=(255&l.charCodeAt(B+2))<<16;case 2:v^=(255&l.charCodeAt(B+1))<<8;case 1:v=1540483477*(65535&(v^=255&l.charCodeAt(B)))+((1540483477*(v>>>16)&65535)<<16)}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0}),Dp.exports);return ms.exports=A,ms.exports.murmur3=A,ms.exports.murmur2=a,ms.exports}(),qo=x(kp);class ml{constructor(a,...l){go(this,l[0]||{}),this.type=a}}class ju extends ml{constructor(a,l={}){super("error",go({error:a},l))}}function gl(A,a,l){l[A]&&l[A].indexOf(a)!==-1||(l[A]=l[A]||[],l[A].push(a))}function qd(A,a,l){if(l&&l[A]){const h=l[A].indexOf(a);h!==-1&&l[A].splice(h,1)}}class Xc{on(a,l){return this._listeners=this._listeners||{},gl(a,l,this._listeners),this}off(a,l){return qd(a,l,this._listeners),qd(a,l,this._oneTimeListeners),this}once(a,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},gl(a,l,this._oneTimeListeners),this):new Promise(h=>this.once(a,h))}fire(a,l){const h=typeof a=="string"?new ml(a,l):a,g=h.type;if(this.listens(g)){h.target=this;const f=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const F of f)F.call(this,h);const v=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const F of v)qd(g,F,this._oneTimeListeners),F.call(this,h);const B=this._eventedParent;B&&(go(h,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),B.fire(h))}else h instanceof ju&&console.error(h.error);return this}listens(a){return!!(this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a))}setEventedParent(a,l){return this._eventedParent=a,this._eventedParentData=l,this}}var Xd,Kr={},Gu=function(){if(Xd)return Kr;Xd=1;var A={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function a(f){return(f=Math.round(f))<0?0:f>255?255:f}function l(f){return a(f[f.length-1]==="%"?parseFloat(f)/100*255:parseInt(f))}function h(f){return(v=f[f.length-1]==="%"?parseFloat(f)/100:parseFloat(f))<0?0:v>1?1:v;var v}function g(f,v,B){return B<0?B+=1:B>1&&(B-=1),6*B<1?f+(v-f)*B*6:2*B<1?v:3*B<2?f+(v-f)*(2/3-B)*6:f}try{Kr.parseCSSColor=function(f){var v,B=f.replace(/ /g,"").toLowerCase();if(B in A)return A[B].slice();if(B[0]==="#")return B.length===4?(v=parseInt(B.substr(1),16))>=0&&v<=4095?[(3840&v)>>4|(3840&v)>>8,240&v|(240&v)>>4,15&v|(15&v)<<4,1]:null:B.length===7&&(v=parseInt(B.substr(1),16))>=0&&v<=16777215?[(16711680&v)>>16,(65280&v)>>8,255&v,1]:null;var F=B.indexOf("("),P=B.indexOf(")");if(F!==-1&&P+1===B.length){var b=B.substr(0,F),E=B.substr(F+1,P-(F+1)).split(","),M=1;switch(b){case"rgba":if(E.length!==4)return null;M=h(E.pop());case"rgb":return E.length!==3?null:[l(E[0]),l(E[1]),l(E[2]),M];case"hsla":if(E.length!==4)return null;M=h(E.pop());case"hsl":if(E.length!==3)return null;var T=(parseFloat(E[0])%360+360)%360/360,I=h(E[1]),R=h(E[2]),U=R<=.5?R*(I+1):R+I-R*I,V=2*R-U;return[a(255*g(V,U,T+1/3)),a(255*g(V,U,T)),a(255*g(V,U,T-1/3)),M];default:return null}}return null}}catch{}return Kr}();class An{constructor(a,l,h,g=1){this.r=a,this.g=l,this.b=h,this.a=g}static parse(a){if(!a)return;if(a instanceof An)return a;if(typeof a!="string")return;const l=Gu.parseCSSColor(a);return l?new An(l[0]/255*l[3],l[1]/255*l[3],l[2]/255*l[3],l[3]):void 0}toString(){const[a,l,h,g]=this.a===0?[0,0,0,0]:[255*this.r/this.a,255*this.g/this.a,255*this.b/this.a,this.a];return`rgba(${Math.round(a)},${Math.round(l)},${Math.round(h)},${g})`}toRenderColor(a){const{r:l,g:h,b:g,a:f}=this;return new Zd(a,l,h,g,f)}}class Zd{constructor(a,l,h,g,f){if(a){const v=a.image.height,B=v*v;l=f===0?0:l/f*(v-1),h=f===0?0:h/f*(v-1),g=f===0?0:g/f*(v-1);const F=Math.floor(l),P=Math.floor(h),b=Math.floor(g),E=Math.ceil(l),M=Math.ceil(h),T=Math.ceil(g),I=l-F,R=h-P,U=g-b,V=a.image.data,X=4*(F+P*B+b*v),Y=4*(F+P*B+T*v),H=4*(F+M*B+b*v),$=4*(F+M*B+T*v),te=4*(E+P*B+b*v),le=4*(E+P*B+T*v),me=4*(E+M*B+b*v),ve=4*(E+M*B+T*v);if(X<0||ve>=V.length)throw new Error("out of range");this.r=cr(cr(cr(V[X],V[Y],U),cr(V[H],V[$],U),R),cr(cr(V[te],V[le],U),cr(V[me],V[ve],U),R),I)/255*f,this.g=cr(cr(cr(V[X+1],V[Y+1],U),cr(V[H+1],V[$+1],U),R),cr(cr(V[te+1],V[le+1],U),cr(V[me+1],V[ve+1],U),R),I)/255*f,this.b=cr(cr(cr(V[X+2],V[Y+2],U),cr(V[H+2],V[$+2],U),R),cr(cr(V[te+2],V[le+2],U),cr(V[me+2],V[ve+2],U),R),I)/255*f,this.a=f}else this.r=l,this.g=h,this.b=g,this.a=f}toArray(){const{r:a,g:l,b:h,a:g}=this;return g===0?[0,0,0,0]:[255*a/g,255*l/g,255*h/g,g]}toArray01(){const{r:a,g:l,b:h,a:g}=this;return g===0?[0,0,0,0]:[a/g,l/g,h/g,g]}toArray01Scaled(a){const{r:l,g:h,b:g,a:f}=this;return f===0?[0,0,0]:[l/f*a,h/f*a,g/f*a]}toArray01PremultipliedAlpha(){const{r:a,g:l,b:h,a:g}=this;return[a,l,h,g]}toArray01Linear(){const{r:a,g:l,b:h,a:g}=this;return g===0?[0,0,0,0]:[Math.pow(a/g,2.2),Math.pow(l/g,2.2),Math.pow(h/g,2.2),g]}}function cr(A,a,l){return A*(1-l)+a*l}function Zc(A,a,l){return A.map((h,g)=>cr(h,a[g],l))}An.black=new An(0,0,0,1),An.white=new An(1,1,1,1),An.transparent=new An(0,0,0,0),An.red=new An(1,0,0,1),An.blue=new An(0,0,1,1);var Qs=Object.freeze({__proto__:null,array:Zc,color:function(A,a,l){return new An(cr(A.r,a.r,l),cr(A.g,a.g,l),cr(A.b,a.b,l),cr(A.a,a.a,l))},number:cr});function ac(A,...a){for(const l of a)for(const h in l)A[h]=l[h];return A}class Eo extends Error{constructor(a,l){super(l),this.message=l,this.key=a}}class vl{constructor(a,l=[]){this.parent=a,this.bindings={};for(const[h,g]of l)this.bindings[h]=g}concat(a){return new vl(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}const Ja={kind:"null"},Kt={kind:"number"},Xr={kind:"string"},Wr={kind:"boolean"},Xo={kind:"color"},To={kind:"object"},Zr={kind:"value"},JA={kind:"collator"},Ne={kind:"formatted"},st={kind:"resolvedImage"};function wt(A,a){return{kind:"array",itemType:A,N:a}}function $t(A){if(A.kind==="array"){const a=$t(A.itemType);return typeof A.N=="number"?`array<${a}, ${A.N}>`:A.itemType.kind==="value"?"array":`array<${a}>`}return A.kind}const Sn=[Ja,Kt,Xr,Wr,Xo,Ne,To,wt(Zr),st];function kn(A,a){if(a.kind==="error")return null;if(A.kind==="array"){if(a.kind==="array"&&(a.N===0&&a.itemType.kind==="value"||!kn(A.itemType,a.itemType))&&(typeof A.N!="number"||A.N===a.N))return null}else{if(A.kind===a.kind)return null;if(A.kind==="value"){for(const l of Sn)if(!kn(l,a))return null}}return`Expected ${$t(A)} but found ${$t(a)} instead.`}function Xn(A,a){return a.some(l=>l.kind===A.kind)}function fn(A,a){return a.some(l=>l==="null"?A===null:l==="array"?Array.isArray(A):l==="object"?A&&!Array.isArray(A)&&typeof A=="object":l===typeof A)}class ti{constructor(a,l,h){this.sensitivity=a?l?"variant":"case":l?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,l){return this.collator.compare(a,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ti{constructor(a,l,h,g,f){this.text=a.normalize?a.normalize():a,this.image=l,this.scale=h,this.fontStack=g,this.textColor=f}}class $n{constructor(a){this.sections=a}static fromString(a){return new $n([new Ti(a,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(a=>a.text.length!==0||a.image&&a.image.namePrimary.length!==0)}static factory(a){return a instanceof $n?a:$n.fromString(a)}toString(){return this.sections.length===0?"":this.sections.map(a=>a.text).join("")}serialize(){const a=["format"];for(const l of this.sections){if(l.image){a.push(["image",l.image.namePrimary]);continue}a.push(l.text);const h={};l.fontStack&&(h["text-font"]=["literal",l.fontStack.split(",")]),l.scale&&(h["font-scale"]=l.scale),l.textColor&&(h["text-color"]=["rgba"].concat(l.textColor.toRenderColor(null).toArray())),a.push(h)}return a}}class Yi{constructor(a){this.namePrimary=a.namePrimary,a.nameSecondary&&(this.nameSecondary=a.nameSecondary),this.available=a.available}toString(){return this.nameSecondary?`[${this.namePrimary},${this.nameSecondary}]`:this.namePrimary}static fromString(a,l){return a?new Yi({namePrimary:a,nameSecondary:l,available:!1}):null}serialize(){return this.nameSecondary?["image",this.namePrimary,this.nameSecondary]:["image",this.namePrimary]}}function $A(A,a,l,h){return typeof A=="number"&&A>=0&&A<=255&&typeof a=="number"&&a>=0&&a<=255&&typeof l=="number"&&l>=0&&l<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[A,a,l,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[A,a,l,h]:[A,a,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function gs(A){if(A===null||typeof A=="string"||typeof A=="boolean"||typeof A=="number"||A instanceof An||A instanceof ti||A instanceof $n||A instanceof Yi)return!0;if(Array.isArray(A)){for(const a of A)if(!gs(a))return!1;return!0}if(typeof A=="object"){for(const a in A)if(!gs(A[a]))return!1;return!0}return!1}function _i(A){if(A===null)return Ja;if(typeof A=="string")return Xr;if(typeof A=="boolean")return Wr;if(typeof A=="number")return Kt;if(A instanceof An)return Xo;if(A instanceof ti)return JA;if(A instanceof $n)return Ne;if(A instanceof Yi)return st;if(Array.isArray(A)){const a=A.length;let l;for(const h of A){const g=_i(h);if(l){if(l===g)continue;l=Zr;break}l=g}return wt(l||Zr,a)}return To}function la(A){const a=typeof A;return A===null?"":a==="string"||a==="number"||a==="boolean"?String(A):A instanceof An||A instanceof $n||A instanceof Yi?A.toString():JSON.stringify(A)}class Ns{constructor(a,l){this.type=a,this.value=l}static parse(a,l){if(a.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!gs(a[1]))return l.error("invalid value");const h=a[1];let g=_i(h);const f=l.expectedType;return g.kind!=="array"||g.N!==0||!f||f.kind!=="array"||typeof f.N=="number"&&f.N!==0||(g=f),new Ns(g,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof An?["rgba"].concat(this.value.toRenderColor(null).toArray()):this.value instanceof $n?this.value.serialize():this.value}}class lo{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}}const D0={string:Xr,number:Kt,boolean:Wr,object:To};class Vs{constructor(a,l){this.type=a,this.args=l}static parse(a,l){if(a.length<2)return l.error("Expected at least one argument.");let h,g=1;const f=a[0];if(f==="array"){let B,F;if(a.length>2){const P=a[1];if(typeof P!="string"||!(P in D0)||P==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);B=D0[P],g++}else B=Zr;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return l.error('The length argument to "array" must be a positive integer literal',2);F=a[2],g++}h=wt(B,F)}else h=D0[f];const v=[];for(;g<a.length;g++){const B=l.parse(a[g],g,Zr);if(!B)return null;v.push(B)}return new Vs(h,v)}evaluate(a){for(let l=0;l<this.args.length;l++){const h=this.args[l].evaluate(a);if(!kn(this.type,_i(h)))return h;if(l===this.args.length-1)throw new lo(`The expression ${JSON.stringify(this.args[l].serialize())} evaluated to ${$t(_i(h))} but was expected to be of type ${$t(this.type)}.`)}return null}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){const a=this.type,l=[a.kind];if(a.kind==="array"){const h=a.itemType;if(h.kind==="string"||h.kind==="number"||h.kind==="boolean"){l.push(h.kind);const g=a.N;(typeof g=="number"||this.args.length>1)&&l.push(g)}}return l.concat(this.args.map(h=>h.serialize()))}}class eh{constructor(a){this.type=Ne,this.sections=a}static parse(a,l){if(a.length<2)return l.error("Expected at least one argument.");const h=a[1];if(!Array.isArray(h)&&typeof h=="object")return l.error("First argument must be an image or text section.");const g=[];let f=!1;for(let v=1;v<=a.length-1;++v){const B=a[v];if(f&&typeof B=="object"&&!Array.isArray(B)){f=!1;let F=null;if(B["font-scale"]&&(F=l.parseObjectValue(B["font-scale"],v,"font-scale",Kt),!F))return null;let P=null;if(B["text-font"]&&(P=l.parseObjectValue(B["text-font"],v,"text-font",wt(Xr)),!P))return null;let b=null;if(B["text-color"]&&(b=l.parseObjectValue(B["text-color"],v,"text-color",Xo),!b))return null;const E=g[g.length-1];E.scale=F,E.font=P,E.textColor=b}else{const F=l.parse(a[v],v,Zr);if(!F)return null;const P=F.type.kind;if(P!=="string"&&P!=="value"&&P!=="null"&&P!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");f=!0,g.push({content:F,scale:null,font:null,textColor:null})}}return new eh(g)}evaluate(a){return new $n(this.sections.map(l=>{const h=l.content.evaluate(a);return _i(h)===st?new Ti("",h,null,null,null):new Ti(la(h),null,l.scale?l.scale.evaluate(a):null,l.font?l.font.evaluate(a).join(","):null,l.textColor?l.textColor.evaluate(a):null)}))}eachChild(a){for(const l of this.sections)a(l.content),l.scale&&a(l.scale),l.font&&a(l.font),l.textColor&&a(l.textColor)}outputDefined(){return!1}serialize(){const a=["format"];for(const l of this.sections){a.push(l.content.serialize());const h={};l.scale&&(h["font-scale"]=l.scale.serialize()),l.font&&(h["text-font"]=l.font.serialize()),l.textColor&&(h["text-color"]=l.textColor.serialize()),a.push(h)}return a}}class Ku{constructor(a,l){this.type=st,this.inputPrimary=a,this.inputSecondary=l}static parse(a,l){if(a.length<2)return l.error("Expected two or more arguments.");const h=l.parse(a[1],1,Xr);if(!h)return l.error("No image name provided.");if(a.length===2)return new Ku(h);const g=l.parse(a[2],1,Xr);return g?new Ku(h,g):l.error("Secondary image variant is not a string.")}evaluate(a){const l=Yi.fromString(this.inputPrimary.evaluate(a),this.inputSecondary?this.inputSecondary.evaluate(a):void 0);return l&&a.availableImages&&(l.available=a.availableImages.indexOf(l.namePrimary)>-1,l.nameSecondary&&l.available&&a.availableImages&&(l.available=a.availableImages.indexOf(l.nameSecondary)>-1)),l}eachChild(a){a(this.inputPrimary),this.inputSecondary&&a(this.inputSecondary)}outputDefined(){return!1}serialize(){return this.inputSecondary?["image",this.inputPrimary.serialize(),this.inputSecondary.serialize()]:["image",this.inputPrimary.serialize()]}}function Wu(A){return A instanceof Number?"number":A instanceof String?"string":A instanceof Boolean?"boolean":Array.isArray(A)?"array":A===null?"null":typeof A}const Rp={"to-boolean":Wr,"to-color":Xo,"to-number":Kt,"to-string":Xr};class sc{constructor(a,l){this.type=a,this.args=l}static parse(a,l){if(a.length<2)return l.error("Expected at least one argument.");const h=a[0],g=[];let f=Ja;if(h==="to-array"){if(!Array.isArray(a[1]))return null;const v=a[1].length;if(l.expectedType){if(l.expectedType.kind!=="array")return l.error(`Expected ${l.expectedType.kind} but found array.`);f=wt(l.expectedType.itemType,v)}else{if(!(v>0&&gs(a[1][0])))return null;f=wt(_i(a[1][0]),v)}for(let B=0;B<v;B++){const F=a[1][B];let P;if(Wu(F)==="array")P=l.parse(F,void 0,f.itemType);else{const b=Wu(F);if(b!==f.itemType.kind)return l.error(`Expected ${f.itemType.kind} but found ${b}.`);P=l.registry.literal.parse(["literal",F===void 0?null:F],l)}if(!P)return null;g.push(P)}}else{if((h==="to-boolean"||h==="to-string")&&a.length!==2)return l.error("Expected one argument.");f=Rp[h];for(let v=1;v<a.length;v++){const B=l.parse(a[v],v,Zr);if(!B)return null;g.push(B)}}return new sc(f,g)}evaluate(a){if(this.type.kind==="boolean")return!!this.args[0].evaluate(a);if(this.type.kind==="color"){let l,h;for(const g of this.args){if(l=g.evaluate(a),h=null,l instanceof An)return l;if(typeof l=="string"){const f=a.parseColor(l);if(f)return f}else if(Array.isArray(l)&&(h=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:$A(l[0],l[1],l[2],l[3]),!h))return new An(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new lo(h||`Could not parse color from value '${typeof l=="string"?l:String(JSON.stringify(l))}'`)}if(this.type.kind==="number"){let l=null;for(const h of this.args){if(l=h.evaluate(a),l===null)return 0;const g=Number(l);if(!isNaN(g))return g}throw new lo(`Could not convert ${JSON.stringify(l)} to number.`)}return this.type.kind==="formatted"?$n.fromString(la(this.args[0].evaluate(a))):this.type.kind==="resolvedImage"?Yi.fromString(la(this.args[0].evaluate(a))):this.type.kind==="array"?this.args.map(l=>l.evaluate(a)):la(this.args[0].evaluate(a))}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){if(this.type.kind==="formatted")return new eh([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Ku(this.args[0]).serialize();const a=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(l=>{a.push(l.serialize())}),a}}const mT=["Unknown","Point","LineString","Polygon"];class yx{constructor(a,l){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=a,this.options=l}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?mT[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(a){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const a=this.featureDistanceData.center,l=this.featureDistanceData.scale,{x:h,y:g}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(h*l-a[0])+this.featureDistanceData.bearing[1]*(g*l-a[1])}return 0}parseColor(a){let l=this._parseColorCache[a];return l||(l=this._parseColorCache[a]=An.parse(a)),l}getConfig(a){return this.options?this.options.get(a):null}}class Pa{constructor(a,l,h,g,f){this.name=a,this.type=l,this._evaluate=h,this.args=g,this._overloadIndex=f}evaluate(a){if(!this._evaluate){const l=Pa.definitions[this.name];this._evaluate=Array.isArray(l)?l[2]:l.overloads[this._overloadIndex][1]}return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(a=>a.serialize()))}static parse(a,l){const h=a[0],g=Pa.definitions[h];if(!g)return l.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const f=Array.isArray(g)?g[0]:g.type,v=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,B=[];let F=null,P=-1;for(const[b,E]of v){if(Array.isArray(b)&&b.length!==a.length-1)continue;B.push(b),P++,F=new Mx(l.registry,l.path,null,l.scope,void 0,l._scope,l.options);const M=[];let T=!1;for(let I=1;I<a.length;I++){const R=a[I],U=Array.isArray(b)?b[I-1]:b.type,V=F.parse(R,1+M.length,U);if(!V){T=!0;break}M.push(V)}if(!T)if(Array.isArray(b)&&b.length!==M.length)F.error(`Expected ${b.length} arguments, but found ${M.length} instead.`);else{for(let I=0;I<M.length;I++){const R=Array.isArray(b)?b[I]:b.type,U=M[I];F.concat(I+1).checkSubtype(R,U.type)}if(F.errors.length===0)return new Pa(h,f,E,M,P)}}if(B.length===1)l.errors.push(...F.errors);else{const b=(B.length?B:v.map(([M])=>M)).map(gT).join(" | "),E=[];for(let M=1;M<a.length;M++){const T=l.parse(a[M],1+E.length);if(!T)return null;E.push($t(T.type))}l.error(`Expected arguments of type ${b}, but found (${E.join(", ")}) instead.`)}return null}static register(a,l){Pa.definitions=l;for(const h in l)a[h]=Pa}}function gT(A){return Array.isArray(A)?`(${A.map($t).join(", ")})`:`(${$t(A.type)}...)`}class Lp{constructor(a,l,h){this.type=JA,this.locale=h,this.caseSensitive=a,this.diacriticSensitive=l}static parse(a,l){if(a.length!==2)return l.error("Expected one argument.");const h=a[1];if(typeof h!="object"||Array.isArray(h))return l.error("Collator options argument must be an object.");const g=h["case-sensitive"]===void 0?l.parse(!1,1,Wr):l.parseObjectValue(h["case-sensitive"],1,"case-sensitive",Wr);if(!g)return null;const f=h["diacritic-sensitive"]===void 0?l.parse(!1,1,Wr):l.parseObjectValue(h["diacritic-sensitive"],1,"diacritic-sensitive",Wr);if(!f)return null;let v=null;return h.locale&&(v=l.parseObjectValue(h.locale,1,"locale",Xr),!v)?null:new Lp(g,f,v)}evaluate(a){return new ti(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}serialize(){const a={};return a["case-sensitive"]=this.caseSensitive.serialize(),a["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(a.locale=this.locale.serialize()),["collator",a]}}function _x(A,a,l=0,h=A.length-1,g=rh){for(;h>l;){if(h-l>600){const F=h-l+1,P=a-l+1,b=Math.log(F),E=.5*Math.exp(2*b/3),M=.5*Math.sqrt(b*E*(F-E)/F)*(P-F/2<0?-1:1);_x(A,a,Math.max(l,Math.floor(a-P*E/F+M)),Math.min(h,Math.floor(a+(F-P)*E/F+M)),g)}const f=A[a];let v=l,B=h;for(th(A,l,a),g(A[h],f)>0&&th(A,l,h);v<B;){for(th(A,v,B),v++,B--;g(A[v],f)<0;)v++;for(;g(A[B],f)>0;)B--}g(A[l],f)===0?th(A,l,B):(B++,th(A,B,h)),B<=a&&(l=B+1),a<=B&&(h=B-1)}}function th(A,a,l){const h=A[a];A[a]=A[l],A[l]=h}function rh(A,a){return A<a?-1:A>a?1:0}function vT(A){let a=0;for(let l,h,g=0,f=A.length,v=f-1;g<f;v=g++)l=A[g],h=A[v],a+=(h.x-l.x)*(l.y+h.y);return a}function Yd(A,a){A[0]=Math.min(A[0],a[0]),A[1]=Math.min(A[1],a[1]),A[2]=Math.max(A[2],a[0]),A[3]=Math.max(A[3],a[1])}function qu(A,a){return!(A[0]<=a[0]||A[2]>=a[2]||A[1]<=a[1]||A[3]>=a[3])}function yT(A,a,l){const h=A[0]-a[0],g=A[1]-a[1],f=A[0]-l[0],v=A[1]-l[1];return h*v-f*g==0&&h*f<=0&&g*v<=0}function nh(A,a,l=!1){let h=!1;for(let B=0,F=a.length;B<F;B++){const P=a[B];for(let b=0,E=P.length,M=E-1;b<E;M=b++){const T=P[M],I=P[b];if(yT(A,T,I))return l;(f=T)[1]>(g=A)[1]!=(v=I)[1]>g[1]&&g[0]<(v[0]-f[0])*(g[1]-f[1])/(v[1]-f[1])+f[0]&&(h=!h)}}var g,f,v;return h}function xx(A,a,l,h){const g=h[0]-l[0],f=h[1]-l[1],v=(A[0]-l[0])*f-g*(A[1]-l[1]),B=(a[0]-l[0])*f-g*(a[1]-l[1]);return v>0&&B<0||v<0&&B>0}function Op(A,a,l,h){return(g=[h[0]-l[0],h[1]-l[1]])[0]*(f=[a[0]-A[0],a[1]-A[1]])[1]-g[1]*f[0]!=0&&!(!xx(A,a,l,h)||!xx(l,h,A,a));var g,f}const $a=8192;function Nr(A,a){const l=(180+A[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A[1]*Math.PI/360)))/360,g=Math.pow(2,a.z);return[Math.round(l*g*$a),Math.round(h*g*$a)]}function sr(A,a){for(let l=0;l<a.length;l++)if(nh(A,a[l]))return!0;return!1}function k0(A,a,l){for(const h of l)for(let g=0,f=h.length,v=f-1;g<f;v=g++)if(Op(A,a,h[v],h[g]))return!0;return!1}function wr(A,a){for(let l=0;l<A.length;++l)if(!nh(A[l],a))return!1;for(let l=0;l<A.length-1;++l)if(k0(A[l],A[l+1],a))return!1;return!0}function R0(A,a){for(let l=0;l<a.length;l++)if(wr(A,a[l]))return!0;return!1}function Jd(A,a,l){const h=[];for(let g=0;g<A.length;g++){const f=[];for(let v=0;v<A[g].length;v++){const B=Nr(A[g][v],l);Yd(a,B),f.push(B)}h.push(f)}return h}function mr(A,a,l){const h=[];for(let g=0;g<A.length;g++){const f=Jd(A[g],a,l);h.push(f)}return h}function L0(A,a,l,h){if(A[0]<l[0]||A[0]>l[2]){const g=.5*h;let f=A[0]-l[0]>g?-h:l[0]-A[0]>g?h:0;f===0&&(f=A[0]-l[2]>g?-h:l[2]-A[0]>g?h:0),A[0]+=f}Yd(a,A)}function Up(A,a,l,h){const g=Math.pow(2,h.z)*$a,f=[h.x*$a,h.y*$a],v=[];if(!A)return v;for(const B of A)for(const F of B){const P=[F.x+f[0],F.y+f[1]];L0(P,a,l,g),v.push(P)}return v}function O0(A,a,l,h){const g=Math.pow(2,h.z)*$a,f=[h.x*$a,h.y*$a],v=[];if(!A)return v;for(const F of A){const P=[];for(const b of F){const E=[b.x+f[0],b.y+f[1]];Yd(a,E),P.push(E)}v.push(P)}if(a[2]-a[0]<=g/2){(B=a)[0]=B[1]=1/0,B[2]=B[3]=-1/0;for(const F of v)for(const P of F)L0(P,a,l,g)}var B;return v}class Yc{constructor(a,l){this.type=Wr,this.geojson=a,this.geometries=l}static parse(a,l){if(a.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(gs(a[1])){const h=a[1];if(h.type==="FeatureCollection")for(let g=0;g<h.features.length;++g){const f=h.features[g].geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new Yc(h,h.features[g].geometry)}else if(h.type==="Feature"){const g=h.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new Yc(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new Yc(h,h)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return function(l,h){const g=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],v=l.canonicalID();if(!v)return!1;if(h.type==="Polygon"){const B=Jd(h.coordinates,f,v),F=Up(l.geometry(),g,f,v);if(!qu(g,f))return!1;for(const P of F)if(!nh(P,B))return!1}if(h.type==="MultiPolygon"){const B=mr(h.coordinates,f,v),F=Up(l.geometry(),g,f,v);if(!qu(g,f))return!1;for(const P of F)if(!sr(P,B))return!1}return!0}(a,this.geometries);if(a.geometryType()==="LineString")return function(l,h){const g=[1/0,1/0,-1/0,-1/0],f=[1/0,1/0,-1/0,-1/0],v=l.canonicalID();if(!v)return!1;if(h.type==="Polygon"){const B=Jd(h.coordinates,f,v),F=O0(l.geometry(),g,f,v);if(!qu(g,f))return!1;for(const P of F)if(!wr(P,B))return!1}if(h.type==="MultiPolygon"){const B=mr(h.coordinates,f,v),F=O0(l.geometry(),g,f,v);if(!qu(g,f))return!1;for(const P of F)if(!R0(P,B))return!1}return!0}(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const Xu={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},Ro=1/298.257223563,zp=Ro*(2-Ro),ih=Math.PI/180;class oh{static fromTile(a,l,h){const g=Math.PI*(1-2*(a+.5)/Math.pow(2,l)),f=Math.atan(.5*(Math.exp(g)-Math.exp(-g)))/ih;return new oh(f,h)}static get units(){return Xu}constructor(a,l){if(a===void 0)throw new Error("No latitude given.");if(l&&!Xu[l])throw new Error(`Unknown unit ${l}. Use one of: ${Object.keys(Xu).join(", ")}`);const h=6378.137*ih*(l?Xu[l]:1),g=Math.cos(a*ih),f=1/(1-zp*(1-g*g)),v=Math.sqrt(f);this.kx=h*v*g,this.ky=h*v*f*(1-zp)}distance(a,l){const h=pi(a[0]-l[0])*this.kx,g=(a[1]-l[1])*this.ky;return Math.sqrt(h*h+g*g)}bearing(a,l){const h=pi(l[0]-a[0])*this.kx;return Math.atan2(h,(l[1]-a[1])*this.ky)/ih}destination(a,l,h){const g=h*ih;return this.offset(a,Math.sin(g)*l,Math.cos(g)*l)}offset(a,l,h){return[a[0]+l/this.kx,a[1]+h/this.ky]}lineDistance(a){let l=0;for(let h=0;h<a.length-1;h++)l+=this.distance(a[h],a[h+1]);return l}area(a){let l=0;for(let h=0;h<a.length;h++){const g=a[h];for(let f=0,v=g.length,B=v-1;f<v;B=f++)l+=pi(g[f][0]-g[B][0])*(g[f][1]+g[B][1])*(h?-1:1)}return Math.abs(l)/2*this.kx*this.ky}along(a,l){let h=0;if(l<=0)return a[0];for(let g=0;g<a.length-1;g++){const f=a[g],v=a[g+1],B=this.distance(f,v);if(h+=B,h>l)return lc(f,v,(l-(h-B))/B)}return a[a.length-1]}pointToSegmentDistance(a,l,h){let[g,f]=l,v=pi(h[0]-g)*this.kx,B=(h[1]-f)*this.ky;if(v!==0||B!==0){const F=(pi(a[0]-g)*this.kx*v+(a[1]-f)*this.ky*B)/(v*v+B*B);F>1?(g=h[0],f=h[1]):F>0&&(g+=v/this.kx*F,f+=B/this.ky*F)}return v=pi(a[0]-g)*this.kx,B=(a[1]-f)*this.ky,Math.sqrt(v*v+B*B)}pointOnLine(a,l){let h=1/0,g=a[0][0],f=a[0][1],v=0,B=0;for(let F=0;F<a.length-1;F++){let P=a[F][0],b=a[F][1],E=pi(a[F+1][0]-P)*this.kx,M=(a[F+1][1]-b)*this.ky,T=0;E===0&&M===0||(T=(pi(l[0]-P)*this.kx*E+(l[1]-b)*this.ky*M)/(E*E+M*M),T>1?(P=a[F+1][0],b=a[F+1][1]):T>0&&(P+=E/this.kx*T,b+=M/this.ky*T)),E=pi(l[0]-P)*this.kx,M=(l[1]-b)*this.ky;const I=E*E+M*M;I<h&&(h=I,g=P,f=b,v=F,B=T)}return{point:[g,f],index:v,t:Math.max(0,Math.min(1,B))}}lineSlice(a,l,h){let g=this.pointOnLine(h,a),f=this.pointOnLine(h,l);if(g.index>f.index||g.index===f.index&&g.t>f.t){const P=g;g=f,f=P}const v=[g.point],B=g.index+1,F=f.index;!Qp(h[B],v[0])&&B<=F&&v.push(h[B]);for(let P=B+1;P<=F;P++)v.push(h[P]);return Qp(h[F],f.point)||v.push(f.point),v}lineSliceAlong(a,l,h){let g=0;const f=[];for(let v=0;v<h.length-1;v++){const B=h[v],F=h[v+1],P=this.distance(B,F);if(g+=P,g>a&&f.length===0&&f.push(lc(B,F,(a-(g-P))/P)),g>=l)return f.push(lc(B,F,(l-(g-P))/P)),f;g>a&&f.push(F)}return f}bufferPoint(a,l){const h=l/this.ky,g=l/this.kx;return[a[0]-g,a[1]-h,a[0]+g,a[1]+h]}bufferBBox(a,l){const h=l/this.ky,g=l/this.kx;return[a[0]-g,a[1]-h,a[2]+g,a[3]+h]}insideBBox(a,l){return pi(a[0]-l[0])>=0&&pi(a[0]-l[2])<=0&&a[1]>=l[1]&&a[1]<=l[3]}}function Qp(A,a){return A[0]===a[0]&&A[1]===a[1]}function lc(A,a,l){const h=pi(a[0]-A[0]);return[A[0]+h*l,A[1]+(a[1]-A[1])*l]}function pi(A){for(;A<-180;)A+=360;for(;A>180;)A-=360;return A}class U0{constructor(a=[],l=(h,g)=>h<g?-1:h>g?1:0){if(this.data=a,this.length=this.data.length,this.compare=l,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(a){this.data.push(a),this._up(this.length++)}pop(){if(this.length===0)return;const a=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:l,compare:h}=this,g=l[a];for(;a>0;){const f=a-1>>1,v=l[f];if(h(g,v)>=0)break;l[a]=v,a=f}l[a]=g}_down(a){const{data:l,compare:h}=this,g=this.length>>1,f=l[a];for(;a<g;){let v=1+(a<<1);const B=v+1;if(B<this.length&&h(l[B],l[v])<0&&(v=B),h(l[v],f)>=0)break;l[a]=l[v],a=v}l[a]=f}}var Ut=8192;function bx(A,a){return a.dist-A.dist}const ah=100,Np=50;function Vp(A){const a=[1/0,1/0,-1/0,-1/0];if(a.length!==A.length)return!1;for(let l=0;l<a.length;l++)if(a[l]!==A[l])return!1;return!0}function Hp(A){return A[1]-A[0]+1}function cc(A,a){const l=A[1]>=A[0]&&A[1]<a;return l||console.warn("Distance Expression: Index is out of range"),l}function z0(A,a){if(A[0]>A[1])return[null,null];const l=Hp(A);if(a){if(l===2)return[A,null];const h=Math.floor(l/2);return[[A[0],A[0]+h],[A[0]+h,A[1]]]}{if(l===1)return[A,null];const h=Math.floor(l/2)-1;return[[A[0],A[0]+h],[A[0]+h+1,A[1]]]}}function es(A,a){const l=[1/0,1/0,-1/0,-1/0];if(!cc(a,A.length))return l;for(let h=a[0];h<=a[1];++h)Yd(l,A[h]);return l}function jp(A){const a=[1/0,1/0,-1/0,-1/0];for(let l=0;l<A.length;++l)for(let h=0;h<A[l].length;++h)Yd(a,A[l][h]);return a}function sh(A,a,l){if(Vp(A)||Vp(a))return NaN;let h=0,g=0;return A[2]<a[0]&&(h=a[0]-A[2]),A[0]>a[2]&&(h=A[0]-a[2]),A[1]>a[3]&&(g=A[1]-a[3]),A[3]<a[1]&&(g=a[1]-A[3]),l.distance([0,0],[h,g])}function wx(A){return 360*A-180}function Bx(A){return 360/Math.PI*Math.atan(Math.exp((180-360*A)*Math.PI/180))-90}function ts(A,a){const l=Math.pow(2,a.z),h=(A.y/Ut+a.y)/l;return[wx((A.x/Ut+a.x)/l),Bx(h)]}function Cx(A,a){const l=[];for(let h=0;h<A.length;++h)l.push(ts(A[h],a));return l}function Q0(A,a,l){const h=l.pointOnLine(a,A).point;return l.distance(A,h)}function N0(A,a,l,h,g){const f=l.slice(h[0],h[1]+1);let v=1/0;for(let B=a[0];B<=a[1];++B)if((v=Math.min(v,Q0(A[B],f,g)))===0)return 0;return v}function Gp(A,a,l,h,g){const f=Math.min(g.pointToSegmentDistance(A,l,h),g.pointToSegmentDistance(a,l,h)),v=Math.min(g.pointToSegmentDistance(l,A,a),g.pointToSegmentDistance(h,A,a));return Math.min(f,v)}function Sx(A,a,l,h,g){if(!cc(a,A.length)||!cc(h,l.length))return NaN;let f=1/0;for(let v=a[0];v<a[1];++v)for(let B=h[0];B<h[1];++B){if(Op(A[v],A[v+1],l[B],l[B+1]))return 0;f=Math.min(f,Gp(A[v],A[v+1],l[B],l[B+1],g))}return f}function Ex(A,a,l,h,g){if(!cc(a,A.length)||!cc(h,l.length))return NaN;let f=1/0;for(let v=a[0];v<=a[1];++v)for(let B=h[0];B<=h[1];++B)if((f=Math.min(f,g.distance(A[v],l[B])))===0)return f;return f}function Tx(A,a,l){if(nh(A,a,!0))return 0;let h=1/0;for(const g of a){const f=g.length;if(f<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(g[0]!==g[f-1]&&(h=Math.min(h,l.pointToSegmentDistance(A,g[f-1],g[0])))===0||(h=Math.min(h,Q0(A,g,l)))===0)return h}return h}function Fx(A,a,l,h){if(!cc(a,A.length))return NaN;for(let f=a[0];f<=a[1];++f)if(nh(A[f],l,!0))return 0;let g=1/0;for(let f=a[0];f<a[1];++f)for(const v of l)for(let B=0,F=v.length,P=F-1;B<F;P=B++){if(Op(A[f],A[f+1],v[P],v[B]))return 0;g=Math.min(g,Gp(A[f],A[f+1],v[P],v[B],h))}return g}function V0(A,a){for(const l of A)for(let h=0;h<=l.length-1;++h)if(nh(l[h],a,!0))return!0;return!1}function Ix(A,a,l,h=1/0){const g=jp(A),f=jp(a);if(h!==1/0&&sh(g,f,l)>=h)return h;if(qu(g,f)){if(V0(A,a))return 0}else if(V0(a,A))return 0;let v=h;for(const B of A)for(let F=0,P=B.length,b=P-1;F<P;b=F++)for(const E of a)for(let M=0,T=E.length,I=T-1;M<T;I=M++){if(Op(B[b],B[F],E[I],E[M]))return 0;v=Math.min(v,Gp(B[b],B[F],E[I],E[M],l))}return v}function $d(A,a,l,h,g,f,v){if(f===null||v===null)return;const B=sh(es(h,f),es(g,v),l);B<a&&A.push({dist:B,range1:f,range2:v})}function Kp(A,a,l,h,g=1/0){let f=Math.min(h.distance(A[0],l[0][0]),g);if(f===0)return f;const v=new U0([{dist:0,range1:[0,A.length-1],range2:[0,0]}],bx),B=a?Np:ah,F=jp(l);for(;v.length;){const P=v.pop();if(P.dist>=f)continue;const b=P.range1;if(Hp(b)<=B){if(!cc(b,A.length))return NaN;if(a){const E=Fx(A,b,l,h);if((f=Math.min(f,E))===0)return f}else for(let E=b[0];E<=b[1];++E){const M=Tx(A[E],l,h);if((f=Math.min(f,M))===0)return f}}else{const E=z0(b,a);if(E[0]!==null){const M=sh(es(A,E[0]),F,h);M<f&&v.push({dist:M,range1:E[0],range2:[0,0]})}if(E[1]!==null){const M=sh(es(A,E[1]),F,h);M<f&&v.push({dist:M,range1:E[1],range2:[0,0]})}}}return f}function ef(A,a,l,h,g,f=1/0){let v=Math.min(f,g.distance(A[0],l[0]));if(v===0)return v;const B=new U0([{dist:0,range1:[0,A.length-1],range2:[0,l.length-1]}],bx),F=a?Np:ah,P=h?Np:ah;for(;B.length;){const b=B.pop();if(b.dist>=v)continue;const E=b.range1,M=b.range2;if(Hp(E)<=F&&Hp(M)<=P){if(!cc(E,A.length)||!cc(M,l.length))return NaN;if(a&&h?v=Math.min(v,Sx(A,E,l,M,g)):a||h?a&&!h?v=Math.min(v,N0(l,M,A,E,g)):!a&&h&&(v=Math.min(v,N0(A,E,l,M,g))):v=Math.min(v,Ex(A,E,l,M,g)),v===0)return v}else{const T=z0(E,a),I=z0(M,h);$d(B,v,g,A,l,T[0],I[0]),$d(B,v,g,A,l,T[0],I[1]),$d(B,v,g,A,l,T[1],I[0]),$d(B,v,g,A,l,T[1],I[1])}}return v}function lh(A,a,l,h,g=1/0){let f=g;const v=es(A,[0,A.length-1]);for(const B of l)if(!(f!==1/0&&sh(v,es(B,[0,B.length-1]),h)>=f)&&(f=Math.min(f,ef(A,a,B,!0,h,f)),f===0))return f;return f}function tf(A,a,l,h,g=1/0){let f=g;const v=es(A,[0,A.length-1]);for(const B of l){if(f!==1/0&&sh(v,jp(B),h)>=f)continue;const F=Kp(A,a,B,h,f);if(isNaN(F))return F;if((f=Math.min(f,F))===0)return f}return f}function Wp(A){return A==="Point"||A==="MultiPoint"||A==="LineString"||A==="MultiLineString"||A==="Polygon"||A==="MultiPolygon"}class Jc{constructor(a,l){this.type=Kt,this.geojson=a,this.geometries=l}static parse(a,l){if(a.length!==2)return l.error(`'distance' expression requires either one argument, but found ' ${a.length-1} instead.`);if(gs(a[1])){const h=a[1];if(h.type==="FeatureCollection"){for(let g=0;g<h.features.length;++g)if(Wp(h.features[g].geometry.type))return new Jc(h,h.features[g].geometry)}else if(h.type==="Feature"){if(Wp(h.geometry.type))return new Jc(h,h.geometry)}else if(Wp(h.type))return new Jc(h,h)}return l.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(a){const l=a.geometry(),h=a.canonicalID();if(l!=null&&h!=null){if(a.geometryType()==="Point")return function(g,f,v){const B=[];for(const P of g)for(const b of P)B.push(ts(b,f));const F=new oh(B[0][1],"meters");return v.type==="Point"||v.type==="MultiPoint"||v.type==="LineString"?ef(B,!1,v.type==="Point"?[v.coordinates]:v.coordinates,v.type==="LineString",F):v.type==="MultiLineString"?lh(B,!1,v.coordinates,F):v.type==="Polygon"||v.type==="MultiPolygon"?tf(B,!1,v.type==="Polygon"?[v.coordinates]:v.coordinates,F):null}(l,h,this.geometries);if(a.geometryType()==="LineString")return function(g,f,v){const B=[];for(const P of g){const b=[];for(const E of P)b.push(ts(E,f));B.push(b)}const F=new oh(B[0][0][1],"meters");if(v.type==="Point"||v.type==="MultiPoint"||v.type==="LineString")return lh(v.type==="Point"?[v.coordinates]:v.coordinates,v.type==="LineString",B,F);if(v.type==="MultiLineString"){let P=1/0;for(let b=0;b<v.coordinates.length;b++){const E=lh(v.coordinates[b],!0,B,F,P);if(isNaN(E))return E;if((P=Math.min(P,E))===0)return P}return P}if(v.type==="Polygon"||v.type==="MultiPolygon"){let P=1/0;for(let b=0;b<B.length;b++){const E=tf(B[b],!0,v.type==="Polygon"?[v.coordinates]:v.coordinates,F,P);if(isNaN(E))return E;if((P=Math.min(P,E))===0)return P}return P}return null}(l,h,this.geometries);if(a.geometryType()==="Polygon")return function(g,f,v){const B=[];for(const P of function(b,E){const M=b.length;if(M<=1)return[b];const T=[];let I,R;for(let U=0;U<M;U++){const V=vT(b[U]);V!==0&&(b[U].area=Math.abs(V),R===void 0&&(R=V<0),R===V<0?(I&&T.push(I),I=[b[U]]):I.push(b[U]))}return I&&T.push(I),T}(g)){const b=[];for(let E=0;E<P.length;++E)b.push(Cx(P[E],f));B.push(b)}const F=new oh(B[0][0][0][1],"meters");if(v.type==="Point"||v.type==="MultiPoint"||v.type==="LineString")return tf(v.type==="Point"?[v.coordinates]:v.coordinates,v.type==="LineString",B,F);if(v.type==="MultiLineString"){let P=1/0;for(let b=0;b<v.coordinates.length;b++){const E=tf(v.coordinates[b],!0,B,F,P);if(isNaN(E))return E;if((P=Math.min(P,E))===0)return P}return P}return v.type==="Polygon"||v.type==="MultiPolygon"?function(P,b,E){let M=1/0;for(const T of P)for(const I of b){const R=Ix(T,I,E,M);if(isNaN(R))return R;if((M=Math.min(M,R))===0)return M}return M}(v.type==="Polygon"?[v.coordinates]:v.coordinates,B,F):null}(l,h,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function $c(A,a){switch(A){case"string":return la(a);case"number":return+a;case"boolean":return!!a;case"color":return An.parse(a);case"formatted":return $n.fromString(la(a));case"resolvedImage":return Yi.fromString(la(a))}return a}function rn(A,a,l,h){return h!==void 0&&(A=h*Math.round(A/h)),a!==void 0&&A<a&&(A=a),l!==void 0&&A>l&&(A=l),A}class ch{constructor(a,l,h){this.type=a,this.key=l,this.scope=h}static parse(a,l){let h=l.expectedType;if(h==null&&(h=Zr),a.length<2||a.length>3)return l.error("Invalid number of arguments for 'config' expression.");const g=l.parse(a[1],1);if(!(g instanceof Ns))return l.error("Key name of 'config' expression must be a string literal.");if(a.length>=3){const f=l.parse(a[2],2);return f instanceof Ns?new ch(h,la(g.value),la(f.value)):l.error("Scope of 'config' expression must be a string literal.")}return new ch(h,la(g.value))}evaluate(a){const l=[this.key,this.scope,a.scope].filter(Boolean).join(""),h=a.getConfig(l);if(!h)return null;const{type:g,value:f,values:v,minValue:B,maxValue:F,stepValue:P}=h,b=h.default.evaluate(a);let E=b;if(f){const M=a.scope;a.scope=(M||"").split("").slice(1).join(""),E=f.evaluate(a),a.scope=M}return g&&(E=$c(g,E)),E===void 0||B===void 0&&F===void 0&&P===void 0||(typeof E=="number"?E=rn(E,B,F,P):Array.isArray(E)&&(E=E.map(M=>typeof M=="number"?rn(M,B,F,P):M))),f!==void 0&&E!==void 0&&v&&!v.includes(E)&&(E=b,g&&(E=$c(g,E))),(g&&g!==this.type||E!==void 0&&_i(E)!==this.type)&&(E=$c(this.type.kind,E)),E}eachChild(){}outputDefined(){return!1}serialize(){const a=["config",this.key];return this.scope&&a.concat(this.key),a}}function rf(A){if(A instanceof Pa&&(A.name==="get"&&A.args.length===1||A.name==="feature-state"||A.name==="has"&&A.args.length===1||A.name==="properties"||A.name==="geometry-type"||A.name==="id"||/^filter-/.test(A.name))||A instanceof Yc||A instanceof Jc)return!1;let a=!0;return A.eachChild(l=>{a&&!rf(l)&&(a=!1)}),a}function qp(A){if(A instanceof Pa&&A.name==="feature-state")return!1;let a=!0;return A.eachChild(l=>{a&&!qp(l)&&(a=!1)}),a}function Xp(A){if(A instanceof ch)return new Set([A.key]);let a=new Set;return A.eachChild(l=>{a=new Set([...a,...Xp(l)])}),a}function nf(A,a){if(A instanceof Pa&&a.indexOf(A.name)>=0)return!1;let l=!0;return A.eachChild(h=>{l&&!nf(h,a)&&(l=!1)}),l}class Fn{constructor(a,l){this.type=l.type,this.name=a,this.boundExpression=l}static parse(a,l){if(a.length!==2||typeof a[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const h=a[1];return l.scope.has(h)?new Fn(h,l.scope.get(h)):l.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class H0{constructor(a,l=[],h,g=new vl,f=[],v,B){this.registry=a,this.path=l,this.key=l.map(F=>typeof F=="string"?`['${F}']`:`[${F}]`).join(""),this.scope=g,this.errors=f,this.expectedType=h,this._scope=v,this.options=B}parse(a,l,h,g,f={}){return l||h?this.concat(l,null,h,g)._parse(a,f):this._parse(a,f)}parseObjectValue(a,l,h,g,f,v={}){return this.concat(l,h,g,f)._parse(a,v)}_parse(a,l){function h(g,f,v){return v==="assert"?new Vs(f,[g]):v==="coerce"?new sc(f,[g]):g}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=typeof a[0]=="string"?this.registry[a[0]]:void 0;if(g){let f=g.parse(a,this);if(!f)return null;if(this.expectedType){const v=this.expectedType,B=f.type;if(v.kind!=="string"&&v.kind!=="number"&&v.kind!=="boolean"&&v.kind!=="object"&&v.kind!=="array"||B.kind!=="value")if(v.kind!=="color"&&v.kind!=="formatted"&&v.kind!=="resolvedImage"||B.kind!=="value"&&B.kind!=="string"){if(this.checkSubtype(v,B))return null}else f=h(f,v,l.typeAnnotation||"coerce");else f=h(f,v,l.typeAnnotation||"assert")}if(!(f instanceof Ns)&&f.type.kind!=="resolvedImage"&&j0(f)){const v=new yx(this._scope,this.options);try{f=new Ns(f.type,f.evaluate(v))}catch(B){return this.error(B.message),null}}return f}return sc.parse(["to-array",a],this)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,l,h,g){let f=typeof a=="number"?this.path.concat(a):this.path;f=typeof l=="string"?f.concat(l):f;const v=g?this.scope.concat(g):this.scope;return new H0(this.registry,f,h||null,v,this.errors,this._scope,this.options)}error(a,...l){const h=`${this.key}${l.map(g=>`[${g}]`).join("")}`;this.errors.push(new Eo(h,a))}checkSubtype(a,l){const h=kn(a,l);return h&&this.error(h),h}}var Mx=H0;function j0(A){if(A instanceof Fn)return j0(A.boundExpression);if(A instanceof Pa&&A.name==="error"||A instanceof Lp||A instanceof Yc||A instanceof Jc||A instanceof ch)return!1;const a=A instanceof sc||A instanceof Vs;let l=!0;return A.eachChild(h=>{l=a?l&&j0(h):l&&h instanceof Ns}),!!l&&rf(A)&&nf(A,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function Zp(A,a){const l=A.length-1;let h,g,f=0,v=l,B=0;for(;f<=v;)if(B=Math.floor((f+v)/2),h=A[B],g=A[B+1],h<=a){if(B===l||a<g)return B;f=B+1}else{if(!(h>a))throw new lo("Input is not a number.");v=B-1}return 0}class of{constructor(a,l,h){this.type=a,this.input=l,this.labels=[],this.outputs=[];for(const[g,f]of h)this.labels.push(g),this.outputs.push(f)}static parse(a,l){if(a.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return l.error("Expected an even number of arguments.");const h=l.parse(a[1],1,Kt);if(!h)return null;const g=[];let f=null;l.expectedType&&l.expectedType.kind!=="value"&&(f=l.expectedType);for(let v=1;v<a.length;v+=2){const B=v===1?-1/0:a[v],F=a[v+1],P=v,b=v+1;if(typeof B!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(g.length&&g[g.length-1][0]>=B)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',P);const E=l.parse(F,b,f);if(!E)return null;f=f||E.type,g.push([B,E])}return new of(f,h,g)}evaluate(a){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(a);const g=this.input.evaluate(a);if(g<=l[0])return h[0].evaluate(a);const f=l.length;return g>=l[f-1]?h[f-1].evaluate(a):h[Zp(l,g)].evaluate(a)}eachChild(a){a(this.input);for(const l of this.outputs)a(l)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}serialize(){const a=["step",this.input.serialize()];for(let l=0;l<this.labels.length;l++)l>0&&a.push(this.labels[l]),a.push(this.outputs[l].serialize());return a}}const Px=.95047,Dx=1.08883,kx=4/29,uh=6/29,Rx=3*uh*uh,_T=uh*uh*uh,xT=Math.PI/180,bT=180/Math.PI;function G0(A){return A>_T?Math.pow(A,1/3):A/Rx+kx}function K0(A){return A>uh?A*A*A:Rx*(A-kx)}function W0(A){return 255*(A<=.0031308?12.92*A:1.055*Math.pow(A,1/2.4)-.055)}function q0(A){return(A/=255)<=.04045?A/12.92:Math.pow((A+.055)/1.055,2.4)}function Lx(A){const a=q0(A.r),l=q0(A.g),h=q0(A.b),g=G0((.4124564*a+.3575761*l+.1804375*h)/Px),f=G0((.2126729*a+.7151522*l+.072175*h)/1);return{l:116*f-16,a:500*(g-f),b:200*(f-G0((.0193339*a+.119192*l+.9503041*h)/Dx)),alpha:A.a}}function Ox(A){let a=(A.l+16)/116,l=isNaN(A.a)?a:a+A.a/500,h=isNaN(A.b)?a:a-A.b/200;return a=1*K0(a),l=Px*K0(l),h=Dx*K0(h),new An(W0(3.2404542*l-1.5371385*a-.4985314*h),W0(-.969266*l+1.8760108*a+.041556*h),W0(.0556434*l-.2040259*a+1.0572252*h),A.alpha)}function wT(A,a,l){const h=a-A;return A+l*(h>180||h<-180?h-360*Math.round(h/360):h)}const af={forward:Lx,reverse:Ox,interpolate:function(A,a,l){return{l:cr(A.l,a.l,l),a:cr(A.a,a.a,l),b:cr(A.b,a.b,l),alpha:cr(A.alpha,a.alpha,l)}}},sf={forward:function(A){const{l:a,a:l,b:h}=Lx(A),g=Math.atan2(h,l)*bT;return{h:g<0?g+360:g,c:Math.sqrt(l*l+h*h),l:a,alpha:A.a}},reverse:function(A){const a=A.h*xT,l=A.c;return Ox({l:A.l,a:Math.cos(a)*l,b:Math.sin(a)*l,alpha:A.alpha})},interpolate:function(A,a,l){return{h:wT(A.h,a.h,l),c:cr(A.c,a.c,l),l:cr(A.l,a.l,l),alpha:cr(A.alpha,a.alpha,l)}}};var Ux=Object.freeze({__proto__:null,hcl:sf,lab:af});class rs{constructor(a,l,h,g,f){this.type=a,this.operator=l,this.interpolation=h,this.input=g,this.labels=[],this.outputs=[];for(const[v,B]of f)this.labels.push(v),this.outputs.push(B)}static interpolationFactor(a,l,h,g){let f=0;if(a.name==="exponential")f=X0(l,a.base,h,g);else if(a.name==="linear")f=X0(l,1,h,g);else if(a.name==="cubic-bezier"){const v=a.controlPoints;f=new ko(v[0],v[1],v[2],v[3]).solve(X0(l,1,h,g))}return f}static parse(a,l){let[h,g,f,...v]=a;if(!Array.isArray(g)||g.length===0)return l.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const P=g[1];if(typeof P!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:P}}else{if(g[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const P=g.slice(1);if(P.length!==4||P.some(b=>typeof b!="number"||b<0||b>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:P}}}if(a.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(f=l.parse(f,2,Kt),!f)return null;const B=[];let F=null;h==="interpolate-hcl"||h==="interpolate-lab"?F=Xo:l.expectedType&&l.expectedType.kind!=="value"&&(F=l.expectedType);for(let P=0;P<v.length;P+=2){const b=v[P],E=v[P+1],M=P+3,T=P+4;if(typeof b!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(B.length&&B[B.length-1][0]>=b)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',M);const I=l.parse(E,T,F);if(!I)return null;F=F||I.type,B.push([b,I])}return F.kind==="number"||F.kind==="color"||F.kind==="array"&&F.itemType.kind==="number"&&typeof F.N=="number"?new rs(F,h,g,f,B):l.error(`Type ${$t(F)} is not interpolatable.`)}evaluate(a){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(a);const g=this.input.evaluate(a);if(g<=l[0])return h[0].evaluate(a);const f=l.length;if(g>=l[f-1])return h[f-1].evaluate(a);const v=Zp(l,g),B=rs.interpolationFactor(this.interpolation,g,l[v],l[v+1]),F=h[v].evaluate(a),P=h[v+1].evaluate(a);return this.operator==="interpolate"?Qs[this.type.kind.toLowerCase()](F,P,B):this.operator==="interpolate-hcl"?sf.reverse(sf.interpolate(sf.forward(F),sf.forward(P),B)):af.reverse(af.interpolate(af.forward(F),af.forward(P),B))}eachChild(a){a(this.input);for(const l of this.outputs)a(l)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}serialize(){let a;a=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const l=[this.operator,a,this.input.serialize()];for(let h=0;h<this.labels.length;h++)l.push(this.labels[h],this.outputs[h].serialize());return l}}function X0(A,a,l,h){const g=h-l,f=A-l;return g===0?0:a===1?f/g:(Math.pow(a,f)-1)/(Math.pow(a,g)-1)}class Yp{constructor(a,l){this.type=a,this.args=l}static parse(a,l){if(a.length<2)return l.error("Expectected at least one argument.");let h=null;const g=l.expectedType;g&&g.kind!=="value"&&(h=g);const f=[];for(const B of a.slice(1)){const F=l.parse(B,1+f.length,h,void 0,{typeAnnotation:"omit"});if(!F)return null;h=h||F.type,f.push(F)}const v=g&&f.some(B=>kn(g,B.type));return new Yp(v?Zr:h,f)}evaluate(a){let l,h=null,g=0;for(const f of this.args){if(g++,h=f.evaluate(a),h&&h instanceof Yi&&!h.available&&(l||(l=h),h=null,g===this.args.length))return l;if(h!==null)break}return h}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){const a=["coalesce"];return this.eachChild(l=>{a.push(l.serialize())}),a}}class Jp{constructor(a,l){this.type=l.type,this.bindings=[].concat(a),this.result=l}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const l of this.bindings)a(l[1]);a(this.result)}static parse(a,l){if(a.length<4)return l.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const h=[];for(let f=1;f<a.length-1;f+=2){const v=a[f];if(typeof v!="string")return l.error(`Expected string, but found ${typeof v} instead.`,f);if(/[^a-zA-Z0-9_]/.test(v))return l.error("Variable names must contain only alphanumeric characters or '_'.",f);const B=l.parse(a[f+1],f+1);if(!B)return null;h.push([v,B])}const g=l.parse(a[a.length-1],a.length-1,l.expectedType,h);return g?new Jp(h,g):null}outputDefined(){return this.result.outputDefined()}serialize(){const a=["let"];for(const[l,h]of this.bindings)a.push(l,h.serialize());return a.push(this.result.serialize()),a}}class Z0{constructor(a,l,h){this.type=a,this.index=l,this.input=h}static parse(a,l){if(a.length!==3)return l.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const h=l.parse(a[1],1,Kt),g=l.parse(a[2],2,wt(l.expectedType||Zr));return h&&g?new Z0(g.type.itemType,h,g):null}evaluate(a){const l=this.index.evaluate(a),h=this.input.evaluate(a);if(l<0)throw new lo(`Array index out of bounds: ${l} < 0.`);if(l>=h.length)throw new lo(`Array index out of bounds: ${l} > ${h.length-1}.`);if(l!==Math.floor(l))throw new lo(`Array index must be an integer, but found ${l} instead.`);return h[l]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class Y0{constructor(a,l){this.type=Wr,this.needle=a,this.haystack=l}static parse(a,l){if(a.length!==3)return l.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const h=l.parse(a[1],1,Zr),g=l.parse(a[2],2,Zr);return h&&g?Xn(h.type,[Wr,Xr,Kt,Ja,Zr])?new Y0(h,g):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${$t(h.type)} instead`):null}evaluate(a){const l=this.needle.evaluate(a),h=this.haystack.evaluate(a);if(h==null)return!1;if(!fn(l,["boolean","string","number","null"]))throw new lo(`Expected first argument to be of type boolean, string, number or null, but found ${$t(_i(l))} instead.`);if(!fn(h,["string","array"]))throw new lo(`Expected second argument to be of type array or string, but found ${$t(_i(h))} instead.`);return h.indexOf(l)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class $p{constructor(a,l,h){this.type=Kt,this.needle=a,this.haystack=l,this.fromIndex=h}static parse(a,l){if(a.length<=2||a.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const h=l.parse(a[1],1,Zr),g=l.parse(a[2],2,Zr);if(!h||!g)return null;if(!Xn(h.type,[Wr,Xr,Kt,Ja,Zr]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${$t(h.type)} instead`);if(a.length===4){const f=l.parse(a[3],3,Kt);return f?new $p(h,g,f):null}return new $p(h,g)}evaluate(a){const l=this.needle.evaluate(a),h=this.haystack.evaluate(a);if(!fn(l,["boolean","string","number","null"]))throw new lo(`Expected first argument to be of type boolean, string, number or null, but found ${$t(_i(l))} instead.`);if(!fn(h,["string","array"]))throw new lo(`Expected second argument to be of type array or string, but found ${$t(_i(h))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(a);return h.indexOf(l,g)}return h.indexOf(l)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const a=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),a]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class J0{constructor(a,l,h,g,f,v){this.inputType=a,this.type=l,this.input=h,this.cases=g,this.outputs=f,this.otherwise=v}static parse(a,l){if(a.length<5)return l.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return l.error("Expected an even number of arguments.");let h,g;l.expectedType&&l.expectedType.kind!=="value"&&(g=l.expectedType);const f={},v=[];for(let P=2;P<a.length-1;P+=2){let b=a[P];const E=a[P+1];Array.isArray(b)||(b=[b]);const M=l.concat(P);if(b.length===0)return M.error("Expected at least one branch label.");for(const I of b){if(typeof I!="number"&&typeof I!="string")return M.error("Branch labels must be numbers or strings.");if(typeof I=="number"&&Math.abs(I)>Number.MAX_SAFE_INTEGER)return M.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof I=="number"&&Math.floor(I)!==I)return M.error("Numeric branch labels must be integer values.");if(h){if(M.checkSubtype(h,_i(I)))return null}else h=_i(I);if(f[String(I)]!==void 0)return M.error("Branch labels must be unique.");f[String(I)]=v.length}const T=l.parse(E,P,g);if(!T)return null;g=g||T.type,v.push(T)}const B=l.parse(a[1],1,Zr);if(!B)return null;const F=l.parse(a[a.length-1],a.length-1,g);return F?B.type.kind!=="value"&&l.concat(1).checkSubtype(h,B.type)?null:new J0(h,g,B,f,v,F):null}evaluate(a){const l=this.input.evaluate(a);return(_i(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every(a=>a.outputDefined())&&this.otherwise.outputDefined()}serialize(){const a=["match",this.input.serialize()],l=Object.keys(this.cases).sort(),h=[],g={};for(const v of l){const B=g[this.cases[v]];B===void 0?(g[this.cases[v]]=h.length,h.push([this.cases[v],[v]])):h[B][1].push(v)}const f=v=>this.inputType.kind==="number"?Number(v):v;for(const[v,B]of h)a.push(B.length===1?f(B[0]):B.map(f)),a.push(this.outputs[v].serialize());return a.push(this.otherwise.serialize()),a}}class lf{constructor(a,l,h){this.type=a,this.branches=l,this.otherwise=h}static parse(a,l){if(a.length<4)return l.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return l.error("Expected an odd number of arguments.");let h;l.expectedType&&l.expectedType.kind!=="value"&&(h=l.expectedType);const g=[];for(let v=1;v<a.length-1;v+=2){const B=l.parse(a[v],v,Wr);if(!B)return null;const F=l.parse(a[v+1],v+1,h);if(!F)return null;g.push([B,F]),h=h||F.type}const f=l.parse(a[a.length-1],a.length-1,h);return f?new lf(h,g,f):null}evaluate(a){for(const[l,h]of this.branches)if(l.evaluate(a))return h.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[l,h]of this.branches)a(l),a(h);a(this.otherwise)}outputDefined(){return this.branches.every(([a,l])=>l.outputDefined())&&this.otherwise.outputDefined()}serialize(){const a=["case"];return this.eachChild(l=>{a.push(l.serialize())}),a}}class em{constructor(a,l,h,g){this.type=a,this.input=l,this.beginIndex=h,this.endIndex=g}static parse(a,l){if(a.length<=2||a.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const h=l.parse(a[1],1,Zr),g=l.parse(a[2],2,Kt);if(!h||!g)return null;if(!Xn(h.type,[wt(Zr),Xr,Zr]))return l.error(`Expected first argument to be of type array or string, but found ${$t(h.type)} instead`);if(a.length===4){const f=l.parse(a[3],3,Kt);return f?new em(h.type,h,g,f):null}return new em(h.type,h,g)}evaluate(a){const l=this.input.evaluate(a),h=this.beginIndex.evaluate(a);if(!fn(l,["string","array"]))throw new lo(`Expected first argument to be of type array or string, but found ${$t(_i(l))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(a);return l.slice(h,g)}return l.slice(h)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const a=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),a]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function $0(A,a){return A==="=="||A==="!="?a.kind==="boolean"||a.kind==="string"||a.kind==="number"||a.kind==="null"||a.kind==="value":a.kind==="string"||a.kind==="number"||a.kind==="value"}function zx(A,a,l,h){return h.compare(a,l)===0}function Ah(A,a,l){const h=A!=="=="&&A!=="!=";return class Mq{constructor(f,v,B){this.type=Wr,this.lhs=f,this.rhs=v,this.collator=B,this.hasUntypedArgument=f.type.kind==="value"||v.type.kind==="value"}static parse(f,v){if(f.length!==3&&f.length!==4)return v.error("Expected two or three arguments.");const B=f[0];let F=v.parse(f[1],1,Zr);if(!F)return null;if(!$0(B,F.type))return v.concat(1).error(`"${B}" comparisons are not supported for type '${$t(F.type)}'.`);let P=v.parse(f[2],2,Zr);if(!P)return null;if(!$0(B,P.type))return v.concat(2).error(`"${B}" comparisons are not supported for type '${$t(P.type)}'.`);if(F.type.kind!==P.type.kind&&F.type.kind!=="value"&&P.type.kind!=="value")return v.error(`Cannot compare types '${$t(F.type)}' and '${$t(P.type)}'.`);h&&(F.type.kind==="value"&&P.type.kind!=="value"?F=new Vs(P.type,[F]):F.type.kind!=="value"&&P.type.kind==="value"&&(P=new Vs(F.type,[P])));let b=null;if(f.length===4){if(F.type.kind!=="string"&&P.type.kind!=="string"&&F.type.kind!=="value"&&P.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(b=v.parse(f[3],3,JA),!b)return null}return new Mq(F,P,b)}evaluate(f){const v=this.lhs.evaluate(f),B=this.rhs.evaluate(f);if(h&&this.hasUntypedArgument){const F=_i(v),P=_i(B);if(F.kind!==P.kind||F.kind!=="string"&&F.kind!=="number")throw new lo(`Expected arguments for "${A}" to be (string, string) or (number, number), but found (${F.kind}, ${P.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const F=_i(v),P=_i(B);if(F.kind!=="string"||P.kind!=="string")return a(f,v,B)}return this.collator?l(f,v,B,this.collator.evaluate(f)):a(f,v,B)}eachChild(f){f(this.lhs),f(this.rhs),this.collator&&f(this.collator)}outputDefined(){return!0}serialize(){const f=[A];return this.eachChild(v=>{f.push(v.serialize())}),f}}}const BT=Ah("==",function(A,a,l){return a===l},zx),Qx=Ah("!=",function(A,a,l){return a!==l},function(A,a,l,h){return!zx(0,a,l,h)}),Nx=Ah("<",function(A,a,l){return a<l},function(A,a,l,h){return h.compare(a,l)<0}),hh=Ah(">",function(A,a,l){return a>l},function(A,a,l,h){return h.compare(a,l)>0}),Vx=Ah("<=",function(A,a,l){return a<=l},function(A,a,l,h){return h.compare(a,l)<=0}),Hx=Ah(">=",function(A,a,l){return a>=l},function(A,a,l,h){return h.compare(a,l)>=0});class ev{constructor(a,l,h,g,f,v){this.type=Xr,this.number=a,this.locale=l,this.currency=h,this.unit=g,this.minFractionDigits=f,this.maxFractionDigits=v}static parse(a,l){if(a.length!==3)return l.error("Expected two arguments.");const h=l.parse(a[1],1,Kt);if(!h)return null;const g=a[2];if(typeof g!="object"||Array.isArray(g))return l.error("NumberFormat options argument must be an object.");let f=null;if(g.locale&&(f=l.parseObjectValue(g.locale,2,"locale",Xr),!f))return null;let v=null;if(g.currency&&(v=l.parseObjectValue(g.currency,2,"currency",Xr),!v))return null;let B=null;if(g.unit&&(B=l.parseObjectValue(g.unit,2,"unit",Xr),!B))return null;let F=null;if(g["min-fraction-digits"]&&(F=l.parseObjectValue(g["min-fraction-digits"],2,"min-fraction-digits",Kt),!F))return null;let P=null;return g["max-fraction-digits"]&&(P=l.parseObjectValue(g["max-fraction-digits"],2,"max-fraction-digits",Kt),!P)?null:new ev(h,f,v,B,F,P)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(a):void 0,unit:this.unit?this.unit.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.unit&&a(this.unit),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const a={};return this.locale&&(a.locale=this.locale.serialize()),this.currency&&(a.currency=this.currency.serialize()),this.unit&&(a.unit=this.unit.serialize()),this.minFractionDigits&&(a["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(a["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),a]}}class cf{constructor(a){this.type=Kt,this.input=a}static parse(a,l){if(a.length!==2)return l.error(`Expected 1 argument, but found ${a.length-1} instead.`);const h=l.parse(a[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${$t(h.type)} instead.`):new cf(h):null}evaluate(a){const l=this.input.evaluate(a);if(typeof l=="string"||Array.isArray(l))return l.length;throw new lo(`Expected value to be of type string or array, but found ${$t(_i(l))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}serialize(){const a=["length"];return this.eachChild(l=>{a.push(l.serialize())}),a}}function tm(A){return function(){A=1831565813+(A|=0)|0;let a=Math.imul(A^A>>>15,1|A);return a=a+Math.imul(a^a>>>7,61|a)^a,((a^a>>>14)>>>0)/4294967296}}const dh={"==":BT,"!=":Qx,">":hh,"<":Nx,">=":Hx,"<=":Vx,array:Vs,at:Z0,boolean:Vs,case:lf,coalesce:Yp,collator:Lp,format:eh,image:Ku,in:Y0,"index-of":$p,interpolate:rs,"interpolate-hcl":rs,"interpolate-lab":rs,length:cf,let:Jp,literal:Ns,match:J0,number:Vs,"number-format":ev,object:Vs,slice:em,step:of,string:Vs,"to-boolean":sc,"to-color":sc,"to-number":sc,"to-string":sc,var:Fn,within:Yc,distance:Jc,config:ch};function jx(A,[a,l,h,g]){a=a.evaluate(A),l=l.evaluate(A),h=h.evaluate(A);const f=g?g.evaluate(A):1,v=$A(a,l,h,f);if(v)throw new lo(v);return new An(a/255*f,l/255*f,h/255*f,f)}function tv(A,[a,l,h,g]){a=a.evaluate(A),l=l.evaluate(A),h=h.evaluate(A);const f=g?g.evaluate(A):1,v=function(P,b,E,M){return typeof P=="number"&&P>=0&&P<=360?typeof b=="number"&&b>=0&&b<=100&&typeof E=="number"&&E>=0&&E<=100?M===void 0||typeof M=="number"&&M>=0&&M<=1?null:`Invalid hsla value [${[P,b,E,M].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof M=="number"?[P,b,E,M]:[P,b,E]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof M=="number"?[P,b,E,M]:[P,b,E]).join(", ")}]: 'h' must be between 0 and 360.`}(a,l,h,f);if(v)throw new lo(v);const B=`hsla(${a}, ${l}%, ${h}%, ${f})`,F=An.parse(B);if(!F)throw new lo(`Failed to parse HSLA color: ${B}`);return F}function rv(A,a){return A in a}function nv(A,a){const l=a[A];return l===void 0?null:l}function Zu(A){return{type:A}}function Gx(A){return{result:"success",value:A}}function eu(A){return{result:"error",value:A}}function iv(A,a){return!!A&&!!A.parameters&&A.parameters.indexOf(a)>-1}function rm(A){return A["property-type"]==="data-driven"}function ov(A){return iv(A.expression,"measure-light")}function Kx(A){return iv(A.expression,"zoom")}function av(A){return!!A.expression&&A.expression.interpolated}function nm(A){return typeof A=="object"&&A!==null&&!Array.isArray(A)}function Wx(A){return A}function qx(A,a){const l=a.type==="color",h=A.stops&&typeof A.stops[0][0]=="object",g=h||!(h||A.property!==void 0),f=A.type||(av(a)?"exponential":"interval");if(l&&((A=ac({},A)).stops&&(A.stops=A.stops.map(P=>[P[0],An.parse(P[1])])),A.default=An.parse(A.default?A.default:a.default)),A.colorSpace&&A.colorSpace!=="rgb"&&!Ux[A.colorSpace])throw new Error(`Unknown color space: ${A.colorSpace}`);let v,B,F;if(f==="exponential")v=Zx;else if(f==="interval")v=Xx;else if(f==="categorical"){v=CT,B=Object.create(null);for(const P of A.stops)B[P[0]]=P[1];F=typeof A.stops[0][0]}else{if(f!=="identity")throw new Error(`Unknown function type "${f}"`);v=ST}if(h){const P={},b=[];for(let T=0;T<A.stops.length;T++){const I=A.stops[T],R=I[0].zoom;P[R]===void 0&&(P[R]={zoom:R,type:A.type,property:A.property,default:A.default,stops:[]},b.push(R)),P[R].stops.push([I[0].value,I[1]])}const E=[];for(const T of b)E.push([P[T].zoom,qx(P[T],a)]);const M={name:"linear"};return{kind:"composite",interpolationType:M,interpolationFactor:rs.interpolationFactor.bind(void 0,M),zoomStops:E.map(T=>T[0]),evaluate:({zoom:T},I)=>Zx({stops:E,base:A.base},a,T).evaluate(T,I)}}if(g){const P=f==="exponential"?{name:"exponential",base:A.base!==void 0?A.base:1}:null;return{kind:"camera",interpolationType:P,interpolationFactor:rs.interpolationFactor.bind(void 0,P),zoomStops:A.stops.map(b=>b[0]),evaluate:({zoom:b})=>v(A,a,b,B,F)}}return{kind:"source",evaluate(P,b){const E=b&&b.properties?b.properties[A.property]:void 0;return E===void 0?uf(A.default,a.default):v(A,a,E,B,F)}}}function uf(A,a,l){return A!==void 0?A:a!==void 0?a:l!==void 0?l:void 0}function CT(A,a,l,h,g){return uf(typeof l===g?h[l]:void 0,A.default,a.default)}function Xx(A,a,l){if(Wu(l)!=="number")return uf(A.default,a.default);const h=A.stops.length;if(h===1||l<=A.stops[0][0])return A.stops[0][1];if(l>=A.stops[h-1][0])return A.stops[h-1][1];const g=Zp(A.stops.map(f=>f[0]),l);return A.stops[g][1]}function Zx(A,a,l){const h=A.base!==void 0?A.base:1;if(Wu(l)!=="number")return uf(A.default,a.default);const g=A.stops.length;if(g===1||l<=A.stops[0][0])return A.stops[0][1];if(l>=A.stops[g-1][0])return A.stops[g-1][1];const f=Zp(A.stops.map(b=>b[0]),l),v=function(b,E,M,T){const I=T-M,R=b-M;return I===0?0:E===1?R/I:(Math.pow(E,R)-1)/(Math.pow(E,I)-1)}(l,h,A.stops[f][0],A.stops[f+1][0]),B=A.stops[f][1],F=A.stops[f+1][1];let P=Qs[a.type]||Wx;if(A.colorSpace&&A.colorSpace!=="rgb"){const b=Ux[A.colorSpace];P=(E,M)=>b.reverse(b.interpolate(b.forward(E),b.forward(M),v))}return typeof B.evaluate=="function"?{evaluate(...b){const E=B.evaluate.apply(void 0,b),M=F.evaluate.apply(void 0,b);if(E!==void 0&&M!==void 0)return P(E,M,v)}}:P(B,F,v)}function ST(A,a,l){return a.type==="color"?l=An.parse(l):a.type==="formatted"?l=$n.fromString(l.toString()):a.type==="resolvedImage"?l=Yi.fromString(l.toString()):Wu(l)===a.type||a.type==="enum"&&a.values[l]||(l=void 0),uf(l,A.default,a.default)}Pa.register(dh,{error:[{kind:"error"},[Xr],(A,[a])=>{throw new lo(a.evaluate(A))}],typeof:[Xr,[Zr],(A,[a])=>$t(_i(a.evaluate(A)))],"to-rgba":[wt(Kt,4),[Xo],(A,[a])=>a.evaluate(A).toRenderColor(null).toArray()],rgb:[Xo,[Kt,Kt,Kt],jx],rgba:[Xo,[Kt,Kt,Kt,Kt],jx],hsl:[Xo,[Kt,Kt,Kt],tv],hsla:[Xo,[Kt,Kt,Kt,Kt],tv],has:{type:Wr,overloads:[[[Xr],(A,[a])=>rv(a.evaluate(A),A.properties())],[[Xr,To],(A,[a,l])=>rv(a.evaluate(A),l.evaluate(A))]]},get:{type:Zr,overloads:[[[Xr],(A,[a])=>nv(a.evaluate(A),A.properties())],[[Xr,To],(A,[a,l])=>nv(a.evaluate(A),l.evaluate(A))]]},"feature-state":[Zr,[Xr],(A,[a])=>nv(a.evaluate(A),A.featureState||{})],properties:[To,[],A=>A.properties()],"geometry-type":[Xr,[],A=>A.geometryType()],id:[Zr,[],A=>A.id()],zoom:[Kt,[],A=>A.globals.zoom],pitch:[Kt,[],A=>A.globals.pitch||0],"distance-from-center":[Kt,[],A=>A.distanceFromCenter()],"measure-light":[Kt,[Xr],(A,[a])=>A.measureLight(a.evaluate(A))],"heatmap-density":[Kt,[],A=>A.globals.heatmapDensity||0],"line-progress":[Kt,[],A=>A.globals.lineProgress||0],"raster-value":[Kt,[],A=>A.globals.rasterValue||0],"raster-particle-speed":[Kt,[],A=>A.globals.rasterParticleSpeed||0],"sky-radial-progress":[Kt,[],A=>A.globals.skyRadialProgress||0],accumulated:[Zr,[],A=>A.globals.accumulated===void 0?null:A.globals.accumulated],"+":[Kt,Zu(Kt),(A,a)=>{let l=0;for(const h of a)l+=h.evaluate(A);return l}],"*":[Kt,Zu(Kt),(A,a)=>{let l=1;for(const h of a)l*=h.evaluate(A);return l}],"-":{type:Kt,overloads:[[[Kt,Kt],(A,[a,l])=>a.evaluate(A)-l.evaluate(A)],[[Kt],(A,[a])=>-a.evaluate(A)]]},"/":[Kt,[Kt,Kt],(A,[a,l])=>a.evaluate(A)/l.evaluate(A)],"%":[Kt,[Kt,Kt],(A,[a,l])=>a.evaluate(A)%l.evaluate(A)],ln2:[Kt,[],()=>Math.LN2],pi:[Kt,[],()=>Math.PI],e:[Kt,[],()=>Math.E],"^":[Kt,[Kt,Kt],(A,[a,l])=>Math.pow(a.evaluate(A),l.evaluate(A))],sqrt:[Kt,[Kt],(A,[a])=>Math.sqrt(a.evaluate(A))],log10:[Kt,[Kt],(A,[a])=>Math.log(a.evaluate(A))/Math.LN10],ln:[Kt,[Kt],(A,[a])=>Math.log(a.evaluate(A))],log2:[Kt,[Kt],(A,[a])=>Math.log(a.evaluate(A))/Math.LN2],sin:[Kt,[Kt],(A,[a])=>Math.sin(a.evaluate(A))],cos:[Kt,[Kt],(A,[a])=>Math.cos(a.evaluate(A))],tan:[Kt,[Kt],(A,[a])=>Math.tan(a.evaluate(A))],asin:[Kt,[Kt],(A,[a])=>Math.asin(a.evaluate(A))],acos:[Kt,[Kt],(A,[a])=>Math.acos(a.evaluate(A))],atan:[Kt,[Kt],(A,[a])=>Math.atan(a.evaluate(A))],min:[Kt,Zu(Kt),(A,a)=>Math.min(...a.map(l=>l.evaluate(A)))],max:[Kt,Zu(Kt),(A,a)=>Math.max(...a.map(l=>l.evaluate(A)))],abs:[Kt,[Kt],(A,[a])=>Math.abs(a.evaluate(A))],round:[Kt,[Kt],(A,[a])=>{const l=a.evaluate(A);return l<0?-Math.round(-l):Math.round(l)}],floor:[Kt,[Kt],(A,[a])=>Math.floor(a.evaluate(A))],ceil:[Kt,[Kt],(A,[a])=>Math.ceil(a.evaluate(A))],"filter-==":[Wr,[Xr,Zr],(A,[a,l])=>A.properties()[a.value]===l.value],"filter-id-==":[Wr,[Zr],(A,[a])=>A.id()===a.value],"filter-type-==":[Wr,[Xr],(A,[a])=>A.geometryType()===a.value],"filter-<":[Wr,[Xr,Zr],(A,[a,l])=>{const h=A.properties()[a.value],g=l.value;return typeof h==typeof g&&h<g}],"filter-id-<":[Wr,[Zr],(A,[a])=>{const l=A.id(),h=a.value;return typeof l==typeof h&&l<h}],"filter->":[Wr,[Xr,Zr],(A,[a,l])=>{const h=A.properties()[a.value],g=l.value;return typeof h==typeof g&&h>g}],"filter-id->":[Wr,[Zr],(A,[a])=>{const l=A.id(),h=a.value;return typeof l==typeof h&&l>h}],"filter-<=":[Wr,[Xr,Zr],(A,[a,l])=>{const h=A.properties()[a.value],g=l.value;return typeof h==typeof g&&h<=g}],"filter-id-<=":[Wr,[Zr],(A,[a])=>{const l=A.id(),h=a.value;return typeof l==typeof h&&l<=h}],"filter->=":[Wr,[Xr,Zr],(A,[a,l])=>{const h=A.properties()[a.value],g=l.value;return typeof h==typeof g&&h>=g}],"filter-id->=":[Wr,[Zr],(A,[a])=>{const l=A.id(),h=a.value;return typeof l==typeof h&&l>=h}],"filter-has":[Wr,[Zr],(A,[a])=>a.value in A.properties()],"filter-has-id":[Wr,[],A=>A.id()!==null&&A.id()!==void 0],"filter-type-in":[Wr,[wt(Xr)],(A,[a])=>a.value.indexOf(A.geometryType())>=0],"filter-id-in":[Wr,[wt(Zr)],(A,[a])=>a.value.indexOf(A.id())>=0],"filter-in-small":[Wr,[Xr,wt(Zr)],(A,[a,l])=>l.value.indexOf(A.properties()[a.value])>=0],"filter-in-large":[Wr,[Xr,wt(Zr)],(A,[a,l])=>function(h,g,f,v){for(;f<=v;){const B=f+v>>1;if(g[B]===h)return!0;g[B]>h?v=B-1:f=B+1}return!1}(A.properties()[a.value],l.value,0,l.value.length-1)],all:{type:Wr,overloads:[[[Wr,Wr],(A,[a,l])=>a.evaluate(A)&&l.evaluate(A)],[Zu(Wr),(A,a)=>{for(const l of a)if(!l.evaluate(A))return!1;return!0}]]},any:{type:Wr,overloads:[[[Wr,Wr],(A,[a,l])=>a.evaluate(A)||l.evaluate(A)],[Zu(Wr),(A,a)=>{for(const l of a)if(l.evaluate(A))return!0;return!1}]]},"!":[Wr,[Wr],(A,[a])=>!a.evaluate(A)],"is-supported-script":[Wr,[Xr],(A,[a])=>{const l=A.globals&&A.globals.isSupportedScript;return!l||l(a.evaluate(A))}],upcase:[Xr,[Xr],(A,[a])=>a.evaluate(A).toUpperCase()],downcase:[Xr,[Xr],(A,[a])=>a.evaluate(A).toLowerCase()],concat:[Xr,Zu(Zr),(A,a)=>a.map(l=>la(l.evaluate(A))).join("")],"resolved-locale":[Xr,[JA],(A,[a])=>a.evaluate(A).resolvedLocale()],random:[Kt,[Kt,Kt,Zr],(A,a)=>{const[l,h,g]=a.map(v=>v.evaluate(A));if(l>h||l===h)return l;let f;if(typeof g=="string")f=function(v){let B=0;if(v.length===0)return B;for(let F=0;F<v.length;F++)B=(B<<5)-B+v.charCodeAt(F),B|=0;return B}(g);else{if(typeof g!="number")throw new lo(`Invalid seed input: ${g}`);f=g}return l+tm(f)()*(h-l)}]});class im{constructor(a,l,h,g){this.expression=a,this._warningHistory={},this._evaluator=new yx(h,g),this._defaultValue=l?function(f){return f.type==="color"&&(nm(f.default)||Array.isArray(f.default))?new An(0,0,0,0):f.type==="color"?An.parse(f.default)||null:f.default===void 0?null:f.default}(l):null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(a,l,h,g,f,v,B,F){return this._evaluator.globals=a,this._evaluator.feature=l,this._evaluator.featureState=h,this._evaluator.canonical=g||null,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=v,this._evaluator.featureTileCoord=B||null,this._evaluator.featureDistanceData=F||null,this.expression.evaluate(this._evaluator)}evaluate(a,l,h,g,f,v,B,F){this._evaluator.globals=a,this._evaluator.feature=l||null,this._evaluator.featureState=h||null,this._evaluator.canonical=g||null,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=v||null,this._evaluator.featureTileCoord=B||null,this._evaluator.featureDistanceData=F||null;try{const P=this.expression.evaluate(this._evaluator);if(P==null||typeof P=="number"&&P!=P)return this._defaultValue;if(this._enumValues&&!(P in this._enumValues))throw new lo(`Expected value to be one of ${Object.keys(this._enumValues).map(b=>JSON.stringify(b)).join(", ")}, but found ${JSON.stringify(P)} instead.`);return P}catch(P){return this._warningHistory[P.message]||(this._warningHistory[P.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${P.message}`)),this._defaultValue}}}function om(A){return Array.isArray(A)&&A.length>0&&typeof A[0]=="string"&&A[0]in dh}function Af(A,a,l,h){const g=new Mx(dh,[],a?function(v){const B={color:Xo,string:Xr,number:Kt,enum:Xr,boolean:Wr,formatted:Ne,resolvedImage:st};return v.type==="array"?wt(B[v.value]||Zr,v.length):B[v.type]}(a):void 0,void 0,void 0,l,h),f=g.parse(A,void 0,void 0,void 0,a&&a.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?Gx(new im(f,a,l,h)):eu(g.errors)}class sv{constructor(a,l,h){this.kind=a,this._styleExpression=l,this.isLightConstant=h,this.isStateDependent=a!=="constant"&&!qp(l.expression),this.configDependencies=Xp(l.expression)}evaluateWithoutErrorHandling(a,l,h,g,f,v){return this._styleExpression.evaluateWithoutErrorHandling(a,l,h,g,f,v)}evaluate(a,l,h,g,f,v){return this._styleExpression.evaluate(a,l,h,g,f,v)}}class yl{constructor(a,l,h,g,f){this.kind=a,this.zoomStops=h,this._styleExpression=l,this.isStateDependent=a!=="camera"&&!qp(l.expression),this.isLightConstant=f,this.configDependencies=Xp(l.expression),this.interpolationType=g}evaluateWithoutErrorHandling(a,l,h,g,f,v){return this._styleExpression.evaluateWithoutErrorHandling(a,l,h,g,f,v)}evaluate(a,l,h,g,f,v){return this._styleExpression.evaluate(a,l,h,g,f,v)}interpolationFactor(a,l,h){return this.interpolationType?rs.interpolationFactor(this.interpolationType,a,l,h):0}}function Yx(A,a,l,h){if((A=Af(A,a,l,h)).result==="error")return A;const g=A.value.expression,f=rf(g);if(!f&&!rm(a))return eu([new Eo("","data expressions not supported")]);const v=nf(g,["zoom","pitch","distance-from-center"]);if(!v&&!Kx(a))return eu([new Eo("","zoom expressions not supported")]);const B=nf(g,["measure-light"]);if(!B&&!ov(a))return eu([new Eo("","measure-light expression not supported")]);const F=a.expression&&a.expression.relaxZoomRestriction,P=sm(g);return P||v||F?P instanceof Eo?eu([P]):P instanceof rs&&!av(a)?eu([new Eo("",'"interpolate" expressions cannot be used with this property')]):Gx(P?new yl(f?"camera":"composite",A.value,P.labels,P instanceof rs?P.interpolation:void 0,B):new sv(f?"constant":"source",A.value,B)):eu([new Eo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class am{constructor(a,l){this._parameters=a,this._specification=l,ac(this,qx(this._parameters,this._specification))}static deserialize(a){return new am(a._parameters,a._specification)}static serialize(a){return{_parameters:a._parameters,_specification:a._specification}}}function sm(A){let a=null;if(A instanceof Jp)a=sm(A.result);else if(A instanceof Yp){for(const l of A.args)if(a=sm(l),a)break}else(A instanceof of||A instanceof rs)&&A.input instanceof Pa&&A.input.name==="zoom"&&(a=A);return a instanceof Eo||A.eachChild(l=>{const h=sm(l);h instanceof Eo?a=h:a&&h&&a!==h&&(a=new Eo("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),a}var lm,lv,Jx=function(){if(lv)return lm;lv=1,lm=a;var A=3;function a(l,h,g){var f=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;var v=new Int32Array(this.arrayBuffer);l=v[0],this.d=(h=v[1])+2*(g=v[2]);for(var B=0;B<this.d*this.d;B++){var F=v[A+B],P=v[A+B+1];f.push(F===P?null:v.subarray(F,P))}var b=v[A+f.length+1];this.keys=v.subarray(v[A+f.length],b),this.bboxes=v.subarray(b),this.insert=this._insertReadonly}else{this.d=h+2*g;for(var E=0;E<this.d*this.d;E++)f.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=l,this.padding=g,this.scale=h/l,this.uid=0;var M=g/h*l;this.min=-M,this.max=l+M}return a.prototype.insert=function(l,h,g,f,v){this._forEachCell(h,g,f,v,this._insertCell,this.uid++),this.keys.push(l),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(f),this.bboxes.push(v)},a.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},a.prototype._insertCell=function(l,h,g,f,v,B){this.cells[v].push(B)},a.prototype.query=function(l,h,g,f,v){var B=this.min,F=this.max;if(l<=B&&h<=B&&F<=g&&F<=f&&!v)return Array.prototype.slice.call(this.keys);var P=[];return this._forEachCell(l,h,g,f,this._queryCell,P,{},v),P},a.prototype._queryCell=function(l,h,g,f,v,B,F,P){var b=this.cells[v];if(b!==null)for(var E=this.keys,M=this.bboxes,T=0;T<b.length;T++){var I=b[T];if(F[I]===void 0){var R=4*I;(P?P(M[R+0],M[R+1],M[R+2],M[R+3]):l<=M[R+2]&&h<=M[R+3]&&g>=M[R+0]&&f>=M[R+1])?(F[I]=!0,B.push(E[I])):F[I]=!1}}},a.prototype._forEachCell=function(l,h,g,f,v,B,F,P){for(var b=this._convertToCellCoord(l),E=this._convertToCellCoord(h),M=this._convertToCellCoord(g),T=this._convertToCellCoord(f),I=b;I<=M;I++)for(var R=E;R<=T;R++){var U=this.d*R+I;if((!P||P(this._convertFromCellCoord(I),this._convertFromCellCoord(R),this._convertFromCellCoord(I+1),this._convertFromCellCoord(R+1)))&&v.call(this,l,h,g,f,U,B,F,P))return}},a.prototype._convertFromCellCoord=function(l){return(l-this.padding)/this.scale},a.prototype._convertToCellCoord=function(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))},a.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var l=this.cells,h=A+this.cells.length+1+1,g=0,f=0;f<this.cells.length;f++)g+=this.cells[f].length;var v=new Int32Array(h+g+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;for(var B=h,F=0;F<l.length;F++){var P=l[F];v[A+F]=B,v.set(P,B),B+=P.length}return v[A+l.length]=B,v.set(this.keys,B),v[A+l.length+1]=B+=this.keys.length,v.set(this.bboxes,B),B+=this.bboxes.length,v.buffer},lm}(),Yu=x(Jx);const fh={};function Wt(A,a,l={}){Object.defineProperty(A,"_classRegistryKey",{value:a,writable:!1}),fh[a]={klass:A,omit:l.omit||[]}}Wt(Object,"Object"),Yu.serialize=function(A,a){const l=A.toArrayBuffer();return a&&a.add(l),{buffer:l}},Yu.deserialize=function(A){return new Yu(A.buffer)},Object.defineProperty(Yu,"name",{value:"Grid"}),Wt(Yu,"Grid"),Wt(An,"Color"),Wt(Error,"Error"),Wt($n,"Formatted"),Wt(Ti,"FormattedSection"),Wt(Gd,"AJAXError"),Wt(Yi,"ResolvedImage"),Wt(am,"StylePropertyFunction"),Wt(im,"StyleExpression",{omit:["_evaluator"]}),Wt(yl,"ZoomDependentExpression"),Wt(sv,"ZoomConstantExpression"),Wt(Pa,"CompoundExpression",{omit:["_evaluate"]});for(const A in dh)fh[dh[A]._classRegistryKey]||Wt(dh[A],`Expression${A}`);function cv(A){return A&&typeof ArrayBuffer<"u"&&(A instanceof ArrayBuffer||A.constructor&&A.constructor.name==="ArrayBuffer")}function $x(A){return self.ImageBitmap&&A instanceof ImageBitmap}function Da(A,a){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp)return A;if(cv(A)||$x(A))return a&&a.add(A),A;if(ArrayBuffer.isView(A)){const l=A;return a&&a.add(l.buffer),l}if(A instanceof ImageData)return a&&a.add(A.data.buffer),A;if(Array.isArray(A)){const l=[];for(const h of A)l.push(Da(h,a));return l}if(A instanceof Map){const l={$name:"Map"};for(const[h,g]of A.entries())l[h]=Da(g);return l}if(A instanceof Set){const l={$name:"Set"};let h=0;for(const g of A.values())l[++h]=Da(g);return l}if(typeof A=="object"){const l=A.constructor,h=l._classRegistryKey;if(!h)throw new Error(`can't serialize object of unregistered class ${h}`);const g=l.serialize?l.serialize(A,a):{};if(!l.serialize){for(const f in A)A.hasOwnProperty(f)&&(fh[h].omit.indexOf(f)>=0||(g[f]=Da(A[f],a)));A instanceof Error&&(g.message=A.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(g.$name=h),g}throw new Error("can't serialize object of type "+typeof A)}function Ju(A){if(A==null||typeof A=="boolean"||typeof A=="number"||typeof A=="string"||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||cv(A)||$x(A)||ArrayBuffer.isView(A)||A instanceof ImageData)return A;if(Array.isArray(A))return A.map(Ju);if(typeof A=="object"){const a=A.$name||"Object";if(a==="Map"){const g=new Map;for(const f of Object.keys(A))f!=="$name"&&g.set(f,Ju(A[f]));return g}if(a==="Set"){const g=new Set;for(const f of Object.keys(A))f!=="$name"&&g.add(Ju(A[f]));return g}const{klass:l}=fh[a];if(!l)throw new Error(`can't deserialize unregistered class ${a}`);if(l.deserialize)return l.deserialize(A);const h=Object.create(l.prototype);for(const g of Object.keys(A))g!=="$name"&&(h[g]=Ju(A[g]));return h}throw new Error("can't deserialize object of type "+typeof A)}const rr={"Latin-1 Supplement":A=>A>=128&&A<=255,Arabic:A=>A>=1536&&A<=1791,"Arabic Supplement":A=>A>=1872&&A<=1919,"Arabic Extended-A":A=>A>=2208&&A<=2303,"Hangul Jamo":A=>A>=4352&&A<=4607,"Unified Canadian Aboriginal Syllabics":A=>A>=5120&&A<=5759,Khmer:A=>A>=6016&&A<=6143,"Unified Canadian Aboriginal Syllabics Extended":A=>A>=6320&&A<=6399,"General Punctuation":A=>A>=8192&&A<=8303,"Letterlike Symbols":A=>A>=8448&&A<=8527,"Number Forms":A=>A>=8528&&A<=8591,"Miscellaneous Technical":A=>A>=8960&&A<=9215,"Control Pictures":A=>A>=9216&&A<=9279,"Optical Character Recognition":A=>A>=9280&&A<=9311,"Enclosed Alphanumerics":A=>A>=9312&&A<=9471,"Geometric Shapes":A=>A>=9632&&A<=9727,"Miscellaneous Symbols":A=>A>=9728&&A<=9983,"Miscellaneous Symbols and Arrows":A=>A>=11008&&A<=11263,"CJK Radicals Supplement":A=>A>=11904&&A<=12031,"Kangxi Radicals":A=>A>=12032&&A<=12255,"Ideographic Description Characters":A=>A>=12272&&A<=12287,"CJK Symbols and Punctuation":A=>A>=12288&&A<=12351,Hiragana:A=>A>=12352&&A<=12447,Katakana:A=>A>=12448&&A<=12543,Bopomofo:A=>A>=12544&&A<=12591,"Hangul Compatibility Jamo":A=>A>=12592&&A<=12687,Kanbun:A=>A>=12688&&A<=12703,"Bopomofo Extended":A=>A>=12704&&A<=12735,"CJK Strokes":A=>A>=12736&&A<=12783,"Katakana Phonetic Extensions":A=>A>=12784&&A<=12799,"Enclosed CJK Letters and Months":A=>A>=12800&&A<=13055,"CJK Compatibility":A=>A>=13056&&A<=13311,"CJK Unified Ideographs Extension A":A=>A>=13312&&A<=19903,"Yijing Hexagram Symbols":A=>A>=19904&&A<=19967,"CJK Unified Ideographs":A=>A>=19968&&A<=40959,"Yi Syllables":A=>A>=40960&&A<=42127,"Yi Radicals":A=>A>=42128&&A<=42191,"Hangul Jamo Extended-A":A=>A>=43360&&A<=43391,"Hangul Syllables":A=>A>=44032&&A<=55215,"Hangul Jamo Extended-B":A=>A>=55216&&A<=55295,"Private Use Area":A=>A>=57344&&A<=63743,"CJK Compatibility Ideographs":A=>A>=63744&&A<=64255,"Arabic Presentation Forms-A":A=>A>=64336&&A<=65023,"Vertical Forms":A=>A>=65040&&A<=65055,"CJK Compatibility Forms":A=>A>=65072&&A<=65103,"Small Form Variants":A=>A>=65104&&A<=65135,"Arabic Presentation Forms-B":A=>A>=65136&&A<=65279,"Halfwidth and Fullwidth Forms":A=>A>=65280&&A<=65519,"CJK Unified Ideographs Extension B":A=>A>=131072&&A<=173791};function cm(A){for(const a of A)if(Am(a.charCodeAt(0)))return!0;return!1}function ET(A){for(const a of A)if(!um(a.charCodeAt(0)))return!1;return!0}function um(A){return!(rr.Arabic(A)||rr["Arabic Supplement"](A)||rr["Arabic Extended-A"](A)||rr["Arabic Presentation Forms-A"](A)||rr["Arabic Presentation Forms-B"](A))}function Am(A){return!(A!==746&&A!==747&&(A<4352||!(rr["Bopomofo Extended"](A)||rr.Bopomofo(A)||rr["CJK Compatibility Forms"](A)&&!(A>=65097&&A<=65103)||rr["CJK Compatibility Ideographs"](A)||rr["CJK Compatibility"](A)||rr["CJK Radicals Supplement"](A)||rr["CJK Strokes"](A)||!(!rr["CJK Symbols and Punctuation"](A)||A>=12296&&A<=12305||A>=12308&&A<=12319||A===12336)||rr["CJK Unified Ideographs Extension A"](A)||rr["CJK Unified Ideographs"](A)||rr["Enclosed CJK Letters and Months"](A)||rr["Hangul Compatibility Jamo"](A)||rr["Hangul Jamo Extended-A"](A)||rr["Hangul Jamo Extended-B"](A)||rr["Hangul Jamo"](A)||rr["Hangul Syllables"](A)||rr.Hiragana(A)||rr["Ideographic Description Characters"](A)||rr.Kanbun(A)||rr["Kangxi Radicals"](A)||rr["Katakana Phonetic Extensions"](A)||rr.Katakana(A)&&A!==12540||!(!rr["Halfwidth and Fullwidth Forms"](A)||A===65288||A===65289||A===65293||A>=65306&&A<=65310||A===65339||A===65341||A===65343||A>=65371&&A<=65503||A===65507||A>=65512&&A<=65519)||!(!rr["Small Form Variants"](A)||A>=65112&&A<=65118||A>=65123&&A<=65126)||rr["Unified Canadian Aboriginal Syllabics"](A)||rr["Unified Canadian Aboriginal Syllabics Extended"](A)||rr["Vertical Forms"](A)||rr["Yijing Hexagram Symbols"](A)||rr["Yi Syllables"](A)||rr["Yi Radicals"](A))))}function hf(A){return!(Am(A)||function(a){return!!(rr["Latin-1 Supplement"](a)&&(a===167||a===169||a===174||a===177||a===188||a===189||a===190||a===215||a===247)||rr["General Punctuation"](a)&&(a===8214||a===8224||a===8225||a===8240||a===8241||a===8251||a===8252||a===8258||a===8263||a===8264||a===8265||a===8273)||rr["Letterlike Symbols"](a)||rr["Number Forms"](a)||rr["Miscellaneous Technical"](a)&&(a>=8960&&a<=8967||a>=8972&&a<=8991||a>=8996&&a<=9e3||a===9003||a>=9085&&a<=9114||a>=9150&&a<=9165||a===9167||a>=9169&&a<=9179||a>=9186&&a<=9215)||rr["Control Pictures"](a)&&a!==9251||rr["Optical Character Recognition"](a)||rr["Enclosed Alphanumerics"](a)||rr["Geometric Shapes"](a)||rr["Miscellaneous Symbols"](a)&&!(a>=9754&&a<=9759)||rr["Miscellaneous Symbols and Arrows"](a)&&(a>=11026&&a<=11055||a>=11088&&a<=11097||a>=11192&&a<=11243)||rr["CJK Symbols and Punctuation"](a)||rr.Katakana(a)||rr["Private Use Area"](a)||rr["CJK Compatibility Forms"](a)||rr["Small Form Variants"](a)||rr["Halfwidth and Fullwidth Forms"](a)||a===8734||a===8756||a===8757||a>=9984&&a<=10087||a>=10102&&a<=10131||a===65532||a===65533)}(A))}function uv(A){return A>=1424&&A<=2303||rr["Arabic Presentation Forms-A"](A)||rr["Arabic Presentation Forms-B"](A)}function TT(A,a){return!(!a&&uv(A)||A>=2304&&A<=3583||A>=3840&&A<=4255||rr.Khmer(A))}function FT(A){for(const a of A)if(uv(a.charCodeAt(0)))return!0;return!1}const df="deferred",ff="loading",hm="loaded";let ph=null,yo="unavailable",tu=null;const eb=function(A){A&&typeof A=="string"&&A.indexOf("NetworkError")>-1&&(yo="error"),ph&&ph(A)};function Av(){hv.fire(new ml("pluginStateChange",{pluginStatus:yo,pluginURL:tu}))}const hv=new Xc,dv=function(){return yo},fv=function(){if(yo!==df||!tu)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");yo=ff,Av(),tu&&qc({url:tu},A=>{A?eb(A):(yo=hm,Av())})},ka={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>yo===hm||ka.applyArabicShaping!=null,isLoading:()=>yo===ff,setState(A){yo=A.pluginStatus,tu=A.pluginURL},isParsed:()=>ka.applyArabicShaping!=null&&ka.processBidirectionalText!=null&&ka.processStyledBidirectionalText!=null,getPluginURL:()=>tu};class xi{constructor(a,l){this.zoom=a,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.transition=l.transition,this.pitch=l.pitch,this.brightness=l.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(a){return function(l,h){for(const g of l)if(!TT(g.charCodeAt(0),h))return!1;return!0}(a,ka.isLoaded())}}class dm{constructor(a,l,h,g){this.property=a,this.value=l,this.expression=function(f,v,B,F){if(nm(f))return new am(f,v);if(om(f)||Array.isArray(f)&&f.length>0){const P=Yx(f,v,B,F);if(P.result==="error")throw new Error(P.value.map(b=>`${b.key}: ${b.message}`).join(", "));return P.value}{let P=f;return typeof f=="string"&&v.type==="color"&&(P=An.parse(f)),{kind:"constant",configDependencies:new Set,evaluate:()=>P}}}(l===void 0?a.specification.default:l,a.specification,h,g)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(a,l,h){return this.property.possiblyEvaluate(this,a,l,h)}}class pv{constructor(a,l,h){this.property=a,this.value=new dm(a,void 0,l,h)}transitioned(a,l){return new rb(this.property,this.value,l,go({},a.transition,this.transition),a.now)}untransitioned(){return new rb(this.property,this.value,null,{},0)}}class tb{constructor(a,l,h){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues),this._scope=l,this._options=h,this.configDependencies=new Set}getValue(a){return Fa(this._values[a].value.value)}setValue(a,l){this._values.hasOwnProperty(a)||(this._values[a]=new pv(this._values[a].property,this._scope,this._options)),this._values[a].value=new dm(this._values[a].property,l===null?void 0:Fa(l),this._scope,this._options),this._values[a].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[a].value.expression.configDependencies]))}setTransitionOrValue(a,l){l&&(this._options=l);const h=this._properties.properties;if(a)for(const g in a){const f=a[g];if(Os(g,"-transition")){const v=g.slice(0,-11);h[v]&&this.setTransition(v,f)}else h.hasOwnProperty(g)&&this.setValue(g,f)}}getTransition(a){return Fa(this._values[a].transition)}setTransition(a,l){this._values.hasOwnProperty(a)||(this._values[a]=new pv(this._values[a].property)),this._values[a].transition=Fa(l)||void 0}serialize(){const a={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(a[l]=h);const g=this.getTransition(l);g!==void 0&&(a[`${l}-transition`]=g)}return a}transitioned(a,l){const h=new nb(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].transitioned(a,l._values[g]);return h}untransitioned(){const a=new nb(this._properties);for(const l of Object.keys(this._values))a._values[l]=this._values[l].untransitioned();return a}}class rb{constructor(a,l,h,g,f){const v=g.delay||0,B=g.duration||0;f=f||0,this.property=a,this.value=l,this.begin=f+v,this.end=this.begin+B,a.specification.transition&&(g.delay||g.duration)&&(this.prior=h)}possiblyEvaluate(a,l,h){const g=a.now||0,f=this.value.possiblyEvaluate(a,l,h),v=this.prior;if(v){if(g>this.end)return this.prior=null,f;if(this.value.isDataDriven())return this.prior=null,f;if(g<this.begin)return v.possiblyEvaluate(a,l,h);{const B=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(a,l,h),f,mo(B))}}return f}}class nb{constructor(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)}possiblyEvaluate(a,l,h){const g=new gh(this._properties);for(const f of Object.keys(this._values))g._values[f]=this._values[f].possiblyEvaluate(a,l,h);return g}hasTransition(){for(const a of Object.keys(this._values))if(this._values[a].prior)return!0;return!1}}class IT{constructor(a,l,h){this._properties=a,this._values=Object.create(a.defaultPropertyValues),this._scope=l,this._options=h,this.configDependencies=new Set}getValue(a){return Fa(this._values[a].value)}setValue(a,l){this._values[a]=new dm(this._values[a].property,l===null?void 0:Fa(l),this._scope,this._options),this._values[a].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[a].expression.configDependencies]))}serialize(){const a={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(a[l]=h)}return a}possiblyEvaluate(a,l,h){const g=new gh(this._properties);for(const f of Object.keys(this._values))g._values[f]=this._values[f].possiblyEvaluate(a,l,h);return g}}class mh{constructor(a,l,h){this.property=a,this.value=l,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(a){return this.value.kind==="constant"?this.value.value:a}evaluate(a,l,h,g){return this.property.evaluate(this.value,this.parameters,a,l,h,g)}}class gh{constructor(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)}get(a){return this._values[a]}}class kt{constructor(a){this.specification=a}possiblyEvaluate(a,l){return a.expression.evaluate(l)}interpolate(a,l,h){const g=Qs[this.specification.type];return g?g(a,l,h):a}}class nr{constructor(a,l){this.specification=a,this.overrides=l}possiblyEvaluate(a,l,h,g){return new mh(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(l,null,{},h,g)}:a.expression,l)}interpolate(a,l,h){if(a.value.kind!=="constant"||l.value.kind!=="constant")return a;if(a.value.value===void 0||l.value.value===void 0)return new mh(this,{kind:"constant",value:void 0},a.parameters);const g=Qs[this.specification.type];return g?new mh(this,{kind:"constant",value:g(a.value.value,l.value.value,h)},a.parameters):a}evaluate(a,l,h,g,f,v){return a.kind==="constant"?a.value:a.evaluate(l,h,g,f,v)}}class Hs{constructor(a){this.specification=a}possiblyEvaluate(a,l,h,g){return!!a.expression.evaluate(l,null,{},h,g)}interpolate(){return!1}}class ri{constructor(a){this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const l=new xi(0,{});for(const h in a){const g=a[h];g.specification.overridable&&this.overridableProperties.push(h);const f=this.defaultPropertyValues[h]=new dm(g,void 0),v=this.defaultTransitionablePropertyValues[h]=new pv(g);this.defaultTransitioningPropertyValues[h]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=f.possiblyEvaluate(l)}}}Wt(nr,"DataDrivenProperty"),Wt(kt,"DataConstantProperty"),Wt(Hs,"ColorRampProperty");var $e=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"imports":{"type":"array","value":"import"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"experimental":true,"type":"featuresets"}},"featuresets":{"experimental":true,"*":{"type":"featureset"}},"featureset":{"experimental":true,"selectors":{"type":"array","value":"selector"}},"selector":{"experimental":true,"layer":{"type":"string","required":true},"properties":{"type":"selectorProperty","required":false},"featureNamespace":{"type":"string","required":false}},"selectorProperty":{"experimental":true,"*":{"type":"*"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","property-type":"data-constant","expression":{},"required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"property-type":"data-constant"},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"experimental":true,"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{"experimental":true},"hillshade":{},"model":{"experimental":true},"background":{},"sky":{},"slot":{},"clip":{"experimental":true}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{},"property-type":"data-constant","experimental":true},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{},"property-type":"data-constant","experimental":true}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","experimental":true,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"colorTheme":{"data":{"type":"string","property-type":"data-constant","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","experimental":true,"default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","experimental":true,"default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"experimental":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-trim-fade-range":{"type":"array","value":"number","experimental":true,"length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-trim-color":{"type":"color","experimental":true,"default":"transparent","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"property-type":"data-constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1},"default":"ground","experimental":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"experimental":true,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]},"property-type":"data-constant"},"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"model-front-cutoff":{"type":"array","private":true,"value":"number","property-type":"data-constant","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function pf(A){return A instanceof Number||A instanceof String||A instanceof Boolean?A.valueOf():A}function fm(A){if(Array.isArray(A))return A.map(fm);if(A instanceof Object&&!(A instanceof Number||A instanceof String||A instanceof Boolean)){const a={};for(const l in A)a[l]=fm(A[l]);return a}return pf(A)}function mv(A){if(A===!0||A===!1)return!0;if(!Array.isArray(A)||A.length===0)return!1;switch(A[0]){case"has":return A.length>=2&&A[1]!=="$id"&&A[1]!=="$type";case"in":return A.length>=3&&(typeof A[1]!="string"||Array.isArray(A[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return A.length!==3||Array.isArray(A[1])||Array.isArray(A[2]);case"any":case"all":for(const a of A.slice(1))if(!mv(a)&&typeof a!="boolean")return!1;return!0;default:return!0}}function js(A,a="",l=null,h="fill"){if(A==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};mv(A)||(A=pm(A));const g=A;let f=!0;try{f=function(E){if(!vh(E))return E;let M=fm(E);return $u(M),M=gv(M),M}(g)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(g,null,2)}
        `)}const v=$e[`filter_${h}`],B=Af(f,v,a,l);let F=null;if(B.result==="error")throw new Error(B.value.map(E=>`${E.key}: ${E.message}`).join(", "));F=(E,M,T)=>B.value.evaluate(E,M,{},T);let P=null,b=null;if(f!==g){const E=Af(g,v,a,l);if(E.result==="error")throw new Error(E.value.map(M=>`${M.key}: ${M.message}`).join(", "));P=(M,T,I,R,U)=>E.value.evaluate(M,T,{},I,void 0,void 0,R,U),b=!rf(E.value.expression)}return{filter:F,dynamicFilter:P||void 0,needGeometry:ib(f),needFeature:!!b}}function gv(A){if(!Array.isArray(A))return A;const a=function(l){if(MT.has(l[0])){for(let h=1;h<l.length;h++)if(vh(l[h]))return!0}return l}(A);return a===!0?a:a.map(l=>gv(l))}function $u(A){let a=!1;const l=[];if(A[0]==="case"){for(let h=1;h<A.length-1;h+=2)a=a||vh(A[h]),l.push(A[h+1]);l.push(A[A.length-1])}else if(A[0]==="match"){a=a||vh(A[1]);for(let h=2;h<A.length-1;h+=2)l.push(A[h+1]);l.push(A[A.length-1])}else if(A[0]==="step"){a=a||vh(A[1]);for(let h=1;h<A.length-1;h+=2)l.push(A[h+1])}a&&(A.length=0,A.push("any",...l));for(let h=1;h<A.length;h++)$u(A[h])}function vh(A){if(!Array.isArray(A))return!1;if((a=A[0])==="pitch"||a==="distance-from-center")return!0;var a;for(let l=1;l<A.length;l++)if(vh(A[l]))return!0;return!1}const MT=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function PT(A,a){return A<a?-1:A>a?1:0}function ib(A){if(!Array.isArray(A))return!1;if(A[0]==="within"||A[0]==="distance")return!0;for(let a=1;a<A.length;a++)if(ib(A[a]))return!0;return!1}function pm(A){if(!A)return!0;const a=A[0];return A.length<=1?a!=="any":a==="=="?mm(A[1],A[2],"=="):a==="!="?gf(mm(A[1],A[2],"==")):a==="<"||a===">"||a==="<="||a===">="?mm(A[1],A[2],a):a==="any"?(l=A.slice(1),["any"].concat(l.map(pm))):a==="all"?["all"].concat(A.slice(1).map(pm)):a==="none"?["all"].concat(A.slice(1).map(pm).map(gf)):a==="in"?gm(A[1],A.slice(2)):a==="!in"?gf(gm(A[1],A.slice(2))):a==="has"?mf(A[1]):a!=="!has"||gf(mf(A[1]));var l}function mm(A,a,l){switch(A){case"$type":return[`filter-type-${l}`,a];case"$id":return[`filter-id-${l}`,a];default:return[`filter-${l}`,A,a]}}function gm(A,a){if(a.length===0)return!1;switch(A){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some(l=>typeof l!=typeof a[0])?["filter-in-large",A,["literal",a.sort(PT)]]:["filter-in-small",A,["literal",a]]}}function mf(A){switch(A){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",A]}}function gf(A){return["!",A]}const yh="";function ob(A,a){return a?`${A}${yh}${a}`:A}const Gs="-transition",DT=new Set(["fill","line","background","hillshade","raster"]);class Zo extends Xc{constructor(a,l,h,g,f){if(super(),this.id=a.id,this.fqid=ob(this.id,h),this.type=a.type,this.scope=h,this.lut=g,this.options=f,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,a.type!=="custom"&&(this.metadata=a.metadata,this.minzoom=a.minzoom,this.maxzoom=a.maxzoom,a.type!=="background"&&a.type!=="sky"&&a.type!=="slot"&&(this.source=a.source,this.sourceLayer=a["source-layer"],this.filter=a.filter),a.slot&&(this.slot=a.slot),l.layout&&(this._unevaluatedLayout=new IT(l.layout,this.scope,f),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),l.paint)){this._transitionablePaint=new tb(l.paint,this.scope,f);for(const v in a.paint)this.setPaintProperty(v,a.paint[v]);for(const v in a.layout)this.setLayoutProperty(v,a.layout[v]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new gh(l.paint)}}onAdd(a){}onRemove(a){}isDraped(a){return!this.is3D()&&DT.has(this.type)}getLayoutProperty(a){return a==="visibility"?this.visibility:this._unevaluatedLayout.getValue(a)}setLayoutProperty(a,l){if(this.type==="custom"&&a==="visibility")return void(this.visibility=l);const h=this._unevaluatedLayout;h._properties.properties[a]&&(h.setValue(a,l),this.configDependencies=new Set([...this.configDependencies,...h.configDependencies]),a==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0})}getPaintProperty(a){return Os(a,Gs)?this._transitionablePaint.getTransition(a.slice(0,-11)):this._transitionablePaint.getValue(a)}setPaintProperty(a,l){const h=this._transitionablePaint,g=h._properties.properties;if(Os(a,Gs)){const E=a.slice(0,-11);return g[E]&&h.setTransition(E,l||void 0),!1}if(!g[a])return!1;const f=h._values[a],v=f.value.isDataDriven(),B=f.value;h.setValue(a,l),this.configDependencies=new Set([...this.configDependencies,...h.configDependencies]),this._handleSpecialPaintPropertyUpdate(a);const F=h._values[a].value,P=F.isDataDriven(),b=Os(a,"pattern")||a==="line-dasharray";return P||v||b||this._handleOverridablePaintPropertyUpdate(a,B,F)}_handleSpecialPaintPropertyUpdate(a){}getProgramIds(){return null}getDefaultProgramParams(a,l,h){return null}_handleOverridablePaintPropertyUpdate(a,l,h){return!1}isHidden(a){return!!(this.minzoom&&a<this.minzoom)||!!(this.maxzoom&&a>=this.maxzoom)||this.visibility==="none"}updateTransitions(a){this._transitioningPaint=this._transitionablePaint.transitioned(a,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(a,l){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(a,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(a,void 0,l)}serialize(){return Us({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(a,l)=>!(a===void 0||l==="layout"&&!Object.keys(a).length||l==="paint"&&!Object.keys(a).length))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const a in this.paint._values){const l=this.paint.get(a);if(l instanceof mh&&rm(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}compileFilter(a){this._filterCompiled||(this._featureFilter=js(this.filter,this.scope,a),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(a){this._stats&&(a.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(a){}queryIntersectsFeature(a,l,h,g,f,v,B,F,P){}queryIntersectsMatchingFeature(a,l,h,g){}}const kT={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class vf{constructor(a,l){this._structArray=a,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Zn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(a,l){return a._trim(),l&&(a.isTransferred=!0,l.add(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}}static deserialize(a){const l=Object.create(this.prototype);return l.arrayBuffer=a.arrayBuffer,l.length=a.length,l.capacity=a.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(a){this.reserve(a),this.length=a}reserve(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...a){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...a){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function hn(A,a=1){let l=0,h=0;return{members:A.map(g=>{const f=kT[g.type].BYTES_PER_ELEMENT,v=l=ab(l,Math.max(a,f)),B=g.components||1;return h=Math.max(h,f),l+=f*B,{name:g.name,type:g.type,components:B,offset:v}}),size:ab(l,Math.max(h,a)),alignment:a}}function ab(A,a){return Math.ceil(A/a)*a}class ru extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,l){const h=this.length;return this.resize(h+1),this.emplace(h,a,l)}emplace(a,l,h){const g=2*a;return this.int16[g+0]=l,this.int16[g+1]=h,a}}ru.prototype.bytesPerElement=4,Wt(ru,"StructArrayLayout2i4");class vm extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,a,l,h)}emplace(a,l,h,g){const f=3*a;return this.int16[f+0]=l,this.int16[f+1]=h,this.int16[f+2]=g,a}}vm.prototype.bytesPerElement=6,Wt(vm,"StructArrayLayout3i6");class nu extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,l,h,g){const f=this.length;return this.resize(f+1),this.emplace(f,a,l,h,g)}emplace(a,l,h,g,f){const v=4*a;return this.int16[v+0]=l,this.int16[v+1]=h,this.int16[v+2]=g,this.int16[v+3]=f,a}}nu.prototype.bytesPerElement=8,Wt(nu,"StructArrayLayout4i8");class ym extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,l,h,g,f){const v=this.length;return this.resize(v+1),this.emplace(v,a,l,h,g,f)}emplace(a,l,h,g,f,v){const B=5*a;return this.int16[B+0]=l,this.int16[B+1]=h,this.int16[B+2]=g,this.int16[B+3]=f,this.int16[B+4]=v,a}}ym.prototype.bytesPerElement=10,Wt(ym,"StructArrayLayout5i10");class vv extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,l,h,g,f,v,B){const F=this.length;return this.resize(F+1),this.emplace(F,a,l,h,g,f,v,B)}emplace(a,l,h,g,f,v,B,F){const P=6*a,b=12*a,E=3*a;return this.int16[P+0]=l,this.int16[P+1]=h,this.uint8[b+4]=g,this.uint8[b+5]=f,this.uint8[b+6]=v,this.uint8[b+7]=B,this.float32[E+2]=F,a}}vv.prototype.bytesPerElement=12,Wt(vv,"StructArrayLayout2i4ub1f12");class uc extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,l,h,g){const f=this.length;return this.resize(f+1),this.emplace(f,a,l,h,g)}emplace(a,l,h,g,f){const v=4*a;return this.float32[v+0]=l,this.float32[v+1]=h,this.float32[v+2]=g,this.float32[v+3]=f,a}}uc.prototype.bytesPerElement=16,Wt(uc,"StructArrayLayout4f16");class iu extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,a,l,h)}emplace(a,l,h,g){const f=3*a;return this.float32[f+0]=l,this.float32[f+1]=h,this.float32[f+2]=g,a}}iu.prototype.bytesPerElement=12,Wt(iu,"StructArrayLayout3f12");class Ac extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,l,h,g,f){const v=this.length;return this.resize(v+1),this.emplace(v,a,l,h,g,f)}emplace(a,l,h,g,f,v){const B=6*a,F=3*a;return this.uint16[B+0]=l,this.uint16[B+1]=h,this.uint16[B+2]=g,this.uint16[B+3]=f,this.float32[F+2]=v,a}}Ac.prototype.bytesPerElement=12,Wt(Ac,"StructArrayLayout4ui1f12");class eA extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,l,h,g){const f=this.length;return this.resize(f+1),this.emplace(f,a,l,h,g)}emplace(a,l,h,g,f){const v=4*a;return this.uint16[v+0]=l,this.uint16[v+1]=h,this.uint16[v+2]=g,this.uint16[v+3]=f,a}}eA.prototype.bytesPerElement=8,Wt(eA,"StructArrayLayout4ui8");class _m extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,l,h,g,f,v){const B=this.length;return this.resize(B+1),this.emplace(B,a,l,h,g,f,v)}emplace(a,l,h,g,f,v,B){const F=6*a;return this.int16[F+0]=l,this.int16[F+1]=h,this.int16[F+2]=g,this.int16[F+3]=f,this.int16[F+4]=v,this.int16[F+5]=B,a}}_m.prototype.bytesPerElement=12,Wt(_m,"StructArrayLayout6i12");class yv extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,l,h,g,f,v,B,F,P,b,E,M){const T=this.length;return this.resize(T+1),this.emplace(T,a,l,h,g,f,v,B,F,P,b,E,M)}emplace(a,l,h,g,f,v,B,F,P,b,E,M,T){const I=12*a;return this.int16[I+0]=l,this.int16[I+1]=h,this.int16[I+2]=g,this.int16[I+3]=f,this.uint16[I+4]=v,this.uint16[I+5]=B,this.uint16[I+6]=F,this.uint16[I+7]=P,this.int16[I+8]=b,this.int16[I+9]=E,this.int16[I+10]=M,this.int16[I+11]=T,a}}yv.prototype.bytesPerElement=24,Wt(yv,"StructArrayLayout4i4ui4i24");class _v extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,l,h,g,f,v){const B=this.length;return this.resize(B+1),this.emplace(B,a,l,h,g,f,v)}emplace(a,l,h,g,f,v,B){const F=10*a,P=5*a;return this.int16[F+0]=l,this.int16[F+1]=h,this.int16[F+2]=g,this.float32[P+2]=f,this.float32[P+3]=v,this.float32[P+4]=B,a}}_v.prototype.bytesPerElement=20,Wt(_v,"StructArrayLayout3i3f20");class xv extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a){const l=this.length;return this.resize(l+1),this.emplace(l,a)}emplace(a,l){return this.uint32[1*a+0]=l,a}}xv.prototype.bytesPerElement=4,Wt(xv,"StructArrayLayout1ul4");class ou extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,l){const h=this.length;return this.resize(h+1),this.emplace(h,a,l)}emplace(a,l,h){const g=2*a;return this.uint16[g+0]=l,this.uint16[g+1]=h,a}}ou.prototype.bytesPerElement=4,Wt(ou,"StructArrayLayout2ui4");class _h extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,l,h,g,f,v,B,F,P,b,E,M,T){const I=this.length;return this.resize(I+1),this.emplace(I,a,l,h,g,f,v,B,F,P,b,E,M,T)}emplace(a,l,h,g,f,v,B,F,P,b,E,M,T,I){const R=20*a,U=10*a;return this.int16[R+0]=l,this.int16[R+1]=h,this.int16[R+2]=g,this.int16[R+3]=f,this.int16[R+4]=v,this.float32[U+3]=B,this.float32[U+4]=F,this.float32[U+5]=P,this.float32[U+6]=b,this.int16[R+14]=E,this.uint32[U+8]=M,this.uint16[R+18]=T,this.uint16[R+19]=I,a}}_h.prototype.bytesPerElement=40,Wt(_h,"StructArrayLayout5i4f1i1ul2ui40");class tA extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,l,h,g,f,v,B){const F=this.length;return this.resize(F+1),this.emplace(F,a,l,h,g,f,v,B)}emplace(a,l,h,g,f,v,B,F){const P=8*a;return this.int16[P+0]=l,this.int16[P+1]=h,this.int16[P+2]=g,this.int16[P+4]=f,this.int16[P+5]=v,this.int16[P+6]=B,this.int16[P+7]=F,a}}tA.prototype.bytesPerElement=16,Wt(tA,"StructArrayLayout3i2i2i16");class ca extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a,l,h,g,f){const v=this.length;return this.resize(v+1),this.emplace(v,a,l,h,g,f)}emplace(a,l,h,g,f,v){const B=4*a,F=8*a;return this.float32[B+0]=l,this.float32[B+1]=h,this.float32[B+2]=g,this.int16[F+6]=f,this.int16[F+7]=v,a}}ca.prototype.bytesPerElement=16,Wt(ca,"StructArrayLayout2f1f2i16");class xh extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,l,h,g,f,v){const B=this.length;return this.resize(B+1),this.emplace(B,a,l,h,g,f,v)}emplace(a,l,h,g,f,v,B){const F=20*a,P=5*a;return this.uint8[F+0]=l,this.uint8[F+1]=h,this.float32[P+1]=g,this.float32[P+2]=f,this.float32[P+3]=v,this.float32[P+4]=B,a}}xh.prototype.bytesPerElement=20,Wt(xh,"StructArrayLayout2ub4f20");class Fo extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,a,l,h)}emplace(a,l,h,g){const f=3*a;return this.uint16[f+0]=l,this.uint16[f+1]=h,this.uint16[f+2]=g,a}}Fo.prototype.bytesPerElement=6,Wt(Fo,"StructArrayLayout3ui6");class bv extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a,l,h,g,f,v,B,F,P,b,E,M,T,I,R,U,V,X,Y,H,$){const te=this.length;return this.resize(te+1),this.emplace(te,a,l,h,g,f,v,B,F,P,b,E,M,T,I,R,U,V,X,Y,H,$)}emplace(a,l,h,g,f,v,B,F,P,b,E,M,T,I,R,U,V,X,Y,H,$,te){const le=30*a,me=15*a,ve=60*a;return this.int16[le+0]=l,this.int16[le+1]=h,this.int16[le+2]=g,this.float32[me+2]=f,this.float32[me+3]=v,this.uint16[le+8]=B,this.uint16[le+9]=F,this.uint32[me+5]=P,this.uint32[me+6]=b,this.uint32[me+7]=E,this.uint16[le+16]=M,this.uint16[le+17]=T,this.uint16[le+18]=I,this.float32[me+10]=R,this.float32[me+11]=U,this.uint8[ve+48]=V,this.uint8[ve+49]=X,this.uint8[ve+50]=Y,this.uint32[me+13]=H,this.int16[le+28]=$,this.uint8[ve+58]=te,a}}bv.prototype.bytesPerElement=60,Wt(bv,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class wv extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(a,l,h,g,f,v,B,F,P,b,E,M,T,I,R,U,V,X,Y,H,$,te,le,me,ve,de,Ce,_e,Te,Oe,Ve,je){const We=this.length;return this.resize(We+1),this.emplace(We,a,l,h,g,f,v,B,F,P,b,E,M,T,I,R,U,V,X,Y,H,$,te,le,me,ve,de,Ce,_e,Te,Oe,Ve,je)}emplace(a,l,h,g,f,v,B,F,P,b,E,M,T,I,R,U,V,X,Y,H,$,te,le,me,ve,de,Ce,_e,Te,Oe,Ve,je,We){const et=20*a,qe=40*a,At=80*a;return this.float32[et+0]=l,this.float32[et+1]=h,this.int16[qe+4]=g,this.int16[qe+5]=f,this.int16[qe+6]=v,this.int16[qe+7]=B,this.int16[qe+8]=F,this.int16[qe+9]=P,this.int16[qe+10]=b,this.int16[qe+11]=E,this.int16[qe+12]=M,this.uint16[qe+13]=T,this.uint16[qe+14]=I,this.uint16[qe+15]=R,this.uint16[qe+16]=U,this.uint16[qe+17]=V,this.uint16[qe+18]=X,this.uint16[qe+19]=Y,this.uint16[qe+20]=H,this.uint16[qe+21]=$,this.uint16[qe+22]=te,this.uint16[qe+23]=le,this.uint16[qe+24]=me,this.uint16[qe+25]=ve,this.uint16[qe+26]=de,this.uint16[qe+27]=Ce,this.uint32[et+14]=_e,this.float32[et+15]=Te,this.float32[et+16]=Oe,this.float32[et+17]=Ve,this.float32[et+18]=je,this.uint8[At+76]=We,a}}wv.prototype.bytesPerElement=80,Wt(wv,"StructArrayLayout2f9i15ui1ul4f1ub80");class bh extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a){const l=this.length;return this.resize(l+1),this.emplace(l,a)}emplace(a,l){return this.float32[1*a+0]=l,a}}bh.prototype.bytesPerElement=4,Wt(bh,"StructArrayLayout1f4");class hc extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,l,h,g,f){const v=this.length;return this.resize(v+1),this.emplace(v,a,l,h,g,f)}emplace(a,l,h,g,f,v){const B=5*a;return this.float32[B+0]=l,this.float32[B+1]=h,this.float32[B+2]=g,this.float32[B+3]=f,this.float32[B+4]=v,a}}hc.prototype.bytesPerElement=20,Wt(hc,"StructArrayLayout5f20");class Bv extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,l,h,g,f,v,B){const F=this.length;return this.resize(F+1),this.emplace(F,a,l,h,g,f,v,B)}emplace(a,l,h,g,f,v,B,F){const P=7*a;return this.float32[P+0]=l,this.float32[P+1]=h,this.float32[P+2]=g,this.float32[P+3]=f,this.float32[P+4]=v,this.float32[P+5]=B,this.float32[P+6]=F,a}}Bv.prototype.bytesPerElement=28,Wt(Bv,"StructArrayLayout7f28");class yf extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a,l,h,g){const f=this.length;return this.resize(f+1),this.emplace(f,a,l,h,g)}emplace(a,l,h,g,f){const v=6*a;return this.uint32[3*a+0]=l,this.uint16[v+2]=h,this.uint16[v+3]=g,this.uint16[v+4]=f,a}}yf.prototype.bytesPerElement=12,Wt(yf,"StructArrayLayout1ul3ui12");class Cv extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(a){const l=this.length;return this.resize(l+1),this.emplace(l,a)}emplace(a,l){return this.uint16[1*a+0]=l,a}}Cv.prototype.bytesPerElement=2,Wt(Cv,"StructArrayLayout1ui2");class _f extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,l){const h=this.length;return this.resize(h+1),this.emplace(h,a,l)}emplace(a,l,h){const g=2*a;return this.float32[g+0]=l,this.float32[g+1]=h,a}}_f.prototype.bytesPerElement=8,Wt(_f,"StructArrayLayout2f8");class xf extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,l,h,g,f,v,B,F,P,b,E,M,T,I,R,U){const V=this.length;return this.resize(V+1),this.emplace(V,a,l,h,g,f,v,B,F,P,b,E,M,T,I,R,U)}emplace(a,l,h,g,f,v,B,F,P,b,E,M,T,I,R,U,V){const X=16*a;return this.float32[X+0]=l,this.float32[X+1]=h,this.float32[X+2]=g,this.float32[X+3]=f,this.float32[X+4]=v,this.float32[X+5]=B,this.float32[X+6]=F,this.float32[X+7]=P,this.float32[X+8]=b,this.float32[X+9]=E,this.float32[X+10]=M,this.float32[X+11]=T,this.float32[X+12]=I,this.float32[X+13]=R,this.float32[X+14]=U,this.float32[X+15]=V,a}}xf.prototype.bytesPerElement=64,Wt(xf,"StructArrayLayout16f64");class xm extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(a,l,h,g,f,v,B){const F=this.length;return this.resize(F+1),this.emplace(F,a,l,h,g,f,v,B)}emplace(a,l,h,g,f,v,B,F){const P=10*a,b=5*a;return this.uint16[P+0]=l,this.uint16[P+1]=h,this.uint16[P+2]=g,this.uint16[P+3]=f,this.float32[b+2]=v,this.float32[b+3]=B,this.float32[b+4]=F,a}}xm.prototype.bytesPerElement=20,Wt(xm,"StructArrayLayout4ui3f20");class bm extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(a){const l=this.length;return this.resize(l+1),this.emplace(l,a)}emplace(a,l){return this.int16[1*a+0]=l,a}}bm.prototype.bytesPerElement=2,Wt(bm,"StructArrayLayout1i2");class wm extends Zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(a){const l=this.length;return this.resize(l+1),this.emplace(l,a)}emplace(a,l){return this.uint8[1*a+0]=l,a}}wm.prototype.bytesPerElement=1,Wt(wm,"StructArrayLayout1ub1");class sb extends vf{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}sb.prototype.size=40;class Bm extends _h{get(a){return new sb(this,a)}}Wt(Bm,"CollisionBoxArray");class bf extends vf{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(a){this._structArray.uint8[this._pos1+49]=a}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(a){this._structArray.uint8[this._pos1+50]=a}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(a){this._structArray.uint32[this._pos4+13]=a}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(a){this._structArray.uint8[this._pos1+58]=a}}bf.prototype.size=60;class Sv extends bv{get(a){return new bf(this,a)}}Wt(Sv,"PlacedSymbolArray");class lb extends vf{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(a){this._structArray.uint32[this._pos4+14]=a}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(a){this._structArray.float32[this._pos4+18]=a}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}}lb.prototype.size=80;class Ev extends wv{get(a){return new lb(this,a)}}Wt(Ev,"SymbolInstanceArray");class cb extends bh{getoffsetX(a){return this.float32[1*a+0]}}Wt(cb,"GlyphOffsetArray");class Cm extends ru{getx(a){return this.int16[2*a+0]}gety(a){return this.int16[2*a+1]}}Wt(Cm,"SymbolLineVertexArray");class ub extends vf{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}ub.prototype.size=12;class Ab extends yf{get(a){return new ub(this,a)}}Wt(Ab,"FeatureIndexArray");class hb extends ou{geta_centroid_pos0(a){return this.uint16[2*a+0]}geta_centroid_pos1(a){return this.uint16[2*a+1]}}Wt(hb,"FillExtrusionCentroidArray");class db extends vf{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}db.prototype.size=6;class Tv extends vm{get(a){return new db(this,a)}}Wt(Tv,"FillExtrusionWallArray");const RT=hn([{name:"a_pos",components:2,type:"Int16"}],4),LT=hn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class bi{constructor(a=[]){this.segments=a}_prepareSegment(a,l,h,g){let f=this.segments[this.segments.length-1];return a>bi.MAX_VERTEX_ARRAY_LENGTH&&tn(`Max vertices per segment is ${bi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${a}`),(!f||f.vertexLength+a>bi.MAX_VERTEX_ARRAY_LENGTH||f.sortKey!==g)&&(f={vertexOffset:l,primitiveOffset:h,vertexLength:0,primitiveLength:0},g!==void 0&&(f.sortKey=g),this.segments.push(f)),f}prepareSegment(a,l,h,g){return this._prepareSegment(a,l.length,h.length,g)}get(){return this.segments}destroy(){for(const a of this.segments)for(const l in a.vaos)a.vaos[l].destroy()}static simpleSegment(a,l,h,g){return new bi([{vertexOffset:a,primitiveOffset:l,vertexLength:h,primitiveLength:g,vaos:{},sortKey:0}])}}function fb(A,a){return 256*(A=xr(Math.floor(A),0,255))+xr(Math.floor(a),0,255)}bi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Wt(bi,"SegmentVector");const OT=hn([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),UT=hn([{name:"a_dash",components:4,type:"Uint16"}]);class wf{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(a,l,h,g){this.ids.push(pb(a)),this.positions.push(l,h,g)}eachPosition(a,l){const h=pb(a);let g=0,f=this.ids.length-1;for(;g<f;){const v=g+f>>1;this.ids[v]>=h?f=v:g=v+1}for(;this.ids[g]===h;)l(this.positions[3*g],this.positions[3*g+1],this.positions[3*g+2]),g++}static serialize(a,l){const h=new Float64Array(a.ids),g=new Uint32Array(a.positions);return wh(h,g,0,h.length-1),l&&(l.add(h.buffer),l.add(g.buffer)),{ids:h,positions:g}}static deserialize(a){const l=new wf;let h;l.ids=a.ids,l.positions=a.positions;for(const g of l.ids)g!==h&&l.uniqueIds.push(g),h=g;return l.indexed=!0,l}}function pb(A){const a=+A;return!isNaN(a)&&Number.MIN_SAFE_INTEGER<=a&&a<=Number.MAX_SAFE_INTEGER?a:qo(String(A))}function wh(A,a,l,h){for(;l<h;){const g=A[l+h>>1];let f=l-1,v=h+1;for(;;){do f++;while(A[f]<g);do v--;while(A[v]>g);if(f>=v)break;Sm(A,f,v),Sm(a,3*f,3*v),Sm(a,3*f+1,3*v+1),Sm(a,3*f+2,3*v+2)}v-l<h-v?(wh(A,a,l,v),l=v+1):(wh(A,a,v+1,h),h=v)}}function Sm(A,a,l){const h=A[a];A[a]=A[l],A[l]=h}Wt(wf,"FeaturePositionMap");class dc{constructor(a){this.gl=a.gl,this.initialized=!1}fetchUniformLocation(a,l){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(a,l),this.initialized=!0),!!this.location}set(a,l,h){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class rA extends dc{constructor(a){super(a),this.current=0}set(a,l,h){this.fetchUniformLocation(a,l)&&this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}}class Yo extends dc{constructor(a){super(a),this.current=0}set(a,l,h){this.fetchUniformLocation(a,l)&&this.current!==h&&(this.current=h,this.gl.uniform1f(this.location,h))}}class _l extends dc{constructor(a){super(a),this.current=[0,0]}set(a,l,h){this.fetchUniformLocation(a,l)&&(h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1])))}}class Fv extends dc{constructor(a){super(a),this.current=[0,0,0]}set(a,l,h){this.fetchUniformLocation(a,l)&&(h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2])))}}class Em extends dc{constructor(a){super(a),this.current=[0,0,0,0]}set(a,l,h){this.fetchUniformLocation(a,l)&&(h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]&&h[3]===this.current[3]||(this.current=h,this.gl.uniform4f(this.location,h[0],h[1],h[2],h[3])))}}class Iv extends dc{constructor(a){super(a),this.current=An.transparent.toRenderColor(null)}set(a,l,h){this.fetchUniformLocation(a,l)&&(h.r===this.current.r&&h.g===this.current.g&&h.b===this.current.b&&h.a===this.current.a||(this.current=h,this.gl.uniform4f(this.location,h.r,h.g,h.b,h.a)))}}const mb=new Float32Array(16);class Bf extends dc{constructor(a){super(a),this.current=mb}set(a,l,h){if(this.fetchUniformLocation(a,l)){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let g=1;g<16;g++)if(h[g]!==this.current[g]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}}}const zT=new Float32Array(9),QT=new Float32Array(4);class Mv extends dc{constructor(a){super(a),this.current=QT}set(a,l,h){if(this.fetchUniformLocation(a,l)){for(let g=0;g<4;g++)if(h[g]!==this.current[g]){this.current=h,this.gl.uniformMatrix2fv(this.location,!1,h);break}}}}function Pv(A){return[fb(255*A.r,255*A.g),fb(255*A.b,255*A.a)]}class Cf{constructor(a,l,h,g){this.value=a,this.uniformNames=l.map(f=>`u_${f}`),this.type=h,this.context=g}setUniform(a,l,h,g,f){const v=g.constantOr(this.value);l.set(a,f,v instanceof An?v.toRenderColor(this.context.lut):v)}getBinding(a,l){return this.type==="color"?new Iv(a):new Yo(a)}}class Bh{constructor(a,l){this.uniformNames=l.map(h=>`u_${h}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(a){this.pixelRatio=a.pixelRatio||1,this.pattern=a.tl.concat(a.br)}setUniform(a,l,h,g,f){const v=f==="u_pattern"||f==="u_dash"?this.pattern:f==="u_pixel_ratio"?this.pixelRatio:null;v&&l.set(a,f,v)}getBinding(a,l){return l==="u_pattern"||l==="u_dash"?new Em(a):new Yo(a)}}class xl{constructor(a,l,h,g){this.expression=a,this.type=h,this.maxValue=0,this.paintVertexAttributes=l.map(f=>({name:`a_${f}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(a,l,h,g,f,v,B){const F=this.paintVertexArray.length,P=this.expression.evaluate(new xi(0,{brightness:v}),l,{},f,g,B);this.paintVertexArray.resize(a),this._setPaintValue(F,a,P,this.context)}updatePaintArray(a,l,h,g,f,v,B){const F=this.expression.evaluate({zoom:0,brightness:B},h,g,void 0,f);this._setPaintValue(a,l,F,this.context)}_setPaintValue(a,l,h,g){if(this.type==="color"){const f=Pv(h.toRenderColor(g.lut));for(let v=a;v<l;v++)this.paintVertexArray.emplace(v,f[0],f[1])}else{for(let f=a;f<l;f++)this.paintVertexArray.emplace(f,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ns{constructor(a,l,h,g,f,v){this.expression=a,this.uniformNames=l.map(B=>`u_${B}_t`),this.type=h,this.useIntegerZoom=g,this.context=f,this.maxValue=0,this.paintVertexAttributes=l.map(B=>({name:`a_${B}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new v}populatePaintArray(a,l,h,g,f,v,B){const F=this.expression.evaluate(new xi(this.context.zoom,{brightness:v}),l,{},f,g,B),P=this.expression.evaluate(new xi(this.context.zoom+1,{brightness:v}),l,{},f,g,B),b=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(b,a,F,P,this.context)}updatePaintArray(a,l,h,g,f,v,B){const F=this.expression.evaluate({zoom:this.context.zoom,brightness:B},h,g,void 0,f),P=this.expression.evaluate({zoom:this.context.zoom+1,brightness:B},h,g,void 0,f);this._setPaintValue(a,l,F,P,this.context)}_setPaintValue(a,l,h,g,f){if(this.type==="color"){const v=Pv(h.toRenderColor(f.lut)),B=Pv(h.toRenderColor(f.lut));for(let F=a;F<l;F++)this.paintVertexArray.emplace(F,v[0],v[1],B[0],B[1])}else{for(let v=a;v<l;v++)this.paintVertexArray.emplace(v,h,g);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(g))}}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(a,l,h,g,f){const v=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,B=xr(this.expression.interpolationFactor(v,this.context.zoom,this.context.zoom+1),0,1);l.set(a,f,B)}getBinding(a,l){return new Yo(a)}}class bl{constructor(a,l,h,g,f){this.expression=a,this.layerId=f,this.paintVertexAttributes=(h==="array"?UT:OT).members;for(let v=0;v<l.length;++v);this.paintVertexArray=new g}populatePaintArray(a,l,h,g){const f=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValues(f,a,l.patterns&&l.patterns[this.layerId],h)}updatePaintArray(a,l,h,g,f,v,B){this._setPaintValues(a,l,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(a,l,h,g){if(!g||!h)return;const f=g[h];if(!f)return;const{tl:v,br:B,pixelRatio:F}=f;for(let P=a;P<l;P++)this.paintVertexArray.emplace(P,v[0],v[1],B[0],B[1],F)}upload(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class nA{constructor(a,l,h=()=>!0){this.binders={},this._buffers=[],this.context=l;const g=[];for(const f in a.paint._values){const v=a.paint.get(f);if(!h(f)||!(v instanceof mh&&rm(v.property.specification)))continue;const B=VT(f,a.type),F=v.value,P=v.property.specification.type,b=!!v.property.useIntegerZoom,E=f==="line-dasharray"||f.endsWith("pattern"),M=f==="line-dasharray"&&a.layout.get("line-cap").value.kind!=="constant";if(F.kind!=="constant"||M)if(F.kind==="source"||M||E){const T=p(f,P,"source");this.binders[f]=E?new bl(F,B,P,T,a.id):new xl(F,B,P,T),g.push(`/a_${f}`)}else{const T=p(f,P,"composite");this.binders[f]=new ns(F,B,P,b,l,T),g.push(`/z_${f}`)}else this.binders[f]=E?new Bh(F.value,B):new Cf(F.value,B,P,l),g.push(`/u_${f}`)}this.cacheKey=g.sort().join("")}getMaxValue(a){const l=this.binders[a];return l instanceof xl||l instanceof ns?l.maxValue:0}populatePaintArrays(a,l,h,g,f,v,B){for(const F in this.binders){const P=this.binders[F];P.context=this.context,(P instanceof xl||P instanceof ns||P instanceof bl)&&P.populatePaintArray(a,l,h,g,f,v,B)}}setConstantPatternPositions(a){for(const l in this.binders){const h=this.binders[l];h instanceof Bh&&h.setConstantPatternPositions(a)}}updatePaintArrays(a,l,h,g,f,v,B,F){let P=!1;const b=Object.keys(a),E=b.length!==0,M=E?b:l.uniqueIds;this.context.lut=f.lut;for(const T in this.binders){const I=this.binders[T];if(I.context=this.context,(I instanceof xl||I instanceof ns||I instanceof bl)&&(I.expression.isStateDependent===!0||I.expression.isLightConstant===!1)){const R=f.paint.get(T);I.expression=R.value;for(const U of M){const V=a[U.toString()];l.eachPosition(U,(X,Y,H)=>{const $=g.feature(X);I.updatePaintArray(Y,H,$,V,v,B,F)})}if(!E)for(const U of h.uniqueIds){const V=a[U.toString()];h.eachPosition(U,(X,Y,H)=>{const $=g.feature(X);I.updatePaintArray(Y,H,$,V,v,B,F)})}P=!0}}return P}defines(){const a=[];for(const l in this.binders){const h=this.binders[l];(h instanceof Cf||h instanceof Bh)&&a.push(...h.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return a}getBinderAttributes(){const a=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof xl||h instanceof ns||h instanceof bl)for(let g=0;g<h.paintVertexAttributes.length;g++)a.push(h.paintVertexAttributes[g].name)}return a}getBinderUniforms(){const a=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof Cf||h instanceof Bh||h instanceof ns)for(const g of h.uniformNames)a.push(g)}return a}getPaintVertexBuffers(){return this._buffers}getUniforms(a){const l=[];for(const h in this.binders){const g=this.binders[h];if(g instanceof Cf||g instanceof Bh||g instanceof ns)for(const f of g.uniformNames)l.push({name:f,property:h,binding:g.getBinding(a,f)})}return l}setUniforms(a,l,h,g,f){for(const{name:v,property:B,binding:F}of h)this.binders[B].setUniform(a,F,f,g.get(B),v)}updatePaintBuffers(){this._buffers=[];for(const a in this.binders){const l=this.binders[a];(l instanceof xl||l instanceof ns||l instanceof bl)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(a){for(const l in this.binders){const h=this.binders[l];(h instanceof xl||h instanceof ns||h instanceof bl)&&h.upload(a)}this.updatePaintBuffers()}destroy(){for(const a in this.binders){const l=this.binders[a];(l instanceof xl||l instanceof ns||l instanceof bl)&&l.destroy()}}}class au{constructor(a,l,h=()=>!0){this.programConfigurations={};for(const g of a)this.programConfigurations[g.id]=new nA(g,l,h);this.needsUpload=!1,this._featureMap=new wf,this._featureMapWithoutIds=new wf,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(a,l,h,g,f,v,B,F){for(const P in this.programConfigurations)this.programConfigurations[P].populatePaintArrays(a,l,g,f,v,B,F);l.id!==void 0?this._featureMap.add(l.id,h,this._bufferOffset,a):(this._featureMapWithoutIds.add(this._idlessCounter,h,this._bufferOffset,a),this._idlessCounter+=1),this._bufferOffset=a,this.needsUpload=!0}updatePaintArrays(a,l,h,g,f,v){for(const B of h)this.needsUpload=this.programConfigurations[B.id].updatePaintArrays(a,this._featureMap,this._featureMapWithoutIds,l,B,g,f,v||0)||this.needsUpload}get(a){return this.programConfigurations[a]}upload(a){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(a);this.needsUpload=!1}}destroy(){for(const a in this.programConfigurations)this.programConfigurations[a].destroy()}}const NT={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function VT(A,a){return NT[A]||[A.replace(`${a}-`,"").replace(/-/g,"_")]}const HT={"line-pattern":{source:Ac,composite:Ac},"fill-pattern":{source:Ac,composite:Ac},"fill-extrusion-pattern":{source:Ac,composite:Ac},"line-dasharray":{source:eA,composite:eA}},gb={color:{source:_f,composite:uc},number:{source:bh,composite:_f}};function p(A,a,l){const h=HT[A];return h&&h[l]||gb[a][l]}Wt(Cf,"ConstantBinder"),Wt(Bh,"PatternConstantBinder"),Wt(xl,"SourceExpressionBinder"),Wt(bl,"PatternCompositeBinder"),Wt(ns,"CompositeExpressionBinder"),Wt(nA,"ProgramConfiguration",{omit:["_buffers"]}),Wt(au,"ProgramConfigurationSet");const s=Ut/Math.PI/2,u=5,m=6,_=16383,w=64,C=[w,32,16],D=-s,L=s;function z(A,a,l,h=s){return l=Br(l),[A*Math.sin(l)*h,-a*h,A*Math.cos(l)*h]}function N(A,a,l){return z(Math.cos(Br(A)),Math.sin(Br(A)),a,l)}const j=63710088e-1,q=2*Math.PI*j;class Z{constructor(a,l){if(isNaN(a)||isNaN(l))throw new Error(`Invalid LngLat object: (${a}, ${l})`);if(this.lng=+a,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Z(Ta(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(a){const l=Math.PI/180,h=this.lat*l,g=a.lat*l,f=Math.sin(h)*Math.sin(g)+Math.cos(h)*Math.cos(g)*Math.cos((a.lng-this.lng)*l);return j*Math.acos(Math.min(f,1))}toBounds(a=0){const l=360*a/40075017,h=l/Math.cos(Math.PI/180*this.lat);return new ne({lng:this.lng-h,lat:this.lat-l},{lng:this.lng+h,lat:this.lat+l})}toEcef(a){return N(this.lat,this.lng,s+a*s/j)}static convert(a){if(a instanceof Z)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new Z(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new Z(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class ne{constructor(a,l){if(a)if(l)this.setSouthWest(a).setNorthEast(l);else if(a.length===4){const h=a;this.setSouthWest([h[0],h[1]]).setNorthEast([h[2],h[3]])}else{const h=a;this.setSouthWest(h[0]).setNorthEast(h[1])}}setNorthEast(a){return this._ne=a instanceof Z?new Z(a.lng,a.lat):Z.convert(a),this}setSouthWest(a){return this._sw=a instanceof Z?new Z(a.lng,a.lat):Z.convert(a),this}extend(a){const l=this._sw,h=this._ne;let g,f;if(a instanceof Z)g=a,f=a;else{if(!(a instanceof ne))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(ne.convert(a)):this.extend(Z.convert(a)):typeof a=="object"&&a!==null&&a.hasOwnProperty("lat")&&(a.hasOwnProperty("lon")||a.hasOwnProperty("lng"))?this.extend(Z.convert(a)):this;if(g=a._sw,f=a._ne,!g||!f)return this}return l||h?(l.lng=Math.min(g.lng,l.lng),l.lat=Math.min(g.lat,l.lat),h.lng=Math.max(f.lng,h.lng),h.lat=Math.max(f.lat,h.lat)):(this._sw=new Z(g.lng,g.lat),this._ne=new Z(f.lng,f.lat)),this}getCenter(){return new Z((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Z(this.getWest(),this.getNorth())}getSouthEast(){return new Z(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:l,lat:h}=Z.convert(a);let g=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&g}static convert(a){if(a)return a instanceof ne?a:new ne(a)}}const ie=0,oe=25.5;function ae(A){return q*Math.cos(A*Math.PI/180)}function ge(A){return(180+A)/360}function ye(A){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A*Math.PI/360)))/360}function pe(A,a){return A/ae(a)}function we(A){return 360*A-180}function be(A){return 360/Math.PI*Math.atan(Math.exp((180-360*A)*Math.PI/180))-90}function Fe(A,a){return A*ae(be(a))}const Ee=85.051129;function Me(A){return Math.cos(Br(xr(A,-Ee,Ee)))}function Qe(A,a){const l=xr(a,ie,oe),h=Math.pow(2,l);return Me(A)*q/(512*h)}function Re(A){return 1/Math.cos(A*Math.PI/180)}function Pe(A,a=0){const l=Math.exp(Math.PI*(1-(A.y+a/Ut)/(1<<A.z)*2));return 80150034*l/(l*l+1)/Ut/(1<<A.z)}class Xe{constructor(a,l,h=0){this.x=+a,this.y=+l,this.z=+h}static fromLngLat(a,l=0){const h=Z.convert(a);return new Xe(ge(h.lng),ye(h.lat),pe(l,h.lat))}toLngLat(){return new Z(we(this.x),be(this.y))}toAltitude(){return Fe(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/q*Re(be(this.y))}}function ct(A,a,l,h,g,f,v,B,F){const P=(a+h)/2,b=(l+g)/2,E=new Dt(P,b);B(E),function(M,T,I,R,U,V){const X=I-U,Y=R-V;return Math.abs((R-T)*X-(I-M)*Y)/Math.hypot(X,Y)}(E.x,E.y,f.x,f.y,v.x,v.y)>=F?(ct(A,a,l,P,b,f,E,B,F),ct(A,P,b,h,g,E,v,B,F)):A.push(v)}function _t(A,a,l){let h=A[0],g=h.x,f=h.y;a(h);const v=[h];for(let B=1;B<A.length;B++){const F=A[B],{x:P,y:b}=F;a(F),ct(v,g,f,P,b,h,F,a,l),g=P,f=b,h=F}return v}function lt(A,a,l,h){if(h(a,l)){const g=a.add(l)._mult(.5);lt(A,a,g,h),lt(A,g,l,h)}else A.push(l)}function St(A,a){let l=A[0];const h=[l];for(let g=1;g<A.length;g++){const f=A[g];lt(h,l,f,a),l=f}return h}const Ye=Math.pow(2,14)-1,mt=-Ye-1;function ft(A,a){const l=Math.round(A.x*a),h=Math.round(A.y*a);return A.x=xr(l,mt,Ye),A.y=xr(h,mt,Ye),(l<A.x||l>A.x+1||h<A.y||h>A.y+1)&&tn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),A}function Tt(A,a,l){const h=A.loadGeometry(),g=A.extent,f=Ut/g;if(a&&l&&l.projection.isReprojectedInTileSpace){const v=1<<a.z,{scale:B,x:F,y:P,projection:b}=l,E=M=>{const T=we((a.x+M.x/g)/v),I=be((a.y+M.y/g)/v),R=b.project(T,I);M.x=(R.x*B-F)*g,M.y=(R.y*B-P)*g};for(let M=0;M<h.length;M++)if(A.type!==1)h[M]=_t(h[M],E,1);else{const T=[];for(const I of h[M])I.x<0||I.x>=g||I.y<0||I.y>=g||(E(I),T.push(I));h[M]=T}}for(const v of h)for(const B of v)ft(B,f);return h}function Mt(A,a){return{type:A.type,id:A.id,properties:A.properties,geometry:a?Tt(A):[]}}function yt(A,a,l,h,g){A.emplaceBack(2*a+(h+1)/2,2*l+(g+1)/2)}function bt(A,a,l){A.emplaceBack(a.x,a.y,a.z,l[0]*16384,l[1]*16384,l[2]*16384)}class ir{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(l=>l.fqid),this.index=a.index,this.hasPattern=!1,this.projection=a.projection,this.layoutVertexArray=new ru,this.indexArray=new Fo,this.segments=new bi,this.programConfigurations=new au(a.layers,{zoom:a.zoom,lut:a.lut}),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}updateFootprints(a,l){}populate(a,l,h,g){const f=this.layers[0],v=[];let B=null;f.type==="circle"&&(B=f.layout.get("circle-sort-key"));for(const{feature:P,id:b,index:E,sourceLayerIndex:M}of a){const T=this.layers[0]._featureFilter.needGeometry,I=Mt(P,T);if(!this.layers[0]._featureFilter.filter(new xi(this.zoom),I,h))continue;const R=B?B.evaluate(I,{},h):void 0,U={id:b,properties:P.properties,type:P.type,sourceLayerIndex:M,index:E,geometry:T?I.geometry:Tt(P,h,g),patterns:{},sortKey:R};v.push(U)}B&&v.sort((P,b)=>P.sortKey-b.sortKey);let F=null;g.projection.name==="globe"&&(this.globeExtVertexArray=new _m,F=g.projection);for(const P of v){const{geometry:b,index:E,sourceLayerIndex:M}=P,T=a[E].feature;this.addFeature(P,b,E,l.availableImages,h,F,l.brightness),l.featureIndex.insert(T,b,E,M,this.index)}}update(a,l,h,g,f){const v=Object.keys(a).length!==0;v&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(a,l,v?this.stateDependentLayers:this.layers,h,g,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,RT.members),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=a.createVertexBuffer(this.globeExtVertexArray,LT.members))),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(a,l,h,g,f,v,B){for(const F of l)for(const P of F){const b=P.x,E=P.y;if(b<0||b>=Ut||E<0||E>=Ut)continue;if(v){const I=v.projectTilePoint(b,E,f),R=v.upVector(f,b,E),U=this.globeExtVertexArray;bt(U,I,R),bt(U,I,R),bt(U,I,R),bt(U,I,R)}const M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),T=M.vertexLength;yt(this.layoutVertexArray,b,E,-1,-1),yt(this.layoutVertexArray,b,E,1,-1),yt(this.layoutVertexArray,b,E,1,1),yt(this.layoutVertexArray,b,E,-1,1),this.indexArray.emplaceBack(T,T+1,T+2),this.indexArray.emplaceBack(T,T+2,T+3),M.vertexLength+=4,M.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,h,{},g,f,B)}}function Lt(A,a){for(let l=0;l<A.length;l++)if(Wn(a,A[l]))return!0;for(let l=0;l<a.length;l++)if(Wn(A,a[l]))return!0;return!!lr(A,a)}function Ht(A,a,l){return!!Wn(A,a)||!!Ir(a,A,l)}function ur(A,a){if(A.length===1)return In(a,A[0]);for(let l=0;l<a.length;l++){const h=a[l];for(let g=0;g<h.length;g++)if(Wn(A,h[g]))return!0}for(let l=0;l<A.length;l++)if(In(a,A[l]))return!0;for(let l=0;l<a.length;l++)if(lr(A,a[l]))return!0;return!1}function Zt(A,a,l){if(A.length>1){if(lr(A,a))return!0;for(let h=0;h<a.length;h++)if(Ir(a[h],A,l))return!0}for(let h=0;h<A.length;h++)if(Ir(A[h],a,l))return!0;return!1}function lr(A,a){if(A.length===0||a.length===0)return!1;for(let l=0;l<A.length-1;l++){const h=A[l],g=A[l+1];for(let f=0;f<a.length-1;f++)if(Dr(h,g,a[f],a[f+1]))return!0}return!1}function Dr(A,a,l,h){return qa(A,l,h)!==qa(a,l,h)&&qa(A,a,l)!==qa(A,a,h)}function Ir(A,a,l){const h=l*l;if(a.length===1)return A.distSqr(a[0])<h;for(let g=1;g<a.length;g++)if(Cn(A,a[g-1],a[g])<h)return!0;return!1}function Cn(A,a,l){const h=a.distSqr(l);if(h===0)return A.distSqr(a);const g=((A.x-a.x)*(l.x-a.x)+(A.y-a.y)*(l.y-a.y))/h;return A.distSqr(g<0?a:g>1?l:l.sub(a)._mult(g)._add(a))}function In(A,a){let l,h,g,f=!1;for(let v=0;v<A.length;v++){l=A[v];for(let B=0,F=l.length-1;B<l.length;F=B++)h=l[B],g=l[F],h.y>a.y!=g.y>a.y&&a.x<(g.x-h.x)*(a.y-h.y)/(g.y-h.y)+h.x&&(f=!f)}return f}function Wn(A,a){let l=!1;for(let h=0,g=A.length-1;h<A.length;g=h++){const f=A[h],v=A[g];f.y>a.y!=v.y>a.y&&a.x<(v.x-f.x)*(a.y-f.y)/(v.y-f.y)+f.x&&(l=!l)}return l}function vs(A,a,l,h,g){for(const v of A)if(a<=v.x&&l<=v.y&&h>=v.x&&g>=v.y)return!0;const f=[new Dt(a,l),new Dt(a,g),new Dt(h,g),new Dt(h,l)];if(A.length>2){for(const v of f)if(Wn(A,v))return!0}for(let v=0;v<A.length-1;v++)if(Pi(A[v],A[v+1],f))return!0;return!1}function Pi(A,a,l){const h=l[0],g=l[2];if(A.x<h.x&&a.x<h.x||A.x>g.x&&a.x>g.x||A.y<h.y&&a.y<h.y||A.y>g.y&&a.y>g.y)return!1;const f=qa(A,a,l[0]);return f!==qa(A,a,l[1])||f!==qa(A,a,l[2])||f!==qa(A,a,l[3])}function Vr(A,a,l,h,g,f){let v=a.y-A.y,B=A.x-a.x;if(f=f||0){const F=v*v+B*B;if(F===0)return!0;const P=Math.sqrt(F);v/=P,B/=P}return!((l.x-A.x)*v+(l.y-A.y)*B-f<0||(h.x-A.x)*v+(h.y-A.y)*B-f<0||(g.x-A.x)*v+(g.y-A.y)*B-f<0)}function Tn(A,a,l,h,g,f,v){return!(Vr(A,a,h,g,f,v)||Vr(a,l,h,g,f,v)||Vr(l,A,h,g,f,v)||Vr(h,g,A,a,l,v)||Vr(g,f,A,a,l,v)||Vr(f,h,A,a,l,v))}function ni(A,a,l){const h=a.paint.get(A).value;return h.kind==="constant"?h.value:l.programConfigurations.get(a.id).getMaxValue(A)}function En(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function Mr(A,a,l,h,g){if(!a[0]&&!a[1])return A;const f=Dt.convert(a)._mult(g);l==="viewport"&&f._rotate(-h);const v=[];for(let B=0;B<A.length;B++)v.push(A[B].sub(f));return v}function dn(A,a,l,h){const g=Dt.convert(A)._mult(h);return a==="viewport"&&g._rotate(-l),g}let wn,wi;Wt(ir,"CircleBucket",{omit:["layers"]});var Di,nn={exports:{}},Ji=(Di||(Di=1,function(A,a){(function(l){function h(f,v,B){var F=g(256*f,256*(v=Math.pow(2,B)-v-1),B),P=g(256*(f+1),256*(v+1),B);return F[0]+","+F[1]+","+P[0]+","+P[1]}function g(f,v,B){var F=2*Math.PI*6378137/256/Math.pow(2,B);return[f*F-2*Math.PI*6378137/2,v*F-2*Math.PI*6378137/2]}l.getURL=function(f,v,B,F,P,b){return b=b||{},f+"?"+["bbox="+h(B,F,P),"format="+(b.format||"image/png"),"service="+(b.service||"WMS"),"version="+(b.version||"1.1.1"),"request="+(b.request||"GetMap"),"srs="+(b.srs||"EPSG:3857"),"width="+(b.width||256),"height="+(b.height||256),"layers="+v].join("&")},l.getTileBBox=h,l.getMercCoords=g,Object.defineProperty(l,"__esModule",{value:!0})})(a)}(0,nn.exports)),nn.exports);class co{constructor(a,l,h){this.z=a,this.x=l,this.y=h,this.key=ua(0,a,a,l,h)}equals(a){return this.z===a.z&&this.x===a.x&&this.y===a.y}url(a,l){const h=Ji.getTileBBox(this.x,this.y,this.z),g=function(f,v,B){let F,P="";for(let b=f;b>0;b--)F=1<<b-1,P+=(v&F?1:0)+(B&F?2:0);return P}(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",g).replace("{bbox-epsg-3857}",h)}toString(){return`${this.z}/${this.x}/${this.y}`}}class $i{constructor(a,l){this.wrap=a,this.canonical=l,this.key=ua(a,l.z,l.z,l.x,l.y)}}class zn{constructor(a,l,h,g,f){this.overscaledZ=a,this.wrap=l,this.canonical=new co(h,+g,+f),this.key=l===0&&a===h?this.canonical.key:ua(l,a,h,g,f)}equals(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)}scaledTo(a){const l=this.canonical.z-a;return a>this.canonical.z?new zn(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new zn(a,this.wrap,a,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(a,l=!0){if(this.overscaledZ===a&&l)return this.key;if(a>this.canonical.z)return ua(this.wrap*+l,a,this.canonical.z,this.canonical.x,this.canonical.y);{const h=this.canonical.z-a;return ua(this.wrap*+l,a,a,this.canonical.x>>h,this.canonical.y>>h)}}isChildOf(a){if(a.wrap!==this.wrap)return!1;const l=this.canonical.z-a.canonical.z;return a.overscaledZ===0||a.overscaledZ<this.overscaledZ&&a.canonical.z<this.canonical.z&&a.canonical.x===this.canonical.x>>l&&a.canonical.y===this.canonical.y>>l}children(a){if(this.overscaledZ>=a)return[new zn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,h=2*this.canonical.x,g=2*this.canonical.y;return[new zn(l,this.wrap,l,h,g),new zn(l,this.wrap,l,h+1,g),new zn(l,this.wrap,l,h,g+1),new zn(l,this.wrap,l,h+1,g+1)]}isLessThan(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))}wrapped(){return new zn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(a){return new zn(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new $i(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function ua(A,a,l,h,g){const f=1<<Math.min(l,22);let v=f*(g%f)+h%f;return A&&l<22&&(v+=f*f*((A<0?-2*A-1:2*A)%(1<<2*(22-l)))),16*(32*v+l)+(a-l)}const Aa=[A=>{let a=A.canonical.x-1,l=A.wrap;return a<0&&(a=(1<<A.canonical.z)-1,l--),new zn(A.overscaledZ,l,A.canonical.z,a,A.canonical.y)},A=>{let a=A.canonical.x+1,l=A.wrap;return a===1<<A.canonical.z&&(a=0,l++),new zn(A.overscaledZ,l,A.canonical.z,a,A.canonical.y)},A=>new zn(A.overscaledZ,A.wrap,A.canonical.z,A.canonical.x,(A.canonical.y===0?1<<A.canonical.z:A.canonical.y)-1),A=>new zn(A.overscaledZ,A.wrap,A.canonical.z,A.canonical.x,A.canonical.y===(1<<A.canonical.z)-1?0:A.canonical.y+1)];Wt(co,"CanonicalTileID"),Wt(zn,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const ys=hn([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:is}=ys,Ra=hn([{name:"a_pos_3",components:3,type:"Int16"}]);var _s=hn([{name:"a_pos",type:"Int16",components:2}]);class fc{constructor(a,l){this.pos=a,this.dir=l}intersectsPlane(a,l,h){const g=ke.vec3.dot(l,this.dir);if(Math.abs(g)<1e-6)return!1;const f=((a[0]-this.pos[0])*l[0]+(a[1]-this.pos[1])*l[1]+(a[2]-this.pos[2])*l[2])/g;return h[0]=this.pos[0]+this.dir[0]*f,h[1]=this.pos[1]+this.dir[1]*f,h[2]=this.pos[2]+this.dir[2]*f,!0}closestPointOnSphere(a,l,h){if(ke.vec3.equals(this.pos,a)||l===0)return h[0]=h[1]=h[2]=0,!1;const[g,f,v]=this.dir,B=this.pos[0]-a[0],F=this.pos[1]-a[1],P=this.pos[2]-a[2],b=g*g+f*f+v*v,E=2*(B*g+F*f+P*v),M=E*E-4*b*(B*B+F*F+P*P-l*l);if(M<0){const T=Math.max(-E/2,0),I=B+g*T,R=F+f*T,U=P+v*T,V=Math.hypot(I,R,U);return h[0]=I*l/V,h[1]=R*l/V,h[2]=U*l/V,!1}{const T=(-E-Math.sqrt(M))/(2*b);if(T<0){const I=Math.hypot(B,F,P);return h[0]=B*l/I,h[1]=F*l/I,h[2]=P*l/I,!1}return h[0]=B+g*T,h[1]=F+f*T,h[2]=P+v*T,!0}}}class su{constructor(a,l,h,g,f){this.TL=a,this.TR=l,this.BR=h,this.BL=g,this.horizon=f}static fromInvProjectionMatrix(a,l,h){const g=[-1,1,1],f=[1,1,1],v=[1,-1,1],B=[-1,-1,1],F=ke.vec3.transformMat4(g,g,a),P=ke.vec3.transformMat4(f,f,a),b=ke.vec3.transformMat4(v,v,a),E=ke.vec3.transformMat4(B,B,a);return new su(F,P,b,E,l/h)}}function wl(A,a,l){let h=1/0,g=-1/0;const f=[];for(const v of A){ke.vec3.sub(f,v,a);const B=ke.vec3.dot(f,l);h=Math.min(h,B),g=Math.max(g,B)}return[h,g]}function Ch(A,a){let l=!0;for(let h=0;h<A.planes.length;h++){const g=A.planes[h];let f=0;for(let v=0;v<a.length;v++)f+=ke.vec3.dot(g,a[v])+g[3]>=0;if(f===0)return 0;f!==a.length&&(l=!1)}return l?2:1}function Sh(A,a){for(const l of A.projections){const h=wl(a,A.points[0],l.axis);if(l.projection[1]<h[0]||l.projection[0]>h[1])return 0}return 1}function Tm(A,a){let l=0;const h=[0,0,0,0];for(let g=0;g<A.length;g++)h[0]=A[g][0],h[1]=A[g][1],h[2]=A[g][2],h[3]=1,ke.vec4.dot(h,a)>=0&&l++;return l}class Eh{constructor(a,l){this.points=a||new Array(8).fill([0,0,0]),this.planes=l||new Array(6).fill([0,0,0,0]),this.bounds=Qn.fromPoints(this.points),this.projections=[],this.frustumEdges=[ke.vec3.sub([],this.points[2],this.points[3]),ke.vec3.sub([],this.points[0],this.points[3]),ke.vec3.sub([],this.points[4],this.points[0]),ke.vec3.sub([],this.points[5],this.points[1]),ke.vec3.sub([],this.points[6],this.points[2]),ke.vec3.sub([],this.points[7],this.points[3])];for(const h of this.frustumEdges){const g=[0,-h[2],h[1]],f=[h[2],0,-h[0]];this.projections.push({axis:g,projection:wl(this.points,this.points[0],g)}),this.projections.push({axis:f,projection:wl(this.points,this.points[0],f)})}}static fromInvProjectionMatrix(a,l,h,g){const f=Math.pow(2,h),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(P=>{const b=ke.vec4.transformMat4([],P,a),E=1/b[3]/l*f;return ke.vec4.mul(b,b,[E,E,g?1/b[3]:E,E])}),B=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(P=>{const b=ke.vec3.sub([],v[P[0]],v[P[1]]),E=ke.vec3.sub([],v[P[2]],v[P[1]]),M=ke.vec3.normalize([],ke.vec3.cross([],b,E)),T=-ke.vec3.dot(M,v[P[1]]);return M.concat(T)}),F=[];for(let P=0;P<v.length;P++)F.push([v[P][0],v[P][1],v[P][2]]);return new Eh(F,B)}intersectsPrecise(a,l,h){for(let g=0;g<l.length;g++)if(!Tm(a,l[g]))return 0;for(let g=0;g<this.planes.length;g++)if(!Tm(a,this.planes[g]))return 0;for(const g of h)for(const f of this.frustumEdges){const v=ke.vec3.cross([],g,f),B=ke.vec3.length(v);if(B===0)continue;ke.vec3.scale(v,v,1/B);const F=wl(this.points,this.points[0],v),P=wl(a,this.points[0],v);if(F[0]>P[1]||P[0]>F[1])return 0}return 1}containsPoint(a){for(const l of this.planes){const h=l[3];if(ke.vec3.dot([l[0],l[1],l[2]],a)+h<0)return!1}return!0}}class Qn{static fromPoints(a){const l=[1/0,1/0,1/0],h=[-1/0,-1/0,-1/0];for(const g of a)ke.vec3.min(l,l,g),ke.vec3.max(h,h,g);return new Qn(l,h)}static fromTileIdAndHeight(a,l,h){const g=1<<a.canonical.z,f=a.canonical.x,v=a.canonical.y;return new Qn([f/g,v/g,l],[(f+1)/g,(v+1)/g,h])}static applyTransform(a,l){const h=a.getCorners();for(let g=0;g<h.length;++g)ke.vec3.transformMat4(h[g],h[g],l);return Qn.fromPoints(h)}static applyTransformFast(a,l){const h=[l[12],l[13],l[14]],g=[...h];for(let f=0;f<3;f++)for(let v=0;v<3;v++){const B=l[4*v+f],F=B*a.min[v],P=B*a.max[v];h[f]+=Math.min(F,P),g[f]+=Math.max(F,P)}return new Qn(h,g)}static projectAabbCorners(a,l){const h=a.getCorners();for(let g=0;g<h.length;++g)ke.vec3.transformMat4(h[g],h[g],l);return h}constructor(a,l){this.min=a,this.max=l,this.center=ke.vec3.scale([],ke.vec3.add([],this.min,this.max),.5)}quadrant(a){const l=[a%2==0,a<2],h=ke.vec3.clone(this.min),g=ke.vec3.clone(this.max);for(let f=0;f<l.length;f++)h[f]=l[f]?this.min[f]:this.center[f],g[f]=l[f]?this.center[f]:this.max[f];return g[2]=this.max[2],new Qn(h,g)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}distanceZ(a){return Math.max(Math.min(this.max[2],a[2]),this.min[2])-a[2]}getCorners(){const a=this.min,l=this.max;return[[a[0],a[1],a[2]],[l[0],a[1],a[2]],[l[0],l[1],a[2]],[a[0],l[1],a[2]],[a[0],a[1],l[2]],[l[0],a[1],l[2]],[l[0],l[1],l[2]],[a[0],l[1],l[2]]]}intersects(a){return this.intersectsAabb(a.bounds)?Ch(a,this.getCorners()):0}intersectsFlat(a){return this.intersectsAabb(a.bounds)?Ch(a,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(a,l){return l||this.intersects(a)?Sh(a,this.getCorners()):0}intersectsPreciseFlat(a,l){return l||this.intersectsFlat(a)?Sh(a,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(a){for(let l=0;l<3;++l)if(this.min[l]>a.max[l]||a.min[l]>this.max[l])return!1;return!0}intersectsAabbXY(a){return!(this.min[0]>a.max[0]||a.min[0]>this.max[0]||this.min[1]>a.max[1]||a.min[1]>this.max[1])}encapsulate(a){for(let l=0;l<3;l++)this.min[l]=Math.min(this.min[l],a.min[l]),this.max[l]=Math.max(this.max[l],a.max[l])}encapsulatePoint(a){for(let l=0;l<3;l++)this.min[l]=Math.min(this.min[l],a[l]),this.max[l]=Math.max(this.max[l],a[l])}closestPoint(a){return[Math.max(Math.min(this.max[0],a[0]),this.min[0]),Math.max(Math.min(this.max[1],a[1]),this.min[1]),Math.max(Math.min(this.max[2],a[2]),this.min[2])]}}function iA(A){return A*s/j}Wt(Qn,"Aabb");const jT=[new Qn([D,D,D],[L,L,L]),new Qn([D,D,D],[0,0,L]),new Qn([0,D,D],[L,0,L]),new Qn([D,0,D],[0,L,L]),new Qn([0,0,D],[L,L,L])];function vb(A,a,l,h=!0){const g=ke.vec3.scale([],A._camera.position,A.worldSize),f=[a,l,1,1];ke.vec4.transformMat4(f,f,A.pixelMatrixInverse),ke.vec4.scale(f,f,1/f[3]);const v=ke.vec3.sub([],f,g),B=ke.vec3.normalize([],v),F=A.globeMatrix,P=[F[12],F[13],F[14]],b=ke.vec3.sub([],P,g),E=ke.vec3.length(b),M=ke.vec3.normalize([],b),T=A.worldSize/(2*Math.PI),I=ke.vec3.dot(M,B),R=Math.asin(T/E);if(R<Math.acos(I)){if(!h)return null;const Ce=[],_e=[];ke.vec3.scale(Ce,B,E/I),ke.vec3.normalize(_e,ke.vec3.sub(_e,Ce,b)),ke.vec3.normalize(B,ke.vec3.add(B,b,ke.vec3.scale(B,_e,Math.tan(R)*E)))}const U=[];new fc(g,B).closestPointOnSphere(P,T,U);const V=ke.vec3.normalize([],oc(F,0)),X=ke.vec3.normalize([],oc(F,1)),Y=ke.vec3.normalize([],oc(F,2)),H=ke.vec3.dot(V,U),$=ke.vec3.dot(X,U),te=ke.vec3.dot(Y,U),le=en(Math.asin(-$/T));let me=en(Math.atan2(H,te));me=A.center.lng+function(Ce,_e){const Te=(_e-Ce+180)%360-180;return Te<-180?Te+360:Te}(A.center.lng,me);const ve=ge(me),de=xr(ye(le),0,1);return new Xe(ve,de)}class Pq{constructor(a,l,h){this.a=ke.vec3.sub([],a,h),this.b=ke.vec3.sub([],l,h),this.center=h;const g=ke.vec3.normalize([],this.a),f=ke.vec3.normalize([],this.b);this.angle=Math.acos(ke.vec3.dot(g,f))}}function GT(A,a){if(A.angle===0)return null;let l;return l=A.a[a]===0?1/A.angle*.5*Math.PI:1/A.angle*Math.atan(A.b[a]/A.a[a]/Math.sin(A.angle)-1/Math.tan(A.angle)),l<0||l>1?null:function(h,g,f,v){const B=Math.sin(f);return h*(Math.sin((1-v)*f)/B)+g*(Math.sin(v*f)/B)}(A.a[a],A.b[a],A.angle,xr(l,0,1))+A.center[a]}function lu(A){if(A.z<=1)return jT[A.z+2*A.y+A.x];const a=KT(yb(A));return Qn.fromPoints(a)}function oA(A,a,l){return ke.vec3.scale(A,A,1-l),ke.vec3.scaleAndAdd(A,A,a,l)}function fR(A,a,l){for(const h of A)ke.vec3.transformMat4(h,h,a),ke.vec3.scale(h,h,l)}function pR(A,a,l,h){const g=a/A.worldSize,f=A.globeMatrix;if(l.z<=1){const ve=lu(l).getCorners();return fR(ve,f,g),Qn.fromPoints(ve)}const v=yb(l,h),B=KT(v,s+iA(A._tileCoverLift));fR(B,f,g);const F=Number.MAX_VALUE,P=[-F,-F,-F],b=[F,F,F];if(v.contains(A.center)){for(const Ce of B)ke.vec3.min(b,b,Ce),ke.vec3.max(P,P,Ce);P[2]=0;const ve=A.point,de=[ve.x*g,ve.y*g,0];return ke.vec3.min(b,b,de),ke.vec3.max(P,P,de),new Qn(b,P)}if(A._tileCoverLift>0){for(const ve of B)ke.vec3.min(b,b,ve),ke.vec3.max(P,P,ve);return new Qn(b,P)}const E=[f[12]*g,f[13]*g,f[14]*g],M=v.getCenter(),T=xr(A.center.lat,-Ee,Ee),I=xr(M.lat,-Ee,Ee),R=ge(A.center.lng),U=ye(T);let V=R-ge(M.lng);const X=U-ye(I);V>.5?V-=1:V<-.5&&(V+=1);let Y=0;if(Math.abs(V)>Math.abs(X))Y=V>=0?1:3;else{Y=X>=0?0:2;const ve=[f[4]*g,f[5]*g,f[6]*g],de=-Math.sin(Br(X>=0?v.getSouth():v.getNorth()))*s;ke.vec3.scaleAndAdd(E,E,ve,de)}const H=B[Y],$=B[(Y+1)%4],te=new Pq(H,$,E),le=[GT(te,0)||H[0],GT(te,1)||H[1],GT(te,2)||H[2]],me=Th(A.zoom);if(me>0){const ve=function({x:Ce,y:_e,z:Te},Oe,Ve,je,We){const et=1/(1<<Te);let qe=Ce*et,At=qe+et,xt=_e*et,at=xt+et,Vt=0;const Ot=(qe+At)/2-je;return Ot>.5?Vt=-1:Ot<-.5&&(Vt=1),qe=((qe+Vt)*Oe-(je*=Oe))*Ve+je,At=((At+Vt)*Oe-je)*Ve+je,xt=(xt*Oe-(We*=Oe))*Ve+We,at=(at*Oe-We)*Ve+We,[[qe,at,0],[At,at,0],[At,xt,0],[qe,xt,0]]}(l,a,A._pixelsPerMercatorPixel,R,U);for(let Ce=0;Ce<B.length;Ce++)oA(B[Ce],ve[Ce],me);const de=ke.vec3.add([],ve[Y],ve[(Y+1)%4]);ke.vec3.scale(de,de,.5),oA(le,de,me)}for(const ve of B)ke.vec3.min(b,b,ve),ke.vec3.max(P,P,ve);return b[2]=Math.min(H[2],$[2]),ke.vec3.min(b,b,le),ke.vec3.max(P,P,le),new Qn(b,P)}function yb({x:A,y:a,z:l},h=!1){const g=1/(1<<l),f=new Z(we(A*g),a===(1<<l)-1&&h?-90:be((a+1)*g)),v=new Z(we((A+1)*g),a===0&&h?90:be(a*g));return new ne(f,v)}function KT(A,a=s){const l=Br(A.getNorth()),h=Br(A.getSouth()),g=Math.cos(l),f=Math.cos(h),v=Math.sin(l),B=Math.sin(h),F=A.getWest(),P=A.getEast();return[z(f,B,F,a),z(f,B,P,a),z(g,v,P,a),z(g,v,F,a)]}function Dv(A,a,l,h){const g=1<<l.z,f=(A/Ut+l.x)/g;return N(be((a/Ut+l.y)/g),we(f),h)}function _b({min:A,max:a}){return _/Math.max(a[0]-A[0],a[1]-A[1],a[2]-A[2])}const mR=new Float64Array(16);function xb(A){const a=_b(A),l=ke.mat4.fromScaling(mR,[a,a,a]);return ke.mat4.translate(l,l,ke.vec3.negate([],A.min))}function WT(A){const a=ke.mat4.fromTranslation(mR,A.min),l=1/_b(A);return ke.mat4.scale(a,a,[l,l,l])}function qT(A){const a=Ut/(2*Math.PI);return A/(2*Math.PI)/a}function gR(A,a){return Ut/(512*Math.pow(2,A))*_b(lu(a))}function vR(A,a,l,h,g){const f=qT(l),v=[A,a,-l/(2*Math.PI)],B=ke.mat4.identity(new Float64Array(16));return ke.mat4.translate(B,B,v),ke.mat4.scale(B,B,[f,f,f]),ke.mat4.rotateX(B,B,Br(-g)),ke.mat4.rotateY(B,B,Br(-h)),B}function Th(A){return Ls(u,m,A)}function yR(A,a){const l=N(a.lat,a.lng),h=function(f){const v=N(f._center.lat,f._center.lng),B=ke.vec3.fromValues(0,1,0);let F=ke.vec3.cross([],B,v);const P=ke.mat4.fromRotation([],-f.angle,v);F=ke.vec3.transformMat4(F,F,P),ke.mat4.fromRotation(P,-f._pitch,F);const b=ke.vec3.normalize([],v);return ke.vec3.scale(b,b,iA(f.cameraToCenterDistance/f.pixelsPerMeter)),ke.vec3.transformMat4(b,b,P),ke.vec3.add([],v,b)}(A),g=ke.vec3.subtract([],h,l);return ke.vec3.angle(g,l)}function XT(A,a){return yR(A,a)>Math.PI/2*1.01}const _R=Br(85),Dq=Math.cos(_R),kq=Math.sin(_R),Rq=ke.mat4.create(),xR=A=>{const a=[];return A.paint.get("circle-pitch-alignment")==="map"&&a.push("PITCH_WITH_MAP"),A.paint.get("circle-pitch-scale")==="map"&&a.push("SCALE_WITH_MAP"),a};function bR(A,a,l,h,g,f,v,B,F){if(f&&A.queryGeometry.isAboveHorizon)return!1;f&&(F*=A.pixelToTileUnitsFactor);const P=A.tileID.canonical,b=l.projection.upVectorScale(P,l.center.lat,l.worldSize).metersToTile;for(const E of a)for(const M of E){const T=M.add(B),I=g&&l.elevation?l.elevation.exaggeration()*g.getElevationAt(T.x,T.y,!0):0,R=l.projection.projectTilePoint(T.x,T.y,P);if(I>0){const Y=l.projection.upVector(P,T.x,T.y);R.x+=Y[0]*b*I,R.y+=Y[1]*b*I,R.z+=Y[2]*b*I}const U=f?T:Lq(R.x,R.y,R.z,h),V=f?A.tilespaceRays.map(Y=>Uq(Y,I)):A.queryGeometry.screenGeometry,X=ke.vec4.transformMat4([],[R.x,R.y,R.z,1],h);if(!v&&f?F*=X[3]/l.cameraToCenterDistance:v&&!f&&(F*=l.cameraToCenterDistance/X[3]),f){const Y=be((M.y/Ut+P.y)/(1<<P.z));F/=l.projection.pixelsPerMeter(Y,1)/pe(1,Y)}if(Ht(V,U,F))return!0}return!1}function Lq(A,a,l,h){const g=ke.vec4.transformMat4([],[A,a,l,1],h);return new Dt(g[0]/g[3],g[1]/g[3])}const wR=ke.vec3.fromValues(0,0,0),Oq=ke.vec3.fromValues(0,0,1);function Uq(A,a){const l=ke.vec3.create();return wR[2]=a,A.intersectsPlane(wR,Oq,l),new Dt(l[0],l[1])}class BR extends ir{}let CR,SR,ER,TR;function FR(A,{width:a,height:l},h,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==a*l*h)throw new RangeError("mismatched image size")}else g=new Uint8Array(a*l*h);return A.width=a,A.height=l,A.data=g,A}function IR(A,a,l){const{width:h,height:g}=a;h===A.width&&g===A.height||(ZT(A,a,{x:0,y:0},{x:0,y:0},{width:Math.min(A.width,h),height:Math.min(A.height,g)},l,null),A.width=h,A.height=g,A.data=a.data)}function ZT(A,a,l,h,g,f,v,B){if(g.width===0||g.height===0)return a;if(g.width>A.width||g.height>A.height||l.x>A.width-g.width||l.y>A.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>a.width||g.height>a.height||h.x>a.width-g.width||h.y>a.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const F=A.data,P=a.data,b=f===4&&B;for(let E=0;E<g.height;E++){const M=((l.y+E)*A.width+l.x)*f,T=((h.y+E)*a.width+h.x)*f;if(b)for(let I=0;I<g.width;I++){const R=M+I*f+3,U=T+I*f;P[U+0]=255,P[U+1]=255,P[U+2]=255,P[U+3]=F[R]}else if(v)for(let I=0;I<g.width;I++){const R=M+I*f,U=T+I*f,V=F[R+3],X=new An(F[R+0]/255*V,F[R+1]/255*V,F[R+2]/255*V,V).toRenderColor(v).toArray();P[U+0]=X[0],P[U+1]=X[1],P[U+2]=X[2],P[U+3]=X[3]}else for(let I=0;I<g.width*f;I++)P[T+I]=F[M+I]}return a}Wt(BR,"HeatmapBucket",{omit:["layers"]});class Fh{constructor(a,l){FR(this,a,1,l)}resize(a){IR(this,new Fh(a),1)}clone(){return new Fh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,l,h,g,f){ZT(a,l,h,g,f,1,null)}}class ha{constructor(a,l){FR(this,a,4,l)}resize(a){IR(this,new ha(a),4)}replace(a,l){l?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a}clone(){return new ha({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(a,l,h,g,f,v,B){ZT(a,l,h,g,f,4,v,B)}}class MR{constructor(a,l){this.width=a.width,this.height=a.height,this.data=l instanceof Uint8Array?new Float32Array(l.buffer):l}}function kv(A){const a={},l=A.resolution||256,h=A.clips?A.clips.length:1,g=A.image||new ha({width:l,height:h}),f=(v,B,F)=>{a[A.evaluationKey]=F;const P=A.expression.evaluate(a);P&&(g.data[v+B+0]=Math.floor(255*P.r/P.a),g.data[v+B+1]=Math.floor(255*P.g/P.a),g.data[v+B+2]=Math.floor(255*P.b/P.a),g.data[v+B+3]=Math.floor(255*P.a))};if(A.clips)for(let v=0,B=0;v<h;++v,B+=4*l)for(let F=0,P=0;F<l;F++,P+=4){const b=F/(l-1),{start:E,end:M}=A.clips[v];f(B,P,E*(1-b)+M*b)}else for(let v=0,B=0;v<l;v++,B+=4)f(0,B,v/(l-1));return g}Wt(Fh,"AlphaImage"),Wt(ha,"RGBAImage");const zq=hn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Qq}=zq;function Rv(A,a,l=2){const h=a&&a.length,g=h?a[0]*l:A.length;let f=PR(A,0,g,l,!0);const v=[];if(!f||f.next===f.prev)return v;let B,F,P;if(h&&(f=function(b,E,M,T){const I=[];for(let R=0,U=E.length;R<U;R++){const V=PR(b,E[R]*T,R<U-1?E[R+1]*T:b.length,T,!1);V===V.next&&(V.steiner=!0),I.push(qq(V))}I.sort(Gq);for(let R=0;R<I.length;R++)M=Kq(I[R],M);return M}(A,a,f,l)),A.length>80*l){B=1/0,F=1/0;let b=-1/0,E=-1/0;for(let M=l;M<g;M+=l){const T=A[M],I=A[M+1];T<B&&(B=T),I<F&&(F=I),T>b&&(b=T),I>E&&(E=I)}P=Math.max(b-B,E-F),P=P!==0?32767/P:0}return Lv(f,v,l,B,F,P,0),v}function PR(A,a,l,h,g){let f;if(g===function(v,B,F,P){let b=0;for(let E=B,M=F-P;E<F;E+=P)b+=(v[M]-v[E])*(v[E+1]+v[M+1]),M=E;return b}(A,a,l,h)>0)for(let v=a;v<l;v+=h)f=RR(v/h|0,A[v],A[v+1],f);else for(let v=l-h;v>=a;v-=h)f=RR(v/h|0,A[v],A[v+1],f);return f&&bb(f,f.next)&&(Uv(f),f=f.next),f}function Sf(A,a){if(!A)return A;a||(a=A);let l,h=A;do if(l=!1,h.steiner||!bb(h,h.next)&&eo(h.prev,h,h.next)!==0)h=h.next;else{if(Uv(h),h=a=h.prev,h===h.next)break;l=!0}while(l||h!==a);return a}function Lv(A,a,l,h,g,f,v){if(!A)return;!v&&f&&function(F,P,b,E){let M=F;do M.z===0&&(M.z=YT(M.x,M.y,P,b,E)),M.prevZ=M.prev,M.nextZ=M.next,M=M.next;while(M!==F);M.prevZ.nextZ=null,M.prevZ=null,function(T){let I,R=1;do{let U,V=T;T=null;let X=null;for(I=0;V;){I++;let Y=V,H=0;for(let te=0;te<R&&(H++,Y=Y.nextZ,Y);te++);let $=R;for(;H>0||$>0&&Y;)H!==0&&($===0||!Y||V.z<=Y.z)?(U=V,V=V.nextZ,H--):(U=Y,Y=Y.nextZ,$--),X?X.nextZ=U:T=U,U.prevZ=X,X=U;V=Y}X.nextZ=null,R*=2}while(I>1)}(M)}(A,h,g,f);let B=A;for(;A.prev!==A.next;){const F=A.prev,P=A.next;if(f?Vq(A,h,g,f):Nq(A))a.push(F.i,A.i,P.i),Uv(A),A=P.next,B=P.next;else if((A=P)===B){v?v===1?Lv(A=Hq(Sf(A),a),a,l,h,g,f,2):v===2&&jq(A,a,l,h,g,f):Lv(Sf(A),a,l,h,g,f,1);break}}}function Nq(A){const a=A.prev,l=A,h=A.next;if(eo(a,l,h)>=0)return!1;const g=a.x,f=l.x,v=h.x,B=a.y,F=l.y,P=h.y,b=g<f?g<v?g:v:f<v?f:v,E=B<F?B<P?B:P:F<P?F:P,M=g>f?g>v?g:v:f>v?f:v,T=B>F?B>P?B:P:F>P?F:P;let I=h.next;for(;I!==a;){if(I.x>=b&&I.x<=M&&I.y>=E&&I.y<=T&&Fm(g,B,f,F,v,P,I.x,I.y)&&eo(I.prev,I,I.next)>=0)return!1;I=I.next}return!0}function Vq(A,a,l,h){const g=A.prev,f=A,v=A.next;if(eo(g,f,v)>=0)return!1;const B=g.x,F=f.x,P=v.x,b=g.y,E=f.y,M=v.y,T=B<F?B<P?B:P:F<P?F:P,I=b<E?b<M?b:M:E<M?E:M,R=B>F?B>P?B:P:F>P?F:P,U=b>E?b>M?b:M:E>M?E:M,V=YT(T,I,a,l,h),X=YT(R,U,a,l,h);let Y=A.prevZ,H=A.nextZ;for(;Y&&Y.z>=V&&H&&H.z<=X;){if(Y.x>=T&&Y.x<=R&&Y.y>=I&&Y.y<=U&&Y!==g&&Y!==v&&Fm(B,b,F,E,P,M,Y.x,Y.y)&&eo(Y.prev,Y,Y.next)>=0||(Y=Y.prevZ,H.x>=T&&H.x<=R&&H.y>=I&&H.y<=U&&H!==g&&H!==v&&Fm(B,b,F,E,P,M,H.x,H.y)&&eo(H.prev,H,H.next)>=0))return!1;H=H.nextZ}for(;Y&&Y.z>=V;){if(Y.x>=T&&Y.x<=R&&Y.y>=I&&Y.y<=U&&Y!==g&&Y!==v&&Fm(B,b,F,E,P,M,Y.x,Y.y)&&eo(Y.prev,Y,Y.next)>=0)return!1;Y=Y.prevZ}for(;H&&H.z<=X;){if(H.x>=T&&H.x<=R&&H.y>=I&&H.y<=U&&H!==g&&H!==v&&Fm(B,b,F,E,P,M,H.x,H.y)&&eo(H.prev,H,H.next)>=0)return!1;H=H.nextZ}return!0}function Hq(A,a){let l=A;do{const h=l.prev,g=l.next.next;!bb(h,g)&&DR(h,l,l.next,g)&&Ov(h,g)&&Ov(g,h)&&(a.push(h.i,l.i,g.i),Uv(l),Uv(l.next),l=A=g),l=l.next}while(l!==A);return Sf(l)}function jq(A,a,l,h,g,f){let v=A;do{let B=v.next.next;for(;B!==v.prev;){if(v.i!==B.i&&Xq(v,B)){let F=kR(v,B);return v=Sf(v,v.next),F=Sf(F,F.next),Lv(v,a,l,h,g,f,0),void Lv(F,a,l,h,g,f,0)}B=B.next}v=v.next}while(v!==A)}function Gq(A,a){return A.x-a.x}function Kq(A,a){const l=function(g,f){let v=f;const B=g.x,F=g.y;let P,b=-1/0;do{if(F<=v.y&&F>=v.next.y&&v.next.y!==v.y){const R=v.x+(F-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(R<=B&&R>b&&(b=R,P=v.x<v.next.x?v:v.next,R===B))return P}v=v.next}while(v!==f);if(!P)return null;const E=P,M=P.x,T=P.y;let I=1/0;v=P;do{if(B>=v.x&&v.x>=M&&B!==v.x&&Fm(F<T?B:b,F,M,T,F<T?b:B,F,v.x,v.y)){const R=Math.abs(F-v.y)/(B-v.x);Ov(v,g)&&(R<I||R===I&&(v.x>P.x||v.x===P.x&&Wq(P,v)))&&(P=v,I=R)}v=v.next}while(v!==E);return P}(A,a);if(!l)return a;const h=kR(l,A);return Sf(h,h.next),Sf(l,l.next)}function Wq(A,a){return eo(A.prev,A,a.prev)<0&&eo(a.next,A,A.next)<0}function YT(A,a,l,h,g){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=(A-l)*g|0)|A<<8))|A<<4))|A<<2))|A<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-h)*g|0)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function qq(A){let a=A,l=A;do(a.x<l.x||a.x===l.x&&a.y<l.y)&&(l=a),a=a.next;while(a!==A);return l}function Fm(A,a,l,h,g,f,v,B){return(g-v)*(a-B)>=(A-v)*(f-B)&&(A-v)*(h-B)>=(l-v)*(a-B)&&(l-v)*(f-B)>=(g-v)*(h-B)}function Xq(A,a){return A.next.i!==a.i&&A.prev.i!==a.i&&!function(l,h){let g=l;do{if(g.i!==l.i&&g.next.i!==l.i&&g.i!==h.i&&g.next.i!==h.i&&DR(g,g.next,l,h))return!0;g=g.next}while(g!==l);return!1}(A,a)&&(Ov(A,a)&&Ov(a,A)&&function(l,h){let g=l,f=!1;const v=(l.x+h.x)/2,B=(l.y+h.y)/2;do g.y>B!=g.next.y>B&&g.next.y!==g.y&&v<(g.next.x-g.x)*(B-g.y)/(g.next.y-g.y)+g.x&&(f=!f),g=g.next;while(g!==l);return f}(A,a)&&(eo(A.prev,A,a.prev)||eo(A,a.prev,a))||bb(A,a)&&eo(A.prev,A,A.next)>0&&eo(a.prev,a,a.next)>0)}function eo(A,a,l){return(a.y-A.y)*(l.x-a.x)-(a.x-A.x)*(l.y-a.y)}function bb(A,a){return A.x===a.x&&A.y===a.y}function DR(A,a,l,h){const g=Bb(eo(A,a,l)),f=Bb(eo(A,a,h)),v=Bb(eo(l,h,A)),B=Bb(eo(l,h,a));return g!==f&&v!==B||!(g!==0||!wb(A,l,a))||!(f!==0||!wb(A,h,a))||!(v!==0||!wb(l,A,h))||!(B!==0||!wb(l,a,h))}function wb(A,a,l){return a.x<=Math.max(A.x,l.x)&&a.x>=Math.min(A.x,l.x)&&a.y<=Math.max(A.y,l.y)&&a.y>=Math.min(A.y,l.y)}function Bb(A){return A>0?1:A<0?-1:0}function Ov(A,a){return eo(A.prev,A,A.next)<0?eo(A,a,A.next)>=0&&eo(A,A.prev,a)>=0:eo(A,a,A.prev)<0||eo(A,A.next,a)<0}function kR(A,a){const l=JT(A.i,A.x,A.y),h=JT(a.i,a.x,a.y),g=A.next,f=a.prev;return A.next=a,a.prev=A,l.next=g,g.prev=l,h.next=l,l.prev=h,f.next=h,h.prev=f,h}function RR(A,a,l,h){const g=JT(A,a,l);return h?(g.next=h.next,g.prev=h,h.next.prev=g,h.next=g):(g.prev=g,g.next=g),g}function Uv(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function JT(A,a,l){return{i:A,x:a,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Cb(A,a){const l=A.length;if(l<=1)return[A];const h=[];let g,f;for(let v=0;v<l;v++){const B=pl(A[v]);B!==0&&(A[v].area=Math.abs(B),f===void 0&&(f=B<0),f===B<0?(g&&h.push(g),g=[A[v]]):g.push(A[v]))}if(g&&h.push(g),a>1)for(let v=0;v<h.length;v++)h[v].length<=a||(_x(h[v],a,1,h[v].length-1,Zq),h[v]=h[v].slice(0,a));return h}function Zq(A,a){return a.area-A.area}function $T(A,a,l){const h=l.patternDependencies;let g=!1;for(const f of a){const v=f.paint.get(`${A}-pattern`);v.isConstant()||(g=!0);const B=v.constantOr(null);B&&(g=!0,h[B]=!0)}return g}function eF(A,a,l,h,g){const f=g.patternDependencies;for(const v of a){const B=v.paint.get(`${A}-pattern`).value;if(B.kind!=="constant"){let F=B.evaluate({zoom:h},l,{},g.availableImages);F=F&&F.name?F.name:F,f[F]=!0,l.patterns[v.id]=F}}return l}class tF{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(l=>l.fqid),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ru,this.indexArray=new Fo,this.indexArray2=new ou,this.programConfigurations=new au(a.layers,{zoom:a.zoom,lut:a.lut}),this.segments=new bi,this.segments2=new bi,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.projection=a.projection}updateFootprints(a,l){}populate(a,l,h,g){this.hasPattern=$T("fill",this.layers,l);const f=this.layers[0].layout.get("fill-sort-key"),v=[];for(const{feature:B,id:F,index:P,sourceLayerIndex:b}of a){const E=this.layers[0]._featureFilter.needGeometry,M=Mt(B,E);if(!this.layers[0]._featureFilter.filter(new xi(this.zoom),M,h))continue;const T=f?f.evaluate(M,{},h,l.availableImages):void 0,I={id:F,properties:B.properties,type:B.type,sourceLayerIndex:b,index:P,geometry:E?M.geometry:Tt(B,h,g),patterns:{},sortKey:T};v.push(I)}f&&v.sort((B,F)=>B.sortKey-F.sortKey);for(const B of v){const{geometry:F,index:P,sourceLayerIndex:b}=B;if(this.hasPattern){const E=eF("fill",this.layers,B,this.zoom,l);this.patternFeatures.push(E)}else this.addFeature(B,F,P,h,{},l.availableImages,l.brightness);l.featureIndex.insert(a[P].feature,F,P,b,this.index)}}update(a,l,h,g,f){const v=Object.keys(a).length!==0;v&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(a,l,v?this.stateDependentLayers:this.layers,h,g,f)}addFeatures(a,l,h,g,f,v){for(const B of this.patternFeatures)this.addFeature(B,B.geometry,B.index,l,h,g,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Qq),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(a,l,h,g,f,v=[],B){for(const F of Cb(l,500)){let P=0;for(const R of F)P+=R.length;const b=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray),E=b.vertexLength,M=[],T=[];for(const R of F){if(R.length===0)continue;R!==F[0]&&T.push(M.length/2);const U=this.segments2.prepareSegment(R.length,this.layoutVertexArray,this.indexArray2),V=U.vertexLength;this.layoutVertexArray.emplaceBack(R[0].x,R[0].y),this.indexArray2.emplaceBack(V+R.length-1,V),M.push(R[0].x),M.push(R[0].y);for(let X=1;X<R.length;X++)this.layoutVertexArray.emplaceBack(R[X].x,R[X].y),this.indexArray2.emplaceBack(V+X-1,V+X),M.push(R[X].x),M.push(R[X].y);U.vertexLength+=R.length,U.primitiveLength+=R.length}const I=Rv(M,T);for(let R=0;R<I.length;R+=3)this.indexArray.emplaceBack(E+I[R],E+I[R+1],E+I[R+2]);b.vertexLength+=P,b.primitiveLength+=I.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,h,f,v,g,B)}}let LR,OR,UR,zR;Wt(tF,"FillBucket",{omit:["layers","patternFeatures"]});class rF{constructor(a,l,h,g){if(this.triangleCount=l.length/3,this.min=new Dt(0,0),this.max=new Dt(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||a.length===0)return;const[f,v]=[a[0].clone(),a[0].clone()];for(let E=1;E<a.length;++E){const M=a[E];f.x=Math.min(f.x,M.x),f.y=Math.min(f.y,M.y),v.x=Math.max(v.x,M.x),v.y=Math.max(v.y,M.y)}if(g){const E=Math.ceil(Math.max(v.x-f.x,v.y-f.y)/g);h=Math.max(h,E)}if(h===0)return;this.min=f,this.max=v;const B=this.max.sub(this.min);B.x=Math.max(B.x,1),B.y=Math.max(B.y,1);const F=Math.max(B.x,B.y)/h;this.cellsX=Math.max(1,Math.ceil(B.x/F)),this.cellsY=Math.max(1,Math.ceil(B.y/F)),this.xScale=1/F,this.yScale=1/F;const P=[];for(let E=0;E<this.triangleCount;E++){const M=a[l[3*E+0]].sub(this.min),T=a[l[3*E+1]].sub(this.min),I=a[l[3*E+2]].sub(this.min),R=cu(Math.floor(Math.min(M.x,T.x,I.x)),this.xScale,this.cellsX),U=cu(Math.floor(Math.max(M.x,T.x,I.x)),this.xScale,this.cellsX),V=cu(Math.floor(Math.min(M.y,T.y,I.y)),this.yScale,this.cellsY),X=cu(Math.floor(Math.max(M.y,T.y,I.y)),this.yScale,this.cellsY),Y=new Dt(0,0),H=new Dt(0,0),$=new Dt(0,0),te=new Dt(0,0);for(let le=V;le<=X;++le){Y.y=H.y=le*F,$.y=te.y=(le+1)*F;for(let me=R;me<=U;++me)Y.x=$.x=me*F,H.x=te.x=(me+1)*F,(Tn(M,T,I,Y,H,te)||Tn(M,T,I,Y,te,$))&&P.push({cellIdx:le*this.cellsX+me,triIdx:E})}}if(P.length===0)return;P.sort((E,M)=>E.cellIdx-M.cellIdx||E.triIdx-M.triIdx);let b=0;for(;b<P.length;){const E=P[b].cellIdx,M={start:this.payload.length,len:0};for(;b<P.length&&P[b].cellIdx===E;)++M.len,this.payload.push(P[b++].triIdx);this.cells[E]=M}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(a,l){if(this.triangleCount===0||this.cells.length===0||a.x>this.max.x||this.min.x>a.x||a.y>this.max.y||this.min.y>a.y)return;const h=cu(a.x-this.min.x,this.xScale,this.cellsX),g=cu(a.y-this.min.y,this.yScale,this.cellsY),f=this.cells[g*this.cellsX+h];if(f){this._lazyInitLookup();for(let v=0;v<f.len;v++){const B=this.payload[f.start+v],F=Math.floor(B/8),P=1<<B%8;if(!(this.lookup[F]&P)&&(this.lookup[F]|=P,l.push(B),l.length===this.triangleCount))return}}}query(a,l,h){if(this.triangleCount===0||this.cells.length===0||a.x>this.max.x||this.min.x>l.x||a.y>this.max.y||this.min.y>l.y)return;this._lazyInitLookup();const g=cu(a.x-this.min.x,this.xScale,this.cellsX),f=cu(l.x-this.min.x,this.xScale,this.cellsX),v=cu(a.y-this.min.y,this.yScale,this.cellsY),B=cu(l.y-this.min.y,this.yScale,this.cellsY);for(let F=v;F<=B;F++)for(let P=g;P<=f;P++){const b=this.cells[F*this.cellsX+P];if(b)for(let E=0;E<b.len;E++){const M=this.payload[b.start+E],T=Math.floor(M/8),I=1<<M%8;if(!(this.lookup[T]&I)&&(this.lookup[T]|=I,h.push(M),h.length===this.triangleCount))return}}}}function cu(A,a,l){return Math.max(0,Math.min(l-1,Math.floor(A*a)))}Wt(rF,"TriangleGridIndex");class QR{constructor(a){this.zoom=a.zoom,this.layers=a.layers,this.layerIds=this.layers.map(l=>l.fqid),this.index=a.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.footprints=[]}updateFootprints(a,l){for(const h of this.footprints)l.push({footprint:h,id:a})}populate(a,l,h,g){const f=[];for(const{feature:v,id:B,index:F,sourceLayerIndex:P}of a){const b=this.layers[0]._featureFilter.needGeometry,E=Mt(v,b);if(!this.layers[0]._featureFilter.filter(new xi(this.zoom),E,h))continue;const M={id:B,properties:v.properties,type:v.type,sourceLayerIndex:P,index:F,geometry:b?E.geometry:Tt(v,h,g),patterns:{}};f.push(M)}for(const v of f){const{geometry:B,index:F,sourceLayerIndex:P}=v;this.addFeature(v,B,F,h,{},l.availableImages,l.brightness),l.featureIndex.insert(a[F].feature,B,F,P,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(a){}update(a,l,h,g,f){}destroy(){}addFeature(a,l,h,g,f,v=[],B){for(const F of Cb(l,2)){const P=[],b=[],E=[],M=new Dt(1/0,1/0),T=new Dt(-1/0,-1/0);for(const U of F)if(U.length!==0){U!==F[0]&&E.push(b.length/2);for(let V=0;V<U.length;V++)b.push(U[V].x),b.push(U[V].y),P.push(U[V]),M.x=Math.min(M.x,U[V].x),M.y=Math.min(M.y,U[V].y),T.x=Math.max(T.x,U[V].x),T.y=Math.max(T.y,U[V].y)}const I=Rv(b,E),R=new rF(P,I,8,256);this.footprints.push({vertices:P,indices:I,grid:R,min:M,max:T})}}}Wt(QR,"ClipBucket",{omit:["layers"]});const Yq=hn([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Jq=hn([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),$q=hn([{name:"a_centroid_pos",components:2,type:"Uint16"}]),eX=hn([{name:"a_join_normal_inside",components:3,type:"Int16"}]),tX=hn([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),rX=hn([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:nX}=Yq;var nF,NR,iF,VR,oF,HR,jR,Sb={};function GR(){if(NR)return nF;NR=1;var A=Sa();function a(g,f,v,B,F){this.properties={},this.extent=v,this.type=0,this._pbf=g,this._geometry=-1,this._keys=B,this._values=F,g.readFields(l,this,f)}function l(g,f,v){g==1?f.id=v.readVarint():g==2?function(B,F){for(var P=B.readVarint()+B.pos;B.pos<P;){var b=F._keys[B.readVarint()],E=F._values[B.readVarint()];F.properties[b]=E}}(v,f):g==3?f.type=v.readVarint():g==4&&(f._geometry=v.pos)}function h(g){for(var f,v,B=0,F=0,P=g.length,b=P-1;F<P;b=F++)B+=((v=g[b]).x-(f=g[F]).x)*(f.y+v.y);return B}return nF=a,a.types=["Unknown","Point","LineString","Polygon"],a.prototype.loadGeometry=function(){var g=this._pbf;g.pos=this._geometry;for(var f,v=g.readVarint()+g.pos,B=1,F=0,P=0,b=0,E=[];g.pos<v;){if(F<=0){var M=g.readVarint();B=7&M,F=M>>3}if(F--,B===1||B===2)P+=g.readSVarint(),b+=g.readSVarint(),B===1&&(f&&E.push(f),f=[]),f.push(new A(P,b));else{if(B!==7)throw new Error("unknown command "+B);f&&f.push(f[0].clone())}}return f&&E.push(f),E},a.prototype.bbox=function(){var g=this._pbf;g.pos=this._geometry;for(var f=g.readVarint()+g.pos,v=1,B=0,F=0,P=0,b=1/0,E=-1/0,M=1/0,T=-1/0;g.pos<f;){if(B<=0){var I=g.readVarint();v=7&I,B=I>>3}if(B--,v===1||v===2)(F+=g.readSVarint())<b&&(b=F),F>E&&(E=F),(P+=g.readSVarint())<M&&(M=P),P>T&&(T=P);else if(v!==7)throw new Error("unknown command "+v)}return[b,M,E,T]},a.prototype.toGeoJSON=function(g,f,v){var B,F,P=this.extent*Math.pow(2,v),b=this.extent*g,E=this.extent*f,M=this.loadGeometry(),T=a.types[this.type];function I(V){for(var X=0;X<V.length;X++){var Y=V[X];V[X]=[360*(Y.x+b)/P-180,360/Math.PI*Math.atan(Math.exp((180-360*(Y.y+E)/P)*Math.PI/180))-90]}}switch(this.type){case 1:var R=[];for(B=0;B<M.length;B++)R[B]=M[B][0];I(M=R);break;case 2:for(B=0;B<M.length;B++)I(M[B]);break;case 3:for(M=function(V){var X=V.length;if(X<=1)return[V];for(var Y,H,$=[],te=0;te<X;te++){var le=h(V[te]);le!==0&&(H===void 0&&(H=le<0),H===le<0?(Y&&$.push(Y),Y=[V[te]]):Y.push(V[te]))}return Y&&$.push(Y),$}(M),B=0;B<M.length;B++)for(F=0;F<M[B].length;F++)I(M[B][F])}M.length===1?M=M[0]:T="Multi"+T;var U={type:"Feature",geometry:{type:T,coordinates:M},properties:this.properties};return"id"in this&&(U.id=this.id),U},nF}function KR(){if(VR)return iF;VR=1;var A=GR();function a(h,g){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=h,this._keys=[],this._values=[],this._features=[],h.readFields(l,this,g),this.length=this._features.length}function l(h,g,f){h===15?g.version=f.readVarint():h===1?g.name=f.readString():h===5?g.extent=f.readVarint():h===2?g._features.push(f.pos):h===3?g._keys.push(f.readString()):h===4&&g._values.push(function(v){for(var B=null,F=v.readVarint()+v.pos;v.pos<F;){var P=v.readVarint()>>3;B=P===1?v.readString():P===2?v.readFloat():P===3?v.readDouble():P===4?v.readVarint64():P===5?v.readVarint():P===6?v.readSVarint():P===7?v.readBoolean():null}return B}(f))}return iF=a,a.prototype.feature=function(h){if(h<0||h>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[h];var g=this._pbf.readVarint()+this._pbf.pos;return new A(this._pbf,g,this.extent,this._keys,this._values)},iF}function WR(){return jR||(jR=1,Sb.VectorTile=function(){if(HR)return oF;HR=1;var A=KR();function a(l,h,g){if(l===3){var f=new A(g,g.readVarint()+g.pos);f.length&&(h[f.name]=f)}}return oF=function(l,h){this.layers=l.readFields(a,{},h)},oF}(),Sb.VectorTileFeature=GR(),Sb.VectorTileLayer=KR()),Sb}var Im=WR();class Ef extends Dt{constructor(a,l,h){super(a,l),this.z=h}}class qR extends Ef{constructor(a,l,h,g){super(a,l,h),this.w=g}}function Eb(A,a,l,h){const g=[],f=h===0?(v,B,F,P,b,E)=>{v.push(new Dt(E,F+(E-B)/(P-B)*(b-F)))}:(v,B,F,P,b,E)=>{v.push(new Dt(B+(E-F)/(b-F)*(P-B),E))};for(const v of A){const B=[];for(const F of v){if(F.length<=2)continue;const P=[];for(let M=0;M<F.length-1;M++){const T=F[M].x,I=F[M].y,R=F[M+1].x,U=F[M+1].y,V=h===0?T:I,X=h===0?R:U;V<a?X>a&&f(P,T,I,R,U,a):V>l?X<l&&f(P,T,I,R,U,l):P.push(F[M]),X<a&&V>=a&&f(P,T,I,R,U,a),X>l&&V<=l&&f(P,T,I,R,U,l)}let b=F[F.length-1];const E=h===0?b.x:b.y;E>=a&&E<=l&&P.push(b),P.length&&(b=P[P.length-1],P[0].x===b.x&&P[0].y===b.y||P.push(P[0]),B.push(P))}B.length&&g.push(B)}return g}function XR(A,a,l,h){const g=l==="x"?"y":"x",f=(h-A[l])/(a[l]-A[l]);A[g]=A[g]+(a[g]-A[g])*f,A[l]=h,A.hasOwnProperty("z")&&(A.z=cr(A.z,a.z,f)),A.hasOwnProperty("w")&&(A.w=cr(A.w,a.w,f))}function ZR(A,a,l,h){const g=l,f=h;for(const v of["x","y"]){let B=A,F=a;B[v]>=F[v]&&(B=a,F=A),B[v]<g&&F[v]>g&&XR(B,F,v,g),B[v]<f&&F[v]>f&&XR(F,B,v,f)}}const Tb=Number.MAX_SAFE_INTEGER;function YR(A,a,l,h){return A.order<a||A.order===Tb||!(A.clipMask&l)||function(g,f){return f.length!==0&&f.find(v=>v===g)===void 0}(h,A.clipScope)}function Fb(A,a){return A.x-a.x||A.y-a.y}function JR(A,a){return Fb(A.min,a.min)===0&&Fb(A.max,a.max)===0}function aF(A,a){return!(A.min.x>a.max.x||A.max.x<a.min.x||A.min.y>a.max.y||A.max.y<a.min.y)}function sF(A,a){if(A.length!==a.length)return!1;for(let l=0;l<A.length;l++)if(A[l].sourceId!==a[l].sourceId||!JR(A[l],a[l])||A[l].order!==a[l].order||A[l].clipMask!==a[l].clipMask||!Ea(A[l].clipScope,a[l].clipScope))return!1;return!0}function $R(A,a,l){const h=1/Ut,g=1/(1<<l.canonical.z),f=(a.x*h+l.canonical.x)*g+l.wrap,v=(a.y*h+l.canonical.y)*g;return{min:new Dt((A.x*h+l.canonical.x)*g+l.wrap,(A.y*h+l.canonical.y)*g),max:new Dt(f,v)}}function iX(A,a,l){const h=1<<l.canonical.z,g=((a.x-l.wrap)*h-l.canonical.x)*Ut,f=(a.y*h-l.canonical.y)*Ut;return{min:new Dt(((A.x-l.wrap)*h-l.canonical.x)*Ut,(A.y*h-l.canonical.y)*Ut),max:new Dt(g,f)}}function eL(A,a,l,h,g,f,v){const B=A.indices,F=A.vertices,P=[];for(let b=h;b<h+g;b+=3){const E=a[l[b+0]+f],M=a[l[b+1]+f],T=a[l[b+2]+f],I=Math.min(E.x,M.x,T.x),R=Math.max(E.x,M.x,T.x),U=Math.min(E.y,M.y,T.y),V=Math.max(E.y,M.y,T.y);P.length=0,A.grid.query(new Dt(I,U),new Dt(R,V),P);for(let X=0;X<P.length;X++){const Y=P[X];if(Tn(F[B[3*Y+0]],F[B[3*Y+1]],F[B[3*Y+2]],E,M,T,v))return!0}}return!1}function tL(A,a,l,h){if(!A||!l)return!1;let g=A.vertices;if(!a.canonical.equals(h.canonical)||a.wrap!==h.wrap){if(l.vertices.length<A.vertices.length)return tL(l,h,A,a);const f=a.canonical,v=h.canonical,B=Math.pow(2,v.z-f.z);g=A.vertices.map(F=>new Dt((F.x+f.x*Ut)*B-v.x*Ut,(F.y+f.y*Ut)*B-v.y*Ut))}return eL(l,g,A.indices,0,A.indices.length,0,0)}function rL(A,a,l,h){const g=Math.pow(2,h.z-l.z);return new Dt((A+l.x*Ut)*g-h.x*Ut,(a+l.y*Ut)*g-h.y*Ut)}function nL(A,a){const l=[];a.grid.queryPoint(A,l);const h=a.indices,g=a.vertices;for(let f=0;f<l.length;f++){const v=l[f];if(Wn([g[h[3*v+0]],g[h[3*v+1]],g[h[3*v+2]]],A))return!0}return!1}const lF=[new Dt(0,0),new Dt(Ut,0),new Dt(Ut,Ut),new Dt(0,Ut)];function iL(A,a){const l=[];let h=[];if(!a||A.length<2)return[A];if(A.length===2)return Pi(A[0],A[1],lF)?[A]:[];for(let g=0;g<A.length+2;g++){const f=A[g%A.length],v=A[(g+1)%A.length],B=Pi(g===0?A[A.length-1]:A[(g-1)%A.length],f,lF),F=Pi(f,v,lF),P=B||F;P&&h.push(f),P&&F||h.length>0&&(h.length>1&&l.push(h),h=[])}return h.length>1&&l.push(h),l}const cF=Im.VectorTileFeature.types,oX=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],aX=["fill-extrusion-flood-light-ground-radius"],sX=Math.pow(2,13),lX=Math.pow(2,15)-1,oL=new Dt(0,1),Ih=2147483648;function zv(A,a,l,h,g,f,v,B){A.emplaceBack((a<<1)+v,(l<<1)+f,(Math.floor(h*sX)<<1)+g,Math.round(B))}function Qv(A,a,l){A.emplaceBack(a.x*Ut,a.y*Ut,l?1:0)}function Ib(A,a,l,h,g,f){A.emplaceBack(a.x,a.y,(l.x<<1)+h,(l.y<<1)+g,f)}function Nv(A,a,l){A.emplaceBack(a.x,a.y,a.z,l[0]*16384,l[1]*16384,l[2]*16384)}class aL{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class sL{constructor(){this.centroidXY=new Dt(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new Dt(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new Dt(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new Dt(this.max.x-this.min.x,this.max.y-this.min.y)}}class lL{constructor(){this.acc=new Dt(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(a,l){a.min.x===Number.MAX_VALUE&&(a.min.x=a.max.x=l.x,a.min.y=a.max.y=l.y)}appendEdge(a,l,h){this.accCount++,this.acc._add(l);let g=!!this.borders;l.x<a.min.x?(a.min.x=l.x,g=!0):l.x>a.max.x&&(a.max.x=l.x,g=!0),l.y<a.min.y?(a.min.y=l.y,g=!0):l.y>a.max.y&&(a.max.y=l.y,g=!0),((l.x===0||l.x===Ut)&&l.x===h.x)!=((l.y===0||l.y===Ut)&&l.y===h.y)&&this.processBorderOverlap(l,h),g&&this.checkBorderIntersection(l,h)}checkBorderIntersection(a,l){l.x<0!=a.x<0&&this.addBorderIntersection(0,cr(l.y,a.y,(0-l.x)/(a.x-l.x))),l.x>Ut!=a.x>Ut&&this.addBorderIntersection(1,cr(l.y,a.y,(Ut-l.x)/(a.x-l.x))),l.y<0!=a.y<0&&this.addBorderIntersection(2,cr(l.x,a.x,(0-l.y)/(a.y-l.y))),l.y>Ut!=a.y>Ut&&this.addBorderIntersection(3,cr(l.x,a.x,(Ut-l.y)/(a.y-l.y)))}addBorderIntersection(a,l){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const h=this.borders[a];l<h[0]&&(h[0]=l),l>h[1]&&(h[1]=l)}processBorderOverlap(a,l){if(a.x===l.x){if(a.y===l.y)return;const h=a.x===0?0:1;this.addBorderIntersection(h,l.y),this.addBorderIntersection(h,a.y)}else{const h=a.y===0?2:3;this.addBorderIntersection(h,l.x),this.addBorderIntersection(h,a.x)}}centroid(){return this.accCount===0?new Dt(0,0):new Dt(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((a,l)=>a+ +(l[0]!==Number.MAX_VALUE),0):0}}function cL(A,a){const l=A.add(a)._unit(),h=xr(A.x*l.x+A.y*l.y,-1,1);var g,f,v;return v=Math.acos(h),Math.min(4,Math.max(-4,Math.tan(v)))/4*lX*((g=A).x*(f=a).y-g.y*f.x<0?-1:1)}const cX=[A=>A.x<0,A=>A.x>Ut,A=>A.y<0,A=>A.y>Ut];function uX(A,a,l,h){const g=[4];if(h===0)return g;l._mult(h);const f=A.sub(l),v=a.sub(l),B=[A,a,f,v];for(let F=0;F<4;F++)for(const P of B)if(cX[F](P)){g.push(F);break}return g}class uL{constructor(a){this.vertexArray=new ym,this.indexArray=new Fo,this.programConfigurations=new au(a.layers,{zoom:a.zoom,lut:a.lut},l=>aX.includes(l)),this._segments=new bi,this.hiddenByLandmarkVertexArray=new wm,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new bi}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(a,l,h,g=!1){const f=a.length;if(f>2){let v=Math.max(0,this._segments.get().length-1);const B=this._segments._prepareSegment(4*f,this.vertexArray.length,2*this._segmentToGroundQuads[v].length);let F;v!==this._segments.get().length-1&&(v++,this._segmentToGroundQuads[v]=[],this._segmentToRegionTriCounts[v]=[0,0,0,0,0]);{const P=a[0],b=a[1];F=cL(P.sub(a[f-1])._perp()._unit(),b.sub(P)._perp()._unit())}for(let P=0;P<f;P++){const b=P===f-1?0:P+1,E=a[P],M=a[b],T=a[b===f-1?0:b+1],I=M.sub(E)._perp()._unit(),R=cL(I,T.sub(M)._perp()._unit()),U=F,V=R;if(uF(E,M,l)||g&&dL(E,l)&&dL(M,l)){F=R;continue}const X=B.vertexLength;Ib(this.vertexArray,E,M,1,1,U),Ib(this.vertexArray,E,M,1,0,U),Ib(this.vertexArray,E,M,0,1,V),Ib(this.vertexArray,E,M,0,0,V),B.vertexLength+=4;const Y=uX(E,M,I,h);for(const H of Y)this._segmentToGroundQuads[v].push({id:X,region:H}),this._segmentToRegionTriCounts[v][H]+=2,B.primitiveLength+=2;F=R}}}prepareBorderSegments(){if(!this.hasData())return;const a=this._segments.get(),l=a.length;for(let h=0;h<l;h++)this._segmentToGroundQuads[h].sort((g,f)=>g.region-f.region);for(let h=0;h<l;h++){const g=this._segmentToGroundQuads[h],f=a[h],v=this._segmentToRegionTriCounts[h];v.reduce((F,P)=>F+P,0);let B=0;for(let F=0;F<=4;F++){const P=v[F];if(P!==0){let b=this.regionSegments[F];b||(b=this.regionSegments[F]=new bi);const E={vertexOffset:f.vertexOffset,primitiveOffset:f.primitiveOffset+B,vertexLength:f.vertexLength,primitiveLength:P};b.get().push(E)}B+=P}for(let F=0;F<g.length;F++){const P=g[F].id;this.indexArray.emplaceBack(P,P+1,P+3),this.indexArray.emplaceBack(P,P+3,P+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(a,l,h,g,f,v){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,a,l,h,g,f,v)}upload(a){this.hasData()&&(this.vertexBuffer=a.createVertexBuffer(this.vertexArray,Jq.members),this.indexBuffer=a.createIndexBuffer(this.indexArray))}uploadPaintProperties(a){this.hasData()&&this.programConfigurations.upload(a)}update(a,l,h,g,f,v){this.hasData()&&this.programConfigurations.updatePaintArrays(a,l,h,g,f,v)}updateHiddenByLandmark(a){if(!this.hasData())return;const l=a.groundVertexCount+a.groundVertexArrayOffset;if(a.groundVertexCount===0)return;const h=a.flags&Ih?1:0;for(let g=a.groundVertexArrayOffset;g<l;++g)this.hiddenByLandmarkVertexArray.emplace(g,h);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(a){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=a.createVertexBuffer(this.hiddenByLandmarkVertexArray,tX.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let a=0;a<=4;a++){const l=this.regionSegments[a];l&&l.destroy()}}}}class Mb{constructor(a){this.zoom=a.zoom,this.canonical=a.canonical,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(l=>l.fqid),this.index=a.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=a.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new Fo,this.footprintVertices=new ru,this.footprintSegments=[],this.layoutVertexArray=new nu,this.centroidVertexArray=new hb,this.wallVertexArray=new Tv,this.indexArray=new Fo,this.programConfigurations=new au(a.layers,{zoom:a.zoom,lut:a.lut},l=>oX.includes(l)),this.segments=new bi,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.groundEffect=new uL(a),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}updateFootprints(a,l){}populate(a,l,h,g){this.features=[],this.hasPattern=$T("fill-extrusion",this.layers,l),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=Pe(h),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:f,id:v,index:B,sourceLayerIndex:F}of a){const P=this.layers[0]._featureFilter.needGeometry,b=Mt(f,P);if(!this.layers[0]._featureFilter.filter(new xi(this.zoom),b,h))continue;const E={id:v,sourceLayerIndex:F,index:B,geometry:P?b.geometry:Tt(f,h,g),properties:f.properties,type:f.type,patterns:{}},M=this.layoutVertexArray.length,T=cF[E.type]==="Polygon";if(this.hasPattern)this.features.push(eF("fill-extrusion",this.layers,E,this.zoom,l));else if(this.wallMode)for(const I of E.geometry)for(const R of iL(I,T))this.addFeature(E,[R],B,h,{},l.availableImages,g,l.brightness);else this.addFeature(E,E.geometry,B,h,{},l.availableImages,g,l.brightness);l.featureIndex.insert(f,E.geometry,B,F,this.index,M)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(a,l,h,g,f,v){for(const B of this.features){const F=cF[B.type]==="Polygon",{geometry:P}=B;if(this.wallMode)for(const b of P)for(const E of iL(b,F))this.addFeature(B,[E],B.index,l,h,g,f,v);else this.addFeature(B,P,B.index,l,h,g,f,v)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(a,l,h,g,f){const v=Object.keys(a).length!==0;if(v&&!this.stateDependentLayers.length)return;const B=v?this.stateDependentLayers:this.layers;this.programConfigurations.updatePaintArrays(a,l,B,h,g,f),this.groundEffect.update(a,l,B,h,g,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,nX),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.wallVertexBuffer=a.createVertexBuffer(this.wallVertexArray,eX.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=a.createVertexBuffer(this.layoutVertexExtArray,rX.members,!0)),this.groundEffect.upload(a)),this.groundEffect.uploadPaintProperties(a),this.programConfigurations.upload(a),this.uploaded=!0}uploadCentroid(a){this.groundEffect.uploadHiddenByLandmark(a),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=a.createVertexBuffer(this.centroidVertexArray,$q.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(a,l,h,g,f,v,B,F){const P=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(a,{})/this.tileToMeter,b=[new Dt(0,0),new Dt(Ut,Ut)],E=B.projection,M=E.name==="globe",T=this.wallMode||cF[a.type]==="Polygon",I=new lL;I.centroidDataIndex=this.centroidData.length;const R=new sL,U=this.layers[0].paint.get("fill-extrusion-base").evaluate(a,{},g)<=0,V=this.layers[0].paint.get("fill-extrusion-height").evaluate(a,{},g);let X;if(R.height=V,R.vertexArrayOffset=this.layoutVertexArray.length,R.groundVertexArrayOffset=this.groundEffect.vertexArray.length,M&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new _m),this.wallMode){if(M)return void tn("Non zero fill-extrusion-line-width is not yet supported on globe.");if(l.length!==1)return;X=function(de){const Ce=de[0].x===de[de.length-1].x&&de[0].y===de[de.length-1].y;(function(Ft){let Bt=0;const or=Ft.length;for(let Qt=0;Qt<or;Qt++)Bt+=(Ft[(Qt+1)%or].x-Ft[Qt].x)*(Ft[(Qt+1)%or].y+Ft[Qt].y);return Bt>=0})(de)||(de=de.reverse());const Te={geometry:[],joinNormals:[],indices:[]},Oe=[],Ve=[],je=[];let We=de.length;if(We<(Ce?3:2))return Te;for(;We>=2&&de[We-1].equals(de[We-2]);)We--;let et,qe,At,xt,at,Vt=0;for(;Vt<We-1&&de[Vt].equals(de[Vt+1]);)Vt++;Ce&&(et=de[We-2],at=de[Vt].sub(et)._unit()._perp());for(let Ft=Vt;Ft<We;Ft++){if(At=Ft===We-1?Ce?de[Vt+1]:void 0:de[Ft+1],At&&de[Ft].equals(At))continue;at&&(xt=at),et&&(qe=et),et=de[Ft],at=At?At.sub(et)._unit()._perp():xt,xt=xt||at;let Bt=xt.add(at);Bt.x===0&&Bt.y===0||Bt._unit();const or=Bt.x*at.x+Bt.y*at.y,Qt=or!==0?1/or:1/0,jt=xt.x*at.y-xt.y*at.x>0;let gr="miter";const Pr=2;gr==="miter"&&Qt>Pr&&(gr="bevel"),gr==="bevel"&&(Qt>100&&(gr="flipbevel"),Qt<Pr&&(gr="miter"));const Er=(Tr,Ur,zr,Mn)=>{const Bn=new Dt(Tr.x,Tr.y),_r=new Dt(Tr.x,Tr.y);Bn.x+=Ur.x*Mn,Bn.y+=Ur.y*Mn,_r.x-=Ur.x*Math.max(zr,1),_r.y-=Ur.y*Math.max(zr,1),je.push(Ur),Oe.push(Bn),Ve.push(_r)};if(gr==="miter")Bt._mult(Qt),Er(et,Bt,0,0);else if(gr==="flipbevel")Bt=at.mult(-1),Er(et,Bt,0,0),Er(et,Bt.mult(-1),0,0);else{const Tr=-Math.sqrt(Qt*Qt-1),Ur=jt?Tr:0,zr=jt?0:Tr;qe&&Er(et,xt,Ur,zr),At&&Er(et,at,Ur,zr)}}Te.geometry=[...Oe,...Ve.reverse(),Oe[0]],Te.joinNormals=[...je,...je.reverse(),je[je.length-1]];const Ot=Te.geometry.length-1;for(let Ft=0;Ft<Ot/2;Ft++)if(Ft+1<Ot/2){let Bt=Ft,or=Ft+1,Qt=Ot-1-Ft,jt=Ot-2-Ft;Bt=Bt===0?Ot-1:Bt-1,or=or===0?Ot-1:or-1,Qt=Qt===0?Ot-1:Qt-1,jt=jt===0?Ot-1:jt-1,Te.indices.push(Qt),Te.indices.push(or),Te.indices.push(Bt),Te.indices.push(Qt),Te.indices.push(jt),Te.indices.push(or)}return Te}(l[0]),l=[X.geometry]}const Y=(de,Ce)=>de<(Ce.length-1)/2||de===Ce.length-1,H=this.wallMode?[l]:Cb(l,500);for(let de=H.length-1;de>=0;de--){const Ce=H[de];(Ce.length===0||($=Ce[0]).every(_e=>_e.x<=0)||$.every(_e=>_e.x>=Ut)||$.every(_e=>_e.y<=0)||$.every(_e=>_e.y>=Ut))&&H.splice(de,1)}var $;let te;if(M)te=gL(H,b,g);else{te=[];for(const de of H)te.push({polygon:de,bounds:b})}const le=T?this.edgeRadius:0,me=le>0&&this.zoom<17,ve=(de,Ce)=>{if(de.length===0)return!1;const _e=de[de.length-1];return Ce.x===_e.x&&Ce.y===_e.y};for(const{polygon:de,bounds:Ce}of te){let _e=0,Te=0;for(const We of de)T&&!We[0].equals(We[We.length-1])&&We.push(We[0]),Te+=T?We.length-1:We.length;const Oe=this.segments.prepareSegment((T?5:4)*Te,this.layoutVertexArray,this.indexArray);R.footprintSegIdx<0&&(R.footprintSegIdx=this.footprintSegments.length),R.polygonSegIdx<0&&(R.polygonSegIdx=this.polygonSegments.length);const Ve={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},je=new aL;if(je.vertexOffset=this.footprintVertices.length,je.indexOffset=3*this.footprintIndices.length,je.ringIndices=[],T){const We=[],et=[];_e=Oe.vertexLength;for(let At=0;At<de.length;At++){const xt=de[At];xt.length&&At!==0&&et.push(We.length/2);const at=[];let Vt,Ot;Vt=xt[1].sub(xt[0])._perp()._unit(),je.ringIndices.push(xt.length-1);for(let Ft=1;Ft<xt.length;Ft++){const Bt=xt[Ft],or=xt[Ft===xt.length-1?1:Ft+1],Qt=Bt.clone();if(le){Ot=or.sub(Bt)._perp()._unit();const jt=Vt.add(Ot)._unit(),gr=le*Math.min(4,1/(Vt.x*jt.x+Vt.y*jt.y));Qt.x+=gr*jt.x,Qt.y+=gr*jt.y,Qt.x=Math.round(Qt.x),Qt.y=Math.round(Qt.y),Vt=Ot}if(!U||le!==0&&!me||ve(at,Qt)||at.push(Qt),zv(this.layoutVertexArray,Qt.x,Qt.y,0,0,1,1,0),this.wallMode){const jt=Y(Ft,xt);Qv(this.wallVertexArray,X.joinNormals[Ft],!jt)}Oe.vertexLength++,this.footprintVertices.emplaceBack(Bt.x,Bt.y),We.push(Bt.x,Bt.y),M&&Nv(this.layoutVertexExtArray,E.projectTilePoint(Qt.x,Qt.y,g),E.upVector(g,Qt.x,Qt.y))}U&&(le===0||me)&&(at.length!==0&&ve(at,at[0])&&at.pop(),this.groundEffect.addData(at,Ce,P))}const qe=this.wallMode?X.indices:Rv(We,et);for(let At=0;At<qe.length;At+=3)this.footprintIndices.emplaceBack(je.vertexOffset+qe[At+0],je.vertexOffset+qe[At+1],je.vertexOffset+qe[At+2]),this.indexArray.emplaceBack(_e+qe[At],_e+qe[At+2],_e+qe[At+1]),Oe.primitiveLength++;je.indexCount+=qe.length,je.vertexCount+=this.footprintVertices.length-je.vertexOffset}for(let We=0;We<de.length;We++){const et=de[We];I.startRing(R,et[0]);let qe=et.length>4&&fL(et[et.length-2],et[0],et[1]),At=le?AX(et[et.length-2],et[0],et[1],le):0;const xt=[];let at,Vt,Ot;Vt=et[1].sub(et[0])._perp()._unit();let Ft=!0;for(let Bt=1,or=0;Bt<et.length;Bt++){let Qt=et[Bt-1],jt=et[Bt];const gr=et[Bt===et.length-1?1:Bt+1];if(I.appendEdge(R,jt,Qt),uF(jt,Qt,Ce)){le&&(Vt=gr.sub(jt)._perp()._unit(),Ft=!Ft);continue}const Pr=jt.sub(Qt)._perp(),Er=Pr.x/(Math.abs(Pr.x)+Math.abs(Pr.y)),Tr=Pr.y>0?1:0,Ur=Qt.dist(jt);if(or+Ur>32768&&(or=0),le){Ot=gr.sub(jt)._perp()._unit();let _r=hL(Qt,jt,gr,AL(Vt,Ot),le);isNaN(_r)&&(_r=0);const vn=jt.sub(Qt)._unit();Qt=Qt.add(vn.mult(At))._round(),jt=jt.add(vn.mult(-_r))._round(),At=_r,Vt=Ot,U&&this.zoom>=17&&(ve(xt,Qt)||xt.push(Qt),ve(xt,jt)||xt.push(jt))}const zr=Oe.vertexLength,Mn=et.length>4&&fL(Qt,jt,gr);let Bn=pL(or,qe,Ft);if(zv(this.layoutVertexArray,Qt.x,Qt.y,Er,Tr,0,0,Bn),zv(this.layoutVertexArray,Qt.x,Qt.y,Er,Tr,0,1,Bn),this.wallMode){const _r=Y(Bt-1,et),vn=X.joinNormals[Bt-1];Qv(this.wallVertexArray,vn,_r),Qv(this.wallVertexArray,vn,_r)}if(or+=Ur,Bn=pL(or,Mn,!Ft),qe=Mn,zv(this.layoutVertexArray,jt.x,jt.y,Er,Tr,0,0,Bn),zv(this.layoutVertexArray,jt.x,jt.y,Er,Tr,0,1,Bn),this.wallMode){const _r=Y(Bt,et),vn=X.joinNormals[Bt];Qv(this.wallVertexArray,vn,_r),Qv(this.wallVertexArray,vn,_r)}if(Oe.vertexLength+=4,this.indexArray.emplaceBack(zr+0,zr+1,zr+2),this.indexArray.emplaceBack(zr+1,zr+3,zr+2),Oe.primitiveLength+=2,le){const _r=_e+(Bt===1?et.length-2:Bt-2),vn=Bt===1?_e:_r+1;if(this.indexArray.emplaceBack(zr+1,_r,zr+3),this.indexArray.emplaceBack(_r,vn,zr+3),Oe.primitiveLength+=2,at===void 0&&(at=zr),!uF(gr,et[Bt],Ce)){const bn=Bt===et.length-1?at:Oe.vertexLength;this.indexArray.emplaceBack(zr+2,zr+3,bn),this.indexArray.emplaceBack(zr+3,bn+1,bn),this.indexArray.emplaceBack(zr+3,vn,bn+1),Oe.primitiveLength+=3}Ft=!Ft}if(M){const _r=this.layoutVertexExtArray,vn=E.projectTilePoint(Qt.x,Qt.y,g),bn=E.projectTilePoint(jt.x,jt.y,g),qn=E.upVector(g,Qt.x,Qt.y),Fi=E.upVector(g,jt.x,jt.y);Nv(_r,vn,qn),Nv(_r,vn,qn),Nv(_r,bn,Fi),Nv(_r,bn,Fi)}}T&&(_e+=et.length-1),U&&le&&this.zoom>=17&&(xt.length!==0&&ve(xt,xt[0])&&xt.pop(),this.groundEffect.addData(xt,Ce,P,le>0))}this.footprintSegments.push(je),Ve.triangleCount=this.indexArray.length-Ve.triangleArrayOffset,this.polygonSegments.push(Ve),++R.footprintSegLen,++R.polygonSegLen}if(R.vertexCount=this.layoutVertexArray.length-R.vertexArrayOffset,R.groundVertexCount=this.groundEffect.vertexArray.length-R.groundVertexArrayOffset,R.vertexCount!==0){if(R.centroidXY=I.borders?oL:this.encodeCentroid(I,R),this.centroidData.push(R),I.borders){this.featuresOnBorder.push(I);const de=this.featuresOnBorder.length-1;for(let Ce=0;Ce<I.borders.length;Ce++)I.borders[Ce][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[Ce].push(de)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,h,f,v,g,F),this.groundEffect.addPaintPropertiesData(a,h,f,v,g,F),this.maxHeight=Math.max(this.maxHeight,V)}}sortBorders(){for(let a=0;a<this.borderFeatureIndices.length;a++)this.borderFeatureIndices[a].sort((l,h)=>this.featuresOnBorder[l].borders[a][0]-this.featuresOnBorder[h].borders[a][0])}splitToSubtiles(){const a=[];for(let B=0;B<this.centroidData.length;B++){const F=this.centroidData[B],P=+(F.min.y+F.max.y>Ut),b=2*P+(+(F.min.x+F.max.x>Ut)^P);for(let E=0;E<F.polygonSegLen;E++){const M=F.polygonSegIdx+E;a.push({centroidIdx:B,subtile:b,polygonSegmentIdx:M,triangleSegmentIdx:this.polygonSegments[M].triangleSegIdx})}}const l=new Fo;a.sort((B,F)=>B.triangleSegmentIdx===F.triangleSegmentIdx?B.subtile-F.subtile:B.triangleSegmentIdx-F.triangleSegmentIdx);let h=0,g=0,f=0;for(const B of a){if(B.triangleSegmentIdx!==h)break;f++}const v=a.length;for(;g!==a.length;){h=a[g].triangleSegmentIdx;let B=0,F=g,P=g;for(let b=F;b<f&&a[b].subtile===B;b++)P++;for(;F!==f;){const b=a[F];B=b.subtile;const E=this.centroidData[b.centroidIdx].min.clone(),M=this.centroidData[b.centroidIdx].max.clone(),T={vertexOffset:this.segments.segments[h].vertexOffset,primitiveOffset:l.length,vertexLength:this.segments.segments[h].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let I=F;I<P;I++){const R=a[I],U=this.polygonSegments[R.polygonSegmentIdx],V=this.centroidData[R.centroidIdx].min,X=this.centroidData[R.centroidIdx].max,Y=this.indexArray.uint16;for(let H=U.triangleArrayOffset;H<U.triangleArrayOffset+U.triangleCount;H++)l.emplaceBack(Y[3*H],Y[3*H+1],Y[3*H+2]);T.primitiveLength+=U.triangleCount,E.x=Math.min(E.x,V.x),E.y=Math.min(E.y,V.y),M.x=Math.max(M.x,X.x),M.y=Math.max(M.y,X.y)}T.primitiveLength>0&&this.triangleSubSegments.push({segment:T,min:E,max:M}),F=P;for(let I=F;I<f&&a[I].subtile===a[F].subtile;I++)P++}g=f;for(let b=g;b<v&&a[b].triangleSegmentIdx===a[g].triangleSegmentIdx;b++)f++}l._trim(),this.indexArray=l}getVisibleSegments(a,l,h){const g=new bi;if(this.wallMode){for(const R of this.triangleSubSegments)g.segments.push(R.segment);return g}let f=0,v=0;const B=1<<a.canonical.z;if(l){const R=l.getMinMaxForTile(a);R&&(f=R.min,v=R.max)}v+=this.maxHeight;const F=a.toUnwrapped();let P;const b=[F.canonical.x/B+F.wrap,F.canonical.y/B],E=[(F.canonical.x+1)/B+F.wrap,(F.canonical.y+1)/B],M=(R,U,V)=>[R[0]*(1-V[0])+U[0]*V[0],R[1]*(1-V[1])+U[1]*V[1]],T=[],I=[];for(const R of this.triangleSubSegments){T[0]=R.min.x/Ut,T[1]=R.min.y/Ut,I[0]=R.max.x/Ut,I[1]=R.max.y/Ut;const U=M(b,E,T),V=M(b,E,I);if(new Qn([U[0],U[1],f],[V[0],V[1],v]).intersectsPrecise(h)===0){P&&(g.segments.push(P),P=void 0);continue}const X=R.segment;P&&P.vertexOffset!==X.vertexOffset&&(g.segments.push(P),P=void 0),P?(P.vertexLength+=X.vertexLength,P.primitiveLength+=X.primitiveLength):P={vertexOffset:X.vertexOffset,primitiveLength:X.primitiveLength,vertexLength:X.vertexLength,primitiveOffset:X.primitiveOffset,sortKey:void 0,vaos:{}}}return P&&g.segments.push(P),g}encodeCentroid(a,l){const h=a.centroid(),g=l.span(),f=Math.min(7,Math.round(g.x*this.tileToMeter/10)),v=Math.min(7,Math.round(g.y*this.tileToMeter/10));return new Dt(xr(h.x,1,Ut-1)<<3|f,xr(h.y,1,Ut-1)<<3|v)}encodeBorderCentroid(a){if(!a.borders)return new Dt(0,0);const l=a.borders,h=Number.MAX_VALUE;if(l[0][0]!==h||l[1][0]!==h){const g=l[0][0]!==h?0:1;return new Dt(6|(l[0][0]!==h?0:65528),(l[g][0]+l[g][1])/2<<3|6)}{const g=l[2][0]!==h?2:3;return new Dt((l[g][0]+l[g][1])/2<<3|6,6|(l[2][0]!==h?0:65528))}}showCentroid(a){const l=this.centroidData[a.centroidDataIndex];l.flags&=Ih,l.centroidXY.x=0,l.centroidXY.y=0,this.writeCentroidToBuffer(l)}writeCentroidToBuffer(a){this.groundEffect.updateHiddenByLandmark(a);const l=a.vertexArrayOffset,h=a.vertexCount+a.vertexArrayOffset,g=a.flags&Ih?oL:a.centroidXY,f=this.centroidVertexArray.geta_centroid_pos0(l);if(this.centroidVertexArray.geta_centroid_pos1(l)!==g.y||f!==g.x){for(let v=l;v<h;++v)this.centroidVertexArray.emplace(v,g.x,g.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const a of this.centroidData)this.writeCentroidToBuffer(a)}updateReplacement(a,l,h){if(l.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=l.updateTime;const g=l.getReplacementRegionsForTile(a.toUnwrapped());if(sF(this.activeReplacements,g))return;if(this.activeReplacements=g,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const v of this.centroidData)v.flags&=2147483647;const f=[];for(const v of this.activeReplacements){if(v.order<h)continue;const B=Math.pow(2,v.footprintTileId.canonical.z-a.canonical.z);for(const F of this.centroidData)if(!(F.flags&Ih||v.min.x>F.max.x||F.min.x>v.max.x||v.min.y>F.max.y||F.min.y>v.max.y))for(let P=0;P<F.footprintSegLen;P++){const b=this.footprintSegments[F.footprintSegIdx+P];if(f.length=0,hX(this.footprintVertices,b.vertexOffset,b.vertexCount,v.footprintTileId.canonical,a.canonical,f),eL(v.footprint,f,this.footprintIndices.uint16,b.indexOffset,b.indexCount,-b.vertexOffset,-B)){F.flags|=Ih;break}}}for(const v of this.centroidData)this.writeCentroidToBuffer(v);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(a,l,h){let g=!1;for(let f=0;f<h.footprintSegLen;f++){const v=this.footprintSegments[h.footprintSegIdx+f];let B=0;for(const F of v.ringIndices){for(let P=B,b=F+B-1;P<F+B;b=P++){const E=this.footprintVertices.int16[2*(P+v.vertexOffset)+0],M=this.footprintVertices.int16[2*(P+v.vertexOffset)+1],T=this.footprintVertices.int16[2*(b+v.vertexOffset)+1];M>l!=T>l&&a<(this.footprintVertices.int16[2*(b+v.vertexOffset)+0]-E)*(l-M)/(T-M)+E&&(g=!g)}B=F}}return g}getHeightAtTileCoord(a,l){let h=Number.NEGATIVE_INFINITY,g=!0;const f=4*(a+Ut)*Ut+(l+Ut);if(this.partLookup.hasOwnProperty(f)){const v=this.partLookup[f];return v?{height:v.height,hidden:!!(v.flags&Ih)}:void 0}for(const v of this.centroidData)a>v.max.x||v.min.x>a||l>v.max.y||v.min.y>l||this.footprintContainsPoint(a,l,v)&&v&&v.height>h&&(h=v.height,this.partLookup[f]=v,g=!!(v.flags&Ih));if(h!==Number.NEGATIVE_INFINITY)return{height:h,hidden:g};this.partLookup[f]=void 0}}function AL(A,a){const l=A.add(a)._unit();return A.x*l.x+A.y*l.y}function AX(A,a,l,h){const g=a.sub(A)._perp()._unit(),f=l.sub(a)._perp()._unit();return hL(A,a,l,AL(g,f),h)}function hL(A,a,l,h,g){const f=Math.sqrt(1-h*h);return Math.min(A.dist(a)/3,a.dist(l)/3,g*f/h)}function uF(A,a,l){return A.x<l[0].x&&a.x<l[0].x||A.x>l[1].x&&a.x>l[1].x||A.y<l[0].y&&a.y<l[0].y||A.y>l[1].y&&a.y>l[1].y}function dL(A,a){return A.x<a[0].x||A.x>a[1].x||A.y<a[0].y||A.y>a[1].y}function fL(A,a,l){if(A.x<0||A.x>=Ut||a.x<0||a.x>=Ut||l.x<0||l.x>=Ut)return!1;const h=l.sub(a),g=h.perp(),f=A.sub(a);return(h.x*f.x+h.y*f.y)/Math.sqrt((h.x*h.x+h.y*h.y)*(f.x*f.x+f.y*f.y))>-.866&&g.x*f.x+g.y*f.y<0}function pL(A,a,l){const h=a?2|A:-3&A;return l?1|h:-2&h}function mL(){const A=Math.PI/32,a=Math.tan(A),l=j;return l*Math.sqrt(1+2*a*a)-l}function gL(A,a,l){const h=1<<l.z,g=we(l.x/h),f=we((l.x+1)/h),v=be(l.y/h),B=be((l.y+1)/h);return function(F,P,b,E,M=0,T){const I=[];if(!F.length||!b||!E)return I;const R=(te,le)=>{for(const me of te)I.push({polygon:me,bounds:le})},U=Math.ceil(Math.log2(b)),V=Math.ceil(Math.log2(E)),X=U-V,Y=[];for(let te=0;te<Math.abs(X);te++)Y.push(X>0?0:1);for(let te=0;te<Math.min(U,V);te++)Y.push(0),Y.push(1);let H=F;if(H=Eb(H,P[0].y-M,P[1].y+M,1),H=Eb(H,P[0].x-M,P[1].x+M,0),!H.length)return I;const $=[];for(Y.length?$.push({polygons:H,bounds:P,depth:0}):R(H,P);$.length;){const te=$.pop(),le=te.depth,me=Y[le],ve=te.bounds[0],de=te.bounds[1],Ce=me===0?ve.x:ve.y,_e=me===0?de.x:de.y,Te=T?T(me,Ce,_e):.5*(Ce+_e),Oe=Eb(te.polygons,Ce-M,Te+M,me),Ve=Eb(te.polygons,Te-M,_e+M,me);if(Oe.length){const je=[ve,new Dt(me===0?Te:de.x,me===1?Te:de.y)];Y.length>le+1?$.push({polygons:Oe,bounds:je,depth:le+1}):R(Oe,je)}if(Ve.length){const je=[new Dt(me===0?Te:ve.x,me===1?Te:ve.y),de];Y.length>le+1?$.push({polygons:Ve,bounds:je,depth:le+1}):R(Ve,je)}}return I}(A,a,Math.ceil((f-g)/11.25),Math.ceil((v-B)/11.25),1,(F,P,b)=>{if(F===0)return .5*(P+b);{const E=be((l.y+P/Ut)/h);return(ye(.5*(be((l.y+b/Ut)/h)+E))*h-l.y)*Ut}})}function hX(A,a,l,h,g,f){const v=Math.pow(2,h.z-g.z);for(let B=0;B<l;B++){let F=A.int16[2*(B+a)+0],P=A.int16[2*(B+a)+1];F=(F+g.x*Ut)*v-h.x*Ut,P=(P+g.y*Ut)*v-h.y*Ut,f.push(new Dt(F,P))}}let vL,yL;function Vv(A,a){return A.x*a.x+A.y*a.y}function _L(A,a){if(A.length===1){let l=0;const h=a[l++];let g;for(;!g||h.equals(g);)if(g=a[l++],!g)return 1/0;for(;l<a.length;l++){const f=a[l],v=A[0],B=g.sub(h),F=f.sub(h),P=v.sub(h),b=Vv(B,B),E=Vv(B,F),M=Vv(F,F),T=Vv(P,B),I=Vv(P,F),R=b*M-E*E,U=(M*T-E*I)/R,V=(b*I-E*T)/R,X=h.z*(1-U-V)+g.z*U+f.z*V;if(isFinite(X))return X}return 1/0}{let l=1/0;for(const h of a)l=Math.min(l,h.z);return l}}function xL(A,a,l,h,g,f,v,B){const F=v*g.getElevationAt(A,a,!0,!0),P=f[0]!==0,b=P?f[1]===0?v*(f[0]/7-450):v*function(E,M,T){const I=Math.floor(M[0]/8),R=Math.floor(M[1]/8),U=10*(M[0]-8*I),V=10*(M[1]-8*R),X=E.getElevationAt(I,R,!0,!0),Y=E.getMeterToDEM(T),H=Math.floor(.5*(U*Y-1)),$=Math.floor(.5*(V*Y-1)),te=E.tileCoordToPixel(I,R),le=2*H+1,me=2*$+1,ve=function(Ve,je,We,et,qe){return[Ve.getElevationAtPixel(je,We,!0),Ve.getElevationAtPixel(je+qe,We,!0),Ve.getElevationAtPixel(je,We+qe,!0),Ve.getElevationAtPixel(je+et,We+qe,!0)]}(E,te.x-H,te.y-$,le,me),de=Math.abs(ve[0]-ve[1]),Ce=Math.abs(ve[2]-ve[3]),_e=Math.abs(ve[0]-ve[2])+Math.abs(ve[1]-ve[3]),Te=Math.min(.25,.5*Y*(de+Ce)/le),Oe=Math.min(.25,.5*Y*_e/me);return X+Math.max(Te*U,Oe*V)}(g,f,B):F;return{base:F+(l===0)?-1:l,top:P?Math.max(b+h,F+l+2):F+h}}Wt(Mb,"FillExtrusionBucket",{omit:["layers","features"]}),Wt(sL,"PartData"),Wt(aL,"FootprintSegment"),Wt(lL,"BorderCentroidData"),Wt(uL,"GroundEffect");const dX=hn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),fX=hn([{name:"a_z_offset",components:1,type:"Float32"}],4),{members:pX}=dX,mX=hn([{name:"a_packed",components:4,type:"Float32"}]),{members:gX}=mX,vX=hn([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:yX}=vX;class bL{constructor(a,l){this.width=a,this.height=l,this.nextRow=0,this.image=new Fh({width:a,height:l}),this.positions={},this.uploaded=!1}getDash(a,l){const h=this.getKey(a,l);return this.positions[h]}trim(){const a=this.width,l=this.height=Nc(this.nextRow);this.image.resize({width:a,height:l})}getKey(a,l){return a.join(",")+l}getDashRanges(a,l,h){const g=[];let f=a.length%2==1?-a[a.length-1]*h:0,v=a[0]*h,B=!0;g.push({left:f,right:v,isDash:B,zeroLength:a[0]===0});let F=a[0];for(let P=1;P<a.length;P++){B=!B;const b=a[P];f=F*h,F+=b,v=F*h,g.push({left:f,right:v,isDash:B,zeroLength:b===0})}return g}addRoundDash(a,l,h){const g=l/2;for(let f=-h;f<=h;f++){const v=this.width*(this.nextRow+h+f);let B=0,F=a[B];for(let P=0;P<this.width;P++){P/F.right>1&&(F=a[++B]);const b=Math.abs(P-F.left),E=Math.abs(P-F.right),M=Math.min(b,E);let T;const I=f/h*(g+1);if(F.isDash){const R=g-Math.abs(I);T=Math.sqrt(M*M+R*R)}else T=g-Math.sqrt(M*M+I*I);this.image.data[v+P]=Math.max(0,Math.min(255,T+128))}}}addRegularDash(a,l){for(let F=a.length-1;F>=0;--F){const P=a[F],b=a[F+1];P.zeroLength?a.splice(F,1):b&&b.isDash===P.isDash&&(b.left=P.left,a.splice(F,1))}const h=a[0],g=a[a.length-1];h.isDash===g.isDash&&(h.left=g.left-this.width,g.right=h.right+this.width);const f=this.width*this.nextRow;let v=0,B=a[v];for(let F=0;F<this.width;F++){F/B.right>1&&(B=a[++v]);const P=Math.abs(F-B.left),b=Math.abs(F-B.right),E=Math.min(P,b);this.image.data[f+F]=Math.max(0,Math.min(255,(B.isDash?E:-E)+l+128))}}addDash(a,l){const h=this.getKey(a,l);if(this.positions[h])return this.positions[h];const g=l==="round",f=g?7:0,v=2*f+1;if(this.nextRow+v>this.height)return tn("LineAtlas out of space"),null;a.length===0&&a.push(1);let B=0;for(let b=0;b<a.length;b++)a[b]<0&&(tn("Negative value is found in line dasharray, replacing values with 0"),a[b]=0),B+=a[b];if(B!==0){const b=this.width/B,E=this.getDashRanges(a,this.width,b);g?this.addRoundDash(E,b,f):this.addRegularDash(E,l==="square"?.5*b:0)}const F=this.nextRow+f;this.nextRow+=v;const P={tl:[F,f],br:[B,0]};return this.positions[h]=P,P}}Wt(bL,"LineAtlas");const _X=Im.VectorTileFeature.types,xX=Math.cos(Math.PI/180*37.5),bX=Math.cos(Math.PI/180*5);class AF{constructor(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(l=>l.fqid),this.index=a.index,this.projection=a.projection,this.hasPattern=!1,this.hasZOffset=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new vv,this.layoutVertexArray2=new uc,this.patternVertexArray=new iu,this.indexArray=new Fo,this.programConfigurations=new au(a.layers,{zoom:a.zoom,lut:a.lut}),this.segments=new bi,this.maxLineLength=0,this.zOffsetVertexArray=new bh,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.tessellationStep=a.tessellationStep?a.tessellationStep:Ut/64}updateFootprints(a,l){}populate(a,l,h,g){this.hasPattern=$T("line",this.layers,l);const f=this.layers[0].layout.get("line-sort-key"),v=this.layers[0].layout.get("line-z-offset");this.hasZOffset=!v.isConstant()||!!v.constantOr(0);const B=[];for(const{feature:E,id:M,index:T,sourceLayerIndex:I}of a){const R=this.layers[0]._featureFilter.needGeometry,U=Mt(E,R);if(!this.layers[0]._featureFilter.filter(new xi(this.zoom),U,h))continue;const V=f?f.evaluate(U,{},h):void 0,X={id:M,properties:E.properties,type:E.type,sourceLayerIndex:I,index:T,geometry:R?U.geometry:Tt(E,h,g),patterns:{},sortKey:V};B.push(X)}f&&B.sort((E,M)=>E.sortKey-M.sortKey);const{lineAtlas:F,featureIndex:P}=l,b=this.addConstantDashes(F);for(const E of B){const{geometry:M,index:T,sourceLayerIndex:I}=E;if(b&&this.addFeatureDashes(E,F),this.hasPattern){const R=eF("line",this.layers,E,this.zoom,l);this.patternFeatures.push(R)}else this.addFeature(E,M,T,h,F.positions,l.availableImages,l.brightness);P.insert(a[T].feature,M,T,I,this.index)}}addConstantDashes(a){let l=!1;for(const h of this.layers){const g=h.paint.get("line-dasharray").value,f=h.layout.get("line-cap").value;if(g.kind!=="constant"||f.kind!=="constant")l=!0;else{const v=f.value,B=g.value;if(!B)continue;a.addDash(B,v)}}return l}addFeatureDashes(a,l){const h=this.zoom;for(const g of this.layers){const f=g.paint.get("line-dasharray").value,v=g.layout.get("line-cap").value;if(f.kind==="constant"&&v.kind==="constant")continue;let B,F;if(f.kind==="constant"){if(B=f.value,!B)continue}else B=f.evaluate({zoom:h},a);F=v.kind==="constant"?v.value:v.evaluate({zoom:h},a),l.addDash(B,F),a.patterns[g.id]=l.getKey(B,F)}}update(a,l,h,g,f){const v=Object.keys(a).length!==0;v&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(a,l,v?this.stateDependentLayers:this.layers,h,g,f)}addFeatures(a,l,h,g,f,v){for(const B of this.patternFeatures)this.addFeature(B,B.geometry,B.index,l,h,g,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,gX)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=a.createVertexBuffer(this.patternVertexArray,yX)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=a.createVertexBuffer(this.zOffsetVertexArray,fX.members,!0)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,pX),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(a){if(a.properties&&a.properties.hasOwnProperty("mapbox_clip_start")&&a.properties.hasOwnProperty("mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}}addFeature(a,l,h,g,f,v,B){const F=this.layers[0].layout,P=F.get("line-join").evaluate(a,{}),b=F.get("line-cap").evaluate(a,{}),E=F.get("line-miter-limit"),M=F.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(const T of l)this.addLine(T,a,g,P,b,E,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,h,f,v,g,B)}addLine(a,l,h,g,f,v,B){this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.currentVertex=void 0;const F={zoom:this.zoom,lineProgress:void 0},P=this.layers[0].layout,b=g==="none";if(this.patternJoinNone=this.hasPattern&&b,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[],this.lineClips){this.lineClipsArray.push(this.lineClips);for(let te=0;te<a.length-1;te++)this.totalDistance+=a[te].dist(a[te+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const E=_X[l.type]==="Polygon";let M=a.length;for(;M>=2&&a[M-1].equals(a[M-2]);)M--;let T=0;for(;T<M-1&&a[T].equals(a[T+1]);)T++;if(M<(E?3:2))return;g==="bevel"&&(v=1.05);const I=this.overscaling<=16?15*Ut/(512*this.overscaling):0,R=this.segments.prepareSegment(10*M,this.layoutVertexArray,this.indexArray);let U,V,X,Y,H,$;this.e1=this.e2=-1,E&&(U=a[M-2],H=a[T].sub(U)._unit()._perp());for(let te=T;te<M;te++){if(X=te===M-1?E?a[T+1]:void 0:a[te+1],X&&a[te].equals(X))continue;if(H&&(Y=H),U&&(V=U),U=a[te],this.hasZOffset){const je=P.get("line-z-offset").value;if(je.kind==="constant")$=je.value;else{if(this.lineClips){const We=this.totalDistance/(this.lineClips.end-this.lineClips.start);F.lineProgress=(We*this.lineClips.start+this.distance+(V?V.dist(U):0))/We}else tn(`line-z-offset evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`),F.lineProgress=0;$=je.evaluate(F,l)}$=$||0}H=X?X.sub(U)._unit()._perp():Y,Y=Y||H;const le=V&&X;let me=le?g:E||b?"butt":f;const ve=Y.x*H.x+Y.y*H.y;if(b){const je=function(We){if(We.patternJoinNone){const et=We.segmentPoints.length/2,qe=We.lineSoFar-We.segmentStart;for(let At=0;At<et;++At){const xt=We.segmentPoints[2*At+1],at=Math.round(We.segmentPoints[2*At])+.5+.25*xt;We.patternVertexArray.emplaceBack(at,qe,We.segmentStart),We.patternVertexArray.emplaceBack(at,qe,We.segmentStart)}We.segmentPoints.length=0}We.e1=We.e2=-1};if(le&&ve<bX){this.updateDistance(V,U),this.addCurrentVertex(U,Y,1,1,R,$),je(this),this.addCurrentVertex(U,H,-1,-1,R,$);continue}if(V){if(!X){this.updateDistance(V,U),this.addCurrentVertex(U,Y,1,1,R,$),je(this);continue}me="miter"}}let de=Y.add(H);de.x===0&&de.y===0||de._unit();const Ce=de.x*H.x+de.y*H.y,_e=Ce!==0?1/Ce:1/0,Te=2*Math.sqrt(2-2*Ce),Oe=Ce<xX&&V&&X,Ve=Y.x*H.y-Y.y*H.x>0;if(Oe&&te>T){const je=U.dist(V);if(je>2*I){const We=U.sub(U.sub(V)._mult(I/je)._round());this.updateDistance(V,We),this.addCurrentVertex(We,Y,0,0,R,$),V=We}}if(le&&me==="round"&&(_e<B?me="miter":_e<=2&&(me="fakeround")),me==="miter"&&_e>v&&(me="bevel"),me==="bevel"&&(_e>2&&(me="flipbevel"),_e<v&&(me="miter")),V&&this.updateDistance(V,U),me==="miter")de._mult(_e),this.addCurrentVertex(U,de,0,0,R,$);else if(me==="flipbevel"){if(_e>100)de=H.mult(-1);else{const je=_e*Y.add(H).mag()/Y.sub(H).mag();de._perp()._mult(je*(Ve?-1:1))}this.addCurrentVertex(U,de,0,0,R,$),this.addCurrentVertex(U,de.mult(-1),0,0,R,$)}else if(me==="bevel"||me==="fakeround"){const je=-Math.sqrt(_e*_e-1),We=Ve?je:0,et=Ve?0:je;if(V&&this.addCurrentVertex(U,Y,We,et,R,$),me==="fakeround"){const qe=Math.round(180*Te/Math.PI/20);for(let At=1;At<qe;At++){let xt=At/qe;if(xt!==.5){const Vt=xt-.5;xt+=xt*Vt*(xt-1)*((1.0904+ve*(ve*(3.55645-1.43519*ve)-3.2452))*Vt*Vt+(.848013+ve*(.215638*ve-1.06021)))}const at=H.sub(Y)._mult(xt)._add(Y)._unit()._mult(Ve?-1:1);this.addHalfVertex(U,at.x,at.y,!1,Ve,0,R,$)}}X&&this.addCurrentVertex(U,H,-We,-et,R,$)}else me==="butt"?this.addCurrentVertex(U,de,0,0,R,$):me==="square"?(V||this.addCurrentVertex(U,de,-1,-1,R,$),this.addCurrentVertex(U,de,0,0,R,$),V&&this.addCurrentVertex(U,de,1,1,R,$)):me==="round"&&(V&&(this.addCurrentVertex(U,Y,0,0,R,$),this.addCurrentVertex(U,Y,1,1,R,$,!0)),X&&(this.addCurrentVertex(U,H,-1,-1,R,$,!0),this.addCurrentVertex(U,H,0,0,R,$)));if(Oe&&te<M-1){const je=U.dist(X);if(je>2*I){const We=U.add(X.sub(U)._mult(I/je)._round());this.updateDistance(U,We),this.addCurrentVertex(We,H,0,0,R,$),U=We}}}}addVerticesTo(a,l,h,g,f,v,B,F,P,b){const E=(l.w-a.w)/this.tessellationStep|0;if(E>1){this.lineSoFar=a.w;const M=(l.x-a.x)/E,T=(l.y-a.y)/E,I=(l.z-a.z)/E,R=(l.w-a.w)/E;for(let U=1;U<E;++U)a.x+=M,a.y+=T,a.z+=I,this.lineSoFar+=R,this.addHalfVertex(a,h,g,b,!1,B,P,a.z),this.addHalfVertex(a,f,v,b,!0,-F,P,a.z)}this.lineSoFar=l.w,this.addHalfVertex(l,h,g,b,!1,B,P,l.z),this.addHalfVertex(l,f,v,b,!0,-F,P,l.z)}addCurrentVertex(a,l,h,g,f,v,B=!1){const F=l.x+l.y*h,P=l.y-l.x*h,b=l.y*g-l.x,E=-l.y-l.x*g;if(v!=null){const T=Ut+10,I=v,R=new qR(a.x,a.y,I,this.lineSoFar),U=wL(a,-10,T),V=this.lineSoFar;if(this.currentVertex)if(U){const X=this.currentVertexIsOutside,Y=this.currentVertex,H=new qR(a.x,a.y,I,this.lineSoFar);ZR(Y,H,-10,T),wL(H,-10,T)||(X&&(this.e1=this.e2=-1,this.lineSoFar=Y.w,this.addHalfVertex(Y,F,P,B,!1,h,f,Y.z),this.addHalfVertex(Y,b,E,B,!0,-g,f,Y.z)),this.addVerticesTo(Y,H,F,P,b,E,h,g,f,B))}else{const X=this.currentVertex;this.currentVertexIsOutside&&(ZR(X,R,-10,T),this.e1=this.e2=-1,this.lineSoFar=X.w,this.addHalfVertex(X,F,P,B,!1,h,f,X.z),this.addHalfVertex(X,b,E,B,!0,-g,f,X.z)),this.addVerticesTo(X,R,F,P,b,E,h,g,f,B)}else U||(this.addHalfVertex(a,F,P,B,!1,h,f,v),this.addHalfVertex(a,b,E,B,!0,-g,f,v));this.currentVertex=R,this.currentVertexIsOutside=U,this.lineSoFar=V}else this.addHalfVertex(a,F,P,B,!1,h,f,v),this.addHalfVertex(a,b,E,B,!0,-g,f,v)}addHalfVertex({x:a,y:l},h,g,f,v,B,F,P){this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),v||this.segmentPoints.push(this.lineSoFar-this.segmentStart,B)),this.layoutVertexArray.emplaceBack((a<<1)+(f?1:0),(l<<1)+(v?1:0),Math.round(63*h)+128,Math.round(63*g)+128,1+(B===0?0:B<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const b=F.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,b),F.primitiveLength++),v?this.e2=b:this.e1=b,P!=null&&this.zOffsetVertexArray.emplaceBack(P)}updateScaledDistance(){if(this.lineClips){const a=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=a*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(a,l){this.distance+=a.dist(l),this.updateScaledDistance()}}function wL(A,a,l){return A.x<a||A.x>l||A.y<a||A.y>l}let BL,CL;function SL(A,a,l){return a*(Ut/(A.tileSize*Math.pow(2,l-A.tileID.overscaledZ)))}function EL(A,a){return 1/SL(A,1,a.tileZoom)}function TL(A,a,l,h){return A.translatePosMatrix(h||a.tileID.projMatrix,a,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}Wt(AF,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const FL=A=>{const a=[];IL(A)&&a.push("RENDER_LINE_DASH"),A.paint.get("line-gradient")&&a.push("RENDER_LINE_GRADIENT");const l=A.paint.get("line-trim-offset");l[0]===0&&l[1]===0||a.push("RENDER_LINE_TRIM_OFFSET"),A.paint.get("line-border-width").constantOr(1)!==0&&a.push("RENDER_LINE_BORDER");const h=A.layout.get("line-join").constantOr("miter")==="none",g=!!A.paint.get("line-pattern").constantOr(1);return h&&g&&a.push("LINE_JOIN_NONE"),a};function IL(A){const a=A.paint.get("line-dasharray").value;return a.value||a.kind!=="constant"}let hF;const ML=()=>hF||(hF={layout:BL||(BL=new ri({"line-cap":new nr($e.layout_line["line-cap"]),"line-join":new nr($e.layout_line["line-join"]),"line-miter-limit":new kt($e.layout_line["line-miter-limit"]),"line-round-limit":new kt($e.layout_line["line-round-limit"]),"line-sort-key":new nr($e.layout_line["line-sort-key"]),"line-z-offset":new nr($e.layout_line["line-z-offset"]),visibility:new kt($e.layout_line.visibility)})),paint:CL||(CL=new ri({"line-opacity":new nr($e.paint_line["line-opacity"]),"line-color":new nr($e.paint_line["line-color"]),"line-translate":new kt($e.paint_line["line-translate"]),"line-translate-anchor":new kt($e.paint_line["line-translate-anchor"]),"line-width":new nr($e.paint_line["line-width"]),"line-gap-width":new nr($e.paint_line["line-gap-width"]),"line-offset":new nr($e.paint_line["line-offset"]),"line-blur":new nr($e.paint_line["line-blur"]),"line-dasharray":new nr($e.paint_line["line-dasharray"]),"line-pattern":new nr($e.paint_line["line-pattern"]),"line-gradient":new Hs($e.paint_line["line-gradient"]),"line-trim-offset":new kt($e.paint_line["line-trim-offset"]),"line-trim-fade-range":new kt($e.paint_line["line-trim-fade-range"]),"line-trim-color":new kt($e.paint_line["line-trim-color"]),"line-emissive-strength":new kt($e.paint_line["line-emissive-strength"]),"line-border-width":new nr($e.paint_line["line-border-width"]),"line-border-color":new nr($e.paint_line["line-border-color"]),"line-occlusion-opacity":new kt($e.paint_line["line-occlusion-opacity"])}))},hF);class wX extends nr{possiblyEvaluate(a,l){return l=new xi(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,transition:l.transition}),super.possiblyEvaluate(a,l)}evaluate(a,l,h,g){return l=go({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(a,l,h,g)}}let Hv;function PL(A,a){return a>0?a+2*A:A}const BX=hn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),CX=hn([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),SX=hn([{name:"a_projected_pos",components:4,type:"Float32"}],4);hn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const EX=hn([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),TX=hn([{name:"a_texb",components:2,type:"Uint16"}]),FX=hn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),IX=hn([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);hn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const DL=hn([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),MX=hn([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);hn([{name:"triangle",components:3,type:"Uint16"}]),hn([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),hn([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"}]),hn([{type:"Float32",name:"offsetX"}]),hn([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Lo=24;const pc=128;function dF(A,a){const{expression:l}=a;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new xi(A+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:g}=l;let f=0;for(;f<h.length&&h[f]<=A;)f++;f=Math.max(0,f-1);let v=f;for(;v<h.length&&h[v]<A+1;)v++;v=Math.min(h.length-1,v);const B=h[f],F=h[v];return l.kind==="composite"?{kind:"composite",minZoom:B,maxZoom:F,interpolationType:g}:{kind:"camera",minZoom:B,maxZoom:F,minSize:l.evaluate(new xi(B)),maxSize:l.evaluate(new xi(F)),interpolationType:g}}}function Pb(A,{uSize:a,uSizeT:l},{lowerSize:h,upperSize:g}){return A.kind==="source"?h/pc:A.kind==="composite"?cr(h/pc,g/pc,l):a}function Mm(A,a){let l=0,h=0;if(A.kind==="constant")h=A.layoutSize;else if(A.kind!=="source"){const{interpolationType:g,minZoom:f,maxZoom:v}=A,B=g?xr(rs.interpolationFactor(g,a,f,v),0,1):0;A.kind==="camera"?h=cr(A.minSize,A.maxSize,B):l=B}return{uSizeT:l,uSize:h}}var PX=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:pc,evaluateSizeForFeature:Pb,evaluateSizeForZoom:Mm,getSizeData:dF});function DX(A,a,l){return A.sections.forEach(h=>{h.text=function(g,f,v){const B=f.layout.get("text-transform").evaluate(v,{});return B==="uppercase"?g=g.toLocaleUpperCase():B==="lowercase"&&(g=g.toLocaleLowerCase()),ka.applyArabicShaping&&(g=ka.applyArabicShaping(g)),g}(h.text,a,l)}),A}const jv={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function kX(A){return A==="︶"||A==="﹈"||A==="︸"||A==="﹄"||A==="﹂"||A==="︾"||A==="︼"||A==="︺"||A==="︘"||A==="﹀"||A==="︐"||A==="︓"||A==="︔"||A==="｀"||A==="￣"||A==="︑"||A==="︒"}function RX(A){return A==="︵"||A==="﹇"||A==="︷"||A==="﹃"||A==="﹁"||A==="︽"||A==="︻"||A==="︹"||A==="︗"||A==="︿"}var kL,fF,RL,pF={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function LX(){return kL||(kL=1,pF.read=function(A,a,l,h,g){var f,v,B=8*g-h-1,F=(1<<B)-1,P=F>>1,b=-7,E=l?g-1:0,M=l?-1:1,T=A[a+E];for(E+=M,f=T&(1<<-b)-1,T>>=-b,b+=B;b>0;f=256*f+A[a+E],E+=M,b-=8);for(v=f&(1<<-b)-1,f>>=-b,b+=h;b>0;v=256*v+A[a+E],E+=M,b-=8);if(f===0)f=1-P;else{if(f===F)return v?NaN:1/0*(T?-1:1);v+=Math.pow(2,h),f-=P}return(T?-1:1)*v*Math.pow(2,f-h)},pF.write=function(A,a,l,h,g,f){var v,B,F,P=8*f-g-1,b=(1<<P)-1,E=b>>1,M=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=h?0:f-1,I=h?1:-1,R=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(B=isNaN(a)?1:0,v=b):(v=Math.floor(Math.log(a)/Math.LN2),a*(F=Math.pow(2,-v))<1&&(v--,F*=2),(a+=v+E>=1?M/F:M*Math.pow(2,1-E))*F>=2&&(v++,F/=2),v+E>=b?(B=0,v=b):v+E>=1?(B=(a*F-1)*Math.pow(2,g),v+=E):(B=a*Math.pow(2,E-1)*Math.pow(2,g),v=0));g>=8;A[l+T]=255&B,T+=I,B/=256,g-=8);for(v=v<<g|B,P+=g;P>0;A[l+T]=255&v,T+=I,v/=256,P-=8);A[l+T-I]|=128*R}),pF}function LL(){if(RL)return fF;RL=1,fF=a;var A=LX();function a(H){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(H)?H:new Uint8Array(H||0),this.pos=0,this.type=0,this.length=this.buf.length}a.Varint=0,a.Fixed64=1,a.Bytes=2,a.Fixed32=5;var l=4294967296,h=1/l,g=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function f(H){return H.type===a.Bytes?H.readVarint()+H.pos:H.pos+1}function v(H,$,te){return te?4294967296*$+(H>>>0):4294967296*($>>>0)+(H>>>0)}function B(H,$,te){var le=$<=16383?1:$<=2097151?2:$<=268435455?3:Math.floor(Math.log($)/(7*Math.LN2));te.realloc(le);for(var me=te.pos-1;me>=H;me--)te.buf[me+le]=te.buf[me]}function F(H,$){for(var te=0;te<H.length;te++)$.writeVarint(H[te])}function P(H,$){for(var te=0;te<H.length;te++)$.writeSVarint(H[te])}function b(H,$){for(var te=0;te<H.length;te++)$.writeFloat(H[te])}function E(H,$){for(var te=0;te<H.length;te++)$.writeDouble(H[te])}function M(H,$){for(var te=0;te<H.length;te++)$.writeBoolean(H[te])}function T(H,$){for(var te=0;te<H.length;te++)$.writeFixed32(H[te])}function I(H,$){for(var te=0;te<H.length;te++)$.writeSFixed32(H[te])}function R(H,$){for(var te=0;te<H.length;te++)$.writeFixed64(H[te])}function U(H,$){for(var te=0;te<H.length;te++)$.writeSFixed64(H[te])}function V(H,$){return(H[$]|H[$+1]<<8|H[$+2]<<16)+16777216*H[$+3]}function X(H,$,te){H[te]=$,H[te+1]=$>>>8,H[te+2]=$>>>16,H[te+3]=$>>>24}function Y(H,$){return(H[$]|H[$+1]<<8|H[$+2]<<16)+(H[$+3]<<24)}return a.prototype={destroy:function(){this.buf=null},readFields:function(H,$,te){for(te=te||this.length;this.pos<te;){var le=this.readVarint(),me=le>>3,ve=this.pos;this.type=7&le,H(me,$,this),this.pos===ve&&this.skip(le)}return $},readMessage:function(H,$){return this.readFields(H,$,this.readVarint()+this.pos)},readFixed32:function(){var H=V(this.buf,this.pos);return this.pos+=4,H},readSFixed32:function(){var H=Y(this.buf,this.pos);return this.pos+=4,H},readFixed64:function(){var H=V(this.buf,this.pos)+V(this.buf,this.pos+4)*l;return this.pos+=8,H},readSFixed64:function(){var H=V(this.buf,this.pos)+Y(this.buf,this.pos+4)*l;return this.pos+=8,H},readFloat:function(){var H=A.read(this.buf,this.pos,!0,23,4);return this.pos+=4,H},readDouble:function(){var H=A.read(this.buf,this.pos,!0,52,8);return this.pos+=8,H},readVarint:function(H){var $,te,le=this.buf;return $=127&(te=le[this.pos++]),te<128?$:($|=(127&(te=le[this.pos++]))<<7,te<128?$:($|=(127&(te=le[this.pos++]))<<14,te<128?$:($|=(127&(te=le[this.pos++]))<<21,te<128?$:function(me,ve,de){var Ce,_e,Te=de.buf;if(Ce=(112&(_e=Te[de.pos++]))>>4,_e<128||(Ce|=(127&(_e=Te[de.pos++]))<<3,_e<128)||(Ce|=(127&(_e=Te[de.pos++]))<<10,_e<128)||(Ce|=(127&(_e=Te[de.pos++]))<<17,_e<128)||(Ce|=(127&(_e=Te[de.pos++]))<<24,_e<128)||(Ce|=(1&(_e=Te[de.pos++]))<<31,_e<128))return v(me,Ce,ve);throw new Error("Expected varint not more than 10 bytes")}($|=(15&(te=le[this.pos]))<<28,H,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var H=this.readVarint();return H%2==1?(H+1)/-2:H/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var H=this.readVarint()+this.pos,$=this.pos;return this.pos=H,H-$>=12&&g?function(te,le,me){return g.decode(te.subarray(le,me))}(this.buf,$,H):function(te,le,me){for(var ve="",de=le;de<me;){var Ce,_e,Te,Oe=te[de],Ve=null,je=Oe>239?4:Oe>223?3:Oe>191?2:1;if(de+je>me)break;je===1?Oe<128&&(Ve=Oe):je===2?(192&(Ce=te[de+1]))==128&&(Ve=(31&Oe)<<6|63&Ce)<=127&&(Ve=null):je===3?(_e=te[de+2],(192&(Ce=te[de+1]))==128&&(192&_e)==128&&((Ve=(15&Oe)<<12|(63&Ce)<<6|63&_e)<=2047||Ve>=55296&&Ve<=57343)&&(Ve=null)):je===4&&(_e=te[de+2],Te=te[de+3],(192&(Ce=te[de+1]))==128&&(192&_e)==128&&(192&Te)==128&&((Ve=(15&Oe)<<18|(63&Ce)<<12|(63&_e)<<6|63&Te)<=65535||Ve>=1114112)&&(Ve=null)),Ve===null?(Ve=65533,je=1):Ve>65535&&(Ve-=65536,ve+=String.fromCharCode(Ve>>>10&1023|55296),Ve=56320|1023&Ve),ve+=String.fromCharCode(Ve),de+=je}return ve}(this.buf,$,H)},readBytes:function(){var H=this.readVarint()+this.pos,$=this.buf.subarray(this.pos,H);return this.pos=H,$},readPackedVarint:function(H,$){if(this.type!==a.Bytes)return H.push(this.readVarint($));var te=f(this);for(H=H||[];this.pos<te;)H.push(this.readVarint($));return H},readPackedSVarint:function(H){if(this.type!==a.Bytes)return H.push(this.readSVarint());var $=f(this);for(H=H||[];this.pos<$;)H.push(this.readSVarint());return H},readPackedBoolean:function(H){if(this.type!==a.Bytes)return H.push(this.readBoolean());var $=f(this);for(H=H||[];this.pos<$;)H.push(this.readBoolean());return H},readPackedFloat:function(H){if(this.type!==a.Bytes)return H.push(this.readFloat());var $=f(this);for(H=H||[];this.pos<$;)H.push(this.readFloat());return H},readPackedDouble:function(H){if(this.type!==a.Bytes)return H.push(this.readDouble());var $=f(this);for(H=H||[];this.pos<$;)H.push(this.readDouble());return H},readPackedFixed32:function(H){if(this.type!==a.Bytes)return H.push(this.readFixed32());var $=f(this);for(H=H||[];this.pos<$;)H.push(this.readFixed32());return H},readPackedSFixed32:function(H){if(this.type!==a.Bytes)return H.push(this.readSFixed32());var $=f(this);for(H=H||[];this.pos<$;)H.push(this.readSFixed32());return H},readPackedFixed64:function(H){if(this.type!==a.Bytes)return H.push(this.readFixed64());var $=f(this);for(H=H||[];this.pos<$;)H.push(this.readFixed64());return H},readPackedSFixed64:function(H){if(this.type!==a.Bytes)return H.push(this.readSFixed64());var $=f(this);for(H=H||[];this.pos<$;)H.push(this.readSFixed64());return H},skip:function(H){var $=7&H;if($===a.Varint)for(;this.buf[this.pos++]>127;);else if($===a.Bytes)this.pos=this.readVarint()+this.pos;else if($===a.Fixed32)this.pos+=4;else{if($!==a.Fixed64)throw new Error("Unimplemented type: "+$);this.pos+=8}},writeTag:function(H,$){this.writeVarint(H<<3|$)},realloc:function(H){for(var $=this.length||16;$<this.pos+H;)$*=2;if($!==this.length){var te=new Uint8Array($);te.set(this.buf),this.buf=te,this.length=$}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(H){this.realloc(4),X(this.buf,H,this.pos),this.pos+=4},writeSFixed32:function(H){this.realloc(4),X(this.buf,H,this.pos),this.pos+=4},writeFixed64:function(H){this.realloc(8),X(this.buf,-1&H,this.pos),X(this.buf,Math.floor(H*h),this.pos+4),this.pos+=8},writeSFixed64:function(H){this.realloc(8),X(this.buf,-1&H,this.pos),X(this.buf,Math.floor(H*h),this.pos+4),this.pos+=8},writeVarint:function(H){(H=+H||0)>268435455||H<0?function($,te){var le,me;if($>=0?(le=$%4294967296|0,me=$/4294967296|0):(me=~(-$/4294967296),4294967295^(le=~(-$%4294967296))?le=le+1|0:(le=0,me=me+1|0)),$>=18446744073709552e3||$<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");te.realloc(10),function(ve,de,Ce){Ce.buf[Ce.pos++]=127&ve|128,ve>>>=7,Ce.buf[Ce.pos++]=127&ve|128,ve>>>=7,Ce.buf[Ce.pos++]=127&ve|128,ve>>>=7,Ce.buf[Ce.pos++]=127&ve|128,Ce.buf[Ce.pos]=127&(ve>>>=7)}(le,0,te),function(ve,de){var Ce=(7&ve)<<4;de.buf[de.pos++]|=Ce|((ve>>>=3)?128:0),ve&&(de.buf[de.pos++]=127&ve|((ve>>>=7)?128:0),ve&&(de.buf[de.pos++]=127&ve|((ve>>>=7)?128:0),ve&&(de.buf[de.pos++]=127&ve|((ve>>>=7)?128:0),ve&&(de.buf[de.pos++]=127&ve|((ve>>>=7)?128:0),ve&&(de.buf[de.pos++]=127&ve)))))}(me,te)}(H,this):(this.realloc(4),this.buf[this.pos++]=127&H|(H>127?128:0),H<=127||(this.buf[this.pos++]=127&(H>>>=7)|(H>127?128:0),H<=127||(this.buf[this.pos++]=127&(H>>>=7)|(H>127?128:0),H<=127||(this.buf[this.pos++]=H>>>7&127))))},writeSVarint:function(H){this.writeVarint(H<0?2*-H-1:2*H)},writeBoolean:function(H){this.writeVarint(!!H)},writeString:function(H){H=String(H),this.realloc(4*H.length),this.pos++;var $=this.pos;this.pos=function(le,me,ve){for(var de,Ce,_e=0;_e<me.length;_e++){if((de=me.charCodeAt(_e))>55295&&de<57344){if(!Ce){de>56319||_e+1===me.length?(le[ve++]=239,le[ve++]=191,le[ve++]=189):Ce=de;continue}if(de<56320){le[ve++]=239,le[ve++]=191,le[ve++]=189,Ce=de;continue}de=Ce-55296<<10|de-56320|65536,Ce=null}else Ce&&(le[ve++]=239,le[ve++]=191,le[ve++]=189,Ce=null);de<128?le[ve++]=de:(de<2048?le[ve++]=de>>6|192:(de<65536?le[ve++]=de>>12|224:(le[ve++]=de>>18|240,le[ve++]=de>>12&63|128),le[ve++]=de>>6&63|128),le[ve++]=63&de|128)}return ve}(this.buf,H,this.pos);var te=this.pos-$;te>=128&&B($,te,this),this.pos=$-1,this.writeVarint(te),this.pos+=te},writeFloat:function(H){this.realloc(4),A.write(this.buf,H,this.pos,!0,23,4),this.pos+=4},writeDouble:function(H){this.realloc(8),A.write(this.buf,H,this.pos,!0,52,8),this.pos+=8},writeBytes:function(H){var $=H.length;this.writeVarint($),this.realloc($);for(var te=0;te<$;te++)this.buf[this.pos++]=H[te]},writeRawMessage:function(H,$){this.pos++;var te=this.pos;H($,this);var le=this.pos-te;le>=128&&B(te,le,this),this.pos=te-1,this.writeVarint(le),this.pos+=le},writeMessage:function(H,$,te){this.writeTag(H,a.Bytes),this.writeRawMessage($,te)},writePackedVarint:function(H,$){$.length&&this.writeMessage(H,F,$)},writePackedSVarint:function(H,$){$.length&&this.writeMessage(H,P,$)},writePackedBoolean:function(H,$){$.length&&this.writeMessage(H,M,$)},writePackedFloat:function(H,$){$.length&&this.writeMessage(H,b,$)},writePackedDouble:function(H,$){$.length&&this.writeMessage(H,E,$)},writePackedFixed32:function(H,$){$.length&&this.writeMessage(H,T,$)},writePackedSFixed32:function(H,$){$.length&&this.writeMessage(H,I,$)},writePackedFixed64:function(H,$){$.length&&this.writeMessage(H,R,$)},writePackedSFixed64:function(H,$){$.length&&this.writeMessage(H,U,$)},writeBytesField:function(H,$){this.writeTag(H,a.Bytes),this.writeBytes($)},writeFixed32Field:function(H,$){this.writeTag(H,a.Fixed32),this.writeFixed32($)},writeSFixed32Field:function(H,$){this.writeTag(H,a.Fixed32),this.writeSFixed32($)},writeFixed64Field:function(H,$){this.writeTag(H,a.Fixed64),this.writeFixed64($)},writeSFixed64Field:function(H,$){this.writeTag(H,a.Fixed64),this.writeSFixed64($)},writeVarintField:function(H,$){this.writeTag(H,a.Varint),this.writeVarint($)},writeSVarintField:function(H,$){this.writeTag(H,a.Varint),this.writeSVarint($)},writeStringField:function(H,$){this.writeTag(H,a.Bytes),this.writeString($)},writeFloatField:function(H,$){this.writeTag(H,a.Fixed32),this.writeFloat($)},writeDoubleField:function(H,$){this.writeTag(H,a.Fixed64),this.writeDouble($)},writeBooleanField:function(H,$){this.writeVarintField(H,!!$)}},fF}var Db=x(LL());const mF=3;function OX(A,a,l){a.glyphs=[],A===1&&l.readMessage(UX,a)}function UX(A,a,l){if(A===3){const{id:h,bitmap:g,width:f,height:v,left:B,top:F,advance:P}=l.readMessage(zX,{});a.glyphs.push({id:h,bitmap:new Fh({width:f+2*mF,height:v+2*mF},g),metrics:{width:f,height:v,left:B,top:F,advance:P}})}else A===4?a.ascender=l.readSVarint():A===5&&(a.descender=l.readSVarint())}function zX(A,a,l){A===1?a.id=l.readVarint():A===2?a.bitmap=l.readBytes():A===3?a.width=l.readVarint():A===4?a.height=l.readVarint():A===5?a.left=l.readSVarint():A===6?a.top=l.readSVarint():A===7&&(a.advance=l.readVarint())}const OL=mF,Ks={horizontal:1,vertical:2,horizontalOnly:3};class Gv{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(a,l){const h=new Gv;return h.scale=a||1,h.fontStack=l,h}static forImage(a){const l=new Gv;return l.imageName=a,l}}class Pm{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(a,l){const h=new Pm;for(let g=0;g<a.sections.length;g++){const f=a.sections[g];f.image?h.addImageSection(f):h.addTextSection(f,l)}return h}length(){return this.text.length}getSection(a){return this.sections[this.sectionIndex[a]]}getSections(){return this.sections}getSectionIndex(a){return this.sectionIndex[a]}getCodePoint(a){return this.text.codePointAt(a)}verticalizePunctuation(a){this.text=function(l,h){let g="";for(let f=0;f<l.length;f++){const v=l.charCodeAt(f+1)||null,B=l.charCodeAt(f-1)||null;g+=!h&&(v&&hf(v)&&!jv[l[f+1]]||B&&hf(B)&&!jv[l[f-1]])||!jv[l[f]]?l[f]:jv[l[f]]}return g}(this.text,a)}trim(){let a=0;for(let h=0;h<this.text.length&&kb[this.text.charCodeAt(h)];h++)a++;let l=this.text.length;for(let h=this.text.length-1;h>=0&&h>=a&&kb[this.text.charCodeAt(h)];h--)l--;this.text=this.text.substring(a,l),this.sectionIndex=this.sectionIndex.slice(a,l)}substring(a,l){const h=new Pm;return h.text=this.text.substring(a,l),h.sectionIndex=this.sectionIndex.slice(a,l),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((a,l)=>Math.max(a,this.sections[l].scale),0)}addTextSection(a,l){this.text+=a.text,this.sections.push(Gv.forText(a.scale,a.fontStack||l));const h=this.sections.length-1;for(let g=0;g<a.text.length;++g)this.sectionIndex.push(h)}addImageSection(a){const l=a.image?a.image.namePrimary:"";if(l.length===0)return void tn("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCodePoint(h),this.sections.push(Gv.forImage(l)),this.sectionIndex.push(this.sections.length-1)):tn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function gF(A,a,l,h,g,f,v,B,F,P,b,E,M,T,I){const R=Pm.fromFeature(A,g);E===Ks.vertical&&R.verticalizePunctuation(M);let U=[];const V=function(te,le,me,ve,de,Ce){if(!te)return[];const _e=[],Te=function(We,et,qe,At,xt,at){let Vt=0;for(let Ot=0;Ot<We.length();Ot++){const Ft=We.getSection(Ot);Vt+=UL(We.getCodePoint(Ot),Ft,At,xt,et,at)}return Vt/Math.max(1,Math.ceil(Vt/qe))}(te,le,me,ve,de,Ce),Oe=te.text.indexOf("​")>=0;let Ve=0;for(let We=0;We<te.length();We++){const et=te.getSection(We),qe=te.getCodePoint(We);if(kb[qe]||(Ve+=UL(qe,et,ve,de,le,Ce)),We<te.length()-1){const At=!((je=qe)<11904||!(rr["Bopomofo Extended"](je)||rr.Bopomofo(je)||rr["CJK Compatibility Forms"](je)||rr["CJK Compatibility Ideographs"](je)||rr["CJK Compatibility"](je)||rr["CJK Radicals Supplement"](je)||rr["CJK Strokes"](je)||rr["CJK Symbols and Punctuation"](je)||rr["CJK Unified Ideographs Extension A"](je)||rr["CJK Unified Ideographs"](je)||rr["Enclosed CJK Letters and Months"](je)||rr["Halfwidth and Fullwidth Forms"](je)||rr.Hiragana(je)||rr["Ideographic Description Characters"](je)||rr["Kangxi Radicals"](je)||rr["Katakana Phonetic Extensions"](je)||rr.Katakana(je)||rr["Vertical Forms"](je)||rr["Yi Radicals"](je)||rr["Yi Syllables"](je)));(QX[qe]||At||et.imageName)&&_e.push(QL(We+1,Ve,Te,_e,NX(qe,te.getCodePoint(We+1),At&&Oe),!1))}}var je;return NL(QL(te.length(),Ve,Te,_e,0,!0))}(R,P,f,a,h,T),{processBidirectionalText:X,processStyledBidirectionalText:Y}=ka;if(X&&R.sections.length===1){const te=X(R.toString(),V);for(const le of te){const me=new Pm;me.text=le,me.sections=R.sections;for(let ve=0;ve<le.length;ve++)me.sectionIndex.push(0);U.push(me)}}else if(Y){const te=Y(R.text,R.sectionIndex,V);for(const le of te){const me=new Pm;me.text=le[0],me.sectionIndex=le[1],me.sections=R.sections,U.push(me)}}else U=function(te,le){const me=[],ve=te.text;let de=0;for(const Ce of le)me.push(te.substring(de,Ce)),de=Ce;return de<ve.length&&me.push(te.substring(de,ve.length)),me}(R,V);const H=[],$={positionedLines:H,text:R.toString(),top:b[1],bottom:b[1],left:b[0],right:b[0],writingMode:E,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(te,le,me,ve,de,Ce,_e,Te,Oe,Ve,je,We){let et=0,qe=0,At=0;const xt=Te==="right"?1:Te==="left"?0:.5;let at=!1;for(const Qt of de){const jt=Qt.getSections();for(const gr of jt){if(gr.imageName)continue;const Pr=le[gr.fontStack];if(Pr&&(at=Pr.ascender!==void 0&&Pr.descender!==void 0,!at))break}if(!at)break}let Vt=0;for(const Qt of de){Qt.trim();const jt=Qt.getMaxScale(),gr=(jt-1)*Lo,Pr={positionedGlyphs:[],lineOffset:0};te.positionedLines[Vt]=Pr;const Er=Pr.positionedGlyphs;let Tr=0;if(!Qt.length()){qe+=Ce,++Vt;continue}let Ur=0,zr=0;for(let Bn=0;Bn<Qt.length();Bn++){const _r=Qt.getSection(Bn),vn=Qt.getSectionIndex(Bn),bn=Qt.getCodePoint(Bn);let qn=_r.scale,Fi=null,zi=null,Ii=null,mi=Lo,_o=0;const ji=!(Oe===Ks.horizontal||!je&&!Am(bn)||je&&(kb[bn]||(Ot=bn,rr.Arabic(Ot)||rr["Arabic Supplement"](Ot)||rr["Arabic Extended-A"](Ot)||rr["Arabic Presentation Forms-A"](Ot)||rr["Arabic Presentation Forms-B"](Ot))));if(_r.imageName){const Oo=ve[_r.imageName];if(!Oo)continue;Ii=_r.imageName,te.iconsInText=te.iconsInText||!0,zi=Oo.paddedRect;const Nn=Oo.displaySize;qn=qn*Lo/We,Fi={width:Nn[0],height:Nn[1],left:0,top:-OL,advance:ji?Nn[1]:Nn[0],localGlyph:!1},_o=at?-Fi.height*qn:jt*Lo-17-Nn[1]*qn,mi=Fi.advance;const os=(ji?Nn[0]:Nn[1])*qn-Lo*jt;os>0&&os>Tr&&(Tr=os)}else{const Oo=me[_r.fontStack];if(!Oo)continue;Oo[bn]&&(zi=Oo[bn]);const Nn=le[_r.fontStack];if(!Nn)continue;const os=Nn.glyphs[bn];if(!os)continue;if(Fi=os.metrics,mi=bn!==8203?Lo:0,at){const _c=Nn.ascender!==void 0?Math.abs(Nn.ascender):0,Cl=Nn.descender!==void 0?Math.abs(Nn.descender):0,Sl=(_c+Cl)*qn;Ur<Sl&&(Ur=Sl,zr=(_c-Cl)/2*qn),_o=-_c*qn}else _o=(jt-qn)*Lo-17}ji?(te.verticalizable=!0,Er.push({glyph:bn,imageName:Ii,x:et,y:qe+_o,vertical:ji,scale:qn,localGlyph:Fi.localGlyph,fontStack:_r.fontStack,sectionIndex:vn,metrics:Fi,rect:zi}),et+=mi*qn+Ve):(Er.push({glyph:bn,imageName:Ii,x:et,y:qe+_o,vertical:ji,scale:qn,localGlyph:Fi.localGlyph,fontStack:_r.fontStack,sectionIndex:vn,metrics:Fi,rect:zi}),et+=Fi.advance*qn+Ve)}Er.length!==0&&(At=Math.max(et-Ve,At),at?VL(Er,xt,Tr,zr,Ce*jt/2):VL(Er,xt,Tr,0,Ce/2)),et=0;const Mn=Ce*jt+Tr;Pr.lineOffset=Math.max(Tr,gr),qe+=Mn,++Vt}var Ot;const Ft=qe,{horizontalAlign:Bt,verticalAlign:or}=vF(_e);(function(Qt,jt,gr,Pr,Er,Tr){const Ur=(jt-gr)*Er,zr=-Tr*Pr;for(const Mn of Qt)for(const Bn of Mn.positionedGlyphs)Bn.x+=Ur,Bn.y+=zr})(te.positionedLines,xt,Bt,or,At,Ft),te.top+=-or*Ft,te.bottom=te.top+Ft,te.left+=-Bt*At,te.right=te.left+At,te.hasBaseline=at}($,a,l,h,U,v,B,F,E,P,M,I),!function(te){for(const le of te)if(le.positionedGlyphs.length!==0)return!1;return!0}(H)&&$}const kb={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},QX={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function UL(A,a,l,h,g,f){if(a.imageName){const v=h[a.imageName];return v?v.displaySize[0]*a.scale*Lo/f+g:0}{const v=l[a.fontStack],B=v&&v.glyphs[A];return B?B.metrics.advance*a.scale+g:0}}function zL(A,a,l,h){const g=Math.pow(A-a,2);return h?A<a?g/2:2*g:g+Math.abs(l)*l}function NX(A,a,l){let h=0;return A===10&&(h-=1e4),l&&(h+=150),A!==40&&A!==65288||(h+=50),a!==41&&a!==65289||(h+=50),h}function QL(A,a,l,h,g,f){let v=null,B=zL(a,l,g,f);for(const F of h){const P=zL(a-F.x,l,g,f)+F.badness;P<=B&&(v=F,B=P)}return{index:A,x:a,priorBreak:v,badness:B}}function NL(A){return A?NL(A.priorBreak).concat(A.index):[]}function vF(A){let a=.5,l=.5;switch(A){case"right":case"top-right":case"bottom-right":a=1;break;case"left":case"top-left":case"bottom-left":a=0}switch(A){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:a,verticalAlign:l}}function VL(A,a,l,h,g){if(!(a||l||h||g))return;const f=A.length-1,v=A[f],B=(v.x+v.metrics.advance*v.scale)*a;for(let F=0;F<=f;F++)A[F].x-=B,A[F].y+=l+h+g}function VX(A,a,l,h){const{horizontalAlign:g,verticalAlign:f}=vF(h),v=l[0]-A.displaySize[0]*g,B=l[1]-A.displaySize[1]*f;return{imagePrimary:A,imageSecondary:a,top:B,bottom:B+A.displaySize[1],left:v,right:v+A.displaySize[0]}}function HL(A,a,l,h,g,f){const v=A.imagePrimary;let B;if(v.content){const U=v.content,V=v.pixelRatio||1;B=[U[0]/V,U[1]/V,v.displaySize[0]-U[2]/V,v.displaySize[1]-U[3]/V]}const F=a.left*f,P=a.right*f;let b,E,M,T;l==="width"||l==="both"?(T=g[0]+F-h[3],E=g[0]+P+h[1]):(T=g[0]+(F+P-v.displaySize[0])/2,E=T+v.displaySize[0]);const I=a.top*f,R=a.bottom*f;return l==="height"||l==="both"?(b=g[1]+I-h[0],M=g[1]+R+h[2]):(b=g[1]+(I+R-v.displaySize[1])/2,M=b+v.displaySize[1]),{imagePrimary:v,imageSecondary:void 0,top:b,right:E,bottom:M,left:T,collisionPadding:B}}class aA extends Dt{constructor(a,l,h,g,f){super(a,l),this.angle=g,this.z=h,f!==void 0&&(this.segment=f)}clone(){return new aA(this.x,this.y,this.z,this.angle,this.segment)}}function jL(A,a,l,h,g){if(a.segment===void 0)return!0;let f=a,v=a.segment+1,B=0;for(;B>-l/2;){if(v--,v<0)return!1;B-=A[v].dist(f),f=A[v]}B+=A[v].dist(A[v+1]),v++;const F=[];let P=0;for(;B<l/2;){const b=A[v],E=A[v+1];if(!E)return!1;let M=A[v-1].angleTo(b)-b.angleTo(E);for(M=Math.abs((M+3*Math.PI)%(2*Math.PI)-Math.PI),F.push({distance:B,angleDelta:M}),P+=M;B-F[0].distance>h;)P-=F.shift().angleDelta;if(P>g)return!1;v++,B+=b.dist(E)}return!0}function GL(A){let a=0;for(let l=0;l<A.length-1;l++)a+=A[l].dist(A[l+1]);return a}function KL(A,a,l){return A?.6*a*l:0}function WL(A,a){return Math.max(A?A.right-A.left:0,a?a.right-a.left:0)}function HX(A,a,l,h,g,f){const v=KL(l,g,f),B=WL(l,h)*f;let F=0;const P=GL(A)/2;for(let b=0;b<A.length-1;b++){const E=A[b],M=A[b+1],T=E.dist(M);if(F+T>P){const I=(P-F)/T,R=cr(E.x,M.x,I),U=cr(E.y,M.y,I),V=new aA(R,U,0,M.angleTo(E),b);return!v||jL(A,V,B,v,a)?V:void 0}F+=T}}function jX(A,a,l,h,g,f,v,B,F){const P=KL(h,f,v),b=WL(h,g),E=b*v,M=A[0].x===0||A[0].x===F||A[0].y===0||A[0].y===F;return a-E<a/4&&(a=E+a/4),qL(A,M?a/2*B%a:(b/2+2*f)*v*B%a,a,P,l,E,M,!1,F)}function qL(A,a,l,h,g,f,v,B,F){const P=f/2,b=GL(A);let E=0,M=a-l,T=[];for(let I=0;I<A.length-1;I++){const R=A[I],U=A[I+1],V=R.dist(U),X=U.angleTo(R);for(;M+l<E+V;){M+=l;const Y=(M-E)/V,H=cr(R.x,U.x,Y),$=cr(R.y,U.y,Y);if(H>=0&&H<F&&$>=0&&$<F&&M-P>=0&&M+P<=b){const te=new aA(H,$,0,X,I);h&&!jL(A,te,f,h,g)||T.push(te)}}E+=V}return B||T.length||v||(T=qL(A,E/2,l,h,g,f,v,!0,F)),T}function XL(A,a,l,h,g){const f=[];for(let v=0;v<A.length;v++){const B=A[v];let F;for(let P=0;P<B.length-1;P++){let b=B[P],E=B[P+1];b.x<a&&E.x<a||(b.x<a?b=new Dt(a,b.y+(a-b.x)/(E.x-b.x)*(E.y-b.y))._round():E.x<a&&(E=new Dt(a,b.y+(a-b.x)/(E.x-b.x)*(E.y-b.y))._round()),b.y<l&&E.y<l||(b.y<l?b=new Dt(b.x+(l-b.y)/(E.y-b.y)*(E.x-b.x),l)._round():E.y<l&&(E=new Dt(b.x+(l-b.y)/(E.y-b.y)*(E.x-b.x),l)._round()),b.x>=h&&E.x>=h||(b.x>=h?b=new Dt(h,b.y+(h-b.x)/(E.x-b.x)*(E.y-b.y))._round():E.x>=h&&(E=new Dt(h,b.y+(h-b.x)/(E.x-b.x)*(E.y-b.y))._round()),b.y>=g&&E.y>=g||(b.y>=g?b=new Dt(b.x+(g-b.y)/(E.y-b.y)*(E.x-b.x),g)._round():E.y>=g&&(E=new Dt(b.x+(g-b.y)/(E.y-b.y)*(E.x-b.x),g)._round()),F&&b.equals(F[F.length-1])||(F=[b],f.push(F)),F.push(E)))))}}return f}function ZL(A){let a=0,l=0;for(const v of A)a+=v.w*v.h,l=Math.max(l,v.w);A.sort((v,B)=>B.h-v.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(a/.95)),l),h:1/0}];let g=0,f=0;for(const v of A)for(let B=h.length-1;B>=0;B--){const F=h[B];if(!(v.w>F.w||v.h>F.h)){if(v.x=F.x,v.y=F.y,f=Math.max(f,v.y+v.h),g=Math.max(g,v.x+v.w),v.w===F.w&&v.h===F.h){const P=h.pop();B<h.length&&(h[B]=P)}else v.h===F.h?(F.x+=v.w,F.w-=v.w):v.w===F.w?(F.y+=v.h,F.h-=v.h):(h.push({x:F.x+v.w,y:F.y,w:F.w-v.w,h:v.h}),F.y+=v.h,F.h-=v.h);break}}return{w:g,h:f,fill:a/(g*f)||0}}Wt(aA,"Anchor");const Kv=1;class yF{constructor(a,{pixelRatio:l,version:h,stretchX:g,stretchY:f,content:v},B){this.paddedRect=a,this.pixelRatio=l,this.stretchX=g,this.stretchY=f,this.content=v,this.version=h,this.padding=B}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.pixelRatio,(this.paddedRect.h-2*this.padding)/this.pixelRatio]}}class YL{constructor(a,l,h){const g={},f={};this.haveRenderCallbacks=[];const v=[];this.addImages(a,g,Kv,v),this.addImages(l,f,2,v);const{w:B,h:F}=ZL(v),P=new ha({width:B||1,height:F||1});for(const b in a){const E=a[b],M=g[b].paddedRect;ha.copy(E.data,P,{x:0,y:0},{x:M.x+Kv,y:M.y+Kv},E.data,h,E.sdf)}for(const b in l){const E=l[b],M=f[b].paddedRect;let T=f[b].padding;const I=M.x+T,R=M.y+T,U=E.data.width,V=E.data.height;T=T>1?T-1:T,ha.copy(E.data,P,{x:0,y:0},{x:I,y:R},E.data,h),ha.copy(E.data,P,{x:0,y:V-T},{x:I,y:R-T},{width:U,height:T},h),ha.copy(E.data,P,{x:0,y:0},{x:I,y:R+V},{width:U,height:T},h),ha.copy(E.data,P,{x:U-T,y:0},{x:I-T,y:R},{width:T,height:V},h),ha.copy(E.data,P,{x:0,y:0},{x:I+U,y:R},{width:T,height:V},h),ha.copy(E.data,P,{x:U-T,y:V-T},{x:I-T,y:R-T},{width:T,height:T},h),ha.copy(E.data,P,{x:0,y:V-T},{x:I+U,y:R-T},{width:T,height:T},h),ha.copy(E.data,P,{x:0,y:0},{x:I+U,y:R+V},{width:T,height:T},h),ha.copy(E.data,P,{x:U-T,y:0},{x:I-T,y:R+V},{width:T,height:T},h)}this.image=P,this.iconPositions=g,this.patternPositions=f}addImages(a,l,h,g){for(const f in a){const v=a[f],B={x:0,y:0,w:v.data.width+2*h,h:v.data.height+2*h};g.push(B),l[f]=new yF(B,v,h),v.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(a,l,h){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(g=>a.hasImage(g,h)),a.dispatchRenderCallbacks(this.haveRenderCallbacks,h);for(const g in a.getUpdatedImages(h))this.patchUpdatedImage(this.iconPositions[g],a.getImage(g,h),l),this.patchUpdatedImage(this.patternPositions[g],a.getImage(g,h),l)}patchUpdatedImage(a,l,h){if(!a||!l||a.version===l.version)return;a.version=l.version;const[g,f]=a.tl;h.update(l.data,{position:{x:g,y:f}})}}Wt(yF,"ImagePosition"),Wt(YL,"ImageAtlas");const Wv=1e20;function JL(A,a,l,h,g,f,v,B,F){for(let P=a;P<a+h;P++)$L(A,l*f+P,f,g,v,B,F);for(let P=l;P<l+g;P++)$L(A,P*f+a,1,h,v,B,F)}function $L(A,a,l,h,g,f,v){f[0]=0,v[0]=-Wv,v[1]=Wv,g[0]=A[a];for(let B=1,F=0,P=0;B<h;B++){g[B]=A[a+B*l];const b=B*B;do{const E=f[F];P=(g[B]-g[E]+b-E*E)/(B-E)/2}while(P<=v[F]&&--F>-1);F++,f[F]=B,v[F]=P,v[F+1]=Wv}for(let B=0,F=0;B<h;B++){for(;v[F+1]<B;)F++;const P=f[F],b=B-P;A[a+B*l]=g[P]+b*b}}const mc=2,_F={none:0,ideographs:1,all:2};class Dm{constructor(a,l,h){this.requestManager=a,this.localGlyphMode=l,this.localFontFamily=h,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(a,l){this.urls[l]=a}getGlyphs(a,l,h){const g=[],f=this.urls[l]||De.GLYPHS_URL;for(const v in a)for(const B of a[v])g.push({stack:v,id:B});ia(g,({stack:v,id:B},F)=>{let P=this.entries[v];P||(P=this.entries[v]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let b=P.glyphs[B];if(b!==void 0)return void F(null,{stack:v,id:B,glyph:b});if(b=this._tinySDF(P,v,B),b)return P.glyphs[B]=b,void F(null,{stack:v,id:B,glyph:b});const E=Math.floor(B/256);if(256*E>65535)return void F(new Error("glyphs > 65535 not supported"));if(P.ranges[E])return void F(null,{stack:v,id:B,glyph:b});let M=P.requests[E];M||(M=P.requests[E]=[],Dm.loadGlyphRange(v,E,f,this.requestManager,(T,I)=>{if(I){P.ascender=I.ascender,P.descender=I.descender;for(const R in I.glyphs)this._doesCharSupportLocalGlyph(+R)||(P.glyphs[+R]=I.glyphs[+R]);P.ranges[E]=!0}for(const R of M)R(T,I);delete P.requests[E]})),M.push((T,I)=>{T?F(T):I&&F(null,{stack:v,id:B,glyph:I.glyphs[B]||null})})},(v,B)=>{if(v)h(v);else if(B){const F={};for(const{stack:P,id:b,glyph:E}of B)F[P]===void 0&&(F[P]={}),F[P].glyphs===void 0&&(F[P].glyphs={}),F[P].glyphs[b]=E&&{id:E.id,bitmap:E.bitmap.clone(),metrics:E.metrics},F[P].ascender=this.entries[P].ascender,F[P].descender=this.entries[P].descender;h(null,F)}})}_doesCharSupportLocalGlyph(a){return this.localGlyphMode!==_F.none&&(this.localGlyphMode===_F.all?!!this.localFontFamily:!!this.localFontFamily&&(rr["CJK Unified Ideographs"](a)||rr["Hangul Syllables"](a)||rr.Hiragana(a)||rr.Katakana(a)||rr["CJK Symbols and Punctuation"](a)||rr["CJK Unified Ideographs Extension A"](a)||rr["CJK Unified Ideographs Extension B"](a)))}_tinySDF(a,l,h){const g=this.localFontFamily;if(!g||!this._doesCharSupportLocalGlyph(h))return;let f=a.tinySDF;if(!f){let R="400";/bold/i.test(l)?R="900":/medium/i.test(l)?R="500":/light/i.test(l)&&(R="200"),f=a.tinySDF=new Dm.TinySDF({fontFamily:g,fontWeight:R,fontSize:24*mc,buffer:3*mc,radius:8*mc}),f.fontWeight=R}if(this.localGlyphs[f.fontWeight][h])return this.localGlyphs[f.fontWeight][h];const v=String.fromCodePoint(h),{data:B,width:F,height:P,glyphWidth:b,glyphHeight:E,glyphLeft:M,glyphTop:T,glyphAdvance:I}=f.draw(v);return this.localGlyphs[f.fontWeight][h]={id:h,bitmap:new Fh({width:F,height:P},B),metrics:{width:b/mc,height:E/mc,left:M/mc,top:T/mc-27,advance:I/mc,localGlyph:!0}}}}Dm.loadGlyphRange=function(A,a,l,h,g){const f=256*a,v=f+255,B=h.transformRequest(h.normalizeGlyphsURL(l).replace("{fontstack}",A).replace("{range}",`${f}-${v}`),Wc.Glyphs);qc(B,(F,P)=>{if(F)g(F);else if(P){const b={},E=function(M){return new Db(M).readFields(OX,{})}(P);for(const M of E.glyphs)b[M.id]=M;g(null,{glyphs:b,ascender:E.ascender,descender:E.descender})}})},Dm.TinySDF=class{constructor({fontSize:A=24,buffer:a=3,radius:l=8,cutoff:h=.25,fontFamily:g="sans-serif",fontWeight:f="normal",fontStyle:v="normal"}={}){this.buffer=a,this.cutoff=h,this.radius=l;const B=this.size=A+4*a,F=this._createCanvas(B),P=this.ctx=F.getContext("2d",{willReadFrequently:!0});P.font=`${v} ${f} ${A}px ${g}`,P.textBaseline="alphabetic",P.textAlign="left",P.fillStyle="black",this.gridOuter=new Float64Array(B*B),this.gridInner=new Float64Array(B*B),this.f=new Float64Array(B),this.z=new Float64Array(B+1),this.v=new Uint16Array(B)}_createCanvas(A){const a=document.createElement("canvas");return a.width=a.height=A,a}draw(A){const{width:a,actualBoundingBoxAscent:l,actualBoundingBoxDescent:h,actualBoundingBoxLeft:g,actualBoundingBoxRight:f}=this.ctx.measureText(A),v=Math.ceil(l),B=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(f-g))),F=Math.min(this.size-this.buffer,v+Math.ceil(h)),P=B+2*this.buffer,b=F+2*this.buffer,E=Math.max(P*b,0),M=new Uint8ClampedArray(E),T={data:M,width:P,height:b,glyphWidth:B,glyphHeight:F,glyphTop:v,glyphLeft:0,glyphAdvance:a};if(B===0||F===0)return T;const{ctx:I,buffer:R,gridInner:U,gridOuter:V}=this;I.clearRect(R,R,B,F),I.fillText(A,R,R+v);const X=I.getImageData(R,R,B,F);V.fill(Wv,0,E),U.fill(0,0,E);for(let Y=0;Y<F;Y++)for(let H=0;H<B;H++){const $=X.data[4*(Y*B+H)+3]/255;if($===0)continue;const te=(Y+R)*P+H+R;if($===1)V[te]=0,U[te]=Wv;else{const le=.5-$;V[te]=le>0?le*le:0,U[te]=le<0?le*le:0}}JL(V,0,0,P,b,P,this.f,this.v,this.z),JL(U,R,R,B,F,P,this.f,this.v,this.z);for(let Y=0;Y<E;Y++){const H=Math.sqrt(V[Y])-Math.sqrt(U[Y]);M[Y]=Math.round(255-255*(H/this.radius+this.cutoff))}return T}};const Mh=Kv;function eO(A,a,l,h){const g=[],f=A.imagePrimary,v=f.pixelRatio,B=f.paddedRect.w-2*Mh,F=f.paddedRect.h-2*Mh,P=A.right-A.left,b=A.bottom-A.top,E=f.stretchX||[[0,B]],M=f.stretchY||[[0,F]],T=(Ce,_e)=>Ce+_e[1]-_e[0],I=E.reduce(T,0),R=M.reduce(T,0),U=B-I,V=F-R;let X=0,Y=I,H=0,$=R,te=0,le=U,me=0,ve=V;if(f.content&&h){const Ce=f.content;X=Rb(E,0,Ce[0]),H=Rb(M,0,Ce[1]),Y=Rb(E,Ce[0],Ce[2]),$=Rb(M,Ce[1],Ce[3]),te=Ce[0]-X,me=Ce[1]-H,le=Ce[2]-Ce[0]-Y,ve=Ce[3]-Ce[1]-$}const de=(Ce,_e,Te,Oe)=>{const Ve=Lb(Ce.stretch-X,Y,P,A.left),je=Ob(Ce.fixed-te,le,Ce.stretch,I),We=Lb(_e.stretch-H,$,b,A.top),et=Ob(_e.fixed-me,ve,_e.stretch,R),qe=Lb(Te.stretch-X,Y,P,A.left),At=Ob(Te.fixed-te,le,Te.stretch,I),xt=Lb(Oe.stretch-H,$,b,A.top),at=Ob(Oe.fixed-me,ve,Oe.stretch,R),Vt=new Dt(Ve,We),Ot=new Dt(qe,We),Ft=new Dt(qe,xt),Bt=new Dt(Ve,xt),or=new Dt(je/v,et/v),Qt=new Dt(At/v,at/v),jt=a*Math.PI/180;if(jt){const zr=Math.sin(jt),Mn=Math.cos(jt),Bn=[Mn,-zr,zr,Mn];Vt._matMult(Bn),Ot._matMult(Bn),Bt._matMult(Bn),Ft._matMult(Bn)}const gr=Ce.stretch+Ce.fixed,Pr=Te.stretch+Te.fixed,Er=_e.stretch+_e.fixed,Tr=Oe.stretch+Oe.fixed,Ur=A.imageSecondary;return{tl:Vt,tr:Ot,bl:Bt,br:Ft,texPrimary:{x:f.paddedRect.x+Mh+gr,y:f.paddedRect.y+Mh+Er,w:Pr-gr,h:Tr-Er},texSecondary:Ur?{x:Ur.paddedRect.x+Mh+gr,y:Ur.paddedRect.y+Mh+Er,w:Pr-gr,h:Tr-Er}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:or,pixelOffsetBR:Qt,minFontScaleX:le/v/P,minFontScaleY:ve/v/b,isSDF:l}};if(h&&(f.stretchX||f.stretchY)){const Ce=tO(E,U,I),_e=tO(M,V,R);for(let Te=0;Te<Ce.length-1;Te++){const Oe=Ce[Te],Ve=Ce[Te+1];for(let je=0;je<_e.length-1;je++)g.push(de(Oe,_e[je],Ve,_e[je+1]))}}else g.push(de({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:B+1},{fixed:0,stretch:F+1}));return g}function Rb(A,a,l){let h=0;for(const g of A)h+=Math.max(a,Math.min(l,g[1]))-Math.max(a,Math.min(l,g[0]));return h}function tO(A,a,l){const h=[{fixed:-Mh,stretch:0}];for(const[g,f]of A){const v=h[h.length-1];h.push({fixed:g-v.stretch,stretch:v.stretch}),h.push({fixed:g-v.stretch,stretch:v.stretch+(f-g)})}return h.push({fixed:a+Mh,stretch:l}),h}function Lb(A,a,l,h){return A/a*l+h}function Ob(A,a,l,h){return A-a*l/h}function GX(A,a,l,h){const g=a+A.positionedLines[h].lineOffset;return h===0?l+g/2:l+(g+(a+A.positionedLines[h-1].lineOffset))/2}function KX(A,a=1,l=!1){let h=1/0,g=1/0,f=-1/0,v=-1/0;const B=A[0];for(let T=0;T<B.length;T++){const I=B[T];(!T||I.x<h)&&(h=I.x),(!T||I.y<g)&&(g=I.y),(!T||I.x>f)&&(f=I.x),(!T||I.y>v)&&(v=I.y)}const F=Math.min(f-h,v-g);let P=F/2;const b=new U0([],WX);if(F===0)return new Dt(h,g);for(let T=h;T<f;T+=F)for(let I=g;I<v;I+=F)b.push(new km(T+P,I+P,P,A));let E=function(T){let I=0,R=0,U=0;const V=T[0];for(let X=0,Y=V.length,H=Y-1;X<Y;H=X++){const $=V[X],te=V[H],le=$.x*te.y-te.x*$.y;R+=($.x+te.x)*le,U+=($.y+te.y)*le,I+=3*le}return new km(R/I,U/I,0,T)}(A),M=b.length;for(;b.length;){const T=b.pop();(T.d>E.d||!E.d)&&(E=T,l&&console.log("found best %d after %d probes",Math.round(1e4*T.d)/1e4,M)),T.max-E.d<=a||(P=T.h/2,b.push(new km(T.p.x-P,T.p.y-P,P,A)),b.push(new km(T.p.x+P,T.p.y-P,P,A)),b.push(new km(T.p.x-P,T.p.y+P,P,A)),b.push(new km(T.p.x+P,T.p.y+P,P,A)),M+=4)}return l&&(console.log(`num probes: ${M}`),console.log(`best distance: ${E.d}`)),E.p}function WX(A,a){return a.max-A.max}class km{constructor(a,l,h,g){this.p=new Dt(a,l),this.h=h,this.d=function(f,v){let B=!1,F=1/0;for(let P=0;P<v.length;P++){const b=v[P];for(let E=0,M=b.length,T=M-1;E<M;T=E++){const I=b[E],R=b[T];I.y>f.y!=R.y>f.y&&f.x<(R.x-I.x)*(f.y-I.y)/(R.y-I.y)+I.x&&(B=!B),F=Math.min(F,Cn(f,I,R))}}return(B?1:-1)*Math.sqrt(F)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}}const xF=Number.POSITIVE_INFINITY,qX=Math.sqrt(2);function rO(A,[a,l]){let h=0,g=0;if(l===xF){a<0&&(a=0);const f=a/qX;switch(A){case"top-right":case"top-left":g=f-7;break;case"bottom-right":case"bottom-left":g=7-f;break;case"bottom":g=7-a;break;case"top":g=a-7}switch(A){case"top-right":case"bottom-right":h=-f;break;case"top-left":case"bottom-left":h=f;break;case"left":h=a;break;case"right":h=-a}}else{switch(a=Math.abs(a),l=Math.abs(l),A){case"top-right":case"top-left":case"top":g=l-7;break;case"bottom-right":case"bottom-left":case"bottom":g=7-l}switch(A){case"top-right":case"bottom-right":case"right":h=-a;break;case"top-left":case"bottom-left":case"left":h=a}}return[h,g]}function bF(A){switch(A){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function XX(A,a,l,h,g,f,v,B,F,P,b,E,M,T,I){let R=f.textMaxSize.evaluate(a,{},E);R===void 0&&(R=v);const U=A.layers[0].layout,V=U.get("icon-offset").evaluate(a,{},E),X=iO(l.horizontal)||l.vertical,Y=M.name==="globe",H=Lo,$=v/H,te=A.tilePixelRatio*R/H,le=(Ve=A.overscaling,A.zoom>18&&Ve>2&&(Ve>>=1),Math.max(Ut/(512*Ve),1)*U.get("symbol-spacing")),me=U.get("text-padding")*A.tilePixelRatio,ve=U.get("icon-padding")*A.tilePixelRatio,de=Br(U.get("text-max-angle")),Ce=U.get("text-rotation-alignment")==="map"&&U.get("symbol-placement")!=="point",_e=U.get("icon-rotation-alignment")==="map"&&U.get("symbol-placement")!=="point",Te=U.get("symbol-placement"),Oe=le/2;var Ve;const je=U.get("icon-text-fit").evaluate(a,{},E),We=U.get("icon-text-fit-padding").evaluate(a,{},E),et=je!=="none";let qe;A.hasAnyIconTextFit===!1&&et&&(A.hasAnyIconTextFit=!0),h&&et&&(A.allowVerticalPlacement&&l.vertical&&(qe=HL(h,l.vertical,je,We,V,$)),X&&(h=HL(h,X,je,We,V,$)));const At=(xt,at,Vt)=>{if(at.x<0||at.x>=Ut||at.y<0||at.y>=Ut)return;let Ot=null;if(Y){const{x:Ft,y:Bt,z:or}=M.projectTilePoint(at.x,at.y,Vt);Ot={anchor:new aA(Ft,Bt,or,0,void 0),up:M.upVector(Vt,at.x,at.y)}}(function(Ft,Bt,or,Qt,jt,gr,Pr,Er,Tr,Ur,zr,Mn,Bn,_r,vn,bn,qn,Fi,zi,Ii,mi,_o,ji,Oo,Nn,os,_c){const Cl=Ft.addToLineVertexArray(Bt,Qt);let Sl,Mf,Lh,Pf,Ay,CU,SU,EU=0,TU=0,FU=0,IU=0,YF=-1,JF=-1;const uu={};let MU=qo("");const Df=or?or.anchor:Bt,$F=Tr.layout.get("icon-text-fit").evaluate(mi,{},Nn)!=="none";let eI=0,tI=0;if(Tr._unevaluatedLayout.getValue("text-radial-offset")===void 0?[eI,tI]=Tr.layout.get("text-offset").evaluate(mi,{},Nn).map(xs=>xs*Lo):(eI=Tr.layout.get("text-radial-offset").evaluate(mi,{},Nn)*Lo,tI=xF),Ft.allowVerticalPlacement&&jt.vertical){const xs=jt.vertical;if(vn)CU=wF(xs),Er&&(SU=wF(Er));else{const bs=Tr.layout.get("text-rotate").evaluate(mi,{},Nn)+90;Lh=Ub(Ur,Df,Bt,zr,Mn,Bn,xs,_r,bs,bn),Er&&(Pf=Ub(Ur,Df,Bt,zr,Mn,Bn,Er,Fi,bs))}}if(gr){const xs=Tr.layout.get("icon-rotate").evaluate(mi,{},Nn),bs=eO(gr,xs,ji,$F),Vm=Er?eO(Er,xs,ji,$F):void 0;Mf=Ub(Ur,Df,Bt,zr,Mn,Bn,gr,Fi,xs),EU=4*bs.length;const PU=Ft.iconSizeData;let kf=null;PU.kind==="source"?(kf=[pc*Tr.layout.get("icon-size").evaluate(mi,{},Nn)],kf[0]>Ph&&tn(`${Ft.layerIds[0]}: Value for "icon-size" is >= ${qv}. Reduce your "icon-size".`)):PU.kind==="composite"&&(kf=[pc*_o.compositeIconSizes[0].evaluate(mi,{},Nn),pc*_o.compositeIconSizes[1].evaluate(mi,{},Nn)],(kf[0]>Ph||kf[1]>Ph)&&tn(`${Ft.layerIds[0]}: Value for "icon-size" is >= ${qv}. Reduce your "icon-size".`)),Ft.addSymbols(Ft.icon,bs,kf,Ii,zi,mi,!1,or,Bt,Cl.lineStartIndex,Cl.lineLength,-1,Oo,Nn,os,_c),YF=Ft.icon.placedSymbolArray.length-1,Vm&&(TU=4*Vm.length,Ft.addSymbols(Ft.icon,Vm,kf,Ii,zi,mi,Ks.vertical,or,Bt,Cl.lineStartIndex,Cl.lineLength,-1,Oo,Nn,os,_c),JF=Ft.icon.placedSymbolArray.length-1)}for(const xs in jt.horizontal){const bs=jt.horizontal[xs];Sl||(MU=qo(bs.text),vn?Ay=wF(bs):Sl=Ub(Ur,Df,Bt,zr,Mn,Bn,bs,_r,Tr.layout.get("text-rotate").evaluate(mi,{},Nn),bn));const Vm=bs.positionedLines.length===1;if(FU+=nO(Ft,or,Bt,bs,Pr,Tr,vn,mi,bn,Cl,jt.vertical?Ks.horizontal:Ks.horizontalOnly,Vm?Object.keys(jt.horizontal):[xs],uu,YF,_o,Oo,Nn,os),Vm)break}jt.vertical&&(IU+=nO(Ft,or,Bt,jt.vertical,Pr,Tr,vn,mi,bn,Cl,Ks.vertical,["vertical"],uu,JF,_o,Oo,Nn,os));let Oh=-1;const rI=(xs,bs)=>xs?Math.max(xs,bs):bs;Oh=rI(Ay,Oh),Oh=rI(CU,Oh),Oh=rI(SU,Oh);const uY=Oh>-1?1:0;Ft.glyphOffsetArray.length>=65535&&tn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),mi.sortKey!==void 0&&Ft.addToSortKeyRanges(Ft.symbolInstances.length,mi.sortKey),Ft.symbolInstances.emplaceBack(Bt.x,Bt.y,Df.x,Df.y,Df.z,uu.right>=0?uu.right:-1,uu.center>=0?uu.center:-1,uu.left>=0?uu.left:-1,uu.vertical>=0?uu.vertical:-1,YF,JF,MU,Sl!==void 0?Sl:Ft.collisionBoxArray.length,Sl!==void 0?Sl+1:Ft.collisionBoxArray.length,Lh!==void 0?Lh:Ft.collisionBoxArray.length,Lh!==void 0?Lh+1:Ft.collisionBoxArray.length,Mf!==void 0?Mf:Ft.collisionBoxArray.length,Mf!==void 0?Mf+1:Ft.collisionBoxArray.length,Pf||Ft.collisionBoxArray.length,Pf?Pf+1:Ft.collisionBoxArray.length,zr,FU,IU,EU,TU,uY,0,eI,tI,Oh,0,$F?1:0)})(A,at,Ot,xt,l,h,g,qe,A.layers[0],A.collisionBoxArray,a.index,a.sourceLayerIndex,A.index,me,Ce,F,0,ve,_e,V,a,f,P,b,E,T,I)};if(Te==="line")for(const xt of XL(a.geometry,0,0,Ut,Ut)){const at=jX(xt,le,de,l.vertical||X,h,H,te,A.overscaling,Ut);for(const Vt of at)X&&ZX(A,X.text,Oe,Vt)||At(xt,Vt,E)}else if(Te==="line-center"){for(const xt of a.geometry)if(xt.length>1){const at=HX(xt,de,l.vertical||X,h,H,te);at&&At(xt,at,E)}}else if(a.type==="Polygon")for(const xt of Cb(a.geometry,0)){const at=KX(xt,16);At(xt[0],new aA(at.x,at.y,0,0,void 0),E)}else if(a.type==="LineString")for(const xt of a.geometry)At(xt,new aA(xt[0].x,xt[0].y,0,0,void 0),E);else if(a.type==="Point")for(const xt of a.geometry)for(const at of xt)At([at],new aA(at.x,at.y,0,0,void 0),E)}const qv=255,Ph=qv*pc;function nO(A,a,l,h,g,f,v,B,F,P,b,E,M,T,I,R,U,V){const X=function($,te,le,me,ve,de,Ce,_e){const Te=[];if(te.positionedLines.length===0)return Te;const Oe=me.layout.get("text-rotate").evaluate(de,{})*Math.PI/180,Ve=function(At){const xt=At[0],at=At[1],Vt=xt*at;return Vt>0?[xt,-at]:Vt<0?[-xt,at]:xt===0?[at,xt]:[at,-xt]}(le);let je=Math.abs(te.top-te.bottom);for(const At of te.positionedLines)je-=At.lineOffset;const We=te.positionedLines.length,et=je/We;let qe=te.top-le[1];for(let At=0;At<We;++At){const xt=te.positionedLines[At];qe=GX(te,et,qe,At);for(const at of xt.positionedGlyphs){if(!at.rect)continue;const Vt=at.rect||{};let Ot=OL+1,Ft=!0,Bt=1,or=0;if(at.imageName){const Ii=Ce[at.imageName];if(!Ii)continue;if(Ii.sdf){tn("SDF images are not supported in formatted text and will be ignored.");continue}Ft=!1,Bt=Ii.pixelRatio,Ot=Kv/Bt}const Qt=(ve||_e)&&at.vertical,jt=at.metrics.advance*at.scale/2,gr=at.metrics,Pr=at.rect;if(Pr===null)continue;_e&&te.verticalizable&&(or=at.imageName?jt-at.metrics.width*at.scale/2:0);const Er=ve?[at.x+jt,at.y]:[0,0];let Tr=[0,0],Ur=[0,0],zr=!1;ve||(Qt?(Ur=[at.x+jt+Ve[0],at.y+Ve[1]-or],zr=!0):Tr=[at.x+jt+le[0],at.y+le[1]-or]);const Mn=Pr.w*at.scale/(Bt*(at.localGlyph?mc:1)),Bn=Pr.h*at.scale/(Bt*(at.localGlyph?mc:1));let _r,vn,bn,qn;if(Qt){const Ii=at.y-qe,mi=new Dt(-jt,jt-Ii),_o=-Math.PI/2,ji=new Dt(...Ur);_r=new Dt(-jt+Tr[0],Tr[1]),_r._rotateAround(_o,mi)._add(ji),_r.x+=-Ii+jt,_r.y-=(gr.left-Ot)*at.scale;const Oo=at.imageName?gr.advance*at.scale:Lo*at.scale,Nn=String.fromCodePoint(at.glyph);kX(Nn)?_r.x+=(1-Ot)*at.scale:RX(Nn)?_r.x+=Oo-gr.height*at.scale+(-Ot-1)*at.scale:_r.x+=at.imageName||gr.width+2*Ot===Pr.w&&gr.height+2*Ot===Pr.h?(Oo-Bn)/2:(Oo-(gr.height+2*Ot)*at.scale)/2,vn=new Dt(_r.x,_r.y-Mn),bn=new Dt(_r.x+Bn,_r.y),qn=new Dt(_r.x+Bn,_r.y-Mn)}else{const Ii=(gr.left-Ot)*at.scale-jt+Tr[0],mi=(-gr.top-Ot)*at.scale+Tr[1],_o=Ii+Mn,ji=mi+Bn;_r=new Dt(Ii,mi),vn=new Dt(_o,mi),bn=new Dt(Ii,ji),qn=new Dt(_o,ji)}if(Oe){let Ii;Ii=ve?new Dt(0,0):zr?new Dt(Ve[0],Ve[1]):new Dt(le[0],le[1]),_r._rotateAround(Oe,Ii),vn._rotateAround(Oe,Ii),bn._rotateAround(Oe,Ii),qn._rotateAround(Oe,Ii)}const Fi=new Dt(0,0),zi=new Dt(0,0);Te.push({tl:_r,tr:vn,bl:bn,br:qn,texPrimary:Vt,texSecondary:void 0,writingMode:te.writingMode,glyphOffset:Er,sectionIndex:at.sectionIndex,isSDF:Ft,pixelOffsetTL:Fi,pixelOffsetBR:zi,minFontScaleX:0,minFontScaleY:0})}}return Te}(0,h,F,f,v,B,g,A.allowVerticalPlacement),Y=A.textSizeData;let H=null;Y.kind==="source"?(H=[pc*f.layout.get("text-size").evaluate(B,{},U)],H[0]>Ph&&tn(`${A.layerIds[0]}: Value for "text-size" is >= ${qv}. Reduce your "text-size".`)):Y.kind==="composite"&&(H=[pc*I.compositeTextSizes[0].evaluate(B,{},U),pc*I.compositeTextSizes[1].evaluate(B,{},U)],(H[0]>Ph||H[1]>Ph)&&tn(`${A.layerIds[0]}: Value for "text-size" is >= ${qv}. Reduce your "text-size".`)),A.addSymbols(A.text,X,H,F,v,B,b,a,l,P.lineStartIndex,P.lineLength,T,R,U,V,!1);for(const $ of E)M[$]=A.text.placedSymbolArray.length-1;return 4*X.length}function iO(A){for(const a in A)return A[a];return null}function Ub(A,a,l,h,g,f,v,B,F,P){let b=v.top,E=v.bottom,M=v.left,T=v.right;const I=v.collisionPadding;if(I&&(M-=I[0],b-=I[1],T+=I[2],E+=I[3]),F){const R=new Dt(M,b),U=new Dt(T,b),V=new Dt(M,E),X=new Dt(T,E),Y=Br(F);let H=new Dt(0,0);P&&(H=new Dt(P[0],P[1])),R._rotateAround(Y,H),U._rotateAround(Y,H),V._rotateAround(Y,H),X._rotateAround(Y,H),M=Math.min(R.x,U.x,V.x,X.x),T=Math.max(R.x,U.x,V.x,X.x),b=Math.min(R.y,U.y,V.y,X.y),E=Math.max(R.y,U.y,V.y,X.y)}return A.emplaceBack(a.x,a.y,a.z,l.x,l.y,M,b,T,E,B,h,g,f),A.length-1}function wF(A){A.collisionPadding&&(A.top-=A.collisionPadding[1],A.bottom+=A.collisionPadding[3]);const a=A.bottom-A.top;return a>0?Math.max(10,a):null}function ZX(A,a,l,h){const g=A.compareText;if(a in g){const f=g[a];for(let v=f.length-1;v>=0;v--)if(h.dist(f[v])<l)return!0}else g[a]=[];return g[a].push(h),!1}function oO(A,a){const l=A.fovAboveCenter,h=A.elevation?A.elevation.getMinElevationBelowMSL()*a:0,g=(A._camera.position[2]*A.worldSize-h)/Math.cos(A._pitch),f=Math.sin(l)*g/Math.sin(Math.max(Math.PI/2-A._pitch-l,.01));let v=Math.sin(A._pitch)*f+g;const B=g*(1/A._horizonShift);return A.elevation&&A.elevation.exaggeration()!==0||(v*=1+Math.max(A.zoom-17,0)),Math.min(1.01*v,B)}function Xv(A,a){if(!a.isReprojectedInTileSpace)return{scale:1<<A.z,x:A.x,y:A.y,x2:A.x+1,y2:A.y+1,projection:a};const l=Math.pow(2,-A.z),h=A.x*l,g=(A.x+1)*l,f=A.y*l,v=(A.y+1)*l,B=we(h),F=we(g),P=be(f),b=be(v),E=a.project(B,P),M=a.project(F,P),T=a.project(F,b),I=a.project(B,b);let R=Math.min(E.x,M.x,T.x,I.x),U=Math.min(E.y,M.y,T.y,I.y),V=Math.max(E.x,M.x,T.x,I.x),X=Math.max(E.y,M.y,T.y,I.y);const Y=l/16;function H(te,le,me,ve,de,Ce){const _e=(me+de)/2,Te=(ve+Ce)/2,Oe=a.project(we(_e),be(Te)),Ve=Math.max(0,R-Oe.x,U-Oe.y,Oe.x-V,Oe.y-X);R=Math.min(R,Oe.x),V=Math.max(V,Oe.x),U=Math.min(U,Oe.y),X=Math.max(X,Oe.y),Ve>Y&&(H(te,Oe,me,ve,_e,Te),H(Oe,le,_e,Te,de,Ce))}H(E,M,h,f,g,f),H(M,T,g,f,g,v),H(T,I,g,v,h,v),H(I,E,h,v,h,f),R-=Y,U-=Y,V+=Y,X+=Y;const $=1/Math.max(V-R,X-U);return{scale:$,x:R*$,y:U*$,x2:V*$,y2:X*$,projection:a}}function aO(A,{x:a,y:l},h=0){return new Dt(((a-h)*A.scale-A.x)*Ut,(l*A.scale-A.y)*Ut)}const YX=ke.mat4.identity(new Float32Array(16));class Dh{constructor(a){this.spec=a,this.name=a.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(a,l){return{x:0,y:0,z:0}}unproject(a,l){return new Z(0,0)}projectTilePoint(a,l,h){return{x:a,y:l,z:0}}locationPoint(a,l,h=!0){return a._coordinatePoint(a.locationCoordinate(l),h)}pixelsPerMeter(a,l){return pe(1,a)*l}pixelSpaceConversion(a,l,h){return 1}farthestPixelDistance(a){return oO(a,a.pixelsPerMeter)}pointCoordinate(a,l,h,g){const f=a.horizonLineFromTop(!1),v=new Dt(l,Math.max(f,h));return a.rayIntersectionCoordinate(a.pointRayIntersection(v,g))}pointCoordinate3D(a,l,h){const g=new Dt(l,h);if(a.elevation)return a.elevation.pointCoordinate(g);{const f=this.pointCoordinate(a,g.x,g.y,0);return[f.x,f.y,f.z]}}isPointAboveHorizon(a,l){if(a.elevation&&a.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(a,l.x,l.y);const h=a.horizonLineFromTop();return l.y<h}createInversionMatrix(a,l){return YX}createTileMatrix(a,l,h){let g,f,v;const B=h.canonical,F=ke.mat4.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const P=Xv(B,this);g=1,f=P.x+h.wrap*P.scale,v=P.y,ke.mat4.scale(F,F,[g/P.scale,g/P.scale,a.pixelsPerMeter/l])}else g=l/a.zoomScale(B.z),f=(B.x+Math.pow(2,B.z)*h.wrap)*g,v=B.y*g;return ke.mat4.translate(F,F,[f,v,0]),ke.mat4.scale(F,F,[g/Ut,g/Ut,1]),F}upVector(a,l,h){return[0,0,1]}upVectorScale(a,l,h){return{metersToTile:1}}}class JX extends Dh{constructor(a){super(a),this.range=[4,7],this.center=a.center||[-96,37.5];const[l,h]=this.parallels=a.parallels||[29.5,45.5],g=Math.sin(Br(l));this.n=(g+Math.sin(Br(h)))/2,this.c=1+g*(2*this.n-g),this.r0=Math.sqrt(this.c)/this.n}project(a,l){const{n:h,c:g,r0:f}=this,v=Br(a-this.center[0]),B=Br(l),F=Math.sqrt(g-2*h*Math.sin(B))/h;return{x:F*Math.sin(v*h),y:F*Math.cos(v*h)-f,z:0}}unproject(a,l){const{n:h,c:g,r0:f}=this,v=f+l;let B=Math.atan2(a,Math.abs(v))*Math.sign(v);v*h<0&&(B-=Math.PI*Math.sign(a)*Math.sign(v));const F=Br(this.center[0])*h;B=Ta(B,-Math.PI-F,Math.PI-F);const P=xr(en(B/h)+this.center[0],-180,180),b=Math.asin(xr((g-(a*a+v*v)*h*h)/(2*h),-1,1)),E=xr(en(b),-Ee,Ee);return new Z(P,E)}}const Zv=1.340264,Yv=-.081106,Jv=893e-6,$v=.003796,zb=Math.sqrt(3)/2;class $X extends Dh{project(a,l){l=l/180*Math.PI,a=a/180*Math.PI;const h=Math.asin(zb*Math.sin(l)),g=h*h,f=g*g*g;return{x:.5*(a*Math.cos(h)/(zb*(Zv+3*Yv*g+f*(7*Jv+9*$v*g)))/Math.PI+.5),y:1-.5*(h*(Zv+Yv*g+f*(Jv+$v*g))/Math.PI+1),z:0}}unproject(a,l){a=(2*a-.5)*Math.PI;let h=l=(2*(1-l)-1)*Math.PI,g=h*h,f=g*g*g;for(let b,E,M,T=0;T<12&&(E=h*(Zv+Yv*g+f*(Jv+$v*g))-l,M=Zv+3*Yv*g+f*(7*Jv+9*$v*g),b=E/M,h=xr(h-b,-Math.PI/3,Math.PI/3),g=h*h,f=g*g*g,!(Math.abs(b)<1e-12));++T);const v=zb*a*(Zv+3*Yv*g+f*(7*Jv+9*$v*g))/Math.cos(h),B=Math.asin(Math.sin(h)/zb),F=xr(180*v/Math.PI,-180,180),P=xr(180*B/Math.PI,-Ee,Ee);return new Z(F,P)}}class eZ extends Dh{constructor(a){super(a),this.wrap=!0,this.supportsWorldCopies=!0}project(a,l){return{x:.5+a/360,y:.5-l/360,z:0}}unproject(a,l){const h=360*(a-.5),g=xr(360*(.5-l),-Ee,Ee);return new Z(h,g)}}const Rm=Math.PI/2;function Qb(A){return Math.tan((Rm+A)/2)}class tZ extends Dh{constructor(a){super(a),this.center=a.center||[0,30];const[l,h]=this.parallels=a.parallels||[30,30];let g=Br(l),f=Br(h);this.southernCenter=g+f<0,this.southernCenter&&(g=-g,f=-f);const v=Math.cos(g),B=Qb(g);this.n=g===f?Math.sin(g):Math.log(v/Math.cos(f))/Math.log(Qb(f)/B),this.f=v*Math.pow(Qb(g),this.n)/this.n}project(a,l){l=Br(l),this.southernCenter&&(l=-l),a=Br(a-this.center[0]);const h=1e-6,{n:g,f}=this;f>0?l<-Rm+h&&(l=-Rm+h):l>Rm-h&&(l=Rm-h);const v=f/Math.pow(Qb(l),g);let B=v*Math.sin(g*a),F=f-v*Math.cos(g*a);return B=.5*(B/Math.PI+.5),F=.5*(F/Math.PI+.5),{x:B,y:this.southernCenter?F:1-F,z:0}}unproject(a,l){a=(2*a-.5)*Math.PI,this.southernCenter&&(l=1-l),l=(2*(1-l)-.5)*Math.PI;const{n:h,f:g}=this,f=g-l,v=Math.sign(f),B=Math.sign(h)*Math.sqrt(a*a+f*f);let F=Math.atan2(a,Math.abs(f))*v;f*h<0&&(F-=Math.PI*Math.sign(a)*v);const P=xr(en(F/h)+this.center[0],-180,180),b=xr(en(2*Math.atan(Math.pow(g/B,1/h))-Rm),-Ee,Ee);return new Z(P,this.southernCenter?-b:b)}}class sO extends Dh{constructor(a){super(a),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(a,l){return{x:ge(a),y:ye(l),z:0}}unproject(a,l){const h=we(a),g=be(l);return new Z(h,g)}}const lO=Br(Ee);class rZ extends Dh{project(a,l){const h=(l=Br(l))*l,g=h*h;return{x:.5*((a=Br(a))*(.8707-.131979*h+g*(g*(.003971*h-.001529*g)-.013791))/Math.PI+.5),y:1-.5*(l*(1.007226+h*(.015085+g*(.028874*h-.044475-.005916*g)))/Math.PI+1),z:0}}unproject(a,l){a=(2*a-.5)*Math.PI;let h=l=(2*(1-l)-1)*Math.PI,g=25,f=0,v=h*h;do{v=h*h;const P=v*v;f=(h*(1.007226+v*(.015085+P*(.028874*v-.044475-.005916*P)))-l)/(1.007226+v*(.045255+P*(.259866*v-.311325-.005916*11*P))),h=xr(h-f,-lO,lO)}while(Math.abs(f)>1e-6&&--g>0);v=h*h;const B=xr(en(a/(.8707+v*(v*(v*v*v*(.003971-.001529*v)-.013791)-.131979))),-180,180),F=en(h);return new Z(B,F)}}const cO=Br(Ee);class nZ extends Dh{project(a,l){l=Br(l),a=Br(a);const h=Math.cos(l),g=2/Math.PI,f=Math.acos(h*Math.cos(a/2)),v=Math.sin(f)/f,B=.5*(a*g+2*h*Math.sin(a/2)/v)||0,F=.5*(l+Math.sin(l)/v)||0;return{x:.5*(B/Math.PI+.5),y:1-.5*(F/Math.PI+1),z:0}}unproject(a,l){let h=a=(2*a-.5)*Math.PI,g=l=(2*(1-l)-1)*Math.PI,f=25;const v=1e-6;let B=0,F=0;do{const P=Math.cos(g),b=Math.sin(g),E=2*b*P,M=b*b,T=P*P,I=Math.cos(h/2),R=Math.sin(h/2),U=2*I*R,V=R*R,X=1-T*I*I,Y=X?1/X:0,H=X?Math.acos(P*I)*Math.sqrt(1/X):0,$=.5*(2*H*P*R+2*h/Math.PI)-a,te=.5*(H*b+g)-l,le=.5*Y*(T*V+H*P*I*M)+1/Math.PI,me=Y*(U*E/4-H*b*R),ve=.125*Y*(E*R-H*b*T*U),de=.5*Y*(M*I+H*V*P)+.5,Ce=me*ve-de*le;B=(te*me-$*de)/Ce,F=($*ve-te*le)/Ce,h=xr(h-B,-Math.PI,Math.PI),g=xr(g-F,-cO,cO)}while((Math.abs(B)>v||Math.abs(F)>v)&&--f>0);return new Z(en(h),en(g))}}class uO extends Dh{constructor(a){super(a),this.center=a.center||[0,0],this.parallels=a.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Br(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(a,l){const{scale:h,cosPhi:g}=this;return{x:Br(a)*g*h+.5,y:-Math.sin(Br(l))/g*h+.5,z:0}}unproject(a,l){const{scale:h,cosPhi:g}=this,f=-(l-.5)/h,v=xr(en((a-.5)/h)/g,-180,180),B=Math.asin(xr(f*g,-1,1)),F=xr(en(B),-Ee,Ee);return new Z(v,F)}}class iZ extends sO{constructor(a){super(a),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(a,l,h){const g=Dv(a,l,h),f=xb(lu(h));return ke.vec3.transformMat4(g,g,f),{x:g[0],y:g[1],z:g[2]}}locationPoint(a,l){const h=N(l.lat,l.lng),g=ke.vec3.normalize([],h),f=a.elevation?a.elevation.getAtPointOrZero(a.locationCoordinate(l),a._centerAltitude):a._centerAltitude,v=pe(1,0)*Ut*f;ke.vec3.scaleAndAdd(h,h,g,v);const B=ke.mat4.identity(new Float64Array(16));return ke.mat4.multiply(B,a.pixelMatrix,a.globeMatrix),ke.vec3.transformMat4(h,h,B),new Dt(h[0],h[1])}pixelsPerMeter(a,l){return pe(1,0)*l}pixelSpaceConversion(a,l,h){const g=pe(1,a)*l,f=cr(pe(1,45)*l,g,h);return this.pixelsPerMeter(a,l)/f}createTileMatrix(a,l,h){const g=WT(lu(h.canonical));return ke.mat4.multiply(new Float64Array(16),a.globeMatrix,g)}createInversionMatrix(a,l){const{center:h}=a,g=xb(lu(l));return ke.mat4.rotateY(g,g,Br(h.lng)),ke.mat4.rotateX(g,g,Br(h.lat)),ke.mat4.scale(g,g,[a._pixelsPerMercatorPixel,a._pixelsPerMercatorPixel,1]),Float32Array.from(g)}pointCoordinate(a,l,h,g){return vb(a,l,h,!0)||new Xe(0,0)}pointCoordinate3D(a,l,h){const g=this.pointCoordinate(a,l,h,0);return[g.x,g.y,g.z]}isPointAboveHorizon(a,l){return!vb(a,l.x,l.y,!1)}farthestPixelDistance(a){const l=function(g,f){const v=g.cameraToCenterDistance,B=g._centerAltitude*f,F=g._camera,P=g._camera.forward(),b=ke.vec3.add([],ke.vec3.scale([],P,-v),[0,0,B]),E=g.worldSize/(2*Math.PI),M=[0,0,-E],T=g.width/g.height,I=Math.tan(g.fovAboveCenter),R=ke.vec3.scale([],F.up(),I),U=ke.vec3.scale([],F.right(),I*T),V=ke.vec3.normalize([],ke.vec3.add([],ke.vec3.add([],P,R),U)),X=[];let Y;if(new fc(b,V).closestPointOnSphere(M,E,X)){const H=ke.vec3.add([],X,M),$=ke.vec3.sub([],H,b);Y=Math.cos(g.fovAboveCenter)*ke.vec3.length($)}else{const H=ke.vec3.sub([],b,M),$=ke.vec3.sub([],M,b);ke.vec3.normalize($,$);const te=ke.vec3.length(H)-E;Y=Math.sqrt(te*(te+2*E));const le=Math.acos(Y/(E+te))-Math.acos(ke.vec3.dot(P,$));Y*=Math.cos(le)}return 1.01*Y}(a,this.pixelsPerMeter(a.center.lat,a.worldSize)),h=Th(a.zoom);if(h>0){const g=oO(a,pe(1,a.center.lat)*a.worldSize),f=a.worldSize/(2*Math.PI),v=Math.max(a.width,a.height)/a.worldSize*Math.PI;return cr(l,g+f*(1-Math.cos(v)),Math.pow(h,10))}return l}upVector(a,l,h){return Dv(l,h,a,1)}upVectorScale(a){return{metersToTile:iA(_b(lu(a)))}}}function AO(A){const a=A.parallels,l=!!a&&Math.abs(a[0]+a[1])<.01;switch(A.name){case"mercator":return new sO(A);case"equirectangular":return new eZ(A);case"naturalEarth":return new rZ(A);case"equalEarth":return new $X(A);case"winkelTripel":return new nZ(A);case"albers":return l?new uO(A):new JX(A);case"lambertConformalConic":return l?new uO(A):new tZ(A);case"globe":return new iZ(A)}throw new Error(`Invalid projection name: ${A.name}`)}const oZ=Im.VectorTileFeature.types,aZ=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Nb(A,a,l,h,g,f,v,B,F,P,b,E,M){const T=B?Math.min(Ph,Math.round(B[0])):0,I=B?Math.min(Ph,Math.round(B[1])):0;A.emplaceBack(a,l,Math.round(32*h),Math.round(32*g),f,v,(T<<1)+(F?1:0),I,16*P,16*b,256*E,256*M)}function Vb(A,a,l){A.emplaceBack(a,l)}function Hb(A,a,l,h,g,f,v){A.emplaceBack(a,l,h,g,f,v)}function jb(A,a,l,h,g){A.emplaceBack(a,l,h,g),A.emplaceBack(a,l,h,g),A.emplaceBack(a,l,h,g),A.emplaceBack(a,l,h,g)}function sZ(A){for(const a of A.sections)if(FT(a.text))return!0;return!1}class BF{constructor(a){this.layoutVertexArray=new yv,this.indexArray=new Fo,this.programConfigurations=a,this.segments=new bi,this.dynamicLayoutVertexArray=new uc,this.opacityVertexArray=new xv,this.placedSymbolArray=new Sv,this.iconTransitioningVertexArray=new ou,this.globeExtVertexArray=new _v,this.zOffsetVertexArray=new bh}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(a,l,h,g,f){this.isEmpty()||(h&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,BX.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,SX.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,aZ,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=a.createVertexBuffer(this.iconTransitioningVertexArray,TX.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=a.createVertexBuffer(this.globeExtVertexArray,CX.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||f)&&(this.zOffsetVertexBuffer=a.createVertexBuffer(this.zOffsetVertexArray,EX.members,!0)),this.opacityVertexBuffer.itemSize=1),(h||g)&&this.programConfigurations.upload(a))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}Wt(BF,"SymbolBuffers");class CF{constructor(a,l,h){this.layoutVertexArray=new a,this.layoutAttributes=l,this.indexArray=new h,this.segments=new bi,this.collisionVertexArray=new xh,this.collisionVertexArrayExt=new uc}upload(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,FX.members,!0),this.collisionVertexBufferExt=a.createVertexBuffer(this.collisionVertexArrayExt,IX.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Wt(CF,"CollisionBuffers");class Gb{constructor(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.lut=a.lut,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(v=>v.fqid),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ke.mat4.identity([]),this.placementViewportMatrix=ke.mat4.identity([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=dF(this.zoom,l["text-size"]),this.iconSizeData=dF(this.zoom,l["icon-size"]);const h=this.layers[0].layout,g=h.get("symbol-sort-key"),f=h.get("symbol-z-order");this.canOverlap=h.get("text-allow-overlap")||h.get("icon-allow-overlap")||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=f!=="viewport-y"&&g.constantOr(1)!==void 0,this.sortFeaturesByY=(f==="viewport-y"||f==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=h.get("text-writing-mode").map(v=>Ks[v]),this.stateDependentLayerIds=this.layers.filter(v=>v.isStateDependent()).map(v=>v.id),this.sourceID=a.sourceID,this.projection=a.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=h.get("symbol-z-elevate"),this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new BF(new au(this.layers,{zoom:this.zoom,lut:this.lut},a=>a.startsWith("text")||a.startsWith("symbol"))),this.icon=new BF(new au(this.layers,{zoom:this.zoom,lut:this.lut},a=>a.startsWith("icon")||a.startsWith("symbol"))),this.glyphOffsetArray=new cb,this.lineVertexArray=new Cm,this.symbolInstances=new Ev}calculateGlyphDependencies(a,l,h,g,f){for(let v=0;v<a.length;v++){const B=a.codePointAt(v);if(B===void 0)break;if(l[B]=!0,g&&f&&B<=65535){const F=jv[a.charAt(v)];F&&(l[F.charCodeAt(0)]=!0)}}}updateFootprints(a,l){}updateReplacement(a,l){if(l.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=l.updateTime;const h=l.getReplacementRegionsForTile(a.toUnwrapped(),!0);return!sF(this.activeReplacements,h)&&(this.activeReplacements=h,!0)}populate(a,l,h,g){const f=this.layers[0],v=f.layout,B=this.projection.name==="globe",F=v.get("text-font"),P=v.get("text-field"),b=v.get("icon-image"),E=(P.value.kind!=="constant"||P.value.value instanceof $n&&!P.value.value.isEmpty()||P.value.value.toString().length>0)&&(F.value.kind!=="constant"||F.value.value.length>0),M=b.value.kind!=="constant"||!!b.value.value||Object.keys(b.parameters).length>0,T=v.get("symbol-sort-key");if(this.features=[],!E&&!M)return;const I=l.iconDependencies,R=l.glyphDependencies,U=l.availableImages,V=new xi(this.zoom);for(const{feature:X,id:Y,index:H,sourceLayerIndex:$}of a){const te=f._featureFilter.needGeometry,le=Mt(X,te);if(!f._featureFilter.filter(V,le,h))continue;if(te||(le.geometry=Tt(X,h,g)),B&&X.type!==1&&h.z<=5){const Ce=le.geometry,_e=.98078528056,Te=(Oe,Ve)=>{const je=Dv(Oe.x,Oe.y,h,1),We=Dv(Ve.x,Ve.y,h,1);return ke.vec3.dot(je,We)<_e};for(let Oe=0;Oe<Ce.length;Oe++)Ce[Oe]=St(Ce[Oe],Te)}let me,ve;if(E){const Ce=f.getValueAndResolveTokens("text-field",le,h,U),_e=$n.factory(Ce);sZ(_e)&&(this.hasRTLText=!0),(!this.hasRTLText||dv()==="unavailable"||this.hasRTLText&&ka.isParsed())&&(me=DX(_e,f,le))}if(M){const Ce=f.getValueAndResolveTokens("icon-image",le,h,U);ve=Ce instanceof Yi?Ce:Yi.fromString(Ce)}if(!me&&!ve)continue;const de=this.sortFeaturesByKey?T.evaluate(le,{},h):void 0;if(this.features.push({id:Y,text:me,icon:ve,index:H,sourceLayerIndex:$,geometry:le.geometry,properties:X.properties,type:oZ[X.type],sortKey:de}),ve&&(I[ve.namePrimary]=!0,ve.nameSecondary&&(I[ve.nameSecondary]=!0)),me){const Ce=F.evaluate(le,{},h).join(","),_e=v.get("text-rotation-alignment")==="map"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ks.vertical)>=0;for(const Te of me.sections)if(Te.image)I[Te.image.namePrimary]=!0;else{const Oe=cm(me.toString()),Ve=Te.fontStack||Ce,je=R[Ve]=R[Ve]||{};this.calculateGlyphDependencies(Te.text,je,_e,this.allowVerticalPlacement,Oe)}}}v.get("symbol-placement")==="line"&&(this.features=function(X){const Y={},H={},$=[];let te=0;function le(Ce){$.push(X[Ce]),te++}function me(Ce,_e,Te){const Oe=H[Ce];return delete H[Ce],H[_e]=Oe,$[Oe].geometry[0].pop(),$[Oe].geometry[0]=$[Oe].geometry[0].concat(Te[0]),Oe}function ve(Ce,_e,Te){const Oe=Y[_e];return delete Y[_e],Y[Ce]=Oe,$[Oe].geometry[0].shift(),$[Oe].geometry[0]=Te[0].concat($[Oe].geometry[0]),Oe}function de(Ce,_e,Te){const Oe=Te?_e[0][_e[0].length-1]:_e[0][0];return`${Ce}:${Oe.x}:${Oe.y}`}for(let Ce=0;Ce<X.length;Ce++){const _e=X[Ce],Te=_e.geometry,Oe=_e.text?_e.text.toString():null;if(!Oe){le(Ce);continue}const Ve=de(Oe,Te),je=de(Oe,Te,!0);if(Ve in H&&je in Y&&H[Ve]!==Y[je]){const We=ve(Ve,je,Te),et=me(Ve,je,$[We].geometry);delete Y[Ve],delete H[je],H[de(Oe,$[et].geometry,!0)]=et,$[We].geometry=null}else Ve in H?me(Ve,je,Te):je in Y?ve(Ve,je,Te):(le(Ce),Y[Ve]=te-1,H[je]=te-1)}return $.filter(Ce=>Ce.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((X,Y)=>X.sortKey-Y.sortKey)}update(a,l,h,g,f){const v=Object.keys(a).length!==0;if(v&&!this.stateDependentLayers.length)return;const B=v?this.stateDependentLayers:this.layers;this.text.programConfigurations.updatePaintArrays(a,l,B,h,g,f),this.icon.programConfigurations.updatePaintArrays(a,l,B,h,g,f)}updateZOffset(){const a=(f,v,B)=>{h+=v,h>f.length&&f.resize(h);for(let F=-v;F<0;F++)f.emplace(F+h,B)},l=(f,v,B)=>{g+=v,g>f.length&&f.resize(g);for(let F=-v;F<0;F++)f.emplace(F+g,B)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let h=0,g=0;for(let f=0;f<this.symbolInstances.length;f++){const v=this.symbolInstances.get(f),{numHorizontalGlyphVertices:B,numVerticalGlyphVertices:F,numIconVertices:P}=v,b=v.zOffset,E=P>0;if((B>0||F>0)&&(a(this.text.zOffsetVertexArray,B,b),a(this.text.zOffsetVertexArray,F,b)),E){const{placedIconSymbolIndex:M,verticalPlacedIconSymbolIndex:T}=v;M>=0&&l(this.icon.zOffsetVertexArray,P,b),T>=0&&l(this.icon.zOffsetVertexArray,v.numVerticalIconVertices,b)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=AO(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(a,l){const h=this.lineVertexArray.length;if(a.segment!==void 0)for(const{x:g,y:f}of l)this.lineVertexArray.emplaceBack(g,f);return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(a,l,h,g,f,v,B,F,P,b,E,M,T,I,R,U){const V=a.indexArray,X=a.layoutVertexArray,Y=a.globeExtVertexArray,H=a.segments.prepareSegment(4*l.length,X,V,this.canOverlap?v.sortKey:void 0),$=this.glyphOffsetArray.length,te=H.vertexLength,le=this.allowVerticalPlacement&&B===Ks.vertical?Math.PI/2:0,me=v.text&&v.text.sections;for(let de=0;de<l.length;de++){const{tl:Ce,tr:_e,bl:Te,br:Oe,texPrimary:Ve,texSecondary:je,pixelOffsetTL:We,pixelOffsetBR:et,minFontScaleX:qe,minFontScaleY:At,glyphOffset:xt,isSDF:at,sectionIndex:Vt}=l[de],Ot=H.vertexLength,Ft=xt[1];if(Nb(X,P.x,P.y,Ce.x,Ft+Ce.y,Ve.x,Ve.y,h,at,We.x,We.y,qe,At),Nb(X,P.x,P.y,_e.x,Ft+_e.y,Ve.x+Ve.w,Ve.y,h,at,et.x,We.y,qe,At),Nb(X,P.x,P.y,Te.x,Ft+Te.y,Ve.x,Ve.y+Ve.h,h,at,We.x,et.y,qe,At),Nb(X,P.x,P.y,Oe.x,Ft+Oe.y,Ve.x+Ve.w,Ve.y+Ve.h,h,at,et.x,et.y,qe,At),F){const{x:Bt,y:or,z:Qt}=F.anchor,[jt,gr,Pr]=F.up;Hb(Y,Bt,or,Qt,jt,gr,Pr),Hb(Y,Bt,or,Qt,jt,gr,Pr),Hb(Y,Bt,or,Qt,jt,gr,Pr),Hb(Y,Bt,or,Qt,jt,gr,Pr),jb(a.dynamicLayoutVertexArray,Bt,or,Qt,le)}else jb(a.dynamicLayoutVertexArray,P.x,P.y,P.z,le);if(U){const Bt=je||Ve;Vb(a.iconTransitioningVertexArray,Bt.x,Bt.y),Vb(a.iconTransitioningVertexArray,Bt.x+Bt.w,Bt.y),Vb(a.iconTransitioningVertexArray,Bt.x,Bt.y+Bt.h),Vb(a.iconTransitioningVertexArray,Bt.x+Bt.w,Bt.y+Bt.h)}V.emplaceBack(Ot,Ot+1,Ot+2),V.emplaceBack(Ot+1,Ot+2,Ot+3),H.vertexLength+=4,H.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(xt[0]),de!==l.length-1&&Vt===l[de+1].sectionIndex||a.programConfigurations.populatePaintArrays(X.length,v,v.index,{},T,I,R,me&&me[Vt])}const ve=F?F.anchor:P;a.placedSymbolArray.emplaceBack(ve.x,ve.y,ve.z,P.x,P.y,$,this.glyphOffsetArray.length-$,te,b,E,P.segment,h?h[0]:0,h?h[1]:0,g[0],g[1],B,0,!1,0,M,0)}_commitLayoutVertex(a,l,h,g,f,v,B){a.emplaceBack(l,h,g,f,v,Math.round(B.x),Math.round(B.y))}_addCollisionDebugVertices(a,l,h,g,f,v,B){const F=h.segments.prepareSegment(4,h.layoutVertexArray,h.indexArray),P=F.vertexLength,b=B.tileAnchorX,E=B.tileAnchorY;for(let T=0;T<4;T++)h.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(h.collisionVertexArrayExt,l,a.padding,B.zOffset),this._commitLayoutVertex(h.layoutVertexArray,g,f,v,b,E,new Dt(a.x1,a.y1)),this._commitLayoutVertex(h.layoutVertexArray,g,f,v,b,E,new Dt(a.x2,a.y1)),this._commitLayoutVertex(h.layoutVertexArray,g,f,v,b,E,new Dt(a.x2,a.y2)),this._commitLayoutVertex(h.layoutVertexArray,g,f,v,b,E,new Dt(a.x1,a.y2)),F.vertexLength+=4;const M=h.indexArray;M.emplaceBack(P,P+1),M.emplaceBack(P+1,P+2),M.emplaceBack(P+2,P+3),M.emplaceBack(P+3,P),F.primitiveLength+=4}_addTextDebugCollisionBoxes(a,l,h,g,f,v){for(let B=g;B<f;B++){const F=h.get(B),P=this.getSymbolInstanceTextSize(a,v,l,B);this._addCollisionDebugVertices(F,P,this.textCollisionBox,F.projectedAnchorX,F.projectedAnchorY,F.projectedAnchorZ,v)}}_addIconDebugCollisionBoxes(a,l,h,g,f,v){for(let B=g;B<f;B++){const F=h.get(B),P=this.getSymbolInstanceIconSize(a,l,v.placedIconSymbolIndex);this._addCollisionDebugVertices(F,P,this.iconCollisionBox,F.projectedAnchorX,F.projectedAnchorY,F.projectedAnchorZ,v)}}generateCollisionDebugBuffers(a,l){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new CF(tA,DL.members,ou),this.iconCollisionBox=new CF(tA,DL.members,ou);const h=Mm(this.iconSizeData,a),g=Mm(this.textSizeData,a);for(let f=0;f<this.symbolInstances.length;f++){const v=this.symbolInstances.get(f);this._addTextDebugCollisionBoxes(g,a,l,v.textBoxStartIndex,v.textBoxEndIndex,v),this._addTextDebugCollisionBoxes(g,a,l,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v),this._addIconDebugCollisionBoxes(h,a,l,v.iconBoxStartIndex,v.iconBoxEndIndex,v),this._addIconDebugCollisionBoxes(h,a,l,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v)}}getSymbolInstanceTextSize(a,l,h,g){const f=this.text.placedSymbolArray.get(l.rightJustifiedTextSymbolIndex>=0?l.rightJustifiedTextSymbolIndex:l.centerJustifiedTextSymbolIndex>=0?l.centerJustifiedTextSymbolIndex:l.leftJustifiedTextSymbolIndex>=0?l.leftJustifiedTextSymbolIndex:l.verticalPlacedTextSymbolIndex>=0?l.verticalPlacedTextSymbolIndex:g),v=Pb(this.textSizeData,a,f)/Lo;return this.tilePixelRatio*v}getSymbolInstanceIconSize(a,l,h){const g=this.icon.placedSymbolArray.get(h),f=Pb(this.iconSizeData,a,g);return this.tilePixelRatio*f}_commitDebugCollisionVertexUpdate(a,l,h,g){a.emplaceBack(l,-h,-h,g),a.emplaceBack(l,h,-h,g),a.emplaceBack(l,h,h,g),a.emplaceBack(l,-h,h,g)}_updateTextDebugCollisionBoxes(a,l,h,g,f,v){for(let B=g;B<f;B++){const F=h.get(B),P=this.getSymbolInstanceTextSize(a,v,l,B);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,P,F.padding,v.zOffset)}}_updateIconDebugCollisionBoxes(a,l,h,g,f,v){for(let B=g;B<f;B++){const F=h.get(B),P=this.getSymbolInstanceIconSize(a,l,v.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,P,F.padding,v.zOffset)}}updateCollisionDebugBuffers(a,l){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const h=Mm(this.iconSizeData,a),g=Mm(this.textSizeData,a);for(let f=0;f<this.symbolInstances.length;f++){const v=this.symbolInstances.get(f);this._updateTextDebugCollisionBoxes(g,a,l,v.textBoxStartIndex,v.textBoxEndIndex,v),this._updateTextDebugCollisionBoxes(g,a,l,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v),this._updateIconDebugCollisionBoxes(h,a,l,v.iconBoxStartIndex,v.iconBoxEndIndex,v),this._updateIconDebugCollisionBoxes(h,a,l,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(a,l,h,g,f,v,B,F,P){const b={};if(l<h){const{x1:E,y1:M,x2:T,y2:I,padding:R,projectedAnchorX:U,projectedAnchorY:V,projectedAnchorZ:X,tileAnchorX:Y,tileAnchorY:H,featureIndex:$}=a.get(l);b.textBox={x1:E,y1:M,x2:T,y2:I,padding:R,projectedAnchorX:U,projectedAnchorY:V,projectedAnchorZ:X,tileAnchorX:Y,tileAnchorY:H},b.textFeatureIndex=$}if(g<f){const{x1:E,y1:M,x2:T,y2:I,padding:R,projectedAnchorX:U,projectedAnchorY:V,projectedAnchorZ:X,tileAnchorX:Y,tileAnchorY:H,featureIndex:$}=a.get(g);b.verticalTextBox={x1:E,y1:M,x2:T,y2:I,padding:R,projectedAnchorX:U,projectedAnchorY:V,projectedAnchorZ:X,tileAnchorX:Y,tileAnchorY:H},b.verticalTextFeatureIndex=$}if(v<B){const{x1:E,y1:M,x2:T,y2:I,padding:R,projectedAnchorX:U,projectedAnchorY:V,projectedAnchorZ:X,tileAnchorX:Y,tileAnchorY:H,featureIndex:$}=a.get(v);b.iconBox={x1:E,y1:M,x2:T,y2:I,padding:R,projectedAnchorX:U,projectedAnchorY:V,projectedAnchorZ:X,tileAnchorX:Y,tileAnchorY:H},b.iconFeatureIndex=$}if(F<P){const{x1:E,y1:M,x2:T,y2:I,padding:R,projectedAnchorX:U,projectedAnchorY:V,projectedAnchorZ:X,tileAnchorX:Y,tileAnchorY:H,featureIndex:$}=a.get(F);b.verticalIconBox={x1:E,y1:M,x2:T,y2:I,padding:R,projectedAnchorX:U,projectedAnchorY:V,projectedAnchorZ:X,tileAnchorX:Y,tileAnchorY:H},b.verticalIconFeatureIndex=$}return b}deserializeCollisionBoxes(a){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const h=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(a,l){const h=a.placedSymbolArray.get(l),g=h.vertexStartIndex+4*h.numGlyphs;for(let f=h.vertexStartIndex;f<g;f+=4)a.indexArray.emplaceBack(f,f+1,f+2),a.indexArray.emplaceBack(f+1,f+2,f+3)}getSortedSymbolIndexes(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(a),h=Math.cos(a),g=[],f=[],v=[];for(let B=0;B<this.symbolInstances.length;++B){v.push(B);const F=this.symbolInstances.get(B);g.push(0|Math.round(l*F.tileAnchorX+h*F.tileAnchorY)),f.push(F.featureIndex)}return v.sort((B,F)=>g[B]-g[F]||f[F]-f[B]),v}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let a=0;a<this.symbolInstances.length;++a)this.symbolInstanceIndexesSortedZOffset.push(a)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((a,l)=>this.symbolInstances.get(l).zOffset-this.symbolInstances.get(a).zOffset)}addToSortKeyRanges(a,l){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===l?h.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:a,symbolInstanceEnd:a+1})}sortFeatures(a){if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const h=this.symbolInstances.get(l);this.featureSortOrder.push(h.featureIndex);const{rightJustifiedTextSymbolIndex:g,centerJustifiedTextSymbolIndex:f,leftJustifiedTextSymbolIndex:v,verticalPlacedTextSymbolIndex:B,placedIconSymbolIndex:F,verticalPlacedIconSymbolIndex:P}=h;g>=0&&this.addIndicesForPlacedSymbol(this.text,g),f>=0&&f!==g&&this.addIndicesForPlacedSymbol(this.text,f),v>=0&&v!==f&&v!==g&&this.addIndicesForPlacedSymbol(this.text,v),B>=0&&this.addIndicesForPlacedSymbol(this.text,B),F>=0&&this.addIndicesForPlacedSymbol(this.icon,F),P>=0&&this.addIndicesForPlacedSymbol(this.icon,P)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let hO,dO,SF;Wt(Gb,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Gb.addDynamicAttributes=jb;class fO{constructor(a){this.type=a.property.overrides?a.property.overrides.runtimeType:Ja,this.defaultValue=a}evaluate(a){if(a.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(a.formattedSection))return l.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default}eachChild(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Wt(fO,"FormatSectionOverride",{omit:["defaultValue"]});const EF=()=>SF||(SF={layout:hO||(hO=new ri({"symbol-placement":new kt($e.layout_symbol["symbol-placement"]),"symbol-spacing":new kt($e.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new kt($e.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new nr($e.layout_symbol["symbol-sort-key"]),"symbol-z-order":new kt($e.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new kt($e.layout_symbol["symbol-z-elevate"]),"icon-allow-overlap":new kt($e.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new kt($e.layout_symbol["icon-ignore-placement"]),"icon-optional":new kt($e.layout_symbol["icon-optional"]),"icon-rotation-alignment":new kt($e.layout_symbol["icon-rotation-alignment"]),"icon-size":new nr($e.layout_symbol["icon-size"]),"icon-text-fit":new nr($e.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new nr($e.layout_symbol["icon-text-fit-padding"]),"icon-image":new nr($e.layout_symbol["icon-image"]),"icon-rotate":new nr($e.layout_symbol["icon-rotate"]),"icon-padding":new kt($e.layout_symbol["icon-padding"]),"icon-keep-upright":new kt($e.layout_symbol["icon-keep-upright"]),"icon-offset":new nr($e.layout_symbol["icon-offset"]),"icon-anchor":new nr($e.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new kt($e.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new kt($e.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new kt($e.layout_symbol["text-rotation-alignment"]),"text-field":new nr($e.layout_symbol["text-field"]),"text-font":new nr($e.layout_symbol["text-font"]),"text-size":new nr($e.layout_symbol["text-size"]),"text-max-width":new nr($e.layout_symbol["text-max-width"]),"text-line-height":new nr($e.layout_symbol["text-line-height"]),"text-letter-spacing":new nr($e.layout_symbol["text-letter-spacing"]),"text-justify":new nr($e.layout_symbol["text-justify"]),"text-radial-offset":new nr($e.layout_symbol["text-radial-offset"]),"text-variable-anchor":new kt($e.layout_symbol["text-variable-anchor"]),"text-anchor":new nr($e.layout_symbol["text-anchor"]),"text-max-angle":new kt($e.layout_symbol["text-max-angle"]),"text-writing-mode":new kt($e.layout_symbol["text-writing-mode"]),"text-rotate":new nr($e.layout_symbol["text-rotate"]),"text-padding":new kt($e.layout_symbol["text-padding"]),"text-keep-upright":new kt($e.layout_symbol["text-keep-upright"]),"text-transform":new nr($e.layout_symbol["text-transform"]),"text-offset":new nr($e.layout_symbol["text-offset"]),"text-allow-overlap":new kt($e.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new kt($e.layout_symbol["text-ignore-placement"]),"text-optional":new kt($e.layout_symbol["text-optional"]),visibility:new kt($e.layout_symbol.visibility)})),paint:dO||(dO=new ri({"icon-opacity":new nr($e.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new nr($e.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new nr($e.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new nr($e.paint_symbol["text-emissive-strength"]),"icon-color":new nr($e.paint_symbol["icon-color"]),"icon-halo-color":new nr($e.paint_symbol["icon-halo-color"]),"icon-halo-width":new nr($e.paint_symbol["icon-halo-width"]),"icon-halo-blur":new nr($e.paint_symbol["icon-halo-blur"]),"icon-translate":new kt($e.paint_symbol["icon-translate"]),"icon-translate-anchor":new kt($e.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new nr($e.paint_symbol["icon-image-cross-fade"]),"text-opacity":new nr($e.paint_symbol["text-opacity"]),"text-occlusion-opacity":new nr($e.paint_symbol["text-occlusion-opacity"]),"text-color":new nr($e.paint_symbol["text-color"],{runtimeType:Xo,getOverride:A=>A.textColor,hasOverride:A=>!!A.textColor}),"text-halo-color":new nr($e.paint_symbol["text-halo-color"]),"text-halo-width":new nr($e.paint_symbol["text-halo-width"]),"text-halo-blur":new nr($e.paint_symbol["text-halo-blur"]),"text-translate":new kt($e.paint_symbol["text-translate"]),"text-translate-anchor":new kt($e.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new kt($e.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new kt($e.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new kt($e.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new kt($e.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new nr($e.paint_symbol["symbol-z-offset"]),"symbol-elevation-reference":new kt($e.paint_symbol["symbol-elevation-reference"])}))},SF);class Kb extends Zo{constructor(a,l,h,g){super(a,EF(),l,h,g),this._colorAdjustmentMatrix=ke.mat4.identity([]),this.hasInitialOcclusionOpacityProperties=a.paint!==void 0&&("icon-occlusion-opacity"in a.paint||"text-occlusion-opacity"in a.paint)}recalculate(a,l){super.recalculate(a,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const h=this.layout.get("text-writing-mode");if(h){const g=[];for(const f of h)g.indexOf(f)<0&&g.push(f);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(a,l,h,g){return this._saturation===a&&this._contrast===l&&this._brightnessMin===h&&this._brightnessMax===g||(this._colorAdjustmentMatrix=function(f,v,B,F){f=Be(f),v=Ae(v);const P=ke.mat4.create(),b=f/3,E=1-2*b,M=[E,b,b,0,b,E,b,0,b,b,E,0,0,0,0,1],T=.5-.5*v,I=F-B;return ke.mat4.multiply(P,[I,0,0,0,0,I,0,0,0,0,I,0,B,B,B,1],[v,0,0,0,0,v,0,0,0,0,v,0,T,T,T,1]),ke.mat4.multiply(P,P,M),P}(a,l,h,g),this._saturation=a,this._contrast=l,this._brightnessMin=h,this._brightnessMax=g),this._colorAdjustmentMatrix}getValueAndResolveTokens(a,l,h,g){const f=this.layout.get(a).evaluate(l,{},h,g),v=this._unevaluatedLayout._values[a];return v.isDataDriven()||om(v.value)||!f?f:function(B,F){return F.replace(/{([^{}]+)}/g,(P,b)=>b in B?String(B[b]):"")}(l.properties,f)}createBucket(a){return new Gb(a)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const a of EF().paint.overridableProperties){if(!Kb.hasPaintOverride(this.layout,a))continue;const l=this.paint.get(a),h=new fO(l),g=new im(h,l.property.specification,this.scope,this.options);let f=null;f=l.value.kind==="constant"||l.value.kind==="source"?new sv("source",g):new yl("composite",g,l.value.zoomStops,l.value._interpolationType),this.paint._values[a]=new mh(l.property,f,l.parameters)}}_handleOverridablePaintPropertyUpdate(a,l,h){return!(!this.layout||l.isDataDriven()||h.isDataDriven())&&Kb.hasPaintOverride(this.layout,a)}static hasPaintOverride(a,l){const h=a.get("text-field"),g=EF().paint.properties[l];let f=!1;const v=B=>{for(const F of B)if(g.overrides&&g.overrides.hasOverride(F))return void(f=!0)};if(h.value.kind==="constant"&&h.value.value instanceof $n)v(h.value.value.sections);else if(h.value.kind==="source"){const B=P=>{f||(P instanceof Ns&&_i(P.value)===Ne?v(P.value.sections):P instanceof eh?v(P.sections):P.eachChild(B))},F=h.value;F._styleExpression&&B(F._styleExpression.expression)}return f}getProgramIds(){return["symbol"]}getDefaultProgramParams(a,l,h){return{config:new nA(this,{zoom:l,lut:h}),overrideFog:!1}}}let pO,mO,gO,vO;var TF=hn([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function FF(A){switch(A){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function IF(A){switch(A){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class MF{constructor(a,l,h,g){this.context=a,this.format=h,this.useMipmap=g&&g.useMipmap,this.texture=a.gl.createTexture(),this.update(l,{premultiply:g&&g.premultiply})}update(a,l){const h=a&&a instanceof HTMLVideoElement&&a.width===0?a.videoWidth:a.width,g=a&&a instanceof HTMLVideoElement&&a.height===0?a.videoHeight:a.height,{context:f}=this,{gl:v}=f,{x:B,y:F}=l&&l.position?l.position:{x:0,y:0},P=Math.max(B+h,this.size?this.size[0]:0),b=Math.max(F+g,this.size?this.size[1]:0);!this.size||this.size[0]===P&&this.size[1]===b||(v.bindTexture(v.TEXTURE_2D,null),v.deleteTexture(this.texture),this.texture=v.createTexture(),this.size=null),v.bindTexture(v.TEXTURE_2D,this.texture),f.pixelStoreUnpackFlipY.set(!1),f.pixelStoreUnpack.set(1),f.pixelStoreUnpackPremultiplyAlpha.set(this.format===v.RGBA8&&(!l||l.premultiply!==!1));const E=a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||ImageBitmap&&a instanceof ImageBitmap;if(!this.size&&P>0&&b>0){const M=this.useMipmap?Math.floor(Math.log2(Math.max(P,b)))+1:1;v.texStorage2D(v.TEXTURE_2D,M,this.format,P,b),this.size=[P,b]}if(this.size)if(E)v.texSubImage2D(v.TEXTURE_2D,0,B,F,FF(this.format),IF(this.format),a);else{const M=a.data;M&&v.texSubImage2D(v.TEXTURE_2D,0,B,F,h,g,FF(this.format),IF(this.format),M)}this.useMipmap&&v.generateMipmap(v.TEXTURE_2D)}bind(a,l,h=!1){const{context:g}=this,{gl:f}=g;f.bindTexture(f.TEXTURE_2D,this.texture),a!==this.minFilter&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,a),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,this.useMipmap&&!h?a===f.NEAREST?f.NEAREST_MIPMAP_NEAREST:f.LINEAR_MIPMAP_LINEAR:a),this.minFilter=a),l!==this.wrapS&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,l),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,l),this.wrapS=l)}bindExtraParam(a,l,h,g){const{context:f}=this,{gl:v}=f;v.bindTexture(v.TEXTURE_2D,this.texture),l!==this.magFilter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,l),this.magFilter=l),a!==this.minFilter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,this.useMipmap?a===v.NEAREST?v.NEAREST_MIPMAP_NEAREST:v.LINEAR_MIPMAP_LINEAR:a),this.minFilter=a),h!==this.wrapS&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,h),this.wrapS=h),g!==this.wrapT&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,g),this.wrapT=g)}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}class Wb{constructor(a,l){this.context=a,this.texture=l}bind(a,l){const{context:h}=this,{gl:g}=h;g.bindTexture(g.TEXTURE_2D,this.texture),a!==this.minFilter&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,a),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,a),this.minFilter=a),l!==this.wrapS&&(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,l),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,l),this.wrapS=l)}}function qb(A,a,l,h,g,f,v,B){const F=[A,a,1,l,h,1,g,f,1],P=[v,B,1],b=ke.mat3.adjoint([],F),[E,M,T]=ke.vec3.transformMat3(P,P,b);return ke.mat3.multiply(F,F,[E,0,0,0,M,0,0,0,T])}function yO(A,a,l,h,g,f,v,B){const F=function(P,b,E,M,T,I,R,U){const V=qb(0,0,1,0,1,1,0,1),X=qb(P,b,E,M,T,I,R,U),Y=ke.mat3.adjoint([],V);return ke.mat3.multiply(X,X,Y)}(A,a,l,h,g,f,v,B);return[F[2]/F[8]/Ut,F[5]/F[8]/Ut]}function Xb(A){return[A[0],Math.min(Math.max(A[1],-Ee),Ee)]}class _O extends Xc{constructor(a,l,h,g){super(),this.id=a,this.dispatcher=h,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(g),this.options=l,this._dirty=!1}load(a,l){if(this._loaded=l||!1,this.fire(new ml("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return a&&(this.coordinates=a),this._loaded=!0,void this._finishLoading();this._imageRequest=Ma(this.map._requestManager.transformRequest(this.url,Wc.Image),(h,g)=>{this._imageRequest=null,this._loaded=!0,h?this.fire(new ju(h)):g&&(this.image=g instanceof HTMLImageElement?Nt.getImageData(g):g,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,a&&(this.coordinates=a),this._finishLoading())})}loaded(){return this._loaded}updateImage(a){return a.url?(this._imageRequest&&a.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=a.url,this.load(a.coordinates,this._loaded),this):this}setTexture(a){if(!(a.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new Wb(this.map.painter.context,a.handle),this.width=a.dimensions[0],this.height=a.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new ml("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(a){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof Wb||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(a){if(this.coordinates=a,this._boundsArray=void 0,this._unsupportedCoords=!1,!a.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let l=a[0][1],h=a[0][1];for(const f of a)f[1]>h&&(h=f[1]),f[1]<l&&(l=f[1]);const g=(h+l)/2;if(g>Ee?this.onNorthPole=!0:g<-Ee&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const f=a.map(Xe.fromLngLat);this.tileID=function(v){let B=1/0,F=1/0,P=-1/0,b=-1/0;for(const R of v)B=Math.min(B,R.x),F=Math.min(F,R.y),P=Math.max(P,R.x),b=Math.max(b,R.y);const E=Math.max(P-B,b-F),M=Math.max(0,Math.floor(-Math.log(E)/Math.LN2)),T=Math.pow(2,M);let I=Math.floor((B+P)/2*T);return I>1&&(I-=1),new co(M,I,Math.floor((F+b)/2*T))}(f),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new ml("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(a){for(const V in this.tiles){const X=this.tiles[V];X.state!=="loaded"&&(X.state="loaded",X.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const l=Xv(new co(0,0,0),this.map.transform.projection),h=[l.projection.project(this.coordinates[0][0],this.coordinates[0][1]),l.projection.project(this.coordinates[1][0],this.coordinates[1][1]),l.projection.project(this.coordinates[2][0],this.coordinates[2][1]),l.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(V){const X=V[1].x-V[0].x,Y=V[1].y-V[0].y,H=V[2].x-V[1].x,$=V[2].y-V[1].y,te=V[3].x-V[2].x,le=V[3].y-V[2].y,me=V[0].x-V[3].x,ve=V[0].y-V[3].y,de=X*$-H*Y,Ce=H*le-te*$,_e=te*ve-me*le,Te=me*Y-X*ve;return de>0&&Ce>0&&_e>0&&Te>0||de<0&&Ce<0&&_e<0&&Te<0}(h))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const g=Xv(this.tileID,this.map.transform.projection),[f,v,B,F]=this.coordinates.map(V=>{const X=g.projection.project(V[0],V[1]);return aO(g,X)._round()});this.perspectiveTransform=yO(f.x,f.y,v.x,v.y,B.x,B.y,F.x,F.y);const P=this._boundsArray=new nu;P.emplaceBack(f.x,f.y,0,0),P.emplaceBack(v.x,v.y,Ut,0),P.emplaceBack(F.x,F.y,0,Ut),P.emplaceBack(B.x,B.y,Ut,Ut),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=a.createVertexBuffer(P,TF.members),this.boundsSegments=bi.simpleSegment(0,0,4,2);const b=[],E=[Xb((M=this.coordinates)[0]),Xb(M[1]),Xb(M[2]),Xb(M[3])];var M;const[T,I,R,U]=function(V){let X=V[0][0],Y=X,H=V[0][1],$=H;for(let te=1;te<V.length;te++)V[te][0]<X?X=V[te][0]:V[te][0]>Y&&(Y=V[te][0]),V[te][1]<H?H=V[te][1]:V[te][1]>$&&($=V[te][1]);return[X,H,Y-X,$-H]}(E);{const V=new nu,[X,Y,H,$]=function(We){let et=We[0].x,qe=et,At=We[0].y,xt=At;for(let at=1;at<We.length;at++)We[at].x<et?et=We[at].x:We[at].x>qe&&(qe=We[at].x),We[at].y<At?At=We[at].y:We[at].y>xt&&(xt=We[at].y);return[et,At,qe-et,xt-At]}(h),te=We=>[(We.x-X)/H,(We.y-Y)/$],[le,me,ve,de]=h.map(te),Ce=function(We,et,qe,At,xt,at,Vt,Ot){const Ft=qb(0,0,1,0,1,1,0,1),Bt=qb(We,et,qe,At,xt,at,Vt,Ot),or=ke.mat3.adjoint([],Bt);return ke.mat3.multiply(Ft,Ft,or)}(le[0],le[1],me[0],me[1],ve[0],ve[1],de[0],de[1]);this.elevatedGlobePerspectiveTransform=yO(le[0],le[1],me[0],me[1],ve[0],ve[1],de[0],de[1]);const _e=(We,et)=>{b.push(We.lng);const qe=Math.round((We.lng-T)/R*Ut),At=Math.round((We.lat-I)/U*Ut),xt=te(et),at=ke.vec3.transformMat3([],[xt[0],xt[1],1],Ce),Vt=Math.round(at[0]/at[2]*Ut),Ot=Math.round(at[1]/at[2]*Ut);V.emplaceBack(qe,At,Vt,Ot)},Te=h[3].x-h[0].x,Oe=h[3].y-h[0].y,Ve=h[2].x-h[1].x,je=h[2].y-h[1].y;for(let We=0;We<65;We++){const et=We/64,qe=[h[0].x+et*Te,h[0].y+et*Oe],At=[h[1].x+et*Ve,h[1].y+et*je],xt=At[0]-qe[0],at=At[1]-qe[1];for(let Vt=0;Vt<65;Vt++){const Ot=Vt/64,Ft={x:qe[0]+xt*Ot,y:qe[1]+at*Ot,z:0};_e(l.projection.unproject(Ft.x,Ft.y),Ft)}}this.elevatedGlobeVertexBuffer=a.createVertexBuffer(V,TF.members)}{this.maxLongitudeTriangleSize=0;let V=[],X=new Fo;const Y=(H,$,te)=>{X.emplaceBack(H,$,te);const le=b[H],me=b[$],ve=b[te],de=Math.min(Math.min(le,me),ve),Ce=Math.max(Math.max(le,me),ve)-de;Ce>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=Ce),V.push(de+Ce/2)};for(let H=0;H<64;H++)for(let $=0;$<64;$++){const te=65*H+$,le=te+1,me=te+65,ve=me+1;Y(te,me,le),Y(le,me,ve)}[V,X]=function(H,$){const te=Array.from({length:H.length},(ve,de)=>de);te.sort((ve,de)=>H[ve]-H[de]);const le=[],me=new Fo;for(let ve=0;ve<te.length;ve++){const de=te[ve];le.push(H[de]);const Ce=3*de,_e=Ce+1;me.emplaceBack($.uint16[Ce],$.uint16[_e],$.uint16[_e+1])}return[le,me]}(V,X),this.elevatedGlobeTrianglesCenterLongitudes=V,this.elevatedGlobeIndexBuffer=a.createIndexBuffer(X)}this.elevatedGlobeSegments=bi.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,R/Ut,0,U/Ut,0,0,I,T,0])}prepare(){const a=Object.keys(this.tiles).length!==0;if(this.tileID&&!a)return;const l=this.map.painter.context,h=l.gl;!this._dirty||this.texture instanceof Wb||(this.texture?this.texture.update(this.image):(this.texture=new MF(l,this.image,h.RGBA8),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE)),this._dirty=!1),a&&this._prepareData(l)}loadTile(a,l){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},l(null)):(a.state="errored",l(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(a){const l=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!l)return null;const h=this.elevatedGlobeTrianglesCenterLongitudes;let g=(f=a+180)+360*Math.round((h[0]-f)/360);var f;const v=new bi,B=(E,M)=>{v.segments.push({vertexOffset:0,primitiveOffset:E,vertexLength:l.segments[0].vertexLength,primitiveLength:M,sortKey:void 0,vaos:{}})},F=.51*this.maxLongitudeTriangleSize;if(Math.abs(h[0]-g)<=F){const E=se(h,0,h.length,g+F);return E===h.length||B(E,it(h,E+1,h.length,g+360-F)-E),v}g<h[0]&&(g+=360);const P=it(h,0,h.length,g-F);if(P===h.length)return B(0,h.length),v;B(0,P-0);const b=se(h,P+1,h.length,g+F);return b!==h.length&&B(b,h.length-b),v}}const lZ=(Math.pow(256,2)-1)/16907520;class xO extends Zo{constructor(a,l,h,g){super(a,{layout:gO||(gO=new ri({visibility:new kt($e.layout_raster.visibility)})),paint:vO||(vO=new ri({"raster-opacity":new kt($e.paint_raster["raster-opacity"]),"raster-color":new Hs($e.paint_raster["raster-color"]),"raster-color-mix":new kt($e.paint_raster["raster-color-mix"]),"raster-color-range":new kt($e.paint_raster["raster-color-range"]),"raster-hue-rotate":new kt($e.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new kt($e.paint_raster["raster-brightness-min"]),"raster-brightness-max":new kt($e.paint_raster["raster-brightness-max"]),"raster-saturation":new kt($e.paint_raster["raster-saturation"]),"raster-contrast":new kt($e.paint_raster["raster-contrast"]),"raster-resampling":new kt($e.paint_raster["raster-resampling"]),"raster-fade-duration":new kt($e.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new kt($e.paint_raster["raster-emissive-strength"]),"raster-array-band":new kt($e.paint_raster["raster-array-band"]),"raster-elevation":new kt($e.paint_raster["raster-elevation"])}))},l,h,g),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(a){return!(a&&a._source instanceof _O&&(a._source.onNorthPole||a._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(a){a!=="raster-color"&&a!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(a){if(!this.hasColorMap()||!this._curRampRange)return;const l=this._transitionablePaint._values["raster-color"].value.expression,[h,g]=a||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(h)&&isNaN(g)||h===this._curRampRange[0]&&g===this._curRampRange[1]||(this.colorRamp=kv({expression:l,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:h,end:g}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[h,g])}}let bO,wO,BO,CO,SO;class EO extends Zo{constructor(a,l,h,g){super(a,{layout:bO||(bO=new ri({visibility:new kt($e["layout_raster-particle"].visibility)})),paint:wO||(wO=new ri({"raster-particle-array-band":new kt($e["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new kt($e["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new Hs($e["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new kt($e["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new kt($e["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new kt($e["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new kt($e["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new kt($e["paint_raster-particle"]["raster-particle-elevation"])}))},l,h,g),this._updateColorRamp(),this.lastInvalidatedAt=Nt.now()}onRemove(a){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(a){return!1}_handleSpecialPaintPropertyUpdate(a){a!=="raster-particle-color"&&a!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),a==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const a=this._transitionablePaint._values["raster-particle-color"].value.expression,l=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=kv({expression:a,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:l}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=Nt.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class cZ extends Zo{constructor(a,l){super(a,{},l,null),this.implementation=a,a.slot&&(this.slot=a.slot)}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(a){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(a){this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)}onRemove(a){this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)}}function PF(A,a,l){const h=[0,0,1],g=ke.quat.identity([]);return ke.quat.rotateY(g,g,l?-Br(A)+Math.PI:Br(A)),ke.quat.rotateX(g,g,-Br(a)),ke.vec3.transformQuat(h,h,g),ke.vec3.normalize(h,h)}function TO(A,a){const l=Zb(A.projection,A.zoom,A.width,A.height),h=function(f,v,B,F,P){const b=new Z(B.lng-180*kh,B.lat),E=new Z(B.lng+180*kh,B.lat),M=f.project(b.lng,b.lat),T=f.project(E.lng,E.lat),I=-Math.atan2(T.y-M.y,T.x-M.x),R=Xe.fromLngLat(B);R.y=xr(R.y,-1+kh,1-kh);const U=R.toLngLat(),V=f.project(U.lng,U.lat),X=Xe.fromLngLat(U);X.x+=kh;const Y=X.toLngLat(),H=f.project(Y.lng,Y.lat),$=IO(H.x-V.x,H.y-V.y,I),te=Xe.fromLngLat(U);te.y+=kh;const le=te.toLngLat(),me=f.project(le.lng,le.lat),ve=IO(me.x-V.x,me.y-V.y,I),de=Math.abs($.x)/Math.abs(ve.y),Ce=ke.mat4.identity([]);ke.mat4.rotateZ(Ce,Ce,-I*(1-(P?0:F)));const _e=ke.mat4.identity([]);return ke.mat4.scale(_e,_e,[1,1-(1-de)*F,1]),_e[4]=-ve.x/ve.y*F,ke.mat4.rotateZ(_e,_e,I),ke.mat4.multiply(_e,Ce,_e),_e}(A.projection,0,A.center,l,a),g=FO(A);return ke.mat4.scale(h,h,[g,g,1]),h}function FO(A){const a=A.projection,l=Zb(A.projection,A.zoom,A.width,A.height),h=DF(a,A.center),g=DF(a,Z.convert(a.center));return Math.pow(2,h*l+(1-l)*g)}function Zb(A,a,l,h,g=1/0){const f=A.range;if(!f)return 0;const v=Math.min(g,Math.max(l,h)),B=Math.log(v/1024)/Math.LN2;return Ls(f[0]+B,f[1]+B,a)}const kh=1/4e4;function DF(A,a){const l=xr(a.lat,-Ee,Ee),h=new Z(a.lng-180*kh,l),g=new Z(a.lng+180*kh,l),f=A.project(h.lng,l),v=A.project(g.lng,l),B=Xe.fromLngLat(h),F=Xe.fromLngLat(g),P=v.x-f.x,b=v.y-f.y,E=F.x-B.x,M=F.y-B.y,T=Math.sqrt((E*E+M*M)/(P*P+b*b));return Math.log(T)/Math.LN2}function IO(A,a,l){const h=Math.cos(l),g=Math.sin(l);return{x:A*h-a*g,y:A*g+a*h}}function MO(A,a,l){ke.mat4.identity(A),ke.mat4.rotateZ(A,A,Br(a[2])),ke.mat4.rotateX(A,A,Br(a[0])),ke.mat4.rotateY(A,A,Br(a[1])),ke.mat4.scale(A,A,l),ke.mat4.multiply(A,A,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function Yb(A,a,l,h,g,f,v,B){const F=[l[0]-a[0],l[1]-a[1],0],P=[h[0]-a[0],h[1]-a[1],0];if(ke.vec3.length(F)<1e-12||ke.vec3.length(P)<1e-12)return ke.quat.identity(A);const b=ke.vec3.cross([],F,P);ke.vec3.normalize(b,b),ke.vec3.subtract(P,h,a),F[2]=(f-g)*B,P[2]=(v-g)*B;const E=F;return ke.vec3.cross(E,F,P),ke.vec3.normalize(E,E),ke.quat.rotationTo(A,b,E)}function kF(A,a,l=!1){const h=Th(a.zoom),g=function(f,v,B){const F=v.worldSize,P=[f[12],f[13],f[14]],b=be(P[1]/F),E=we(P[0]/F),M=ke.mat4.identity([]),T=pe(1,b)*F,I=pe(1,0)*F*Qe(b,v.zoom),R=1/qT(F);let U=I*R;if(B){const H=Zb(v.projection,v.zoom,v.width,v.height,1024);U=R*v.projection.pixelSpaceConversion(v.center.lat,F,H)}const V=N(b,E);ke.vec3.add(V,V,ke.vec3.scale([],ke.vec3.normalize([],V),T*U*P[2]));const X=function(H){const $=[H[0],H[1],H[2]];let te=[0,1,0];const le=ke.vec3.cross([],te,$);return ke.vec3.cross(te,$,le),ke.vec3.squaredLength(te)===0&&(te=[0,1,0],ke.vec3.cross(le,$,te)),ke.vec3.normalize(le,le),ke.vec3.normalize(te,te),ke.vec3.normalize($,$),[le[0],le[1],le[2],0,te[0],te[1],te[2],0,$[0],$[1],$[2],0,H[0],H[1],H[2],1]}(V);ke.mat4.scale(M,M,[U,U,U*T]),ke.mat4.translate(M,M,[-P[0],-P[1],-P[2]]);const Y=ke.mat4.multiply([],v.globeMatrix,X);return ke.mat4.multiply(Y,Y,M),ke.mat4.multiply(Y,Y,f),Y}(A,a,l);if(h>0){const f=function(v,B){const F=B.worldSize,P=pe(1,0)*F*Qe(B.center.lat,B.zoom)/qT(F),b=pe(1,B.center.lat)*F,E=ke.mat4.identity([]);return ke.mat4.rotateY(E,E,Br(B.center.lng)),ke.mat4.rotateX(E,E,Br(B.center.lat)),ke.mat4.translate(E,E,[0,0,s]),ke.mat4.scale(E,E,[P,P,P*b]),ke.mat4.translate(E,E,[B.point.x-.5*F,B.point.y-.5*F,0]),ke.mat4.multiply(E,E,v),ke.mat4.multiply(E,B.globeMatrix,E)}(A,a);return function(v,B,F){const P=(I,R,U)=>{const V=ke.vec3.length(I),X=ke.vec3.length(R),Y=oA(I,R,U);return ke.vec3.scale(Y,Y,1/ke.vec3.length(Y)*cr(V,X,U))},b=P([v[0],v[1],v[2]],[B[0],B[1],B[2]],F),E=P([v[4],v[5],v[6]],[B[4],B[5],B[6]],F),M=P([v[8],v[9],v[10]],[B[8],B[9],B[10]],F),T=oA([v[12],v[13],v[14]],[B[12],B[13],B[14]],F);return[b[0],b[1],b[2],0,E[0],E[1],E[2],0,M[0],M[1],M[2],0,T[0],T[1],T[2],1]}(g,f,h)}return g}function PO(A,a,l,h){const g=Qn.projectAabbCorners(h,l);let f=Number.MAX_VALUE,v=-1;for(let P=0;P<g.length;++P){const b=g[P];b[0]=(.5*b[0]+.5)*a.width,b[1]=(.5-.5*b[1])*a.height,b[2]<f&&(v=P,f=b[2])}const B=P=>new Dt(g[P][0],g[P][1]);let F;switch(v){case 0:case 6:F=[B(1),B(5),B(4),B(7),B(3),B(2),B(1)];break;case 1:case 7:F=[B(0),B(4),B(5),B(6),B(2),B(3),B(0)];break;case 3:case 5:F=[B(1),B(0),B(4),B(7),B(6),B(2),B(1)];break;default:F=[B(1),B(5),B(6),B(7),B(3),B(0),B(1)]}if(Lt(A,F))return f}const uZ=hn([{name:"a_pos_3f",components:3,type:"Float32"}]),AZ=hn([{name:"a_color_3f",components:3,type:"Float32"}]),hZ=hn([{name:"a_color_4f",components:4,type:"Float32"}]),dZ=hn([{name:"a_uv_2f",components:2,type:"Float32"}]),fZ=hn([{name:"a_normal_3f",components:3,type:"Float32"}]),pZ=hn([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),mZ=hn([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]),DO={None:0,Model:1,Symbol:2,FillExtrusion:4,All:7};class Jb{constructor(a,l,h,g){this.message=(a?`${a}: `:"")+h,g&&(this.identifier=g),l!=null&&l.__line__&&(this.line=l.__line__)}}function kO(A,a){const l=A.indexOf("://")===-1;try{return new URL(A,l&&a?"http://example.com":void 0),!0}catch{return!1}}class RO{constructor(a,l){this.feature=a,this.instancedDataOffset=l,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class LO{constructor(){this.instancedDataArray=new xf,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class RF{constructor(a){this.zoom=a.zoom,this.canonical=a.canonical,this.layers=a.layers,this.layerIds=this.layers.map(l=>l.fqid),this.projection=a.projection,this.index=a.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0}updateFootprints(a,l){}populate(a,l,h,g){this.tileToMeter=Pe(h);const f=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:v,id:B,index:F,sourceLayerIndex:P}of a){const b=B??(v.properties&&v.properties.hasOwnProperty("id")?v.properties.id:void 0),E=Mt(v,f);if(!this.layers[0]._featureFilter.filter(new xi(this.zoom),E,h))continue;const M={id:b,sourceLayerIndex:P,index:F,geometry:f?E.geometry:Tt(v,h,g),properties:v.properties,type:v.type,patterns:{}},T=this.addFeature(M,M.geometry,E);T&&l.featureIndex.insert(v,M.geometry,F,P,this.index,this.instancesPerModel[T].instancedDataArray.length,Ut/32)}this.lookup=null}update(a,l,h,g){for(const f in this.instancesPerModel){const v=this.instancesPerModel[f];for(const B in a)v.idToFeaturesIndex.hasOwnProperty(B)&&(this.evaluate(v.features[v.idToFeaturesIndex[B]],a[B],v,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let a=!1;for(const l in this.instancesPerModel){const h=this.instancesPerModel[l];for(const g of h.features){const f=this.layers[0],v=g.feature,B=this.canonical,F=f.paint.get("model-rotation").evaluate(v,{},B),P=f.paint.get("model-scale").evaluate(v,{},B),b=f.paint.get("model-translation").evaluate(v,{},B);ke.vec3.exactEquals(g.rotation,F)&&ke.vec3.exactEquals(g.scale,P)&&ke.vec3.exactEquals(g.translation,b)||(this.evaluate(g,g.featureStates,h,!0),a=!0)}}return a}updateReplacement(a,l,h,g){if(l.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=l.updateTime;const f=l.getReplacementRegionsForTile(a.toUnwrapped(),!0);if(sF(this.activeReplacements,f))return!1;this.activeReplacements=f;let v=!1;for(const B in this.instancesPerModel){const F=this.instancesPerModel[B],P=F.instancedDataArray;for(const b of F.features){const E=b.instancedDataOffset,M=b.instancedDataCount;for(let T=0;T<M;T++){const I=16*(T+E);let R=P.float32[I+0];const U=R>Ut;R=U?R-Ut:R;const V=Math.floor(R),X=P.float32[I+1];let Y=!1;for(const H of this.activeReplacements)if(!YR(H,h,DO.Model,g)&&!(H.min.x>V||V>H.max.x||H.min.y>X||X>H.max.y)&&(Y=nL(rL(V,X,a.canonical,H.footprintTileId.canonical),H.footprint),Y))break;P.float32[I]=Y?R+Ut:R,v=v||Y!==U}}}return v}isEmpty(){for(const a in this.instancesPerModel)if(this.instancesPerModel[a].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(a){if(!this.uploaded)for(const l in this.instancesPerModel){const h=this.instancesPerModel[l];h.instancedDataArray.length<0||h.instancedDataArray.length===0||(h.instancedDataBuffer?h.instancedDataBuffer.updateData(h.instancedDataArray):h.instancedDataBuffer=a.createVertexBuffer(h.instancedDataArray,pZ.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const l in this.instancesPerModel){const h=this.instancesPerModel[l];h.instancedDataArray.length!==0&&h.instancedDataBuffer&&h.instancedDataBuffer.destroy()}const a=this.layers[0].modelManager;if(a&&this.modelUris)for(const l of this.modelUris)a.removeModel(l,"")}addFeature(a,l,h){const g=this.layers[0],f=g.layout.get("model-id").evaluate(h,{},this.canonical);if(!f)return tn(`modelId is not evaluated for layer ${g.id} and it is not going to get rendered.`),f;kO(f,!1)&&(this.modelUris.includes(f)||this.modelUris.push(f)),this.instancesPerModel[f]||(this.instancesPerModel[f]=new LO);const v=this.instancesPerModel[f],B=v.instancedDataArray,F=new RO(h,B.length);for(const P of l)for(const b of P){if(b.x<0||b.x>=Ut||b.y<0||b.y>=Ut)continue;const E=(this.lookupDim-1)/Ut,M=this.lookupDim*(b.y*E|0)+b.x*E|0;if(this.lookup){if(this.lookup[M]!==0)continue;this.lookup[M]=1}this.instanceCount++;const T=B.length;B.resize(T+1),v.instancesEvaluatedElevation.push(0),B.float32[16*T]=b.x,B.float32[16*T+1]=b.y}return F.instancedDataCount=v.instancedDataArray.length-F.instancedDataOffset,F.instancedDataCount>0&&(a.id&&(v.idToFeaturesIndex[a.id]=v.features.length),v.features.push(F),this.evaluate(F,{},v,!1)),f}getModelUris(){return this.modelUris}evaluate(a,l,h,g){const f=this.layers[0],v=a.feature,B=this.canonical,F=a.rotation=f.paint.get("model-rotation").evaluate(v,l,B),P=a.scale=f.paint.get("model-scale").evaluate(v,l,B),b=a.translation=f.paint.get("model-translation").evaluate(v,l,B),E=f.paint.get("model-color").evaluate(v,l,B);E.a=f.paint.get("model-color-mix-intensity").evaluate(v,l,B);const M=[];this.maxVerticalOffset<b[2]&&(this.maxVerticalOffset=b[2]),this.maxScale=Math.max(Math.max(this.maxScale,P[0]),Math.max(P[1],P[2])),MO(M,F,P);const T=Math.round(100*E.a)+E.b/1.05;for(let I=0;I<a.instancedDataCount;++I){const R=a.instancedDataOffset+I,U=16*R,V=h.instancedDataArray.float32;let X=0;g&&(X=V[U+6]-h.instancesEvaluatedElevation[R]);const Y=0|V[U+1];V[U]=(0|V[U])+E.r/1.05,V[U+1]=Y+E.g/1.05,V[U+2]=T,V[U+3]=1/(B.z>10?this.tileToMeter:Pe(B,Y)),V[U+4]=b[0],V[U+5]=b[1],V[U+6]=b[2]+X,V[U+7]=M[0],V[U+8]=M[1],V[U+9]=M[2],V[U+10]=M[4],V[U+11]=M[5],V[U+12]=M[6],V[U+13]=M[8],V[U+14]=M[9],V[U+15]=M[10],h.instancesEvaluatedElevation[R]=b[2]}}}let OO,UO;Wt(RF,"ModelBucket",{omit:["layers"]}),Wt(LO,"PerModelAttributes"),Wt(RO,"ModelFeature");const Tf=64,Lm={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function zO(A,a,l,h,g,f,v,B,F,P=!1){const b=l.zoom,E=l.project(h),M=Qe(h.lat,b),T=1/M;ke.mat4.identity(A),ke.mat4.translate(A,A,[E.x+v[0]*T,E.y+v[1]*T,v[2]]);let I=1,R=1;const U=l.worldSize;if(P){if(l.projection.name==="mercator"){let H=0;l.elevation&&(H=l.elevation.getAtPointOrZero(new Xe(E.x/U,E.y/U),0));const $=ke.vec4.transformMat4([],[E.x,E.y,H,1],l.projMatrix)[3]/l.cameraToCenterDistance;I=$,R=$*Qe(l.center.lat,b)}else if(l.projection.name==="globe"){const H=kF(A,l),$=ke.mat4.multiply([],l.projMatrix,H),te=[0,0,0,1];ke.vec4.transformMat4(te,te,$);const le=te[3]/l.cameraToCenterDistance,me=Th(b),ve=l.projection.pixelsPerMeter(h.lat,U)*Qe(h.lat,b),de=l.projection.pixelsPerMeter(l.center.lat,U)*Qe(l.center.lat,b);I=le/cr(ve,Me(l.center.lat),me),R=le*M/ve,I*=de,R*=de}}else I=T;ke.mat4.scale(A,A,[I,I,R]);const V=[...A],X=a.orientation,Y=[];if(MO(Y,[X[0]+g[0],X[1]+g[1],X[2]+g[2]],f),ke.mat4.multiply(A,V,Y),B&&l.elevation){let H=0;const $=[];if(F&&l.elevation){H=function(me,ve,de,Ce,_e){const Te=ve.elevation;if(!Te)return 0;const Oe=Qn.projectAabbCorners(de,Ce),Ve=pe(1,_e.lat)*ve.worldSize,je=function(or,Qt){const jt=[0,0,1],gr=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const Pr of gr){const Er=or[Pr.corners[0]],Tr=or[Pr.corners[1]],Ur=or[Pr.corners[2]],zr=[Tr[0]-Er[0],Tr[1]-Er[1],Qt*(Tr[2]-Er[2])],Mn=ke.vec3.cross(zr,zr,[Ur[0]-Er[0],Ur[1]-Er[1],Qt*(Ur[2]-Er[2])]);ke.vec3.normalize(Mn,Mn),Pr.dotProductWithUp=ke.vec3.dot(Mn,jt)}return gr.sort((Pr,Er)=>Pr.dotProductWithUp-Er.dotProductWithUp),gr[0].corners}(Oe,Ve),We=Oe[je[0]],et=Oe[je[1]],qe=Oe[je[2]],At=Oe[je[3]],xt=Te.getAtPointOrZero(new Xe(We[0]/ve.worldSize,We[1]/ve.worldSize),0),at=Te.getAtPointOrZero(new Xe(et[0]/ve.worldSize,et[1]/ve.worldSize),0),Vt=Te.getAtPointOrZero(new Xe(qe[0]/ve.worldSize,qe[1]/ve.worldSize),0),Ot=Te.getAtPointOrZero(new Xe(At[0]/ve.worldSize,At[1]/ve.worldSize),0),Ft=(xt+Ot)/2,Bt=(at+Vt)/2;return Ft>Bt?at<Vt?Yb(me,et,At,We,at,Ot,xt,Ve):Yb(me,qe,We,At,Vt,xt,Ot,Ve):xt<Ot?Yb(me,We,et,qe,xt,at,Vt,Ve):Yb(me,At,qe,et,Ot,Vt,at,Ve),Math.max(Ft,Bt)}($,l,a.aabb,A,h);const te=ke.mat4.fromQuat([],$),le=ke.mat4.multiply([],te,Y);ke.mat4.multiply(A,V,le)}else H=l.elevation.getAtPointOrZero(new Xe(E.x/U,E.y/U),0);H!==0&&(A[14]+=H)}}function ey(A,a,l=!1){A.uploaded||(A.gfxTexture=new MF(a,A.image,l?a.gl.R8:a.gl.RGBA8,{useMipmap:A.sampler.minFilter>=a.gl.NEAREST_MIPMAP_NEAREST}),A.uploaded=!0,A.image=null)}function gZ(A,a,l){A.indexBuffer=a.createIndexBuffer(A.indexArray,!1,!0),A.vertexBuffer=a.createVertexBuffer(A.vertexArray,uZ.members,!1,!0),A.normalArray&&(A.normalBuffer=a.createVertexBuffer(A.normalArray,fZ.members,!1,!0)),A.texcoordArray&&(A.texcoordBuffer=a.createVertexBuffer(A.texcoordArray,dZ.members,!1,!0)),A.colorArray&&(A.colorBuffer=a.createVertexBuffer(A.colorArray,(A.colorArray.bytesPerElement===12?AZ:hZ).members,!1,!0)),A.featureArray&&(A.pbrBuffer=a.createVertexBuffer(A.featureArray,mZ.members,!0)),A.segments=bi.simpleSegment(0,0,A.vertexArray.length,A.indexArray.length);const h=A.material;h.pbrMetallicRoughness.baseColorTexture&&ey(h.pbrMetallicRoughness.baseColorTexture,a),h.pbrMetallicRoughness.metallicRoughnessTexture&&ey(h.pbrMetallicRoughness.metallicRoughnessTexture,a),h.normalTexture&&ey(h.normalTexture,a),h.occlusionTexture&&ey(h.occlusionTexture,a,l),h.emissionTexture&&ey(h.emissionTexture,a)}function LF(A,a,l){if(A.meshes)for(const h of A.meshes)gZ(h,a,l);if(A.children)for(const h of A.children)LF(h,a,l)}function $b(A){if(A.meshes)for(const a of A.meshes)a.indexArray.destroy(),a.vertexArray.destroy(),a.colorArray&&a.colorArray.destroy(),a.normalArray&&a.normalArray.destroy(),a.texcoordArray&&a.texcoordArray.destroy(),a.featureArray&&a.featureArray.destroy();if(A.children)for(const a of A.children)$b(a)}function OF(A){if(A.meshes)for(const l of A.meshes)l.vertexBuffer&&(l.vertexBuffer.destroy(),l.indexBuffer.destroy(),l.normalBuffer&&l.normalBuffer.destroy(),l.texcoordBuffer&&l.texcoordBuffer.destroy(),l.colorBuffer&&l.colorBuffer.destroy(),l.pbrBuffer&&l.pbrBuffer.destroy(),l.segments.destroy(),l.material&&((a=l.material).pbrMetallicRoughness.baseColorTexture&&a.pbrMetallicRoughness.baseColorTexture.gfxTexture&&a.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),a.pbrMetallicRoughness.metallicRoughnessTexture&&a.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&a.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),a.normalTexture&&a.normalTexture.gfxTexture&&a.normalTexture.gfxTexture.destroy(),a.emissionTexture&&a.emissionTexture.gfxTexture&&a.emissionTexture.gfxTexture.destroy(),a.occlusionTexture&&a.occlusionTexture.gfxTexture&&a.occlusionTexture.gfxTexture.destroy()));var a;if(A.children)for(const l of A.children)OF(l)}class Om{constructor(a,l,h){this._demTile=a,this._dem=this._demTile.dem,this._scale=l,this._offset=h}static create(a,l,h){const g=h||a.findDEMTileFor(l);if(!g||!g.dem)return;const f=g.dem,v=g.tileID,B=1<<l.canonical.z-v.canonical.z;return new Om(g,f.dim/Ut/B,[(l.canonical.x/B-v.canonical.x)*f.dim,(l.canonical.y/B-v.canonical.y)*f.dim])}tileCoordToPixel(a,l){const h=l*this._scale+this._offset[1],g=Math.floor(a*this._scale+this._offset[0]),f=Math.floor(h);return new Dt(g,f)}getElevationAt(a,l,h,g){const f=a*this._scale+this._offset[0],v=l*this._scale+this._offset[1],B=Math.floor(f),F=Math.floor(v),P=this._dem;return g=!!g,h?cr(cr(P.get(B,F,g),P.get(B,F+1,g),v-F),cr(P.get(B+1,F,g),P.get(B+1,F+1,g),v-F),f-B):P.get(B,F,g)}getElevationAtPixel(a,l,h){return this._dem.get(a,l,!!h)}getMeterToDEM(a){return(1<<this._demTile.tileID.canonical.z)*pe(1,a)*this._dem.stride}}const UF=new Float32Array(262144),Ff=new Uint8Array(262144);function QO(A){let a=0;if(A.meshes)for(const l of A.meshes)a=Math.max(a,l.aabb.max[2]);if(A.children)for(const l of A.children)a=Math.max(a,QO(l));return a}function NO(A,a,l){if(A.meshes)for(const h of A.meshes)h.aabb.min[0]!==1/0&&l.insert(a,h.aabb.min[0],h.aabb.min[1],h.aabb.max[0],h.aabb.max[1]);if(A.children)for(const h of A.children)NO(h,a,l)}const VO=["","wall","door","roof","window","lamp","logo"];class HO{constructor(a){this.node=a,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:a.id,geometry:[],properties:{height:QO(a)}},this.aabb=this._getLocalBounds()}_getLocalBounds(){if(!this.node.meshes)return new Qn([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let a=0;const l=new Qn([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const h of this.node.meshes)this.node.lightMeshIndex!==a&&(h.transformedAabb=Qn.applyTransformFast(h.aabb,this.node.matrix),l.encapsulate(h.transformedAabb)),a++;this.aabb=l}return this.aabb}}class ew{constructor(a,l,h,g,f,v){this.id=l,this.modelTraits|=Lm.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,h&&(this.modelTraits|=Lm.HasMapboxMeshFeatures),g&&(this.modelTraits|=Lm.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=f,this.dirty=!0,this.needsUpload=!1,this.nodesInfo=[];for(const B of a)this.nodesInfo.push(new HO(B)),NO(B,v.featureIndexArray.length,v.grid),v.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,v.bucketLayerIDs.length-1,0)}updateFootprints(a,l){for(const h of this.getNodesInfo()){const g=h.node;g.footprint&&l.push({footprint:g.footprint,id:a})}}update(){console.log("Update 3D model bucket")}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(a){if(!this.needsUpload)return;const l=this.getNodesInfo();for(const h of l){const g=h.node;this.uploaded?this.updatePbrBuffer(g):LF(g,a,!0)}for(const h of l)$b(h.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(a){let l=!1;if(!a.meshes)return l;for(const h of a.meshes)h.pbrBuffer&&(h.pbrBuffer.updateData(h.featureArray),l=!0);return l}needsReEvaluation(a,l,h){const g=a.transform.projectionOptions,f=a.style.getBrightness(),v=this.brightness!==f;return!!(!this.uploaded||this.dirty||g.name!==this.projection.name||ty(h.paint.get("model-color").value,v)||ty(h.paint.get("model-color-mix-intensity").value,v)||ty(h.paint.get("model-roughness").value,v)||ty(h.paint.get("model-emissive-strength").value,v)||ty(h.paint.get("model-height-based-emissive-strength-multiplier").value,v))&&(this.projection=g,this.brightness=f,!0)}evaluateScale(a,l){if(a.transform.zoom===this.zoom)return;this.zoom=a.transform.zoom;const h=this.getNodesInfo(),g=this.id.canonical;for(const f of h){const v=f.feature;f.evaluatedScale=l.paint.get("model-scale").evaluate(v,{},g)}}evaluate(a){const l=this.getNodesInfo();for(const h of l){if(!h.node.meshes)continue;const g=h.feature,f=h.node.meshes&&h.node.meshes[0].featureData,v=h.evaluatedColor[2],B=h.evaluatedRMEA[2],F=this.id.canonical;if(h.hasTranslucentParts=!1,f){for(let P=0;P<VO.length;P++){const b=VO[P];b.length&&(g.properties.part=b);const E=a.paint.get("model-color").evaluate(g,{},F).toRenderColor(null),M=a.paint.get("model-color-mix-intensity").evaluate(g,{},F);h.evaluatedColor[P]=[E.r,E.g,E.b,M],h.evaluatedRMEA[P][0]=a.paint.get("model-roughness").evaluate(g,{},F),h.evaluatedRMEA[P][2]=a.paint.get("model-emissive-strength").evaluate(g,{},F),h.evaluatedRMEA[P][3]=E.a,h.emissionHeightBasedParams[P]=a.paint.get("model-height-based-emissive-strength-multiplier").evaluate(g,{},F),!h.hasTranslucentParts&&E.a<1&&(h.hasTranslucentParts=!0)}delete g.properties.part,yZ(h,v!==h.evaluatedColor[2]||B!==h.evaluatedRMEA[2],this.modelTraits)}else h.evaluatedRMEA[0][2]=a.paint.get("model-emissive-strength").evaluate(g,{},F);h.evaluatedScale=a.paint.get("model-scale").evaluate(g,{},F),this.updatePbrBuffer(h.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(a,l,h,g){const f=a.findDEMTileFor(h);if(f&&(f.tileID.canonical!==this.terrainTile||l!==this.terrainExaggeration)){if(f.dem&&f.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=f.tileID.overscaledZ;const v=Om.create(a,h,f);if(!v)return;this.modelTraits&Lm.HasMapboxMeshFeatures&&this.updateDEM(a,v,h,g);for(const B of this.getNodesInfo()){const F=B.node;if(!F.footprint||!F.footprint.vertices||!F.footprint.vertices.length)continue;const P=F.footprint.vertices;let b=v.getElevationAt(P[0].x,P[0].y,!0,!0);for(let E=1;E<P.length;E++)b=Math.min(b,v.getElevationAt(P[E].x,P[E].y,!0,!0));F.elevation=b}}this.terrainTile=f.tileID.canonical,this.terrainExaggeration=l}}updateDEM(a,l,h,g){let f=l._dem._modifiedForSources[g];if(f===void 0&&(l._dem._modifiedForSources[g]=[],f=l._dem._modifiedForSources[g]),f.includes(h.canonical))return;const v=l._dem.dim;f.push(h.canonical);let B=!1;for(const F of this.getNodesInfo()){const P=F.node;if(!P.footprint||!P.footprint.grid)continue;const b=P.footprint.grid,E=l.tileCoordToPixel(b.min.x,b.min.y),M=l.tileCoordToPixel(b.max.x,b.max.y),T=Math.min(Math.min(v-M.y,E.x),Math.min(E.y,v-M.x));if(T<0)continue;const I=xr(T,2,5);let R=Math.max(0,E.x-I),U=Math.max(0,E.y-I),V=Math.min(M.x+I,v-1),X=Math.min(M.y+I,v-1);for(let te=U;te<=X;++te)for(let le=R;le<=V;++le)Ff[te*v+le]=255;let Y=0,H=0;for(let te=0;te<b.cellsY;++te)for(let le=0;le<b.cellsX;++le){if(!b.cells[te*b.cellsX+le])continue;const me=l.tileCoordToPixel(b.min.x+le/b.xScale,b.min.y+te/b.yScale),ve=l.tileCoordToPixel(b.min.x+(le+1)/b.xScale,b.min.y+(te+1)/b.yScale);for(let de=me.y;de<=Math.min(ve.y+1,v-1);++de)for(let Ce=me.x;Ce<=Math.min(ve.x+1,v-1);++Ce)Ff[de*v+Ce]===255&&(Ff[de*v+Ce]=0,Y+=l.getElevationAtPixel(Ce,de),H++)}const $=Y/H;R=Math.max(1,E.x-I),U=Math.max(1,E.y-I),V=Math.min(M.x+I,v-2),X=Math.min(M.y+I,v-2),B=!0;for(let te=U;te<=X;++te)for(let le=R;le<=V;++le)Ff[te*v+le]===0&&(UF[te*v+le]=l._dem.set(le,te,$));for(let te=1;te<I;++te){R=Math.max(1,E.x-te),U=Math.max(1,E.y-te),V=Math.min(M.x+te,v-2),X=Math.min(M.y+te,v-2);for(let le=U;le<=X;++le)for(let me=R;me<=V;++me){const ve=le*v+me;if(Ff[ve]===255){let de=0,Ce=0,_e=-1,Te=-1;for(let Oe=-1;Oe<=1;++Oe)for(let Ve=-1;Ve<=1;++Ve){const je=(le+Oe)*v+me+Ve;if(Ff[je]>=te)continue;const We=UF[je],et=Math.abs(We);et>Ce&&(de=We,Ce=et,_e=Ve,Te=Oe)}if(Ce>.1){const Oe=1-(te+.5*Math.abs(_e*Te))/I;let Ve=l._dem.get(me,le)+de*Oe;const je=l._dem.get(me+_e,le+Te),We=l._dem.get(me-_e,le-Te,!0);(Ve-je)*(Ve-We)>0&&(Ve=(je+We)/2),UF[ve]=l._dem.set(me,le,Ve),Ff[ve]=te}}}}}B&&(l._demTile.needsDEMTextureUpload=!0,l._dem._timestamp=Nt.now())}getNodesInfo(){return this.nodesInfo}destroy(){const a=this.getNodesInfo();for(const l of a)$b(l.node),OF(l.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(a,l){if(l.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=l.updateTime;const h=l.getReplacementRegionsForTile(a.toUnwrapped()),g=this.getNodesInfo();for(let f=0;f<this.nodesInfo.length;f++){const v=g[f].node;g[f].hiddenByReplacement=!!v.footprint&&!h.find(B=>B.footprint===v.footprint)}}getHeightAtTileCoord(a,l){const h=this.getNodesInfo(),g=[],f=[0,0,0],v=ke.mat4.identity([]);for(let B=0;B<this.nodesInfo.length;B++){const F=h[B],P=F.node.meshes[0],b=P.transformedAabb;if(a<b.min[0]||l<b.min[1]||a>b.max[0]||l>b.max[1])continue;if(F.node.hidden===!0)return{height:1/0,maxHeight:F.feature.properties.height,hidden:!1,verticalScale:F.evaluatedScale[2]};ke.mat4.invert(v,F.node.matrix),f[0]=a,f[1]=l,ke.vec3.transformMat4(f,f,v);const E=(f[0]-P.aabb.min[0])/(P.aabb.max[0]-P.aabb.min[0])*Tf|0,M=Math.min(63,(f[1]-P.aabb.min[1])/(P.aabb.max[1]-P.aabb.min[1])*Tf|0)*Tf+Math.min(63,E),T=P.heightmap[M];if(!(T<0&&F.node.footprint))return F.hiddenByReplacement?void 0:{height:T,maxHeight:F.feature.properties.height,hidden:!1,verticalScale:F.evaluatedScale[2]};if(F.node.footprint.grid.query(new Dt(a,l),new Dt(a,l),g),g.length>0)return{height:void 0,maxHeight:F.feature.properties.height,hidden:F.hiddenByReplacement,verticalScale:F.evaluatedScale[2]}}}}function ty(A,a){return!A.isLightConstant&&a}function vZ(A,a,l,h,g,f,v,B){let F=(61440&a|(61440&a)>>4)>>8,P=(3840&a|(3840&a)>>4)>>4,b=240&a|(240&a)>>4;l[3]>0&&(F=cr(F,255*l[0],l[3]),P=cr(P,255*l[1],l[3]),b=cr(b,255*l[2],l[3]));const E=F<<8|P,M=b<<8|Math.floor(255*h[3]),T=function(te){const le=xr(te,0,2);return Math.min(Math.round(.5*le*255),255)}(h[2])<<8|15*h[0]<<4|15*h[1],I=xr(g[0],0,1),R=xr(g[1],0,1),U=xr(g[2],0,1),V=xr(g[3],0,1);let X,Y,H,$;if(I!==R&&v!==f&&R!==I){const te=v-f;Y=1/(te*(R-I)),H=-(f+te*I)/(te*(R-I));const le=xr(g[4],-1,1);$=Math.pow(10,le),X=255*U<<8|255*V}else X=65535,Y=0,H=1,$=1;if(A.emplaceBack(E,M,T,X,Y,H,$),B){const te=B.length;B.clear();for(let le=0;le<te;le++)B.emplaceBack(E,M,T,X,Y,H,$)}}function yZ(A,a,l){const h=A.node;let g=0;const f=l&Lm.HasMeshoptCompression;for(const v of h.meshes){if(h.lights&&h.lightMeshIndex===g||!v.featureData)continue;v.featureArray=new xm,v.featureArray.reserve(v.featureData.length);let B=a;for(const F of v.featureData){const P=f?65535&F:F>>16&65535,b=f?F>>16&65535:65535&F,E=(15&b)<8?15&b:0,M=A.evaluatedRMEA[E],T=A.evaluatedColor[E],I=A.emissionHeightBasedParams[E];let R;if(B&&E===2&&h.lights&&(R=new xm,R.resize(10*h.lights.length)),vZ(v.featureArray,P,T,M,I,v.aabb.min[2],v.aabb.max[2],R),R&&B){B=!1;const U=h.meshes[h.lightMeshIndex];U.featureArray=R,U.featureArray._trim()}}v.featureArray._trim(),g++}}function jO(A,a,l,h){const g=1<<A.z;a.lat=be((h/Ut+A.y)/g),a.lng=we((l/Ut+A.x)/g)}Wt(ew,"Tiled3dModelBucket",{omit:["layers"]}),Wt(HO,"Tiled3dModelFeature");const _Z={circle:class extends Zo{constructor(A,a,l,h){super(A,{layout:wn||(wn=new ri({"circle-sort-key":new nr($e.layout_circle["circle-sort-key"]),visibility:new kt($e.layout_circle.visibility)})),paint:wi||(wi=new ri({"circle-radius":new nr($e.paint_circle["circle-radius"]),"circle-color":new nr($e.paint_circle["circle-color"]),"circle-blur":new nr($e.paint_circle["circle-blur"]),"circle-opacity":new nr($e.paint_circle["circle-opacity"]),"circle-translate":new kt($e.paint_circle["circle-translate"]),"circle-translate-anchor":new kt($e.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new kt($e.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new kt($e.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new nr($e.paint_circle["circle-stroke-width"]),"circle-stroke-color":new nr($e.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new nr($e.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new kt($e.paint_circle["circle-emissive-strength"])}))},a,l,h)}createBucket(A){return new ir(A)}queryRadius(A){const a=A;return ni("circle-radius",this,a)+ni("circle-stroke-width",this,a)+En(this.paint.get("circle-translate"))}queryIntersectsFeature(A,a,l,h,g,f,v,B){const F=dn(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),f.angle,A.pixelToTileUnitsFactor),P=this.paint.get("circle-radius").evaluate(a,l)+this.paint.get("circle-stroke-width").evaluate(a,l);return bR(A,h,f,v,B,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",F,P)}getProgramIds(){return["circle"]}getDefaultProgramParams(A,a,l){const h=xR(this);return{config:new nA(this,{zoom:a,lut:l}),defines:h,overrideFog:!1}}},heatmap:class extends Zo{createBucket(A){return new BR(A)}constructor(A,a,l,h){super(A,{layout:CR||(CR=new ri({visibility:new kt($e.layout_heatmap.visibility)})),paint:SR||(SR=new ri({"heatmap-radius":new nr($e.paint_heatmap["heatmap-radius"]),"heatmap-weight":new nr($e.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new kt($e.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Hs($e.paint_heatmap["heatmap-color"]),"heatmap-opacity":new kt($e.paint_heatmap["heatmap-opacity"])}))},a,l,h),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(A){A==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=kv({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(A){return ni("heatmap-radius",this,A)}queryIntersectsFeature(A,a,l,h,g,f,v,B){const F=this.paint.get("heatmap-radius").evaluate(a,l);return bR(A,h,f,v,B,!0,!0,new Dt(0,0),F)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(A,a,l){return A==="heatmap"?{config:new nA(this,{zoom:a,lut:l}),overrideFog:!1}:{}}},hillshade:class extends Zo{constructor(A,a,l,h){super(A,{layout:ER||(ER=new ri({visibility:new kt($e.layout_hillshade.visibility)})),paint:TR||(TR=new ri({"hillshade-illumination-direction":new kt($e.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new kt($e.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new kt($e.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new kt($e.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new kt($e.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new kt($e.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new kt($e.paint_hillshade["hillshade-emissive-strength"])}))},a,l,h)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(A,a,l){return{overrideFog:!1}}},fill:class extends Zo{constructor(A,a,l,h){super(A,{layout:LR||(LR=new ri({"fill-sort-key":new nr($e.layout_fill["fill-sort-key"]),visibility:new kt($e.layout_fill.visibility)})),paint:OR||(OR=new ri({"fill-antialias":new kt($e.paint_fill["fill-antialias"]),"fill-opacity":new nr($e.paint_fill["fill-opacity"]),"fill-color":new nr($e.paint_fill["fill-color"]),"fill-outline-color":new nr($e.paint_fill["fill-outline-color"]),"fill-translate":new kt($e.paint_fill["fill-translate"]),"fill-translate-anchor":new kt($e.paint_fill["fill-translate-anchor"]),"fill-pattern":new nr($e.paint_fill["fill-pattern"]),"fill-emissive-strength":new kt($e.paint_fill["fill-emissive-strength"]),"fill-z-offset":new nr($e.paint_fill["fill-z-offset"])}))},a,l,h)}getProgramIds(){const A=this.paint.get("fill-pattern"),a=A&&A.constantOr(1),l=[a?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&l.push(a&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),l}getDefaultProgramParams(A,a,l){return{config:new nA(this,{zoom:a,lut:l}),overrideFog:!1}}recalculate(A,a){super.recalculate(A,a);const l=this.paint._values["fill-outline-color"];l.value.kind==="constant"&&l.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(A){return new tF(A)}queryRadius(){return En(this.paint.get("fill-translate"))}queryIntersectsFeature(A,a,l,h,g,f){return!A.queryGeometry.isAboveHorizon&&ur(Mr(A.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),f.angle,A.pixelToTileUnitsFactor),h)}isTileClipped(){return!0}is3D(){return this.paint.get("fill-z-offset").constantOr(1)!==0}},"fill-extrusion":class extends Zo{constructor(A,a,l,h){super(A,{layout:vL||(vL=new ri({visibility:new kt($e["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new kt($e["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:yL||(yL=new ri({"fill-extrusion-opacity":new kt($e["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new nr($e["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new kt($e["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new kt($e["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new nr($e["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new nr($e["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new nr($e["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new kt($e["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new kt($e["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new kt($e["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new kt($e["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new kt($e["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new kt($e["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new kt($e["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new kt($e["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new nr($e["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new nr($e["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new kt($e["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new kt($e["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new kt($e["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new kt($e["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new nr($e["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new nr($e["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new kt($e["paint_fill-extrusion"]["fill-extrusion-cast-shadows"])}))},a,l,h),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(A){return new Mb(A)}queryRadius(){return En(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(A,a,l,h,g,f,v,B,F){const P=dn(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),f.angle,A.pixelToTileUnitsFactor),b=this.paint.get("fill-extrusion-height").evaluate(a,l),E=this.paint.get("fill-extrusion-base").evaluate(a,l),M=[0,0],T=B&&f.elevation,I=f.elevation?f.elevation.exaggeration():1,R=A.tile.getBucket(this);if(T&&R instanceof Mb){const H=R.centroidVertexArray,$=F+1;$<H.length&&(M[0]=H.geta_centroid_pos0($),M[1]=H.geta_centroid_pos1($))}if(M[0]===0&&M[1]===1)return!1;f.projection.name==="globe"&&(h=gL([h],[new Dt(0,0),new Dt(Ut,Ut)],A.tileID.canonical).map(H=>H.polygon).flat());const U=T?B:null,[V,X]=function(H,$,te,le,me,ve,de,Ce,_e,Te,Oe){return H.projection.name==="globe"?function(Ve,je,We,et,qe,At,xt,at,Vt,Ot,Ft){const Bt=[],or=[],Qt=Ve.projection.upVectorScale(Ft,Ve.center.lat,Ve.worldSize).metersToTile,jt=[0,0,0,1],gr=[0,0,0,1],Pr=(Tr,Ur,zr,Mn)=>{Tr[0]=Ur,Tr[1]=zr,Tr[2]=Mn,Tr[3]=1},Er=mL();We>0&&(We+=Er),et+=Er;for(const Tr of je){const Ur=[],zr=[];for(const Mn of Tr){const Bn=Mn.x+qe.x,_r=Mn.y+qe.y,vn=Ve.projection.projectTilePoint(Bn,_r,Ft),bn=Ve.projection.upVector(Ft,Mn.x,Mn.y);let qn=We,Fi=et;if(xt){const zi=xL(Bn,_r,We,et,xt,at,Vt,Ot);qn+=zi.base,Fi+=zi.top}We!==0?Pr(jt,vn.x+bn[0]*Qt*qn,vn.y+bn[1]*Qt*qn,vn.z+bn[2]*Qt*qn):Pr(jt,vn.x,vn.y,vn.z),Pr(gr,vn.x+bn[0]*Qt*Fi,vn.y+bn[1]*Qt*Fi,vn.z+bn[2]*Qt*Fi),ke.vec3.transformMat4(jt,jt,At),ke.vec3.transformMat4(gr,gr,At),Ur.push(new Ef(jt[0],jt[1],jt[2])),zr.push(new Ef(gr[0],gr[1],gr[2]))}Bt.push(Ur),or.push(zr)}return[Bt,or]}(H,$,te,le,me,ve,de,Ce,_e,Te,Oe):de?function(Ve,je,We,et,qe,At,xt,at,Vt){const Ot=[],Ft=[],Bt=[0,0,0,1];for(const or of Ve){const Qt=[],jt=[];for(const gr of or){const Pr=gr.x+et.x,Er=gr.y+et.y,Tr=xL(Pr,Er,je,We,At,xt,at,Vt);Bt[0]=Pr,Bt[1]=Er,Bt[2]=Tr.base,Bt[3]=1,ke.vec4.transformMat4(Bt,Bt,qe),Bt[3]=Math.max(Bt[3],1e-5);const Ur=new Ef(Bt[0]/Bt[3],Bt[1]/Bt[3],Bt[2]/Bt[3]);Bt[0]=Pr,Bt[1]=Er,Bt[2]=Tr.top,Bt[3]=1,ke.vec4.transformMat4(Bt,Bt,qe),Bt[3]=Math.max(Bt[3],1e-5);const zr=new Ef(Bt[0]/Bt[3],Bt[1]/Bt[3],Bt[2]/Bt[3]);Qt.push(Ur),jt.push(zr)}Ot.push(Qt),Ft.push(jt)}return[Ot,Ft]}($,te,le,me,ve,de,Ce,_e,Te):function(Ve,je,We,et,qe){const At=[],xt=[],at=qe[8]*je,Vt=qe[9]*je,Ot=qe[10]*je,Ft=qe[11]*je,Bt=qe[8]*We,or=qe[9]*We,Qt=qe[10]*We,jt=qe[11]*We;for(const gr of Ve){const Pr=[],Er=[];for(const Tr of gr){const Ur=Tr.x+et.x,zr=Tr.y+et.y,Mn=qe[0]*Ur+qe[4]*zr+qe[12],Bn=qe[1]*Ur+qe[5]*zr+qe[13],_r=qe[2]*Ur+qe[6]*zr+qe[14],vn=qe[3]*Ur+qe[7]*zr+qe[15],bn=Mn+at,qn=Bn+Vt,Fi=_r+Ot,zi=Math.max(vn+Ft,1e-5),Ii=Mn+Bt,mi=Bn+or,_o=_r+Qt,ji=Math.max(vn+jt,1e-5);Pr.push(new Ef(bn/zi,qn/zi,Fi/zi)),Er.push(new Ef(Ii/ji,mi/ji,_o/ji))}At.push(Pr),xt.push(Er)}return[At,xt]}($,te,le,me,ve)}(f,h,E,b,P,v,U,M,I,f.center.lat,A.tileID.canonical),Y=A.queryGeometry;return function(H,$,te){let le=1/0;ur(te,$)&&(le=_L(te,$[0]));for(let me=0;me<$.length;me++){const ve=$[me],de=H[me];for(let Ce=0;Ce<ve.length-1;Ce++){const _e=ve[Ce],Te=[_e,ve[Ce+1],de[Ce+1],de[Ce],_e];Lt(te,Te)&&(le=Math.min(le,_L(te,Te)))}}return le!==1/0&&le}(V,X,Y.isPointQuery()?Y.screenBounds:Y.screenGeometry)}},line:class extends Zo{constructor(A,a,l,h){const g=ML();super(A,g,a,l,h),g.layout&&(this.layout=new gh(g.layout)),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(A){if(A==="line-gradient"){const a=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=a._styleExpression&&a._styleExpression.expression instanceof of,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(A,a){super.recalculate(A,a),this.paint._values["line-floorwidth"]=(()=>{if(Hv)return Hv;const l=ML();return Hv=new wX(l.paint.properties["line-width"].specification),Hv.useIntegerZoom=!0,Hv})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,A)}createBucket(A){return new AF(A)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(A,a,l){const h=FL(this);return{config:new nA(this,{zoom:a,lut:l}),defines:h,overrideFog:!1}}queryRadius(A){const a=A,l=PL(ni("line-width",this,a),ni("line-gap-width",this,a)),h=ni("line-offset",this,a);return l/2+Math.abs(h)+En(this.paint.get("line-translate"))}queryIntersectsFeature(A,a,l,h,g,f){if(A.queryGeometry.isAboveHorizon)return!1;const v=Mr(A.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),f.angle,A.pixelToTileUnitsFactor),B=A.pixelToTileUnitsFactor/2*PL(this.paint.get("line-width").evaluate(a,l),this.paint.get("line-gap-width").evaluate(a,l)),F=this.paint.get("line-offset").evaluate(a,l);return F&&(h=function(P,b){const E=[],M=new Dt(0,0);for(let T=0;T<P.length;T++){const I=P[T],R=[];for(let U=0;U<I.length;U++){const V=I[U],X=I[U+1],Y=U===0?M:V.sub(I[U-1])._unit()._perp(),H=U===I.length-1?M:X.sub(V)._unit()._perp(),$=Y._add(H)._unit();$._mult(1/($.x*H.x+$.y*H.y)),R.push($._mult(b)._add(V))}E.push(R)}return E}(h,F*A.pixelToTileUnitsFactor)),function(P,b,E){for(let M=0;M<b.length;M++){const T=b[M];if(P.length>=3){for(let I=0;I<T.length;I++)if(Wn(P,T[I]))return!0}if(Zt(P,T,E))return!0}return!1}(v,h,B)}isTileClipped(){return!0}isDraped(A){const a=this.layout.get("line-z-offset");return a.isConstant()&&!a.constantOr(0)}},symbol:Kb,background:class extends Zo{constructor(A,a,l,h){super(A,{layout:pO||(pO=new ri({visibility:new kt($e.layout_background.visibility)})),paint:mO||(mO=new ri({"background-pitch-alignment":new kt($e.paint_background["background-pitch-alignment"]),"background-color":new kt($e.paint_background["background-color"]),"background-pattern":new kt($e.paint_background["background-pattern"]),"background-opacity":new kt($e.paint_background["background-opacity"]),"background-emissive-strength":new kt($e.paint_background["background-emissive-strength"])}))},a,l,h)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(A,a,l){return{overrideFog:!1}}is3D(){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:xO,"raster-particle":EO,sky:class extends Zo{constructor(A,a,l,h){super(A,{layout:BO||(BO=new ri({visibility:new kt($e.layout_sky.visibility)})),paint:CO||(CO=new ri({"sky-type":new kt($e.paint_sky["sky-type"]),"sky-atmosphere-sun":new kt($e.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new kt($e.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new kt($e.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new kt($e.paint_sky["sky-gradient-radius"]),"sky-gradient":new Hs($e.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new kt($e.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new kt($e.paint_sky["sky-atmosphere-color"]),"sky-opacity":new kt($e.paint_sky["sky-opacity"])}))},a,l,h),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(A){A==="sky-gradient"?this._updateColorRamp():A!=="sky-atmosphere-sun"&&A!=="sky-atmosphere-halo-color"&&A!=="sky-atmosphere-color"&&A!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=kv({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(A){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const a=A.style.light.properties.get("position");return this._lightPosition.azimuthal!==a.azimuthal||this._lightPosition.polar!==a.polar}return!1}getCenter(A,a){if(this.paint.get("sky-type")==="atmosphere"){const h=this.paint.get("sky-atmosphere-sun"),g=!h,f=A.style.light,v=f.properties.get("position");return g&&f.properties.get("anchor")==="viewport"&&tn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),g?PF(v.azimuthal,90-v.polar,a):PF(h[0],90-h[1],a)}const l=this.paint.get("sky-gradient-center");return PF(l[0],90-l[1],a)}isSky(){return!0}markSkyboxValid(A){this._skyboxInvalidated=!1,this._lightPosition=A.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const A=this.paint.get("sky-type");return A==="atmosphere"?["skyboxCapture","skybox"]:A==="gradient"?["skyboxGradient"]:null}},slot:class extends Zo{constructor(A,a,l,h){super(A,{paint:SO||(SO=new ri({}))},a,null)}},model:class extends Zo{constructor(A,a,l,h){super(A,{layout:OO||(OO=new ri({visibility:new kt($e.layout_model.visibility),"model-id":new nr($e.layout_model["model-id"])})),paint:UO||(UO=new ri({"model-opacity":new kt($e.paint_model["model-opacity"]),"model-rotation":new nr($e.paint_model["model-rotation"]),"model-scale":new nr($e.paint_model["model-scale"]),"model-translation":new nr($e.paint_model["model-translation"]),"model-color":new nr($e.paint_model["model-color"]),"model-color-mix-intensity":new nr($e.paint_model["model-color-mix-intensity"]),"model-type":new kt($e.paint_model["model-type"]),"model-cast-shadows":new kt($e.paint_model["model-cast-shadows"]),"model-receive-shadows":new kt($e.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new kt($e.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new nr($e.paint_model["model-emissive-strength"]),"model-roughness":new nr($e.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new nr($e.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new kt($e.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new kt($e.paint_model["model-front-cutoff"])}))},a,l,h),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(A){return new RF(A)}getProgramIds(){return["model"]}is3D(){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(A){return A instanceof ew?Ut-1:0}queryIntersectsFeature(A,a,l,h,g,f){if(!this.modelManager)return!1;const v=this.modelManager,B=A.tile.getBucket(this);if(!(B&&B instanceof RF))return!1;const F=B;for(const P in F.instancesPerModel){const b=F.instancesPerModel[P],E=a.id!==void 0?a.id:a.properties&&a.properties.hasOwnProperty("id")?a.properties.id:void 0;if(b.idToFeaturesIndex.hasOwnProperty(E)){const M=b.features[b.idToFeaturesIndex[E]],T=v.getModel(P,this.scope);if(!T)return!1;let I=ke.mat4.create();const R=new Z(0,0),U=F.canonical;let V=Number.MAX_VALUE;for(let X=0;X<M.instancedDataCount;++X){const Y=16*(M.instancedDataOffset+X),H=b.instancedDataArray.float32,$=[H[Y+4],H[Y+5],H[Y+6]];jO(U,R,H[Y],0|H[Y+1]),zO(I,T,f,R,M.rotation,M.scale,$,!1,!1,!1),f.projection.name==="globe"&&(I=kF(I,f));const te=ke.mat4.multiply([],f.projMatrix,I),le=A.queryGeometry,me=PO(le.isPointQuery()?le.screenBounds:le.screenGeometry,f,te,T.aabb);me!=null&&(V=Math.min(me,V))}return V!==Number.MAX_VALUE&&V}}return!1}_handleOverridablePaintPropertyUpdate(A,a,l){return!(!this.layout||a.isDataDriven()||l.isDataDriven()||A!=="model-color"&&A!=="model-color-mix-intensity"&&A!=="model-rotation"&&A!=="model-scale"&&A!=="model-translation"&&A!=="model-emissive-strength")}_isPropertyZoomDependent(A){const a=this._transitionablePaint._values[A];return a!=null&&a.value!=null&&a.value.expression!=null&&a.value.expression instanceof yl}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}queryIntersectsMatchingFeature(A,a,l,h){const g=A.tile,f=g.getBucket(this);let v=null,B=Number.MAX_VALUE;if(!(f&&f instanceof ew))return{queryFeature:v,intersectionZ:B};const F=f.getNodesInfo()[a];if(F.hiddenByReplacement||!F.node.meshes||!l.filter(new xi(g.tileID.overscaledZ),F.feature,g.tileID.canonical))return{queryFeature:v,intersectionZ:B};const P=F.node,b=h.calculatePosMatrix(g.tileID.toUnwrapped(),h.worldSize),E=F.evaluatedScale;let M=0;h.elevation&&P.elevation&&(M=P.elevation*h.elevation.exaggeration()),ke.mat4.translate(b,b,[(P.anchor?P.anchor[0]:0)*(E[0]-1),(P.anchor?P.anchor[1]:0)*(E[1]-1),M]),ke.mat4.scale(b,b,E),ke.mat4.multiply(b,b,P.matrix);const T=A.queryGeometry,I=T.isPointQuery()?T.screenBounds:T.screenGeometry,R=function(V){const X=ke.mat4.multiply([],b,V.matrix),Y=ke.mat4.multiply(X,h.expandedFarZProjMatrix,X);for(let H=0;H<V.meshes.length;++H){const $=V.meshes[H];if(H===V.lightMeshIndex)continue;const te=PO(I,h,Y,$.aabb);te!=null&&(B=Math.min(te,B))}if(V.children)for(const H of V.children)R(H)};if(R(P),B===Number.MAX_VALUE)return{queryFeature:v,intersectionZ:B};const U=new Z(0,0);return jO(g.tileID.canonical,U,F.node.anchor[0],F.node.anchor[1]),v={type:"Feature",geometry:{type:"Point",coordinates:[U.lng,U.lat]},properties:F.feature.properties,id:F.feature.id,state:{},layer:this.serialize()},{queryFeature:v,intersectionZ:B}}},clip:class extends Zo{constructor(A,a,l,h){super(A,{layout:UR||(UR=new ri({"clip-layer-types":new kt($e.layout_clip["clip-layer-types"]),"clip-layer-scope":new kt($e.layout_clip["clip-layer-scope"])})),paint:zR||(zR=new ri({}))},a,l,h)}recalculate(A,a){super.recalculate(A,a)}createBucket(A){return new QR(A)}isTileClipped(){return!0}is3D(){return!0}}};class xZ{constructor(a){this._callback=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class bZ{constructor(){this.tasks={},this.taskQueue=[],Vc(["process"],this),this.invoker=new xZ(this.process),this.nextId=0}add(a,l){const h=this.nextId++,g=function({type:f,isSymbolTile:v,zoom:B}){return B=B||0,f==="message"?0:f!=="maybePrepare"||v?f!=="parseTile"||v?f==="parseTile"&&v?300-B:f==="maybePrepare"&&v?400-B:500:200-B:100-B}(l);if(g===0){try{a()}finally{}return null}return this.tasks[h]={fn:a,metadata:l,priority:g,id:h},this.taskQueue.push(h),this.invoker.trigger(),{cancel:()=>{delete this.tasks[h]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(h=>!!this.tasks[h]),!this.taskQueue.length)return;const a=this.pick();if(a===null)return;const l=this.tasks[a];if(delete this.tasks[a],this.taskQueue.length&&this.invoker.trigger(),!l)return;l.fn()}finally{}}pick(){let a=null,l=1/0;for(let g=0;g<this.taskQueue.length;g++){const f=this.tasks[this.taskQueue[g]];f.priority<l&&(l=f.priority,a=g)}if(a===null)return null;const h=this.taskQueue[a];return this.taskQueue.splice(a,1),h}remove(){this.invoker.remove()}}class GO{constructor(a,l,h){this.target=a,this.parent=l,this.mapId=h,this.callbacks={},this.cancelCallbacks={},Vc(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new bZ}send(a,l,h,g,f=!1,v){const B=Math.round(1e18*Math.random()).toString(36).substring(0,10);h&&(h.metadata=v,this.callbacks[B]=h);const F=new Set;return this.target.postMessage({id:B,type:a,hasCallback:!!h,targetMapId:g,mustQueue:f,sourceMapId:this.mapId,data:Da(l,F)},F),{cancel:()=>{h&&delete this.callbacks[B],this.target.postMessage({id:B,type:"<cancel>",targetMapId:g,sourceMapId:this.mapId})}}}receive(a){const l=a.data,h=l.id;if(h&&(!l.targetMapId||this.mapId===l.targetMapId))if(l.type==="<cancel>"){const g=this.cancelCallbacks[h];delete this.cancelCallbacks[h],g&&g.cancel()}else if(l.mustQueue||sa()){const g=this.callbacks[h],f=this.scheduler.add(()=>this.processTask(h,l),g&&g.metadata||{type:"message"});f&&(this.cancelCallbacks[h]=f)}else this.processTask(h,l)}processTask(a,l){if(delete this.cancelCallbacks[a],l.type==="<response>"){const h=this.callbacks[a];delete this.callbacks[a],h&&(l.error?h(Ju(l.error)):h(null,Ju(l.data)))}else{const h=new Set,g=l.hasCallback?(v,B)=>{this.target.postMessage({id:a,type:"<response>",sourceMapId:this.mapId,error:v?Da(v):null,data:Da(B,h)},h)}:v=>{},f=Ju(l.data);if(this.parent[l.type])this.parent[l.type](l.sourceMapId,f,g);else if(this.parent.getWorkerSource){const v=l.type.split(".");this.parent.getWorkerSource(l.sourceMapId,v[0],f.source,f.scope)[v[1]](f,g)}else g(new Error(`Could not find function ${l.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}class Um{constructor(a,l){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=Qc();const h=this.workerPool.acquire(this.id);for(let g=0;g<h.length;g++){const f=new Um.Actor(h[g],l,this.id);f.name=`Worker ${g}`,this.actors.push(f)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(a,l,h){ia(this.actors,(g,f)=>{g.send(a,l,f)},h=h||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(a=>{a.remove()}),this.actors=[],this.workerPool.release(this.id)}}Um.Actor=GO;class KO{constructor(a){this.size=a,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(a,l){const h=this.toIdx(a,l);return{min:this.minimums[h],max:this.maximums[h]}}isLeaf(a,l){return this.leaves[this.toIdx(a,l)]}toIdx(a,l){return l*this.size+a}}function WO(A,a,l,h){let g=0,f=Number.MAX_VALUE;for(let v=0;v<3;v++)if(Math.abs(h[v])<1e-15){if(l[v]<A[v]||l[v]>a[v])return null}else{const B=1/h[v];let F=(A[v]-l[v])*B,P=(a[v]-l[v])*B;if(F>P){const b=F;F=P,P=b}if(F>g&&(g=F),P<f&&(f=P),g>f)return null}return g}function qO(A,a,l,h,g,f,v,B,F,P,b){const E=h-A,M=g-a,T=f-l,I=v-A,R=B-a,U=F-l,V=b[1]*U-b[2]*R,X=b[2]*I-b[0]*U,Y=b[0]*R-b[1]*I,H=E*V+M*X+T*Y;if(Math.abs(H)<1e-15)return null;const $=1/H,te=P[0]-A,le=P[1]-a,me=P[2]-l,ve=(te*V+le*X+me*Y)*$;if(ve<0||ve>1)return null;const de=le*T-me*M,Ce=me*E-te*T,_e=te*M-le*E,Te=(b[0]*de+b[1]*Ce+b[2]*_e)*$;return Te<0||ve+Te>1?null:(I*de+R*Ce+U*_e)*$}function XO(A,a,l){return(A-a)/(l-a)}function ZO(A,a,l,h,g,f,v,B,F){const P=1<<l,b=f-h,E=v-g,M=(A+1)/P*b+h,T=(a+0)/P*E+g,I=(a+1)/P*E+g;B[0]=(A+0)/P*b+h,B[1]=T,F[0]=M,F[1]=I}class YO{constructor(a){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=a,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const l=function(f){const v=Math.ceil(Math.log2(f.dim/8)),B=[];let F=Math.ceil(Math.pow(2,v));const P=1/F,b=(T,I,R,U,V)=>{const X=U?1:0,Y=(T+1)*R-X,H=I*R,$=(I+1)*R-X;V[0]=T*R,V[1]=H,V[2]=Y,V[3]=$};let E=new KO(F);const M=[];for(let T=0;T<F*F;T++){b(T%F,Math.floor(T/F),P,!1,M);const I=Rh(M[0],M[1],f),R=Rh(M[2],M[1],f),U=Rh(M[2],M[3],f),V=Rh(M[0],M[3],f);E.minimums.push(Math.min(I,R,U,V)),E.maximums.push(Math.max(I,R,U,V)),E.leaves.push(1)}for(B.push(E),F/=2;F>=1;F/=2){const T=B[B.length-1];E=new KO(F);for(let I=0;I<F*F;I++){b(I%F,Math.floor(I/F),2,!0,M);const R=T.getElevation(M[0],M[1]),U=T.getElevation(M[2],M[1]),V=T.getElevation(M[2],M[3]),X=T.getElevation(M[0],M[3]),Y=T.isLeaf(M[0],M[1]),H=T.isLeaf(M[2],M[1]),$=T.isLeaf(M[2],M[3]),te=T.isLeaf(M[0],M[3]),le=Math.min(R.min,U.min,V.min,X.min),me=Math.max(R.max,U.max,V.max,X.max),ve=Y&&H&&$&&te;E.maximums.push(me),E.minimums.push(le),E.leaves.push(me-le<=5&&ve?1:0)}B.push(E)}return B}(this.dem),h=l.length-1,g=l[h];this._addNode(g.minimums[0],g.maximums[0],g.leaves[0]),this._construct(l,0,0,h,0)}raycastRoot(a,l,h,g,f,v,B=1){return WO([a,l,-100],[h,g,this.maximums[0]*B],f,v)}raycast(a,l,h,g,f,v,B=1){if(!this.nodeCount)return null;const F=this.raycastRoot(a,l,h,g,f,v,B);if(F==null)return null;const P=[],b=[],E=[],M=[],T=[{idx:0,t:F,nodex:0,nodey:0,depth:0}];for(;T.length>0;){const{idx:I,t:R,nodex:U,nodey:V,depth:X}=T.pop();if(this.leaves[I]){ZO(U,V,X,a,l,h,g,E,M);const H=1<<X,$=(U+0)/H,te=(U+1)/H,le=(V+0)/H,me=(V+1)/H,ve=Rh($,le,this.dem)*B,de=Rh(te,le,this.dem)*B,Ce=Rh(te,me,this.dem)*B,_e=Rh($,me,this.dem)*B,Te=qO(E[0],E[1],ve,M[0],E[1],de,M[0],M[1],Ce,f,v),Oe=qO(M[0],M[1],Ce,E[0],M[1],_e,E[0],E[1],ve,f,v),Ve=Math.min(Te!==null?Te:Number.MAX_VALUE,Oe!==null?Oe:Number.MAX_VALUE);if(Ve!==Number.MAX_VALUE)return Ve;{const je=ke.vec3.scaleAndAdd([],f,v,R);if(JO(ve,de,_e,Ce,XO(je[0],E[0],M[0]),XO(je[1],E[1],M[1]))>=je[2])return R}continue}let Y=0;for(let H=0;H<this._siblingOffset.length;H++){ZO((U<<1)+this._siblingOffset[H][0],(V<<1)+this._siblingOffset[H][1],X+1,a,l,h,g,E,M),E[2]=-100,M[2]=this.maximums[this.childOffsets[I]+H]*B;const $=WO(E,M,f,v);if($!=null){const te=$;P[H]=te;let le=!1;for(let me=0;me<Y&&!le;me++)te>=P[b[me]]&&(b.splice(me,0,H),le=!0);le||(b[Y]=H),Y++}}for(let H=0;H<Y;H++){const $=b[H];T.push({idx:this.childOffsets[I]+$,t:P[$],nodex:(U<<1)+this._siblingOffset[$][0],nodey:(V<<1)+this._siblingOffset[$][1],depth:X+1})}}return null}_addNode(a,l,h){return this.minimums.push(a),this.maximums.push(l),this.leaves.push(h),this.childOffsets.push(0),this.nodeCount++}_construct(a,l,h,g,f){if(a[g].isLeaf(l,h)===1)return;this.childOffsets[f]||(this.childOffsets[f]=this.nodeCount);const v=g-1,B=a[v];let F=0,P=0;for(let b=0;b<this._siblingOffset.length;b++){const E=2*l+this._siblingOffset[b][0],M=2*h+this._siblingOffset[b][1],T=B.getElevation(E,M),I=B.isLeaf(E,M),R=this._addNode(T.min,T.max,I);I&&(F|=1<<b),P||(P=R)}for(let b=0;b<this._siblingOffset.length;b++)F&1<<b||this._construct(a,2*l+this._siblingOffset[b][0],2*h+this._siblingOffset[b][1],v,P+b)}}function JO(A,a,l,h,g,f){return cr(cr(A,l,f),cr(a,h,f),g)}function Rh(A,a,l){const h=l.dim,g=xr(A*h-.5,0,h-1),f=xr(a*h-.5,0,h-1),v=Math.floor(g),B=Math.floor(f),F=Math.min(v+1,h-1),P=Math.min(B+1,h-1);return JO(l.get(v,B),l.get(F,B),l.get(v,P),l.get(F,P),g-v,f-B)}const wZ={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function BZ(A,a,l){return(256*A*256+256*a+l)/10-1e4}function CZ(A,a,l){return 256*A+a+l/256-32768}class tw{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(a,l,h,g=!1){if(this.uid=a,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return void tn(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=l.height;const f=this.dim=l.height-2,v=new Uint32Array(l.data.buffer);if(this.pixels=new Uint8Array(l.data.buffer),this.floatView=new Float32Array(l.data.buffer),this.borderReady=g,this._modifiedForSources={},!g){for(let F=0;F<f;F++)v[this._idx(-1,F)]=v[this._idx(0,F)],v[this._idx(f,F)]=v[this._idx(f-1,F)],v[this._idx(F,-1)]=v[this._idx(F,0)],v[this._idx(F,f)]=v[this._idx(F,f-1)];v[this._idx(-1,-1)]=v[this._idx(0,0)],v[this._idx(f,-1)]=v[this._idx(f-1,0)],v[this._idx(-1,f)]=v[this._idx(0,f-1)],v[this._idx(f,f)]=v[this._idx(f-1,f-1)]}const B=h==="terrarium"?CZ:BZ;for(let F=0;F<v.length;++F){const P=4*F;this.floatView[F]=B(this.pixels[P],this.pixels[P+1],this.pixels[P+2])}this._timestamp=Nt.now()}_buildQuadTree(){this._tree=new YO(this)}get(a,l,h=!1){h&&(a=xr(a,-1,this.dim),l=xr(l,-1,this.dim));const g=this._idx(a,l);return this.floatView[g]}set(a,l,h){const g=this._idx(a,l),f=this.floatView[g];return this.floatView[g]=h,h-f}static getUnpackVector(a){return wZ[a]}_idx(a,l){if(a<-1||a>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(a+1)}static pack(a,l){const h=[0,0,0,0],g=tw.getUnpackVector(l);let f=Math.floor((a+g[3])/g[2]);return h[2]=f%256,f=Math.floor(f/256),h[1]=f%256,f=Math.floor(f/256),h[0]=f,h}getPixels(){return new MR({width:this.stride,height:this.stride},this.pixels)}backfillBorder(a,l,h){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");let g=l*this.dim,f=l*this.dim+this.dim,v=h*this.dim,B=h*this.dim+this.dim;switch(l){case-1:g=f-1;break;case 1:f=g+1}switch(h){case-1:v=B-1;break;case 1:B=v+1}const F=-l*this.dim,P=-h*this.dim;for(let b=v;b<B;b++)for(let E=g;E<f;E++){const M=4*this._idx(E,b),T=4*this._idx(E+F,b+P);this.pixels[M+0]=a.pixels[T+0],this.pixels[M+1]=a.pixels[T+1],this.pixels[M+2]=a.pixels[T+2],this.pixels[M+3]=a.pixels[T+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function SZ(A,a,l){A===1?a.header_length=l.readFixed32():A===2?a.x=l.readVarint():A===3?a.y=l.readVarint():A===4?a.z=l.readVarint():A===5&&a.layers.push(function(h,g){return h.readFields(MZ,{version:0,name:"",units:"",tilesize:0,buffer:0,pixel_format:0,data_index:[]},g)}(l,l.readVarint()+l.pos))}function EZ(A,a,l){A===1?(a.delta_filter=function(h,g){return h.readFields(TZ,{block_size:0},g)}(l,l.readVarint()+l.pos),a.filter="delta_filter"):A===2?(l.readVarint(),a.filter="zigzag_filter"):A===3?(l.readVarint(),a.filter="bitshuffle_filter"):A===4&&(l.readVarint(),a.filter="byteshuffle_filter")}function TZ(A,a,l){A===1&&(a.block_size=l.readVarint())}function FZ(A,a,l){A===1?(l.readVarint(),a.codec="gzip_data"):A===2?(l.readVarint(),a.codec="jpeg_image"):A===3?(l.readVarint(),a.codec="webp_image"):A===4&&(l.readVarint(),a.codec="png_image")}function IZ(A,a,l){A===1?a.first_byte=l.readFixed64():A===2?a.last_byte=l.readFixed64():A===3?a.filters.push(function(h,g){return h.readFields(EZ,{},g)}(l,l.readVarint()+l.pos)):A===4?a.codec=function(h,g){return h.readFields(FZ,{},g)}(l,l.readVarint()+l.pos):A===5?a.deprecated_offset=l.readFloat():A===6?a.deprecated_scale=l.readFloat():A===7?a.bands.push(l.readString()):A===8?a.offset=l.readDouble():A===9&&(a.scale=l.readDouble())}function MZ(A,a,l){A===1?a.version=l.readVarint():A===2?a.name=l.readString():A===3?a.units=l.readString():A===4?a.tilesize=l.readVarint():A===5?a.buffer=l.readVarint():A===6?a.pixel_format=l.readVarint():A===7&&a.data_index.push(function(h,g){return h.readFields(IZ,{first_byte:0,last_byte:0,filters:[],codec:null,offset:0,scale:0,deprecated_offset:0,deprecated_scale:0,bands:[]},g)}(l,l.readVarint()+l.pos))}function PZ(A,a,l){if(A===2)(function(h,g,f){h.readFields(DZ,f,g)})(l,l.readVarint()+l.pos,a);else if(A===3)throw new Error("Not implemented")}function DZ(A,a,l){if(A===1){let h=0;const g=l.readVarint()+l.pos;for(;l.pos<g;)a[h++]=l.readVarint()}}Wt(tw,"DEMData"),Wt(YO,"DemMinMaxQuadTree",{omit:["dem"]});class kZ{constructor(a){this.capacity=a,this.cache=new Map}get(a){if(!this.cache.has(a))return;const l=this.cache.get(a);return this.cache.delete(a),this.cache.set(a,l),l}put(a,l){this.cache.has(a)?this.cache.delete(a):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(a,l)}}function RZ(A,a){if(a.length!==4)throw new Error(`Expected data of dimension 4 but got ${a.length}.`);let l=a[3];for(let h=2;h>=1;h--){const g=h===1?1:0,f=h===2?1:0;for(let v=0;v<a[0];v++){const B=a[1]*v;for(let F=g;F<a[1];F++){const P=a[2]*(F+B);for(let b=f;b<a[2];b++){const E=a[3]*(b+P);for(let M=0;M<a[3];M++){const T=E+M;A[T]+=A[T-l]}}}}l*=a[h]}return A}function LZ(A){for(let a=0,l=A.length;a<l;a++)A[a]=A[a]>>>1^-(1&A[a]);return A}function OZ(A,a){switch(a){case"uint32":return A;case"uint16":for(let l=0;l<A.length;l+=2){const h=A[l],g=A[l+1];A[l]=(240&h)>>4|(61440&h)>>8|(240&g)<<4|61440&g,A[l+1]=15&h|(3840&h)>>4|(15&g)<<8|(3840&g)<<4}return A;case"uint8":for(let l=0;l<A.length;l+=4){const h=A[l],g=A[l+1],f=A[l+2],v=A[l+3];A[l+0]=(192&h)>>6|(192&g)>>4|(192&f)>>2|192&v,A[l+1]=(48&h)>>4|(48&g)>>2|48&f|(48&v)<<2,A[l+2]=(12&h)>>2|12&g|(12&f)<<2|(12&v)<<4,A[l+3]=3&h|(3&g)<<2|(3&f)<<4|(3&v)<<6}return A;default:throw new Error(`Invalid pixel format, "${a}"`)}}var Ws=Uint8Array,ry=Uint16Array,UZ=Int32Array,$O=new Ws([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),eU=new Ws([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),zZ=new Ws([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),tU=function(A,a){for(var l=new ry(31),h=0;h<31;++h)l[h]=a+=1<<A[h-1];var g=new UZ(l[30]);for(h=1;h<30;++h)for(var f=l[h];f<l[h+1];++f)g[f]=f-l[h]<<5|h;return{b:l,r:g}},rU=tU($O,2),nU=rU.b,QZ=rU.r;nU[28]=258,QZ[258]=28;for(var NZ=tU(eU,0).b,iU=new ry(32768),Ui=0;Ui<32768;++Ui){var zm=(43690&Ui)>>1|(21845&Ui)<<1;iU[Ui]=((65280&(zm=(61680&(zm=(52428&zm)>>2|(13107&zm)<<2))>>4|(3855&zm)<<4))>>8|(255&zm)<<8)>>1}var ny=function(A,a,l){for(var h=A.length,g=0,f=new ry(a);g<h;++g)A[g]&&++f[A[g]-1];var v,B=new ry(a);for(g=1;g<a;++g)B[g]=B[g-1]+f[g-1]<<1;v=new ry(1<<a);var F=15-a;for(g=0;g<h;++g)if(A[g])for(var P=g<<4|A[g],b=a-A[g],E=B[A[g]-1]++<<b,M=E|(1<<b)-1;E<=M;++E)v[iU[E]>>F]=P;return v},iy=new Ws(288);for(Ui=0;Ui<144;++Ui)iy[Ui]=8;for(Ui=144;Ui<256;++Ui)iy[Ui]=9;for(Ui=256;Ui<280;++Ui)iy[Ui]=7;for(Ui=280;Ui<288;++Ui)iy[Ui]=8;var oU=new Ws(32);for(Ui=0;Ui<32;++Ui)oU[Ui]=5;var VZ=ny(iy,9),HZ=ny(oU,5),zF=function(A){for(var a=A[0],l=1;l<A.length;++l)A[l]>a&&(a=A[l]);return a},gc=function(A,a,l){var h=a/8|0;return(A[h]|A[h+1]<<8)>>(7&a)&l},QF=function(A,a){var l=a/8|0;return(A[l]|A[l+1]<<8|A[l+2]<<16)>>(7&a)},jZ=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],vc=function(A,a,l){var h=new Error(a||jZ[A]);if(h.code=A,Error.captureStackTrace&&Error.captureStackTrace(h,vc),!l)throw h;return h},GZ=new Ws(0),KZ=typeof TextDecoder<"u"&&new TextDecoder;try{KZ.decode(GZ,{stream:!0})}catch{}const WZ={gzip_data:"gzip"};class Bl extends Error{constructor(a){super(a),this.name="MRTError"}}const qZ={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},aU={uint32:1,uint16:2,uint8:4},XZ={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let NF;class VF{constructor(a=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=a}getLayer(a){const l=this.layers[a];if(!l)throw new Bl(`Layer '${a}' not found`);return l}getHeaderLength(a){const l=new Uint8Array(a),h=new DataView(a);if(l[0]!==13)throw new Bl("File is not a valid MRT.");return h.getUint32(1,!0)}parseHeader(a){const l=new Uint8Array(a),h=this.getHeaderLength(a);if(l.length<h)throw new Bl(`Expected header with length >= ${h} but got buffer of length ${l.length}`);const g=function(f,v){return f.readFields(SZ,{header_length:0,x:0,y:0,z:0,layers:[]},void 0)}(new NF(l.subarray(0,h)));if(!isNaN(this.x)&&(this.x!==g.x||this.y!==g.y||this.z!==g.z))throw new Bl(`Invalid attempt to parse header ${g.z}/${g.x}/${g.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=g.x,this.y=g.y,this.z=g.z;for(const f of g.layers)this.layers[f.name]=new ZZ(f,{cacheSize:this._cacheSize});return this}createDecodingTask(a){const l=[],h=this.getLayer(a.layerName);for(let g of a.blockIndices){const f=h.dataIndex[g],v=f.first_byte-a.firstByte,B=f.last_byte-a.firstByte;if(h._blocksInProgress.has(g))continue;const F={layerName:h.name,firstByte:v,lastByte:B,pixelFormat:h.pixelFormat,blockIndex:g,blockShape:[f.bands.length].concat(h.bandShape),buffer:h.buffer,codec:f.codec.codec,filters:f.filters.map(P=>P.filter)};h._blocksInProgress.add(g),l.push(F)}return new sU(l,()=>{l.forEach(g=>h._blocksInProgress.delete(g.blockIndex))},(g,f)=>{if(l.forEach(v=>h._blocksInProgress.delete(v.blockIndex)),g)throw g;f.forEach(v=>{this.getLayer(v.layerName).processDecodedData(v)})})}}class ZZ{constructor({version:a,name:l,units:h,tilesize:g,pixel_format:f,buffer:v,data_index:B},F){if(this.version=a,this.version!==1)throw new Bl(`Cannot parse raster layer encoded with MRT version ${a}`);this.name=l,this.units=h,this.tileSize=g,this.buffer=v,this.pixelFormat=qZ[f],this.dataIndex=B,this.bandShape=[g+2*v,g+2*v,aU[this.pixelFormat]],this._decodedBlocks=new kZ(F?F.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return aU[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:a})=>a).flat()}processDecodedData(a){const l=a.blockIndex.toString();this._decodedBlocks.get(l)||this._decodedBlocks.put(l,a.data)}getBlockForBand(a){let l=0;switch(typeof a){case"string":for(const[h,g]of this.dataIndex.entries()){for(const[f,v]of g.bands.entries())if(v===a)return{bandIndex:l+f,blockIndex:h,blockBandIndex:f};l+=g.bands.length}break;case"number":for(const[h,g]of this.dataIndex.entries()){if(a>=l&&a<l+g.bands.length)return{bandIndex:a,blockIndex:h,blockBandIndex:a-l};l+=g.bands.length}break;default:throw new Bl(`Invalid band \`${JSON.stringify(a)}\`. Expected string or integer.`)}throw new Bl(`Band not found: ${JSON.stringify(a)}`)}getDataRange(a){let l=1/0,h=-1/0;const g=[],f=new Set;for(const v of a){const{blockIndex:B}=this.getBlockForBand(v);if(B<0)throw new Bl(`Invalid band: ${JSON.stringify(v)}`);const F=this.dataIndex[B];g.includes(B)||g.push(B),f.add(B),l=Math.min(l,F.first_byte),h=Math.max(h,F.last_byte)}if(f.size>this.cacheSize)throw new Bl(`Number of blocks to decode (${f.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:l,lastByte:h,blockIndices:g}}hasBand(a){const{blockIndex:l}=this.getBlockForBand(a);return l>=0}hasDataForBand(a){const{blockIndex:l}=this.getBlockForBand(a);return l>=0&&!!this._decodedBlocks.get(l.toString())}getBandView(a){const{blockIndex:l,blockBandIndex:h}=this.getBlockForBand(a),g=this._decodedBlocks.get(l.toString());if(!g)throw new Bl(`Data for band ${JSON.stringify(a)} of layer "${this.name}" not decoded.`);const f=this.dataIndex[l],v=this.bandShape.reduce((P,b)=>P*b,1),B=h*v,F=g.subarray(B,B+v);return{data:F,bytes:new Uint8Array(F.buffer).subarray(F.byteOffset,F.byteOffset+F.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:f.offset!==0?f.offset:f.deprecated_offset,scale:f.scale!==0?f.scale:f.deprecated_scale}}}VF.setPbf=function(A){NF=A};class sU{constructor(a,l,h){this.tasks=a,this._onCancel=l,this._onComplete=h,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(a,l){this._finalized||(this._onComplete(a,l),this._finalized=!0)}}VF.performDecoding=function(A,a){const l=new Uint8Array(A);return Promise.all(a.tasks.map(h=>{const{layerName:g,firstByte:f,lastByte:v,pixelFormat:B,blockShape:F,blockIndex:P,filters:b,codec:E}=h,M=l.subarray(f,v+1),T=new Uint32Array(F[0]*F[1]*F[2]);let I;if(E!=="gzip_data")throw new Bl(`Unhandled codec: ${E}`);return I=function(R,U){if(!globalThis.DecompressionStream&&U==="gzip_data")return Promise.resolve(((H=function(le){le[0]==31&&le[1]==139&&le[2]==8||vc(6,"invalid gzip data");var me=le[3],ve=10;4&me&&(ve+=2+(le[10]|le[11]<<8));for(var de=(me>>3&1)+(me>>4&1);de>0;de-=!le[ve++]);return ve+(2&me)}(Y=R))+8>Y.length&&vc(6,"invalid gzip data"),function(le,me,ve,de){var Ce=le.length;if(!Ce||me.f&&!me.l)return ve||new Ws(0);var _e=!ve,Te=_e||me.i!=2,Oe=me.i;_e&&(ve=new Ws(3*Ce));var Ve,je,We=function(Lh){var Pf=ve.length;if(Lh>Pf){var Ay=new Ws(Math.max(2*Pf,Lh));Ay.set(ve),ve=Ay}},et=me.f||0,qe=me.p||0,At=me.b||0,xt=me.l,at=me.d,Vt=me.m,Ot=me.n,Ft=8*Ce;do{if(!xt){et=gc(le,qe,1);var Bt=gc(le,qe+1,3);if(qe+=3,!Bt){var or=le[(_r=4+((qe+7)/8|0))-4]|le[_r-3]<<8,Qt=_r+or;if(Qt>Ce){Oe&&vc(0);break}Te&&We(At+or),ve.set(le.subarray(_r,Qt),At),me.b=At+=or,me.p=qe=8*Qt,me.f=et;continue}if(Bt==1)xt=VZ,at=HZ,Vt=9,Ot=5;else if(Bt==2){var jt=gc(le,qe,31)+257,gr=gc(le,qe+10,15)+4,Pr=jt+gc(le,qe+5,31)+1;qe+=14;for(var Er=new Ws(Pr),Tr=new Ws(19),Ur=0;Ur<gr;++Ur)Tr[zZ[Ur]]=gc(le,qe+3*Ur,7);qe+=3*gr;var zr=zF(Tr),Mn=(1<<zr)-1,Bn=ny(Tr,zr);for(Ur=0;Ur<Pr;){var _r,vn=Bn[gc(le,qe,Mn)];if(qe+=15&vn,(_r=vn>>4)<16)Er[Ur++]=_r;else{var bn=0,qn=0;for(_r==16?(qn=3+gc(le,qe,3),qe+=2,bn=Er[Ur-1]):_r==17?(qn=3+gc(le,qe,7),qe+=3):_r==18&&(qn=11+gc(le,qe,127),qe+=7);qn--;)Er[Ur++]=bn}}var Fi=Er.subarray(0,jt),zi=Er.subarray(jt);Vt=zF(Fi),Ot=zF(zi),xt=ny(Fi,Vt),at=ny(zi,Ot)}else vc(1);if(qe>Ft){Oe&&vc(0);break}}Te&&We(At+131072);for(var Ii=(1<<Vt)-1,mi=(1<<Ot)-1,_o=qe;;_o=qe){var ji=(bn=xt[QF(le,qe)&Ii])>>4;if((qe+=15&bn)>Ft){Oe&&vc(0);break}if(bn||vc(2),ji<256)ve[At++]=ji;else{if(ji==256){_o=qe,xt=null;break}var Oo=ji-254;ji>264&&(Oo=gc(le,qe,(1<<(_c=$O[Ur=ji-257]))-1)+nU[Ur],qe+=_c);var Nn=at[QF(le,qe)&mi],os=Nn>>4;if(Nn||vc(3),qe+=15&Nn,zi=NZ[os],os>3){var _c=eU[os];zi+=QF(le,qe)&(1<<_c)-1,qe+=_c}if(qe>Ft){Oe&&vc(0);break}Te&&We(At+131072);var Cl=At+Oo;if(At<zi){var Sl=0-zi,Mf=Math.min(zi,Cl);for(Sl+At<0&&vc(3);At<Mf;++At)ve[At]=(void 0)[Sl+At]}for(;At<Cl;++At)ve[At]=ve[At-zi]}}me.l=xt,me.p=_o,me.b=At,me.f=et,xt&&(et=1,me.m=Vt,me.d=at,me.n=Ot)}while(!et);return At!=ve.length&&_e?(Ve=ve,((je=At)==null||je>Ve.length)&&(je=Ve.length),new Ws(Ve.subarray(0,je))):ve.subarray(0,At)}(Y.subarray(H,-8),{i:2},new Ws(((V=Y)[(X=V.length)-4]|V[X-3]<<8|V[X-2]<<16|V[X-1]<<24)>>>0))));var V,X,Y,H;const $=WZ[U];if(!$)throw new Error(`Unhandled codec: ${U}`);const te=new globalThis.DecompressionStream($);return new Response(new Blob([R]).stream().pipeThrough(te)).arrayBuffer().then(le=>new Uint8Array(le))}(M,E).then(R=>(function(U,V){U.readFields(PZ,V)}(new NF(R),T),new XZ[B](T.buffer))),I.then(R=>{for(let U=b.length-1;U>=0;U--)switch(b[U]){case"delta_filter":RZ(R,F);break;case"zigzag_filter":LZ(R);break;case"bitshuffle_filter":OZ(R,B);break;default:throw new Bl(`Unhandled filter "${b[U]}"`)}return{layerName:g,blockIndex:P,data:R}}).catch(R=>{throw R})}))},Wt(sU,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]});var oy={workerUrl:"",workerClass:null,workerParams:void 0};const HF="mapboxgl_preloaded_worker_pool";class ay{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<ay.workerCount;)this.workers.push(oy.workerClass!=null?new oy.workerClass:new self.Worker(oy.workerUrl,oy.workerParams));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.workers&&this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[HF]}numActive(){return Object.keys(this.active).length}}let sy;function rw(){return sy||(sy=new ay),sy}ay.workerCount=2;let ly,jF,yc,Qm,GF,Nm=null;function lU(){return sa()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:jF||De.DRACO_URL}function cU(){if(sa()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(Qm)return Qm;const A=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return Qm=WebAssembly.validate(A)?De.MESHOPT_SIMD_URL:De.MESHOPT_URL,Qm}const nw={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},YZ={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},cy={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function uU(A,a,l){const h=l.json.bufferViews.length,g=l.buffers.length;a.bufferView=h,l.json.bufferViews[h]={buffer:g,byteLength:A.byteLength},l.buffers[g]=A}const KF="KHR_draco_mesh_compression";function JZ(A,a){const l=A.extensions&&A.extensions[KF];if(!l)return;const h=new yc.Decoder,g=fU(a,l.bufferView),f=new yc.Mesh;if(!h.DecodeArrayToMesh(g,g.byteLength,f))throw new Error("Failed to decode Draco mesh");const v=a.json.accessors[A.indices],B=nw[v.componentType],F=v.count*B.BYTES_PER_ELEMENT,P=yc._malloc(F);B===Uint16Array?h.GetTrianglesUInt16Array(f,F,P):h.GetTrianglesUInt32Array(f,F,P),uU(yc.memory.buffer.slice(P,P+F),v,a),yc._free(P);for(const b of Object.keys(l.attributes)){const E=h.GetAttributeByUniqueId(f,l.attributes[b]),M=a.json.accessors[A.attributes[b]],T=YZ[M.componentType],I=M.count*cy[M.type]*nw[M.componentType].BYTES_PER_ELEMENT,R=yc._malloc(I);h.GetAttributeDataArrayForAllPoints(f,E,yc[T],I,R),uU(yc.memory.buffer.slice(R,R+I),M,a),yc._free(R)}h.destroy(),f.destroy(),delete A.extensions[KF]}const iw="EXT_meshopt_compression";function $Z(A,a){if(!A.extensions||!A.extensions[iw])return;const l=A.extensions[iw],h=new Uint8Array(a.buffers[l.buffer],l.byteOffset||0,l.byteLength||0),g=new Uint8Array(l.count*l.byteStride);GF.decodeGltfBuffer(g,l.count,l.byteStride,h,l.mode,l.filter),A.buffer=a.buffers.length,A.byteOffset=0,a.buffers[A.buffer]=g.buffer,delete A.extensions[iw]}const AU=1179937895,hU=new TextDecoder("utf8");function dU(A,a){return new URL(A,a).href}function eY(A,a,l,h){return fetch(dU(A.uri,h)).then(g=>g.arrayBuffer()).then(g=>{a.buffers[l]=g})}function fU(A,a){const l=A.json.bufferViews[a];return new Uint8Array(A.buffers[l.buffer],l.byteOffset||0,l.byteLength)}function tY(A,a,l,h){if(A.uri){const g=dU(A.uri,h);return fetch(g).then(f=>f.blob()).then(f=>createImageBitmap(f)).then(f=>{a.images[l]=f})}if(A.bufferView!==void 0){const g=fU(a,A.bufferView),f=new Blob([g],{type:A.mimeType});return createImageBitmap(f).then(v=>{a.images[l]=v})}}function pU(A,a=0,l){const h={json:null,images:[],buffers:[]};if(new Uint32Array(A,a,1)[0]===AU){const b=new Uint32Array(A,a);let E=2;const M=(b[E++]>>2)-3,T=b[E++]>>2;if(E++,h.json=JSON.parse(hU.decode(b.subarray(E,E+T))),E+=T,E<M){const I=b[E++];E++;const R=a+(E<<2);h.buffers[0]=A.slice(R,R+I)}}else h.json=JSON.parse(hU.decode(new Uint8Array(A,a)));const{buffers:g,images:f,meshes:v,extensionsUsed:B,bufferViews:F}=h.json;let P=Promise.resolve();if(g){const b=[];for(let E=0;E<g.length;E++){const M=g[E];M.uri?b.push(eY(M,h,E,l)):h.buffers[E]||(h.buffers[E]=null)}P=Promise.all(b)}return P.then(()=>{const b=[],E=B&&B.includes(KF),M=B&&B.includes(iw);if(E&&b.push(function(){if(!yc)return ly??(ly=function(T){let I,R=null;function U(){I=new Uint8Array(R.buffer)}function V(){throw new Error("Unexpected Draco error.")}const X={a:{a:V,d:function(Y,H,$){return I.copyWithin(Y,H,H+$)},c:function(Y){const H=I.length,$=Math.max(Y>>>0,Math.ceil(1.2*H)),te=Math.ceil(($-H)/65536);try{return R.grow(te),U(),!0}catch{return!1}},b:V}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(T,X):T.then(Y=>Y.arrayBuffer()).then(Y=>WebAssembly.instantiate(Y,X))).then(Y=>{const{Rb:H,Qb:$,P:te,T:le,X:me,Ja:ve,La:de,Qa:Ce,Va:_e,Wa:Te,eb:Oe,jb:Ve,f:je,e:We,yb:et,zb:qe,Ab:At,Bb:xt,Db:at,Gb:Vt}=Y.instance.exports;R=We;const Ot=(()=>{let Ft=0,Bt=0,or=0,Qt=0;return jt=>{or&&(H(Qt),H(Ft),Bt+=or,or=Ft=0),Ft||(Bt+=128,Ft=$(Bt));const gr=jt.length+7&-8;let Pr=Ft;gr>=Bt&&(or=gr,Pr=Qt=$(gr));for(let Er=0;Er<jt.length;Er++)I[Pr+Er]=jt[Er];return Pr}})();return U(),je(),{memory:We,_free:H,_malloc:$,Mesh:class{constructor(){this.ptr=te()}destroy(){le(this.ptr)}},Decoder:class{constructor(){this.ptr=ve()}destroy(){Ve(this.ptr)}DecodeArrayToMesh(Ft,Bt,or){const Qt=Ot(Ft),jt=de(this.ptr,Qt,Bt,or.ptr);return!!me(jt)}GetAttributeByUniqueId(Ft,Bt){return{ptr:Ce(this.ptr,Ft.ptr,Bt)}}GetTrianglesUInt16Array(Ft,Bt,or){_e(this.ptr,Ft.ptr,Bt,or)}GetTrianglesUInt32Array(Ft,Bt,or){Te(this.ptr,Ft.ptr,Bt,or)}GetAttributeDataArrayForAllPoints(Ft,Bt,or,Qt,jt){Oe(this.ptr,Ft.ptr,Bt.ptr,or,Qt,jt)}},DT_INT8:et(),DT_UINT8:qe(),DT_INT16:At(),DT_UINT16:xt(),DT_UINT32:at(),DT_FLOAT32:Vt()}})}(fetch(lU())),ly.then(T=>{yc=T,ly=void 0}))}()),M&&b.push(function(){if(GF)return;const T=function(I){let R;const U=WebAssembly.instantiateStreaming(I,{}).then(Y=>{R=Y.instance,R.exports.__wasm_call_ctors()}),V={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},X={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:U,supported:!0,decodeGltfBuffer(Y,H,$,te,le,me){(function(ve,de,Ce,_e,Te,Oe,Ve){const je=ve.exports.sbrk,We=_e+3&-4,et=je(We*Te),qe=je(Oe.length),At=new Uint8Array(ve.exports.memory.buffer);At.set(Oe,qe);const xt=de(et,_e,Te,qe,Oe.length);if(xt===0&&Ve&&Ve(et,We,Te),Ce.set(At.subarray(et,et+_e*Te)),je(et-je(0)),xt!==0)throw new Error(`Malformed buffer data: ${xt}`)})(R,R.exports[X[le]],Y,H,$,te,R.exports[V[me]])}}}(fetch(cU()));return T.ready.then(()=>{GF=T})}()),f)for(let T=0;T<f.length;T++)b.push(tY(f[T],h,T,l));return(b.length?Promise.all(b):Promise.resolve()).then(()=>{if(E&&v)for(const{primitives:T}of v)for(const I of T)JZ(I,h);if(M&&v&&F)for(const T of F)$Z(T,h);return h})})}function If(A,a){const l=A.json.bufferViews[a.bufferView],h=nw[a.componentType];return new h(A.buffers[l.buffer],(a.byteOffset||0)+(l.byteOffset||0),a.count*(l.byteStride&&l.byteStride!==cy[a.type]*h.BYTES_PER_ELEMENT?l.byteStride/h.BYTES_PER_ELEMENT:cy[a.type]))}function WF(A,a,l,h){const g=nw[a.componentType],f=function(b){switch(b){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(g),v=A.json.bufferViews[a.bufferView],B=v.byteStride?v.byteStride/g.BYTES_PER_ELEMENT:cy[a.type],F=l.float32,P=F.length/l.capacity;for(let b=0,E=0;b<a.count*B;b+=B,E+=P)for(let M=0;M<P;M++)F[E+M]=h[b+M]*f;l._trim()}function rY(A,a,l){const h=A.indices,g=A.attributes,f={};f.indexArray=new Fo;const v=a.json.accessors[h],B=v.count/3;f.indexArray.reserve(B);const F=If(a,v);for(let M=0;M<B;M++)f.indexArray.emplaceBack(F[3*M],F[3*M+1],F[3*M+2]);f.indexArray._trim(),f.vertexArray=new iu;const P=a.json.accessors[g.POSITION];f.vertexArray.reserve(P.count);const b=If(a,P);for(let M=0;M<P.count;M++)f.vertexArray.emplaceBack(b[3*M],b[3*M+1],b[3*M+2]);if(f.vertexArray._trim(),f.aabb=new Qn(P.min,P.max),f.centroid=function(M,T){const I=[0,0,0],R=M.length;if(R>0){for(let U=0;U<R;U++){const V=3*M[U];I[0]+=T[V],I[1]+=T[V+1],I[2]+=T[V+2]}I[0]/=R,I[1]/=R,I[2]/=R}return I}(F,b),g.COLOR_0!==void 0){const M=a.json.accessors[g.COLOR_0],T=cy[M.type],I=If(a,M);f.colorArray=T===3?new iu:new uc,f.colorArray.resize(M.count),WF(a,M,f.colorArray,I)}if(g.NORMAL!==void 0){f.normalArray=new iu;const M=a.json.accessors[g.NORMAL];f.normalArray.resize(M.count);const T=If(a,M);WF(a,M,f.normalArray,T)}if(g.TEXCOORD_0!==void 0&&l.length>0){f.texcoordArray=new _f;const M=a.json.accessors[g.TEXCOORD_0];f.texcoordArray.resize(M.count);const T=If(a,M);WF(a,M,f.texcoordArray,T)}if(g._FEATURE_ID_RGBA4444!==void 0){const M=a.json.accessors[g._FEATURE_ID_RGBA4444];a.json.extensionsUsed&&a.json.extensionsUsed.includes("EXT_meshopt_compression")&&(f.featureData=If(a,M))}g._FEATURE_RGBA4444!==void 0&&(f.featureData=new Uint32Array(If(a,a.json.accessors[g._FEATURE_RGBA4444]).buffer));const E=A.material;return f.material=function(M,T){const{emissiveFactor:I=[0,0,0],alphaMode:R="OPAQUE",alphaCutoff:U=.5,normalTexture:V,occlusionTexture:X,emissiveTexture:Y,doubleSided:H}=M,{baseColorFactor:$=[1,1,1,1],metallicFactor:te=1,roughnessFactor:le=1,baseColorTexture:me,metallicRoughnessTexture:ve}=M.pbrMetallicRoughness||{},de=X?T[X.index]:void 0;if(X&&X.extensions&&X.extensions.KHR_texture_transform&&de){const Ce=X.extensions.KHR_texture_transform;de.offsetScale=[Ce.offset[0],Ce.offset[1],Ce.scale[0],Ce.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new An(...$),metallicFactor:te,roughnessFactor:le,baseColorTexture:me?T[me.index]:void 0,metallicRoughnessTexture:ve?T[ve.index]:void 0},doubleSided:H,emissiveFactor:I,alphaMode:R,alphaCutoff:U,normalTexture:V?T[V.index]:void 0,occlusionTexture:de,emissionTexture:Y?T[Y.index]:void 0,defined:M.defined===void 0}}(E!==void 0?a.json.materials[E]:{defined:!1},l),f}function mU(A,a,l){const{matrix:h,rotation:g,translation:f,scale:v,mesh:B,extras:F,children:P}=A,b={};if(b.matrix=h||ke.mat4.fromRotationTranslationScale([],g||[0,0,0,1],f||[0,0,0],v||[1,1,1]),B!==void 0){b.meshes=l[B];const E=b.anchor=[0,0];for(const M of b.meshes){const{min:T,max:I}=M.aabb;E[0]+=T[0]+I[0],E[1]+=T[1]+I[1]}E[0]=Math.floor(E[0]/b.meshes.length/2),E[1]=Math.floor(E[1]/b.meshes.length/2)}if(F&&(F.id&&(b.id=F.id),F.lights&&(b.lights=function(E){if(!E.length)return[];const M=function(V){const X=atob(V),Y=new Uint8Array(X.length);for(let H=0;H<X.length;H++)Y[H]=X.codePointAt(H);return Y}(E),T=[],I=M.length/24,R=new Uint16Array(M.buffer),U=new Float32Array(M.buffer);for(let V=0;V<I;V++){const X=R[2*V*6]/30,Y=R[2*V*6+1]/30,H=R[2*V*6+10]/100,$=U[6*V+1],te=U[6*V+2],le=U[6*V+3],me=U[6*V+4],ve=le-$,de=me-te,Ce=Math.hypot(ve,de);T.push({pos:[$+.5*ve,te+.5*de,Y],normal:[de/Ce,-ve/Ce,0],width:Ce,height:X,depth:H,points:[$,te,le,me]})}return T}(F.lights))),P){const E=[];for(const M of P)E.push(mU(a.json.nodes[M],a,l));b.children=E}return b}function nY(A){if(A.vertices.length===0||A.indices.length===0)return null;const a=new rF(A.vertices,A.indices,8,256),[l,h]=[a.min.clone(),a.max.clone()];return{vertices:A.vertices,indices:A.indices,grid:a,min:l,max:h}}function iY(A){if(!A.extras||!A.extras.ground)return null;const a=A.extras.ground;if(!a||!Array.isArray(a)||a.length===0)return null;const l=a[0];if(!l||!Array.isArray(l)||l.length===0)return null;const h=[];for(const v of l){if(!Array.isArray(v)||v.length!==2)continue;const B=v[0],F=v[1];typeof B=="number"&&typeof F=="number"&&h.push(new Dt(B,F))}if(h.length<3)return null;h.length>1&&h[h.length-1].equals(h[0])&&h.pop();let g=0;for(let v=0;v<h.length;v++){const B=h[v],F=h[(v+1)%h.length],P=h[(v+2)%h.length];g+=(B.x-F.x)*(P.y-F.y)-(P.x-F.x)*(B.y-F.y)}g>0&&h.reverse();const f=Rv(h.flatMap(v=>[v.x,v.y]),[]);return f.length===0?null:{vertices:h,indices:f}}function oY(A,a){const l=[],h=[];let g=0;const f=[];for(const v of A){g=l.length;const B=v.vertexArray.float32,F=v.indexArray.uint16;for(let P=0;P<v.vertexArray.length;P++)f[0]=B[3*P+0],f[1]=B[3*P+1],f[2]=B[3*P+2],ke.vec3.transformMat4(f,f,a),l.push(new Dt(f[0],f[1]));for(let P=0;P<3*v.indexArray.length;P++)h.push(F[P]+g)}if(h.length%3!=0)return null;for(let v=0;v<h.length;v+=3){const B=l[h[v+0]],F=l[h[v+1]],P=l[h[v+2]];(B.x-F.x)*(P.y-F.y)-(P.x-F.x)*(B.y-F.y)>0&&([h[v+1],h[v+2]]=[h[v+2],h[v+1]])}return{vertices:l,indices:h}}function gU(A){const a=function(F,P){const b=[],E=WebGL2RenderingContext;if(F.json.textures)for(const M of F.json.textures){const T={magFilter:E.LINEAR,minFilter:E.NEAREST,wrapS:E.REPEAT,wrapT:E.REPEAT};M.sampler!==void 0&&Object.assign(T,F.json.samplers[M.sampler]),b.push({image:P[M.source],sampler:T,uploaded:!1})}return b}(A,A.images),l=function(F,P){const b=[];for(const E of F.json.meshes){const M=[];for(const T of E.primitives)M.push(rY(T,F,P));b.push(M)}return b}(A,a),{scenes:h,scene:g,nodes:f}=A.json,v=h?h[g||0].nodes:f,B=[];for(const F of v)B.push(mU(f[F],A,l));return function(F,P,b){const E={},M=new Set;for(let T=0;T<F.length;T++){const I=b[P[T]];if(!I.extras)continue;const R=I.extras["mapbox:footprint:version"],U=I.extras["mapbox:footprint:id"];(R||U)&&M.add(T),R==="1.0.0"&&U&&(E[U]=T)}for(let T=0;T<F.length;T++){if(M.has(T))continue;const I=F[T],R=b[P[T]];if(!R.extras)continue;let U=null;I.id in E&&(U=oY(F[E[I.id]].meshes,I.matrix)),U||(U=iY(R)),U&&(I.footprint=nY(U))}if(M.size>0){const T=Array.from(M.values()).sort((I,R)=>I-R);for(let I=T.length-1;I>=0;I--)F.splice(T[I],1)}}(B,v,A.json.nodes),B}function aY(A){A.heightmap=new Float32Array(4096),A.heightmap.fill(-1);const a=A.vertexArray.float32,l=A.aabb.min[0]-1,h=A.aabb.min[1]-1,g=Tf/(A.aabb.max[0]-l+2),f=Tf/(A.aabb.max[1]-h+2);for(let v=0;v<a.length;v+=3){const B=a[v+2],F=(a[v+0]-l)*g|0,P=(a[v+1]-h)*f|0;B>A.heightmap[P*Tf+F]&&(A.heightmap[P*Tf+F]=B)}}function sY(A,a){const l={};l.indexArray=new Fo,l.indexArray.reserve(4*A.length),l.vertexArray=new iu,l.vertexArray.reserve(10*A.length),l.colorArray=new uc,l.vertexArray.reserve(10*A.length);let h=0;for(const v of A){const B=Math.min(10,Math.max(4,1.3*v.height))*a,F=[-v.normal[1],v.normal[0],0],P=Math.min(.29,.1*v.width/v.depth),b=v.width-2*v.depth*a*(P+.01),E=ke.vec3.scaleAndAdd([],v.pos,F,b/2),M=ke.vec3.scaleAndAdd([],v.pos,F,-b/2),T=[E[0],E[1],E[2]+v.height],I=[M[0],M[1],M[2]+v.height],R=ke.vec3.scaleAndAdd([],v.normal,F,P);ke.vec3.scale(R,R,B);const U=ke.vec3.scaleAndAdd([],v.normal,F,-P);ke.vec3.scale(U,U,B),ke.vec3.add(R,E,R),ke.vec3.add(U,M,U),E[2]+=.1,M[2]+=.1,l.vertexArray.emplaceBack(R[0],R[1],R[2]),l.vertexArray.emplaceBack(U[0],U[1],U[2]),l.vertexArray.emplaceBack(E[0],E[1],E[2]),l.vertexArray.emplaceBack(M[0],M[1],M[2]),l.vertexArray.emplaceBack(T[0],T[1],T[2]),l.vertexArray.emplaceBack(I[0],I[1],I[2]),l.vertexArray.emplaceBack(E[0],E[1],E[2]),l.vertexArray.emplaceBack(M[0],M[1],M[2]),l.vertexArray.emplaceBack(R[0],R[1],R[2]),l.vertexArray.emplaceBack(U[0],U[1],U[2]);const V=b/B/2;l.colorArray.emplaceBack(-V-P,-1,V,.8),l.colorArray.emplaceBack(V+P,-1,V,.8),l.colorArray.emplaceBack(-V,0,V,1.3),l.colorArray.emplaceBack(V,0,V,1.3),l.colorArray.emplaceBack(V+P,-.8,V,.7),l.colorArray.emplaceBack(V+P,-.8,V,.7),l.colorArray.emplaceBack(0,0,V,1.3),l.colorArray.emplaceBack(0,0,V,1.3),l.colorArray.emplaceBack(V+P,-1.2,V,.8),l.colorArray.emplaceBack(V+P,-1.2,V,.8),l.indexArray.emplaceBack(6+h,4+h,8+h),l.indexArray.emplaceBack(7+h,9+h,5+h),l.indexArray.emplaceBack(0+h,1+h,2+h),l.indexArray.emplaceBack(1+h,3+h,2+h),h+=10}const g={defined:!0,emissiveFactor:[0,0,0]},f={};return f.baseColorFactor=An.white,g.pbrMetallicRoughness=f,l.material=g,l.aabb=new Qn([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),l}class vU{constructor(a){this._stringToNumber={},this._numberToString=[];for(let l=0;l<a.length;l++){const h=a[l];this._stringToNumber[h]=l,this._numberToString[l]=h}}encode(a){return this._stringToNumber[a]}decode(a){return this._numberToString[a]}}const lY=["id","tile","layer","source","sourceLayer","state"];class yU{constructor(a,l,h,g,f){this.type="Feature",this._vectorTileFeature=a,this._z=l,this._x=h,this._y=g,this.properties=a.properties,this.id=f}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(a){this._geometry=a}toJSON(){const a={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const l of lY)this[l]!==void 0&&(a[l]=this[l]);return a}}class _U{constructor(a,l){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new Yu(Ut,16,0),this.featureIndexArray=new Ab,this.promoteId=l,this.is3DTile=!1}insert(a,l,h,g,f,v=0,B=0){const F=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,g,f,v);const P=this.grid;for(let b=0;b<l.length;b++){const E=l[b],M=[1/0,1/0,-1/0,-1/0];for(let T=0;T<E.length;T++){const I=E[T];M[0]=Math.min(M[0],I.x),M[1]=Math.min(M[1],I.y),M[2]=Math.max(M[2],I.x),M[3]=Math.max(M[3],I.y)}B!==0&&(M[0]-=B,M[1]-=B,M[2]+=B,M[3]+=B),M[0]<Ut&&M[1]<Ut&&M[2]>=0&&M[3]>=0&&P.insert(F,M[0],M[1],M[2],M[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Im.VectorTile(new Db(this.rawTileData)).layers,this.sourceLayerCoder=new vU(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const a in this.vtLayers)this.vtFeatures[a]=[]}return this.vtLayers}query(a,l,h,g){this.loadVTLayers();const f=a.params||{},v=js(f.filter),B=a.tileResult,F=a.transform,P=B.bufferedTilespaceBounds,b=this.grid.query(P.min.x,P.min.y,P.max.x,P.max.y,(I,R,U,V)=>vs(B.bufferedTilespaceGeometry,I,R,U,V));b.sort(cY);let E=null;F.elevation&&b.length>0&&(E=Om.create(F.elevation,this.tileID));const M={};let T;for(let I=0;I<b.length;I++){const R=b[I];if(R===T)continue;T=R;const U=this.featureIndexArray.get(R);let V=null;if(this.is3DTile){const X=this.bucketLayerIDs[0][0],Y=l[X];if(Y.type!=="model")continue;const{queryFeature:H,intersectionZ:$}=Y.queryIntersectsMatchingFeature(B,U.featureIndex,v,F);H&&this.appendToResult(M,X,U.featureIndex,H,$)}else this.loadMatchingFeature(M,U,v,f.layers,f.availableImages,l,h,g,(X,Y,H,$=0)=>(V||(V=Tt(X,this.tileID.canonical,a.tileTransform)),Y.queryIntersectsFeature(B,X,H,V,this.z,a.transform,a.pixelPosMatrix,E,$)))}return M}loadMatchingFeature(a,l,h,g,f,v,B,F,P){const{featureIndex:b,bucketIndex:E,sourceLayerIndex:M,layoutVertexArrayOffset:T}=l,I=this.bucketLayerIDs[E];if(g&&!function(X,Y){for(let H=0;H<X.length;H++)if(Y.indexOf(X[H])>=0)return!0;return!1}(g,I))return;const R=this.sourceLayerCoder.decode(M),U=this.vtLayers[R].feature(b);if(h.needGeometry){const X=Mt(U,!0);if(!h.filter(new xi(this.tileID.overscaledZ),X,this.tileID.canonical))return}else if(!h.filter(new xi(this.tileID.overscaledZ),U))return;const V=this.getId(U,R);for(let X=0;X<I.length;X++){const Y=I[X];if(g&&g.indexOf(Y)<0)continue;const H=v[Y];if(!H)continue;let $={};V!==void 0&&F&&($=F.getState(H.sourceLayer||"_geojsonTileLayer",V));const te=!P||P(U,H,$,T);if(!te)continue;const le=new yU(U,this.z,this.x,this.y,V),me=go({},B[Y]);me.paint=xU(me.paint,H.paint,U,$,f),me.layout=xU(me.layout,H.layout,U,$,f),le.layer=me,this.appendToResult(a,Y,b,le,te)}}appendToResult(a,l,h,g,f){let v=a[l];v===void 0&&(v=a[l]=[]),v.push({featureIndex:h,feature:g,intersectionZ:f})}lookupSymbolFeatures(a,l,h,g,f,v,B,F){const P={};this.loadVTLayers();const b=js(f);for(const E of a)this.loadMatchingFeature(P,{bucketIndex:h,sourceLayerIndex:g,featureIndex:E,layoutVertexArrayOffset:0},b,v,B,F,l);return P}loadFeature(a){const{featureIndex:l,sourceLayerIndex:h}=a;this.loadVTLayers();const g=this.sourceLayerCoder.decode(h),f=this.vtFeatures[g];if(f[l])return f[l];const v=this.vtLayers[g].feature(l);return f[l]=v,v}hasLayer(a){for(const l of this.bucketLayerIDs)for(const h of l)if(a===h)return!0;return!1}getId(a,l){let h=a.id;if(this.promoteId){const g=typeof this.promoteId=="string"?this.promoteId:this.promoteId[l];g!=null&&(h=a.properties[g]),typeof h=="boolean"&&(h=Number(h))}return h}}function xU(A,a,l,h,g){return oa(A,(f,v)=>{const B=a instanceof gh?a.get(v):null;return B&&B.evaluate?B.evaluate(l,h,g):B})}function cY(A,a){return a-A}Wt(_U,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const bU=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class qF{static from(a){if(!(a instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,h]=new Uint8Array(a,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=h>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const f=bU[15&h];if(!f)throw new Error("Unrecognized array type.");const[v]=new Uint16Array(a,2,1),[B]=new Uint32Array(a,4,1);return new qF(B,v,f,a)}constructor(a,l=64,h=Float64Array,g){if(isNaN(a)||a<0)throw new Error(`Unpexpected numItems value: ${a}.`);this.numItems=+a,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=h,this.IndexArrayType=a<65536?Uint16Array:Uint32Array;const f=bU.indexOf(this.ArrayType),v=2*a*this.ArrayType.BYTES_PER_ELEMENT,B=a*this.IndexArrayType.BYTES_PER_ELEMENT,F=(8-B%8)%8;if(f<0)throw new Error(`Unexpected typed array class: ${h}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+B+F,2*a),this._pos=2*a,this._finished=!0):(this.data=new ArrayBuffer(8+v+B+F),this.ids=new this.IndexArrayType(this.data,8,a),this.coords=new this.ArrayType(this.data,8+B+F,2*a),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+f]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=a)}add(a,l){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=a,this.coords[this._pos++]=l,h}finish(){const a=this._pos>>1;if(a!==this.numItems)throw new Error(`Added ${a} items when expected ${this.numItems}.`);return XF(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(a,l,h,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:v,nodeSize:B}=this,F=[0,f.length-1,0],P=[];for(;F.length;){const b=F.pop()||0,E=F.pop()||0,M=F.pop()||0;if(E-M<=B){for(let U=M;U<=E;U++){const V=v[2*U],X=v[2*U+1];V>=a&&V<=h&&X>=l&&X<=g&&P.push(f[U])}continue}const T=M+E>>1,I=v[2*T],R=v[2*T+1];I>=a&&I<=h&&R>=l&&R<=g&&P.push(f[T]),(b===0?a<=I:l<=R)&&(F.push(M),F.push(T-1),F.push(1-b)),(b===0?h>=I:g>=R)&&(F.push(T+1),F.push(E),F.push(1-b))}return P}within(a,l,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:f,nodeSize:v}=this,B=[0,g.length-1,0],F=[],P=h*h;for(;B.length;){const b=B.pop()||0,E=B.pop()||0,M=B.pop()||0;if(E-M<=v){for(let U=M;U<=E;U++)BU(f[2*U],f[2*U+1],a,l)<=P&&F.push(g[U]);continue}const T=M+E>>1,I=f[2*T],R=f[2*T+1];BU(I,R,a,l)<=P&&F.push(g[T]),(b===0?a-h<=I:l-h<=R)&&(B.push(M),B.push(T-1),B.push(1-b)),(b===0?a+h>=I:l+h>=R)&&(B.push(T+1),B.push(E),B.push(1-b))}return F}}function XF(A,a,l,h,g,f){if(g-h<=l)return;const v=h+g>>1;wU(A,a,v,h,g,f),XF(A,a,l,h,v-1,1-f),XF(A,a,l,v+1,g,1-f)}function wU(A,a,l,h,g,f){for(;g>h;){if(g-h>600){const P=g-h+1,b=l-h+1,E=Math.log(P),M=.5*Math.exp(2*E/3),T=.5*Math.sqrt(E*M*(P-M)/P)*(b-P/2<0?-1:1);wU(A,a,l,Math.max(h,Math.floor(l-b*M/P+T)),Math.min(g,Math.floor(l+(P-b)*M/P+T)),f)}const v=a[2*l+f];let B=h,F=g;for(uy(A,a,h,l),a[2*g+f]>v&&uy(A,a,h,g);B<F;){for(uy(A,a,B,F),B++,F--;a[2*B+f]<v;)B++;for(;a[2*F+f]>v;)F--}a[2*h+f]===v?uy(A,a,h,F):(F++,uy(A,a,F,g)),F<=l&&(h=F+1),l<=F&&(g=F-1)}}function uy(A,a,l,h){ZF(A,l,h),ZF(a,2*l,2*h),ZF(a,2*l+1,2*h+1)}function ZF(A,a,l){const h=A[a];A[a]=A[l],A[l]=h}function BU(A,a,l,h){const g=A-l,f=a-h;return g*g+f*f}o.$=tb,o.A=class extends Jb{},o.B=Wu,o.C=ac,o.D=pf,o.E=Xc,o.F=av,o.G=rm,o.H=Kx,o.I=yF,o.J=om,o.K=fm,o.L=Yx,o.M=Af,o.N=qp,o.O=nf,o.P=Dt,o.Q=rf,o.R=Wc,o.S=Pa,o.T=MF,o.U=Gu,o.V=Jb,o.W=mv,o.X=nm,o.Y=ov,o.Z=function(A){const a=A.value;let l=[];if(!a)return l;const h=Wu(a);return h!=="string"?(l=l.concat([new Jb(A.key,a,`string expected, "${h}" found`)]),l):(kO(a,!0)||(l=l.concat([new Jb(A.key,a,`invalid url "${a}"`)])),l)},o._=$e,o.a=function(A){return De.API_CDN_URL_REGEX.test(A)},o.a$=Cv,o.a0=ri,o.a1=kt,o.a2=class{constructor(A){this.specification=A}possiblyEvaluate(A,a){return aa(A.expression.evaluate(a))}interpolate(A,a,l){return{x:cr(A.x,a.x,l),y:cr(A.y,a.y,l),z:cr(A.z,a.z,l),azimuthal:cr(A.azimuthal,a.azimuthal,l),polar:cr(A.polar,a.polar,l)}}},o.a3=xi,o.a4=yl,o.a5=Xe,o.a6=ke,o.a7=Ls,o.a8=gh,o.a9=Th,o.aA=zn,o.aB=xO,o.aC=EO,o.aD=_O,o.aE=function(A,a){const l=document.createElement("video");l.muted=!0,l.onloadstart=function(){a(null,l)};for(let h=0;h<A.length;h++){const g=document.createElement("source");Ia(A[h])||(l.crossOrigin="Anonymous"),g.src=A[h],l.appendChild(g)}return{cancel:()=>{}}},o.aF=Wb,o.aG=function(A){return fetch(A).then(a=>a.arrayBuffer()).then(a=>pU(a,0,A))},o.aH=gU,o.aI=class{constructor(A,a,l,h){this.id=A,this.position=a!=null?new Z(a[0],a[1]):new Z(0,0),this.orientation=l??[0,0,0],this.nodes=h,this.uploaded=!1,this.aabb=new Qn([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(A,a){if(ke.mat4.multiply(A.matrix,a,A.matrix),A.meshes)for(const l of A.meshes){const h=Qn.applyTransformFast(l.aabb,A.matrix);this.aabb.encapsulate(h)}if(A.children)for(const l of A.children)this._applyTransformations(l,A.matrix)}computeBoundsAndApplyParent(){const A=ke.mat4.identity([]);for(const a of this.nodes)this._applyTransformations(a,A)}computeModelMatrix(A,a,l,h,g,f,v=!1){zO(this.matrix,this,A.transform,this.position,a,l,h,g,f,v)}upload(A){if(!this.uploaded){for(const a of this.nodes)LF(a,A);for(const a of this.nodes)$b(a);this.uploaded=!0}}destroy(){for(const A of this.nodes)OF(A)}},o.aJ=Vc,o.aK=Xv,o.aL=we,o.aM=be,o.aN=nu,o.aO=Fo,o.aP=Qc,o.aQ=Bm,o.aR=Gb,o.aS=function(){ka.isLoading()||ka.isLoaded()||dv()!=="deferred"||fv()},o.aT=js,o.aU=Mt,o.aV=yU,o.aW=Qu,o.aX=AF,o.aY=tF,o.aZ=Tt,o.a_=ru,o.aa=cr,o.ab=Ut,o.ac=Zc,o.ad=class{constructor(A){this.specification=A}possiblyEvaluate(A,a){return function([l,h]){const g=aa([1,l,h]);return{x:g.x,y:g.y,z:g.z}}(A.expression.evaluate(a))}interpolate(A,a,l){return{x:cr(A.x,a.x,l),y:cr(A.y,a.y,l),z:cr(A.z,a.z,l)}}},o.ae=function(A,a,l=0,h=!0){const g=new Dt(l,l),f=A.sub(g),v=a.add(g),B=[f,new Dt(v.x,f.y),v,new Dt(f.x,v.y)];return h&&B.push(f.clone()),B},o.af=function(A,a){const l=[];for(let h=0;h<A.length;h++){const g=Ta(h-1,-1,A.length-1),f=Ta(h+1,-1,A.length-1),v=A[h],B=A[f],F=A[g].sub(v).unit(),P=B.sub(v).unit(),b=P.angleWithSep(F.x,F.y),E=F.add(P).unit().mult(-1*a/Math.sin(b/2));l.push(v.add(E))}return l},o.ag=aO,o.ah=vs,o.ai=function(A,a,l=0){return ke.vec3.fromValues(((a.x-l)*A.scale-A.x)*Ut,(a.y*A.scale-A.y)*Ut,Fe(a.z,a.y))},o.aj=fc,o.ak=SL,o.al=function(A){let a=1/0,l=1/0,h=-1/0,g=-1/0;for(const f of A)a=Math.min(a,f.x),l=Math.min(l,f.y),h=Math.max(h,f.x),g=Math.max(g,f.y);return{min:new Dt(a,l),max:new Dt(h,g)}},o.am=ge,o.an=Wn,o.ao=_t,o.ap=xr,o.aq=s,o.ar=function(A,a){const l={};for(let h=0;h<a.length;h++){const g=a[h];g in A&&(l[g]=A[g])}return l},o.as=ne,o.at=ye,o.au=class{constructor(A){this.entries={},this.scheduler=A}request(A,a,l,h){const g=this.entries[A]=this.entries[A]||{callbacks:[]};if(g.result){const[f,v]=g.result;return this.scheduler?this.scheduler.add(()=>{h(f,v)},a):h(f,v),()=>{}}return g.callbacks.push(h),g.cancel||(g.cancel=l((f,v)=>{g.result=[f,v];for(const B of g.callbacks)this.scheduler?this.scheduler.add(()=>{B(f,v)},a):B(f,v);setTimeout(()=>delete this.entries[A],3e3)})),()=>{g.result||(g.callbacks=g.callbacks.filter(f=>f!==h),g.callbacks.length||(g.cancel(),delete this.entries[A]))}}},o.av=ob,o.aw=function(A,a,l){const h=JSON.stringify(A.request);return A.data&&(this.deduped.entries[h]={result:[null,A.data]}),this.deduped.request(h,{type:"parseTile",isSymbolTile:A.isSymbolTile,zoom:A.tileZoom},g=>{const f=qc(A.request,(v,B,F,P)=>{v?g(v):B&&g(null,{vectorTile:l?void 0:new Im.VectorTile(new Db(B)),rawData:B,cacheControl:F,expires:P})});return()=>{f.cancel(),g()}},a)},o.ax=function(A){yi++,yi>mn&&(A.getActor().send("enforceCacheSizeLimit",pr),yi=0)},o.ay=zt,o.az=function(A){return A<=1?1:Math.pow(2,Math.floor(Math.log(A)/Math.LN2))},o.b=function(A){return De.API_FONTS_REGEX.test(A)},o.b$=function(A){const{x:a,y:l}=A.point,{lng:h,lat:g}=A._center;return vR(a,l,A.worldSize,h,g)},o.b0=_s,o.b1=bi,o.b2=Rv,o.b3=TF,o.b4=function(A,a){const l=Th(a.zoom);if(l===0)return lu(A);const h=yb(A),g=KT(h),f=ge(h.getWest())*a.worldSize,v=ge(h.getEast())*a.worldSize,B=ye(h.getNorth())*a.worldSize,F=ye(h.getSouth())*a.worldSize,P=[f,B,0],b=[v,B,0],E=[f,F,0],M=[v,F,0],T=ke.mat4.invert([],a.globeMatrix);return ke.vec3.transformMat4(P,P,T),ke.vec3.transformMat4(b,b,T),ke.vec3.transformMat4(E,E,T),ke.vec3.transformMat4(M,M,T),g[0]=oA(g[0],E,l),g[1]=oA(g[1],M,l),g[2]=oA(g[2],b,l),g[3]=oA(g[3],P,l),Qn.fromPoints(g)},o.b5=xb,o.b6=Dv,o.b7=oA,o.b8=vm,o.b9=Ra,o.bA=Ta,o.bB=Br,o.bC=oc,o.bD=pe,o.bE=function(A,a,l){A[4*a+0]=l[0],A[4*a+1]=l[1],A[4*a+2]=l[2],A[4*a+3]=l[3]},o.bF=Bf,o.bG=_l,o.bH=Fv,o.bI=Yo,o.bJ=rA,o.bK=Z,o.bL=AO,o.bM=$i,o.bN=Eh,o.bO=FO,o.bP=co,o.bQ=pR,o.bR=function(A,a,l,h,g,f,v,B,F){if(F.name==="globe")return pR(A,a,new co(l,h,g),!1);const P=Xv({z:l,x:h,y:g},F);return new Qn([(f+P.x/P.scale)*a,a*(P.y/P.scale),v],[(f+P.x2/P.scale)*a,a*(P.y2/P.scale),B])},o.bS=function(A,a,l){let h=0;for(let g=0;g<2;++g)A[g]>0&&(h+=(A[g]-0)*(A[g]-0)),a[g]<0&&(h+=(0-a[g])*(0-a[g]));return h},o.bT=Ee,o.bU=m,o.bV=function(A){const a=ke.mat4.identity(new Float64Array(16));ke.mat4.multiply(a,A.pixelMatrix,A.globeMatrix);const l=[0,D,0],h=[0,L,0];return ke.vec3.transformMat4(l,l,a),ke.vec3.transformMat4(h,h,a),[l[0]>0&&l[0]<=A.width&&l[1]>0&&l[1]<=A.height&&!XT(A,new Z(A.center.lat,90)),h[0]>0&&h[0]<=A.width&&h[1]>0&&h[1]<=A.height&&!XT(A,new Z(A.center.lat,-90))]},o.bW=function(A,a){const{scale:l}=A.tileTransform,h=l*Ut/(A.tileSize*Math.pow(2,a.zoom-A.tileID.overscaledZ+A.tileID.canonical.z));return ke.mat2.scale(new Float32Array(4),a.inverseAdjustmentMatrix,[h,h])},o.bX=Zb,o.bY=TO,o.bZ=function(A){const a=TO(A,!0);return ke.mat2.invert([],[a[0],a[1],a[4],a[5]])},o.b_=su,o.ba=VF,o.bb=Db,o.bc=qc,o.bd=function(A){const a=[];for(const l in A)a.push(A[l]);return a},o.be=function(A,a){const l=[];for(const h in A)h in a||l.push(h);return l},o.bf=ia,o.bg=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.bh=Ea,o.bi=function(A,a){const{x:l,y:h}=A.point,g=vR(l,h,A.worldSize/A._pixelsPerMercatorPixel,0,0);return ke.mat4.multiply(g,g,WT(lu(a)))},o.bj=Mm,o.bk=Ks,o.bl=Pb,o.bm=function(A,a,l,h,g){const f=5*a+2;A.float32[f+0]=l,A.float32[f+1]=h,A.float32[f+2]=g},o.bn=jb,o.bo=XL,o.bp=Lt,o.bq=Lo,o.br=YR,o.bs=DO,o.bt=rL,o.bu=nL,o.bv=bF,o.bw=rO,o.bx=vF,o.by=qF,o.bz=An,o.c=Ke,o.c$=Aa,o.c0=en,o.c1=ua,o.c2=u,o.c3=function(A){const a=Math.round((A+45+360)%360/90)%4;return Hi[a]},o.c4=45,o.c5=ae,o.c6=Em,o.c7=function(A,a,l){const h=Math.sqrt(A*A+a*a+l*l),g=h>0?Math.acos(l/h)*po:0;let f=A!==0||a!==0?Math.atan2(-a,-A)*po+90:0;return f<0&&(f+=360),[h,f,g]},o.c8=Pe,o.c9=Qn,o.cA=function(A){const a=Ee-5;A=xr(A,-a,a)/a*90;const l=Math.pow(Math.abs(Math.sin(Br(A))),3);return Math.round(l*(C.length-1))},o.cB=function(A,a,l,h){const g=a.getNorth(),f=a.getSouth(),v=a.getWest(),B=a.getEast(),F=1<<A.z,P=B-v,b=g-f,E=P/w,M=-b/C[l],T=[0,E,0,M,0,0,g,v,0];if(A.z>0){const I=180/h;ke.mat3.multiply(T,T,[I/P+1,0,0,0,I/b+1,0,-.5*I/E,.5*I/M,1])}return T[2]=F,T[5]=A.x,T[8]=A.y,T},o.cC=lu,o.cD=function(A,a,l){const h=ke.mat4.identity(new Float64Array(16)),g=(a/(1<<A)-.5)*Math.PI*2;return ke.mat4.rotateY(h,l.globeMatrix,g),Float32Array.from(h)},o.cE=class{isDataAvailableAtPoint(A){const a=this._source();if(this.isUsingMockSource()||!a||A.y<0||A.y>1)return!1;const l=a.getSource().maxzoom,h=1<<l,g=Math.floor(A.x),f=Math.floor((A.x-g)*h),v=Math.floor(A.y*h),B=this.findDEMTileFor(new zn(l,g,l,f,v));return!(!B||!B.dem)}getAtPointOrZero(A,a=0){return this.getAtPoint(A,a)||0}getAtPoint(A,a,l=!0){if(this.isUsingMockSource())return null;a==null&&(a=null);const h=this._source();if(!h||A.y<0||A.y>1)return a;const g=h.getSource().maxzoom,f=1<<g,v=Math.floor(A.x),B=A.x-v,F=new zn(g,v,g,Math.floor(B*f),Math.floor(A.y*f)),P=this.findDEMTileFor(F);if(!P||!P.dem)return a;const b=P.dem,E=1<<P.tileID.canonical.z,M=(B*E-P.tileID.canonical.x)*b.dim,T=(A.y*E-P.tileID.canonical.y)*b.dim,I=Math.floor(M),R=Math.floor(T);return(l?this.exaggeration():1)*cr(cr(b.get(I,R),b.get(I,R+1),T-R),cr(b.get(I+1,R),b.get(I+1,R+1),T-R),M-I)}getAtTileOffset(A,a,l){const h=1<<A.canonical.z;return this.getAtPointOrZero(new Xe(A.wrap+(A.canonical.x+a/Ut)/h,(A.canonical.y+l/Ut)/h))}getAtTileOffsetFunc(A,a,l,h){return g=>{const f=this.getAtTileOffset(A,g.x,g.y),v=h.upVector(A.canonical,g.x,g.y),B=h.upVectorScale(A.canonical,a,l).metersToTile;return ke.vec3.scale(v,v,f*B),v}}getForTilePoints(A,a,l,h){if(this.isUsingMockSource())return!1;const g=Om.create(this,A,h);return!!g&&(a.forEach(f=>{f[2]=this.exaggeration()*g.getElevationAt(f[0],f[1],l)}),!0)}getMinMaxForTile(A){if(this.isUsingMockSource())return null;const a=this.findDEMTileFor(A);if(!a||!a.dem)return null;const l=a.dem.tree,h=a.tileID,g=1<<A.canonical.z-h.canonical.z;let f=A.canonical.x/g-h.canonical.x,v=A.canonical.y/g-h.canonical.y,B=0;for(let F=0;F<A.canonical.z-h.canonical.z&&!l.leaves[B];F++){f*=2,v*=2;const P=2*Math.floor(v)+Math.floor(f);B=l.childOffsets[B]+P,f%=1,v%=1}return{min:this.exaggeration()*l.minimums[B],max:this.exaggeration()*l.maximums[B]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(A,a,l){throw new Error("Pure virtual method called.")}pointCoordinate(A){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(A){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const A=this.visibleDemTiles;if(A.length===0)return null;let a=!1,l=Number.MAX_VALUE,h=Number.MIN_VALUE;for(const g of A){const f=this.getMinMaxForTile(g.tileID);f&&(l=Math.min(l,f.min),h=Math.max(h,f.max),a=!0)}return a?{min:l,max:h}:null}},o.cF=MR,o.cG=iA,o.cH=function(A,a){return[Math.pow(A[0],2.2)*a,Math.pow(A[1],2.2)*a,Math.pow(A[2],2.2)*a]},o.cI=gR,o.cJ=Be,o.cK=Ae,o.cL=256,o.cM=function(A,a){const l=[0,0,0],h=xb(lu(a.canonical));return ke.vec3.transformMat4(l,l,h),ke.vec3.transformMat4(l,l,A),l},o.cN=A=>({u_camera_to_center_distance:new Yo(A),u_extrude_scale:new Mv(A),u_device_pixel_ratio:new Yo(A),u_matrix:new Bf(A),u_inv_rot_matrix:new Bf(A),u_merc_center:new _l(A),u_tile_id:new Fv(A),u_zoom_transition:new Yo(A),u_up_dir:new Fv(A),u_emissive_strength:new Yo(A)}),o.cO=A=>({u_matrix:new Bf(A),u_pixels_to_tile_units:new Mv(A),u_device_pixel_ratio:new Yo(A),u_units_to_pixels:new _l(A),u_dash_image:new rA(A),u_gradient_image:new rA(A),u_image_height:new Yo(A),u_texsize:new _l(A),u_tile_units_to_pixels:new Yo(A),u_alpha_discard_threshold:new Yo(A),u_trim_offset:new _l(A),u_trim_fade_range:new _l(A),u_trim_color:new Em(A),u_emissive_strength:new Yo(A)}),o.cP=A=>({u_matrix:new Bf(A),u_texsize:new _l(A),u_pixels_to_tile_units:new Mv(A),u_device_pixel_ratio:new Yo(A),u_image:new rA(A),u_units_to_pixels:new _l(A),u_tile_units_to_pixels:new Yo(A),u_alpha_discard_threshold:new Yo(A),u_trim_offset:new _l(A)}),o.cQ=ca,o.cR=MX,o.cS=PX,o.cT=xR,o.cU=(A,a,l,h,g,f)=>{const v=A.transform,B=v.projection.name==="globe";let F;if(f.paint.get("circle-pitch-alignment")==="map")if(B){const b=gR(v.zoom,a.canonical)*v._pixelsPerMercatorPixel;F=Float32Array.from([b,0,0,b])}else F=v.calculatePixelsToTileUnitsMatrix(l);else F=new Float32Array([v.pixelsToGLUnits[0],0,0,v.pixelsToGLUnits[1]]);const P={u_camera_to_center_distance:A.transform.getCameraToCenterDistance(v.projection),u_matrix:A.translatePosMatrix(a.projMatrix,l,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_device_pixel_ratio:Nt.devicePixelRatio,u_extrude_scale:F,u_inv_rot_matrix:Rq,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:f.paint.get("circle-emissive-strength")};if(B){P.u_inv_rot_matrix=h,P.u_merc_center=g,P.u_tile_id=[a.canonical.x,a.canonical.y,1<<a.canonical.z],P.u_zoom_transition=Th(v.zoom);const b=g[0]*Ut,E=g[1]*Ut;P.u_up_dir=v.projection.upVector(new co(0,0,0),b,E)}return P},o.cV=FL,o.cW=(A,a,l,h,g,f)=>{const v=A.transform;return{u_matrix:TL(A,a,l,h),u_texsize:a.imageAtlasTexture?a.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:v.calculatePixelsToTileUnitsMatrix(a),u_device_pixel_ratio:g,u_image:0,u_tile_units_to_pixels:EL(a,v),u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:f}},o.cX=(A,a,l,h,g,f,v)=>{const B=A.transform,F=B.calculatePixelsToTileUnitsMatrix(a);return{u_matrix:TL(A,a,l,h),u_pixels_to_tile_units:F,u_device_pixel_ratio:f,u_units_to_pixels:[1/B.pixelsToGLUnits[0],1/B.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:g,u_texsize:IL(l)&&a.lineAtlasTexture?a.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:EL(a,A.transform),u_alpha_discard_threshold:0,u_trim_offset:v,u_trim_fade_range:l.paint.get("line-trim-fade-range"),u_trim_color:l.paint.get("line-trim-color").toRenderColor(l.lut).toArray01(),u_emissive_strength:l.paint.get("line-emissive-strength")}},o.cY=Nc,o.cZ=kv,o.c_=mL,o.ca=aa,o.cb=function(A){return[Math.pow(A[0],1/2.2),Math.pow(A[1],1/2.2),Math.pow(A[2],1/2.2)]},o.cc=function(A){return A({pluginStatus:yo,pluginURL:tu}),hv.on("pluginStateChange",A),A},o.cd=Um,o.ce=rw,o.cf=Dm,o.cg=_F,o.ch=Kd,o.ci=eb,o.cj=fr,o.ck=qo,o.cl=Fa,o.cm=function(A){const a=A.indexOf(yh);return a>=0?A.slice(0,a):A},o.cn=function(A){return A.indexOf(yh)>=0},o.co=function(A){const a=A.indexOf(yh);return a>=0?A.slice(a+1):""},o.cp=function(A){const a=[],l=A.id;return l===void 0&&a.push({message:`layers.${l}: missing required property "id"`}),A.render===void 0&&a.push({message:`layers.${l}: missing required method "render"`}),A.renderingMode&&A.renderingMode!=="2d"&&A.renderingMode!=="3d"&&a.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),a},o.cq=function(A,a,l,h){return A.type==="custom"?new cZ(A,a):new _Z[A.type](A,a,l,h)},o.cr=Us,o.cs=hv,o.ct=Vu,o.cu=Iv,o.cv=class extends dc{constructor(A){super(A),this.current=zT}set(A,a,l){if(this.fetchUniformLocation(A,a)){for(let h=0;h<9;h++)if(l[h]!==this.current[h]){this.current=l,this.gl.uniformMatrix3fv(this.location,!1,l);break}}}},o.cw=mo,o.cx=function(A,a,l){const h=Th(l.zoom),g=A.style.map._antialias,f=a.options.extStandardDerivativesForceOff||A.terrain&&A.terrain.exaggeration()>0;return h===0&&!g&&!f},o.cy=function(A){const a=A.pixelsPerMeter,l=a/pe(1,A.center.lat),h=ke.mat4.identity(new Float64Array(16));return ke.mat4.translate(h,h,[A.point.x,A.point.y,0]),ke.mat4.scale(h,h,[l,l,a]),Float32Array.from(h)},o.cz=yb,o.d=function(A){return De.API_TILEJSON_REGEX.test(A)},o.d$=x,o.d0=Mb,o.d1=Ih,o.d2=450,o.d3=7,o.d4=lZ,o.d5=hn,o.d6=bm,o.d7=256,o.d8=WT,o.d9=iu,o.dA=yR,o.dB=function(A){const a=[0,0,0],l=ke.mat4.identity(new Float64Array(16));return ke.mat4.multiply(l,A.pixelMatrix,A.globeMatrix),ke.vec3.transformMat4(a,a,l),new Dt(a[0],a[1])},o.dC=function(A,a,l=!1){if(yo===df||yo===ff||yo===hm)throw new Error("setRTLTextPlugin cannot be called multiple times.");tu=Nt.resolveURL(A),yo=df,ph=a,Av(),l||fv()},o.dD=dv,o.dE=function(){rw().acquire(HF)},o.dF=function(){const A=sy;A&&(A.isPreloaded()&&A.numActive()===1?(A.release(HF),sy=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},o.dG=ay,o.dH=function(A){const a=Kn();if(!a)return;const l=a.delete(yr);A&&l.catch(A).then(()=>A())},o.dI=oy,o.dJ=lU,o.dK=function(A){jF=Nt.resolveURL(A),Nm||(Nm=new Um(rw(),new Xc)),Nm.broadcast("setDracoUrl",jF)},o.dL=cU,o.dM=function(A){Qm=Nt.resolveURL(A),Nm||(Nm=new Um(rw(),new Xc)),Nm.broadcast("setMeshoptUrl",Qm)},o.dN=Wt,o.dO=Fh,o.dP=mc,o.dQ=vU,o.dR=_U,o.dS=bL,o.dT=oa,o.dU=YL,o.dV=function(A,a,l,h,g,f,v,B,F,P,b){A.createArrays(),A.tilePixelRatio=Ut/(512*A.overscaling),A.compareText={},A.iconsNeedLinear=!1;const E=A.layers[0].layout,M=A.layers[0]._unevaluatedLayout._values,T={};if(A.textSizeData.kind==="composite"){const{minZoom:V,maxZoom:X}=A.textSizeData;T.compositeTextSizes=[M["text-size"].possiblyEvaluate(new xi(V),B),M["text-size"].possiblyEvaluate(new xi(X),B)]}if(A.iconSizeData.kind==="composite"){const{minZoom:V,maxZoom:X}=A.iconSizeData;T.compositeIconSizes=[M["icon-size"].possiblyEvaluate(new xi(V),B),M["icon-size"].possiblyEvaluate(new xi(X),B)]}T.layoutTextSize=M["text-size"].possiblyEvaluate(new xi(F+1),B),T.layoutIconSize=M["icon-size"].possiblyEvaluate(new xi(F+1),B),T.textMaxSize=M["text-size"].possiblyEvaluate(new xi(18),B);const I=E.get("text-rotation-alignment")==="map"&&E.get("symbol-placement")!=="point",R=E.get("text-size");let U=!1;for(const V of A.features)if(V.icon&&V.icon.nameSecondary){U=!0;break}for(const V of A.features){const X=E.get("text-font").evaluate(V,{},B).join(","),Y=R.evaluate(V,{},B),H=T.layoutTextSize.evaluate(V,{},B),$=(T.layoutIconSize.evaluate(V,{},B),{horizontal:{},vertical:void 0}),te=V.text;let le,me=[0,0];if(te){const Ce=te.toString(),_e=E.get("text-letter-spacing").evaluate(V,{},B)*Lo,Te=E.get("text-line-height").evaluate(V,{},B)*Lo,Oe=ET(Ce)?_e:0,Ve=E.get("text-anchor").evaluate(V,{},B),je=E.get("text-variable-anchor");if(!je){const xt=E.get("text-radial-offset").evaluate(V,{},B);me=xt?rO(Ve,[xt*Lo,xF]):E.get("text-offset").evaluate(V,{},B).map(at=>at*Lo)}let We=I?"center":E.get("text-justify").evaluate(V,{},B);const et=E.get("symbol-placement")==="point",qe=et?E.get("text-max-width").evaluate(V,{},B)*Lo:1/0,At=xt=>{A.allowVerticalPlacement&&cm(Ce)&&($.vertical=gF(te,a,l,g,X,qe,Te,Ve,xt,Oe,me,Ks.vertical,!0,H,Y))};if(!I&&je){const xt=We==="auto"?je.map(Vt=>bF(Vt)):[We];let at=!1;for(let Vt=0;Vt<xt.length;Vt++){const Ot=xt[Vt];if(!$.horizontal[Ot])if(at)$.horizontal[Ot]=$.horizontal[0];else{const Ft=gF(te,a,l,g,X,qe,Te,"center",Ot,Oe,me,Ks.horizontal,!1,H,Y);Ft&&($.horizontal[Ot]=Ft,at=Ft.positionedLines.length===1)}}At("left")}else{if(We==="auto"&&(We=bF(Ve)),et||E.get("text-writing-mode").indexOf("horizontal")>=0||!cm(Ce)){const xt=gF(te,a,l,g,X,qe,Te,Ve,We,Oe,me,Ks.horizontal,!1,H,Y);xt&&($.horizontal[We]=xt)}At(et?"left":We)}}let ve=!1;if(V.icon&&V.icon.namePrimary){const Ce=h[V.icon.namePrimary];Ce&&(le=VX(g[V.icon.namePrimary],V.icon.nameSecondary?g[V.icon.nameSecondary]:void 0,E.get("icon-offset").evaluate(V,{},B),E.get("icon-anchor").evaluate(V,{},B)),ve=Ce.sdf,A.sdfIcons===void 0?A.sdfIcons=Ce.sdf:A.sdfIcons!==Ce.sdf&&tn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ce.pixelRatio!==A.pixelRatio||E.get("icon-rotate").constantOr(1)!==0)&&(A.iconsNeedLinear=!0))}const de=iO($.horizontal)||$.vertical;A.iconsInText||(A.iconsInText=!!de&&de.iconsInText),(de||le)&&XX(A,V,$,le,h,T,H,0,me,ve,v,B,P,b,U)}f&&A.generateCollisionDebugBuffers(F,A.collisionBoxArray)},o.dW=Im,o.dX=tw,o.dY=Sa,o.dZ=WR,o.d_=LL,o.da=hc,o.db=Bv,o.dc=function(A,a,l,h,g){return xr((A-a)/(l-a)*(g-h)+h,h,g)},o.dd=tm,o.de=Qe,o.df=class{constructor(A,a,l,h){this.context=A,this.format=h,this.size=l,this.texture=A.gl.createTexture();const[g,f,v]=this.size,{gl:B}=A;B.bindTexture(B.TEXTURE_3D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(!1),B.texImage3D(B.TEXTURE_3D,0,this.format,g,f,v,0,FF(this.format),IF(this.format),a.data)}bind(A,a){const{context:l}=this,{gl:h}=l;h.bindTexture(h.TEXTURE_3D,this.texture),A!==this.minFilter&&(h.texParameteri(h.TEXTURE_3D,h.TEXTURE_MAG_FILTER,A),h.texParameteri(h.TEXTURE_3D,h.TEXTURE_MIN_FILTER,A),this.minFilter=A),a!==this.wrapS&&(h.texParameteri(h.TEXTURE_3D,h.TEXTURE_WRAP_S,a),h.texParameteri(h.TEXTURE_3D,h.TEXTURE_WRAP_T,a),this.wrapS=a)}destroy(){const{gl:A}=this.context;A.deleteTexture(this.texture),this.texture=null}},o.dg=kF,o.dh=[1,1,1],o.di=Om,o.dj=Lm,o.dk=ou,o.dl=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new Dt(1/0,1/0),max:new Dt(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(A,a=!1){const l=$R(new Dt(0,0),new Dt(Ut,Ut),A),h=[];if(a&&!aF(l,this._globalClipBounds))return h;for(const g of this._activeRegions){if(g.hiddenByOverlap||!aF(l,g))continue;const f=iX(g.min,g.max,A);h.push({min:f.min,max:f.max,sourceId:this._sourceIds[g.priority],footprint:g.footprint,footprintTileId:g.tileId,order:g.order,clipMask:g.clipMask,clipScope:g.clipScope})}return h}setSources(A){this._setSources(A.map(a=>({getSourceId:()=>a.cache.id,getFootprints:()=>{const l=[];for(const h of a.cache.getVisibleCoordinates()){const g=a.cache.getTile(h).buckets[a.layer];g&&g.updateFootprints(h.toUnwrapped(),l)}return l},getOrder:()=>a.order,getClipMask:()=>a.clipMask,getClipScope:()=>a.clipScope})))}_addSource(A){const a=A.getFootprints();if(a.length===0)return;const l=A.getOrder(),h=A.getClipMask(),g=A.getClipScope();for(const f of a){if(!f.footprint)continue;const v=$R(f.footprint.min,f.footprint.max,f.id);this._activeRegions.push({min:v.min,max:v.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:f.id,footprint:f.footprint,order:l,clipMask:h,clipScope:g})}this._sourceIds.push(A.getSourceId())}_computeReplacement(){this._activeRegions.sort((a,l)=>a.priority-l.priority||Fb(a.min,l.min)||Fb(a.max,l.max)||a.order-l.order||a.clipMask-l.clipMask||function(h,g){const f=(v,B)=>v+B;return h.length-g.length||h.reduce(f,"").localeCompare(g.reduce(f,""))}(a.clipScope,l.clipScope));let A=this._activeRegions.length!==this._prevRegions.length;if(!A){let a=0;for(;!A&&a!==this._activeRegions.length;){const l=this._activeRegions[a],h=this._prevRegions[a];A=l.priority!==h.priority||!JR(l,h)||l.order!==h.order||l.clipMask!==h.clipMask||!Ea(l.clipScope,h.clipScope),++a}}if(A){++this._updateTime;for(const l of this._activeRegions)l.order!==Tb&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,l.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,l.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,l.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,l.max.y));const a=l=>{const h=this._activeRegions;if(l>=h.length)return l;const g=h[l].priority;for(;l<h.length&&h[l].priority===g;)++l;return l};if(this._sourceIds.length>1){let l=0,h=a(l);for(;l!==h;){let g=l;const f=l;for(;g!==h;){const v=this._activeRegions[g];v.hiddenByOverlap=!1;for(let B=0;B<f;B++){const F=this._activeRegions[B];if(!F.hiddenByOverlap&&v.order===Tb&&aF(v,F)&&(v.hiddenByOverlap=tL(v.footprint,v.tileId,F.footprint,F.tileId),v.hiddenByOverlap))break}++g}l=h,h=a(l)}}}}_setSources(A){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let a=A.length-1;a>=0;a--)this._addSource(A[a]);this._computeReplacement()}},o.dm=class{constructor(A){this._createGrid(A),this._createPoles(A)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const A of this._poleSegments)A.destroy();for(const A of this._gridSegments)A.withSkirts.destroy(),A.withoutSkirts.destroy()}_fillGridMeshWithLods(A,a){const l=new ru,h=new Fo,g=[],f=A+1+2,v=a[0]+1,B=a[0]+1+(1+a.length),F=(P,b,E)=>{let M=P===f-1?P-2:P===0?P:P-1;return M+=E?24575:0,[M,b]};for(let P=0;P<f;++P)l.emplaceBack(...F(P,0,!0));for(let P=0;P<v;++P)for(let b=0;b<f;++b)l.emplaceBack(...F(b,P,(b===0||b===f-1)&&!0));for(let P=0;P<a.length;++P){const b=a[P];for(let E=0;E<f;++E)l.emplaceBack(...F(E,b,!0))}for(let P=0;P<a.length;++P){const b=h.length,E=a[P]+1+2,M=new Fo;for(let R=0;R<E-1;R++){const U=R===E-2,V=U?f*(B-a.length+P-R):f;for(let X=0;X<f-1;X++){const Y=R*f+X;R===0||U||X===0||X===f-2?(M.emplaceBack(Y+1,Y,Y+V),M.emplaceBack(Y+V,Y+V+1,Y+1)):(h.emplaceBack(Y+1,Y,Y+V),h.emplaceBack(Y+V,Y+V+1,Y+1))}}const T=bi.simpleSegment(0,b,l.length,h.length-b);for(let R=0;R<M.uint16.length;R+=3)h.emplaceBack(M.uint16[R],M.uint16[R+1],M.uint16[R+2]);const I=bi.simpleSegment(0,b,l.length,h.length-b);g.push({withoutSkirts:T,withSkirts:I})}return{vertices:l,indices:h,segments:g}}_createGrid(A){const a=this._fillGridMeshWithLods(w,C);this._gridSegments=a.segments,this._gridBuffer=A.createVertexBuffer(a.vertices,_s.members),this._gridIndexBuffer=A.createIndexBuffer(a.indices,!0)}_createPoles(A){const a=new Fo;for(let v=0;v<=w;v++)a.emplaceBack(0,v+1,v+2);this._poleIndexBuffer=A.createIndexBuffer(a,!0);const l=new hc,h=new hc,g=new hc,f=new hc;this._poleSegments=[];for(let v=0,B=0;v<u;v++){const F=360/(1<<v);l.emplaceBack(0,-s,0,.5,0),h.emplaceBack(0,-s,0,.5,1),g.emplaceBack(0,-s,0,.5,.5),f.emplaceBack(0,-s,0,.5,.5);for(let P=0;P<=w;P++){let b=P/w,E=0;const M=cr(0,F,b),[T,I,R]=z(Dq,kq,M,s);l.emplaceBack(T,I,R,b,E),h.emplaceBack(T,I,R,b,1-E);const U=Br(M);b=.5+.5*Math.sin(U),E=.5+.5*Math.cos(U),g.emplaceBack(T,I,R,b,E),f.emplaceBack(T,I,R,b,1-E)}this._poleSegments.push(bi.simpleSegment(B,0,66,64)),B+=66}this._poleNorthVertexBuffer=A.createVertexBuffer(l,is,!1),this._poleSouthVertexBuffer=A.createVertexBuffer(h,is,!1),this._texturedPoleNorthVertexBuffer=A.createVertexBuffer(g,is,!1),this._texturedPoleSouthVertexBuffer=A.createVertexBuffer(f,is,!1)}getGridBuffers(A,a){return[this._gridBuffer,this._gridIndexBuffer,a?this._gridSegments[A].withSkirts:this._gridSegments[A].withoutSkirts]}getPoleBuffers(A,a){return[a?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,a?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[A]]}},o.dn=Tb,o.dp=so,o.dq=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},o.dr=Wa,o.ds=Re,o.dt=N,o.du=function([A,a,l]){const h=Math.hypot(A,a,l),g=Math.atan2(A,l),f=.5*Math.PI-Math.acos(-a/h);return new Z(en(g),en(f))},o.dv=DF,o.dw=j,o.dx=function(A){const a=A.navigator?A.navigator.userAgent:null;return!!function(l){if(Nu==null){const h=l.navigator?l.navigator.userAgent:null;Nu=!!l.safari||!(!h||!(/\b(iPad|iPhone|iPod)\b/.test(h)||h.match("Safari")&&!h.match("Chrome")))}return Nu}(A)&&a&&(a.match("Version/15.4")||a.match("Version/15.5")||a.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},o.dy=function(A,a){pr=A,mn=a},o.dz=XT,o.e=De,o.e0=function(A){let a=0;if(new Uint32Array(A,0,1)[0]!==AU){const l=new Uint32Array(A,0,7),[,,h,g,f,v]=l;a=l.byteLength+g+f+v+f,(h!==A.byteLength||a>=A.byteLength)&&tn("Invalid b3dm header information.")}return pU(A,a)},o.e1=function(A,a){const l=gU(A);for(const h of l){for(const g of h.meshes)aY(g);h.lights&&(h.lightMeshIndex=h.meshes.length,h.meshes.push(sY(h.lights,a)))}return l},o.e2=ew,o.e3=GO,o.e4=ka,o.e5=function(A){Mi(),Sr!=null&&Sr.then(a=>{a.keys().then(l=>{for(let h=0;h<l.length-A;h++)a.delete(l[h])})})},o.f=function(A){return A.indexOf("mapbox:")===0},o.g=function(A,a){return Vu(go(A,{method:"GET"}),a)},o.h=Ie,o.i=function(A){return De.API_STYLE_REGEX.test(A)&&!Ke(A)},o.j=function(A){return decodeURIComponent(atob(A).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join(""))},o.k=function(A){return btoa(encodeURIComponent(A).replace(/%([0-9A-F]{2})/g,(a,l)=>String.fromCharCode(+("0x"+l))))},o.l=go,o.m=Zi,o.n=function(A,a){return Vu(go(A,{type:"json"}),a)},o.o=Ma,o.p=function(A,a){return Vu(go(A,{method:"POST"}),a)},o.q=Nt,o.r=ha,o.s=function(A){try{const a=self[A];return a.setItem("_mapbox_test_",1),a.removeItem("_mapbox_test_"),!0}catch{return!1}},o.t=ju,o.u=function(){return function A(a){return a?(a^Math.random()*(16>>a/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,A)}()},o.v=function(A){return!!A&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(A)},o.w=tn,o.x=ml,o.y=2,o.z=ZL}),d(["./shared"],function(o){function x(it){const se=it?it.url.toString():void 0;return se?performance.getEntriesByName(se):[]}function S(it){if(typeof it=="number"||typeof it=="boolean"||typeof it=="string"||it==null)return JSON.stringify(it);if(Array.isArray(it)){let Ae="[";for(const Be of it)Ae+=`${S(Be)},`;return`${Ae}]`}let se="{";for(const Ae of Object.keys(it).sort())se+=`${Ae}:${S(it[Ae])},`;return`${se}}`}function k(it){let se="";for(const Ae of o.bg)se+=`/${S(it[Ae])}`;return se}class O{constructor(se){this.keyCache={},this._layers={},this._layerConfigs={},se&&this.replace(se)}replace(se,Ae){this._layerConfigs={},this._layers={},this.update(se,[],Ae)}update(se,Ae,Be){this._options=Be;for(const Ie of se)this._layerConfigs[Ie.id]=Ie,(this._layers[Ie.id]=o.cq(Ie,this.scope,null,this._options)).compileFilter(Be),this.keyCache[Ie.id]&&delete this.keyCache[Ie.id];for(const Ie of Ae)delete this.keyCache[Ie],delete this._layerConfigs[Ie],delete this._layers[Ie];this.familiesBySource={};const De=function(Ie,Ke){const rt={};for(let nt=0;nt<Ie.length;nt++){const dt=Ke&&Ke[Ie[nt].id]||k(Ie[nt]);Ke&&(Ke[Ie[nt].id]=dt);let ut=rt[dt];ut||(ut=rt[dt]=[]),ut.push(Ie[nt])}const Ze=[];for(const nt in rt)Ze.push(rt[nt]);return Ze}(o.bd(this._layerConfigs),this.keyCache);for(const Ie of De){const Ke=Ie.map(Ct=>this._layers[Ct.id]),rt=Ke[0];if(rt.visibility==="none")continue;const Ze=rt.source||"";let nt=this.familiesBySource[Ze];nt||(nt=this.familiesBySource[Ze]={});const dt=rt.sourceLayer||"_geojsonTileLayer";let ut=nt[dt];ut||(ut=nt[dt]=[]),ut.push(Ke)}}}const Q=1*o.dP;class G{constructor(se){const Ae={},Be=[];for(const rt in se){const Ze=se[rt],nt=Ae[rt]={};for(const dt in Ze.glyphs){const ut=Ze.glyphs[+dt];if(!ut||ut.bitmap.width===0||ut.bitmap.height===0)continue;const Ct=ut.metrics.localGlyph?Q:1,zt={x:0,y:0,w:ut.bitmap.width+2*Ct,h:ut.bitmap.height+2*Ct};Be.push(zt),nt[dt]=zt}}const{w:De,h:Ie}=o.z(Be),Ke=new o.dO({width:De||1,height:Ie||1});for(const rt in se){const Ze=se[rt];for(const nt in Ze.glyphs){const dt=Ze.glyphs[+nt];if(!dt||dt.bitmap.width===0||dt.bitmap.height===0)continue;const ut=Ae[rt][nt],Ct=dt.metrics.localGlyph?Q:1;o.dO.copy(dt.bitmap,Ke,{x:0,y:0},{x:ut.x+Ct,y:ut.y+Ct},dt.bitmap)}}this.image=Ke,this.positions=Ae}}o.dN(G,"GlyphAtlas");class K{constructor(se){this.tileID=new o.aA(se.tileID.overscaledZ,se.tileID.wrap,se.tileID.canonical.z,se.tileID.canonical.x,se.tileID.canonical.y),this.tileZoom=se.tileZoom,this.uid=se.uid,this.zoom=se.zoom,this.lut=se.lut,this.canonical=se.tileID.canonical,this.pixelRatio=se.pixelRatio,this.tileSize=se.tileSize,this.source=se.source,this.scope=se.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=se.showCollisionBoxes,this.collectResourceTiming=!!se.collectResourceTiming,this.promoteId=se.promoteId,this.isSymbolTile=se.isSymbolTile,this.tileTransform=o.aK(se.tileID.canonical,se.projection),this.projection=se.projection,this.brightness=se.brightness,this.extraShadowCaster=!!se.extraShadowCaster,this.tessellationStep=se.tessellationStep}parse(se,Ae,Be,De,Ie){this.status="parsing",this.data=se,this.collisionBoxArray=new o.aQ;const Ke=new o.dQ(Object.keys(se.layers).sort()),rt=new o.dR(this.tileID,this.promoteId);rt.bucketLayerIDs=[];const Ze={},nt=new o.dS(256,256),dt={featureIndex:rt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:nt,availableImages:Be,brightness:this.brightness},ut=Ae.familiesBySource[this.source];for(const pr in ut){const mn=se.layers[pr];if(!mn)continue;let gn=!1,Sr=!1,un=!1;for(const yi of ut[pr])yi[0].type==="symbol"?gn=!0:Sr=!0,yi[0].is3D()&&yi[0].type!=="model"&&(un=!0);if(this.extraShadowCaster&&!un||this.isSymbolTile===!0&&!gn||this.isSymbolTile===!1&&!Sr)continue;mn.version===1&&o.w(`Vector tile source "${this.source}" layer "${pr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Kn=Ke.encode(pr),Mi=[];for(let yi=0;yi<mn.length;yi++){const Zi=mn.feature(yi),Xa=rt.getId(Zi,pr);Mi.push({feature:Zi,id:Xa,index:yi,sourceLayerIndex:Kn})}for(const yi of ut[pr]){const Zi=yi[0];(!this.extraShadowCaster||Zi.is3D()&&Zi.type!=="model")&&(this.isSymbolTile!==void 0&&Zi.type==="symbol"!==this.isSymbolTile||Zi.minzoom&&this.zoom<Math.floor(Zi.minzoom)||Zi.maxzoom&&this.zoom>=Zi.maxzoom||Zi.visibility!=="none"&&(ee(yi,this.zoom,dt.brightness,Be),(Ze[Zi.id]=Zi.createBucket({index:rt.bucketLayerIDs.length,layers:yi,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Kn,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep})).populate(Mi,dt,this.tileID.canonical,this.tileTransform),rt.bucketLayerIDs.push(yi.map(Xa=>Xa.id))))}}let Ct,zt,Nt,hr;nt.trim();const fr={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},yr=()=>{if(Ct)return this.status="done",Ie(Ct);if(this.extraShadowCaster)this.status="done",Ie(null,{buckets:o.bd(Ze).filter(pr=>!pr.isEmpty()),featureIndex:rt,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:dt.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(zt&&Nt&&hr){const pr=new G(zt),mn=new o.dU(Nt,hr,this.lut);for(const gn in Ze){const Sr=Ze[gn];Sr instanceof o.aR?(ee(Sr.layers,this.zoom,dt.brightness,Be),o.dV(Sr,zt,pr.positions,Nt,mn.iconPositions,this.showCollisionBoxes,Be,this.tileID.canonical,this.tileZoom,this.projection,this.brightness)):Sr.hasPattern&&(Sr instanceof o.aX||Sr instanceof o.aY||Sr instanceof o.d0)&&(ee(Sr.layers,this.zoom,dt.brightness,Be),Sr.addFeatures(dt,this.tileID.canonical,mn.patternPositions,Be,this.tileTransform,this.brightness))}this.status="done",Ie(null,{buckets:o.bd(Ze).filter(gn=>!gn.isEmpty()),featureIndex:rt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:pr.image,lineAtlas:nt,imageAtlas:mn,brightness:dt.brightness})}};if(!this.extraShadowCaster){const pr=o.dT(dt.glyphDependencies,Sr=>Object.keys(Sr).map(Number));Object.keys(pr).length?De.send("getGlyphs",{uid:this.uid,stacks:pr,scope:this.scope},(Sr,un)=>{Ct||(Ct=Sr,zt=un,yr())},void 0,!1,fr):zt={};const mn=Object.keys(dt.iconDependencies);mn.length?De.send("getImages",{icons:mn,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(Sr,un)=>{Ct||(Ct=Sr,Nt=un,yr())},void 0,!1,fr):Nt={};const gn=Object.keys(dt.patternDependencies);gn.length?De.send("getImages",{icons:gn,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(Sr,un)=>{Ct||(Ct=Sr,hr=un,yr())},void 0,!1,fr):hr={}}yr()}}function ee(it,se,Ae,Be){const De=new o.a3(se,{brightness:Ae});for(const Ie of it)Ie.recalculate(De,Be)}class W extends o.E{constructor(se,Ae,Be,De,Ie,Ke){super(),this.actor=se,this.layerIndex=Ae,this.availableImages=Be,this.loadVectorData=Ie||o.aw,this.loading={},this.loaded={},this.deduped=new o.au(se.scheduler),this.isSpriteLoaded=De,this.scheduler=se.scheduler,this.brightness=Ke}loadTile(se,Ae){const Be=se.uid,De=se&&se.request,Ie=De&&De.collectResourceTiming,Ke=this.loading[Be]=new K(se);Ke.abort=this.loadVectorData(se,(rt,Ze)=>{const nt=!this.loading[Be];if(delete this.loading[Be],nt||rt||!Ze)return Ke.status="done",nt||(this.loaded[Be]=Ke),Ae(rt);const dt=Ze.rawData,ut={};Ze.expires&&(ut.expires=Ze.expires),Ze.cacheControl&&(ut.cacheControl=Ze.cacheControl),Ke.vectorTile=Ze.vectorTile||new o.dW.VectorTile(new o.bb(dt));const Ct=()=>{Ke.parse(Ke.vectorTile,this.layerIndex,this.availableImages,this.actor,(zt,Nt)=>{if(zt||!Nt)return Ae(zt);const hr={};if(Ie){const fr=x(De);fr.length>0&&(hr.resourceTiming=JSON.parse(JSON.stringify(fr)))}Ae(null,o.l({rawTileData:dt.slice(0)},Nt,ut,hr))})};this.isSpriteLoaded?Ct():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Ct,{type:"parseTile",isSymbolTile:se.isSymbolTile,zoom:se.tileZoom}):Ct()}),this.loaded=this.loaded||{},this.loaded[Be]=Ke})}reloadTile(se,Ae){const Be=this.loaded,De=se.uid;if(Be&&Be[De]){const Ie=Be[De];Ie.showCollisionBoxes=se.showCollisionBoxes,Ie.projection=se.projection,Ie.brightness=se.brightness,Ie.tileTransform=o.aK(se.tileID.canonical,se.projection),Ie.extraShadowCaster=se.extraShadowCaster,Ie.lut=se.lut;const Ke=(rt,Ze)=>{const nt=Ie.reloadCallback;nt&&(delete Ie.reloadCallback,Ie.parse(Ie.vectorTile,this.layerIndex,this.availableImages,this.actor,nt)),Ae(rt,Ze)};Ie.status==="parsing"?Ie.reloadCallback=Ke:Ie.status==="done"&&(Ie.vectorTile?Ie.parse(Ie.vectorTile,this.layerIndex,this.availableImages,this.actor,Ke):Ke())}else Ae(null,void 0)}abortTile(se,Ae){const Be=se.uid,De=this.loading[Be];De&&(De.abort&&De.abort(),delete this.loading[Be]),Ae()}removeTile(se,Ae){const Be=this.loaded,De=se.uid;Be&&Be[De]&&delete Be[De],Ae()}}class J{loadTile(se,Ae){const{uid:Be,encoding:De,rawImageData:Ie,padding:Ke}=se,rt=ImageBitmap&&Ie instanceof ImageBitmap?this.getImageData(Ie,Ke):Ie;Ae(null,new o.dX(Be,rt,De,Ke<1))}getImageData(se,Ae){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(se.width,se.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=se.width,this.offscreenCanvas.height=se.height,this.offscreenCanvasContext.drawImage(se,0,0,se.width,se.height);const Be=this.offscreenCanvasContext.getImageData(-Ae,-Ae,se.width+2*Ae,se.height+2*Ae);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Be}}o.ba.setPbf(o.bb);class re{decodeRasterArray({task:se,buffer:Ae},Be){o.ba.performDecoding(Ae,se).then(De=>{Be(null,De)},De=>{Be(De)})}}const ue=o.dW.VectorTileFeature.prototype.toGeoJSON;class ce{constructor(se){this._feature=se,this.extent=o.ab,this.type=se.type,this.properties=se.tags,"id"in se&&!isNaN(se.id)&&(this.id=parseInt(se.id,10))}loadGeometry(){if(this._feature.type===1){const se=[];for(const Ae of this._feature.geometry)se.push([new o.P(Ae[0],Ae[1])]);return se}{const se=[];for(const Ae of this._feature.geometry){const Be=[];for(const De of Ae)Be.push(new o.P(De[0],De[1]));se.push(Be)}return se}}toGeoJSON(se,Ae,Be){return ue.call(this,se,Ae,Be)}}class he{constructor(se){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.ab,this.length=se.length,this._features=se}feature(se){return new ce(this._features[se])}}const xe=64/4096,fe=128;class Ue{constructor(){this.features=new Map}clear(){this.features.clear()}load(se=[],Ae){for(const Be of se){const De=Be.id;if(De==null)continue;let Ie=this.features.get(De);Ie&&this.updateCache(Ie,Ae),Be.geometry?(Ie=He(Be),this.updateCache(Ie,Ae),this.features.set(De,Ie)):this.features.delete(De),this.updateCache(Ie,Ae)}}updateCache(se,Ae){for(const{canonical:Be,uid:De}of Object.values(Ae)){const{z:Ie,x:Ke,y:rt}=Be;Ge(se,Math.pow(2,Ie),Ke,rt)&&delete Ae[De]}}getTile(se,Ae,Be){const De=Math.pow(2,se),Ie=[];for(const Ke of this.features.values())Ge(Ke,De,Ae,Be)&&Ie.push(Et(Ke,De,Ae,Be));return{features:Ie}}getFeatures(){return[...this.features.values()]}}function Ge({minX:it,minY:se,maxX:Ae,maxY:Be},De,Ie,Ke){return it<(Ie+1+xe)/De&&se<(Ke+1+xe)/De&&Ae>(Ie-xe)/De&&Be>(Ke-xe)/De}function He(it){const{id:se,geometry:Ae,properties:Be}=it;if(!Ae)return;if(Ae.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:De,coordinates:Ie}=Ae,Ke={id:se,type:1,geometry:[],tags:Be,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},rt=Ke.geometry;if(De==="Point")tt(Ie,rt,Ke);else if(De==="MultiPoint")for(const Ze of Ie)tt(Ze,rt,Ke);else if(De==="LineString")Ke.type=2,pt(Ie,rt,Ke);else if(De==="MultiLineString")Ke.type=2,gt(Ie,rt,Ke);else if(De==="Polygon")Ke.type=3,gt(Ie,rt,Ke,!0);else{if(De!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");Ke.type=3;for(const Ze of Ie)gt(Ze,rt,Ke,!0)}return Ke}function tt([it,se],Ae,Be){const De=o.am(it);let Ie=o.at(se);Ie=Ie<0?0:Ie>1?1:Ie,Ae.push(De,Ie),Be.minX=Math.min(Be.minX,De),Be.minY=Math.min(Be.minY,Ie),Be.maxX=Math.max(Be.maxX,De),Be.maxY=Math.max(Be.maxY,Ie)}function pt(it,se,Ae,Be=!1,De=!1){const Ie=[];for(const Ke of it)tt(Ke,Ie,Ae);se.push(Ie),Be&&function(Ke,rt){let Ze=0;for(let nt=0,dt=Ke.length,ut=dt-2;nt<dt;ut=nt,nt+=2)Ze+=(Ke[nt]-Ke[ut])*(Ke[nt+1]+Ke[ut+1]);if(Ze>0===rt)for(let nt=0,dt=Ke.length;nt<dt/2;nt+=2){const ut=Ke[nt],Ct=Ke[nt+1];Ke[nt]=Ke[dt-2-nt],Ke[nt+1]=Ke[dt-1-nt],Ke[dt-2-nt]=ut,Ke[dt-1-nt]=Ct}}(Ie,De)}function gt(it,se,Ae,Be=!1){for(let De=0;De<it.length;De++)pt(it[De],se,Ae,Be,De===0)}function Et(it,se,Ae,Be){const{id:De,type:Ie,geometry:Ke,tags:rt}=it,Ze=[];if(Ie===1)(function(nt,dt,ut,Ct,zt){for(let Nt=0;Nt<nt.length;Nt+=2){const hr=Math.round(o.ab*(nt[Nt+0]*dt-ut)),fr=Math.round(o.ab*(nt[Nt+1]*dt-Ct));zt.push([hr,fr])}})(Ke,se,Ae,Be,Ze);else for(const nt of Ke)ot(nt,se,Ae,Be,Ze);return{id:De,type:Ie,geometry:Ze,tags:rt}}function ot(it,se,Ae,Be,De){const Ie=-fe,Ke=o.ab+fe;let rt;for(let Ze=0;Ze<it.length-2;Ze+=2){let nt=Math.round(o.ab*(it[Ze+0]*se-Ae)),dt=Math.round(o.ab*(it[Ze+1]*se-Be)),ut=Math.round(o.ab*(it[Ze+2]*se-Ae)),Ct=Math.round(o.ab*(it[Ze+3]*se-Be));const zt=ut-nt,Nt=Ct-dt;nt<Ie&&ut<Ie||(nt<Ie?(dt+=Math.round(Nt*((Ie-nt)/zt)),nt=Ie):ut<Ie&&(Ct=dt+Math.round(Nt*((Ie-nt)/zt)),ut=Ie),dt<Ie&&Ct<Ie||(dt<Ie?(nt+=Math.round(zt*((Ie-dt)/Nt)),dt=Ie):Ct<Ie&&(ut=nt+Math.round(zt*((Ie-dt)/Nt)),Ct=Ie),nt>=Ke&&ut>=Ke||(nt>=Ke?(dt+=Math.round(Nt*((Ke-nt)/zt)),nt=Ke):ut>=Ke&&(Ct=dt+Math.round(Nt*((Ke-nt)/zt)),ut=Ke),dt>=Ke&&Ct>=Ke||(dt>=Ke?(nt+=Math.round(zt*((Ke-dt)/Nt)),dt=Ke):Ct>=Ke&&(ut=nt+Math.round(zt*((Ke-dt)/Nt)),Ct=Ke),rt&&nt===rt[rt.length-1][0]&&dt===rt[rt.length-1][1]||(rt=[[nt,dt]],De.push(rt)),rt.push([ut,Ct])))))}}var Gt,Pt,Xt,It={exports:{}},dr=function(){if(Xt)return It.exports;Xt=1;var it=o.d_(),se=function(){if(Pt)return Gt;Pt=1;var dt=o.dY(),ut=o.dZ().VectorTileFeature;function Ct(Nt,hr){this.options=hr||{},this.features=Nt,this.length=Nt.length}function zt(Nt,hr){this.id=typeof Nt.id=="number"?Nt.id:void 0,this.type=Nt.type,this.rawGeometry=Nt.type===1?[Nt.geometry]:Nt.geometry,this.properties=Nt.tags,this.extent=hr||4096}return Gt=Ct,Ct.prototype.feature=function(Nt){return new zt(this.features[Nt],this.options.extent)},zt.prototype.loadGeometry=function(){var Nt=this.rawGeometry;this.geometry=[];for(var hr=0;hr<Nt.length;hr++){for(var fr=Nt[hr],yr=[],pr=0;pr<fr.length;pr++)yr.push(new dt(fr[pr][0],fr[pr][1]));this.geometry.push(yr)}return this.geometry},zt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Nt=this.geometry,hr=1/0,fr=-1/0,yr=1/0,pr=-1/0,mn=0;mn<Nt.length;mn++)for(var gn=Nt[mn],Sr=0;Sr<gn.length;Sr++){var un=gn[Sr];hr=Math.min(hr,un.x),fr=Math.max(fr,un.x),yr=Math.min(yr,un.y),pr=Math.max(pr,un.y)}return[hr,yr,fr,pr]},zt.prototype.toGeoJSON=ut.prototype.toGeoJSON,Gt}();function Ae(dt){var ut=new it;return function(Ct,zt){for(var Nt in Ct.layers)zt.writeMessage(3,Be,Ct.layers[Nt])}(dt,ut),ut.finish()}function Be(dt,ut){var Ct;ut.writeVarintField(15,dt.version||1),ut.writeStringField(1,dt.name||""),ut.writeVarintField(5,dt.extent||4096);var zt={keys:[],values:[],keycache:{},valuecache:{}};for(Ct=0;Ct<dt.length;Ct++)zt.feature=dt.feature(Ct),ut.writeMessage(2,De,zt);var Nt=zt.keys;for(Ct=0;Ct<Nt.length;Ct++)ut.writeStringField(3,Nt[Ct]);var hr=zt.values;for(Ct=0;Ct<hr.length;Ct++)ut.writeMessage(4,nt,hr[Ct])}function De(dt,ut){var Ct=dt.feature;Ct.id!==void 0&&ut.writeVarintField(1,Ct.id),ut.writeMessage(2,Ie,dt),ut.writeVarintField(3,Ct.type),ut.writeMessage(4,Ze,Ct)}function Ie(dt,ut){var Ct=dt.feature,zt=dt.keys,Nt=dt.values,hr=dt.keycache,fr=dt.valuecache;for(var yr in Ct.properties){var pr=Ct.properties[yr],mn=hr[yr];if(pr!==null){mn===void 0&&(zt.push(yr),hr[yr]=mn=zt.length-1),ut.writeVarint(mn);var gn=typeof pr;gn!=="string"&&gn!=="boolean"&&gn!=="number"&&(pr=JSON.stringify(pr));var Sr=gn+":"+pr,un=fr[Sr];un===void 0&&(Nt.push(pr),fr[Sr]=un=Nt.length-1),ut.writeVarint(un)}}}function Ke(dt,ut){return(ut<<3)+(7&dt)}function rt(dt){return dt<<1^dt>>31}function Ze(dt,ut){for(var Ct=dt.loadGeometry(),zt=dt.type,Nt=0,hr=0,fr=Ct.length,yr=0;yr<fr;yr++){var pr=Ct[yr],mn=1;zt===1&&(mn=pr.length),ut.writeVarint(Ke(1,mn));for(var gn=zt===3?pr.length-1:pr.length,Sr=0;Sr<gn;Sr++){Sr===1&&zt!==1&&ut.writeVarint(Ke(2,gn-1));var un=pr[Sr].x-Nt,Kn=pr[Sr].y-hr;ut.writeVarint(rt(un)),ut.writeVarint(rt(Kn)),Nt+=un,hr+=Kn}zt===3&&ut.writeVarint(Ke(7,1))}}function nt(dt,ut){var Ct=typeof dt;Ct==="string"?ut.writeStringField(1,dt):Ct==="boolean"?ut.writeBooleanField(7,dt):Ct==="number"&&(dt%1!=0?ut.writeDoubleField(3,dt):dt<0?ut.writeSVarintField(6,dt):ut.writeVarintField(5,dt))}return It.exports=Ae,It.exports.fromVectorTileJs=Ae,It.exports.fromGeojsonVt=function(dt,ut){ut=ut||{};var Ct={};for(var zt in dt)Ct[zt]=new se(dt[zt].features,ut),Ct[zt].name=zt,Ct[zt].version=ut.version,Ct[zt].extent=ut.extent;return Ae({layers:Ct})},It.exports.GeoJSONWrapper=se,It.exports}(),ar=o.d$(dr);const tr={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:it=>it},Rt=Math.fround||(Or=new Float32Array(1),it=>(Or[0]=+it,Or[0]));var Or;const Cr=3,qr=5,Fr=6;class qi{constructor(se){this.options=Object.assign(Object.create(tr),se),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(se){const{log:Ae,minZoom:Be,maxZoom:De}=this.options;Ae&&console.time("total time");const Ie=`prepare ${se.length} points`;Ae&&console.time(Ie),this.points=se;const Ke=[];for(let Ze=0;Ze<se.length;Ze++){const nt=se[Ze];if(!nt.geometry)continue;const[dt,ut]=nt.geometry.coordinates,Ct=Rt(ao(dt)),zt=Rt(ko(ut));Ke.push(Ct,zt,1/0,Ze,-1,1),this.options.reduce&&Ke.push(0)}let rt=this.trees[De+1]=this._createTree(Ke);Ae&&console.timeEnd(Ie);for(let Ze=De;Ze>=Be;Ze--){const nt=+Date.now();rt=this.trees[Ze]=this._createTree(this._cluster(rt,Ze)),Ae&&console.log("z%d: %d clusters in %dms",Ze,rt.numItems,+Date.now()-nt)}return Ae&&console.timeEnd("total time"),this}getClusters(se,Ae){let Be=((se[0]+180)%360+360)%360-180;const De=Math.max(-90,Math.min(90,se[1]));let Ie=se[2]===180?180:((se[2]+180)%360+360)%360-180;const Ke=Math.max(-90,Math.min(90,se[3]));if(se[2]-se[0]>=360)Be=-180,Ie=180;else if(Be>Ie){const ut=this.getClusters([Be,De,180,Ke],Ae),Ct=this.getClusters([-180,De,Ie,Ke],Ae);return ut.concat(Ct)}const rt=this.trees[this._limitZoom(Ae)],Ze=rt.range(ao(Be),ko(Ke),ao(Ie),ko(De)),nt=rt.data,dt=[];for(const ut of Ze){const Ct=this.stride*ut;dt.push(nt[Ct+qr]>1?Xi(nt,Ct,this.clusterProps):this.points[nt[Ct+Cr]])}return dt}getChildren(se){const Ae=this._getOriginId(se),Be=this._getOriginZoom(se),De="No cluster with the specified id.",Ie=this.trees[Be];if(!Ie)throw new Error(De);const Ke=Ie.data;if(Ae*this.stride>=Ke.length)throw new Error(De);const rt=this.options.radius/(this.options.extent*Math.pow(2,Be-1)),Ze=Ie.within(Ke[Ae*this.stride],Ke[Ae*this.stride+1],rt),nt=[];for(const dt of Ze){const ut=dt*this.stride;Ke[ut+4]===se&&nt.push(Ke[ut+qr]>1?Xi(Ke,ut,this.clusterProps):this.points[Ke[ut+Cr]])}if(nt.length===0)throw new Error(De);return nt}getLeaves(se,Ae,Be){const De=[];return this._appendLeaves(De,se,Ae=Ae||10,Be=Be||0,0),De}getTile(se,Ae,Be){const De=this.trees[this._limitZoom(se)],Ie=Math.pow(2,se),{extent:Ke,radius:rt}=this.options,Ze=rt/Ke,nt=(Be-Ze)/Ie,dt=(Be+1+Ze)/Ie,ut={features:[]};return this._addTileFeatures(De.range((Ae-Ze)/Ie,nt,(Ae+1+Ze)/Ie,dt),De.data,Ae,Be,Ie,ut),Ae===0&&this._addTileFeatures(De.range(1-Ze/Ie,nt,1,dt),De.data,Ie,Be,Ie,ut),Ae===Ie-1&&this._addTileFeatures(De.range(0,nt,Ze/Ie,dt),De.data,-1,Be,Ie,ut),ut.features.length?ut:null}getClusterExpansionZoom(se){let Ae=this._getOriginZoom(se)-1;for(;Ae<=this.options.maxZoom;){const Be=this.getChildren(se);if(Ae++,Be.length!==1)break;se=Be[0].properties.cluster_id}return Ae}_appendLeaves(se,Ae,Be,De,Ie){const Ke=this.getChildren(Ae);for(const rt of Ke){const Ze=rt.properties;if(Ze&&Ze.cluster?Ie+Ze.point_count<=De?Ie+=Ze.point_count:Ie=this._appendLeaves(se,Ze.cluster_id,Be,De,Ie):Ie<De?Ie++:se.push(rt),se.length===Be)break}return Ie}_createTree(se){const Ae=new o.by(se.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Be=0;Be<se.length;Be+=this.stride)Ae.add(se[Be],se[Be+1]);return Ae.finish(),Ae.data=se,Ae}_addTileFeatures(se,Ae,Be,De,Ie,Ke){for(const rt of se){const Ze=rt*this.stride,nt=Ae[Ze+qr]>1;let dt,ut,Ct;if(nt)dt=ke(Ae,Ze,this.clusterProps),ut=Ae[Ze],Ct=Ae[Ze+1];else{const hr=this.points[Ae[Ze+Cr]];dt=hr.properties;const[fr,yr]=hr.geometry.coordinates;ut=ao(fr),Ct=ko(yr)}const zt={type:1,geometry:[[Math.round(this.options.extent*(ut*Ie-Be)),Math.round(this.options.extent*(Ct*Ie-De))]],tags:dt};let Nt;Nt=nt||this.options.generateId?Ae[Ze+Cr]:this.points[Ae[Ze+Cr]].id,Nt!==void 0&&(zt.id=Nt),Ke.features.push(zt)}}_limitZoom(se){return Math.max(this.options.minZoom,Math.min(Math.floor(+se),this.options.maxZoom+1))}_cluster(se,Ae){const{radius:Be,extent:De,reduce:Ie,minPoints:Ke}=this.options,rt=Be/(De*Math.pow(2,Ae)),Ze=se.data,nt=[],dt=this.stride;for(let ut=0;ut<Ze.length;ut+=dt){if(Ze[ut+2]<=Ae)continue;Ze[ut+2]=Ae;const Ct=Ze[ut],zt=Ze[ut+1],Nt=se.within(Ze[ut],Ze[ut+1],rt),hr=Ze[ut+qr];let fr=hr;for(const yr of Nt){const pr=yr*dt;Ze[pr+2]>Ae&&(fr+=Ze[pr+qr])}if(fr>hr&&fr>=Ke){let yr,pr=Ct*hr,mn=zt*hr,gn=-1;const Sr=(ut/dt<<5)+(Ae+1)+this.points.length;for(const un of Nt){const Kn=un*dt;if(Ze[Kn+2]<=Ae)continue;Ze[Kn+2]=Ae;const Mi=Ze[Kn+qr];pr+=Ze[Kn]*Mi,mn+=Ze[Kn+1]*Mi,Ze[Kn+4]=Sr,Ie&&(yr||(yr=this._map(Ze,ut,!0),gn=this.clusterProps.length,this.clusterProps.push(yr)),Ie(yr,this._map(Ze,Kn)))}Ze[ut+4]=Sr,nt.push(pr/fr,mn/fr,1/0,Sr,-1,fr),Ie&&nt.push(gn)}else{for(let yr=0;yr<dt;yr++)nt.push(Ze[ut+yr]);if(fr>1)for(const yr of Nt){const pr=yr*dt;if(!(Ze[pr+2]<=Ae)){Ze[pr+2]=Ae;for(let mn=0;mn<dt;mn++)nt.push(Ze[pr+mn])}}}}return nt}_getOriginId(se){return se-this.points.length>>5}_getOriginZoom(se){return(se-this.points.length)%32}_map(se,Ae,Be){if(se[Ae+qr]>1){const Ke=this.clusterProps[se[Ae+Fr]];return Be?Object.assign({},Ke):Ke}const De=this.points[se[Ae+Cr]].properties,Ie=this.options.map(De);return Be&&Ie===De?Object.assign({},Ie):Ie}}function Xi(it,se,Ae){return{type:"Feature",id:it[se+Cr],properties:ke(it,se,Ae),geometry:{type:"Point",coordinates:[(Be=it[se],360*(Be-.5)),Sa(it[se+1])]}};var Be}function ke(it,se,Ae){const Be=it[se+qr],De=Be>=1e4?`${Math.round(Be/1e3)}k`:Be>=1e3?Math.round(Be/100)/10+"k":Be,Ie=it[se+Fr],Ke=Ie===-1?{}:Object.assign({},Ae[Ie]);return Object.assign(Ke,{cluster:!0,cluster_id:it[se+Cr],point_count:Be,point_count_abbreviated:De})}function ao(it){return it/360+.5}function ko(it){const se=Math.sin(it*Math.PI/180),Ae=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return Ae<0?0:Ae>1?1:Ae}function Sa(it){const se=(180-360*it)*Math.PI/180;return 360*Math.atan(Math.exp(se))/Math.PI-90}function Dt(it,se,Ae,Be){let De=Be;const Ie=se+(Ae-se>>1);let Ke,rt=Ae-se;const Ze=it[se],nt=it[se+1],dt=it[Ae],ut=it[Ae+1];for(let Ct=se+3;Ct<Ae;Ct+=3){const zt=Ea(it[Ct],it[Ct+1],Ze,nt,dt,ut);if(zt>De)Ke=Ct,De=zt;else if(zt===De){const Nt=Math.abs(Ct-Ie);Nt<rt&&(Ke=Ct,rt=Nt)}}De>Be&&(Ke-se>3&&Dt(it,se,Ke,Be),it[Ke+2]=De,Ae-Ke>3&&Dt(it,Ke,Ae,Be))}function Ea(it,se,Ae,Be,De,Ie){let Ke=De-Ae,rt=Ie-Be;if(Ke!==0||rt!==0){const Ze=((it-Ae)*Ke+(se-Be)*rt)/(Ke*Ke+rt*rt);Ze>1?(Ae=De,Be=Ie):Ze>0&&(Ae+=Ke*Ze,Be+=rt*Ze)}return Ke=it-Ae,rt=se-Be,Ke*Ke+rt*rt}function Ei(it,se,Ae,Be){const De={id:it??null,type:se,geometry:Ae,tags:Be,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(se==="Point"||se==="MultiPoint"||se==="LineString")po(De,Ae);else if(se==="Polygon")po(De,Ae[0]);else if(se==="MultiLineString")for(const Ie of Ae)po(De,Ie);else if(se==="MultiPolygon")for(const Ie of Ae)po(De,Ie[0]);return De}function po(it,se){for(let Ae=0;Ae<se.length;Ae+=3)it.minX=Math.min(it.minX,se[Ae]),it.minY=Math.min(it.minY,se[Ae+1]),it.maxX=Math.max(it.maxX,se[Ae]),it.maxY=Math.max(it.maxY,se[Ae+1])}function Br(it,se,Ae,Be){if(!se.geometry)return;const De=se.geometry.coordinates;if(De&&De.length===0)return;const Ie=se.geometry.type,Ke=Math.pow(Ae.tolerance/((1<<Ae.maxZoom)*Ae.extent),2);let rt=[],Ze=se.id;if(Ae.promoteId?Ze=se.properties[Ae.promoteId]:Ae.generateId&&(Ze=Be||0),Ie==="Point")en(De,rt);else if(Ie==="MultiPoint")for(const nt of De)en(nt,rt);else if(Ie==="LineString")Hi(De,rt,Ke,!1);else if(Ie==="MultiLineString"){if(Ae.lineMetrics){for(const nt of De)rt=[],Hi(nt,rt,Ke,!1),it.push(Ei(Ze,"LineString",rt,se.properties));return}mo(De,rt,Ke,!1)}else if(Ie==="Polygon")mo(De,rt,Ke,!0);else{if(Ie!=="MultiPolygon"){if(Ie==="GeometryCollection"){for(const nt of se.geometry.geometries)Br(it,{id:Ze,geometry:nt,properties:se.properties},Ae,Be);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const nt of De){const dt=[];mo(nt,dt,Ke,!0),rt.push(dt)}}it.push(Ei(Ze,Ie,rt,se.properties))}function en(it,se){se.push(so(it[0]),Wa(it[1]),0)}function Hi(it,se,Ae,Be){let De,Ie,Ke=0;for(let Ze=0;Ze<it.length;Ze++){const nt=so(it[Ze][0]),dt=Wa(it[Ze][1]);se.push(nt,dt,0),Ze>0&&(Ke+=Be?(De*dt-nt*Ie)/2:Math.sqrt(Math.pow(nt-De,2)+Math.pow(dt-Ie,2))),De=nt,Ie=dt}const rt=se.length-3;se[2]=1,Dt(se,0,rt,Ae),se[rt+2]=1,se.size=Math.abs(Ke),se.start=0,se.end=se.size}function mo(it,se,Ae,Be){for(let De=0;De<it.length;De++){const Ie=[];Hi(it[De],Ie,Ae,Be),se.push(Ie)}}function so(it){return it/360+.5}function Wa(it){const se=Math.sin(it*Math.PI/180),Ae=.5-.25*Math.log((1+se)/(1-se))/Math.PI;return Ae<0?0:Ae>1?1:Ae}function xr(it,se,Ae,Be,De,Ie,Ke,rt){if(Be/=se,Ie>=(Ae/=se)&&Ke<Be)return it;if(Ke<Ae||Ie>=Be)return null;const Ze=[];for(const nt of it){const dt=nt.geometry;let ut=nt.type;const Ct=De===0?nt.minX:nt.minY,zt=De===0?nt.maxX:nt.maxY;if(Ct>=Ae&&zt<Be){Ze.push(nt);continue}if(zt<Ae||Ct>=Be)continue;let Nt=[];if(ut==="Point"||ut==="MultiPoint")Ls(dt,Nt,Ae,Be,De);else if(ut==="LineString")Ta(dt,Nt,Ae,Be,De,!1,rt.lineMetrics);else if(ut==="MultiLineString")go(dt,Nt,Ae,Be,De,!1);else if(ut==="Polygon")go(dt,Nt,Ae,Be,De,!0);else if(ut==="MultiPolygon")for(const hr of dt){const fr=[];go(hr,fr,Ae,Be,De,!0),fr.length&&Nt.push(fr)}if(Nt.length){if(rt.lineMetrics&&ut==="LineString"){for(const hr of Nt)Ze.push(Ei(nt.id,ut,hr,nt.tags));continue}ut!=="LineString"&&ut!=="MultiLineString"||(Nt.length===1?(ut="LineString",Nt=Nt[0]):ut="MultiLineString"),ut!=="Point"&&ut!=="MultiPoint"||(ut=Nt.length===3?"Point":"MultiPoint"),Ze.push(Ei(nt.id,ut,Nt,nt.tags))}}return Ze.length?Ze:null}function Ls(it,se,Ae,Be,De){for(let Ie=0;Ie<it.length;Ie+=3){const Ke=it[Ie+De];Ke>=Ae&&Ke<=Be&&Wo(se,it[Ie],it[Ie+1],it[Ie+2])}}function Ta(it,se,Ae,Be,De,Ie,Ke){let rt=ia(it);const Ze=De===0?Qc:Nc;let nt,dt,ut=it.start;for(let fr=0;fr<it.length-3;fr+=3){const yr=it[fr],pr=it[fr+1],mn=it[fr+2],gn=it[fr+3],Sr=it[fr+4],un=De===0?yr:pr,Kn=De===0?gn:Sr;let Mi=!1;Ke&&(nt=Math.sqrt(Math.pow(yr-gn,2)+Math.pow(pr-Sr,2))),un<Ae?Kn>Ae&&(dt=Ze(rt,yr,pr,gn,Sr,Ae),Ke&&(rt.start=ut+nt*dt)):un>Be?Kn<Be&&(dt=Ze(rt,yr,pr,gn,Sr,Be),Ke&&(rt.start=ut+nt*dt)):Wo(rt,yr,pr,mn),Kn<Ae&&un>=Ae&&(dt=Ze(rt,yr,pr,gn,Sr,Ae),Mi=!0),Kn>Be&&un<=Be&&(dt=Ze(rt,yr,pr,gn,Sr,Be),Mi=!0),!Ie&&Mi&&(Ke&&(rt.end=ut+nt*dt),se.push(rt),rt=ia(it)),Ke&&(ut+=nt)}let Ct=it.length-3;const zt=it[Ct],Nt=it[Ct+1],hr=De===0?zt:Nt;hr>=Ae&&hr<=Be&&Wo(rt,zt,Nt,it[Ct+2]),Ct=rt.length-3,Ie&&Ct>=3&&(rt[Ct]!==rt[0]||rt[Ct+1]!==rt[1])&&Wo(rt,rt[0],rt[1],rt[2]),rt.length&&se.push(rt)}function ia(it){const se=[];return se.size=it.size,se.start=it.start,se.end=it.end,se}function go(it,se,Ae,Be,De,Ie){for(const Ke of it)Ta(Ke,se,Ae,Be,De,Ie,!1)}function Wo(it,se,Ae,Be){it.push(se,Ae,Be)}function Qc(it,se,Ae,Be,De,Ie){const Ke=(Ie-se)/(Be-se);return Wo(it,Ie,Ae+(De-Ae)*Ke,1),Ke}function Nc(it,se,Ae,Be,De,Ie){const Ke=(Ie-Ae)/(De-Ae);return Wo(it,se+(Be-se)*Ke,Ie,1),Ke}function Vc(it,se){const Ae=[];for(let Be=0;Be<it.length;Be++){const De=it[Be],Ie=De.type;let Ke;if(Ie==="Point"||Ie==="MultiPoint"||Ie==="LineString")Ke=Os(De.geometry,se);else if(Ie==="MultiLineString"||Ie==="Polygon"){Ke=[];for(const rt of De.geometry)Ke.push(Os(rt,se))}else if(Ie==="MultiPolygon"){Ke=[];for(const rt of De.geometry){const Ze=[];for(const nt of rt)Ze.push(Os(nt,se));Ke.push(Ze)}}Ae.push(Ei(De.id,Ie,Ke,De.tags))}return Ae}function Os(it,se){const Ae=[];Ae.size=it.size,it.start!==void 0&&(Ae.start=it.start,Ae.end=it.end);for(let Be=0;Be<it.length;Be+=3)Ae.push(it[Be]+se,it[Be+1],it[Be+2]);return Ae}function oa(it,se){if(it.transformed)return it;const Ae=1<<it.z,Be=it.x,De=it.y;for(const Ie of it.features){const Ke=Ie.geometry,rt=Ie.type;if(Ie.geometry=[],rt===1)for(let Ze=0;Ze<Ke.length;Ze+=2)Ie.geometry.push(Us(Ke[Ze],Ke[Ze+1],se,Ae,Be,De));else for(let Ze=0;Ze<Ke.length;Ze++){const nt=[];for(let dt=0;dt<Ke[Ze].length;dt+=2)nt.push(Us(Ke[Ze][dt],Ke[Ze][dt+1],se,Ae,Be,De));Ie.geometry.push(nt)}}return it.transformed=!0,it}function Us(it,se,Ae,Be,De,Ie){return[Math.round(Ae*(it*Be-De)),Math.round(Ae*(se*Be-Ie))]}function Fa(it,se,Ae,Be,De){const Ie=se===De.maxZoom?0:De.tolerance/((1<<se)*De.extent),Ke={features:[],numPoints:0,numSimplified:0,numFeatures:it.length,source:null,x:Ae,y:Be,z:se,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const rt of it)Hc(Ke,rt,Ie,De);return Ke}function Hc(it,se,Ae,Be){const De=se.geometry,Ie=se.type,Ke=[];if(it.minX=Math.min(it.minX,se.minX),it.minY=Math.min(it.minY,se.minY),it.maxX=Math.max(it.maxX,se.maxX),it.maxY=Math.max(it.maxY,se.maxY),Ie==="Point"||Ie==="MultiPoint")for(let rt=0;rt<De.length;rt+=3)Ke.push(De[rt],De[rt+1]),it.numPoints++,it.numSimplified++;else if(Ie==="LineString")tn(Ke,De,it,Ae,!1,!1);else if(Ie==="MultiLineString"||Ie==="Polygon")for(let rt=0;rt<De.length;rt++)tn(Ke,De[rt],it,Ae,Ie==="Polygon",rt===0);else if(Ie==="MultiPolygon")for(let rt=0;rt<De.length;rt++){const Ze=De[rt];for(let nt=0;nt<Ze.length;nt++)tn(Ke,Ze[nt],it,Ae,!0,nt===0)}if(Ke.length){let rt=se.tags||null;if(Ie==="LineString"&&Be.lineMetrics){rt={};for(const nt in se.tags)rt[nt]=se.tags[nt];rt.mapbox_clip_start=De.start/De.size,rt.mapbox_clip_end=De.end/De.size}const Ze={geometry:Ke,type:Ie==="Polygon"||Ie==="MultiPolygon"?3:Ie==="LineString"||Ie==="MultiLineString"?2:1,tags:rt};se.id!==null&&(Ze.id=se.id),it.features.push(Ze)}}function tn(it,se,Ae,Be,De,Ie){const Ke=Be*Be;if(Be>0&&se.size<(De?Ke:Be))return void(Ae.numPoints+=se.length/3);const rt=[];for(let Ze=0;Ze<se.length;Ze+=3)(Be===0||se[Ze+2]>Ke)&&(Ae.numSimplified++,rt.push(se[Ze],se[Ze+1])),Ae.numPoints++;De&&function(Ze,nt){let dt=0;for(let ut=0,Ct=Ze.length,zt=Ct-2;ut<Ct;zt=ut,ut+=2)dt+=(Ze[ut]-Ze[zt])*(Ze[ut+1]+Ze[zt+1]);if(dt>0===nt)for(let ut=0,Ct=Ze.length;ut<Ct/2;ut+=2){const zt=Ze[ut],Nt=Ze[ut+1];Ze[ut]=Ze[Ct-2-ut],Ze[ut+1]=Ze[Ct-1-ut],Ze[Ct-2-ut]=zt,Ze[Ct-1-ut]=Nt}}(rt,Ie),it.push(rt)}const qa={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class pl{constructor(se,Ae){const Be=(Ae=this.options=function(Ie,Ke){for(const rt in Ke)Ie[rt]=Ke[rt];return Ie}(Object.create(qa),Ae)).debug;if(Be&&console.time("preprocess data"),Ae.maxZoom<0||Ae.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ae.promoteId&&Ae.generateId)throw new Error("promoteId and generateId cannot be used together.");let De=function(Ie,Ke){const rt=[];if(Ie.type==="FeatureCollection")for(let Ze=0;Ze<Ie.features.length;Ze++)Br(rt,Ie.features[Ze],Ke,Ze);else Br(rt,Ie.type==="Feature"?Ie:{geometry:Ie},Ke);return rt}(se,Ae);this.tiles={},this.tileCoords=[],Be&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ae.indexMaxZoom,Ae.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),De=function(Ie,Ke){const rt=Ke.buffer/Ke.extent;let Ze=Ie;const nt=xr(Ie,1,-1-rt,rt,0,-1,2,Ke),dt=xr(Ie,1,1-rt,2+rt,0,-1,2,Ke);return(nt||dt)&&(Ze=xr(Ie,1,-rt,1+rt,0,-1,2,Ke)||[],nt&&(Ze=Vc(nt,1).concat(Ze)),dt&&(Ze=Ze.concat(Vc(dt,-1)))),Ze}(De,Ae),De.length&&this.splitTile(De,0,0,0),Be&&(De.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(se,Ae,Be,De,Ie,Ke,rt){const Ze=[se,Ae,Be,De],nt=this.options,dt=nt.debug;for(;Ze.length;){De=Ze.pop(),Be=Ze.pop(),Ae=Ze.pop(),se=Ze.pop();const ut=1<<Ae,Ct=aa(Ae,Be,De);let zt=this.tiles[Ct];if(!zt&&(dt>1&&console.time("creation"),zt=this.tiles[Ct]=Fa(se,Ae,Be,De,nt),this.tileCoords.push({z:Ae,x:Be,y:De}),dt)){dt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ae,Be,De,zt.numFeatures,zt.numPoints,zt.numSimplified),console.timeEnd("creation"));const Mi=`z${Ae}`;this.stats[Mi]=(this.stats[Mi]||0)+1,this.total++}if(zt.source=se,Ie==null){if(Ae===nt.indexMaxZoom||zt.numPoints<=nt.indexMaxPoints)continue}else{if(Ae===nt.maxZoom||Ae===Ie)continue;if(Ie!=null){const Mi=Ie-Ae;if(Be!==Ke>>Mi||De!==rt>>Mi)continue}}if(zt.source=null,se.length===0)continue;dt>1&&console.time("clipping");const Nt=.5*nt.buffer/nt.extent,hr=.5-Nt,fr=.5+Nt,yr=1+Nt;let pr=null,mn=null,gn=null,Sr=null,un=xr(se,ut,Be-Nt,Be+fr,0,zt.minX,zt.maxX,nt),Kn=xr(se,ut,Be+hr,Be+yr,0,zt.minX,zt.maxX,nt);se=null,un&&(pr=xr(un,ut,De-Nt,De+fr,1,zt.minY,zt.maxY,nt),mn=xr(un,ut,De+hr,De+yr,1,zt.minY,zt.maxY,nt),un=null),Kn&&(gn=xr(Kn,ut,De-Nt,De+fr,1,zt.minY,zt.maxY,nt),Sr=xr(Kn,ut,De+hr,De+yr,1,zt.minY,zt.maxY,nt),Kn=null),dt>1&&console.timeEnd("clipping"),Ze.push(pr||[],Ae+1,2*Be,2*De),Ze.push(mn||[],Ae+1,2*Be,2*De+1),Ze.push(gn||[],Ae+1,2*Be+1,2*De),Ze.push(Sr||[],Ae+1,2*Be+1,2*De+1)}}getTile(se,Ae,Be){se=+se,Ae=+Ae,Be=+Be;const De=this.options,{extent:Ie,debug:Ke}=De;if(se<0||se>24)return null;const rt=1<<se,Ze=aa(se,Ae=Ae+rt&rt-1,Be);if(this.tiles[Ze])return oa(this.tiles[Ze],Ie);Ke>1&&console.log("drilling down to z%d-%d-%d",se,Ae,Be);let nt,dt=se,ut=Ae,Ct=Be;for(;!nt&&dt>0;)dt--,ut>>=1,Ct>>=1,nt=this.tiles[aa(dt,ut,Ct)];return nt&&nt.source?(Ke>1&&(console.log("found parent tile z%d-%d-%d",dt,ut,Ct),console.time("drilling down")),this.splitTile(nt.source,dt,ut,Ct,se,Ae,Be),Ke>1&&console.timeEnd("drilling down"),this.tiles[Ze]?oa(this.tiles[Ze],Ie):null):null}}function aa(it,se,Ae){return 32*((1<<it)*Ae+se)+it}function sa(it,se){const Ae=it.tileID.canonical;if(!this._geoJSONIndex)return void se(null,null);const Be=this._geoJSONIndex.getTile(Ae.z,Ae.x,Ae.y);if(!Be)return void se(null,null);const De=new he(Be.features);let Ie=ar(De);Ie.byteOffset===0&&Ie.byteLength===Ie.buffer.byteLength||(Ie=new Uint8Array(Ie)),se(null,{vectorTile:De,rawData:Ie.buffer})}class Qu extends W{constructor(se,Ae,Be,De,Ie,Ke){super(se,Ae,Be,De,sa,Ke),Ie&&(this.loadGeoJSON=Ie),this._dynamicIndex=new Ue}loadData(se,Ae){const Be=se&&se.request,De=Be&&Be.collectResourceTiming;this.loadGeoJSON(se,(Ie,Ke)=>{if(Ie||!Ke)return Ae(Ie);if(typeof Ke!="object")return Ae(new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`));{try{if(se.filter){const Ze=o.M(se.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ze.result==="error")throw new Error(Ze.value.map(nt=>`${nt.key}: ${nt.message}`).join(", "));Ke.features=Ke.features.filter(nt=>Ze.value.evaluate({zoom:0},nt))}se.dynamic?(Ke.type==="Feature"&&(Ke={type:"FeatureCollection",features:[Ke]}),se.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(Ke.features,this.loaded),se.cluster&&(Ke.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=se.cluster?new qi(function({superclusterOptions:Ze,clusterProperties:nt}){if(!nt||!Ze)return Ze;const dt={},ut={},Ct={accumulated:null,zoom:0},zt={properties:null},Nt=Object.keys(nt);for(const hr of Nt){const[fr,yr]=nt[hr],pr=o.M(yr),mn=o.M(typeof fr=="string"?[fr,["accumulated"],["get",hr]]:fr);dt[hr]=pr.value,ut[hr]=mn.value}return Ze.map=hr=>{zt.properties=hr;const fr={};for(const yr of Nt)fr[yr]=dt[yr].evaluate(Ct,zt);return fr},Ze.reduce=(hr,fr)=>{zt.properties=fr;for(const yr of Nt)Ct.accumulated=hr[yr],hr[yr]=ut[yr].evaluate(Ct,zt)},Ze}(se)).load(Ke.features):se.dynamic?this._dynamicIndex:function(Ze,nt){return new pl(Ze,nt)}(Ke,se.geojsonVtOptions)}catch(Ze){return Ae(Ze)}const rt={};if(De){const Ze=x(Be);Ze&&(rt.resourceTiming={},rt.resourceTiming[se.source]=JSON.parse(JSON.stringify(Ze)))}Ae(null,rt)}})}reloadTile(se,Ae){const Be=this.loaded;return Be&&Be[se.uid]?se.partial?Ae(null,void 0):super.reloadTile(se,Ae):this.loadTile(se,Ae)}loadGeoJSON(se,Ae){if(se.request)o.n(se.request,Ae);else{if(typeof se.data!="string")return Ae(new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`));try{return Ae(null,JSON.parse(se.data))}catch{return Ae(new Error(`Input data given to '${se.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(se,Ae){try{Ae(null,this._geoJSONIndex.getClusterExpansionZoom(se.clusterId))}catch(Be){Ae(Be)}}getClusterChildren(se,Ae){try{Ae(null,this._geoJSONIndex.getChildren(se.clusterId))}catch(Be){Ae(Be)}}getClusterLeaves(se,Ae){try{Ae(null,this._geoJSONIndex.getLeaves(se.clusterId,se.limit,se.offset))}catch(Be){Ae(Be)}}}class jc{constructor(se,Ae){this.tileID=new o.aA(se.tileID.overscaledZ,se.tileID.wrap,se.tileID.canonical.z,se.tileID.canonical.x,se.tileID.canonical.y),this.tileZoom=se.tileZoom,this.uid=se.uid,this.zoom=se.zoom,this.canonical=se.tileID.canonical,this.pixelRatio=se.pixelRatio,this.tileSize=se.tileSize,this.source=se.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=se.projection,this.brightness=Ae}parse(se,Ae,Be,De){this.status="parsing";const Ie=new o.aA(Be.tileID.overscaledZ,Be.tileID.wrap,Be.tileID.canonical.z,Be.tileID.canonical.x,Be.tileID.canonical.y),Ke={},rt=Ae.familiesBySource[Be.source],Ze=new o.dR(Ie,Be.promoteId);return Ze.bucketLayerIDs=[],Ze.is3DTile=!0,o.e0(se).then(nt=>{if(!nt)return De(new Error("Could not parse tile"));const dt=o.e1(nt,1/o.c8(Be.tileID.canonical)),ut=nt.json.extensionsUsed&&nt.json.extensionsUsed.includes("MAPBOX_mesh_features")||nt.json.asset.extras&&nt.json.asset.extras.MAPBOX_mesh_features,Ct=nt.json.extensionsUsed&&nt.json.extensionsUsed.includes("EXT_meshopt_compression"),zt=new o.a3(this.zoom,{brightness:this.brightness});for(const Nt in rt)for(const hr of rt[Nt]){const fr=hr[0];Ze.bucketLayerIDs.push(hr.map(pr=>pr.id)),fr.recalculate(zt,[]);const yr=new o.e2(dt,Ie,ut,Ct,this.brightness,Ze);ut||(yr.needsUpload=!0),Ke[fr.fqid]=yr,yr.evaluate(fr)}this.status="done",De(null,{buckets:Ke,featureIndex:Ze})}).catch(nt=>De(new Error(nt.message)))}}class Nu{constructor(se,Ae,Be,De,Ie,Ke){this.actor=se,this.layerIndex=Ae,this.brightness=Ke,this.loading={},this.loaded={}}loadTile(se,Ae){const Be=se.uid,De=this.loading[Be]=new jc(se,this.brightness);o.bc(se.request,(Ie,Ke)=>{const rt=!this.loading[Be];return delete this.loading[Be],rt||Ie?(De.status="done",rt||(this.loaded[Be]=De),Ae(Ie)):Ke&&Ke.byteLength!==0?void De.parse(Ke,this.layerIndex,se,(Ze,nt)=>{De.status="done",this.loaded=this.loaded||{},this.loaded[Be]=De,Ze||!nt?Ae(Ze):Ae(null,nt)}):(De.status="done",this.loaded[Be]=De,Ae())})}reloadTile(se,Ae){const Be=this.loaded,De=se.uid;if(Be&&Be[De]){const Ie=Be[De];Ie.projection=se.projection,Ie.brightness=se.brightness;const Ke=(rt,Ze)=>{Ie.reloadCallback&&(delete Ie.reloadCallback,this.loadTile(se,Ae)),Ae(rt,Ze)};Ie.status==="parsing"?Ie.reloadCallback=Ke:Ie.status==="done"&&this.loadTile(se,Ae)}}abortTile(se,Ae){const Be=se.uid;this.loading[Be]&&delete this.loading[Be],Ae()}removeTile(se,Ae){const Be=this.loaded,De=se.uid;Be&&Be[De]&&delete Be[De],Ae()}}class oc{constructor(se){this.self=se,this.actor=new o.e3(se,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=o.bL({name:"mercator"}),this.workerSourceTypes={vector:W,geojson:Qu,"batched-model":Nu},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Ae,Be)=>{if(this.workerSourceTypes[Ae])throw new Error(`Worker source with name "${Ae}" already registered.`);this.workerSourceTypes[Ae]=Be},this.self.registerRTLTextPlugin=Ae=>{if(o.e4.isParsed())throw new Error("RTL text plugin already registered.");o.e4.applyArabicShaping=Ae.applyArabicShaping,o.e4.processBidirectionalText=Ae.processBidirectionalText,o.e4.processStyledBidirectionalText=Ae.processStyledBidirectionalText}}clearCaches(se,Ae,Be){delete this.layerIndexes[se],delete this.availableImages[se],delete this.workerSources[se],delete this.demWorkerSources[se],delete this.rasterArrayWorkerSource,Be()}checkIfReady(se,Ae,Be){Be()}setReferrer(se,Ae){this.referrer=Ae}spriteLoaded(se,{scope:Ae,isLoaded:Be}){if(this.isSpriteLoaded[se]||(this.isSpriteLoaded[se]={}),this.isSpriteLoaded[se][Ae]=Be,this.workerSources[se]&&this.workerSources[se][Ae])for(const De in this.workerSources[se][Ae]){const Ie=this.workerSources[se][Ae][De];for(const Ke in Ie){const rt=Ie[Ke];rt instanceof W&&(rt.isSpriteLoaded=Be,rt.fire(new o.x("isSpriteLoaded")))}}}setImages(se,{scope:Ae,images:Be},De){if(this.availableImages[se]||(this.availableImages[se]={}),this.availableImages[se][Ae]=Be,this.workerSources[se]&&this.workerSources[se][Ae]){for(const Ie in this.workerSources[se][Ae]){const Ke=this.workerSources[se][Ae][Ie];for(const rt in Ke)Ke[rt].availableImages=Be}De()}else De()}setProjection(se,Ae){this.projections[se]=o.bL(Ae)}setBrightness(se,Ae,Be){this.brightness=Ae,Be()}setLayers(se,Ae,Be){this.getLayerIndex(se,Ae.scope).replace(Ae.layers,Ae.options),Be()}updateLayers(se,Ae,Be){this.getLayerIndex(se,Ae.scope).update(Ae.layers,Ae.removedIds,Ae.options),Be()}loadTile(se,Ae,Be){Ae.projection=this.projections[se]||this.defaultProjection,this.getWorkerSource(se,Ae.type,Ae.source,Ae.scope).loadTile(Ae,Be)}loadDEMTile(se,Ae,Be){this.getDEMWorkerSource(se,Ae.source,Ae.scope).loadTile(Ae,Be)}decodeRasterArray(se,Ae,Be){this.getRasterArrayWorkerSource().decodeRasterArray(Ae,Be)}reloadTile(se,Ae,Be){Ae.projection=this.projections[se]||this.defaultProjection,this.getWorkerSource(se,Ae.type,Ae.source,Ae.scope).reloadTile(Ae,Be)}abortTile(se,Ae,Be){this.getWorkerSource(se,Ae.type,Ae.source,Ae.scope).abortTile(Ae,Be)}removeTile(se,Ae,Be){this.getWorkerSource(se,Ae.type,Ae.source,Ae.scope).removeTile(Ae,Be)}removeSource(se,Ae,Be){if(!(this.workerSources[se]&&this.workerSources[se][Ae.scope]&&this.workerSources[se][Ae.scope][Ae.type]&&this.workerSources[se][Ae.scope][Ae.type][Ae.source]))return;const De=this.workerSources[se][Ae.scope][Ae.type][Ae.source];delete this.workerSources[se][Ae.scope][Ae.type][Ae.source],De.removeSource!==void 0?De.removeSource(Ae,Be):Be()}loadWorkerSource(se,Ae,Be){try{this.self.importScripts(Ae.url),Be()}catch(De){Be(De.toString())}}syncRTLPluginState(se,Ae,Be){try{o.e4.setState(Ae);const De=o.e4.getPluginURL();if(o.e4.isLoaded()&&!o.e4.isParsed()&&De!=null){this.self.importScripts(De);const Ie=o.e4.isParsed();Be(Ie?void 0:new Error(`RTL Text Plugin failed to import scripts from ${De}`),Ie)}}catch(De){Be(De.toString())}}setDracoUrl(se,Ae){this.dracoUrl=Ae}getAvailableImages(se,Ae){this.availableImages[se]||(this.availableImages[se]={});let Be=this.availableImages[se][Ae];return Be||(Be=[]),Be}getLayerIndex(se,Ae){this.layerIndexes[se]||(this.layerIndexes[se]={});let Be=this.layerIndexes[se][Ae];return Be||(Be=this.layerIndexes[se][Ae]=new O,Be.scope=Ae),Be}getWorkerSource(se,Ae,Be,De){return this.workerSources[se]||(this.workerSources[se]={}),this.workerSources[se][De]||(this.workerSources[se][De]={}),this.workerSources[se][De][Ae]||(this.workerSources[se][De][Ae]={}),this.isSpriteLoaded[se]||(this.isSpriteLoaded[se]={}),this.workerSources[se][De][Ae][Be]||(this.workerSources[se][De][Ae][Be]=new this.workerSourceTypes[Ae]({send:(Ie,Ke,rt,Ze,nt,dt)=>{this.actor.send(Ie,Ke,rt,se,nt,dt)},scheduler:this.actor.scheduler},this.getLayerIndex(se,De),this.getAvailableImages(se,De),this.isSpriteLoaded[se][De],void 0,this.brightness)),this.workerSources[se][De][Ae][Be]}getDEMWorkerSource(se,Ae,Be){return this.demWorkerSources[se]||(this.demWorkerSources[se]={}),this.demWorkerSources[se][Be]||(this.demWorkerSources[se][Be]={}),this.demWorkerSources[se][Be][Ae]||(this.demWorkerSources[se][Be][Ae]=new J),this.demWorkerSources[se][Be][Ae]}getRasterArrayWorkerSource(){return this.rasterArrayWorkerSource||(this.rasterArrayWorkerSource=new re),this.rasterArrayWorkerSource}enforceCacheSizeLimit(se,Ae){o.e5(Ae)}getWorkerPerformanceMetrics(se,Ae,Be){Be(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new oc(self)),oc}),d(["./shared"],function(o){var x="3.7.0";const S={create:"create",load:"load",fullLoad:"fullLoad"},k={mark(p){performance.mark(p)},measure(p,s,u){performance.measure(p,s,u)}};function O(p){const s=p.name.split("?")[0];return o.a(s)&&s.includes("mapbox-gl.js")?"javascript":o.a(s)&&s.includes("mapbox-gl.css")?"css":o.b(s)?"fontRange":o.c(s)?"sprite":o.i(s)?"style":o.d(s)?"tilejson":"other"}var Q,G={},K=function(){if(Q)return G;function p(m){return!s(m)}function s(m){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var w,C,D=new Blob([""],{type:"text/javascript"}),L=URL.createObjectURL(D);try{C=new Worker(L),w=!0}catch{w=!1}return C&&C.terminate(),URL.revokeObjectURL(L),w}()?function(){var w=document.createElement("canvas");w.width=w.height=1;var C=w.getContext("2d");if(!C)return!1;var D=C.getImageData(0,0,1,1);return D&&D.width===w.width}()?(u[_=m&&m.failIfMajorPerformanceCaveat]===void 0&&(u[_]=function(w){var C,D=function(L){var z=document.createElement("canvas"),N=Object.create(p.webGLContextAttributes);return N.failIfMajorPerformanceCaveat=L,z.getContext("webgl2",N)}(w);if(!D)return!1;try{C=D.createShader(D.VERTEX_SHADER)}catch{return!1}return!(!C||D.isContextLost())&&(D.shaderSource(C,"void main() {}"),D.compileShader(C),D.getShaderParameter(C,D.COMPILE_STATUS)===!0)}(_)),u[_]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var _}Q=1,G.supported=p,G.notSupportedReason=s;var u={};return p.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},G}();function ee(p,s,u){const m=document.createElement(p);return s!=null&&(m.className=s),u&&u.appendChild(m),m}function W(p,s,u){const m=document.createElementNS("http://www.w3.org/2000/svg",p);for(const _ of Object.keys(s))m.setAttributeNS(null,_,String(s[_]));return u&&u.appendChild(m),m}const J=typeof document<"u"?document.documentElement&&document.documentElement.style:null,re=J&&J.userSelect!==void 0?"userSelect":"WebkitUserSelect";let ue;function ce(){J&&re&&(ue=J[re],J[re]="none")}function he(){J&&re&&(J[re]=ue)}function xe(p){p.preventDefault(),p.stopPropagation(),window.removeEventListener("click",xe,!0)}function fe(){window.addEventListener("click",xe,!0),window.setTimeout(()=>{window.removeEventListener("click",xe,!0)},0)}function Ue(p,s){const u=p.getBoundingClientRect();return tt(p,u,s)}function Ge(p,s){const u=p.getBoundingClientRect(),m=[];for(let _=0;_<s.length;_++)m.push(tt(p,u,s[_]));return m}function He(p){return window.InstallTrigger!==void 0&&p.button===2&&p.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:p.button}function tt(p,s,u){const m=p.offsetWidth===s.width?1:p.offsetWidth/s.width;return new o.P((u.clientX-s.left)*m,(u.clientY-s.top)*m)}const pt="01",gt="NO_ACCESS_TOKEN";class Et{constructor(s,u,m){this._transformRequestFn=s,this._customAccessToken=u,this._silenceAuthErrors=!!m,this._createSkuToken()}_createSkuToken(){const s=function(){let u="";for(let m=0;m<10;m++)u+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",pt,u].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=s.token,this._skuTokenExpiresAt=s.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(s,u){return this._transformRequestFn&&this._transformRequestFn(s,u)||{url:s}}normalizeStyleURL(s,u){if(!o.f(s))return s;const m=Gt(s);return m.params.push(`sdk=js-${x}`),m.path=`/styles/v1${m.path}`,this._makeAPIURL(m,this._customAccessToken||u)}normalizeGlyphsURL(s,u){if(!o.f(s))return s;const m=Gt(s);return m.path=`/fonts/v1${m.path}`,this._makeAPIURL(m,this._customAccessToken||u)}normalizeModelURL(s,u){if(!o.f(s))return s;const m=Gt(s);return m.path=`/models/v1${m.path}`,this._makeAPIURL(m,this._customAccessToken||u)}normalizeSourceURL(s,u,m,_){if(!o.f(s))return s;const w=Gt(s);return w.path=`/v4/${w.authority}.json`,w.params.push("secure"),m&&w.params.push(`language=${m}`),_&&w.params.push(`worldview=${_}`),this._makeAPIURL(w,this._customAccessToken||u)}normalizeSpriteURL(s,u,m,_){const w=Gt(s);return o.f(s)?(w.path=`/styles/v1${w.path}/sprite${u}${m}`,this._makeAPIURL(w,this._customAccessToken||_)):(w.path+=`${u}${m}`,Pt(w))}normalizeTileURL(s,u,m){if(this._isSkuTokenExpired()&&this._createSkuToken(),s&&!o.f(s))return s;const _=Gt(s);_.path=_.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${u||m&&_.authority!=="raster"&&m===512?"@2x":""}${o.m.supported?".webp":"$1"}`),_.authority==="raster"?_.path=`/${o.e.RASTER_URL_PREFIX}${_.path}`:_.authority==="rasterarrays"?_.path=`/${o.e.RASTERARRAYS_URL_PREFIX}${_.path}`:_.authority==="3dtiles"?_.path=`/${o.e.TILES3D_URL_PREFIX}${_.path}`:(_.path=_.path.replace(/^.+\/v4\//,"/"),_.path=`/${o.e.TILE_URL_VERSION}${_.path}`);const w=this._customAccessToken||function(C){for(const D of C){const L=D.match(/^access_token=(.*)$/);if(L)return L[1]}return null}(_.params)||o.e.ACCESS_TOKEN;return o.e.REQUIRE_ACCESS_TOKEN&&w&&this._skuToken&&_.params.push(`sku=${this._skuToken}`),this._makeAPIURL(_,w)}canonicalizeTileURL(s,u){const m=Gt(s);if(!m.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!m.path.match(/\.[\w]+$/))return s;let _="mapbox://";m.path.match(/^\/raster\/v1\//)?_+=`raster/${m.path.replace(`/${o.e.RASTER_URL_PREFIX}/`,"")}`:m.path.match(/^\/rasterarrays\/v1\//)?_+=`rasterarrays/${m.path.replace(`/${o.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:_+=`tiles/${m.path.replace(`/${o.e.TILE_URL_VERSION}/`,"")}`;let w=m.params;return u&&(w=w.filter(C=>!C.match(/^access_token=/))),w.length&&(_+=`?${w.join("&")}`),_}canonicalizeTileset(s,u){const m=!!u&&o.f(u),_=[];for(const w of s.tiles||[])o.h(w)?_.push(this.canonicalizeTileURL(w,m)):_.push(w);return _}_makeAPIURL(s,u){const m="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",_=Gt(o.e.API_URL);if(s.protocol=_.protocol,s.authority=_.authority,s.protocol==="http"){const w=s.params.indexOf("secure");w>=0&&s.params.splice(w,1)}if(_.path!=="/"&&(s.path=`${_.path}${s.path}`),!o.e.REQUIRE_ACCESS_TOKEN)return Pt(s);if(u=u||o.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!u)throw new Error(`An API access token is required to use Mapbox GL. ${m}`);if(u[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${m}`)}return s.params=s.params.filter(w=>w.indexOf("access_token")===-1),s.params.push(`access_token=${u||""}`),Pt(s)}}const ot=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Gt(p){const s=p.match(ot);if(!s)throw new Error("Unable to parse URL object");return{protocol:s[1],authority:s[2],path:s[3]||"/",params:s[4]?s[4].split("&"):[]}}function Pt(p){const s=p.params.length?`?${p.params.join("&")}`:"";return`${p.protocol}://${p.authority}${p.path}${s}`}const Xt="mapbox.eventData";function It(p){if(!p)return null;const s=p.split(".");if(!s||s.length!==3)return null;try{return JSON.parse(o.j(s[1]))}catch{return null}}class dr{constructor(s){this.type=s,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(s){const u=It(o.e.ACCESS_TOKEN);let m="";return m=u&&u.u?o.k(u.u):o.e.ACCESS_TOKEN||"",s?`${Xt}.${s}:${m}`:`${Xt}:${m}`}fetchEventData(){const s=o.s("localStorage"),u=this.getStorageKey(),m=this.getStorageKey("uuid");if(s)try{const _=localStorage.getItem(u);_&&(this.eventData=JSON.parse(_));const w=localStorage.getItem(m);w&&(this.anonId=w)}catch{o.w("Unable to read from LocalStorage")}}saveEventData(){const s=o.s("localStorage"),u=this.getStorageKey(),m=this.getStorageKey("uuid"),_=this.anonId;if(s&&_)try{localStorage.setItem(m,_),Object.keys(this.eventData).length>=1&&localStorage.setItem(u,JSON.stringify(this.eventData))}catch{o.w("Unable to write to LocalStorage")}}processRequests(s){}postEvent(s,u,m,_){if(!o.e.EVENTS_URL)return;const w=Gt(o.e.EVENTS_URL);w.params.push(`access_token=${_||o.e.ACCESS_TOKEN||""}`);const C={event:this.type,created:new Date(s).toISOString()},D=u?o.l(C,u):C,L={url:Pt(w),headers:{"Content-Type":"text/plain"},body:JSON.stringify([D])};this.pendingRequest=o.p(L,z=>{this.pendingRequest=null,m(z),this.saveEventData(),this.processRequests(_)})}queueRequest(s,u){this.queue.push(s),this.processRequests(u)}}const ar=new class extends dr{constructor(p){super("appUserTurnstile"),this._customAccessToken=p}postTurnstileEvent(p,s){o.e.EVENTS_URL&&o.e.ACCESS_TOKEN&&Array.isArray(p)&&p.some(u=>o.f(u)||o.h(u))&&this.queueRequest(Date.now(),s)}processRequests(p){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const s=It(o.e.ACCESS_TOKEN),u=s?s.u:o.e.ACCESS_TOKEN;let m=u!==this.eventData.tokenU;o.v(this.anonId)||(this.anonId=o.u(),m=!0);const _=this.queue.shift();if(this.eventData.lastSuccess){const w=new Date(this.eventData.lastSuccess),C=new Date(_),D=(_-this.eventData.lastSuccess)/864e5;m=m||D>=1||D<-1||w.getDate()!==C.getDate()}else m=!0;m?this.postEvent(_,{sdkIdentifier:"mapbox-gl-js",sdkVersion:x,skuId:pt,"enabled.telemetry":!1,userId:this.anonId},w=>{w||(this.eventData.lastSuccess=_,this.eventData.tokenU=u)},p):this.processRequests()}},tr=ar.postTurnstileEvent.bind(ar),Rt=new class extends dr{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(p,s,u,m){this.skuToken=s,this.errorCb=m,o.e.EVENTS_URL&&(u||o.e.ACCESS_TOKEN?this.queueRequest({id:p,timestamp:Date.now()},u):this.errorCb(new Error(gt)))}processRequests(p){if(this.pendingRequest||this.queue.length===0)return;const{id:s,timestamp:u}=this.queue.shift();s&&this.success[s]||(this.anonId||this.fetchEventData(),o.v(this.anonId)||(this.anonId=o.u()),this.postEvent(u,{sdkIdentifier:"mapbox-gl-js",sdkVersion:x,skuId:pt,skuToken:this.skuToken,userId:this.anonId},m=>{m?this.errorCb(m):s&&(this.success[s]=!0)},p))}remove(){this.errorCb=null}},Or=Rt.postMapLoadEvent.bind(Rt),Cr=new class extends dr{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(p){let s=this.mapInstanceIdMap.get(p);return s||(s=o.u(),this.mapInstanceIdMap.set(p,s)),s}getEventId(p){const s=this.eventIdPerMapInstanceMap.get(p)||0;return this.eventIdPerMapInstanceMap.set(p,s+1),s}postStyleLoadEvent(p,s){const{map:u,style:m,importedStyles:_}=s;if(!o.e.EVENTS_URL||!p&&!o.e.ACCESS_TOKEN)return;const w=this.getMapInstanceId(u),C={mapInstanceId:w,eventId:this.getEventId(w),style:m};_.length&&(C.importedStyles=_),this.queueRequest({timestamp:Date.now(),payload:C},p)}processRequests(p){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:s,payload:u}=this.queue.shift();this.postEvent(s,u,()=>{},p)}},qr=Cr.postStyleLoadEvent.bind(Cr),Fr=new class extends dr{constructor(){super("gljs.performance")}postPerformanceEvent(p,s){o.e.EVENTS_URL&&(p||o.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:s},p)}processRequests(p){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:s,performanceData:u}=this.queue.shift(),m=function(_){const w=performance.getEntriesByType("resource"),C=performance.getEntriesByType("mark"),D=function(Z){const ne={};if(Z){for(const ie in Z)if(ie!=="other")for(const oe of Z[ie]){const ae=`${ie}ResolveRangeMin`,ge=`${ie}ResolveRangeMax`,ye=`${ie}RequestCount`,pe=`${ie}RequestCachedCount`;ne[ae]=Math.min(ne[ae]||1/0,oe.startTime),ne[ge]=Math.max(ne[ge]||-1/0,oe.responseEnd);const we=be=>{ne[be]===void 0&&(ne[be]=0),++ne[be]};oe.transferSize!==void 0&&oe.transferSize===0&&we(pe),we(ye)}}return ne}(function(Z,ne){const ie={};if(Z)for(const oe of Z){const ae=ne(oe);ie[ae]===void 0&&(ie[ae]=[]),ie[ae].push(oe)}return ie}(w,O)),L=window.devicePixelRatio,z=navigator.connection||navigator.mozConnection||navigator.webkitConnection,N=z?z.effectiveType:void 0,j={counters:[],metadata:[],attributes:[]},q=(Z,ne,ie)=>{ie!=null&&Z.push({name:ne,value:ie.toString()})};for(const Z in D)q(j.counters,Z,D[Z]);if(_.interactionRange[0]!==1/0&&_.interactionRange[1]!==-1/0&&(q(j.counters,"interactionRangeMin",_.interactionRange[0]),q(j.counters,"interactionRangeMax",_.interactionRange[1])),C)for(const Z of Object.keys(S)){const ne=S[Z],ie=C.find(oe=>oe.name===ne);ie&&q(j.counters,ne,ie.startTime)}return q(j.counters,"visibilityHidden",_.visibilityHidden),q(j.attributes,"style",function(Z){if(Z)for(const ne of Z){const ie=ne.name.split("?")[0];if(o.i(ie)){const oe=ie.split("/").slice(-2);if(oe.length===2)return`mapbox://styles/${oe[0]}/${oe[1]}`}}}(w)),q(j.attributes,"terrainEnabled",_.terrainEnabled?"true":"false"),q(j.attributes,"fogEnabled",_.fogEnabled?"true":"false"),q(j.attributes,"projection",_.projection),q(j.attributes,"zoom",_.zoom),q(j.metadata,"devicePixelRatio",L),q(j.metadata,"connectionEffectiveType",N),q(j.metadata,"navigatorUserAgent",navigator.userAgent),q(j.metadata,"screenWidth",window.screen.width),q(j.metadata,"screenHeight",window.screen.height),q(j.metadata,"windowWidth",window.innerWidth),q(j.metadata,"windowHeight",window.innerHeight),q(j.metadata,"mapWidth",_.width/L),q(j.metadata,"mapHeight",_.height/L),q(j.metadata,"webglRenderer",_.renderer),q(j.metadata,"webglVendor",_.vendor),q(j.metadata,"sdkVersion",x),q(j.metadata,"sdkIdentifier","mapbox-gl-js"),j}(u);for(const _ of m.metadata);for(const _ of m.counters);for(const _ of m.attributes);this.postEvent(s,m,()=>{},p)}},qi=Fr.postPerformanceEvent.bind(Fr),Xi=new class extends dr{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(p,s,u,m){if(!o.e.API_URL||!o.e.SESSION_PATH)return;const _=Gt(o.e.API_URL+o.e.SESSION_PATH);_.params.push(`sku=${s||""}`),_.params.push(`access_token=${m||o.e.ACCESS_TOKEN||""}`);const w={url:Pt(_),headers:{"Content-Type":"text/plain"}};this.pendingRequest=o.g(w,C=>{this.pendingRequest=null,u(C),this.saveEventData(),this.processRequests(m)})}getSessionAPI(p,s,u,m){this.skuToken=s,this.errorCb=m,o.e.SESSION_PATH&&o.e.API_URL&&(u||o.e.ACCESS_TOKEN?this.queueRequest({id:p,timestamp:Date.now()},u):this.errorCb(new Error(gt)))}processRequests(p){if(this.pendingRequest||this.queue.length===0)return;const{id:s,timestamp:u}=this.queue.shift();s&&this.success[s]||this.getSession(u,this.skuToken,m=>{m?this.errorCb(m):s&&(this.success[s]=!0)},p)}remove(){this.errorCb=null}},ke=Xi.getSessionAPI.bind(Xi),ao=new Set;function ko(p,s){s?ao.add(p):ao.delete(p)}class Sa{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(s,u){this._updatedSourceCaches[s]=u,this.setDirty()}discardSourceCacheUpdate(s){delete this._updatedSourceCaches[s]}updateLayer(s){const u=s.scope;this._updatedLayers[u]=this._updatedLayers[u]||new Set,this._updatedLayers[u].add(s.id),this.setDirty()}removeLayer(s){const u=s.scope;this._removedLayers[u]=this._removedLayers[u]||{},this._updatedLayers[u]=this._updatedLayers[u]||new Set,this._removedLayers[u][s.id]=s,this._updatedLayers[u].delete(s.id),this._updatedPaintProps.delete(s.fqid),this.setDirty()}getRemovedLayer(s){return this._removedLayers[s.scope]?this._removedLayers[s.scope][s.id]:null}discardLayerRemoval(s){this._removedLayers[s.scope]&&delete this._removedLayers[s.scope][s.id]}getLayerUpdatesByScope(){const s={};for(const u in this._updatedLayers)s[u]=s[u]||{},s[u].updatedIds=Array.from(this._updatedLayers[u].values());for(const u in this._removedLayers)s[u]=s[u]||{},s[u].removedIds=Object.keys(this._removedLayers[u]);return s}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(s){this._updatedPaintProps.add(s.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(s){this._updatedImages.add(s),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}function Dt(p){const{userImage:s}=p;return!!(s&&s.render&&s.render())&&(p.data.replace(new Uint8Array(s.data.buffer)),!0)}class Ea extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.atlasImage={},this.atlasTexture={},this.dirty=!0}createScope(s){this.images[s]={},this.loaded[s]=!1,this.updatedImages[s]={},this.patterns[s]={},this.callbackDispatchedThisFrame[s]={},this.atlasImage[s]=new o.r({width:1,height:1})}isLoaded(){for(const s in this.loaded)if(!this.loaded[s])return!1;return!0}setLoaded(s,u){if(this.loaded[u]!==s&&(this.loaded[u]=s,s)){for(const{ids:m,callback:_}of this.requestors)this._notify(m,u,_);this.requestors=[]}}hasImage(s,u){return!!this.getImage(s,u)}getImage(s,u){return this.images[u][s]}addImage(s,u,m){this._validate(s,m)&&(this.images[u][s]=m)}_validate(s,u){let m=!0;return this._validateStretch(u.stretchX,u.data&&u.data.width)||(this.fire(new o.t(new Error(`Image "${s}" has invalid "stretchX" value`))),m=!1),this._validateStretch(u.stretchY,u.data&&u.data.height)||(this.fire(new o.t(new Error(`Image "${s}" has invalid "stretchY" value`))),m=!1),this._validateContent(u.content,u)||(this.fire(new o.t(new Error(`Image "${s}" has invalid "content" value`))),m=!1),m}_validateStretch(s,u){if(!s)return!0;let m=0;for(const _ of s){if(_[0]<m||_[1]<_[0]||u<_[1])return!1;m=_[1]}return!0}_validateContent(s,u){return!(s&&(s.length!==4||s[0]<0||u.data.width<s[0]||s[1]<0||u.data.height<s[1]||s[2]<0||u.data.width<s[2]||s[3]<0||u.data.height<s[3]||s[2]<s[0]||s[3]<s[1]))}updateImage(s,u,m){m.version=this.images[u][s].version+1,this.images[u][s]=m,this.updatedImages[u][s]=!0}removeImage(s,u){const m=this.images[u][s];delete this.images[u][s],delete this.patterns[u][s],m.userImage&&m.userImage.onRemove&&m.userImage.onRemove()}listImages(s){return Object.keys(this.images[s])}getImages(s,u,m){let _=!0;const w=!!this.loaded[u];if(!w)for(const C of s)this.images[u][C]||(_=!1);w||_?this._notify(s,u,m):this.requestors.push({ids:s,scope:u,callback:m})}getUpdatedImages(s){return this.updatedImages[s]}_notify(s,u,m){const _={};for(const w of s){this.images[u][w]||this.fire(new o.x("styleimagemissing",{id:w}));const C=this.images[u][w];C?_[w]={data:C.data.clone(),pixelRatio:C.pixelRatio,sdf:C.sdf,version:C.version,stretchX:C.stretchX,stretchY:C.stretchY,content:C.content,hasRenderCallback:!!(C.userImage&&C.userImage.render)}:o.w(`Image "${w}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}m(null,_)}getPixelSize(s){const{width:u,height:m}=this.atlasImage[s];return{width:u,height:m}}getPattern(s,u,m){const _=this.patterns[u][s],w=this.getImage(s,u);if(!w)return null;if(_&&_.position.version===w.version)return _.position;if(_)_.position.version=w.version;else{const C={w:w.data.width+2*o.y,h:w.data.height+2*o.y,x:0,y:0},D=new o.I(C,w,o.y);this.patterns[u][s]={bin:C,position:D}}return this._updatePatternAtlas(u,m),this.patterns[u][s].position}bind(s,u){const m=s.gl;let _=this.atlasTexture[u];_?this.dirty&&(_.update(this.atlasImage[u]),this.dirty=!1):(_=new o.T(s,this.atlasImage[u],m.RGBA8),this.atlasTexture[u]=_),_.bind(m.LINEAR,m.CLAMP_TO_EDGE)}_updatePatternAtlas(s,u){const m=[];for(const D in this.patterns[s])m.push(this.patterns[s][D].bin);const{w:_,h:w}=o.z(m),C=this.atlasImage[s];C.resize({width:_||1,height:w||1});for(const D in this.patterns[s]){const{bin:L,position:z}=this.patterns[s][D];let N=z.padding;const j=L.x+N,q=L.y+N,Z=this.images[s][D].data,ne=Z.width,ie=Z.height;N=N>1?N-1:N,o.r.copy(Z,C,{x:0,y:0},{x:j,y:q},{width:ne,height:ie},u),o.r.copy(Z,C,{x:0,y:ie-N},{x:j,y:q-N},{width:ne,height:N},u),o.r.copy(Z,C,{x:0,y:0},{x:j,y:q+ie},{width:ne,height:N},u),o.r.copy(Z,C,{x:ne-N,y:0},{x:j-N,y:q},{width:N,height:ie},u),o.r.copy(Z,C,{x:0,y:0},{x:j+ne,y:q},{width:N,height:ie},u),o.r.copy(Z,C,{x:ne-N,y:ie-N},{x:j-N,y:q-N},{width:N,height:N},u),o.r.copy(Z,C,{x:0,y:ie-N},{x:j+ne,y:q-N},{width:N,height:N},u),o.r.copy(Z,C,{x:0,y:0},{x:j+ne,y:q+ie},{width:N,height:N},u),o.r.copy(Z,C,{x:ne-N,y:0},{x:j-N,y:q+ie},{width:N,height:N},u)}this.dirty=!0}beginFrame(){for(const s in this.images)this.callbackDispatchedThisFrame[s]={}}dispatchRenderCallbacks(s,u){for(const m of s){if(this.callbackDispatchedThisFrame[u][m])continue;this.callbackDispatchedThisFrame[u][m]=!0;const _=this.images[u][m];Dt(_)&&this.updateImage(m,u,_)}}}function Ei(p){const s=p.key,u=p.value,m=p.valueSpec||{},_=p.objectElementValidators||{},w=p.style,C=p.styleSpec;let D=[];const L=o.B(u);if(L!=="object")return[new o.V(s,u,`object expected, ${L} found`)];for(const z in u){const N=z.split(".")[0];let j;_[N]?j=_[N]:m[N]?j=tn:_["*"]?j=_["*"]:m["*"]&&(j=tn),j?D=D.concat(j({key:(s&&`${s}.`)+z,value:u[z],valueSpec:m[N]||m["*"],style:w,styleSpec:C,object:u,objectKey:z},u)):D.push(new o.A(s,u[z],`unknown property "${z}"`))}for(const z in m)_[z]||m[z].required&&m[z].default===void 0&&u[z]===void 0&&D.push(new o.V(s,u,`missing required property "${z}"`));return D}function po(p){const s=p.value,u=p.valueSpec,m=p.style,_=p.styleSpec,w=p.key,C=p.arrayElementValidator||tn;if(o.B(s)!=="array")return[new o.V(w,s,`array expected, ${o.B(s)} found`)];if(u.length&&s.length!==u.length)return[new o.V(w,s,`array length ${u.length} expected, length ${s.length} found`)];if(u["min-length"]&&s.length<u["min-length"])return[new o.V(w,s,`array length at least ${u["min-length"]} expected, length ${s.length} found`)];let D={type:u.value,values:u.values,minimum:u.minimum,maximum:u.maximum,function:void 0};_.$version<7&&(D.function=u.function),o.B(u.value)==="object"&&(D=u.value);let L=[];for(let z=0;z<s.length;z++)L=L.concat(C({array:s,arrayIndex:z,value:s[z],valueSpec:D,style:m,styleSpec:_,key:`${w}[${z}]`},!0));return L}function Br(p){const s=p.key,u=p.value,m=p.valueSpec;let _=o.B(u);if(_==="number"&&u!=u&&(_="NaN"),_!=="number")return[new o.V(s,u,`number expected, ${_} found`)];if("minimum"in m){let w=m.minimum;if(o.B(m.minimum)==="array"&&(w=m.minimum[p.arrayIndex]),u<w)return[new o.V(s,u,`${u} is less than the minimum value ${w}`)]}if("maximum"in m){let w=m.maximum;if(o.B(m.maximum)==="array"&&(w=m.maximum[p.arrayIndex]),u>w)return[new o.V(s,u,`${u} is greater than the maximum value ${w}`)]}return[]}function en(p){const s=p.valueSpec,u=o.D(p.value.type);let m,_,w,C={};const D=u!=="categorical"&&p.value.property===void 0,L=!D,z=o.B(p.value.stops)==="array"&&o.B(p.value.stops[0])==="array"&&o.B(p.value.stops[0][0])==="object",N=Ei({key:p.key,value:p.value,valueSpec:p.styleSpec.function,style:p.style,styleSpec:p.styleSpec,objectElementValidators:{stops:function(Z){if(u==="identity")return[new o.V(Z.key,Z.value,'identity function may not have a "stops" property')];let ne=[];const ie=Z.value;return ne=ne.concat(po({key:Z.key,value:ie,valueSpec:Z.valueSpec,style:Z.style,styleSpec:Z.styleSpec,arrayElementValidator:j})),o.B(ie)==="array"&&ie.length===0&&ne.push(new o.V(Z.key,ie,"array must have at least one stop")),ne},default:function(Z){return tn({key:Z.key,value:Z.value,valueSpec:s,style:Z.style,styleSpec:Z.styleSpec})}}});return u==="identity"&&D&&N.push(new o.V(p.key,p.value,'missing required property "property"')),u==="identity"||p.value.stops||N.push(new o.V(p.key,p.value,'missing required property "stops"')),u==="exponential"&&p.valueSpec.expression&&!o.F(p.valueSpec)&&N.push(new o.V(p.key,p.value,"exponential functions not supported")),p.styleSpec.$version>=8&&(L&&!o.G(p.valueSpec)?N.push(new o.V(p.key,p.value,"property functions not supported")):D&&!o.H(p.valueSpec)&&N.push(new o.V(p.key,p.value,"zoom functions not supported"))),u!=="categorical"&&!z||p.value.property!==void 0||N.push(new o.V(p.key,p.value,'"property" property is required')),N;function j(Z){let ne=[];const ie=Z.value,oe=Z.key;if(o.B(ie)!=="array")return[new o.V(oe,ie,`array expected, ${o.B(ie)} found`)];if(ie.length!==2)return[new o.V(oe,ie,`array length 2 expected, length ${ie.length} found`)];if(z){if(o.B(ie[0])!=="object")return[new o.V(oe,ie,`object expected, ${o.B(ie[0])} found`)];if(ie[0].zoom===void 0)return[new o.V(oe,ie,"object stop key must have zoom")];if(ie[0].value===void 0)return[new o.V(oe,ie,"object stop key must have value")];const ae=o.D(ie[0].zoom);if(typeof ae!="number")return[new o.V(oe,ie[0].zoom,"stop zoom values must be numbers")];if(w&&w>ae)return[new o.V(oe,ie[0].zoom,"stop zoom values must appear in ascending order")];ae!==w&&(w=ae,_=void 0,C={}),ne=ne.concat(Ei({key:`${oe}[0]`,value:ie[0],valueSpec:{zoom:{}},style:Z.style,styleSpec:Z.styleSpec,objectElementValidators:{zoom:Br,value:q}}))}else ne=ne.concat(q({key:`${oe}[0]`,value:ie[0],valueSpec:{},style:Z.style,styleSpec:Z.styleSpec},ie));return o.J(o.K(ie[1]))?ne.concat([new o.V(`${oe}[1]`,ie[1],"expressions are not allowed in function stops.")]):ne.concat(tn({key:`${oe}[1]`,value:ie[1],valueSpec:s,style:Z.style,styleSpec:Z.styleSpec}))}function q(Z,ne){const ie=o.B(Z.value),oe=o.D(Z.value),ae=Z.value!==null?Z.value:ne;if(m){if(ie!==m)return[new o.V(Z.key,ae,`${ie} stop domain type must match previous stop domain type ${m}`)]}else m=ie;if(ie!=="number"&&ie!=="string"&&ie!=="boolean"&&typeof oe!="number"&&typeof oe!="string"&&typeof oe!="boolean")return[new o.V(Z.key,ae,"stop domain value must be a number, string, or boolean")];if(ie!=="number"&&u!=="categorical"){let ge=`number expected, ${ie} found`;return o.G(s)&&u===void 0&&(ge+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new o.V(Z.key,ae,ge)]}return u!=="categorical"||ie!=="number"||typeof oe=="number"&&isFinite(oe)&&Math.floor(oe)===oe?u!=="categorical"&&ie==="number"&&typeof oe=="number"&&typeof _=="number"&&_!==void 0&&oe<_?[new o.V(Z.key,ae,"stop domain values must appear in ascending order")]:(_=oe,u==="categorical"&&oe in C?[new o.V(Z.key,ae,"stop domain values must be unique")]:(C[oe]=!0,[])):[new o.V(Z.key,ae,`integer expected, found ${String(oe)}`)]}}function Hi(p){const s=(p.expressionContext==="property"?o.L:o.M)(o.K(p.value),p.valueSpec);if(s.result==="error")return s.value.map(m=>new o.V(`${p.key}${m.key}`,p.value,m.message));const u=s.value.expression||s.value._styleExpression.expression;if(p.expressionContext==="property"&&p.propertyKey==="text-font"&&!u.outputDefined())return[new o.V(p.key,p.value,`Invalid data expression for "${p.propertyKey}". Output values must be contained as literals within the expression.`)];if(p.expressionContext==="property"&&p.propertyType==="layout"&&!o.N(u))return[new o.V(p.key,p.value,'"feature-state" data expressions are not supported with layout properties.')];if(p.expressionContext==="filter")return mo(u,p);if(p.expressionContext&&p.expressionContext.indexOf("cluster")===0){if(!o.O(u,["zoom","feature-state"]))return[new o.V(p.key,p.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(p.expressionContext==="cluster-initial"&&!o.Q(u))return[new o.V(p.key,p.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function mo(p,s){const u=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(s.valueSpec&&s.valueSpec.expression)for(const _ of s.valueSpec.expression.parameters)u.delete(_);if(u.size===0)return[];const m=[];return p instanceof o.S&&u.has(p.name)?[new o.V(s.key,s.value,`["${p.name}"] expression is not supported in a filter for a ${s.object.type} layer with id: ${s.object.id}`)]:(p.eachChild(_=>{m.push(...mo(_,s))}),m)}function so(p){const s=p.key,u=p.value,m=p.valueSpec,_=[];return Array.isArray(m.values)?m.values.indexOf(o.D(u))===-1&&_.push(new o.V(s,u,`expected one of [${m.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(m.values).indexOf(o.D(u))===-1&&_.push(new o.V(s,u,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(u)} found`)),_}function Wa(p){return o.W(o.K(p.value))?Hi(o.C({},p,{expressionContext:"filter",valueSpec:p.styleSpec[`filter_${p.layerType||"fill"}`]})):xr(p)}function xr(p){const s=p.value,u=p.key;if(o.B(s)!=="array")return[new o.V(u,s,`array expected, ${o.B(s)} found`)];const m=p.styleSpec;let _,w=[];if(s.length<1)return[new o.V(u,s,"filter array must have at least 1 element")];switch(w=w.concat(so({key:`${u}[0]`,value:s[0],valueSpec:m.filter_operator,style:p.style,styleSpec:p.styleSpec})),o.D(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&o.D(s[1])==="$type"&&w.push(new o.V(u,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":s.length!==3&&w.push(new o.V(u,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(_=o.B(s[1]),_!=="string"&&w.push(new o.V(`${u}[1]`,s[1],`string expected, ${_} found`)));for(let C=2;C<s.length;C++)_=o.B(s[C]),o.D(s[1])==="$type"?w=w.concat(so({key:`${u}[${C}]`,value:s[C],valueSpec:m.geometry_type,style:p.style,styleSpec:p.styleSpec})):_!=="string"&&_!=="number"&&_!=="boolean"&&w.push(new o.V(`${u}[${C}]`,s[C],`string, number, or boolean expected, ${_} found`));break;case"any":case"all":case"none":for(let C=1;C<s.length;C++)w=w.concat(xr({key:`${u}[${C}]`,value:s[C],style:p.style,styleSpec:p.styleSpec}));break;case"has":case"!has":_=o.B(s[1]),s.length!==2?w.push(new o.V(u,s,`filter array for "${s[0]}" operator must have 2 elements`)):_!=="string"&&w.push(new o.V(`${u}[1]`,s[1],`string expected, ${_} found`))}return w}function Ls(p,s){const u=p.key,m=p.style,_=p.layer,w=p.styleSpec,C=p.value,D=p.objectKey,L=w[`${s}_${p.layerType}`];if(!L)return[];const z=D.match(/^(.*)-transition$/);if(s==="paint"&&z&&L[z[1]]&&L[z[1]].transition)return tn({key:u,value:C,valueSpec:w.transition,style:m,styleSpec:w});const N=p.valueSpec||L[D];if(!N)return[new o.A(u,C,`unknown property "${D}"`)];let j;if(o.B(C)==="string"&&o.G(N)&&!N.tokens&&(j=/^{([^}]+)}$/.exec(C))){const Z=`\`{ "type": "identity", "property": ${j?JSON.stringify(j[1]):'"_"'} }\``;return[new o.V(u,C,`"${D}" does not support interpolation syntax
Use an identity property function instead: ${Z}.`)]}const q=[];if(p.layerType==="symbol")D!=="text-field"||!m||m.glyphs||m.imports||q.push(new o.V(u,C,'use of "text-field" requires a style "glyphs" property')),D==="text-font"&&o.X(o.K(C))&&o.D(C.type)==="identity"&&q.push(new o.V(u,C,'"text-font" does not support identity functions'));else if(p.layerType==="model"&&s==="paint"&&_&&_.layout&&_.layout.hasOwnProperty("model-id")&&o.G(N)&&(o.Y(N)||o.H(N))){const Z=o.L(o.K(C),N),ne=Z.value.expression||Z.value._styleExpression.expression;ne&&!o.O(ne,["measure-light"])&&(D==="model-emissive-strength"&&o.Q(ne)&&o.N(ne)||q.push(new o.V(u,C,`${D} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return q.concat(tn({key:p.key,value:C,valueSpec:N,style:m,styleSpec:w,expressionContext:"property",propertyType:s,propertyKey:D}))}function Ta(p){return Ls(p,"paint")}function ia(p){return Ls(p,"layout")}function go(p){let s=[];const u=p.value,m=p.key,_=p.style,w=p.styleSpec;u.type||u.ref||s.push(new o.V(m,u,'either "type" or "ref" is required'));let C=o.D(u.type);const D=o.D(u.ref);if(u.id){const L=o.D(u.id);for(let z=0;z<p.arrayIndex;z++){const N=_.layers[z];o.D(N.id)===L&&s.push(new o.V(m,u.id,`duplicate layer id "${u.id}", previously used at line ${N.id.__line__}`))}}if("ref"in u){let L;["type","source","source-layer","filter","layout"].forEach(z=>{z in u&&s.push(new o.V(m,u[z],`"${z}" is prohibited for ref layers`))}),_.layers.forEach(z=>{o.D(z.id)===D&&(L=z)}),L?L.ref?s.push(new o.V(m,u.ref,"ref cannot reference another ref layer")):C=o.D(L.type):typeof D=="string"&&s.push(new o.V(m,u.ref,`ref layer "${D}" not found`))}else if(C!=="background"&&C!=="sky"&&C!=="slot")if(u.source){const L=_.sources&&_.sources[u.source],z=L&&o.D(L.type);L?z==="vector"&&C==="raster"?s.push(new o.V(m,u.source,`layer "${u.id}" requires a raster source`)):z==="raster"&&C!=="raster"?s.push(new o.V(m,u.source,`layer "${u.id}" requires a vector source`)):z!=="vector"||u["source-layer"]?z==="raster-dem"&&C!=="hillshade"?s.push(new o.V(m,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):z!=="raster-array"||["raster","raster-particle"].includes(C)?C!=="line"||!u.paint||!u.paint["line-gradient"]&&!u.paint["line-trim-offset"]||z==="geojson"&&L.lineMetrics?C==="raster-particle"&&z!=="raster-array"&&s.push(new o.V(m,u.source,`layer "${u.id}" requires a 'raster-array' source.`)):s.push(new o.V(m,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new o.V(m,u.source,"raster-array source can only be used with layer type 'raster'.")):s.push(new o.V(m,u,`layer "${u.id}" must specify a "source-layer"`)):s.push(new o.V(m,u.source,`source "${u.source}" not found`))}else s.push(new o.V(m,u,'missing required property "source"'));return s=s.concat(Ei({key:m,value:u,valueSpec:w.layer,style:p.style,styleSpec:p.styleSpec,objectElementValidators:{"*":()=>[],type:()=>tn({key:`${m}.type`,value:u.type,valueSpec:w.layer.type,style:p.style,styleSpec:p.styleSpec,object:u,objectKey:"type"}),filter:L=>Wa(o.C({layerType:C},L)),layout:L=>Ei({layer:u,key:L.key,value:L.value,valueSpec:{},style:L.style,styleSpec:L.styleSpec,objectElementValidators:{"*":z=>ia(o.C({layerType:C},z))}}),paint:L=>Ei({layer:u,key:L.key,value:L.value,valueSpec:{},style:L.style,styleSpec:L.styleSpec,objectElementValidators:{"*":z=>Ta(o.C({layerType:C,layer:u},z))}})}})),s}function Wo(p){const s=p.value,u=p.key,m=o.B(s);return m!=="string"?[new o.V(u,s,`string expected, ${m} found`)]:[]}const Qc={promoteId:function({key:p,value:s}){if(o.B(s)==="string")return Wo({key:p,value:s});{const u=[];for(const m in s)u.push(...Wo({key:`${p}.${m}`,value:s[m]}));return u}}};function Nc(p){const s=p.value,u=p.key,m=p.styleSpec,_=p.style;if(!s.type)return[new o.V(u,s,'"type" is required')];const w=o.D(s.type);let C=[];switch(["vector","raster","raster-dem","raster-array"].includes(w)&&(s.url||s.tiles||C.push(new o.A(u,s,'Either "url" or "tiles" is required.'))),w){case"vector":case"raster":case"raster-dem":case"raster-array":return C=C.concat(Ei({key:u,value:s,valueSpec:m[`source_${w.replace("-","_")}`],style:p.style,styleSpec:m,objectElementValidators:Qc})),C;case"geojson":if(C=Ei({key:u,value:s,valueSpec:m.source_geojson,style:_,styleSpec:m,objectElementValidators:Qc}),s.cluster)for(const D in s.clusterProperties){const[L,z]=s.clusterProperties[D],N=typeof L=="string"?[L,["accumulated"],["get",D]]:L;C.push(...Hi({key:`${u}.${D}.map`,value:z,expressionContext:"cluster-map"})),C.push(...Hi({key:`${u}.${D}.reduce`,value:N,expressionContext:"cluster-reduce"}))}return C;case"video":return Ei({key:u,value:s,valueSpec:m.source_video,style:_,styleSpec:m});case"image":return Ei({key:u,value:s,valueSpec:m.source_image,style:_,styleSpec:m});case"canvas":return[new o.V(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return so({key:`${u}.type`,value:s.type,valueSpec:{values:Vc(m)},style:_,styleSpec:m})}}function Vc(p){return p.source.reduce((s,u)=>{const m=p[u];return m.type.type==="enum"&&(s=s.concat(Object.keys(m.type.values))),s},[])}function Os(p){const s=p.value,u=p.styleSpec,m=u.light,_=p.style;let w=[];const C=o.B(s);if(s===void 0)return w;if(C!=="object")return w=w.concat([new o.V("light",s,`object expected, ${C} found`)]),w;for(const D in s){const L=D.match(/^(.*)-transition$/);w=w.concat(L&&m[L[1]]&&m[L[1]].transition?tn({key:D,value:s[D],valueSpec:u.transition,style:_,styleSpec:u}):m[D]?tn({key:D,value:s[D],valueSpec:m[D],style:_,styleSpec:u}):[new o.V(D,s[D],`unknown property "${D}"`)])}return w}function oa(p){const s=p.value;let u=[];if(!s)return u;const m=o.B(s);if(m!=="object")return u=u.concat([new o.V("light-3d",s,`object expected, ${m} found`)]),u;const _=p.styleSpec,w=_["light-3d"],C=p.key,D=p.style,L=p.style.lights;for(const j of["type","id"])if(!(j in s))return u=u.concat([new o.V("light-3d",s,`missing property ${j} on light`)]),u;if(s.type&&L)for(let j=0;j<p.arrayIndex;j++){const q=o.D(s.type),Z=L[j];o.D(Z.type)===q&&u.push(new o.V(C,s.id,`duplicate light type "${s.type}", previously defined at line ${Z.id.__line__}`))}const z=`properties_light_${s.type}`;if(!(z in _))return u=u.concat([new o.V("light-3d",s,`Invalid light type ${s.type}`)]),u;const N=_[z];for(const j in s)if(j==="properties"){const q=s[j],Z=o.B(q);if(Z!=="object")return u=u.concat([new o.V("properties",q,`object expected, ${Z} found`)]),u;for(const ne in q)u=u.concat(N[ne]?tn({key:ne,value:q[ne],valueSpec:N[ne],style:D,styleSpec:_}):[new o.A(p.key,q[ne],`unknown property "${ne}"`)])}else{const q=j.match(/^(.*)-transition$/);u=u.concat(q&&w[q[1]]&&w[q[1]].transition?tn({key:j,value:s[j],valueSpec:_.transition,style:D,styleSpec:_}):w[j]?tn({key:j,value:s[j],valueSpec:w[j],style:D,styleSpec:_}):[new o.A(j,s[j],`unknown property "${j}"`)])}return u}function Us(p){const s=p.value,u=p.key,m=p.style,_=p.styleSpec,w=_.terrain;let C=[];const D=o.B(s);if(s===void 0||D==="null")return C;if(D!=="object")return C=C.concat([new o.V("terrain",s,`object expected, ${D} found`)]),C;for(const L in s){const z=L.match(/^(.*)-transition$/);C=C.concat(z&&w[z[1]]&&w[z[1]].transition?tn({key:L,value:s[L],valueSpec:_.transition,style:m,styleSpec:_}):w[L]?tn({key:L,value:s[L],valueSpec:w[L],style:m,styleSpec:_}):[new o.A(L,s[L],`unknown property "${L}"`)])}if(s.source){const L=m.sources&&m.sources[s.source],z=L&&o.D(L.type);L?z!=="raster-dem"&&C.push(new o.V(u,s.source,`terrain cannot be used with a source of type ${String(z)}, it only be used with a "raster-dem" source type`)):C.push(new o.V(u,s.source,`source "${s.source}" not found`))}else C.push(new o.V(u,s,'terrain is missing required property "source"'));return C}function Fa(p){const s=p.value,u=p.style,m=p.styleSpec,_=m.fog;let w=[];const C=o.B(s);if(s===void 0)return w;if(C!=="object")return w=w.concat([new o.V("fog",s,`object expected, ${C} found`)]),w;for(const D in s){const L=D.match(/^(.*)-transition$/);w=w.concat(L&&_[L[1]]&&_[L[1]].transition?tn({key:D,value:s[D],valueSpec:m.transition,style:u,styleSpec:m}):_[D]?tn({key:D,value:s[D],valueSpec:_[D],style:u,styleSpec:m}):[new o.A(D,s[D],`unknown property "${D}"`)])}return w}const Hc={"*":()=>[],array:po,boolean:function(p){const s=p.value,u=p.key,m=o.B(s);return m!=="boolean"?[new o.V(u,s,`boolean expected, ${m} found`)]:[]},number:Br,color:function(p){const s=p.key,u=p.value,m=o.B(u);return m!=="string"?[new o.V(s,u,`color expected, ${m} found`)]:o.U.parseCSSColor(u)===null?[new o.V(s,u,`color expected, "${u}" found`)]:[]},enum:so,filter:Wa,function:en,layer:go,object:Ei,source:Nc,model:o.Z,light:Os,"light-3d":oa,terrain:Us,fog:Fa,string:Wo,formatted:function(p){return Wo(p).length===0?[]:Hi(p)},resolvedImage:function(p){return Wo(p).length===0?[]:Hi(p)},projection:function(p){const s=p.value,u=p.styleSpec,m=u.projection,_=p.style;let w=[];const C=o.B(s);if(C==="object")for(const D in s)w=w.concat(tn({key:D,value:s[D],valueSpec:m[D],style:_,styleSpec:u}));else C!=="string"&&(w=w.concat([new o.V("projection",s,`object or string expected, ${C} found`)]));return w},import:function(p){const{value:s,styleSpec:u}=p,{data:m,..._}=s;Object.defineProperty(_,"__line__",{value:s.__line__,enumerable:!1});let w=Ei(o.C({},p,{value:_,valueSpec:u.import}));return o.D(_.id)===""&&w.push(new o.V(`${p.key}.id`,_,"import id can't be an empty string")),m&&(w=w.concat(pl(m,u,{key:`${p.key}.data`}))),w}};function tn(p,s=!1){const u=p.value,m=p.valueSpec,_=p.styleSpec;if(m.expression&&o.X(o.D(u)))return en(p);if(m.expression&&o.J(o.K(u)))return Hi(p);if(m.type&&Hc[m.type]){const w=Hc[m.type](p);return s===!0&&w.length>0&&o.B(p.value)==="array"?Hi(p):w}return Ei(o.C({},p,{valueSpec:m.type?_[m.type]:m}))}function qa(p){const s=p.value,u=p.key,m=Wo(p);return m.length||(s.indexOf("{fontstack}")===-1&&m.push(new o.V(u,s,'"glyphs" url must include a "{fontstack}" token')),s.indexOf("{range}")===-1&&m.push(new o.V(u,s,'"glyphs" url must include a "{range}" token'))),m}function pl(p,s=o._,u={}){return tn({key:u.key||"",value:p,valueSpec:s.$root,styleSpec:s,style:p,objectElementValidators:{glyphs:qa,"*":()=>[]}})}function aa(p,s=o._){return Ie(pl(p,s))}const sa=p=>Ie(Nc(p)),Qu=p=>Ie(Os(p)),jc=p=>Ie(oa(p)),Nu=p=>Ie(Us(p)),oc=p=>Ie(Fa(p)),it=p=>Ie(go(p)),se=p=>Ie(Wa(p)),Ae=p=>Ie(Ta(p)),Be=p=>Ie(ia(p)),De=p=>Ie(o.Z(p));function Ie(p){return p.slice().sort((s,u)=>s.line&&u.line?s.line-u.line:0)}function Ke(p,s){let u=!1;if(s&&s.length)for(const m of s)m instanceof o.A?o.w(m.message):(p.fire(new o.t(new Error(m.message))),u=!0);return u}let rt;class Ze extends o.E{constructor(s,u="flat"){super(),this._transitionable=new o.$(rt||(rt=new o.a0({anchor:new o.a1(o._.light.anchor),position:new o.a2(o._.light.position),color:new o.a1(o._.light.color),intensity:new o.a1(o._.light.intensity)}))),this.setLight(s,u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,u,m={}){this._validate(Qu,s,m)||(this._transitionable.setTransitionOrValue(s),this.id=u)}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,u,m){return(!m||m.validate!==!1)&&Ke(this,s.call(aa,o.l({value:u,style:{glyphs:!0,sprite:!0},styleSpec:o._})))}}const nt=new o.a0({source:new o.a1(o._.terrain.source),exaggeration:new o.a1(o._.terrain.exaggeration)});let dt=class extends o.E{constructor(p,s,u,m){super(),this.scope=u,this._transitionable=new o.$(nt,u,m),this._transitionable.setTransitionOrValue(p,m),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=s}get(){return this._transitionable.serialize()}set(p,s){this._transitionable.setTransitionOrValue(p,s)}updateTransitions(p){this._transitioning=this._transitionable.transitioned(p,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(p){this.properties=this._transitioning.possiblyEvaluate(p)}getExaggeration(p){return this._transitioning.possiblyEvaluate(new o.a3(p)).get("exaggeration")}isZoomDependent(){const p=this._transitionable._values.exaggeration;return p!=null&&p.value!=null&&p.value.expression!=null&&p.value.expression instanceof o.a4}};const ut=45,Ct=65,zt=.05;function Nt(p,s,u,m){const _=o.a7(ut,Ct,u),[w,C]=hr(p,m);let D=1-Math.min(1,Math.exp((s-w)/(C-w)*-6));return D*=D*D,D=Math.min(1,1.00747*D),D*_*p.alpha}function hr(p,s){const u=.5/Math.tan(.5*s);return[p.range[0]+u,p.range[1]+u]}function fr(p,s,u,m,_){const w=o.a6.vec3.transformMat4([],[s,u,m],_.mercatorFogMatrix);return Nt(p,o.a6.vec3.length(w),_.pitch,_._fov)}function yr(p,s,u,m,_,w,C){const D=[[u,m,0],[_,m,0],[_,w,0],[u,w,0]];let L=Number.MAX_VALUE,z=-Number.MAX_VALUE;for(const N of D){const j=o.a6.vec3.transformMat4([],N,s),q=o.a6.vec3.length(j);L=Math.min(L,q),z=Math.max(z,q)}return[Nt(p,L,C.pitch,C._fov),Nt(p,z,C.pitch,C._fov)]}const pr=new o.a0({range:new o.a1(o._.fog.range),color:new o.a1(o._.fog.color),"high-color":new o.a1(o._.fog["high-color"]),"space-color":new o.a1(o._.fog["space-color"]),"horizon-blend":new o.a1(o._.fog["horizon-blend"]),"star-intensity":new o.a1(o._.fog["star-intensity"]),"vertical-range":new o.a1(o._.fog["vertical-range"])});class mn extends o.E{constructor(s,u,m,_){super(),this._transitionable=new o.$(pr,m,new Map(_)),this.set(s,_),this._transitioning=this._transitionable.untransitioned(),this._transform=u,this.properties=new o.a8(pr),this.scope=m}get state(){const s=this._transform,u=s.projection.name==="globe",m=o.a9(s.zoom),_=this.properties.get("range"),w=[.5,3];return{range:u?[o.aa(w[0],_[0],m),o.aa(w[1],_[1],m)]:_,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(s,u,m={}){if(this._validate(oc,s,m))return;const _=o.l({},s);for(const w of Object.keys(o._.fog))_[w]===void 0&&(_[w]=o._.fog[w].default);this._options=_,this._transitionable.setTransitionOrValue(this._options,u)}getOpacity(s){if(!this._transform.projection.supportsFog)return 0;const u=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:o.a7(ut,Ct,s))*u.a}getOpacityAtLatLng(s,u){return this._transform.projection.supportsFog?function(m,_,w){const C=o.a5.fromLngLat(_),D=w.elevation?w.elevation.getAtPointOrZero(C):0;return fr(m,C.x,C.y,D,w)}(this.state,s,u):0}getOpacityForTile(s){if(!this._transform.projection.supportsFog)return[1,1];const u=this._transform.calculateFogTileMatrix(s.toUnwrapped());return yr(this.state,u,0,0,o.ab,o.ab,this._transform)}getOpacityForBounds(s,u,m,_,w){return this._transform.projection.supportsFog?yr(this.state,s,u,m,_,w,this._transform):[1,1]}getFovAdjustedRange(s){return this._transform.projection.supportsFog?hr(this.state,s):[0,1]}isVisibleOnFrustum(s){if(!this._transform.projection.supportsFog)return!1;const u=[4,5,6,7];for(const m of u){const _=s.points[m];let w;if(_[2]>=0)w=_;else{const C=s.points[m-4];w=o.ac(C,_,C[2]/(C[2]-_[2]))}if(fr(this.state,w[0],w[1],0,this._transform)>=zt)return!0}return!1}updateConfig(s){this._transitionable.setTransitionOrValue(this._options,new Map(s))}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,u,m){return(!m||m.validate!==!1)&&Ke(this,s.call(aa,o.l({value:u,style:{glyphs:!0,sprite:!0},styleSpec:o._})))}}class gn extends o.E{constructor(s,u,m,_){super(),this.scope=m,this._options=s,this.properties=new o.a8(u),this._transitionable=new o.$(u,m,new Map(_)),this._transitionable.setTransitionOrValue(s.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(s){this._transitionable.setTransitionOrValue(this._options.properties,new Map(s))}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(s,u){this._options=s,this._transitionable.setTransitionOrValue(s.properties,u)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}let Sr,un;class Kn{constructor(s,u,m,_){this.screenBounds=s,this.cameraPoint=u,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=m,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,_)}static createFromScreenPoints(s,u){let m,_;if(s instanceof o.P||typeof s[0]=="number"){const w=o.P.convert(s);m=[w],_=u.isPointAboveHorizon(w)}else{const w=o.P.convert(s[0]),C=o.P.convert(s[1]);m=[w,C],_=o.ae(w,C).every(D=>u.isPointAboveHorizon(D))}return new Kn(m,u.getCameraPoint(),_,u)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(s){return o.ae(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],s)}bufferedCameraGeometry(s){const u=this.screenBounds[0],m=this.screenBounds.length===1?this.screenBounds[0].add(new o.P(1,1)):this.screenBounds[1],_=o.ae(u,m,0,!1);return this.cameraPoint.y>m.y&&(this.cameraPoint.x>u.x&&this.cameraPoint.x<m.x?_.splice(3,0,this.cameraPoint):this.cameraPoint.x>=m.x?_[2]=this.cameraPoint:this.cameraPoint.x<=u.x&&(_[3]=this.cameraPoint)),o.af(_,s)}bufferedCameraGeometryGlobe(s){const u=this.screenBounds[0],m=this.screenBounds.length===1?this.screenBounds[0].add(new o.P(1,1)):this.screenBounds[1],_=o.ae(u,m,s),w=this.cameraPoint.clone();switch(3*((w.y>u.y)+(w.y>m.y))+((w.x>u.x)+(w.x>m.x))){case 0:_[0]=w,_[4]=w.clone();break;case 1:_.splice(1,0,w);break;case 2:_[1]=w;break;case 3:_.splice(4,0,w);break;case 5:_.splice(2,0,w);break;case 6:_[3]=w;break;case 7:_.splice(3,0,w);break;case 8:_[2]=w}return _}containsTile(s,u,m,_=0){const w=s.queryPadding/u._pixelsPerMercatorPixel+1,C=m?this._bufferedCameraMercator(w,u):this._bufferedScreenMercator(w,u);let D=s.tileID.wrap+(C.unwrapped?_:0);const L=C.polygon.map(oe=>o.ag(s.tileTransform,oe,D));if(!o.ah(L,0,0,o.ab,o.ab))return;D=s.tileID.wrap+(this.screenGeometryMercator.unwrapped?_:0);const z=this.screenGeometryMercator.polygon.map(oe=>o.ai(s.tileTransform,oe,D)),N=z.map(oe=>new o.P(oe[0],oe[1])),j=u.getFreeCameraOptions().position||new o.a5(0,0,0),q=o.ai(s.tileTransform,j,D),Z=z.map(oe=>{const ae=o.a6.vec3.sub(oe,oe,q);return o.a6.vec3.normalize(ae,ae),new o.aj(q,ae)}),ne=o.ak(s,1,u.zoom)*u._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:N,tilespaceRays:Z,bufferedTilespaceGeometry:L,bufferedTilespaceBounds:(ie=o.al(L),ie.min.x=o.ap(ie.min.x,0,o.ab),ie.min.y=o.ap(ie.min.y,0,o.ab),ie.max.x=o.ap(ie.max.x,0,o.ab),ie.max.y=o.ap(ie.max.y,0,o.ab),ie),tile:s,tileID:s.tileID,pixelToTileUnitsFactor:ne};var ie}_bufferedScreenMercator(s,u){const m=Zi(s);if(this._screenRaycastCache[m])return this._screenRaycastCache[m];{let _;return _=u.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(s),u):{polygon:this.bufferedScreenGeometry(s).map(w=>u.pointCoordinate3D(w)),unwrapped:!0},this._screenRaycastCache[m]=_,_}}_bufferedCameraMercator(s,u){const m=Zi(s);if(this._cameraRaycastCache[m])return this._cameraRaycastCache[m];{let _;return _=u.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(s),u):{polygon:this.bufferedCameraGeometry(s).map(w=>u.pointCoordinate3D(w)),unwrapped:!0},this._cameraRaycastCache[m]=_,_}}_projectAndResample(s,u){const m=function(w,C){const D=o.a6.mat4.multiply([],C.pixelMatrix,C.globeMatrix),L=[0,-o.aq,0,1],z=[0,o.aq,0,1],N=[0,0,0,1];o.a6.vec4.transformMat4(L,L,D),o.a6.vec4.transformMat4(z,z,D),o.a6.vec4.transformMat4(N,N,D);const j=new o.P(L[0]/L[3],L[1]/L[3]),q=new o.P(z[0]/z[3],z[1]/z[3]),Z=o.an(w,j)&&L[3]<N[3],ne=o.an(w,q)&&z[3]<N[3];if(!Z&&!ne)return null;const ie=function(Fe,Ee,Me){for(let Qe=1;Qe<Fe.length;Qe++){const Re=yi(Ee.pointCoordinate3D(Fe[Qe-1]).x),Pe=yi(Ee.pointCoordinate3D(Fe[Qe]).x);if(Me<0){if(Re<Pe)return{idx:Qe,t:-Re/(Pe-1-Re)}}else if(Pe<Re)return{idx:Qe,t:(1-Re)/(Pe+1-Re)}}return null}(w,C,Z?-1:1);if(!ie)return null;const{idx:oe,t:ae}=ie;let ge=oe>1?Mi(w.slice(0,oe),C):[],ye=oe<w.length?Mi(w.slice(oe),C):[];ge=ge.map(Fe=>new o.P(yi(Fe.x),Fe.y)),ye=ye.map(Fe=>new o.P(yi(Fe.x),Fe.y));const pe=[...ge];pe.length===0&&pe.push(ye[ye.length-1]);const we=o.aa(pe[pe.length-1].y,(ye.length===0?ge[0]:ye[0]).y,ae);let be;return be=Z?[new o.P(0,we),new o.P(0,0),new o.P(1,0),new o.P(1,we)]:[new o.P(1,we),new o.P(1,1),new o.P(0,1),new o.P(0,we)],pe.push(...be),ye.length===0?pe.push(ge[0]):pe.push(...ye),{polygon:pe.map(Fe=>new o.a5(Fe.x,Fe.y)),unwrapped:!1}}(s,u);if(m)return m;const _=function(w,C){let D=!1,L=-1/0,z=0;for(let j=0;j<w.length-1;j++)w[j].x>L&&(L=w[j].x,z=j);for(let j=0;j<w.length-1;j++){const q=(z+j)%(w.length-1),Z=w[q],ne=w[q+1];Math.abs(Z.x-ne.x)>.5&&(Z.x<ne.x?(Z.x+=1,q===0&&(w[w.length-1].x+=1)):(ne.x+=1,q+1===w.length-1&&(w[0].x+=1)),D=!0)}const N=o.am(C.center.lng);return D&&N<Math.abs(N-1)&&w.forEach(j=>{j.x-=1}),{polygon:w,unwrapped:D}}(Mi(s,u).map(w=>new o.P(yi(w.x),w.y)),u);return{polygon:_.polygon.map(w=>new o.a5(w.x,w.y)),unwrapped:_.unwrapped}}}function Mi(p,s){return o.ao(p,u=>{const m=s.pointCoordinate3D(u);u.x=m.x,u.y=m.y},1/256)}function yi(p){return p<0?1+p%1:p%1}function Zi(p){return 100*p|0}function Xa(p,s,u,m,_){const w=function(D,L){if(D)return _(D);if(L){if(p.url&&L.tiles&&p.tiles&&delete p.tiles,L.variants){if(!Array.isArray(L.variants))return _(new Error("variants must be an array"));for(const N of L.variants){if(N==null||typeof N!="object"||N.constructor!==Object)return _(new Error("variant must be an object"));if(!Array.isArray(N.capabilities))return _(new Error("capabilities must be an array"));if(N.capabilities.length===1&&N.capabilities[0]==="meshopt"){L=o.l(L,N);break}}}const z=o.ar(o.l(L,p),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);L.vector_layers&&(z.vectorLayers=L.vector_layers,z.vectorLayerIds=z.vectorLayers.map(N=>N.id)),L.raster_layers&&(z.rasterLayers=L.raster_layers,z.rasterLayerIds=z.rasterLayers.map(N=>N.id)),z.tiles=s.canonicalizeTileset(z,p.url),_(null,z)}},C=function(D,L,z){if(!D)return null;if(!L&&!z)return D;z=z||D.worldview_default;const N=Object.values(D.language||{});if(N.length===0)return null;const j=Object.values(D.worldview||{});if(j.length===0)return null;const q=N.every(ne=>ne===L),Z=j.every(ne=>ne===z);return q&&Z?D:L in(D.language_options||{})||z in(D.worldview_options||{})?null:D.language_options&&D.worldview_options?D:null}(p.data,u,m);return C?o.q.frame(()=>w(null,C)):p.url?o.n(s.transformRequest(s.normalizeSourceURL(p.url,null,u,m),o.R.Source),w):o.q.frame(()=>{const{data:D,...L}=p;w(null,L)})}class zs{constructor(s,u,m){this.bounds=o.as.convert(this.validateBounds(s)),this.minzoom=u||0,this.maxzoom=m||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const u=Math.pow(2,s.z),m=Math.floor(o.am(this.bounds.getWest())*u),_=Math.floor(o.at(this.bounds.getNorth())*u),w=Math.ceil(o.am(this.bounds.getEast())*u),C=Math.ceil(o.at(this.bounds.getSouth())*u);return s.x>=m&&s.x<w&&s.y>=_&&s.y<C}}class qA extends o.E{constructor(s,u,m,_){if(super(),this.id=s,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.l(this,o.ar(u,["url","scheme","tileSize","promoteId"])),this._options=o.l({type:"vector"},u),this._collectResourceTiming=!!u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_),this._tileWorkers={},this._deduped=new o.au}load(s){this._loaded=!1,this.fire(new o.x("dataloading",{dataType:"source"}));const u=Array.isArray(this.map._language)?this.map._language.join():this.map._language,m=this.map._worldview;this._tileJSONRequest=Xa(this._options,this.map._requestManager,u,m,(_,w)=>{this._tileJSONRequest=null,this._loaded=!0,_?(u&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${u}`),m&&m.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${m}`),this.fire(new o.t(_))):w&&(o.l(this,w),w.bounds&&(this.tileBounds=new zs(w.bounds,this.minzoom,this.maxzoom)),tr(w.tiles,this.map._requestManager._customAccessToken),this.fire(new o.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.x("data",{dataType:"source",sourceDataType:"content"}))),s&&s(_)})}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}reload(){this.cancelTileJSONRequest();const s=o.av(this.id,this.scope);this.load(()=>this.map.style.clearSource(s))}setTiles(s){return this._options.tiles=s,this.reload(),this}setUrl(s){return this.url=s,this._options.url=s,this.reload(),this}onRemove(s){this.cancelTileJSONRequest()}serialize(){return o.l({},this._options)}loadTile(s,u){const m=this.map._requestManager.normalizeTileURL(s.tileID.canonical.url(this.tiles,this.scheme)),_=this.map._requestManager.transformRequest(m,o.R.Tile),w=this.map.style?this.map.style.getLut(this.scope):null,C={request:_,data:void 0,uid:s.uid,tileID:s.tileID,tileZoom:s.tileZoom,zoom:s.tileID.overscaledZ,lut:w?{image:w.image.clone()}:null,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:o.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:s.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:s.isExtraShadowCaster,tessellationStep:this.map._tessellationStep};if(C.request.collectResourceTiming=this._collectResourceTiming,s.actor&&s.state!=="expired")s.state==="loading"?s.reloadCallback=u:s.request=s.actor.send("reloadTile",C,D.bind(this));else if(s.actor=this._tileWorkers[m]=this._tileWorkers[m]||this.dispatcher.getActor(),this.dispatcher.ready)s.request=s.actor.send("loadTile",C,D.bind(this),void 0,!0);else{const L=o.aw.call({deduped:this._deduped},C,(z,N)=>{z||!N?D.call(this,z):(C.data={cacheControl:N.cacheControl,expires:N.expires,rawData:N.rawData.slice(0)},s.actor&&s.actor.send("loadTile",C,D.bind(this),void 0,!0))},!0);s.request={cancel:L}}function D(L,z){return delete s.request,s.aborted?u(null):L&&L.status!==404?u(L):(z&&z.resourceTiming&&(s.resourceTiming=z.resourceTiming),this.map._refreshExpiredTiles&&z&&s.setExpiryData(z),s.loadVectorData(z,this.map.painter),o.ax(this.dispatcher),u(null),void(s.reloadCallback&&(this.loadTile(s,s.reloadCallback),s.reloadCallback=null)))}}abortTile(s){s.request&&(s.request.cancel(),delete s.request),s.actor&&s.actor.send("abortTile",{uid:s.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(s,u){s.actor&&s.actor.send("removeTile",{uid:s.uid,type:this.type,source:this.id,scope:this.scope}),s.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Gc extends o.E{constructor(s,u,m,_){super(),this.id=s,this.dispatcher=m,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.l({type:"raster"},u),o.l(this,o.ar(u,["url","scheme","tileSize"]))}load(s){this._loaded=!1,this.fire(new o.x("dataloading",{dataType:"source"})),this._tileJSONRequest=Xa(this._options,this.map._requestManager,null,null,(u,m)=>{this._tileJSONRequest=null,this._loaded=!0,u?this.fire(new o.t(u)):m&&(o.l(this,m),m.bounds&&(this.tileBounds=new zs(m.bounds,this.minzoom,this.maxzoom)),tr(m.tiles),this.fire(new o.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.x("data",{dataType:"source",sourceDataType:"content"}))),s&&s(u)})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}reload(){this.cancelTileJSONRequest();const s=o.av(this.id,this.scope);this.load(()=>this.map.style.clearSource(s))}setTiles(s){return this._options.tiles=s,this.reload(),this}setUrl(s){return this.url=s,this._options.url=s,this.reload(),this}onRemove(s){this.cancelTileJSONRequest()}serialize(){return o.l({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s,u){const m=o.q.devicePixelRatio>=2,_=this.map._requestManager.normalizeTileURL(s.tileID.canonical.url(this.tiles,this.scheme),m,this.tileSize);s.request=o.o(this.map._requestManager.transformRequest(_,o.R.Tile),(w,C,D,L)=>(delete s.request,s.aborted?(s.state="unloaded",u(null)):w?(s.state="errored",u(w)):C?(this.map._refreshExpiredTiles&&s.setExpiryData({cacheControl:D,expires:L}),s.setTexture(C,this.map.painter),s.state="loaded",o.ax(this.dispatcher),void u(null)):u(null)))}abortTile(s,u){s.request&&(s.request.cancel(),delete s.request),u&&u()}unloadTile(s,u){s.texture&&s.texture instanceof o.T?(s.destroy(!0),s.texture&&s.texture instanceof o.T&&this.map.painter.saveTileTexture(s.texture)):s.destroy(),u&&u()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Kc extends Gc{constructor(s,u,m,_){super(s,u,m,_),this.type="raster-array",this.maxzoom=22,this._options=o.l({type:"raster-array"},u)}triggerRepaint(s){const u=this.map.painter._terrain,m=this.map.style.getSourceCache(this.id);u&&u.enabled&&m&&u._clearRenderCacheForTile(m.id,s.tileID),this.map.triggerRepaint()}loadTile(s,u){const m=this.map._requestManager.normalizeTileURL(s.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),_=this.map._requestManager.transformRequest(m,o.R.Tile);s.requestParams=_,s.actor||(s.actor=this.dispatcher.getActor()),s.request=s.fetchHeader(void 0,(w,C,D,L)=>{if(delete s.request,s.aborted)return s.state="unloaded",u(null);if(w)return w.code===20?void 0:(s.state="errored",u(w));this.map._refreshExpiredTiles&&s.setExpiryData({cacheControl:D,expires:L}),s.state="empty",u(null)})}unloadTile(s,u){const m=s.texture;m&&m instanceof o.T?(s.destroy(!0),this.map.painter.saveTileTexture(m)):(s.destroy(),s.flushQueues(),s._isHeaderLoaded=!1,delete s._mrt,delete s.textureDescriptor),s.fbo&&(s.fbo.destroy(),delete s.fbo),delete s.request,delete s.requestParams,delete s.neighboringTiles,s.state="unloaded"}prepareTile(s,u,m){s._isHeaderLoaded&&(s.state!=="empty"&&(s.state="reloading"),s.fetchBand(u,m,(_,w)=>{if(_)return s.state="errored",this.fire(new o.t(_)),void this.triggerRepaint(s);w&&(s.setTexture(w,this.map.painter),s.state="loaded",this.triggerRepaint(s))}))}getInitialBand(s){if(!this.rasterLayers)return 0;const u=this.rasterLayers.find(({id:w})=>w===s),m=u&&u.fields,_=m&&m.bands&&m.bands;return _?_[0]:0}getTextureDescriptor(s,u,m){if(!s)return;const _=u.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!_)return;let w=null;u instanceof o.aB?w=u.paint.get("raster-array-band"):u instanceof o.aC&&(w=u.paint.get("raster-particle-array-band"));const C=w||this.getInitialBand(_);if(C!=null)if(s.textureDescriptor){if(!s.updateNeeded(_,C)||m)return Object.assign({},s.textureDescriptor,{texture:s.texture})}else this.prepareTile(s,_,C)}}const XA={vector:qA,raster:Gc,"raster-dem":class extends Gc{constructor(p,s,u,m){super(p,s,u,m),this.type="raster-dem",this.maxzoom=22,this._options=o.l({type:"raster-dem"},s),this.encoding=s.encoding||"mapbox"}loadTile(p,s){const u=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function m(_,w){_&&(p.state="errored",s(_)),w&&(p.dem=w,p.dem.onDeserialize(),p.needsHillshadePrepare=!0,p.needsDEMTextureUpload=!0,p.state="loaded",s(null))}p.request=o.o(this.map._requestManager.transformRequest(u,o.R.Tile),(function(_,w,C,D){if(delete p.request,p.aborted)p.state="unloaded",s(null);else if(_)p.state="errored",s(_);else if(w){this.map._refreshExpiredTiles&&p.setExpiryData({cacheControl:C,expires:D});const L=ImageBitmap&&w instanceof ImageBitmap&&o.ay(),z=1-(w.width-o.az(w.width))/2;z<1||p.neighboringTiles||(p.neighboringTiles=this._getNeighboringTiles(p.tileID));const N=L?w:o.q.getImageData(w,z),j={uid:p.uid,coord:p.tileID,source:this.id,scope:this.scope,rawImageData:N,encoding:this.encoding,padding:z};p.actor&&p.state!=="expired"||(p.actor=this.dispatcher.getActor(),p.actor.send("loadDEMTile",j,m.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(p){const s=p.canonical,u=Math.pow(2,s.z),m=(s.x-1+u)%u,_=s.x===0?p.wrap-1:p.wrap,w=(s.x+1+u)%u,C=s.x+1===u?p.wrap+1:p.wrap,D={};return D[new o.aA(p.overscaledZ,_,s.z,m,s.y).key]={backfilled:!1},D[new o.aA(p.overscaledZ,C,s.z,w,s.y).key]={backfilled:!1},s.y>0&&(D[new o.aA(p.overscaledZ,_,s.z,m,s.y-1).key]={backfilled:!1},D[new o.aA(p.overscaledZ,p.wrap,s.z,s.x,s.y-1).key]={backfilled:!1},D[new o.aA(p.overscaledZ,C,s.z,w,s.y-1).key]={backfilled:!1}),s.y+1<u&&(D[new o.aA(p.overscaledZ,_,s.z,m,s.y+1).key]={backfilled:!1},D[new o.aA(p.overscaledZ,p.wrap,s.z,s.x,s.y+1).key]={backfilled:!1},D[new o.aA(p.overscaledZ,C,s.z,w,s.y+1).key]={backfilled:!1}),D}},"raster-array":Kc,geojson:class extends o.E{constructor(p,s,u,m){super(),this.id=p,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=u.getActor(),this.setEventedParent(m),this._data=s.data,this._options=o.l({},s),this._collectResourceTiming=s.collectResourceTiming,s.maxzoom!==void 0&&(this.maxzoom=s.maxzoom),s.minzoom!==void 0&&(this.minzoom=s.minzoom),s.type&&(this.type=s.type),s.attribution&&(this.attribution=s.attribution),this.promoteId=s.promoteId;const _=o.ab/this.tileSize;this.workerOptions=o.l({source:this.id,scope:this.scope,cluster:s.cluster||!1,geojsonVtOptions:{buffer:(s.buffer!==void 0?s.buffer:128)*_,tolerance:(s.tolerance!==void 0?s.tolerance:.375)*_,extent:o.ab,maxZoom:this.maxzoom,lineMetrics:s.lineMetrics||!1,generateId:s.generateId||!1},superclusterOptions:{maxZoom:s.clusterMaxZoom!==void 0?s.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,s.clusterMinPoints||2),extent:o.ab,radius:(s.clusterRadius!==void 0?s.clusterRadius:50)*_,log:!1,generateId:s.generateId||!1},clusterProperties:s.clusterProperties,filter:s.filter,dynamic:s.dynamic},s.workerOptions)}onAdd(p){this.map=p,this.setData(this._data)}setData(p){return this._data=p,this._updateWorkerData(),this}updateData(p){if(!this._options.dynamic)return this.fire(new o.t(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof p!="string"&&(p.type==="Feature"&&(p={type:"FeatureCollection",features:[p]}),p.type!=="FeatureCollection"))return this.fire(new o.t(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof p!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const s=new Map;for(const u of this._data.features)s.set(u.id,u);for(const u of p.features)s.set(u.id,u);this._data.features=[...s.values()]}else this._data=p;return this._updateWorkerData(!0),this}getClusterExpansionZoom(p,s){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:p,source:this.id,scope:this.scope},s),this}getClusterChildren(p,s){return this.actor.send("geojson.getClusterChildren",{clusterId:p,source:this.id,scope:this.scope},s),this}getClusterLeaves(p,s,u,m){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:p,limit:s,offset:u},m),this}_updateWorkerData(p=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new o.x("dataloading",{dataType:"source"})),this._loaded=!1;const s=o.l({append:p},this.workerOptions);s.scope=this.scope;const u=this._data;typeof u=="string"?(s.request=this.map._requestManager.transformRequest(o.q.resolveURL(u),o.R.Source),s.request.collectResourceTiming=this._collectResourceTiming):s.data=JSON.stringify(u),this._pendingLoad=this.actor.send(`${this.type}.loadData`,s,(m,_)=>{if(this._loaded=!0,this._pendingLoad=null,m)this.fire(new o.t(m));else{const w={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&_&&_.resourceTiming&&_.resourceTiming[this.id]&&(w.resourceTiming=_.resourceTiming[this.id]),p&&(this._partialReload=!0),this.fire(new o.x("data",w)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(p),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(p,s){const u=p.actor?"reloadTile":"loadTile";p.actor=this.actor;const m=this.map.style?this.map.style.getLut(this.scope):null,_=this._partialReload,w={type:this.type,uid:p.uid,tileID:p.tileID,tileZoom:p.tileZoom,zoom:p.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:m?{image:m.image.clone()}:null,scope:this.scope,pixelRatio:o.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,partial:_};p.request=this.actor.send(u,w,(C,D)=>_&&!D?(p.state="loaded",s(null)):(delete p.request,p.destroy(),p.aborted?s(null):C?s(C):(p.loadVectorData(D,this.map.painter,u==="reloadTile"),s(null))),void 0,u==="loadTile")}abortTile(p){p.request&&(p.request.cancel(),delete p.request),p.aborted=!0}unloadTile(p,s){this.actor.send("removeTile",{uid:p.uid,type:this.type,source:this.id,scope:this.scope}),p.destroy()}onRemove(p){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return o.l({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends o.aD{constructor(p,s,u,m){super(p,s,u,m),this.roundZoom=!0,this.type="video",this.options=s}load(){this._loaded=!1;const p=this.options;this.urls=[];for(const s of p.urls)this.urls.push(this.map._requestManager.transformRequest(s,o.R.Source).url);o.aE(this.urls,(s,u)=>{this._loaded=!0,s?this.fire(new o.t(s)):u&&(this.video=u,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(p){if(this.video){const s=this.video.seekable;p<s.start(0)||p>s.end(0)?this.fire(new o.t(new o.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${s.start(0)} and ${s.end(0)}-second mark.`))):this.video.currentTime=p}}getVideo(){return this.video}onAdd(p){this.map||(this.map=p,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const p=this.map.painter.context,s=p.gl;this.texture?this.video.paused||(this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,this.video)):(this.texture=new o.T(p,this.video,s.RGBA8),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(p)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:o.aD,model:class extends o.E{constructor(p,s,u,m){super(),this.id=p,this.type="model",this.models=[],this._loaded=!1,this._options=s}load(){const p=[];for(const s in this._options.models){const u=this._options.models[s],m=o.aG(this.map._requestManager.transformRequest(u.uri,o.R.Model).url).then(_=>{if(!_)return;const w=o.aH(_),C=new o.aI(s,u.position,u.orientation,w);C.computeBoundsAndApplyParent(),this.models.push(C)}).catch(_=>{this.fire(new o.t(new Error(`Could not load model ${s} from ${u.uri}: ${_.message}`)))});p.push(m)}return Promise.allSettled(p).then(()=>{this._loaded=!0,this.fire(new o.x("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(s=>{this.fire(new o.t(new Error(`Could not load models: ${s.message}`)))})}onAdd(p){this.map=p,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(p,s){}serialize(){return{type:"model"}}},"batched-model":class extends o.E{constructor(p,s,u,m){super(),this.type="batched-model",this.id=p,this.tileSize=512,this._options=s,this.tiles=this._options.tiles,this.maxzoom=s.maxzoom||19,this.minzoom=s.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=u,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(m)}onAdd(p){this.map=p,this.load()}load(p){this._loaded=!1,this.fire(new o.x("dataloading",{dataType:"source"}));const s=Array.isArray(this.map._language)?this.map._language.join():this.map._language,u=this.map._worldview;this._tileJSONRequest=Xa(this._options,this.map._requestManager,s,u,(m,_)=>{this._tileJSONRequest=null,this._loaded=!0,m?(s&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${s}`),u&&u.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${u}`),this.fire(new o.t(m))):_&&(o.l(this,_),_.bounds&&(this.tileBounds=new zs(_.bounds,this.minzoom,this.maxzoom)),tr(_.tiles,this.map._requestManager._customAccessToken),this.fire(new o.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.x("data",{dataType:"source",sourceDataType:"content"}))),p&&p(m)})}hasTransition(){return!1}hasTile(p){return!this.tileBounds||this.tileBounds.contains(p.canonical)}loaded(){return this._loaded}loadTile(p,s){const u=this.map._requestManager.normalizeTileURL(p.tileID.canonical.url(this.tiles,this.scheme)),m={request:this.map._requestManager.transformRequest(u,o.R.Tile),data:void 0,uid:p.uid,tileID:p.tileID,tileZoom:p.tileZoom,zoom:p.tileID.overscaledZ,tileSize:this.tileSize*p.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:p.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0};if(p.actor&&p.state!=="expired")if(p.state==="loading")p.reloadCallback=s;else{if(p.buckets){const w=Object.values(p.buckets);for(const C of w)C.dirty=!0;return void(p.state="loaded")}p.request=p.actor.send("reloadTile",m,_.bind(this))}else p.actor=this.dispatcher.getActor(),p.request=p.actor.send("loadTile",m,_.bind(this),void 0,!0);function _(w,C){return p.aborted?s(null):w&&w.status!==404?s(w):(C&&(C.resourceTiming&&(p.resourceTiming=C.resourceTiming),this.map._refreshExpiredTiles&&p.setExpiryData(C),p.buckets={...p.buckets,...C.buckets},C.featureIndex&&(p.latestFeatureIndex=C.featureIndex)),p.state="loaded",void s(null))}}serialize(){return o.l({},this._options)}},canvas:class extends o.aD{constructor(p,s,u,m){super(p,s,u,m),s.coordinates?Array.isArray(s.coordinates)&&s.coordinates.length===4&&!s.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(w=>typeof w!="number"))||this.fire(new o.t(new o.V(`sources.${p}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.t(new o.V(`sources.${p}`,null,'missing required property "coordinates"'))),s.animate&&typeof s.animate!="boolean"&&this.fire(new o.t(new o.V(`sources.${p}`,null,'optional "animate" property must be a boolean value'))),s.canvas?typeof s.canvas=="string"||s.canvas instanceof HTMLCanvasElement||this.fire(new o.t(new o.V(`sources.${p}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.t(new o.V(`sources.${p}`,null,'missing required property "canvas"'))),this.options=s,this.animate=s.animate===void 0||s.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.t(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(p){this.map=p,this.load(),this.canvas&&this.animate&&this.play()}onRemove(p){this.pause()}prepare(){let p=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,p=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,p=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const s=this.map.painter.context;this.texture?!p&&!this._playing||this.texture instanceof o.aF||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.T(s,this.canvas,s.gl.RGBA8,{premultiply:!0}),this._prepareData(s)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const p of[this.canvas.width,this.canvas.height])if(isNaN(p)||p<=0)return!0;return!1}},custom:class extends o.E{constructor(p,s,u,m){super(),this.id=p,this.type="custom",this._dataType="raster",this._dispatcher=u,this._implementation=s,this.setEventedParent(m),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new o.t(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new o.t(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new zs(this._implementation.bounds,this.minzoom,this.maxzoom)),s.update=this._update.bind(this),s.clearTiles=this._clearTiles.bind(this),s.coveringTiles=this._coveringTiles.bind(this),o.l(this,o.ar(s,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return o.ar(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new o.x("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.x("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(p){this.map=p,this._loaded=!1,this.fire(new o.x("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(p),this.load()}onRemove(p){this._implementation.onRemove&&this._implementation.onRemove(p)}hasTile(p){if(this._implementation.hasTile){const{x:s,y:u,z:m}=p.canonical;return this._implementation.hasTile({x:s,y:u,z:m})}return!this.tileBounds||this.tileBounds.contains(p.canonical)}loadTile(p,s){const{x:u,y:m,z:_}=p.tileID.canonical,w=new AbortController;p.request=Promise.resolve(this._implementation.loadTile({x:u,y:m,z:_},{signal:w.signal})).then((function(C){return delete p.request,p.aborted?(p.state="unloaded",s(null)):C===void 0?(p.state="errored",s(null)):C===null?(this.loadTileData(p,{width:this.tileSize,height:this.tileSize,data:null}),p.state="loaded",s(null)):function(D){return D instanceof ImageData||D instanceof HTMLCanvasElement||D instanceof ImageBitmap||D instanceof HTMLImageElement}(C)?(this.loadTileData(p,C),p.state="loaded",void s(null)):(p.state="errored",s(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(C=>{C.code!==20&&(p.state="errored",s(C))}),p.request.cancel=()=>w.abort()}loadTileData(p,s){p.setTexture(s,this.map.painter)}unloadTile(p,s){if(p.texture&&p.texture instanceof o.T?(p.destroy(!0),p.texture&&p.texture instanceof o.T&&this.map.painter.saveTileTexture(p.texture)):p.destroy(),this._implementation.unloadTile){const{x:u,y:m,z:_}=p.tileID.canonical;this._implementation.unloadTile({x:u,y:m,z:_})}s&&s()}abortTile(p,s){p.request&&p.request.cancel&&(p.request.cancel(),delete p.request),s&&s()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(p=>({x:p.canonical.x,y:p.canonical.y,z:p.canonical.z}))}_clearTiles(){const p=o.av(this.id,this.scope);this.map.style.clearSource(p)}_update(){this.fire(new o.x("data",{dataType:"source",sourceDataType:"content"}))}}},Wc=function(p,s,u,m){const _=new XA[s.type](p,s,u,m);if(_.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${_.id}`);return o.aJ(["load","abort","unload","serialize","prepare"],_),_};function Gd(p,s){const u=o.a6.mat4.identity([]);return o.a6.mat4.scale(u,u,[.5*p.width,.5*-p.height,1]),o.a6.mat4.translate(u,u,[1,-1,0]),o.a6.mat4.multiply(u,u,p.calculateProjMatrix(s.toUnwrapped())),Float32Array.from(u)}function Kd(p,s,u,m,_,w,C,D=!1){const L=p.tilesIn(m,C,D);L.sort(qc);const z=[];for(const j of L)z.push({wrappedTileID:j.tile.tileID.wrapped().key,queryResults:j.tile.queryRenderedFeatures(s,u,p._state,j,_,w,Gd(p.transform,j.tile.tileID),D)});const N=function(j){const q={},Z={};for(const ne of j){const ie=ne.queryResults,oe=ne.wrappedTileID,ae=Z[oe]=Z[oe]||{};for(const ge in ie){const ye=ie[ge],pe=ae[ge]=ae[ge]||{},we=q[ge]=q[ge]||[];for(const be of ye)pe[be.featureIndex]||(pe[be.featureIndex]=!0,we.push(be))}}return q}(z);for(const j in N)N[j].forEach(q=>{const Z=q.feature,ne=Z.layer;ne&&ne.type!=="background"&&ne.type!=="sky"&&ne.type!=="slot"&&(Z.source=ne.source,ne["source-layer"]&&(Z.sourceLayer=ne["source-layer"]),Z.state=Z.id!==void 0?p.getFeatureState(ne["source-layer"],Z.id):{})});return N}function Vu(p,s){const u=p.getRenderableIds().map(w=>p.getTileByID(w)),m=[],_={};for(let w=0;w<u.length;w++){const C=u[w],D=C.tileID.canonical.key;_[D]||(_[D]=!0,C.querySourceFeatures(m,s))}return m}function qc(p,s){const u=p.tileID,m=s.tileID;return u.overscaledZ-m.overscaledZ||u.canonical.y-m.canonical.y||u.wrap-m.wrap||u.canonical.x-m.canonical.x}const Ia=32,Za=33,Ya=new Uint16Array(8184);for(let p=0;p<2046;p++){let s=p+2,u=0,m=0,_=0,w=0,C=0,D=0;for(1&s?_=w=C=Ia:u=m=D=Ia;(s>>=1)>1;){const z=u+_>>1,N=m+w>>1;1&s?(_=u,w=m,u=C,m=D):(u=_,m=w,_=C,w=D),C=z,D=N}const L=4*p;Ya[L+0]=u,Ya[L+1]=m,Ya[L+2]=_,Ya[L+3]=w}const vo=new Uint16Array(2178),Ma=new Uint8Array(1089),Hu=new Uint16Array(1089);function Wd(p){return p===0?-.03125:p===32?.03125:0}const ZA={type:2,extent:o.ab,loadGeometry:()=>[[new o.P(0,0),new o.P(o.ab+1,0),new o.P(o.ab+1,o.ab+1),new o.P(0,o.ab+1),new o.P(0,0)]]};class ms{constructor(s,u,m,_,w){this.tileID=s,this.uid=o.aP(),this.uses=0,this.tileSize=u,this.tileZoom=m,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=w,_&&_.style&&(this._lastUpdatedBrightness=_.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",_&&_.transform&&(this.projection=_.transform.projection)}registerFadeDuration(s){const u=s+this.timeAdded;u<o.q.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=o.aK(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(s,u,m){if(this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(_,w){const C={};if(!w)return C;for(const D of _){const L=D.layerIds.map(z=>w.getLayer(z)).filter(Boolean);if(L.length!==0){D.layers=L,D.stateDependentLayerIds&&(D.stateDependentLayers=D.stateDependentLayerIds.map(z=>L.filter(N=>N.id===z)[0]));for(const z of L)C[z.fqid]=D}}return C}(s.buckets,u.style),this.hasSymbolBuckets=!1;for(const _ in this.buckets){const w=this.buckets[_];if(w instanceof o.aR){if(this.hasSymbolBuckets=!0,!m)break;w.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const _ in this.buckets){const w=this.buckets[_];if(w instanceof o.aR&&w.hasRTLText){this.hasRTLText=!0,o.aS();break}}this.queryPadding=0;for(const _ in this.buckets){const w=this.buckets[_],C=u.style.getOwnLayer(_);if(!C)continue;const D=C.queryRadius(w);this.queryPadding=Math.max(this.queryPadding,D)}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage),s.lineAtlas&&(this.lineAtlas=s.lineAtlas),this._lastUpdatedBrightness=s.brightness}else this.collisionBoxArray=new o.aQ}unloadVectorData(){if(this.hasData()){for(const s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(s){return this.buckets[s.fqid]}upload(s){for(const _ in this.buckets){const w=this.buckets[_];w.uploadPending()&&w.upload(s)}const u=s.gl,m=this.imageAtlas;if(m&&!m.uploaded){const _=!!Object.keys(m.patternPositions).length;this.imageAtlasTexture=new o.T(s,m.image,u.RGBA8,{useMipmap:_}),this.imageAtlas.uploaded=!0}this.glyphAtlasImage&&(this.glyphAtlasTexture=new o.T(s,this.glyphAtlasImage,u.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new o.T(s,this.lineAtlas.image,u.R8),this.lineAtlas.uploaded=!0)}prepare(s,u,m){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture,m),!u||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const _=u.style.getBrightness();(this._lastUpdatedBrightness||_)&&(this._lastUpdatedBrightness&&_&&Math.abs(this._lastUpdatedBrightness-_)<.001||(this._lastUpdatedBrightness=_,this.updateBuckets(u)))}queryRenderedFeatures(s,u,m,_,w,C,D,L){return this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)?this.latestFeatureIndex.query({tileResult:_,pixelPosMatrix:D,transform:C,params:w,tileTransform:this.tileTransform},s,u,m):{}}querySourceFeatures(s,u){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const _=m.loadVTLayers(),w=u?u.sourceLayer:"",C=_._geojsonTileLayer||_[w];if(!C)return;const D=o.aT(u&&u.filter),{z:L,x:z,y:N}=this.tileID.canonical,j={z:L,x:z,y:N};for(let q=0;q<C.length;q++){const Z=C.feature(q);if(D.needGeometry){const oe=o.aU(Z,!0);if(!D.filter(new o.a3(this.tileID.overscaledZ),oe,this.tileID.canonical))continue}else if(!D.filter(new o.a3(this.tileID.overscaledZ),Z))continue;const ne=m.getId(Z,w),ie=new o.aV(Z,L,z,N,ne);ie.tile=j,s.push(ie)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){const u=this.expirationTime;if(s.cacheControl){const m=o.aW(s.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){const m=Date.now();let _=!1;if(this.expirationTime>m)_=!1;else if(u)if(this.expirationTime<u)_=!0;else{const w=this.expirationTime-u;w?this.expirationTime=m+Math.max(w,3e4):_=!0}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(s,u){this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(s).length!==0&&u&&this.updateBuckets(u)}updateBuckets(s){if(!this.latestFeatureIndex)return;const u=this.latestFeatureIndex.loadVTLayers(),m=s.style.listImages(),_=s.style.getBrightness();for(const w in this.buckets){if(!s.style.hasLayer(w))continue;const C=this.buckets[w],D=C.layers[0].sourceLayer||"_geojsonTileLayer",L=u[D],z=s.style.getOwnSourceCache(C.layers[0].source);let N={};z&&(N=z._state.getState(D,void 0)),C.update(N,L,m,this.imageAtlas&&this.imageAtlas.patternPositions||{},_),(C instanceof o.aX||C instanceof o.aY)&&s._terrain&&s._terrain.enabled&&z&&C.programConfigurations.needsUpload&&s._terrain._clearRenderCacheForTile(z.id,this.tileID);const j=s&&s.style&&s.style.getOwnLayer(w);j&&(this.queryPadding=Math.max(this.queryPadding,j.queryRadius(C)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<o.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=o.q.now()+s}setTexture(s,u){const m=u.context,_=m.gl;this.texture=this.texture||u.getTileTexture(s.width),this.texture&&this.texture instanceof o.T?this.texture.update(s):(this.texture=new o.T(m,s,_.RGBA8,{useMipmap:!0}),this.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE))}setDependencies(s,u){const m={};for(const _ of u)m[_]=!0;this.dependencies[s]=m}hasDependency(s,u){for(const m of s){const _=this.dependencies[m];if(_){for(const w of u)if(_[w])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(s,u){if(!u||u.name==="mercator"||this._tileDebugBuffer)return;const m=o.aZ(ZA,this.tileID.canonical,this.tileTransform)[0],_=new o.a_,w=new o.a$;for(let C=0;C<m.length;C++){const{x:D,y:L}=m[C];_.emplaceBack(D,L),w.emplaceBack(C)}w.emplaceBack(0),this._tileDebugIndexBuffer=s.createIndexBuffer(w),this._tileDebugBuffer=s.createVertexBuffer(_,o.b0.members),this._tileDebugSegments=o.b1.simpleSegment(0,0,_.length,w.length)}_makeTileBoundsBuffers(s,u){if(this._tileBoundsBuffer||!u||u.name==="mercator")return;const m=o.aZ(ZA,this.tileID.canonical,this.tileTransform)[0];let _,w;if(this.isRaster){const C=function(D,L){const z=o.aK(D,L),N=Math.pow(2,D.z);for(let oe=0;oe<Za;oe++)for(let ae=0;ae<Za;ae++){const ge=o.aL((D.x+(ae+Wd(ae))/Ia)/N),ye=o.aM((D.y+(oe+Wd(oe))/Ia)/N),pe=L.project(ge,ye),we=oe*Za+ae;vo[2*we+0]=Math.round((pe.x*z.scale-z.x)*o.ab),vo[2*we+1]=Math.round((pe.y*z.scale-z.y)*o.ab)}Ma.fill(0),Hu.fill(0);for(let oe=2045;oe>=0;oe--){const ae=4*oe,ge=Ya[ae+0],ye=Ya[ae+1],pe=Ya[ae+2],we=Ya[ae+3],be=ge+pe>>1,Fe=ye+we>>1,Ee=be+Fe-ye,Me=Fe+ge-be,Qe=ye*Za+ge,Re=we*Za+pe,Pe=Fe*Za+be,Xe=Math.hypot((vo[2*Qe+0]+vo[2*Re+0])/2-vo[2*Pe+0],(vo[2*Qe+1]+vo[2*Re+1])/2-vo[2*Pe+1])>=16;Ma[Pe]=Ma[Pe]||(Xe?1:0),oe<1022&&(Ma[Pe]=Ma[Pe]||Ma[(ye+Me>>1)*Za+(ge+Ee>>1)]||Ma[(we+Me>>1)*Za+(pe+Ee>>1)])}const j=new o.aN,q=new o.aO;let Z=0;function ne(oe,ae){const ge=ae*Za+oe;return Hu[ge]===0&&(j.emplaceBack(vo[2*ge+0],vo[2*ge+1],oe*o.ab/Ia,ae*o.ab/Ia),Hu[ge]=++Z),Hu[ge]-1}function ie(oe,ae,ge,ye,pe,we){const be=oe+ge>>1,Fe=ae+ye>>1;if(Math.abs(oe-pe)+Math.abs(ae-we)>1&&Ma[Fe*Za+be])ie(pe,we,oe,ae,be,Fe),ie(ge,ye,pe,we,be,Fe);else{const Ee=ne(oe,ae),Me=ne(ge,ye),Qe=ne(pe,we);q.emplaceBack(Ee,Me,Qe)}}return ie(0,0,Ia,Ia,Ia,0),ie(Ia,Ia,0,0,0,Ia),{vertices:j,indices:q}}(this.tileID.canonical,u);_=C.vertices,w=C.indices}else{_=new o.aN,w=new o.aO;for(const{x:D,y:L}of m)_.emplaceBack(D,L,0,0);const C=o.b2(_.int16,void 0,4);for(let D=0;D<C.length;D+=3)w.emplaceBack(C[D],C[D+1],C[D+2])}this._tileBoundsBuffer=s.createVertexBuffer(_,o.b3.members),this._tileBoundsIndexBuffer=s.createIndexBuffer(w),this._tileBoundsSegments=o.b1.simpleSegment(0,0,_.length,w.length)}_makeGlobeTileDebugBuffers(s,u){const m=u.projection;if(!m||m.name!=="globe"||u.freezeTileCoverage)return;const _=this.tileID.canonical,w=o.b4(_,u),C=o.b5(w),D=o.a9(u.zoom);let L;D>0&&(L=o.a6.mat4.invert(new Float64Array(16),u.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(s,_,u,C,L,D),this._makeGlobeTileDebugTextBuffer(s,_,u,C,L,D)}_globePoint(s,u,m,_,w,C,D){let L=o.b6(s,u,m);if(C){const z=1<<m.z,N=o.am(_.center.lng),j=o.at(_.center.lat),q=(m.x+.5)/z-N;let Z=0;q>.5?Z=-1:q<-.5&&(Z=1);let ne=(s/o.ab+m.x)/z+Z,ie=(u/o.ab+m.y)/z;ne=(ne-N)*_._pixelsPerMercatorPixel+N,ie=(ie-j)*_._pixelsPerMercatorPixel+j;const oe=[ne*_.worldSize,ie*_.worldSize,0];o.a6.vec3.transformMat4(oe,oe,C),L=o.b7(L,oe,D)}return o.a6.vec3.transformMat4(L,L,w)}_makeGlobeTileDebugBorderBuffer(s,u,m,_,w,C){const D=new o.a_,L=new o.a$,z=new o.b8,N=(q,Z,ne,ie,oe)=>{const ae=(ne-q)/(oe-1),ge=(ie-Z)/(oe-1),ye=D.length;for(let pe=0;pe<oe;pe++){const we=q+pe*ae,be=Z+pe*ge;D.emplaceBack(we,be);const Fe=this._globePoint(we,be,u,m,_,w,C);z.emplaceBack(Fe[0],Fe[1],Fe[2]),L.emplaceBack(ye+pe)}},j=o.ab;N(0,0,j,0,16),N(j,0,j,j,16),N(j,j,0,j,16),N(0,j,0,0,16),this._tileDebugIndexBuffer=s.createIndexBuffer(L),this._tileDebugBuffer=s.createVertexBuffer(D,o.b0.members),this._globeTileDebugBorderBuffer=s.createVertexBuffer(z,o.b9.members),this._tileDebugSegments=o.b1.simpleSegment(0,0,D.length,L.length)}_makeGlobeTileDebugTextBuffer(s,u,m,_,w,C){const D=o.ab/4,L=new o.a_,z=new o.aO,N=new o.b8,j=25;z.reserve(32),L.reserve(j),N.reserve(j);const q=(Z,ne)=>j*Z+ne;for(let Z=0;Z<j;Z++){const ne=Z*D;for(let ie=0;ie<j;ie++){const oe=ie*D;L.emplaceBack(oe,ne);const ae=this._globePoint(oe,ne,u,m,_,w,C);N.emplaceBack(ae[0],ae[1],ae[2])}}for(let Z=0;Z<4;Z++)for(let ne=0;ne<4;ne++){const ie=q(Z,ne),oe=q(Z,ne+1),ae=q(Z+1,ne),ge=q(Z+1,ne+1);z.emplaceBack(ie,oe,ae),z.emplaceBack(ae,oe,ge)}this._tileDebugTextIndexBuffer=s.createIndexBuffer(z),this._tileDebugTextBuffer=s.createVertexBuffer(L,o.b0.members),this._globeTileDebugTextBuffer=s.createVertexBuffer(N,o.b9.members),this._tileDebugTextSegments=o.b1.simpleSegment(0,0,j,32)}destroy(s=!1){for(const u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!s&&this.texture&&this.texture instanceof o.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}o.ba.setPbf(o.bb);class YA extends ms{constructor(s,u,m,_,w){super(s,u,m,_,w),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}setTexture(s,u){const m=u.context,_=m.gl;this.texture=this.texture||u.getTileTexture(s.width),this.texture&&this.texture instanceof o.T?this.texture.update(s,{premultiply:!1}):this.texture=new o.T(m,s,_.RGBA8,{premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(s=16384,u){const m=this._mrt=new o.ba(30),_=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(s-1)}});return this.entireBuffer=null,this.request=o.bc(_,(w,C,D,L)=>{if(w)u(w);else try{const z=m.getHeaderLength(C);if(z>s)return void(this.request=this.fetchHeader(z,u));m.parseHeader(C),this._isHeaderLoaded=!0;let N=0;for(const j of Object.values(m.layers))N=Math.max(N,j.dataIndex[j.dataIndex.length-1].last_byte);C.byteLength>=N&&(this.entireBuffer=C),u(null,this.entireBuffer||C,D,L)}catch(z){u(z)}}),this.request}fetchBand(s,u,m){const _=this._mrt;if(!this._isHeaderLoaded||!_)return void m(new Error("Tile header is not ready"));const w=this.actor;if(!w)return void m(new Error("Can't fetch tile band without an actor"));let C;const D=(j,q)=>{C.complete(j,q),j?m(j):(this.updateTextureDescriptor(s,u),m(null,this.textureDescriptor&&this.textureDescriptor.img))},L=(j,q)=>{if(j)return m(j);const Z=w.send("decodeRasterArray",{buffer:q,task:C},D,void 0,!0);this._workQueue.push(()=>{Z&&Z.cancel(),C.cancel()})},z=_.getLayer(s);if(!z)return void m(new Error(`Unknown sourceLayer "${s}"`));if(z.hasDataForBand(u))return this.updateTextureDescriptor(s,u),void m(null,this.textureDescriptor?this.textureDescriptor.img:null);const N=z.getDataRange([u]);if(C=_.createDecodingTask(N),!C||C.tasks.length)if(this.flushQueues(),this.entireBuffer)L(null,this.entireBuffer.slice(N.firstByte,N.lastByte+1));else{const j=Object.assign({},this.requestParams,{headers:{Range:`bytes=${N.firstByte}-${N.lastByte}`}}),q=o.bc(j,L);this._fetchQueue.push(()=>{q.cancel(),C.cancel()})}else m(null)}updateNeeded(s,u){return(!this.textureDescriptor||this.textureDescriptor.band!==u||this.textureDescriptor.layer!==s)&&this.state!=="errored"}updateTextureDescriptor(s,u){if(!this._mrt)return;const m=this._mrt.getLayer(s);if(!m||!m.hasBand(u)||!m.hasDataForBand(u))return;const{bytes:_,tileSize:w,buffer:C,offset:D,scale:L}=m.getBandView(u),z=w+2*C,N={data:_,width:z,height:z},j=this.texture;j&&j instanceof o.T&&j.update(N,{premultiply:!1}),this.textureDescriptor={layer:s,band:u,img:N,buffer:C,offset:D,tileSize:w,format:m.pixelFormat,mix:[L,256*L,65536*L,16777216*L]}}}class Dp{constructor(s,u){this.max=s,this.onRemove=u,this.reset()}reset(){for(const s in this.data)for(const u of this.data[s])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(s,u,m){const _=s.wrapped().key;this.data[_]===void 0&&(this.data[_]=[]);const w={value:u,timeout:void 0};if(m!==void 0&&(w.timeout=setTimeout(()=>{this.remove(s,w)},m)),this.data[_].push(w),this.order.push(_),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const u=this.data[s].shift();return u.timeout&&clearTimeout(u.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),u.value}getByKey(s){const u=this.data[s];return u?u[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,u){if(!this.has(s))return this;const m=s.wrapped().key,_=u===void 0?0:this.data[m].indexOf(u),w=this.data[m][_];return this.data[m].splice(_,1),w.timeout&&clearTimeout(w.timeout),this.data[m].length===0&&delete this.data[m],this.onRemove(w.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(s){const u=[];for(const m in this.data)for(const _ of this.data[m])s(_.value)||u.push(_);for(const m of u)this.remove(m.value.tileID,m)}}class kp{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,u,m){const _=String(u);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][_]=this.stateChanges[s][_]||{},o.l(this.stateChanges[s][_],m),this.deletedStates[s]===null){this.deletedStates[s]={};for(const w in this.state[s])w!==_&&(this.deletedStates[s][w]=null)}else if(this.deletedStates[s]&&this.deletedStates[s][_]===null){this.deletedStates[s][_]={};for(const w in this.state[s][_])m[w]||(this.deletedStates[s][_][w]=null)}else for(const w in m)this.deletedStates[s]&&this.deletedStates[s][_]&&this.deletedStates[s][_][w]===null&&delete this.deletedStates[s][_][w]}removeFeatureState(s,u,m){if(this.deletedStates[s]===null)return;const _=String(u);if(this.deletedStates[s]=this.deletedStates[s]||{},m&&u!==void 0)this.deletedStates[s][_]!==null&&(this.deletedStates[s][_]=this.deletedStates[s][_]||{},this.deletedStates[s][_][m]=null);else if(u!==void 0)if(this.stateChanges[s]&&this.stateChanges[s][_])for(m in this.deletedStates[s][_]={},this.stateChanges[s][_])this.deletedStates[s][_][m]=null;else this.deletedStates[s][_]=null;else this.deletedStates[s]=null}getState(s,u){const m=this.state[s]||{},_=this.stateChanges[s]||{},w=this.deletedStates[s];if(w===null)return{};if(u!==void 0){const D=String(u),L=o.l({},m[D],_[D]);if(w){const z=w[u];if(z===null)return{};for(const N in z)delete L[N]}return L}const C=o.l({},m,_);if(w)for(const D in w)delete C[D];return C}initializeTileState(s,u){s.setFeatureState(this.state,u)}coalesceChanges(s,u){const m={};for(const _ in this.stateChanges){this.state[_]=this.state[_]||{};const w={};for(const C in this.stateChanges[_])this.state[_][C]||(this.state[_][C]={}),o.l(this.state[_][C],this.stateChanges[_][C]),w[C]=this.state[_][C];m[_]=w}for(const _ in this.deletedStates){this.state[_]=this.state[_]||{};const w={};if(this.deletedStates[_]===null)for(const C in this.state[_])w[C]={},this.state[_][C]={};else for(const C in this.deletedStates[_]){if(this.deletedStates[_][C]===null)this.state[_][C]={};else if(this.state[_][C])for(const D of Object.keys(this.deletedStates[_][C]))delete this.state[_][C][D];w[C]=this.state[_][C]}m[_]=m[_]||{},o.l(m[_],w)}if(this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0)for(const _ in s)s[_].setFeatureState(m,u)}}class qo extends o.E{constructor(s,u,m){super(),this.id=s,this._onlySymbols=m,u.on("data",_=>{_.dataType==="source"&&_.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&_.dataType==="source"&&_.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),u.on("error",()=>{this._sourceErrored=!0}),this._source=u,this._tiles={},this._cache=new Dp(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=u.minTileCacheSize,this._maxTileCacheSize=u.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new kp,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(s){this.map=s,this._minTileCacheSize=this._minTileCacheSize===void 0&&s?s._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&s?s._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const s in this._tiles){const u=this._tiles[s];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(s,u){return s.isSymbolTile=this._onlySymbols,s.isExtraShadowCaster=this._shadowCasterTiles[s.tileID.key],this._source.loadTile(s,u)}_unloadTile(s){if(this._source.unloadTile)return this._source.unloadTile(s)}_abortTile(s){if(this._source.abortTile)return this._source.abortTile(s)}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const m=this._tiles[u];m.upload(s),m.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return o.bd(this._tiles).map(s=>s.tileID).sort(ml).map(s=>s.key)}getRenderableIds(s,u){const m=[];for(const _ in this._tiles)this._isIdRenderable(+_,s,u)&&m.push(this._tiles[_]);return s?m.sort((_,w)=>{const C=_.tileID,D=w.tileID,L=new o.P(C.canonical.x,C.canonical.y)._rotate(this.transform.angle),z=new o.P(D.canonical.x,D.canonical.y)._rotate(this.transform.angle);return C.overscaledZ-D.overscaledZ||z.y-L.y||z.x-L.x}).map(_=>_.tileID.key):m.map(_=>_.tileID).sort(ml).map(_=>_.key)}hasRenderableParent(s){const u=this.findLoadedParent(s,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(s,u,m){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(u||!this._tiles[s].holdingForFade())&&(m||!this._shadowCasterTiles[s])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const s in this._tiles)this._tiles[s].state!=="errored"&&this._reloadTile(+s,"reloading")}}_reloadTile(s,u){const m=this._tiles[s];m&&(m.state!=="loading"&&(m.state=u),this._loadTile(m,this._tileLoaded.bind(this,m,s,u)))}_tileLoaded(s,u,m,_){if(_)if(s.state="errored",_.status!==404)this._source.fire(new o.t(_,{tile:s}));else{if(this._source.fire(new o.x("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:s})),!(s.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const w=this.map.painter.terrain;this.update(this.transform,w.getScaledDemTileSize(),!0),w.resetTileLookupCache(this.id)}else this.update(this.transform)}else s.timeAdded=o.q.now(),m==="expired"&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(u,s),this._source.type==="raster-dem"&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),this._source.fire(new o.x("data",{dataType:"source",tile:s,coord:s.tileID,sourceCacheId:this.id}))}_backfillDEM(s){const u=this.getRenderableIds();for(let _=0;_<u.length;_++){const w=u[_];if(s.neighboringTiles&&s.neighboringTiles[w]){const C=this.getTileByID(w);m(s,C),m(C,s)}}function m(_,w){if(!_.dem||_.dem.borderReady)return;_.needsHillshadePrepare=!0,_.needsDEMTextureUpload=!0;let C=w.tileID.canonical.x-_.tileID.canonical.x;const D=w.tileID.canonical.y-_.tileID.canonical.y,L=Math.pow(2,_.tileID.canonical.z),z=w.tileID.key;C===0&&D===0||Math.abs(D)>1||(Math.abs(C)>1&&(Math.abs(C+L)===1?C+=L:Math.abs(C-L)===1&&(C-=L)),w.dem&&_.dem&&(_.dem.backfillBorder(w.dem,C,D),_.neighboringTiles&&_.neighboringTiles[z]&&(_.neighboringTiles[z].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,u,m,_){for(const w in this._tiles){let C=this._tiles[w];if(_[w]||!C.hasData()||C.tileID.overscaledZ<=u||C.tileID.overscaledZ>m)continue;let D=C.tileID;for(;C&&C.tileID.overscaledZ>u+1;){const z=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[z.key],C&&C.hasData()&&(D=z)}let L=D;for(;L.overscaledZ>u;)if(L=L.scaledTo(L.overscaledZ-1),s[L.key]){_[D.key]=D;break}}}findLoadedParent(s,u){if(s.key in this._loadedParentTiles){const m=this._loadedParentTiles[s.key];return m&&m.tileID.overscaledZ>=u?m:null}for(let m=s.overscaledZ-1;m>=u;m--){const _=s.scaledTo(m),w=this._getLoadedTile(_);if(w)return w}}_getLoadedTile(s){const u=this._tiles[s.key];return u&&u.hasData()?u:this._cache.getByKey(this._source.reparseOverscaled?s.wrapped().key:s.canonical.key)}updateCacheSize(s,u){u=u||this._source.tileSize;const m=Math.ceil(s.width/u)+1,_=Math.ceil(s.height/u)+1,w=Math.floor(m*_*5),C=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,w):w,D=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,C):C;this._cache.setMaxSize(D)}handleWrapJump(s){const u=Math.round((s-(this._prevLng===void 0?s:this._prevLng))/360);if(this._prevLng=s,u){const m={};for(const _ in this._tiles){const w=this._tiles[_];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+u),m[w.tileID.key]=w}this._tiles=m;for(const _ in this._timers)clearTimeout(this._timers[_]),delete this._timers[_];for(const _ in this._tiles)this._setTileReloadTimer(+_,this._tiles[_])}}update(s,u,m,_){if(this.transform=s,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!m)return;this.updateCacheSize(s,u),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const w=this._source.type==="batched-model";let C;if(this.used||this.usedForTerrain){if(this._source.tileID)C=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(z=>new o.aA(z.canonical.z,z.wrap,z.canonical.z,z.canonical.x,z.canonical.y));else if(this.tileCoverLift!==0){const z=s.clone();z.tileCoverLift=this.tileCoverLift,C=z.coveringTiles({tileSize:u||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!m,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:w}),this._source.minzoom<=1&&s.projection.name==="globe"&&(C.push(new o.aA(1,0,1,0,0)),C.push(new o.aA(1,0,1,1,0)),C.push(new o.aA(1,0,1,0,1)),C.push(new o.aA(1,0,1,1,1)))}else if(C=s.coveringTiles({tileSize:u||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!m,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:w}),this._source.hasTile){const z=this._source.hasTile.bind(this._source);C=C.filter(N=>z(N))}}else C=[];if(C.length>0&&this.castsShadows&&_&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!ju(this._source.type)){const z=s.coveringZoomLevel({tileSize:u||this._source.tileSize,roundZoom:this._source.roundZoom&&!m}),N=Math.min(z,this._source.maxzoom);if(w){const j=s.extendTileCover(C,N);for(const q of j)C.push(q)}else{const j=s.extendTileCover(C,N,_);for(const q of j)this._shadowCasterTiles[q.key]=!0,C.push(q)}}const D=this._updateRetainedTiles(C);if(ju(this._source.type)&&C.length!==0){const z={},N={},j=Object.keys(D);for(const Z of j){const ne=D[Z],ie=this._tiles[Z];if(!ie||ie.fadeEndTime&&ie.fadeEndTime<=o.q.now())continue;const oe=this.findLoadedParent(ne,Math.max(ne.overscaledZ-qo.maxOverzooming,this._source.minzoom));oe&&(this._addTile(oe.tileID),z[oe.tileID.key]=oe.tileID),N[Z]=ne}const q=C[C.length-1].overscaledZ;for(const Z in this._tiles){const ne=this._tiles[Z];if(D[Z]||!ne.hasData())continue;let ie=ne.tileID;for(;ie.overscaledZ>q;){ie=ie.scaledTo(ie.overscaledZ-1);const oe=this._tiles[ie.key];if(oe&&oe.hasData()&&N[ie.key]){D[Z]=ne.tileID;break}}}for(const Z in z)D[Z]||(this._coveredTiles[Z]=!0,D[Z]=z[Z])}for(const z in D)this._tiles[z].clearFadeHold();const L=o.be(this._tiles,D);for(const z of L){const N=this._tiles[z];N.hasSymbolBuckets&&!N.holdingForFade()?N.setHoldDuration(this.map._fadeDuration):N.hasSymbolBuckets&&!N.symbolFadeFinished()||this._removeTile(+z)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(+s)}_updateRetainedTiles(s){const u={};if(s.length===0)return u;const m={},_=s.reduce((z,N)=>Math.min(z,N.overscaledZ),1/0),w=s[0].overscaledZ,C=Math.max(w-qo.maxOverzooming,this._source.minzoom),D=Math.max(w+qo.maxUnderzooming,this._source.minzoom),L={};for(const z of s){const N=this._addTile(z);u[z.key]=z,N.hasData()||_<this._source.maxzoom&&(L[z.key]=z)}this._retainLoadedChildren(L,_,D,u);for(const z of s){let N=this._tiles[z.key];if(N.hasData())continue;if(z.canonical.z>=this._source.maxzoom){const q=z.children(this._source.maxzoom)[0],Z=this.getTile(q);if(Z&&Z.hasData()){u[q.key]=q;continue}}else{const q=z.children(this._source.maxzoom);if(u[q[0].key]&&u[q[1].key]&&u[q[2].key]&&u[q[3].key])continue}let j=N.wasRequested();for(let q=z.overscaledZ-1;q>=C;--q){const Z=z.scaledTo(q);if(m[Z.key]||(m[Z.key]=!0,N=this.getTile(Z),!N&&j&&(N=this._addTile(Z)),N&&(u[Z.key]=Z,j=N.wasRequested(),N.hasData())))break}}return u}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const s in this._tiles){const u=[];let m,_=this._tiles[s].tileID;for(;_.overscaledZ>0;){if(_.key in this._loadedParentTiles){m=this._loadedParentTiles[_.key];break}u.push(_.key);const w=_.scaledTo(_.overscaledZ-1);if(m=this._getLoadedTile(w),m)break;_=w}for(const w of u)this._loadedParentTiles[w]=m}}_addTile(s){let u=this._tiles[s.key];if(u)return u.isExtraShadowCaster!==!0||this._shadowCasterTiles[s.key]||this._reloadTile(s.key,"reloading"),u;u=this._cache.getAndRemove(s),u&&(this._setTileReloadTimer(s.key,u),u.tileID=s,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,u)));const m=!!u;if(!m){const _=this.map?this.map.painter:null,w=this._source.tileSize*s.overscaleFactor();u=this._source.type==="raster-array"?new YA(s,w,this.transform.tileZoom,_,this._isRaster):new ms(s,w,this.transform.tileZoom,_,this._isRaster),this._loadTile(u,this._tileLoaded.bind(this,u,s.key,u.state))}return u?(u.uses++,this._tiles[s.key]=u,m||this._source.fire(new o.x("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u):null}_setTileReloadTimer(s,u){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);const m=u.getExpiryTimeout();m&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},m))}_removeTile(s){const u=this._tiles[s];u&&(u.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),u.uses>0||(u.hasData()&&u.state!=="reloading"||u.state==="empty"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const s in this._tiles)this._removeTile(+s);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(s,u,m){const _=[],w=this.transform;if(!w)return _;const C=w.projection.name==="globe",D=o.am(w.center.lng);for(const L in this._tiles){const z=this._tiles[L];if(m&&z.clearQueryDebugViz(),z.holdingForFade())continue;let N;if(C){const j=z.tileID.canonical;if(j.z===0){const q=[Math.abs(o.ap(D,...gl(j,-1))-D),Math.abs(o.ap(D,...gl(j,1))-D)];N=[0,2*q.indexOf(Math.min(...q))-1]}else{const q=[Math.abs(o.ap(D,...gl(j,-1))-D),Math.abs(o.ap(D,...gl(j,0))-D),Math.abs(o.ap(D,...gl(j,1))-D)];N=[q.indexOf(Math.min(...q))-1]}}else N=[0];for(const j of N){const q=s.containsTile(z,w,u,j);q&&_.push(q)}}return _}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(s){return this._getRenderableCoordinates(s)}_getRenderableCoordinates(s,u){const m=this.getRenderableIds(s,u).map(w=>this._tiles[w].tileID),_=this.transform.projection.name==="globe";for(const w of m)w.projMatrix=this.transform.calculateProjMatrix(w.toUnwrapped()),w.expandedProjMatrix=_?this.transform.calculateProjMatrix(w.toUnwrapped(),!1,!0):w.projMatrix;return m}sortCoordinatesByDistance(s){const u=s.slice(),m=this.transform._camera.position,_=this.transform._camera.forward(),w={};for(const C of u){const D=1/(1<<C.canonical.z);w[C.key]=((C.canonical.x+.5)*D+C.wrap-m[0])*_[0]+((C.canonical.y+.5)*D-m[1])*_[1]-m[2]*_[2]}return u.sort((C,D)=>w[C.key]-w[D.key]),u}hasTransition(){if(this._source.hasTransition())return!0;if(ju(this._source.type))for(const s in this._tiles){const u=this._tiles[s];if(u.fadeEndTime!==void 0&&u.fadeEndTime>=o.q.now())return!0}return!1}setFeatureState(s,u,m){this._state.updateState(s=s||"_geojsonTileLayer",u,m)}removeFeatureState(s,u,m){this._state.removeFeatureState(s=s||"_geojsonTileLayer",u,m)}getFeatureState(s,u){return this._state.getState(s=s||"_geojsonTileLayer",u)}setDependencies(s,u,m){const _=this._tiles[s];_&&_.setDependencies(u,m)}reloadTilesForDependencies(s,u){for(const m in this._tiles)this._tiles[m].hasDependency(s,u)&&this._reloadTile(+m,"reloading");this._cache.filter(m=>!m.hasDependency(s,u))}_preloadTiles(s,u){if(!this._sourceLoaded){const L=()=>{this._sourceLoaded&&(this._source.off("data",L),this._preloadTiles(s,u))};return void this._source.on("data",L)}const m=new Map,_=Array.isArray(s)?s:[s],w=this.map.painter.terrain,C=this.usedForTerrain&&w?w.getScaledDemTileSize():this._source.tileSize;for(const L of _){const z=L.coveringTiles({tileSize:C,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const N of z)m.set(N.key,N);this.usedForTerrain&&L.updateElevation(!1)}const D=Array.from(m.values());o.bf(D,(L,z)=>{const N=new ms(L,this._source.tileSize*L.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(N,j=>{this._source.type==="raster-dem"&&N.dem&&this._backfillDEM(N),z(j,N)})},u)}}function ml(p,s){const u=Math.abs(2*p.wrap)-+(p.wrap<0),m=Math.abs(2*s.wrap)-+(s.wrap<0);return p.overscaledZ-s.overscaledZ||m-u||s.canonical.y-p.canonical.y||s.canonical.x-p.canonical.x}function ju(p){return p==="raster"||p==="image"||p==="video"||p==="custom"}function gl(p,s){const u=1<<p.z;return[p.x/u+s,(p.x+1)/u+s]}qo.maxOverzooming=10,qo.maxUnderzooming=3;class qd{constructor(s){this.style=s,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const s=!1,u=!1;for(const m in this.style._mergedLayers){const _=this.style._mergedLayers[m];if(_.type==="fill-extrusion")this.layers.push({layer:_,visible:s,visibilityChanged:u});else if(_.type==="model"){const w=this.style.getLayerSource(_);w&&w.type==="batched-model"&&this.layers.push({layer:_,visible:s,visibilityChanged:u})}}}onNewFrame(s){this.layersGotHidden=!1;for(const u of this.layers){const m=u.layer;let _=!1;m.type==="fill-extrusion"?_=!m.isHidden(s)&&m.paint.get("fill-extrusion-opacity")>0:m.type==="model"&&(_=!m.isHidden(s)&&m.paint.get("model-opacity")>0),this.layersGotHidden=this.layersGotHidden||!_&&u.visible,u.visible=_}}updateZOffset(s,u){this.currentBuildingBuckets=[];for(const _ of this.layers){const w=_.layer,C=this.style.getLayerSourceCache(w);let D=1;w.type==="fill-extrusion"&&(D=_.visible?w.paint.get("fill-extrusion-vertical-scale"):0);let L=C?C.getTile(u):null;if(!L&&C&&u.canonical.z>C.getSource().minzoom){let z=u.scaledTo(Math.min(C.getSource().maxzoom,u.overscaledZ-1));for(;z.overscaledZ>=C.getSource().minzoom&&(L=C.getTile(z),!L&&z.overscaledZ!==0);)z=z.scaledTo(z.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:L?L.getBucket(w):null,tileID:L?L.tileID:u,verticalScale:D})}s.hasAnyZOffset=!1;let m=!1;for(let _=0;_<s.symbolInstances.length;_++){const w=s.symbolInstances.get(_),C=w.zOffset,D=this._getHeightAtTileOffset(u,w.tileAnchorX,w.tileAnchorY);w.zOffset=D!==Number.NEGATIVE_INFINITY?D:C,m||C===w.zOffset||(m=!0),s.hasAnyZOffset||w.zOffset===0||(s.hasAnyZOffset=!0)}m&&(s.zOffsetBuffersNeedUpload=!0,s.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(s,u,m,_){let w=u,C=m;if(s.canonical.z!==_.canonical.z){const D=_.canonical,L=1/(1<<s.canonical.z-D.z);w=(u+s.canonical.x*o.ab)*L-D.x*o.ab|0,C=(m+s.canonical.y*o.ab)*L-D.y*o.ab|0}return{tileX:w,tileY:C}}_getHeightAtTileOffset(s,u,m){let _,w;for(let C=0;C<this.layers.length;++C){if(this.layers[C].layer.type!=="fill-extrusion")continue;const{bucket:D,tileID:L,verticalScale:z}=this.currentBuildingBuckets[C];if(!D)continue;const{tileX:N,tileY:j}=this._mapCoordToOverlappingTile(s,u,m,L),q=D.getHeightAtTileCoord(N,j);q&&q.height!==void 0&&(q.hidden?_=q.height:w=Math.max(q.height*z,w||0))}if(w!==void 0)return w;for(let C=0;C<this.layers.length;++C){const D=this.layers[C];if(D.layer.type!=="model"||!D.visible)continue;const{bucket:L,tileID:z}=this.currentBuildingBuckets[C];if(!L)continue;const{tileX:N,tileY:j}=this._mapCoordToOverlappingTile(s,u,m,z),q=L.getHeightAtTileCoord(N,j);if(q&&!q.hidden)return q.height===void 0&&_!==void 0?Math.min(q.maxHeight,_)*q.verticalScale:q.height?q.height*q.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function Xc(p,s){const u={};for(const m in p)m!=="ref"&&(u[m]=p[m]);return o.bg.forEach(m=>{m in s&&(u[m]=s[m])}),u}function Xd(p){p=p.slice();const s=Object.create(null);for(let u=0;u<p.length;u++)s[p[u].id]=p[u];for(let u=0;u<p.length;u++)"ref"in p[u]&&(p[u]=Xc(p[u],s[p[u].ref]));return p}const Kr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function Gu(p,s,u){u.push({command:Kr.addSource,args:[p,s[p]]})}function An(p,s,u){s.push({command:Kr.removeSource,args:[p]}),u[p]=!0}function Zd(p,s,u,m){An(p,u,m),Gu(p,s,u)}function cr(p,s,u){let m;for(m in p[u])if(p[u].hasOwnProperty(m)&&m!=="data"&&!o.bh(p[u][m],s[u][m]))return!1;for(m in s[u])if(s[u].hasOwnProperty(m)&&m!=="data"&&!o.bh(p[u][m],s[u][m]))return!1;return!0}function Zc(p,s,u,m,_,w){let C;for(C in s=s||{},p=p||{})p.hasOwnProperty(C)&&(o.bh(p[C],s[C])||u.push({command:w,args:[m,C,s[C],_]}));for(C in s)s.hasOwnProperty(C)&&!p.hasOwnProperty(C)&&(o.bh(p[C],s[C])||u.push({command:w,args:[m,C,s[C],_]}))}function Qs(p){return p.id}function ac(p,s){return p[s.id]=s,p}class Eo{constructor(s,u){this.reset(s,u)}reset(s,u){this.points=s||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=o.ap(s,0,1);let u=1,m=this._distances[u];const _=s*this.paddedLength+this.padding;for(;m<_&&u<this._distances.length;)m=this._distances[++u];const w=u-1,C=this._distances[w],D=m-C,L=D>0?(_-C)/D:0;return this.points[w].mult(1-L).add(this.points[u].mult(L))}}class vl{constructor(s,u,m){const _=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(s/m),this.yCellCount=Math.ceil(u/m);for(let C=0;C<this.xCellCount*this.yCellCount;C++)_.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=u,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,u,m,_,w){this._forEachCell(u,m,_,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(u),this.bboxes.push(m),this.bboxes.push(_),this.bboxes.push(w)}insertCircle(s,u,m,_){this._forEachCell(u-_,m-_,u+_,m+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(u),this.circles.push(m),this.circles.push(_)}_insertBoxCell(s,u,m,_,w,C){this.boxCells[w].push(C)}_insertCircleCell(s,u,m,_,w,C){this.circleCells[w].push(C)}_query(s,u,m,_,w,C){if(m<0||s>this.width||_<0||u>this.height)return!w&&[];const D=[];if(s<=0&&u<=0&&this.width<=m&&this.height<=_){if(w)return!0;for(let L=0;L<this.boxKeys.length;L++)D.push({key:this.boxKeys[L],x1:this.bboxes[4*L],y1:this.bboxes[4*L+1],x2:this.bboxes[4*L+2],y2:this.bboxes[4*L+3]});for(let L=0;L<this.circleKeys.length;L++){const z=this.circles[3*L],N=this.circles[3*L+1],j=this.circles[3*L+2];D.push({key:this.circleKeys[L],x1:z-j,y1:N-j,x2:z+j,y2:N+j})}return C?D.filter(C):D}return this._forEachCell(s,u,m,_,this._queryCell,D,{hitTest:w,seenUids:{box:{},circle:{}}},C),w?D.length>0:D}_queryCircle(s,u,m,_,w){const C=s-m,D=s+m,L=u-m,z=u+m;if(D<0||C>this.width||z<0||L>this.height)return!_&&[];const N=[];return this._forEachCell(C,L,D,z,this._queryCellCircle,N,{hitTest:_,circle:{x:s,y:u,radius:m},seenUids:{box:{},circle:{}}},w),_?N.length>0:N}query(s,u,m,_,w){return this._query(s,u,m,_,!1,w)}hitTest(s,u,m,_,w){return this._query(s,u,m,_,!0,w)}hitTestCircle(s,u,m,_){return this._queryCircle(s,u,m,!0,_)}_queryCell(s,u,m,_,w,C,D,L){const z=D.seenUids,N=this.boxCells[w];if(N!==null){const q=this.bboxes;for(const Z of N)if(!z.box[Z]){z.box[Z]=!0;const ne=4*Z;if(s<=q[ne+2]&&u<=q[ne+3]&&m>=q[ne+0]&&_>=q[ne+1]&&(!L||L(this.boxKeys[Z]))){if(D.hitTest)return C.push(!0),!0;C.push({key:this.boxKeys[Z],x1:q[ne],y1:q[ne+1],x2:q[ne+2],y2:q[ne+3]})}}}const j=this.circleCells[w];if(j!==null){const q=this.circles;for(const Z of j)if(!z.circle[Z]){z.circle[Z]=!0;const ne=3*Z;if(this._circleAndRectCollide(q[ne],q[ne+1],q[ne+2],s,u,m,_)&&(!L||L(this.circleKeys[Z]))){if(D.hitTest)return C.push(!0),!0;{const ie=q[ne],oe=q[ne+1],ae=q[ne+2];C.push({key:this.circleKeys[Z],x1:ie-ae,y1:oe-ae,x2:ie+ae,y2:oe+ae})}}}}}_queryCellCircle(s,u,m,_,w,C,D,L){const z=D.circle,N=D.seenUids,j=this.boxCells[w];if(j!==null){const Z=this.bboxes;for(const ne of j)if(!N.box[ne]){N.box[ne]=!0;const ie=4*ne;if(this._circleAndRectCollide(z.x,z.y,z.radius,Z[ie+0],Z[ie+1],Z[ie+2],Z[ie+3])&&(!L||L(this.boxKeys[ne])))return C.push(!0),!0}}const q=this.circleCells[w];if(q!==null){const Z=this.circles;for(const ne of q)if(!N.circle[ne]){N.circle[ne]=!0;const ie=3*ne;if(this._circlesCollide(Z[ie],Z[ie+1],Z[ie+2],z.x,z.y,z.radius)&&(!L||L(this.circleKeys[ne])))return C.push(!0),!0}}}_forEachCell(s,u,m,_,w,C,D,L){const z=this._convertToXCellCoord(s),N=this._convertToYCellCoord(u),j=this._convertToXCellCoord(m),q=this._convertToYCellCoord(_);for(let Z=z;Z<=j;Z++)for(let ne=N;ne<=q;ne++)if(w.call(this,s,u,m,_,this.xCellCount*ne+Z,C,D,L))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,u,m,_,w,C){const D=_-s,L=w-u,z=m+C;return z*z>D*D+L*L}_circleAndRectCollide(s,u,m,_,w,C,D){const L=(C-_)/2,z=Math.abs(s-(_+L));if(z>L+m)return!1;const N=(D-w)/2,j=Math.abs(u-(w+N));if(j>N+m)return!1;if(z<=L||j<=N)return!0;const q=z-L,Z=j-N;return q*q+Z*Z<=m*m}}const Ja={unknown:0,flipRequired:1,flipNotRequired:2},Kt=Math.tan(85*Math.PI/180);function Xr(p,s,u,m,_,w,C){const D=o.a6.mat4.create();if(u)if(w.name==="globe"){const L=o.bi(_,s);o.a6.mat4.multiply(D,D,L)}else{const L=o.a6.mat2.invert([],C);D[0]=L[0],D[1]=L[1],D[4]=L[2],D[5]=L[3],m||o.a6.mat4.rotateZ(D,D,_.angle)}else o.a6.mat4.multiply(D,_.labelPlaneMatrix,p);return D}function Wr(p,s,u,m,_,w,C){const D=Xr(p,s,u,m,_,w,C);return w.name==="globe"&&u||(D[2]=D[6]=D[10]=D[14]=0),D}function Xo(p,s,u,m,_,w,C){if(u){if(w.name==="globe"){const D=Xr(p,s,u,m,_,w,C);return o.a6.mat4.invert(D,D),o.a6.mat4.multiply(D,p,D),D}{const D=o.a6.mat4.clone(p),L=o.a6.mat4.identity([]);return L[0]=C[0],L[1]=C[1],L[4]=C[2],L[5]=C[3],o.a6.mat4.multiply(D,D,L),m||o.a6.mat4.rotateZ(D,D,-_.angle),D}}return _.glCoordMatrix}function To(p,s,u,m){const _=[p,s,u,1];u?o.a6.vec4.transformMat4(_,_,m):ti(_,_,m);const w=_[3];return _[0]/=w,_[1]/=w,_[2]/=w,_}function Zr(p,s){return Math.min(.5+p/s*.5,1.5)}function JA(p,s){const u=p[0]/p[3],m=p[1]/p[3];return u>=-s[0]&&u<=s[0]&&m>=-s[1]&&m<=s[1]}function Ne(p,s,u,m,_,w,C,D,L,z){const N=u.transform,j=m?p.textSizeData:p.iconSizeData,q=o.bj(j,u.transform.zoom),Z=N.projection.name==="globe",ne=[256/u.width*2+1,256/u.height*2+1],ie=m?p.text.dynamicLayoutVertexArray:p.icon.dynamicLayoutVertexArray;ie.clear();let oe=null;Z&&(oe=m?p.text.globeExtVertexArray:p.icon.globeExtVertexArray);const ae=p.lineVertexArray,ge=m?p.text.placedSymbolArray:p.icon.placedSymbolArray,ye=u.transform.width/u.transform.height;let pe,we=!1;for(let be=0;be<ge.length;be++){const Fe=ge.get(be),{numGlyphs:Ee,writingMode:Me}=Fe;if(Me!==o.bk.vertical||we||pe===o.bk.horizontal||(we=!0),pe=Me,(Fe.hidden||Me===o.bk.vertical)&&!we){fn(Ee,ie);continue}we=!1;const Qe=new o.P(Fe.tileAnchorX,Fe.tileAnchorY);let{x:Re,y:Pe,z:Xe}=N.projection.projectTilePoint(Qe.x,Qe.y,z.canonical);if(L){const[yt,bt,ir]=L(Qe);Re+=yt,Pe+=bt,Xe+=ir}const ct=[Re,Pe,Xe,1];if(o.a6.vec4.transformMat4(ct,ct,s),!JA(ct,ne)){fn(Ee,ie);continue}const _t=ct[3],lt=Zr(u.transform.getCameraToCenterDistance(N.projection),_t),St=o.bl(j,q,Fe),Ye=C?St/lt:St*lt,mt=To(Re,Pe,Xe,_);if(mt[3]<=0){fn(Ee,ie);continue}let ft={};const Tt=C?null:L,Mt=$t(Fe,Ye,!1,D,s,_,w,p.glyphOffsetArray,ae,ie,oe,mt,Qe,ft,ye,Tt,N.projection,z,C);we=Mt.useVertical,Tt&&Mt.needsFlipping&&(ft={}),(Mt.notEnoughRoom||we||Mt.needsFlipping&&$t(Fe,Ye,!0,D,s,_,w,p.glyphOffsetArray,ae,ie,oe,mt,Qe,ft,ye,Tt,N.projection,z,C).notEnoughRoom)&&fn(Ee,ie)}m?(p.text.dynamicLayoutVertexBuffer.updateData(ie),oe&&p.text.globeExtVertexBuffer&&p.text.globeExtVertexBuffer.updateData(oe)):(p.icon.dynamicLayoutVertexBuffer.updateData(ie),oe&&p.icon.globeExtVertexBuffer&&p.icon.globeExtVertexBuffer.updateData(oe))}function st(p,s,u,m,_,w,C,D,L,z,N,j,q,Z,ne,ie){const{lineStartIndex:oe,glyphStartIndex:ae,segment:ge}=D,ye=ae+D.numGlyphs,pe=oe+D.lineLength,we=s.getoffsetX(ae),be=s.getoffsetX(ye-1),Fe=Xn(p*we,u,m,_,w,C,ge,oe,pe,L,z,N,j,q,!0,Z,ne,ie);if(!Fe)return null;const Ee=Xn(p*be,u,m,_,w,C,ge,oe,pe,L,z,N,j,q,!0,Z,ne,ie);return Ee?{first:Fe,last:Ee}:null}function wt(p,s,u,m){return p===o.bk.horizontal&&Math.abs(m)>Math.abs(u)?{useVertical:!0}:p===o.bk.vertical?m>0?{needsFlipping:!0}:null:s!==Ja.unknown&&function(_,w){return _===0||Math.abs(w/_)>Kt}(u,m)?s===Ja.flipRequired?{needsFlipping:!0}:null:u<0?{needsFlipping:!0}:null}function $t(p,s,u,m,_,w,C,D,L,z,N,j,q,Z,ne,ie,oe,ae,ge){const ye=s/24,pe=p.lineOffsetX*ye,we=p.lineOffsetY*ye,{lineStartIndex:be,glyphStartIndex:Fe,numGlyphs:Ee,segment:Me,writingMode:Qe,flipState:Re}=p,Pe=be+p.lineLength,Xe=ct=>{if(N){const[Ye,mt,ft]=ct.up,Tt=z.length;o.bm(N,Tt+0,Ye,mt,ft),o.bm(N,Tt+1,Ye,mt,ft),o.bm(N,Tt+2,Ye,mt,ft),o.bm(N,Tt+3,Ye,mt,ft)}const[_t,lt,St]=ct.point;o.bn(z,_t,lt,St,ct.angle)};if(Ee>1){const ct=st(ye,D,pe,we,u,j,q,p,L,w,Z,ie,!1,oe,ae,ge);if(!ct)return{notEnoughRoom:!0};if(m&&!u){let[_t,lt,St]=ct.first.point,[Ye,mt,ft]=ct.last.point;[_t,lt]=To(_t,lt,St,C),[Ye,mt]=To(Ye,mt,ft,C);const Tt=wt(Qe,Re,(Ye-_t)*ne,mt-lt);if(p.flipState=Tt&&Tt.needsFlipping?Ja.flipRequired:Ja.flipNotRequired,Tt)return Tt}Xe(ct.first);for(let _t=Fe+1;_t<Fe+Ee-1;_t++){const lt=Xn(ye*D.getoffsetX(_t),pe,we,u,j,q,Me,be,Pe,L,w,Z,ie,!1,!1,oe,ae,ge);if(!lt)return z.length-=4*(_t-Fe),{notEnoughRoom:!0};Xe(lt)}Xe(ct.last)}else{if(m&&!u){const _t=To(q.x,q.y,0,_),lt=be+Me+1,St=new o.P(L.getx(lt),L.gety(lt)),Ye=To(St.x,St.y,0,_),mt=Ye[3]>0?Ye:kn(q,St,_t,1,_,void 0,oe,ae.canonical),ft=wt(Qe,Re,(mt[0]-_t[0])*ne,mt[1]-_t[1]);if(p.flipState=ft&&ft.needsFlipping?Ja.flipRequired:Ja.flipNotRequired,ft)return ft}const ct=Xn(ye*D.getoffsetX(Fe),pe,we,u,j,q,Me,be,Pe,L,w,Z,ie,!1,!1,oe,ae,ge);if(!ct)return{notEnoughRoom:!0};Xe(ct)}return{}}function Sn(p,s,u,m,_){const{x:w,y:C,z:D}=m.projectTilePoint(p.x,p.y,s);if(!_)return To(w,C,D,u);const[L,z,N]=_(p);return To(w+L,C+z,D+N,u)}function kn(p,s,u,m,_,w,C,D){const L=Sn(p.sub(s)._unit()._add(p),D,_,C,w);return o.a6.vec3.sub(L,u,L),o.a6.vec3.normalize(L,L),o.a6.vec3.scaleAndAdd(L,u,L,m)}function Xn(p,s,u,m,_,w,C,D,L,z,N,j,q,Z,ne,ie,oe,ae){const ge=m?p-s:p+s;let ye=ge>0?1:-1,pe=0;m&&(ye*=-1,pe=Math.PI),ye<0&&(pe+=Math.PI);let we=D+C+(ye>0?0:1)|0,be=_,Fe=_,Ee=0,Me=0;const Qe=Math.abs(ge),Re=[],Pe=[];let Xe=w,ct=Xe;const _t=()=>kn(ct,Xe,Fe,Qe-Ee+1,N,q,ie,oe.canonical);for(;Ee+Me<=Qe;){if(we+=ye,we<D||we>=L)return null;if(Fe=be,ct=Xe,Re.push(Fe),Z&&Pe.push(ct),Xe=new o.P(z.getx(we),z.gety(we)),be=j[we],!be){const bt=Sn(Xe,oe.canonical,N,ie,q);be=bt[3]>0?j[we]=bt:_t()}Ee+=Me,Me=o.a6.vec3.distance(Fe,be)}ne&&q&&(j[we]&&(be=_t(),Me=o.a6.vec3.distance(Fe,be)),j[we]=be);const lt=(Qe-Ee)/Me,St=Xe.sub(ct)._mult(lt)._add(ct),Ye=o.a6.vec3.sub([],be,Fe),mt=o.a6.vec3.scaleAndAdd([],Fe,Ye,lt);let ft=[0,0,1],Tt=Ye[0],Mt=Ye[1];if(ae&&(ft=ie.upVector(oe.canonical,St.x,St.y),ft[0]!==0||ft[1]!==0||ft[2]!==1)){const bt=[ft[2],0,-ft[0]],ir=o.a6.vec3.cross([],ft,bt);o.a6.vec3.normalize(bt,bt),o.a6.vec3.normalize(ir,ir),Tt=o.a6.vec3.dot(Ye,bt),Mt=o.a6.vec3.dot(Ye,ir)}if(u){const bt=o.a6.vec3.cross([],ft,Ye);o.a6.vec3.normalize(bt,bt),o.a6.vec3.scaleAndAdd(mt,mt,bt,u*ye)}const yt=pe+Math.atan2(Mt,Tt);return Re.push(mt),Z&&Pe.push(St),{point:mt,angle:yt,path:Re,tilePath:Pe,up:ft}}function fn(p,s){const u=s.length,m=u+4*p;s.resize(m),s.float32.fill(-1/0,4*u,4*m)}function ti(p,s,u){const m=s[0],_=s[1];return p[0]=u[0]*m+u[4]*_+u[12],p[1]=u[1]*m+u[5]*_+u[13],p[3]=u[3]*m+u[7]*_+u[15],p}const Ti=100;class $n{constructor(s,u,m=new vl(s.width+200,s.height+200,25),_=new vl(s.width+200,s.height+200,25)){this.transform=s,this.grid=m,this.ignoredGrid=_,this.pitchfactor=Math.cos(s._pitch)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+Ti,this.screenBottomBoundary=s.height+Ti,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.fogState=u}placeCollisionBox(s,u,m,_,w,C,D,L){let z=m.projectedAnchorX,N=m.projectedAnchorY,j=m.projectedAnchorZ;const q=m.elevation,Z=m.tileID,ne=s.getProjection();if(q&&Z){const[be,Fe,Ee]=ne.upVector(Z.canonical,m.tileAnchorX,m.tileAnchorY),Me=ne.upVectorScale(Z.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;z+=be*q*Me,N+=Fe*q*Me,j+=Ee*q*Me}const ie=this.projectAndGetPerspectiveRatio(D,z,N,j,m.tileID,ne.name==="globe"||!!q||this.transform.pitch>0,ne),oe=C*ie.perspectiveRatio,ae=(m.x1*u+_.x-m.padding)*oe+ie.point.x,ge=(m.y1*u+_.y-m.padding)*oe+ie.point.y,ye=(m.x2*u+_.x+m.padding)*oe+ie.point.x,pe=(m.y2*u+_.y+m.padding)*oe+ie.point.y,we=ie.perspectiveRatio<=.55||ie.occluded;return!this.isInsideGrid(ae,ge,ye,pe)||!w&&this.grid.hitTest(ae,ge,ye,pe,L)||we?{box:[],offscreen:!1,occluded:ie.occluded}:{box:[ae,ge,ye,pe],offscreen:this.isOffscreen(ae,ge,ye,pe),occluded:!1}}placeCollisionCircles(s,u,m,_,w,C,D,L,z,N,j,q,Z,ne,ie){const oe=[],ae=this.transform.elevation,ge=s.getProjection(),ye=ae?ae.getAtTileOffsetFunc(ie,this.transform.center.lat,this.transform.worldSize,ge):null,pe=new o.P(m.tileAnchorX,m.tileAnchorY);let{x:we,y:be,z:Fe}=ge.projectTilePoint(pe.x,pe.y,ie.canonical);if(ye){const[St,Ye,mt]=ye(pe);we+=St,be+=Ye,Fe+=mt}const Ee=ge.name==="globe",Me=this.projectAndGetPerspectiveRatio(D,we,be,Fe,ie,Ee||!!ae||this.transform.pitch>0,ge),{perspectiveRatio:Qe}=Me,Re=(j?C/Qe:C*Qe)/o.bq,Pe=To(we,be,Fe,L),Xe=Me.signedDistanceFromCamera>0?st(Re,w,m.lineOffsetX*Re,m.lineOffsetY*Re,!1,Pe,pe,m,_,L,{},ae&&!j?ye:null,j&&!!ae,ge,ie,j):null;let ct=!1,_t=!1,lt=!0;if(Xe&&!Me.occluded){const St=.5*Z*Qe+ne,Ye=new o.P(-100,-100),mt=new o.P(this.screenRightBoundary,this.screenBottomBoundary),ft=new Eo,{first:Tt,last:Mt}=Xe,yt=Tt.path.length;let bt=[];for(let Ht=yt-1;Ht>=1;Ht--)bt.push(Tt.path[Ht]);for(let Ht=1;Ht<Mt.path.length;Ht++)bt.push(Mt.path[Ht]);const ir=2.5*St;z&&(bt=bt.map(([Ht,ur,Zt],lr)=>(ye&&!Ee&&(Zt=ye(lr<yt-1?Tt.tilePath[yt-1-lr]:Mt.tilePath[lr-yt+2])[2]),To(Ht,ur,Zt,z))),bt.some(Ht=>Ht[3]<=0)&&(bt=[]));let Lt=[];if(bt.length>0){let Ht=1/0,ur=-1/0,Zt=1/0,lr=-1/0;for(const Dr of bt)Ht=Math.min(Ht,Dr[0]),Zt=Math.min(Zt,Dr[1]),ur=Math.max(ur,Dr[0]),lr=Math.max(lr,Dr[1]);ur>=Ye.x&&Ht<=mt.x&&lr>=Ye.y&&Zt<=mt.y&&(Lt=[bt.map(Dr=>new o.P(Dr[0],Dr[1]))],(Ht<Ye.x||ur>mt.x||Zt<Ye.y||lr>mt.y)&&(Lt=o.bo(Lt,Ye.x,Ye.y,mt.x,mt.y)))}for(const Ht of Lt){ft.reset(Ht,.25*St);let ur=0;ur=ft.length<=.5*St?1:Math.ceil(ft.paddedLength/ir)+1;for(let Zt=0;Zt<ur;Zt++){const lr=Zt/Math.max(ur-1,1),Dr=ft.lerp(lr),Ir=Dr.x+Ti,Cn=Dr.y+Ti;oe.push(Ir,Cn,St,0);const In=Ir-St,Wn=Cn-St,vs=Ir+St,Pi=Cn+St;if(lt=lt&&this.isOffscreen(In,Wn,vs,Pi),_t=_t||this.isInsideGrid(In,Wn,vs,Pi),!u&&this.grid.hitTestCircle(Ir,Cn,St,q)&&(ct=!0,!N))return{circles:[],offscreen:!1,collisionDetected:ct,occluded:!1}}}}return{circles:!N&&ct||!_t?[]:oe,offscreen:lt,collisionDetected:ct,occluded:Me.occluded}}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let m=1/0,_=1/0,w=-1/0,C=-1/0;for(const N of s){const j=new o.P(N.x+Ti,N.y+Ti);m=Math.min(m,j.x),_=Math.min(_,j.y),w=Math.max(w,j.x),C=Math.max(C,j.y),u.push(j)}const D=this.grid.query(m,_,w,C).concat(this.ignoredGrid.query(m,_,w,C)),L={},z={};for(const N of D){const j=N.key;if(L[j.bucketInstanceId]===void 0&&(L[j.bucketInstanceId]={}),L[j.bucketInstanceId][j.featureIndex])continue;const q=[new o.P(N.x1,N.y1),new o.P(N.x2,N.y1),new o.P(N.x2,N.y2),new o.P(N.x1,N.y2)];o.bp(u,q)&&(L[j.bucketInstanceId][j.featureIndex]=!0,z[j.bucketInstanceId]===void 0&&(z[j.bucketInstanceId]=[]),z[j.bucketInstanceId].push(j.featureIndex))}return z}insertCollisionBox(s,u,m,_,w){(u?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:_,collisionGroupID:w},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,u,m,_,w){const C=u?this.ignoredGrid:this.grid,D={bucketInstanceId:m,featureIndex:_,collisionGroupID:w};for(let L=0;L<s.length;L+=4)C.insertCircle(D,s[L],s[L+1],s[L+2])}projectAndGetPerspectiveRatio(s,u,m,_,w,C,D){const L=[u,m,_,1];let z=!1;_||this.transform.pitch>0?(o.a6.vec4.transformMat4(L,L,s),this.fogState&&w&&D.name!=="globe"&&(z=function(q,Z,ne,ie,oe,ae){const ge=ae.calculateFogTileMatrix(oe),ye=[Z,ne,ie];return o.a6.vec3.transformMat4(ye,ye,ge),Nt(q,o.a6.vec3.length(ye),ae.pitch,ae._fov)}(this.fogState,u,m,_,w.toUnwrapped(),this.transform)>.9)):ti(L,L,s);const N=L[3];return{point:new o.P((L[0]/N+1)/2*this.transform.width+Ti,(-L[1]/N+1)/2*this.transform.height+Ti),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(D)/N*.5,1.5),signedDistanceFromCamera:N,occluded:C&&L[2]>N||z}}isOffscreen(s,u,m,_){return m<Ti||s>=this.screenRightBoundary||_<Ti||u>this.screenBottomBoundary}isInsideGrid(s,u,m,_){return m>=0&&s<this.gridRightBoundary&&_>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const s=o.a6.mat4.identity([]);return o.a6.mat4.translate(s,s,[-100,-100,0]),s}}function Yi(p,s,u){const m=s.createTileMatrix(p,p.worldSize,u.toUnwrapped());return o.a6.mat4.multiply(new Float32Array(16),p.projMatrix,m)}function $A(p,s,u){if(s.projection.name===u.projection.name)return p.projMatrix;const m=u.clone();return m.setProjection(s.projection),Yi(m,s.getProjection(),p)}function gs(p,s,u){return s.name===u.projection.name?p.projMatrix:Yi(u,s,p)}class _i{constructor(s,u,m,_){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?u:-u))):_&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class la{constructor(s,u,m,_,w,C=!1){this.text=new _i(s?s.text:null,u,m,w),this.icon=new _i(s?s.icon:null,u,_,w),this.clipped=C}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ns{constructor(s,u,m,_=!1){this.text=s,this.icon=u,this.skipFade=m,this.clipped=_}}class lo{constructor(){this.invProjMatrix=o.a6.mat4.create(),this.viewportMatrix=o.a6.mat4.create(),this.circles=[]}}class D0{constructor(s,u,m,_,w){this.bucketInstanceId=s,this.featureIndex=u,this.sourceLayerIndex=m,this.bucketIndex=_,this.tileID=w}}class Vs{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const u=++this.maxGroupID;this.collisionGroups[s]={ID:u,predicate:m=>m.collisionGroupID===u}}return this.collisionGroups[s]}}function eh(p,s,u,m,_){const{horizontalAlign:w,verticalAlign:C}=o.bx(p),D=-(w-.5)*s,L=-(C-.5)*u,z=o.bw(p,m);return new o.P(D+z[0]*_,L+z[1]*_)}function Ku(p,s,u,m,_){const w=new o.P(p,s);return u&&w._rotate(m?_:-_),w}class Wu{constructor(s,u,m,_,w,C){this.transform=s.clone(),this.projection=s.projection.name,this.collisionIndex=new $n(this.transform,w),this.buildingIndex=C,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=u,this.retainedQueryData={},this.collisionGroups=new Vs(m),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(s,u,m,_){const w=m.getBucket(u),C=m.latestFeatureIndex;if(!w||!C||u.fqid!==w.layerIds[0])return;const D=w.layers[0].layout,L=w.layers[0].paint,z=m.collisionBoxArray,N=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),j=m.tileSize/o.ab,q=m.tileID.toUnwrapped();this.transform.setProjection(w.projection);const Z=(ne=m.tileID,ie=w.getProjection(),oe=this.transform,ie.name===this.projection?oe.calculateProjMatrix(ne.toUnwrapped()):Yi(oe,ie,ne));var ne,ie,oe;const ae=D.get("text-pitch-alignment")==="map",ge=D.get("text-rotation-alignment")==="map";u.compileFilter();const ye=u.dynamicFilter(),pe=u.dynamicFilterNeedsFeature(),we=this.transform.calculatePixelsToTileUnitsMatrix(m),be=Wr(Z,m.tileID.canonical,ae,ge,this.transform,w.getProjection(),we);let Fe=null;if(ae){const Qe=Xo(Z,m.tileID.canonical,ae,ge,this.transform,w.getProjection(),we);Fe=o.a6.mat4.multiply([],this.transform.labelPlaneMatrix,Qe)}let Ee=null;ye&&m.latestFeatureIndex&&(Ee={unwrappedTileID:q,dynamicFilter:ye,dynamicFilterNeedsFeature:pe}),this.retainedQueryData[w.bucketInstanceId]=new D0(w.bucketInstanceId,C,w.sourceLayerIndex,w.index,m.tileID);const Me={bucket:w,layout:D,paint:L,posMatrix:Z,textLabelPlaneMatrix:be,labelToScreenMatrix:Fe,clippingData:Ee,scale:N,textPixelRatio:j,holdingForFade:m.holdingForFade(),collisionBoxArray:z,partiallyEvaluatedTextSize:o.bj(w.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:o.bj(w.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID),latestFeatureIndex:m.latestFeatureIndex};if(_)for(const Qe of w.sortKeyRanges){const{sortKey:Re,symbolInstanceStart:Pe,symbolInstanceEnd:Xe}=Qe;s.push({sortKey:Re,symbolInstanceStart:Pe,symbolInstanceEnd:Xe,parameters:Me})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:Me})}attemptAnchorPlacement(s,u,m,_,w,C,D,L,z,N,j,q,Z,ne,ie,oe,ae,ge){const{textOffset0:ye,textOffset1:pe,crossTileID:we}=q,be=[ye,pe],Fe=eh(s,m,_,be,w),Ee=this.collisionIndex.placeCollisionBox(ne,w,u,Ku(Fe.x,Fe.y,C,D,this.transform.angle),j,L,z,N.predicate);if(oe){const Me=ne.getSymbolInstanceIconSize(ge,this.transform.zoom,q.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(ne,Me,oe,Ku(Fe.x,Fe.y,C,D,this.transform.angle),j,L,z,N.predicate).box.length===0)return}if(Ee.box.length>0){let Me;return this.prevPlacement&&this.prevPlacement.variableOffsets[we]&&this.prevPlacement.placements[we]&&this.prevPlacement.placements[we].text&&(Me=this.prevPlacement.variableOffsets[we].anchor),this.variableOffsets[we]={textOffset:be,width:m,height:_,anchor:s,textScale:w,prevAnchor:Me},this.markUsedJustification(ne,s,q,ie),ne.allowVerticalPlacement&&(this.markUsedOrientation(ne,ie,q),this.placedOrientations[we]=ie),{shift:Fe,placedGlyphBoxes:Ee}}}placeLayerBucketPart(s,u,m,_){const{bucket:w,layout:C,paint:D,posMatrix:L,textLabelPlaneMatrix:z,labelToScreenMatrix:N,clippingData:j,textPixelRatio:q,holdingForFade:Z,collisionBoxArray:ne,partiallyEvaluatedTextSize:ie,partiallyEvaluatedIconSize:oe,collisionGroup:ae,latestFeatureIndex:ge}=s.parameters,ye=C.get("text-optional"),pe=C.get("icon-optional"),we=C.get("text-allow-overlap"),be=C.get("icon-allow-overlap"),Fe=C.get("text-rotation-alignment")==="map",Ee=C.get("text-pitch-alignment")==="map",Me=C.get("symbol-z-elevate"),Qe=D.get("symbol-z-offset"),Re=D.get("symbol-elevation-reference")==="sea";this.transform.setProjection(w.projection);let Pe=we&&(be||!w.hasIconData()||pe),Xe=be&&(we||!w.hasTextData()||ye);const ct=!Qe.isConstant();!w.collisionArrays&&ne&&w.deserializeCollisionBoxes(ne),m&&_&&w.updateCollisionDebugBuffers(this.transform.zoom,ne);const _t=(lt,St,Ye)=>{const{crossTileID:mt,numVerticalGlyphVertices:ft}=lt;let Tt=null;if(j&&j.dynamicFilterNeedsFeature||ct){const Mr=this.retainedQueryData[w.bucketInstanceId];Tt=ge.loadFeature({featureIndex:lt.featureIndex,bucketIndex:Mr.bucketIndex,sourceLayerIndex:Mr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(j&&!(0,j.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},Tt,this.retainedQueryData[w.bucketInstanceId].tileID.canonical,new o.P(lt.tileAnchorX,lt.tileAnchorY),this.transform.calculateDistanceTileData(j.unwrappedTileID)))return this.placements[mt]=new Ns(!1,!1,!1,!0),void u.add(mt);const Mt=Qe.evaluate(Tt,{});if(u.has(mt))return;if(Z)return void(this.placements[mt]=new Ns(!1,!1,!1));let yt=!1,bt=!1,ir=!0,Lt=!1,Ht=!1,ur=null,Zt={box:null,offscreen:null,occluded:null},lr={box:null,offscreen:null,occluded:null},Dr=null,Ir=null,Cn=null,In=0,Wn=0,vs=0;Ye.textFeatureIndex?In=Ye.textFeatureIndex:lt.useRuntimeCollisionCircles&&(In=lt.featureIndex),Ye.verticalTextFeatureIndex&&(Wn=Ye.verticalTextFeatureIndex);const Pi=Mr=>{Mr.tileID=this.retainedQueryData[w.bucketInstanceId].tileID;const dn=this.transform.elevation;Mr.elevation=Re?Mt:Mt+(dn?dn.getAtTileOffset(Mr.tileID,Mr.tileAnchorX,Mr.tileAnchorY):0),Mr.elevation+=lt.zOffset},Vr=Ye.textBox;if(Vr){Pi(Vr);const Mr=wn=>{let wi=o.bk.horizontal;if(w.allowVerticalPlacement&&!wn&&this.prevPlacement){const Di=this.prevPlacement.placedOrientations[mt];Di&&(this.placedOrientations[mt]=Di,wi=Di,this.markUsedOrientation(w,wi,lt))}return wi},dn=(wn,wi)=>{if(w.allowVerticalPlacement&&ft>0&&Ye.verticalTextBox){for(const Di of w.writingModes)if(Di===o.bk.vertical?(Zt=wi(),lr=Zt):Zt=wn(),Zt&&Zt.box&&Zt.box.length)break}else Zt=wn()};if(C.get("text-variable-anchor")){let wn=C.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[mt]){const nn=this.prevPlacement.variableOffsets[mt];wn.indexOf(nn.anchor)>0&&(wn=wn.filter(Ji=>Ji!==nn.anchor),wn.unshift(nn.anchor))}const wi=(nn,Ji,co)=>{const $i=w.getSymbolInstanceTextSize(ie,lt,this.transform.zoom,St),zn=(nn.x2-nn.x1)*$i+2*nn.padding,ua=(nn.y2-nn.y1)*$i+2*nn.padding,Aa=lt.hasIconTextFit&&!be?Ji:null;Aa&&Pi(Aa);let ys={box:[],offscreen:!1,occluded:!1};const is=we?2*wn.length:wn.length;for(let Ra=0;Ra<is;++Ra){const _s=this.attemptAnchorPlacement(wn[Ra%wn.length],nn,zn,ua,$i,Fe,Ee,q,L,ae,Ra>=wn.length,lt,St,w,co,Aa,ie,oe);if(_s&&(ys=_s.placedGlyphBoxes,ys&&ys.box&&ys.box.length)){yt=!0,ur=_s.shift;break}}return ys};dn(()=>wi(Vr,Ye.iconBox,o.bk.horizontal),()=>{const nn=Ye.verticalTextBox;return nn&&Pi(nn),w.allowVerticalPlacement&&!(Zt&&Zt.box&&Zt.box.length)&&ft>0&&nn?wi(nn,Ye.verticalIconBox,o.bk.vertical):{box:null,offscreen:null,occluded:null}}),Zt&&(yt=Zt.box,ir=Zt.offscreen,Lt=Zt.occluded);const Di=Mr(!(!Zt||!Zt.box));if(!yt&&this.prevPlacement){const nn=this.prevPlacement.variableOffsets[mt];nn&&(this.variableOffsets[mt]=nn,this.markUsedJustification(w,nn.anchor,lt,Di))}}else{const wn=(wi,Di)=>{const nn=w.getSymbolInstanceTextSize(ie,lt,this.transform.zoom,St),Ji=this.collisionIndex.placeCollisionBox(w,nn,wi,new o.P(0,0),we,q,L,ae.predicate);return Ji&&Ji.box&&Ji.box.length&&(this.markUsedOrientation(w,Di,lt),this.placedOrientations[mt]=Di),Ji};dn(()=>wn(Vr,o.bk.horizontal),()=>{const wi=Ye.verticalTextBox;return w.allowVerticalPlacement&&ft>0&&wi?(Pi(wi),wn(wi,o.bk.vertical)):{box:null,offscreen:null,occluded:null}}),Mr(!!(Zt&&Zt.box&&Zt.box.length))}}if(Dr=Zt,yt=Dr&&Dr.box&&Dr.box.length>0,ir=Dr&&Dr.offscreen,Lt=Dr&&Dr.occluded,lt.useRuntimeCollisionCircles){const Mr=w.text.placedSymbolArray.get(lt.centerJustifiedTextSymbolIndex>=0?lt.centerJustifiedTextSymbolIndex:lt.verticalPlacedTextSymbolIndex),dn=o.bl(w.textSizeData,ie,Mr),wn=C.get("text-padding");Ir=this.collisionIndex.placeCollisionCircles(w,we,Mr,w.lineVertexArray,w.glyphOffsetArray,dn,L,z,N,m,Ee,ae.predicate,lt.collisionCircleDiameter*dn/o.bq,wn,this.retainedQueryData[w.bucketInstanceId].tileID),yt=we||Ir.circles.length>0&&!Ir.collisionDetected,ir=ir&&Ir.offscreen,Lt=Ir.occluded}if(Ye.iconFeatureIndex&&(vs=Ye.iconFeatureIndex),Ye.iconBox){const Mr=dn=>{Pi(dn);const wn=lt.hasIconTextFit&&ur?Ku(ur.x,ur.y,Fe,Ee,this.transform.angle):new o.P(0,0),wi=w.getSymbolInstanceIconSize(oe,this.transform.zoom,lt.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(w,wi,dn,wn,be,q,L,ae.predicate)};lr&&lr.box&&lr.box.length&&Ye.verticalIconBox?(Cn=Mr(Ye.verticalIconBox),bt=Cn.box.length>0):(Cn=Mr(Ye.iconBox),bt=Cn.box.length>0),ir=ir&&Cn.offscreen,Ht=Cn.occluded}const Tn=ye||lt.numHorizontalGlyphVertices===0&&ft===0,ni=pe||lt.numIconVertices===0;if(Tn||ni?ni?Tn||(bt=bt&&yt):yt=bt&&yt:bt=yt=bt&&yt,yt&&Dr&&Dr.box&&this.collisionIndex.insertCollisionBox(Dr.box,C.get("text-ignore-placement"),w.bucketInstanceId,lr&&lr.box&&Wn?Wn:In,ae.ID),bt&&Cn&&this.collisionIndex.insertCollisionBox(Cn.box,C.get("icon-ignore-placement"),w.bucketInstanceId,vs,ae.ID),Ir&&(yt&&this.collisionIndex.insertCollisionCircles(Ir.circles,C.get("text-ignore-placement"),w.bucketInstanceId,In,ae.ID),m)){const Mr=w.bucketInstanceId;let dn=this.collisionCircleArrays[Mr];dn===void 0&&(dn=this.collisionCircleArrays[Mr]=new lo);for(let wn=0;wn<Ir.circles.length;wn+=4)dn.circles.push(Ir.circles[wn+0]),dn.circles.push(Ir.circles[wn+1]),dn.circles.push(Ir.circles[wn+2]),dn.circles.push(Ir.collisionDetected?1:0)}const En=w.projection.name!=="globe";Pe=Pe&&(En||!Lt),Xe=Xe&&(En||!Ht),this.placements[mt]=new Ns(yt||Pe,bt||Xe,ir||w.justReloaded),u.add(mt)};if(Me&&this.buildingIndex&&(this.buildingIndex.updateZOffset(w,this.retainedQueryData[w.bucketInstanceId].tileID),w.updateZOffset()),w.sortFeaturesByY){const lt=w.getSortedSymbolIndexes(this.transform.angle);for(let St=lt.length-1;St>=0;--St){const Ye=lt[St];_t(w.symbolInstances.get(Ye),Ye,w.collisionArrays[Ye])}w.hasAnyZOffset&&o.w(`${w.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(w.hasAnyZOffset){const lt=w.getSortedIndexesByZOffset();for(let St=0;St<lt.length;++St){const Ye=lt[St];_t(w.symbolInstances.get(Ye),Ye,w.collisionArrays[Ye])}}else for(let lt=s.symbolInstanceStart;lt<s.symbolInstanceEnd;lt++)_t(w.symbolInstances.get(lt),lt,w.collisionArrays[lt]);if(m&&w.bucketInstanceId in this.collisionCircleArrays){const lt=this.collisionCircleArrays[w.bucketInstanceId];o.a6.mat4.invert(lt.invProjMatrix,L),lt.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1}markUsedJustification(s,u,m,_){const{leftJustifiedTextSymbolIndex:w,centerJustifiedTextSymbolIndex:C,rightJustifiedTextSymbolIndex:D,verticalPlacedTextSymbolIndex:L,crossTileID:z}=m,N=o.bv(u),j=_===o.bk.vertical?L:N==="left"?w:N==="center"?C:N==="right"?D:-1;w>=0&&(s.text.placedSymbolArray.get(w).crossTileID=j>=0&&w!==j?0:z),C>=0&&(s.text.placedSymbolArray.get(C).crossTileID=j>=0&&C!==j?0:z),D>=0&&(s.text.placedSymbolArray.get(D).crossTileID=j>=0&&D!==j?0:z),L>=0&&(s.text.placedSymbolArray.get(L).crossTileID=j>=0&&L!==j?0:z)}markUsedOrientation(s,u,m){const _=u===o.bk.horizontal||u===o.bk.horizontalOnly?u:0,w=u===o.bk.vertical?u:0,{leftJustifiedTextSymbolIndex:C,centerJustifiedTextSymbolIndex:D,rightJustifiedTextSymbolIndex:L,verticalPlacedTextSymbolIndex:z}=m,N=s.text.placedSymbolArray;C>=0&&(N.get(C).placedOrientation=_),D>=0&&(N.get(D).placedOrientation=_),L>=0&&(N.get(L).placedOrientation=_),z>=0&&(N.get(z).placedOrientation=w)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let m=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const _=u?u.symbolFadeChange(s):1,w=u?u.opacities:{},C=u?u.variableOffsets:{},D=u?u.placedOrientations:{};for(const L in this.placements){const z=this.placements[L],N=w[L];N?(this.opacities[L]=new la(N,_,z.text,z.icon,null,z.clipped),m=m||z.text!==N.text.placed||z.icon!==N.icon.placed):(this.opacities[L]=new la(null,_,z.text,z.icon,z.skipFade,z.clipped),m=m||z.text||z.icon)}for(const L in w){const z=w[L];if(!this.opacities[L]){const N=new la(z,_,!1,!1);N.isHidden()||(this.opacities[L]=N,m=m||z.text.placed||z.icon.placed)}}for(const L in C)this.variableOffsets[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.variableOffsets[L]=C[L]);for(const L in D)this.placedOrientations[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.placedOrientations[L]=D[L]);m?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:s)}updateLayerOpacities(s,u,m,_){const w=new Set;for(const C of u){const D=C.getBucket(s);D&&C.latestFeatureIndex&&s.fqid===D.layerIds[0]&&(this.updateBucketOpacities(D,w,C,C.collisionBoxArray,m,_,C.tileID,s.scope),D.layers[0].layout.get("symbol-z-elevate")&&this.buildingIndex&&(this.buildingIndex.updateZOffset(D,C.tileID),D.updateZOffset()))}}updateBucketOpacities(s,u,m,_,w,C,D,L){s.hasTextData()&&s.text.opacityVertexArray.clear(),s.hasIconData()&&s.icon.opacityVertexArray.clear(),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const z=s.layers[0].layout,N=s.layers[0].paint,j=!!s.layers[0].dynamicFilter(),q=new la(null,0,!1,!1,!0),Z=z.get("text-allow-overlap"),ne=z.get("icon-allow-overlap"),ie=z.get("text-variable-anchor"),oe=z.get("text-rotation-alignment")==="map",ae=z.get("text-pitch-alignment")==="map",ge=N.get("symbol-z-offset"),ye=N.get("symbol-elevation-reference")==="sea",pe=!ge.isConstant(),we=new la(null,0,Z&&(ne||!s.hasIconData()||z.get("icon-optional")),ne&&(Z||!s.hasTextData()||z.get("text-optional")),!0);!s.collisionArrays&&_&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(_);const be=(Ee,Me,Qe)=>{for(let Re=0;Re<Me/4;Re++)Ee.opacityVertexArray.emplaceBack(Qe)};let Fe=0;C&&s.updateReplacement(D,C);for(let Ee=0;Ee<s.symbolInstances.length;Ee++){const Me=s.symbolInstances.get(Ee),{numHorizontalGlyphVertices:Qe,numVerticalGlyphVertices:Re,crossTileID:Pe,numIconVertices:Xe,tileAnchorX:ct,tileAnchorY:_t}=Me;let lt=null;if(Me&&pe){const Lt=this.retainedQueryData[s.bucketInstanceId];lt=m.latestFeatureIndex.loadFeature({featureIndex:Me.featureIndex,bucketIndex:Lt.bucketIndex,sourceLayerIndex:Lt.sourceLayerIndex,layoutVertexArrayOffset:0})}const St=ge.evaluate(lt,{}),Ye=u.has(Pe);let mt=this.opacities[Pe];Ye?mt=q:mt||(mt=we,this.opacities[Pe]=mt),u.add(Pe);const ft=Qe>0||Re>0,Tt=Xe>0,Mt=this.placedOrientations[Pe],yt=Mt===o.bk.vertical,bt=Mt===o.bk.horizontal||Mt===o.bk.horizontalOnly;!ft&&!Tt||mt.isHidden()||Fe++;let ir=!1;if((ft||Tt)&&C)for(const Lt of s.activeReplacements){if(o.br(Lt,w,o.bs.Symbol,L)||Lt.min.x>ct||ct>Lt.max.x||Lt.min.y>_t||_t>Lt.max.y)continue;const Ht=o.bt(ct,_t,D.canonical,Lt.footprintTileId.canonical);if(ir=o.bu(Ht,Lt.footprint),ir)break}if(ft){const Lt=ir?rh:th(mt.text);be(s.text,Qe,yt?rh:Lt),be(s.text,Re,bt?rh:Lt);const Ht=mt.text.isHidden(),{leftJustifiedTextSymbolIndex:ur,centerJustifiedTextSymbolIndex:Zt,rightJustifiedTextSymbolIndex:lr,verticalPlacedTextSymbolIndex:Dr}=Me,Ir=s.text.placedSymbolArray,Cn=Ht||yt?1:0;ur>=0&&(Ir.get(ur).hidden=Cn),Zt>=0&&(Ir.get(Zt).hidden=Cn),lr>=0&&(Ir.get(lr).hidden=Cn),Dr>=0&&(Ir.get(Dr).hidden=Ht||bt?1:0);const In=this.variableOffsets[Pe];In&&this.markUsedJustification(s,In.anchor,Me,Mt);const Wn=this.placedOrientations[Pe];Wn&&(this.markUsedJustification(s,"left",Me,Wn),this.markUsedOrientation(s,Wn,Me))}if(Tt){const Lt=ir?rh:th(mt.icon),{placedIconSymbolIndex:Ht,verticalPlacedIconSymbolIndex:ur}=Me,Zt=s.icon.placedSymbolArray,lr=mt.icon.isHidden()?1:0;Ht>=0&&(be(s.icon,Xe,yt?rh:Lt),Zt.get(Ht).hidden=lr),ur>=0&&(be(s.icon,Me.numVerticalIconVertices,bt?rh:Lt),Zt.get(ur).hidden=lr)}if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const Lt=s.collisionArrays[Ee];if(Lt){let Ht=new o.P(0,0),ur=!0;if(Lt.textBox||Lt.verticalTextBox){if(ie){const lr=this.variableOffsets[Pe];lr?(Ht=eh(lr.anchor,lr.width,lr.height,lr.textOffset,lr.textScale),oe&&Ht._rotate(ae?this.transform.angle:-this.transform.angle)):ur=!1}j&&(ur=!mt.clipped),Lt.textBox&&Rp(s.textCollisionBox.collisionVertexArray,mt.text.placed,!ur||yt,St,ye,Ht.x,Ht.y),Lt.verticalTextBox&&Rp(s.textCollisionBox.collisionVertexArray,mt.text.placed,!ur||bt,St,ye,Ht.x,Ht.y)}const Zt=ur&&!!(!bt&&Lt.verticalIconBox);Lt.iconBox&&Rp(s.iconCollisionBox.collisionVertexArray,mt.icon.placed,Zt,St,ye,Me.hasIconTextFit?Ht.x:0,Me.hasIconTextFit?Ht.y:0),Lt.verticalIconBox&&Rp(s.iconCollisionBox.collisionVertexArray,mt.icon.placed,!Zt,St,ye,Me.hasIconTextFit?Ht.x:0,Me.hasIconTextFit?Ht.y:0)}}}if(s.fullyClipped=Fe===0,s.sortFeatures(this.transform.angle),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.bucketInstanceId in this.collisionCircleArrays){const Ee=this.collisionCircleArrays[s.bucketInstanceId];s.placementInvProjMatrix=Ee.invProjMatrix,s.placementViewportMatrix=Ee.viewportMatrix,s.collisionCircleArray=Ee.circles,delete this.collisionCircleArrays[s.bucketInstanceId]}}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,u){const m=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*m>s}setStale(){this.stale=!0}}function Rp(p,s,u,m,_,w,C){p.emplaceBack(s?1:0,u?1:0,w||0,C||0,m,_?1:0),p.emplaceBack(s?1:0,u?1:0,w||0,C||0,m,_?1:0),p.emplaceBack(s?1:0,u?1:0,w||0,C||0,m,_?1:0),p.emplaceBack(s?1:0,u?1:0,w||0,C||0,m,_?1:0)}const sc=Math.pow(2,25),mT=Math.pow(2,24),yx=Math.pow(2,17),Pa=Math.pow(2,16),gT=Math.pow(2,9),Lp=Math.pow(2,8),_x=Math.pow(2,1);function th(p){if(p.opacity===0&&!p.placed)return 0;if(p.opacity===1&&p.placed)return 4294967295;const s=p.placed?1:0,u=Math.floor(127*p.opacity);return u*sc+s*mT+u*yx+s*Pa+u*gT+s*Lp+u*_x+s}const rh=0;class vT{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&s.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(s,u,m,_,w){const C=this._bucketParts;for(;this._currentTileIndex<s.length;)if(u.getBucketParts(C,_,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((D,L)=>D.sortKey-L.sortKey));this._currentPartIndex<C.length;){const D=C[this._currentPartIndex];if(u.placeLayerBucketPart(D,this._seenCrossTileIDs,m,D.symbolInstanceStart===0),this._currentPartIndex++,w())return!0}return!1}}class Yd{constructor(s,u,m,_,w,C,D,L,z){this.placement=new Wu(s,w,C,D,L,z),this._currentPlacementIndex=u.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(s,u,m,_){const w=o.q.now(),C=()=>{const D=o.q.now()-w;return!this._forceFullPlacement&&D>2};for(;this._currentPlacementIndex>=0;){const D=u[s[this._currentPlacementIndex]],L=this.placement.collisionIndex.transform.zoom;if(D.type==="symbol"&&(!D.minzoom||D.minzoom<=L)&&(!D.maxzoom||D.maxzoom>L)){const z=D,N=z.layout.get("symbol-z-elevate"),j=z.layout.get("symbol-sort-key").constantOr(1)!==void 0,q=z.layout.get("symbol-z-order"),Z=q==="viewport-y"||q==="auto"&&!(q!=="viewport-y"&&j),ne=z.layout.get("text-allow-overlap")||z.layout.get("icon-allow-overlap")||z.layout.get("text-ignore-placement")||z.layout.get("icon-ignore-placement"),ie=Z&&ne,oe=this._inProgressLayer=this._inProgressLayer||new vT(z),ae=o.av(D.source,D.scope);if(oe.continuePlacement(N||ie?_[ae]:m[ae],this.placement,this._showCollisionBoxes,D,C))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const qu=512/o.ab/2;class yT{constructor(s,u,m){this.tileID=s,this.bucketInstanceId=m,this.index=new o.by(u.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const _=s.canonical.x*o.ab,w=s.canonical.y*o.ab;for(let C=0;C<u.length;C++){const{key:D,crossTileID:L,tileAnchorX:z,tileAnchorY:N}=u.get(C),j=Math.floor((_+z)*qu),q=Math.floor((w+N)*qu);this.index.add(j,q),this.keys.push(D),this.crossTileIDs.push(L)}this.index.finish()}findMatches(s,u,m){const _=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z),w=qu/Math.pow(2,u.canonical.z-this.tileID.canonical.z),C=u.canonical.x*o.ab,D=u.canonical.y*o.ab;for(let L=0;L<s.length;L++){const z=s.get(L);if(z.crossTileID)continue;const{key:N,tileAnchorX:j,tileAnchorY:q}=z,Z=Math.floor((C+j)*w),ne=Math.floor((D+q)*w),ie=this.index.range(Z-_,ne-_,Z+_,ne+_);for(const oe of ie){const ae=this.crossTileIDs[oe];if(this.keys[oe]===N&&!m.has(ae)){m.add(ae),z.crossTileID=ae;break}}}}}class nh{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class xx{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const u=Math.round((s-this.lng)/360);if(u!==0)for(const m in this.indexes){const _=this.indexes[m],w={};for(const C in _){const D=_[C];D.tileID=D.tileID.unwrapTo(D.tileID.wrap+u),w[D.tileID.key]=D}this.indexes[m]=w}this.lng=s}addBucket(s,u,m){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let w=0;w<u.symbolInstances.length;w++)u.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]=new Set);const _=this.usedCrossTileIDs[s.overscaledZ];for(const w in this.indexes){const C=this.indexes[w];if(Number(w)>s.overscaledZ)for(const D in C){const L=C[D];L.tileID.isChildOf(s)&&L.findMatches(u.symbolInstances,s,_)}else{const D=C[s.scaledTo(Number(w)).key];D&&D.findMatches(u.symbolInstances,s,_)}}for(let w=0;w<u.symbolInstances.length;w++){const C=u.symbolInstances.get(w);C.crossTileID||(C.crossTileID=m.generate(),_.add(C.crossTileID))}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new yT(s,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(s,u){for(const m of u.crossTileIDs)this.usedCrossTileIDs[s].delete(m)}removeStaleBuckets(s){let u=!1;for(const m in this.indexes){const _=this.indexes[m];for(const w in _)s[_[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,_[w]),delete _[w],u=!0)}return u}}class Op{constructor(){this.layerIndexes={},this.crossTileIDs=new nh,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,u,m,_){let w=this.layerIndexes[s.fqid];w===void 0&&(w=this.layerIndexes[s.fqid]=new xx);let C=!1;const D={};_.name!=="globe"&&w.handleWrapJump(m);for(const L of u){const z=L.getBucket(s);z&&s.fqid===z.layerIds[0]&&(z.bucketInstanceId||(z.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(L.tileID,z,this.crossTileIDs)&&(C=!0),D[z.bucketInstanceId]=!0)}return w.removeStaleBuckets(D)&&(C=!0),C}pruneUnusedLayers(s){const u={};s.forEach(m=>{u[m]=!0});for(const m in this.layerIndexes)u[m]||delete this.layerIndexes[m]}}const $a=771;class Nr{constructor(s,u,m,_){this.blendFunction=s,this.blendColor=u,this.mask=m,this.blendEquation=_}}Nr.Replace=[1,0,1,0],Nr.disabled=new Nr(Nr.Replace,o.bz.transparent,[!1,!1,!1,!1]),Nr.unblended=new Nr(Nr.Replace,o.bz.transparent,[!0,!0,!0,!0]),Nr.alphaBlended=new Nr([1,$a,1,$a],o.bz.transparent,[!0,!0,!0,!0]),Nr.alphaBlendedNonPremultiplied=new Nr([770,$a,770,$a],o.bz.transparent,[!0,!0,!0,!0]),Nr.multiply=new Nr([774,0,774,0],o.bz.transparent,[!0,!0,!0,!0]);class sr{constructor(s,u,m){this.func=s,this.mask=u,this.range=m}}sr.ReadOnly=!1,sr.ReadWrite=!0,sr.disabled=new sr(519,sr.ReadOnly,[0,1]);const k0=7680;class wr{constructor(s,u,m,_,w,C){this.test=s,this.ref=u,this.mask=m,this.fail=_,this.depthFail=w,this.pass=C}}wr.disabled=new wr({func:519,mask:0},0,0,k0,k0,k0);const R0=1029,Jd=2305;class mr{constructor(s,u,m){this.enable=s,this.mode=u,this.frontFace=m}}function L0(p,s){const u=o.bC(p,3);o.a6.mat4.fromQuat(p,s),o.bE(p,3,u)}function Up(p,s){const u=o.a6.quat.identity([]);return o.a6.quat.rotateZ(u,u,-s),o.a6.quat.rotateX(u,u,-p),u}function O0(p,s){const u=[p[0],p[1],0],m=[s[0],s[1],0];if(o.a6.vec3.length(u)>=1e-15){const C=o.a6.vec3.normalize([],u);o.a6.vec3.scale(m,C,o.a6.vec3.dot(m,C)),s[0]=m[0],s[1]=m[1]}const _=o.a6.vec3.cross([],s,p);if(o.a6.vec3.len(_)<1e-15)return null;const w=Math.atan2(-_[1],_[0]);return Up(Math.atan2(Math.sqrt(p[0]*p[0]+p[1]*p[1]),-p[2]),w)}mr.disabled=new mr(!1,R0,Jd),mr.backCCW=new mr(!0,R0,Jd),mr.backCW=new mr(!0,R0,2304),mr.frontCW=new mr(!0,1028,2304),mr.frontCCW=new mr(!0,1028,Jd);class Yc{constructor(s,u){this.position=s,this.orientation=u}get position(){return this._position}set position(s){if(s){const u=s instanceof o.a5?s:new o.a5(s[0],s[1],s[2]);this._renderWorldCopies&&(u.x=o.bA(u.x,0,1)),this._position=u}else this._position=null}lookAtPoint(s,u){if(this.orientation=null,!this.position)return;const m=this.position,_=this._elevation?this._elevation.getAtPointOrZero(o.a5.fromLngLat(s)):0,w=o.a5.fromLngLat(s,_),C=[w.x-m.x,w.y-m.y,w.z-m.z];u||(u=[0,0,1]),u[2]=Math.abs(u[2]),this.orientation=O0(C,u)}setPitchBearing(s,u){this.orientation=Up(o.bB(s),o.bB(-u))}}class Xu{constructor(s,u){this._transform=o.a6.mat4.identity([]),this.orientation=u,this.position=s}get mercatorPosition(){const s=this.position;return new o.a5(s[0],s[1],s[2])}get position(){const s=o.bC(this._transform,3);return[s[0],s[1],s[2]]}set position(s){var u;s&&o.bE(this._transform,3,[(u=s)[0],u[1],u[2],1])}get orientation(){return this._orientation}set orientation(s){this._orientation=s||o.a6.quat.identity([]),s&&L0(this._transform,this._orientation)}getPitchBearing(){const s=this.forward(),u=this.right();return{bearing:Math.atan2(-u[1],u[0]),pitch:Math.atan2(Math.sqrt(s[0]*s[0]+s[1]*s[1]),-s[2])}}setPitchBearing(s,u){this._orientation=Up(s,u),L0(this._transform,this._orientation)}forward(){const s=o.bC(this._transform,2);return[-s[0],-s[1],-s[2]]}up(){const s=o.bC(this._transform,1);return[-s[0],-s[1],-s[2]]}right(){const s=o.bC(this._transform,0);return[s[0],s[1],s[2]]}getCameraToWorld(s,u){const m=new Float64Array(16);return o.a6.mat4.invert(m,this.getWorldToCamera(s,u)),m}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(s,u,m){const _=this.position;o.a6.vec3.scale(_,_,-s);const w=new Float64Array(16);return o.a6.mat4.fromScaling(w,[m,m,m]),o.a6.mat4.translate(w,w,_),w[10]*=u,w}getWorldToCamera(s,u){const m=new Float64Array(16),_=new Float64Array(4),w=this.position;return o.a6.quat.conjugate(_,this._orientation),o.a6.vec3.scale(w,w,-s),o.a6.mat4.fromQuat(m,_),o.a6.mat4.translate(m,m,w),m[1]*=-1,m[5]*=-1,m[9]*=-1,m[13]*=-1,m[8]*=u,m[9]*=u,m[10]*=u,m[11]*=u,m}getCameraToClipPerspective(s,u,m,_){const w=new Float64Array(16);return o.a6.mat4.perspective(w,s,u,m,_),w}getCameraToClipOrthographic(s,u,m,_,w,C){const D=new Float64Array(16);return o.a6.mat4.ortho(D,s,u,m,_,w,C),D}getDistanceToElevation(s,u=!1){const m=s===0?0:o.bD(s,u?o.aM(this.position[1]):this.position[1]),_=this.forward();return(m-this.position[2])/_[2]}clone(){return new Xu([...this.position],[...this.orientation])}}const Ro={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class zp{constructor(s=0,u=0,m=0,_=0){if(isNaN(s)||s<0||isNaN(u)||u<0||isNaN(m)||m<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=u,this.left=m,this.right=_}interpolate(s,u,m){return u.top!=null&&s.top!=null&&(this.top=o.aa(s.top,u.top,m)),u.bottom!=null&&s.bottom!=null&&(this.bottom=o.aa(s.bottom,u.bottom,m)),u.left!=null&&s.left!=null&&(this.left=o.aa(s.left,u.left,m)),u.right!=null&&s.right!=null&&(this.right=o.aa(s.right,u.right,m)),this}getCenter(s,u){const m=o.ap((this.left+s-this.right)/2,0,s),_=o.ap((this.top+u-this.bottom)/2,0,u);return new o.P(m,_)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new zp(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const ih=(p,s,u)=>(1-u)*p+u*s,oh=p=>p*p*p*p*p;class Qp{constructor(s,u,m,_,w,C,D){this.tileSize=512,this._renderWorldCopies=w===void 0||w,this._minZoom=s||0,this._maxZoom=u||22,this._minPitch=m??0,this._maxPitch=_??60,this.setProjection(C),this.setMaxBounds(D),this.width=0,this.height=0,this._center=new o.bK(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new zp,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new Xu,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1}clone(){const s=new Qp(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return s._elevation=this._elevation,s._centerAltitude=this._centerAltitude,s._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,s.tileSize=this.tileSize,s.mercatorFromTransition=this.mercatorFromTransition,s.width=this.width,s.height=this.height,s.cameraElevationReference=this.cameraElevationReference,s._center=this._center,s._setZoom(this.zoom),s._seaLevelZoom=this._seaLevelZoom,s.angle=this.angle,s._fov=this._fov,s._pitch=this._pitch,s._nearZ=this._nearZ,s._farZ=this._farZ,s._averageElevation=this._averageElevation,s._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,s._unmodified=this._unmodified,s._edgeInsets=this._edgeInsets.clone(),s._camera=this._camera.clone(),s._calcMatrices(),s.freezeTileCoverage=this.freezeTileCoverage,s.frustumCorners=this.frustumCorners,s}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<15}get elevation(){return this._elevation}set elevation(s){this._elevation!==s&&(this._elevation=s,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(s,u=!1){const m=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||m)&&this._updateCameraOnTerrain(),(s||m)&&this._constrainCamera(u),this._calcMatrices()}getProjection(){return o.ar(this.projection,["name","center","parallels"])}setProjection(s){this.projectionOptions=s||{name:"mercator"};const u=this.projection?this.getProjection():void 0;this.projection=o.bL(this.projectionOptions);const m=this.getProjection(),_=!o.bh(u,m);return _&&this._calcMatrices(),this.mercatorFromTransition=!1,_}setOrthographicProjectionAtLowPitch(s){return this._orthographicProjectionAtLowPitch!==s&&(this._orthographicProjectionAtLowPitch=s,this._calcMatrices(),!0)}setMercatorFromTransition(){const s=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=o.bL({name:"mercator"});const u=s!==this.projection.name;return u&&this._calcMatrices(),u}get minZoom(){return this._minZoom}set minZoom(s){this._minZoom!==s&&(this._minZoom=s,this.zoom=Math.max(this.zoom,s))}get maxZoom(){return this._maxZoom}set maxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.zoom=Math.min(this.zoom,s))}get minPitch(){return this._minPitch}set minPitch(s){this._minPitch!==s&&(this._minPitch=s,this.pitch=Math.max(this.pitch,s))}get maxPitch(){return this._maxPitch}set maxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.pitch=Math.min(this.pitch,s))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const s=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(s))}get cameraWorldSize(){const s=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(s))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return o.bD(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this.width,this.height)}get bearing(){return o.bA(this.rotation,-180,180)}set bearing(s){this.rotation=s}get rotation(){return-this.angle/Math.PI*180}set rotation(s){const u=-s*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=o.a6.mat2.create(),o.a6.mat2.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(s){const u=o.ap(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const s=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/s)}set fov(s){s=Math.max(.01,Math.min(60,s)),this._fov!==s&&(this._unmodified=!1,this._fov=o.bB(s),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(s){this._averageElevation=s,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(s){const u=Math.min(Math.max(s,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._setZoom(u),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(s){this._zoom=s,this.scale=this.zoomScale(s),this.tileZoom=Math.floor(s),this.zoomFraction=s-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(s){this._tileCoverLift!==s&&(this._tileCoverLift=s)}_updateCameraOnTerrain(){const s=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,u=this.elevation&&s===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||s===Number.NEGATIVE_INFINITY&&(!u||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const m=this._elevation;u||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&m.exaggeration()&&this._centerAltitudeValidForExaggeration!==m.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*m.exaggeration(),this._centerAltitudeValidForExaggeration=m.exaggeration()):(this._centerAltitude=s||0,this._centerAltitudeValidForExaggeration=m.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const s=this._elevation,u=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],m=this.horizonLineFromTop();let _=0,w=0;for(let C=0;C<u.length;C++){const D=new o.P(u[C][0]*this.width,m+u[C][1]*(this.height-m)),L=s.pointCoordinate(D);if(!L)continue;const z=1/Math.hypot(L[0]-this._camera.position[0],L[1]-this._camera.position[1]);_+=L[3]*z,w+=z}return w===0?NaN:_/w}get center(){return this._center}set center(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const s=this._seaLevelZoom,u=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),m=this.pixelsPerMeter/this.worldSize*u,_=this._mercatorZfromZoom(s),w=this._mercatorZfromZoom(this._maxZoom),C=Math.max(_-m,w);this._setZoom(this._zoomFromMercatorZ(C))}get padding(){return this._edgeInsets.toJSON()}set padding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}computeZoomRelativeTo(s){const u=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,s.toAltitude()));let m;m=s.z<this._camera.position[2]?[u.x,u.y,u.z]:[s.x,s.y,s.z];const _=o.a6.vec3.length(o.a6.vec3.sub([],this._camera.position,m));return o.ap(this._zoomFromMercatorZ(_),this._minZoom,this._maxZoom)}setFreeCameraOptions(s){if(!this.height||!s.position&&!s.orientation)return;this._updateCameraState();let u=!1;if(s.orientation&&!o.a6.quat.exactEquals(s.orientation,this._camera.orientation)&&(u=this._setCameraOrientation(s.orientation)),s.position){const m=[s.position.x,s.position.y,s.position.z];o.a6.vec3.exactEquals(m,this._camera.position)||(this._setCameraPosition(m),u=!0)}u&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const s=this._camera.position,u=new Yc;return u.position=new o.a5(s[0],s[1],s[2]),u.orientation=this._camera.orientation,u._elevation=this.elevation,u._renderWorldCopies=this.renderWorldCopies,u}_setCameraOrientation(s){if(!o.a6.quat.length(s))return!1;o.a6.quat.normalize(s,s);const u=o.a6.vec3.transformQuat([],[0,0,-1],s),m=o.a6.vec3.transformQuat([],[0,-1,0],s);if(m[2]<0)return!1;const _=O0(u,m);return!!_&&(this._camera.orientation=_,!0)}_setCameraPosition(s){const u=this.zoomScale(this.minZoom)*this.tileSize,m=this.zoomScale(this.maxZoom)*this.tileSize,_=this.cameraToCenterDistance;s[2]=o.ap(s[2],_/m,_/u),this._camera.position=s}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,u,m){this._unmodified=!1,this._edgeInsets.interpolate(s,u,m),this._constrain(),this._calcMatrices()}coveringZoomLevel(s){const u=(s.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/s.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(s){const u=[new o.bM(0,s)];if(this.renderWorldCopies){const m=this.pointCoordinate(new o.P(0,0)),_=this.pointCoordinate(new o.P(this.width,0)),w=this.pointCoordinate(new o.P(this.width,this.height)),C=this.pointCoordinate(new o.P(0,this.height)),D=Math.floor(Math.min(m.x,_.x,w.x,C.x)),L=Math.floor(Math.max(m.x,_.x,w.x,C.x)),z=1;for(let N=D-z;N<=L+z;N++)N!==0&&u.push(new o.bM(N,s))}return u}isLODDisabled(s){return(!s||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(s,u,m){let _=[];const w=m!==void 0,C=!w;if(C&&this.zoom<u||w&&m[0]===0&&m[1]===0)return _;const D=new Set,L=(N,j,q,Z,ne)=>{const ie=o.c1(j,N,q,Z,ne);D.has(ie)||(_.push(new o.aA(N,j,q,Z,ne)),D.add(ie))};for(let N=0;N<s.length;N++){const j=s[N];if(C&&j.canonical.z!==u)continue;const q=j.canonical,Z=j.overscaledZ,ne=j.wrap,ie=1<<q.z,oe=q.x+1<ie,ae=q.x>0,ge=q.y+1<ie,ye=q.y>0,pe=j.wrap-(ae?0:1),we=j.wrap+(oe?0:1),be=ae?q.x-1:ie-1,Fe=oe?q.x+1:0;if(w)m[0]<0?(L(Z,we,q.z,Fe,q.y),m[1]<0&&ge&&(L(Z,ne,q.z,q.x,q.y+1),L(Z,we,q.z,Fe,q.y+1)),m[1]>0&&ye&&(L(Z,ne,q.z,q.x,q.y-1),L(Z,we,q.z,Fe,q.y-1))):m[0]>0?(L(Z,pe,q.z,be,q.y),m[1]<0&&ge&&(L(Z,ne,q.z,q.x,q.y+1),L(Z,pe,q.z,be,q.y+1)),m[1]>0&&ye&&(L(Z,ne,q.z,q.x,q.y-1),L(Z,pe,q.z,be,q.y-1))):m[1]<0&&ge?L(Z,ne,q.z,q.x,q.y+1):ye&&L(Z,ne,q.z,q.x,q.y-1);else{const Ee=j.visibleQuadrants;1&Ee&&(L(Z,pe,q.z,be,q.y),ye&&(L(Z,ne,q.z,q.x,q.y-1),L(Z,pe,q.z,be,q.y-1))),2&Ee&&(L(Z,we,q.z,Fe,q.y),ye&&(L(Z,ne,q.z,q.x,q.y-1),L(Z,we,q.z,Fe,q.y-1))),4&Ee&&(L(Z,pe,q.z,be,q.y),ge&&(L(Z,ne,q.z,q.x,q.y+1),L(Z,pe,q.z,be,q.y+1))),8&Ee&&(L(Z,we,q.z,Fe,q.y),ge&&(L(Z,ne,q.z,q.x,q.y+1),L(Z,we,q.z,Fe,q.y+1)))}}const z=[];for(const N of _)_.some(j=>N.isChildOf(j))||z.push(N);if(_=z.filter(N=>!s.some(j=>!!(N.overscaledZ<u&&j.isChildOf(N))||N.equals(j)||N.isChildOf(j))),C){const N=1<<u,j=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),q=[N*j.x,N*j.y],Z=4,ne=Z*Z;_=_.filter(ie=>{const oe=ie.canonical.x+.5-q[0],ae=ie.canonical.y+.5-q[1];return oe*oe+ae*ae<ne})}return _}coveringTiles(s){let u=this.coveringZoomLevel(s);const m=u,_=this.elevation&&this.elevation.exaggeration(),w=_&&!s.isTerrainDEM,C=this.projection.name==="mercator";if(s.minzoom!==void 0&&u<s.minzoom)return[];s.maxzoom!==void 0&&u>s.maxzoom&&(u=s.maxzoom);const D=this.locationCoordinate(this.center),L=this.center.lat,z=1<<u,N=[z*D.x,z*D.y,0],j=this.projection.name==="globe",q=!j,Z=o.bN.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,u,q),ne=j?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ie=z*o.bD(1,this.center.lat),oe=this._camera.position[2]/o.bD(1,this.center.lat),ae=[z*ne.x,z*ne.y,oe*(q?1:ie)],ge=j||_,ye=this.cameraToCenterDistance/s.tileSize*(s.roundZoom?1:.502),pe=this.isLODDisabled(!0)?u:0;let we;if(this._elevation&&s.isTerrainDEM)we=1e4*this._elevation.exaggeration();else if(this._elevation){const Ye=this._elevation.getMinMaxForVisibleTiles();we=Ye?Ye.max:this._centerAltitude}else we=this._centerAltitude;const be=s.isTerrainDEM?-we:this._elevation?this._elevation.getMinElevationBelowMSL():0,Fe=this.projection.isReprojectedInTileSpace?o.bO(this):1,Ee=Ye=>{const ft=new o.a5(Ye.x+25e-6,Ye.y,Ye.z),Tt=new o.a5(Ye.x,Ye.y+25e-6,Ye.z),Mt=Ye.toLngLat(),yt=ft.toLngLat(),bt=Tt.toLngLat(),ir=this.locationCoordinate(Mt),Lt=this.locationCoordinate(yt),Ht=this.locationCoordinate(bt),ur=Math.hypot(Lt.x-ir.x,Lt.y-ir.y),Zt=Math.hypot(Ht.x-ir.x,Ht.y-ir.y);return Math.sqrt(ur*Zt)*Fe/25e-6},Me=Ye=>{const mt=we,ft=be;return{aabb:o.bR(this,z,0,0,0,Ye,ft,mt,this.projection),zoom:0,x:0,y:0,minZ:ft,maxZ:mt,wrap:Ye,fullyVisible:!1}},Qe=[];let Re=[];const Pe=u,Xe=s.reparseOverscaled?m:u,ct=(oe-this._centerAltitude)*ie,_t=Ye=>{if(!this._elevation||!Ye.tileID||!C)return;const mt=this._elevation.getMinMaxForTile(Ye.tileID),ft=Ye.aabb;mt?(ft.min[2]=mt.min,ft.max[2]=mt.max,ft.center[2]=(ft.min[2]+ft.max[2])/2):(Ye.shouldSplit=St(Ye),Ye.shouldSplit||(ft.min[2]=ft.max[2]=ft.center[2]=this._centerAltitude))},lt=(Ye,mt)=>{if(.707*mt<Ye)return 1;const ft=mt/Ye;return ft/(1.4144271570014144+(Math.pow(1.1,ft-1.4144271570014144+1)-1)/(1.1-1)-1)},St=Ye=>{if(Ye.zoom<pe)return!0;if(Ye.zoom===Pe)return!1;if(Ye.shouldSplit!=null)return Ye.shouldSplit;const mt=Ye.aabb.distanceX(ae),ft=Ye.aabb.distanceY(ae);let Tt=ct,Mt=1;if(j){Tt=Ye.aabb.distanceZ(ae);const Zt=Math.pow(2,Ye.zoom),lr=o.aM((Ye.y+1)/Zt),Dr=o.aM(Ye.y/Zt),Ir=Math.min(Math.max(L,lr),Dr),Cn=o.c5(Ir)/o.c5(L);if(Mt=Ir===L?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Cn/this._mercatorScaleRatio),this.zoom<=o.c2&&Ye.zoom===Pe-1&&Cn>=.9)return!0}else if(w&&(Tt=Ye.aabb.distanceZ(ae)*ie),this.projection.isReprojectedInTileSpace&&m<=5){const Zt=Math.pow(2,Ye.zoom),lr=Ee(new o.a5((Ye.x+.5)/Zt,(Ye.y+.5)/Zt));Mt=lr>.85?1:lr}if(!C){const Zt=Math.sqrt(mt*mt+ft*ft+Tt*Tt);let lr=(1<<Pe-Ye.zoom)*ye*Mt;return lr*=lt(Math.max(Tt,ct),Zt),Zt<lr}let yt=Number.MAX_VALUE,bt=0;const ir=Ye.aabb.getCorners(),Lt=[];for(const Zt of ir){o.a6.vec3.sub(Lt,Zt,ae),j||(w?Lt[2]*=ie:Lt[2]=ct);const lr=o.a6.vec3.dot(Lt,this._camera.forward());lr<yt&&(yt=lr,bt=Math.abs(Lt[2]))}let Ht=(1<<Pe-Ye.zoom)*ye*Mt;if(Ht*=lt(Math.max(bt,ct),yt),yt<Ht)return!0;const ur=Ye.aabb.closestPoint(N);return ur[0]===N[0]&&ur[1]===N[1]};if(this.renderWorldCopies)for(let Ye=1;Ye<=3;Ye++)Qe.push(Me(-Ye)),Qe.push(Me(Ye));for(Qe.push(Me(0));Qe.length>0;){const Ye=Qe.pop(),mt=Ye.x,ft=Ye.y;let Tt=Ye.fullyVisible;const Mt=()=>this.projection.name==="globe"&&(Ye.y===0||Ye.y===(1<<Ye.zoom)-1);if(!Tt){let yt=ge?Ye.aabb.intersects(Z):Ye.aabb.intersectsFlat(Z);if(yt===0&&Mt()){const bt=new o.bP(Ye.zoom,mt,ft);yt=o.bQ(this,z,bt,!0).intersects(Z)}if(yt===0)continue;Tt=yt===2}if(Ye.zoom!==Pe&&St(Ye))for(let yt=0;yt<4;yt++){const bt=(mt<<1)+yt%2,ir=(ft<<1)+(yt>>1),Lt={aabb:C?Ye.aabb.quadrant(yt):o.bR(this,z,Ye.zoom+1,bt,ir,Ye.wrap,Ye.minZ,Ye.maxZ,this.projection),zoom:Ye.zoom+1,x:bt,y:ir,wrap:Ye.wrap,fullyVisible:Tt,tileID:void 0,shouldSplit:void 0,minZ:Ye.minZ,maxZ:Ye.maxZ};w&&!j&&(Lt.tileID=new o.aA(Ye.zoom+1===Pe?Xe:Ye.zoom+1,Ye.wrap,Ye.zoom+1,bt,ir),_t(Lt)),Qe.push(Lt)}else{const yt=Ye.zoom===Pe?Xe:Ye.zoom;if(s.minzoom&&s.minzoom>yt)continue;let bt=0;if(!Tt){let ur=ge?Ye.aabb.intersectsPrecise(Z):Ye.aabb.intersectsPreciseFlat(Z);if(ur===0&&Mt()){const Zt=new o.bP(Ye.zoom,mt,ft);ur=o.bQ(this,z,Zt,!0).intersectsPrecise(Z)}if(ur===0)continue;if(s.calculateQuadrantVisibility)if(Z.containsPoint(Ye.aabb.center))bt=15;else for(let Zt=0;Zt<4;Zt++)Ye.aabb.quadrant(Zt).intersects(Z)!==0&&(bt|=1<<Zt)}const ir=N[0]-(.5+mt+(Ye.wrap<<Ye.zoom))*(1<<u-Ye.zoom),Lt=N[1]-.5-ft,Ht=Ye.tileID?Ye.tileID:new o.aA(yt,Ye.wrap,Ye.zoom,mt,ft);s.calculateQuadrantVisibility&&(Ht.visibleQuadrants=bt),Re.push({tileID:Ht,distanceSq:ir*ir+Lt*Lt})}}if(this.fogCullDistSq){const Ye=this.fogCullDistSq,mt=this.horizonLineFromTop();Re=Re.filter(ft=>{const Tt=[0,0,0,1],Mt=[o.ab,o.ab,0,1],yt=this.calculateFogTileMatrix(ft.tileID.toUnwrapped());o.a6.vec4.transformMat4(Tt,Tt,yt),o.a6.vec4.transformMat4(Mt,Mt,yt);const bt=o.a6.vec4.min([],Tt,Mt),ir=o.a6.vec4.max([],Tt,Mt),Lt=o.bS(bt,ir);if(Lt===0)return!0;let Ht=!1;const ur=this._elevation;if(ur&&Lt>Ye&&mt!==0){const Zt=this.calculateProjMatrix(ft.tileID.toUnwrapped());let lr;s.isTerrainDEM||(lr=ur.getMinMaxForTile(ft.tileID)),lr||(lr={min:be,max:we});const Dr=o.c3(this.rotation),Ir=[Dr[0]*o.ab,Dr[1]*o.ab,lr.max];o.a6.vec3.transformMat4(Ir,Ir,Zt),Ht=(1-Ir[1])*this.height*.5<mt}return Lt<Ye||Ht})}return Re.sort((Ye,mt)=>Ye.distanceSq-mt.distanceSq).map(Ye=>Ye.tileID)}resize(s,u){this.width=s,this.height=u,this.pixelsToGLUnits=[2/s,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(s){return Math.pow(2,s)}scaleZoom(s){return Math.log(s)/Math.LN2}project(s){const u=o.ap(s.lat,-o.bT,o.bT),m=this.projection.project(s.lng,u);return new o.P(m.x*this.worldSize,m.y*this.worldSize)}unproject(s){return this.projection.unproject(s.x/this.worldSize,s.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/o.bD(1,this.center.lat)/this.worldSize}setLocationAtPoint(s,u){let m,_;const w=this.centerPoint;if(this.projection.name==="globe"){const D=this.worldSize;m=(u.x-w.x)/D,_=(u.y-w.y)/D}else{const D=this.pointCoordinate(u),L=this.pointCoordinate(w);m=D.x-L.x,_=D.y-L.y}const C=this.locationCoordinate(s);this.setLocation(new o.a5(C.x-m,C.y-_))}setLocation(s){this.center=this.coordinateLocation(s),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(s){return this.projection.locationPoint(this,s)}locationPoint3D(s){return this.projection.locationPoint(this,s,!0)}pointLocation(s){return this.coordinateLocation(this.pointCoordinate(s))}pointLocation3D(s){return this.coordinateLocation(this.pointCoordinate3D(s))}locationCoordinate(s,u){const m=u?o.bD(u,s.lat):void 0,_=this.projection.project(s.lng,s.lat);return new o.a5(_.x,_.y,m)}coordinateLocation(s){return this.projection.unproject(s.x,s.y)}pointRayIntersection(s,u){const m=u??this._centerAltitude,_=[s.x,s.y,0,1],w=[s.x,s.y,1,1];o.a6.vec4.transformMat4(_,_,this.pixelMatrixInverse),o.a6.vec4.transformMat4(w,w,this.pixelMatrixInverse);const C=w[3];o.a6.vec4.scale(_,_,1/_[3]),o.a6.vec4.scale(w,w,1/C);const D=_[2],L=w[2];return{p0:_,p1:w,t:D===L?0:(m-D)/(L-D)}}screenPointToMercatorRay(s){const u=[s.x,s.y,0,1],m=[s.x,s.y,1,1];return o.a6.vec4.transformMat4(u,u,this.pixelMatrixInverse),o.a6.vec4.transformMat4(m,m,this.pixelMatrixInverse),o.a6.vec4.scale(u,u,1/u[3]),o.a6.vec4.scale(m,m,1/m[3]),u[2]=o.bD(u[2],this._center.lat)*this.worldSize,m[2]=o.bD(m[2],this._center.lat)*this.worldSize,o.a6.vec4.scale(u,u,1/this.worldSize),o.a6.vec4.scale(m,m,1/this.worldSize),new o.aj([u[0],u[1],u[2]],o.a6.vec3.normalize([],o.a6.vec3.sub([],m,u)))}rayIntersectionCoordinate(s){const{p0:u,p1:m,t:_}=s,w=o.bD(u[2],this._center.lat),C=o.bD(m[2],this._center.lat);return new o.a5(o.aa(u[0],m[0],_)/this.worldSize,o.aa(u[1],m[1],_)/this.worldSize,o.aa(w,C,_))}pointCoordinate(s,u=this._centerAltitude){return this.projection.pointCoordinate(this,s.x,s.y,u)}pointCoordinate3D(s){if(!this.elevation)return this.pointCoordinate(s);let u=this.projection.pointCoordinate3D(this,s.x,s.y);if(u)return new o.a5(u[0],u[1],u[2]);let m=0,_=this.horizonLineFromTop();if(s.y>_)return this.pointCoordinate(s);const w=.02*_,C=s.clone();for(let D=0;D<10&&_-m>w;D++){C.y=o.aa(m,_,.66);const L=this.projection.pointCoordinate3D(this,C.x,C.y);L?(_=C.y,u=L):m=C.y}return u?new o.a5(u[0],u[1],u[2]):this.pointCoordinate(s)}isPointAboveHorizon(s){return this.projection.isPointAboveHorizon(this,s)}isPointOnSurface(s){if(s.y<0||s.y>this.height||s.x<0||s.x>this.width)return!1;if(this.elevation||this.zoom>=o.bU)return!this.isPointAboveHorizon(s);const u=this.pointCoordinate(s);return u.y>=0&&u.y<=1}_coordinatePoint(s,u){const m=u&&this.elevation?this.elevation.getAtPointOrZero(s,this._centerAltitude):this._centerAltitude,_=[s.x*this.worldSize,s.y*this.worldSize,m+s.toAltitude(),1];return o.a6.vec4.transformMat4(_,_,this.pixelMatrix),_[3]>0?new o.P(_[0]/_[3],_[1]/_[3]):new o.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:s,left:u}=this._edgeInsets,m=this.height-this._edgeInsets.bottom,_=this.width-this._edgeInsets.right,w=this.pointLocation3D(new o.P(u,s)),C=this.pointLocation3D(new o.P(_,s)),D=this.pointLocation3D(new o.P(_,m)),L=this.pointLocation3D(new o.P(u,m));let z=Math.min(w.lng,C.lng,D.lng,L.lng),N=Math.max(w.lng,C.lng,D.lng,L.lng),j=Math.min(w.lat,C.lat,D.lat,L.lat),q=Math.max(w.lat,C.lat,D.lat,L.lat);const Z=Math.pow(2,-this.zoom)/16*270,ne=this.projection.name==="globe"?1:4,ie=(oe,ae,ge,ye,pe)=>{const we=(oe+ge)/2,be=(ae+ye)/2,Fe=new o.P(we,be),{lng:Ee,lat:Me}=this.pointLocation3D(Fe),Qe=Math.max(0,z-Ee,j-Me,Ee-N,Me-q);z=Math.min(z,Ee),N=Math.max(N,Ee),j=Math.min(j,Me),q=Math.max(q,Me),(pe<ne||Qe>Z)&&(ie(oe,ae,we,be,pe+1),ie(we,be,ge,ye,pe+1))};if(ie(u,s,_,s,1),ie(_,s,_,m,1),ie(_,m,u,m,1),ie(u,m,u,s,1),this.projection.name==="globe"){const[oe,ae]=o.bV(this);oe?(q=90,N=180,z=-180):ae&&(j=-90,N=180,z=-180)}return new o.as(new o.bK(z,j),new o.bK(N,q))}_getBoundsRectangular(s,u){const{top:m,left:_}=this._edgeInsets,w=this.height-this._edgeInsets.bottom,C=this.width-this._edgeInsets.right,D=new o.P(_,m),L=new o.P(C,m),z=new o.P(C,w),N=new o.P(_,w);let j=this.pointCoordinate(D,s),q=this.pointCoordinate(L,s);const Z=this.pointCoordinate(z,u),ne=this.pointCoordinate(N,u),ie=(oe,ae)=>(ae.y-oe.y)/(ae.x-oe.x);return j.y>1&&q.y>=0?j=new o.a5((1-ne.y)/ie(ne,j)+ne.x,1):j.y<0&&q.y<=1&&(j=new o.a5(-ne.y/ie(ne,j)+ne.x,0)),q.y>1&&j.y>=0?q=new o.a5((1-Z.y)/ie(Z,q)+Z.x,1):q.y<0&&j.y<=1&&(q=new o.a5(-Z.y/ie(Z,q)+Z.x,0)),new o.as().extend(this.coordinateLocation(j)).extend(this.coordinateLocation(q)).extend(this.coordinateLocation(ne)).extend(this.coordinateLocation(Z))}_getBoundsRectangularTerrain(){const s=this.elevation;if(!s.visibleDemTiles.length||s.isUsingMockSource())return this._getBoundsRectangular(0,0);const u=s.visibleDemTiles.reduce((m,_)=>{if(_.dem){const w=_.dem.tree;m.min=Math.min(m.min,w.minimums[0]),m.max=Math.max(m.max,w.maximums[0])}return m},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(u.min*s.exaggeration(),u.max*s.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(s=!0){const u=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,m=this.height/2-u*(1-this._horizonShift);return s?Math.max(0,m):m}getMaxBounds(){return this.maxBounds}setMaxBounds(s){this.maxBounds=s,this.minLat=-o.bT,this.maxLat=o.bT,this.minLng=-180,this.maxLng=180,s&&(this.minLat=s.getSouth(),this.maxLat=s.getNorth(),this.minLng=s.getWest(),this.maxLng=s.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=o.am(this.minLng)*this.tileSize,this.worldMaxX=o.am(this.maxLng)*this.tileSize,this.worldMinY=o.at(this.maxLat)*this.tileSize,this.worldMaxY=o.at(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(s,u){return this.projection.createTileMatrix(this,u,s)}calculateDistanceTileData(s){const u=s.key,m=this._distanceTileDataCache;if(m[u])return m[u];const _=s.canonical,w=1/this.height,C=this.cameraWorldSize,D=C/this.zoomScale(_.z),L=(_.x+Math.pow(2,_.z)*s.wrap)*D,z=_.y*D,N=this.point;N.x*=C/this.worldSize,N.y*=C/this.worldSize;const j=this.angle,q=Math.sin(-j),Z=-Math.cos(-j);return m[u]={bearing:[q,Z],center:[(N.x-L)*w,(N.y-z)*w],scale:D/o.ab*w},m[u]}calculateFogTileMatrix(s){const u=s.key,m=this._fogTileMatrixCache;if(m[u])return m[u];const _=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,s);return o.a6.mat4.multiply(_,this.worldToFogMatrix,_),m[u]=new Float32Array(_),m[u]}calculateProjMatrix(s,u=!1,m=!1){const _=s.key;let w;if(w=m?this._expandedProjMatrixCache:u?this._alignedProjMatrixCache:this._projMatrixCache,w[_])return w[_];const C=this.calculatePosMatrix(s,this.worldSize);let D;return D=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:m?this.expandedFarZProjMatrix:u?this.alignedProjMatrix:this.projMatrix,o.a6.mat4.multiply(C,D,C),w[_]=new Float32Array(C),w[_]}calculatePixelsToTileUnitsMatrix(s){const u=s.tileID.key,m=this._pixelsToTileUnitsCache;if(m[u])return m[u];const _=o.bW(s,this);return m[u]=_,m[u]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const s=1/this.worldSize,u=o.a6.mat4.fromScaling([],[s,s,s]);return o.a6.mat4.multiply(u,u,this.globeMatrix),u}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const s=this._elevation;this._updateCameraState();const u=o.bD(1,this._center.lat)*this.worldSize,m=this._computeCameraPosition(u),_=this._camera.forward(),w=o.bD(1,this._center.lat);m[2]/=w,_[2]/=w,o.a6.vec3.normalize(_,_);const C=s.raycast(m,_,s.exaggeration());if(C){const D=o.a6.vec3.scaleAndAdd([],m,_,C),L=new o.a5(D[0],D[1],o.bD(D[2],o.aM(D[1]))),z=(L.z+o.a6.vec3.length([L.x-m[0],L.y-m[1],L.z-m[2]*w]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(z),this._centerAltitude=L.toAltitude(),this._center=this.coordinateLocation(L),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(s=!1){if(!this._elevation)return;const u=this._elevation,m=o.bD(1,this._center.lat)*this.worldSize,_=this._computeCameraPosition(m),w=u.getAtPointOrZero(new o.a5(..._)),C=this.pixelsPerMeter/this.worldSize*w,D=this._minimumHeightOverTerrain(),L=_[2]-C;if(L<=D)if(L<0||s){const z=this.locationCoordinate(this._center,this._centerAltitude),N=[_[0],_[1],z.z-_[2]],j=o.a6.vec3.length(N);N[2]-=(D-L)/this._pixelsPerMercatorPixel;const q=o.a6.vec3.length(N);if(q===0)return;o.a6.vec3.scale(N,N,j/q*this._pixelsPerMercatorPixel),this._camera.position=[_[0],_[1],z.z*this._pixelsPerMercatorPixel-N[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const s=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||s){const q=this.center;return q.lat=o.ap(q.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!s)&&(q.lng=o.ap(q.lng,this.minLng,this.maxLng)),this.center=q,void(this._constraining=!1)}const u=this._unmodified,{x:m,y:_}=this.point;let w=0,C=m,D=_;const L=this.width/2,z=this.height/2,N=this.worldMinY*this.scale,j=this.worldMaxY*this.scale;if(_-z<N&&(D=N+z),_+z>j&&(D=j-z),j-N<this.height&&(w=Math.max(w,this.height/(j-N)),D=(j+N)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const q=this.worldMinX*this.scale,Z=this.worldMaxX*this.scale,ne=this.worldSize/2-(q+Z)/2;C=(m+ne+this.worldSize)%this.worldSize-ne,C-L<q&&(C=q+L),C+L>Z&&(C=Z-L),Z-q<this.width&&(w=Math.max(w,this.width/(Z-q)),C=(Z+q)/2)}C===m&&D===_||(this.center=this.unproject(new o.P(C,D))),w&&(this.zoom+=this.scaleZoom(w)),this._constrainCamera(),this._unmodified=u,this._constraining=!1}_minZoomForBounds(){let s=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(s=Math.max(s,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),s}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const s=this.centerOffset,u=this.projection.name==="globe",m=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=o.bD(1,this.center.lat)/o.bD(1,o.c4));const _=o.bX(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,_),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const w=this.projection.zAxisUnit==="meters"?m:1,C=this._camera.getWorldToCamera(this.worldSize,w);let D;const L=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(L[8]=2*-s.x/this.width,L[9]=2*s.y/this.height,this.isOrthographic){let Me=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),Qe=Me*this.aspect,Re=-Qe,Pe=-Me;Qe-=s.x,Re-=s.x,Me+=s.y,Pe+=s.y,D=this._camera.getCameraToClipOrthographic(Re,Qe,Pe,Me,this._nearZ,this._farZ),((Xe,ct,_t,lt)=>{for(let St=0;St<16;St++)Xe[St]=ih(ct[St],_t[St],lt)})(D,D,L,oh(this.pitch>=15?1:this.pitch/15))}else D=L;const z=o.a6.mat4.mul([],L,C);let N=o.a6.mat4.mul([],D,C);if(this.projection.isReprojectedInTileSpace){const Me=this.locationCoordinate(this.center),Qe=o.a6.mat4.identity([]);o.a6.mat4.translate(Qe,Qe,[Me.x*this.worldSize,Me.y*this.worldSize,0]),o.a6.mat4.multiply(Qe,Qe,o.bY(this)),o.a6.mat4.translate(Qe,Qe,[-Me.x*this.worldSize,-Me.y*this.worldSize,0]),o.a6.mat4.multiply(N,N,Qe),o.a6.mat4.multiply(z,z,Qe),this.inverseAdjustmentMatrix=o.bZ(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=o.a6.mat4.scale([],N,[this.worldSize,this.worldSize,this.worldSize/w,1]),this.projMatrix=N,this.invProjMatrix=o.a6.mat4.invert(new Float64Array(16),this.projMatrix),u){const Me=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);Me[8]=2*-s.x/this.width,Me[9]=2*s.y/this.height,this.expandedFarZProjMatrix=o.a6.mat4.mul([],Me,C)}else this.expandedFarZProjMatrix=this.projMatrix;const j=o.a6.mat4.invert([],D);this.frustumCorners=o.b_.fromInvProjectionMatrix(j,this.horizonLineFromTop(),this.height),this.cameraFrustum=o.bN.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!u);const q=new Float32Array(16);o.a6.mat4.identity(q),o.a6.mat4.scale(q,q,[1,-1,1]),o.a6.mat4.rotateX(q,q,this._pitch),o.a6.mat4.rotateZ(q,q,this.angle);const Z=o.a6.mat4.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=o.a6.mat4.clone(Z);const ne=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;Z[8]=2*-s.x/this.width,Z[9]=2*(s.y+ne)/this.height,this.skyboxMatrix=o.a6.mat4.multiply(q,Z,q);const ie=this.point,oe=ie.x,ae=ie.y,ge=this.width%2/2,ye=this.height%2/2,pe=Math.cos(this.angle),we=Math.sin(this.angle),be=oe-Math.round(oe)+pe*ge+we*ye,Fe=ae-Math.round(ae)+pe*ye+we*ge,Ee=new Float64Array(N);if(o.a6.mat4.translate(Ee,Ee,[be>.5?be-1:be,Fe>.5?Fe-1:Fe,0]),this.alignedProjMatrix=Ee,N=o.a6.mat4.create(),o.a6.mat4.scale(N,N,[this.width/2,-this.height/2,1]),o.a6.mat4.translate(N,N,[1,-1,0]),this.labelPlaneMatrix=N,N=o.a6.mat4.create(),o.a6.mat4.scale(N,N,[1,-1,1]),o.a6.mat4.translate(N,N,[-1,-1,0]),o.a6.mat4.scale(N,N,[2/this.width,2/this.height,1]),this.glCoordMatrix=N,this.pixelMatrix=o.a6.mat4.multiply(new Float64Array(16),this.labelPlaneMatrix,z),this._calcFogMatrices(),this._distanceTileDataCache={},N=o.a6.mat4.invert(new Float64Array(16),this.pixelMatrix),!N)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=N,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=o.b$(this);const Me=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=o.a6.vec3.transformMat4(Me,Me,C),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=N;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const s=this.cameraWorldSizeForFog,u=this.cameraPixelsPerMeter,m=this._camera.position,_=1/this.height/this._pixelsPerMercatorPixel,w=[s,s,u];o.a6.vec3.scale(w,w,_),o.a6.vec3.scale(m,m,-1),o.a6.vec3.multiply(m,m,w);const C=o.a6.mat4.create();o.a6.mat4.translate(C,C,m),o.a6.mat4.scale(C,C,w),this.mercatorFogMatrix=C,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(s,u,_)}_computeCameraPosition(s){const u=(s=s||this.pixelsPerMeter)/this.pixelsPerMeter,m=this._camera.forward(),_=this.point,w=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*u-s/this.worldSize*this._centerAltitude;return[_.x/this.worldSize-m[0]*w,_.y/this.worldSize-m[1]*w,s/this.worldSize*this._centerAltitude-m[2]*w]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(s){const u=this._maxCameraBoundsDistance()*Math.cos(this._pitch),m=this._camera.position[2],_=s[2];let w=1;this.projection.wrap&&(this.center=this.center.wrap()),_>0&&(w=Math.min((u-m)/_,1)),this._camera.position=o.a6.vec3.scaleAndAdd([],this._camera.position,s,w),this._updateStateFromCamera()}_updateStateFromCamera(){const s=this._camera.position,u=this._camera.forward(),{pitch:m,bearing:_}=this._camera.getPitchBearing(),w=o.bD(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,C=this._mercatorZfromZoom(this._maxZoom)*Math.cos(o.bB(this._maxPitch)),D=Math.max((s[2]-w)/Math.cos(m),C),L=this._zoomFromMercatorZ(D);o.a6.vec3.scaleAndAdd(s,s,u,D),this._pitch=o.ap(m,o.bB(this.minPitch),o.bB(this.maxPitch)),this.angle=o.bA(_,-Math.PI,Math.PI),this._setZoom(o.ap(L,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new o.a5(s[0],s[1],s[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(s){return Math.pow(2,s)*this.tileSize}_mercatorZfromZoom(s){return this.cameraToCenterDistance/this._worldSizeFromZoom(s)}_minimumHeightOverTerrain(){const s=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(s)}_zoomFromMercatorZ(s){return this.scaleZoom(this.cameraToCenterDistance/(s*this.tileSize))}zoomFromMercatorZAdjusted(s){let u=0,m=o.bU,_=0,w=1/0;for(;m-u>1e-6&&m>u;){const C=u+.5*(m-u),D=this.tileSize*Math.pow(2,C),L=this.getCameraToCenterDistance(this.projection,C,D),z=this.scaleZoom(L/(s*this.tileSize)),N=Math.abs(C-z);N<w&&(w=N,_=C),C<z?u=C:m=C}return _}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(o.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(s,u){const m=Math.min(s.x,u.x),_=Math.max(s.x,u.x),w=Math.min(s.y,u.y),C=Math.max(s.y,u.y);if(w<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const D=[new o.P(m,w),new o.P(_,C),new o.P(m,C),new o.P(_,w)],L=this.renderWorldCopies?-3:0,z=this.renderWorldCopies?4:1;for(const N of D){const j=this.pointRayIntersection(N);if(j.t<0)return!0;const q=this.rayIntersectionCoordinate(j);if(q.x<L||q.y<0||q.x>z||q.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+o.c0(this.fovAboveCenter)>88||this.anyCornerOffEdge(new o.P(0,0),new o.P(this.width,this.height))}zoomDeltaToMovement(s,u){const m=o.a6.vec3.length(o.a6.vec3.sub([],this._camera.position,s)),_=this._zoomFromMercatorZ(m)+u;return m-this._mercatorZfromZoom(_)}getCameraPoint(){if(this.projection.name==="globe"){const s=function([u,m,_],w){const C=[u,m,_,1];o.a6.vec4.transformMat4(C,C,w);const D=C[3]=Math.max(C[3],1e-6);return C[0]/=D,C[1]/=D,C[2]/=D,C}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new o.P(s[0],s[1])}{const s=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(0,s))}}getCameraToCenterDistance(s,u=this.zoom,m=this.worldSize){const _=o.bX(s,u,this.width,this.height,1024),w=s.pixelSpaceConversion(this.center.lat,m,_);let C=.5/Math.tan(.5*this._fov)*this.height*w;return this.isOrthographic&&(C=ih(1,C,oh(this.pitch>=15?1:this.pitch/15))),C}getWorldToCameraMatrix(){const s=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&o.a6.mat4.multiply(s,s,this.globeMatrix),s}getFrustum(s){return o.bN.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,s,this.projection.zAxisUnit==="meters")}}const lc=(p,s)=>{if(s>0&&p.terrain&&o.w("Cutoff is currently disabled on terrain"),s<=0||p.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const u=p.transform,m=Math.max(Math.abs(u._zoom-(p.minCutoffZoom-1)),1),_=u.isLODDisabled(!1)?o.a7(60,45,u.pitch):o.a7(30,15,u.pitch),w=u._farZ-u._nearZ,C=s*u.height,D=((1-(L=_))*u.cameraToCenterDistance+L*(u._farZ+C))*m;var L;return{shouldRenderCutoff:_<1,uniformValues:{u_cutoff_params:[u._nearZ,u._farZ,(D-u._nearZ)/w,(D-C-u._nearZ)/w]}}},pi={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class U0{constructor(s,u){this.aabb=s,this.lastCascade=u}}class Ut{add(s,u){const m=this.receivers[s.key];m!==void 0?(m.aabb.min[0]=Math.min(m.aabb.min[0],u.min[0]),m.aabb.min[1]=Math.min(m.aabb.min[1],u.min[1]),m.aabb.min[2]=Math.min(m.aabb.min[2],u.min[2]),m.aabb.max[0]=Math.max(m.aabb.max[0],u.max[0]),m.aabb.max[1]=Math.max(m.aabb.max[1],u.max[1]),m.aabb.max[2]=Math.max(m.aabb.max[2],u.max[2])):this.receivers[s.key]=new U0(u,null)}clear(){this.receivers={}}get(s){return this.receivers[s.key]}computeRequiredCascades(s,u,m){const _=o.c9.fromPoints(s.points);let w=0;for(const C in this.receivers){const D=this.receivers[C];if(!D||!_.intersectsAabb(D.aabb))continue;D.aabb.min=_.closestPoint(D.aabb.min),D.aabb.max=_.closestPoint(D.aabb.max);const L=D.aabb.getCorners();for(let z=0;z<m.length;z++){let N=!0;for(const j of L){const q=[j[0]*u,j[1]*u,j[2]];if(o.a6.vec3.transformMat4(q,q,m[z].matrix),q[0]<-1||q[0]>1||q[1]<-1||q[1]>1){N=!1;break}}if(D.lastCascade=z,w=Math.max(w,z),N)break}}return w+1}}class bx{constructor(s){this.painter=s,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new Ut,this._depthMode=new sr(s.context.gl.LEQUAL,sr.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,s.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),s.tp.registerParameter(pi,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),s.tp.registerParameter(pi,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),s.tp.registerParameter(pi,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),s.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const s of this._cascades)s.texture.destroy(),s.framebuffer.destroy();this._cascades=[]}updateShadowParameters(s,u){const m=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!u||!u.properties)return;const _=u.properties.get("shadow-intensity");if(!u.shadowsEnabled()||_<=0||(this._shadowLayerCount=m.style.order.reduce((ne,ie)=>{const oe=m.style._mergedLayers[ie];return ne+(oe.hasShadowPass()&&!oe.isHidden(s.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const w=m.context,C=pi.shadowMapResolution,D=pi.shadowMapResolution;if(this._cascades.length===0||pi.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let ne=0;ne<pi.cascadeCount;++ne){const ie=m._shadowMapDebug,oe=w.gl,ae=w.createFramebuffer(C,D,ie,"texture"),ge=new o.T(w,{width:C,height:D,data:null},oe.DEPTH_COMPONENT16);if(ae.depthAttachment.set(ge.texture),ie){const ye=new o.T(w,{width:C,height:D,data:null},oe.RGBA8);ae.colorAttachment.set(ye.texture)}this._cascades.push({framebuffer:ae,texture:ge,matrix:[],far:0,boundingSphereRadius:0,frustum:new o.bN,scale:0})}}this.shadowDirection=Np(u);let L=0;if(s.elevation){const ne=s.elevation,ie=[1e4,-1e4];ne.visibleDemTiles.filter(oe=>oe.dem).forEach(oe=>{const ae=oe.dem.tree;ie[0]=Math.min(ie[0],ae.minimums[0]),ie[1]=Math.max(ie[1],ae.maximums[0])}),ie[0]!==1e4&&(L=(ie[1]-ie[0])*ne.exaggeration())}const z=1.5*s.cameraToCenterDistance,N=3*z,j=new Float64Array(16);for(let ne=0;ne<this._cascades.length;++ne){const ie=this._cascades[ne];let oe=s.height/50,ae=1;pi.cascadeCount===1?ae=N:ne===0?ae=z:(oe=z,ae=N);const[ge,ye]=Hp(s,this.shadowDirection,oe,ae,pi.shadowMapResolution,L);ie.scale=s.scale,ie.matrix=ge,ie.boundingSphereRadius=ye,o.a6.mat4.invert(j,ie.matrix),ie.frustum=o.bN.fromInvProjectionMatrix(j,1,0,!0),ie.far=ae}const q=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[q].far,this._cascades[q].far],this._uniformValues.u_shadow_intensity=_,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/pi.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=pi.shadowMapResolution,this._uniformValues.u_shadowmap_0=Ro.ShadowMap0,this._uniformValues.u_shadowmap_1=Ro.ShadowMap0+1,this._groundShadowTiles=m.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const Z=m.transform.elevation;for(const ne of this._groundShadowTiles){let ie={min:0,max:0};if(Z){const oe=Z.getMinMaxForTile(ne);oe&&(ie=oe)}this.addShadowReceiver(ne.toUnwrapped(),ie.min,ie.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(s){this._enabled=s}drawShadowPass(s,u){if(!this.enabled)return;const m=this.painter,_=m.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(m.transform.getFrustum(0),m.transform.worldSize,this._cascades),_.viewport.set([0,0,pi.shadowMapResolution,pi.shadowMapResolution]);for(let w=0;w<this._numCascadesToRender;++w){m.currentShadowCascade=w,_.bindFramebuffer.set(this._cascades[w].framebuffer.framebuffer),_.clear({color:o.bz.white,depth:1});for(const C of s.order){const D=s._mergedLayers[C];if(!D.hasShadowPass()||D.isHidden(m.transform.zoom))continue;const L=s.getLayerSourceCache(D),z=L?u[L.id]:void 0;(D.type==="model"||z&&z.length)&&m.renderLayer(m,L,D,z)}}m.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const s=this.painter,u=s.style,m=s.context,_=u.directionalLight,w=u.ambientLight;if(!_||!w)return;const C=[],D=lc(s,s.longestCutoffRange);D.shouldRenderCutoff&&C.push("RENDER_CUTOFF");const L=Vp(u,_,w),z=new sr(m.gl.LEQUAL,sr.ReadOnly,s.depthRangeFor3D);for(const N of this._groundShadowTiles){const j=N.toUnwrapped(),q=s.isTileAffectedByFog(N),Z=s.getOrCreateProgram("groundShadow",{defines:C,overrideFog:q});this.setupShadows(j,Z),s.uploadCommonUniforms(m,Z,j,null,D);const ne={u_matrix:s.transform.calculateProjMatrix(j),u_ground_shadow_factor:L};Z.draw(s,m.gl.TRIANGLES,z,wr.disabled,Nr.multiply,mr.disabled,ne,"ground_shadow",s.tileExtentBuffer,s.quadTriangleIndexBuffer,s.tileExtentSegments,{},s.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?Nr.unblended:Nr.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(s){const u=this.painter.transform,m=u.calculatePosMatrix(s,u.worldSize);return o.a6.mat4.multiply(m,this._cascades[this.painter.currentShadowCascade].matrix,m),Float32Array.from(m)}calculateShadowPassMatrixFromMatrix(s){return o.a6.mat4.multiply(s,this._cascades[this.painter.currentShadowCascade].matrix,s),Float32Array.from(s)}setupShadows(s,u,m,_=0){if(!this.enabled)return;const w=this.painter.transform,C=this.painter.context,D=C.gl,L=this._uniformValues,z=new Float64Array(16),N=w.calculatePosMatrix(s,w.worldSize);for(let j=0;j<this._cascades.length;j++)o.a6.mat4.multiply(z,this._cascades[j].matrix,N),L[j===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(z),C.activeTexture.set(D.TEXTURE0+Ro.ShadowMap0+j),this._cascades[j].texture.bind(D.NEAREST,D.CLAMP_TO_EDGE);if(this.useNormalOffset=!!m,this.useNormalOffset){const j=o.c8(s.canonical),q=2/w.tileSize*o.ab/pi.shadowMapResolution,Z=q*this._cascades[0].boundingSphereRadius,ne=q*this._cascades[this._cascades.length-1].boundingSphereRadius,ie=(m==="vector-tile"?1:3)/Math.pow(2,_-s.canonical.z-(1-w.zoom+Math.floor(w.zoom)));L.u_shadow_normal_offset=[j,Z*ie,ne*ie],L.u_shadow_bias=[6e-5,.0012,.012]}else L.u_shadow_bias=[36e-5,.0012,.012];u.setShadowUniformValues(C,L)}setupShadowsFromMatrix(s,u,m=!1){if(!this.enabled)return;const _=this.painter.context,w=_.gl,C=this._uniformValues,D=new Float64Array(16);for(let L=0;L<pi.cascadeCount;L++)o.a6.mat4.multiply(D,this._cascades[L].matrix,s),C[L===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(D),_.activeTexture.set(w.TEXTURE0+Ro.ShadowMap0+L),this._cascades[L].texture.bind(w.NEAREST,w.CLAMP_TO_EDGE);if(this.useNormalOffset=m,m){const L=pi.normalOffset;C.u_shadow_normal_offset=[1,L,L],C.u_shadow_bias=[6e-5,.0012,.012]}else C.u_shadow_bias=[36e-5,.0012,.012];u.setShadowUniformValues(_,C)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(s,u,m,_){if(_[2]>=0)return{};const w=function(L,z,N){const j=N/(1<<L.canonical.z);return new o.c9([L.canonical.x*j+L.wrap*N,L.canonical.y*j+L.wrap*N,0],[(L.canonical.x+1)*j+L.wrap*N,(L.canonical.y+1)*j+L.wrap*N,z])}(s,u,m).getCorners(),C=u/-_[2];_[0]<0?(o.a6.vec3.add(w[0],w[0],[_[0]*C,0,0]),o.a6.vec3.add(w[3],w[3],[_[0]*C,0,0])):_[0]>0&&(o.a6.vec3.add(w[1],w[1],[_[0]*C,0,0]),o.a6.vec3.add(w[2],w[2],[_[0]*C,0,0])),_[1]<0?(o.a6.vec3.add(w[0],w[0],[0,_[1]*C,0]),o.a6.vec3.add(w[1],w[1],[0,_[1]*C,0])):_[1]>0&&(o.a6.vec3.add(w[2],w[2],[0,_[1]*C,0]),o.a6.vec3.add(w[3],w[3],[0,_[1]*C,0]));const D={};return D.vertices=w,D.planes=[ah(w[1],w[0],w[4]),ah(w[2],w[1],w[5]),ah(w[3],w[2],w[6]),ah(w[0],w[3],w[7])],D}addShadowReceiver(s,u,m){this._receivers.add(s,o.c9.fromTileIdAndHeight(s,u,m))}getMaxCascadeForTile(s){const u=this._receivers.get(s);return u&&u.lastCascade?u.lastCascade:0}}function ah(p,s,u){const m=o.a6.vec3.sub([],u,s),_=o.a6.vec3.sub([],p,s),w=o.a6.vec3.cross([],m,_),C=o.a6.vec3.length(w);return C===0?[0,0,1,0]:(o.a6.vec3.scale(w,w,1/C),[w[0],w[1],w[2],-o.a6.vec3.dot(w,s)])}function Np(p){const s=p.properties.get("direction"),u=o.c7(s.x,s.y,s.z);u[2]=o.ap(u[2],0,75);const m=o.ca([u[0],u[1],u[2]]);return o.a6.vec3.fromValues(m.x,m.y,m.z)}function Vp(p,s,u){const m=s.properties.get("color"),_=s.properties.get("intensity"),w=s.properties.get("direction"),C=[w.x,w.y,w.z],D=u.properties.get("color"),L=u.properties.get("intensity"),z=Math.max(o.a6.vec3.dot([0,0,1],C),0),N=[0,0,0];o.a6.vec3.scale(N,D.toRenderColor(p.getLut(s.scope)).toArray01Linear().slice(0,3),L);const j=[0,0,0];return o.a6.vec3.scale(j,m.toRenderColor(p.getLut(u.scope)).toArray01Linear().slice(0,3),z*_),o.cb([N[0]>0?N[0]/(N[0]+j[0]):0,N[1]>0?N[1]/(N[1]+j[1]):0,N[2]>0?N[2]/(N[2]+j[2]):0])}function Hp(p,s,u,m,_,w){const C=p.zoom,D=p.scale,L=p.worldSize,z=1/L,N=p.aspect,j=Math.sqrt(1+N*N)*Math.tan(.5*p.fovX),q=j*j,Z=m-u,ne=m+u;let ie,oe;q>Z/ne?(ie=m,oe=m*j):(ie=.5*ne*(1+q),oe=.5*Math.sqrt(Z*Z+2*(m*m+u*u)*q+ne*ne*q*q));const ae=p.projection.pixelsPerMeter(p.center.lat,L),ge=p._camera.getCameraToWorldMercator(),ye=[0,0,-ie*z];o.a6.vec3.transformMat4(ye,ye,ge);let pe=oe*z;const we=p._edgeInsets;if(!(we.left===0&&we.top===0&&we.right===0&&we.bottom===0||we.left===we.right&&we.top===we.bottom)){const Tt=p._camera.getWorldToCamera(p.worldSize,p.projection.zAxisUnit==="meters"?ae:1),Mt=p._camera.getCameraToClipPerspective(p._fov,p.width/p.height,u,m);Mt[8]=2*-p.centerOffset.x/p.width,Mt[9]=2*p.centerOffset.y/p.height;const yt=new Float64Array(16);o.a6.mat4.mul(yt,Mt,Tt);const bt=new Float64Array(16);o.a6.mat4.invert(bt,yt);const ir=o.bN.fromInvProjectionMatrix(bt,L,C,!0);for(const Lt of ir.points){const Ht=((be=Lt)[0]/=D,be[1]/=D,be[2]=o.bD(be[2],p._center.lat),be);pe=Math.max(pe,o.a6.vec3.len(o.a6.vec3.subtract([],ye,Ht)))}}var be;pe*=_/(_-1);const Fe=Math.acos(s[2]),Ee=Math.atan2(-s[0],-s[1]),Me=new Xu;Me.position=ye,Me.setPitchBearing(Fe,Ee);const Qe=Me.getWorldToCamera(L,ae),Re=pe*L,Pe=Math.min(p._mercatorZfromZoom(17)*L*-2,-2*Re),Xe=Me.getCameraToClipOrthographic(-Re,Re,-Re,Re,Pe,(Re+w*ae)/s[2]),ct=new Float64Array(16);o.a6.mat4.multiply(ct,Xe,Qe);const _t=o.a6.vec3.fromValues(Math.floor(1e6*ye[0])/1e6*L,Math.floor(1e6*ye[1])/1e6*L,0),lt=.5*_,St=[0,0,0];o.a6.vec3.transformMat4(St,_t,ct),o.a6.vec3.scale(St,St,lt);const Ye=[Math.floor(St[0]),Math.floor(St[1]),Math.floor(St[2])],mt=[0,0,0];o.a6.vec3.sub(mt,St,Ye),o.a6.vec3.scale(mt,mt,-1/lt);const ft=new Float64Array(16);return o.a6.mat4.identity(ft),o.a6.mat4.translate(ft,ft,mt),o.a6.mat4.multiply(ct,ft,ct),[ct,Re]}class cc extends o.E{constructor(s){super(),this.requestManager=s,this.models={"":{}},this.numModelsLoading={}}loadModel(s,u){return o.aG(this.requestManager.transformRequest(u,o.R.Model).url).then(m=>{if(!m)return;const _=o.aH(m),w=new o.aI(s,void 0,void 0,_);return w.computeBoundsAndApplyParent(),w}).catch(m=>{if(m&&m.status===404)return null;this.fire(new o.t(new Error(`Could not load model ${s} from ${u}: ${m.message}`)))})}load(s,u){this.models[u]||(this.models[u]={});const m=Object.keys(s);this.numModelsLoading[u]=(this.numModelsLoading[u]||0)+m.length;const _=[];for(const w of m)_.push(this.loadModel(w,s[w]));Promise.allSettled(_).then(w=>{for(let C=0;C<w.length;C++){const{status:D,value:L}=w[C];D==="fulfilled"&&L&&(this.models[u][m[C]]={model:L,numReferences:1})}this.numModelsLoading[u]-=m.length,this.fire(new o.x("data",{dataType:"style"}))}).catch(w=>{this.fire(new o.t(new Error(`Could not load models: ${w.message}`)))})}isLoaded(){for(const s in this.numModelsLoading)if(this.numModelsLoading[s]>0)return!1;return!0}hasModel(s,u){return!!this.getModel(s,u)}getModel(s,u){return this.models[u]||(this.models[u]={}),this.models[u][s]?this.models[u][s].model:void 0}addModel(s,u,m){this.models[m]||(this.models[m]={}),this.hasModel(s,m)&&this.models[m][s].numReferences++,this.load({[s]:this.requestManager.normalizeModelURL(u)},m)}addModels(s,u){this.models[u]||(this.models[u]={});const m={};for(const _ in s)this.models[u][_]={},m[_]=this.requestManager.normalizeModelURL(s[_]);this.load(m,u)}addModelsFromBucket(s,u){this.models[u]||(this.models[u]={});const m={};for(const _ of s)this.hasModel(_,u)?this.models[u][_].numReferences++:m[_]=this.requestManager.normalizeModelURL(_);this.load(m,u)}removeModel(s,u){if(this.models[u]&&this.models[u][s]&&(this.models[u][s].numReferences--,this.models[u][s].numReferences===0)){const m=this.models[u][s].model;delete this.models[u][s],m.destroy()}}listModels(s){return this.models[s]||(this.models[s]={}),Object.keys(this.models[s])}upload(s,u){this.models[u]||(this.models[u]={});for(const m in this.models[u])this.models[u][m].model&&this.models[u][m].model.upload(s.context)}}const z0=new o.a0({data:new o.a1(o._.colorTheme.data)}),es=(p,s)=>Ke(p,s&&s.filter(u=>u.identifier!=="source.canvas")),jp=o.ar(Kr,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection","setCamera","addImport","removeImport","updateImport"]),sh=o.ar(Kr,["setCenter","setZoom","setBearing","setPitch"]),wx={version:8,layers:[],sources:{}},Bx={duration:300,delay:0};class ts extends o.E{constructor(s,u={}){super(),this.map=s,this.scope=u.scope||"",this.globalId=null,this.fragments=[],this.importDepth=u.importDepth||0,this.importsCache=u.importsCache||new Map,this.resolvedImports=u.resolvedImports||new Set,this.transition=o.l({},Bx),this._buildingIndex=new qd(this),this.crossTileSymbolIndex=new Op,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=u.styleChanges||new Sa,this.dispatcher=u.dispatcher?u.dispatcher:new o.cd(o.ce(),this),u.imageManager?this.imageManager=u.imageManager:(this.imageManager=new Ea,this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=u.glyphManager?u.glyphManager:new o.cf(s._requestManager,u.localFontFamily?o.cg.all:u.localIdeographFontFamily?o.cg.ideographs:o.cg.none,u.localFontFamily||u.localIdeographFontFamily),u.modelManager?this.modelManager=u.modelManager:(this.modelManager=new cc(s._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null},this._styleColorThemeForScope={},this.options=u.configOptions?u.configOptions:new Map,this._configDependentLayers=u.configDependentLayers?u.configDependentLayers:new Set,this._config=u.config,this._initialConfig=u.initialConfig,this.dispatcher.broadcast("setReferrer",o.ch());const m=this;this._rtlTextPluginCallback=ts.registerForPluginStateChange(_=>{m.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:_.pluginStatus,pluginURL:_.pluginURL},(w,C)=>{if(o.ci(w),C&&C.every(D=>D))for(const D in m._sourceCaches){const L=m._sourceCaches[D],z=L.getSource().type;z!=="vector"&&z!=="geojson"||L.reload()}})}),this.on("data",_=>{if(_.dataType!=="source"||_.sourceDataType!=="metadata")return;const w=this.getOwnSource(_.sourceId);if(w&&w.vectorLayerIds)for(const C in this._layers){const D=this._layers[C];D.source===w.id&&this._validateLayer(D)}})}load(s){return s?(typeof s=="string"?this.loadURL(s):this.loadJSON(s),this):this}_getGlobalId(s){if(!s)return null;if(typeof s=="string"){if(o.f(s))return s;const u=o.cj(s);if(!u.startsWith("http"))try{return new URL(u,location.href).toString()}catch{return u}return u}return`json://${o.ck(JSON.stringify(s))}`}_diffStyle(s,u,m){this.globalId=this._getGlobalId(s);const _=(w,C)=>{try{C(null,this.setState(w,m))}catch(D){C(D,!1)}};if(typeof s=="string"){const w=this.map._requestManager.normalizeStyleURL(s),C=this.map._requestManager.transformRequest(w,o.R.Style);o.n(C,(D,L)=>{D?this.fire(new o.t(D)):L&&_(L,u)})}else typeof s=="object"&&_(s,u)}loadURL(s,u={}){this.fire(new o.x("dataloading",{dataType:"style"}));const m=typeof u.validate=="boolean"?u.validate:!o.f(s);this.globalId=this._getGlobalId(s),s=this.map._requestManager.normalizeStyleURL(s,u.accessToken),this.resolvedImports.add(s);const _=this.importsCache.get(s);if(_)return this._load(_,m);const w=this.map._requestManager.transformRequest(s,o.R.Style);this._request=o.n(w,(C,D)=>{if(this._request=null,C)this.fire(new o.t(C));else if(D)return this.importsCache.set(s,D),this._load(D,m)})}loadJSON(s,u={}){this.fire(new o.x("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(s),this._request=o.q.frame(()=>{this._request=null,this._load(s,u.validate!==!1)})}loadEmpty(){this.fire(new o.x("dataloading",{dataType:"style"})),this._load(wx,!1)}_loadImports(s,u,m){if(this.importDepth>=4)return o.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const _=[];for(const w of s){const C=this._createFragmentStyle(w),D=new Promise(N=>{C.once("style.import.load",N),C.once("error",N)}).then(()=>this.mergeAll());if(_.push(D),this.resolvedImports.has(w.url)){C.loadEmpty();continue}const L=w.data||this.importsCache.get(w.url);L?(C.loadJSON(L,{validate:u}),this._isInternalStyle(L)&&(C.globalId=null)):w.url?C.loadURL(w.url,{validate:u}):C.loadEmpty();const z={style:C,id:w.id,config:w.config};if(m){const N=this.fragments.findIndex(({id:j})=>j===m);this.fragments=this.fragments.slice(0,N).concat(z).concat(this.fragments.slice(N))}else this.fragments.push(z)}return Promise.allSettled(_)}getImportGlobalIds(s=this,u=new Set){for(const m of s.fragments)m.style.globalId&&u.add(m.style.globalId),this.getImportGlobalIds(m.style,u);return[...u.values()]}_createFragmentStyle(s){const u=this.scope?o.av(s.id,this.scope):s.id;let m;const _=this._initialConfig&&this._initialConfig[u];(s.config||_)&&(m=o.l({},s.config,_));const w=new ts(this.map,{scope:u,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:m,configOptions:this.options,configDependentLayers:this._configDependentLayers});return w.setEventedParent(this.map,{style:w}),w}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(s){return this.isRootStyle()&&(s.fragment||!!s.schema&&s.fragment!==!1)}_load(s,u){const m=s.schema;if(this._isInternalStyle(s)){const C=o.l({},wx,{imports:[{id:"basemap",data:s,url:""}]});return void this._load(C,u)}if(this.updateConfig(this._config,m),u&&es(this,aa(s)))return;this._loaded=!0,this.stylesheet=o.cl(s);const _=()=>{for(const z in s.sources)this.addSource(z,s.sources[z],{validate:!1,isInitialLoad:!0});s.sprite?this._loadSprite(s.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.glyphManager.setURL(s.glyphs,this.scope);const C=Xd(this.stylesheet.layers);if(this._order=C.map(z=>z.id),this.stylesheet.light&&o.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const z=this.stylesheet.lights[0];this.light=new Ze(z.properties,z.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new Ze(this.stylesheet.light)),this._layers={},this._serializedLayers={};for(const z of C){const N=o.cq(z,this.scope,this._styleColorTheme.lut,this.options);N.configDependencies.size!==0&&this._configDependentLayers.add(N.fqid),N.setEventedParent(this,{layer:{id:N.id}}),this._layers[N.id]=N,this._serializedLayers[N.id]=N.serialize();const j=this.getOwnLayerSourceCache(N),q=!!this.directionalLight&&this.directionalLight.shadowsEnabled();j&&N.canCastShadows()&&q&&(j.castsShadows=!0)}this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const D=this.stylesheet.terrain;D&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(D,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new o.x("data",{dataType:"style"}));const L=this.isRootStyle();s.imports?this._loadImports(s.imports,u).then(()=>{this._reloadImports(),this.fire(new o.x(L?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new o.x(L?"style.load":"style.import.load")))},w=this.stylesheet["color-theme"];if(this._styleColorTheme.colorTheme=w,w){const C=this._evaluateColorThemeData(w);this._loadColorTheme(C).then(()=>{_()}).catch(D=>{o.w(`Couldn't load color theme from the stylesheet: ${D}`),_()})}else this._styleColorTheme.lut=null,_()}isRootStyle(){return this.importDepth===0}mergeAll(){let s,u,m,_,w,C,D,L;const z={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(N=>{if(N.stylesheet){if(N.light!=null&&(s=N.light),N.stylesheet.lights)for(const j of N.stylesheet.lights)j.type==="ambient"&&N.ambientLight!=null&&(u=N.ambientLight),j.type==="directional"&&N.directionalLight!=null&&(m=N.directionalLight);_=this._prioritizeTerrain(_,N.terrain,N.stylesheet.terrain),N.stylesheet.fog&&N.fog!=null&&(w=N.fog),N.stylesheet.camera!=null&&(L=N.stylesheet.camera),N.stylesheet.projection!=null&&(C=N.stylesheet.projection),N.stylesheet.transition!=null&&(D=N.stylesheet.transition),z[N.scope]=N._styleColorTheme}}),this.light=s,this.ambientLight=u,this.directionalLight=m,this.fog=w,this._styleColorThemeForScope=z,_===null?delete this.terrain:this.terrain=_,this.camera=L||{"camera-projection":"perspective"},this.projection=C||{name:"mercator"},this.transition=o.l({},Bx,D),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(s){const u=m=>{for(const _ of m.fragments)u(_.style);s(m)};u(this)}_prioritizeTerrain(s,u,m){const _=s&&s.drapeRenderMode===0;return m===null?u&&u.drapeRenderMode===0?u:_?s:null:u!=null&&(!s||_||u&&u.drapeRenderMode===1)?u:s}mergeTerrain(){let s;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(u=>{s=this._prioritizeTerrain(s,u.terrain,u.stylesheet.terrain)}),s===null?delete this.terrain:this.terrain=s}mergeProjection(){let s;this.forEachFragmentStyle(u=>{u.stylesheet.projection!=null&&(s=u.stylesheet.projection)}),this.projection=s||{name:"mercator"}}mergeSources(){const s={},u={},m={};this.forEachFragmentStyle(_=>{for(const w in _._sourceCaches){const C=o.av(w,_.scope);s[C]=_._sourceCaches[w]}for(const w in _._otherSourceCaches){const C=o.av(w,_.scope);u[C]=_._otherSourceCaches[w]}for(const w in _._symbolSourceCaches){const C=o.av(w,_.scope);m[C]=_._symbolSourceCaches[w]}}),this._mergedSourceCaches=s,this._mergedOtherSourceCaches=u,this._mergedSymbolSourceCaches=m}mergeLayers(){const s={},u=[],m={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(w=>{for(const C of w._order){const D=w._layers[C];if(D.type==="slot"){const L=o.cm(C);if(s[L])continue;s[L]=[]}D.slot&&s[D.slot]?s[D.slot].push(D):u.push(D)}}),this._mergedOrder=[];const _=(w=[])=>{for(const C of w)if(C.type==="slot"){const D=o.cm(C.id);s[D]&&_(s[D]),this._mergedSlots.push(D)}else{const D=o.av(C.id,C.scope);this._mergedOrder.push(D),m[D]=C,C.is3D()&&(this._has3DLayers=!0),C.type==="circle"&&(this._hasCircleLayers=!0),C.type==="symbol"&&(this._hasSymbolLayers=!0),C.type==="clip"&&(this._clipLayerPresent=!0)}};_(u),this._mergedOrder.sort((w,C)=>{const D=m[w],L=m[C];return D.hasInitialOcclusionOpacityProperties?L.is3D()?1:0:D.is3D()&&L.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=m,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(s){return this.stylesheet.camera=o.l({},this.stylesheet.camera,s),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(s){return s.data?function(u,m,_){const w=o.l({},m);for(const D of Object.keys(o._.colorTheme))w[D]===void 0&&(w[D]=o._.colorTheme[D].default);const C=new o.$(z0,u,new Map(_));return C.setTransitionOrValue(w,_),C.untransitioned().possiblyEvaluate(new o.a3(0))}(this.scope,s,this.options).get("data"):null}_loadColorTheme(s){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const u=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((m,_)=>{const w="data:image/png;base64,";if(!s||s.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void m();let C=s;C.startsWith(w)||(C=w+C);const D="mapbox-reserved-lut",L=new Image;L.src=C,L.onerror=()=>{this._styleColorTheme.lutLoading=!1,_(new Error("Failed to load image data"))},L.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==u)return void m();this._styleColorTheme.lutLoading=!1;const{width:z,height:N,data:j}=o.q.getImageData(L);if(N>32)return void _(new Error("The height of the image must be less than or equal to 32 pixels."));if(z!==N*N)return void _(new Error("The width of the image must be equal to the height squared."));this.getImage(D)&&this.removeImage(D),this.addImage(D,{data:new o.r({width:z,height:N},j),pixelRatio:1,sdf:!1,version:0});const q=this.imageManager.getImage(D,this.scope);q?(this._styleColorTheme.lut={image:q.data,data:s},m()):_(new Error("Missing LUT image."))}})}getLut(s){const u=this._styleColorThemeForScope[s];return u?u.lut:null}setProjection(s){s?this.stylesheet.projection=s:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(s){this._spriteRequest=function(u,m,_){let w,C,D;const L=o.q.devicePixelRatio>1?"@2x":"";let z=o.n(m.transformRequest(m.normalizeSpriteURL(u,L,".json"),o.R.SpriteJSON),(q,Z)=>{z=null,D||(D=q,w=Z,j())}),N=o.o(m.transformRequest(m.normalizeSpriteURL(u,L,".png"),o.R.SpriteImage),(q,Z)=>{N=null,D||(D=q,C=Z,j())});function j(){if(D)_(D);else if(w&&C){const q=o.q.getImageData(C),Z={};for(const ne in w){const{width:ie,height:oe,x:ae,y:ge,sdf:ye,pixelRatio:pe,stretchX:we,stretchY:be,content:Fe}=w[ne],Ee=new o.r({width:ie,height:oe});o.r.copy(q,Ee,{x:ae,y:ge},{x:0,y:0},{width:ie,height:oe},null),Z[ne]={data:Ee,pixelRatio:pe,sdf:ye,stretchX:we,stretchY:be,content:Fe}}_(null,Z)}}return{cancel(){z&&(z.cancel(),z=null),N&&(N.cancel(),N=null)}}}(s,this.map._requestManager,(u,m)=>{if(this._spriteRequest=null,u)this.fire(new o.t(u));else if(m)for(const _ in m)this.imageManager.addImage(_,this.scope,m[_]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new o.x("data",{dataType:"style"}))})}_validateLayer(s){const u=this.getOwnSource(s.source);if(!u)return;const m=s.sourceLayer;m&&(u.type==="geojson"||u.vectorLayerIds&&u.vectorLayerIds.indexOf(m)===-1)&&this.fire(new o.t(new Error(`Source layer "${m}" does not exist on source "${u.id}" as specified by style layer "${s.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const s in this._sourceCaches)if(!this._sourceCaches[s].loaded())return!1;if(!this.imageManager.isLoaded()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:s}of this.fragments)if(!s.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((s,u)=>{const m=this.fragments[u];return m&&m.style&&(s.data=m.style.serialize()),s})}_serializeSources(){const s={};for(const u in this._sourceCaches){const m=this._sourceCaches[u].getSource();s[m.id]||(s[m.id]=m.serialize())}return s}_serializeLayers(s){const u=[];for(const m of s){const _=this._layers[m];_&&_.type!=="custom"&&u.push(_.serialize())}return u}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition())return!0;for(const s in this._sourceCaches)if(this._sourceCaches[s].hasTransition())return!0;for(const s in this._layers)if(this._layers[s].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}isLayerDraped(s){return!!this.terrain&&s.isDraped(this.getLayerSourceCache(s))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(s){const u=this.getOwnLayer(s);if(u)return u;this.fire(new o.t(new Error(`The layer '${s}' does not exist in the map's style.`)))}_checkSource(s){const u=this.getOwnSource(s);if(u)return u;this.fire(new o.t(new Error(`The source '${s}' does not exist in the map's style.`)))}precompilePrograms(s,u){const m=this.map.painter;if(m)for(let _=s.minzoom||0;_<(s.maxzoom||25.5);_++){const w=s.getProgramIds();if(w)for(const C of w){const D=s.getDefaultProgramParams(C,u.zoom,this._styleColorTheme.lut);D&&(m.style=this,this.fog&&(m._fogVisible=!0,D.overrideFog=!0,m.getOrCreateProgram(C,D)),m._fogVisible=!1,D.overrideFog=!1,m.getOrCreateProgram(C,D),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(D.overrideRtt=!0,m.getOrCreateProgram(C,D)))}}}update(s){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(s),this.directionalLight&&this.directionalLight.recalculate(s);const u=this.calculateLightsBrightness();s.brightness=u||0,u!==this._brightness&&(this._brightness=u,this.dispatcher.broadcast("setBrightness",u));const m=this._changes.isDirty();let _=!1;if(this._changes.isDirty()){const C=this._changes.getLayerUpdatesByScope();for(const D in C){const{updatedIds:L,removedIds:z}=C[D];(L||z)&&(this._updateWorkerLayers(D,L,z),_=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(s),this.light&&this.light.updateTransitions(s),this.ambientLight&&this.ambientLight.updateTransitions(s),this.directionalLight&&this.directionalLight.updateTransitions(s),this.fog&&this.fog.updateTransitions(s),this._changes.reset()}const w={};for(const C in this._mergedSourceCaches){const D=this._mergedSourceCaches[C];w[C]=D.used,D.used=!1,D.tileCoverLift=0}for(const C of this._mergedOrder){const D=this._mergedLayers[C];if(D.recalculate(s,this._availableImages),!D.isHidden(s.zoom)){const L=this.getLayerSourceCache(D);L&&(L.used=!0,L.tileCoverLift=Math.max(L.tileCoverLift,D.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(D,s)}):this.precompilePrograms(D,s))}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&_&&this.mergeLayers();for(const C in w){const D=this._mergedSourceCaches[C];w[C]!==D.used&&D.getSource().fire(new o.x("data",{sourceDataType:"visibility",dataType:"source",sourceId:D.getSource().id}))}this.light&&this.light.recalculate(s),this.terrain&&this.terrain.recalculate(s),this.fog&&this.fog.recalculate(s),this.z=s.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),m&&this.fire(new o.x("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=this._changes.getUpdatedImages();if(s.length){for(const u in this._sourceCaches)this._sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],s);this._changes.resetUpdatedImages()}}_updateWorkerLayers(s,u,m){const _=this.getFragmentStyle(s);_&&this.dispatcher.broadcast("updateLayers",{layers:u?_._serializeLayers(u):[],scope:s,removedIds:m||[],options:_.options})}setState(s,u){if(this._checkLoaded(),es(this,aa(s)))return!1;(s=o.cl(s)).layers=Xd(s.layers);const m=function(C,D){if(!C)return[{command:Kr.setStyle,args:[D]}];let L=[];try{if(!o.bh(C.version,D.version))return[{command:Kr.setStyle,args:[D]}];if(o.bh(C.center,D.center)||L.push({command:Kr.setCenter,args:[D.center]}),o.bh(C.zoom,D.zoom)||L.push({command:Kr.setZoom,args:[D.zoom]}),o.bh(C.bearing,D.bearing)||L.push({command:Kr.setBearing,args:[D.bearing]}),o.bh(C.pitch,D.pitch)||L.push({command:Kr.setPitch,args:[D.pitch]}),o.bh(C.sprite,D.sprite)||L.push({command:Kr.setSprite,args:[D.sprite]}),o.bh(C.glyphs,D.glyphs)||L.push({command:Kr.setGlyphs,args:[D.glyphs]}),o.bh(C.imports,D.imports)||function(Z=[],ne=[],ie){ne=ne||[];const oe=(Z=Z||[]).map(Qs),ae=ne.map(Qs),ge=Z.reduce(ac,{}),ye=ne.reduce(ac,{}),pe=oe.slice();let we,be,Fe,Ee;for(we=0,be=0;we<oe.length;we++)Fe=oe[we],ye.hasOwnProperty(Fe)?be++:(ie.push({command:Kr.removeImport,args:[Fe]}),pe.splice(pe.indexOf(Fe,be),1));for(we=0,be=0;we<ae.length;we++)Fe=ae[ae.length-1-we],pe[pe.length-1-we]!==Fe&&(ge.hasOwnProperty(Fe)?(ie.push({command:Kr.removeImport,args:[Fe]}),pe.splice(pe.lastIndexOf(Fe,pe.length-be),1)):be++,Ee=pe[pe.length-we],ie.push({command:Kr.addImport,args:[ye[Fe],Ee]}),pe.splice(pe.length-we,0,Fe));for(const Me of ne){const Qe=ge[Me.id];Qe&&!o.bh(Qe,Me)&&ie.push({command:Kr.updateImport,args:[Me.id,Me]})}}(C.imports,D.imports,L),o.bh(C.transition,D.transition)||L.push({command:Kr.setTransition,args:[D.transition]}),o.bh(C.light,D.light)||L.push({command:Kr.setLight,args:[D.light]}),o.bh(C.fog,D.fog)||L.push({command:Kr.setFog,args:[D.fog]}),o.bh(C.projection,D.projection)||L.push({command:Kr.setProjection,args:[D.projection]}),o.bh(C.lights,D.lights)||L.push({command:Kr.setLights,args:[D.lights]}),o.bh(C.camera,D.camera)||L.push({command:Kr.setCamera,args:[D.camera]}),!o.bh(C["color-theme"],D["color-theme"]))return[{command:Kr.setStyle,args:[D]}];const z={},N=[];(function(Z,ne,ie,oe){let ae;for(ae in ne=ne||{},Z=Z||{})Z.hasOwnProperty(ae)&&(ne.hasOwnProperty(ae)||An(ae,ie,oe));for(ae in ne){if(!ne.hasOwnProperty(ae))continue;const ge=ne[ae];Z.hasOwnProperty(ae)?o.bh(Z[ae],ge)||(Z[ae].type==="geojson"&&ge.type==="geojson"&&cr(Z,ne,ae)?ie.push({command:Kr.setGeoJSONSourceData,args:[ae,ge.data]}):Zd(ae,ne,ie,oe)):Gu(ae,ne,ie)}})(C.sources,D.sources,N,z);const j=[];C.layers&&C.layers.forEach(Z=>{Z.source&&z[Z.source]?L.push({command:Kr.removeLayer,args:[Z.id]}):j.push(Z)});let q=C.terrain;q&&z[q.source]&&(L.push({command:Kr.setTerrain,args:[void 0]}),q=void 0),L=L.concat(N),o.bh(q,D.terrain)||L.push({command:Kr.setTerrain,args:[D.terrain]}),function(Z,ne,ie){ne=ne||[];const oe=(Z=Z||[]).map(Qs),ae=ne.map(Qs),ge=Z.reduce(ac,{}),ye=ne.reduce(ac,{}),pe=oe.slice(),we=Object.create(null);let be,Fe,Ee,Me,Qe,Re,Pe;for(be=0,Fe=0;be<oe.length;be++)Ee=oe[be],ye.hasOwnProperty(Ee)?Fe++:(ie.push({command:Kr.removeLayer,args:[Ee]}),pe.splice(pe.indexOf(Ee,Fe),1));for(be=0,Fe=0;be<ae.length;be++)Ee=ae[ae.length-1-be],pe[pe.length-1-be]!==Ee&&(ge.hasOwnProperty(Ee)?(ie.push({command:Kr.removeLayer,args:[Ee]}),pe.splice(pe.lastIndexOf(Ee,pe.length-Fe),1)):Fe++,Re=pe[pe.length-be],ie.push({command:Kr.addLayer,args:[ye[Ee],Re]}),pe.splice(pe.length-be,0,Ee),we[Ee]=!0);for(be=0;be<ae.length;be++)if(Ee=ae[be],Me=ge[Ee],Qe=ye[Ee],!we[Ee]&&!o.bh(Me,Qe))if(o.bh(Me.source,Qe.source)&&o.bh(Me["source-layer"],Qe["source-layer"])&&o.bh(Me.type,Qe.type)){for(Pe in Zc(Me.layout,Qe.layout,ie,Ee,null,Kr.setLayoutProperty),Zc(Me.paint,Qe.paint,ie,Ee,null,Kr.setPaintProperty),o.bh(Me.slot,Qe.slot)||ie.push({command:Kr.setSlot,args:[Ee,Qe.slot]}),o.bh(Me.filter,Qe.filter)||ie.push({command:Kr.setFilter,args:[Ee,Qe.filter]}),o.bh(Me.minzoom,Qe.minzoom)&&o.bh(Me.maxzoom,Qe.maxzoom)||ie.push({command:Kr.setLayerZoomRange,args:[Ee,Qe.minzoom,Qe.maxzoom]}),Me)Me.hasOwnProperty(Pe)&&Pe!=="layout"&&Pe!=="paint"&&Pe!=="filter"&&Pe!=="metadata"&&Pe!=="minzoom"&&Pe!=="maxzoom"&&Pe!=="slot"&&(Pe.indexOf("paint.")===0?Zc(Me[Pe],Qe[Pe],ie,Ee,Pe.slice(6),Kr.setPaintProperty):o.bh(Me[Pe],Qe[Pe])||ie.push({command:Kr.setLayerProperty,args:[Ee,Pe,Qe[Pe]]}));for(Pe in Qe)Qe.hasOwnProperty(Pe)&&!Me.hasOwnProperty(Pe)&&Pe!=="layout"&&Pe!=="paint"&&Pe!=="filter"&&Pe!=="metadata"&&Pe!=="minzoom"&&Pe!=="maxzoom"&&Pe!=="slot"&&(Pe.indexOf("paint.")===0?Zc(Me[Pe],Qe[Pe],ie,Ee,Pe.slice(6),Kr.setPaintProperty):o.bh(Me[Pe],Qe[Pe])||ie.push({command:Kr.setLayerProperty,args:[Ee,Pe,Qe[Pe]]}))}else ie.push({command:Kr.removeLayer,args:[Ee]}),Re=pe[pe.lastIndexOf(Ee)+1],ie.push({command:Kr.addLayer,args:[Qe,Re]})}(j,D.layers,L)}catch(z){console.warn("Unable to compute style diff:",z),L=[{command:Kr.setStyle,args:[D]}]}return L}(this.serialize(),s).filter(C=>!(C.command in sh));if(m.length===0)return!1;const _=m.filter(C=>!(C.command in jp));if(_.length>0)throw new Error(`Unimplemented: ${_.map(C=>C.command).join(", ")}.`);const w=[];return m.forEach(C=>{w.push(this[C.command].apply(this,C.args))}),u&&Promise.all(w).then(u),this.stylesheet=s,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}addImage(s,u){return this.getImage(s)?this.fire(new o.t(new Error("An image with this name already exists."))):(this.imageManager.addImage(s,this.scope,u),this._afterImageUpdated(s),this)}updateImage(s,u){this.imageManager.updateImage(s,this.scope,u)}getImage(s){return this.imageManager.getImage(s,this.scope)}removeImage(s){return this.getImage(s)?(this.imageManager.removeImage(s,this.scope),this._afterImageUpdated(s),this):this.fire(new o.t(new Error("No image with this name exists.")))}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(this.scope),this._changes.updateImage(s),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.fire(new o.x("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(s,u,m={}){return this._checkLoaded(),this._validate(De,`models.${s}`,u,null,m)||(this.modelManager.addModel(s,u,this.scope),this._changes.setDirty()),this}hasModel(s){return this.modelManager.hasModel(s,this.scope)}removeModel(s){return this.hasModel(s)?(this.modelManager.removeModel(s,this.scope),this):this.fire(new o.t(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(s,u,m={}){if(this._checkLoaded(),this.getOwnSource(s)!==void 0)throw new Error(`There is already a source with ID "${s}".`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(sa,`sources.${s}`,u,null,m))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const _=Wc(s,u,this.dispatcher,this);_.scope=this.scope,_.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(_.id),source:_.serialize(),sourceId:_.id}));const w=C=>{const D=(C?"symbol:":"other:")+_.id,L=o.av(D,this.scope),z=this._sourceCaches[D]=new qo(L,_,C);(C?this._symbolSourceCaches:this._otherSourceCaches)[_.id]=z,z.onAdd(this.map)};w(!1),u.type!=="vector"&&u.type!=="geojson"||w(!0),_.onAdd&&_.onAdd(this.map),m.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(s){this._checkLoaded();const u=this.getOwnSource(s);if(!u)throw new Error("There is no source with this ID");for(const _ in this._layers)if(this._layers[_].source===s)return this.fire(new o.t(new Error(`Source "${s}" cannot be removed while layer "${_}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===s)return this.fire(new o.t(new Error(`Source "${s}" cannot be removed while terrain is using it.`)));const m=this.getOwnSourceCaches(s);for(const _ of m){const w=o.cm(_.id);delete this._sourceCaches[w],this._changes.discardSourceCacheUpdate(_.id),_.fire(new o.x("data",{sourceDataType:"metadata",dataType:"source",sourceId:_.getSource().id})),_.setEventedParent(null),_.clearTiles()}return delete this._otherSourceCaches[s],delete this._symbolSourceCaches[s],this.mergeSources(),u.setEventedParent(null),u.onRemove&&u.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(s,u){this._checkLoaded(),this.getOwnSource(s).setData(u),this._changes.setDirty()}getOwnSource(s){const u=this.getOwnSourceCache(s);return u&&u.getSource()}getOwnSources(){const s=[];for(const u in this._otherSourceCaches){const m=this.getOwnSourceCache(u);m&&s.push(m.getSource())}return s}areTilesLoaded(){const s=this._mergedSourceCaches;for(const u in s){const m=s[u]._tiles;for(const _ in m){const w=m[_];if(w.state!=="loaded"&&w.state!=="errored")return!1}}return!0}setLights(s){if(this._checkLoaded(),!s)return delete this.ambientLight,void delete this.directionalLight;const u=this._getTransitionParameters();for(const _ of s){if(this._validate(jc,"lights",_))return;switch(_.type){case"ambient":if(this.ambientLight){const w=this.ambientLight;w.set(_),w.updateTransitions(u)}else this.ambientLight=new gn(_,Sr||(Sr=new o.a0({color:new o.a1(o._.properties_light_ambient.color),intensity:new o.a1(o._.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const w=this.directionalLight;w.set(_),w.updateTransitions(u)}else this.directionalLight=new gn(_,un||(un=new o.a0({direction:new o.ad(o._.properties_light_directional.direction),color:new o.a1(o._.properties_light_directional.color),intensity:new o.a1(o._.properties_light_directional.intensity),"cast-shadows":new o.a1(o._.properties_light_directional["cast-shadows"]),"shadow-intensity":new o.a1(o._.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const m=new o.a3(this.z||0,u);this.ambientLight&&this.ambientLight.recalculate(m),this.directionalLight&&this.directionalLight.recalculate(m),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const s=this.directionalLight,u=this.ambientLight;if(!s||!u)return;const m=j=>.2126*(j[0]<=.03928?j[0]/12.92:Math.pow((j[0]+.055)/1.055,2.4))+.7152*(j[1]<=.03928?j[1]/12.92:Math.pow((j[1]+.055)/1.055,2.4))+.0722*(j[2]<=.03928?j[2]/12.92:Math.pow((j[2]+.055)/1.055,2.4)),_=s.properties.get("color").toRenderColor(null).toArray01(),w=s.properties.get("intensity"),C=s.properties.get("direction"),D=1-o.c7(C.x,C.y,C.z)[2]/90,L=m(_)*w*D,z=u.properties.get("color").toRenderColor(null).toArray01(),N=u.properties.get("intensity");return(L+m(z)*N)/2}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const s=[];return this.directionalLight&&s.push(this.directionalLight.get()),this.ambientLight&&s.push(this.ambientLight.get()),s}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(s){if(!s)return this;if(o.cn(s)){const u=o.co(s),m=this.fragments.find(({id:w})=>w===u);if(!m)throw new Error(`Style import not found: ${s}`);const _=o.cm(s);return m.style.getFragmentStyle(_)}{const u=this.fragments.find(({id:m})=>m===s);if(!u)throw new Error(`Style import not found: ${s}`);return u.style}}getConfigProperty(s,u){const m=this.getFragmentStyle(s);if(!m)return null;const _=o.av(u,m.scope),w=m.options.get(_),C=w?w.value||w.default:null;return C?C.serialize():null}setConfigProperty(s,u,m){const _=this.getFragmentStyle(s);if(!_)return;const w=_.stylesheet.schema;if(!w||!w[u])return;const C=o.M(m);if(C.result!=="success")return void es(this,C.value);const D=C.value.expression,L=o.av(u,_.scope),z=_.options.get(L);if(!z)return;let N;const{minValue:j,maxValue:q,stepValue:Z,type:ne,values:ie}=w[u],oe=o.M(w[u].default);oe.result==="success"&&(N=oe.value.expression),N?(this.options.set(L,{...z,value:D,default:N,minValue:j,maxValue:q,stepValue:Z,type:ne,values:ie}),this.updateConfigDependencies(u)):this.fire(new o.t(new Error(`No schema defined for the config option "${u}" in the "${s}" fragment.`)))}getConfig(s){const u=this.getFragmentStyle(s);if(!u)return null;const m=u.stylesheet.schema;if(!m)return null;const _={};for(const w in m){const C=o.av(w,u.scope),D=u.options.get(C),L=D?D.value||D.default:null;_[w]=L?L.serialize():null}return _}setConfig(s,u){const m=this.getFragmentStyle(s);m&&(m.updateConfig(u,m.stylesheet.schema),this.updateConfigDependencies())}getSchema(s){const u=this.getFragmentStyle(s);return u?u.stylesheet.schema:null}setSchema(s,u){const m=this.getFragmentStyle(s);m&&(m.stylesheet.schema=u,m.updateConfig(m._config,u),this.updateConfigDependencies())}updateConfig(s,u){if(this._config=s,s||u)if(u)for(const m in u){let _,w;const C=o.M(u[m].default);if(C.result==="success"&&(_=C.value.expression),s&&s[m]!==void 0){const q=o.M(s[m]);q.result==="success"&&(w=q.value.expression)}const{minValue:D,maxValue:L,stepValue:z,type:N,values:j}=u[m];if(_){const q=o.av(m,this.scope);this.options.set(q,{default:_,value:w,minValue:D,maxValue:L,stepValue:z,type:N,values:j})}else this.fire(new o.t(new Error(`No schema defined for config option "${m}".`)))}else this.fire(new o.t(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(s){for(const u of this._configDependentLayers){const m=this.getLayer(u);if(m){if(s&&!m.configDependencies.has(s))continue;m.possiblyEvaluateVisibility(),this._updateLayer(m)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.forEachFragmentStyle(u=>{if(u._styleColorTheme.colorTheme){const m=u._evaluateColorThemeData(u._styleColorTheme.colorTheme);(!u._styleColorTheme.lut&&m!==""||u._styleColorTheme.lut&&m!==u._styleColorTheme.lut.data)&&u.setColorTheme(u._styleColorTheme.colorTheme)}}),this._changes.setDirty()}addLayer(s,u,m={}){this._checkLoaded();const _=s.id;if(this._layers[_])return void this.fire(new o.t(new Error(`Layer with id "${_}" already exists on this map`)));let w;if(s.type==="custom"){if(es(this,o.cp(s)))return;w=o.cq(s,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof s.source=="object"&&(this.addSource(_,s.source),s=o.cl(s),s=o.l(s,{source:_})),this._validate(it,`layers.${_}`,s,{arrayIndex:-1},m))return;w=o.cq(s,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(w),w.setEventedParent(this,{layer:{id:_}}),this._serializedLayers[w.id]=w.serialize()}w.configDependencies.size!==0&&this._configDependentLayers.add(w.fqid);let C=this._order.length;if(u){const N=this._order.indexOf(u);if(N===-1)return void this.fire(new o.t(new Error(`Layer with id "${u}" does not exist on this map.`)));w.slot===this._layers[u].slot?C=N:o.w(`Layer with id "${u}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(C,0,_),this._layerOrderChanged=!0,this._layers[_]=w;const D=this.getOwnLayerSourceCache(w),L=!!this.directionalLight&&this.directionalLight.shadowsEnabled();D&&w.canCastShadows()&&L&&(D.castsShadows=!0);const z=this._changes.getRemovedLayer(w);if(z&&w.source&&D&&w.type!=="custom"){this._changes.discardLayerRemoval(w);const N=o.av(w.source,w.scope);z.type!==w.type?this._changes.updateSourceCache(N,"clear"):(this._changes.updateSourceCache(N,"reload"),D.pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map),w.scope=this.scope,this.mergeLayers()}moveLayer(s,u){this._checkLoaded();const m=this._checkLayer(s);if(!m||s===u)return;const _=this._order.indexOf(s);this._order.splice(_,1);let w=this._order.length;if(u){const C=this._order.indexOf(u);if(C===-1)return void this.fire(new o.t(new Error(`Layer with id "${u}" does not exist on this map.`)));m.slot===this._layers[u].slot?w=C:o.w(`Layer with id "${u}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(w,0,s),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(s){this._checkLoaded();const u=this._checkLayer(s);if(!u)return;u.setEventedParent(null);const m=this._order.indexOf(s);this._order.splice(m,1),delete this._layers[s],delete this._serializedLayers[s],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(u.fqid),this._changes.removeLayer(u);const _=this.getOwnLayerSourceCache(u);if(_&&_.castsShadows){let w=!1;for(const C in this._layers)if(this._layers[C].source===u.source&&this._layers[C].canCastShadows()){w=!0;break}_.castsShadows=w}u.onRemove&&u.onRemove(this.map),this.mergeLayers()}getOwnLayer(s){return this._layers[s]}hasLayer(s){return s in this._mergedLayers}hasLayerType(s){for(const u in this._layers)if(this._layers[u].type===s)return!0;return!1}setLayerZoomRange(s,u,m){this._checkLoaded();const _=this._checkLayer(s);_&&(_.minzoom===u&&_.maxzoom===m||(u!=null&&(_.minzoom=u),m!=null&&(_.maxzoom=m),this._updateLayer(_)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(s,u){this._checkLoaded();const m=this._checkLayer(s);m&&m.slot!==u&&(m.slot=u,this._updateLayer(m))}setFilter(s,u,m={}){this._checkLoaded();const _=this._checkLayer(s);if(_&&!o.bh(_.filter,u))return u==null?(_.filter=void 0,void this._updateLayer(_)):void(this._validate(se,`layers.${_.id}.filter`,u,{layerType:_.type},m)||(_.filter=o.cl(u),this._updateLayer(_)))}getFilter(s){const u=this._checkLayer(s);if(u)return o.cl(u.filter)}setLayoutProperty(s,u,m,_={}){this._checkLoaded();const w=this._checkLayer(s);if(w&&!o.bh(w.getLayoutProperty(u),m)){if(m!=null&&(!_||_.validate!==!1)&&es(w,Be.call(aa,{key:`layers.${s}.layout.${u}`,layerType:w.type,objectKey:u,value:m,styleSpec:o._,style:{glyphs:!0,sprite:!0}})))return;w.setLayoutProperty(u,m),w.configDependencies.size!==0&&this._configDependentLayers.add(w.fqid),this._updateLayer(w)}}getLayoutProperty(s,u){const m=this._checkLayer(s);if(m)return m.getLayoutProperty(u)}setPaintProperty(s,u,m,_={}){this._checkLoaded();const w=this._checkLayer(s);if(!w||o.bh(w.getPaintProperty(u),m)||m!=null&&(!_||_.validate!==!1)&&es(w,Ae.call(aa,{key:`layers.${s}.paint.${u}`,layerType:w.type,objectKey:u,value:m,styleSpec:o._})))return;const C=w.setPaintProperty(u,m);w.configDependencies.size!==0&&this._configDependentLayers.add(w.fqid),C&&this._updateLayer(w),this._changes.updatePaintProperties(w)}getPaintProperty(s,u){const m=this._checkLayer(s);if(m)return m.getPaintProperty(u)}setFeatureState(s,u){this._checkLoaded();const m=s.source,_=s.sourceLayer,w=this._checkSource(m);if(!w)return;const C=w.type;if(C==="geojson"&&_)return void this.fire(new o.t(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(C==="vector"&&!_)return void this.fire(new o.t(new Error("The sourceLayer parameter must be provided for vector source types.")));s.id===void 0&&this.fire(new o.t(new Error("The feature id parameter must be provided.")));const D=this.getOwnSourceCaches(m);for(const L of D)L.setFeatureState(_,s.id,u)}removeFeatureState(s,u){this._checkLoaded();const m=s.source,_=this._checkSource(m);if(!_)return;const w=_.type,C=w==="vector"?s.sourceLayer:void 0;if(w==="vector"&&!C)return void this.fire(new o.t(new Error("The sourceLayer parameter must be provided for vector source types.")));if(u&&typeof s.id!="string"&&typeof s.id!="number")return void this.fire(new o.t(new Error("A feature id is required to remove its specific state property.")));const D=this.getOwnSourceCaches(m);for(const L of D)L.removeFeatureState(C,s.id,u)}getFeatureState(s){this._checkLoaded();const u=s.source,m=s.sourceLayer,_=this._checkSource(u);if(_){if(_.type!=="vector"||m)return s.id===void 0&&this.fire(new o.t(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(u)[0].getFeatureState(m,s.id);this.fire(new o.t(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(s){return this.stylesheet.transition=o.l({},this.stylesheet.transition,s),this.transition=this.stylesheet.transition,this}getTransition(){return o.l({},this.stylesheet.transition)}serialize(){this._checkLoaded();const s=this.getTerrain(),u=s&&this.terrain&&this.terrain.scope===this.scope?s:this.stylesheet.terrain;return o.cr({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:u,fog:this.stylesheet.fog,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},m=>m!==void 0)}_updateLayer(s){this._changes.updateLayer(s);const u=this.getLayerSourceCache(s),m=o.av(s.source,s.scope),_=this._changes.getUpdatedSourceCaches();s.source&&!_[m]&&u&&u.getSource().type!=="raster"&&(this._changes.updateSourceCache(m,"reload"),u.pause()),s.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(s){const u=D=>this._mergedLayers[D].is3D(),m=this.order,_={},w=[];for(let D=m.length-1;D>=0;D--){const L=m[D];if(u(L)){_[L]=D;for(const z of s){const N=z[L];if(N)for(const j of N)w.push(j)}}}w.sort((D,L)=>L.intersectionZ-D.intersectionZ);const C=[];for(let D=m.length-1;D>=0;D--){const L=m[D];if(u(L))for(let z=w.length-1;z>=0;z--){const N=w[z].feature;if(N.layer&&_[N.layer.id]<D)break;C.push(N),w.pop()}else for(const z of s){const N=z[L];if(N)for(const j of N)C.push(j.feature)}}return C}queryRenderedFeatures(s,u,m){u&&u.filter&&this._validate(se,"queryRenderedFeatures.filter",u.filter,null,u),u.scope=this.scope,u.availableImages=this._availableImages,u.serializedLayers=this._serializedLayers;const _={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new o.t(new Error("parameters.layers must be an Array."))),[];for(const z of u.layers){const N=this._mergedLayers[z];if(!N)return this.fire(new o.t(new Error(`The layer '${z}' does not exist in the map's style and cannot be queried for features.`))),[];_[N.source]=!0}}const w=[],C=u.serializedLayers||{},D=u&&u.layers?u.layers.some(z=>{const N=this.getLayer(z);return N&&N.is3D()}):this.has3DLayers(),L=Kn.createFromScreenPoints(s,m);for(const z in this._mergedSourceCaches){const N=this._mergedSourceCaches[z].getSource();if(!N||N.scope!==u.scope)continue;const j=this._mergedSourceCaches[z].getSource().id;u.layers&&!_[j]||w.push(Kd(this._mergedSourceCaches[z],this._mergedLayers,C,L,u,m,D,!!this.map._showQueryGeometry))}return this.placement&&w.push(function(z,N,j,q,Z,ne,ie){const oe={},ae=ne.queryRenderedSymbols(q),ge=[];for(const ye of Object.keys(ae).map(Number))ge.push(ie[ye]);ge.sort(qc);for(const ye of ge){const pe=ye.featureIndex.lookupSymbolFeatures(ae[ye.bucketInstanceId],N,ye.bucketIndex,ye.sourceLayerIndex,Z.filter,Z.layers,Z.availableImages,z);for(const we in pe){const be=oe[we]=oe[we]||[],Fe=pe[we];Fe.sort((Ee,Me)=>{const Qe=ye.featureSortOrder;if(Qe){const Re=Qe.indexOf(Ee.featureIndex);return Qe.indexOf(Me.featureIndex)-Re}return Me.featureIndex-Ee.featureIndex});for(const Ee of Fe)be.push(Ee)}}for(const ye in oe)oe[ye].forEach(pe=>{const we=pe.feature,be=j(z[ye]);if(!be)return;const Fe=be.getFeatureState(we.layer["source-layer"],we.id);we.source=we.layer.source,we.layer["source-layer"]&&(we.sourceLayer=we.layer["source-layer"]),we.state=Fe});return oe}(this._mergedLayers,C,this.getLayerSourceCache.bind(this),L.screenGeometry,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(s,u){u&&u.filter&&this._validate(se,"querySourceFeatures.filter",u.filter,null,u);const m=this.getOwnSourceCaches(s);let _=[];for(const w of m)_=_.concat(Vu(w,u));return _}addSourceType(s,u,m){return ts.getSourceType(s)?m(new Error(`A source type called "${s}" already exists.`)):(ts.setSourceType(s,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:s,url:u.workerSourceURL},m):m(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(s,u,m={}){this._checkLoaded();const _=this.light.getLight();let w=!1;for(const D in s)if(!o.bh(s[D],_[D])){w=!0;break}if(!w)return;const C=this._getTransitionParameters();this.light.setLight(s,u,m),this.light.updateTransitions(C)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=o.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&o.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(s,u=1){if(this._checkLoaded(),!s)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),u===0&&delete this.terrain,s===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let m=s;const _=s.source==null;if(u===1){if(this.disableElevatedTerrain)return;if(typeof m.source=="object"){const D="terrain-dem-src";this.addSource(D,m.source),m=o.cl(m),m=o.l(m,{source:D})}const w=o.l({},m),C={};if(this.terrain&&_){w.source=this.terrain.get().source;const D=this.terrain?this.getFragmentStyle(this.terrain.scope):null;D&&(C.style=D.serialize())}if(this._validate(Nu,"terrain",w,C))return}if(!this.terrain||this.terrain.scope!==this.scope&&!_||this.terrain&&u!==this.terrain.drapeRenderMode){if(!m)return;this._createTerrain(m,u),this.fire(new o.x("data",{dataType:"style"}))}else{const w=this.terrain,C=w.get();for(const D of Object.keys(o._.terrain))!m.hasOwnProperty(D)&&o._.terrain[D].default&&(m[D]=o._.terrain[D].default);for(const D in s)if(!o.bh(s[D],C[D])){w.set(s,this.options),this.stylesheet.terrain=s;const L=this._getTransitionParameters({duration:0});w.updateTransitions(L),this.fire(new o.x("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(s){const u=this.fog=new mn(s,this.map.transform,this.scope,this.options);this.stylesheet.fog=u.get();const m=this._getTransitionParameters({duration:0});u.updateTransitions(m)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const s of this.map._markers)s._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(s){if(this._checkLoaded(),!s)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const u=this.fog;if(!o.bh(u.get(),s)){u.set(s,this.options),this.stylesheet.fog=u.get();const m=this._getTransitionParameters({duration:0});u.updateTransitions(m)}}else this._createFog(s);this._markersNeedUpdate=!0}setColorTheme(s){this._checkLoaded();const u=()=>{for(const _ in this._layers)this._layers[_].lut=this._styleColorTheme.lut;for(const _ in this._sourceCaches)this._sourceCaches[_].clearTiles()};if(this._styleColorTheme.colorTheme=s,!s)return this._styleColorTheme.lut=null,void u();const m=this._evaluateColorThemeData(s);this._loadColorTheme(m).then(()=>{this.fire(new o.x("colorthemeset")),u()}).catch(_=>{o.w(`Couldn't set color theme: ${_}`)})}_getTransitionParameters(s){return{now:o.q.now(),transition:o.l(this.transition,s)}}updateDrapeFirstLayers(){if(!this.terrain)return;const s=[],u=[];for(const m of this._mergedOrder)this.isLayerDraped(this._mergedLayers[m])?s.push(m):u.push(m);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...s),this._drapedFirstOrder.push(...u)}_createTerrain(s,u){const m=this.terrain=new dt(s,u,this.scope,this.options);u===1&&(this.stylesheet.terrain=s),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const _=this._getTransitionParameters({duration:0});m.updateTransitions(_)}_force3DLayerUpdate(){for(const s in this._layers){const u=this._layers[s];u.type==="fill-extrusion"&&this._updateLayer(u)}}_forceSymbolLayerUpdate(){for(const s in this._layers){const u=this._layers[s];u.type==="symbol"&&this._updateLayer(u)}}_validate(s,u,m,_,w={}){if(w&&w.validate===!1)return!1;const C=o.l({},this.serialize());return es(this,s.call(aa,o.l({key:u,style:C,value:m,styleSpec:o._},_)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.cs.off("pluginStateChange",this._rtlTextPluginCallback);for(const s in this._mergedLayers)this._mergedLayers[s].setEventedParent(null);for(const s in this._mergedSourceCaches)this._mergedSourceCaches[s].clearTiles(),this._mergedSourceCaches[s].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(s){const u=this.getSourceCaches(s);for(const m of u)m.clearTiles()}clearSources(){for(const s in this._mergedSourceCaches)this._mergedSourceCaches[s].clearTiles()}reloadSource(s){const u=this.getSourceCaches(s);for(const m of u)m.resume(),m.reload()}reloadSources(){for(const s of this.getSources())s.reload&&s.reload()}updateSources(s){let u;this.directionalLight&&(u=Np(this.directionalLight));for(const m in this._mergedSourceCaches)this._mergedSourceCaches[m].update(s,void 0,void 0,u)}_generateCollisionBoxes(){for(const s in this._sourceCaches){const u=this._sourceCaches[s];u.resume(),u.reload()}}_updatePlacement(s,u,m,_,w,C,D=!1){let L=!1,z=!1;const N={},j={};for(const q of this._mergedOrder){const Z=this._mergedLayers[q];if(Z.type!=="symbol")continue;const ne=o.av(Z.source,Z.scope);let ie=N[ne];if(!ie){const ae=this.getLayerSourceCache(Z);if(!ae)continue;const ge=ae.getRenderableIds(!0).map(ye=>ae.getTileByID(ye));j[ne]=ge.slice(),ie=N[ne]=ge.sort((ye,pe)=>pe.tileID.overscaledZ-ye.tileID.overscaledZ||(ye.tileID.isLessThan(pe.tileID)?-1:1))}const oe=this.crossTileSymbolIndex.addLayer(Z,ie,u.center.lng,u.projection);L=L||oe}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),D=D||this._layerOrderChanged||_===0,this._layerOrderChanged&&this.fire(new o.x("neworder")),(D||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.q.now(),u.zoom))&&(this.pauseablePlacement=new Yd(u,this._mergedOrder,D,m,_,w,this.placement,this.fog&&u.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,N,j),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.q.now()),z=!0),L&&this.pauseablePlacement.placement.setStale()),z||L){this._buildingIndex.onNewFrame(u.zoom);for(let q=0;q<this._mergedOrder.length;q++){const Z=this._mergedLayers[this._mergedOrder[q]];if(Z.type!=="symbol")continue;const ne=this.isLayerClipped(Z);this.placement.updateLayerOpacities(Z,N[o.av(Z.source,Z.scope)],q,ne?C:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.q.now())}}_releaseSymbolFadeTiles(){for(const s in this._sourceCaches)this._sourceCaches[s].releaseSymbolFadeTiles()}addImport(s,u){this._checkLoaded();const m=this.stylesheet.imports=this.stylesheet.imports||[];if(m.findIndex(({id:w})=>w===s.id)!==-1)return void this.fire(new o.t(new Error(`Import with id '${s.id}' already exists in the map's style.`)));if(!u)return m.push(s),this._loadImports([s],!0);const _=m.findIndex(({id:w})=>w===u);return _===-1&&this.fire(new o.t(new Error(`Import with id "${u}" does not exist on this map.`))),this.stylesheet.imports=m.slice(0,_).concat(s).concat(m.slice(_)),this._loadImports([s],!0,u)}updateImport(s,u){this._checkLoaded();const m=this.stylesheet.imports||[],_=this.getImportIndex(s);return _===-1?this:typeof u=="string"?(this.setImportUrl(s,u),this):(u.url&&u.url!==m[_].url&&this.setImportUrl(s,u.url),o.bh(u.config,m[_].config)||this.setImportConfig(s,u.config),o.bh(u.data,m[_].data)||this.setImportData(s,u.data),this)}moveImport(s,u){this._checkLoaded();let m=this.stylesheet.imports||[];const _=this.getImportIndex(s);if(_===-1)return this;const w=this.getImportIndex(u);if(w===-1)return this;const C=m[_],D=this.fragments[_];return m=m.filter(({id:L})=>L!==s),this.fragments=this.fragments.filter(({id:L})=>L!==s),this.stylesheet.imports=m.slice(0,w).concat(C).concat(m.slice(w)),this.fragments=this.fragments.slice(0,w).concat(D).concat(this.fragments.slice(w)),this.mergeLayers(),this}setImportUrl(s,u){this._checkLoaded();const m=this.stylesheet.imports||[],_=this.getImportIndex(s);if(_===-1)return this;m[_].url=u;const w=this.fragments[_];return w.style=this._createFragmentStyle(m[_]),w.style.on("style.import.load",()=>this.mergeAll()),w.style.loadURL(u),this}setImportData(s,u){this._checkLoaded();const m=this.getImportIndex(s),_=this.stylesheet.imports||[];return m===-1?this:u?(this.fragments[m].style.setState(u),this._reloadImports(),this):(delete _[m].data,this.setImportUrl(s,_[m].url))}setImportConfig(s,u){this._checkLoaded();const m=this.getImportIndex(s),_=this.stylesheet.imports||[];if(m===-1)return this;u?_[m].config=u:delete _[m].config;const w=this.fragments[m],C=w.style.stylesheet&&w.style.stylesheet.schema;return w.config=u,w.style.updateConfig(u,C),this.updateConfigDependencies(),this}removeImport(s){this._checkLoaded();const u=this.stylesheet.imports||[],m=this.getImportIndex(s);m!==-1&&(u.splice(m,1),this.fragments[m].style._remove(),this.fragments.splice(m,1),this._reloadImports())}getImportIndex(s){const u=(this.stylesheet.imports||[]).findIndex(m=>m.id===s);return u===-1&&this.fire(new o.t(new Error(`Import '${s}' does not exist in the map's style and cannot be updated.`))),u}getLayer(s){return this._mergedLayers[s]}getSources(){const s=[];for(const u in this._mergedOtherSourceCaches){const m=this._mergedOtherSourceCaches[u];m&&s.push(m.getSource())}return s}getSource(s,u){const m=this.getSourceCache(s,u);return m&&m.getSource()}getLayerSource(s){const u=this.getLayerSourceCache(s);return u&&u.getSource()}getSourceCache(s,u){const m=o.av(s,u);return this._mergedOtherSourceCaches[m]}getLayerSourceCache(s){const u=o.av(s.source,s.scope);return s.type==="symbol"?this._mergedSymbolSourceCaches[u]:this._mergedOtherSourceCaches[u]}getSourceCaches(s){if(s==null)return Object.values(this._mergedSourceCaches);const u=[];return this._mergedOtherSourceCaches[s]&&u.push(this._mergedOtherSourceCaches[s]),this._mergedSymbolSourceCaches[s]&&u.push(this._mergedSymbolSourceCaches[s]),u}updateSourceCaches(){const s=this._changes.getUpdatedSourceCaches();for(const u in s){const m=s[u];m==="reload"?this.reloadSource(u):m==="clear"&&this.clearSource(u)}}updateLayers(s){const u=this._changes.getUpdatedPaintProperties();for(const m of u){const _=this.getLayer(m);_&&_.updateTransitions(s)}}getImages(s,u,m){this.imageManager.getImages(u.icons,u.scope,m),this._updateTilesForChangedImages();const _=w=>{w&&w.setDependencies(u.tileID.key,u.type,u.icons)};_(this._otherSourceCaches[u.source]),_(this._symbolSourceCaches[u.source])}getGlyphs(s,u,m){this.glyphManager.getGlyphs(u.stacks,u.scope,m)}getResource(s,u,m){return o.ct(u,m)}getOwnSourceCache(s){return this._otherSourceCaches[s]}getOwnLayerSourceCache(s){return s.type==="symbol"?this._symbolSourceCaches[s.source]:this._otherSourceCaches[s.source]}getOwnSourceCaches(s){const u=[];return this._otherSourceCaches[s]&&u.push(this._otherSourceCaches[s]),this._symbolSourceCaches[s]&&u.push(this._symbolSourceCaches[s]),u}_isSourceCacheLoaded(s){const u=this.getOwnSourceCaches(s);return u.length===0?(this.fire(new o.t(new Error(`There is no source with ID '${s}'`))),!1):u.every(m=>m.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(s,u){if(!this._clipLayerPresent&&s.type!=="fill-extrusion")return!1;const m=s.type==="fill-extrusion"&&s.sourceLayer==="building";if(s.is3D()){if(m||u&&u.type==="batched-model"||s.type==="model")return!0}else if(s.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(s=>{s.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}ts.getSourceType=function(p){return XA[p]},ts.setSourceType=function(p,s){XA[p]=s},ts.registerForPluginStateChange=o.cc;var Cx=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,Q0=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec2 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color) {
#ifdef INDICATOR_CUTOUT
float holeMinOpacity=u_indicator_cutout_params.x;float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,N0=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,Gp="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Sx=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,Ex=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Tx=`highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}
#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {
#ifdef FOG_DITHERING
vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);
#else
return color;
#endif
}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,Fx=`#ifdef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,V0=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,Ix=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,$d=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef NATIVE
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return mix(lerpx.x,lerpx.y,f.y);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth));
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const Kp=[];$c(Cx,Kp),$c(N0,Kp),$c(Q0,Kp);const ef={"_prelude_fog.vertex.glsl":Ex,"_prelude_terrain.vertex.glsl":Sx,"_prelude_shadow.vertex.glsl":Ix,"_prelude_fog.fragment.glsl":Tx,"_prelude_shadow.fragment.glsl":$d,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":Fx,"_prelude_raster_particle.glsl":V0},lh={};rn("",Sx),rn(Tx,Ex),rn($d,Ix),rn(Fx,""),rn(V0,"");const tf=rn(Q0,N0),Wp=Cx;var Jc={background:rn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:rn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:rn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float opacity_t=smoothstep((1.0-blur_positive)*antialiased_blur,blur_positive*antialiased_blur,extrude_length-1.0)-smoothstep(0.0,antialiasblur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:rn("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:rn(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:rn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:rn("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:rn("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:rn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:rn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:rn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:rn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:rn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in highp vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:rn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);v_flat=vec4(linearProduct(color.rgb,vec3(calculate_NdotL(normal))),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:rn(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base);pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:rn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:rn(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0)).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:rn(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:rn(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:rn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:rn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=out_color.a;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=(border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color.rgb=mix(border_color.rgb*border_color.a*trim_alpha,out_color.rgb,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in float a_z_offset;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);
#ifdef ELEVATED_ROADS
gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset+0.01*step(0.01,a_z_offset),1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 halfCellProgress=normal.yx*32.0;float ele0=elevation(pos);float ele_line=max(ele0,max(elevation(pos+halfCellProgress),elevation(pos-halfCellProgress)));float ele1=elevation(pos+offsetTile);float ele2=elevation(pos-offsetTile);float ele_max=max(ele_line,0.5*(ele1+ele2));float ele=ele_max-ele0+ele1+a_z_offset ;gl_Position=u_matrix*vec4(pos+offsetTile,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*0.1*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:rn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 v_uv;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {color=vec4(0,0,0,0);}}
#endif
#ifdef LINE_JOIN_NONE
float pattern_len=pattern_size/aspect;float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_ground(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in float a_z_offset;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec4 v_uv;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);
#ifdef ELEVATED_ROADS
gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset+0.01*step(0.01,a_z_offset),1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 halfCellProgress=normal.yx*32.0;float ele0=elevation(pos);float ele_line=max(ele0,max(elevation(pos+halfCellProgress),elevation(pos-halfCellProgress)));float ele1=elevation(pos+offsetTile);float ele2=elevation(pos-offsetTile);float ele_max=max(ele_line,0.5*(ele1+ele2));float ele=ele_max-ele0+ele1+a_z_offset ;gl_Position=u_matrix*vec4(pos+offsetTile,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*0.1*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
float a_uv_x=a_packed[0];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef LINE_JOIN_NONE
v_width=floorwidth+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:rn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:rn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:rn("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:rn("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:rn(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:rn(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+(u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#else
z+=u_pitch_with_map ? (u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
}`),terrainRaster:rn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:rn("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:rn(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Gp),skyboxGradient:rn(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Gp),skyboxCapture:rn(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:rn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(raster.rgb*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:rn(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;
#ifndef NATIVE
c=dither(c,gl_FragCoord.xy+u_temporal_offset);
#endif
glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:rn(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:rn(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:rn(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),occlusion:rn("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function $c(p,s){const u=p.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let m of u)if(m=m.trim(),m[0]==="#"&&m.includes("if")&&!m.includes("endif")){m=m.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const _=m.split(" ");for(const w of _)s.includes(w)||s.push(w)}}function rn(p,s){const u=/#include\s+"([^"]+)"/g,m=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let _=s.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);_&&(_=_.map(z=>{const N=z.split(" ");return N[N.length-1]}),_=[...new Set(_)]);const w={},C=[],D=[];if(p=p.replace(u,(z,N)=>(D.push(N),"")),(s=s.replace(u,(z,N)=>(C.push(N),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let L=[...Kp];$c(p,L),$c(s,L);for(const z of[...C,...D])ef[z]||console.error(`Undefined include: ${z}`),lh[z]||(lh[z]=[],$c(ef[z],lh[z])),L=[...L,...lh[z]];return{fragmentSource:p=p.replace(m,(z,N,j,q,Z)=>(w[Z]=!0,N==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
in ${j} ${q} ${Z};
#else
uniform ${j} ${q} u_${Z};
#endif
`:N==="initialize"?`
#ifdef HAS_UNIFORM_u_${Z}
    ${j} ${q} ${Z} = u_${Z};
#endif
`:N==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${Z}
    in ${j} ${q} ${Z};
#endif
`:N==="initialize-attribute"?"":void 0)),vertexSource:s=s.replace(m,(z,N,j,q,Z)=>{const ne=q==="float"?"vec2":q,ie=Z.match(/color/)?"color":ne;return N==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${Z}
in ${j} ${q} a_${Z};
#endif
`:w[Z]?N==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
in ${j} ${ne} a_${Z};
out ${j} ${q} ${Z};
#else
uniform ${j} ${q} u_${Z};
#endif
`:N==="initialize"?ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = a_${Z};
#else
    ${j} ${q} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = unpack_mix_${ie}(a_${Z}, u_${Z}_t);
#else
    ${j} ${q} ${Z} = u_${Z};
#endif
`:N==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${Z}
    in ${j} ${q} a_${Z};
    out ${j} ${q} ${Z};
#endif
`:N==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${Z}
    ${Z} = a_${Z};
#endif
`:void 0:N==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
in ${j} ${ne} a_${Z};
#else
uniform ${j} ${q} u_${Z};
#endif
`:N==="define-instanced"?ie==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${Z}0;
in vec4 a_${Z}1;
in vec4 a_${Z}2;
in vec4 a_${Z}3;
#else
uniform ${j} ${q} u_${Z};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${j} ${ne} a_${Z};
#else
uniform ${j} ${q} u_${Z};
#endif
`:N==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${Z}
    ${j} ${q} ${Z} = a_${Z};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${j} ${q} ${Z} = a_${Z};
#else
    ${j} ${q} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${j} ${q} ${Z} = unpack_mix_${ie}(a_${Z}, u_${Z}_t);
#else
    ${j} ${q} ${Z} = u_${Z};
#endif
`}),staticAttributes:_,usedDefines:L,vertexIncludes:C,fragmentIncludes:D}}class ch{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(s,u,m,_,w,C,D,L){this.context=s;let z=this.boundPaintVertexBuffers.length!==_.length;for(let j=0;!z&&j<_.length;j++)this.boundPaintVertexBuffers[j]!==_[j]&&(z=!0);let N=this.boundDynamicVertexBuffers.length!==D.length;for(let j=0;!N&&j<D.length;j++)this.boundDynamicVertexBuffers[j]!==D[j]&&(N=!0);if(!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==m||z||N||this.boundIndexBuffer!==w||this.boundVertexOffset!==C)this.freshBind(u,m,_,w,C,D,L);else{s.bindVertexArrayOES.set(this.vao);for(const j of D)j&&(j.bind(),L&&j.instanceCount&&j.setVertexAttribDivisor(s.gl,u,L));w&&w.dynamicDraw&&w.bind()}}freshBind(s,u,m,_,w,C,D){const L=s.numAttributes,z=this.context,N=z.gl;this.vao&&this.destroy(),this.vao=z.gl.createVertexArray(),z.bindVertexArrayOES.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=_,this.boundVertexOffset=w,this.boundDynamicVertexBuffers=C,u.enableAttributes(N,s),u.bind(),u.setVertexAttribPointers(N,s,w);for(const j of m)j.enableAttributes(N,s),j.bind(),j.setVertexAttribPointers(N,s,w);for(const j of C)j&&(j.enableAttributes(N,s),j.bind(),j.setVertexAttribPointers(N,s,w),D&&j.instanceCount&&j.setVertexAttribDivisor(N,s,D));_&&_.bind(),z.currentNumAttributes=L}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function rf(p,s){const u=Math.pow(2,s.canonical.z),m=s.canonical.y;return[new o.a5(0,m/u).toLngLat().lat,new o.a5(0,(m+1)/u).toLngLat().lat]}function qp(p,s,u,m,_,w,C){const D=p.context,L=D.gl,z=u.hillshadeFBO;if(!z)return;p.prepareDrawTile();const N=p.isTileAffectedByFog(s),j=p.getOrCreateProgram("hillshade",{overrideFog:N});D.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,z.colorAttachment.get());const q=((oe,ae,ge,ye)=>{const pe=ge.paint.get("hillshade-shadow-color"),we=ge.paint.get("hillshade-highlight-color"),be=ge.paint.get("hillshade-accent-color"),Fe=ge.paint.get("hillshade-emissive-strength");let Ee=o.bB(ge.paint.get("hillshade-illumination-direction"));if(ge.paint.get("hillshade-illumination-anchor")==="viewport")Ee-=oe.transform.angle;else if(oe.style&&oe.style.enable3dLights()&&oe.style.directionalLight){const Qe=oe.style.directionalLight.properties.get("direction"),Re=o.c7(Qe.x,Qe.y,Qe.z);Ee=o.bB(Re[1])}const Me=!oe.options.moving;return{u_matrix:ye||oe.transform.calculateProjMatrix(ae.tileID.toUnwrapped(),Me),u_image:0,u_latrange:rf(0,ae.tileID),u_light:[ge.paint.get("hillshade-exaggeration"),Ee],u_shadow:pe.toRenderColor(ge.lut),u_highlight:we.toRenderColor(ge.lut),u_emissive_strength:Fe,u_accent:be.toRenderColor(ge.lut)}})(p,u,m,p.terrain?s.projMatrix:null);p.uploadCommonUniforms(D,j,s.toUnwrapped());const{tileBoundsBuffer:Z,tileBoundsIndexBuffer:ne,tileBoundsSegments:ie}=p.getTileBoundsBuffers(u);j.draw(p,L.TRIANGLES,_,w,C,mr.disabled,q,m.id,Z,ne,ie)}function Xp(p,s,u){if(!s.needsDEMTextureUpload)return;const m=p.context,_=m.gl;m.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||p.getTileTexture(u.stride);const w=u.getPixels();s.demTexture?s.demTexture.update(w,{premultiply:!1}):s.demTexture=new o.T(m,w,_.R32F,{premultiply:!1}),s.needsDEMTextureUpload=!1}function nf(p,s,u){const m=p.context,_=m.gl;if(!s.dem)return;const w=s.dem;if(m.activeTexture.set(_.TEXTURE1),Xp(p,s,w),!s.demTexture)return;s.demTexture.bind(_.NEAREST,_.CLAMP_TO_EDGE);const C=w.dim;m.activeTexture.set(_.TEXTURE0);let D=s.hillshadeFBO;if(!D){const q=new o.T(m,{width:C,height:C,data:null},_.RGBA8);q.bind(_.LINEAR,_.CLAMP_TO_EDGE),D=s.hillshadeFBO=m.createFramebuffer(C,C,!0,"renderbuffer"),D.colorAttachment.set(q.texture)}m.bindFramebuffer.set(D.framebuffer),m.viewport.set([0,0,C,C]);const{tileBoundsBuffer:L,tileBoundsIndexBuffer:z,tileBoundsSegments:N}=p.getMercatorTileBoundsBuffers(),j=[];p.linearFloatFilteringSupported()&&j.push("TERRAIN_DEM_FLOAT_FORMAT"),p.getOrCreateProgram("hillshadePrepare",{defines:j}).draw(p,_.TRIANGLES,sr.disabled,wr.disabled,Nr.unblended,mr.disabled,((q,Z)=>{const ne=Z.stride,ie=o.a6.mat4.create();return o.a6.mat4.ortho(ie,0,o.ab,-o.ab,0,0,1),o.a6.mat4.translate(ie,ie,[0,-o.ab,0]),{u_matrix:ie,u_image:1,u_dimension:[ne,ne],u_zoom:q.overscaledZ}})(s.tileID,w),u.id,L,z,N),s.needsHillshadePrepare=!1}class Fn{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class H0 extends Fn{getDefault(){return o.bz.transparent}set(s){const u=this.current;(s.r!==u.r||s.g!==u.g||s.b!==u.b||s.a!==u.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class Mx extends Fn{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class j0 extends Fn{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class Zp extends Fn{getDefault(){return[!0,!0,!0,!0]}set(s){const u=this.current;(s[0]!==u[0]||s[1]!==u[1]||s[2]!==u[2]||s[3]!==u[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class of extends Fn{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class Px extends Fn{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class Dx extends Fn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const u=this.current;(s.func!==u.func||s.ref!==u.ref||s.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class kx extends Fn{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const u=this.current;(s[0]!==u[0]||s[1]!==u[1]||s[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class uh extends Fn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;s?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=s,this.dirty=!1}}class Rx extends Fn{getDefault(){return[0,1]}set(s){const u=this.current;(s[0]!==u[0]||s[1]!==u[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class _T extends Fn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;s?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=s,this.dirty=!1}}class xT extends Fn{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class bT extends Fn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;s?u.enable(u.BLEND):u.disable(u.BLEND),this.current=s,this.dirty=!1}}class G0 extends Fn{getDefault(){const s=this.gl;return[s.ONE,s.ZERO,s.ONE,s.ZERO]}set(s){const u=this.current;(s[0]!==u[0]||s[1]!==u[1]||s[2]!==u[2]||s[3]!==u[3]||this.dirty)&&(this.gl.blendFuncSeparate(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class K0 extends Fn{getDefault(){return o.bz.transparent}set(s){const u=this.current;(s.r!==u.r||s.g!==u.g||s.b!==u.b||s.a!==u.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class W0 extends Fn{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(s,s),this.current=s,this.dirty=!1)}}class q0 extends Fn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;s?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=s,this.dirty=!1}}class Lx extends Fn{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class Ox extends Fn{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}let wT=class extends Fn{getDefault(){return null}set(p){(p!==this.current||this.dirty)&&(this.gl.useProgram(p),this.current=p,this.dirty=!1)}};class af extends Fn{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class sf extends Fn{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const u=this.current;(s[0]!==u[0]||s[1]!==u[1]||s[2]!==u[2]||s[3]!==u[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class Ux extends Fn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class rs extends Fn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class X0 extends Fn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class Yp extends Fn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Jp extends Fn{getDefault(){return null}set(s){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Z0 extends Fn{getDefault(){return null}set(s){this.gl&&(s!==this.current||this.dirty)&&(this.gl.bindVertexArray(s),this.current=s,this.dirty=!1)}}class Y0 extends Fn{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class $p extends Fn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class J0 extends Fn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class lf extends Fn{constructor(s,u){super(s),this.context=s,this.parent=u}getDefault(){return null}}class em extends lf{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class $0 extends lf{attachment(){return this.gl.DEPTH_ATTACHMENT}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,this.attachment(),u.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class zx extends lf{attachment(){return this.gl.DEPTH_ATTACHMENT}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,this.attachment(),u.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class Ah extends $0{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const BT=(p,s,u)=>({u_matrix:p,u_image0:0,u_skirt_height:s,u_ground_shadow_factor:u}),Qx=(p,s,u,m,_,w,C,D,L,z,N,j,q,Z,ne,ie)=>({u_proj_matrix:Float32Array.from(p),u_globe_matrix:s,u_normalize_matrix:Float32Array.from(m),u_merc_matrix:u,u_zoom_transition:_,u_merc_center:w,u_image0:0,u_frustum_tl:C,u_frustum_tr:D,u_frustum_br:L,u_frustum_bl:z,u_globe_pos:N,u_globe_radius:j,u_viewport:q,u_grid_matrix:ie?Float32Array.from(ie):new Float32Array(9),u_skirt_height:Z,u_far_z_cutoff:ne});function Nx(p,s){return p!=null&&s!=null&&!(!p.hasData()||!s.hasData())&&p.demTexture!=null&&s.demTexture!=null&&p.tileID.key!==s.tileID.key}const hh=new class{constructor(){this.operations={}}newMorphing(p,s,u,m,_){if(p in this.operations){const w=this.operations[p];w.to.tileID.key!==u.tileID.key&&(w.queued=u)}else this.operations[p]={startTime:m,phase:0,duration:_,from:s,to:u,queued:null}}getMorphValuesForProxy(p){if(!(p in this.operations))return null;const s=this.operations[p];return{from:s.from,to:s.to,phase:s.phase}}update(p){for(const s in this.operations){const u=this.operations[s];for(u.phase=(p-u.startTime)/u.duration;u.phase>=1||!this._validOp(u);)if(!this._nextOp(u,p)){delete this.operations[s];break}}}_nextOp(p,s){return!!p.queued&&(p.from=p.to,p.to=p.queued,p.queued=null,p.phase=0,p.startTime=s,!0)}_validOp(p){return p.from.hasData()&&p.to.hasData()}},Vx={0:null,1:"TERRAIN_VERTEX_MORPHING"};function Hx(p,s,u){if(s===0)return 0;const m=s<1&&u===514?.25/s:1;return 6*Math.pow(1.5,22-p)*Math.max(s,1)*m}function ev(p,s){const u=1<<p.z;return!s&&(p.x===0||p.x===u-1)||p.y===0||p.y===u-1}const cf=p=>({u_matrix:p});function tm(p,s,u,m,_){if(_>0){const w=o.q.now(),C=(w-p.timeAdded)/_,D=s?(w-s.timeAdded)/_:-1,L=u.getSource(),z=m.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),N=!s||Math.abs(s.tileID.overscaledZ-z)>Math.abs(p.tileID.overscaledZ-z),j=N&&p.refreshedUponExpiration?1:o.ap(N?C:1-D,0,1);return p.refreshedUponExpiration&&C>=1&&(p.refreshedUponExpiration=!1),s?{opacity:1,mix:1-j}:{opacity:j,mix:0}}return{opacity:1,mix:0}}class dh extends qo{constructor(s){const u={type:"raster-dem",maxzoom:s.transform.maxZoom},m=new o.cd(o.ce(),null),_=Wc("mock-dem",u,m,s.style);super("mock-dem",_,!1),_.setEventedParent(this),this._sourceLoaded=!0}_loadTile(s,u){s.state="loaded",u(null)}}class jx extends qo{constructor(s){const u=Wc("proxy",{type:"geojson",maxzoom:s.transform.maxZoom},new o.cd(o.ce(),null),s.style);super("proxy",u,!1),u.setEventedParent(this),this.map=this.getSource().map=s,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(s,u,m){if(s.freezeTileCoverage)return;this.transform=s;const _=s.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((w,C)=>{if(w[C.key]="",!this._tiles[C.key]){const D=new ms(C,this._source.tileSize*C.overscaleFactor(),s.tileZoom);D.state="loaded",this._tiles[C.key]=D}return w},{});for(const w in this._tiles)w in _||(this.freeFBO(w),this._tiles[w].unloadVectorData(),delete this._tiles[w])}freeFBO(s){const u=this.proxyCachedFBO[s];if(u!==void 0){const m=Object.values(u);this.renderCachePool.push(...m),delete this.proxyCachedFBO[s]}}deallocRenderCache(){this.renderCache.forEach(s=>s.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class tv extends o.aA{constructor(s,u,m){super(s.overscaledZ,s.wrap,s.canonical.z,s.canonical.x,s.canonical.y),this.proxyTileKey=u,this.projMatrix=m}}class rv extends o.cE{constructor(s,u){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},s.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),s.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),s.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=s,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[m,_,w]=function(L){const z=new o.a_,N=new o.aO,j=131;z.reserve(17161),N.reserve(33800);const q=o.ab/128,Z=o.ab+q/2,ne=Z+q;for(let oe=-q;oe<ne;oe+=q)for(let ae=-q;ae<ne;ae+=q){const ge=ae<0||ae>Z||oe<0||oe>Z?24575:0,ye=o.ap(Math.round(ae),0,o.ab),pe=o.ap(Math.round(oe),0,o.ab);z.emplaceBack(ye+ge,pe)}const ie=(oe,ae)=>{const ge=ae*j+oe;N.emplaceBack(ge+1,ge,ge+j),N.emplaceBack(ge+j,ge+j+1,ge+1)};for(let oe=1;oe<129;oe++)for(let ae=1;ae<129;ae++)ie(ae,oe);return[0,129].forEach(oe=>{for(let ae=0;ae<130;ae++)ie(ae,oe),ie(oe,ae)}),[z,N,32768]}(),C=s.context;this.gridBuffer=C.createVertexBuffer(m,o.b0.members),this.gridIndexBuffer=C.createIndexBuffer(_),this.gridSegments=o.b1.simpleSegment(0,0,m.length,_.length),this.gridNoSkirtSegments=o.b1.simpleSegment(0,0,m.length,w),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new jx(u.map),this.orthoMatrix=o.a6.mat4.create(),o.a6.mat4.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,o.ab,0,o.ab,0,1);const D=C.gl;this._overlapStencilMode=new wr({func:D.GEQUAL,mask:255},0,255,D.KEEP,D.KEEP,D.REPLACE),this._previousZoom=s.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=u,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new dh(u.map),this._pendingGroundEffectLayers=[]}set style(s){s.on("data",this._onStyleDataEvent.bind(this)),this._style=s,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(s,u,m){if(s&&s.terrain){this._style!==s&&(this.style=s,this._evaluationZoom=void 0);const _=s.terrain.properties,w=s.terrain.drapeRenderMode===0,C=s.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=o.q.now();const D=s.terrain&&s.terrain.scope,L=_.get("source"),z=w?this._mockSourceCache:s.getSourceCache(L,D);if(!z)return void o.w(`Couldn't find terrain source "${L}".`);if(this.sourceCache=z,this._exaggeration=C?this.calculateExaggeration(u):_.get("exaggeration"),!u.projection.requiresDraping&&C&&this._exaggeration===0)return void this._disable();this.enabled=!0;const N=()=>{this.sourceCache.used&&o.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const j=this.getScaledDemTileSize();this.sourceCache.update(u,j,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,N(),this._initializing=!0),N(),u.updateElevation(!0,m),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(u),this._emptyDEMTextureDirty=!0,this._previousZoom=u.zoom}else this._disable()}calculateExaggeration(s){const u=this._previousCameraAltitude,m=s.getFreeCameraOptions().position.z/s.pixelsPerMeter*s.worldSize;this._previousCameraAltitude=m;const _=u!=null?m-u:Number.MAX_VALUE;if(Math.abs(_)<2)return this._exaggeration;const w=s.zoom,C=this._style.terrain;if(!this._previousUpdateTimestamp)return C.getExaggeration(w);let D=w-this._previousZoom;const L=this._previousUpdateTimestamp;let z=w;this._evaluationZoom!=null&&(z=this._evaluationZoom,Math.abs(w-z)>.5&&(D=.5*(w-z+D)),D*_<0&&(z+=D)),this._evaluationZoom=z;const N=C.getExaggeration(z),j=N===C.getExaggeration(Math.max(0,z-.1));if(j&&Math.abs(N-this._exaggeration)<.01)return N;let q=Math.min(.1,.00375*(this._updateTimestamp-L));return(j||N<.1||Math.abs(D)<1e-4)&&(q=Math.min(.2,4*q)),o.aa(this._exaggeration,N,q)}resetTileLookupCache(s){this._findCoveringTileCache[s]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(s){s.coord&&s.dataType==="source"?this._clearRenderCacheForTile(s.sourceCacheId,s.coord):s.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const s in this._style._mergedSourceCaches)this._style._mergedSourceCaches[s].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(s=>s.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const s=2*this.proxySourceCache.getSource().tileSize;return[s,s]}set useVertexMorphing(s){this._useVertexMorphing=s}updateTileBinding(s){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const u=this.proxySourceCache,m=this.painter.transform;this._initializing&&(this._initializing=m._centerAltitude===0&&this.getAtPointOrZero(o.a5.fromLngLat(m.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const _=this.proxyCoords=u.getIds().map(L=>{const z=u.getTileByID(L).tileID;return z.projMatrix=m.calculateProjMatrix(z.toUnwrapped()),z});(function(L,z){const N=z.transform.pointCoordinate(z.transform.getCameraPoint()),j=new o.P(N.x,N.y);L.sort((q,Z)=>{if(Z.overscaledZ-q.overscaledZ)return Z.overscaledZ-q.overscaledZ;const ne=new o.P(q.canonical.x+(1<<q.canonical.z)*q.wrap,q.canonical.y),ie=new o.P(Z.canonical.x+(1<<Z.canonical.z)*Z.wrap,Z.canonical.y),oe=j.mult(1<<q.canonical.z);return oe.x-=.5,oe.y-=.5,oe.distSqr(ne)-oe.distSqr(ie)})})(_,this.painter);const w=this.proxyToSource||{};this.proxyToSource={},_.forEach(L=>{this.proxyToSource[L.key]={}}),this.terrainTileForTile={};const C=this._style._mergedSourceCaches;for(const L in C){const z=C[L];if(!z.used||(z!==this.sourceCache&&this.resetTileLookupCache(z.id),this._setupProxiedCoordsForOrtho(z,s[L],w),z.usedForTerrain))continue;const N=s[L];z.getSource().reparseOverscaled&&this._assignTerrainTiles(N)}this.proxiedCoords[u.id]=_.map(L=>new tv(L,L.key,this.orthoMatrix)),this._assignTerrainTiles(_),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(w),this.renderingToTexture=!1;const D={};this._visibleDemTiles=[];for(const L of this.proxyCoords){const z=this.terrainTileForTile[L.key];if(!z)continue;const N=z.tileID.key;N in D||(this._visibleDemTiles.push(z),D[N]=N)}}_assignTerrainTiles(s){this._initializing||s.forEach(u=>{if(this.terrainTileForTile[u.key])return;const m=this._findTileCoveringTileID(u,this.sourceCache);m&&(this.terrainTileForTile[u.key]=m)})}_prepareDEMTextures(){const s=this.painter.context,u=s.gl;for(const m in this.terrainTileForTile){const _=this.terrainTileForTile[m],w=_.dem;!w||_.demTexture&&!_.needsDEMTextureUpload||(s.activeTexture.set(u.TEXTURE1),Xp(this.painter,_,w))}}_prepareDemTileUniforms(s,u,m,_){if(!u||u.demTexture==null)return!1;const w=s.tileID.canonical,C=Math.pow(2,u.tileID.canonical.z-w.z),D=_||"";return m[`u_dem_tl${D}`]=[w.x*C%1,w.y*C%1],m[`u_dem_scale${D}`]=C,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let s=0;const u=this._visibleDemTiles.reduce((m,_)=>{if(!_.dem)return m;const w=_.dem.tree.minimums[0];return w>0&&s++,m+w},0);return s?u/s:0}_updateEmptyDEMTexture(){const s=this.painter.context,u=s.gl;s.activeTexture.set(u.TEXTURE2);const m=this._getLoadedAreaMinimum(),_=new o.cF({width:1,height:1},new Float32Array([m]));this._emptyDEMTextureDirty=!1;let w=this._emptyDEMTexture;return w?w.update(_,{premultiply:!1}):w=this._emptyDEMTexture=new o.T(s,_,u.R32F,{premultiply:!1}),w}setupElevationDraw(s,u,m){const _=this.painter.context,w=_.gl,C={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};C.u_exaggeration=this.exaggeration();let D=null,L=null,z=1;if(m&&m.morphing&&this._useVertexMorphing){const Z=m.morphing.srcDemTile,ne=m.morphing.dstDemTile;z=m.morphing.phase,Z&&ne&&(this._prepareDemTileUniforms(s,Z,C,"_prev")&&(L=Z),this._prepareDemTileUniforms(s,ne,C)&&(D=ne))}const N=Z=>Z&&Z.demTexture&&this.painter.linearFloatFilteringSupported()?w.LINEAR:w.NEAREST;let j=null;var q;if(this.enabled?L&&D?(j=D.demTexture,_.activeTexture.set(w.TEXTURE4),L.demTexture.bind(N(L),w.CLAMP_TO_EDGE),C.u_dem_lerp=z):(D=this.terrainTileForTile[s.tileID.key],j=this._prepareDemTileUniforms(s,D,C)?D.demTexture:this.emptyDEMTexture):j=this.emptyDEMTexture,_.activeTexture.set(w.TEXTURE2),j&&(C.u_dem_size=(q=j).size[0]===1?1:q.size[0]-2,j.bind(N(D),w.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(m&&m.useDepthForOcclusion,u,C),m&&m.useMeterToDem&&D){const Z=(1<<D.tileID.canonical.z)*o.bD(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;C.u_meter_to_dem=Z}if(m&&m.labelPlaneMatrixInv&&(C.u_label_plane_matrix_inv=m.labelPlaneMatrixInv),u.setTerrainUniformValues(_,C),this.painter.transform.projection.name==="globe"){const Z=this.globeUniformValues(this.painter.transform,s.tileID.canonical,m&&m.useDenormalizedUpVectorScale);u.setGlobeUniformValues(_,Z)}}globeUniformValues(s,u,m){const _=s.projection;return{u_tile_tl_up:_.upVector(u,0,0),u_tile_tr_up:_.upVector(u,o.ab,0),u_tile_br_up:_.upVector(u,o.ab,o.ab),u_tile_bl_up:_.upVector(u,0,o.ab),u_tile_up_scale:m?o.cG(1):_.upVectorScale(u,s.center.lat,s.worldSize).metersToTile}}renderToBackBuffer(s){const u=this.painter,m=this.painter.context;s.length!==0&&(m.bindFramebuffer.set(null),m.viewport.set([0,0,u.width,u.height]),u.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(_,w,C,D,L){if(_.transform.projection.name==="globe")(function(z,N,j,q,Z){const ne=z.context,ie=ne.gl;let oe,ae;const ge=z.transform,ye=o.cx(z,ne,ge),pe=(Xe,ct)=>{if(ae===ct)return;const _t=[Vx[ct],"PROJECTION_GLOBE_VIEW"];ye&&_t.push("CUSTOM_ANTIALIASING");const lt=z.isTileAffectedByFog(Xe);oe=z.getOrCreateProgram("globeRaster",{defines:_t,overrideFog:lt}),ae=ct},we=z.colorModeForRenderPass(),be=new sr(ie.LEQUAL,sr.ReadWrite,z.depthRangeFor3D);hh.update(Z);const Fe=o.cy(ge),Ee=[o.am(ge.center.lng),o.at(ge.center.lat)],Me=z.globeSharedBuffers,Qe=[ge.width*o.q.devicePixelRatio,ge.height*o.q.devicePixelRatio],Re=Float32Array.from(ge.globeMatrix),Pe={useDenormalizedUpVectorScale:!0};{const Xe=z.transform,ct=Hx(Xe.zoom,N.exaggeration(),N.sourceCache._source.tileSize);ae=-1;const _t=ie.TRIANGLES;for(const lt of q){const St=j.getTile(lt),Ye=wr.disabled,mt=N.prevTerrainTileForTile[lt.key],ft=N.terrainTileForTile[lt.key];Nx(mt,ft)&&hh.newMorphing(lt.key,mt,ft,Z,250),ne.activeTexture.set(ie.TEXTURE0),St.texture&&St.texture.bind(ie.LINEAR,ie.CLAMP_TO_EDGE);const Tt=hh.getMorphValuesForProxy(lt.key),Mt=Tt?1:0;Tt&&o.C(Pe,{morphing:{srcDemTile:Tt.from,dstDemTile:Tt.to,phase:o.cw(Tt.phase)}});const yt=o.cz(lt.canonical),bt=o.cA(yt.getCenter().lat),ir=o.cB(lt.canonical,yt,bt,Xe.worldSize/Xe._pixelsPerMercatorPixel),Lt=o.b5(o.cC(lt.canonical)),Ht=Qx(Xe.expandedFarZProjMatrix,Re,Fe,Lt,o.a9(Xe.zoom),Ee,Xe.frustumCorners.TL,Xe.frustumCorners.TR,Xe.frustumCorners.BR,Xe.frustumCorners.BL,Xe.globeCenterInViewSpace,Xe.globeRadius,Qe,ct,Xe._farZ,ir);if(pe(lt,Mt),oe&&(N.setupElevationDraw(St,oe,Pe),z.uploadCommonUniforms(ne,oe,lt.toUnwrapped()),Me)){const[ur,Zt,lr]=Me.getGridBuffers(bt,ct!==0);oe.draw(z,_t,be,Ye,we,mr.backCCW,Ht,"globe_raster",ur,Zt,lr)}}}if(Me&&(z.renderDefaultNorthPole||z.renderDefaultSouthPole)){const Xe=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];ye&&Xe.push("CUSTOM_ANTIALIASING"),oe=z.getOrCreateProgram("globeRaster",{defines:Xe});for(const ct of q){const{x:_t,y:lt,z:St}=ct.canonical,Ye=lt===0,mt=lt===(1<<St)-1,[ft,Tt,Mt,yt]=Me.getPoleBuffers(St,!1);if(yt&&(Ye||mt)){const bt=j.getTile(ct);ne.activeTexture.set(ie.TEXTURE0),bt.texture&&bt.texture.bind(ie.LINEAR,ie.CLAMP_TO_EDGE);let ir=o.cD(St,_t,ge);const Lt=o.b5(o.cC(ct.canonical)),Ht=(ur,Zt)=>ur.draw(z,ie.TRIANGLES,be,wr.disabled,we,mr.disabled,Qx(ge.expandedFarZProjMatrix,ir,ir,Lt,0,Ee,ge.frustumCorners.TL,ge.frustumCorners.TR,ge.frustumCorners.BR,ge.frustumCorners.BL,ge.globeCenterInViewSpace,ge.globeRadius,Qe,0,ge._farZ),"globe_pole_raster",Zt,Mt,yt);N.setupElevationDraw(bt,oe,Pe),z.uploadCommonUniforms(ne,oe,ct.toUnwrapped()),Ye&&z.renderDefaultNorthPole&&Ht(oe,ft),mt&&z.renderDefaultSouthPole&&(ir=o.a6.mat4.scale(o.a6.mat4.create(),ir,[1,-1,1]),Ht(oe,Tt))}}}})(_,w,C,D,L);else{const z=_.context,N=z.gl;let j,q;const Z=_.shadowRenderer,ne=lc(_,_.longestCutoffRange),ie=we=>{if(q===we)return;const be=[];be.push(Vx[we]),ne.shouldRenderCutoff&&be.push("RENDER_CUTOFF"),j=_.getOrCreateProgram("terrainRaster",{defines:be}),q=we},oe=_.colorModeForRenderPass(),ae=new sr(N.LEQUAL,sr.ReadWrite,_.depthRangeFor3D);hh.update(L);const ge=_.transform,ye=Hx(ge.zoom,w.exaggeration(),w.sourceCache._source.tileSize);let pe=[0,0,0];if(Z){const we=_.style.directionalLight,be=_.style.ambientLight;we&&be&&(pe=Vp(_.style,we,be))}{q=-1;const we=N.TRIANGLES,[be,Fe]=[w.gridIndexBuffer,w.gridSegments];for(const Ee of D){const Me=C.getTile(Ee),Qe=wr.disabled,Re=w.prevTerrainTileForTile[Ee.key],Pe=w.terrainTileForTile[Ee.key];Nx(Re,Pe)&&hh.newMorphing(Ee.key,Re,Pe,L,250),z.activeTexture.set(N.TEXTURE0),Me.texture&&Me.texture.bind(N.LINEAR,N.CLAMP_TO_EDGE);const Xe=hh.getMorphValuesForProxy(Ee.key),ct=Xe?1:0;let _t;Xe&&(_t={morphing:{srcDemTile:Xe.from,dstDemTile:Xe.to,phase:o.cw(Xe.phase)}});const lt=BT(Ee.projMatrix,ev(Ee.canonical,ge.renderWorldCopies)?ye/10:ye,pe);if(ie(ct),!j)continue;w.setupElevationDraw(Me,j,_t);const St=Ee.toUnwrapped();Z&&Z.setupShadows(St,j),_.uploadCommonUniforms(z,j,St,null,ne),j.draw(_,we,ae,Qe,oe,mr.backCCW,lt,"terrain_raster",w.gridBuffer,be,Fe)}}}}(u,this,this.proxySourceCache,s,this._updateTimestamp),this.renderingToTexture=!0,u.gpuTimingDeferredRenderEnd(),s.splice(0,s.length))}renderBatch(s){if(this._drapedRenderBatches.length===0)return s+1;this.renderingToTexture=!0;const u=this.painter,m=this.painter.context,_=this.proxySourceCache,w=this.proxiedCoords[_.id],C=this._drapedRenderBatches.shift(),D=u.style.order,L=[];let z=0;for(const N of w){const j=_.getTileByID(N.proxyTileKey),q=_.proxyCachedFBO[N.key]?_.proxyCachedFBO[N.key][s]:void 0,Z=q!==void 0?_.renderCache[q]:this.pool[z++],ne=q!==void 0;if(j.texture=Z.tex,ne&&!Z.dirty){L.push(j.tileID);continue}let ie;m.bindFramebuffer.set(Z.fb.framebuffer),this.renderedToTile=!1,Z.dirty&&(m.clear({color:o.bz.transparent,stencil:0}),Z.dirty=!1);for(let oe=C.start;oe<=C.end;++oe){const ae=u.style._mergedLayers[D[oe]];if(ae.isHidden(u.transform.zoom))continue;const ge=u.style.getLayerSourceCache(ae),ye=ge?this.proxyToSource[N.key][ge.id]:[N];if(!ye)continue;const pe=ye;m.viewport.set([0,0,Z.fb.width,Z.fb.height]),ie!==(ge?ge.id:null)&&(this._setupStencil(Z,ye,ae,ge),ie=ge?ge.id:null),u.renderLayer(u,ge,ae,pe)}if(this._drapedRenderBatches.length===0)for(const oe of this._pendingGroundEffectLayers){const ae=u.style._mergedLayers[D[oe]];if(ae.isHidden(u.transform.zoom))continue;const ge=u.style.getLayerSourceCache(ae),ye=ge?this.proxyToSource[N.key][ge.id]:[N];if(!ye)continue;const pe=ye;m.viewport.set([0,0,Z.fb.width,Z.fb.height]),ie!==(ge?ge.id:null)&&(this._setupStencil(Z,ye,ae,ge),ie=ge?ge.id:null),u.renderLayer(u,ge,ae,pe)}this.renderedToTile?(Z.dirty=!0,L.push(j.tileID)):ne||--z,z===5&&(z=0,this.renderToBackBuffer(L))}return this.renderToBackBuffer(L),this.renderingToTexture=!1,m.bindFramebuffer.set(null),m.viewport.set([0,0,u.width,u.height]),C.end+1}postRender(){}isLayerOrderingCorrect(s){const u=s.order.length;let m=-1,_=u;for(let w=0;w<u;++w)this._style.isLayerDraped(s._mergedLayers[s.order[w]])?m=Math.max(m,w):_=Math.min(_,w);return _>m}getMinElevationBelowMSL(){let s=0;return this._visibleDemTiles.filter(u=>u.dem).forEach(u=>{s=Math.min(s,u.dem.tree.minimums[0])}),s===0?s:(s-30)*this._exaggeration}raycast(s,u,m){if(!this._visibleDemTiles)return null;const _=this._visibleDemTiles.filter(w=>w.dem).map(w=>{const C=w.tileID,D=1<<C.overscaledZ,{x:L,y:z}=C.canonical,N=L/D,j=(L+1)/D,q=z/D,Z=(z+1)/D;return{minx:N,miny:q,maxx:j,maxy:Z,t:w.dem.tree.raycastRoot(N,q,j,Z,s,u,m),tile:w}});_.sort((w,C)=>(w.t!==null?w.t:Number.MAX_VALUE)-(C.t!==null?C.t:Number.MAX_VALUE));for(const w of _){if(w.t==null)return null;const C=w.tile.dem.tree.raycast(w.minx,w.miny,w.maxx,w.maxy,s,u,m);if(C!=null)return C}return null}_createFBO(){const s=this.painter.context,u=s.gl,m=this.drapeBufferSize;s.activeTexture.set(u.TEXTURE0);const _=new o.T(s,{width:m[0],height:m[1],data:null},u.RGBA8);_.bind(u.LINEAR,u.CLAMP_TO_EDGE);const w=s.createFramebuffer(m[0],m[1],!0,null);return w.colorAttachment.set(_.texture),w.depthAttachment=new Ah(s,w.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=s.createRenderbuffer(s.gl.DEPTH_STENCIL,m[0],m[1]),this._stencilRef=0,w.depthAttachment.set(this._sharedDepthStencil),s.clear({stencil:0})):w.depthAttachment.set(this._sharedDepthStencil),s.extTextureFilterAnisotropic&&u.texParameterf(u.TEXTURE_2D,s.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,s.extTextureFilterAnisotropicMax),{fb:w,tex:_,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const s in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[s].hasTransition())return!0;return this._style.order.some(s=>{const u=this._style._mergedLayers[s],m=u.isHidden(this.painter.transform.zoom);return u.type==="hillshade"||u.type==="custom"?!m&&u.shouldRedrape():!m&&u.hasTransition()})}_clearLineLayersFromRenderCache(){let s=!1;for(const m of this._style.getSources())if(m instanceof qA){s=!0;break}if(!s)return;const u={};for(let m=0;m<this._style.order.length;++m){const _=this._style._mergedLayers[this._style.order[m]],w=this._style.getLayerSourceCache(_);if(w&&!u[w.id]&&!_.isHidden(this.painter.transform.zoom)&&_.type==="line"&&_.widthExpression()instanceof o.a4){u[w.id]=!0;for(const C of this.proxyCoords){const D=this.proxyToSource[C.key][w.id];if(D)for(const L of D)this._clearRenderCacheForTile(w.id,L)}}}}_clearRasterLayersFromRenderCache(){let s=!1;for(const m in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[m]._source instanceof Gc){s=!0;break}if(!s)return;const u={};for(let m=0;m<this._style.order.length;++m){const _=this._style._mergedLayers[this._style.order[m]],w=this._style.getLayerSourceCache(_);if(!w||u[w.id]||_.isHidden(this.painter.transform.zoom)||_.type!=="raster")continue;const C=_.paint.get("raster-fade-duration");for(const D of this.proxyCoords){const L=this.proxyToSource[D.key][w.id];if(L)for(const z of L){const N=tm(w.getTile(z),w.findLoadedParent(z,0),w,this.painter.transform,C);(N.opacity!==1||N.mix!==0)&&this._clearRenderCacheForTile(w.id,z)}}}}_setupDrapedRenderBatches(){const s=this._style.order,u=s.length;if(u===0)return;const m=[];this._pendingGroundEffectLayers=[];let _,w=0,C=this._style._mergedLayers[s[w]];for(;!this._style.isLayerDraped(C)&&C.isHidden(this.painter.transform.zoom)&&++w<u;)C=this._style._mergedLayers[s[w]];for(;w<u;++w){const D=this._style._mergedLayers[s[w]];D.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(D)?_===void 0&&(_=w):(D.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(w),_!==void 0&&(m.push({start:_,end:w-1}),_=void 0)))}if(_!==void 0&&m.push({start:_,end:w-1}),m.length!==0){const D=m[m.length-1];this._pendingGroundEffectLayers.every(L=>L>D.end)||o.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=m}_setupRenderCache(s){const u=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,u.renderCache.length>u.renderCachePool.length){const C=Object.values(u.proxyCachedFBO);u.proxyCachedFBO={};for(let D=0;D<C.length;++D){const L=Object.values(C[D]);u.renderCachePool.push(...L)}}return}this._clearRasterLayersFromRenderCache();const m=this.proxyCoords,_=this._tilesDirty;for(let C=m.length-1;C>=0;C--){const D=m[C];if(u.getTileByID(D.key),u.proxyCachedFBO[D.key]!==void 0){const L=s[D.key],z=this.proxyToSource[D.key];let N=0;for(const j in z){const q=z[j],Z=L[j];if(!Z||Z.length!==q.length||q.some((ne,ie)=>ne!==Z[ie]||_[j]&&_[j].hasOwnProperty(ne.key))){N=-1;break}++N}for(const j in u.proxyCachedFBO[D.key])u.renderCache[u.proxyCachedFBO[D.key][j]].dirty=N<0||N!==Object.values(L).length}}const w=[...this._drapedRenderBatches];w.sort((C,D)=>D.end-D.start-(C.end-C.start));for(const C of w)for(const D of m){if(u.proxyCachedFBO[D.key])continue;let L=u.renderCachePool.pop();L===void 0&&u.renderCache.length<50&&(L=u.renderCache.length,u.renderCache.push(this._createFBO())),L!==void 0&&(u.proxyCachedFBO[D.key]={},u.proxyCachedFBO[D.key][C.start]=L,u.renderCache[L].dirty=!0)}this._tilesDirty={}}_setupStencil(s,u,m,_){if(!_||!this._sourceTilesOverlap[_.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const w=this.painter.context,C=w.gl;if(u.length<=1)return void(this._overlapStencilType=!1);let D;if(m.isTileClipped())D=u.length,this._overlapStencilMode.test={func:C.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(u[0].overscaledZ>u[u.length-1].overscaledZ))return void(this._overlapStencilType=!1);D=1,this._overlapStencilMode.test={func:C.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+D>255&&(w.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=D,this._overlapStencilMode.ref=this._stencilRef,m.isTileClipped()&&this._renderTileClippingMasks(u,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(s){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[s.key]),this._overlapStencilMode):wr.disabled}_renderTileClippingMasks(s,u){const m=this.painter,_=this.painter.context,w=_.gl;m._tileClippingMaskIDs={},_.setColorMode(Nr.disabled),_.setDepthMode(sr.disabled);const C=m.getOrCreateProgram("clippingMask");for(const D of s){const L=m._tileClippingMaskIDs[D.key]=--u;C.draw(m,w.TRIANGLES,sr.disabled,new wr({func:w.ALWAYS,mask:0},L,255,w.KEEP,w.KEEP,w.REPLACE),Nr.disabled,mr.disabled,cf(D.projMatrix),"$clipping",m.tileExtentBuffer,m.quadTriangleIndexBuffer,m.tileExtentSegments)}}pointCoordinate(s){const u=this.painter.transform;if(s.x<0||s.x>u.width||s.y<0||s.y>u.height)return null;const m=[s.x,s.y,1,1];o.a6.vec4.transformMat4(m,m,u.pixelMatrixInverse),o.a6.vec4.scale(m,m,1/m[3]),m[0]/=u.worldSize,m[1]/=u.worldSize;const _=u._camera.position,w=o.bD(1,u.center.lat),C=[_[0],_[1],_[2]/w,0],D=o.a6.vec3.subtract([],m.slice(0,3),C);o.a6.vec3.normalize(D,D);const L=this.raycast(C,D,this._exaggeration);return L!==null&&L?(o.a6.vec3.scaleAndAdd(C,C,D,L),C[3]=C[2],C[2]*=w,C):null}_setupProxiedCoordsForOrtho(s,u,m){if(s.getSource()instanceof o.aD)return this._setupProxiedCoordsForImageSource(s,u,m);this._findCoveringTileCache[s.id]=this._findCoveringTileCache[s.id]||{};const _=this.proxiedCoords[s.id]=[],w=this.proxyCoords;for(let L=0;L<w.length;L++){const z=w[L],N=this._findTileCoveringTileID(z,s);if(N){const j=this._createProxiedId(z,N,m[z.key]&&m[z.key][s.id]);_.push(j),this.proxyToSource[z.key][s.id]=[j]}}let C=!1;const D=new Set;for(let L=0;L<u.length;L++){const z=s.getTile(u[L]);if(!z||!z.hasData())continue;const N=this._findTileCoveringTileID(z.tileID,this.proxySourceCache);if(N&&N.tileID.canonical.z!==z.tileID.canonical.z){const j=this.proxyToSource[N.tileID.key][s.id],q=this._createProxiedId(N.tileID,z,m[N.tileID.key]&&m[N.tileID.key][s.id]);j?j.splice(j.length-1,0,q):this.proxyToSource[N.tileID.key][s.id]=[q];const Z=this.proxyToSource[N.tileID.key][s.id];D.has(Z)||D.add(Z),_.push(q),C=!0}}if(this._sourceTilesOverlap[s.id]=C,C&&this._debugParams.sortTilesHiZFirst)for(const L of D)L.sort((z,N)=>N.overscaledZ-z.overscaledZ)}_setupProxiedCoordsForImageSource(s,u,m){if(!s.getSource().loaded())return;const _=this.proxiedCoords[s.id]=[],w=this.proxyCoords,C=s.getSource(),D=C.tileID;if(!D)return;const L=new o.P(D.x,D.y)._div(1<<D.z),z=C.coordinates.map(o.a5.fromLngLat).reduce((j,q)=>(j.min.x=Math.min(j.min.x,q.x-L.x),j.min.y=Math.min(j.min.y,q.y-L.y),j.max.x=Math.max(j.max.x,q.x-L.x),j.max.y=Math.max(j.max.y,q.y-L.y),j),{min:new o.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new o.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),N=(j,q)=>{const Z=j.wrap+j.canonical.x/(1<<j.canonical.z),ne=j.canonical.y/(1<<j.canonical.z),ie=o.ab/(1<<j.canonical.z),oe=q.wrap+q.canonical.x/(1<<q.canonical.z),ae=q.canonical.y/(1<<q.canonical.z);return Z+ie<oe+z.min.x||Z>oe+z.max.x||ne+ie<ae+z.min.y||ne>ae+z.max.y};for(let j=0;j<w.length;j++){const q=w[j];for(let Z=0;Z<u.length;Z++){const ne=s.getTile(u[Z]);if(!ne||!ne.hasData()||N(q,ne.tileID))continue;const ie=this._createProxiedId(q,ne,m[q.key]&&m[q.key][s.id]),oe=this.proxyToSource[q.key][s.id];oe?oe.push(ie):this.proxyToSource[q.key][s.id]=[ie],_.push(ie)}}}_createProxiedId(s,u,m){let _=this.orthoMatrix;if(m){const w=m.find(C=>C.key===u.tileID.key);if(w)return w}if(u.tileID.key!==s.key){const w=s.canonical.z-u.tileID.canonical.z;let C,D,L;_=o.a6.mat4.create();const z=u.tileID.wrap-s.wrap<<s.overscaledZ;w>0?(C=o.ab>>w,D=C*((u.tileID.canonical.x<<w)-s.canonical.x+z),L=C*((u.tileID.canonical.y<<w)-s.canonical.y)):(C=o.ab<<-w,D=o.ab*(u.tileID.canonical.x-(s.canonical.x+z<<-w)),L=o.ab*(u.tileID.canonical.y-(s.canonical.y<<-w))),o.a6.mat4.ortho(_,0,C,0,C,0,1),o.a6.mat4.translate(_,_,[D,L,0])}return new tv(u.tileID,s.key,_)}_findTileCoveringTileID(s,u){let m=u.getTile(s);if(m&&m.hasData())return m;const _=this._findCoveringTileCache[u.id],w=_[s.key];if(m=w?u.getTileByID(w):null,m&&m.hasData()||w===null)return m;let C=m?m.tileID:s,D=C.overscaledZ;const L=u.getSource().minzoom,z=[];if(!w){const j=u.getSource().maxzoom;if(s.canonical.z>=j){const q=s.canonical.z-j;u.getSource().reparseOverscaled?(D=Math.max(s.canonical.z+2,u.transform.tileZoom),C=new o.aA(D,s.wrap,j,s.canonical.x>>q,s.canonical.y>>q)):q!==0&&(D=j,C=new o.aA(D,s.wrap,j,s.canonical.x>>q,s.canonical.y>>q))}C.key!==s.key&&(z.push(C.key),m=u.getTile(C))}const N=j=>{z.forEach(q=>{_[q]=j}),z.length=0};for(D-=1;D>=L&&(!m||!m.hasData());D--){m&&N(m.tileID.key);const j=C.calculateScaledKey(D);if(m=u.getTileByID(j),m&&m.hasData())break;const q=_[j];if(q===null)break;q===void 0?z.push(j):m=u.getTileByID(q)}return N(m?m.tileID.key:null),m&&m.hasData()?m:null}findDEMTileFor(s){return this.enabled?this._findTileCoveringTileID(s,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(s,u){let m=this._tilesDirty[s];m||(m=this._tilesDirty[s]={}),m[u.key]=!0}}function nv(p,s,u){const m=function(D,L,z){const N=o.a6.vec3.dot(L,D),j=o.a6.vec3.dot(z,[.2126,.7152,.0722]),q=(ne,ie,oe)=>(1-oe)*ne+oe*ie,Z=q(1-.3*Math.min(j,1),1,Math.min(N+1,1));return q(.92,1,Math.asin(o.ap(L[2],-1,1))/Math.PI+.5)*Z}(p,[0,0,1],s),_=[0,0,0];o.a6.vec3.scale(_,u.slice(0,3),m);const w=[0,0,0];o.a6.vec3.scale(w,s.slice(0,3),p[2]);const C=[0,0,0];return o.a6.vec3.add(C,_,w),o.cb(C)}const Zu=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],Gx=["stars","fillExtrusion","fillExtrusionGroundEffect","model","symbol"];class eu{static cacheKey(s,u,m,_){let w=`${u}${_?_.cacheKey:""}`;for(const C of m)s.usedDefines.includes(C)&&(w+=`/${C}`);return w}constructor(s,u,m,_,w,C){const D=s.gl;this.program=D.createProgram(),this.configuration=_,this.name=u,this.fixedDefines=[...C];const L=_?_.getBinderAttributes():[],z=(m.staticAttributes||[]).concat(L);let N=_?_.defines():[];N=N.concat(C.map(oe=>`#define ${oe}`));const j=`#version 300 es
`;let q=j+N.concat("precision mediump float;",Wp,tf.fragmentSource).join(`
`);for(const oe of m.fragmentIncludes)q+=`
${ef[oe]}`;q+=`
${m.fragmentSource}`;let Z=j+N.concat("precision highp float;",Wp,tf.vertexSource).join(`
`);for(const oe of m.vertexIncludes)Z+=`
${ef[oe]}`;Z+=`
${m.vertexSource}`;const ne=D.createShader(D.FRAGMENT_SHADER);if(D.isContextLost())return void(this.failedToCreate=!0);D.shaderSource(ne,q),D.compileShader(ne),D.attachShader(this.program,ne);const ie=D.createShader(D.VERTEX_SHADER);if(D.isContextLost())this.failedToCreate=!0;else{D.shaderSource(ie,Z),D.compileShader(ie),D.attachShader(this.program,ie),this.attributes={},this.numAttributes=z.length;for(let oe=0;oe<this.numAttributes;oe++)if(z[oe]){const ae=z[oe].startsWith("a_")?z[oe]:`a_${z[oe]}`;D.bindAttribLocation(this.program,oe,ae),this.attributes[ae]=oe}D.linkProgram(this.program),D.deleteShader(ie),D.deleteShader(ne),this.fixedUniforms=w(s),this.binderUniforms=_?_.getUniforms(s):[],(C.includes("TERRAIN")||u.indexOf("symbol")!==-1||u.indexOf("circle")!==-1)&&(this.terrainUniforms=(oe=>({u_dem:new o.bJ(oe),u_dem_prev:new o.bJ(oe),u_dem_tl:new o.bG(oe),u_dem_scale:new o.bI(oe),u_dem_tl_prev:new o.bG(oe),u_dem_scale_prev:new o.bI(oe),u_dem_size:new o.bI(oe),u_dem_lerp:new o.bI(oe),u_exaggeration:new o.bI(oe),u_depth:new o.bJ(oe),u_depth_size_inv:new o.bG(oe),u_depth_range_unpack:new o.bG(oe),u_occluder_half_size:new o.bI(oe),u_occlusion_depth_offset:new o.bI(oe),u_meter_to_dem:new o.bI(oe),u_label_plane_matrix_inv:new o.bF(oe)}))(s)),C.includes("GLOBE")&&(this.globeUniforms=(oe=>({u_tile_tl_up:new o.bH(oe),u_tile_tr_up:new o.bH(oe),u_tile_br_up:new o.bH(oe),u_tile_bl_up:new o.bH(oe),u_tile_up_scale:new o.bI(oe)}))(s)),C.includes("FOG")&&(this.fogUniforms=(oe=>({u_fog_matrix:new o.bF(oe),u_fog_range:new o.bG(oe),u_fog_color:new o.c6(oe),u_fog_horizon_blend:new o.bI(oe),u_fog_vertical_limit:new o.bG(oe),u_fog_temporal_offset:new o.bI(oe),u_frustum_tl:new o.bH(oe),u_frustum_tr:new o.bH(oe),u_frustum_br:new o.bH(oe),u_frustum_bl:new o.bH(oe),u_globe_pos:new o.bH(oe),u_globe_radius:new o.bI(oe),u_globe_transition:new o.bI(oe),u_is_globe:new o.bJ(oe),u_viewport:new o.bG(oe)}))(s)),C.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(oe=>({u_cutoff_params:new o.c6(oe)}))(s)),C.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(oe=>({u_lighting_ambient_color:new o.bH(oe),u_lighting_directional_dir:new o.bH(oe),u_lighting_directional_color:new o.bH(oe),u_ground_radiance:new o.bH(oe)}))(s)),C.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(oe=>({u_light_matrix_0:new o.bF(oe),u_light_matrix_1:new o.bF(oe),u_fade_range:new o.bG(oe),u_shadow_normal_offset:new o.bH(oe),u_shadow_intensity:new o.bI(oe),u_shadow_texel_size:new o.bI(oe),u_shadow_map_resolution:new o.bI(oe),u_shadow_direction:new o.bH(oe),u_shadow_bias:new o.bH(oe),u_shadowmap_0:new o.bJ(oe),u_shadowmap_1:new o.bJ(oe)}))(s))}}setTerrainUniformValues(s,u){if(!this.terrainUniforms)return;const m=this.terrainUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const _ in u)m[_]&&m[_].set(this.program,_,u[_])}}setGlobeUniformValues(s,u){if(!this.globeUniforms)return;const m=this.globeUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const _ in u)m[_]&&m[_].set(this.program,_,u[_])}}setFogUniformValues(s,u){if(!this.fogUniforms)return;const m=this.fogUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const _ in u)m[_].set(this.program,_,u[_])}}setCutoffUniformValues(s,u){if(!this.cutoffUniforms)return;const m=this.cutoffUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const _ in u)m[_].set(this.program,_,u[_])}}setLightsUniformValues(s,u){if(!this.lightsUniforms)return;const m=this.lightsUniforms;if(!this.failedToCreate){s.program.set(this.program);for(const _ in u)m[_].set(this.program,_,u[_])}}setShadowUniformValues(s,u){if(this.failedToCreate||!this.shadowUniforms)return;const m=this.shadowUniforms;s.program.set(this.program);for(const _ in u)m[_].set(this.program,_,u[_])}_drawDebugWireframe(s,u,m,_,w,C,D,L,z,N){const j=s.options.wireframe;if(j.terrain===!1&&j.layers2D===!1&&j.layers3D===!1)return;const q=s.context;if(!(!(!j.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!j.layers2D||s._terrain&&s._terrain.renderingToTexture||!Zu.includes(this.name))||!(!j.layers3D||!Gx.includes(this.name))))return;const Z=q.gl,ne=s.wireframeDebugCache.getLinesFromTrianglesBuffer(s.frameCounter,w,q);if(!ne)return;const ie=[...this.fixedDefines];ie.push("DEBUG_WIREFRAME");const oe=s.getOrCreateProgram(this.name,{config:this.configuration,defines:ie});q.program.set(oe.program);const ae=(pe,we,be)=>{if(we[pe]&&be[pe])for(const Fe in we[pe])be[pe][Fe]&&be[pe][Fe].set(be.program,Fe,we[pe][Fe].current)};z&&z.setUniforms(oe.program,q,oe.binderUniforms,D,{zoom:L}),ae("fixedUniforms",this,oe),ae("terrainUniforms",this,oe),ae("globeUniforms",this,oe),ae("fogUniforms",this,oe),ae("lightsUniforms",this,oe),ae("shadowUniforms",this,oe),ne.bind(),q.setColorMode(new Nr([Z.ONE,Z.ONE_MINUS_SRC_ALPHA,Z.ZERO,Z.ONE],o.bz.transparent,[!0,!0,!0,!1])),q.setDepthMode(new sr(u.func===Z.LESS?Z.LEQUAL:u.func,sr.ReadOnly,u.range)),q.setStencilMode(wr.disabled);const ge=3*C.primitiveLength*2,ye=3*C.primitiveOffset*2*2;N&&N>1?Z.drawElementsInstanced(Z.LINES,ge,Z.UNSIGNED_SHORT,ye,N):Z.drawElements(Z.LINES,ge,Z.UNSIGNED_SHORT,ye),w.bind(),q.program.set(this.program),q.setDepthMode(u),q.setStencilMode(m),q.setColorMode(_)}draw(s,u,m,_,w,C,D,L,z,N,j,q,Z,ne,ie,oe){const ae=s.context,ge=ae.gl;if(this.failedToCreate)return;ae.program.set(this.program),ae.setDepthMode(m),ae.setStencilMode(_),ae.setColorMode(w),ae.setCullFace(C);for(const we of Object.keys(this.fixedUniforms))this.fixedUniforms[we].set(this.program,we,D[we]);ne&&ne.setUniforms(this.program,ae,this.binderUniforms,q,{zoom:Z});const ye={[ge.POINTS]:1,[ge.LINES]:2,[ge.TRIANGLES]:3,[ge.LINE_STRIP]:1}[u],pe=oe&&oe>0?1:void 0;for(const we of j.get()){const be=we.vaos||(we.vaos={});(be[L]||(be[L]=new ch)).bind(ae,this,z,ne?ne.getPaintVertexBuffers():[],N,we.vertexOffset,ie||[],pe),oe&&oe>1?ge.drawElementsInstanced(u,we.primitiveLength*ye,ge.UNSIGNED_SHORT,we.primitiveOffset*ye*2,oe):N?ge.drawElements(u,we.primitiveLength*ye,ge.UNSIGNED_SHORT,we.primitiveOffset*ye*2):ge.drawArrays(u,we.vertexOffset,we.vertexLength),u===ge.TRIANGLES&&N&&this._drawDebugWireframe(s,m,_,w,N,we,q,Z,ne,oe)}}}function iv(p,s){const u=Math.pow(2,s.tileID.overscaledZ),m=s.tileSize*Math.pow(2,p.transform.tileZoom)/u,_=m*(s.tileID.canonical.x+s.tileID.wrap*u),w=m*s.tileID.canonical.y;return{u_image:0,u_texsize:s.imageAtlasTexture?s.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/o.ak(s,1,p.transform.tileZoom),u_pixel_coord_upper:[_>>16,w>>16],u_pixel_coord_lower:[65535&_,65535&w]}}const rm=o.a6.mat4.create(),ov=(p,s,u,m,_,w,C,D,L,z,N,j,q,Z,ne,ie)=>{const oe=s.style.light,ae=oe.properties.get("position"),ge=[ae.x,ae.y,ae.z],ye=o.a6.mat3.create();oe.properties.get("anchor")==="viewport"&&(o.a6.mat3.fromRotation(ye,-s.transform.angle),o.a6.vec3.transformMat3(ge,ge,ye));const pe=oe.properties.get("color"),we=s.transform,be={u_matrix:p,u_lightpos:ge,u_lightintensity:oe.properties.get("intensity"),u_lightcolor:[pe.r,pe.g,pe.b],u_vertical_gradient:+u,u_opacity:m,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:rm,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:_,u_edge_radius:w,u_width_scale:C,u_flood_light_color:q,u_vertical_scale:Z,u_flood_light_intensity:ne,u_ground_shadow_factor:ie};return we.projection.name==="globe"&&(be.u_tile_id=[D.canonical.x,D.canonical.y,1<<D.canonical.z],be.u_zoom_transition=z,be.u_inv_rot_matrix=j,be.u_merc_center=N,be.u_up_dir=we.projection.upVector(new o.bP(0,0,0),N[0]*o.ab,N[1]*o.ab),be.u_height_lift=L),be},Kx=(p,s,u,m)=>({u_matrix:p,u_edge_radius:s,u_width_scale:u,u_vertical_scale:m}),av=(p,s,u,m,_,w,C,D,L,z,N,j,q,Z,ne)=>{const ie=ov(p,s,u,m,_,w,C,D,z,N,j,q,Z,ne,1,[0,0,0]),oe={u_height_factor:-Math.pow(2,D.overscaledZ)/L.tileSize/8};return o.l(ie,iv(s,L),oe)},nm=(p,s)=>({u_matrix:p,u_emissive_strength:s}),Wx=(p,s,u,m)=>o.l(nm(p,s),iv(u,m)),qx=(p,s,u)=>({u_matrix:p,u_world:u,u_emissive_strength:s}),uf=(p,s,u,m,_)=>o.l(Wx(p,s,u,m),{u_world:_}),CT=(p,s,u,m)=>{const _=o.ab/u.tileSize;return{u_matrix:p,u_camera_to_center_distance:s.getCameraToCenterDistance(m),u_extrude_scale:[s.pixelsToGLUnits[0]/_,s.pixelsToGLUnits[1]/_]}},Xx=(p,s,u=1)=>({u_matrix:p,u_color:s.toRenderColor(null),u_overlay:0,u_overlay_scale:u}),Zx=o.a6.mat4.create(),ST=(p,s,u,m,_,w,C)=>{const D=p.transform,L=D.projection.name==="globe",z=L?o.cI(D.zoom,s.canonical)*D._pixelsPerMercatorPixel:o.ak(u,1,w),N={u_matrix:s.projMatrix,u_extrude_scale:z,u_intensity:C,u_inv_rot_matrix:Zx,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(L){N.u_inv_rot_matrix=m,N.u_merc_center=_,N.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],N.u_zoom_transition=o.a9(D.zoom);const j=_[0]*o.ab,q=_[1]*o.ab;N.u_up_dir=D.projection.upVector(new o.bP(0,0,0),j,q)}return N};function im(p,[s,u,m,_],[w,C]){if(w===C)return[0,0,0,0];const D=255*(p-1)/(p*(C-w));return[s*D,u*D,m*D,_*D]}function om(p,s,[u,m]){return u===m?0:.5/p+(s-u)*(p-1)/(p*(m-u))}const Af=(p,s,u,m,_,w,C,D,L,z,N,j,q,Z,ne,ie,oe,ae,ge,ye,pe)=>({u_matrix:p,u_normalize_matrix:s,u_globe_matrix:u,u_merc_matrix:m,u_grid_matrix:_,u_tl_parent:w,u_scale_parent:z,u_fade_t:N.mix,u_opacity:N.opacity*j.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:j.paint.get("raster-brightness-min"),u_brightness_high:j.paint.get("raster-brightness-max"),u_saturation_factor:o.cJ(j.paint.get("raster-saturation")),u_contrast_factor:o.cK(j.paint.get("raster-contrast")),u_spin_weights:sv(j.paint.get("raster-hue-rotate")),u_perspective_transform:q,u_raster_elevation:Z,u_zoom_transition:C,u_merc_center:D,u_cutoff_params:L,u_colorization_mix:im(o.cL,ie,ae),u_colorization_offset:om(o.cL,oe,ae),u_color_ramp:ne,u_texture_offset:[ye/(ge+2*ye),ge/(ge+2*ye)],u_texture_res:[ge+2*ye,ge+2*ye],u_emissive_strength:pe});function sv(p){p*=Math.PI/180;const s=Math.sin(p),u=Math.cos(p);return[(2*u+1)/3,(-Math.sqrt(3)*s-u+1)/3,(Math.sqrt(3)*s-u+1)/3]}const yl=.05,Yx=(p,s,u,m,_,w,C,D,L,z,N,j)=>({u_matrix:p,u_normalize_matrix:s,u_globe_matrix:u,u_merc_matrix:m,u_grid_matrix:_,u_tl_parent:w,u_scale_parent:z,u_fade_t:N.mix,u_opacity:N.opacity,u_image0:0,u_image1:1,u_raster_elevation:j,u_zoom_transition:C,u_merc_center:D,u_cutoff_params:L}),am=(p,s,u,m,_,w,C,D,L,z)=>({u_particle_texture:p,u_particle_texture_side_len:s,u_tile_offset:u,u_velocity:m,u_color_ramp:w,u_velocity_res:_,u_max_speed:C,u_uv_offset:D,u_data_scale:[255*L[0],255*L[1]],u_data_offset:z,u_particle_pos_scale:1.1,u_particle_pos_offset:[yl,yl]}),sm=(p,s,u,m,_,w,C,D,L,z)=>({u_particle_texture:p,u_particle_texture_side_len:s,u_velocity:u,u_velocity_res:m,u_max_speed:_,u_speed_factor:w,u_reset_rate:C,u_rand_seed:Math.random(),u_uv_offset:D,u_data_scale:[255*L[0],255*L[1]],u_data_offset:z,u_particle_pos_scale:1.1,u_particle_pos_offset:[yl,yl]}),lm=o.a6.mat4.create(),lv=(p,s,u,m,_,w,C,D,L,z,N,j,q,Z,ne,ie,oe,ae,ge,ye,pe)=>{const we=_.transform,be={u_is_size_zoom_constant:+(p==="constant"||p==="source"),u_is_size_feature_constant:+(p==="constant"||p==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:we.getCameraToCenterDistance(ge),u_rotate_symbol:+u,u_aspect_ratio:we.width/we.height,u_fade_change:_.options.fadeDuration?_.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:C,u_coord_matrix:D,u_is_text:+z,u_elevation_from_sea:L?1:0,u_pitch_with_map:+m,u_texsize:N,u_texsize_icon:j,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:lm,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:lm,u_up_vector:[0,-1,0],u_color_adj_mat:ye,u_icon_transition:pe||0,u_gamma_scale:m?_.transform.getCameraToCenterDistance(ge)*Math.cos(_.terrain?0:_.transform._pitch):1,u_device_pixel_ratio:o.q.devicePixelRatio,u_is_halo:+q};return ge.name==="globe"&&(be.u_tile_id=[Z.canonical.x,Z.canonical.y,1<<Z.canonical.z],be.u_zoom_transition=ne,be.u_inv_rot_matrix=oe,be.u_merc_center=ie,be.u_camera_forward=we._camera.forward(),be.u_ecef_origin=o.cM(we.globeMatrix,Z.toUnwrapped()),be.u_tile_matrix=Float32Array.from(we.globeMatrix),be.u_up_vector=ae),be},Jx=(p,s,u,m)=>({u_matrix:p,u_emissive_strength:s,u_opacity:u,u_color:m}),Yu=(p,s,u,m,_,w,C,D,L)=>o.l(function(z,N,j,q,Z,ne){const{width:ie,height:oe}=q.imageManager.getPixelSize(N),ae=Math.pow(2,ne.tileID.overscaledZ),ge=ne.tileSize*Math.pow(2,q.transform.tileZoom)/ae,ye=ge*(ne.tileID.canonical.x+ne.tileID.wrap*ae),pe=ge*ne.tileID.canonical.y;return{u_image:0,u_pattern_tl:j.tl,u_pattern_br:j.br,u_texsize:[ie,oe],u_pattern_size:j.displaySize,u_pattern_units_to_pixels:Z?[q.transform.width,-1*q.transform.height]:[1/o.ak(ne,1,q.transform.tileZoom),1/o.ak(ne,1,q.transform.tileZoom)],u_pixel_coord_upper:[ye>>16,pe>>16],u_pixel_coord_lower:[65535&ye,65535&pe]}}(0,w,C,m,D,L),{u_matrix:p,u_emissive_strength:s,u_opacity:u}),fh=new Float32Array(o.a6.mat4.identity([])),Wt=(p,s,u,m,_,w,C,D,L,z,N,j,q,Z=[0,0,0],ne)=>{const ie=_.style.light,oe=ie.properties.get("position"),ae=[-oe.x,-oe.y,oe.z],ge=o.a6.mat3.create();ie.properties.get("anchor")==="viewport"&&(o.a6.mat3.fromRotation(ge,-_.transform.angle),o.a6.vec3.transformMat3(ae,ae,ge));const ye=N.alphaMode==="MASK",pe=ie.properties.get("color").toRenderColor(null),we=q.paint.get("model-ambient-occlusion-intensity"),be=q.paint.get("model-color").constantOr(o.bz.white).toRenderColor(null),Fe=q.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:p,u_lighting_matrix:s,u_normal_matrix:u,u_node_matrix:m||fh,u_lightpos:ae,u_lightintensity:ie.properties.get("intensity"),u_lightcolor:[pe.r,pe.g,pe.b],u_camera_pos:Z,u_opacity:w,u_baseTextureIsAlpha:0,u_alphaMask:+ye,u_alphaCutoff:N.alphaCutoff,u_baseColorFactor:[C.r,C.g,C.b,C.a],u_emissiveFactor:[D[0],D[1],D[2],1],u_metallicFactor:L,u_roughnessFactor:z,u_baseColorTexture:Ro.BaseColor,u_metallicRoughnessTexture:Ro.MetallicRoughness,u_normalTexture:Ro.Normal,u_occlusionTexture:Ro.Occlusion,u_emissionTexture:Ro.Emission,u_lutTexture:Ro.LUT,u_color_mix:[be.r,be.g,be.b,Fe],u_aoIntensity:we,u_emissive_strength:j,u_occlusionTextureTransform:ne||[0,0,0,0]}},cv=(p,s=fh,u=fh)=>({u_matrix:p,u_instance:s,u_node_matrix:u}),$x={fillExtrusion:p=>({u_matrix:new o.bF(p),u_lightpos:new o.bH(p),u_lightintensity:new o.bI(p),u_lightcolor:new o.bH(p),u_vertical_gradient:new o.bI(p),u_opacity:new o.bI(p),u_edge_radius:new o.bI(p),u_width_scale:new o.bI(p),u_ao:new o.bG(p),u_tile_id:new o.bH(p),u_zoom_transition:new o.bI(p),u_inv_rot_matrix:new o.bF(p),u_merc_center:new o.bG(p),u_up_dir:new o.bH(p),u_height_lift:new o.bI(p),u_flood_light_color:new o.bH(p),u_vertical_scale:new o.bI(p),u_flood_light_intensity:new o.bI(p),u_ground_shadow_factor:new o.bH(p)}),fillExtrusionDepth:p=>({u_matrix:new o.bF(p),u_edge_radius:new o.bI(p),u_width_scale:new o.bI(p),u_vertical_scale:new o.bI(p)}),fillExtrusionPattern:p=>({u_matrix:new o.bF(p),u_lightpos:new o.bH(p),u_lightintensity:new o.bI(p),u_lightcolor:new o.bH(p),u_vertical_gradient:new o.bI(p),u_height_factor:new o.bI(p),u_edge_radius:new o.bI(p),u_width_scale:new o.bI(p),u_ao:new o.bG(p),u_tile_id:new o.bH(p),u_zoom_transition:new o.bI(p),u_inv_rot_matrix:new o.bF(p),u_merc_center:new o.bG(p),u_up_dir:new o.bH(p),u_height_lift:new o.bI(p),u_image:new o.bJ(p),u_texsize:new o.bG(p),u_pixel_coord_upper:new o.bG(p),u_pixel_coord_lower:new o.bG(p),u_tile_units_to_pixels:new o.bI(p),u_opacity:new o.bI(p)}),fillExtrusionGroundEffect:p=>({u_matrix:new o.bF(p),u_opacity:new o.bI(p),u_ao_pass:new o.bI(p),u_meter_to_tile:new o.bI(p),u_ao:new o.bG(p),u_flood_light_intensity:new o.bI(p),u_flood_light_color:new o.bH(p),u_attenuation:new o.bI(p),u_edge_radius:new o.bI(p),u_fb:new o.bJ(p),u_fb_size:new o.bI(p),u_dynamic_offset:new o.bI(p)}),fill:p=>({u_matrix:new o.bF(p),u_emissive_strength:new o.bI(p)}),fillPattern:p=>({u_matrix:new o.bF(p),u_emissive_strength:new o.bI(p),u_image:new o.bJ(p),u_texsize:new o.bG(p),u_pixel_coord_upper:new o.bG(p),u_pixel_coord_lower:new o.bG(p),u_tile_units_to_pixels:new o.bI(p)}),fillOutline:p=>({u_matrix:new o.bF(p),u_emissive_strength:new o.bI(p),u_world:new o.bG(p)}),fillOutlinePattern:p=>({u_matrix:new o.bF(p),u_emissive_strength:new o.bI(p),u_world:new o.bG(p),u_image:new o.bJ(p),u_texsize:new o.bG(p),u_pixel_coord_upper:new o.bG(p),u_pixel_coord_lower:new o.bG(p),u_tile_units_to_pixels:new o.bI(p)}),circle:o.cN,collisionBox:p=>({u_matrix:new o.bF(p),u_camera_to_center_distance:new o.bI(p),u_extrude_scale:new o.bG(p)}),collisionCircle:p=>({u_matrix:new o.bF(p),u_inv_matrix:new o.bF(p),u_camera_to_center_distance:new o.bI(p),u_viewport_size:new o.bG(p)}),debug:p=>({u_color:new o.cu(p),u_matrix:new o.bF(p),u_overlay:new o.bJ(p),u_overlay_scale:new o.bI(p)}),clippingMask:p=>({u_matrix:new o.bF(p)}),heatmap:p=>({u_extrude_scale:new o.bI(p),u_intensity:new o.bI(p),u_matrix:new o.bF(p),u_inv_rot_matrix:new o.bF(p),u_merc_center:new o.bG(p),u_tile_id:new o.bH(p),u_zoom_transition:new o.bI(p),u_up_dir:new o.bH(p)}),heatmapTexture:p=>({u_image:new o.bJ(p),u_color_ramp:new o.bJ(p),u_opacity:new o.bI(p)}),hillshade:p=>({u_matrix:new o.bF(p),u_image:new o.bJ(p),u_latrange:new o.bG(p),u_light:new o.bG(p),u_shadow:new o.cu(p),u_highlight:new o.cu(p),u_emissive_strength:new o.bI(p),u_accent:new o.cu(p)}),hillshadePrepare:p=>({u_matrix:new o.bF(p),u_image:new o.bJ(p),u_dimension:new o.bG(p),u_zoom:new o.bI(p)}),line:o.cO,linePattern:o.cP,raster:p=>({u_matrix:new o.bF(p),u_normalize_matrix:new o.bF(p),u_globe_matrix:new o.bF(p),u_merc_matrix:new o.bF(p),u_grid_matrix:new o.cv(p),u_tl_parent:new o.bG(p),u_scale_parent:new o.bI(p),u_fade_t:new o.bI(p),u_opacity:new o.bI(p),u_image0:new o.bJ(p),u_image1:new o.bJ(p),u_brightness_low:new o.bI(p),u_brightness_high:new o.bI(p),u_saturation_factor:new o.bI(p),u_contrast_factor:new o.bI(p),u_spin_weights:new o.bH(p),u_perspective_transform:new o.bG(p),u_raster_elevation:new o.bI(p),u_zoom_transition:new o.bI(p),u_merc_center:new o.bG(p),u_cutoff_params:new o.c6(p),u_colorization_mix:new o.c6(p),u_colorization_offset:new o.bI(p),u_color_ramp:new o.bJ(p),u_texture_offset:new o.bG(p),u_texture_res:new o.bG(p),u_emissive_strength:new o.bI(p)}),rasterParticle:p=>({u_matrix:new o.bF(p),u_normalize_matrix:new o.bF(p),u_globe_matrix:new o.bF(p),u_merc_matrix:new o.bF(p),u_grid_matrix:new o.cv(p),u_tl_parent:new o.bG(p),u_scale_parent:new o.bI(p),u_fade_t:new o.bI(p),u_opacity:new o.bI(p),u_image0:new o.bJ(p),u_image1:new o.bJ(p),u_raster_elevation:new o.bI(p),u_zoom_transition:new o.bI(p),u_merc_center:new o.bG(p),u_cutoff_params:new o.c6(p)}),rasterParticleTexture:p=>({u_texture:new o.bJ(p),u_opacity:new o.bI(p)}),rasterParticleDraw:p=>({u_particle_texture:new o.bJ(p),u_particle_texture_side_len:new o.bI(p),u_tile_offset:new o.bG(p),u_velocity:new o.bJ(p),u_color_ramp:new o.bJ(p),u_velocity_res:new o.bG(p),u_max_speed:new o.bI(p),u_uv_offset:new o.bG(p),u_data_scale:new o.bG(p),u_data_offset:new o.bI(p),u_particle_pos_scale:new o.bI(p),u_particle_pos_offset:new o.bG(p)}),rasterParticleUpdate:p=>({u_particle_texture:new o.bJ(p),u_particle_texture_side_len:new o.bI(p),u_velocity:new o.bJ(p),u_velocity_res:new o.bG(p),u_max_speed:new o.bI(p),u_speed_factor:new o.bI(p),u_reset_rate:new o.bI(p),u_rand_seed:new o.bI(p),u_uv_offset:new o.bG(p),u_data_scale:new o.bG(p),u_data_offset:new o.bI(p),u_particle_pos_scale:new o.bI(p),u_particle_pos_offset:new o.bG(p)}),symbol:p=>({u_is_size_zoom_constant:new o.bJ(p),u_is_size_feature_constant:new o.bJ(p),u_size_t:new o.bI(p),u_size:new o.bI(p),u_camera_to_center_distance:new o.bI(p),u_rotate_symbol:new o.bJ(p),u_aspect_ratio:new o.bI(p),u_fade_change:new o.bI(p),u_matrix:new o.bF(p),u_label_plane_matrix:new o.bF(p),u_coord_matrix:new o.bF(p),u_is_text:new o.bJ(p),u_elevation_from_sea:new o.bJ(p),u_pitch_with_map:new o.bJ(p),u_texsize:new o.bG(p),u_texsize_icon:new o.bG(p),u_texture:new o.bJ(p),u_texture_icon:new o.bJ(p),u_gamma_scale:new o.bI(p),u_device_pixel_ratio:new o.bI(p),u_tile_id:new o.bH(p),u_zoom_transition:new o.bI(p),u_inv_rot_matrix:new o.bF(p),u_merc_center:new o.bG(p),u_camera_forward:new o.bH(p),u_tile_matrix:new o.bF(p),u_up_vector:new o.bH(p),u_ecef_origin:new o.bH(p),u_is_halo:new o.bJ(p),u_icon_transition:new o.bI(p),u_color_adj_mat:new o.bF(p)}),background:p=>({u_matrix:new o.bF(p),u_emissive_strength:new o.bI(p),u_opacity:new o.bI(p),u_color:new o.cu(p)}),backgroundPattern:p=>({u_matrix:new o.bF(p),u_emissive_strength:new o.bI(p),u_opacity:new o.bI(p),u_image:new o.bJ(p),u_pattern_tl:new o.bG(p),u_pattern_br:new o.bG(p),u_texsize:new o.bG(p),u_pattern_size:new o.bG(p),u_pixel_coord_upper:new o.bG(p),u_pixel_coord_lower:new o.bG(p),u_pattern_units_to_pixels:new o.bG(p)}),terrainRaster:p=>({u_matrix:new o.bF(p),u_image0:new o.bJ(p),u_skirt_height:new o.bI(p),u_ground_shadow_factor:new o.bH(p)}),skybox:p=>({u_matrix:new o.bF(p),u_sun_direction:new o.bH(p),u_cubemap:new o.bJ(p),u_opacity:new o.bI(p),u_temporal_offset:new o.bI(p)}),skyboxGradient:p=>({u_matrix:new o.bF(p),u_color_ramp:new o.bJ(p),u_center_direction:new o.bH(p),u_radius:new o.bI(p),u_opacity:new o.bI(p),u_temporal_offset:new o.bI(p)}),skyboxCapture:p=>({u_matrix_3f:new o.cv(p),u_sun_direction:new o.bH(p),u_sun_intensity:new o.bI(p),u_color_tint_r:new o.c6(p),u_color_tint_m:new o.c6(p),u_luminance:new o.bI(p)}),globeRaster:p=>({u_proj_matrix:new o.bF(p),u_globe_matrix:new o.bF(p),u_normalize_matrix:new o.bF(p),u_merc_matrix:new o.bF(p),u_zoom_transition:new o.bI(p),u_merc_center:new o.bG(p),u_image0:new o.bJ(p),u_grid_matrix:new o.cv(p),u_skirt_height:new o.bI(p),u_far_z_cutoff:new o.bI(p),u_frustum_tl:new o.bH(p),u_frustum_tr:new o.bH(p),u_frustum_br:new o.bH(p),u_frustum_bl:new o.bH(p),u_globe_pos:new o.bH(p),u_globe_radius:new o.bI(p),u_viewport:new o.bG(p)}),globeAtmosphere:p=>({u_frustum_tl:new o.bH(p),u_frustum_tr:new o.bH(p),u_frustum_br:new o.bH(p),u_frustum_bl:new o.bH(p),u_horizon:new o.bI(p),u_transition:new o.bI(p),u_fadeout_range:new o.bI(p),u_color:new o.c6(p),u_high_color:new o.c6(p),u_space_color:new o.c6(p),u_temporal_offset:new o.bI(p),u_horizon_angle:new o.bI(p)}),model:p=>({u_matrix:new o.bF(p),u_lighting_matrix:new o.bF(p),u_normal_matrix:new o.bF(p),u_node_matrix:new o.bF(p),u_lightpos:new o.bH(p),u_lightintensity:new o.bI(p),u_lightcolor:new o.bH(p),u_camera_pos:new o.bH(p),u_opacity:new o.bI(p),u_baseColorFactor:new o.c6(p),u_emissiveFactor:new o.c6(p),u_metallicFactor:new o.bI(p),u_roughnessFactor:new o.bI(p),u_baseTextureIsAlpha:new o.bJ(p),u_alphaMask:new o.bJ(p),u_alphaCutoff:new o.bI(p),u_baseColorTexture:new o.bJ(p),u_metallicRoughnessTexture:new o.bJ(p),u_normalTexture:new o.bJ(p),u_occlusionTexture:new o.bJ(p),u_emissionTexture:new o.bJ(p),u_lutTexture:new o.bJ(p),u_color_mix:new o.c6(p),u_aoIntensity:new o.bI(p),u_emissive_strength:new o.bI(p),u_occlusionTextureTransform:new o.c6(p)}),modelDepth:p=>({u_matrix:new o.bF(p),u_instance:new o.bF(p),u_node_matrix:new o.bF(p)}),groundShadow:p=>({u_matrix:new o.bF(p),u_ground_shadow_factor:new o.bH(p)}),stars:p=>({u_matrix:new o.bF(p),u_up:new o.bH(p),u_right:new o.bH(p),u_intensity_multiplier:new o.bI(p)}),occlusion:p=>({u_matrix:new o.bF(p),u_anchorPos:new o.bH(p),u_screenSizePx:new o.bG(p),u_occluderSizePx:new o.bG(p),u_color:new o.c6(p)})};class Da{constructor(s,u,m,_){this.id=Da.uniqueIdxCounter,Da.uniqueIdxCounter++,this.context=s;const w=s.gl;this.buffer=w.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||_||u.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){this.id=Da.uniqueIdxCounter,Da.uniqueIdxCounter++;const u=this.context.gl;this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}Da.uniqueIdxCounter=0;const Ju={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class rr{constructor(s,u,m,_,w,C){this.length=u.length,this.attributes=m,this.itemSize=u.bytesPerElement,this.dynamicDraw=_,this.instanceCount=C,this.context=s;const D=s.gl;this.buffer=D.createBuffer(),s.bindVertexBuffer.set(this.buffer),D.bufferData(D.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?D.DYNAMIC_DRAW:D.STATIC_DRAW),this.dynamicDraw||w||u.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,u){for(let m=0;m<this.attributes.length;m++){const _=u.attributes[this.attributes[m].name];_!==void 0&&s.enableVertexAttribArray(_)}}setVertexAttribPointers(s,u,m){for(let _=0;_<this.attributes.length;_++){const w=this.attributes[_],C=u.attributes[w.name];C!==void 0&&s.vertexAttribPointer(C,w.components,s[Ju[w.type]],!1,this.itemSize,w.offset+this.itemSize*(m||0))}}setVertexAttribDivisor(s,u,m){for(let _=0;_<this.attributes.length;_++){const w=u.attributes[this.attributes[_].name];w!==void 0&&this.instanceCount&&this.instanceCount>0&&s.vertexAttribDivisor(w,m)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class cm{constructor(s,u,m,_,w){this.context=s,this.width=u,this.height=m;const C=this.framebuffer=s.gl.createFramebuffer();_&&(this.colorAttachment=new em(s,C)),w&&(this.depthAttachmentType=w,this.depthAttachment=w==="renderbuffer"?new $0(s,C):new zx(s,C))}destroy(){const s=this.context.gl;if(this.colorAttachment){const u=this.colorAttachment.get();u&&s.deleteTexture(u)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const u=this.depthAttachment.get();u&&s.deleteRenderbuffer(u)}else{const u=this.depthAttachment.get();u&&s.deleteTexture(u)}s.deleteFramebuffer(this.framebuffer)}}class ET{constructor(s,u){this.gl=s,this.clearColor=new H0(this),this.clearDepth=new Mx(this),this.clearStencil=new j0(this),this.colorMask=new Zp(this),this.depthMask=new of(this),this.stencilMask=new Px(this),this.stencilFunc=new Dx(this),this.stencilOp=new kx(this),this.stencilTest=new uh(this),this.depthRange=new Rx(this),this.depthTest=new _T(this),this.depthFunc=new xT(this),this.blend=new bT(this),this.blendFunc=new G0(this),this.blendColor=new K0(this),this.blendEquation=new W0(this),this.cullFace=new q0(this),this.cullFaceSide=new Lx(this),this.frontFace=new Ox(this),this.program=new wT(this),this.activeTexture=new af(this),this.viewport=new sf(this),this.bindFramebuffer=new Ux(this),this.bindRenderbuffer=new rs(this),this.bindTexture=new X0(this),this.bindVertexBuffer=new Yp(this),this.bindElementBuffer=new Jp(this),this.bindVertexArrayOES=new Z0(this),this.pixelStoreUnpack=new Y0(this),this.pixelStoreUnpackPremultiplyAlpha=new $p(this),this.pixelStoreUnpackFlipY=new J0(this),this.options=u?{...u}:{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=s.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=s.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=s.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=s.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=s.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=s.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),this.maxPointSize=s.getParameter(s.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,u,m){return new Da(this,s,u,m)}createVertexBuffer(s,u,m,_,w){return new rr(this,s,u,m,_,w)}createRenderbuffer(s,u,m){const _=this.gl,w=_.createRenderbuffer();return this.bindRenderbuffer.set(w),_.renderbufferStorage(_.RENDERBUFFER,s,u,m),this.bindRenderbuffer.set(null),w}createFramebuffer(s,u,m,_){return new cm(this,s,u,m,_)}clear({color:s,depth:u,stencil:m,colorMask:_}){const w=this.gl;let C=0;s&&(C|=w.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set(_||[!0,!0,!0,!0])),u!==void 0&&(C|=w.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),m!==void 0&&(C|=w.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),w.clear(C)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){o.bh(s.blendFunction,Nr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor),s.blendEquation?this.blendEquation.set(s.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(s.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let um;function Am(p,s,u,m,_,w,C){const D=p.context,L=D.gl,z=p.transform,N=p.getOrCreateProgram("collisionBox"),j=[];let q=0,Z=0;for(let pe=0;pe<m.length;pe++){const we=m[pe],be=s.getTile(we),Fe=be.getBucket(u);if(!Fe)continue;const Ee=$A(we,Fe,z);let Me=Ee;_[0]===0&&_[1]===0||(Me=p.translatePosMatrix(Ee,be,_,w));const Qe=C?Fe.textCollisionBox:Fe.iconCollisionBox,Re=Fe.collisionCircleArray;if(Re.length>0){const Pe=o.a6.mat4.create(),Xe=Me;o.a6.mat4.mul(Pe,Fe.placementInvProjMatrix,z.glCoordMatrix),o.a6.mat4.mul(Pe,Pe,Fe.placementViewportMatrix),j.push({circleArray:Re,circleOffset:Z,transform:Xe,invTransform:Pe,projection:Fe.getProjection()}),q+=Re.length/4,Z=q}Qe&&(p.terrain&&p.terrain.setupElevationDraw(be,N),N.draw(p,L.LINES,sr.disabled,wr.disabled,p.colorModeForRenderPass(),mr.disabled,CT(Me,z,be,Fe.getProjection()),u.id,Qe.layoutVertexBuffer,Qe.indexBuffer,Qe.segments,null,z.zoom,null,[Qe.collisionVertexBuffer,Qe.collisionVertexBufferExt]))}if(!C||!j.length)return;const ne=p.getOrCreateProgram("collisionCircle"),ie=new o.cQ;ie.resize(4*q),ie._trim();let oe=0;for(const pe of j)for(let we=0;we<pe.circleArray.length/4;we++){const be=4*we,Fe=pe.circleArray[be+0],Ee=pe.circleArray[be+1],Me=pe.circleArray[be+2],Qe=pe.circleArray[be+3];ie.emplace(oe++,Fe,Ee,Me,Qe,0),ie.emplace(oe++,Fe,Ee,Me,Qe,1),ie.emplace(oe++,Fe,Ee,Me,Qe,2),ie.emplace(oe++,Fe,Ee,Me,Qe,3)}(!um||um.length<2*q)&&(um=function(pe){const we=2*pe,be=new o.aO;be.resize(we),be._trim();for(let Fe=0;Fe<we;Fe++){const Ee=6*Fe;be.uint16[Ee+0]=4*Fe+0,be.uint16[Ee+1]=4*Fe+1,be.uint16[Ee+2]=4*Fe+2,be.uint16[Ee+3]=4*Fe+2,be.uint16[Ee+4]=4*Fe+3,be.uint16[Ee+5]=4*Fe+0}return be}(q));const ae=D.createIndexBuffer(um,!0),ge=D.createVertexBuffer(ie,o.cR.members,!0);for(const pe of j){const we={u_matrix:pe.transform,u_inv_matrix:pe.invTransform,u_camera_to_center_distance:(ye=z).getCameraToCenterDistance(pe.projection),u_viewport_size:[ye.width,ye.height]};ne.draw(p,L.TRIANGLES,sr.disabled,wr.disabled,p.colorModeForRenderPass(),mr.disabled,we,u.id,ge,ae,o.b1.simpleSegment(0,2*pe.circleOffset,pe.circleArray.length,pe.circleArray.length/2),null,z.zoom)}var ye;ge.destroy(),ae.destroy()}const hf=o.a6.mat4.create();function uv(p){const s=p._camera.getWorldToCamera(p.worldSize,1),u=o.a6.mat4.multiply([],s,p.globeMatrix);o.a6.mat4.invert(u,u);const m=[0,0,0],_=[0,1,0,0];return o.a6.vec4.transformMat4(_,_,u),m[0]=_[0],m[1]=_[1],m[2]=_[2],o.a6.vec3.normalize(m,m),m}function TT({width:p,height:s,anchor:u,textOffset:m,textScale:_},w){const{horizontalAlign:C,verticalAlign:D}=o.bx(u),L=-(C-.5)*p,z=-(D-.5)*s,N=o.bw(u,m);return new o.P((L/_+N[0])*w,(z/_+N[1])*w)}function FT(p,s,u,m,_,w,C,D,L,z,N){const j=p.text.placedSymbolArray,q=p.text.dynamicLayoutVertexArray,Z=p.icon.dynamicLayoutVertexArray,ne={},ie=p.getProjection(),oe=gs(D,ie,w),ae=w.elevation,ge=ie.upVectorScale(D.canonical,w.center.lat,w.worldSize).metersToTile;q.clear();for(let ye=0;ye<j.length;ye++){const pe=j.get(ye),{tileAnchorX:we,tileAnchorY:be,numGlyphs:Fe}=pe,Ee=pe.hidden||!pe.crossTileID||p.allowVerticalPlacement&&!pe.placedOrientation?null:m[pe.crossTileID];if(Ee){let Me=0,Qe=0,Re=0;if(ae){const ft=ae?ae.getAtTileOffset(D,we,be):0,[Tt,Mt,yt]=ie.upVector(D.canonical,we,be);Me=ft*Tt*ge,Qe=ft*Mt*ge,Re=ft*yt*ge}let[Pe,Xe,ct,_t]=To(pe.projectedAnchorX+Me,pe.projectedAnchorY+Qe,pe.projectedAnchorZ+Re,u?oe:C);const lt=Zr(w.getCameraToCenterDistance(ie),_t);let St=_.evaluateSizeForFeature(p.textSizeData,z,pe)*lt/o.bq;u&&(St*=p.tilePixelRatio/L);const Ye=TT(Ee,St);u?({x:Pe,y:Xe,z:ct}=ie.projectTilePoint(we+Ye.x,be+Ye.y,D.canonical),[Pe,Xe,ct]=To(Pe+Me,Xe+Qe,ct+Re,C)):(s&&Ye._rotate(-w.angle),Pe+=Ye.x,Xe+=Ye.y,ct=0);const mt=p.allowVerticalPlacement&&pe.placedOrientation===o.bk.vertical?Math.PI/2:0;for(let ft=0;ft<Fe;ft++)o.bn(q,Pe,Xe,ct,mt);N&&pe.associatedIconIndex>=0&&(ne[pe.associatedIconIndex]={x:Pe,y:Xe,z:ct,angle:mt})}else fn(Fe,q)}if(N){Z.clear();const ye=p.icon.placedSymbolArray;for(let pe=0;pe<ye.length;pe++){const we=ye.get(pe),{numGlyphs:be}=we,Fe=ne[pe];if(we.hidden||!Fe)fn(be,Z);else{const{x:Ee,y:Me,z:Qe,angle:Re}=Fe;for(let Pe=0;Pe<be;Pe++)o.bn(Z,Ee,Me,Qe,Re)}}p.icon.dynamicLayoutVertexBuffer.updateData(Z)}p.text.dynamicLayoutVertexBuffer.updateData(q)}function df(p,s,u,m,_,w,C={}){const D=u.paint.get("icon-translate"),L=u.paint.get("text-translate"),z=u.paint.get("icon-translate-anchor"),N=u.paint.get("text-translate-anchor"),j=u.layout.get("icon-rotation-alignment"),q=u.layout.get("text-rotation-alignment"),Z=u.layout.get("icon-pitch-alignment"),ne=u.layout.get("text-pitch-alignment"),ie=u.layout.get("icon-keep-upright"),oe=u.layout.get("text-keep-upright"),ae=u.paint.get("icon-color-saturation"),ge=u.paint.get("icon-color-contrast"),ye=u.paint.get("icon-color-brightness-min"),pe=u.paint.get("icon-color-brightness-max"),we=u.paint.get("symbol-elevation-reference")==="sea",be=u.paint.get("text-occlusion-opacity").constantOr(0),Fe=p.context,Ee=Fe.gl,Me=p.transform,Qe=j==="map",Re=q==="map",Pe=Z==="map",Xe=ne==="map",ct=u.layout.get("symbol-sort-key").constantOr(1)!==void 0;let _t=!1;const lt=p.depthModeForSublayer(0,sr.ReadOnly),St=[o.am(Me.center.lng),o.at(Me.center.lat)],Ye=u.layout.get("text-variable-anchor"),mt=Me.projection.name==="globe",ft=[],Tt=[0,-1,0];for(const Mt of m){const yt=s.getTile(Mt),bt=yt.getBucket(u);if(!bt||bt.projection.name==="mercator"&&mt||bt.fullyClipped)continue;const ir=bt.projection.name==="globe",Lt=ir?o.a9(Me.zoom):0,Ht=gs(Mt,bt.getProjection(),Me),ur=Me.calculatePixelsToTileUnitsMatrix(yt),Zt=Ye&&bt.hasTextData(),lr=bt.hasIconTextFit()&&Zt&&bt.hasIconData(),Dr=bt.getProjection().createInversionMatrix(Me,Mt.canonical),Ir=En=>{Me.depthOcclusionForSymbolsAndCircles&&(u.hasInitialOcclusionOpacityProperties||p.terrain)&&(En.push("DEPTH_D24"),En.push("DEPTH_OCCLUSION"))},Cn=()=>{const En=Qe&&u.layout.get("symbol-placement")!=="point",Mr=[];Ir(Mr);const dn=En||lr,wn=u.paint.get("icon-image-cross-fade").constantOr(0);p.terrainRenderModeElevated()&&Pe&&Mr.push("PITCH_WITH_MAP_TERRAIN"),ir&&(Mr.push("PROJECTION_GLOBE_VIEW"),dn&&Mr.push("PROJECTED_POS_ON_VIEWPORT")),wn>0&&Mr.push("ICON_TRANSITION"),bt.icon.zOffsetVertexBuffer&&Mr.push("Z_OFFSET"),ae===0&&ge===0&&ye===0&&pe===1||Mr.push("COLOR_ADJUSTMENT"),bt.sdfIcons&&Mr.push("RENDER_SDF");const wi=bt.icon.programConfigurations.get(u.id),Di=p.getOrCreateProgram("symbol",{config:wi,defines:Mr}),nn=yt.imageAtlasTexture?yt.imageAtlasTexture.size:[0,0],Ji=bt.iconSizeData,co=o.bj(Ji,Me.zoom),$i=Pe||Me.pitch!==0,zn=Xr(Ht,yt.tileID.canonical,Pe,Qe,Me,bt.getProjection(),ur),ua=Xo(Ht,yt.tileID.canonical,Pe,Qe,Me,bt.getProjection(),ur),Aa=p.translatePosMatrix(ua,yt,D,z,!0),ys=p.translatePosMatrix(Ht,yt,D,z),is=dn?hf:zn,Ra=Qe&&!Pe&&!En;let _s=Tt;!mt&&!Me.mercatorFromTransition||Qe||(_s=uv(Me));const fc=ir?_s:Tt,su=u.getColorAdjustmentMatrix(ae,ge,ye,pe),wl=lv(Ji.kind,co,Ra,Pe,p,ys,is,Aa,we,!1,nn,[0,0],!0,Mt,Lt,St,Dr,fc,bt.getProjection(),su,wn),Ch=yt.imageAtlasTexture?yt.imageAtlasTexture:null,Sh=u.layout.get("icon-size").constantOr(0)!==1||bt.iconsNeedLinear,Tm=bt.sdfIcons||p.options.rotating||p.options.zooming||Sh||$i?Ee.LINEAR:Ee.NEAREST,Eh=bt.sdfIcons&&u.paint.get("icon-halo-width").constantOr(1)!==0,Qn=p.terrain&&Pe&&En?o.a6.mat4.invert(o.a6.mat4.create(),zn):hf;if(En&&bt.icon){const iA=Me.elevation,jT=iA?iA.getAtTileOffsetFunc(Mt,Me.center.lat,Me.worldSize,bt.getProjection()):null,vb=Wr(Ht,yt.tileID.canonical,Pe,Qe,Me,bt.getProjection(),ur);Ne(bt,Ht,p,!1,vb,ua,Pe,ie,jT,Mt)}return{program:Di,buffers:bt.icon,uniformValues:wl,atlasTexture:Ch,atlasTextureIcon:null,atlasInterpolation:Tm,atlasInterpolationIcon:null,isSDF:bt.sdfIcons,hasHalo:Eh,tile:yt,labelPlaneMatrixInv:Qn}},In=()=>{const En=Re&&u.layout.get("symbol-placement")!=="point",Mr=[],dn=En||Ye||lr;p.terrainRenderModeElevated()&&Xe&&Mr.push("PITCH_WITH_MAP_TERRAIN"),ir&&(Mr.push("PROJECTION_GLOBE_VIEW"),dn&&Mr.push("PROJECTED_POS_ON_VIEWPORT")),bt.text.zOffsetVertexBuffer&&Mr.push("Z_OFFSET"),bt.iconsInText&&Mr.push("RENDER_TEXT_AND_SYMBOL"),Mr.push("RENDER_SDF"),Ir(Mr);const wn=bt.text.programConfigurations.get(u.id),wi=p.getOrCreateProgram("symbol",{config:wn,defines:Mr});let Di,nn=[0,0],Ji=null;const co=bt.textSizeData;bt.iconsInText&&(nn=yt.imageAtlasTexture?yt.imageAtlasTexture.size:[0,0],Ji=yt.imageAtlasTexture?yt.imageAtlasTexture:null,Di=Xe||Me.pitch!==0||p.options.rotating||p.options.zooming||co.kind==="composite"||co.kind==="camera"?Ee.LINEAR:Ee.NEAREST);const $i=yt.glyphAtlasTexture?yt.glyphAtlasTexture.size:[0,0],zn=o.bj(co,Me.zoom),ua=Xr(Ht,yt.tileID.canonical,Xe,Re,Me,bt.getProjection(),ur),Aa=Xo(Ht,yt.tileID.canonical,Xe,Re,Me,bt.getProjection(),ur),ys=p.translatePosMatrix(Aa,yt,L,N,!0),is=p.translatePosMatrix(Ht,yt,L,N),Ra=dn?hf:ua,_s=Re&&!Xe&&!En;let fc=Tt;!mt&&!Me.mercatorFromTransition||Re||(fc=uv(Me));const su=lv(co.kind,zn,_s,Xe,p,is,Ra,ys,we,!0,$i,nn,!0,Mt,Lt,St,Dr,ir?fc:Tt,bt.getProjection(),be),wl=yt.glyphAtlasTexture?yt.glyphAtlasTexture:null,Ch=Ee.LINEAR,Sh=u.paint.get("text-halo-width").constantOr(1)!==0,Tm=p.terrain&&Xe&&En?o.a6.mat4.invert(o.a6.mat4.create(),ua):hf;if(En&&bt.text){const Eh=Me.elevation,Qn=Eh?Eh.getAtTileOffsetFunc(Mt,Me.center.lat,Me.worldSize,bt.getProjection()):null,iA=Wr(Ht,yt.tileID.canonical,Xe,Re,Me,bt.getProjection(),ur);Ne(bt,Ht,p,!0,iA,Aa,Xe,oe,Qn,Mt)}return{program:wi,buffers:bt.text,uniformValues:su,atlasTexture:wl,atlasTextureIcon:Ji,atlasInterpolation:Ch,atlasInterpolationIcon:Di,isSDF:!0,hasHalo:Sh,tile:yt,labelPlaneMatrixInv:Tm}},Wn=bt.icon.segments.get().length,vs=bt.text.segments.get().length,Pi=Wn&&!C.onlyText?Cn():null,Vr=vs&&!C.onlyIcons?In():null,Tn=u.paint.get("icon-opacity").constantOr(1),ni=u.paint.get("text-opacity").constantOr(1);if(ct&&bt.canOverlap){_t=!0;const En=Tn&&!C.onlyText?bt.icon.segments.get():[],Mr=ni&&!C.onlyIcons?bt.text.segments.get():[];for(const dn of En)ft.push({segments:new o.b1([dn]),sortKey:dn.sortKey,state:Pi});for(const dn of Mr)ft.push({segments:new o.b1([dn]),sortKey:dn.sortKey,state:Vr})}else C.onlyText||ft.push({segments:Tn?bt.icon.segments:new o.b1([]),sortKey:0,state:Pi}),C.onlyIcons||ft.push({segments:ni?bt.text.segments:new o.b1([]),sortKey:0,state:Vr})}_t&&ft.sort((Mt,yt)=>Mt.sortKey-yt.sortKey);for(const Mt of ft){const yt=Mt.state;if(yt)if(p.terrain?p.terrain.setupElevationDraw(yt.tile,yt.program,{useDepthForOcclusion:Me.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:yt.labelPlaneMatrixInv}):p.setupDepthForOcclusion(Me.depthOcclusionForSymbolsAndCircles,yt.program),Fe.activeTexture.set(Ee.TEXTURE0),yt.atlasTexture&&yt.atlasTexture.bind(yt.atlasInterpolation,Ee.CLAMP_TO_EDGE,!0),yt.atlasTextureIcon&&(Fe.activeTexture.set(Ee.TEXTURE1),yt.atlasTextureIcon&&yt.atlasTextureIcon.bind(yt.atlasInterpolationIcon,Ee.CLAMP_TO_EDGE,!0)),p.uploadCommonLightUniforms(p.context,yt.program),yt.hasHalo){const bt=yt.uniformValues;bt.u_is_halo=1,ff(yt.buffers,Mt.segments,u,p,yt.program,lt,_,w,bt,2),bt.u_is_halo=0}else{if(yt.isSDF){const bt=yt.uniformValues;yt.hasHalo&&(bt.u_is_halo=1,ff(yt.buffers,Mt.segments,u,p,yt.program,lt,_,w,bt,1)),bt.u_is_halo=0}ff(yt.buffers,Mt.segments,u,p,yt.program,lt,_,w,yt.uniformValues,1)}}}function ff(p,s,u,m,_,w,C,D,L,z){const N=[p.dynamicLayoutVertexBuffer,p.opacityVertexBuffer,p.iconTransitioningVertexBuffer,p.globeExtVertexBuffer,p.zOffsetVertexBuffer];_.draw(m,m.context.gl.TRIANGLES,w,C,D,mr.disabled,L,u.id,p.layoutVertexBuffer,p.indexBuffer,s,u.paint,m.transform.zoom,p.programConfigurations.get(u.id),N,z)}function hm(p,s,u,m,_,w,C){const D=p.context.gl,L=u.paint.get("fill-pattern"),z=u.is3D(),N=z?p.stencilModeFor3D():wr.disabled,j=L&&L.constantOr(1);let q,Z,ne,ie,oe;C?(Z=j&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",q=D.LINES):(Z=j?"fillPattern":"fill",q=D.TRIANGLES);for(const ae of m){const ge=s.getTile(ae);if(j&&!ge.patternsLoaded())continue;const ye=ge.getBucket(u);if(!ye)continue;p.prepareDrawTile();const pe=ye.programConfigurations.get(u.id),we=p.isTileAffectedByFog(ae),be=p.getOrCreateProgram(Z,{config:pe,overrideFog:we});j&&(p.context.activeTexture.set(D.TEXTURE0),ge.imageAtlasTexture&&ge.imageAtlasTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),pe.updatePaintBuffers());const Fe=L.constantOr(null);if(Fe&&ge.imageAtlas){const Qe=ge.imageAtlas.patternPositions[Fe.toString()];Qe&&pe.setConstantPatternPositions(Qe)}const Ee=p.translatePosMatrix(ae.projMatrix,ge,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor")),Me=u.paint.get("fill-emissive-strength");if(C){ie=ye.indexBuffer2,oe=ye.segments2;const Qe=p.terrain&&p.terrain.renderingToTexture?p.terrain.drapeBufferSize:[D.drawingBufferWidth,D.drawingBufferHeight];ne=Z==="fillOutlinePattern"&&j?uf(Ee,Me,p,ge,Qe):qx(Ee,Me,Qe)}else ie=ye.indexBuffer,oe=ye.segments,ne=j?Wx(Ee,Me,p,ge):nm(Ee,Me);p.uploadCommonUniforms(p.context,be,ae.toUnwrapped()),be.draw(p,q,_,z?N:p.stencilModeForClipping(ae),w,mr.disabled,ne,u.id,ye.layoutVertexBuffer,ie,oe,u.paint,p.transform.zoom,pe,void 0)}}function ph(p,s,u,m,_,w,C,D){u.resetLayerRenderingStats(p);const L=p.context,z=L.gl,N=p.transform,j=u.paint.get("fill-extrusion-pattern"),q=j.constantOr(1),Z=u.paint.get("fill-extrusion-opacity"),ne=p.style.enable3dLights(),ie=u.paint.get(ne&&!q?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),oe=[u.paint.get("fill-extrusion-ambient-occlusion-intensity"),ie],ae=u.layout.get("fill-extrusion-edge-radius"),ge=ae>0&&!u.paint.get("fill-extrusion-rounded-roof"),ye=ge?0:ae,pe=N.projection.name==="globe"?o.c_():0,we=N.projection.name==="globe",be=we?o.a9(N.zoom):0,Fe=[o.am(N.center.lng),o.at(N.center.lat)],Ee=u.paint.get("fill-extrusion-flood-light-color").toRenderColor(u.lut).toArray01().slice(0,3),Me=u.paint.get("fill-extrusion-flood-light-intensity"),Qe=u.paint.get("fill-extrusion-vertical-scale"),Re=u.paint.get("fill-extrusion-line-width").constantOr(1)!==0,Pe=lc(p,u.paint.get("fill-extrusion-cutoff-fade-range")),Xe=[];let ct;we&&Xe.push("PROJECTION_GLOBE_VIEW"),oe[0]>0&&Xe.push("FAUX_AO"),ge&&Xe.push("ZERO_ROOF_RADIUS"),D&&Xe.push("HAS_CENTROID"),Me>0&&Xe.push("FLOOD_LIGHT"),Pe.shouldRenderCutoff&&Xe.push("RENDER_CUTOFF"),Re&&Xe.push("RENDER_WALL_MODE");const _t=p.renderPass==="shadow",lt=p.shadowRenderer,St=_t&&!!lt;p.shadowRenderer&&(p.shadowRenderer.useNormalOffset=!0);let Ye=[0,0,0];if(lt){const Tt=p.style.directionalLight,Mt=p.style.ambientLight;Tt&&Mt&&(Ye=Vp(p.style,Tt,Mt)),ct=Xe.concat(["SHADOWS_SINGLE_CASCADE"])}const mt=St?"fillExtrusionDepth":q?"fillExtrusionPattern":"fillExtrusion",ft=u.getLayerRenderingStats();for(const Tt of m){const Mt=s.getTile(Tt),yt=Mt.getBucket(u);if(!yt||yt.projection.name!==N.projection.name)continue;let bt=!1;lt&&(bt=lt.getMaxCascadeForTile(Tt.toUnwrapped())===0);const ir=p.isTileAffectedByFog(Tt),Lt=yt.programConfigurations.get(u.id),Ht=p.getOrCreateProgram(mt,{config:Lt,defines:bt?ct:Xe,overrideFog:ir});if(p.terrain&&p.terrain.setupElevationDraw(Mt,Ht,{useMeterToDem:!0}),!yt.centroidVertexBuffer){const In=Ht.attributes.a_centroid_pos;In!==void 0&&z.vertexAttrib2f(In,0,0)}!_t&&lt&&lt.setupShadows(Mt.tileID.toUnwrapped(),Ht,"vector-tile",Mt.tileID.overscaledZ),q&&(p.context.activeTexture.set(z.TEXTURE0),Mt.imageAtlasTexture&&Mt.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),Lt.updatePaintBuffers());const ur=j.constantOr(null);if(ur&&Mt.imageAtlas){const In=Mt.imageAtlas.patternPositions[ur.toString()];In&&Lt.setConstantPatternPositions(In)}const Zt=u.paint.get("fill-extrusion-vertical-gradient"),lr=1/yt.tileToMeter;let Dr;if(_t&&lt){if(dv(Mt.tileID,yt,p))continue;const In=lt.calculateShadowPassMatrixFromTile(Mt.tileID.toUnwrapped());Dr=Kx(In,ye,lr,Qe)}else{const In=p.translatePosMatrix(Tt.expandedProjMatrix,Mt,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Wn=N.projection.createInversionMatrix(N,Tt.canonical);Dr=q?av(In,p,Zt,Z,oe,ye,lr,Tt,Mt,pe,be,Fe,Wn,Ee,Qe):ov(In,p,Zt,Z,oe,ye,lr,Tt,pe,be,Fe,Wn,Ee,Qe,Me,Ye)}p.uploadCommonUniforms(L,Ht,Tt.toUnwrapped(),null,Pe);let Ir=yt.segments;if(N.projection.name==="mercator"&&!_t&&(Ir=yt.getVisibleSegments(Mt.tileID,p.terrain,p.transform.getFrustum(0)),!Ir.get().length))continue;if(ft)if(_t)for(const In of Ir.get())ft.numRenderedVerticesInShadowPass+=In.primitiveLength;else for(const In of Ir.get())ft.numRenderedVerticesInTransparentPass+=In.primitiveLength;const Cn=[];(p.terrain||D)&&Cn.push(yt.centroidVertexBuffer),we&&Cn.push(yt.layoutVertexExtBuffer),Re&&Cn.push(yt.wallVertexBuffer),Ht.draw(p,L.gl.TRIANGLES,_,w,C,mr.backCCW,Dr,u.id,yt.layoutVertexBuffer,yt.indexBuffer,Ir,u.paint,p.transform.zoom,Lt,Cn)}p.shadowRenderer&&(p.shadowRenderer.useNormalOffset=!1)}function yo(p,s,u,m,_,w,C,D,L,z,N,j,q,Z,ne,ie,oe,ae,ge){const ye=p.context,pe=ye.gl,we=p.transform,be=p.transform.zoom,Fe=[],Ee=lc(p,u.paint.get("fill-extrusion-cutoff-fade-range"));z==="clear"?(Fe.push("CLEAR_SUBPASS"),ge&&(Fe.push("CLEAR_FROM_TEXTURE"),ye.activeTexture.set(pe.TEXTURE0),ge.bind(pe.LINEAR,pe.CLAMP_TO_EDGE))):z==="sdf"&&Fe.push("SDF_SUBPASS"),oe&&Fe.push("HAS_CENTROID"),Ee.shouldRenderCutoff&&Fe.push("RENDER_CUTOFF");const Me=u.layout.get("fill-extrusion-edge-radius"),Qe=(Re,Pe,Xe,ct,_t)=>{const lt=Pe.programConfigurations.get(u.id),St=p.isTileAffectedByFog(Re),Ye=p.getOrCreateProgram("fillExtrusionGroundEffect",{config:lt,defines:Fe,overrideFog:St}),mt=((Tt,Mt,yt,bt,ir,Lt,Ht,ur,Zt,lr,Dr)=>({u_matrix:Mt,u_opacity:yt,u_ao_pass:bt?1:0,u_meter_to_tile:ir,u_ao:Lt,u_flood_light_intensity:Ht,u_flood_light_color:ur,u_attenuation:Zt,u_edge_radius:lr,u_fb:0,u_fb_size:Dr,u_dynamic_offset:1}))(0,ct,N,L,_t,[j,q*_t],Z,ne,ie,be>=17?0:Me*_t,ge?ge.size[0]:0),ft=[];oe&&ft.push(Pe.hiddenByLandmarkVertexBuffer),p.uploadCommonUniforms(ye,Ye,Re.toUnwrapped(),null,Ee),Ye.draw(p,ye.gl.TRIANGLES,_,w,C,D,mt,u.id,Pe.vertexBuffer,Pe.indexBuffer,Xe,u.paint,be,lt,ft)};for(const Re of m){const Pe=s.getTile(Re),Xe=Pe.getBucket(u);if(!Xe||Xe.projection.name!==we.projection.name||!Xe.groundEffect||Xe.groundEffect&&!Xe.groundEffect.hasData())continue;const ct=Xe.groundEffect,_t=1/Xe.tileToMeter;{const lt=p.translatePosMatrix(Re.projMatrix,Pe,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),St=ct.getDefaultSegment();Qe(Re,ct,St,lt,_t)}if(ae)for(let lt=0;lt<4;lt++){const St=o.c$[lt](Re),Ye=s.getTile(St);if(!Ye)continue;const mt=Ye.getBucket(u);if(!mt||mt.projection.name!==we.projection.name||!mt.groundEffect||mt.groundEffect&&!mt.groundEffect.hasData())continue;const ft=mt.groundEffect;let Tt,Mt;lt===0?(Tt=[-o.ab,0,0],Mt=1):lt===1?(Tt=[o.ab,0,0],Mt=0):lt===2?(Tt=[0,-o.ab,0],Mt=3):(Tt=[0,o.ab,0],Mt=2);const yt=ft.regionSegments[Mt];if(!yt)continue;const bt=new Float32Array(16);o.a6.mat4.translate(bt,Re.projMatrix,Tt),Qe(Re,ft,yt,p.translatePosMatrix(bt,Pe,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),_t)}}}function tu(p,s,u,m,_,w,C){m.centroidVertexArray.length===0&&m.createCentroidsBuffer();const D=w?w.findDEMTileFor(u):null;if(!(D&&D.dem||C))return;const L=ae=>new o.P(Math.ceil((ae+o.d2)*o.d3),0),z=ae=>{const ge=s.getSource().minzoom,ye=we=>{const be=s.getTileByID(we);if(be&&be.hasData())return be.getBucket(_)},pe=[0,-1,1];for(const we of pe){if(ae.overscaledZ+we<ge)continue;const be=ye(ae.calculateScaledKey(ae.overscaledZ+we));if(be)return be}},N=[0,0,0],j=(ae,ge)=>(N[0]=Math.min(ae.min.y,ge.min.y),N[1]=Math.max(ae.max.y,ge.max.y),N[2]=o.ab-ge.min.x>ae.max.x?ge.min.x-o.ab:ae.max.x,N),q=(ae,ge)=>(N[0]=Math.min(ae.min.x,ge.min.x),N[1]=Math.max(ae.max.x,ge.max.x),N[2]=o.ab-ge.min.y>ae.max.y?ge.min.y-o.ab:ae.max.y,N),Z=[(ae,ge)=>j(ae,ge),(ae,ge)=>j(ge,ae),(ae,ge)=>q(ae,ge),(ae,ge)=>q(ge,ae)],ne=(ae,ge,ye,pe,we,be,Fe)=>{if(!w)return 0;const Ee=[[be?ye:ae,be?ae:ye,0],[be?ye:ge,be?ge:ye,0]],Me=Fe<0?o.ab+Fe:Fe,Qe=[be?Me:(ae+ge)/2,be?(ae+ge)/2:Me,0];return ye===0&&Fe<0||ye!==0&&Fe>0?w.getForTilePoints(we,[Qe],!0,pe):Ee.push(Qe),w.getForTilePoints(u,Ee,!0,D),Math.max(Ee[0][2],Ee[1][2],Qe[2])/w.exaggeration()};for(let ae=0;ae<4;ae++){const ge=m.borderFeatureIndices[ae];if(ge.length===0)continue;const ye=o.c$[ae](u),pe=z(ye);if(!(pe&&pe instanceof o.d0)||m.borderDoneWithNeighborZ[ae]===pe.canonical.z)continue;pe.centroidVertexArray.length===0&&pe.createCentroidsBuffer();const we=w?w.findDEMTileFor(ye):null;if(!(we&&we.dem||C))continue;const be=(ae<2?1:5)-ae,Fe=pe.borderDoneWithNeighborZ[be]!==m.canonical.z,Ee=pe.borderFeatureIndices[be];let Me=0;if(m.canonical.z!==pe.canonical.z){for(const Qe of ge)m.showCentroid(m.featuresOnBorder[Qe]);if(Fe)for(const Qe of Ee)pe.showCentroid(pe.featuresOnBorder[Qe]);m.borderDoneWithNeighborZ[ae]=pe.canonical.z,pe.borderDoneWithNeighborZ[be]=m.canonical.z}for(const Qe of ge){const Re=m.featuresOnBorder[Qe],Pe=m.centroidData[Re.centroidDataIndex],Xe=Re.borders[ae];let ct;for(;Me<Ee.length;){ct=pe.featuresOnBorder[Ee[Me]];const _t=ct.borders[be];if(_t[1]>Xe[0]+3||_t[0]>Xe[0]-3)break;pe.showCentroid(ct),Me++}if(ct&&Me<Ee.length){const _t=Me;let lt=0;for(;!(ct.borders[be][0]>Xe[1]-3)&&(lt++,++Me!==Ee.length);)ct=pe.featuresOnBorder[Ee[Me]];ct=pe.featuresOnBorder[Ee[_t]];let St=!1;if(lt>=1){const ft=ct.borders[be];Math.abs(Xe[0]-ft[0])<3&&Math.abs(Xe[1]-ft[1])<3&&(lt=1,St=!0,Me=_t+1)}else if(lt===0){m.showCentroid(Re);continue}const Ye=pe.centroidData[ct.centroidDataIndex];C&&St&&(((ie=Pe).flags|(oe=Ye).flags)&o.d1?(ie.flags|=o.d1,oe.flags|=o.d1):(ie.flags&=~o.d1,oe.flags&=~o.d1));const mt=Re.intersectsCount()>1||ct.intersectsCount()>1;if(lt>1)Me=_t,Pe.centroidXY=Ye.centroidXY=new o.P(0,0);else if(we&&we.dem&&!mt){const ft=Z[ae](Pe,Ye),Tt=ae%2?o.ab-1:0,Mt=ne(ft[0],Math.min(o.ab-1,ft[1]),Tt,we,ye,ae<2,ft[2]);Pe.centroidXY=Ye.centroidXY=L(Mt)}else mt?Pe.centroidXY=Ye.centroidXY=new o.P(0,0):(Pe.centroidXY=m.encodeBorderCentroid(Re),Ye.centroidXY=pe.encodeBorderCentroid(ct));m.writeCentroidToBuffer(Pe),pe.writeCentroidToBuffer(Ye)}else m.showCentroid(Re)}m.borderDoneWithNeighborZ[ae]=pe.canonical.z,pe.borderDoneWithNeighborZ[be]=m.canonical.z}var ie,oe;(m.needsCentroidUpdate||!m.centroidVertexBuffer&&m.centroidVertexArray.length!==0)&&m.uploadCentroid(p)}const eb=[1,0,0],Av=[0,1,0],hv=[0,0,1];function dv(p,s,u){const m=u.transform,_=u.shadowRenderer;if(!_)return!0;const w=p.toUnwrapped(),C=m.tileSize*_._cascades[u.currentShadowCascade].scale;let D=s.maxHeight;if(m.elevation){const ie=m.elevation.getMinMaxForTile(p);ie&&(D+=ie.max)}const L=[..._.shadowDirection];L[2]=-L[2];const z=_.computeSimplifiedTileShadowVolume(w,D,C,L);if(!z)return!1;const N=[eb,Av,hv,L,[L[0],0,L[2]],[0,L[1],L[2]]],j=m.projection.name==="globe",q=m.scaleZoom(C),Z=o.bN.fromInvProjectionMatrix(m.invProjMatrix,m.worldSize,q,!j),ne=_.getCurrentCascadeFrustum();return Z.intersectsPrecise(z.vertices,z.planes,N)===0||ne.intersectsPrecise(z.vertices,z.planes,N)===0}function fv(p){return[p[0]*o.d4,p[1]*o.d4,p[2]*o.d4,0]}function ka(p,s,u,m,_,w,C,D,L){const z=m.getSource(),N=u.globeSharedBuffers;if(!N)return;let j,q,Z;if(s&&(j=m.getTile(s)),z instanceof o.aD?(q=z.texture,Z=o.cD(0,0,u.transform)):j&&s&&(q=j.texture,Z=o.cD(s.canonical.z,s.canonical.x,u.transform)),!q||!Z)return;p||(Z=o.a6.mat4.scale(o.a6.mat4.create(),Z,[1,-1,1]));const ne=u.context,ie=ne.gl,oe=_.paint.get("raster-resampling")==="nearest"?ie.NEAREST:ie.LINEAR,ae=u.colorModeForDrapableLayerRenderPass(w),ge=C.defines;ge.push("GLOBE_POLES");const ye=new sr(ie.LEQUAL,sr.ReadWrite,u.depthRangeFor3D),pe=Float32Array.from(u.transform.expandedFarZProjMatrix),we=Float32Array.from(o.b5(o.cC(new o.bP(0,0,0))));u.terrain&&u.terrain.prepareDrawTile(),ne.activeTexture.set(ie.TEXTURE0),q.bind(oe,ie.CLAMP_TO_EDGE),ne.activeTexture.set(ie.TEXTURE1),q.bind(oe,ie.CLAMP_TO_EDGE),q.useMipmap&&ne.extTextureFilterAnisotropic&&u.transform.pitch>20&&ie.texParameterf(ie.TEXTURE_2D,ne.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ne.extTextureFilterAnisotropicMax);const[be,Fe,Ee,Me]=s?N.getPoleBuffers(s.canonical.z,!1):N.getPoleBuffers(0,!0),Qe=_.paint.get("raster-elevation");let Re;p?(Re=be,u.renderDefaultNorthPole=Qe!==0):(Re=Fe,u.renderDefaultSouthPole=Qe!==0);const Pe=fv(C.mix),Xe=((_t,lt,St,Ye,mt,ft,Tt,Mt,yt,bt,ir,Lt,Ht)=>Af(_t,lt,St,new Float32Array(16),new Float32Array(9),[0,0],Ye,[0,0],[0,0,0,0],1,{opacity:1,mix:0},ft,[0,0],Mt,2,bt,ir,Lt,1,0,Ht))(pe,we,Z,o.a9(u.transform.zoom),0,_,0,Qe,0,Pe,C.offset,C.range,w),ct=u.getOrCreateProgram("raster",{defines:ge});u.uploadCommonUniforms(ne,ct,null),ct.draw(u,ie.TRIANGLES,ye,L,ae,D,Xe,_.id,Re,Ee,Me)}function xi(p){const s=p._nearZ,u=p.projection.farthestPixelDistance(p),m=u-s,_=.2*p.height,w=s+_;return[s,u,(w-_-s)/m,(w-s)/m]}function dm(p,s,u,m){if(p)return s instanceof Kc&&p instanceof YA?s.getTextureDescriptor(p,u,!0):{texture:p.texture,mix:fv(m.mix),offset:m.offset,buffer:0,tileSize:1}}var pv=o.d5([{name:"a_index",type:"Int16",components:1}]);class tb{constructor(s,u,m,_){const w={width:m[0],height:m[1],data:null},C=s.gl;this.targetColorTexture=new o.T(s,w,C.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new o.T(s,w,C.RGBA8,{useMipmap:!1}),this.context=s,this.updateParticleTexture(u,_),this.lastInvalidatedAt=0}updateParticleTexture(s,u){if(this.particleTextureDimension===u.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const m=this.context.gl,_=u.width*u.height;this.particleTexture0=new o.T(this.context,u,m.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new o.T(this.context,u,m.RGBA8,{premultiply:!1,useMipmap:!1});const w=new o.d6;w.reserve(_);for(let C=0;C<_;C++)w.emplaceBack(C);this.particleIndexBuffer=this.context.createVertexBuffer(w,pv.members,!0),this.particleSegment=o.b1.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=u.width}update(s){return!(this.lastInvalidatedAt<s&&(this.lastInvalidatedAt=o.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function rb(p,s,u){if(!p)return null;const m=s.getTextureDescriptor(p,u,!0);if(!m)return null;let{texture:_,mix:w,offset:C,tileSize:D,buffer:L,format:z}=m;if(!_||!z)return null;let N=!1;return z==="uint32"&&(N=!0,w[3]=0,w=im(o.d7,w,[0,u.paint.get("raster-particle-max-speed")]),C=om(o.d7,C,[0,u.paint.get("raster-particle-max-speed")])),{texture:_,textureOffset:[L/(D+2*L),D/(D+2*L)],tileSize:D,scalarData:N,scale:w,offset:C,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[z]]}}function nb(p){const s=p._nearZ,u=p.projection.farthestPixelDistance(p),m=u-s,_=.2*p.height,w=s+_;return[s,u,(w-_-s)/m,(w-s)/m]}const IT=new o.bz(1,0,0,1),mh=new o.bz(0,1,0,1),gh=new o.bz(0,0,1,1),kt=new o.bz(1,0,1,1),nr=new o.bz(0,1,1,1);function Hs(p,s,u,m,_,w,C){const D=p.context,L=p.transform,z=D.gl,N=L.projection.name==="globe",j=N?["PROJECTION_GLOBE_VIEW"]:[];let q=o.a6.mat4.clone(u.projMatrix);if(N&&o.a9(L.zoom)>0){const Pe=o.b4(u.canonical,L),Xe=o.d8(Pe);q=o.a6.mat4.multiply(new Float32Array(16),L.globeMatrix,Xe),o.a6.mat4.multiply(q,L.projMatrix,q)}const Z=o.a6.mat4.create();Z[12]+=2*_/(o.q.devicePixelRatio*L.width),Z[13]+=2*w/(o.q.devicePixelRatio*L.height),o.a6.mat4.multiply(q,Z,q);const ne=p.getOrCreateProgram("debug",{defines:j}),ie=s.getTileByID(u.key);p.terrain&&p.terrain.setupElevationDraw(ie,ne);const oe=sr.disabled,ae=wr.disabled,ge=p.colorModeForRenderPass(),ye="$debug";D.activeTexture.set(z.TEXTURE0),p.emptyTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),N?ie._makeGlobeTileDebugBuffers(p.context,L):ie._makeDebugTileBoundsBuffers(p.context,L.projection);const pe=ie._tileDebugBuffer||p.debugBuffer,we=ie._tileDebugIndexBuffer||p.debugIndexBuffer,be=ie._tileDebugSegments||p.debugSegments;if(ne.draw(p,z.LINE_STRIP,oe,ae,ge,mr.disabled,Xx(q,m),ye,pe,we,be,null,null,null,[ie._globeTileDebugBorderBuffer]),C){const Pe=ie.latestRawTileData,Xe=Math.floor((Pe&&Pe.byteLength||0)/1024);let ct=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(ct+=` => ${u.overscaledZ}`),ct+=` ${ie.state}`,ct+=` ${Xe}kb`,function(_t,lt){_t.initDebugOverlayCanvas();const St=_t.debugOverlayCanvas,Ye=_t.context.gl,mt=_t.debugOverlayCanvas.getContext("2d");mt.clearRect(0,0,St.width,St.height),mt.shadowColor="white",mt.shadowBlur=2,mt.lineWidth=1.5,mt.strokeStyle="white",mt.textBaseline="top",mt.font="bold 36px Open Sans, sans-serif",mt.fillText(lt,5,5),mt.strokeText(lt,5,5),_t.debugOverlayTexture.update(St),_t.debugOverlayTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE)}(p,ct)}const Fe=s.getTile(u).tileSize,Ee=512/Math.min(Fe,512)*(u.overscaledZ/L.zoom)*.5,Me=ie._tileDebugTextBuffer||p.debugBuffer,Qe=ie._tileDebugTextIndexBuffer||p.quadTriangleIndexBuffer,Re=ie._tileDebugTextSegments||p.debugSegments;ne.draw(p,z.TRIANGLES,oe,ae,Nr.alphaBlended,mr.disabled,Xx(q,o.bz.transparent,Ee),ye,Me,Qe,Re,null,null,null,[ie._globeTileDebugTextBuffer])}function ri(p,s,u,m){pf(p,0,s+u/2,p.transform.width,u,m)}function $e(p,s,u,m){pf(p,s-u/2,0,u,p.transform.height,m)}function pf(p,s,u,m,_,w){const C=p.context,D=C.gl;D.enable(D.SCISSOR_TEST),D.scissor(s*o.q.devicePixelRatio,u*o.q.devicePixelRatio,m*o.q.devicePixelRatio,_*o.q.devicePixelRatio),C.clear({color:w}),D.disable(D.SCISSOR_TEST)}const fm=o.d5([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:mv}=fm;function js(p,s,u,m){p.emplaceBack(s,u,m)}class gv{constructor(s){this.vertexArray=new o.d9,this.indices=new o.aO,js(this.vertexArray,-1,-1,1),js(this.vertexArray,1,-1,1),js(this.vertexArray,-1,1,1),js(this.vertexArray,1,1,1),js(this.vertexArray,-1,-1,-1),js(this.vertexArray,1,-1,-1),js(this.vertexArray,-1,1,-1),js(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=s.createVertexBuffer(this.vertexArray,mv),this.indexBuffer=s.createIndexBuffer(this.indices),this.segment=o.b1.simpleSegment(0,0,36,12)}}function $u(p,s,u,m,_,w){const C=p.context.gl,D=s.paint.get("sky-atmosphere-color"),L=s.paint.get("sky-atmosphere-halo-color"),z=s.paint.get("sky-atmosphere-sun-intensity"),N=((j,q,Z,ne,ie)=>({u_matrix_3f:j,u_sun_direction:q,u_sun_intensity:Z,u_color_tint_r:[ne.r,ne.g,ne.b,ne.a],u_color_tint_m:[ie.r,ie.g,ie.b,ie.a],u_luminance:5e-5}))(o.a6.mat3.fromMat4(o.a6.mat3.create(),m),_,z,D,L);C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_CUBE_MAP_POSITIVE_X+w,s.skyboxTexture,0),u.draw(p,C.TRIANGLES,sr.disabled,wr.disabled,Nr.unblended,mr.frontCW,N,"skyboxCapture",s.skyboxGeometry.vertexBuffer,s.skyboxGeometry.indexBuffer,s.skyboxGeometry.segment)}const vh=o.d5([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class MT{constructor(s){const u=new o.da;u.emplaceBack(-1,1,1,0,0),u.emplaceBack(1,1,1,1,0),u.emplaceBack(1,-1,1,1,1),u.emplaceBack(-1,-1,1,0,1);const m=new o.aO;m.emplaceBack(0,1,2),m.emplaceBack(2,3,0),this.vertexBuffer=s.createVertexBuffer(u,vh.members),this.indexBuffer=s.createIndexBuffer(m),this.segments=o.b1.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const PT=o.d5([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class ib{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class pm{constructor(s){this.colorModeAlphaBlendedWriteRGB=new Nr([1,$a,1,$a],o.bz.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new Nr([1,0,1,0],o.bz.transparent,[!1,!1,!1,!0]),this.params=new ib,this.updateNeeded=!0,s.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),s.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),s.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),s.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(s){const u=s.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new MT(u);const m=this.params.sizeRange,_=this.params.intensityRange,w=function(N){const j=o.dd(30),q=[];for(let Z=0;Z<N;++Z){const ne=2*Math.PI*j(),ie=Math.acos(1-2*j())-.5*Math.PI;q.push(o.a6.vec3.fromValues(Math.cos(ie)*Math.cos(ne),Math.cos(ie)*Math.sin(ne),Math.sin(ie)))}return q}(this.params.starsCount),C=o.dd(300),D=new o.db,L=new o.aO;let z=0;for(let N=0;N<w.length;++N){const j=o.a6.vec3.scale([],w[N],200),q=Math.max(0,1+.01*m*(1*C()-.5)),Z=Math.max(0,1+.01*_*(1*C()-.5));D.emplaceBack(j[0],j[1],j[2],-1,-1,q,Z),D.emplaceBack(j[0],j[1],j[2],1,-1,q,Z),D.emplaceBack(j[0],j[1],j[2],1,1,q,Z),D.emplaceBack(j[0],j[1],j[2],-1,1,q,Z),L.emplaceBack(z+0,z+1,z+2),L.emplaceBack(z+0,z+2,z+3),z+=4}this.starsVx=u.createVertexBuffer(D,PT.members),this.starsIdx=u.createIndexBuffer(L),this.starsSegments=o.b1.simpleSegment(0,0,D.length,L.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(s,u){const m=s.context,_=m.gl,w=s.transform,C=new sr(_.LEQUAL,sr.ReadOnly,[0,1]),D=o.a9(w.zoom),L=s.style.getLut(u.scope),z=u.properties.get("color").toRenderColor(L).toArray01(),N=u.properties.get("high-color").toRenderColor(L).toArray01(),j=u.properties.get("space-color").toRenderColor(L).toArray01PremultipliedAlpha(),q=5e-4,Z=o.dc(u.properties.get("horizon-blend"),0,1,q,.25),ne=o.cx(s,m,w)&&Z===q?w.worldSize/(2*Math.PI*1.025)-1:w.globeRadius,ie=s.frameCounter/1e3%1,oe=o.a6.vec3.length(w.globeCenterInViewSpace),ae=Math.sqrt(Math.pow(oe,2)-Math.pow(ne,2)),ge=Math.acos(ae/oe),ye=pe=>{const we=w.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];pe&&we.push("ALPHA_PASS");const be=s.getOrCreateProgram("globeAtmosphere",{defines:we}),Fe=((Me,Qe,Re,Pe,Xe,ct,_t,lt,St,Ye,mt,ft)=>({u_frustum_tl:Me,u_frustum_tr:Qe,u_frustum_br:Re,u_frustum_bl:Pe,u_horizon:Xe,u_transition:ct,u_fadeout_range:_t,u_color:lt,u_high_color:St,u_space_color:Ye,u_temporal_offset:mt,u_horizon_angle:ft}))(w.frustumCorners.TL,w.frustumCorners.TR,w.frustumCorners.BR,w.frustumCorners.BL,w.frustumCorners.horizon,D,Z,z,N,j,ie,ge);s.uploadCommonUniforms(m,be);const Ee=this.atmosphereBuffer;Ee&&be.draw(s,_.TRIANGLES,C,wr.disabled,pe?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,mr.backCW,Fe,pe?"atmosphere_glow_alpha":"atmosphere_glow",Ee.vertexBuffer,Ee.indexBuffer,Ee.segments)};ye(!1),ye(!0)}drawStars(s,u){const m=o.ap(u.properties.get("star-intensity"),0,1);if(m===0)return;const _=s.context,w=_.gl,C=s.transform,D=s.getOrCreateProgram("stars"),L=o.a6.quat.identity([]);o.a6.quat.rotateX(L,L,-C._pitch),o.a6.quat.rotateZ(L,L,-C.angle),o.a6.quat.rotateX(L,L,o.bB(C._center.lat)),o.a6.quat.rotateY(L,L,-o.bB(C._center.lng));const z=o.a6.mat4.fromQuat(new Float32Array(16),L),N=o.a6.mat4.multiply([],C.starsProjMatrix,z),j=o.a6.mat3.fromMat4([],z),q=o.a6.mat3.invert([],j),Z=[0,1,0];o.a6.vec3.transformMat3(Z,Z,q),o.a6.vec3.scale(Z,Z,this.params.sizeMultiplier);const ne=[1,0,0];o.a6.vec3.transformMat3(ne,ne,q),o.a6.vec3.scale(ne,ne,this.params.sizeMultiplier);const ie=(oe=Z,ae=ne,ge=m,{u_matrix:Float32Array.from(N),u_up:oe,u_right:ae,u_intensity_multiplier:ge});var oe,ae,ge;s.uploadCommonUniforms(_,D),this.starsVx&&this.starsIdx&&D.draw(s,w.TRIANGLES,sr.disabled,wr.disabled,this.colorModeAlphaBlendedWriteRGB,mr.disabled,ie,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function mm(p,s){const u=[...p],m=s.cameraWorldSizeForFog/s.worldSize,_=o.a6.mat4.identity([]);return o.a6.mat4.scale(_,_,[m,m,1]),o.a6.mat4.multiply(u,_,u),o.a6.mat4.multiply(u,s.worldToFogMatrix,u),u}function gm(p,s,u,m,_){const w=u.material,C=m.context,{baseColorTexture:D,metallicRoughnessTexture:L}=w.pbrMetallicRoughness,{normalTexture:z,occlusionTexture:N,emissionTexture:j}=w;function q(Z,ne,ie){if(Z&&(p.push(ne),C.activeTexture.set(C.gl.TEXTURE0+ie),Z.gfxTexture)){const{minFilter:oe,magFilter:ae,wrapS:ge,wrapT:ye}=Z.sampler;Z.gfxTexture.bindExtraParam(oe,ae,ge,ye)}}q(D,"HAS_TEXTURE_u_baseColorTexture",Ro.BaseColor),q(L,"HAS_TEXTURE_u_metallicRoughnessTexture",Ro.MetallicRoughness),q(z,"HAS_TEXTURE_u_normalTexture",Ro.Normal),q(N,"HAS_TEXTURE_u_occlusionTexture",Ro.Occlusion),q(j,"HAS_TEXTURE_u_emissionTexture",Ro.Emission),_&&(_.texture||(_.texture=new o.df(m.context,_.image,[_.image.height,_.image.height,_.image.height],C.gl.RGBA8)),C.activeTexture.set(C.gl.TEXTURE0+Ro.LUT),_.texture&&_.texture.bind(C.gl.LINEAR,C.gl.CLAMP_TO_EDGE),p.push("APPLY_LUT_ON_GPU")),u.texcoordBuffer&&(p.push("HAS_ATTRIBUTE_a_uv_2f"),s.push(u.texcoordBuffer)),u.colorBuffer&&(p.push(u.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),s.push(u.colorBuffer)),u.normalBuffer&&(p.push("HAS_ATTRIBUTE_a_normal_3f"),s.push(u.normalBuffer)),u.pbrBuffer&&(p.push("HAS_ATTRIBUTE_a_pbr"),p.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),s.push(u.pbrBuffer)),w.alphaMode!=="OPAQUE"&&w.alphaMode!=="MASK"||p.push("UNPREMULT_TEXTURE_IN_SHADER"),w.defined||p.push("DIFFUSE_SHADED"),p.push("USE_STANDARD_DERIVATIVES")}function mf(p,s,u,m,_,w){const C=u.paint.get("model-opacity"),D=s.context,L=new sr(s.context.gl.LEQUAL,sr.ReadWrite,s.depthRangeFor3D),z=s.transform,N=p.mesh,j=N.material,q=j.pbrMetallicRoughness,Z=s.style.fog;let ne;ne=s.transform.projection.zAxisUnit==="pixels"?[...p.nodeModelMatrix]:o.a6.mat4.multiply([],m.zScaleMatrix,p.nodeModelMatrix),o.a6.mat4.multiply(ne,m.negCameraPosMatrix,ne);const ie=o.a6.mat4.invert([],ne);o.a6.mat4.transpose(ie,ie);const oe=u.paint.get("model-emissive-strength").constantOr(0),ae=Wt(new Float32Array(p.worldViewProjection),new Float32Array(ne),new Float32Array(ie),null,s,C,q.baseColorFactor.toRenderColor(null),j.emissiveFactor,q.metallicFactor,q.roughnessFactor,j,oe,u),ge={defines:[]},ye=[];gm(ge.defines,ye,N,s,u.lut);const pe=s.shadowRenderer;pe&&(pe.useNormalOffset=!1);let we=null;if(Z){const Ee=mm(p.nodeModelMatrix,s.transform);if(we=new Float32Array(Ee),z.projection.name!=="globe"){const Me=N.aabb.min,Qe=N.aabb.max,[Re,Pe]=Z.getOpacityForBounds(Ee,Me[0],Me[1],Qe[0],Qe[1]);ge.overrideFog=Re>=zt||Pe>=zt}}const be=lc(s,u.paint.get("model-cutoff-fade-range"));be.shouldRenderCutoff&&ge.defines.push("RENDER_CUTOFF");const Fe=s.getOrCreateProgram("model",ge);s.uploadCommonUniforms(D,Fe,null,we,be),s.renderPass!=="shadow"&&pe&&pe.setupShadowsFromMatrix(p.nodeModelMatrix,Fe),Fe.draw(s,D.gl.TRIANGLES,L,_,w,N.material.doubleSided?mr.disabled:mr.backCCW,ae,u.id,N.vertexBuffer,N.indexBuffer,N.segments,u.paint,s.transform.zoom,void 0,ye)}function gf(p,s,u,m,_,w,C){let D;D=p.projection.name==="globe"?o.dg(u,p):[...u],o.a6.mat4.multiply(D,D,s.matrix);const L=o.a6.mat4.multiply([],m,D);if(s.meshes)for(const z of s.meshes){if(z.material.alphaMode!=="BLEND"){C.push({mesh:z,depth:0,modelIndex:_,worldViewProjection:L,nodeModelMatrix:D});continue}const N=o.a6.vec3.transformMat4([],z.centroid,L);N[2]>0&&w.push({mesh:z,depth:N[2],modelIndex:_,worldViewProjection:L,nodeModelMatrix:D})}if(s.children)for(const z of s.children)gf(p,z,u,m,_,w,C)}function yh(p,s,u,m){const _=u.shadowRenderer;if(!_)return;const w=_.getShadowPassDepthMode(),C=_.getShadowPassColorMode(),D=_.calculateShadowPassMatrixFromMatrix(s),L=cv(D);u.getOrCreateProgram("modelDepth",{defines:u._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(u,u.context.gl.TRIANGLES,w,wr.disabled,C,mr.backCCW,L,m.id,p.vertexBuffer,p.indexBuffer,p.segments,m.paint,u.transform.zoom,void 0,void 0)}function ob(p,s,u){const m=s.updateZoomBasedPaintProperties(),_=function(w,C,D){let L,z,N,j=w.terrain?w.terrain.exaggeration():0;if(w.terrain&&j>0){const q=w.terrain,Z=q.findDEMTileFor(D);Z&&Z.dem?L=o.di.create(q,D,Z):j=0}if(j===0&&(C.terrainElevationMin=0,C.terrainElevationMax=0),j===C.validForExaggeration&&(j===0||L&&L._demTile&&L._demTile.tileID===C.validForDEMTile.id&&L._dem._timestamp===C.validForDEMTile.timestamp))return!1;for(const q in C.instancesPerModel){const Z=C.instancesPerModel[q];for(let ne=0;ne<Z.instancedDataArray.length;++ne){const ie=(L?j*L.getElevationAt(0|Z.instancedDataArray.float32[16*ne],0|Z.instancedDataArray.float32[16*ne+1],!0,!0):0)+Z.instancesEvaluatedElevation[ne];Z.instancedDataArray.float32[16*ne+6]=ie,z=z?Math.min(C.terrainElevationMin,ie):ie,N=N?Math.max(C.terrainElevationMax,ie):ie}}return C.terrainElevationMin=z||0,C.terrainElevationMax=N||0,C.validForExaggeration=j,C.validForDEMTile=L&&L._demTile?{id:L._demTile.tileID,timestamp:L._dem._timestamp}:{id:void 0,timestamp:0},!0}(p,s,u);(m||_)&&(s.uploaded=!1,s.upload(p.context))}const Gs={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new o.c9([0,0,0],[o.ab,o.ab,0])};function DT(p,s){const u=1<<p.canonical.z,m=s.getFreeCameraOptions().position,_=s.elevation,w=p.canonical.x/u,C=(p.canonical.x+1)/u,D=p.canonical.y/u,L=(p.canonical.y+1)/u;let z=s._centerAltitude;if(_){const Z=_.getMinMaxForTile(p);Z&&Z.max>z&&(z=Z.max)}const N=o.ap(m.x,w,C)-m.x,j=o.ap(m.y,D,L)-m.y,q=o.bD(z,s.center.lat)-m.z;return s._zoomFromMercatorZ(Math.sqrt(N*N+j*j+q*q))}function Zo(p,s,u,m,_,w,C){const D=p.context,L=p.renderPass==="shadow",z=p.shadowRenderer,N=L&&z?z.getShadowPassDepthMode():new sr(D.gl.LEQUAL,sr.ReadWrite,p.depthRangeFor3D),j=p.isTileAffectedByFog(w);if(u.meshes)for(const q of u.meshes){const Z=["MODEL_POSITION_ON_GPU"],ne=[];let ie,oe,ae;m.instancedDataArray.length>20&&Z.push("INSTANCED_ARRAYS");const ge=lc(p,s.paint.get("model-cutoff-fade-range"));if(ge.shouldRenderCutoff&&Z.push("RENDER_CUTOFF"),L&&z)ie=p.getOrCreateProgram("modelDepth",{defines:Z}),oe=cv(C.shadowTileMatrix,C.shadowTileMatrix,Float32Array.from(u.matrix)),ae=z.getShadowPassColorMode();else{gm(Z,ne,q,p,s.lut),ie=p.getOrCreateProgram("model",{defines:Z,overrideFog:j});const pe=q.material,we=pe.pbrMetallicRoughness,be=s.paint.get("model-opacity"),Fe=s.paint.get("model-emissive-strength").constantOr(0);oe=Wt(w.expandedProjMatrix,Float32Array.from(u.matrix),new Float32Array(16),null,p,be,we.baseColorFactor.toRenderColor(null),pe.emissiveFactor,we.metallicFactor,we.roughnessFactor,pe,Fe,s,_),z&&(C.shadowUniformsInitialized?ie.setShadowUniformValues(D,z.getShadowUniformValues()):(z.setupShadows(w.toUnwrapped(),ie,"model-tile",w.overscaledZ),C.shadowUniformsInitialized=!0)),ae=ge.shouldRenderCutoff||be<1||pe.alphaMode!=="OPAQUE"?Nr.alphaBlended:Nr.unblended}p.uploadCommonUniforms(D,ie,w.toUnwrapped(),null,ge);const ye=q.material.doubleSided?mr.disabled:mr.backCCW;if(m.instancedDataArray.length>20)ne.push(m.instancedDataBuffer),ie.draw(p,D.gl.TRIANGLES,N,wr.disabled,ae,ye,oe,s.id,q.vertexBuffer,q.indexBuffer,q.segments,s.paint,p.transform.zoom,void 0,ne,m.instancedDataArray.length);else{const pe=L?"u_instance":"u_normal_matrix";for(let we=0;we<m.instancedDataArray.length;++we)oe[pe]=new Float32Array(m.instancedDataArray.arrayBuffer,64*we,16),ie.draw(p,D.gl.TRIANGLES,N,wr.disabled,ae,ye,oe,s.id,q.vertexBuffer,q.indexBuffer,q.segments,s.paint,p.transform.zoom,void 0,ne)}}if(u.children)for(const q of u.children)Zo(p,s,q,m,_,w,C)}const kT=[1,-1,1];function vf(p,s,u,m){if(!u.modelManager)return!0;const _=u.modelManager;if(!u.shadowRenderer)return!0;const w=u.shadowRenderer,C=s.aabb;let D=!0,L=p.maxHeight;if(L===0){let N=0;for(const j in p.instancesPerModel){const q=_.getModel(j,m);q?N=Math.max(N,Math.max(Math.max(q.aabb.max[0],q.aabb.max[1]),q.aabb.max[2])):D=!1}L=p.maxScale*N*1.41+p.maxVerticalOffset,D&&(p.maxHeight=L)}C.max[2]=L,C.min[2]+=p.terrainElevationMin,C.max[2]+=p.terrainElevationMax,o.a6.vec3.transformMat4(C.min,C.min,s.tileMatrix),o.a6.vec3.transformMat4(C.max,C.max,s.tileMatrix);const z=C.intersects(w.getCurrentCascadeFrustum());return u.currentShadowCascade===0&&(p.isInsideFirstShadowMapFrustum=z===2),z===0}function Zn(p,s){const u=p.uniformValues.u_cutoff_params[0],m=p.uniformValues.u_cutoff_params[1],_=p.uniformValues.u_cutoff_params[2],w=p.uniformValues.u_cutoff_params[3];return m===u||w===_?1:o.ap(((s-u)/(m-u)-_)/(w-_),0,1)}function hn(p,s,u,m){if(s.pitch<20)return 1;const _=s.getWorldToCameraMatrix();o.a6.mat4.multiply(_,_,p);const w=o.a6.vec4.fromValues(u.min[0],u.min[1],u.min[2],1);let C=o.a6.vec4.transformMat4(o.a6.vec4.create(),w,_),D=C,L=C;w[1]=u.max[1],C=o.a6.vec4.transformMat4(o.a6.vec4.create(),w,_),D=C[1]<D[1]?C:D,L=C[1]>L[1]?C:L,w[0]=u.max[0],C=o.a6.vec4.transformMat4(o.a6.vec4.create(),w,_),D=C[1]<D[1]?C:D,L=C[1]>L[1]?C:L,w[1]=u.min[1],C=o.a6.vec4.transformMat4(o.a6.vec4.create(),w,_),D=C[1]<D[1]?C:D,L=C[1]>L[1]?C:L;const z=o.ap(m[0],0,1),N=100*s.pixelsPerMeter*o.ap(m[1],0,1),j=o.ap(m[2],0,1),q=o.a6.vec4.lerp(o.a6.vec4.create(),D,L,z),Z=Math.tan(.5*s.fovX),ne=-q[2]*Z;if(N===0)return q[1]<-Math.abs(ne)?j:1;const ie=(-Math.abs(ne)-q[1])/N,oe=(ge,ye,pe)=>(1-pe)*ge+pe*ye,ae=o.ap(oe(1,j,ie),j,1);return oe(1,ae,o.ap((s.pitch-20)/20,0,1))}class ab{}class ru{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(s,u,m){{const j=this._storage.get(u.id);if(j)return j.lastUsedFrameIdx=s,j.buf}const _=m.gl,w=_.getBufferParameter(_.ELEMENT_ARRAY_BUFFER,_.BUFFER_SIZE),C=new ArrayBuffer(w),D=new Int16Array(C);_.getBufferSubData(_.ELEMENT_ARRAY_BUFFER,0,new Int16Array(C));const L=new o.dk;for(let j=0;j<w/2;j+=3){const q=D[j],Z=D[j+1],ne=D[j+2];L.emplaceBack(q,Z),L.emplaceBack(Z,ne),L.emplaceBack(ne,q)}const z=m.bindVertexArrayOES.current,N=new ab;return N.buf=new Da(m,L),N.lastUsedFrameIdx=s,this._storage.set(u.id,N),m.bindVertexArrayOES.set(z),N.buf}update(s){for(const[u,m]of this._storage)s-m.lastUsedFrameIdx>30&&(m.buf.destroy(),this._storage.delete(u))}destroy(){for(const[s,u]of this._storage)u.buf.destroy(),this._storage.delete(s)}}class vm{constructor(s){this.occluderSize=30,this.depthOffset=-1e-4,s.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),s.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}const nu={symbol:function(p,s,u,m,_){if(p.renderPass!=="translucent")return;const w=wr.disabled,C=p.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(z,N,j,q,Z,ne,ie){const oe=N.transform,ae=Z==="map",ge=ne==="map";for(const ye of z){const pe=q.getTile(ye),we=pe.getBucket(j);if(!we||!we.text||!we.text.segments.get().length)continue;const be=o.bj(we.textSizeData,oe.zoom),Fe=gs(ye,we.getProjection(),oe),Ee=oe.calculatePixelsToTileUnitsMatrix(pe),Me=Xr(Fe,pe.tileID.canonical,ge,ae,oe,we.getProjection(),Ee),Qe=we.hasIconTextFit()&&we.hasIconData();if(be){const Re=Math.pow(2,oe.zoom-pe.tileID.overscaledZ);FT(we,ae,ge,ie,o.cS,oe,Me,ye,Re,be,Qe)}}}(m,p,u,s,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),_);const D=u.paint.get("icon-opacity").constantOr(1)!==0,L=u.paint.get("text-opacity").constantOr(1)!==0;u.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(D||L)?df(p,s,u,m,w,C):(D&&df(p,s,u,m,w,C,{onlyIcons:!0}),L&&df(p,s,u,m,w,C,{onlyText:!0})),s.map.showCollisionBoxes&&(Am(p,s,u,m,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),Am(p,s,u,m,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))},circle:function(p,s,u,m){if(p.renderPass!=="translucent")return;const _=u.paint.get("circle-opacity"),w=u.paint.get("circle-stroke-width"),C=u.paint.get("circle-stroke-opacity"),D=u.layout.get("circle-sort-key").constantOr(1)!==void 0,L=u.paint.get("circle-emissive-strength");if(_.constantOr(1)===0&&(w.constantOr(1)===0||C.constantOr(1)===0))return;const z=p.context,N=z.gl,j=p.transform,q=p.depthModeForSublayer(0,sr.ReadOnly),Z=wr.disabled,ne=p.colorModeForDrapableLayerRenderPass(L),ie=j.projection.name==="globe",oe=[o.am(j.center.lng),o.at(j.center.lat)],ae=[];for(let ye=0;ye<m.length;ye++){const pe=m[ye],we=s.getTile(pe),be=we.getBucket(u);if(!be||be.projection.name!==j.projection.name)continue;const Fe=be.programConfigurations.get(u.id),Ee=o.cT(u),Me=p.isTileAffectedByFog(pe);ie&&Ee.push("PROJECTION_GLOBE_VIEW"),Ee.push("DEPTH_D24"),p.terrain&&j.depthOcclusionForSymbolsAndCircles&&Ee.push("DEPTH_OCCLUSION");const Qe=p.getOrCreateProgram("circle",{config:Fe,defines:Ee,overrideFog:Me}),Re=be.layoutVertexBuffer,Pe=be.globeExtVertexBuffer,Xe=be.indexBuffer,ct=j.projection.createInversionMatrix(j,pe.canonical),_t={programConfiguration:Fe,program:Qe,layoutVertexBuffer:Re,globeExtVertexBuffer:Pe,indexBuffer:Xe,uniformValues:o.cU(p,pe,we,ct,oe,u),tile:we};if(D){const lt=be.segments.get();for(const St of lt)ae.push({segments:new o.b1([St]),sortKey:St.sortKey,state:_t})}else ae.push({segments:be.segments,sortKey:0,state:_t})}D&&ae.sort((ye,pe)=>ye.sortKey-pe.sortKey);const ge={useDepthForOcclusion:j.depthOcclusionForSymbolsAndCircles};for(const ye of ae){const{programConfiguration:pe,program:we,layoutVertexBuffer:be,globeExtVertexBuffer:Fe,indexBuffer:Ee,uniformValues:Me,tile:Qe}=ye.state,Re=ye.segments;p.terrain&&p.terrain.setupElevationDraw(Qe,we,ge),p.uploadCommonUniforms(z,we,Qe.tileID.toUnwrapped()),we.draw(p,N.TRIANGLES,q,Z,ne,mr.disabled,Me,u.id,be,Ee,Re,u.paint,j.zoom,pe,[Fe])}},heatmap:function(p,s,u,m){if(u.paint.get("heatmap-opacity")!==0)if(p.renderPass==="offscreen"){const _=p.context,w=_.gl,C=wr.disabled,D=new Nr([w.ONE,w.ONE,w.ONE,w.ONE],o.bz.transparent,[!0,!0,!0,!0]);(function(Z,ne,ie,oe){const ae=Z.gl,ge=ne.width*oe,ye=ne.height*oe;Z.activeTexture.set(ae.TEXTURE1),Z.viewport.set([0,0,ge,ye]);let pe=ie.heatmapFbo;if(!pe||pe&&(pe.width!==ge||pe.height!==ye)){pe&&pe.destroy();const we=ae.createTexture();ae.bindTexture(ae.TEXTURE_2D,we),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_S,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_T,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MIN_FILTER,ae.LINEAR),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MAG_FILTER,ae.LINEAR),pe=ie.heatmapFbo=Z.createFramebuffer(ge,ye,!0,null),function(be,Fe,Ee,Me,Qe,Re){const Pe=be.gl;Pe.texImage2D(Pe.TEXTURE_2D,0,be.extRenderToTextureHalfFloat?Pe.RGBA16F:Pe.RGBA,Qe,Re,0,Pe.RGBA,be.extRenderToTextureHalfFloat?Pe.HALF_FLOAT:Pe.UNSIGNED_BYTE,null),Me.colorAttachment.set(Ee)}(Z,0,we,pe,ge,ye)}else ae.bindTexture(ae.TEXTURE_2D,pe.colorAttachment.get()),Z.bindFramebuffer.set(pe.framebuffer)})(_,p,u,p.transform.projection.name==="globe"?.5:.25),_.clear({color:o.bz.transparent});const L=p.transform,z=L.projection.name==="globe",N=z?["PROJECTION_GLOBE_VIEW"]:[],j=z?mr.frontCCW:mr.disabled,q=[o.am(L.center.lng),o.at(L.center.lat)];for(let Z=0;Z<m.length;Z++){const ne=m[Z];if(s.hasRenderableParent(ne))continue;const ie=s.getTile(ne),oe=ie.getBucket(u);if(!oe||oe.projection.name!==L.projection.name)continue;const ae=p.isTileAffectedByFog(ne),ge=oe.programConfigurations.get(u.id),ye=p.getOrCreateProgram("heatmap",{config:ge,defines:N,overrideFog:ae}),{zoom:pe}=p.transform;p.terrain&&p.terrain.setupElevationDraw(ie,ye),p.uploadCommonUniforms(_,ye,ne.toUnwrapped());const we=L.projection.createInversionMatrix(L,ne.canonical);ye.draw(p,w.TRIANGLES,sr.disabled,C,D,j,ST(p,ne,ie,we,q,pe,u.paint.get("heatmap-intensity")),u.id,oe.layoutVertexBuffer,oe.indexBuffer,oe.segments,u.paint,p.transform.zoom,ge,z?[oe.globeExtVertexBuffer]:null)}_.viewport.set([0,0,p.width,p.height])}else p.renderPass==="translucent"&&(p.context.setColorMode(p.colorModeForRenderPass()),function(_,w){const C=_.context,D=C.gl,L=w.heatmapFbo;if(!L)return;C.activeTexture.set(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,L.colorAttachment.get()),C.activeTexture.set(D.TEXTURE1);let z=w.colorRampTexture;z||(z=w.colorRampTexture=new o.T(C,w.colorRamp,D.RGBA8)),z.bind(D.LINEAR,D.CLAMP_TO_EDGE),_.getOrCreateProgram("heatmapTexture").draw(_,D.TRIANGLES,sr.disabled,wr.disabled,_.colorModeForRenderPass(),mr.disabled,((N,j,q,Z)=>({u_image:0,u_color_ramp:1,u_opacity:j.paint.get("heatmap-opacity")}))(0,w),w.id,_.viewportBuffer,_.quadTriangleIndexBuffer,_.viewportSegments,w.paint,_.transform.zoom)}(p,u))},line:function(p,s,u,m){if(p.renderPass!=="translucent")return;const _=u.paint.get("line-opacity"),w=u.paint.get("line-width");if(_.constantOr(1)===0||w.constantOr(1)===0)return;const C=u.paint.get("line-emissive-strength"),D=u.paint.get("line-occlusion-opacity"),L=p.context,z=L.gl,N=u.layout.get("line-z-offset"),j=!N.isConstant()||!!N.constantOr(0),q=j?new sr(p.depthOcclusion?z.GREATER:z.LEQUAL,sr.ReadOnly,p.depthRangeFor3D):p.depthModeForSublayer(0,sr.ReadOnly),Z=p.colorModeForDrapableLayerRenderPass(C),ne=p.terrain&&p.terrain.renderingToTexture,ie=ne?1:o.q.devicePixelRatio,oe=u.paint.get("line-dasharray"),ae=oe.constantOr(1),ge=u.layout.get("line-cap"),ye=oe.constantOr(null),pe=ge.constantOr(null),we=u.paint.get("line-pattern"),be=we.constantOr(1),Fe=we.constantOr(null),Ee=u.paint.get("line-opacity").constantOr(1);let Me=!be&&Ee!==1||p.depthOcclusion&&D>0&&D<1;const Qe=u.paint.get("line-gradient"),Re=be?"linePattern":"line",Pe=o.cV(u);let Xe;if(ne&&p.terrain&&p.terrain.clipOrMaskOverlapStencilType()&&(Me=!1),D!==0&&p.depthOcclusion){const _t=u.paint._values["line-opacity"];_t&&_t.value&&_t.value.kind==="constant"?Xe=_t.value:o.w(`Occlusion opacity for layer ${u.id} is supported only when line-opacity isn't data-driven.`)}if(j&&(p.forceTerrainMode=!0),!j&&D!==0&&p.terrain&&!ne)return void o.w(`Occlusion opacity for layer ${u.id} is supported on terrain only if the layer has non-zero line-z-offset.`);const ct=Me&&j?p.stencilModeFor3D():wr.disabled;for(const _t of m){const lt=s.getTile(_t);if(be&&!lt.patternsLoaded())continue;const St=lt.getBucket(u);if(!St)continue;p.prepareDrawTile();const Ye=St.programConfigurations.get(u.id),mt=p.isTileAffectedByFog(_t),ft=p.getOrCreateProgram(Re,{config:Ye,defines:j?[...Pe,"ELEVATED"]:Pe,overrideFog:mt});if(Fe&&lt.imageAtlas){const Lt=lt.imageAtlas.patternPositions[Fe.toString()];Lt&&Ye.setConstantPatternPositions(Lt)}if(!be&&ye&&pe&&lt.lineAtlas){const Lt=lt.lineAtlas.getDash(ye,pe);Lt&&Ye.setConstantPatternPositions(Lt)}let[Tt,Mt]=u.paint.get("line-trim-offset");(pe==="round"||pe==="square")&&Tt!==Mt&&(Tt===0&&(Tt-=1),Mt===1&&(Mt+=1));const yt=ne?_t.projMatrix:null,bt=be?o.cW(p,lt,u,yt,ie,[Tt,Mt]):o.cX(p,lt,u,yt,St.lineClipsArray.length,ie,[Tt,Mt]);if(Qe){const Lt=St.gradients[u.id];let Ht=Lt.texture;if(u.gradientVersion!==Lt.version){let ur=256;if(u.stepInterpolant){const Zt=s.getSource().maxzoom,lr=_t.canonical.z===Zt?Math.ceil(1<<p.transform.maxZoom-_t.canonical.z):1;ur=o.ap(o.cY(St.maxLineLength/o.ab*1024*lr),256,L.maxTextureSize)}Lt.gradient=o.cZ({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:ur,image:Lt.gradient||void 0,clips:St.lineClipsArray}),Lt.texture?Lt.texture.update(Lt.gradient):Lt.texture=new o.T(L,Lt.gradient,z.RGBA8),Lt.version=u.gradientVersion,Ht=Lt.texture}L.activeTexture.set(z.TEXTURE1),Ht.bind(u.stepInterpolant?z.NEAREST:z.LINEAR,z.CLAMP_TO_EDGE)}ae&&(L.activeTexture.set(z.TEXTURE0),lt.lineAtlasTexture&&lt.lineAtlasTexture.bind(z.LINEAR,z.REPEAT),Ye.updatePaintBuffers()),be&&(L.activeTexture.set(z.TEXTURE0),lt.imageAtlasTexture&&lt.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),Ye.updatePaintBuffers()),j&&p.terrain.setupElevationDraw(lt,ft),p.uploadCommonUniforms(L,ft,_t.toUnwrapped());const ir=Lt=>{Xe!=null&&(Xe.value=Ee*D),ft.draw(p,z.TRIANGLES,q,Lt,Z,mr.disabled,bt,u.id,St.layoutVertexBuffer,St.indexBuffer,St.segments,u.paint,p.transform.zoom,Ye,[St.layoutVertexBuffer2,St.patternVertexBuffer,St.zOffsetVertexBuffer]),Xe!=null&&(Xe.value=Ee)};if(Me&&!j){const Lt=p.stencilModeForClipping(_t).ref;Lt===0&&ne&&L.clear({stencil:0});const Ht={func:z.EQUAL,mask:255};bt.u_alpha_discard_threshold=.8,ir(new wr(Ht,Lt,255,z.KEEP,z.KEEP,z.INVERT)),bt.u_alpha_discard_threshold=0,ir(new wr(Ht,Lt,255,z.KEEP,z.KEEP,z.KEEP))}else Me&&j&&(bt.u_alpha_discard_threshold=.001),ir(j?ct:p.stencilModeForClipping(_t))}Me&&(p.resetStencilClippingMasks(),ne&&L.clear({stencil:0})),D===0||p.depthOcclusion||ne||p.layersWithOcclusionOpacity.push(p.currentLayer),j&&(p.forceTerrainMode=!1)},fill:function(p,s,u,m){const _=u.paint.get("fill-color"),w=u.paint.get("fill-opacity"),C=u.is3D(),D=new sr(p.context.gl.LEQUAL,sr.ReadWrite,p.depthRangeFor3D);if(w.constantOr(1)===0)return;const L=u.paint.get("fill-emissive-strength"),z=p.colorModeForDrapableLayerRenderPass(L),N=u.paint.get("fill-pattern"),j=p.opaquePassEnabledForLayer()&&!N.constantOr(1)&&_.constantOr(o.bz.transparent).a===1&&w.constantOr(0)===1?"opaque":"translucent";if(p.renderPass===j){const q=C?D:p.depthModeForSublayer(1,p.renderPass==="opaque"?sr.ReadWrite:sr.ReadOnly);hm(p,s,u,m,q,z,!1)}if(!C&&p.renderPass==="translucent"&&u.paint.get("fill-antialias")){const q=C?D:p.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,sr.ReadOnly);hm(p,s,u,m,q,z,!0)}},"fill-extrusion":function(p,s,u,m){const _=u.paint.get("fill-extrusion-opacity"),w=p.context,C=w.gl,D=p.terrain,L=D&&D.renderingToTexture;if(_===0)return;const z=p.conflationActive&&p.style.isLayerClipped(u,s.getSource()),N=p.style.order.indexOf(u.fqid);if(z&&function(j,q,Z,ne,ie){for(const oe of ne){const ae=q.getTile(oe).getBucket(Z);ae&&(ae.updateReplacement(oe,j.replacementSource,ie),ae.uploadCentroid(j.context))}}(p,s,u,m,N),D||z)for(const j of m){const q=s.getTile(j).getBucket(u);q&&tu(p.context,s,j,q,u,D,z)}if(p.renderPass==="shadow"&&p.shadowRenderer){const j=p.shadowRenderer;if(D&&_<.65&&u._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof o.a4)return;const q=j.getShadowPassDepthMode(),Z=j.getShadowPassColorMode();ph(p,s,u,m,q,wr.disabled,Z,z)}else if(p.renderPass==="translucent"){const j=!u.paint.get("fill-extrusion-pattern").constantOr(1),q=u.paint.get("fill-extrusion-color").constantOr(o.bz.white);if(!L&&q.a!==0){const Z=new sr(p.context.gl.LEQUAL,sr.ReadWrite,p.depthRangeFor3D);_===1&&j?ph(p,s,u,m,Z,wr.disabled,Nr.unblended,z):(ph(p,s,u,m,Z,wr.disabled,Nr.disabled,z),ph(p,s,u,m,Z,p.stencilModeFor3D(),p.colorModeForRenderPass(),z),p.resetStencilClippingMasks())}if(p.style.enable3dLights()&&j&&(!D&&p.transform.projection.name!=="globe"||L)){const Z=u.paint.get("fill-extrusion-opacity"),ne=u.paint.get("fill-extrusion-ambient-occlusion-intensity"),ie=u.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),oe=u.paint.get("fill-extrusion-flood-light-intensity"),ae=u.paint.get("fill-extrusion-flood-light-color").toRenderColor(u.lut).toArray01().slice(0,3),ge=ne>0&&ie>0,ye=oe>0,pe=(be,Fe,Ee)=>(1-Ee)*be+Ee*Fe,we=be=>{const Fe=p.depthModeForSublayer(1,sr.ReadOnly,C.LEQUAL,!0),Ee=u.paint.get(be?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Me=pe(.1,3,Ee),Qe=p._showOverdrawInspector;if(!Qe){const Re=new wr({func:C.ALWAYS,mask:255},255,255,C.KEEP,C.KEEP,C.REPLACE),Pe=new Nr([C.ONE,C.ONE,C.ONE,C.ONE],o.bz.transparent,[!1,!1,!1,!0],C.MIN);yo(p,s,u,m,Fe,Re,Pe,mr.disabled,be,"sdf",Z,ne,ie,oe,ae,Me,z,!1)}{const Re=Qe?wr.disabled:new wr({func:C.EQUAL,mask:255},255,255,C.KEEP,C.DECR,C.DECR),Pe=Qe?p.colorModeForRenderPass():new Nr([C.ONE_MINUS_DST_ALPHA,C.DST_ALPHA,C.ONE,C.ONE],o.bz.transparent,[!0,!0,!0,!0]);yo(p,s,u,m,Fe,Re,Pe,mr.disabled,be,"color",Z,ne,ie,oe,ae,Me,z,!1)}};if(L){const be=(Fe,Ee,Me)=>{const Qe=p.depthModeForSublayer(1,sr.ReadOnly,C.LEQUAL,!1),Re=u.paint.get(Fe?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Pe=pe(.1,3,Re);{const Xe=new Nr([C.ONE,C.ONE,C.ONE,C.ONE],o.bz.transparent,[!1,!1,!1,!0]);yo(p,s,u,m,Qe,wr.disabled,Xe,mr.disabled,Fe,"clear",Z,ne,ie,oe,ae,Pe,z,Ee)}{const Xe=new wr({func:C.ALWAYS,mask:255},255,255,C.KEEP,C.KEEP,C.REPLACE),ct=new Nr([C.ONE,C.ONE,C.ONE,C.ONE],o.bz.transparent,[!1,!1,!1,!0],C.MIN);yo(p,s,u,m,Qe,Xe,ct,mr.disabled,Fe,"sdf",Z,ne,ie,oe,ae,Pe,z,Ee)}{const Xe=Fe?C.ZERO:C.ONE_MINUS_DST_ALPHA,ct=new wr({func:C.EQUAL,mask:255},255,255,C.KEEP,C.DECR,C.DECR),_t=new Nr([Xe,C.DST_ALPHA,C.ONE_MINUS_DST_ALPHA,C.ZERO],o.bz.transparent,[!0,!0,!0,!0]);yo(p,s,u,m,Qe,ct,_t,mr.disabled,Fe,"color",Z,ne,ie,oe,ae,Pe,z,Ee)}{const Xe=new Nr([C.ONE,C.ONE,C.ONE,Fe?C.ZERO:C.ONE],o.bz.transparent,[!1,!1,!1,!0],Fe?C.FUNC_ADD:C.MAX);yo(p,s,u,m,Qe,wr.disabled,Xe,mr.disabled,Fe,"clear",Z,ne,ie,oe,ae,Pe,z,Ee,Me)}};if(ge||ye){let Fe;if(p.prepareDrawTile(),D){const Ee=D.drapeBufferSize[0],Me=D.drapeBufferSize[1];Fe=D.framebufferCopyTexture,Fe&&(!Fe||Fe.size[0]===Ee&&Fe.size[1]===Me)||(Fe&&Fe.destroy(),Fe=D.framebufferCopyTexture=new o.T(w,new o.r({width:Ee,height:Me}),C.RGBA8)),Fe.bind(C.LINEAR,C.CLAMP_TO_EDGE),C.copyTexImage2D(C.TEXTURE_2D,0,C.RGBA,0,0,Ee,Me,0)}ge&&be(!0,!1,Fe),ye&&be(!1,!0,Fe)}}else ge&&we(!0),ye&&we(!1),(ge||ye)&&p.resetStencilClippingMasks()}}},hillshade:function(p,s,u,m){if(p.renderPass!=="offscreen"&&p.renderPass!=="translucent"||p.style.disableElevatedTerrain)return;const _=p.context,w=p.terrain&&p.terrain.renderingToTexture,[C,D]=p.renderPass!=="translucent"||w?[{},m]:p.stencilConfigForOverlap(m);for(const L of D){const z=s.getTile(L);if(z.needsHillshadePrepare&&p.renderPass==="offscreen")nf(p,z,u);else if(p.renderPass==="translucent"){const N=p.depthModeForSublayer(0,sr.ReadOnly),j=u.paint.get("hillshade-emissive-strength"),q=p.colorModeForDrapableLayerRenderPass(j),Z=w&&p.terrain?p.terrain.stencilModeForRTTOverlap(L):C[L.overscaledZ];qp(p,L,z,u,N,Z,q)}}_.viewport.set([0,0,p.width,p.height]),p.resetStencilClippingMasks()},raster:function(p,s,u,m,_,w){if(p.renderPass!=="translucent"||u.paint.get("raster-opacity")===0)return;const C=p.transform.projection.name==="globe",D=u.paint.get("raster-elevation")!==0,L=D&&C;if(p.renderElevatedRasterBackface&&!L)return;const z=p.context,N=z.gl,j=s.getSource(),q=function(be,Fe,Ee,Me){const Qe=Fe.paint.get("raster-color"),Re=be.type==="raster-array",Pe=[],Xe=Fe.paint.get("raster-resampling"),ct=Fe.paint.get("raster-color-mix");let _t=Fe.paint.get("raster-color-range");const lt=[ct[0],ct[1],ct[2],0],St=ct[3];let Ye=Xe==="nearest"?Me.NEAREST:Me.LINEAR;if(Re&&(Pe.push("RASTER_ARRAY"),Qe||Pe.push("RASTER_COLOR"),Xe==="linear"&&Pe.push("RASTER_ARRAY_LINEAR"),Ye=Me.NEAREST,!_t&&be.rasterLayers)){const mt=be.rasterLayers.find(({id:ft})=>ft===Fe.sourceLayer);mt&&mt.fields&&mt.fields.range&&(_t=mt.fields.range)}if(_t=_t||[0,1],Qe){Pe.push("RASTER_COLOR"),Ee.activeTexture.set(Me.TEXTURE2),Fe.updateColorRamp(_t);let mt=Fe.colorRampTexture;mt||(mt=Fe.colorRampTexture=new o.T(Ee,Fe.colorRamp,Me.RGBA8)),mt.bind(Me.LINEAR,Me.CLAMP_TO_EDGE)}return{mix:lt,range:_t,offset:St,defines:Pe,resampling:Ye}}(j,u,z,N);if(j instanceof o.aD&&!m.length&&!C)return;const Z=u.paint.get("raster-emissive-strength"),ne=p.colorModeForDrapableLayerRenderPass(Z),ie=p.terrain&&p.terrain.renderingToTexture,oe=!p.options.moving,ae=u.paint.get("raster-resampling")==="nearest"?N.NEAREST:N.LINEAR;if(j instanceof o.aD&&!m.length&&(j.onNorthPole||j.onSouthPole)){const be=D?p.stencilModeFor3D():wr.disabled;return void ka(!!j.onNorthPole,null,p,s,u,Z,q,mr.disabled,be)}if(!m.length)return;const[ge,ye]=j instanceof o.aD||ie?[{},m]:p.stencilConfigForOverlap(m),pe=ye[ye.length-1].overscaledZ;L&&q.defines.push("PROJECTION_GLOBE_VIEW"),D&&q.defines.push("RENDER_CUTOFF");const we=(be,Fe,Ee)=>{for(const Me of be){const Qe=Me.toUnwrapped(),Re=s.getTile(Me);if(ie&&(!Re||!Re.hasData()))continue;z.activeTexture.set(N.TEXTURE0);const Pe=dm(Re,j,u,q);if(!Pe||!Pe.texture)continue;const{texture:Xe,mix:ct,offset:_t,tileSize:lt,buffer:St}=Pe;let Ye,mt;ie?(Ye=sr.disabled,mt=Me.projMatrix):D?(Ye=new sr(N.LEQUAL,sr.ReadWrite,p.depthRangeFor3D),mt=C?Float32Array.from(p.transform.expandedFarZProjMatrix):p.transform.calculateProjMatrix(Qe,oe)):(Ye=p.depthModeForSublayer(Me.overscaledZ-pe,u.paint.get("raster-opacity")===1?sr.ReadWrite:sr.ReadOnly,N.LESS),mt=p.transform.calculateProjMatrix(Qe,oe));const ft=p.terrain&&ie?p.terrain.stencilModeForRTTOverlap(Me):ge[Me.overscaledZ],Tt=w?0:u.paint.get("raster-fade-duration");Re.registerFadeDuration(Tt);const Mt=s.findLoadedParent(Me,0),yt=tm(Re,Mt,s,p.transform,Tt);let bt,ir;p.terrain&&p.terrain.prepareDrawTile(),z.activeTexture.set(N.TEXTURE0),Xe.bind(ae,N.CLAMP_TO_EDGE),z.activeTexture.set(N.TEXTURE1),Mt?(Mt.texture&&Mt.texture.bind(ae,N.CLAMP_TO_EDGE),bt=Math.pow(2,Mt.tileID.overscaledZ-Re.tileID.overscaledZ),ir=[Re.tileID.canonical.x*bt%1,Re.tileID.canonical.y*bt%1]):Xe.bind(ae,N.CLAMP_TO_EDGE),Xe.useMipmap&&z.extTextureFilterAnisotropic&&p.transform.pitch>20&&N.texParameterf(N.TEXTURE_2D,z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,z.extTextureFilterAnisotropicMax);const Lt=p.transform;let Ht;const ur=D?xi(Lt):[0,0,0,0];let Zt,lr,Dr,Ir,Cn,In=0;if(L&&j instanceof o.aD&&j.coordinates.length>3)Zt=Float32Array.from(o.b5(o.cC(new o.bP(0,0,0)))),lr=Float32Array.from(Lt.globeMatrix),Dr=Float32Array.from(o.cy(Lt)),Ir=[o.am(Lt.center.lng),o.at(Lt.center.lat)],Ht=j.elevatedGlobePerspectiveTransform,Cn=j.elevatedGlobeGridMatrix||new Float32Array(9);else if(L){const Vr=o.cz(Me.canonical);In=o.cA(Vr.getCenter().lat),Zt=Float32Array.from(o.b5(o.cC(Me.canonical))),lr=Float32Array.from(Lt.globeMatrix),Dr=Float32Array.from(o.cy(Lt)),Ir=[o.am(Lt.center.lng),o.at(Lt.center.lat)],Ht=[0,0],Cn=Float32Array.from(o.cB(Me.canonical,Vr,In,Lt.worldSize/Lt._pixelsPerMercatorPixel))}else Ht=j instanceof o.aD?j.perspectiveTransform:[0,0],Zt=new Float32Array(16),lr=new Float32Array(9),Dr=new Float32Array(16),Ir=[0,0],Cn=new Float32Array(9);const Wn=Af(mt,Zt,lr,Dr,Cn,ir||[0,0],o.a9(p.transform.zoom),Ir,ur,bt||1,yt,u,Ht,D?u.paint.get("raster-elevation"):0,2,ct,_t,q.range,lt,St,Z),vs=p.isTileAffectedByFog(Me),Pi=p.getOrCreateProgram("raster",{defines:q.defines,overrideFog:vs});if(p.uploadCommonUniforms(z,Pi,Qe),j instanceof o.aD){const Vr=j.elevatedGlobeVertexBuffer,Tn=j.elevatedGlobeIndexBuffer;if(ie||!C)j.boundsBuffer&&j.boundsSegments&&Pi.draw(p,N.TRIANGLES,Ye,wr.disabled,ne,mr.disabled,Wn,u.id,j.boundsBuffer,p.quadTriangleIndexBuffer,j.boundsSegments);else if(Vr&&Tn){const ni=Lt.zoom<=o.c2?j.elevatedGlobeSegments:j.getSegmentsForLongitude(Lt.center.lng);ni&&Pi.draw(p,N.TRIANGLES,Ye,wr.disabled,ne,Fe,Wn,u.id,Vr,Tn,ni)}}else if(L){Ye=new sr(N.LEQUAL,sr.ReadOnly,p.depthRangeFor3D);const Vr=p.globeSharedBuffers;if(Vr){const[Tn,ni,En]=Vr.getGridBuffers(In,!1);Pi.draw(p,N.TRIANGLES,Ye,Ee||ft,p.colorModeForRenderPass(),Fe,Wn,u.id,Tn,ni,En)}}else{const{tileBoundsBuffer:Vr,tileBoundsIndexBuffer:Tn,tileBoundsSegments:ni}=p.getTileBoundsBuffers(Re);Pi.draw(p,N.TRIANGLES,Ye,ft,ne,mr.disabled,Wn,u.id,Vr,Tn,ni)}}if(!(j instanceof o.aD)&&L)for(const Me of be){const Qe=Me.canonical.y===(1<<Me.canonical.z)-1;Me.canonical.y===0&&ka(!0,Me,p,s,u,Z,q,Fe,Ee||wr.disabled),Qe&&ka(!1,Me,p,s,u,Z,q,Fe===mr.frontCW?mr.backCW:mr.frontCW,Ee||wr.disabled)}};L?we(ye,p.renderElevatedRasterBackface?mr.backCW:mr.frontCW,p.stencilModeFor3D()):we(ye,mr.disabled,void 0),p.resetStencilClippingMasks()},"raster-particle":function(p,s,u,m,_,w){p.renderPass==="offscreen"&&function(C,D,L,z){if(!z.length)return;const N=C.context,j=N.gl,q=D.getSource();if(!(q instanceof Kc))return;const Z=Math.ceil(Math.sqrt(L.paint.get("raster-particle-count")));let ne=L.particlePositionRGBAImage;if(!ne||ne.width!==Z){const ye=function(pe){const we=pe*pe,be=new Uint8Array(4*we),Fe=function(Me){return Me|=0,Me=Math.imul(2747636419^Me,2654435769),Me=Math.imul(Me^Me>>>16,2654435769),((Me=Math.imul(Me^Me>>>16,2654435769))>>>0)/4294967296},Ee=1/1.1;for(let Me=0;Me<we;Me++){const Qe=Ee*(Fe(2*Me+0)+yl),Re=Ee*(Fe(2*Me+1)+yl),Pe=255*Qe%1,Xe=255*Re%1,ct=Pe,_t=Re-Xe/255,lt=Xe;be[4*Me+0]=255*(Qe-Pe/255),be[4*Me+1]=255*ct,be[4*Me+2]=255*_t,be[4*Me+3]=255*lt}return be}(Z);ne=L.particlePositionRGBAImage=new o.r({width:Z,height:Z},ye)}let ie=L.particleFramebuffer;ie?ie.width!==Z&&(ie.destroy(),ie=L.particleFramebuffer=N.createFramebuffer(Z,Z,!0,null)):ie=L.particleFramebuffer=N.createFramebuffer(Z,Z,!0,null);const oe=[];for(const ye of z){const pe=D.getTile(ye);if(!(pe instanceof YA))continue;const we=rb(pe,q,L);if(!we)continue;const be=[pe.tileSize,pe.tileSize];let Fe=L.tileFramebuffer;Fe||(Fe=L.tileFramebuffer=N.createFramebuffer(be[0],be[1],!0,null));let Ee=pe.rasterParticleState;Ee||(Ee=pe.rasterParticleState=new tb(N,ye,be,ne));const Me=Ee.update(L.lastInvalidatedAt);Ee.particleTextureDimension!==Z&&Ee.updateParticleTexture(ye,ne);const Qe=Ee.targetColorTexture;Ee.targetColorTexture=Ee.backgroundColorTexture,Ee.backgroundColorTexture=Qe;const Re=Ee.particleTexture0;Ee.particleTexture0=Ee.particleTexture1,Ee.particleTexture1=Re,oe.push([ye,we,Ee,Me])}if(oe.length===0)return;const ae=o.q.now(),ge=L.previousDrawTimestamp?.001*(ae-L.previousDrawTimestamp):.0167;if(L.previousDrawTimestamp=ae,L.hasColorMap()){N.activeTexture.set(j.TEXTURE0+2);let ye=L.colorRampTexture;ye||(ye=L.colorRampTexture=new o.T(N,L.colorRamp,j.RGBA8)),ye.bind(j.LINEAR,j.CLAMP_TO_EDGE)}N.bindFramebuffer.set(L.tileFramebuffer.framebuffer),function(ye,pe,we){const be=ye.context,Fe=be.gl,Ee=pe.tileFramebuffer;be.activeTexture.set(Fe.TEXTURE0);const Me={u_texture:0,u_opacity:1.05*(Re=pe.paint.get("raster-particle-fade-opacity-factor"))/(Re+.05)},Qe=ye.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var Re;for(const Pe of we){const[,,Xe,ct]=Pe;Ee.colorAttachment.set(Xe.targetColorTexture.texture),be.viewport.set([0,0,Ee.width,Ee.height]),be.clear({color:o.bz.transparent}),ct&&(Xe.backgroundColorTexture.bind(Fe.NEAREST,Fe.CLAMP_TO_EDGE),Qe.draw(ye,Fe.TRIANGLES,sr.disabled,wr.disabled,Nr.alphaBlended,mr.disabled,Me,pe.id,ye.viewportBuffer,ye.quadTriangleIndexBuffer,ye.viewportSegments))}}(C,L,oe),function(ye,pe,we,be){const Fe=ye.context,Ee=Fe.gl,Me=we.tileFramebuffer,Qe=ye.transform.projection.name==="globe",Re=we.paint.get("raster-particle-max-speed");for(const Pe of be){const[Xe,ct,_t]=Pe;Fe.activeTexture.set(Ee.TEXTURE0+0),ct.texture.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),Me.colorAttachment.set(_t.targetColorTexture.texture);const lt=ye.getOrCreateProgram("rasterParticleDraw",{defines:ct.defines,overrideFog:!1});Fe.activeTexture.set(Ee.TEXTURE0+1);const St=ct.scalarData?[]:[0,1,2,3].map(ft=>o.c$[ft](Xe));St.push(Xe);const Ye=Xe.canonical.x,mt=Xe.canonical.y;for(const ft of St){const Tt=pe.getTile(Qe?ft.wrapped():ft);if(!Tt)continue;const Mt=Tt.rasterParticleState;if(!Mt)continue;const yt=ft.canonical.x+(1<<ft.canonical.z)*(ft.wrap-Xe.wrap),bt=ft.canonical.y;Mt.particleTexture0.bind(Ee.NEAREST,Ee.CLAMP_TO_EDGE);const ir=am(1,Mt.particleTexture0.size[0],[yt-Ye,bt-mt],0,ct.texture.size,2,Re,ct.textureOffset,ct.scale,ct.offset);lt.draw(ye,Ee.POINTS,sr.disabled,wr.disabled,Nr.alphaBlended,mr.disabled,ir,we.id,Mt.particleIndexBuffer,void 0,Mt.particleSegment)}}}(C,D,L,oe),N.bindFramebuffer.set(L.particleFramebuffer.framebuffer),function(ye,pe,we,be){const Fe=ye.context,Ee=Fe.gl,Me=pe.paint.get("raster-particle-max-speed"),Qe=be*pe.paint.get("raster-particle-speed-factor")*.15,Re=function(Xe){return Math.pow(Xe,6)}(.01+1*pe.paint.get("raster-particle-reset-rate-factor")),Pe=pe.particleFramebuffer;Fe.viewport.set([0,0,Pe.width,Pe.height]);for(const Xe of we){const[,ct,_t]=Xe;Fe.activeTexture.set(Ee.TEXTURE0+0),ct.texture.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),Fe.activeTexture.set(Ee.TEXTURE0+1);const lt=_t.particleTexture0;lt.bind(Ee.NEAREST,Ee.CLAMP_TO_EDGE);const St=sm(1,lt.size[0],0,ct.texture.size,Me,Qe,Re,ct.textureOffset,ct.scale,ct.offset);Pe.colorAttachment.set(_t.particleTexture1.texture),Fe.clear({color:o.bz.transparent}),ye.getOrCreateProgram("rasterParticleUpdate",{defines:ct.defines}).draw(ye,Ee.TRIANGLES,sr.disabled,wr.disabled,Nr.unblended,mr.disabled,St,pe.id,ye.viewportBuffer,ye.quadTriangleIndexBuffer,ye.viewportSegments)}}(C,L,oe,ge)}(p,s,u,m),p.renderPass==="translucent"&&(function(C,D,L,z,N){const j=C.context,q=j.gl,Z=D.getSource().tileSize,ne=5*(1-o.a7(o.bU,o.bU+1,C.transform.zoom))*Z+L.paint.get("raster-particle-elevation"),ie=!C.options.moving,oe=C.transform.projection.name==="globe";if(!z.length)return;const[ae,ge]=C.stencilConfigForOverlap(z),ye=[];oe&&ye.push("PROJECTION_GLOBE_VIEW");const pe=C.stencilModeFor3D();for(const we of ge){const be=we.toUnwrapped(),Fe=D.getTile(we);if(!Fe.rasterParticleState)continue;const Ee=Fe.rasterParticleState,Me=100;Fe.registerFadeDuration(Me);const Qe=D.findLoadedParent(we,0),Re=tm(Fe,Qe,D,C.transform,Me);let Pe,Xe;C.terrain&&C.terrain.prepareDrawTile(),j.activeTexture.set(q.TEXTURE0),Ee.targetColorTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),j.activeTexture.set(q.TEXTURE1),Qe&&Qe.rasterParticleState?(Qe.rasterParticleState.targetColorTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),Pe=Math.pow(2,Qe.tileID.overscaledZ-Fe.tileID.overscaledZ),Xe=[Fe.tileID.canonical.x*Pe%1,Fe.tileID.canonical.y*Pe%1]):Ee.targetColorTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE);const ct=oe?Float32Array.from(C.transform.expandedFarZProjMatrix):C.transform.calculateProjMatrix(be,ie),_t=C.transform,lt=nb(_t),St=o.cz(we.canonical),Ye=o.cA(St.getCenter().lat);let mt,ft,Tt,Mt,yt;oe?(mt=Float32Array.from(o.b5(o.cC(we.canonical))),ft=Float32Array.from(_t.globeMatrix),Tt=Float32Array.from(o.cy(_t)),Mt=[o.am(_t.center.lng),o.at(_t.center.lat)],yt=Float32Array.from(o.cB(we.canonical,St,Ye,_t.worldSize/_t._pixelsPerMercatorPixel))):(mt=new Float32Array(16),ft=new Float32Array(9),Tt=new Float32Array(16),Mt=[0,0],yt=new Float32Array(9));const bt=Yx(ct,mt,ft,Tt,yt,Xe||[0,0],o.a9(C.transform.zoom),Mt,lt,Pe||1,Re,ne),ir=C.isTileAffectedByFog(we),Lt=C.getOrCreateProgram("rasterParticle",{defines:ye,overrideFog:ir});if(C.uploadCommonUniforms(j,Lt,be),oe){const Ht=new sr(q.LEQUAL,sr.ReadOnly,C.depthRangeFor3D),ur=0,Zt=C.globeSharedBuffers;if(Zt){const[lr,Dr,Ir]=Zt.getGridBuffers(Ye,ur!==0);Lt.draw(C,q.TRIANGLES,Ht,pe,Nr.alphaBlended,C.renderElevatedRasterBackface?mr.frontCCW:mr.backCCW,bt,L.id,lr,Dr,Ir)}}else{const Ht=C.depthModeForSublayer(0,sr.ReadOnly),ur=ae[we.overscaledZ],{tileBoundsBuffer:Zt,tileBoundsIndexBuffer:lr,tileBoundsSegments:Dr}=C.getTileBoundsBuffers(Fe);Lt.draw(C,q.TRIANGLES,Ht,ur,Nr.alphaBlended,mr.disabled,bt,L.id,Zt,lr,Dr)}}C.resetStencilClippingMasks()}(p,s,u,m),p.style.map.triggerRepaint())},background:function(p,s,u,m){const _=u.paint.get("background-color"),w=u.paint.get("background-opacity"),C=u.paint.get("background-emissive-strength"),D=u.paint.get("background-pitch-alignment")==="viewport";if(w===0)return;const L=p.context,z=L.gl,N=p.transform,j=N.tileSize,q=u.paint.get("background-pattern");let Z;if(q!==void 0&&(q===null||(Z=p.imageManager.getPattern(q.toString(),u.scope,p.style.getLut(u.scope)),!Z)))return;const ne=!q&&_.a===1&&w===1&&p.opaquePassEnabledForLayer()?"opaque":"translucent";if(p.renderPass!==ne)return;const ie=wr.disabled,oe=p.depthModeForSublayer(0,ne==="opaque"?sr.ReadWrite:sr.ReadOnly),ae=p.colorModeForDrapableLayerRenderPass(C),ge=q?"backgroundPattern":"background";let ye,pe=m;if(pe||(ye=p.getBackgroundTiles(),pe=Object.values(ye).map(we=>we.tileID)),q&&(L.activeTexture.set(z.TEXTURE0),p.imageManager.bind(p.context,u.scope)),D){const we=p.getOrCreateProgram(ge,{overrideFog:!1,overrideRtt:!0}),be=new Float32Array(o.a6.mat4.identity([])),Fe=new o.aA(0,0,0,0,0),Ee=q?Yu(be,C,w,p,0,u.scope,Z,D,{tileID:Fe,tileSize:j}):Jx(be,C,w,_.toRenderColor(u.lut));we.draw(p,z.TRIANGLES,oe,ie,ae,mr.disabled,Ee,u.id,p.viewportBuffer,p.quadTriangleIndexBuffer,p.viewportSegments)}else for(const we of pe){const be=p.isTileAffectedByFog(we),Fe=p.getOrCreateProgram(ge,{overrideFog:be}),Ee=we.toUnwrapped(),Me=m?we.projMatrix:p.transform.calculateProjMatrix(Ee);p.prepareDrawTile();const Qe=s?s.getTile(we):ye?ye[we.key]:new ms(we,j,N.zoom,p),Re=q?Yu(Me,C,w,p,0,u.scope,Z,D,{tileID:we,tileSize:j}):Jx(Me,C,w,_.toRenderColor(u.lut));p.uploadCommonUniforms(L,Fe,Ee);const{tileBoundsBuffer:Pe,tileBoundsIndexBuffer:Xe,tileBoundsSegments:ct}=p.getTileBoundsBuffers(Qe);Fe.draw(p,z.TRIANGLES,oe,ie,ae,mr.disabled,Re,u.id,Pe,Xe,ct)}},sky:function(p,s,u){const m=p._atmosphere?o.a9(p.transform.zoom):1,_=u.paint.get("sky-opacity")*m;if(_===0)return;const w=p.context,C=u.paint.get("sky-type"),D=new sr(w.gl.LEQUAL,sr.ReadOnly,[0,1]),L=p.frameCounter/1e3%1;C==="atmosphere"?p.renderPass==="offscreen"?u.needsSkyboxCapture(p)&&(function(z,N,j,q){const Z=z.context,ne=Z.gl;let ie=N.skyboxFbo;if(!ie){ie=N.skyboxFbo=Z.createFramebuffer(32,32,!0,null),N.skyboxGeometry=new gv(Z),N.skyboxTexture=Z.gl.createTexture(),ne.bindTexture(ne.TEXTURE_CUBE_MAP,N.skyboxTexture),ne.texParameteri(ne.TEXTURE_CUBE_MAP,ne.TEXTURE_WRAP_S,ne.CLAMP_TO_EDGE),ne.texParameteri(ne.TEXTURE_CUBE_MAP,ne.TEXTURE_WRAP_T,ne.CLAMP_TO_EDGE),ne.texParameteri(ne.TEXTURE_CUBE_MAP,ne.TEXTURE_MIN_FILTER,ne.LINEAR),ne.texParameteri(ne.TEXTURE_CUBE_MAP,ne.TEXTURE_MAG_FILTER,ne.LINEAR);for(let ye=0;ye<6;++ye)ne.texImage2D(ne.TEXTURE_CUBE_MAP_POSITIVE_X+ye,0,ne.RGBA,32,32,0,ne.RGBA,ne.UNSIGNED_BYTE,null)}Z.bindFramebuffer.set(ie.framebuffer),Z.viewport.set([0,0,32,32]);const oe=N.getCenter(z,!0),ae=z.getOrCreateProgram("skyboxCapture"),ge=new Float64Array(16);o.a6.mat4.identity(ge),o.a6.mat4.rotateY(ge,ge,.5*-Math.PI),$u(z,N,ae,ge,oe,0),o.a6.mat4.identity(ge),o.a6.mat4.rotateY(ge,ge,.5*Math.PI),$u(z,N,ae,ge,oe,1),o.a6.mat4.identity(ge),o.a6.mat4.rotateX(ge,ge,.5*-Math.PI),$u(z,N,ae,ge,oe,2),o.a6.mat4.identity(ge),o.a6.mat4.rotateX(ge,ge,.5*Math.PI),$u(z,N,ae,ge,oe,3),o.a6.mat4.identity(ge),$u(z,N,ae,ge,oe,4),o.a6.mat4.identity(ge),o.a6.mat4.rotateY(ge,ge,Math.PI),$u(z,N,ae,ge,oe,5),Z.viewport.set([0,0,z.width,z.height])}(p,u),u.markSkyboxValid(p)):p.renderPass==="sky"&&function(z,N,j,q,Z){const ne=z.context,ie=ne.gl,oe=z.transform,ae=z.getOrCreateProgram("skybox");ne.activeTexture.set(ie.TEXTURE0),ie.bindTexture(ie.TEXTURE_CUBE_MAP,N.skyboxTexture);const ge=((ye,pe,we,be,Fe)=>({u_matrix:ye,u_sun_direction:pe,u_cubemap:0,u_opacity:be,u_temporal_offset:Fe}))(oe.skyboxMatrix,N.getCenter(z,!1),0,q,Z);z.uploadCommonUniforms(ne,ae),ae.draw(z,ie.TRIANGLES,j,wr.disabled,z.colorModeForRenderPass(),mr.backCW,ge,"skybox",N.skyboxGeometry.vertexBuffer,N.skyboxGeometry.indexBuffer,N.skyboxGeometry.segment)}(p,u,D,_,L):C==="gradient"&&p.renderPass==="sky"&&function(z,N,j,q,Z){const ne=z.context,ie=ne.gl,oe=z.transform,ae=z.getOrCreateProgram("skyboxGradient");N.skyboxGeometry||(N.skyboxGeometry=new gv(ne)),ne.activeTexture.set(ie.TEXTURE0);let ge=N.colorRampTexture;ge||(ge=N.colorRampTexture=new o.T(ne,N.colorRamp,ie.RGBA8)),ge.bind(ie.LINEAR,ie.CLAMP_TO_EDGE);const ye=((pe,we,be,Fe,Ee)=>({u_matrix:pe,u_color_ramp:0,u_center_direction:we,u_radius:o.bB(be),u_opacity:Fe,u_temporal_offset:Ee}))(oe.skyboxMatrix,N.getCenter(z,!1),N.paint.get("sky-gradient-radius"),q,Z);z.uploadCommonUniforms(ne,ae),ae.draw(z,ie.TRIANGLES,j,wr.disabled,z.colorModeForRenderPass(),mr.backCW,ye,"skyboxGradient",N.skyboxGeometry.vertexBuffer,N.skyboxGeometry.indexBuffer,N.skyboxGeometry.segment)}(p,u,D,_,L)},debug:function(p,s,u,m,_,w){for(let C=0;C<u.length;C++)if(_){const z=new o.bz(m.r*.8,m.g*.8,m.b*.8,1);Hs(p,s,u[C],m,-1,-1,w),Hs(p,s,u[C],m,-1,1,w),Hs(p,s,u[C],m,1,1,w),Hs(p,s,u[C],m,1,-1,w),Hs(p,s,u[C],z,0,0,w)}else Hs(p,s,u[C],m,0,0,w)},custom:function(p,s,u,m){const _=p.context,w=u.implementation;if(!p.transform.projection.unsupportedLayers||!p.transform.projection.unsupportedLayers.includes("custom")||p.terrain&&(p.terrain.renderingToTexture||p.renderPass==="offscreen")&&u.isDraped(s)){if(p.renderPass==="offscreen"){const C=w.prerender;if(C){if(p.setCustomLayerDefaults(),_.setColorMode(p.colorModeForRenderPass()),p.transform.projection.name==="globe"){const D=p.transform.pointMerc;C.call(w,_.gl,p.transform.customLayerMatrix(),p.transform.getProjection(),p.transform.globeToMercatorMatrix(),o.a9(p.transform.zoom),[D.x,D.y],p.transform.pixelsPerMeterRatio)}else C.call(w,_.gl,p.transform.customLayerMatrix());_.setDirty(),p.setBaseState()}}else if(p.renderPass==="translucent"){if(p.terrain&&p.terrain.renderingToTexture){const D=w.renderToTile;if(D){const L=m[0].canonical,z=new o.a5(L.x+m[0].wrap*(1<<L.z),L.y,L.z);_.setDepthMode(sr.disabled),_.setStencilMode(wr.disabled),_.setColorMode(p.colorModeForRenderPass()),p.setCustomLayerDefaults(),D.call(w,_.gl,z),_.setDirty(),p.setBaseState()}return}p.setCustomLayerDefaults(),_.setColorMode(p.colorModeForRenderPass()),_.setStencilMode(wr.disabled);const C=w.renderingMode==="3d"?new sr(p.context.gl.LEQUAL,sr.ReadWrite,p.depthRangeFor3D):p.depthModeForSublayer(0,sr.ReadOnly);if(_.setDepthMode(C),p.transform.projection.name==="globe"){const D=p.transform.pointMerc;w.render(_.gl,p.transform.customLayerMatrix(),p.transform.getProjection(),p.transform.globeToMercatorMatrix(),o.a9(p.transform.zoom),[D.x,D.y],p.transform.pixelsPerMeterRatio)}else w.render(_.gl,p.transform.customLayerMatrix());_.setDirty(),p.setBaseState(),_.bindFramebuffer.set(null)}}else o.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(p,s,u,m){if(p.renderPass==="opaque")return;const _=u.paint.get("model-opacity");if(_===0)return;const w=u.paint.get("model-cast-shadows");if(p.renderPass==="shadow"&&(!w||p.terrain&&_<.65&&u._transitionablePaint._values["model-opacity"].value.expression instanceof o.a4))return;const C=p.shadowRenderer,D=u.paint.get("model-receive-shadows");C&&(C.useNormalOffset=!0,D||(C.enabled=!1));const L=()=>{C&&(C.useNormalOffset=!0,D||(C.enabled=!0))},z=s.getSource();if(p.renderPass==="light-beam"&&z.type!=="batched-model")return;if(z.type==="vector"||z.type==="geojson")return function(ae,ge,ye,pe,we){const be=ae.transform;if(be.projection.name!=="mercator")return void o.w(`Drawing 3D models for ${be.projection.name} projection is not yet implemented`);const Fe=be.getFreeCameraOptions().position;if(!ae.modelManager)return;const Ee=ae.modelManager;ye.modelManager=Ee;const Me=ae.shadowRenderer;if(!ye._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const Qe=ye._unevaluatedLayout._values["model-id"],Re={...ye.layout.get("model-id").parameters},Pe=ae.style.order.indexOf(ye.fqid);for(const Xe of pe){const ct=ge.getTile(Xe).getBucket(ye);if(!ct||ct.projection.name!==be.projection.name)continue;const _t=ct.getModelUris();_t&&!ct.modelsRequested&&(Ee.addModelsFromBucket(_t,we),ct.modelsRequested=!0);const lt=DT(Xe,be);Re.zoom=lt;const St=Qe.possiblyEvaluate(Re);if(ob(ae,ct,Xe),Gs.shadowUniformsInitialized=!1,Gs.useSingleShadowCascade=!!Me&&Me.getMaxCascadeForTile(Xe.toUnwrapped())===0,ae.renderPass==="shadow"&&Me){if(ae.currentShadowCascade===1&&ct.isInsideFirstShadowMapFrustum)continue;const ft=be.calculatePosMatrix(Xe.toUnwrapped(),be.worldSize);if(Gs.tileMatrix.set(ft),Gs.shadowTileMatrix=Float32Array.from(Me.calculateShadowPassMatrixFromMatrix(ft)),Gs.aabb.min.fill(0),Gs.aabb.max[0]=Gs.aabb.max[1]=o.ab,Gs.aabb.max[2]=0,vf(ct,Gs,ae,ye.scope))continue}const Ye=1<<Xe.canonical.z,mt=[((Fe.x-Xe.wrap)*Ye-Xe.canonical.x)*o.ab,(Fe.y*Ye-Xe.canonical.y)*o.ab,Fe.z*Ye*o.ab];ae.conflationActive&&Object.keys(ct.instancesPerModel).length>0&&ae.style.isLayerClipped(ye,ge.getSource())&&ct.updateReplacement(Xe,ae.replacementSource,Pe,we)&&(ct.uploaded=!1,ct.upload(ae.context));for(let ft in ct.instancesPerModel){const Tt=ct.instancesPerModel[ft];Tt.features.length>0&&(ft=St.evaluate(Tt.features[0].feature,{}));const Mt=Ee.getModel(ft,we);if(Mt&&Mt.uploaded)for(const yt of Mt.nodes)Zo(ae,ye,yt,Tt,mt,Xe,Gs)}}}(p,s,u,m,z.type==="vector"?u.scope:""),void L();if(!z.loaded())return;if(z.type==="batched-model")return function(ae,ge,ye,pe){ye.resetLayerRenderingStats(ae);const we=ae.context,be=ae.transform,Fe=ae.style.fog,Ee=ae.shadowRenderer;if(be.projection.name!=="mercator")return void o.w(`Drawing 3D landmark models for ${be.projection.name} projection is not yet implemented`);const Me=ae.transform.getFreeCameraOptions().position,Qe=o.a6.vec3.scale([],[Me.x,Me.y,Me.z],ae.transform.worldSize),Re=o.a6.vec3.negate([],Qe),Pe=o.a6.mat4.identity([]),Xe=o.de(be.center.lat,be.zoom),ct=o.a6.mat4.fromScaling([],[1,1,1/Xe]);o.a6.mat4.translate(Pe,Pe,Re);const _t=ye.paint.get("model-opacity"),lt=new sr(we.gl.LEQUAL,sr.ReadWrite,ae.depthRangeFor3D),St=new sr(we.gl.LEQUAL,sr.ReadOnly,ae.depthRangeFor3D),Ye=new o.c9([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),mt=ae.renderPass==="shadow",ft=mt&&Ee?Ee.getCurrentCascadeFrustum():be.getFrustum(be.scaleZoom(be.worldSize)),Tt=ye.paint.get("model-front-cutoff"),Mt=Tt[2]<1,yt=lc(ae,ye.paint.get("model-cutoff-fade-range")),bt=ye.getLayerRenderingStats();(function(ir,Lt,Ht,ur){const Zt=ir.terrain?ir.terrain.exaggeration():0,lr=ir.transform.zoom;for(const Dr of ur){const Ir=Lt.getTile(Dr).getBucket(Ht);Ir&&(ir.conflationActive&&Ir.updateReplacement(Dr,ir.replacementSource),Ir.evaluateScale(ir,Ht),ir.terrain&&Zt>0&&Ir.elevationUpdate(ir.terrain,Zt,Dr,Ht.source),Ir.needsReEvaluation(ir,lr,Ht)&&Ir.evaluate(Ht))}})(ae,ge,ye,pe),function(){let ir,Lt,Ht;Mt?(ir=pe.length-1,Lt=-1,Ht=-1):(ir=0,Lt=pe.length,Ht=1);const ur=new Float64Array(16),Zt=o.a6.vec3.create(),lr=new o.P(0,0);for(let Dr=ir;Dr!==Lt;Dr+=Ht){const Ir=pe[Dr],Cn=ge.getTile(Ir).getBucket(ye);if(!Cn||!Cn.uploaded)continue;let In=!1;Ee&&(In=Ee.getMaxCascadeForTile(Ir.toUnwrapped())===0);const Wn=be.calculatePosMatrix(Ir.toUnwrapped(),be.worldSize),vs=Cn.modelTraits;!mt&&Mt&&(o.a6.mat4.invert(ur,Wn),o.a6.vec3.transformMat4(Zt,Qe,ur),lr.x=Zt[0],lr.y=Zt[1]);const Pi=[];for(const Vr of Cn.getNodesInfo()){if(Vr.hiddenByReplacement||!Vr.node.meshes)continue;const Tn=Vr.node;let ni=0;ae.terrain&&Tn.elevation&&(ni=Tn.elevation*ae.terrain.exaggeration());const En=(()=>{const zn=Vr.aabb;return Ye.min=[...zn.min],Ye.max=[...zn.max],Ye.min[2]+=ni,Ye.max[2]+=ni,o.a6.vec3.transformMat4(Ye.min,Ye.min,Wn),o.a6.vec3.transformMat4(Ye.max,Ye.max,Wn),Ye})(),Mr=Vr.evaluatedScale;if(Mr[0]<=1&&Mr[1]<=1&&Mr[2]<=1&&En.intersects(ft)===0)continue;if(!mt&&Mt){const zn=.16666666666666666;Vr.cameraCollisionOpacity=Qe[0]>En.min[0]&&Qe[0]<En.max[0]&&Qe[1]>En.min[1]&&Qe[1]<En.max[1]&&Qe[2]*Xe<En.max[2]&&Tn.footprint&&o.bu(lr,Tn.footprint)?Math.max(Vr.cameraCollisionOpacity-zn,0):Math.min(1,Vr.cameraCollisionOpacity+zn)}const dn=[...Wn],wn=Tn.anchor?Tn.anchor[0]:0,wi=Tn.anchor?Tn.anchor[1]:0;o.a6.mat4.translate(dn,dn,[wn*(Mr[0]-1),wi*(Mr[1]-1),ni]),o.a6.vec3.exactEquals(Mr,o.dh)||o.a6.mat4.scale(dn,dn,Mr);const Di=o.a6.mat4.multiply([],dn,Tn.matrix),nn=o.a6.mat4.multiply([],be.expandedFarZProjMatrix,Di),Ji=o.a6.mat4.multiply([],be.expandedFarZProjMatrix,dn),co=o.a6.vec4.transformMat4([],[wn,wi,ni,1],nn)[2];Tn.hidden=!1;let $i=_t;mt||(Mt&&($i*=Vr.cameraCollisionOpacity,$i*=hn(dn,be,Vr.aabb,Tt)),$i*=Zn(yt,co)),$i!==0?Pi.push({nodeInfo:Vr,depth:co,opacity:$i,wvpForNode:nn,wvpForTile:Ji,nodeModelMatrix:Di,tileModelMatrix:dn}):Tn.hidden=!0}mt||Pi.sort((Vr,Tn)=>!Mt||Vr.opacity===1&&Tn.opacity===1?Vr.depth<Tn.depth?-1:1:Vr.opacity===1?-1:Tn.opacity===1?1:Vr.depth>Tn.depth?-1:1);for(const Vr of Pi){const Tn=Vr.nodeInfo,ni=Tn.node;let En=o.a6.mat4.multiply([],ct,Vr.tileModelMatrix);o.a6.mat4.multiply(En,Pe,En);const Mr=o.a6.mat4.invert([],En);o.a6.mat4.transpose(Mr,Mr),o.a6.mat4.scale(Mr,Mr,kT),En=o.a6.mat4.multiply(En,En,ni.matrix);const dn=ae.renderPass==="light-beam",wn=vs&o.dj.HasMapboxMeshFeatures,wi=wn?0:Tn.evaluatedRMEA[0][2];for(let Di=0;Di<ni.meshes.length;++Di){const nn=ni.meshes[Di],Ji=Di===ni.lightMeshIndex;let co=Vr.wvpForNode;if(Ji){if(!dn&&!ae.terrain&&ae.shadowRenderer){ae.currentLayer<ae.firstLightBeamLayer&&(ae.firstLightBeamLayer=ae.currentLayer);continue}co=Vr.wvpForTile}else if(dn)continue;const $i={defines:[]},zn=[];if(gm($i.defines,zn,nn,ae,ye.lut),wn||$i.defines.push("DIFFUSE_SHADED"),In&&$i.defines.push("SHADOWS_SINGLE_CASCADE"),bt&&(mt?bt.numRenderedVerticesInShadowPass+=nn.vertexArray.length:bt.numRenderedVerticesInTransparentPass+=nn.vertexArray.length),mt){yh(nn,Vr.nodeModelMatrix,ae,ye);continue}let ua=null;if(Fe){const fc=mm(Vr.nodeModelMatrix,ae.transform);if(ua=new Float32Array(fc),be.projection.name!=="globe"){const su=nn.aabb.min,wl=nn.aabb.max,[Ch,Sh]=Fe.getOpacityForBounds(fc,su[0],su[1],wl[0],wl[1]);$i.overrideFog=Ch>=zt||Sh>=zt}}const Aa=nn.material;let ys;Aa.occlusionTexture&&Aa.occlusionTexture.offsetScale&&(ys=Aa.occlusionTexture.offsetScale,$i.defines.push("OCCLUSION_TEXTURE_TRANSFORM")),!mt&&Ee&&(Ee.useNormalOffset=!!nn.normalBuffer);const is=ae.getOrCreateProgram("model",$i);!mt&&Ee&&Ee.setupShadowsFromMatrix(Vr.tileModelMatrix,is,Ee.useNormalOffset),ae.uploadCommonUniforms(we,is,null,ua);const Ra=Aa.pbrMetallicRoughness;Ra.metallicFactor=.9,Ra.roughnessFactor=.5;const _s=Wt(new Float32Array(co),new Float32Array(En),new Float32Array(Mr),new Float32Array(ni.matrix),ae,Vr.opacity,Ra.baseColorFactor.toRenderColor(null),Aa.emissiveFactor,Ra.metallicFactor,Ra.roughnessFactor,Aa,wi,ye,[0,0,0],ys);!Ji&&(Tn.hasTranslucentParts||Vr.opacity<1)&&is.draw(ae,we.gl.TRIANGLES,lt,wr.disabled,Nr.disabled,mr.backCCW,_s,ye.id,nn.vertexBuffer,nn.indexBuffer,nn.segments,ye.paint,ae.transform.zoom,void 0,zn),is.draw(ae,we.gl.TRIANGLES,Ji?St:lt,wr.disabled,Ji||Vr.opacity<1||Tn.hasTranslucentParts?Nr.alphaBlended:Nr.unblended,mr.backCCW,_s,ye.id,nn.vertexBuffer,nn.indexBuffer,nn.segments,ye.paint,ae.transform.zoom,void 0,zn)}}}}()}(p,s,u,m),void L();if(z.type!=="model")return;const N=z.getModels(),j=[],q=p.transform.getFreeCameraOptions().position,Z=o.a6.vec3.scale([],[q.x,q.y,q.z],p.transform.worldSize);o.a6.vec3.negate(Z,Z);const ne=[],ie=[];let oe=0;for(const ae of N){const ge=u.paint.get("model-rotation").constantOr(null),ye=u.paint.get("model-scale").constantOr(null),pe=u.paint.get("model-translation").constantOr(null);ae.computeModelMatrix(p,ge,ye,pe,!0,!0,!1);const we=o.a6.mat4.identity([]),be=o.de(ae.position.lat,p.transform.zoom),Fe=o.a6.mat4.fromScaling([],[1,1,1/be]);o.a6.mat4.translate(we,we,Z),j.push({zScaleMatrix:Fe,negCameraPosMatrix:we});for(const Ee of ae.nodes)gf(p.transform,Ee,ae.matrix,p.transform.expandedFarZProjMatrix,oe,ne,ie);oe++}if(ne.sort((ae,ge)=>ge.depth-ae.depth),p.renderPass!=="shadow"){if(_===1)for(const ae of ie)mf(ae,p,u,j[ae.modelIndex],wr.disabled,p.colorModeForRenderPass());else{for(const ae of ie)mf(ae,p,u,j[ae.modelIndex],wr.disabled,Nr.disabled);for(const ae of ie)mf(ae,p,u,j[ae.modelIndex],p.stencilModeFor3D(),p.colorModeForRenderPass());p.resetStencilClippingMasks()}for(const ae of ne)mf(ae,p,u,j[ae.modelIndex],wr.disabled,p.colorModeForRenderPass());L()}else{for(const ae of ie)yh(ae.mesh,ae.nodeModelMatrix,p,u);for(const ae of ne)yh(ae.mesh,ae.nodeModelMatrix,p,u);L()}}},ym={model:function(p,s,u){const m=s.getSource();if(!m.loaded())return;if(m.type==="vector"||m.type==="geojson")return void(u.modelManager&&u.modelManager.upload(u,m.type==="vector"?p.scope:""));if(m.type==="batched-model"||m.type!=="model")return;const _=m.getModels();for(const w of _)w.upload(u.context)},raster:function(p,s,u){const m=s.getSource();if(!(m instanceof Kc&&m.loaded()))return;const _=p.sourceLayer||m.rasterLayerIds&&m.rasterLayerIds[0];if(!_)return;const w=p.paint.get("raster-array-band")||m.getInitialBand(_);if(w==null)return;const C=s.getIds().map(D=>s.getTileByID(D));for(const D of C)D.updateNeeded(_,w)&&m.prepareTile(D,_,w)},"raster-particle":function(p,s,u){const m=s.getSource();if(!(m instanceof Kc&&m.loaded()))return;const _=p.sourceLayer||m.rasterLayerIds&&m.rasterLayerIds[0];if(!_)return;const w=p.paint.get("raster-particle-array-band")||m.getInitialBand(_);if(w==null)return;const C=s.getIds().map(D=>s.getTileByID(D));for(const D of C)D.updateNeeded(_,w)&&m.prepareTile(D,_,w)}};class vv{constructor(s,u,m,_){this.context=new ET(s,u),this.transform=m,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=_,this._timeStamp=o.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const w=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","raster-particle","hillshade","model","background","sky"];for(const D of w)this._debugParams.enabledLayers[D]=!0;_.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),_.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),_.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),_.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),_.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const D of w)_.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],D);this.occlusionParams=new vm(_),this.setup(),this.numSublayers=qo.maxUnderzooming+qo.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new o.dl,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new bx(this),this._wireframeDebugCache=new ru,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const C=new o.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new o.T(this.context,C,s.RGBA8),this._clippingActiveLastFrame=!1}updateTerrain(s,u){const m=!!s&&!!s.terrain&&this.transform.projection.supportsTerrain;if(!(m||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new rv(this,s));const _=this._terrain;this.transform.elevation=m?_:null,_.update(s,this.transform,u),this.transform.elevation&&!_.enabled&&(this.transform.elevation=null)}_updateFog(s){const u=s.fog;if(!u||this.transform.projection.name==="globe"||u.getOpacity(this.transform.pitch)<1||u.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[m,_]=u.getFovAdjustedRange(this.transform._fov);if(m>_)return void(this.transform.fogCullDistSq=null);const w=m+.78*(_-m);this.transform.fogCullDistSq=w*w}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(s){s&&!this._terrain&&(this._terrain=new rv(this,this.style)),this._forceTerrainMode=s}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(s,u){if(this.width=s*o.q.devicePixelRatio,this.height=u*o.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style.order)this.style._mergedLayers[m].resize()}setup(){const s=this.context,u=new o.a_;u.emplaceBack(0,0),u.emplaceBack(o.ab,0),u.emplaceBack(0,o.ab),u.emplaceBack(o.ab,o.ab),this.tileExtentBuffer=s.createVertexBuffer(u,o.b0.members),this.tileExtentSegments=o.b1.simpleSegment(0,0,4,2);const m=new o.a_;m.emplaceBack(0,0),m.emplaceBack(o.ab,0),m.emplaceBack(0,o.ab),m.emplaceBack(o.ab,o.ab),this.debugBuffer=s.createVertexBuffer(m,o.b0.members),this.debugSegments=o.b1.simpleSegment(0,0,4,5);const _=new o.a_;_.emplaceBack(-1,-1),_.emplaceBack(1,-1),_.emplaceBack(-1,1),_.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(_,o.b0.members),this.viewportSegments=o.b1.simpleSegment(0,0,4,2);const w=new o.aN;w.emplaceBack(0,0,0,0),w.emplaceBack(o.ab,0,o.ab,0),w.emplaceBack(0,o.ab,0,o.ab),w.emplaceBack(o.ab,o.ab,o.ab,o.ab),this.mercatorBoundsBuffer=s.createVertexBuffer(w,o.b3.members),this.mercatorBoundsSegments=o.b1.simpleSegment(0,0,4,2);const C=new o.aO;C.emplaceBack(0,1,2),C.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(C);const D=new o.a$;for(const z of[0,1,3,2,0])D.emplaceBack(z);this.debugIndexBuffer=s.createIndexBuffer(D),this.emptyTexture=new o.T(s,new o.r({width:1,height:1},Uint8Array.of(0,0,0,0)),s.gl.RGBA8),this.identityMat=o.a6.mat4.create();const L=this.context.gl;this.stencilClearMode=new wr({func:L.ALWAYS,mask:0},0,255,L.ZERO,L.ZERO,L.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(s){return s._makeTileBoundsBuffers(this.context,this.transform.projection),s._tileBoundsBuffer?{tileBoundsBuffer:s._tileBoundsBuffer,tileBoundsIndexBuffer:s._tileBoundsIndexBuffer,tileBoundsSegments:s._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const s=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,s.TRIANGLES,sr.disabled,this.stencilClearMode,Nr.disabled,mr.disabled,cf(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(s,u,m){if(!u||this.currentStencilSource===u.id||!s.isTileClipped()||!m||m.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let D=!1;for(const L of m)if(this._tileClippingMaskIDs[L.key]===void 0){D=!0;break}if(!D)return}this.currentStencilSource=u.id;const _=this.context,w=_.gl;this.nextStencilID+m.length>256&&this.clearStencil(),_.setColorMode(Nr.disabled),_.setDepthMode(sr.disabled);const C=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const D of m){const L=u.getTile(D),z=this._tileClippingMaskIDs[D.key]=this.nextStencilID++,{tileBoundsBuffer:N,tileBoundsIndexBuffer:j,tileBoundsSegments:q}=this.getTileBoundsBuffers(L);C.draw(this,w.TRIANGLES,sr.disabled,new wr({func:w.ALWAYS,mask:0},z,255,w.KEEP,w.KEEP,w.REPLACE),Nr.disabled,mr.disabled,cf(D.projMatrix),"$clipping",N,j,q)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,u=this.context.gl;return new wr({func:u.NOTEQUAL,mask:255},s,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(s){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(s);const u=this.context.gl;return new wr({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(s){const u=this.context.gl,m=s.sort((C,D)=>D.overscaledZ-C.overscaledZ),_=m[m.length-1].overscaledZ,w=m[0].overscaledZ-_+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const C={};for(let D=0;D<w;D++)C[D+_]=new wr({func:u.GEQUAL,mask:255},D+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=w,[C,m]}return[{[_]:wr.disabled},m]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new Nr([s.CONSTANT_COLOR,s.ONE,s.CONSTANT_COLOR,s.ONE],new o.bz(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Nr.unblended:Nr.alphaBlended}colorModeForDrapableLayerRenderPass(s){const u=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new Nr([u.ONE,u.ONE_MINUS_SRC_ALPHA,u.CONSTANT_ALPHA,u.ONE_MINUS_SRC_ALPHA],new o.bz(0,0,0,s===void 0?0:s),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(s,u,m,_=!1){if(this.depthOcclusion)return new sr(this.context.gl.GREATER,sr.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!_)return sr.disabled;const w=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new sr(m||this.context.gl.LEQUAL,u,[w,w])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const s=this.context.gl,u=Math.ceil(this.width),m=Math.ceil(this.height),_=this.context.bindFramebuffer.get(),w=s.getParameter(s.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===u&&this.depthFBO.height===m||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),u!==0&&m!==0&&(this.depthFBO=new cm(this.context,u,m,!1,"texture"),this.depthTexture=new o.T(this.context,{width:u,height:m,data:null},s.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(_),s.bindTexture(s.TEXTURE_2D,w),this.depthFBO&&(s.bindFramebuffer(s.READ_FRAMEBUFFER,null),s.bindFramebuffer(s.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),s.blitFramebuffer(0,0,u,m,0,0,u,m,s.DEPTH_BUFFER_BIT,s.NEAREST),s.bindFramebuffer(s.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((s,u)=>s+u/this._fpsHistory.length,0))}render(s,u){const m=o.q.now();this._dt=m-this._timeStamp,this._timeStamp=m,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=s.map.repaint,this.style=s,this.options=u;const _=this.style._mergedLayers,w=this.style.order.filter(Re=>{const Pe=_[Re];return!(Pe.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[Pe.type]});let C=!1,D=!1;for(const Re of w){const Pe=_[Re];Pe.type==="circle"&&(C=!0),Pe.type==="symbol"&&(Pe.hasInitialOcclusionOpacityProperties?D=!0:C=!0)}const L=w.map(Re=>_[Re]),z=this.style._mergedSourceCaches;this.imageManager=s.imageManager,this.modelManager=s.modelManager,this.symbolFadeChange=s.placement.symbolFadeChange(o.q.now()),this.imageManager.beginFrame();let N=0,j=!1;for(const Re in z){const Pe=z[Re];Pe.used&&(Pe.prepare(this.context),Pe.getSource().usedInConflation&&++N)}let q=!1;for(const Re of L)Re.isHidden(this.transform.zoom)||(Re.type==="clip"&&(q=!0),this.prepareLayer(Re));const Z={},ne={},ie={},oe={},ae={};for(const Re in z){const Pe=z[Re];Z[Re]=Pe.getVisibleCoordinates(),ne[Re]=Z[Re].slice().reverse(),ie[Re]=Pe.getVisibleCoordinates(!0).reverse(),oe[Re]=Pe.getShadowCasterCoordinates(),ae[Re]=Pe.sortCoordinatesByDistance(Z[Re])}const ge=Re=>{const Pe=this.style.getLayerSourceCache(Re);return Pe&&Pe.used?Pe.getSource():null};if(N||q||this._clippingActiveLastFrame){const Re=[],Pe=[];let Xe=0;for(const ct of L)this.isSourceForClippingOrConflation(ct,ge(ct))&&(Re.push(ct),Pe.push(Xe)),Xe++;if(Re&&(q||Re.length>1)||this._clippingActiveLastFrame){q=!1;const ct=[];for(let _t=0;_t<Re.length;_t++){const lt=Re[_t],St=Pe[_t],Ye=this.style.getLayerSourceCache(lt);if(!Ye||!Ye.used||!Ye.getSource().usedInConflation&&lt.type!=="clip")continue;let mt=o.dn,ft=o.bs.None;const Tt=[];let Mt=!0;if(lt.type==="clip"){mt=St;for(const yt of lt.layout.get("clip-layer-types"))ft|=yt==="model"?o.bs.Model:yt==="symbol"?o.bs.Symbol:o.bs.FillExtrusion;for(const yt of lt.layout.get("clip-layer-scope"))Tt.push(yt);lt.isHidden(this.transform.zoom)?Mt=!1:q=!0}Mt&&ct.push({layer:lt.fqid,cache:Ye,order:mt,clipMask:ft,clipScope:Tt})}this.replacementSource.setSources(ct),j=!0}}this._clippingActiveLastFrame=q,j||this.replacementSource.clear(),this.conflationActive=j,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let Re=0;Re<L.length;Re++){const Pe=L[Re],Xe=Pe.cutoffRange();if(this.longestCutoffRange=Math.max(Xe,this.longestCutoffRange),Xe>0){const ct=ge(Pe);ct&&(this.minCutoffZoom=Math.max(ct.minzoom,this.minCutoffZoom)),Pe.minzoom&&(this.minCutoffZoom=Math.max(Pe.minzoom,this.minCutoffZoom))}Pe.is3D()&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=Re),this._lastOcclusionLayer=Re)}const ye=this.style&&this.style.fog;ye?(this._fogVisible=ye.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=ye.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(ie),this.opaquePassCutoff=0);const pe=this._shadowRenderer;if(pe){pe.updateShadowParameters(this.transform,this.style.directionalLight);for(const Re in z)for(const Pe of Z[Re]){let Xe={min:0,max:0};this.terrain&&(Xe=this.terrain.getMinMaxForTile(Pe)||Xe),pe.addShadowReceiver(Pe.toUnwrapped(),Xe.min,Xe.max)}}if(this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new o.dm(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new pm(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),!ao.has(this.context.gl))return;this.renderPass="offscreen";for(const Re of L){const Pe=s.getLayerSourceCache(Re);if(!Re.hasOffscreenPass()||Re.isHidden(this.transform.zoom))continue;const Xe=Pe?ne[Pe.id]:void 0;(Re.type==="custom"||Re.type==="raster"||Re.type==="raster-particle"||Re.isSky()||Xe&&Xe.length)&&this.renderLayer(this,Pe,Re,Xe)}this.depthRangeFor3D=[0,1-(L.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,oe)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const we=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),be=(()=>{if(u.showOverdrawInspector)return o.bz.black;const Re=this.style.fog;if(Re&&this.transform.projection.supportsFog){const Pe=this.style.getLut(Re.scope);if(!we){const Xe=Re.properties.get("color").toRenderColor(Pe).toArray01();return new o.bz(...Xe)}if(we){const Xe=Re.properties.get("space-color").toRenderColor(Pe).toArray01();return new o.bz(...Xe)}}return o.bz.transparent})();if(this.context.clear({color:be,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&we&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=w.length-1;this.currentLayer>=0;this.currentLayer--){const Re=L[this.currentLayer],Pe=s.getLayerSourceCache(Re);if(Re.isSky())continue;const Xe=Pe?(Re.is3D()?ae:ne)[Pe.id]:void 0;this._renderTileClippingMasks(Re,Pe,Xe),this.renderLayer(this,Pe,Re,Xe)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&we&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||o.a9(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<w.length;this.currentLayer++){const Re=L[this.currentLayer],Pe=s.getLayerSourceCache(Re);Re.isSky()&&this.renderLayer(this,Pe,Re,Pe?ne[Pe.id]:void 0)}function Fe(Re,Pe){let Xe;return Pe&&(Xe=(Re.type==="symbol"?ie:Re.is3D()?ae:ne)[Pe.id]),Xe}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<w.length;){const Re=L[this.currentLayer];if(Re.type==="raster"||Re.type==="raster-particle"){const Pe=s.getLayerSourceCache(Re);this.renderLayer(this,Pe,Re,Fe(Re,Pe))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let Ee=0;pe&&(Ee=pe.getShadowCastingLayerCount());let Me=!1,Qe=-1;for(let Re=0;Re<w.length;++Re){const Pe=L[Re];Pe.isHidden(this.transform.zoom)||Pe.is3D()&&(Qe=Re)}for(D&&Qe===-1&&(C=!0);this.currentLayer<w.length;){const Re=L[this.currentLayer],Pe=s.getLayerSourceCache(Re);if(Re.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(Re)){if(Re.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(C&&!Me&&this.terrain&&!this.transform.isOrthographic&&(Me=!0,this.blitDepth()),D&&Qe!==-1&&this.currentLayer===Qe+1&&!this.transform.isOrthographic&&this.blitDepth(),Re.is3D()||this.terrain||this._renderTileClippingMasks(Re,Pe,Pe?Z[Pe.id]:void 0),this.renderLayer(this,Pe,Re,Fe(Re,Pe)),!this.terrain&&pe&&Ee>0&&Re.hasShadowPass()&&--Ee==0&&(pe.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const Xe=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=Xe;this.currentLayer++){const ct=L[this.currentLayer];if(!ct.hasLightBeamPass())continue;const _t=s.getLayerSourceCache(ct);this.renderLayer(this,_t,ct,_t?ne[_t.id]:void 0)}this.currentLayer=Xe,this.renderPass="translucent"}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const Xe=this.currentLayer;this.depthOcclusion=!0;for(const ct of this.layersWithOcclusionOpacity){this.currentLayer=ct;const _t=L[this.currentLayer],lt=s.getLayerSourceCache(_t),St=lt?ne[lt.id]:void 0;_t.is3D()||this.terrain||this._renderTileClippingMasks(_t,lt,lt?Z[lt.id]:void 0),this.renderLayer(this,lt,_t,St)}this.depthOcclusion=!1,this.currentLayer=Xe,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let Re=null;L.forEach(Pe=>{const Xe=s.getLayerSourceCache(Pe);Xe&&!Pe.isHidden(this.transform.zoom)&&Xe.getVisibleCoordinates().length&&(!Re||Re.getSource().maxzoom<Xe.getSource().maxzoom)&&(Re=Xe)}),Re&&this.options.showTileBoundaries&&nu.debug(this,Re,Re.getVisibleCoordinates(),o.bz.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&nu.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new o.bz(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(Re){const Pe=Re.transform.padding;ri(Re,Re.transform.height-(Pe.top||0),3,IT),ri(Re,Pe.bottom||0,3,mh),$e(Re,Pe.left||0,3,gh),$e(Re,Re.transform.width-(Pe.right||0),3,kt);const Xe=Re.transform.centerPoint;(function(ct,_t,lt,St){pf(ct,_t-1,lt-10,2,20,St),pf(ct,_t-10,lt-1,20,2,St)})(Re,Xe.x,Re.transform.height-Xe.y,nr)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),j||(this.conflationActive=!1)}prepareLayer(s){this.gpuTimingStart(s);const{unsupportedLayers:u}=this.transform.projection,m=!u||!u.includes(s.type);if(ym[s.type]&&(m||this.terrain&&s.type==="custom")){const _=this.style.getLayerSourceCache(s);ym[s.type](s,_,this)}this.gpuTimingEnd()}renderLayer(s,u,m,_){m.isHidden(this.transform.zoom)||(m.type==="background"||m.type==="sky"||m.type==="custom"||m.type==="model"||m.type==="raster"||m.type==="raster-particle"||_&&_.length)&&(this.id=m.id,this.gpuTimingStart(m),s.transform.projection.unsupportedLayers&&s.transform.projection.unsupportedLayers.includes(m.type)&&(!s.terrain||m.type!=="custom")||m.type==="clip"||nu[m.type](s,u,m,_,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(s){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery,m=this.context.gl;let _=this.gpuTimers[s.id];_||(_=this.gpuTimers[s.id]={calls:0,cpuTime:0,query:m.createQuery()}),_.calls++,m.beginQuery(u.TIME_ELAPSED_EXT,_.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const s=this.context.extTimerQuery,u=this.context.gl,m=u.createQuery();this.deferredRenderGpuTimeQueries.push(m),u.beginQuery(s.TIME_ELAPSED_EXT,m)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const s=this.gpuTimers;return this.gpuTimers={},s}collectDeferredRenderGpuQueries(){const s=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],s}queryGpuTimers(s){const u={};for(const m in s){const _=s[m],w=this.context.extTimerQuery,C=w.getQueryParameter(_.query,this.context.gl.QUERY_RESULT)/1e6;w.deleteQueryEXT(_.query),u[m]=C}return u}queryGpuTimeDeferredRender(s){if(!this.options.gpuTimingDeferredRender)return 0;const u=this.context.extTimerQuery,m=this.context.gl;let _=0;for(const w of s)_+=u.getQueryParameter(w,m.QUERY_RESULT)/1e6,u.deleteQueryEXT(w);return _}translatePosMatrix(s,u,m,_,w){if(!m[0]&&!m[1])return s;const C=w?_==="map"?this.transform.angle:0:_==="viewport"?-this.transform.angle:0;if(C){const z=Math.sin(C),N=Math.cos(C);m=[m[0]*N-m[1]*z,m[0]*z+m[1]*N]}const D=[w?m[0]:o.ak(u,m[0],this.transform.zoom),w?m[1]:o.ak(u,m[1],this.transform.zoom),0],L=new Float32Array(16);return o.a6.mat4.translate(L,s,D),L}saveTileTexture(s){const u=s.size[0],m=this._tileTextures[u];m?m.push(s):this._tileTextures[u]=[s]}getTileTexture(s){const u=this._tileTextures[s];return u&&u.length>0?u.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(s,u,m){const _=m===void 0?this.terrain&&this.terrain.renderingToTexture:m,w=[];return this.style&&this.style.enable3dLights()&&(s==="globeRaster"||s==="terrainRaster"?(w.push("LIGHTING_3D_MODE"),w.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):_||w.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"?this._shadowMapDebug||w.push("DEPTH_TEXTURE"):this.shadowRenderer&&(this.shadowRenderer.useNormalOffset?w.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"):w.push("RENDER_SHADOWS","DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(w.push("TERRAIN"),this.linearFloatFilteringSupported()&&w.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&w.push("GLOBE"),!this._fogVisible||_||u!==void 0&&!u||w.push("FOG","FOG_DITHERING"),_&&w.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&w.push("OVERDRAW_INSPECTOR"),w}getOrCreateProgram(s,u){this.cache=this.cache||{};const m=u&&u.defines||[],_=u&&u.config,w=this.currentGlobalDefines(s,u&&u.overrideFog,u&&u.overrideRtt).concat(m),C=eu.cacheKey(Jc[s],s,w,_);return this.cache[C]||(this.cache[C]=new eu(this.context,s,Jc[s],_,$x[s],w)),this.cache[C]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(s,u){if(this.style.enable3dLights()){const m=this.style.directionalLight,_=this.style.ambientLight;if(m&&_){const w=((C,D,L)=>{const z=C.properties.get("direction"),N=C.properties.get("color").toRenderColor(L.getLut(C.scope)).toArray01(),j=C.properties.get("intensity"),q=D.properties.get("color").toRenderColor(L.getLut(D.scope)).toArray01(),Z=D.properties.get("intensity"),ne=[z.x,z.y,z.z],ie=o.cH(q,Z),oe=o.cH(N,j);return{u_lighting_ambient_color:ie,u_lighting_directional_dir:ne,u_lighting_directional_color:oe,u_ground_radiance:nv(ne,oe,ie)}})(m,_,this.style);u.setLightsUniformValues(s,w)}}}uploadCommonUniforms(s,u,m,_,w){if(this.uploadCommonLightUniforms(s,u),this.terrain&&this.terrain.renderingToTexture)return;const C=this.style.fog;if(C){const D=C.getOpacity(this.transform.pitch),L=((z,N,j,q,Z,ne,ie,oe,ae,ge,ye,pe)=>{const we=z.transform,be=N.properties.get("color").toRenderColor(z.style.getLut(N.scope)).toArray01();be[3]=q;const Fe=z.frameCounter/1e3%1,[Ee,Me]=N.properties.get("vertical-range");return{u_fog_matrix:j?we.calculateFogTileMatrix(j):pe||z.identityMat,u_fog_range:N.getFovAdjustedRange(we._fov),u_fog_color:be,u_fog_horizon_blend:N.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(Ee,Me),Me],u_fog_temporal_offset:Fe,u_frustum_tl:Z,u_frustum_tr:ne,u_frustum_br:ie,u_frustum_bl:oe,u_globe_pos:ae,u_globe_radius:ge,u_viewport:ye,u_globe_transition:o.a9(we.zoom),u_is_globe:+(we.projection.name==="globe")}})(this,C,m,D,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*o.q.devicePixelRatio,this.transform.height*o.q.devicePixelRatio],_);u.setFogUniformValues(s,L)}w&&u.setCutoffUniformValues(s,w.uniformValues)}setTileLoadedFlag(s){this.tileLoaded=s}saveCanvasCopy(){const s=this.canvasCopy();s&&(this.frameCopies.push(s),this.tileLoaded=!1)}canvasCopy(){const s=this.context.gl,u=s.createTexture();return s.bindTexture(s.TEXTURE_2D,u),s.copyTexImage2D(s.TEXTURE_2D,0,s.RGBA,0,0,s.drawingBufferWidth,s.drawingBufferHeight,0),u}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const s=this.style&&this.style.fog;return!!s&&s.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const s=this._backgroundTiles,u=this._backgroundTiles={},m=this.transform.coveringTiles({tileSize:512});for(const _ of m)u[_.key]=s[_.key]||new ms(_,512,this.transform.tileZoom,this);return u}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(s,u){return!(!s.is3D()||s.type!=="clip"&&(s.minzoom&&s.minzoom>this.transform.zoom||(this.style._clipLayerPresent||s.sourceLayer!=="building")&&(!u||u.type!=="batched-model")))}isTileAffectedByFog(s){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let u=this._cachedTileFogOpacities[s.key];return u||(this._cachedTileFogOpacities[s.key]=u=this.style.fog.getOpacityForTile(s)),u[0]>=zt||u[1]>=zt}setupDepthForOcclusion(s,u,m){const _=this.context,w=_.gl,C=!!m;var D;m||(m={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),_.activeTexture.set(w.TEXTURE3),s&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),m.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],m.u_depth_range_unpack=[2/((D=this.depthRangeFor3D)[1]-D[0]),-1-2*D[0]/(D[1]-D[0])],m.u_occluder_half_size=.5*this.occlusionParams.occluderSize,m.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),_.activeTexture.set(w.TEXTURE0),C||u.setTerrainUniformValues(_,m)}}function uc(p,s){let u=!1,m=null;const _=()=>{m=null,u&&(p(),m=setTimeout(_,s),u=!1)};return()=>(u=!0,m||_(),m)}class iu{constructor(s){this._hashName=s&&encodeURIComponent(s),o.aJ(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=uc(this._updateHashUnthrottled.bind(this),300)}addTo(s){return this._map=s,window.addEventListener("hashchange",this._onHashChange,!1),s.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const s=this._map;if(!s)return"";const u=Ac(s);if(this._hashName){const m=this._hashName;let _=!1;const w=location.hash.slice(1).split("&").map(C=>{const D=C.split("=")[0];return D===m?(_=!0,`${D}=${u}`):C}).filter(C=>C);return _||w.push(`${m}=${u}`),`#${w.join("&")}`}return`#${u}`}_getCurrentHash(){const s=location.hash.replace("#","");if(this._hashName){let u;return s.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(u=m)}),(u&&u[1]||"").split("/")}return s.split("/")}_onHashChange(){const s=this._map;if(!s)return!1;const u=this._getCurrentHash();if(u.length>=3&&!u.some(m=>isNaN(m))){const m=s.dragRotate.isEnabled()&&s.touchZoomRotate.isEnabled()?+(u[3]||0):s.getBearing();return s.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:m,pitch:+(u[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function Ac(p,s){const u=p.getCenter(),m=Math.round(100*p.getZoom())/100,_=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,_),C=Math.round(u.lng*w)/w,D=Math.round(u.lat*w)/w,L=p.getBearing(),z=p.getPitch();let N=s?`/${C}/${D}/${m}`:`${m}/${D}/${C}`;return(L||z)&&(N+="/"+Math.round(10*L)/10),z&&(N+=`/${Math.round(z)}`),N}const eA={linearity:.3,easing:o.dp(0,0,.3,1)},_m=o.l({deceleration:2500,maxSpeed:1400},eA),yv=o.l({deceleration:20,maxSpeed:1400},eA),_v=o.l({deceleration:1e3,maxSpeed:360},eA),xv=o.l({deceleration:1e3,maxSpeed:90},eA);class ou{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.q.now(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,u=o.q.now();for(;s.length>0&&u-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const u={zoom:0,bearing:0,pitch:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)u.zoom+=w.zoomDelta||0,u.bearing+=w.bearingDelta||0,u.pitch+=w.pitchDelta||0,w.panDelta&&u.pan._add(w.panDelta),w.around&&(u.around=w.around),w.pinchAround&&(u.pinchAround=w.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(u.pan.mag()){const w=tA(u.pan.mag(),m,o.l({},_m,s||{}));_.offset=u.pan.mult(w.amount/u.pan.mag()),_.center=this._map.transform.center,_h(_,w)}if(u.zoom){const w=tA(u.zoom,m,yv);_.zoom=this._map.transform.zoom+w.amount,_h(_,w)}if(u.bearing){const w=tA(u.bearing,m,_v);_.bearing=this._map.transform.bearing+o.ap(w.amount,-179,179),_h(_,w)}if(u.pitch){const w=tA(u.pitch,m,xv);_.pitch=this._map.transform.pitch+w.amount,_h(_,w)}if(_.zoom||_.bearing){const w=u.pinchAround===void 0?u.around:u.pinchAround;_.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),_.noMoveStart=!0,_}}function _h(p,s){(!p.duration||p.duration<s.duration)&&(p.duration=s.duration,p.easing=s.easing)}function tA(p,s,u){const{maxSpeed:m,linearity:_,deceleration:w}=u,C=o.ap(p*_/(s/1e3),-m,m),D=Math.abs(C)/(w*_);return{easing:u.easing,duration:1e3*D,amount:C*(D/2)}}class ca extends o.x{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,u,m,_={}){const w=Ue(u.getCanvasContainer(),m),C=u.unproject(w);super(s,o.l({point:w,lngLat:C,originalEvent:m},_)),this._defaultPrevented=!1,this.target=u}}class xh extends o.x{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,u,m){const _=s==="touchend"?m.changedTouches:m.touches,w=Ge(u.getCanvasContainer(),_),C=w.map(L=>u.unproject(L)),D=w.reduce((L,z,N,j)=>L.add(z.div(j.length)),new o.P(0,0));super(s,{points:w,point:D,lngLats:C,lngLat:u.unproject(D),originalEvent:m}),this._defaultPrevented=!1}}class Fo extends o.x{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,u){super("wheel",{originalEvent:u}),this._defaultPrevented=!1}}class bv{constructor(s,u){this._map=s,this._clickTolerance=u.clickTolerance}reset(){this._mousedownPos=void 0}wheel(s){return this._firePreventable(new Fo(this._map,s))}mousedown(s,u){return this._mousedownPos=u,this._firePreventable(new ca(s.type,this._map,s))}mouseup(s){this._map.fire(new ca(s.type,this._map,s))}preclick(s){const u=o.l({},s);u.type="preclick",this._map.fire(new ca(u.type,this._map,u))}click(s,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||(this.preclick(s),this._map.fire(new ca(s.type,this._map,s)))}dblclick(s){return this._firePreventable(new ca(s.type,this._map,s))}mouseover(s){this._map.fire(new ca(s.type,this._map,s))}mouseout(s){this._map.fire(new ca(s.type,this._map,s))}touchstart(s){return this._firePreventable(new xh(s.type,this._map,s))}touchmove(s){this._map.fire(new xh(s.type,this._map,s))}touchend(s){this._map.fire(new xh(s.type,this._map,s))}touchcancel(s){this._map.fire(new xh(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class wv{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(s){this._map.fire(new ca(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ca("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._map.fire(new ca(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class bh{constructor(s,u){this._map=s,this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,u){this.isEnabled()&&s.shiftKey&&s.button===0&&(ce(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(s,u){if(!this._active)return;const m=u,_=this._startPos,w=this._lastPos;if(!_||!w||w.equals(m)||!this._box&&m.dist(_)<this._clickTolerance)return;this._lastPos=m,this._box||(this._box=ee("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",s));const C=Math.min(_.x,m.x),D=Math.max(_.x,m.x),L=Math.min(_.y,m.y),z=Math.max(_.y,m.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${C}px,${L}px)`,this._box.style.width=D-C+"px",this._box.style.height=z-L+"px")})}mouseupWindow(s,u){if(!this._active)return;const m=this._startPos,_=u;if(m&&s.button===0){if(this.reset(),fe(),m.x!==_.x||m.y!==_.y)return this._map.fire(new o.x("boxzoomend",{originalEvent:s})),{cameraAnimation:w=>w.fitScreenCoordinates(m,_,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",s)}}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),he(),delete this._startPos,delete this._lastPos}_fireEvent(s,u){return this._map.fire(new o.x(s,{originalEvent:u}))}}function hc(p,s){const u={};for(let m=0;m<p.length;m++)u[p[m].identifier]=s[m];return u}class Bv{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(s,u,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=s.timeStamp),m.length===this.numTouches&&(this.centroid=function(_){const w=new o.P(0,0);for(const C of _)w._add(C);return w.div(_.length)}(u),this.touches=hc(m,u)))}touchmove(s,u,m){if(this.aborted||!this.centroid)return;const _=hc(m,u);for(const w in this.touches){const C=_[w];(!C||C.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(s,u,m){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class yf{constructor(s){this.singleTap=new Bv(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(s,u,m){this.singleTap.touchstart(s,u,m)}touchmove(s,u,m){this.singleTap.touchmove(s,u,m)}touchend(s,u,m){const _=this.singleTap.touchend(s,u,m);if(_){const w=s.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(_)<30;if(w&&C||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class Cv{constructor(){this._zoomIn=new yf({numTouches:1,numTaps:2}),this._zoomOut=new yf({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,u,m){this._zoomIn.touchstart(s,u,m),this._zoomOut.touchstart(s,u,m)}touchmove(s,u,m){this._zoomIn.touchmove(s,u,m),this._zoomOut.touchmove(s,u,m)}touchend(s,u,m){const _=this._zoomIn.touchend(s,u,m),w=this._zoomOut.touchend(s,u,m);return _?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:C.getZoom()+1,around:C.unproject(_)},{originalEvent:s})}):w?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:C.getZoom()-1,around:C.unproject(w)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const _f={0:1,2:2};class xf{constructor(s){this.reset(),this._clickTolerance=s.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(s,u){return!1}_move(s,u){return{}}mousedown(s,u){if(this._lastPoint)return;const m=He(s);this._correctButton(s,m)&&(this._lastPoint=u,this._eventButton=m)}mousemoveWindow(s,u){const m=this._lastPoint;if(m){if(s.preventDefault(),this._eventButton!=null&&function(_,w){const C=_f[w];return _.buttons===void 0||(_.buttons&C)!==C}(s,this._eventButton))this.reset();else if(this._moved||!(u.dist(m)<this._clickTolerance))return this._moved=!0,this._lastPoint=u,this._move(m,u)}}mouseupWindow(s){this._lastPoint&&He(s)===this._eventButton&&(this._moved&&fe(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xm extends xf{mousedown(s,u){super.mousedown(s,u),this._lastPoint&&(this._active=!0)}_correctButton(s,u){return u===0&&!s.ctrlKey}_move(s,u){return{around:u,panDelta:u.sub(s)}}}class bm extends xf{_correctButton(s,u){return u===0&&s.ctrlKey||u===2}_move(s,u){const m=.8*(u.x-s.x);if(m)return this._active=!0,{bearingDelta:m}}contextmenu(s){s.preventDefault()}}class wm extends xf{_correctButton(s,u){return u===0&&s.ctrlKey||u===2}_move(s,u){const m=-.5*(u.y-s.y);if(m)return this._active=!0,{pitchDelta:m}}contextmenu(s){s.preventDefault()}}class sb{constructor(s,u){this._map=s,this._el=s.getCanvasContainer(),this._minTouches=1,this._clickTolerance=u.clickTolerance||1,this.reset(),o.aJ(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}touchstart(s,u,m){return this._calculateTransform(s,u,m)}touchmove(s,u,m){if(this._active&&!(m.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(m.length===1&&!o.dq())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return s.cancelable&&s.preventDefault(),this._calculateTransform(s,u,m)}}touchend(s,u,m){this._calculateTransform(s,u,m),this._active&&m.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,u,m){m.length>0&&(this._active=!0);const _=hc(m,u),w=new o.P(0,0),C=new o.P(0,0);let D=0;for(const z in _){const N=_[z],j=this._touches[z];j&&(w._add(N),C._add(N.sub(j)),D++,_[z]=N)}if(this._touches=_,D<this._minTouches||!C.mag())return;const L=C.div(D);return this._sum._add(L),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(D),panDelta:L}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=ee("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class Bm{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(s){}_move(s,u,m){return{}}touchstart(s,u,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([u[0],u[1]]))}touchmove(s,u,m){const _=this._firstTwoTouches;if(!_)return;s.preventDefault();const[w,C]=_,D=bf(m,u,w),L=bf(m,u,C);if(!D||!L)return;const z=this._aroundCenter?null:D.add(L).div(2);return this._move([D,L],z,s)}touchend(s,u,m){if(!this._firstTwoTouches)return;const[_,w]=this._firstTwoTouches,C=bf(m,u,_),D=bf(m,u,w);C&&D||(this._active&&fe(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function bf(p,s,u){for(let m=0;m<p.length;m++)if(p[m].identifier===u)return s[m]}function Sv(p,s){return Math.log(p/s)/Math.LN2}class lb extends Bm{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,u){const m=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(Sv(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Sv(this._distance,m),pinchAround:u}}}function Ev(p,s){return 180*p.angleWith(s)/Math.PI}class cb extends Bm{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,u){const m=this._vector;if(this._vector=s[0].sub(s[1]),m&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Ev(this._vector,m),pinchAround:u}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const u=25/(Math.PI*this._minDiameter)*360,m=this._startVector;if(!m)return!1;const _=Ev(s,m);return Math.abs(_)<u}}function Cm(p){return Math.abs(p.y)>Math.abs(p.x)}class ub extends Bm{constructor(s){super(),this._map=s}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(s){this._lastPoints=s,Cm(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,u,m){const _=this._lastPoints;if(!_)return;const w=s[0].sub(_[0]),C=s[1].sub(_[1]);return this._map._cooperativeGestures&&!o.dq()&&m.touches.length<3||(this._valid=this.gestureBeginsVertically(w,C,m.timeStamp),!this._valid)?void 0:(this._lastPoints=s,this._active=!0,{pitchDelta:(w.y+C.y)/2*-.5})}gestureBeginsVertically(s,u,m){if(this._valid!==void 0)return this._valid;const _=s.mag()>=2,w=u.mag()>=2;if(!_&&!w)return;if(!_||!w)return this._firstMove==null&&(this._firstMove=m),m-this._firstMove<100&&void 0;const C=s.y>0==u.y>0;return Cm(s)&&Cm(u)&&C}}const Ab={panStep:100,bearingStep:15,pitchStep:10};class hb{constructor(){const s=Ab;this._panStep=s.panStep,this._bearingStep=s.bearingStep,this._pitchStep=s.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let u=0,m=0,_=0,w=0,C=0;switch(s.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:s.shiftKey?m=-1:(s.preventDefault(),w=-1);break;case 39:s.shiftKey?m=1:(s.preventDefault(),w=1);break;case 38:s.shiftKey?_=1:(s.preventDefault(),C=-1);break;case 40:s.shiftKey?_=-1:(s.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(m=0,_=0),{cameraAnimation:D=>{const L=D.getZoom();D.easeTo({duration:300,easeId:"keyboardHandler",easing:db,zoom:u?Math.round(L)+u*(s.shiftKey?2:1):L,bearing:D.getBearing()+m*this._bearingStep,pitch:D.getPitch()+_*this._pitchStep,offset:[-w*this._panStep,-C*this._panStep],center:D.getCenter()},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function db(p){return p*(2-p)}const Tv=4.000244140625,RT=1/450;class LT{constructor(s,u){this._map=s,this._el=s.getCanvasContainer(),this._handler=u,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=RT,o.aJ(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(s){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(s.ctrlKey||s.metaKey||this.isZooming()||o.dq()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let u=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const m=o.q.now(),_=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,u!==0&&u%Tv==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=u,this._timeout=window.setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(_*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),s.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=s,this._delta-=u,this._active||this._start(s)),s.preventDefault()}_onTimeout(s){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(s)}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=Ue(this._el,s);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:u,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._map.transform;this._type==="wheel"&&s.projection.wrap&&(s._center.lng>=180||s._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const u=()=>s._terrainEnabled()&&this._aroundCoord?s.computeZoomRelativeTo(this._aroundCoord):s.zoom;if(this._delta!==0){const z=this._type==="wheel"&&Math.abs(this._delta)>Tv?this._wheelZoomRate:this._defaultZoomRate;let N=2/(1+Math.exp(-Math.abs(this._delta*z)));this._delta<0&&N!==0&&(N=1/N);const j=u(),q=Math.pow(2,j),Z=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):q;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(Z*N))),this._type==="wheel"&&(this._startZoom=j,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const m=typeof this._targetZoom=="number"?this._targetZoom:u(),_=this._startZoom,w=this._easing;let C,D=!1;if(this._type==="wheel"&&_&&w){const z=Math.min((o.q.now()-this._lastWheelEventTime)/200,1),N=w(z);C=o.aa(_,m,N),z<1?this._frameId||(this._frameId=!0):D=!0}else C=m,D=!0;this._active=!0,D&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let L=C-u();return L*this._lastDelta<0&&(L=0),{noInertia:!0,needsRenderFrame:!D,zoomDelta:L,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let u=o.dr;if(this._prevEase){const m=this._prevEase,_=(o.q.now()-m.start)/m.duration,w=m.easing(_+.01)-m.easing(_),C=.27/Math.sqrt(w*w+1e-4)*.01,D=Math.sqrt(.0729-C*C);u=o.dp(C,D,.25,1)}return this._prevEase={start:o.q.now(),duration:s,easing:u},u}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=ee("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class bi{constructor(s,u){this._clickZoom=s,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class fb{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(s,u){return s.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:m.getZoom()+(s.shiftKey?-1:1),around:m.unproject(u)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class OT{constructor(){this._tap=new yf({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(s,u,m){this._swipePoint||(this._tapTime&&s.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?m.length>0&&(this._swipePoint=u[0],this._swipeTouch=m[0].identifier):this._tap.touchstart(s,u,m))}touchmove(s,u,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const _=u[0],w=_.y-this._swipePoint.y;return this._swipePoint=_,s.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(s,u,m)}touchend(s,u,m){this._tapTime?this._swipePoint&&m.length===0&&this.reset():this._tap.touchend(s,u,m)&&(this._tapTime=s.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class UT{constructor(s,u,m){this._el=s,this._mousePan=u,this._touchPan=m}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class wf{constructor(s,u,m){this._pitchWithRotate=s.pitchWithRotate,this._mouseRotate=u,this._mousePitch=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class pb{constructor(s,u,m,_){this._el=s,this._touchZoom=u,this._touchRotate=m,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const wh=p=>p.zoom||p.drag||p.pitch||p.rotate;class Sm extends o.x{}class dc{constructor(){this.constants=[1,1,.01],this.radius=0}setup(s,u){const m=o.a6.vec3.sub([],u,s);this.radius=o.a6.vec3.length(m[2]<0?o.a6.vec3.div([],m,this.constants):[m[0],m[1],0])}projectRay(s){o.a6.vec3.div(s,s,this.constants),o.a6.vec3.normalize(s,s),o.a6.vec3.mul(s,s,this.constants);const u=o.a6.vec3.scale([],s,this.radius);if(u[2]>0){const m=o.a6.vec3.scale([],[0,0,1],o.a6.vec3.dot(u,[0,0,1])),_=o.a6.vec3.scale([],o.a6.vec3.normalize([],[u[0],u[1],0]),this.radius),w=o.a6.vec3.add([],u,o.a6.vec3.scale([],o.a6.vec3.sub([],o.a6.vec3.add([],_,m),u),2));u[0]=w[0],u[1]=w[1]}return u}}function rA(p){return p.panDelta&&p.panDelta.mag()||p.zoomDelta||p.bearingDelta||p.pitchDelta}class Yo{constructor(s,u){this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ou(s),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new dc,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(u),o.aJ(["handleEvent","handleWindowEvent"],this);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[_,w,C]of this._listeners){const D=_===document?this.handleWindowEvent:this.handleEvent;_.addEventListener(w,D,C)}}destroy(){for(const[s,u,m]of this._listeners){const _=s===document?this.handleWindowEvent:this.handleEvent;s.removeEventListener(u,_,m)}}_addDefaultHandlers(s){const u=this._map,m=u.getCanvasContainer();this._add("mapEvent",new bv(u,s));const _=u.boxZoom=new bh(u,s);this._add("boxZoom",_);const w=new Cv,C=new fb;u.doubleClickZoom=new bi(C,w),this._add("tapZoom",w),this._add("clickZoom",C);const D=new OT;this._add("tapDragZoom",D);const L=u.touchPitch=new ub(u);this._add("touchPitch",L);const z=new bm(s),N=new wm(s);u.dragRotate=new wf(s,z,N),this._add("mouseRotate",z,["mousePitch"]),this._add("mousePitch",N,["mouseRotate"]);const j=new xm(s),q=new sb(u,s);u.dragPan=new UT(m,j,q),this._add("mousePan",j),this._add("touchPan",q,["touchZoom","touchRotate"]);const Z=new cb,ne=new lb;u.touchZoomRotate=new pb(m,ne,Z,D),this._add("touchRotate",Z,["touchPan","touchZoom"]),this._add("touchZoom",ne,["touchPan","touchRotate"]),this._add("blockableMapEvent",new wv(u));const ie=u.scrollZoom=new LT(u,this);this._add("scrollZoom",ie,["mousePan"]);const oe=u.keyboard=new hb;this._add("keyboard",oe);for(const ae of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])s.interactive&&s[ae]&&u[ae].enable(s[ae])}_add(s,u,m){this._handlers.push({handlerName:s,handler:u,allowed:m}),this._handlersById[s]=u}stop(s){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!wh(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(s,u,m){for(const _ in s)if(_!==m&&(!u||u.indexOf(_)<0))return!0;return!1}handleWindowEvent(s){this.handleEvent(s,`${s.type}Window`)}_getMapTouches(s){const u=[];for(const m of s)this._el.contains(m.target)&&u.push(m);return u}handleEvent(s,u){this._updatingCamera=!0;const m=s.type==="renderFrame",_=m?void 0:s,w={needsRenderFrame:!1},C={},D={},L=s.touches?this._getMapTouches(s.touches):void 0,z=L?Ge(this._el,L):m?void 0:Ue(this._el,s);for(const{handlerName:q,handler:Z,allowed:ne}of this._handlers){if(!Z.isEnabled())continue;let ie;this._blockedByActive(D,ne,q)?Z.reset():Z[u||s.type]&&(ie=Z[u||s.type](s,z,L),this.mergeHandlerResult(w,C,ie,q,_),ie&&ie.needsRenderFrame&&this._triggerRenderFrame()),(ie||Z.isActive())&&(D[q]=Z)}const N={};for(const q in this._previousActiveHandlers)D[q]||(N[q]=_);this._previousActiveHandlers=D,(Object.keys(N).length||rA(w))&&(this._changes.push([w,C,N]),this._triggerRenderFrame()),(Object.keys(D).length||rA(w))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:j}=w;j&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],j(this._map))}mergeHandlerResult(s,u,m,_,w){if(!m)return;o.l(s,m);const C={handlerName:_,originalEvent:m.originalEvent||w};m.zoomDelta!==void 0&&(u.zoom=C),m.panDelta!==void 0&&(u.drag=C),m.pitchDelta!==void 0&&(u.pitch=C),m.bearingDelta!==void 0&&(u.rotate=C)}_applyChanges(){const s={},u={},m={};for(const[_,w,C]of this._changes)_.panDelta&&(s.panDelta=(s.panDelta||new o.P(0,0))._add(_.panDelta)),_.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+_.pitchDelta),_.around!==void 0&&(s.around=_.around),_.aroundCoord!==void 0&&(s.aroundCoord=_.aroundCoord),_.pinchAround!==void 0&&(s.pinchAround=_.pinchAround),_.noInertia&&(s.noInertia=_.noInertia),o.l(u,w),o.l(m,C);this._updateMapTransform(s,u,m),this._changes=[]}_updateMapTransform(s,u,m){const _=this._map,w=_.transform,C=ge=>[ge.x,ge.y,ge.z];if((ge=>{const ye=this._eventsInProgress.drag;return ye&&!this._handlersById[ye.handlerName].isActive()})()&&!rA(s)){const ge=w.zoom;w.cameraElevationReference="sea",this._originalZoom!=null&&w._orthographicProjectionAtLowPitch&&w.projection.name!=="globe"&&w.pitch===0?(w.cameraElevationReference="ground",w.zoom=this._originalZoom):(w.recenterOnTerrain(),w.cameraElevationReference="ground"),ge!==w.zoom&&this._map._update(!0)}if(w._isCameraConstrained&&_._stop(!0),!rA(s))return void this._fireEvents(u,m,!0);let{panDelta:D,zoomDelta:L,bearingDelta:z,pitchDelta:N,around:j,aroundCoord:q,pinchAround:Z}=s;w._isCameraConstrained&&(L>0&&(L=0),w._isCameraConstrained=!1),Z!==void 0&&(j=Z),(L||(ge=>u[ge]&&!this._eventsInProgress[ge])("drag"))&&j&&(this._dragOrigin=C(w.pointCoordinate3D(j)),this._originalZoom=w.zoom,this._trackingEllipsoid.setup(w._camera.position,this._dragOrigin)),w.cameraElevationReference="sea",_._stop(!0),j=j||_.transform.centerPoint,z&&(w.bearing+=z),N&&(w.pitch+=N),w._updateCameraState();const ne=[0,0,0];if(D)if(w.projection.name==="mercator"){const ge=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(j).dir),ye=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(j.sub(D)).dir);ne[0]=ye[0]-ge[0],ne[1]=ye[1]-ge[1]}else{const ge=w.pointCoordinate(j);if(w.projection.name==="globe"){D=D.rotate(-w.angle);const ye=w._pixelsPerMercatorPixel/w.worldSize;ne[0]=-D.x*o.ds(o.aM(ge.y))*ye,ne[1]=-D.y*o.ds(w.center.lat)*ye}else{const ye=w.pointCoordinate(j.sub(D));ge&&ye&&(ne[0]=ye.x-ge.x,ne[1]=ye.y-ge.y)}}const ie=w.zoom,oe=[0,0,0];if(L){const ge=C(q||w.pointCoordinate3D(j)),ye={dir:o.a6.vec3.normalize([],o.a6.vec3.sub([],ge,w._camera.position))};if(ye.dir[2]<0){const pe=w.zoomDeltaToMovement(ge,L);o.a6.vec3.scale(oe,ye.dir,pe)}}const ae=o.a6.vec3.add(ne,ne,oe);w._translateCameraConstrained(ae),L&&Math.abs(w.zoom-ie)>1e-4&&w.recenterOnTerrain(),w.cameraElevationReference="ground",this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(u,m,!0)}_fireEvents(s,u,m){const _=wh(this._eventsInProgress),w=wh(s),C={};for(const N in s){const{originalEvent:j}=s[N];this._eventsInProgress[N]||(C[`${N}start`]=j),this._eventsInProgress[N]=s[N]}!_&&w&&this._fireEvent("movestart",w.originalEvent);for(const N in C)this._fireEvent(N,C[N]);w&&this._fireEvent("move",w.originalEvent);for(const N in s){const{originalEvent:j}=s[N];this._fireEvent(N,j)}const D={};let L;for(const N in this._eventsInProgress){const{handlerName:j,originalEvent:q}=this._eventsInProgress[N];this._handlersById[j].isActive()||(delete this._eventsInProgress[N],L=u[j]||q,D[`${N}end`]=L)}for(const N in D)this._fireEvent(N,D[N]);const z=wh(this._eventsInProgress);if(m&&(_||w)&&!z){this._updatingCamera=!0;const N=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),j=q=>q!==0&&-this._bearingSnap<q&&q<this._bearingSnap;N?(j(N.bearing||this._map.getBearing())&&(N.bearing=0),this._map.easeTo(N,{originalEvent:L})):(this._map.fire(new o.x("moveend",{originalEvent:L})),j(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(s,u){this._map.fire(new o.x(s,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{this._frameId=void 0,this.handleEvent(new Sm("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const _l="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Fv extends o.E{constructor(s,u){super(),this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=u.bearingSnap,this._respectPrefersReducedMotion=u.respectPrefersReducedMotion!==!1,o.aJ(["_renderFrameCallback"],this)}getCenter(){return new o.bK(this.transform.center.lng,this.transform.center.lat)}setCenter(s,u){return this.jumpTo({center:s},u)}panBy(s,u,m){return s=o.P.convert(s).mult(-1),this.panTo(this.transform.center,o.l({offset:s},u),m)}panTo(s,u,m){return this.easeTo(o.l({center:s},u),m)}getZoom(){return this.transform.zoom}setZoom(s,u){return this.jumpTo({zoom:s},u),this}zoomTo(s,u,m){return this.easeTo(o.l({zoom:s},u),m)}zoomIn(s,u){return this.zoomTo(this.getZoom()+1,s,u),this}zoomOut(s,u){return this.zoomTo(this.getZoom()-1,s,u),this}getBearing(){return this.transform.bearing}setBearing(s,u){return this.jumpTo({bearing:s},u),this}getPadding(){return this.transform.padding}setPadding(s,u){return this.jumpTo({padding:s},u),this}rotateTo(s,u,m){return this.easeTo(o.l({bearing:s},u),m)}resetNorth(s,u){return this.rotateTo(0,o.l({duration:1e3},s),u),this}resetNorthPitch(s,u){return this.easeTo(o.l({bearing:0,pitch:0,duration:1e3},s),u),this}snapToNorth(s,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,u):this}getPitch(){return this.transform.pitch}setPitch(s,u){return this.jumpTo({pitch:s},u),this}cameraForBounds(s,u){s=o.as.convert(s);const m=u&&u.bearing||0,_=u&&u.pitch||0,w=s.getNorthWest(),C=s.getSouthEast();return this._cameraForBounds(this.transform,w,C,m,_,u)}_extendPadding(s){const u={top:0,right:0,bottom:0,left:0};return s==null?o.l({},u,this.transform.padding):typeof s=="number"?{top:s,bottom:s,right:s,left:s}:o.l({},u,s)}_extendCameraOptions(s){return(s=o.l({offset:[0,0],maxZoom:this.transform.maxZoom},s)).padding=this._extendPadding(s.padding),s}_minimumAABBFrustumDistance(s,u){const m=u.max[0]-u.min[0],_=u.max[1]-u.min[1];return m/_>s.aspect?m/(2*Math.tan(.5*s.fovX)*s.aspect):_/(2*Math.tan(.5*s.fovY)*s.aspect)}_cameraForBoundsOnGlobe(s,u,m,_,w,C){const D=s.clone(),L=this._extendCameraOptions(C);D.bearing=_,D.pitch=w;const z=o.bK.convert(u),N=o.bK.convert(m),j=.5*(z.lat+N.lat),q=.5*(z.lng+N.lng),Z=o.dt(j,q),ne=o.a6.vec3.normalize([],Z),ie=o.a6.vec3.normalize([],o.a6.vec3.cross([],ne,[0,1,0])),oe=o.a6.vec3.cross([],ie,ne),ae=[ie[0],ie[1],ie[2],0,oe[0],oe[1],oe[2],0,ne[0],ne[1],ne[2],0,0,0,0,1],ge=[Z,o.dt(z.lat,z.lng),o.dt(N.lat,z.lng),o.dt(N.lat,N.lng),o.dt(z.lat,N.lng),o.dt(j,z.lng),o.dt(j,N.lng),o.dt(z.lat,q),o.dt(N.lat,q)];let ye=o.c9.fromPoints(ge.map(ft=>[o.a6.vec3.dot(ie,ft),o.a6.vec3.dot(oe,ft),o.a6.vec3.dot(ne,ft)]));const pe=o.a6.vec3.transformMat4([],ye.center,ae);o.a6.vec3.squaredLength(pe)===0&&o.a6.vec3.set(pe,0,0,1),o.a6.vec3.normalize(pe,pe),o.a6.vec3.scale(pe,pe,o.aq),D.center=o.du(pe);const we=D.getWorldToCameraMatrix(),be=o.a6.mat4.invert(new Float64Array(16),we);ye=o.c9.applyTransform(ye,o.a6.mat4.multiply([],we,ae));const Fe=this._extendAABB(ye,D,L,_);if(!Fe)return void o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");ye=Fe,o.a6.vec3.transformMat4(pe,pe,we);const Ee=.5*(ye.max[2]-ye.min[2]),Me=this._minimumAABBFrustumDistance(D,ye),Qe=o.a6.vec3.scale([],[0,0,1],Ee),Re=o.a6.vec3.add(Qe,pe,Qe),Pe=Me+(D.pitch===0?0:o.a6.vec3.distance(pe,Re)),Xe=D.globeCenterInViewSpace,ct=o.a6.vec3.sub([],pe,[Xe[0],Xe[1],Xe[2]]);o.a6.vec3.normalize(ct,ct),o.a6.vec3.scale(ct,ct,Pe);const _t=o.a6.vec3.add([],pe,ct);o.a6.vec3.transformMat4(_t,_t,be);const lt=o.dw/o.aq,St=o.a6.vec3.length(_t),Ye=o.bD(Math.max(St*lt-o.dw,Number.EPSILON),0),mt=Math.min(D.zoomFromMercatorZAdjusted(Ye),L.maxZoom);return mt>.5*(o.c2+o.bU)?(D.setProjection({name:"mercator"}),D.zoom=mt,this._cameraForBounds(D,u,m,_,w,C)):{center:D.center,zoom:mt,bearing:_,pitch:w}}_extendAABB(s,u,m,_){const w=.5*((m.padding.left||0)+(m.padding.right||0)),C=.5*((m.padding.top||0)+(m.padding.bottom||0)),D=C,L=w,z=w,N=C,j=u.width-(L+z),q=u.height-(D+N),Z=o.a6.vec3.sub([],s.max,s.min),ne=Math.min(j/Z[0],q/Z[1]),ie=Math.min(u.scaleZoom(u.scale*ne),m.maxZoom);if(isNaN(ie))return null;const oe=u.scale/u.zoomScale(ie),ae=new o.c9([s.min[0]-L*oe,s.min[1]-N*oe,s.min[2]],[s.max[0]+z*oe,s.max[1]+D*oe,s.max[2]]),ge=(typeof m.offset.x=="number"&&typeof m.offset.y=="number"?new o.P(m.offset.x,m.offset.y):o.P.convert(m.offset)).rotate(-o.bB(_));return ae.center[0]-=ge.x*oe,ae.center[1]+=ge.y*oe,ae}queryTerrainElevation(s,u){const m=this.transform.elevation;return m?(u=o.l({},{exaggerated:!0},u),m.getAtPoint(o.a5.fromLngLat(s),null,u.exaggerated)):null}_cameraForBounds(s,u,m,_,w,C){if(s.projection.name==="globe")return this._cameraForBoundsOnGlobe(s,u,m,_,w,C);const D=s.clone(),L=this._extendCameraOptions(C);D.bearing=_,D.pitch=w;const z=o.bK.convert(u),N=o.bK.convert(m),j=new o.bK(z.lng,N.lat),q=new o.bK(N.lng,z.lat),Z=D.project(z),ne=D.project(N),ie=this.queryTerrainElevation(z),oe=this.queryTerrainElevation(N),ae=this.queryTerrainElevation(j),ge=this.queryTerrainElevation(q),ye=[[Z.x,Z.y,Math.min(ie||0,oe||0,ae||0,ge||0)],[ne.x,ne.y,Math.max(ie||0,oe||0,ae||0,ge||0)]];let pe=o.c9.fromPoints(ye);const we=D.getWorldToCameraMatrix(),be=o.a6.mat4.invert(new Float64Array(16),we);pe=o.c9.applyTransform(pe,we);const Fe=this._extendAABB(pe,D,L,_);if(!Fe)return void o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");pe=Fe;const Ee=.5*o.a6.vec3.sub([],pe.max,pe.min)[2],Me=this._minimumAABBFrustumDistance(D,pe),Qe=[0,0,1,0];o.a6.vec4.transformMat4(Qe,Qe,we),o.a6.vec4.normalize(Qe,Qe);const Re=o.a6.vec3.scale([],Qe,Me+Ee),Pe=o.a6.vec3.add([],pe.center,Re);o.a6.vec3.transformMat4(pe.center,pe.center,be),o.a6.vec3.transformMat4(Pe,Pe,be);const Xe=D.unproject(new o.P(pe.center[0],pe.center[1])),ct=o.dv(D.projection,Xe),_t=Math.pow(2,ct),lt=Math.min(D._zoomFromMercatorZ(Pe[2]*D.pixelsPerMeter*_t/D.worldSize),L.maxZoom);return D.mercatorFromTransition&&lt<.5*(o.c2+o.bU)?(D.setProjection({name:"globe"}),D.zoom=lt,this._cameraForBounds(D,u,m,_,w,C)):{center:Xe,zoom:lt,bearing:_,pitch:w}}fitBounds(s,u,m){const _=this.cameraForBounds(s,u);return this._fitInternal(_,u,m)}fitScreenCoordinates(s,u,m,_,w){const C=o.P.convert(s),D=o.P.convert(u),L=new o.P(Math.min(C.x,D.x),Math.min(C.y,D.y)),z=new o.P(Math.max(C.x,D.x),Math.max(C.y,D.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(C,D))return this;const N=this.transform.pointLocation3D(L),j=this.transform.pointLocation3D(z),q=this.transform.pointLocation3D(new o.P(L.x,z.y)),Z=this.transform.pointLocation3D(new o.P(z.x,L.y)),ne=[Math.min(N.lng,j.lng,q.lng,Z.lng),Math.min(N.lat,j.lat,q.lat,Z.lat)],ie=[Math.max(N.lng,j.lng,q.lng,Z.lng),Math.max(N.lat,j.lat,q.lat,Z.lat)],oe=_&&_.pitch?_.pitch:this.getPitch(),ae=this._cameraForBounds(this.transform,ne,ie,m,oe,_);return this._fitInternal(ae,_,w)}_fitInternal(s,u,m){return s?(u=o.l(s,u)).linear?this.easeTo(u,m):this.flyTo(u,m):this}jumpTo(s,u){this.stop();const m=s.preloadOnly?this.transform.clone():this.transform;let _=!1,w=!1,C=!1;"zoom"in s&&m.zoom!==+s.zoom&&(_=!0,m.zoom=+s.zoom),s.center!==void 0&&(m.center=o.bK.convert(s.center)),"bearing"in s&&m.bearing!==+s.bearing&&(w=!0,m.bearing=+s.bearing),"pitch"in s&&m.pitch!==+s.pitch&&(C=!0,m.pitch=+s.pitch);const D=typeof s.padding=="number"?this._extendPadding(s.padding):s.padding;if(s.padding!=null&&!m.isPaddingEqual(D))if(s.retainPadding===!1){const L=m.clone();L.padding=D,m.setLocationAtPoint(m.center,L.centerPoint)}else m.padding=D;return s.preloadOnly?(this._preloadTiles(m),this):(this.fire(new o.x("movestart",u)).fire(new o.x("move",u)),_&&this.fire(new o.x("zoomstart",u)).fire(new o.x("zoom",u)).fire(new o.x("zoomend",u)),w&&this.fire(new o.x("rotatestart",u)).fire(new o.x("rotate",u)).fire(new o.x("rotateend",u)),C&&this.fire(new o.x("pitchstart",u)).fire(new o.x("pitch",u)).fire(new o.x("pitchend",u)),this.fire(new o.x("moveend",u)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||o.w(_l),this.transform.getFreeCameraOptions()}setFreeCameraOptions(s,u){const m=this.transform;if(!m.projection.supportsFreeCamera)return o.w(_l),this;this.stop();const _=m.zoom,w=m.pitch,C=m.bearing;m.setFreeCameraOptions(s);const D=_!==m.zoom,L=w!==m.pitch,z=C!==m.bearing;return this.fire(new o.x("movestart",u)).fire(new o.x("move",u)),D&&this.fire(new o.x("zoomstart",u)).fire(new o.x("zoom",u)).fire(new o.x("zoomend",u)),z&&this.fire(new o.x("rotatestart",u)).fire(new o.x("rotate",u)).fire(new o.x("rotateend",u)),L&&this.fire(new o.x("pitchstart",u)).fire(new o.x("pitch",u)).fire(new o.x("pitchend",u)),this.fire(new o.x("moveend",u)),this}easeTo(s,u){this._stop(!1,s.easeId),((s=o.l({offset:[0,0],duration:500,easing:o.dr},s)).animate===!1||this._prefersReducedMotion(s))&&(s.duration=0);const m=this.transform,_=this.getZoom(),w=this.getBearing(),C=this.getPitch(),D=this.getPadding(),L="zoom"in s?+s.zoom:_,z="bearing"in s?this._normalizeBearing(s.bearing,w):w,N="pitch"in s?+s.pitch:C,j=this._extendPadding(s.padding),q=o.P.convert(s.offset);let Z,ne,ie;if(m.projection.name==="globe"){const Qe=o.a5.fromLngLat(m.center),Re=q.rotate(-m.angle);Qe.x+=Re.x/m.worldSize,Qe.y+=Re.y/m.worldSize;const Pe=Qe.toLngLat(),Xe=o.bK.convert(s.center||Pe);this._normalizeCenter(Xe),Z=m.centerPoint.add(Re),ne=new o.P(Qe.x,Qe.y).mult(m.worldSize),ie=new o.P(o.am(Xe.lng),o.at(Xe.lat)).mult(m.worldSize).sub(ne)}else{Z=m.centerPoint.add(q);const Qe=m.pointLocation(Z),Re=o.bK.convert(s.center||Qe);this._normalizeCenter(Re),ne=m.project(Qe),ie=m.project(Re).sub(ne)}const oe=m.zoomScale(L-_);let ae,ge;s.around&&(ae=o.bK.convert(s.around),ge=m.locationPoint(ae));const ye=this._zooming||L!==_,pe=this._rotating||w!==z,we=this._pitching||N!==C,be=!m.isPaddingEqual(j),Fe=s.retainPadding===!1?m.clone():m,Ee=Qe=>Re=>{if(ye&&(Qe.zoom=o.aa(_,L,Re)),pe&&(Qe.bearing=o.aa(w,z,Re)),we&&(Qe.pitch=o.aa(C,N,Re)),be&&(Fe.interpolatePadding(D,j,Re),Z=Fe.centerPoint.add(q)),ae)Qe.setLocationAtPoint(ae,ge);else{const Pe=Qe.zoomScale(Qe.zoom-_),Xe=L>_?Math.min(2,oe):Math.max(.5,oe),ct=Math.pow(Xe,1-Re),_t=Qe.unproject(ne.add(ie.mult(Re*ct)).mult(Pe));Qe.setLocationAtPoint(Qe.renderWorldCopies?_t.wrap():_t,Z)}return s.preloadOnly||this._fireMoveEvents(u),Qe};if(s.preloadOnly){const Qe=this._emulate(Ee,s.duration,m);return this._preloadTiles(Qe),this}const Me={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=ye,this._rotating=pe,this._pitching=we,this._padding=be,this._easeId=s.easeId,this._prepareEase(u,s.noMoveStart,Me),this._ease(Ee(m),Qe=>{m.cameraElevationReference==="sea"&&m.recenterOnTerrain(),this._afterEase(u,Qe)},s),this}_prepareEase(s,u,m={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),u||m.moving||this.fire(new o.x("movestart",s)),this._zooming&&!m.zooming&&this.fire(new o.x("zoomstart",s)),this._rotating&&!m.rotating&&this.fire(new o.x("rotatestart",s)),this._pitching&&!m.pitching&&this.fire(new o.x("pitchstart",s))}_fireMoveEvents(s){this.fire(new o.x("move",s)),this._zooming&&this.fire(new o.x("zoom",s)),this._rotating&&this.fire(new o.x("rotate",s)),this._pitching&&this.fire(new o.x("pitch",s))}_afterEase(s,u){if(this._easeId&&u&&this._easeId===u)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const m=this._zooming,_=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new o.x("zoomend",s)),_&&this.fire(new o.x("rotateend",s)),w&&this.fire(new o.x("pitchend",s)),this.fire(new o.x("moveend",s))}flyTo(s,u){if(this._prefersReducedMotion(s)){const ft=o.ar(s,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(ft,u)}this.stop(),s=o.l({offset:[0,0],speed:1.2,curve:1.42,easing:o.dr},s);const m=this.transform,_=this.getZoom(),w=this.getBearing(),C=this.getPitch(),D=this.getPadding(),L="zoom"in s?o.ap(+s.zoom,m.minZoom,m.maxZoom):_,z="bearing"in s?this._normalizeBearing(s.bearing,w):w,N="pitch"in s?+s.pitch:C,j=this._extendPadding(s.padding),q=m.zoomScale(L-_),Z=o.P.convert(s.offset);let ne=m.centerPoint.add(Z);const ie=m.pointLocation(ne),oe=o.bK.convert(s.center||ie);this._normalizeCenter(oe);const ae=m.project(ie),ge=m.project(oe).sub(ae);let ye=s.curve;const pe=Math.max(m.width,m.height),we=pe/q,be=ge.mag();if("minZoom"in s){const ft=o.ap(Math.min(s.minZoom,_,L),m.minZoom,m.maxZoom),Tt=pe/m.zoomScale(ft-_);ye=Math.sqrt(Tt/be*2)}const Fe=ye*ye;function Ee(ft){const Tt=(we*we-pe*pe+(ft?-1:1)*Fe*Fe*be*be)/(2*(ft?we:pe)*Fe*be);return Math.log(Math.sqrt(Tt*Tt+1)-Tt)}function Me(ft){return(Math.exp(ft)-Math.exp(-ft))/2}function Qe(ft){return(Math.exp(ft)+Math.exp(-ft))/2}const Re=Ee(0);let Pe=function(ft){return Qe(Re)/Qe(Re+ye*ft)},Xe=function(ft){return pe*((Qe(Re)*(Me(Tt=Re+ye*ft)/Qe(Tt))-Me(Re))/Fe)/be;var Tt},ct=(Ee(1)-Re)/ye;if(Math.abs(be)<1e-6||!isFinite(ct)){if(Math.abs(pe-we)<1e-6)return this.easeTo(s,u);const ft=we<pe?-1:1;ct=Math.abs(Math.log(we/pe))/ye,Xe=function(){return 0},Pe=function(Tt){return Math.exp(ft*ye*Tt)}}s.duration="duration"in s?+s.duration:1e3*ct/("screenSpeed"in s?+s.screenSpeed/ye:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0);const _t=w!==z,lt=N!==C,St=!m.isPaddingEqual(j),Ye=s.retainPadding===!1?m.clone():m,mt=ft=>Tt=>{const Mt=Tt*ct,yt=1/Pe(Mt);ft.zoom=Tt===1?L:_+ft.scaleZoom(yt),_t&&(ft.bearing=o.aa(w,z,Tt)),lt&&(ft.pitch=o.aa(C,N,Tt)),St&&(Ye.interpolatePadding(D,j,Tt),ne=Ye.centerPoint.add(Z));const bt=Tt===1?oe:ft.unproject(ae.add(ge.mult(Xe(Mt))).mult(yt));return ft.setLocationAtPoint(ft.renderWorldCopies?bt.wrap():bt,ne),ft._updateCameraOnTerrain(),s.preloadOnly||this._fireMoveEvents(u),ft};if(s.preloadOnly){const ft=this._emulate(mt,s.duration,m);return this._preloadTiles(ft),this}return this._zooming=!0,this._rotating=_t,this._pitching=lt,this._padding=St,this._prepareEase(u,!1),this._ease(mt(m),()=>this._afterEase(u),s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(s){}_cancelRenderFrame(s){}_stop(s,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const m=this._onEaseEnd;this._onEaseEnd=void 0,m.call(this,u)}if(!s){const m=this.handlers;m&&m.stop(!1)}return this}_ease(s,u,m){m.animate===!1||m.duration===0?(s(1),u()):(this._easeStart=o.q.now(),this._easeOptions=m,this._onEaseFrame=s,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const s=Math.min((o.q.now()-this._easeStart)/this._easeOptions.duration,1),u=this._onEaseFrame;u&&u(this._easeOptions.easing(s)),s<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(s,u){s=o.bA(s,-180,180);const m=Math.abs(s-u);return Math.abs(s-360-u)<m&&(s-=360),Math.abs(s+360-u)<m&&(s+=360),s}_normalizeCenter(s){const u=this.transform;if(u.maxBounds||u.projection.name!=="globe"&&!u.renderWorldCopies)return;const m=s.lng-u.center.lng;s.lng+=m>180?-360:m<-180?360:0}_prefersReducedMotion(s){return this._respectPrefersReducedMotion&&o.q.prefersReducedMotion&&!(s&&s.essential)}_emulate(s,u,m){const _=Math.ceil(15*u/1e3),w=[],C=s(m.clone());for(let D=0;D<=_;D++){const L=C(D/_);w.push(L.clone())}return w}_preloadTiles(s,u){}}class Em{constructor(s={}){this.options=s,o.aJ(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(s){const u=this.options&&this.options.compact,m=s._getUIString("AttributionControl.ToggleAttribution");this._map=s,this._container=ee("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=ee("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",m);const _=ee("span","mapboxgl-ctrl-icon",this._compactButton);return _.setAttribute("aria-hidden","true"),_.setAttribute("title",m),this._innerContainer=ee("div","mapboxgl-ctrl-attrib-inner",this._container),u&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),u===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let s=this._editLink;s||(s=this._editLink=this._container.querySelector(".mapbox-improve-map"));const u=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.e.ACCESS_TOKEN}];if(s){const m=u.reduce((_,w,C)=>(w.value&&(_+=`${w.key}=${w.value}${C<u.length-1?"&":""}`),_),"?");s.href=`${o.e.FEEDBACK_URL}/${m}#${Ac(this._map,!0)}`,s.rel="noopener nofollow"}}_updateData(s){!s||s.sourceDataType!=="metadata"&&s.sourceDataType!=="visibility"&&s.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let s=[];if(this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const u=this._map.style._mergedSourceCaches;for(const _ in u){const w=u[_];if(w.used){const C=w.getSource();C.attribution&&s.indexOf(C.attribution)<0&&s.push(C.attribution)}}s.sort((_,w)=>_.length-w.length),s=s.filter((_,w)=>{for(let C=w+1;C<s.length;C++)if(s[C].indexOf(_)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=[...this.options.customAttribution,...s]:s.unshift(this.options.customAttribution));const m=s.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,s.length?(this._innerContainer.innerHTML=m,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Iv{constructor(){o.aJ(["_updateLogo","_updateCompact"],this)}onAdd(s){this._map=s,this._container=ee("div","mapboxgl-ctrl");const u=ee("a","mapboxgl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://www.mapbox.com/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(s){s&&s.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const s=this._map.style._sourceCaches;if(Object.entries(s).length===0)return!0;for(const u in s){const m=s[u].getSource();if(m.hasOwnProperty("mapbox_logo")&&!m.mapbox_logo)return!1}return!0}_updateCompact(){const s=this._container.children;if(s.length){const u=s[0];this._map.getCanvasContainer().offsetWidth<250?u.classList.add("mapboxgl-compact"):u.classList.remove("mapboxgl-compact")}}}class mb{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const u=++this._id;return this._queue.push({callback:s,id:u,cancelled:!1}),u}remove(s){const u=this._currentlyRunning,m=u?this._queue.concat(u):this._queue;for(const _ of m)if(_.id===s)return void(_.cancelled=!0)}run(s=0){const u=this._currentlyRunning=this._queue;this._queue=[];for(const m of u)if(!m.cancelled&&(m.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class Bf{constructor(s){this.jumpTo(s)}getValue(s){if(s<=this._startTime)return this._start;if(s>=this._endTime)return this._end;const u=o.cw((s-this._startTime)/(this._endTime-this._startTime));return this._start*(1-u)+this._end*u}isEasing(s){return s>=this._startTime&&s<=this._endTime}jumpTo(s){this._startTime=-1/0,this._endTime=-1/0,this._start=s,this._end=s}easeTo(s,u,m){this._start=this.getValue(u),this._end=s,this._startTime=u,this._endTime=u+m}}const zT={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class QT{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}class Mv{constructor(s){this.map=s,this.interactionsByType=new Map,this.typeById=new Map,this.filters=new Map,this.handleType=this.handleType.bind(this)}add(s,u){if(this.typeById.has(s))throw new Error(`Interaction id "${s}" already exists.`);const{type:m,filter:_}=u;if(_){const C=o.M(_,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(C.result==="error")throw new Error(C.value.map(D=>`${D.key}: ${D.message}`).join(", "));this.filters.set(s,C.value)}const w=this.interactionsByType.get(m)||new Map;w.size===0&&(this.map.on(m,this.handleType),this.interactionsByType.set(m,w)),w.set(s,u),this.typeById.set(s,m)}remove(s){const u=this.typeById.get(s);if(!u)return;this.typeById.delete(s),this.filters.delete(s);const m=this.interactionsByType.get(u);m&&(m.delete(s),m.size===0&&this.map.off(u,this.handleType))}handleType(s){const u=s.features||this.map.queryRenderedFeatures(s.point);if(!u)return;const m=this.interactionsByType.get(s.type),_={zoom:0};for(const[w,C]of m){const D=this.filters.get(w),{handler:L,layers:z}=C;for(const N of u)if((!z||z.includes(N.layer.id))&&(!D||D.evaluate(_,N))&&L({id:w,feature:N,interaction:C})!==!1)break}}}const Pv={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0},Cf={showCompass:!0,showZoom:!0,visualizePitch:!1};class Bh{constructor(s,u,m=!1){this._clickTolerance=10,this.element=u,this.mouseRotate=new bm({clickTolerance:s.dragRotate._mouseRotate._clickTolerance}),this.map=s,m&&(this.mousePitch=new wm({clickTolerance:s.dragRotate._mousePitch._clickTolerance})),o.aJ(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),u.addEventListener("mousedown",this.mousedown),u.addEventListener("touchstart",this.touchstart,{passive:!1}),u.addEventListener("touchmove",this.touchmove),u.addEventListener("touchend",this.touchend),u.addEventListener("touchcancel",this.reset)}down(s,u){this.mouseRotate.mousedown(s,u),this.mousePitch&&this.mousePitch.mousedown(s,u),ce()}move(s,u){const m=this.map,_=this.mouseRotate.mousemoveWindow(s,u),w=_&&_.bearingDelta;if(w&&m.setBearing(m.getBearing()+w),this.mousePitch){const C=this.mousePitch.mousemoveWindow(s,u),D=C&&C.pitchDelta;D&&m.setPitch(m.getPitch()+D)}}off(){const s=this.element;s.removeEventListener("mousedown",this.mousedown),s.removeEventListener("touchstart",this.touchstart,{passive:!1}),s.removeEventListener("touchmove",this.touchmove),s.removeEventListener("touchend",this.touchend),s.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){he(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(s){this.down(o.l({},s,{ctrlKey:!0,preventDefault:()=>s.preventDefault()}),Ue(this.element,s)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(s){this.move(s,Ue(this.element,s))}mouseup(s){this.mouseRotate.mouseupWindow(s),this.mousePitch&&this.mousePitch.mouseupWindow(s),this.offTemp()}touchstart(s){s.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Ge(this.element,s.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>s.preventDefault()},this._startPos))}touchmove(s){s.targetTouches.length!==1?this.reset():(this._lastPos=Ge(this.element,s.targetTouches)[0],this.move({preventDefault:()=>s.preventDefault()},this._lastPos))}touchend(s){s.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function xl(p,s,u){if(p=new o.bK(p.lng,p.lat),s){const m=new o.bK(p.lng-360,p.lat),_=new o.bK(p.lng+360,p.lat),w=360*Math.ceil(Math.abs(p.lng-u.center.lng)/360),C=u.locationPoint(p).distSqr(s),D=s.x<0||s.y<0||s.x>u.width||s.y>u.height;u.locationPoint(m).distSqr(s)<C&&(D||Math.abs(m.lng-u.center.lng)<w)?p=m:u.locationPoint(_).distSqr(s)<C&&(D||Math.abs(_.lng-u.center.lng)<w)&&(p=_)}for(;Math.abs(p.lng-u.center.lng)>180;){const m=u.locationPoint(p);if(m.x>=0&&m.y>=0&&m.x<=u.width&&m.y<=u.height)break;p.lng>u.center.lng?p.lng-=360:p.lng+=360}return p}const ns={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class bl extends o.E{constructor(s,u){if(super(),(s instanceof HTMLElement||u)&&(s=o.l({element:s},u)),o.aJ(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=s&&s.occludedOpacity||.2,s&&s.element)this._element=s.element,this._offset=o.P.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=ee("div");const w=41,C=27,D=W("svg",{display:"block",height:w*this._scale+"px",width:C*this._scale+"px",viewBox:`0 0 ${C} ${w}`},this._element),L=W("radialGradient",{id:"shadowGradient"},W("defs",{},D));W("stop",{offset:"10%","stop-opacity":.4},L),W("stop",{offset:"100%","stop-opacity":.05},L),W("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},D),W("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},D),W("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},D),W("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},D),this._offset=o.P.convert(s&&s.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",w=>{w.preventDefault()}),this._element.addEventListener("mousedown",w=>{w.preventDefault()});const m=this._element.classList;for(const w in ns)m.remove(`mapboxgl-marker-anchor-${w}`);m.add(`mapboxgl-marker-anchor-${this._anchor}`);const _=s&&s.className?s.className.trim().split(/\s+/):[];m.add(..._),this._popup=null}addTo(s){return s===this._map||(this.remove(),this._map=s,s.getCanvasContainer().appendChild(this._element),s.on("move",this._updateMoving),s.on("moveend",this._update),s.on("remove",this._clearFadeTimer),s._addMarker(this),this.setDraggable(this._draggable),this._update(),s.on("click",this._onMapClick)),this}remove(){const s=this._map;return s&&(s.off("click",this._onMapClick),s.off("move",this._updateMoving),s.off("moveend",this._update),s.off("mousedown",this._addDragHandler),s.off("touchstart",this._addDragHandler),s.off("mouseup",this._onUp),s.off("touchend",this._onUp),s.off("mousemove",this._onMove),s.off("touchmove",this._onMove),s.off("remove",this._clearFadeTimer),s._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=o.bK.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const _=Math.sqrt(Math.pow(13.5,2)/2);s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,s._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(s){const u=s.code,m=s.charCode||s.keyCode;u!=="Space"&&u!=="Enter"&&m!==32&&m!==13||this.togglePopup()}_onMapClick(s){const u=s.originalEvent.target,m=this._element;this._popup&&(u===m||m.contains(u))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const s=this._popup;return s?(s.isOpen()?(s.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(s.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const s=this._map,u=this._pos;if(!s||!u)return!1;const m=s.unproject(u),_=s.getFreeCameraOptions();if(!_.position)return!1;const w=_.position.toLngLat();return w.distanceTo(m)<.9*w.distanceTo(this._lngLat)}_evaluateOpacity(){const s=this._map;if(!s)return;const u=this._pos;if(!u||u.x<0||u.x>s.transform.width||u.y<0||u.y>s.transform.height)return void this._clearFadeTimer();const m=s.unproject(u);let _;s._showingGlobe()&&o.dz(s.transform,this._lngLat)?_=0:(_=1-s._queryFogOpacity(m),s.transform._terrainEnabled()&&s.getTerrain()&&this._behindTerrain()&&(_*=this._occludedOpacity)),this._element.style.opacity=`${_}`,this._element.style.pointerEvents=_>0?"auto":"none",this._popup&&this._popup._setOpacity(_),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const s=this._pos;if(!s||!this._map)return;const u=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${s.x}px,${s.y}px)
            ${ns[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${u.x}px,${u.y}px)
        `}_calculateXYTransform(){const s=this._pos,u=this._map,m=this.getPitchAlignment();if(!u||!s||m!=="map")return"";if(!u._showingGlobe()){const L=u.getPitch();return L?`rotateX(${L}deg)`:""}const _=o.c0(o.dA(u.transform,this._lngLat)),w=s.sub(o.dB(u.transform)),C=Math.abs(w.x)+Math.abs(w.y);if(C===0)return"";const D=_/C;return`rotateX(${-w.y*D}deg) rotateY(${w.x*D}deg)`}_calculateZTransform(){const s=this._pos,u=this._map;if(!u||!s)return"";let m=0;const _=this.getRotationAlignment();if(_==="map")if(u._showingGlobe()){const w=u.project(new o.bK(this._lngLat.lng,this._lngLat.lat+.001)),C=u.project(new o.bK(this._lngLat.lng,this._lngLat.lat-.001)).sub(w);m=o.c0(Math.atan2(C.y,C.x))-90}else m=-u.getBearing();else if(_==="horizon"){const w=o.a7(4,6,u.getZoom()),C=o.dB(u.transform);C.y+=w*u.transform.height;const D=s.sub(C),L=o.c0(Math.atan2(D.y,D.x));m=(L>90?L-270:L+90)*(1-w)}return m+=this._rotation,m?`rotateZ(${m}deg)`:""}_update(s){cancelAnimationFrame(this._updateFrameId);const u=this._map;u&&(u.transform.renderWorldCopies&&(this._lngLat=xl(this._lngLat,this._pos,u.transform)),this._pos=u.project(this._lngLat),s===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),u._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(u._showingGlobe()||u.getTerrain()||u.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(s){return this._offset=o.P.convert(s),this._update(),this}addClassName(s){return this._element.classList.add(s),this}removeClassName(s){return this._element.classList.remove(s),this}toggleClassName(s){return this._element.classList.toggle(s)}_onMove(s){const u=this._map;if(!u)return;const m=this._pointerdownPos,_=this._positionDelta;if(m&&_){if(!this._isDragging){const w=this._clickTolerance||u._clickTolerance;if(s.point.dist(m)<w)return;this._isDragging=!0}this._pos=s.point.sub(_),this._lngLat=u.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.x("dragstart"))),this.fire(new o.x("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const s=this._map;s&&(s.off("mousemove",this._onMove),s.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new o.x("dragend")),this._state="inactive"}_addDragHandler(s){const u=this._map,m=this._pos;u&&m&&this._element.contains(s.originalEvent.target)&&(s.preventDefault(),this._positionDelta=s.point.sub(m),this._pointerdownPos=s.point,this._state="pending",u.on("mousemove",this._onMove),u.on("touchmove",this._onMove),u.once("mouseup",this._onUp),u.once("touchend",this._onUp))}setDraggable(s){this._draggable=!!s;const u=this._map;return u&&(s?(u.on("mousedown",this._addDragHandler),u.on("touchstart",this._addDragHandler)):(u.off("mousedown",this._addDragHandler),u.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(s){return this._occludedOpacity=s||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const nA={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},au={maxWidth:100,unit:"metric"},NT={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},VT={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},HT=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function gb(p=new o.P(0,0),s="bottom"){if(typeof p=="number"){const u=Math.round(Math.sqrt(.5*Math.pow(p,2)));switch(s){case"top":return new o.P(0,p);case"top-left":return new o.P(u,u);case"top-right":return new o.P(-u,u);case"bottom":return new o.P(0,-p);case"bottom-left":return new o.P(u,-u);case"bottom-right":return new o.P(-u,-u);case"left":return new o.P(p,0);case"right":return new o.P(-p,0)}return new o.P(0,0)}return p instanceof o.P||Array.isArray(p)?o.P.convert(p):o.P.convert(p[s]||[0,0])}return{version:x,supported:K.supported,setRTLTextPlugin:o.dC,getRTLTextPluginStatus:o.dD,Map:class extends Fv{constructor(p){k.mark(S.create);const s=p;if((p=o.l({},Pv,p)).minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(p.antialias&&o.dx(window)&&(p.antialias=!1,o.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Qp(p.minZoom,p.maxZoom,p.minPitch,p.maxPitch,p.renderWorldCopies),p),this._repaint=!!p.repaint,this._interactive=p.interactive,this._minTileCacheSize=p.minTileCacheSize,this._maxTileCacheSize=p.maxTileCacheSize,this._failIfMajorPerformanceCaveat=p.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=p.preserveDrawingBuffer,this._antialias=p.antialias,this._trackResize=p.trackResize,this._bearingSnap=p.bearingSnap,this._refreshExpiredTiles=p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=p.crossSourceCollisions,this._collectResourceTiming=p.collectResourceTiming,this._language=this._parseLanguage(p.language),this._worldview=p.worldview,this._renderTaskQueue=new mb,this._domRenderTaskQueue=new mb,this._controls=[],this._markers=[],this._popups=[],this._mapId=o.aP(),this._locale=o.l({},zT,p.locale),this._clickTolerance=p.clickTolerance,this._cooperativeGestures=p.cooperativeGestures,this._performanceMetricsCollection=p.performanceMetricsCollection,this._tessellationStep=p.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=p.precompilePrograms,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Bf(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._requestManager=new Et(p.transformRequest,p.accessToken,p.testMode),this._silenceAuthErrors=!!p.testMode,this._contextCreateOptions=p.contextCreateOptions?{...p.contextCreateOptions}:{},typeof p.container=="string"){const u=document.getElementById(p.container);if(!u)throw new Error(`Container '${p.container.toString()}' not found.`);this._container=u}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(this._container.childNodes.length>0&&o.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),p.maxBounds&&this.setMaxBounds(p.maxBounds),o.aJ(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new QT),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new Yo(this,p),this._localFontFamily=p.localFontFamily,this._localIdeographFontFamily=p.localIdeographFontFamily,(p.style||!p.testMode)&&this.setStyle(p.style||o.e.DEFAULT_STYLE,{config:p.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),p.projection&&this.setProjection(p.projection),p.hash&&(this._hash=new iu(typeof p.hash=="string"&&p.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){s.center==null&&s.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch});const u=p.bounds;u&&(this.resize(),this.fitBounds(u,o.l({},p.fitBoundsOptions,{duration:0})))}this.resize(),p.attributionControl&&this.addControl(new Em({customAttribution:p.customAttribution})),this._logoControl=new Iv,this.addControl(this._logoControl,p.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new o.x(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new o.x(`${u.dataType}dataloading`,u))}),this._interactions=new Mv(this)}_getMapId(){return this._mapId}addControl(p,s){if(s===void 0&&(s=p.getDefaultPosition?p.getDefaultPosition():"top-right"),!p||!p.onAdd)return this.fire(new o.t(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=p.onAdd(this);this._controls.push(p);const m=this._controlPositions[s];return s.indexOf("bottom")!==-1?m.insertBefore(u,m.firstChild):m.appendChild(u),this}removeControl(p){if(!p||!p.onRemove)return this.fire(new o.t(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(p);return s>-1&&this._controls.splice(s,1),p.onRemove(this),this}hasControl(p){return this._controls.indexOf(p)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(p){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const s=!this._moving;return s&&this.fire(new o.x("movestart",p)).fire(new o.x("move",p)),this.fire(new o.x("resize",p)),s&&this.fire(new o.x("moveend",p)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(p){return this.transform.setMaxBounds(o.as.convert(p)),this._update()}setMinZoom(p){if((p=p??-2)>=-2&&p<=this.transform.maxZoom)return this.transform.minZoom=p,this._update(),this.getZoom()<p?this.setZoom(p):this.fire(new o.x("zoomstart")).fire(new o.x("zoom")).fire(new o.x("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(p){if((p=p??22)>=this.transform.minZoom)return this.transform.maxZoom=p,this._update(),this.getZoom()>p?this.setZoom(p):this.fire(new o.x("zoomstart")).fire(new o.x("zoom")).fire(new o.x("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(p){if((p=p??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(p>=0&&p<=this.transform.maxPitch)return this.transform.minPitch=p,this._update(),this.getPitch()<p?this.setPitch(p):this.fire(new o.x("pitchstart")).fire(new o.x("pitch")).fire(new o.x("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(p){if((p=p??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(p>=this.transform.minPitch)return this.transform.maxPitch=p,this._update(),this.getPitch()>p?this.setPitch(p):this.fire(new o.x("pitchstart")).fire(new o.x("pitch")).fire(new o.x("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(p){return this.transform.renderWorldCopies=p,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(p){return p==="auto"?navigator.language:Array.isArray(p)?p.length===0?void 0:p.map(s=>s==="auto"?navigator.language:s):p}setLanguage(p){const s=this._parseLanguage(p);if(!this.style||s===this._language)return this;this._language=s,this.style.reloadSources();for(const u of this._controls)u._setLanguage&&u._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(p){return this.style&&p!==this._worldview?(this._worldview=p,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(p){return this._lazyInitEmptyStyle(),p?typeof p=="string"&&(p={name:p}):p=null,this._useExplicitProjection=!!p,this._prioritizeAndUpdateProjection(p,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const p=this.transform,s=p.projection.name;let u;s==="globe"&&p.zoom>=o.bU?(p.setMercatorFromTransition(),u=!0):s==="mercator"&&p.zoom<o.bU&&(p.setProjection({name:"globe"}),u=!0),u&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(p,s){return this._updateProjection(p||s||{name:"mercator"})}_updateProjection(p){let s;return s=p.name==="globe"&&this.transform.zoom>=o.bU?this.transform.setMercatorFromTransition():this.transform.setProjection(p),this.style.applyProjectionUpdate(),s&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(p){return this.transform.locationPoint3D(o.bK.convert(p))}unproject(p){return this.transform.pointLocation3D(o.P.convert(p))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(p,s,u){if(p==="mouseenter"||p==="mouseover"){let m=!1;const _=C=>{const D=s.filter(z=>this.getLayer(z)),L=D.length?this.queryRenderedFeatures(C.point,{layers:D}):[];L.length?m||(m=!0,u.call(this,new ca(p,this,C.originalEvent,{features:L}))):m=!1},w=()=>{m=!1};return{layers:new Set(s),listener:u,delegates:{mousemove:_,mouseout:w}}}if(p==="mouseleave"||p==="mouseout"){let m=!1;const _=C=>{const D=s.filter(L=>this.getLayer(L));(D.length?this.queryRenderedFeatures(C.point,{layers:D}):[]).length?m=!0:m&&(m=!1,u.call(this,new ca(p,this,C.originalEvent)))},w=C=>{m&&(m=!1,u.call(this,new ca(p,this,C.originalEvent)))};return{layers:new Set(s),listener:u,delegates:{mousemove:_,mouseout:w}}}{const m=_=>{const w=s.filter(D=>this.getLayer(D)),C=w.length?this.queryRenderedFeatures(_.point,{layers:w}):[];C.length&&(_.features=C,u.call(this,_),delete _.features)};return{layers:new Set(s),listener:u,delegates:{[p]:m}}}}on(p,s,u){if(typeof s=="function"||u===void 0)return super.on(p,s);if(Array.isArray(s)||(s=[s]),s){for(const _ of s)if(!this._isValidId(_))return this}const m=this._createDelegatedListener(p,s,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[p]=this._delegatedListeners[p]||[],this._delegatedListeners[p].push(m);for(const _ in m.delegates)this.on(_,m.delegates[_]);return this}once(p,s,u){if(typeof s=="function"||u===void 0)return super.once(p,s);if(Array.isArray(s)||(s=[s]),s){for(const _ of s)if(!this._isValidId(_))return this}const m=this._createDelegatedListener(p,s,u);for(const _ in m.delegates)this.once(_,m.delegates[_]);return this}off(p,s,u){if(typeof s=="function"||u===void 0)return super.off(p,s);const m=new Set(Array.isArray(s)?s:[s]);for(const C of m)if(!this._isValidId(C))return this;const _=(C,D)=>{if(C.size!==D.size)return!1;for(const L of C)if(!D.has(L))return!1;return!0},w=this._delegatedListeners?this._delegatedListeners[p]:void 0;return w&&(C=>{for(let D=0;D<C.length;D++){const L=C[D];if(L.listener===u&&_(L.layers,m)){for(const z in L.delegates)this.off(z,L.delegates[z]);return C.splice(D,1),this}}})(w),this}queryRenderedFeatures(p,s){if(!this.style)return[];if(s!==void 0||p===void 0||p instanceof o.P||Array.isArray(p)||(s=p,p=void 0),p=p||[[0,0],[this.transform.width,this.transform.height]],(s=s||{}).layers&&Array.isArray(s.layers)){for(const u of s.layers)if(!this._isValidId(u))return[]}return this.style.queryRenderedFeatures(p,s,this.transform)}querySourceFeatures(p,s){return this._isValidId(p)?this.style.querySourceFeatures(p,s):[]}isPointOnSurface(p){const{name:s}=this.transform.projection;return s!=="globe"&&s!=="mercator"&&o.w(`${s} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(o.P.convert(p))}addInteraction(p,s){return this._interactions.add(p,s),this}removeInteraction(p){return this._interactions.remove(p),this}setStyle(p,s){return s=o.l({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},s),this.style&&p&&s.diff!==!1&&s.localFontFamily===this._localFontFamily&&s.localIdeographFontFamily===this._localIdeographFontFamily&&!s.config?(this.style._diffStyle(p,(u,m)=>{u?(o.w(`Unable to perform style diff: ${String(u.message||u.error||u)}. Rebuilding the style from scratch.`),this._updateStyle(p,s)):m&&this._update(!0)},()=>{this._postStyleLoadEvent()}),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._localFontFamily=s.localFontFamily,this._updateStyle(p,s))}_getUIString(p){const s=this._locale[p];if(s==null)throw new Error(`Missing UI string '${p}'`);return s}_updateStyle(p,s){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),p){const u=o.l({},s);s&&s.config&&(u.initialConfig=s.config,delete u.config),this.style=new ts(this,u).load(p),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new ts(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(o.w("There is no style added to the map."),!1)}_isValidId(p){return p==null?(this.fire(new o.t(new Error("IDs can't be empty."))),!1):!o.cn(p)||(this.fire(new o.t(new Error(`IDs can't contain special symbols: "${p}".`))),!1)}addSource(p,s){return this._isValidId(p)?(this._lazyInitEmptyStyle(),this.style.addSource(p,s),this._update(!0)):this}isSourceLoaded(p){return!!this._isValidId(p)&&!!this.style&&this.style._isSourceCacheLoaded(p)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(p,s,u){this._lazyInitEmptyStyle(),this.style.addSourceType(p,s,u)}removeSource(p){return this._isValidId(p)?(this.style.removeSource(p),this._updateTerrain(),this._update(!0)):this}getSource(p){return this._isValidId(p)?this.style.getOwnSource(p):null}addImage(p,s,{pixelRatio:u=1,sdf:m=!1,stretchX:_,stretchY:w,content:C}={}){if(this._lazyInitEmptyStyle(),s instanceof HTMLImageElement||ImageBitmap&&s instanceof ImageBitmap){const{width:D,height:L,data:z}=o.q.getImageData(s);this.style.addImage(p,{data:new o.r({width:D,height:L},z),pixelRatio:u,stretchX:_,stretchY:w,content:C,sdf:m,version:0})}else if(s.width===void 0||s.height===void 0)this.fire(new o.t(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:D,height:L}=s,z=s;this.style.addImage(p,{data:new o.r({width:D,height:L},new Uint8Array(z.data)),pixelRatio:u,stretchX:_,stretchY:w,content:C,sdf:m,version:0,userImage:z}),z.onAdd&&z.onAdd(this,p)}}updateImage(p,s){this._lazyInitEmptyStyle();const u=this.style.getImage(p);if(!u)return void this.fire(new o.t(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=s instanceof HTMLImageElement||ImageBitmap&&s instanceof ImageBitmap?o.q.getImageData(s):s,{width:_,height:w,data:C}=m;if(_===void 0||w===void 0)return void this.fire(new o.t(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_!==u.data.width||w!==u.data.height)return void this.fire(new o.t(new Error(`The width and height of the updated image (${_}, ${w})
                must be that same as the previous version of the image
                (${u.data.width}, ${u.data.height})`)));const D=!(s instanceof HTMLImageElement||ImageBitmap&&s instanceof ImageBitmap);u.data.replace(C,D),this.style.updateImage(p,u)}hasImage(p){return p?!!this.style&&!!this.style.getImage(p):(this.fire(new o.t(new Error("Missing required image id"))),!1)}removeImage(p){this.style.removeImage(p)}loadImage(p,s){o.o(this._requestManager.transformRequest(p,o.R.Image),(u,m)=>{s(u,m instanceof HTMLImageElement?o.q.getImageData(m):m)})}listImages(){return this.style.listImages()}addModel(p,s){this._lazyInitEmptyStyle(),this.style.addModel(p,s)}hasModel(p){return p?this.style.hasModel(p):(this.fire(new o.t(new Error("Missing required model id"))),!1)}removeModel(p){this.style.removeModel(p)}listModels(){return this.style.listModels()}addLayer(p,s){return this._isValidId(p.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(p,s),this._update(!0)):this}getSlot(p){const s=this.getLayer(p);return s&&s.slot||null}setSlot(p,s){return this.style.setSlot(p,s),this.style.mergeLayers(),this._update(!0)}addImport(p,s){return this.style.addImport(p,s),this}updateImport(p,s){return typeof s!="string"&&s.id!==p?(this.removeImport(p),this.addImport(s)):(this.style.updateImport(p,s),this._update(!0))}removeImport(p){return this.style.removeImport(p),this}moveImport(p,s){return this.style.moveImport(p,s),this._update(!0)}moveLayer(p,s){return this._isValidId(p)?(this.style.moveLayer(p,s),this._update(!0)):this}removeLayer(p){return this._isValidId(p)?(this.style.removeLayer(p),this._update(!0)):this}getLayer(p){if(!this._isValidId(p))return null;const s=this.style.getOwnLayer(p);return s?s.type==="custom"?s.implementation:s.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(p,s,u){return this._isValidId(p)?(this.style.setLayerZoomRange(p,s,u),this._update(!0)):this}setFilter(p,s,u={}){return this._isValidId(p)?(this.style.setFilter(p,s,u),this._update(!0)):this}getFilter(p){return this._isValidId(p)?this.style.getFilter(p):null}setPaintProperty(p,s,u,m={}){return this._isValidId(p)?(this.style.setPaintProperty(p,s,u,m),this._update(!0)):this}getPaintProperty(p,s){return this._isValidId(p)?this.style.getPaintProperty(p,s):null}setLayoutProperty(p,s,u,m={}){return this._isValidId(p)?(this.style.setLayoutProperty(p,s,u,m),this._update(!0)):this}getLayoutProperty(p,s){return this._isValidId(p)?this.style.getLayoutProperty(p,s):null}getSchema(p){return this.style.getSchema(p)}setSchema(p,s){return this.style.setSchema(p,s),this._update(!0)}getConfig(p){return this.style.getConfig(p)}setConfig(p,s){return this.style.setConfig(p,s),this._update(!0)}getConfigProperty(p,s){return this.style.getConfigProperty(p,s)}setConfigProperty(p,s,u){return this.style.setConfigProperty(p,s,u),this._update(!0)}setLights(p){if(this._lazyInitEmptyStyle(),p&&p.length===1&&p[0].type==="flat"){const s=p[0];s.properties?this.style.setFlatLight(s.properties,s.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(p),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const p=this.style.getLights()||[];return p.length===0&&p.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),p}setLight(p,s={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:p}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(p){return this._lazyInitEmptyStyle(),!p&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(p),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(p){return this._lazyInitEmptyStyle(),this.style.setFog(p),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setColorTheme(p){return this._lazyInitEmptyStyle(),this.style.setColorTheme(p),this._update(!0)}setCamera(p){return this.style.setCamera(p),this._triggerCameraUpdate(p)}_triggerCameraUpdate(p){return this._update(this.transform.setOrthographicProjectionAtLowPitch(p["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(p){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(o.bK.convert(p),this.transform):0}setFeatureState(p,s){return this._isValidId(p.source)?(this.style.setFeatureState(p,s),this._update()):this}removeFeatureState(p,s){return this._isValidId(p.source)?(this.style.removeFeatureState(p,s),this._update()):this}getFeatureState(p){return this._isValidId(p.source)?this.style.getFeatureState(p):null}_updateContainerDimensions(){if(!this._container)return;const p=this._container.getBoundingClientRect().width||400,s=this._container.getBoundingClientRect().height||300;let u,m,_,w=this._container;for(;w&&(!m||!_);){const C=window.getComputedStyle(w).transform;C&&C!=="none"&&(u=C.match(/matrix.*\((.+)\)/)[1].split(", "),u[0]&&u[0]!=="0"&&u[0]!=="1"&&(m=u[0]),u[3]&&u[3]!=="0"&&u[3]!=="1"&&(_=u[3])),w=w.parentElement}this._containerWidth=m?Math.abs(p/m):p,this._containerHeight=_?Math.abs(s/_):s}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const p=this._container;p.classList.add("mapboxgl-map"),(this._missingCSSCanary=ee("div","mapboxgl-canary",p)).style.visibility="hidden",this._detectMissingCSS();const s=this._canvasContainer=ee("div","mapboxgl-canvas-container",p);this._canvas=ee("canvas","mapboxgl-canvas",s),this._interactive&&(s.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const u=this._controlContainer=ee("div","mapboxgl-control-container",p),m=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(_=>{m[_]=ee("div",`mapboxgl-ctrl-${_}`,u)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(p,s){const u=o.q.devicePixelRatio||1;this._canvas.width=u*Math.ceil(p),this._canvas.height=u*Math.ceil(s),this._canvas.style.width=`${p}px`,this._canvas.style.height=`${s}px`}_addMarker(p){this._markers.push(p)}_removeMarker(p){const s=this._markers.indexOf(p);s!==-1&&this._markers.splice(s,1)}_addPopup(p){this._popups.push(p)}_removePopup(p){const s=this._popups.indexOf(p);s!==-1&&this._popups.splice(s,1)}_setupPainter(){const p=o.l({},K.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),s=this._canvas.getContext("webgl2",p);s?(ko(s,!0),this.painter=new vv(s,this._contextCreateOptions,this.transform,this._tp),this.on("data",u=>{u.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),o.m.testSupport(s)):this.fire(new o.t(new Error("Failed to initialize WebGL")))}_contextLost(p){p.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.x("webglcontextlost",{originalEvent:p}))}_contextRestored(p){this._setupPainter(),this.resize(),this._update(),this.fire(new o.x("webglcontextrestored",{originalEvent:p}))}_onMapScroll(p){if(p.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(p){return this.style?(this._styleDirty=this._styleDirty||p,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(p){return this._update(),this._renderTaskQueue.add(p)}_cancelRenderFrame(p){this._renderTaskQueue.remove(p)}_requestDomTask(p){!this.loaded()||this.loaded()&&!this.isMoving()?p():this._domRenderTaskQueue.add(p)}_render(p){let s;this.fire(new o.x("renderstart")),++this._frameId;const u=this.painter.context.extTimerQuery,m=o.q.now(),_=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(s=_.createQuery(),_.beginQuery(u.TIME_ELAPSED_EXT,s)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(p),this._domRenderTaskQueue.run(p),this._removed)return;this._updateProjectionTransition();const w=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const z=this.transform.zoom,N=this.transform.pitch,j=o.q.now(),q=new o.a3(z,{now:j,fadeDuration:w,pitch:N,transition:this.style.transition});this.style.update(q)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let C=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),C=this._updateAverageElevation(m),this.style.updateSources(this.transform),this._forceMarkerAndPopupUpdate()):C=this._updateAverageElevation(m);const D=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,w,this._crossSourceCollisions,this.painter.replacementSource);if(D&&(this._placementDirty=D.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:w,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new o.x("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,k.mark(S.load),this.fire(new o.x("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),s){const z=o.q.now()-m;_.endQuery(u.TIME_ELAPSED_EXT),setTimeout(()=>{const N=_.getQueryParameter(s,_.QUERY_RESULT)/1e6;_.deleteQuery(s),this.fire(new o.x("gpu-timing-frame",{cpuTime:z,gpuTime:N}))},50)}if(this.listens("gpu-timing-layer")){const z=this.painter.collectGpuTimers();setTimeout(()=>{const N=this.painter.queryGpuTimers(z);this.fire(new o.x("gpu-timing-layer",{layerTimes:N}))},50)}if(this.listens("gpu-timing-deferred-render")){const z=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const N=this.painter.queryGpuTimeDeferredRender(z);this.fire(new o.x("gpu-timing-deferred-render",{gpuTime:N}))},50)}const L=this._sourcesDirty||this._styleDirty||this._placementDirty||C;if(L||this._repaint)this.triggerRepaint();else{const z=this.idle();if(z&&(C=this._updateAverageElevation(m,!0)),C)this.triggerRepaint();else if(this._triggerFrame(!1),z&&(this.fire(new o.x("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const N=this._calculateSpeedIndex();this.fire(new o.x("speedindexcompleted",{speedIndex:N})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||L||(this._fullyLoaded=!0,k.mark(S.fullLoad),this._performanceMetricsCollection&&qi(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(p){for(const s of this._markers)p&&!this.getRenderWorldCopies()&&(s._lngLat=s._lngLat.wrap()),s._update();for(const s of this._popups)!p||this.getRenderWorldCopies()||s._trackPointer||(s._lngLat=s._lngLat.wrap()),s._update()}_updateAverageElevation(p,s=!1){const u=_=>(this.transform.averageElevation=_,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&u(0);const m=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(m||(s||p-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(p)){const _=this.transform.averageElevation;let w=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(w)?w=0:this._averageElevationLastSampledAt=p;const C=Math.abs(_-w);if(C>1){if(this._isInitialLoad||m)return this._averageElevation.jumpTo(w),u(w);this._averageElevation.easeTo(w,p,300)}else if(C>1e-4)return this._averageElevation.jumpTo(w),u(w)}return!!this._averageElevation.isEasing(p)&&u(this._averageElevation.getValue(p))}_authenticate(){ke(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,p=>{if(p&&(p.message===gt||p.status===401)){const s=this.painter.context.gl;ko(s,!1),this._logoControl instanceof Iv&&this._logoControl._updateLogo(),s&&s.clear(s.DEPTH_BUFFER_BIT|s.COLOR_BUFFER_BIT|s.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new o.t(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),Or(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&qr(this._requestManager._customAccessToken,{map:this,skuToken:this._requestManager._skuToken,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const p=this._isDragging();this.painter.updateTerrain(this.style,p)}_calculateSpeedIndex(){const p=this.painter.canvasCopy(),s=this.painter.getCanvasCopiesAndTimestamps();s.timeStamps.push(performance.now());const u=this.painter.context.gl,m=u.createFramebuffer();function _(w){u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,w,0);const C=new Uint8Array(u.drawingBufferWidth*u.drawingBufferHeight*4);return u.readPixels(0,0,u.drawingBufferWidth,u.drawingBufferHeight,u.RGBA,u.UNSIGNED_BYTE,C),C}return u.bindFramebuffer(u.FRAMEBUFFER,m),this._canvasPixelComparison(_(p),s.canvasCopies.map(_),s.timeStamps)}_canvasPixelComparison(p,s,u){let m=u[1]-u[0];const _=p.length/4;for(let w=0;w<s.length;w++){const C=s[w];let D=0;for(let L=0;L<C.length;L+=4)C[L]===p[L]&&C[L+1]===p[L+1]&&C[L+2]===p[L+2]&&C[L+3]===p[L+3]&&(D+=1);m+=(u[w+2]-u[w+1])*(1-D/_)}return m}remove(){this._hash&&this._hash.remove();for(const s of this._controls)s.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const p=this.painter.context.gl.getExtension("WEBGL_lose_context");p&&p.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),ao.delete(this.painter.context.gl),Xi.remove(),Rt.remove(),this._removed=!0,this.fire(new o.x("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(p){this._renderNextFrame=this._renderNextFrame||p,this.style&&!this._frame&&(this._frame=o.q.frame(s=>{const u=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,u&&this._render(s)}))}_preloadTiles(p){const s=this.style?this.style.getSourceCaches():[];return o.bf(s,(u,m)=>u._preloadTiles(p,m),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(p){this._trackResize&&this.resize({originalEvent:p})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(p){this._showTileBoundaries!==p&&(this._showTileBoundaries=p,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(p){this._showParseStatus!==p&&(this._showParseStatus=p,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(p){this._showTerrainWireframe!==p&&(this._showTerrainWireframe=p,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(p){this._showLayers2DWireframe!==p&&(this._showLayers2DWireframe=p,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(p){this._showLayers3DWireframe!==p&&(this._showLayers3DWireframe=p,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(p){this._speedIndexTiming!==p&&(this._speedIndexTiming=p,this._update())}get showPadding(){return!!this._showPadding}set showPadding(p){this._showPadding!==p&&(this._showPadding=p,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(p){this._showCollisionBoxes!==p&&(this._showCollisionBoxes=p,this._tp.refreshUI(),p?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(p){this._showOverdrawInspector!==p&&(this._showOverdrawInspector=p,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(p){this._repaint!==p&&(this._repaint=p,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(p){this._vertices=p,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(p){this._showTileAABBs!==p&&(this._showTileAABBs=p,this._tp.refreshUI(),p&&this._update())}_setCacheLimits(p,s){o.dy(p,s)}get version(){return x}},NavigationControl:class{constructor(p={}){this.options=o.l({},Cf,p),this._container=ee("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(o.aJ(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",s=>{this._map&&this._map.zoomIn({},{originalEvent:s})}),ee("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",s=>{this._map&&this._map.zoomOut({},{originalEvent:s})}),ee("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(o.aJ(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",s=>{const u=this._map;u&&(this.options.visualizePitch?u.resetNorthPitch({},{originalEvent:s}):u.resetNorth({},{originalEvent:s}))}),this._compassIcon=ee("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const p=this._map;if(!p)return;const s=p.getZoom(),u=s===p.getMaxZoom(),m=s===p.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())}_rotateCompassArrow(){const p=this._map;if(!p)return;const s=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(p.transform.pitch*(Math.PI/180)),.5)}) rotateX(${p.transform.pitch}deg) rotateZ(${p.transform.angle*(180/Math.PI)}deg)`:`rotate(${p.transform.angle*(180/Math.PI)}deg)`;p._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=s)})}onAdd(p){return this._map=p,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),p.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&p.on("pitch",this._rotateCompassArrow),p.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Bh(p,this._compass,this.options.visualizePitch)),this._container}onRemove(){const p=this._map;p&&(this._container.remove(),this.options.showZoom&&p.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&p.off("pitch",this._rotateCompassArrow),p.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(p,s){const u=ee("button",p,this._container);return u.type="button",u.addEventListener("click",s),u}_setButtonTitle(p,s){if(!this._map)return;const u=this._map._getUIString(`NavigationControl.${s}`);p.setAttribute("aria-label",u),p.firstElementChild&&p.firstElementChild.setAttribute("title",u)}},GeolocateControl:class extends o.E{constructor(p={}){super();const s=navigator.geolocation;this.options=o.l({geolocation:s},nA,p),o.aJ(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=uc(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(p){return this._map=p,this._container=ee("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(p){const s=(u=!!this.options.geolocation)=>{this._supportsGeolocation=u,p(u)};this._supportsGeolocation!==void 0?p(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(u=>s(u.state!=="denied")).catch(()=>s()):s()}_isOutOfMapMaxBounds(p){const s=this._map.getMaxBounds(),u=p.coords;return!!s&&(u.longitude<s.getWest()||u.longitude>s.getEast()||u.latitude<s.getSouth()||u.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(p){if(this._map){if(this._isOutOfMapMaxBounds(p))return this._setErrorState(),this.fire(new o.x("outofmaxbounds",p)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=p,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(p),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(p),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new o.x("geolocate",p)),this._finish()}}_updateCamera(p){const s=new o.bK(p.coords.longitude,p.coords.latitude),u=p.coords.accuracy,m=this._map.getBearing(),_=o.l({bearing:m},this.options.fitBoundsOptions);this._map.fitBounds(s.toBounds(u),_,{geolocateSource:!0})}_updateMarker(p){if(p){const s=new o.bK(p.coords.longitude,p.coords.latitude);this._accuracyCircleMarker.setLngLat(s).addTo(this._map),this._userLocationDotMarker.setLngLat(s).addTo(this._map),this._accuracy=p.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const p=this._map.transform,s=o.bD(1,p._center.lat)*p.worldSize,u=Math.ceil(2*this._accuracy*s);this._circleElement.style.width=`${u}px`,this._circleElement.style.height=`${u}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(p){if(this._map){if(this.options.trackUserLocation)if(p.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",s),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",s),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(p.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new o.x("error",p)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(p){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=ee("button","mapboxgl-ctrl-geolocate",this._container),ee("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",p===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",s),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",s)}else{const s=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",s),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",s)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=ee("div","mapboxgl-user-location"),this._dotElement.appendChild(ee("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(ee("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new bl({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=ee("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new bl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",s=>{s.geolocateSource||this._watchState!=="ACTIVE_LOCK"||s.originalEvent&&s.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new o.x("trackuserlocationend")))})}}_onDeviceOrientation(p){this._userLocationDotMarker&&(p.webkitCompassHeading?this._heading=p.webkitCompassHeading:p.absolute===!0&&(this._heading=-1*p.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.x("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.x("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.x("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let p;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(p={maximumAge:6e5,timeout:0},this._noTimeout=!0):(p=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,p),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const p=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(s=>{s==="granted"&&p()}).catch(console.error):p()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Em,ScaleControl:class{constructor(p={}){this.options=o.l({},au,p),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),o.aJ(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const p=this.options.maxWidth||100,s=this._map,u=s._containerHeight/2,m=s._containerWidth/2-p/2,_=s.unproject([m,u]),w=s.unproject([m+p,u]),C=_.distanceTo(w);if(this.options.unit==="imperial"){const D=3.2808*C;D>5280?this._setScale(p,D/5280,"mile"):this._setScale(p,D,"foot")}else this.options.unit==="nautical"?this._setScale(p,C/1852,"nautical-mile"):C>=1e3?this._setScale(p,C/1e3,"kilometer"):this._setScale(p,C,"meter")}_setScale(p,s,u){this._map._requestDomTask(()=>{const m=function(w){const C=Math.pow(10,`${Math.floor(w)}`.length-1);let D=w/C;return D=D>=10?10:D>=5?5:D>=3?3:D>=2?2:D>=1?1:function(L){const z=Math.pow(10,Math.ceil(-Math.log(L)/Math.LN10));return Math.round(L*z)/z}(D),C*D}(s),_=m/s;this._container.innerHTML=this._isNumberFormatSupported&&u!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:u}).format(m):`${m}&nbsp;${NT[u]}`,this._container.style.width=p*_+"px"})}onAdd(p){return this._map=p,this._language=p.getLanguage(),this._container=ee("div","mapboxgl-ctrl mapboxgl-ctrl-scale",p.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(p){this._language=p,this._update()}setUnit(p){this.options.unit=p,this._update()}},FullscreenControl:class{constructor(p={}){this._fullscreen=!1,p&&p.container&&(p.container instanceof HTMLElement?this._container=p.container:o.w("Full screen control 'container' must be a DOM element.")),o.aJ(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(p){return this._map=p,this._container||(this._container=this._map.getContainer()),this._controlContainer=ee("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const p=this._fullscreenButton=ee("button","mapboxgl-ctrl-fullscreen",this._controlContainer);ee("span","mapboxgl-ctrl-icon",p).setAttribute("aria-hidden","true"),p.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const p=this._getTitle();this._fullscreenButton.setAttribute("aria-label",p),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",p)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends o.E{constructor(p){super(),this.options=o.l(Object.create(VT),p),o.aJ(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(p&&p.className?p.className.trim().split(/\s+/):[])}addTo(p){return this._map&&this.remove(),this._map=p,this.options.closeOnClick&&p.on("preclick",this._onClose),this.options.closeOnMove&&p.on("move",this._onClose),p.on("remove",this.remove),this._update(),p._addPopup(this),this._focusFirstElement(),this._trackPointer?(p.on("mousemove",this._onMouseEvent),p.on("mouseup",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")):p.on("move",this._update),this.fire(new o.x("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const p=this._map;return p&&(p.off("move",this._update),p.off("move",this._onClose),p.off("preclick",this._onClose),p.off("click",this._onClose),p.off("remove",this.remove),p.off("mousemove",this._onMouseEvent),p.off("mouseup",this._onMouseEvent),p.off("drag",this._onMouseEvent),p._canvasContainer&&p._canvasContainer.classList.remove("mapboxgl-track-pointer"),p._removePopup(this),this._map=void 0),this.fire(new o.x("close")),this}getLngLat(){return this._lngLat}setLngLat(p){this._lngLat=o.bK.convert(p),this._pos=null,this._trackPointer=!1,this._update();const s=this._map;return s&&(s.on("move",this._update),s.off("mousemove",this._onMouseEvent),s._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const p=this._map;return p&&(p.off("move",this._update),p.on("mousemove",this._onMouseEvent),p.on("drag",this._onMouseEvent),p._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(p){return this.setDOMContent(document.createTextNode(p))}setHTML(p){const s=document.createDocumentFragment(),u=document.createElement("body");let m;for(u.innerHTML=p;m=u.firstChild,m;)s.appendChild(m);return this.setDOMContent(s)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(p){return this.options.maxWidth=p,this._update(),this}setDOMContent(p){let s=this._content;if(s)for(;s.hasChildNodes();)s.firstChild&&s.removeChild(s.firstChild);else s=this._content=ee("div","mapboxgl-popup-content",this._container||void 0);if(s.appendChild(p),this.options.closeButton){const u=this._closeButton=ee("button","mapboxgl-popup-close-button",s);u.type="button",u.setAttribute("aria-label","Close popup"),u.setAttribute("aria-hidden","true"),u.innerHTML="&#215;",u.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(p){return this._classList.add(p),this._updateClassList(),this}removeClassName(p){return this._classList.delete(p),this._updateClassList(),this}setOffset(p){return this.options.offset=p,this._update(),this}toggleClassName(p){let s;return this._classList.delete(p)?s=!1:(this._classList.add(p),s=!0),this._updateClassList(),s}_onMouseEvent(p){this._update(p.point)}_getAnchor(p){if(this.options.anchor)return this.options.anchor;const s=this._map,u=this._container,m=this._pos;if(!s||!u||!m)return"bottom";const _=u.offsetWidth,w=u.offsetHeight,C=m.x<_/2,D=m.x>s.transform.width-_/2;if(m.y+p<w)return C?"top-left":D?"top-right":"top";if(m.y>s.transform.height-w){if(C)return"bottom-left";if(D)return"bottom-right"}return C?"left":D?"right":"bottom"}_updateClassList(){const p=this._container;if(!p)return;const s=[...this._classList];s.push("mapboxgl-popup"),this._anchor&&s.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&s.push("mapboxgl-popup-track-pointer"),p.className=s.join(" ")}_update(p){const s=this._map,u=this._content;if(!s||!this._lngLat&&!this._trackPointer||!u)return;let m=this._container;if(m||(m=this._container=ee("div","mapboxgl-popup",s.getContainer()),this._tip=ee("div","mapboxgl-popup-tip",m),m.appendChild(u)),this.options.maxWidth&&m.style.maxWidth!==this.options.maxWidth&&(m.style.maxWidth=this.options.maxWidth),s.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=xl(this._lngLat,this._pos,s.transform)),!this._trackPointer||p){const _=this._pos=this._trackPointer&&p instanceof o.P?p:s.project(this._lngLat),w=gb(this.options.offset),C=this._anchor=this._getAnchor(w.y),D=gb(this.options.offset,C),L=_.add(D).round();s._requestDomTask(()=>{this._container&&C&&(this._container.style.transform=`${ns[C]} translate(${L.x}px,${L.y}px)`)})}if(!this._marker&&s._showingGlobe()){const _=o.dz(s.transform,this._lngLat)?0:1;this._setOpacity(_)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const p=this._container.querySelector(HT);p&&p.focus()}_onClose(){this.remove()}_setOpacity(p){this._container&&(this._container.style.opacity=`${p}`),this._content&&(this._content.style.pointerEvents=p?"auto":"none")}},Marker:bl,Style:ts,LngLat:o.bK,LngLatBounds:o.as,Point:o.P,MercatorCoordinate:o.a5,FreeCameraOptions:Yc,Evented:o.E,config:o.e,prewarm:o.dE,clearPrewarmedResources:o.dF,get accessToken(){return o.e.ACCESS_TOKEN},set accessToken(p){o.e.ACCESS_TOKEN=p},get baseApiUrl(){return o.e.API_URL},set baseApiUrl(p){o.e.API_URL=p},get workerCount(){return o.dG.workerCount},set workerCount(p){o.dG.workerCount=p},get maxParallelImageRequests(){return o.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(p){o.e.MAX_PARALLEL_IMAGE_REQUESTS=p},clearStorage(p){o.dH(p)},get workerUrl(){return o.dI.workerUrl},set workerUrl(p){o.dI.workerUrl=p},get workerClass(){return o.dI.workerClass},set workerClass(p){o.dI.workerClass=p},get workerParams(){return o.dI.workerParams},set workerParams(p){o.dI.workerParams=p},get dracoUrl(){return o.dJ()},set dracoUrl(p){o.dK(p)},get meshoptUrl(){return o.dL()},set meshoptUrl(p){o.dM(p)},setNow:o.q.setNow,restoreNow:o.q.restoreNow}});var y=c;return y})})(Iq);var PFe=Iq.exports;const _D=V1(PFe),DFe=Kde({displayName:"CloseIcon",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"}),kFe="pk.eyJ1IjoiY2hyaXN0aWFuLWJ1cm5zcmVkIiwiYSI6ImNtMjltczVwajA3Z2IyaXBzZGlqNXhtaWkifQ.9FC3d6uBtpOL5sn-LlRoaw";_D.accessToken=kFe;const RFe=()=>{const[e,t]=Se.useState(null),[r,n]=Se.useState(null),[i,c]=Se.useState(null),[d,y]=Se.useState(null),[o,x]=Se.useState(null),[S,k]=Se.useState(null),[O,Q]=Se.useState(null),[G,K]=Se.useState({lat:-37.81627664587091,lng:144.9858104478029}),[ee,W]=Se.useState(""),J=Se.useRef(null),re=Se.useRef(null),ue=Se.useRef(null),ce=Se.useRef(null),[he,xe]=Se.useState(window.innerWidth);Se.useEffect(()=>{const gt=()=>{xe(window.innerWidth)};return window.addEventListener("resize",gt),()=>{window.removeEventListener("resize",gt)}},[]),Se.useEffect(()=>{const gt={params:{operation:e||"",leadObserver:r||"",riskSelected:i||"",controlFrameworkSelected:d||"",operatingContexts:o||"",equipmentSelected:S||""}};(async()=>{try{const ot=await IFe(gt);W(ot)}catch(ot){console.error("Failed to generate QR code URL",ot)}})()},[e,r,i,d,o,S]),Se.useEffect(()=>(J.current&&(re.current=new _D.Map({container:J.current,center:G,zoom:14}),re.current.on("click",gt=>{const Et=gt.lngLat;Q({lat:Et.lat,lng:Et.lng}),ue.current&&ue.current.remove(),ue.current=new _D.Marker().setLngLat(Et).addTo(re.current)})),()=>{re.current&&re.current.remove()}),[]),Se.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(gt=>{const{latitude:Et,longitude:ot}=gt.coords;K({lat:Et,lng:ot}),console.log("User's location:",{latitude:Et,longitude:ot})},gt=>{console.error("Error fetching user's location:",gt)},{enableHighAccuracy:!0})},[]);const fe=Object.entries(w9||{}).map(([gt,Et])=>({label:`${gt} - ${Et.site}`,value:gt})),Ue=Object.entries(B9||{}).map(([gt,Et])=>({label:`${gt} - ${Et.label}`,value:gt,icon:Et.icon})),Ge=i?Object.entries(C9[i]||{}).map(([gt,Et])=>({label:`${gt} - ${Et.control}`,value:gt})):[],He=d?Object.entries(S9[d]||{}).map(([gt,Et])=>({label:`${gt} - ${Et.operating_context}`,value:gt})):[],tt=o?Object.entries(E9[o]||{}).map(([gt,Et])=>({label:`${gt} - ${Et.equipment}`,value:gt})):[],pt=gt=>{const Et=(gt==null?void 0:gt.value)||null;t(Et),n(null),c(null),y(null),x(null),k(null)};return Je.jsxs(DE,{width:"100vw",spacing:4,align:"start",flexDirection:he<950?"column":"row",children:[Je.jsxs(Li,{position:"relative",bg:"gray.100",width:he<950?"100%":"50%",height:"100%",padding:4,children:[Je.jsx(m2,{children:"Parameters"}),Je.jsx(jf,{as:"b",fontSize:"sm",children:"Operation"}),Je.jsx(Ey,{options:fe,value:fe.find(gt=>gt.value===e)||null,onChange:pt}),Je.jsx(jf,{as:"b",fontSize:"sm",children:"Controls"}),Je.jsx(Ey,{options:Ue,value:Ue.find(gt=>gt.value===i)||null,isDisabled:!e,onChange:gt=>c((gt==null?void 0:gt.value)||null)}),Je.jsx(jf,{as:"b",fontSize:"sm",children:"Control Framework"}),Je.jsx(Ey,{options:Ge,value:Ge.find(gt=>gt.value===d)||null,isDisabled:!i,onChange:gt=>y((gt==null?void 0:gt.value)||null)}),Je.jsx(jf,{as:"b",fontSize:"sm",children:"Operating Context"}),Je.jsx(Ey,{options:He,value:He.find(gt=>gt.value===o)||null,isDisabled:!d,onChange:gt=>x((gt==null?void 0:gt.value)||null)}),Je.jsx(jf,{as:"b",fontSize:"sm",children:"Equipment"}),Je.jsx(Ey,{options:tt,value:tt.find(gt=>gt.value===S)||null,isDisabled:!o,onChange:gt=>k((gt==null?void 0:gt.value)||null)}),Je.jsx(jf,{as:"b",fontSize:"sm",children:"Location (Lat, Lng)"}),Je.jsxs(x7,{mb:4,children:[Je.jsx(f2,{value:O?`${O.lat}, ${O.lng}`:"",readOnly:!0,placeholder:"Select a location on the map"}),O&&Je.jsx(d2,{children:Je.jsx(l7,{"aria-label":"Clear location",icon:Je.jsx(DFe,{}),size:"xs",onClick:()=>{Q(null),ue.current&&(ue.current.remove(),ue.current=null)},bg:"transparent"})})]}),Je.jsx(Li,{height:"300px",ref:J,style:{width:"100%"}})]}),Je.jsxs(Li,{position:"relative",width:he<950?"100%":"50%",height:"92vh",padding:4,children:[Je.jsx(TFe,{value:ee,summaryTableRef:ce}),Je.jsx(MFe,{ref:ce,selectedOperation:e,selectedControl:i,selectedControlFramework:d,selectedOperatingContext:o,selectedEquipment:S,locationCoords:O})]})]})};function LFe(){return Je.jsxs(cfe,{children:[Je.jsx(Ome,{}),Je.jsx(DE,{children:Je.jsx(RFe,{})})]})}FH(document.getElementById("root")).render(Je.jsx(Se.StrictMode,{children:Je.jsx(LFe,{})}));
